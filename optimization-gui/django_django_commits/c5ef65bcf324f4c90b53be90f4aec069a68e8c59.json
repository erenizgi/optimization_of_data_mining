{
    "author": "aaugustin",
    "message": "[py3] Ported django.utils.encoding.\n\n* Renamed smart_unicode to smart_text (but kept the old name under\n  Python 2 for backwards compatibility).\n* Renamed smart_str to smart_bytes.\n* Re-introduced smart_str as an alias for smart_text under Python 3\n  and smart_bytes under Python 2 (which is backwards compatible).\n  Thus smart_str always returns a str objects.\n* Used the new smart_str in a few places where both Python 2 and 3\n  want a str.",
    "sha": "c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
    "files": [
        {
            "sha": "201101736e92ce748f0fe722eeb3c79336829fed",
            "filename": "django/contrib/admin/actions.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Factions.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Factions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Factions.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -7,7 +7,7 @@\n from django.contrib.admin.util import get_deleted_objects, model_ngettext\n from django.db import router\n from django.template.response import TemplateResponse\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.translation import ugettext_lazy, ugettext as _\n \n def delete_selected(modeladmin, request, queryset):\n@@ -42,7 +42,7 @@ def delete_selected(modeladmin, request, queryset):\n         n = queryset.count()\n         if n:\n             for obj in queryset:\n-                obj_display = force_unicode(obj)\n+                obj_display = force_text(obj)\n                 modeladmin.log_deletion(request, obj, obj_display)\n             queryset.delete()\n             modeladmin.message_user(request, _(\"Successfully deleted %(count)d %(items)s.\") % {\n@@ -52,9 +52,9 @@ def delete_selected(modeladmin, request, queryset):\n         return None\n \n     if len(queryset) == 1:\n-        objects_name = force_unicode(opts.verbose_name)\n+        objects_name = force_text(opts.verbose_name)\n     else:\n-        objects_name = force_unicode(opts.verbose_name_plural)\n+        objects_name = force_text(opts.verbose_name_plural)\n \n     if perms_needed or protected:\n         title = _(\"Cannot delete %(name)s\") % {\"name\": objects_name}"
        },
        {
            "sha": "cecae216c087a29ed9c852ce02b25690396aa9c0",
            "filename": "django/contrib/admin/filters.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Ffilters.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Ffilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ffilters.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n \n from django.db import models\n from django.core.exceptions import ImproperlyConfigured\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n from django.utils import timezone\n \n@@ -195,7 +195,7 @@ def choices(self, cl):\n         }\n         for pk_val, val in self.lookup_choices:\n             yield {\n-                'selected': self.lookup_val == smart_unicode(pk_val),\n+                'selected': self.lookup_val == smart_text(pk_val),\n                 'query_string': cl.get_query_string({\n                     self.lookup_kwarg: pk_val,\n                 }, [self.lookup_kwarg_isnull]),\n@@ -272,7 +272,7 @@ def choices(self, cl):\n         }\n         for lookup, title in self.field.flatchoices:\n             yield {\n-                'selected': smart_unicode(lookup) == self.lookup_val,\n+                'selected': smart_text(lookup) == self.lookup_val,\n                 'query_string': cl.get_query_string({\n                                     self.lookup_kwarg: lookup}),\n                 'display': title,\n@@ -381,7 +381,7 @@ def choices(self, cl):\n             if val is None:\n                 include_none = True\n                 continue\n-            val = smart_unicode(val)\n+            val = smart_text(val)\n             yield {\n                 'selected': self.lookup_val == val,\n                 'query_string': cl.get_query_string({"
        },
        {
            "sha": "aeacd234a34ced8fc444048d5c78dee8e6c8ddbb",
            "filename": "django/contrib/admin/helpers.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Fhelpers.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Fhelpers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fhelpers.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n from django.db.models.fields.related import ManyToManyRel\n from django.forms.util import flatatt\n from django.template.defaultfilters import capfirst\n-from django.utils.encoding import force_unicode, smart_unicode\n+from django.utils.encoding import force_text, smart_text\n from django.utils.html import conditional_escape, format_html\n from django.utils.safestring import mark_safe\n from django.utils import six\n@@ -122,7 +122,7 @@ def __init__(self, form, field, is_first):\n \n     def label_tag(self):\n         classes = []\n-        contents = conditional_escape(force_unicode(self.field.label))\n+        contents = conditional_escape(force_text(self.field.label))\n         if self.is_checkbox:\n             classes.append('vCheckboxLabel')\n         else:\n@@ -166,7 +166,7 @@ def label_tag(self):\n         label = self.field['label']\n         return format_html('<label{0}>{1}:</label>',\n                            flatatt(attrs),\n-                           capfirst(force_unicode(label)))\n+                           capfirst(force_text(label)))\n \n     def contents(self):\n         from django.contrib.admin.templatetags.admin_list import _boolean_icon\n@@ -182,7 +182,7 @@ def contents(self):\n                 if boolean:\n                     result_repr = _boolean_icon(value)\n                 else:\n-                    result_repr = smart_unicode(value)\n+                    result_repr = smart_text(value)\n                     if getattr(attr, \"allow_tags\", False):\n                         result_repr = mark_safe(result_repr)\n             else:"
        },
        {
            "sha": "e31c6d84eda34a2cfc40a3ccae8a396697e6f6da",
            "filename": "django/contrib/admin/models.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fmodels.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -5,15 +5,15 @@\n from django.contrib.auth.models import User\n from django.contrib.admin.util import quote\n from django.utils.translation import ugettext_lazy as _\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n \n ADDITION = 1\n CHANGE = 2\n DELETION = 3\n \n class LogEntryManager(models.Manager):\n     def log_action(self, user_id, content_type_id, object_id, object_repr, action_flag, change_message=''):\n-        e = self.model(None, None, user_id, content_type_id, smart_unicode(object_id), object_repr[:200], action_flag, change_message)\n+        e = self.model(None, None, user_id, content_type_id, smart_text(object_id), object_repr[:200], action_flag, change_message)\n         e.save()\n \n class LogEntry(models.Model):\n@@ -34,7 +34,7 @@ class Meta:\n         ordering = ('-action_time',)\n \n     def __repr__(self):\n-        return smart_unicode(self.action_time)\n+        return smart_text(self.action_time)\n \n     def __unicode__(self):\n         if self.action_flag == ADDITION:"
        },
        {
            "sha": "7708050e6f8f64032009763db0faa54e8a06b47f",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 29,
            "deletions": 29,
            "changes": 58,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -28,7 +28,7 @@\n from django.utils.text import capfirst, get_text_list\n from django.utils.translation import ugettext as _\n from django.utils.translation import ungettext\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n HORIZONTAL, VERTICAL = 1, 2\n # returns the <ul> class for a given radio_admin field\n@@ -520,7 +520,7 @@ def log_addition(self, request, object):\n             user_id         = request.user.pk,\n             content_type_id = ContentType.objects.get_for_model(object).pk,\n             object_id       = object.pk,\n-            object_repr     = force_unicode(object),\n+            object_repr     = force_text(object),\n             action_flag     = ADDITION\n         )\n \n@@ -535,7 +535,7 @@ def log_change(self, request, object, message):\n             user_id         = request.user.pk,\n             content_type_id = ContentType.objects.get_for_model(object).pk,\n             object_id       = object.pk,\n-            object_repr     = force_unicode(object),\n+            object_repr     = force_text(object),\n             action_flag     = CHANGE,\n             change_message  = message\n         )\n@@ -560,7 +560,7 @@ def action_checkbox(self, obj):\n         \"\"\"\n         A list_display column containing a checkbox widget.\n         \"\"\"\n-        return helpers.checkbox.render(helpers.ACTION_CHECKBOX_NAME, force_unicode(obj.pk))\n+        return helpers.checkbox.render(helpers.ACTION_CHECKBOX_NAME, force_text(obj.pk))\n     action_checkbox.short_description = mark_safe('<input type=\"checkbox\" id=\"action-toggle\" />')\n     action_checkbox.allow_tags = True\n \n@@ -674,17 +674,17 @@ def construct_change_message(self, request, form, formsets):\n             for formset in formsets:\n                 for added_object in formset.new_objects:\n                     change_message.append(_('Added %(name)s \"%(object)s\".')\n-                                          % {'name': force_unicode(added_object._meta.verbose_name),\n-                                             'object': force_unicode(added_object)})\n+                                          % {'name': force_text(added_object._meta.verbose_name),\n+                                             'object': force_text(added_object)})\n                 for changed_object, changed_fields in formset.changed_objects:\n                     change_message.append(_('Changed %(list)s for %(name)s \"%(object)s\".')\n                                           % {'list': get_text_list(changed_fields, _('and')),\n-                                             'name': force_unicode(changed_object._meta.verbose_name),\n-                                             'object': force_unicode(changed_object)})\n+                                             'name': force_text(changed_object._meta.verbose_name),\n+                                             'object': force_text(changed_object)})\n                 for deleted_object in formset.deleted_objects:\n                     change_message.append(_('Deleted %(name)s \"%(object)s\".')\n-                                          % {'name': force_unicode(deleted_object._meta.verbose_name),\n-                                             'object': force_unicode(deleted_object)})\n+                                          % {'name': force_text(deleted_object._meta.verbose_name),\n+                                             'object': force_text(deleted_object)})\n         change_message = ' '.join(change_message)\n         return change_message or _('No fields changed.')\n \n@@ -769,7 +769,7 @@ def response_add(self, request, obj, post_url_continue='../%s/'):\n         opts = obj._meta\n         pk_value = obj._get_pk_val()\n \n-        msg = _('The %(name)s \"%(obj)s\" was added successfully.') % {'name': force_unicode(opts.verbose_name), 'obj': force_unicode(obj)}\n+        msg = _('The %(name)s \"%(obj)s\" was added successfully.') % {'name': force_text(opts.verbose_name), 'obj': force_text(obj)}\n         # Here, we distinguish between different save types by checking for\n         # the presence of keys in request.POST.\n         if \"_continue\" in request.POST:\n@@ -782,10 +782,10 @@ def response_add(self, request, obj, post_url_continue='../%s/'):\n             return HttpResponse(\n                 '<!DOCTYPE html><html><head><title></title></head><body>'\n                 '<script type=\"text/javascript\">opener.dismissAddAnotherPopup(window, \"%s\", \"%s\");</script></body></html>' % \\\n-                # escape() calls force_unicode.\n+                # escape() calls force_text.\n                 (escape(pk_value), escapejs(obj)))\n         elif \"_addanother\" in request.POST:\n-            self.message_user(request, msg + ' ' + (_(\"You may add another %s below.\") % force_unicode(opts.verbose_name)))\n+            self.message_user(request, msg + ' ' + (_(\"You may add another %s below.\") % force_text(opts.verbose_name)))\n             return HttpResponseRedirect(request.path)\n         else:\n             self.message_user(request, msg)\n@@ -819,22 +819,22 @@ def response_change(self, request, obj):\n \n         pk_value = obj._get_pk_val()\n \n-        msg = _('The %(name)s \"%(obj)s\" was changed successfully.') % {'name': force_unicode(verbose_name), 'obj': force_unicode(obj)}\n+        msg = _('The %(name)s \"%(obj)s\" was changed successfully.') % {'name': force_text(verbose_name), 'obj': force_text(obj)}\n         if \"_continue\" in request.POST:\n             self.message_user(request, msg + ' ' + _(\"You may edit it again below.\"))\n             if \"_popup\" in request.REQUEST:\n                 return HttpResponseRedirect(request.path + \"?_popup=1\")\n             else:\n                 return HttpResponseRedirect(request.path)\n         elif \"_saveasnew\" in request.POST:\n-            msg = _('The %(name)s \"%(obj)s\" was added successfully. You may edit it again below.') % {'name': force_unicode(verbose_name), 'obj': obj}\n+            msg = _('The %(name)s \"%(obj)s\" was added successfully. You may edit it again below.') % {'name': force_text(verbose_name), 'obj': obj}\n             self.message_user(request, msg)\n             return HttpResponseRedirect(reverse('admin:%s_%s_change' %\n                                         (opts.app_label, module_name),\n                                         args=(pk_value,),\n                                         current_app=self.admin_site.name))\n         elif \"_addanother\" in request.POST:\n-            self.message_user(request, msg + ' ' + (_(\"You may add another %s below.\") % force_unicode(verbose_name)))\n+            self.message_user(request, msg + ' ' + (_(\"You may add another %s below.\") % force_text(verbose_name)))\n             return HttpResponseRedirect(reverse('admin:%s_%s_add' %\n                                         (opts.app_label, module_name),\n                                         current_app=self.admin_site.name))\n@@ -995,7 +995,7 @@ def add_view(self, request, form_url='', extra_context=None):\n             media = media + inline_admin_formset.media\n \n         context = {\n-            'title': _('Add %s') % force_unicode(opts.verbose_name),\n+            'title': _('Add %s') % force_text(opts.verbose_name),\n             'adminform': adminForm,\n             'is_popup': \"_popup\" in request.REQUEST,\n             'media': media,\n@@ -1019,7 +1019,7 @@ def change_view(self, request, object_id, form_url='', extra_context=None):\n             raise PermissionDenied\n \n         if obj is None:\n-            raise Http404(_('%(name)s object with primary key %(key)r does not exist.') % {'name': force_unicode(opts.verbose_name), 'key': escape(object_id)})\n+            raise Http404(_('%(name)s object with primary key %(key)r does not exist.') % {'name': force_text(opts.verbose_name), 'key': escape(object_id)})\n \n         if request.method == 'POST' and \"_saveasnew\" in request.POST:\n             return self.add_view(request, form_url=reverse('admin:%s_%s_add' %\n@@ -1085,7 +1085,7 @@ def change_view(self, request, object_id, form_url='', extra_context=None):\n             media = media + inline_admin_formset.media\n \n         context = {\n-            'title': _('Change %s') % force_unicode(opts.verbose_name),\n+            'title': _('Change %s') % force_text(opts.verbose_name),\n             'adminform': adminForm,\n             'object_id': object_id,\n             'original': obj,\n@@ -1194,14 +1194,14 @@ def changelist_view(self, request, extra_context=None):\n \n                 if changecount:\n                     if changecount == 1:\n-                        name = force_unicode(opts.verbose_name)\n+                        name = force_text(opts.verbose_name)\n                     else:\n-                        name = force_unicode(opts.verbose_name_plural)\n+                        name = force_text(opts.verbose_name_plural)\n                     msg = ungettext(\"%(count)s %(name)s was changed successfully.\",\n                                     \"%(count)s %(name)s were changed successfully.\",\n                                     changecount) % {'count': changecount,\n                                                     'name': name,\n-                                                    'obj': force_unicode(obj)}\n+                                                    'obj': force_text(obj)}\n                     self.message_user(request, msg)\n \n                 return HttpResponseRedirect(request.get_full_path())\n@@ -1228,7 +1228,7 @@ def changelist_view(self, request, extra_context=None):\n             'All %(total_count)s selected', cl.result_count)\n \n         context = {\n-            'module_name': force_unicode(opts.verbose_name_plural),\n+            'module_name': force_text(opts.verbose_name_plural),\n             'selection_note': _('0 of %(cnt)s selected') % {'cnt': len(cl.result_list)},\n             'selection_note_all': selection_note_all % {'total_count': cl.result_count},\n             'title': cl.title,\n@@ -1263,7 +1263,7 @@ def delete_view(self, request, object_id, extra_context=None):\n             raise PermissionDenied\n \n         if obj is None:\n-            raise Http404(_('%(name)s object with primary key %(key)r does not exist.') % {'name': force_unicode(opts.verbose_name), 'key': escape(object_id)})\n+            raise Http404(_('%(name)s object with primary key %(key)r does not exist.') % {'name': force_text(opts.verbose_name), 'key': escape(object_id)})\n \n         using = router.db_for_write(self.model)\n \n@@ -1275,11 +1275,11 @@ def delete_view(self, request, object_id, extra_context=None):\n         if request.POST: # The user has already confirmed the deletion.\n             if perms_needed:\n                 raise PermissionDenied\n-            obj_display = force_unicode(obj)\n+            obj_display = force_text(obj)\n             self.log_deletion(request, obj, obj_display)\n             self.delete_model(request, obj)\n \n-            self.message_user(request, _('The %(name)s \"%(obj)s\" was deleted successfully.') % {'name': force_unicode(opts.verbose_name), 'obj': force_unicode(obj_display)})\n+            self.message_user(request, _('The %(name)s \"%(obj)s\" was deleted successfully.') % {'name': force_text(opts.verbose_name), 'obj': force_text(obj_display)})\n \n             if not self.has_change_permission(request, None):\n                 return HttpResponseRedirect(reverse('admin:index',\n@@ -1288,7 +1288,7 @@ def delete_view(self, request, object_id, extra_context=None):\n                                         (opts.app_label, opts.module_name),\n                                         current_app=self.admin_site.name))\n \n-        object_name = force_unicode(opts.verbose_name)\n+        object_name = force_text(opts.verbose_name)\n \n         if perms_needed or protected:\n             title = _(\"Cannot delete %(name)s\") % {\"name\": object_name}\n@@ -1326,9 +1326,9 @@ def history_view(self, request, object_id, extra_context=None):\n         # If no history was found, see whether this object even exists.\n         obj = get_object_or_404(model, pk=unquote(object_id))\n         context = {\n-            'title': _('Change history: %s') % force_unicode(obj),\n+            'title': _('Change history: %s') % force_text(obj),\n             'action_list': action_list,\n-            'module_name': capfirst(force_unicode(opts.verbose_name_plural)),\n+            'module_name': capfirst(force_text(opts.verbose_name_plural)),\n             'object': obj,\n             'app_label': app_label,\n             'opts': opts,"
        },
        {
            "sha": "b8b64d032f32b6ae2a6c89e66be12d1f414eca8b",
            "filename": "django/contrib/admin/templatetags/admin_list.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -15,7 +15,7 @@\n from django.utils import six\n from django.utils.text import capfirst\n from django.utils.translation import ugettext as _\n-from django.utils.encoding import smart_unicode, force_unicode\n+from django.utils.encoding import smart_text, force_text\n from django.template import Library\n from django.template.loader import get_template\n from django.template.context import Context\n@@ -210,7 +210,7 @@ def items_for_result(cl, result, form):\n                     result_repr = display_for_field(value, f)\n                 if isinstance(f, (models.DateField, models.TimeField, models.ForeignKey)):\n                     row_class = mark_safe(' class=\"nowrap\"')\n-        if force_unicode(result_repr) == '':\n+        if force_text(result_repr) == '':\n             result_repr = mark_safe('&nbsp;')\n         # If list_display_links not defined, add the link tag to the first field\n         if (first and not cl.list_display_links) or field_name in cl.list_display_links:\n@@ -224,7 +224,7 @@ def items_for_result(cl, result, form):\n             else:\n                 attr = pk\n             value = result.serializable_value(attr)\n-            result_id = repr(force_unicode(value))[1:]\n+            result_id = repr(force_text(value))[1:]\n             yield format_html('<{0}{1}><a href=\"{2}\"{3}>{4}</a></{5}>',\n                               table_tag,\n                               row_class,\n@@ -241,10 +241,10 @@ def items_for_result(cl, result, form):\n                     field_name == cl.model._meta.pk.name and\n                         form[cl.model._meta.pk.name].is_hidden)):\n                 bf = form[field_name]\n-                result_repr = mark_safe(force_unicode(bf.errors) + force_unicode(bf))\n+                result_repr = mark_safe(force_text(bf.errors) + force_text(bf))\n             yield format_html('<td{0}>{1}</td>', row_class, result_repr)\n     if form and not form[cl.model._meta.pk.name].is_hidden:\n-        yield format_html('<td>{0}</td>', force_unicode(form[cl.model._meta.pk.name]))\n+        yield format_html('<td>{0}</td>', force_text(form[cl.model._meta.pk.name]))\n \n class ResultList(list):\n     # Wrapper class used to return items in a list_editable\n@@ -267,7 +267,7 @@ def result_hidden_fields(cl):\n     if cl.formset:\n         for res, form in zip(cl.result_list, cl.formset.forms):\n             if form[cl.model._meta.pk.name].is_hidden:\n-                yield mark_safe(force_unicode(form[cl.model._meta.pk.name]))\n+                yield mark_safe(force_text(form[cl.model._meta.pk.name]))\n \n @register.inclusion_tag(\"admin/change_list_results.html\")\n def result_list(cl):"
        },
        {
            "sha": "ff90e1d0079a7aa5a99354bf4d8c865fab4407b4",
            "filename": "django/contrib/admin/util.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Futil.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -12,7 +12,7 @@\n from django.utils.html import format_html\n from django.utils.text import capfirst\n from django.utils import timezone\n-from django.utils.encoding import force_unicode, smart_unicode, smart_str\n+from django.utils.encoding import force_text, smart_text, smart_bytes\n from django.utils import six\n from django.utils.translation import ungettext\n from django.core.urlresolvers import reverse\n@@ -132,7 +132,7 @@ def format_callback(obj):\n             # Don't display link to edit, because it either has no\n             # admin or is edited inline.\n             return '%s: %s' % (capfirst(opts.verbose_name),\n-                                force_unicode(obj))\n+                                force_text(obj))\n \n     to_delete = collector.nested(format_callback)\n \n@@ -207,8 +207,8 @@ def model_format_dict(obj):\n     else:\n         opts = obj\n     return {\n-        'verbose_name': force_unicode(opts.verbose_name),\n-        'verbose_name_plural': force_unicode(opts.verbose_name_plural)\n+        'verbose_name': force_text(opts.verbose_name),\n+        'verbose_name_plural': force_text(opts.verbose_name_plural)\n     }\n \n \n@@ -274,10 +274,10 @@ def label_for_field(name, model, model_admin=None, return_attr=False):\n             label = field.verbose_name\n     except models.FieldDoesNotExist:\n         if name == \"__unicode__\":\n-            label = force_unicode(model._meta.verbose_name)\n+            label = force_text(model._meta.verbose_name)\n             attr = six.text_type\n         elif name == \"__str__\":\n-            label = smart_str(model._meta.verbose_name)\n+            label = smart_bytes(model._meta.verbose_name)\n             attr = bytes\n         else:\n             if callable(name):\n@@ -311,7 +311,7 @@ def help_text_for_field(name, model):\n         help_text = model._meta.get_field_by_name(name)[0].help_text\n     except models.FieldDoesNotExist:\n         help_text = \"\"\n-    return smart_unicode(help_text)\n+    return smart_text(help_text)\n \n \n def display_for_field(value, field):\n@@ -335,7 +335,7 @@ def display_for_field(value, field):\n     elif isinstance(field, models.FloatField):\n         return formats.number_format(value)\n     else:\n-        return smart_unicode(value)\n+        return smart_text(value)\n \n \n def display_for_value(value, boolean=False):\n@@ -353,7 +353,7 @@ def display_for_value(value, boolean=False):\n     elif isinstance(value, six.integer_types + (decimal.Decimal, float)):\n         return formats.number_format(value)\n     else:\n-        return smart_unicode(value)\n+        return smart_text(value)\n \n \n class NotRelationField(Exception):"
        },
        {
            "sha": "3eabf3dbebc8c8a1c4c95d5f6b984269f8f3e15b",
            "filename": "django/contrib/admin/views/main.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -6,7 +6,7 @@\n from django.db import models\n from django.db.models.fields import FieldDoesNotExist\n from django.utils.datastructures import SortedDict\n-from django.utils.encoding import force_unicode, smart_str\n+from django.utils.encoding import force_text, smart_bytes\n from django.utils.translation import ugettext, ugettext_lazy\n from django.utils.http import urlencode\n \n@@ -75,7 +75,7 @@ def __init__(self, request, model, list_display, list_display_links,\n             title = ugettext('Select %s')\n         else:\n             title = ugettext('Select %s to change')\n-        self.title = title % force_unicode(self.opts.verbose_name)\n+        self.title = title % force_text(self.opts.verbose_name)\n         self.pk_attname = self.lookup_opts.pk.attname\n \n     def get_filters(self, request):\n@@ -94,7 +94,7 @@ def get_filters(self, request):\n                 # 'key' will be used as a keyword argument later, so Python\n                 # requires it to be a string.\n                 del lookup_params[key]\n-                lookup_params[smart_str(key)] = value\n+                lookup_params[smart_bytes(key)] = value\n \n             if not self.model_admin.lookup_allowed(key, value):\n                 raise SuspiciousOperation(\"Filtering by %s not allowed\" % key)"
        },
        {
            "sha": "1e0bc2d36606dfea801fab68f0947c1057d30953",
            "filename": "django/contrib/admin/widgets.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmin%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fwidgets.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -14,7 +14,7 @@\n from django.utils.text import Truncator\n from django.utils.translation import ugettext as _\n from django.utils.safestring import mark_safe\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils import six\n \n \n@@ -96,7 +96,7 @@ def render(self):\n         return format_html('<ul{0}>\\n{1}\\n</ul>',\n                            flatatt(self.attrs),\n                            format_html_join('\\n', '<li>{0}</li>',\n-                                            ((force_unicode(w),) for w in self)))\n+                                            ((force_text(w),) for w in self)))\n \n class AdminRadioSelect(forms.RadioSelect):\n     renderer = AdminRadioFieldRenderer\n@@ -197,7 +197,7 @@ def render(self, name, value, attrs=None):\n             # The related object is registered with the same AdminSite\n             attrs['class'] = 'vManyToManyRawIdAdminField'\n         if value:\n-            value = ','.join([force_unicode(v) for v in value])\n+            value = ','.join([force_text(v) for v in value])\n         else:\n             value = ''\n         return super(ManyToManyRawIdWidget, self).render(name, value, attrs)\n@@ -221,7 +221,7 @@ def _has_changed(self, initial, data):\n         if len(initial) != len(data):\n             return True\n         for pk1, pk2 in zip(initial, data):\n-            if force_unicode(pk1) != force_unicode(pk2):\n+            if force_text(pk1) != force_text(pk2):\n                 return True\n         return False\n "
        },
        {
            "sha": "0e10eb4fa3ab6a27cad8800467025b4063554db9",
            "filename": "django/contrib/admindocs/utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmindocs%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fadmindocs%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Futils.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -6,7 +6,7 @@\n \n from django.utils.safestring import mark_safe\n from django.core.urlresolvers import reverse\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n try:\n     import docutils.core\n     import docutils.nodes\n@@ -66,7 +66,7 @@ def parse_rst(text, default_reference_context, thing_being_parsed=None):\n         \"link_base\" : reverse('django-admindocs-docroot').rstrip('/')\n     }\n     if thing_being_parsed:\n-        thing_being_parsed = smart_str(\"<%s>\" % thing_being_parsed)\n+        thing_being_parsed = smart_bytes(\"<%s>\" % thing_being_parsed)\n     parts = docutils.core.publish_parts(text, source_path=thing_being_parsed,\n                 destination_path=None, writer_name='html',\n                 settings_overrides=overrides)"
        },
        {
            "sha": "c676cf84db137daeba8e6076c54e11b9ba60d25e",
            "filename": "django/contrib/auth/hashers.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fauth%2Fhashers.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fauth%2Fhashers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fhashers.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -7,7 +7,7 @@\n from django.test.signals import setting_changed\n from django.utils import importlib\n from django.utils.datastructures import SortedDict\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.core.exceptions import ImproperlyConfigured\n from django.utils.crypto import (\n     pbkdf2, constant_time_compare, get_random_string)\n@@ -298,7 +298,7 @@ class SHA1PasswordHasher(BasePasswordHasher):\n     def encode(self, password, salt):\n         assert password\n         assert salt and '$' not in salt\n-        hash = hashlib.sha1(smart_str(salt + password)).hexdigest()\n+        hash = hashlib.sha1(smart_bytes(salt + password)).hexdigest()\n         return \"%s$%s$%s\" % (self.algorithm, salt, hash)\n \n     def verify(self, password, encoded):\n@@ -326,7 +326,7 @@ class MD5PasswordHasher(BasePasswordHasher):\n     def encode(self, password, salt):\n         assert password\n         assert salt and '$' not in salt\n-        hash = hashlib.md5(smart_str(salt + password)).hexdigest()\n+        hash = hashlib.md5(smart_bytes(salt + password)).hexdigest()\n         return \"%s$%s$%s\" % (self.algorithm, salt, hash)\n \n     def verify(self, password, encoded):\n@@ -360,7 +360,7 @@ def salt(self):\n         return ''\n \n     def encode(self, password, salt):\n-        return hashlib.md5(smart_str(password)).hexdigest()\n+        return hashlib.md5(smart_bytes(password)).hexdigest()\n \n     def verify(self, password, encoded):\n         encoded_2 = self.encode(password, '')"
        },
        {
            "sha": "f917ea2601646a4b6a6b765330f1478dc122509b",
            "filename": "django/contrib/auth/tests/forms.py",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.forms.fields import Field, EmailField\n from django.test import TestCase\n from django.test.utils import override_settings\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils import six\n from django.utils import translation\n from django.utils.translation import ugettext as _\n@@ -28,7 +28,7 @@ def test_user_already_exists(self):\n         form = UserCreationForm(data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form[\"username\"].errors,\n-                         [force_unicode(form.error_messages['duplicate_username'])])\n+                         [force_text(form.error_messages['duplicate_username'])])\n \n     def test_invalid_data(self):\n         data = {\n@@ -39,7 +39,7 @@ def test_invalid_data(self):\n         form = UserCreationForm(data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form[\"username\"].errors,\n-                         [force_unicode(form.fields['username'].error_messages['invalid'])])\n+                         [force_text(form.fields['username'].error_messages['invalid'])])\n \n     def test_password_verification(self):\n         # The verification password is incorrect.\n@@ -51,13 +51,13 @@ def test_password_verification(self):\n         form = UserCreationForm(data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form[\"password2\"].errors,\n-                         [force_unicode(form.error_messages['password_mismatch'])])\n+                         [force_text(form.error_messages['password_mismatch'])])\n \n     def test_both_passwords(self):\n         # One (or both) passwords weren't given\n         data = {'username': 'jsmith'}\n         form = UserCreationForm(data)\n-        required_error = [force_unicode(Field.default_error_messages['required'])]\n+        required_error = [force_text(Field.default_error_messages['required'])]\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form['password1'].errors, required_error)\n         self.assertEqual(form['password2'].errors, required_error)\n@@ -96,7 +96,7 @@ def test_invalid_username(self):\n         form = AuthenticationForm(None, data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form.non_field_errors(),\n-                         [force_unicode(form.error_messages['invalid_login'])])\n+                         [force_text(form.error_messages['invalid_login'])])\n \n     def test_inactive_user(self):\n         # The user is inactive.\n@@ -107,7 +107,7 @@ def test_inactive_user(self):\n         form = AuthenticationForm(None, data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form.non_field_errors(),\n-                         [force_unicode(form.error_messages['inactive'])])\n+                         [force_text(form.error_messages['inactive'])])\n \n     def test_inactive_user_i18n(self):\n         with self.settings(USE_I18N=True):\n@@ -120,7 +120,7 @@ def test_inactive_user_i18n(self):\n                 form = AuthenticationForm(None, data)\n                 self.assertFalse(form.is_valid())\n                 self.assertEqual(form.non_field_errors(),\n-                                 [force_unicode(form.error_messages['inactive'])])\n+                                 [force_text(form.error_messages['inactive'])])\n \n     def test_success(self):\n         # The success case\n@@ -148,7 +148,7 @@ def test_password_verification(self):\n         form = SetPasswordForm(user, data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form[\"new_password2\"].errors,\n-                         [force_unicode(form.error_messages['password_mismatch'])])\n+                         [force_text(form.error_messages['password_mismatch'])])\n \n     def test_success(self):\n         user = User.objects.get(username='testclient')\n@@ -175,7 +175,7 @@ def test_incorrect_password(self):\n         form = PasswordChangeForm(user, data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form[\"old_password\"].errors,\n-                         [force_unicode(form.error_messages['password_incorrect'])])\n+                         [force_text(form.error_messages['password_incorrect'])])\n \n     def test_password_verification(self):\n         # The two new passwords do not match.\n@@ -188,7 +188,7 @@ def test_password_verification(self):\n         form = PasswordChangeForm(user, data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form[\"new_password2\"].errors,\n-                         [force_unicode(form.error_messages['password_mismatch'])])\n+                         [force_text(form.error_messages['password_mismatch'])])\n \n     def test_success(self):\n         # The success case.\n@@ -219,7 +219,7 @@ def test_username_validity(self):\n         form = UserChangeForm(data, instance=user)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form['username'].errors,\n-                         [force_unicode(form.fields['username'].error_messages['invalid'])])\n+                         [force_text(form.fields['username'].error_messages['invalid'])])\n \n     def test_bug_14242(self):\n         # A regression test, introduce by adding an optimization for the\n@@ -274,15 +274,15 @@ def test_invalid_email(self):\n         form = PasswordResetForm(data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form['email'].errors,\n-                         [force_unicode(EmailField.default_error_messages['invalid'])])\n+                         [force_text(EmailField.default_error_messages['invalid'])])\n \n     def test_nonexistant_email(self):\n         # Test nonexistant email address\n         data = {'email': 'foo@bar.com'}\n         form = PasswordResetForm(data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form.errors,\n-                         {'email': [force_unicode(form.error_messages['unknown'])]})\n+                         {'email': [force_text(form.error_messages['unknown'])]})\n \n     def test_cleaned_data(self):\n         # Regression test"
        },
        {
            "sha": "3c847f456a92f45ea621fddd80e2cd74cc5591d1",
            "filename": "django/contrib/auth/tests/views.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -7,7 +7,7 @@\n from django.core import mail\n from django.core.urlresolvers import reverse, NoReverseMatch\n from django.http import QueryDict\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.html import escape\n from django.utils.http import urlquote\n from django.test import TestCase\n@@ -46,7 +46,7 @@ def login(self, password='password'):\n         self.assertTrue(SESSION_KEY in self.client.session)\n \n     def assertContainsEscaped(self, response, text, **kwargs):\n-        return self.assertContains(response, escape(force_unicode(text)), **kwargs)\n+        return self.assertContains(response, escape(force_text(text)), **kwargs)\n \n \n class AuthViewNamedURLTests(AuthViewsTestCase):"
        },
        {
            "sha": "bd254d27337ce9dbd5a3e41f58d4b2ecac6e8665",
            "filename": "django/contrib/comments/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcomments%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcomments%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcomments%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -5,7 +5,7 @@\n from django.contrib.contenttypes.models import ContentType\n from django.contrib.comments.models import Comment\n from django.utils.crypto import salted_hmac, constant_time_compare\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.text import get_text_list\n from django.utils import timezone\n from django.utils.translation import ungettext, ugettext, ugettext_lazy as _\n@@ -133,7 +133,7 @@ def get_comment_create_data(self):\n         \"\"\"\n         return dict(\n             content_type = ContentType.objects.get_for_model(self.target_object),\n-            object_pk    = force_unicode(self.target_object._get_pk_val()),\n+            object_pk    = force_text(self.target_object._get_pk_val()),\n             user_name    = self.cleaned_data[\"name\"],\n             user_email   = self.cleaned_data[\"email\"],\n             user_url     = self.cleaned_data[\"url\"],"
        },
        {
            "sha": "bc0fc5f332af258397c5470ca87c3b4258137a08",
            "filename": "django/contrib/comments/managers.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcomments%2Fmanagers.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcomments%2Fmanagers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcomments%2Fmanagers.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,6 +1,6 @@\n from django.db import models\n from django.contrib.contenttypes.models import ContentType\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n class CommentManager(models.Manager):\n \n@@ -18,5 +18,5 @@ def for_model(self, model):\n         ct = ContentType.objects.get_for_model(model)\n         qs = self.get_query_set().filter(content_type=ct)\n         if isinstance(model, models.Model):\n-            qs = qs.filter(object_pk=force_unicode(model._get_pk_val()))\n+            qs = qs.filter(object_pk=force_text(model._get_pk_val()))\n         return qs"
        },
        {
            "sha": "4d4eb2322f7662093a7f644682cebe47ddd509f6",
            "filename": "django/contrib/comments/templatetags/comments.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcomments%2Ftemplatetags%2Fcomments.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcomments%2Ftemplatetags%2Fcomments.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcomments%2Ftemplatetags%2Fcomments.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -3,7 +3,7 @@\n from django.conf import settings\n from django.contrib.contenttypes.models import ContentType\n from django.contrib import comments\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n \n register = template.Library()\n \n@@ -75,7 +75,7 @@ def get_query_set(self, context):\n \n         qs = self.comment_model.objects.filter(\n             content_type = ctype,\n-            object_pk    = smart_unicode(object_pk),\n+            object_pk    = smart_text(object_pk),\n             site__pk     = settings.SITE_ID,\n         )\n "
        },
        {
            "sha": "29e93eefe7a73ed9e777f80cc0624f3b7699580b",
            "filename": "django/contrib/contenttypes/generic.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -17,7 +17,7 @@\n from django.forms.models import BaseModelFormSet, modelformset_factory, save_instance\n from django.contrib.admin.options import InlineModelAdmin, flatten_fieldsets\n from django.contrib.contenttypes.models import ContentType\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n \n class GenericForeignKey(object):\n     \"\"\"\n@@ -169,7 +169,7 @@ def get_choices_default(self):\n \n     def value_to_string(self, obj):\n         qs = getattr(obj, self.name).all()\n-        return smart_unicode([instance._get_pk_val() for instance in qs])\n+        return smart_text([instance._get_pk_val() for instance in qs])\n \n     def m2m_db_table(self):\n         return self.rel.to._meta.db_table"
        },
        {
            "sha": "11ca7e4763449ac13de7d27034720cc6b82d5003",
            "filename": "django/contrib/contenttypes/management.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcontenttypes%2Fmanagement.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcontenttypes%2Fmanagement.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcontenttypes%2Fmanagement.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,6 +1,6 @@\n from django.contrib.contenttypes.models import ContentType\n from django.db.models import get_apps, get_models, signals\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils import six\n \n def update_contenttypes(app, created_models, verbosity=2, **kwargs):\n@@ -31,7 +31,7 @@ def update_contenttypes(app, created_models, verbosity=2, **kwargs):\n \n     cts = ContentType.objects.bulk_create([\n         ContentType(\n-            name=smart_unicode(model._meta.verbose_name_raw),\n+            name=smart_text(model._meta.verbose_name_raw),\n             app_label=app_label,\n             model=model_name,\n         )"
        },
        {
            "sha": "e6d547a4910bf36487edd1584af2c0716d8c7713",
            "filename": "django/contrib/contenttypes/models.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcontenttypes%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fcontenttypes%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcontenttypes%2Fmodels.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,6 +1,6 @@\n from django.db import models\n from django.utils.translation import ugettext_lazy as _\n-from django.utils.encoding import smart_unicode, force_unicode\n+from django.utils.encoding import smart_text, force_text\n \n class ContentTypeManager(models.Manager):\n \n@@ -37,13 +37,13 @@ def get_for_model(self, model, for_concrete_model=True):\n         try:\n             ct = self._get_from_cache(opts)\n         except KeyError:\n-            # Load or create the ContentType entry. The smart_unicode() is\n+            # Load or create the ContentType entry. The smart_text() is\n             # needed around opts.verbose_name_raw because name_raw might be a\n             # django.utils.functional.__proxy__ object.\n             ct, created = self.get_or_create(\n                 app_label = opts.app_label,\n                 model = opts.object_name.lower(),\n-                defaults = {'name': smart_unicode(opts.verbose_name_raw)},\n+                defaults = {'name': smart_text(opts.verbose_name_raw)},\n             )\n             self._add_to_cache(self.db, ct)\n \n@@ -86,7 +86,7 @@ def get_for_models(self, *models, **kwargs):\n             ct = self.create(\n                 app_label=opts.app_label,\n                 model=opts.object_name.lower(),\n-                name=smart_unicode(opts.verbose_name_raw),\n+                name=smart_text(opts.verbose_name_raw),\n             )\n             self._add_to_cache(self.db, ct)\n             results[ct.model_class()] = ct\n@@ -147,7 +147,7 @@ def __unicode__(self):\n         if not model or self.name != model._meta.verbose_name_raw:\n             return self.name\n         else:\n-            return force_unicode(model._meta.verbose_name)\n+            return force_text(model._meta.verbose_name)\n \n     def model_class(self):\n         \"Returns the Python model class for this type of content.\""
        },
        {
            "sha": "810e039894625dab6aaf19a5eda6a1c644a7da61",
            "filename": "django/contrib/databrowse/datastructures.py",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fdatabrowse%2Fdatastructures.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fdatabrowse%2Fdatastructures.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fdatabrowse%2Fdatastructures.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -7,7 +7,7 @@\n from django.db import models\n from django.utils import formats\n from django.utils.text import capfirst\n-from django.utils.encoding import smart_unicode, smart_str, iri_to_uri\n+from django.utils.encoding import smart_text, smart_bytes, iri_to_uri\n from django.db.models.query import QuerySet\n \n EMPTY_VALUE = '(None)'\n@@ -22,7 +22,7 @@ def __init__(self, site, model):\n         self.verbose_name_plural = model._meta.verbose_name_plural\n \n     def __repr__(self):\n-        return '<EasyModel for %s>' % smart_str(self.model._meta.object_name)\n+        return '<EasyModel for %s>' % smart_bytes(self.model._meta.object_name)\n \n     def model_databrowse(self):\n         \"Returns the ModelDatabrowse class for this model.\"\n@@ -61,7 +61,7 @@ def __init__(self, easy_model, field):\n         self.model, self.field = easy_model, field\n \n     def __repr__(self):\n-        return smart_str('<EasyField for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n+        return smart_bytes('<EasyField for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n \n     def choices(self):\n         for value, label in self.field.choices:\n@@ -79,7 +79,7 @@ def __init__(self, easy_model, field, value, label):\n         self.value, self.label = value, label\n \n     def __repr__(self):\n-        return smart_str('<EasyChoice for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n+        return smart_bytes('<EasyChoice for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n \n     def url(self):\n         return '%s%s/%s/%s/%s/' % (self.model.site.root_url, self.model.model._meta.app_label, self.model.model._meta.module_name, self.field.field.name, iri_to_uri(self.value))\n@@ -89,10 +89,10 @@ def __init__(self, easy_model, instance):\n         self.model, self.instance = easy_model, instance\n \n     def __repr__(self):\n-        return smart_str('<EasyInstance for %s (%s)>' % (self.model.model._meta.object_name, self.instance._get_pk_val()))\n+        return smart_bytes('<EasyInstance for %s (%s)>' % (self.model.model._meta.object_name, self.instance._get_pk_val()))\n \n     def __unicode__(self):\n-        val = smart_unicode(self.instance)\n+        val = smart_text(self.instance)\n         if len(val) > DISPLAY_SIZE:\n             return val[:DISPLAY_SIZE] + '...'\n         return val\n@@ -136,7 +136,7 @@ def __init__(self, easy_model, instance, field):\n         self.raw_value = getattr(instance.instance, field.name)\n \n     def __repr__(self):\n-        return smart_str('<EasyInstanceField for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n+        return smart_bytes('<EasyInstanceField for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n \n     def values(self):\n         \"\"\"\n@@ -185,7 +185,7 @@ def urls(self):\n                     if value is None:\n                         continue\n                     url = '%s%s/%s/objects/%s/' % (self.model.site.root_url, m.model._meta.app_label, m.model._meta.module_name, iri_to_uri(value._get_pk_val()))\n-                    lst.append((smart_unicode(value), url))\n+                    lst.append((smart_text(value), url))\n             else:\n                 lst = [(value, None) for value in self.values()]\n         elif self.field.choices:"
        },
        {
            "sha": "a548c33c8fba35fb2b9777d917ba0cc7c8647916",
            "filename": "django/contrib/databrowse/plugins/calendars.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fdatabrowse%2Fplugins%2Fcalendars.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fdatabrowse%2Fplugins%2Fcalendars.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fdatabrowse%2Fplugins%2Fcalendars.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -7,7 +7,7 @@\n from django.shortcuts import render_to_response\n from django.utils.html import format_html, format_html_join\n from django.utils.text import capfirst\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.views.generic import dates\n from django.utils import datetime_safe\n \n@@ -66,7 +66,7 @@ def model_index_html(self, request, model, site):\n             return ''\n         return format_html('<p class=\"filter\"><strong>View calendar by:</strong> {0}</p>',\n                            format_html_join(', ', '<a href=\"calendars/{0}/\">{1}</a>',\n-                                            ((f.name, force_unicode(capfirst(f.verbose_name))) for f in fields.values())))\n+                                            ((f.name, force_text(capfirst(f.verbose_name))) for f in fields.values())))\n \n     def urls(self, plugin_name, easy_instance_field):\n         if isinstance(easy_instance_field.field, models.DateField):"
        },
        {
            "sha": "dc5e9aef14b466124dfd8ae9cb3e69c32ad33480",
            "filename": "django/contrib/databrowse/plugins/fieldchoices.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fdatabrowse%2Fplugins%2Ffieldchoices.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fdatabrowse%2Fplugins%2Ffieldchoices.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fdatabrowse%2Fplugins%2Ffieldchoices.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.utils.html import format_html, format_html_join\n from django.utils.http import urlquote\n from django.utils.text import capfirst\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n \n class FieldChoicePlugin(DatabrowsePlugin):\n@@ -35,7 +35,7 @@ def model_index_html(self, request, model, site):\n             return ''\n         return format_html('<p class=\"filter\"><strong>View by:</strong> {0}</p>',\n                            format_html_join(', ', '<a href=\"fields/{0}/\">{1}</a>',\n-                                            ((f.name, force_unicode(capfirst(f.verbose_name))) for f in fields.values())))\n+                                            ((f.name, force_text(capfirst(f.verbose_name))) for f in fields.values())))\n \n     def urls(self, plugin_name, easy_instance_field):\n         if easy_instance_field.field in self.field_dict(easy_instance_field.model.model).values():"
        },
        {
            "sha": "05c9f6f121b72b00152b0048c75cba215a5efa79",
            "filename": "django/contrib/formtools/wizard/storage/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,6 +1,6 @@\n from django.core.files.uploadedfile import UploadedFile\n from django.utils.datastructures import MultiValueDict\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.utils.functional import lazy_property\n from django.utils import six\n \n@@ -74,7 +74,7 @@ def get_step_files(self, step):\n \n         files = {}\n         for field, field_dict in six.iteritems(wizard_files):\n-            field_dict = dict((smart_str(k), v)\n+            field_dict = dict((smart_bytes(k), v)\n                               for k, v in six.iteritems(field_dict))\n             tmp_name = field_dict.pop('tmp_name')\n             files[field] = UploadedFile("
        },
        {
            "sha": "8bcdba1b44d3dfad8872f658258067e7ced33697",
            "filename": "django/contrib/gis/sitemaps/views.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.contrib.gis.db.models.fields import GeometryField\n from django.db import connections, DEFAULT_DB_ALIAS\n from django.db.models import get_model\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.utils import six\n from django.utils.translation import ugettext as _\n \n@@ -61,7 +61,7 @@ def sitemap(request, sitemaps, section=None):\n             raise Http404(_(\"Page %s empty\") % page)\n         except PageNotAnInteger:\n             raise Http404(_(\"No page '%s'\") % page)\n-    xml = smart_str(loader.render_to_string('gis/sitemaps/geo_sitemap.xml', {'urlset': urls}))\n+    xml = smart_bytes(loader.render_to_string('gis/sitemaps/geo_sitemap.xml', {'urlset': urls}))\n     return HttpResponse(xml, content_type='application/xml')\n \n def kml(request, label, model, field_name=None, compress=False, using=DEFAULT_DB_ALIAS):"
        },
        {
            "sha": "7e8f1631741ef42fc0179ac924093786e7a9715c",
            "filename": "django/contrib/humanize/templatetags/humanize.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -5,7 +5,7 @@\n from django import template\n from django.conf import settings\n from django.template import defaultfilters\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.formats import number_format\n from django.utils.translation import pgettext, ungettext, ugettext as _\n from django.utils.timezone import is_aware, utc\n@@ -41,7 +41,7 @@ def intcomma(value, use_l10n=True):\n             return intcomma(value, False)\n         else:\n             return number_format(value, force_grouping=True)\n-    orig = force_unicode(value)\n+    orig = force_text(value)\n     new = re.sub(\"^(-?\\d+)(\\d{3})\", '\\g<1>,\\g<2>', orig)\n     if orig == new:\n         return new"
        },
        {
            "sha": "d3a00e200cd5540d9f319c97322b449ba4e7e4e1",
            "filename": "django/contrib/localflavor/au/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fau%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fau%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fau%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, RegexField, Select\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -44,7 +44,7 @@ def clean(self, value):\n         super(AUPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = re.sub('(\\(|\\)|\\s+|-)', '', smart_unicode(value))\n+        value = re.sub('(\\(|\\)|\\s+|-)', '', smart_text(value))\n         phone_match = PHONE_DIGITS_RE.search(value)\n         if phone_match:\n             return '%s' % phone_match.group(1)"
        },
        {
            "sha": "4d0d6815ba9a2b26072c1377ea9e195ceccc2256",
            "filename": "django/contrib/localflavor/br/forms.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fbr%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fbr%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fbr%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -11,7 +11,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, RegexField, CharField, Select\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -35,7 +35,7 @@ def clean(self, value):\n         super(BRPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = re.sub('(\\(|\\)|\\s+)', '', smart_unicode(value))\n+        value = re.sub('(\\(|\\)|\\s+)', '', smart_text(value))\n         m = phone_digits_re.search(value)\n         if m:\n             return '%s-%s-%s' % (m.group(1), m.group(2), m.group(3))\n@@ -68,10 +68,10 @@ def clean(self, value):\n         value = super(BRStateChoiceField, self).clean(value)\n         if value in EMPTY_VALUES:\n             value = ''\n-        value = smart_unicode(value)\n+        value = smart_text(value)\n         if value == '':\n             return value\n-        valid_values = set([smart_unicode(k) for k, v in self.widget.choices])\n+        valid_values = set([smart_text(k) for k, v in self.widget.choices])\n         if value not in valid_values:\n             raise ValidationError(self.error_messages['invalid'])\n         return value"
        },
        {
            "sha": "4ebfb06c2bb4b1091fcf923bdc866540dc435b95",
            "filename": "django/contrib/localflavor/ca/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fca%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fca%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fca%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, CharField, Select\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -53,7 +53,7 @@ def clean(self, value):\n         super(CAPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = re.sub('(\\(|\\)|\\s+)', '', smart_unicode(value))\n+        value = re.sub('(\\(|\\)|\\s+)', '', smart_text(value))\n         m = phone_digits_re.search(value)\n         if m:\n             return '%s-%s-%s' % (m.group(1), m.group(2), m.group(3))"
        },
        {
            "sha": "bf71eeea322cb9e86b498a3de3baf737f45988fa",
            "filename": "django/contrib/localflavor/ch/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fch%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fch%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fch%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, RegexField, Select\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -41,7 +41,7 @@ def clean(self, value):\n         super(CHPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = re.sub('(\\.|\\s|/|-)', '', smart_unicode(value))\n+        value = re.sub('(\\.|\\s|/|-)', '', smart_text(value))\n         m = phone_digits_re.search(value)\n         if m:\n             return '%s %s %s %s' % (value[0:3], value[3:6], value[6:8], value[8:10])"
        },
        {
            "sha": "a5340141ce4cb6840a39eaeea2fdb51961b3d46c",
            "filename": "django/contrib/localflavor/cl/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fcl%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fcl%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fcl%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.forms import ValidationError\n from django.forms.fields import RegexField, Select\n from django.utils.translation import ugettext_lazy as _\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n \n from .cl_regions import REGION_CHOICES\n \n@@ -75,7 +75,7 @@ def _canonify(self, rut):\n         Turns the RUT into one normalized format. Returns a (rut, verifier)\n         tuple.\n         \"\"\"\n-        rut = smart_unicode(rut).replace(' ', '').replace('.', '').replace('-', '')\n+        rut = smart_text(rut).replace(' ', '').replace('.', '').replace('-', '')\n         return rut[:-1], rut[-1].upper()\n \n     def _format(self, code, verifier=None):"
        },
        {
            "sha": "8b841fff5fe416b44e0d4aed488d22f149f13751",
            "filename": "django/contrib/localflavor/fr/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Ffr%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Ffr%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Ffr%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import CharField, RegexField, Select\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -43,7 +43,7 @@ def clean(self, value):\n         super(FRPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = re.sub('(\\.|\\s)', '', smart_unicode(value))\n+        value = re.sub('(\\.|\\s)', '', smart_text(value))\n         m = phone_digits_re.search(value)\n         if m:\n             return '%s %s %s %s %s' % (value[0:2], value[2:4], value[4:6], value[6:8], value[8:10])"
        },
        {
            "sha": "ab4f70f1939628c94ae5c68d37dace98c9e8a807",
            "filename": "django/contrib/localflavor/hk/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fhk%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fhk%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fhk%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import CharField\n from django.forms import ValidationError\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -53,7 +53,7 @@ def clean(self, value):\n         if value in EMPTY_VALUES:\n             return ''\n \n-        value = re.sub('(\\(|\\)|\\s+|\\+)', '', smart_unicode(value))\n+        value = re.sub('(\\(|\\)|\\s+|\\+)', '', smart_text(value))\n         m = hk_phone_digits_re.search(value)\n         if not m:\n             raise ValidationError(self.error_messages['invalid'])"
        },
        {
            "sha": "b935fd8a3a9f59ec7f89f6f1af74c7a0004b6a0b",
            "filename": "django/contrib/localflavor/hr/forms.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fhr%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fhr%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fhr%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -12,7 +12,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, Select, RegexField\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -159,7 +159,7 @@ def clean(self, value):\n         if value in EMPTY_VALUES:\n             return ''\n \n-        value = re.sub(r'[\\s\\-]+', '', smart_unicode(value.strip())).upper()\n+        value = re.sub(r'[\\s\\-]+', '', smart_text(value.strip())).upper()\n \n         matches = plate_re.search(value)\n         if matches is None:\n@@ -225,7 +225,7 @@ def clean(self, value):\n         if value in EMPTY_VALUES:\n             return ''\n \n-        value = re.sub(r'[\\-\\s\\(\\)]', '', smart_unicode(value))\n+        value = re.sub(r'[\\-\\s\\(\\)]', '', smart_text(value))\n \n         matches = phone_re.search(value)\n         if matches is None:"
        },
        {
            "sha": "2005dbc75c4713a386082337788834aa0baca481",
            "filename": "django/contrib/localflavor/id/forms.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fid%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fid%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fid%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -11,7 +11,7 @@\n from django.forms import ValidationError\n from django.forms.fields import Field, Select\n from django.utils.translation import ugettext_lazy as _\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n \n \n postcode_re = re.compile(r'^[1-9]\\d{4}$')\n@@ -77,10 +77,10 @@ def clean(self, value):\n         if value in EMPTY_VALUES:\n             return ''\n \n-        phone_number = re.sub(r'[\\-\\s\\(\\)]', '', smart_unicode(value))\n+        phone_number = re.sub(r'[\\-\\s\\(\\)]', '', smart_text(value))\n \n         if phone_re.search(phone_number):\n-            return smart_unicode(value)\n+            return smart_text(value)\n \n         raise ValidationError(self.error_messages['invalid'])\n \n@@ -120,7 +120,7 @@ def clean(self, value):\n             return ''\n \n         plate_number = re.sub(r'\\s+', ' ',\n-            smart_unicode(value.strip())).upper()\n+            smart_text(value.strip())).upper()\n \n         matches = plate_re.search(plate_number)\n         if matches is None:\n@@ -181,7 +181,7 @@ def clean(self, value):\n         if value in EMPTY_VALUES:\n             return ''\n \n-        value = re.sub(r'[\\s.]', '', smart_unicode(value))\n+        value = re.sub(r'[\\s.]', '', smart_text(value))\n \n         if not nik_re.search(value):\n             raise ValidationError(self.error_messages['invalid'])"
        },
        {
            "sha": "5c1d009ef4d1ccfab64c00757c59dae30e98bff3",
            "filename": "django/contrib/localflavor/in_/forms.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fin_%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fin_%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fin_%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, RegexField, CharField, Select\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -74,7 +74,7 @@ def clean(self, value):\n             pass\n         else:\n             try:\n-                return smart_unicode(STATES_NORMALIZED[value.strip().lower()])\n+                return smart_text(STATES_NORMALIZED[value.strip().lower()])\n             except KeyError:\n                 pass\n         raise ValidationError(self.error_messages['invalid'])\n@@ -107,7 +107,7 @@ def clean(self, value):\n         super(INPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = smart_unicode(value)\n+        value = smart_text(value)\n         m = phone_digits_re.match(value)\n         if m:\n             return '%s' % (value)"
        },
        {
            "sha": "1ae3e012a10a2676c1145e8eb214804c4e31875c",
            "filename": "django/contrib/localflavor/is_/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fis_%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fis_%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fis_%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n from django.forms import ValidationError\n from django.forms.fields import RegexField\n from django.forms.widgets import Select\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -58,7 +58,7 @@ def _format(self, value):\n         Takes in the value in canonical form and returns it in the common\n         display format.\n         \"\"\"\n-        return smart_unicode(value[:6]+'-'+value[6:])\n+        return smart_text(value[:6]+'-'+value[6:])\n \n class ISPhoneNumberField(RegexField):\n     \"\"\""
        },
        {
            "sha": "916ce9bb3df3b3b61a02f89fb43eafb2d7add783",
            "filename": "django/contrib/localflavor/it/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fit%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fit%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fit%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -13,7 +13,7 @@\n from django.forms import ValidationError\n from django.forms.fields import Field, RegexField, Select\n from django.utils.translation import ugettext_lazy as _\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n \n \n class ITZipCodeField(RegexField):\n@@ -85,4 +85,4 @@ def clean(self, value):\n         check_digit = vat_number_check_digit(vat_number[0:10])\n         if not vat_number[10] == check_digit:\n             raise ValidationError(self.error_messages['invalid'])\n-        return smart_unicode(vat_number)\n+        return smart_text(vat_number)"
        },
        {
            "sha": "e1aa9c04199d8883c48195c90e7ab8bd232cb3f1",
            "filename": "django/contrib/localflavor/it/util.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fit%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fit%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fit%2Futil.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,4 +1,4 @@\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n \n def ssn_check_digit(value):\n     \"Calculate Italian social security number check digit.\"\n@@ -34,11 +34,11 @@ def ssn_check_digit(value):\n \n def vat_number_check_digit(vat_number):\n     \"Calculate Italian VAT number check digit.\"\n-    normalized_vat_number = smart_unicode(vat_number).zfill(10)\n+    normalized_vat_number = smart_text(vat_number).zfill(10)\n     total = 0\n     for i in range(0, 10, 2):\n         total += int(normalized_vat_number[i])\n     for i in range(1, 11, 2):\n         quotient , remainder = divmod(int(normalized_vat_number[i]) * 2, 10)\n         total += quotient + remainder\n-    return smart_unicode((10 - total % 10) % 10)\n+    return smart_text((10 - total % 10) % 10)"
        },
        {
            "sha": "a05dd38f7f1ca4df21ae019d0339d813a8ede829",
            "filename": "django/contrib/localflavor/nl/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fnl%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fnl%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fnl%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, Select\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -61,7 +61,7 @@ def clean(self, value):\n         if value in EMPTY_VALUES:\n             return ''\n \n-        phone_nr = re.sub('[\\-\\s\\(\\)]', '', smart_unicode(value))\n+        phone_nr = re.sub('[\\-\\s\\(\\)]', '', smart_text(value))\n \n         if len(phone_nr) == 10 and numeric_re.search(phone_nr):\n             return value"
        },
        {
            "sha": "01cdd101b27d4af63d54c4a160ae24083c6f4942",
            "filename": "django/contrib/localflavor/pt/forms.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fpt%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fpt%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fpt%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, RegexField\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n phone_digits_re = re.compile(r'^(\\d{9}|(00|\\+)\\d*)$')\n@@ -29,7 +29,7 @@ def clean(self,value):\n            return '%s-%s' % (cleaned[:4],cleaned[4:])\n         else:\n            return cleaned\n-        \n+\n class PTPhoneNumberField(Field):\n     \"\"\"\n     Validate local Portuguese phone number (including international ones)\n@@ -43,7 +43,7 @@ def clean(self, value):\n         super(PTPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = re.sub('(\\.|\\s)', '', smart_unicode(value))\n+        value = re.sub('(\\.|\\s)', '', smart_text(value))\n         m = phone_digits_re.search(value)\n         if m:\n             return '%s' % value"
        },
        {
            "sha": "c4f928e670b480d8cf4333fda83a8c8778787633",
            "filename": "django/contrib/localflavor/tr/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Ftr%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Ftr%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Ftr%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, RegexField, Select, CharField\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -46,7 +46,7 @@ def clean(self, value):\n         super(TRPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = re.sub('(\\(|\\)|\\s+)', '', smart_unicode(value))\n+        value = re.sub('(\\(|\\)|\\s+)', '', smart_text(value))\n         m = phone_digits_re.search(value)\n         if m:\n             return '%s%s' % (m.group(2), m.group(4))"
        },
        {
            "sha": "437bb7c466f164a427a4c2b55c4b1f757cd854e8",
            "filename": "django/contrib/localflavor/us/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fus%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Flocalflavor%2Fus%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fus%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n from django.core.validators import EMPTY_VALUES\n from django.forms import ValidationError\n from django.forms.fields import Field, RegexField, Select, CharField\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n \n \n@@ -34,7 +34,7 @@ def clean(self, value):\n         super(USPhoneNumberField, self).clean(value)\n         if value in EMPTY_VALUES:\n             return ''\n-        value = re.sub('(\\(|\\)|\\s+)', '', smart_unicode(value))\n+        value = re.sub('(\\(|\\)|\\s+)', '', smart_text(value))\n         m = phone_digits_re.search(value)\n         if m:\n             return '%s-%s-%s' % (m.group(1), m.group(2), m.group(3))"
        },
        {
            "sha": "af9c842f4230245f9c1d2d9fcc2917e0db53d289",
            "filename": "django/contrib/markup/templatetags/markup.py",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -13,7 +13,7 @@\n \n from django import template\n from django.conf import settings\n-from django.utils.encoding import smart_str, force_unicode\n+from django.utils.encoding import smart_bytes, force_text\n from django.utils.safestring import mark_safe\n \n register = template.Library()\n@@ -25,9 +25,9 @@ def textile(value):\n     except ImportError:\n         if settings.DEBUG:\n             raise template.TemplateSyntaxError(\"Error in 'textile' filter: The Python textile library isn't installed.\")\n-        return force_unicode(value)\n+        return force_text(value)\n     else:\n-        return mark_safe(force_unicode(textile.textile(smart_str(value), encoding='utf-8', output='utf-8')))\n+        return mark_safe(force_text(textile.textile(smart_bytes(value), encoding='utf-8', output='utf-8')))\n \n @register.filter(is_safe=True)\n def markdown(value, arg=''):\n@@ -52,23 +52,23 @@ def markdown(value, arg=''):\n     except ImportError:\n         if settings.DEBUG:\n             raise template.TemplateSyntaxError(\"Error in 'markdown' filter: The Python markdown library isn't installed.\")\n-        return force_unicode(value)\n+        return force_text(value)\n     else:\n         markdown_vers = getattr(markdown, \"version_info\", 0)\n         if markdown_vers < (2, 1):\n             if settings.DEBUG:\n                 raise template.TemplateSyntaxError(\n                     \"Error in 'markdown' filter: Django does not support versions of the Python markdown library < 2.1.\")\n-            return force_unicode(value)\n+            return force_text(value)\n         else:\n             extensions = [e for e in arg.split(\",\") if e]\n             if extensions and extensions[0] == \"safe\":\n                 extensions = extensions[1:]\n                 return mark_safe(markdown.markdown(\n-                    force_unicode(value), extensions, safe_mode=True, enable_attributes=False))\n+                    force_text(value), extensions, safe_mode=True, enable_attributes=False))\n             else:\n                 return mark_safe(markdown.markdown(\n-                    force_unicode(value), extensions, safe_mode=False))\n+                    force_text(value), extensions, safe_mode=False))\n \n @register.filter(is_safe=True)\n def restructuredtext(value):\n@@ -77,8 +77,8 @@ def restructuredtext(value):\n     except ImportError:\n         if settings.DEBUG:\n             raise template.TemplateSyntaxError(\"Error in 'restructuredtext' filter: The Python docutils library isn't installed.\")\n-        return force_unicode(value)\n+        return force_text(value)\n     else:\n         docutils_settings = getattr(settings, \"RESTRUCTUREDTEXT_FILTER_SETTINGS\", {})\n-        parts = publish_parts(source=smart_str(value), writer_name=\"html4css1\", settings_overrides=docutils_settings)\n-        return mark_safe(force_unicode(parts[\"fragment\"]))\n+        parts = publish_parts(source=smart_bytes(value), writer_name=\"html4css1\", settings_overrides=docutils_settings)\n+        return mark_safe(force_text(parts[\"fragment\"]))"
        },
        {
            "sha": "5433bbff28e2897400a04ab22b2e9b636bfd6e7d",
            "filename": "django/contrib/messages/storage/base.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fmessages%2Fstorage%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fmessages%2Fstorage%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmessages%2Fstorage%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,7 +1,7 @@\n from __future__ import unicode_literals\n \n from django.conf import settings\n-from django.utils.encoding import force_unicode, StrAndUnicode\n+from django.utils.encoding import force_text, StrAndUnicode\n from django.contrib.messages import constants, utils\n \n \n@@ -26,22 +26,22 @@ def _prepare(self):\n         and ``extra_tags`` to unicode in case they are lazy translations.\n \n         Known \"safe\" types (None, int, etc.) are not converted (see Django's\n-        ``force_unicode`` implementation for details).\n+        ``force_text`` implementation for details).\n         \"\"\"\n-        self.message = force_unicode(self.message, strings_only=True)\n-        self.extra_tags = force_unicode(self.extra_tags, strings_only=True)\n+        self.message = force_text(self.message, strings_only=True)\n+        self.extra_tags = force_text(self.extra_tags, strings_only=True)\n \n     def __eq__(self, other):\n         return isinstance(other, Message) and self.level == other.level and \\\n                                               self.message == other.message\n \n     def __unicode__(self):\n-        return force_unicode(self.message)\n+        return force_text(self.message)\n \n     def _get_tags(self):\n-        label_tag = force_unicode(LEVEL_TAGS.get(self.level, ''),\n+        label_tag = force_text(LEVEL_TAGS.get(self.level, ''),\n                                   strings_only=True)\n-        extra_tags = force_unicode(self.extra_tags, strings_only=True)\n+        extra_tags = force_text(self.extra_tags, strings_only=True)\n         if extra_tags and label_tag:\n             return ' '.join([extra_tags, label_tag])\n         elif extra_tags:"
        },
        {
            "sha": "0cc17b44c31602dde04f7415ee8af1ade237c6cb",
            "filename": "django/contrib/sessions/backends/db.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fsessions%2Fbackends%2Fdb.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fsessions%2Fbackends%2Fdb.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsessions%2Fbackends%2Fdb.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,7 +1,7 @@\n from django.contrib.sessions.backends.base import SessionBase, CreateError\n from django.core.exceptions import SuspiciousOperation\n from django.db import IntegrityError, transaction, router\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils import timezone\n \n \n@@ -18,7 +18,7 @@ def load(self):\n                 session_key = self.session_key,\n                 expire_date__gt=timezone.now()\n             )\n-            return self.decode(force_unicode(s.session_data))\n+            return self.decode(force_text(s.session_data))\n         except (Session.DoesNotExist, SuspiciousOperation):\n             self.create()\n             return {}"
        },
        {
            "sha": "45c5ecfe1fdc4972e736666c0c8f47ed154bd93f",
            "filename": "django/contrib/staticfiles/management/commands/collectstatic.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -6,7 +6,7 @@\n \n from django.core.files.storage import FileSystemStorage\n from django.core.management.base import CommandError, NoArgsCommand\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.datastructures import SortedDict\n \n from django.contrib.staticfiles import finders, storage\n@@ -198,9 +198,9 @@ def clear_dir(self, path):\n             fpath = os.path.join(path, f)\n             if self.dry_run:\n                 self.log(\"Pretending to delete '%s'\" %\n-                         smart_unicode(fpath), level=1)\n+                         smart_text(fpath), level=1)\n             else:\n-                self.log(\"Deleting '%s'\" % smart_unicode(fpath), level=1)\n+                self.log(\"Deleting '%s'\" % smart_text(fpath), level=1)\n                 self.storage.delete(fpath)\n         for d in dirs:\n             self.clear_dir(os.path.join(path, d))"
        },
        {
            "sha": "dc1e88d778019cf7e5370975b4595582a02184da",
            "filename": "django/contrib/staticfiles/management/commands/findstatic.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Ffindstatic.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Ffindstatic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Ffindstatic.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -3,7 +3,7 @@\n import os\n from optparse import make_option\n from django.core.management.base import LabelCommand\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n \n from django.contrib.staticfiles import finders\n \n@@ -19,12 +19,12 @@ class Command(LabelCommand):\n     def handle_label(self, path, **options):\n         verbosity = int(options.get('verbosity', 1))\n         result = finders.find(path, all=options['all'])\n-        path = smart_unicode(path)\n+        path = smart_text(path)\n         if result:\n             if not isinstance(result, (list, tuple)):\n                 result = [result]\n             output = '\\n  '.join(\n-                (smart_unicode(os.path.realpath(path)) for path in result))\n+                (smart_text(os.path.realpath(path)) for path in result))\n             self.stdout.write(\"Found '%s' here:\\n  %s\" % (path, output))\n         else:\n             if verbosity >= 1:"
        },
        {
            "sha": "2ca54dde71f57bb1985056215d42860451290212",
            "filename": "django/contrib/staticfiles/storage.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fstorage.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -16,7 +16,7 @@\n from django.core.files.base import ContentFile\n from django.core.files.storage import FileSystemStorage, get_storage_class\n from django.utils.datastructures import SortedDict\n-from django.utils.encoding import force_unicode, smart_str\n+from django.utils.encoding import force_text, smart_bytes\n from django.utils.functional import LazyObject\n from django.utils.importlib import import_module\n \n@@ -112,7 +112,7 @@ def hashed_name(self, name, content=None):\n         return urlunsplit(unparsed_name)\n \n     def cache_key(self, name):\n-        return 'staticfiles:%s' % hashlib.md5(smart_str(name)).hexdigest()\n+        return 'staticfiles:%s' % hashlib.md5(smart_bytes(name)).hexdigest()\n \n     def url(self, name, force=False):\n         \"\"\"\n@@ -248,17 +248,17 @@ def post_process(self, paths, dry_run=False, **options):\n                     if hashed_file_exists:\n                         self.delete(hashed_name)\n                     # then save the processed result\n-                    content_file = ContentFile(smart_str(content))\n+                    content_file = ContentFile(smart_bytes(content))\n                     saved_name = self._save(hashed_name, content_file)\n-                    hashed_name = force_unicode(saved_name.replace('\\\\', '/'))\n+                    hashed_name = force_text(saved_name.replace('\\\\', '/'))\n                     processed = True\n                 else:\n                     # or handle the case in which neither processing nor\n                     # a change to the original file happened\n                     if not hashed_file_exists:\n                         processed = True\n                         saved_name = self._save(hashed_name, original_file)\n-                        hashed_name = force_unicode(saved_name.replace('\\\\', '/'))\n+                        hashed_name = force_text(saved_name.replace('\\\\', '/'))\n \n                 # and then set the cache accordingly\n                 hashed_paths[self.cache_key(name)] = hashed_name"
        },
        {
            "sha": "bce7ef7cfb894e0b21d65823ac63fec253407da5",
            "filename": "django/contrib/syndication/views.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fsyndication%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcontrib%2Fsyndication%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsyndication%2Fviews.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -6,7 +6,7 @@\n from django.http import HttpResponse, Http404\n from django.template import loader, TemplateDoesNotExist, RequestContext\n from django.utils import feedgenerator, tzinfo\n-from django.utils.encoding import force_unicode, iri_to_uri, smart_unicode\n+from django.utils.encoding import force_text, iri_to_uri, smart_text\n from django.utils.html import escape\n from django.utils.timezone import is_naive\n \n@@ -43,10 +43,10 @@ def __call__(self, request, *args, **kwargs):\n \n     def item_title(self, item):\n         # Titles should be double escaped by default (see #6533)\n-        return escape(force_unicode(item))\n+        return escape(force_text(item))\n \n     def item_description(self, item):\n-        return force_unicode(item)\n+        return force_text(item)\n \n     def item_link(self, item):\n         try:\n@@ -154,9 +154,9 @@ def get_feed(self, obj, request):\n             enc_url = self.__get_dynamic_attr('item_enclosure_url', item)\n             if enc_url:\n                 enc = feedgenerator.Enclosure(\n-                    url = smart_unicode(enc_url),\n-                    length = smart_unicode(self.__get_dynamic_attr('item_enclosure_length', item)),\n-                    mime_type = smart_unicode(self.__get_dynamic_attr('item_enclosure_mime_type', item))\n+                    url = smart_text(enc_url),\n+                    length = smart_text(self.__get_dynamic_attr('item_enclosure_length', item)),\n+                    mime_type = smart_text(self.__get_dynamic_attr('item_enclosure_mime_type', item))\n                 )\n             author_name = self.__get_dynamic_attr('item_author_name', item)\n             if author_name is not None:"
        },
        {
            "sha": "d527e44d8b37a7b6da07de76dc990a40d9a54d46",
            "filename": "django/core/cache/backends/base.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fcache%2Fbackends%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fcache%2Fbackends%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcache%2Fbackends%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -3,7 +3,7 @@\n import warnings\n \n from django.core.exceptions import ImproperlyConfigured, DjangoRuntimeWarning\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.utils.importlib import import_module\n \n class InvalidCacheBackendError(ImproperlyConfigured):\n@@ -23,7 +23,7 @@ def default_key_func(key, key_prefix, version):\n     the `key_prefix'. KEY_FUNCTION can be used to specify an alternate\n     function with custom key making behavior.\n     \"\"\"\n-    return ':'.join([key_prefix, str(version), smart_str(key)])\n+    return ':'.join([key_prefix, str(version), smart_bytes(key)])\n \n def get_key_func(key_func):\n     \"\"\"\n@@ -62,7 +62,7 @@ def __init__(self, params):\n         except (ValueError, TypeError):\n             self._cull_frequency = 3\n \n-        self.key_prefix = smart_str(params.get('KEY_PREFIX', ''))\n+        self.key_prefix = smart_bytes(params.get('KEY_PREFIX', ''))\n         self.version = params.get('VERSION', 1)\n         self.key_func = get_key_func(params.get('KEY_FUNCTION', None))\n "
        },
        {
            "sha": "a503270cf4aca66600ae5332e84673f6c2e71b30",
            "filename": "django/core/context_processors.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fcontext_processors.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fcontext_processors.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcontext_processors.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n \n from django.conf import settings\n from django.middleware.csrf import get_token\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.utils.functional import lazy\n \n def csrf(request):\n@@ -25,7 +25,7 @@ def _get_val():\n             # instead of returning an empty dict.\n             return b'NOTPROVIDED'\n         else:\n-            return smart_str(token)\n+            return smart_bytes(token)\n     _get_val = lazy(_get_val, str)\n \n     return {'csrf_token': _get_val() }"
        },
        {
            "sha": "f0f14cffda3a6cff792eed10c92363e80b7777ee",
            "filename": "django/core/exceptions.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fexceptions.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fexceptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fexceptions.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -43,7 +43,7 @@ class ValidationError(Exception):\n     \"\"\"An error while validating data.\"\"\"\n     def __init__(self, message, code=None, params=None):\n         import operator\n-        from django.utils.encoding import force_unicode\n+        from django.utils.encoding import force_text\n         \"\"\"\n         ValidationError can be passed any object that can be printed (usually\n         a string), a list of objects or a dictionary.\n@@ -54,11 +54,11 @@ def __init__(self, message, code=None, params=None):\n             message = reduce(operator.add, message.values())\n \n         if isinstance(message, list):\n-            self.messages = [force_unicode(msg) for msg in message]\n+            self.messages = [force_text(msg) for msg in message]\n         else:\n             self.code = code\n             self.params = params\n-            message = force_unicode(message)\n+            message = force_text(message)\n             self.messages = [message]\n \n     def __str__(self):"
        },
        {
            "sha": "37b1be89b36e9c84bdb70f07f92df2333c124455",
            "filename": "django/core/files/base.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Ffiles%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Ffiles%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -3,7 +3,7 @@\n import os\n from io import BytesIO\n \n-from django.utils.encoding import smart_str, smart_unicode\n+from django.utils.encoding import smart_bytes, smart_text\n from django.core.files.utils import FileProxyMixin\n \n class File(FileProxyMixin):\n@@ -18,10 +18,10 @@ def __init__(self, file, name=None):\n             self.mode = file.mode\n \n     def __str__(self):\n-        return smart_str(self.name or '')\n+        return smart_bytes(self.name or '')\n \n     def __unicode__(self):\n-        return smart_unicode(self.name or '')\n+        return smart_text(self.name or '')\n \n     def __repr__(self):\n         return \"<%s: %s>\" % (self.__class__.__name__, self or \"None\")"
        },
        {
            "sha": "7542dcda46dd44ab2c920ce97ddf42b619ca6ca5",
            "filename": "django/core/files/storage.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Ffiles%2Fstorage.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Ffiles%2Fstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fstorage.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -11,7 +11,7 @@\n from django.core.exceptions import ImproperlyConfigured, SuspiciousOperation\n from django.core.files import locks, File\n from django.core.files.move import file_move_safe\n-from django.utils.encoding import force_unicode, filepath_to_uri\n+from django.utils.encoding import force_text, filepath_to_uri\n from django.utils.functional import LazyObject\n from django.utils.importlib import import_module\n from django.utils.text import get_valid_filename\n@@ -48,7 +48,7 @@ def save(self, name, content):\n         name = self._save(name, content)\n \n         # Store filenames with forward slashes, even on Windows\n-        return force_unicode(name.replace('\\\\', '/'))\n+        return force_text(name.replace('\\\\', '/'))\n \n     # These methods are part of the public API, with default implementations.\n "
        },
        {
            "sha": "3a6c63297598efb90e5e948f5c2bd2161051809b",
            "filename": "django/core/files/uploadedfile.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Ffiles%2Fuploadedfile.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Ffiles%2Fuploadedfile.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fuploadedfile.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.conf import settings\n from django.core.files.base import File\n from django.core.files import temp as tempfile\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n \n __all__ = ('UploadedFile', 'TemporaryUploadedFile', 'InMemoryUploadedFile',\n            'SimpleUploadedFile')\n@@ -30,7 +30,7 @@ def __init__(self, file=None, name=None, content_type=None, size=None, charset=N\n         self.charset = charset\n \n     def __repr__(self):\n-        return smart_str(\"<%s: %s (%s)>\" % (\n+        return smart_bytes(\"<%s: %s (%s)>\" % (\n             self.__class__.__name__, self.name, self.content_type))\n \n     def _get_name(self):"
        },
        {
            "sha": "5a6825f0a798ca3b521b45f7fb53074dd6b91a1c",
            "filename": "django/core/handlers/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fhandlers%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fhandlers%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fhandlers%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -4,7 +4,7 @@\n \n from django import http\n from django.core import signals\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.importlib import import_module\n from django.utils.log import getLogger\n from django.utils import six\n@@ -250,7 +250,7 @@ def get_script_name(environ):\n     \"\"\"\n     from django.conf import settings\n     if settings.FORCE_SCRIPT_NAME is not None:\n-        return force_unicode(settings.FORCE_SCRIPT_NAME)\n+        return force_text(settings.FORCE_SCRIPT_NAME)\n \n     # If Apache's mod_rewrite had a whack at the URL, Apache set either\n     # SCRIPT_URL or REDIRECT_URL to the full resource URL before applying any\n@@ -261,5 +261,5 @@ def get_script_name(environ):\n     if not script_url:\n         script_url = environ.get('REDIRECT_URL', '')\n     if script_url:\n-        return force_unicode(script_url[:-len(environ.get('PATH_INFO', ''))])\n-    return force_unicode(environ.get('SCRIPT_NAME', ''))\n+        return force_text(script_url[:-len(environ.get('PATH_INFO', ''))])\n+    return force_text(environ.get('SCRIPT_NAME', ''))"
        },
        {
            "sha": "70b23f851544c12e5891227b2c6a8d1cb7190e65",
            "filename": "django/core/handlers/wsgi.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fhandlers%2Fwsgi.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n from django.core.handlers import base\n from django.core.urlresolvers import set_script_prefix\n from django.utils import datastructures\n-from django.utils.encoding import force_unicode, smart_str, iri_to_uri\n+from django.utils.encoding import force_text, smart_bytes, iri_to_uri\n from django.utils.log import getLogger\n \n logger = getLogger('django.request')\n@@ -127,7 +127,7 @@ def readline(self, size=None):\n class WSGIRequest(http.HttpRequest):\n     def __init__(self, environ):\n         script_name = base.get_script_name(environ)\n-        path_info = force_unicode(environ.get('PATH_INFO', '/'))\n+        path_info = force_text(environ.get('PATH_INFO', '/'))\n         if not path_info or path_info == script_name:\n             # Sometimes PATH_INFO exists, but is empty (e.g. accessing\n             # the SCRIPT_NAME URL without a trailing slash). We really need to\n@@ -246,5 +246,5 @@ def __call__(self, environ, start_response):\n         response_headers = [(str(k), str(v)) for k, v in response.items()]\n         for c in response.cookies.values():\n             response_headers.append((str('Set-Cookie'), str(c.output(header=''))))\n-        start_response(smart_str(status), response_headers)\n+        start_response(smart_bytes(status), response_headers)\n         return response"
        },
        {
            "sha": "8f589ae33da8b7dd74e67db5b77788a0778f82d0",
            "filename": "django/core/mail/message.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fmail%2Fmessage.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fmail%2Fmessage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fmessage.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -15,7 +15,7 @@\n \n from django.conf import settings\n from django.core.mail.utils import DNS_NAME\n-from django.utils.encoding import smart_str, force_unicode\n+from django.utils.encoding import smart_bytes, force_text\n from django.utils import six\n \n \n@@ -79,7 +79,7 @@ def make_msgid(idstring=None):\n def forbid_multi_line_headers(name, val, encoding):\n     \"\"\"Forbids multi-line headers, to prevent header injection.\"\"\"\n     encoding = encoding or settings.DEFAULT_CHARSET\n-    val = force_unicode(val)\n+    val = force_text(val)\n     if '\\n' in val or '\\r' in val:\n         raise BadHeaderError(\"Header values can't contain newlines (got %r for header %r)\" % (val, name))\n     try:\n@@ -93,12 +93,12 @@ def forbid_multi_line_headers(name, val, encoding):\n     else:\n         if name.lower() == 'subject':\n             val = Header(val)\n-    return smart_str(name), val\n+    return smart_bytes(name), val\n \n \n def sanitize_address(addr, encoding):\n     if isinstance(addr, six.string_types):\n-        addr = parseaddr(force_unicode(addr))\n+        addr = parseaddr(force_text(addr))\n     nm, addr = addr\n     nm = str(Header(nm, encoding))\n     try:\n@@ -210,7 +210,7 @@ def get_connection(self, fail_silently=False):\n \n     def message(self):\n         encoding = self.encoding or settings.DEFAULT_CHARSET\n-        msg = SafeMIMEText(smart_str(self.body, encoding),\n+        msg = SafeMIMEText(smart_bytes(self.body, encoding),\n                            self.content_subtype, encoding)\n         msg = self._create_message(msg)\n         msg['Subject'] = self.subject\n@@ -293,7 +293,7 @@ def _create_mime_attachment(self, content, mimetype):\n         basetype, subtype = mimetype.split('/', 1)\n         if basetype == 'text':\n             encoding = self.encoding or settings.DEFAULT_CHARSET\n-            attachment = SafeMIMEText(smart_str(content, encoding), subtype, encoding)\n+            attachment = SafeMIMEText(smart_bytes(content, encoding), subtype, encoding)\n         else:\n             # Encode non-text attachments with base64.\n             attachment = MIMEBase(basetype, subtype)"
        },
        {
            "sha": "411042ee764cc2cd1382171fcb418d9d107ee851",
            "filename": "django/core/management/commands/createcachetable.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fmanagement%2Fcommands%2Fcreatecachetable.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fmanagement%2Fcommands%2Fcreatecachetable.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fcreatecachetable.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -4,7 +4,7 @@\n from django.core.management.base import LabelCommand, CommandError\n from django.db import connections, router, transaction, models, DEFAULT_DB_ALIAS\n from django.db.utils import DatabaseError\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n \n class Command(LabelCommand):\n@@ -60,7 +60,7 @@ def handle_label(self, tablename, **options):\n             transaction.rollback_unless_managed(using=db)\n             raise CommandError(\n                 \"Cache table '%s' could not be created.\\nThe error was: %s.\" %\n-                    (tablename, force_unicode(e)))\n+                    (tablename, force_text(e)))\n         for statement in index_output:\n             curs.execute(statement)\n         transaction.commit_unless_managed(using=db)"
        },
        {
            "sha": "1896e53cee7798c67d533b17f5cc44a5e02f5fc1",
            "filename": "django/core/management/commands/loaddata.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fmanagement%2Fcommands%2Floaddata.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fmanagement%2Fcommands%2Floaddata.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Floaddata.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -14,7 +14,7 @@\n from django.db import (connections, router, transaction, DEFAULT_DB_ALIAS,\n       IntegrityError, DatabaseError)\n from django.db.models import get_apps\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from itertools import product\n \n try:\n@@ -189,7 +189,7 @@ def read(self):\n                                                         'app_label': obj.object._meta.app_label,\n                                                         'object_name': obj.object._meta.object_name,\n                                                         'pk': obj.object.pk,\n-                                                        'error_msg': force_unicode(e)\n+                                                        'error_msg': force_text(e)\n                                                     },)\n                                                 raise\n "
        },
        {
            "sha": "78a01c7098392d804b65bbbcde60091dd11b2857",
            "filename": "django/core/serializers/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -5,7 +5,7 @@\n from io import BytesIO\n \n from django.db import models\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils import six\n \n class SerializerDoesNotExist(KeyError):"
        },
        {
            "sha": "3bac24d33ad94624397cac5beb5fdfd9d00a6fd6",
            "filename": "django/core/serializers/json.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fjson.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fjson.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fjson.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -12,7 +12,7 @@\n from django.core.serializers.base import DeserializationError\n from django.core.serializers.python import Serializer as PythonSerializer\n from django.core.serializers.python import Deserializer as PythonDeserializer\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.utils import six\n from django.utils.timezone import is_aware\n "
        },
        {
            "sha": "348ff1dada460011558fa63fbb2eb219be594b83",
            "filename": "django/core/serializers/python.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fpython.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fpython.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fpython.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.conf import settings\n from django.core.serializers import base\n from django.db import models, DEFAULT_DB_ALIAS\n-from django.utils.encoding import smart_unicode, is_protected_type\n+from django.utils.encoding import smart_text, is_protected_type\n from django.utils import six\n \n class Serializer(base.Serializer):\n@@ -34,8 +34,8 @@ def end_object(self, obj):\n \n     def get_dump_object(self, obj):\n         return {\n-            \"pk\": smart_unicode(obj._get_pk_val(), strings_only=True),\n-            \"model\": smart_unicode(obj._meta),\n+            \"pk\": smart_text(obj._get_pk_val(), strings_only=True),\n+            \"model\": smart_text(obj._meta),\n             \"fields\": self._current\n         }\n \n@@ -65,7 +65,7 @@ def handle_m2m_field(self, obj, field):\n             if self.use_natural_keys and hasattr(field.rel.to, 'natural_key'):\n                 m2m_value = lambda value: value.natural_key()\n             else:\n-                m2m_value = lambda value: smart_unicode(value._get_pk_val(), strings_only=True)\n+                m2m_value = lambda value: smart_text(value._get_pk_val(), strings_only=True)\n             self._current[field.name] = [m2m_value(related)\n                                for related in getattr(obj, field.name).iterator()]\n \n@@ -90,7 +90,7 @@ def Deserializer(object_list, **options):\n         # Handle each field\n         for (field_name, field_value) in six.iteritems(d[\"fields\"]):\n             if isinstance(field_value, str):\n-                field_value = smart_unicode(field_value, options.get(\"encoding\", settings.DEFAULT_CHARSET), strings_only=True)\n+                field_value = smart_text(field_value, options.get(\"encoding\", settings.DEFAULT_CHARSET), strings_only=True)\n \n             field = Model._meta.get_field(field_name)\n \n@@ -101,9 +101,9 @@ def m2m_convert(value):\n                         if hasattr(value, '__iter__'):\n                             return field.rel.to._default_manager.db_manager(db).get_by_natural_key(*value).pk\n                         else:\n-                            return smart_unicode(field.rel.to._meta.pk.to_python(value))\n+                            return smart_text(field.rel.to._meta.pk.to_python(value))\n                 else:\n-                    m2m_convert = lambda v: smart_unicode(field.rel.to._meta.pk.to_python(v))\n+                    m2m_convert = lambda v: smart_text(field.rel.to._meta.pk.to_python(v))\n                 m2m_data[field.name] = [m2m_convert(pk) for pk in field_value]\n \n             # Handle FK fields"
        },
        {
            "sha": "9be1ea44925ead029126c2b0d8b7f3c266ee8864",
            "filename": "django/core/serializers/pyyaml.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fpyyaml.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -12,7 +12,7 @@\n from django.core.serializers.base import DeserializationError\n from django.core.serializers.python import Serializer as PythonSerializer\n from django.core.serializers.python import Deserializer as PythonDeserializer\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.utils import six\n \n "
        },
        {
            "sha": "c4e4dd189ece69219ab29e6f991eee7eebc82543",
            "filename": "django/core/serializers/xml_serializer.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fxml_serializer.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fserializers%2Fxml_serializer.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fxml_serializer.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.core.serializers import base\n from django.db import models, DEFAULT_DB_ALIAS\n from django.utils.xmlutils import SimplerXMLGenerator\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from xml.dom import pulldom\n \n class Serializer(base.Serializer):\n@@ -46,11 +46,11 @@ def start_object(self, obj):\n         self.indent(1)\n         obj_pk = obj._get_pk_val()\n         if obj_pk is None:\n-            attrs = {\"model\": smart_unicode(obj._meta),}\n+            attrs = {\"model\": smart_text(obj._meta),}\n         else:\n             attrs = {\n-                \"pk\": smart_unicode(obj._get_pk_val()),\n-                \"model\": smart_unicode(obj._meta),\n+                \"pk\": smart_text(obj._get_pk_val()),\n+                \"model\": smart_text(obj._meta),\n             }\n \n         self.xml.startElement(\"object\", attrs)\n@@ -96,10 +96,10 @@ def handle_fk_field(self, obj, field):\n                 # Iterable natural keys are rolled out as subelements\n                 for key_value in related:\n                     self.xml.startElement(\"natural\", {})\n-                    self.xml.characters(smart_unicode(key_value))\n+                    self.xml.characters(smart_text(key_value))\n                     self.xml.endElement(\"natural\")\n             else:\n-                self.xml.characters(smart_unicode(related_att))\n+                self.xml.characters(smart_text(related_att))\n         else:\n             self.xml.addQuickElement(\"None\")\n         self.xml.endElement(\"field\")\n@@ -120,13 +120,13 @@ def handle_m2m(value):\n                     self.xml.startElement(\"object\", {})\n                     for key_value in natural:\n                         self.xml.startElement(\"natural\", {})\n-                        self.xml.characters(smart_unicode(key_value))\n+                        self.xml.characters(smart_text(key_value))\n                         self.xml.endElement(\"natural\")\n                     self.xml.endElement(\"object\")\n             else:\n                 def handle_m2m(value):\n                     self.xml.addQuickElement(\"object\", attrs={\n-                        'pk' : smart_unicode(value._get_pk_val())\n+                        'pk' : smart_text(value._get_pk_val())\n                     })\n             for relobj in getattr(obj, field.name).iterator():\n                 handle_m2m(relobj)\n@@ -141,7 +141,7 @@ def _start_relational_field(self, field):\n         self.xml.startElement(\"field\", {\n             \"name\" : field.name,\n             \"rel\"  : field.rel.__class__.__name__,\n-            \"to\"   : smart_unicode(field.rel.to._meta),\n+            \"to\"   : smart_text(field.rel.to._meta),\n         })\n \n class Deserializer(base.Deserializer):"
        },
        {
            "sha": "9ab8c5b8b0d8f934bf1bb615f3052caa3a69d39c",
            "filename": "django/core/signing.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fsigning.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fsigning.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fsigning.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -41,7 +41,7 @@\n from django.core.exceptions import ImproperlyConfigured\n from django.utils import baseconv\n from django.utils.crypto import constant_time_compare, salted_hmac\n-from django.utils.encoding import force_unicode, smart_str\n+from django.utils.encoding import force_text, smart_bytes\n from django.utils.importlib import import_module\n \n \n@@ -135,7 +135,7 @@ def loads(s, key=None, salt='django.core.signing', serializer=JSONSerializer, ma\n     \"\"\"\n     Reverse of dumps(), raises BadSignature if signature fails\n     \"\"\"\n-    base64d = smart_str(\n+    base64d = smart_bytes(\n         TimestampSigner(key, salt=salt).unsign(s, max_age=max_age))\n     decompress = False\n     if base64d[0] == '.':\n@@ -159,16 +159,16 @@ def signature(self, value):\n         return base64_hmac(self.salt + 'signer', value, self.key)\n \n     def sign(self, value):\n-        value = smart_str(value)\n+        value = smart_bytes(value)\n         return '%s%s%s' % (value, self.sep, self.signature(value))\n \n     def unsign(self, signed_value):\n-        signed_value = smart_str(signed_value)\n+        signed_value = smart_bytes(signed_value)\n         if not self.sep in signed_value:\n             raise BadSignature('No \"%s\" found in value' % self.sep)\n         value, sig = signed_value.rsplit(self.sep, 1)\n         if constant_time_compare(sig, self.signature(value)):\n-            return force_unicode(value)\n+            return force_text(value)\n         raise BadSignature('Signature \"%s\" does not match' % sig)\n \n \n@@ -178,7 +178,7 @@ def timestamp(self):\n         return baseconv.base62.encode(int(time.time()))\n \n     def sign(self, value):\n-        value = smart_str('%s%s%s' % (value, self.sep, self.timestamp()))\n+        value = smart_bytes('%s%s%s' % (value, self.sep, self.timestamp()))\n         return '%s%s%s' % (value, self.sep, self.signature(value))\n \n     def unsign(self, value, max_age=None):"
        },
        {
            "sha": "2fe744e8eb450d43f72b2cbf7bd800124d33f0ba",
            "filename": "django/core/urlresolvers.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Furlresolvers.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Furlresolvers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Furlresolvers.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -14,7 +14,7 @@\n from django.http import Http404\n from django.core.exceptions import ImproperlyConfigured, ViewDoesNotExist\n from django.utils.datastructures import MultiValueDict\n-from django.utils.encoding import iri_to_uri, force_unicode, smart_str\n+from django.utils.encoding import iri_to_uri, force_text, smart_bytes\n from django.utils.functional import memoize, lazy\n from django.utils.importlib import import_module\n from django.utils.module_loading import module_has_submodule\n@@ -163,7 +163,7 @@ def regex(self):\n             if isinstance(self._regex, six.string_types):\n                 regex = self._regex\n             else:\n-                regex = force_unicode(self._regex)\n+                regex = force_text(self._regex)\n             try:\n                 compiled_regex = re.compile(regex, re.UNICODE)\n             except re.error as e:\n@@ -190,7 +190,7 @@ def __init__(self, regex, callback, default_args=None, name=None):\n         self.name = name\n \n     def __repr__(self):\n-        return smart_str('<%s %s %s>' % (self.__class__.__name__, self.name, self.regex.pattern))\n+        return smart_bytes('<%s %s %s>' % (self.__class__.__name__, self.name, self.regex.pattern))\n \n     def add_prefix(self, prefix):\n         \"\"\"\n@@ -240,7 +240,7 @@ def __init__(self, regex, urlconf_name, default_kwargs=None, app_name=None, name\n         self._app_dict = {}\n \n     def __repr__(self):\n-        return smart_str('<%s %s (%s:%s) %s>' % (self.__class__.__name__, self.urlconf_name, self.app_name, self.namespace, self.regex.pattern))\n+        return smart_bytes('<%s %s (%s:%s) %s>' % (self.__class__.__name__, self.urlconf_name, self.app_name, self.namespace, self.regex.pattern))\n \n     def _populate(self):\n         lookups = MultiValueDict()\n@@ -373,7 +373,7 @@ def _reverse_with_prefix(self, lookup_view, _prefix, *args, **kwargs):\n                 if args:\n                     if len(args) != len(params) + len(prefix_args):\n                         continue\n-                    unicode_args = [force_unicode(val) for val in args]\n+                    unicode_args = [force_text(val) for val in args]\n                     candidate =  (prefix_norm + result) % dict(zip(prefix_args + params, unicode_args))\n                 else:\n                     if set(kwargs.keys()) | set(defaults.keys()) != set(params) | set(defaults.keys()) | set(prefix_args):\n@@ -385,7 +385,7 @@ def _reverse_with_prefix(self, lookup_view, _prefix, *args, **kwargs):\n                             break\n                     if not matches:\n                         continue\n-                    unicode_kwargs = dict([(k, force_unicode(v)) for (k, v) in kwargs.items()])\n+                    unicode_kwargs = dict([(k, force_text(v)) for (k, v) in kwargs.items()])\n                     candidate = (prefix_norm + result) % unicode_kwargs\n                 if re.search('^%s%s' % (_prefix, pattern), candidate, re.UNICODE):\n                     return candidate"
        },
        {
            "sha": "fd5dfa28d6d46e4b53d5535231543109c0f318d0",
            "filename": "django/core/validators.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fvalidators.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fcore%2Fvalidators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fvalidators.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n \n from django.core.exceptions import ValidationError\n from django.utils.translation import ugettext_lazy as _\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.ipv6 import is_valid_ipv6_address\n from django.utils import six\n \n@@ -36,7 +36,7 @@ def __call__(self, value):\n         \"\"\"\n         Validates that the input matches the regular expression.\n         \"\"\"\n-        if not self.regex.search(smart_unicode(value)):\n+        if not self.regex.search(smart_text(value)):\n             raise ValidationError(self.message, code=self.code)\n \n class URLValidator(RegexValidator):\n@@ -54,7 +54,7 @@ def __call__(self, value):\n         except ValidationError as e:\n             # Trivial case failed. Try for possible IDN domain\n             if value:\n-                value = smart_unicode(value)\n+                value = smart_text(value)\n                 scheme, netloc, path, query, fragment = urlsplit(value)\n                 try:\n                     netloc = netloc.encode('idna') # IDN -> ACE"
        },
        {
            "sha": "960624516208f09dc064a7399e542d6084fece7f",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -607,16 +607,16 @@ def last_executed_query(self, cursor, sql, params):\n         exists for database backends to provide a better implementation\n         according to their own quoting schemes.\n         \"\"\"\n-        from django.utils.encoding import smart_unicode, force_unicode\n+        from django.utils.encoding import smart_text, force_text\n \n         # Convert params to contain Unicode values.\n-        to_unicode = lambda s: force_unicode(s, strings_only=True, errors='replace')\n+        to_unicode = lambda s: force_text(s, strings_only=True, errors='replace')\n         if isinstance(params, (list, tuple)):\n             u_params = tuple([to_unicode(val) for val in params])\n         else:\n             u_params = dict([(to_unicode(k), to_unicode(v)) for k, v in params.items()])\n \n-        return smart_unicode(sql) % u_params\n+        return smart_text(sql) % u_params\n \n     def last_insert_id(self, cursor, table_name, pk_name):\n         \"\"\"\n@@ -800,8 +800,8 @@ def tablespace_sql(self, tablespace, inline=False):\n \n     def prep_for_like_query(self, x):\n         \"\"\"Prepares a value for use in a LIKE query.\"\"\"\n-        from django.utils.encoding import smart_unicode\n-        return smart_unicode(x).replace(\"\\\\\", \"\\\\\\\\\").replace(\"%\", \"\\%\").replace(\"_\", \"\\_\")\n+        from django.utils.encoding import smart_text\n+        return smart_text(x).replace(\"\\\\\", \"\\\\\\\\\").replace(\"%\", \"\\%\").replace(\"_\", \"\\_\")\n \n     # Same as prep_for_like_query(), but called for \"iexact\" matches, which\n     # need not necessarily be implemented using \"LIKE\" in the backend."
        },
        {
            "sha": "0f1613047784d39e80882b7aec9cd0273ea9bc69",
            "filename": "django/db/backends/oracle/base.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -53,7 +53,7 @@ def _setup_environment(environ):\n from django.db.backends.oracle.client import DatabaseClient\n from django.db.backends.oracle.creation import DatabaseCreation\n from django.db.backends.oracle.introspection import DatabaseIntrospection\n-from django.utils.encoding import smart_str, force_unicode\n+from django.utils.encoding import smart_bytes, force_text\n from django.utils import six\n from django.utils import timezone\n \n@@ -64,9 +64,9 @@ def _setup_environment(environ):\n # Check whether cx_Oracle was compiled with the WITH_UNICODE option.  This will\n # also be True in Python 3.0.\n if int(Database.version.split('.', 1)[0]) >= 5 and not hasattr(Database, 'UNICODE'):\n-    convert_unicode = force_unicode\n+    convert_unicode = force_text\n else:\n-    convert_unicode = smart_str\n+    convert_unicode = smart_bytes\n \n \n class DatabaseFeatures(BaseDatabaseFeatures):\n@@ -162,7 +162,7 @@ def convert_values(self, value, field):\n         if isinstance(value, Database.LOB):\n             value = value.read()\n             if field and field.get_internal_type() == 'TextField':\n-                value = force_unicode(value)\n+                value = force_text(value)\n \n         # Oracle stores empty strings as null. We need to undo this in\n         # order to adhere to the Django convention of using the empty\n@@ -245,7 +245,7 @@ def prep_for_iexact_query(self, x):\n     def process_clob(self, value):\n         if value is None:\n             return ''\n-        return force_unicode(value.read())\n+        return force_text(value.read())\n \n     def quote_name(self, name):\n         # SQL92 requires delimited (quoted) names to be case-sensitive.  When\n@@ -595,9 +595,9 @@ def __init__(self, param, cursor, strings_only=False):\n             param = param.astimezone(timezone.utc).replace(tzinfo=None)\n \n         if hasattr(param, 'bind_parameter'):\n-            self.smart_str = param.bind_parameter(cursor)\n+            self.smart_bytes = param.bind_parameter(cursor)\n         else:\n-            self.smart_str = convert_unicode(param, cursor.charset,\n+            self.smart_bytes = convert_unicode(param, cursor.charset,\n                                              strings_only)\n         if hasattr(param, 'input_size'):\n             # If parameter has `input_size` attribute, use that.\n@@ -676,7 +676,7 @@ def _guess_input_sizes(self, params_list):\n         self.setinputsizes(*sizes)\n \n     def _param_generator(self, params):\n-        return [p.smart_str for p in params]\n+        return [p.smart_bytes for p in params]\n \n     def execute(self, query, params=None):\n         if params is None:\n@@ -831,7 +831,7 @@ def to_unicode(s):\n     unchanged).\n     \"\"\"\n     if isinstance(s, six.string_types):\n-        return force_unicode(s)\n+        return force_text(s)\n     return s\n \n "
        },
        {
            "sha": "4568430bfaf4d9ccddb9f37e28e4e9b5c9bd2ee0",
            "filename": "django/db/models/base.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -23,7 +23,7 @@\n from django.db.models.loading import register_models, get_model\n from django.utils.translation import ugettext_lazy as _\n from django.utils.functional import curry\n-from django.utils.encoding import smart_str, force_unicode\n+from django.utils.encoding import smart_bytes, force_text\n from django.utils import six\n from django.utils.text import get_text_list, capfirst\n \n@@ -380,11 +380,11 @@ def __repr__(self):\n             u = six.text_type(self)\n         except (UnicodeEncodeError, UnicodeDecodeError):\n             u = '[Bad Unicode data]'\n-        return smart_str('<%s: %s>' % (self.__class__.__name__, u))\n+        return smart_bytes('<%s: %s>' % (self.__class__.__name__, u))\n \n     def __str__(self):\n         if hasattr(self, '__unicode__'):\n-            return force_unicode(self).encode('utf-8')\n+            return force_text(self).encode('utf-8')\n         return '%s object' % self.__class__.__name__\n \n     def __eq__(self, other):\n@@ -605,14 +605,14 @@ def delete(self, using=None):\n \n     def _get_FIELD_display(self, field):\n         value = getattr(self, field.attname)\n-        return force_unicode(dict(field.flatchoices).get(value, value), strings_only=True)\n+        return force_text(dict(field.flatchoices).get(value, value), strings_only=True)\n \n     def _get_next_or_previous_by_FIELD(self, field, is_next, **kwargs):\n         if not self.pk:\n             raise ValueError(\"get_next/get_previous cannot be used on unsaved objects.\")\n         op = is_next and 'gt' or 'lt'\n         order = not is_next and '-' or ''\n-        param = smart_str(getattr(self, field.attname))\n+        param = smart_bytes(getattr(self, field.attname))\n         q = Q(**{'%s__%s' % (field.name, op): param})\n         q = q|Q(**{field.name: param, 'pk__%s' % op: self.pk})\n         qs = self.__class__._default_manager.using(self._state.db).filter(**kwargs).filter(q).order_by('%s%s' % (order, field.name), '%spk' % order)"
        },
        {
            "sha": "2c738d6a20f04b5f6d72061b0dce587fab41c720",
            "filename": "django/db/models/fields/__init__.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2F__init__.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -19,7 +19,7 @@\n from django.utils.text import capfirst\n from django.utils import timezone\n from django.utils.translation import ugettext_lazy as _\n-from django.utils.encoding import smart_unicode, force_unicode\n+from django.utils.encoding import smart_text, force_text\n from django.utils.ipv6 import clean_ipv6_address\n from django.utils import six\n \n@@ -386,7 +386,7 @@ def get_default(self):\n         if self.has_default():\n             if callable(self.default):\n                 return self.default()\n-            return force_unicode(self.default, strings_only=True)\n+            return force_text(self.default, strings_only=True)\n         if (not self.empty_strings_allowed or (self.null and\n                    not connection.features.interprets_empty_strings_as_nulls)):\n             return None\n@@ -404,11 +404,11 @@ def get_choices(self, include_blank=True, blank_choice=BLANK_CHOICE_DASH):\n         rel_model = self.rel.to\n         if hasattr(self.rel, 'get_related_field'):\n             lst = [(getattr(x, self.rel.get_related_field().attname),\n-                        smart_unicode(x))\n+                        smart_text(x))\n                    for x in rel_model._default_manager.complex_filter(\n                        self.rel.limit_choices_to)]\n         else:\n-            lst = [(x._get_pk_val(), smart_unicode(x))\n+            lst = [(x._get_pk_val(), smart_text(x))\n                    for x in rel_model._default_manager.complex_filter(\n                        self.rel.limit_choices_to)]\n         return first_choice + lst\n@@ -435,7 +435,7 @@ def value_to_string(self, obj):\n         Returns a string value of this field from the passed obj.\n         This is used by the serialization framework.\n         \"\"\"\n-        return smart_unicode(self._get_val_from_obj(obj))\n+        return smart_text(self._get_val_from_obj(obj))\n \n     def bind(self, fieldmapping, original, bound_field_class):\n         return bound_field_class(self, fieldmapping, original)\n@@ -629,7 +629,7 @@ def get_internal_type(self):\n     def to_python(self, value):\n         if isinstance(value, six.string_types) or value is None:\n             return value\n-        return smart_unicode(value)\n+        return smart_text(value)\n \n     def get_prep_value(self, value):\n         return self.to_python(value)\n@@ -1189,7 +1189,7 @@ def get_internal_type(self):\n     def get_prep_value(self, value):\n         if isinstance(value, six.string_types) or value is None:\n             return value\n-        return smart_unicode(value)\n+        return smart_text(value)\n \n     def formfield(self, **kwargs):\n         defaults = {'widget': forms.Textarea}"
        },
        {
            "sha": "ad4c36ca0d10e00d9575a062cef64912b67dc9c4",
            "filename": "django/db/models/fields/files.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.core.files.storage import default_storage\n from django.core.files.images import ImageFile\n from django.db.models import signals\n-from django.utils.encoding import force_unicode, smart_str\n+from django.utils.encoding import force_text, smart_bytes\n from django.utils import six\n from django.utils.translation import ugettext_lazy as _\n \n@@ -280,7 +280,7 @@ def contribute_to_class(self, cls, name):\n         setattr(cls, self.name, self.descriptor_class(self))\n \n     def get_directory_name(self):\n-        return os.path.normpath(force_unicode(datetime.datetime.now().strftime(smart_str(self.upload_to))))\n+        return os.path.normpath(force_text(datetime.datetime.now().strftime(smart_bytes(self.upload_to))))\n \n     def get_filename(self, filename):\n         return os.path.normpath(self.storage.get_valid_name(os.path.basename(filename)))"
        },
        {
            "sha": "eaa62c60613f31dfe5144d00209071c933072b2c",
            "filename": "django/db/models/fields/related.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Ffields%2Frelated.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Ffields%2Frelated.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2Frelated.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n from django.db.models.query import QuerySet\n from django.db.models.query_utils import QueryWrapper\n from django.db.models.deletion import CASCADE\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils import six\n from django.utils.translation import ugettext_lazy as _, string_concat\n from django.utils.functional import curry, cached_property\n@@ -999,7 +999,7 @@ def value_to_string(self, obj):\n             if not self.blank and self.choices:\n                 choice_list = self.get_choices_default()\n                 if len(choice_list) == 2:\n-                    return smart_unicode(choice_list[1][0])\n+                    return smart_text(choice_list[1][0])\n         return Field.value_to_string(self, obj)\n \n     def contribute_to_class(self, cls, name):\n@@ -1205,7 +1205,7 @@ def value_to_string(self, obj):\n                 choices_list = self.get_choices_default()\n                 if len(choices_list) == 1:\n                     data = [choices_list[0][0]]\n-        return smart_unicode(data)\n+        return smart_text(data)\n \n     def contribute_to_class(self, cls, name):\n         # To support multiple relations to self, it's useful to have a non-None"
        },
        {
            "sha": "239ad30b069234b4410bfa2b24c5e08ce642a9cf",
            "filename": "django/db/models/options.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Foptions.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -8,7 +8,7 @@\n from django.db.models.fields.proxy import OrderWrt\n from django.db.models.loading import get_models, app_cache_ready\n from django.utils.translation import activate, deactivate_all, get_language, string_concat\n-from django.utils.encoding import force_unicode, smart_str\n+from django.utils.encoding import force_text, smart_bytes\n from django.utils.datastructures import SortedDict\n from django.utils import six\n \n@@ -199,7 +199,7 @@ def __repr__(self):\n         return '<Options for %s>' % self.object_name\n \n     def __str__(self):\n-        return \"%s.%s\" % (smart_str(self.app_label), smart_str(self.module_name))\n+        return \"%s.%s\" % (smart_bytes(self.app_label), smart_bytes(self.module_name))\n \n     def verbose_name_raw(self):\n         \"\"\"\n@@ -209,7 +209,7 @@ def verbose_name_raw(self):\n         \"\"\"\n         lang = get_language()\n         deactivate_all()\n-        raw = force_unicode(self.verbose_name)\n+        raw = force_text(self.verbose_name)\n         activate(lang)\n         return raw\n     verbose_name_raw = property(verbose_name_raw)"
        },
        {
            "sha": "a0dcec71328dd93128b9fbde0c625c3f3ab7f900",
            "filename": "django/db/models/related.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Frelated.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Frelated.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Frelated.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,4 +1,4 @@\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.db.models.fields import BLANK_CHOICE_DASH\n \n class BoundRelatedObject(object):\n@@ -34,9 +34,9 @@ def get_choices(self, include_blank=True, blank_choice=BLANK_CHOICE_DASH,\n         if limit_to_currently_related:\n             queryset = queryset.complex_filter(\n                 {'%s__isnull' % self.parent_model._meta.module_name: False})\n-        lst = [(x._get_pk_val(), smart_unicode(x)) for x in queryset]\n+        lst = [(x._get_pk_val(), smart_text(x)) for x in queryset]\n         return first_choice + lst\n-        \n+\n     def get_db_prep_lookup(self, lookup_type, value, connection, prepared=False):\n         # Defer to the actual field definition for db prep\n         return self.field.get_db_prep_lookup(lookup_type, value,"
        },
        {
            "sha": "69dda228bd7bde5d46a5adbc4e5578e6e097cf84",
            "filename": "django/db/models/sql/query.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fquery.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n import copy\n \n from django.utils.datastructures import SortedDict\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.tree import Node\n from django.utils import six\n from django.db import connections, DEFAULT_DB_ALIAS\n@@ -1776,7 +1776,7 @@ def add_extra(self, select, select_params, where, params, tables, order_by):\n             else:\n                 param_iter = iter([])\n             for name, entry in select.items():\n-                entry = force_unicode(entry)\n+                entry = force_text(entry)\n                 entry_params = []\n                 pos = entry.find(\"%s\")\n                 while pos != -1:"
        },
        {
            "sha": "937505b9b0f1c3b1b9fb9b476b21b76d9b334ff1",
            "filename": "django/db/models/sql/subqueries.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n from django.db.models.sql.where import AND, Constraint\n from django.utils.datastructures import SortedDict\n from django.utils.functional import Promise\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils import six\n \n \n@@ -105,7 +105,7 @@ def add_update_fields(self, values_seq):\n         saving models.\n         \"\"\"\n         # Check that no Promise object passes to the query. Refs #10498.\n-        values_seq = [(value[0], value[1], force_unicode(value[2]))\n+        values_seq = [(value[0], value[1], force_text(value[2]))\n                       if isinstance(value[2], Promise) else value\n                       for value in values_seq]\n         self.values.extend(values_seq)\n@@ -171,7 +171,7 @@ def insert_values(self, fields, objs, raw=False):\n             for obj in objs:\n                 value = getattr(obj, field.attname)\n                 if isinstance(value, Promise):\n-                    setattr(obj, field.attname, force_unicode(value))\n+                    setattr(obj, field.attname, force_text(value))\n         self.objs = objs\n         self.raw = raw\n "
        },
        {
            "sha": "7f0d26d1aa799b076ad7d650632c02bf82036e2d",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -23,7 +23,7 @@\n     NullBooleanSelect, SelectMultiple, DateInput, DateTimeInput, TimeInput,\n     SplitDateTimeWidget, SplitHiddenDateTimeWidget, FILE_INPUT_CONTRADICTION)\n from django.utils import formats\n-from django.utils.encoding import smart_unicode, force_unicode\n+from django.utils.encoding import smart_text, force_text\n from django.utils.ipv6 import clean_ipv6_address\n from django.utils import six\n from django.utils.translation import ugettext_lazy as _\n@@ -78,13 +78,13 @@ def __init__(self, required=True, widget=None, label=None, initial=None,\n         # validators -- List of addtional validators to use\n         # localize -- Boolean that specifies if the field should be localized.\n         if label is not None:\n-            label = smart_unicode(label)\n+            label = smart_text(label)\n         self.required, self.label, self.initial = required, label, initial\n         self.show_hidden_initial = show_hidden_initial\n         if help_text is None:\n             self.help_text = ''\n         else:\n-            self.help_text = smart_unicode(help_text)\n+            self.help_text = smart_text(help_text)\n         widget = widget or self.widget\n         if isinstance(widget, type):\n             widget = widget()\n@@ -195,7 +195,7 @@ def to_python(self, value):\n         \"Returns a Unicode object.\"\n         if value in validators.EMPTY_VALUES:\n             return ''\n-        return smart_unicode(value)\n+        return smart_text(value)\n \n     def widget_attrs(self, widget):\n         attrs = super(CharField, self).widget_attrs(widget)\n@@ -288,7 +288,7 @@ def to_python(self, value):\n             return None\n         if self.localize:\n             value = formats.sanitize_separators(value)\n-        value = smart_unicode(value).strip()\n+        value = smart_text(value).strip()\n         try:\n             value = Decimal(value)\n         except DecimalException:\n@@ -333,7 +333,7 @@ def __init__(self, input_formats=None, *args, **kwargs):\n \n     def to_python(self, value):\n         # Try to coerce the value to unicode.\n-        unicode_value = force_unicode(value, strings_only=True)\n+        unicode_value = force_text(value, strings_only=True)\n         if isinstance(unicode_value, six.text_type):\n             value = unicode_value.strip()\n         # If unicode, try to strptime against each input format.\n@@ -692,7 +692,7 @@ def to_python(self, value):\n         \"Returns a Unicode object.\"\n         if value in validators.EMPTY_VALUES:\n             return ''\n-        return smart_unicode(value)\n+        return smart_text(value)\n \n     def validate(self, value):\n         \"\"\"\n@@ -708,10 +708,10 @@ def valid_value(self, value):\n             if isinstance(v, (list, tuple)):\n                 # This is an optgroup, so look inside the group for options\n                 for k2, v2 in v:\n-                    if value == smart_unicode(k2):\n+                    if value == smart_text(k2):\n                         return True\n             else:\n-                if value == smart_unicode(k):\n+                if value == smart_text(k):\n                     return True\n         return False\n \n@@ -752,7 +752,7 @@ def to_python(self, value):\n             return []\n         elif not isinstance(value, (list, tuple)):\n             raise ValidationError(self.error_messages['invalid_list'])\n-        return [smart_unicode(val) for val in value]\n+        return [smart_text(val) for val in value]\n \n     def validate(self, value):\n         \"\"\""
        },
        {
            "sha": "45b758202a185769fa8d0b0321a3871910fa4e38",
            "filename": "django/forms/forms.py",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fforms.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -12,7 +12,7 @@\n from django.forms.widgets import Media, media_property, TextInput, Textarea\n from django.utils.datastructures import SortedDict\n from django.utils.html import conditional_escape, format_html\n-from django.utils.encoding import StrAndUnicode, smart_unicode, force_unicode\n+from django.utils.encoding import StrAndUnicode, smart_text, force_text\n from django.utils.safestring import mark_safe\n from django.utils import six\n \n@@ -150,7 +150,7 @@ def _html_output(self, normal_row, error_row, row_ender, help_text_html, errors_\n             bf_errors = self.error_class([conditional_escape(error) for error in bf.errors]) # Escape and cache in local variable.\n             if bf.is_hidden:\n                 if bf_errors:\n-                    top_errors.extend(['(Hidden field %s) %s' % (name, force_unicode(e)) for e in bf_errors])\n+                    top_errors.extend(['(Hidden field %s) %s' % (name, force_text(e)) for e in bf_errors])\n                 hidden_fields.append(six.text_type(bf))\n             else:\n                 # Create a 'class=\"...\"' atribute if the row should have any\n@@ -160,10 +160,10 @@ def _html_output(self, normal_row, error_row, row_ender, help_text_html, errors_\n                     html_class_attr = ' class=\"%s\"' % css_classes\n \n                 if errors_on_separate_row and bf_errors:\n-                    output.append(error_row % force_unicode(bf_errors))\n+                    output.append(error_row % force_text(bf_errors))\n \n                 if bf.label:\n-                    label = conditional_escape(force_unicode(bf.label))\n+                    label = conditional_escape(force_text(bf.label))\n                     # Only add the suffix if the label does not end in\n                     # punctuation.\n                     if self.label_suffix:\n@@ -174,20 +174,20 @@ def _html_output(self, normal_row, error_row, row_ender, help_text_html, errors_\n                     label = ''\n \n                 if field.help_text:\n-                    help_text = help_text_html % force_unicode(field.help_text)\n+                    help_text = help_text_html % force_text(field.help_text)\n                 else:\n                     help_text = ''\n \n                 output.append(normal_row % {\n-                    'errors': force_unicode(bf_errors),\n-                    'label': force_unicode(label),\n+                    'errors': force_text(bf_errors),\n+                    'label': force_text(label),\n                     'field': six.text_type(bf),\n                     'help_text': help_text,\n                     'html_class_attr': html_class_attr\n                 })\n \n         if top_errors:\n-            output.insert(0, error_row % force_unicode(top_errors))\n+            output.insert(0, error_row % force_text(top_errors))\n \n         if hidden_fields: # Insert any hidden fields in the last row.\n             str_hidden = ''.join(hidden_fields)\n@@ -535,8 +535,8 @@ def _auto_id(self):\n         associated Form has specified auto_id. Returns an empty string otherwise.\n         \"\"\"\n         auto_id = self.form.auto_id\n-        if auto_id and '%s' in smart_unicode(auto_id):\n-            return smart_unicode(auto_id) % self.html_name\n+        if auto_id and '%s' in smart_text(auto_id):\n+            return smart_text(auto_id) % self.html_name\n         elif auto_id:\n             return self.html_name\n         return ''"
        },
        {
            "sha": "80d2a6536fcb1e77f2fd500ff0a0e2de2bd4cea8",
            "filename": "django/forms/models.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fmodels.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -13,7 +13,7 @@\n from django.forms.util import ErrorList\n from django.forms.widgets import (SelectMultiple, HiddenInput,\n     MultipleHiddenInput, media_property)\n-from django.utils.encoding import smart_unicode, force_unicode\n+from django.utils.encoding import smart_text, force_text\n from django.utils.datastructures import SortedDict\n from django.utils import six\n from django.utils.text import get_text_list, capfirst\n@@ -875,7 +875,7 @@ def clean(self, value):\n             orig = getattr(self.parent_instance, self.to_field)\n         else:\n             orig = self.parent_instance.pk\n-        if force_unicode(value) != force_unicode(orig):\n+        if force_text(value) != force_text(orig):\n             raise ValidationError(self.error_messages['invalid_choice'])\n         return self.parent_instance\n \n@@ -953,7 +953,7 @@ def label_from_instance(self, obj):\n         generate the labels for the choices presented by this object. Subclasses\n         can override this method to customize the display of the choices.\n         \"\"\"\n-        return smart_unicode(obj)\n+        return smart_text(obj)\n \n     def _get_choices(self):\n         # If self._choices is set, then somebody must have manually set\n@@ -1025,9 +1025,9 @@ def clean(self, value):\n             except ValueError:\n                 raise ValidationError(self.error_messages['invalid_pk_value'] % pk)\n         qs = self.queryset.filter(**{'%s__in' % key: value})\n-        pks = set([force_unicode(getattr(o, key)) for o in qs])\n+        pks = set([force_text(getattr(o, key)) for o in qs])\n         for val in value:\n-            if force_unicode(val) not in pks:\n+            if force_text(val) not in pks:\n                 raise ValidationError(self.error_messages['invalid_choice'] % val)\n         # Since this overrides the inherited ModelChoiceField.clean\n         # we run custom validators here"
        },
        {
            "sha": "cd6b52df6fbfe40cf4d2a9031ede83c66e2469bd",
            "filename": "django/forms/util.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Futil.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -2,7 +2,7 @@\n \n from django.conf import settings\n from django.utils.html import format_html, format_html_join\n-from django.utils.encoding import StrAndUnicode, force_unicode\n+from django.utils.encoding import StrAndUnicode, force_text\n from django.utils.safestring import mark_safe\n from django.utils import timezone\n from django.utils.translation import ugettext_lazy as _\n@@ -35,12 +35,12 @@ def as_ul(self):\n         if not self: return ''\n         return format_html('<ul class=\"errorlist\">{0}</ul>',\n                            format_html_join('', '<li>{0}{1}</li>',\n-                                            ((k, force_unicode(v))\n+                                            ((k, force_text(v))\n                                              for k, v in self.items())\n                            ))\n \n     def as_text(self):\n-        return '\\n'.join(['* %s\\n%s' % (k, '\\n'.join(['  * %s' % force_unicode(i) for i in v])) for k, v in self.items()])\n+        return '\\n'.join(['* %s\\n%s' % (k, '\\n'.join(['  * %s' % force_text(i) for i in v])) for k, v in self.items()])\n \n class ErrorList(list, StrAndUnicode):\n     \"\"\"\n@@ -53,16 +53,16 @@ def as_ul(self):\n         if not self: return ''\n         return format_html('<ul class=\"errorlist\">{0}</ul>',\n                            format_html_join('', '<li>{0}</li>',\n-                                            ((force_unicode(e),) for e in self)\n+                                            ((force_text(e),) for e in self)\n                                             )\n                            )\n \n     def as_text(self):\n         if not self: return ''\n-        return '\\n'.join(['* %s' % force_unicode(e) for e in self])\n+        return '\\n'.join(['* %s' % force_text(e) for e in self])\n \n     def __repr__(self):\n-        return repr([force_unicode(e) for e in self])\n+        return repr([force_text(e) for e in self])\n \n # Utilities for time zone support in DateTimeField et al.\n "
        },
        {
            "sha": "be9ac8eb8f90f1515489ef506acd04283537cde2",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 21,
            "deletions": 21,
            "changes": 42,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -17,7 +17,7 @@\n from django.utils.datastructures import MultiValueDict, MergeDict\n from django.utils.html import conditional_escape, format_html, format_html_join\n from django.utils.translation import ugettext, ugettext_lazy\n-from django.utils.encoding import StrAndUnicode, force_unicode\n+from django.utils.encoding import StrAndUnicode, force_text\n from django.utils.safestring import mark_safe\n from django.utils import six\n from django.utils import datetime_safe, formats\n@@ -223,7 +223,7 @@ def _has_changed(self, initial, data):\n             initial_value = ''\n         else:\n             initial_value = initial\n-        if force_unicode(initial_value) != force_unicode(data_value):\n+        if force_text(initial_value) != force_text(data_value):\n             return True\n         return False\n \n@@ -257,7 +257,7 @@ def render(self, name, value, attrs=None):\n         final_attrs = self.build_attrs(attrs, type=self.input_type, name=name)\n         if value != '':\n             # Only add the 'value' attribute if a value is non-empty.\n-            final_attrs['value'] = force_unicode(self._format_value(value))\n+            final_attrs['value'] = force_text(self._format_value(value))\n         return format_html('<input{0} />', flatatt(final_attrs))\n \n class TextInput(Input):\n@@ -294,7 +294,7 @@ def render(self, name, value, attrs=None, choices=()):\n         id_ = final_attrs.get('id', None)\n         inputs = []\n         for i, v in enumerate(value):\n-            input_attrs = dict(value=force_unicode(v), **final_attrs)\n+            input_attrs = dict(value=force_text(v), **final_attrs)\n             if id_:\n                 # An ID attribute was given. Add a numeric index as a suffix\n                 # so that the inputs don't all have the same ID attribute.\n@@ -361,7 +361,7 @@ def render(self, name, value, attrs=None):\n             template = self.template_with_initial\n             substitutions['initial'] = format_html('<a href=\"{0}\">{1}</a>',\n                                                    value.url,\n-                                                   force_unicode(value))\n+                                                   force_text(value))\n             if not self.is_required:\n                 checkbox_name = self.clear_checkbox_name(name)\n                 checkbox_id = self.clear_checkbox_id(checkbox_name)\n@@ -398,7 +398,7 @@ def render(self, name, value, attrs=None):\n         final_attrs = self.build_attrs(attrs, name=name)\n         return format_html('<textarea{0}>{1}</textarea>',\n                            flatatt(final_attrs),\n-                           force_unicode(value))\n+                           force_text(value))\n \n class DateInput(Input):\n     input_type = 'text'\n@@ -515,7 +515,7 @@ def render(self, name, value, attrs=None):\n             final_attrs['checked'] = 'checked'\n         if not (value is True or value is False or value is None or value == ''):\n             # Only add the 'value' attribute if a value is non-empty.\n-            final_attrs['value'] = force_unicode(value)\n+            final_attrs['value'] = force_text(value)\n         return format_html('<input{0} />', flatatt(final_attrs))\n \n     def value_from_datadict(self, data, files, name):\n@@ -556,7 +556,7 @@ def render(self, name, value, attrs=None, choices=()):\n         return mark_safe('\\n'.join(output))\n \n     def render_option(self, selected_choices, option_value, option_label):\n-        option_value = force_unicode(option_value)\n+        option_value = force_text(option_value)\n         if option_value in selected_choices:\n             selected_html = mark_safe(' selected=\"selected\"')\n             if not self.allow_multiple_selected:\n@@ -567,15 +567,15 @@ def render_option(self, selected_choices, option_value, option_label):\n         return format_html('<option value=\"{0}\"{1}>{2}</option>',\n                            option_value,\n                            selected_html,\n-                           force_unicode(option_label))\n+                           force_text(option_label))\n \n     def render_options(self, choices, selected_choices):\n         # Normalize to strings.\n-        selected_choices = set(force_unicode(v) for v in selected_choices)\n+        selected_choices = set(force_text(v) for v in selected_choices)\n         output = []\n         for option_value, option_label in chain(self.choices, choices):\n             if isinstance(option_label, (list, tuple)):\n-                output.append(format_html('<optgroup label=\"{0}\">', force_unicode(option_value)))\n+                output.append(format_html('<optgroup label=\"{0}\">', force_text(option_value)))\n                 for option in option_label:\n                     output.append(self.render_option(selected_choices, *option))\n                 output.append('</optgroup>')\n@@ -643,8 +643,8 @@ def _has_changed(self, initial, data):\n             data = []\n         if len(initial) != len(data):\n             return True\n-        initial_set = set([force_unicode(value) for value in initial])\n-        data_set = set([force_unicode(value) for value in data])\n+        initial_set = set([force_text(value) for value in initial])\n+        data_set = set([force_text(value) for value in data])\n         return data_set != initial_set\n \n class RadioInput(SubWidget):\n@@ -656,8 +656,8 @@ class RadioInput(SubWidget):\n     def __init__(self, name, value, attrs, choice, index):\n         self.name, self.value = name, value\n         self.attrs = attrs\n-        self.choice_value = force_unicode(choice[0])\n-        self.choice_label = force_unicode(choice[1])\n+        self.choice_value = force_text(choice[0])\n+        self.choice_label = force_text(choice[1])\n         self.index = index\n \n     def __unicode__(self):\n@@ -671,7 +671,7 @@ def render(self, name=None, value=None, attrs=None, choices=()):\n             label_for = format_html(' for=\"{0}_{1}\"', self.attrs['id'], self.index)\n         else:\n             label_for = ''\n-        choice_label = force_unicode(self.choice_label)\n+        choice_label = force_text(self.choice_label)\n         return format_html('<label{0}>{1} {2}</label>', label_for, self.tag(), choice_label)\n \n     def is_checked(self):\n@@ -709,7 +709,7 @@ def render(self):\n         \"\"\"Outputs a <ul> for this set of radio fields.\"\"\"\n         return format_html('<ul>\\n{0}\\n</ul>',\n                            format_html_join('\\n', '<li>{0}</li>',\n-                                            [(force_unicode(w),) for w in self]\n+                                            [(force_text(w),) for w in self]\n                                             ))\n \n class RadioSelect(Select):\n@@ -729,7 +729,7 @@ def subwidgets(self, name, value, attrs=None, choices=()):\n     def get_renderer(self, name, value, attrs=None, choices=()):\n         \"\"\"Returns an instance of the renderer.\"\"\"\n         if value is None: value = ''\n-        str_value = force_unicode(value) # Normalize to string.\n+        str_value = force_text(value) # Normalize to string.\n         final_attrs = self.build_attrs(attrs)\n         choices = list(chain(self.choices, choices))\n         return self.renderer(name, str_value, final_attrs, choices)\n@@ -753,7 +753,7 @@ def render(self, name, value, attrs=None, choices=()):\n         final_attrs = self.build_attrs(attrs, name=name)\n         output = ['<ul>']\n         # Normalize to strings\n-        str_values = set([force_unicode(v) for v in value])\n+        str_values = set([force_text(v) for v in value])\n         for i, (option_value, option_label) in enumerate(chain(self.choices, choices)):\n             # If an ID attribute was given, add a numeric index as a suffix,\n             # so that the checkboxes don't all have the same ID attribute.\n@@ -764,9 +764,9 @@ def render(self, name, value, attrs=None, choices=()):\n                 label_for = ''\n \n             cb = CheckboxInput(final_attrs, check_test=lambda value: value in str_values)\n-            option_value = force_unicode(option_value)\n+            option_value = force_text(option_value)\n             rendered_cb = cb.render(name, option_value)\n-            option_label = force_unicode(option_label)\n+            option_label = force_text(option_label)\n             output.append(format_html('<li><label{0}>{1} {2}</label></li>',\n                                       label_for, rendered_cb, option_label))\n         output.append('</ul>')"
        },
        {
            "sha": "b23304f3462608e9399d4d2e233b0fc0bc2acaa1",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -61,14 +61,14 @@ def value_encode(self, val):\n         if not _cookie_allows_colon_in_names:\n             def load(self, rawdata):\n                 self.bad_cookies = set()\n-                super(SimpleCookie, self).load(smart_str(rawdata))\n+                super(SimpleCookie, self).load(smart_bytes(rawdata))\n                 for key in self.bad_cookies:\n                     del self[key]\n \n             # override private __set() method:\n             # (needed for using our Morsel, and for laxness with CookieError\n             def _BaseCookie__set(self, key, real_value, coded_value):\n-                key = smart_str(key)\n+                key = smart_bytes(key)\n                 try:\n                     M = self.get(key, Morsel())\n                     M.set(key, real_value, coded_value)\n@@ -85,7 +85,7 @@ def _BaseCookie__set(self, key, real_value, coded_value):\n from django.http.multipartparser import MultiPartParser\n from django.http.utils import *\n from django.utils.datastructures import MultiValueDict, ImmutableList\n-from django.utils.encoding import smart_str, iri_to_uri, force_unicode\n+from django.utils.encoding import smart_bytes, iri_to_uri, force_text\n from django.utils.http import cookie_date\n from django.utils import six\n from django.utils import timezone\n@@ -137,7 +137,7 @@ def build_request_repr(request, path_override=None, GET_override=None,\n     except:\n         meta = '<could not parse>'\n     path = path_override if path_override is not None else request.path\n-    return smart_str('<%s\\npath:%s,\\nGET:%s,\\nPOST:%s,\\nCOOKIES:%s,\\nMETA:%s>' %\n+    return smart_bytes('<%s\\npath:%s,\\nGET:%s,\\nPOST:%s,\\nCOOKIES:%s,\\nMETA:%s>' %\n                      (request.__class__.__name__,\n                       path,\n                       six.text_type(get),\n@@ -385,8 +385,8 @@ def __init__(self, query_string, mutable=False, encoding=None):\n             encoding = settings.DEFAULT_CHARSET\n         self.encoding = encoding\n         for key, value in parse_qsl((query_string or ''), True): # keep_blank_values=True\n-            self.appendlist(force_unicode(key, encoding, errors='replace'),\n-                            force_unicode(value, encoding, errors='replace'))\n+            self.appendlist(force_text(key, encoding, errors='replace'),\n+                            force_text(value, encoding, errors='replace'))\n         self._mutable = mutable\n \n     def _get_encoding(self):\n@@ -481,13 +481,13 @@ def urlencode(self, safe=None):\n         \"\"\"\n         output = []\n         if safe:\n-            safe = smart_str(safe, self.encoding)\n+            safe = smart_bytes(safe, self.encoding)\n             encode = lambda k, v: '%s=%s' % ((quote(k, safe), quote(v, safe)))\n         else:\n             encode = lambda k, v: urlencode({k: v})\n         for k, list_ in self.lists():\n-            k = smart_str(k, self.encoding)\n-            output.extend([encode(k, smart_str(v, self.encoding))\n+            k = smart_bytes(k, self.encoding)\n+            output.extend([encode(k, smart_bytes(v, self.encoding))\n                            for v in list_])\n         return '&'.join(output)\n \n@@ -648,7 +648,7 @@ def delete_cookie(self, key, path='/', domain=None):\n     def _get_content(self):\n         if self.has_header('Content-Encoding'):\n             return b''.join([str(e) for e in self._container])\n-        return b''.join([smart_str(e, self._charset) for e in self._container])\n+        return b''.join([smart_bytes(e, self._charset) for e in self._container])\n \n     def _set_content(self, value):\n         if hasattr(value, '__iter__'):\n@@ -698,7 +698,7 @@ def __init__(self, redirect_to):\n             raise SuspiciousOperation(\"Unsafe redirect to URL with protocol '%s'\" % parsed.scheme)\n         super(HttpResponseRedirectBase, self).__init__()\n         self['Location'] = iri_to_uri(redirect_to)\n-    \n+\n class HttpResponseRedirect(HttpResponseRedirectBase):\n     status_code = 302\n \n@@ -735,7 +735,7 @@ def get_host(request):\n     return request.get_host()\n \n # It's neither necessary nor appropriate to use\n-# django.utils.encoding.smart_unicode for parsing URLs and form inputs. Thus,\n+# django.utils.encoding.smart_text for parsing URLs and form inputs. Thus,\n # this slightly more restricted function.\n def str_to_unicode(s, encoding):\n     \"\"\""
        },
        {
            "sha": "1987ee53bcba451e7b0d571fa24c307b050994ef",
            "filename": "django/http/multipartparser.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fhttp%2Fmultipartparser.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fhttp%2Fmultipartparser.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2Fmultipartparser.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n from django.conf import settings\n from django.core.exceptions import SuspiciousOperation\n from django.utils.datastructures import MultiValueDict\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils import six\n from django.utils.text import unescape_entities\n from django.core.files.uploadhandler import StopUpload, SkipFile, StopFutureHandlers\n@@ -151,7 +151,7 @@ def parse(self):\n                 transfer_encoding = meta_data.get('content-transfer-encoding')\n                 if transfer_encoding is not None:\n                     transfer_encoding = transfer_encoding[0].strip()\n-                field_name = force_unicode(field_name, encoding, errors='replace')\n+                field_name = force_text(field_name, encoding, errors='replace')\n \n                 if item_type == FIELD:\n                     # This is a post field, we can just set it in the post\n@@ -165,13 +165,13 @@ def parse(self):\n                         data = field_stream.read()\n \n                     self._post.appendlist(field_name,\n-                                          force_unicode(data, encoding, errors='replace'))\n+                                          force_text(data, encoding, errors='replace'))\n                 elif item_type == FILE:\n                     # This is a file, use the handler...\n                     file_name = disposition.get('filename')\n                     if not file_name:\n                         continue\n-                    file_name = force_unicode(file_name, encoding, errors='replace')\n+                    file_name = force_text(file_name, encoding, errors='replace')\n                     file_name = self.IE_sanitize(unescape_entities(file_name))\n \n                     content_type = meta_data.get('content-type', ('',))[0].strip()\n@@ -245,7 +245,7 @@ def handle_file_complete(self, old_field_name, counters):\n             file_obj = handler.file_complete(counters[i])\n             if file_obj:\n                 # If it returns a file object, then set the files dict.\n-                self._files.appendlist(force_unicode(old_field_name,\n+                self._files.appendlist(force_text(old_field_name,\n                                                      self._encoding,\n                                                      errors='replace'),\n                                        file_obj)"
        },
        {
            "sha": "661d8c092ad27e53ecc3aca2a6c720c1e811041d",
            "filename": "django/template/base.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplate%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplate%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fbase.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -11,7 +11,7 @@\n from django.utils.itercompat import is_iterable\n from django.utils.text import (smart_split, unescape_string_literal,\n     get_text_list)\n-from django.utils.encoding import smart_unicode, force_unicode, smart_str\n+from django.utils.encoding import smart_text, force_text, smart_bytes\n from django.utils.translation import ugettext_lazy, pgettext_lazy\n from django.utils.safestring import (SafeData, EscapeData, mark_safe,\n     mark_for_escaping)\n@@ -89,7 +89,7 @@ def __str__(self):\n         return six.text_type(self).encode('utf-8')\n \n     def __unicode__(self):\n-        return self.msg % tuple([force_unicode(p, errors='replace')\n+        return self.msg % tuple([force_text(p, errors='replace')\n                                  for p in self.params])\n \n class InvalidTemplateLibrary(Exception):\n@@ -117,7 +117,7 @@ class Template(object):\n     def __init__(self, template_string, origin=None,\n                  name='<Unknown Template>'):\n         try:\n-            template_string = smart_unicode(template_string)\n+            template_string = smart_text(template_string)\n         except UnicodeDecodeError:\n             raise TemplateEncodingError(\"Templates can only be constructed \"\n                                         \"from unicode or UTF-8 strings.\")\n@@ -831,7 +831,7 @@ def render(self, context):\n                 bit = self.render_node(node, context)\n             else:\n                 bit = node\n-            bits.append(force_unicode(bit))\n+            bits.append(force_text(bit))\n         return mark_safe(''.join(bits))\n \n     def get_nodes_by_type(self, nodetype):\n@@ -849,7 +849,7 @@ def __init__(self, s):\n         self.s = s\n \n     def __repr__(self):\n-        return \"<Text Node: '%s'>\" % smart_str(self.s[:25], 'ascii',\n+        return \"<Text Node: '%s'>\" % smart_bytes(self.s[:25], 'ascii',\n                 errors='replace')\n \n     def render(self, context):\n@@ -863,7 +863,7 @@ def _render_value_in_context(value, context):\n     \"\"\"\n     value = template_localtime(value, use_tz=context.use_tz)\n     value = localize(value, use_l10n=context.use_l10n)\n-    value = force_unicode(value)\n+    value = force_text(value)\n     if ((context.autoescape and not isinstance(value, SafeData)) or\n             isinstance(value, EscapeData)):\n         return escape(value)"
        },
        {
            "sha": "c7ac007b48caf0671b29a606b79e78423f5a3ce9",
            "filename": "django/template/debug.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplate%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplate%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdebug.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,5 +1,5 @@\n from django.template.base import Lexer, Parser, tag_re, NodeList, VariableNode, TemplateSyntaxError\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.html import escape\n from django.utils.safestring import SafeData, EscapeData\n from django.utils.formats import localize\n@@ -84,7 +84,7 @@ def render(self, context):\n             output = self.filter_expression.resolve(context)\n             output = template_localtime(output, use_tz=context.use_tz)\n             output = localize(output, use_l10n=context.use_l10n)\n-            output = force_unicode(output)\n+            output = force_text(output)\n         except UnicodeDecodeError:\n             return ''\n         except Exception as e:"
        },
        {
            "sha": "16801fd5736d63f040304622612a40d74db36ea0",
            "filename": "django/template/defaultfilters.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplate%2Fdefaultfilters.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplate%2Fdefaultfilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaultfilters.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -12,7 +12,7 @@\n from django.conf import settings\n from django.utils import formats\n from django.utils.dateformat import format, time_format\n-from django.utils.encoding import force_unicode, iri_to_uri\n+from django.utils.encoding import force_text, iri_to_uri\n from django.utils.html import (conditional_escape, escapejs, fix_ampersands,\n     escape, urlize as urlize_impl, linebreaks, strip_tags)\n from django.utils.http import urlquote\n@@ -38,7 +38,7 @@ def stringfilter(func):\n     def _dec(*args, **kwargs):\n         if args:\n             args = list(args)\n-            args[0] = force_unicode(args[0])\n+            args[0] = force_text(args[0])\n             if (isinstance(args[0], SafeData) and\n                 getattr(_dec._decorated_function, 'is_safe', False)):\n                 return mark_safe(func(*args, **kwargs))\n@@ -139,15 +139,15 @@ def floatformat(text, arg=-1):\n     \"\"\"\n \n     try:\n-        input_val = force_unicode(text)\n+        input_val = force_text(text)\n         d = Decimal(input_val)\n     except UnicodeEncodeError:\n         return ''\n     except InvalidOperation:\n         if input_val in special_floats:\n             return input_val\n         try:\n-            d = Decimal(force_unicode(float(text)))\n+            d = Decimal(force_text(float(text)))\n         except (ValueError, InvalidOperation, TypeError, UnicodeEncodeError):\n             return ''\n     try:\n@@ -192,7 +192,7 @@ def floatformat(text, arg=-1):\n @stringfilter\n def iriencode(value):\n     \"\"\"Escapes an IRI value for use in a URL.\"\"\"\n-    return force_unicode(iri_to_uri(value))\n+    return force_text(iri_to_uri(value))\n \n @register.filter(is_safe=True, needs_autoescape=True)\n @stringfilter\n@@ -462,7 +462,7 @@ def safeseq(value):\n     individually, as safe, after converting them to unicode. Returns a list\n     with the results.\n     \"\"\"\n-    return [mark_safe(force_unicode(obj)) for obj in value]\n+    return [mark_safe(force_text(obj)) for obj in value]\n \n @register.filter(is_safe=True)\n @stringfilter\n@@ -521,7 +521,7 @@ def join(value, arg, autoescape=None):\n     \"\"\"\n     Joins a list with a string, like Python's ``str.join(list)``.\n     \"\"\"\n-    value = map(force_unicode, value)\n+    value = map(force_text, value)\n     if autoescape:\n         value = [conditional_escape(v) for v in value]\n     try:\n@@ -661,7 +661,7 @@ def _helper(list_, tabs=1):\n                 sublist = '\\n%s<ul>\\n%s\\n%s</ul>\\n%s' % (indent, sublist,\n                                                          indent, indent)\n             output.append('%s<li>%s%s</li>' % (indent,\n-                    escaper(force_unicode(title)), sublist))\n+                    escaper(force_text(title)), sublist))\n             i += 1\n         return '\\n'.join(output)\n     value, converted = convert_old_style_list(value)\n@@ -901,4 +901,4 @@ def pprint(value):\n     try:\n         return pformat(value)\n     except Exception as e:\n-        return \"Error in formatting: %s\" % force_unicode(e, errors=\"replace\")\n+        return \"Error in formatting: %s\" % force_text(e, errors=\"replace\")"
        },
        {
            "sha": "dca47a3da8d1ad26d62e80d1f4e88f0cbd256d64",
            "filename": "django/template/defaulttags.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplate%2Fdefaulttags.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplate%2Fdefaulttags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaulttags.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -14,7 +14,7 @@\n     VARIABLE_ATTRIBUTE_SEPARATOR, get_library, token_kwargs, kwarg_re)\n from django.template.smartif import IfParser, Literal\n from django.template.defaultfilters import date\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.safestring import mark_safe\n from django.utils.html import format_html\n from django.utils import six\n@@ -104,7 +104,7 @@ def render(self, context):\n         for var in self.vars:\n             value = var.resolve(context, True)\n             if value:\n-                return smart_unicode(value)\n+                return smart_text(value)\n         return ''\n \n class ForNode(Node):\n@@ -393,7 +393,7 @@ def __init__(self, view_name, args, kwargs, asvar):\n     def render(self, context):\n         from django.core.urlresolvers import reverse, NoReverseMatch\n         args = [arg.resolve(context) for arg in self.args]\n-        kwargs = dict([(smart_unicode(k, 'ascii'), v.resolve(context))\n+        kwargs = dict([(smart_text(k, 'ascii'), v.resolve(context))\n                        for k, v in self.kwargs.items()])\n \n         view_name = self.view_name.resolve(context)"
        },
        {
            "sha": "667de2470e4d38b9f203b6c1887defbb7681264f",
            "filename": "django/templatetags/l10n.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplatetags%2Fl10n.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftemplatetags%2Fl10n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fl10n.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,7 +1,7 @@\n from django.template import Node\n from django.template import TemplateSyntaxError, Library\n from django.utils import formats\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n register = Library()\n \n@@ -11,15 +11,15 @@ def localize(value):\n     Forces a value to be rendered as a localized value,\n     regardless of the value of ``settings.USE_L10N``.\n     \"\"\"\n-    return force_unicode(formats.localize(value, use_l10n=True))\n+    return force_text(formats.localize(value, use_l10n=True))\n \n @register.filter(is_safe=False)\n def unlocalize(value):\n     \"\"\"\n     Forces a value to be rendered as a non-localized value,\n     regardless of the value of ``settings.USE_L10N``.\n     \"\"\"\n-    return force_unicode(value)\n+    return force_text(value)\n \n class LocalizeNode(Node):\n     def __init__(self, nodelist, use_l10n):"
        },
        {
            "sha": "ef80a7129a36616d896a3bad07abe6d3c314ed86",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -19,7 +19,7 @@\n from django.template import TemplateDoesNotExist\n from django.test import signals\n from django.utils.functional import curry\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.utils.http import urlencode\n from django.utils.importlib import import_module\n from django.utils.itercompat import is_iterable\n@@ -108,7 +108,7 @@ def encode_multipart(boundary, data):\n     as an application/octet-stream; otherwise, str(value) will be sent.\n     \"\"\"\n     lines = []\n-    to_str = lambda s: smart_str(s, settings.DEFAULT_CHARSET)\n+    to_str = lambda s: smart_bytes(s, settings.DEFAULT_CHARSET)\n \n     # Not by any means perfect, but good enough for our purposes.\n     is_file = lambda thing: hasattr(thing, \"read\") and callable(thing.read)\n@@ -145,7 +145,7 @@ def encode_multipart(boundary, data):\n     return '\\r\\n'.join(lines)\n \n def encode_file(boundary, key, file):\n-    to_str = lambda s: smart_str(s, settings.DEFAULT_CHARSET)\n+    to_str = lambda s: smart_bytes(s, settings.DEFAULT_CHARSET)\n     content_type = mimetypes.guess_type(file.name)[0]\n     if content_type is None:\n         content_type = 'application/octet-stream'\n@@ -220,7 +220,7 @@ def _encode_data(self, data, content_type, ):\n                 charset = match.group(1)\n             else:\n                 charset = settings.DEFAULT_CHARSET\n-            return smart_str(data, encoding=charset)\n+            return smart_bytes(data, encoding=charset)\n \n     def _get_path(self, parsed):\n         # If there are parameters, add them\n@@ -291,7 +291,7 @@ def delete(self, path, data='', content_type='application/octet-stream',\n     def generic(self, method, path,\n                 data='', content_type='application/octet-stream', **extra):\n         parsed = urlparse(path)\n-        data = smart_str(data, settings.DEFAULT_CHARSET)\n+        data = smart_bytes(data, settings.DEFAULT_CHARSET)\n         r = {\n             'PATH_INFO':      self._get_path(parsed),\n             'QUERY_STRING':   parsed[4],"
        },
        {
            "sha": "143c3728be76ef2f7416b7adb43d634b7ebe6c4c",
            "filename": "django/test/html.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftest%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftest%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fhtml.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -5,7 +5,7 @@\n from __future__ import unicode_literals\n \n import re\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.html_parser import HTMLParser, HTMLParseError\n from django.utils import six\n \n@@ -25,7 +25,7 @@ def __init__(self, name, attributes):\n \n     def append(self, element):\n         if isinstance(element, six.string_types):\n-            element = force_unicode(element)\n+            element = force_text(element)\n             element = normalize_whitespace(element)\n             if self.children:\n                 if isinstance(self.children[-1], six.string_types):"
        },
        {
            "sha": "3a0dc760c691f63363c16a714755acfd6885d033",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -41,7 +41,7 @@\n     override_settings)\n from django.test.utils import ContextList\n from django.utils import unittest as ut2\n-from django.utils.encoding import smart_str, force_unicode\n+from django.utils.encoding import smart_bytes, force_text\n from django.utils import six\n from django.utils.unittest.util import safe_repr\n from django.views.static import serve\n@@ -398,7 +398,7 @@ def assertFieldOutput(self, fieldclass, valid, invalid, field_args=None,\n                 optional.clean(input)\n             self.assertEqual(context_manager.exception.messages, errors)\n         # test required inputs\n-        error_required = [force_unicode(required.error_messages['required'])]\n+        error_required = [force_text(required.error_messages['required'])]\n         for e in EMPTY_VALUES:\n             with self.assertRaises(ValidationError) as context_manager:\n                 required.clean(e)\n@@ -647,7 +647,7 @@ def assertContains(self, response, text, count=None, status_code=200,\n         self.assertEqual(response.status_code, status_code,\n             msg_prefix + \"Couldn't retrieve content: Response code was %d\"\n             \" (expected %d)\" % (response.status_code, status_code))\n-        enc_text = smart_str(text, response._charset)\n+        enc_text = smart_bytes(text, response._charset)\n         content = response.content\n         if html:\n             content = assert_and_parse_html(self, content, None,\n@@ -683,7 +683,7 @@ def assertNotContains(self, response, text, status_code=200,\n         self.assertEqual(response.status_code, status_code,\n             msg_prefix + \"Couldn't retrieve content: Response code was %d\"\n             \" (expected %d)\" % (response.status_code, status_code))\n-        enc_text = smart_str(text, response._charset)\n+        enc_text = smart_bytes(text, response._charset)\n         content = response.content\n         if html:\n             content = assert_and_parse_html(self, content, None,"
        },
        {
            "sha": "82dccd0efe1d1f463a7748d12636229f6ac725a3",
            "filename": "django/utils/_os.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2F_os.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2F_os.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2F_os.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -1,7 +1,7 @@\n import os\n import stat\n from os.path import join, normcase, normpath, abspath, isabs, sep\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n try:\n     WindowsError = WindowsError\n@@ -37,8 +37,8 @@ def safe_join(base, *paths):\n     The final path must be located inside of the base path component (otherwise\n     a ValueError is raised).\n     \"\"\"\n-    base = force_unicode(base)\n-    paths = [force_unicode(p) for p in paths]\n+    base = force_text(base)\n+    paths = [force_text(p) for p in paths]\n     final_path = abspathu(join(base, *paths))\n     base_path = abspathu(base)\n     base_path_len = len(base_path)"
        },
        {
            "sha": "42b0de4ce6713c051011e55e40222f2386ea8cbf",
            "filename": "django/utils/cache.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcache.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -23,7 +23,7 @@\n \n from django.conf import settings\n from django.core.cache import get_cache\n-from django.utils.encoding import iri_to_uri, force_unicode\n+from django.utils.encoding import iri_to_uri, force_text\n from django.utils.http import http_date\n from django.utils.timezone import get_current_timezone_name\n from django.utils.translation import get_language\n@@ -169,7 +169,7 @@ def _i18n_cache_key_suffix(request, cache_key):\n         # Windows is known to use non-standard, locale-dependant names.\n         # User-defined tzinfo classes may return absolutely anything.\n         # Hence this paranoid conversion to create a valid cache key.\n-        tz_name = force_unicode(get_current_timezone_name(), errors='ignore')\n+        tz_name = force_text(get_current_timezone_name(), errors='ignore')\n         cache_key += '.%s' % tz_name.encode('ascii', 'ignore').replace(' ', '_')\n     return cache_key\n "
        },
        {
            "sha": "1edbb43eb370606ef697af2727126816d34ad15b",
            "filename": "django/utils/crypto.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fcrypto.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fcrypto.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcrypto.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -23,7 +23,7 @@\n     using_sysrandom = False\n \n from django.conf import settings\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_bytes\n from django.utils.six.moves import xrange\n \n \n@@ -115,7 +115,7 @@ def _fast_hmac(key, msg, digest):\n     A trimmed down version of Python's HMAC implementation\n     \"\"\"\n     dig1, dig2 = digest(), digest()\n-    key = smart_str(key)\n+    key = smart_bytes(key)\n     if len(key) > dig1.block_size:\n         key = digest(key).digest()\n     key += chr(0) * (dig1.block_size - len(key))\n@@ -141,8 +141,8 @@ def pbkdf2(password, salt, iterations, dklen=0, digest=None):\n     assert iterations > 0\n     if not digest:\n         digest = hashlib.sha256\n-    password = smart_str(password)\n-    salt = smart_str(salt)\n+    password = smart_bytes(password)\n+    salt = smart_bytes(salt)\n     hlen = digest().digest_size\n     if not dklen:\n         dklen = hlen"
        },
        {
            "sha": "6a91a370e5b0219f18159eb117cf92226cb91d9d",
            "filename": "django/utils/dateformat.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fdateformat.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fdateformat.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fdateformat.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -20,7 +20,7 @@\n from django.utils.dates import MONTHS, MONTHS_3, MONTHS_ALT, MONTHS_AP, WEEKDAYS, WEEKDAYS_ABBR\n from django.utils.tzinfo import LocalTimezone\n from django.utils.translation import ugettext as _\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils import six\n from django.utils.timezone import is_aware, is_naive\n \n@@ -30,9 +30,9 @@\n class Formatter(object):\n     def format(self, formatstr):\n         pieces = []\n-        for i, piece in enumerate(re_formatchars.split(force_unicode(formatstr))):\n+        for i, piece in enumerate(re_formatchars.split(force_text(formatstr))):\n             if i % 2:\n-                pieces.append(force_unicode(getattr(self, piece)()))\n+                pieces.append(force_text(getattr(self, piece)()))\n             elif piece:\n                 pieces.append(re_escaped.sub(r'\\1', piece))\n         return ''.join(pieces)"
        },
        {
            "sha": "eb60cfde8bd61b198e728af6af8b383c426e9c7a",
            "filename": "django/utils/encoding.py",
            "status": "modified",
            "additions": 42,
            "deletions": 24,
            "changes": 66,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fencoding.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fencoding.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fencoding.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -24,9 +24,13 @@ def __str__(self):\n \n class StrAndUnicode(object):\n     \"\"\"\n-    A class whose __str__ returns its __unicode__ as a UTF-8 bytestring.\n+    A class that derives __str__ from __unicode__.\n \n-    Useful as a mix-in.\n+    On Python 2, __str__ returns the output of __unicode__ encoded as a UTF-8\n+    bytestring. On Python 3, __str__ returns the output of __unicode__.\n+\n+    Useful as a mix-in. If you support Python 2 and 3 with a single code base,\n+    you can inherit this mix-in and just define __unicode__.\n     \"\"\"\n     if six.PY3:\n         def __str__(self):\n@@ -35,37 +39,36 @@ def __str__(self):\n         def __str__(self):\n             return self.__unicode__().encode('utf-8')\n \n-def smart_unicode(s, encoding='utf-8', strings_only=False, errors='strict'):\n+def smart_text(s, encoding='utf-8', strings_only=False, errors='strict'):\n     \"\"\"\n-    Returns a unicode object representing 's'. Treats bytestrings using the\n-    'encoding' codec.\n+    Returns a text object representing 's' -- unicode on Python 2 and str on\n+    Python 3. Treats bytestrings using the 'encoding' codec.\n \n     If strings_only is True, don't convert (some) non-string-like objects.\n     \"\"\"\n     if isinstance(s, Promise):\n         # The input is the result of a gettext_lazy() call.\n         return s\n-    return force_unicode(s, encoding, strings_only, errors)\n+    return force_text(s, encoding, strings_only, errors)\n \n def is_protected_type(obj):\n     \"\"\"Determine if the object instance is of a protected type.\n \n     Objects of protected types are preserved as-is when passed to\n-    force_unicode(strings_only=True).\n+    force_text(strings_only=True).\n     \"\"\"\n     return isinstance(obj, six.integer_types + (type(None), float, Decimal,\n         datetime.datetime, datetime.date, datetime.time))\n \n-def force_unicode(s, encoding='utf-8', strings_only=False, errors='strict'):\n+def force_text(s, encoding='utf-8', strings_only=False, errors='strict'):\n     \"\"\"\n-    Similar to smart_unicode, except that lazy instances are resolved to\n+    Similar to smart_text, except that lazy instances are resolved to\n     strings, rather than kept as lazy objects.\n \n     If strings_only is True, don't convert (some) non-string-like objects.\n     \"\"\"\n-    # Handle the common case first, saves 30-40% in performance when s\n-    # is an instance of unicode. This function gets called often in that\n-    # setting.\n+    # Handle the common case first, saves 30-40% when s is an instance of\n+    # six.text_type. This function gets called often in that setting.\n     if isinstance(s, six.text_type):\n         return s\n     if strings_only and is_protected_type(s):\n@@ -92,7 +95,7 @@ def force_unicode(s, encoding='utf-8', strings_only=False, errors='strict'):\n                     # without raising a further exception. We do an\n                     # approximation to what the Exception's standard str()\n                     # output should be.\n-                    s = ' '.join([force_unicode(arg, encoding, strings_only,\n+                    s = ' '.join([force_text(arg, encoding, strings_only,\n                             errors) for arg in s])\n         else:\n             # Note: We use .decode() here, instead of six.text_type(s, encoding,\n@@ -108,21 +111,26 @@ def force_unicode(s, encoding='utf-8', strings_only=False, errors='strict'):\n             # working unicode method. Try to handle this without raising a\n             # further exception by individually forcing the exception args\n             # to unicode.\n-            s = ' '.join([force_unicode(arg, encoding, strings_only,\n+            s = ' '.join([force_text(arg, encoding, strings_only,\n                     errors) for arg in s])\n     return s\n \n-def smart_str(s, encoding='utf-8', strings_only=False, errors='strict'):\n+def smart_bytes(s, encoding='utf-8', strings_only=False, errors='strict'):\n     \"\"\"\n     Returns a bytestring version of 's', encoded as specified in 'encoding'.\n \n     If strings_only is True, don't convert (some) non-string-like objects.\n     \"\"\"\n+    if isinstance(s, bytes):\n+        if encoding == 'utf-8':\n+            return s\n+        else:\n+            return s.decode('utf-8', errors).encode(encoding, errors)\n     if strings_only and (s is None or isinstance(s, int)):\n         return s\n     if isinstance(s, Promise):\n         return six.text_type(s).encode(encoding, errors)\n-    elif not isinstance(s, six.string_types):\n+    if not isinstance(s, six.string_types):\n         try:\n             if six.PY3:\n                 return six.text_type(s).encode(encoding)\n@@ -133,15 +141,25 @@ def smart_str(s, encoding='utf-8', strings_only=False, errors='strict'):\n                 # An Exception subclass containing non-ASCII data that doesn't\n                 # know how to print itself properly. We shouldn't raise a\n                 # further exception.\n-                return ' '.join([smart_str(arg, encoding, strings_only,\n+                return ' '.join([smart_bytes(arg, encoding, strings_only,\n                         errors) for arg in s])\n             return six.text_type(s).encode(encoding, errors)\n-    elif isinstance(s, six.text_type):\n-        return s.encode(encoding, errors)\n-    elif s and encoding != 'utf-8':\n-        return s.decode('utf-8', errors).encode(encoding, errors)\n     else:\n-        return s\n+        return s.encode(encoding, errors)\n+\n+if six.PY3:\n+    smart_str = smart_text\n+else:\n+    smart_str = smart_bytes\n+    # backwards compatibility for Python 2\n+    smart_unicode = smart_text\n+    force_unicode = force_text\n+\n+smart_str.__doc__ = \"\"\"\\\n+Apply smart_text in Python 3 and smart_bytes in Python 2.\n+\n+This is suitable for writing to sys.stdout (for instance).\n+\"\"\"\n \n def iri_to_uri(iri):\n     \"\"\"\n@@ -168,7 +186,7 @@ def iri_to_uri(iri):\n     # converted.\n     if iri is None:\n         return iri\n-    return quote(smart_str(iri), safe=b\"/#%[]=:;$&()+,!?*@'~\")\n+    return quote(smart_bytes(iri), safe=b\"/#%[]=:;$&()+,!?*@'~\")\n \n def filepath_to_uri(path):\n     \"\"\"Convert an file system path to a URI portion that is suitable for\n@@ -187,7 +205,7 @@ def filepath_to_uri(path):\n         return path\n     # I know about `os.sep` and `os.altsep` but I want to leave\n     # some flexibility for hardcoding separators.\n-    return quote(smart_str(path).replace(\"\\\\\", \"/\"), safe=b\"/~!*()'\")\n+    return quote(smart_bytes(path).replace(\"\\\\\", \"/\"), safe=b\"/~!*()'\")\n \n # The encoding of the default system locale but falls back to the\n # given fallback encoding if the encoding is unsupported by python or could"
        },
        {
            "sha": "1bf43bf0a7e5d365227ed18a4022163b5c7c8a83",
            "filename": "django/utils/feedgenerator.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ffeedgenerator.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ffeedgenerator.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ffeedgenerator.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -29,7 +29,7 @@\n except ImportError:     # Python 2\n     from urlparse import urlparse\n from django.utils.xmlutils import SimplerXMLGenerator\n-from django.utils.encoding import force_unicode, iri_to_uri\n+from django.utils.encoding import force_text, iri_to_uri\n from django.utils import datetime_safe\n from django.utils.timezone import is_aware\n \n@@ -81,12 +81,12 @@ class SyndicationFeed(object):\n     def __init__(self, title, link, description, language=None, author_email=None,\n             author_name=None, author_link=None, subtitle=None, categories=None,\n             feed_url=None, feed_copyright=None, feed_guid=None, ttl=None, **kwargs):\n-        to_unicode = lambda s: force_unicode(s, strings_only=True)\n+        to_unicode = lambda s: force_text(s, strings_only=True)\n         if categories:\n-            categories = [force_unicode(c) for c in categories]\n+            categories = [force_text(c) for c in categories]\n         if ttl is not None:\n             # Force ints to unicode\n-            ttl = force_unicode(ttl)\n+            ttl = force_text(ttl)\n         self.feed = {\n             'title': to_unicode(title),\n             'link': iri_to_uri(link),\n@@ -114,12 +114,12 @@ def add_item(self, title, link, description, author_email=None,\n         objects except pubdate, which is a datetime.datetime object, and\n         enclosure, which is an instance of the Enclosure class.\n         \"\"\"\n-        to_unicode = lambda s: force_unicode(s, strings_only=True)\n+        to_unicode = lambda s: force_text(s, strings_only=True)\n         if categories:\n             categories = [to_unicode(c) for c in categories]\n         if ttl is not None:\n             # Force ints to unicode\n-            ttl = force_unicode(ttl)\n+            ttl = force_text(ttl)\n         item = {\n             'title': to_unicode(title),\n             'link': iri_to_uri(link),"
        },
        {
            "sha": "7dd53a1353edb86818a00e322449f884b9496532",
            "filename": "django/utils/html.py",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhtml.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -11,7 +11,7 @@\n     from urlparse import urlsplit, urlunsplit\n \n from django.utils.safestring import SafeData, mark_safe\n-from django.utils.encoding import smart_str, force_unicode\n+from django.utils.encoding import smart_bytes, force_text\n from django.utils.functional import allow_lazy\n from django.utils import six\n from django.utils.text import normalize_newlines\n@@ -39,7 +39,7 @@ def escape(text):\n     \"\"\"\n     Returns the given text with ampersands, quotes and angle brackets encoded for use in HTML.\n     \"\"\"\n-    return mark_safe(force_unicode(text).replace('&', '&amp;').replace('<', '&lt;').replace('>', '&gt;').replace('\"', '&quot;').replace(\"'\", '&#39;'))\n+    return mark_safe(force_text(text).replace('&', '&amp;').replace('<', '&lt;').replace('>', '&gt;').replace('\"', '&quot;').replace(\"'\", '&#39;'))\n escape = allow_lazy(escape, six.text_type)\n \n _base_js_escapes = (\n@@ -63,7 +63,7 @@ def escape(text):\n def escapejs(value):\n     \"\"\"Hex encodes characters for use in JavaScript strings.\"\"\"\n     for bad, good in _js_escapes:\n-        value = mark_safe(force_unicode(value).replace(bad, good))\n+        value = mark_safe(force_text(value).replace(bad, good))\n     return value\n escapejs = allow_lazy(escapejs, six.text_type)\n \n@@ -120,22 +120,22 @@ def linebreaks(value, autoescape=False):\n \n def strip_tags(value):\n     \"\"\"Returns the given HTML with all tags stripped.\"\"\"\n-    return re.sub(r'<[^>]*?>', '', force_unicode(value))\n+    return re.sub(r'<[^>]*?>', '', force_text(value))\n strip_tags = allow_lazy(strip_tags)\n \n def strip_spaces_between_tags(value):\n     \"\"\"Returns the given HTML with spaces between tags removed.\"\"\"\n-    return re.sub(r'>\\s+<', '><', force_unicode(value))\n+    return re.sub(r'>\\s+<', '><', force_text(value))\n strip_spaces_between_tags = allow_lazy(strip_spaces_between_tags, six.text_type)\n \n def strip_entities(value):\n     \"\"\"Returns the given HTML with all entities (&something;) stripped.\"\"\"\n-    return re.sub(r'&(?:\\w+|#\\d+);', '', force_unicode(value))\n+    return re.sub(r'&(?:\\w+|#\\d+);', '', force_text(value))\n strip_entities = allow_lazy(strip_entities, six.text_type)\n \n def fix_ampersands(value):\n     \"\"\"Returns the given HTML with all unencoded ampersands encoded correctly.\"\"\"\n-    return unencoded_ampersands_re.sub('&amp;', force_unicode(value))\n+    return unencoded_ampersands_re.sub('&amp;', force_text(value))\n fix_ampersands = allow_lazy(fix_ampersands, six.text_type)\n \n def smart_urlquote(url):\n@@ -153,9 +153,9 @@ def smart_urlquote(url):\n     # contains a % not followed by two hexadecimal digits. See #9655.\n     if '%' not in url or unquoted_percents_re.search(url):\n         # See http://bugs.python.org/issue2637\n-        url = quote(smart_str(url), safe=b'!*\\'();:@&=+$,/?#[]~')\n+        url = quote(smart_bytes(url), safe=b'!*\\'();:@&=+$,/?#[]~')\n \n-    return force_unicode(url)\n+    return force_text(url)\n \n def urlize(text, trim_url_limit=None, nofollow=False, autoescape=False):\n     \"\"\"\n@@ -176,7 +176,7 @@ def urlize(text, trim_url_limit=None, nofollow=False, autoescape=False):\n     \"\"\"\n     trim_url = lambda x, limit=trim_url_limit: limit is not None and (len(x) > limit and ('%s...' % x[:max(0, limit - 3)])) or x\n     safe_input = isinstance(text, SafeData)\n-    words = word_split_re.split(force_unicode(text))\n+    words = word_split_re.split(force_text(text))\n     for i, word in enumerate(words):\n         match = None\n         if '.' in word or '@' in word or ':' in word:\n@@ -245,7 +245,7 @@ def clean_html(text):\n           bottom of the text.\n     \"\"\"\n     from django.utils.text import normalize_newlines\n-    text = normalize_newlines(force_unicode(text))\n+    text = normalize_newlines(force_text(text))\n     text = re.sub(r'<(/?)\\s*b\\s*>', '<\\\\1strong>', text)\n     text = re.sub(r'<(/?)\\s*i\\s*>', '<\\\\1em>', text)\n     text = fix_ampersands(text)"
        },
        {
            "sha": "22e81a33d7ca2091c90c5b8484f1fe3b3f995c21",
            "filename": "django/utils/http.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fhttp.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Fhttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhttp.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -13,7 +13,7 @@\n from email.utils import formatdate\n \n from django.utils.datastructures import MultiValueDict\n-from django.utils.encoding import smart_str, force_unicode\n+from django.utils.encoding import force_text, smart_str\n from django.utils.functional import allow_lazy\n from django.utils import six\n \n@@ -37,7 +37,7 @@ def urlquote(url, safe='/'):\n     can safely be used as part of an argument to a subsequent iri_to_uri() call\n     without double-quoting occurring.\n     \"\"\"\n-    return force_unicode(urllib_parse.quote(smart_str(url), smart_str(safe)))\n+    return force_text(urllib_parse.quote(smart_str(url), smart_str(safe)))\n urlquote = allow_lazy(urlquote, six.text_type)\n \n def urlquote_plus(url, safe=''):\n@@ -47,23 +47,23 @@ def urlquote_plus(url, safe=''):\n     returned string can safely be used as part of an argument to a subsequent\n     iri_to_uri() call without double-quoting occurring.\n     \"\"\"\n-    return force_unicode(urllib_parse.quote_plus(smart_str(url), smart_str(safe)))\n+    return force_text(urllib_parse.quote_plus(smart_str(url), smart_str(safe)))\n urlquote_plus = allow_lazy(urlquote_plus, six.text_type)\n \n def urlunquote(quoted_url):\n     \"\"\"\n     A wrapper for Python's urllib.unquote() function that can operate on\n     the result of django.utils.http.urlquote().\n     \"\"\"\n-    return force_unicode(urllib_parse.unquote(smart_str(quoted_url)))\n+    return force_text(urllib_parse.unquote(smart_str(quoted_url)))\n urlunquote = allow_lazy(urlunquote, six.text_type)\n \n def urlunquote_plus(quoted_url):\n     \"\"\"\n     A wrapper for Python's urllib.unquote_plus() function that can operate on\n     the result of django.utils.http.urlquote_plus().\n     \"\"\"\n-    return force_unicode(urllib_parse.unquote_plus(smart_str(quoted_url)))\n+    return force_text(urllib_parse.unquote_plus(smart_str(quoted_url)))\n urlunquote_plus = allow_lazy(urlunquote_plus, six.text_type)\n \n def urlencode(query, doseq=0):"
        },
        {
            "sha": "0838d79c652410225c4fd45234e2c6eb6977e304",
            "filename": "django/utils/text.py",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ftext.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ftext.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftext.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -7,13 +7,13 @@\n from django.utils.six.moves import html_entities\n from io import BytesIO\n \n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.functional import allow_lazy, SimpleLazyObject\n from django.utils import six\n from django.utils.translation import ugettext_lazy, ugettext as _, pgettext\n \n # Capitalizes the first letter of a string.\n-capfirst = lambda x: x and force_unicode(x)[0].upper() + force_unicode(x)[1:]\n+capfirst = lambda x: x and force_text(x)[0].upper() + force_text(x)[1:]\n capfirst = allow_lazy(capfirst, six.text_type)\n \n # Set up regular expressions\n@@ -26,7 +26,7 @@ def wrap(text, width):\n     A word-wrap function that preserves existing line breaks and most spaces in\n     the text. Expects that existing line breaks are posix newlines.\n     \"\"\"\n-    text = force_unicode(text)\n+    text = force_text(text)\n     def _generator():\n         it = iter(text.split(' '))\n         word = next(it)\n@@ -55,14 +55,14 @@ class Truncator(SimpleLazyObject):\n     An object used to truncate text, either by characters or words.\n     \"\"\"\n     def __init__(self, text):\n-        super(Truncator, self).__init__(lambda: force_unicode(text))\n+        super(Truncator, self).__init__(lambda: force_text(text))\n \n     def add_truncation_text(self, text, truncate=None):\n         if truncate is None:\n             truncate = pgettext(\n                 'String to return when truncating text',\n                 '%(truncated_text)s...')\n-        truncate = force_unicode(truncate)\n+        truncate = force_text(truncate)\n         if '%(truncated_text)s' in truncate:\n             return truncate % {'truncated_text': text}\n         # The truncation text didn't contain the %(truncated_text)s string\n@@ -226,7 +226,7 @@ def get_valid_filename(s):\n     >>> get_valid_filename(\"john's portrait in 2004.jpg\")\n     'johns_portrait_in_2004.jpg'\n     \"\"\"\n-    s = force_unicode(s).strip().replace(' ', '_')\n+    s = force_text(s).strip().replace(' ', '_')\n     return re.sub(r'(?u)[^-\\w.]', '', s)\n get_valid_filename = allow_lazy(get_valid_filename, six.text_type)\n \n@@ -244,20 +244,20 @@ def get_text_list(list_, last_word=ugettext_lazy('or')):\n     ''\n     \"\"\"\n     if len(list_) == 0: return ''\n-    if len(list_) == 1: return force_unicode(list_[0])\n+    if len(list_) == 1: return force_text(list_[0])\n     return '%s %s %s' % (\n         # Translators: This string is used as a separator between list elements\n-        _(', ').join([force_unicode(i) for i in list_][:-1]),\n-        force_unicode(last_word), force_unicode(list_[-1]))\n+        _(', ').join([force_text(i) for i in list_][:-1]),\n+        force_text(last_word), force_text(list_[-1]))\n get_text_list = allow_lazy(get_text_list, six.text_type)\n \n def normalize_newlines(text):\n-    return force_unicode(re.sub(r'\\r\\n|\\r|\\n', '\\n', text))\n+    return force_text(re.sub(r'\\r\\n|\\r|\\n', '\\n', text))\n normalize_newlines = allow_lazy(normalize_newlines, six.text_type)\n \n def recapitalize(text):\n     \"Recapitalizes text, placing caps after end-of-sentence punctuation.\"\n-    text = force_unicode(text).lower()\n+    text = force_text(text).lower()\n     capsRE = re.compile(r'(?:^|(?<=[\\.\\?\\!] ))([a-z])')\n     text = capsRE.sub(lambda x: x.group(1).upper(), text)\n     return text\n@@ -330,7 +330,7 @@ def smart_split(text):\n     >>> list(smart_split(r'A \"\\\"funky\\\" style\" test.'))\n     ['A', '\"\\\\\"funky\\\\\" style\"', 'test.']\n     \"\"\"\n-    text = force_unicode(text)\n+    text = force_text(text)\n     for bit in smart_split_re.finditer(text):\n         yield bit.group(0)\n smart_split = allow_lazy(smart_split, six.text_type)"
        },
        {
            "sha": "febde404a528c729e947da277dddb93c4548f548",
            "filename": "django/utils/translation/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ftranslation%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ftranslation%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftranslation%2F__init__.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -3,7 +3,7 @@\n \"\"\"\n from __future__ import unicode_literals\n \n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.functional import lazy\n from django.utils import six\n \n@@ -139,7 +139,7 @@ def _string_concat(*strings):\n     Lazy variant of string concatenation, needed for translations that are\n     constructed from multiple parts.\n     \"\"\"\n-    return ''.join([force_unicode(s) for s in strings])\n+    return ''.join([force_text(s) for s in strings])\n string_concat = lazy(_string_concat, six.text_type)\n \n def get_language_info(lang_code):"
        },
        {
            "sha": "5c5146820483772879549622e79f82b82280bb8a",
            "filename": "django/utils/translation/trans_null.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ftranslation%2Ftrans_null.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ftranslation%2Ftrans_null.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftranslation%2Ftrans_null.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -3,7 +3,7 @@\n # settings.USE_I18N = False can use this module rather than trans_real.py.\n \n from django.conf import settings\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.safestring import mark_safe, SafeData\n \n def ngettext(singular, plural, number):\n@@ -12,7 +12,7 @@ def ngettext(singular, plural, number):\n ngettext_lazy = ngettext\n \n def ungettext(singular, plural, number):\n-    return force_unicode(ngettext(singular, plural, number))\n+    return force_text(ngettext(singular, plural, number))\n \n def pgettext(context, message):\n     return ugettext(message)\n@@ -44,7 +44,7 @@ def gettext(message):\n     return result\n \n def ugettext(message):\n-    return force_unicode(gettext(message))\n+    return force_text(gettext(message))\n \n gettext_noop = gettext_lazy = _ = gettext\n "
        },
        {
            "sha": "c40b4304118ff81605cc491c02ffe3ac3369f807",
            "filename": "django/utils/tzinfo.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ftzinfo.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Futils%2Ftzinfo.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftzinfo.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -5,7 +5,7 @@\n import time\n from datetime import timedelta, tzinfo\n \n-from django.utils.encoding import smart_unicode, smart_str, DEFAULT_LOCALE_ENCODING\n+from django.utils.encoding import smart_text, smart_bytes, DEFAULT_LOCALE_ENCODING\n \n # Python's doc say: \"A tzinfo subclass must have an __init__() method that can\n # be called with no arguments\". FixedOffset and LocalTimezone don't honor this\n@@ -53,7 +53,7 @@ def __init__(self, dt):\n         self._tzname = self.tzname(dt)\n \n     def __repr__(self):\n-        return smart_str(self._tzname)\n+        return smart_bytes(self._tzname)\n \n     def __getinitargs__(self):\n         return self.__dt,\n@@ -72,7 +72,7 @@ def dst(self, dt):\n \n     def tzname(self, dt):\n         try:\n-            return smart_unicode(time.tzname[self._isdst(dt)],\n+            return smart_text(time.tzname[self._isdst(dt)],\n                                  DEFAULT_LOCALE_ENCODING)\n         except UnicodeDecodeError:\n             return None"
        },
        {
            "sha": "b275ef9e73d318afff236134116d2df5d034b487",
            "filename": "django/views/debug.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fviews%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fviews%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdebug.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -14,7 +14,7 @@\n from django.template.defaultfilters import force_escape, pprint\n from django.utils.html import escape\n from django.utils.importlib import import_module\n-from django.utils.encoding import smart_unicode, smart_str\n+from django.utils.encoding import smart_text, smart_bytes\n from django.utils import six\n \n HIDDEN_SETTINGS = re.compile('API|TOKEN|KEY|SECRET|PASS|PROFANITIES_LIST|SIGNATURE')\n@@ -256,7 +256,7 @@ def get_traceback_data(self):\n             end = getattr(self.exc_value, 'end', None)\n             if start is not None and end is not None:\n                 unicode_str = self.exc_value.args[1]\n-                unicode_hint = smart_unicode(unicode_str[max(start-5, 0):min(end+5, len(unicode_str))], 'ascii', errors='replace')\n+                unicode_hint = smart_text(unicode_str[max(start-5, 0):min(end+5, len(unicode_str))], 'ascii', errors='replace')\n         from django import get_version\n         c = {\n             'is_email': self.is_email,\n@@ -278,7 +278,7 @@ def get_traceback_data(self):\n         if self.exc_type:\n             c['exception_type'] = self.exc_type.__name__\n         if self.exc_value:\n-            c['exception_value'] = smart_unicode(self.exc_value, errors='replace')\n+            c['exception_value'] = smart_text(self.exc_value, errors='replace')\n         if frames:\n             c['lastframe'] = frames[-1]\n         return c\n@@ -440,7 +440,7 @@ def technical_404_response(request, exception):\n         'root_urlconf': settings.ROOT_URLCONF,\n         'request_path': request.path_info[1:], # Trim leading slash\n         'urlpatterns': tried,\n-        'reason': smart_str(exception, errors='replace'),\n+        'reason': smart_bytes(exception, errors='replace'),\n         'request': request,\n         'settings': get_safe_settings(),\n     })"
        },
        {
            "sha": "08b7318738f51cda95eb9e12883b6450a986fd39",
            "filename": "django/views/generic/dates.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fviews%2Fgeneric%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fviews%2Fgeneric%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fdates.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -5,7 +5,7 @@\n from django.db import models\n from django.core.exceptions import ImproperlyConfigured\n from django.http import Http404\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils.functional import cached_property\n from django.utils.translation import ugettext as _\n from django.utils import timezone\n@@ -365,7 +365,7 @@ def get_dated_queryset(self, ordering=None, **lookup):\n             is_empty = len(qs) == 0 if paginate_by is None else not qs.exists()\n             if is_empty:\n                 raise Http404(_(\"No %(verbose_name_plural)s available\") % {\n-                        'verbose_name_plural': force_unicode(qs.model._meta.verbose_name_plural)\n+                        'verbose_name_plural': force_text(qs.model._meta.verbose_name_plural)\n                 })\n \n         return qs\n@@ -380,7 +380,7 @@ def get_date_list(self, queryset, date_type):\n \n         date_list = queryset.dates(date_field, date_type)[::-1]\n         if date_list is not None and not date_list and not allow_empty:\n-            name = force_unicode(queryset.model._meta.verbose_name_plural)\n+            name = force_text(queryset.model._meta.verbose_name_plural)\n             raise Http404(_(\"No %(verbose_name_plural)s available\") %\n                           {'verbose_name_plural': name})\n "
        },
        {
            "sha": "00ef224254e5be797969b1850109980f5d78ad5c",
            "filename": "django/views/i18n.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fviews%2Fi18n.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/django%2Fviews%2Fi18n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fi18n.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -6,7 +6,7 @@\n from django.utils import importlib\n from django.utils.translation import check_for_language, activate, to_locale, get_language\n from django.utils.text import javascript_quote\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.formats import get_format_modules, get_format\n from django.utils import six\n \n@@ -54,9 +54,9 @@ def get_formats():\n     src = []\n     for k, v in result.items():\n         if isinstance(v, (six.string_types, int)):\n-            src.append(\"formats['%s'] = '%s';\\n\" % (javascript_quote(k), javascript_quote(smart_unicode(v))))\n+            src.append(\"formats['%s'] = '%s';\\n\" % (javascript_quote(k), javascript_quote(smart_text(v))))\n         elif isinstance(v, (tuple, list)):\n-            v = [javascript_quote(smart_unicode(value)) for value in v]\n+            v = [javascript_quote(smart_text(value)) for value in v]\n             src.append(\"formats['%s'] = ['%s'];\\n\" % (javascript_quote(k), \"', '\".join(v)))\n     return ''.join(src)\n "
        },
        {
            "sha": "e73ef9aa42be96daa4272d8383f4c61c183f790d",
            "filename": "docs/howto/custom-model-fields.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fhowto%2Fcustom-model-fields.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fhowto%2Fcustom-model-fields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Fcustom-model-fields.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -688,7 +688,7 @@ smoothly:\n 2. Put a :meth:`__str__` or :meth:`__unicode__` method on the class you're\n    wrapping up as a field. There are a lot of places where the default\n    behavior of the field code is to call\n-   :func:`~django.utils.encoding.force_unicode` on the value. (In our\n+   :func:`~django.utils.encoding.force_text` on the value. (In our\n    examples in this document, ``value`` would be a ``Hand`` instance, not a\n    ``HandField``). So if your :meth:`__unicode__` method automatically\n    converts to the string form of your Python object, you can save yourself"
        },
        {
            "sha": "92b5665beac420298b791607c882f2a1f031f8f8",
            "filename": "docs/ref/databases.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Fdatabases.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Fdatabases.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdatabases.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -238,7 +238,7 @@ to you, the developer, to handle the fact that you will receive bytestrings if\n you configure your table(s) to use ``utf8_bin`` collation. Django itself should\n mostly work smoothly with such columns (except for the ``contrib.sessions``\n ``Session`` and ``contrib.admin`` ``LogEntry`` tables described below), but\n-your code must be prepared to call ``django.utils.encoding.smart_unicode()`` at\n+your code must be prepared to call ``django.utils.encoding.smart_text()`` at\n times if it really wants to work with consistent data -- Django will not do\n this for you (the database backend layer and the model population layer are\n separated internally so the database layer doesn't know it needs to make this"
        },
        {
            "sha": "14541ad0d1c150b1f0a044ad06796943a473adaa",
            "filename": "docs/ref/models/instances.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Fmodels%2Finstances.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Fmodels%2Finstances.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Finstances.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -453,9 +453,9 @@ using ``__str__()`` like this::\n         last_name = models.CharField(max_length=50)\n \n         def __str__(self):\n-            # Note use of django.utils.encoding.smart_str() here because\n+            # Note use of django.utils.encoding.smart_bytes() here because\n             # first_name and last_name will be unicode strings.\n-            return smart_str('%s %s' % (self.first_name, self.last_name))\n+            return smart_bytes('%s %s' % (self.first_name, self.last_name))\n \n ``get_absolute_url``\n --------------------"
        },
        {
            "sha": "531ff33da2e0e89ea604bb4f17b8d95729767344",
            "filename": "docs/ref/settings.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Fsettings.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Fsettings.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsettings.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -183,7 +183,7 @@ compose a prefix, version and key into a final cache key. The default\n implementation is equivalent to the function::\n \n     def make_key(key, key_prefix, version):\n-        return ':'.join([key_prefix, str(version), smart_str(key)])\n+        return ':'.join([key_prefix, str(version), smart_bytes(key)])\n \n You may use any key function you want, as long as it has the same\n argument signature."
        },
        {
            "sha": "ffab647379e5392c77867152f9d734614632a0b9",
            "filename": "docs/ref/unicode.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Funicode.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Funicode.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Funicode.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -129,7 +129,7 @@ Conversion functions\n The ``django.utils.encoding`` module contains a few functions that are handy\n for converting back and forth between Unicode and bytestrings.\n \n-* ``smart_unicode(s, encoding='utf-8', strings_only=False, errors='strict')``\n+* ``smart_text(s, encoding='utf-8', strings_only=False, errors='strict')``\n   converts its input to a Unicode string. The ``encoding`` parameter\n   specifies the input encoding. (For example, Django uses this internally\n   when processing form input data, which might not be UTF-8 encoded.) The\n@@ -139,27 +139,27 @@ for converting back and forth between Unicode and bytestrings.\n   that are accepted by Python's ``unicode()`` function for its error\n   handling.\n \n-  If you pass ``smart_unicode()`` an object that has a ``__unicode__``\n+  If you pass ``smart_text()`` an object that has a ``__unicode__``\n   method, it will use that method to do the conversion.\n \n-* ``force_unicode(s, encoding='utf-8', strings_only=False,\n-  errors='strict')`` is identical to ``smart_unicode()`` in almost all\n+* ``force_text(s, encoding='utf-8', strings_only=False,\n+  errors='strict')`` is identical to ``smart_text()`` in almost all\n   cases. The difference is when the first argument is a :ref:`lazy\n-  translation <lazy-translations>` instance. While ``smart_unicode()``\n-  preserves lazy translations, ``force_unicode()`` forces those objects to a\n+  translation <lazy-translations>` instance. While ``smart_text()``\n+  preserves lazy translations, ``force_text()`` forces those objects to a\n   Unicode string (causing the translation to occur). Normally, you'll want\n-  to use ``smart_unicode()``. However, ``force_unicode()`` is useful in\n+  to use ``smart_text()``. However, ``force_text()`` is useful in\n   template tags and filters that absolutely *must* have a string to work\n   with, not just something that can be converted to a string.\n \n-* ``smart_str(s, encoding='utf-8', strings_only=False, errors='strict')``\n-  is essentially the opposite of ``smart_unicode()``. It forces the first\n+* ``smart_bytes(s, encoding='utf-8', strings_only=False, errors='strict')``\n+  is essentially the opposite of ``smart_text()``. It forces the first\n   argument to a bytestring. The ``strings_only`` parameter has the same\n-  behavior as for ``smart_unicode()`` and ``force_unicode()``. This is\n+  behavior as for ``smart_text()`` and ``force_text()``. This is\n   slightly different semantics from Python's builtin ``str()`` function,\n   but the difference is needed in a few places within Django's internals.\n \n-Normally, you'll only need to use ``smart_unicode()``. Call it as early as\n+Normally, you'll only need to use ``smart_text()``. Call it as early as\n possible on any input data that might be either Unicode or a bytestring, and\n from then on, you can treat the result as always being Unicode.\n \n@@ -324,7 +324,7 @@ A couple of tips to remember when writing your own template tags and filters:\n * Always return Unicode strings from a template tag's ``render()`` method\n   and from template filters.\n \n-* Use ``force_unicode()`` in preference to ``smart_unicode()`` in these\n+* Use ``force_text()`` in preference to ``smart_text()`` in these\n   places. Tag rendering and filter calls occur as the template is being\n   rendered, so there is no advantage to postponing the conversion of lazy\n   translation objects into strings. It's easier to work solely with Unicode"
        },
        {
            "sha": "b6cb1035d3d081d92f8f43247aa363e712a0fd60",
            "filename": "docs/ref/utils.txt",
            "status": "modified",
            "additions": 39,
            "deletions": 11,
            "changes": 50,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Futils.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Fref%2Futils.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Futils.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -178,40 +178,68 @@ The functions defined in this module share the following properties:\n \n .. class:: StrAndUnicode\n \n-    A class whose ``__str__`` returns its ``__unicode__`` as a UTF-8\n-    bytestring. Useful as a mix-in.\n+    A class that derives ``__str__`` from ``__unicode__``.\n \n-.. function:: smart_unicode(s, encoding='utf-8', strings_only=False, errors='strict')\n+    On Python 2, ``__str__`` returns the output of ``__unicode__`` encoded as\n+    a UTF-8 bytestring. On Python 3, ``__str__`` returns the output of\n+    ``__unicode__``.\n+\n+    Useful as a mix-in. If you support Python 2 and 3 with a single code base,\n+    you can inherit this mix-in and just define ``__unicode__``.\n+\n+.. function:: smart_text(s, encoding='utf-8', strings_only=False, errors='strict')\n \n-    Returns a ``unicode`` object representing ``s``. Treats bytestrings using\n-    the 'encoding' codec.\n+    .. versionadded:: 1.5\n+\n+    Returns a text object representing ``s`` -- ``unicode`` on Python 2 and\n+    ``str`` on Python 3. Treats bytestrings using the ``encoding`` codec.\n \n     If ``strings_only`` is ``True``, don't convert (some) non-string-like\n     objects.\n \n+.. function:: smart_unicode(s, encoding='utf-8', strings_only=False, errors='strict')\n+\n+    Historical name of :func:`smart_text`. Only available under Python 2.\n+\n .. function:: is_protected_type(obj)\n \n     Determine if the object instance is of a protected type.\n \n     Objects of protected types are preserved as-is when passed to\n-    ``force_unicode(strings_only=True)``.\n+    ``force_text(strings_only=True)``.\n \n-.. function:: force_unicode(s, encoding='utf-8', strings_only=False, errors='strict')\n+.. function:: force_text(s, encoding='utf-8', strings_only=False, errors='strict')\n+\n+    .. versionadded:: 1.5\n \n-    Similar to ``smart_unicode``, except that lazy instances are resolved to\n+    Similar to ``smart_text``, except that lazy instances are resolved to\n     strings, rather than kept as lazy objects.\n \n     If ``strings_only`` is ``True``, don't convert (some) non-string-like\n     objects.\n \n-.. function:: smart_str(s, encoding='utf-8', strings_only=False, errors='strict')\n+.. function:: force_unicode(s, encoding='utf-8', strings_only=False, errors='strict')\n+\n+    Historical name of :func:`force_text`. Only available under Python 2.\n+\n+.. function:: smart_bytes(s, encoding='utf-8', strings_only=False, errors='strict')\n+\n+    .. versionadded:: 1.5\n \n     Returns a bytestring version of ``s``, encoded as specified in\n     ``encoding``.\n \n     If ``strings_only`` is ``True``, don't convert (some) non-string-like\n     objects.\n \n+.. function:: smart_str(s, encoding='utf-8', strings_only=False, errors='strict')\n+\n+    Alias of :func:`smart_bytes` on Python 2 and :func:`smart_text` on Python\n+    3. This function always returns a :class:`str`.\n+\n+    For instance, this is  suitable for writing to :attr:`sys.stdout` on\n+    Python 2 and 3.\n+\n .. function:: iri_to_uri(iri)\n \n     Convert an Internationalized Resource Identifier (IRI) portion to a URI\n@@ -406,7 +434,7 @@ escaping HTML.\n \n     Returns the given text with ampersands, quotes and angle brackets encoded\n     for use in HTML. The input is first passed through\n-    :func:`~django.utils.encoding.force_unicode` and the output has\n+    :func:`~django.utils.encoding.force_text` and the output has\n     :func:`~django.utils.safestring.mark_safe` applied.\n \n .. function:: conditional_escape(text)\n@@ -448,7 +476,7 @@ escaping HTML.\n     interpolation, some of the formatting options provided by `str.format`_\n     (e.g. number formatting) will not work, since all arguments are passed\n     through :func:`conditional_escape` which (ultimately) calls\n-    :func:`~django.utils.encoding.force_unicode` on the values.\n+    :func:`~django.utils.encoding.force_text` on the values.\n \n \n .. _str.format: http://docs.python.org/library/stdtypes.html#str.format"
        },
        {
            "sha": "f789ebde40deaf3f80aae27e9a78bcfe00511405",
            "filename": "docs/releases/1.5.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Freleases%2F1.5.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Freleases%2F1.5.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.5.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -161,7 +161,7 @@ If you have written a :ref:`custom password hasher <auth_password_storage>`,\n your ``encode()``, ``verify()`` or ``safe_summary()`` methods should accept\n Unicode parameters (``password``, ``salt`` or ``encoded``). If any of the\n hashing methods need byte strings, you can use the\n-:func:`~django.utils.encoding.smart_str` utility to encode the strings.\n+:func:`~django.utils.encoding.smart_bytes` utility to encode the strings.\n \n Validation of previous_page_number and next_page_number\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "sha": "219b6c77957c503cec4187dc98e26e10f4043909",
            "filename": "docs/topics/cache.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Ftopics%2Fcache.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Ftopics%2Fcache.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fcache.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -864,7 +864,7 @@ key version to provide a final cache key. By default, the three parts\n are joined using colons to produce a final string::\n \n     def make_key(key, key_prefix, version):\n-        return ':'.join([key_prefix, str(version), smart_str(key)])\n+        return ':'.join([key_prefix, str(version), smart_bytes(key)])\n \n If you want to combine the parts in different ways, or apply other\n processing to the final key (e.g., taking a hash digest of the key"
        },
        {
            "sha": "ac1a77ed98776c8044f91dd2a2df6f11e83db783",
            "filename": "docs/topics/serialization.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Ftopics%2Fserialization.txt",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/docs%2Ftopics%2Fserialization.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fserialization.txt?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -173,12 +173,12 @@ In particular, :ref:`lazy translation objects <lazy-translations>` need a\n \n     import json\n     from django.utils.functional import Promise\n-    from django.utils.encoding import force_unicode\n+    from django.utils.encoding import force_text\n \n     class LazyEncoder(json.JSONEncoder):\n         def default(self, obj):\n             if isinstance(obj, Promise):\n-                return force_unicode(obj)\n+                return force_text(obj)\n             return super(LazyEncoder, self).default(obj)\n \n .. _special encoder: http://docs.python.org/library/json.html#encoders-and-decoders"
        },
        {
            "sha": "0d4ff98aa76947d3cabf56960367cccbc17ef334",
            "filename": "tests/modeltests/field_subclassing/fields.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -3,7 +3,7 @@\n import json\n \n from django.db import models\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.utils import six\n \n \n@@ -16,7 +16,7 @@ def __init__(self, first, second):\n         self.first, self.second = first, second\n \n     def __unicode__(self):\n-        return '%s%s' % (force_unicode(self.first), force_unicode(self.second))\n+        return '%s%s' % (force_text(self.first), force_text(self.second))\n \n     def __str__(self):\n         return six.text_type(self).encode('utf-8')\n@@ -46,9 +46,9 @@ def get_db_prep_save(self, value, connection):\n \n     def get_prep_lookup(self, lookup_type, value):\n         if lookup_type == 'exact':\n-            return force_unicode(value)\n+            return force_text(value)\n         if lookup_type == 'in':\n-            return [force_unicode(v) for v in value]\n+            return [force_text(v) for v in value]\n         if lookup_type == 'isnull':\n             return []\n         raise TypeError('Invalid lookup type: %r' % lookup_type)"
        },
        {
            "sha": "2df9664cdc04f6a78764c075f3aff5a86722b7fc",
            "filename": "tests/modeltests/field_subclassing/models.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fmodeltests%2Ffield_subclassing%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fmodeltests%2Ffield_subclassing%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ffield_subclassing%2Fmodels.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -5,7 +5,7 @@\n from __future__ import absolute_import\n \n from django.db import models\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n from .fields import SmallField, SmallerField, JSONField\n \n@@ -15,7 +15,7 @@ class MyModel(models.Model):\n     data = SmallField('small field')\n \n     def __unicode__(self):\n-        return force_unicode(self.name)\n+        return force_text(self.name)\n \n class OtherModel(models.Model):\n     data = SmallerField()"
        },
        {
            "sha": "b92c2f4c8bdddd2cfe20d682656389e594196e62",
            "filename": "tests/regressiontests/admin_filters/tests.py",
            "status": "modified",
            "additions": 30,
            "deletions": 30,
            "changes": 60,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fadmin_filters%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fadmin_filters%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_filters%2Ftests.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -10,7 +10,7 @@\n from django.core.exceptions import ImproperlyConfigured\n from django.test import TestCase, RequestFactory\n from django.test.utils import override_settings\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n from .models import Book, Department, Employee\n \n@@ -160,7 +160,7 @@ def test_datefieldlistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][4]\n-        self.assertEqual(force_unicode(filterspec.title), 'date registered')\n+        self.assertEqual(force_text(filterspec.title), 'date registered')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"Today\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?date_registered__gte=%s'\n@@ -181,7 +181,7 @@ def test_datefieldlistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][4]\n-        self.assertEqual(force_unicode(filterspec.title), 'date registered')\n+        self.assertEqual(force_text(filterspec.title), 'date registered')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"This month\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?date_registered__gte=%s'\n@@ -202,7 +202,7 @@ def test_datefieldlistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][4]\n-        self.assertEqual(force_unicode(filterspec.title), 'date registered')\n+        self.assertEqual(force_text(filterspec.title), 'date registered')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"This year\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?date_registered__gte=%s'\n@@ -219,7 +219,7 @@ def test_datefieldlistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][4]\n-        self.assertEqual(force_unicode(filterspec.title), 'date registered')\n+        self.assertEqual(force_text(filterspec.title), 'date registered')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"Past 7 days\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?date_registered__gte=%s'\n@@ -243,7 +243,7 @@ def test_allvaluesfieldlistfilter(self):\n \n         # Make sure the last choice is None and is selected\n         filterspec = changelist.get_filters(request)[0][0]\n-        self.assertEqual(force_unicode(filterspec.title), 'year')\n+        self.assertEqual(force_text(filterspec.title), 'year')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[-1]['selected'], True)\n         self.assertEqual(choices[-1]['query_string'], '?year__isnull=True')\n@@ -253,7 +253,7 @@ def test_allvaluesfieldlistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][0]\n-        self.assertEqual(force_unicode(filterspec.title), 'year')\n+        self.assertEqual(force_text(filterspec.title), 'year')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[2]['selected'], True)\n         self.assertEqual(choices[2]['query_string'], '?year=2002')\n@@ -270,7 +270,7 @@ def test_relatedfieldlistfilter_foreignkey(self):\n \n         # Make sure the last choice is None and is selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'Verbose Author')\n+        self.assertEqual(force_text(filterspec.title), 'Verbose Author')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[-1]['selected'], True)\n         self.assertEqual(choices[-1]['query_string'], '?author__isnull=True')\n@@ -280,7 +280,7 @@ def test_relatedfieldlistfilter_foreignkey(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'Verbose Author')\n+        self.assertEqual(force_text(filterspec.title), 'Verbose Author')\n         # order of choices depends on User model, which has no order\n         choice = select_by(filterspec.choices(changelist), \"display\", \"alfred\")\n         self.assertEqual(choice['selected'], True)\n@@ -298,7 +298,7 @@ def test_relatedfieldlistfilter_manytomany(self):\n \n         # Make sure the last choice is None and is selected\n         filterspec = changelist.get_filters(request)[0][2]\n-        self.assertEqual(force_unicode(filterspec.title), 'Verbose Contributors')\n+        self.assertEqual(force_text(filterspec.title), 'Verbose Contributors')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[-1]['selected'], True)\n         self.assertEqual(choices[-1]['query_string'], '?contributors__isnull=True')\n@@ -308,7 +308,7 @@ def test_relatedfieldlistfilter_manytomany(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][2]\n-        self.assertEqual(force_unicode(filterspec.title), 'Verbose Contributors')\n+        self.assertEqual(force_text(filterspec.title), 'Verbose Contributors')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"bob\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?contributors__id__exact=%d' % self.bob.pk)\n@@ -326,7 +326,7 @@ def test_relatedfieldlistfilter_reverse_relationships(self):\n \n         # Make sure the last choice is None and is selected\n         filterspec = changelist.get_filters(request)[0][0]\n-        self.assertEqual(force_unicode(filterspec.title), 'book')\n+        self.assertEqual(force_text(filterspec.title), 'book')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[-1]['selected'], True)\n         self.assertEqual(choices[-1]['query_string'], '?books_authored__isnull=True')\n@@ -336,7 +336,7 @@ def test_relatedfieldlistfilter_reverse_relationships(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][0]\n-        self.assertEqual(force_unicode(filterspec.title), 'book')\n+        self.assertEqual(force_text(filterspec.title), 'book')\n         choice = select_by(filterspec.choices(changelist), \"display\", self.bio_book.title)\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?books_authored__id__exact=%d' % self.bio_book.pk)\n@@ -351,7 +351,7 @@ def test_relatedfieldlistfilter_reverse_relationships(self):\n \n         # Make sure the last choice is None and is selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'book')\n+        self.assertEqual(force_text(filterspec.title), 'book')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[-1]['selected'], True)\n         self.assertEqual(choices[-1]['query_string'], '?books_contributed__isnull=True')\n@@ -361,7 +361,7 @@ def test_relatedfieldlistfilter_reverse_relationships(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'book')\n+        self.assertEqual(force_text(filterspec.title), 'book')\n         choice = select_by(filterspec.choices(changelist), \"display\", self.django_book.title)\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?books_contributed__id__exact=%d' % self.django_book.pk)\n@@ -387,7 +387,7 @@ def verify_booleanfieldlistfilter(self, modeladmin):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][3]\n-        self.assertEqual(force_unicode(filterspec.title), 'is best seller')\n+        self.assertEqual(force_text(filterspec.title), 'is best seller')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"No\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?is_best_seller__exact=0')\n@@ -401,7 +401,7 @@ def verify_booleanfieldlistfilter(self, modeladmin):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][3]\n-        self.assertEqual(force_unicode(filterspec.title), 'is best seller')\n+        self.assertEqual(force_text(filterspec.title), 'is best seller')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"Yes\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?is_best_seller__exact=1')\n@@ -415,7 +415,7 @@ def verify_booleanfieldlistfilter(self, modeladmin):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][3]\n-        self.assertEqual(force_unicode(filterspec.title), 'is best seller')\n+        self.assertEqual(force_text(filterspec.title), 'is best seller')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"Unknown\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?is_best_seller__isnull=True')\n@@ -434,7 +434,7 @@ def test_simplelistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'publication decade')\n+        self.assertEqual(force_text(filterspec.title), 'publication decade')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[0]['display'], 'All')\n         self.assertEqual(choices[0]['selected'], True)\n@@ -451,7 +451,7 @@ def test_simplelistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'publication decade')\n+        self.assertEqual(force_text(filterspec.title), 'publication decade')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[1]['display'], 'the 1980\\'s')\n         self.assertEqual(choices[1]['selected'], True)\n@@ -468,7 +468,7 @@ def test_simplelistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'publication decade')\n+        self.assertEqual(force_text(filterspec.title), 'publication decade')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[2]['display'], 'the 1990\\'s')\n         self.assertEqual(choices[2]['selected'], True)\n@@ -485,7 +485,7 @@ def test_simplelistfilter(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'publication decade')\n+        self.assertEqual(force_text(filterspec.title), 'publication decade')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[3]['display'], 'the 2000\\'s')\n         self.assertEqual(choices[3]['selected'], True)\n@@ -502,14 +502,14 @@ def test_simplelistfilter(self):\n \n         # Make sure the correct choices are selected\n         filterspec = changelist.get_filters(request)[0][1]\n-        self.assertEqual(force_unicode(filterspec.title), 'publication decade')\n+        self.assertEqual(force_text(filterspec.title), 'publication decade')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[3]['display'], 'the 2000\\'s')\n         self.assertEqual(choices[3]['selected'], True)\n         self.assertEqual(choices[3]['query_string'], '?publication-decade=the+00s&author__id__exact=%s' % self.alfred.pk)\n \n         filterspec = changelist.get_filters(request)[0][0]\n-        self.assertEqual(force_unicode(filterspec.title), 'Verbose Author')\n+        self.assertEqual(force_text(filterspec.title), 'Verbose Author')\n         choice = select_by(filterspec.choices(changelist), \"display\", \"alfred\")\n         self.assertEqual(choice['selected'], True)\n         self.assertEqual(choice['query_string'], '?publication-decade=the+00s&author__id__exact=%s' % self.alfred.pk)\n@@ -561,7 +561,7 @@ def test_simplelistfilter_with_queryset_based_lookups(self):\n         changelist = self.get_changelist(request, Book, modeladmin)\n \n         filterspec = changelist.get_filters(request)[0][0]\n-        self.assertEqual(force_unicode(filterspec.title), 'publication decade')\n+        self.assertEqual(force_text(filterspec.title), 'publication decade')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(len(choices), 3)\n \n@@ -591,7 +591,7 @@ def test_two_characters_long_field(self):\n         self.assertEqual(list(queryset), [self.bio_book])\n \n         filterspec = changelist.get_filters(request)[0][-1]\n-        self.assertEqual(force_unicode(filterspec.title), 'number')\n+        self.assertEqual(force_text(filterspec.title), 'number')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[2]['selected'], True)\n         self.assertEqual(choices[2]['query_string'], '?no=207')\n@@ -614,7 +614,7 @@ def test_parameter_ends_with__in__or__isnull(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][0]\n-        self.assertEqual(force_unicode(filterspec.title), 'publication decade')\n+        self.assertEqual(force_text(filterspec.title), 'publication decade')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[2]['display'], 'the 1990\\'s')\n         self.assertEqual(choices[2]['selected'], True)\n@@ -631,7 +631,7 @@ def test_parameter_ends_with__in__or__isnull(self):\n \n         # Make sure the correct choice is selected\n         filterspec = changelist.get_filters(request)[0][0]\n-        self.assertEqual(force_unicode(filterspec.title), 'publication decade')\n+        self.assertEqual(force_text(filterspec.title), 'publication decade')\n         choices = list(filterspec.choices(changelist))\n         self.assertEqual(choices[2]['display'], 'the 1990\\'s')\n         self.assertEqual(choices[2]['selected'], True)\n@@ -657,7 +657,7 @@ def test_fk_with_to_field(self):\n         self.assertEqual(list(queryset), [jack, john])\n \n         filterspec = changelist.get_filters(request)[0][-1]\n-        self.assertEqual(force_unicode(filterspec.title), 'department')\n+        self.assertEqual(force_text(filterspec.title), 'department')\n         choices = list(filterspec.choices(changelist))\n \n         self.assertEqual(choices[0]['display'], 'All')\n@@ -682,7 +682,7 @@ def test_fk_with_to_field(self):\n         self.assertEqual(list(queryset), [john])\n \n         filterspec = changelist.get_filters(request)[0][-1]\n-        self.assertEqual(force_unicode(filterspec.title), 'department')\n+        self.assertEqual(force_text(filterspec.title), 'department')\n         choices = list(filterspec.choices(changelist))\n \n         self.assertEqual(choices[0]['display'], 'All')"
        },
        {
            "sha": "293ddfebf6a70825ee471638cbc87889bbefcadb",
            "filename": "tests/regressiontests/admin_views/admin.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -630,7 +630,7 @@ def change_view(self, *args, **kwargs):\n #     related OneToOne object registered in admin\n #     related OneToOne object not registered in admin\n # when deleting Book so as exercise all four troublesome (w.r.t escaping\n-# and calling force_unicode to avoid problems on Python 2.3) paths through\n+# and calling force_text to avoid problems on Python 2.3) paths through\n # contrib.admin.util's get_deleted_objects function.\n site.register(Book, inlines=[ChapterInline])\n site.register(Promo)"
        },
        {
            "sha": "8fc749aaa27a67d8817fb095f56ee5e212f52fc7",
            "filename": "tests/regressiontests/cache/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcache%2Ftests.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -28,7 +28,7 @@\n from django.utils import timezone, translation, unittest\n from django.utils.cache import (patch_vary_headers, get_cache_key,\n     learn_cache_key, patch_cache_control, patch_response_headers)\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n from django.views.decorators.cache import cache_page\n \n from .models import Poll, expensive_calculation\n@@ -1307,7 +1307,7 @@ def test_cache_key_i18n_timezone(self):\n         request = self._get_request()\n         # This is tightly coupled to the implementation,\n         # but it's the most straightforward way to test the key.\n-        tz = force_unicode(timezone.get_current_timezone_name(), errors='ignore')\n+        tz = force_text(timezone.get_current_timezone_name(), errors='ignore')\n         tz = tz.encode('ascii', 'ignore').replace(' ', '_')\n         response = HttpResponse()\n         key = learn_cache_key(request, response)\n@@ -1319,7 +1319,7 @@ def test_cache_key_i18n_timezone(self):\n     def test_cache_key_no_i18n (self):\n         request = self._get_request()\n         lang = translation.get_language()\n-        tz = force_unicode(timezone.get_current_timezone_name(), errors='ignore')\n+        tz = force_text(timezone.get_current_timezone_name(), errors='ignore')\n         tz = tz.encode('ascii', 'ignore').replace(' ', '_')\n         response = HttpResponse()\n         key = learn_cache_key(request, response)"
        },
        {
            "sha": "e0e62858d0241c702b43efdde1f45dbc8df8fa1b",
            "filename": "tests/regressiontests/forms/tests/extra.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -9,7 +9,7 @@\n from django.forms.util import ErrorList\n from django.test import TestCase\n from django.utils import translation\n-from django.utils.encoding import force_unicode, smart_unicode\n+from django.utils.encoding import force_text, smart_text\n \n from .error_messages import AssertFormErrorsMixin\n \n@@ -551,7 +551,7 @@ def test_generic_ipaddress_normalization(self):\n         f = GenericIPAddressField(unpack_ipv4=True)\n         self.assertEqual(f.clean('::ffff:0a0a:0a0a'), '10.10.10.10')\n \n-    def test_smart_unicode(self):\n+    def test_smart_text(self):\n         class Test:\n             def __str__(self):\n                return ''.encode('utf-8')\n@@ -562,10 +562,10 @@ def __str__(self):\n             def __unicode__(self):\n                return '\\u0160\\u0110\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111'\n \n-        self.assertEqual(smart_unicode(Test()), '\\u0160\\u0110\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111')\n-        self.assertEqual(smart_unicode(TestU()), '\\u0160\\u0110\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111')\n-        self.assertEqual(smart_unicode(1), '1')\n-        self.assertEqual(smart_unicode('foo'), 'foo')\n+        self.assertEqual(smart_text(Test()), '\\u0160\\u0110\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111')\n+        self.assertEqual(smart_text(TestU()), '\\u0160\\u0110\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111')\n+        self.assertEqual(smart_text(1), '1')\n+        self.assertEqual(smart_text('foo'), 'foo')\n \n     def test_accessing_clean(self):\n         class UserForm(Form):\n@@ -591,7 +591,7 @@ def __unicode__(self):\n \n             def as_divs(self):\n                 if not self: return ''\n-                return '<div class=\"errorlist\">%s</div>' % ''.join(['<div class=\"error\">%s</div>' % force_unicode(e) for e in self])\n+                return '<div class=\"errorlist\">%s</div>' % ''.join(['<div class=\"error\">%s</div>' % force_text(e) for e in self])\n \n         class CommentForm(Form):\n             name = CharField(max_length=50, required=False)"
        },
        {
            "sha": "2368405060e6930dd1e7716f4e59f5aad6f7e6e6",
            "filename": "tests/regressiontests/signing/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fsigning%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fsigning%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fsigning%2Ftests.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -4,7 +4,7 @@\n \n from django.core import signing\n from django.test import TestCase\n-from django.utils.encoding import force_unicode\n+from django.utils.encoding import force_text\n \n \n class TestSigner(TestCase):\n@@ -48,7 +48,7 @@ def test_sign_unsign(self):\n         )\n         for example in examples:\n             self.assertNotEqual(\n-                force_unicode(example), force_unicode(signer.sign(example)))\n+                force_text(example), force_text(signer.sign(example)))\n             self.assertEqual(example, signer.unsign(signer.sign(example)))\n \n     def unsign_detects_tampering(self):"
        },
        {
            "sha": "19951f100ba06605104a7e425a88c2ad5fd0326e",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c5ef65bcf324f4c90b53be90f4aec069a68e8c59/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=c5ef65bcf324f4c90b53be90f4aec069a68e8c59",
            "patch": "@@ -17,7 +17,7 @@\n from django.core.management import call_command\n from django.test import TestCase\n from django.test.utils import override_settings\n-from django.utils.encoding import smart_unicode\n+from django.utils.encoding import smart_text\n from django.utils.functional import empty\n from django.utils._os import rmtree_errorhandler\n from django.utils import six\n@@ -80,7 +80,7 @@ def tearDown(self):\n         os.unlink(self._backup_filepath)\n \n     def assertFileContains(self, filepath, text):\n-        self.assertIn(text, self._get_file(smart_unicode(filepath)),\n+        self.assertIn(text, self._get_file(smart_text(filepath)),\n                         \"'%s' not in '%s'\" % (text, filepath))\n \n     def assertFileNotFound(self, filepath):\n@@ -199,7 +199,7 @@ def _get_file(self, filepath):\n         out.seek(0)\n         lines = [l.strip() for l in out.readlines()]\n         contents = codecs.open(\n-            smart_unicode(lines[1].strip()), \"r\", \"utf-8\").read()\n+            smart_text(lines[1].strip()), \"r\", \"utf-8\").read()\n         return contents\n \n     def test_all_files(self):"
        }
    ],
    "stats": {
        "total": 1212,
        "additions": 629,
        "deletions": 583
    }
}