{
    "author": "jbronn",
    "message": "Add `setUp` and `tearDown` methods to the geographic feed and sitemap tests to ensure `Site` exists for tests.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15856 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "d60a8777c1e04b4851115f5aa1c45cf52866cf23",
    "files": [
        {
            "sha": "efacb1bcee67545eb163ca0a77493d401793f1cd",
            "filename": "django/contrib/gis/tests/geoapp/test_feeds.py",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/d60a8777c1e04b4851115f5aa1c45cf52866cf23/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_feeds.py",
            "raw_url": "https://github.com/django/django/raw/d60a8777c1e04b4851115f5aa1c45cf52866cf23/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_feeds.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_feeds.py?ref=d60a8777c1e04b4851115f5aa1c45cf52866cf23",
            "patch": "@@ -1,4 +1,6 @@\n from xml.dom import minidom\n+from django.conf import settings\n+from django.contrib.sites.models import Site\n from django.test import TestCase\n \n from models import City\n@@ -8,6 +10,14 @@ class GeoFeedTest(TestCase):\n \n     urls = 'django.contrib.gis.tests.geoapp.urls'\n \n+    def setUp(self):\n+        Site(id=settings.SITE_ID, domain=\"example.com\", name=\"example.com\").save()\n+        self.old_Site_meta_installed = Site._meta.installed\n+        Site._meta.installed = True\n+\n+    def tearDown(self):\n+        Site._meta.installed = self.old_Site_meta_installed\n+\n     def assertChildNodes(self, elem, expected):\n         \"Taken from regressiontests/syndication/tests.py.\"\n         actual = set([n.nodeName for n in elem.childNodes])"
        },
        {
            "sha": "16e04337c687ad741dfbbe70500a8757793e9d54",
            "filename": "django/contrib/gis/tests/geoapp/test_sitemaps.py",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/d60a8777c1e04b4851115f5aa1c45cf52866cf23/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_sitemaps.py",
            "raw_url": "https://github.com/django/django/raw/d60a8777c1e04b4851115f5aa1c45cf52866cf23/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_sitemaps.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftest_sitemaps.py?ref=d60a8777c1e04b4851115f5aa1c45cf52866cf23",
            "patch": "@@ -1,6 +1,8 @@\n import cStringIO\n from xml.dom import minidom\n import zipfile\n+from django.conf import settings\n+from django.contrib.sites.models import Site\n from django.test import TestCase\n \n from models import City, Country\n@@ -10,6 +12,14 @@ class GeoSitemapTest(TestCase):\n \n     urls = 'django.contrib.gis.tests.geoapp.urls'\n \n+    def setUp(self):\n+        Site(id=settings.SITE_ID, domain=\"example.com\", name=\"example.com\").save()\n+        self.old_Site_meta_installed = Site._meta.installed\n+        Site._meta.installed = True\n+\n+    def tearDown(self):\n+        Site._meta.installed = self.old_Site_meta_installed\n+\n     def assertChildNodes(self, elem, expected):\n         \"Taken from regressiontests/syndication/tests.py.\"\n         actual = set([n.nodeName for n in elem.childNodes])"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 20,
        "deletions": 0
    }
}