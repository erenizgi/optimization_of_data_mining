{
    "author": "jezdez",
    "message": "Fixed #16842 -- Modified the RedirectView to correctly handle query strings with percent symbols. Thanks, accuser, jamey@minilop.net and Claude Paroz.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17625 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "4887a8de170ad9227d79f39f5bd3d2564f4e7ef8",
    "files": [
        {
            "sha": "fcdc7c785b41e66ecf3172822dd27e5c8d056292",
            "filename": "django/views/generic/base.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/4887a8de170ad9227d79f39f5bd3d2564f4e7ef8/django%2Fviews%2Fgeneric%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/4887a8de170ad9227d79f39f5bd3d2564f4e7ef8/django%2Fviews%2Fgeneric%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fbase.py?ref=4887a8de170ad9227d79f39f5bd3d2564f4e7ef8",
            "patch": "@@ -139,12 +139,11 @@ def get_redirect_url(self, **kwargs):\n         are provided as kwargs to this method.\n         \"\"\"\n         if self.url:\n+            url = self.url % kwargs\n             args = self.request.META.get('QUERY_STRING', '')\n             if args and self.query_string:\n-                url = \"%s?%s\" % (self.url, args)\n-            else:\n-                url = self.url\n-            return url % kwargs\n+                url = \"%s?%s\" % (url, args)\n+            return url\n         else:\n             return None\n "
        },
        {
            "sha": "6528dc6723ff7899c33e57524afa394937445c35",
            "filename": "tests/regressiontests/generic_views/base.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/4887a8de170ad9227d79f39f5bd3d2564f4e7ef8/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/4887a8de170ad9227d79f39f5bd3d2564f4e7ef8/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py?ref=4887a8de170ad9227d79f39f5bd3d2564f4e7ef8",
            "patch": "@@ -283,6 +283,13 @@ def test_include_args(self):\n         self.assertEqual(response.status_code, 301)\n         self.assertEqual(response['Location'], '/bar/?pork=spam')\n \n+    def test_include_urlencoded_args(self):\n+        \"GET arguments can be URL-encoded when included in the redirected URL\"\n+        response = RedirectView.as_view(url='/bar/', query_string=True)(\n+            self.rf.get('/foo/?unicode=%E2%9C%93'))\n+        self.assertEqual(response.status_code, 301)\n+        self.assertEqual(response['Location'], '/bar/?unicode=%E2%9C%93')\n+\n     def test_parameter_substitution(self):\n         \"Redirection URLs can be parameterized\"\n         response = RedirectView.as_view(url='/bar/%(object_id)d/')(self.rf.get('/foo/42/'), object_id=42)"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 10,
        "deletions": 4
    }
}