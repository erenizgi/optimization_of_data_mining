{
    "author": "aaugustin",
    "message": "Fixed #17303 -- Ensured the list of template loaders is fully loaded before it is cached. Thanks andrey DOT gtx AT gmail DOT com for the report and patch, and Anssi Kääriäinen for the review.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17295 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "fa226cd740f1349383d5e8399dc8a5255b70f07a",
    "files": [
        {
            "sha": "4c25acd5993b8a7cdcd6a2bf7d35c19ec78ed075",
            "filename": "django/template/loaders/cached.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/fa226cd740f1349383d5e8399dc8a5255b70f07a/django%2Ftemplate%2Floaders%2Fcached.py",
            "raw_url": "https://github.com/django/django/raw/fa226cd740f1349383d5e8399dc8a5255b70f07a/django%2Ftemplate%2Floaders%2Fcached.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Floaders%2Fcached.py?ref=fa226cd740f1349383d5e8399dc8a5255b70f07a",
            "patch": "@@ -19,8 +19,12 @@ def __init__(self, loaders):\n     def loaders(self):\n         # Resolve loaders on demand to avoid circular imports\n         if not self._cached_loaders:\n+            # Set self._cached_loaders atomically. Otherwise, another thread\n+            # could see an incomplete list. See #17303.\n+            cached_loaders = []\n             for loader in self._loaders:\n-                self._cached_loaders.append(find_template_loader(loader))\n+                cached_loaders.append(find_template_loader(loader))\n+            self._cached_loaders = cached_loaders\n         return self._cached_loaders\n \n     def find_template(self, name, dirs=None):"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}