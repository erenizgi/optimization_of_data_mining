{
    "author": "unknown",
    "message": "Fixed #11706: Added an Oracle connection option to disable the use of RETURNING INTO in INSERT statements.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14765 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "1f68dc4ad4ddc67831c6aa047683a5b53fa33a37",
    "files": [
        {
            "sha": "d0ed6df3e2e770106f0e704df4fc1b911b4832a5",
            "filename": "django/db/backends/oracle/base.py",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/1f68dc4ad4ddc67831c6aa047683a5b53fa33a37/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/1f68dc4ad4ddc67831c6aa047683a5b53fa33a37/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fbase.py?ref=1f68dc4ad4ddc67831c6aa047683a5b53fa33a37",
            "patch": "@@ -351,6 +351,8 @@ def __init__(self, *args, **kwargs):\n \n         self.oracle_version = None\n         self.features = DatabaseFeatures(self)\n+        use_returning_into = self.settings_dict[\"OPTIONS\"].get('use_returning_into', True)\n+        self.features.can_return_id_from_insert = use_returning_into\n         self.ops = DatabaseOperations()\n         self.client = DatabaseClient(self)\n         self.creation = DatabaseCreation(self)\n@@ -377,7 +379,10 @@ def _cursor(self):\n         cursor = None\n         if not self._valid_connection():\n             conn_string = convert_unicode(self._connect_string())\n-            self.connection = Database.connect(conn_string, **self.settings_dict['OPTIONS'])\n+            conn_params = self.settings_dict['OPTIONS'].copy()\n+            if 'use_returning_into' in conn_params:\n+                del conn_params['use_returning_into']\n+            self.connection = Database.connect(conn_string, **conn_params)\n             cursor = FormatStylePlaceholderCursor(self.connection)\n             # Set oracle date to ansi date format.  This only needs to execute\n             # once when we create a new connection. We also set the Territory"
        },
        {
            "sha": "1406b7447ed856ae392112b5c26d0dc1973dd065",
            "filename": "docs/ref/databases.txt",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/1f68dc4ad4ddc67831c6aa047683a5b53fa33a37/docs%2Fref%2Fdatabases.txt",
            "raw_url": "https://github.com/django/django/raw/1f68dc4ad4ddc67831c6aa047683a5b53fa33a37/docs%2Fref%2Fdatabases.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdatabases.txt?ref=1f68dc4ad4ddc67831c6aa047683a5b53fa33a37",
            "patch": "@@ -585,6 +585,23 @@ your Oracle database configuration to True::\n \n Failure to do this may result in crashes and other odd behavior.\n \n+INSERT ... RETURNING INTO\n+-------------------------\n+\n+By default, the Oracle backend uses a ``RETURNING INTO`` clause to efficiently\n+retrieve the value of an ``AutoField`` when inserting new rows.  This behavior\n+may result in a ``DatabaseError`` in certain unusual setups, such as when\n+inserting into a remote table, or into a view with an ``INSTEAD OF`` trigger.\n+The ``RETURNING INTO`` clause can be disabled by setting the\n+``use_returning_into`` option of the database configuration to False::\n+\n+            'OPTIONS': {\n+                'use_returning_into': False,\n+            },\n+\n+In this case, the Oracle backend will use a separate ``SELECT`` query to\n+retrieve AutoField values.\n+\n Tablespace options\n ------------------\n "
        }
    ],
    "stats": {
        "total": 24,
        "additions": 23,
        "deletions": 1
    }
}