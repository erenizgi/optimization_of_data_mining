{
    "author": "jezdez",
    "message": "Modified the staticfiles serve view to return a 404 early in the stack.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15539 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "4bb2db0caec69bfa5903fbc81d2635cc17922c46",
    "files": [
        {
            "sha": "5df1a3ecedfbae4dd2ed2c1196e145044a0afe54",
            "filename": "django/contrib/staticfiles/views.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/4bb2db0caec69bfa5903fbc81d2635cc17922c46/django%2Fcontrib%2Fstaticfiles%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/4bb2db0caec69bfa5903fbc81d2635cc17922c46/django%2Fcontrib%2Fstaticfiles%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fviews.py?ref=4bb2db0caec69bfa5903fbc81d2635cc17922c46",
            "patch": "@@ -25,14 +25,15 @@ def serve(request, path, document_root=None, insecure=False, **kwargs):\n \n     in your URLconf.\n \n-    It automatically falls back to django.views.static\n+    It uses the django.views.static view to serve the found files.\n     \"\"\"\n     if not settings.DEBUG and not insecure:\n         raise ImproperlyConfigured(\"The staticfiles view can only be used in \"\n                                    \"debug mode or if the the --insecure \"\n                                    \"option of 'runserver' is used\")\n     normalized_path = posixpath.normpath(urllib.unquote(path)).lstrip('/')\n     absolute_path = finders.find(normalized_path)\n-    if absolute_path:\n-        document_root, path = os.path.split(absolute_path)\n+    if not absolute_path:\n+        raise Http404(\"'%s' could not be found\" % path)\n+    document_root, path = os.path.split(absolute_path)\n     return static.serve(request, path, document_root=document_root, **kwargs)"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}