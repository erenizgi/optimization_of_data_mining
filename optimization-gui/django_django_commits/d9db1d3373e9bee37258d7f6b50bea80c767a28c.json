{
    "author": "claudep",
    "message": "Added supplementary check for CUIT number of ar localflavor\n\nThanks Kevin Schaul for the initial patch.",
    "sha": "d9db1d3373e9bee37258d7f6b50bea80c767a28c",
    "files": [
        {
            "sha": "dc4235f9dd3a62dfac84994d2a8ccb68291de369",
            "filename": "django/contrib/localflavor/ar/forms.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/d9db1d3373e9bee37258d7f6b50bea80c767a28c/django%2Fcontrib%2Flocalflavor%2Far%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/d9db1d3373e9bee37258d7f6b50bea80c767a28c/django%2Fcontrib%2Flocalflavor%2Far%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Far%2Fforms.py?ref=d9db1d3373e9bee37258d7f6b50bea80c767a28c",
            "patch": "@@ -81,6 +81,7 @@ class ARCUITField(RegexField):\n     default_error_messages = {\n         'invalid': _('Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.'),\n         'checksum': _(\"Invalid CUIT.\"),\n+        'legal_type': _('Invalid legal type. Type must be 27, 20, 23 or 30.'),\n     }\n \n     def __init__(self, max_length=None, min_length=None, *args, **kwargs):\n@@ -96,6 +97,8 @@ def clean(self, value):\n         if value in EMPTY_VALUES:\n             return ''\n         value, cd = self._canon(value)\n+        if not value[:2] in ['27', '20', '23', '30']:\n+            raise ValidationError(self.error_messages['legal_type'])\n         if self._calc_cd(value) != cd:\n             raise ValidationError(self.error_messages['checksum'])\n         return self._format(value, cd)"
        },
        {
            "sha": "82c2bd491a599bb981e7e281b55e0d5236e83ab2",
            "filename": "tests/regressiontests/localflavor/ar/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/d9db1d3373e9bee37258d7f6b50bea80c767a28c/tests%2Fregressiontests%2Flocalflavor%2Far%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d9db1d3373e9bee37258d7f6b50bea80c767a28c/tests%2Fregressiontests%2Flocalflavor%2Far%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Far%2Ftests.py?ref=d9db1d3373e9bee37258d7f6b50bea80c767a28c",
            "patch": "@@ -81,6 +81,7 @@ def test_ARDNIField(self):\n     def test_ARCUITField(self):\n         error_format = ['Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n         error_invalid = ['Invalid CUIT.']\n+        error_legal_type = [u'Invalid legal type. Type must be 27, 20, 23 or 30.']\n         valid = {\n             '20-10123456-9': '20-10123456-9',\n             '20-10123456-9': '20-10123456-9',\n@@ -94,8 +95,9 @@ def test_ARCUITField(self):\n             '210123456-9': error_format,\n             '20-10123456': error_format,\n             '20-10123456-': error_format,\n-             '20-10123456-5': error_invalid,\n-             '27-10345678-1': error_invalid,\n-             '27-10345678-1': error_invalid,\n+            '20-10123456-5': error_invalid,\n+            '27-10345678-1': error_invalid,\n+            '27-10345678-1': error_invalid,\n+            '11211111110': error_legal_type,\n         }\n         self.assertFieldOutput(ARCUITField, valid, invalid)"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 8,
        "deletions": 3
    }
}