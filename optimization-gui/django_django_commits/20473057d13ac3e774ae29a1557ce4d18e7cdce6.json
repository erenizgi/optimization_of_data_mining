{
    "author": "malcolmt",
    "message": "Modify validity check from r16678 slightly to work with Oracle.\n\nWe now skip this particular check on Oracle backends. Change is based on\na backend feature check, so it also works with other backends that may\ntreat NULL as equal to an empty string.\n\nFixes #16694 (with luck).\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16681 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "20473057d13ac3e774ae29a1557ce4d18e7cdce6",
    "files": [
        {
            "sha": "3cb2e345e8a2a19beafc5ab06cc9ed09fc968c67",
            "filename": "django/core/management/validation.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/20473057d13ac3e774ae29a1557ce4d18e7cdce6/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "raw_url": "https://github.com/django/django/raw/20473057d13ac3e774ae29a1557ce4d18e7cdce6/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fvalidation.py?ref=20473057d13ac3e774ae29a1557ce4d18e7cdce6",
            "patch": "@@ -39,7 +39,11 @@ def get_validation_errors(outfile, app=None):\n                 e.add(opts, '\"%s\": You can\\'t use \"id\" as a field name, because each model automatically gets an \"id\" field if none of the fields have primary_key=True. You need to either remove/rename your \"id\" field or add primary_key=True to a field.' % f.name)\n             if f.name.endswith('_'):\n                 e.add(opts, '\"%s\": Field names cannot end with underscores, because this would lead to ambiguous queryset filters.' % f.name)\n-            if f.primary_key and f.null:\n+            if (f.primary_key and f.null and\n+                    not connection.features.interprets_empty_strings_as_nulls):\n+                # We cannot reliably check this for backends like Oracle which\n+                # consider NULL and '' to be equal (and thus set up\n+                # character-based fields a little differently).\n                 e.add(opts, '\"%s\": Primary key fields cannot have null=True.' % f.name)\n             if isinstance(f, models.CharField):\n                 try:"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}