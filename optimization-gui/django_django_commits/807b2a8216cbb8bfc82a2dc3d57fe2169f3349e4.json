{
    "author": "alex",
    "message": "Fixed bulk_insertion on databases which don't yet support it. Thanks to Justin Bronn for his Oracle wizardry.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16793 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "807b2a8216cbb8bfc82a2dc3d57fe2169f3349e4",
    "files": [
        {
            "sha": "9ddcfc63f9c17e1ed1fdb1751e9653230d6c87fa",
            "filename": "django/db/models/sql/compiler.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/807b2a8216cbb8bfc82a2dc3d57fe2169f3349e4/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "raw_url": "https://github.com/django/django/raw/807b2a8216cbb8bfc82a2dc3d57fe2169f3349e4/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py?ref=807b2a8216cbb8bfc82a2dc3d57fe2169f3349e4",
            "patch": "@@ -814,7 +814,8 @@ def as_sql(self):\n             values = [[self.connection.ops.pk_default_value()] for obj in self.query.objs]\n             params = [[]]\n             fields = [None]\n-        can_bulk = not any(hasattr(field, \"get_placeholder\") for field in fields) and not self.return_id\n+        can_bulk = (not any(hasattr(field, \"get_placeholder\") for field in fields) and\n+            not self.return_id and self.connection.features.has_bulk_insert)\n \n         if can_bulk:\n             placeholders = [[\"%s\"] * len(fields)]\n@@ -831,7 +832,7 @@ def as_sql(self):\n             result.append(r_fmt % col)\n             params += r_params\n             return [(\" \".join(result), tuple(params))]\n-        if can_bulk and self.connection.features.has_bulk_insert:\n+        if can_bulk:\n             result.append(self.connection.ops.bulk_insert_sql(fields, len(values)))\n             return [(\" \".join(result), tuple([v for val in values for v in val]))]\n         else:"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 3,
        "deletions": 2
    }
}