{
    "author": "claudep",
    "message": "Fixed #19585 -- Fixed loading cookie value as a dict\n\nThis regression was introduced by the 'unicode_literals' patch.",
    "sha": "f08e739bc2ba5d3530a806378087227728369464",
    "files": [
        {
            "sha": "50ff549caf334c41e44ba77d15b1801363cfcc72",
            "filename": "django/http/cookie.py",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/f08e739bc2ba5d3530a806378087227728369464/django%2Fhttp%2Fcookie.py",
            "raw_url": "https://github.com/django/django/raw/f08e739bc2ba5d3530a806378087227728369464/django%2Fhttp%2Fcookie.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2Fcookie.py?ref=f08e739bc2ba5d3530a806378087227728369464",
            "patch": "@@ -1,6 +1,7 @@\n from __future__ import absolute_import, unicode_literals\n \n from django.utils.encoding import force_str\n+from django.utils import six\n from django.utils.six.moves import http_cookies\n \n \n@@ -48,7 +49,9 @@ def value_encode(self, val):\n         if not _cookie_allows_colon_in_names:\n             def load(self, rawdata):\n                 self.bad_cookies = set()\n-                super(SimpleCookie, self).load(force_str(rawdata))\n+                if not six.PY3 and isinstance(rawdata, six.text_type):\n+                    rawdata = force_str(rawdata)\n+                super(SimpleCookie, self).load(rawdata)\n                 for key in self.bad_cookies:\n                     del self[key]\n "
        },
        {
            "sha": "c76d8eafe3a8d3b4218f0a18026ff7344ed66e43",
            "filename": "tests/regressiontests/httpwrappers/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/f08e739bc2ba5d3530a806378087227728369464/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/f08e739bc2ba5d3530a806378087227728369464/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py?ref=f08e739bc2ba5d3530a806378087227728369464",
            "patch": "@@ -588,3 +588,7 @@ def test_httponly_after_load(self):\n         c['name']['httponly'] = True\n         self.assertTrue(c['name']['httponly'])\n \n+    def test_load_dict(self):\n+        c = SimpleCookie()\n+        c.load({'name': 'val'})\n+        self.assertEqual(c['name'].value, 'val')"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 8,
        "deletions": 1
    }
}