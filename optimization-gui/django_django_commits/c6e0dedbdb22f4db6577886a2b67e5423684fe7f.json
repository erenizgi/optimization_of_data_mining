{
    "author": "claudep",
    "message": "Fixed #19637 -- Ensured AdminEmailHandler fails silently\n\nThanks lsaffre for the report. Refs #19325.",
    "sha": "c6e0dedbdb22f4db6577886a2b67e5423684fe7f",
    "files": [
        {
            "sha": "b291b867062c4535a4013f7d1ec8646f85005361",
            "filename": "django/utils/log.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c6e0dedbdb22f4db6577886a2b67e5423684fe7f/django%2Futils%2Flog.py",
            "raw_url": "https://github.com/django/django/raw/c6e0dedbdb22f4db6577886a2b67e5423684fe7f/django%2Futils%2Flog.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Flog.py?ref=c6e0dedbdb22f4db6577886a2b67e5423684fe7f",
            "patch": "@@ -117,7 +117,7 @@ def emit(self, record):\n                          connection=self.connection())\n \n     def connection(self):\n-        return get_connection(backend=self.email_backend)\n+        return get_connection(backend=self.email_backend, fail_silently=True)\n \n     def format_subject(self, subject):\n         \"\"\""
        },
        {
            "sha": "b7d06bf36262fd10fcc2eef361c4684479991324",
            "filename": "tests/regressiontests/logging_tests/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c6e0dedbdb22f4db6577886a2b67e5423684fe7f/tests%2Fregressiontests%2Flogging_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c6e0dedbdb22f4db6577886a2b67e5423684fe7f/tests%2Fregressiontests%2Flogging_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flogging_tests%2Ftests.py?ref=c6e0dedbdb22f4db6577886a2b67e5423684fe7f",
            "patch": "@@ -154,6 +154,10 @@ def get_admin_email_handler(self, logger):\n             ][0]\n         return admin_email_handler\n \n+    def test_fail_silently(self):\n+        admin_email_handler = self.get_admin_email_handler(self.logger)\n+        self.assertTrue(admin_email_handler.connection().fail_silently)\n+\n     @override_settings(\n             ADMINS=(('whatever admin', 'admin@example.com'),),\n             EMAIL_SUBJECT_PREFIX='-SuperAwesomeSubject-'"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}