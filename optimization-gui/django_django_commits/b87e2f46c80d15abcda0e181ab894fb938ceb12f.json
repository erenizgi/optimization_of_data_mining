{
    "author": "JanBednarik",
    "message": "Fixed #19151 -- Added missing methods to EmptyQuerySet.\n\nAdded values() and values_list() methods to EmptyQuerySet.",
    "sha": "b87e2f46c80d15abcda0e181ab894fb938ceb12f",
    "files": [
        {
            "sha": "412cad026f6ecf92de597d16982a7f737d631946",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/b87e2f46c80d15abcda0e181ab894fb938ceb12f/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/b87e2f46c80d15abcda0e181ab894fb938ceb12f/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=b87e2f46c80d15abcda0e181ab894fb938ceb12f",
            "patch": "@@ -1271,6 +1271,18 @@ def aggregate(self, *args, **kwargs):\n             kwargs[arg.default_alias] = arg\n         return dict([(key, None) for key in kwargs])\n \n+    def values(self, *fields):\n+        \"\"\"\n+        Always returns EmptyQuerySet.\n+        \"\"\"\n+        return self\n+\n+    def values_list(self, *fields, **kwargs):\n+        \"\"\"\n+        Always returns EmptyQuerySet.\n+        \"\"\"\n+        return self\n+\n     # EmptyQuerySet is always an empty result in where-clauses (and similar\n     # situations).\n     value_annotation = False"
        },
        {
            "sha": "c2a4ad1caf45336b3183adce7d30c6be9539e301",
            "filename": "tests/regressiontests/queries/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/b87e2f46c80d15abcda0e181ab894fb938ceb12f/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/b87e2f46c80d15abcda0e181ab894fb938ceb12f/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fqueries%2Ftests.py?ref=b87e2f46c80d15abcda0e181ab894fb938ceb12f",
            "patch": "@@ -1698,6 +1698,13 @@ def test_values_subquery(self):\n             []\n         )\n \n+    def test_ticket_19151(self):\n+        # #19151 -- Calling .values() or .values_list() on an EmptyQuerySet\n+        # should return EmptyQuerySet and not cause an error.\n+        q = EmptyQuerySet()\n+        self.assertQuerysetEqual(q.values(), [])\n+        self.assertQuerysetEqual(q.values_list(), [])\n+\n \n class ValuesQuerysetTests(BaseQuerysetTest):\n     def test_flat_values_lits(self):"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 19,
        "deletions": 0
    }
}