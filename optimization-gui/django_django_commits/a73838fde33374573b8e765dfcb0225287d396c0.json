{
    "author": "timgraham",
    "message": "Fixed #11185 - Expanded docs on customizing widgets; thanks fadeev for the draft patch.",
    "sha": "a73838fde33374573b8e765dfcb0225287d396c0",
    "files": [
        {
            "sha": "7c06bf97eefac83ba22b6664a797a8b486d8cdf1",
            "filename": "docs/ref/forms/fields.txt",
            "status": "modified",
            "additions": 29,
            "deletions": 12,
            "changes": 41,
            "blob_url": "https://github.com/django/django/blob/a73838fde33374573b8e765dfcb0225287d396c0/docs%2Fref%2Fforms%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/a73838fde33374573b8e765dfcb0225287d396c0/docs%2Fref%2Fforms%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Ffields.txt?ref=a73838fde33374573b8e765dfcb0225287d396c0",
            "patch": "@@ -852,7 +852,7 @@ Slightly complex built-in ``Field`` classes\n ``MultiValueField``\n ~~~~~~~~~~~~~~~~~~~\n \n-.. class:: MultiValueField(**kwargs)\n+.. class:: MultiValueField(fields=(), **kwargs)\n \n     * Default widget: ``TextInput``\n     * Empty value: ``''`` (an empty string)\n@@ -861,22 +861,39 @@ Slightly complex built-in ``Field`` classes\n       as an argument to the ``MultiValueField``.\n     * Error message keys: ``required``, ``invalid``\n \n-    This abstract field (must be subclassed) aggregates the logic of multiple\n-    fields. Subclasses should not have to implement clean(). Instead, they must\n-    implement compress(), which takes a list of valid values and returns a\n-    \"compressed\" version of those values -- a single value.  For example,\n-    :class:`SplitDateTimeField` is a subclass which combines a time field and\n-    a date field into a datetime object.\n+    Aggregates the logic of multiple fields that together produce a single\n+    value.\n+\n+    This field is abstract and must be subclassed. In contrast with the\n+    single-value fields, subclasses of :class:`MultiValueField` must not\n+    implement :meth:`~django.forms.Field.clean` but instead - implement\n+    :meth:`~MultiValueField.compress`.\n \n     Takes one extra required argument:\n \n     .. attribute:: fields\n \n-        A list of fields which are cleaned into a single field. Each value in\n-        ``clean`` is cleaned by the corresponding field in ``fields`` -- the first\n-        value is cleaned by the first field, the second value is cleaned by\n-        the second field, etc.  Once all fields are cleaned, the list of clean\n-        values is \"compressed\" into a single value.\n+        A tuple of fields whose values are cleaned and subsequently combined\n+        into a single value.  Each value of the field is cleaned by the\n+        corresponding field in ``fields`` -- the first value is cleaned by the\n+        first field, the second value is cleaned by the second field, etc.\n+        Once all fields are cleaned, the list of clean values is combined into\n+        a single value by :meth:`~MultiValueField.compress`.\n+\n+    .. attribute:: MultiValueField.widget\n+\n+        Must be a subclass of :class:`django.forms.MultiWidget`.\n+        Default value is :class:`~django.forms.widgets.TextInput`, which\n+        probably is not very useful in this case.\n+\n+    .. method:: compress(data_list)\n+\n+        Takes a list of valid values and returns  a \"compressed\" version of\n+        those values -- in a single value. For example,\n+        :class:`SplitDateTimeField` is a subclass which combines a time field\n+        and a date field into a ``datetime`` object.\n+\n+        This method must be implemented in the subclasses.\n \n ``SplitDateTimeField``\n ~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "sha": "4724cbdec2e64dd92ad328d0e63762441196958e",
            "filename": "docs/ref/forms/widgets.txt",
            "status": "modified",
            "additions": 173,
            "deletions": 54,
            "changes": 227,
            "blob_url": "https://github.com/django/django/blob/a73838fde33374573b8e765dfcb0225287d396c0/docs%2Fref%2Fforms%2Fwidgets.txt",
            "raw_url": "https://github.com/django/django/raw/a73838fde33374573b8e765dfcb0225287d396c0/docs%2Fref%2Fforms%2Fwidgets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Fwidgets.txt?ref=a73838fde33374573b8e765dfcb0225287d396c0",
            "patch": "@@ -11,6 +11,16 @@ A widget is Django's representation of a HTML input element. The widget\n handles the rendering of the HTML, and the extraction of data from a GET/POST\n dictionary that corresponds to the widget.\n \n+.. tip::\n+\n+    Widgets should not be confused with the :doc:`form fields </ref/forms/fields>`.\n+    Form fields deal with the logic of input validation and are used directly\n+    in templates. Widgets deal with rendering of HTML form input elements on\n+    the web page and extraction of raw submitted data. However, widgets do\n+    need to be :ref:`assigned <widget-to-field>` to form fields.\n+\n+.. _widget-to-field:\n+\n Specifying widgets\n ------------------\n \n@@ -95,15 +105,23 @@ choices are inherent to the model and not just the representational widget.\n Customizing widget instances\n ----------------------------\n \n-When Django renders a widget as HTML, it only renders the bare minimum\n-HTML - Django doesn't add a class definition, or any other widget-specific\n-attributes. This means that all :class:`TextInput` widgets will appear the same\n-on your Web page.\n+When Django renders a widget as HTML, it only renders very minimal markup -\n+Django doesn't add class names, or any other widget-specific attributes. This\n+means, for example, that all :class:`TextInput` widgets will appear the same\n+on your Web pages.\n+\n+There are two ways to customize widgets: :ref:`per widget instance\n+<styling-widget-instances>` and :ref:`per widget class <styling-widget-classes>`.\n \n-If you want to make one widget look different to another, you need to\n-specify additional attributes for each widget. When you specify a\n-widget, you can provide a list of attributes that will be added to the\n-rendered HTML for the widget.\n+.. _styling-widget-instances:\n+\n+Styling widget instances\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+If you want to make one widget instance look different from another, you will\n+need to specify additional attributes at the time when the widget object is\n+instantiated and assigned to a form field (and perhaps add some rules to your\n+CSS files).\n \n For example, take the following simple form::\n \n@@ -128,9 +146,7 @@ On a real Web page, you probably don't want every widget to look the same. You\n might want a larger input element for the comment, and you might want the\n 'name' widget to have some special CSS class. It is also possible to specify\n the 'type' attribute to take advantage of the new HTML5 input types.  To do\n-this, you use the :attr:`Widget.attrs` argument when creating the widget:\n-\n-For example::\n+this, you use the :attr:`Widget.attrs` argument when creating the widget::\n \n     class CommentForm(forms.Form):\n         name = forms.CharField(\n@@ -147,31 +163,116 @@ Django will then include the extra attributes in the rendered output:\n     <tr><th>Url:</th><td><input type=\"text\" name=\"url\"/></td></tr>\n     <tr><th>Comment:</th><td><input type=\"text\" name=\"comment\" size=\"40\"/></td></tr>\n \n-.. _built-in widgets:\n+.. _styling-widget-classes:\n \n-Built-in widgets\n-----------------\n+Styling widget classes\n+^^^^^^^^^^^^^^^^^^^^^^\n \n-Django provides a representation of all the basic HTML widgets, plus some\n-commonly used groups of widgets:\n+With widgets, it is possible to add media (``css`` and ``javascript``)\n+and more deeply customize their appearance and behavior.\n \n-``Widget``\n-~~~~~~~~~~\n+In a nutshell, you will need to subclass the widget and either\n+:ref:`define a class \"Media\" <media-as-a-static-definition>` as a member of the\n+subclass, or :ref:`create a property \"media\" <dynamic-property>`, returning an\n+instance of that class.\n+\n+These methods involve somewhat advanced Python programming and are described in\n+detail in the :doc:`Form Media </topics/forms/media>` topic guide.\n+\n+.. _base-widget-classes:\n+\n+Base Widget classes\n+-------------------\n \n-.. class:: Widget\n+Base widget classes :class:`Widget` and :class:`MultiWidget` are subclassed by\n+all the :ref:`built-in widgets <built-in widgets>` and may serve as a\n+foundation for custom widgets.\n \n-    This abstract class cannot be rendered, but provides the basic attribute :attr:`~Widget.attrs`.\n+.. class:: Widget(attrs=None)\n+\n+    This abstract class cannot be rendered, but provides the basic attribute\n+    :attr:`~Widget.attrs`.  You may also implement or override the\n+    :meth:`~Widget.render()` method on custom widgets.\n \n     .. attribute:: Widget.attrs\n \n-        A dictionary containing HTML attributes to be set on the rendered widget.\n+        A dictionary containing HTML attributes to be set on the rendered\n+        widget.\n \n         .. code-block:: python\n \n             >>> name = forms.TextInput(attrs={'size': 10, 'title': 'Your name',})\n             >>> name.render('name', 'A name')\n             u'<input title=\"Your name\" type=\"text\" name=\"name\" value=\"A name\" size=\"10\" />'\n \n+    .. method:: render(name, value, attrs=None)\n+\n+        Returns HTML for the widget, as a Unicode string. This method must be\n+        implemented by the subclass, otherwise ``NotImplementedError`` will be\n+        raised.\n+\n+        The 'value' given is not guaranteed to be valid input, therefore\n+        subclass implementations should program defensively.\n+\n+.. class:: MultiWidget(widgets, attrs=None)\n+\n+    A widget that is composed of multiple widgets.\n+    :class:`~django.forms.widgets.MultiWidget` works hand in hand with the\n+    :class:`~django.forms.MultiValueField`.\n+\n+    .. method:: render(name, value, attrs=None)\n+\n+        Argument `value` is handled differently in this method from the\n+        subclasses of :class:`~Widget`.\n+\n+        If `value` is a list, output of :meth:`~MultiWidget.render` will be a\n+        concatenation of rendered child widgets. If `value` is not a list, it\n+        will be first processed by the method :meth:`~MultiWidget.decompress()`\n+        to create the list and then processed as above.\n+\n+        Unlike in the single value widgets, method :meth:`~MultiWidget.render`\n+        need not be implemented in the subclasses.\n+\n+    .. method:: decompress(value)\n+\n+        Returns a list of \"decompressed\" values for the given value of the\n+        multi-value field that makes use of the widget. The input value can be\n+        assumed as valid, but not necessarily non-empty.\n+\n+        This method **must be implemented** by the subclass, and since the\n+        value may be empty, the implementation must be defensive.\n+\n+        The rationale behind \"decompression\" is that it is necessary to \"split\"\n+        the combined value of the form field into the values of the individual\n+        field encapsulated within the multi-value field (e.g. when displaying\n+        the partially or fully filled-out form).\n+\n+        .. tip::\n+\n+            Note that :class:`~django.forms.MultiValueField` has a\n+            complementary method :meth:`~django.forms.MultiValueField.compress`\n+            with the opposite responsibility - to combine cleaned values of\n+            all member fields into one.\n+\n+\n+.. _built-in widgets:\n+\n+Built-in widgets\n+----------------\n+\n+Django provides a representation of all the basic HTML widgets, plus some\n+commonly used groups of widgets in the ``django.forms.widgets`` module,\n+including :ref:`the input of text <text-widgets>`, :ref:`various checkboxes\n+and selectors <selector-widgets>`, :ref:`uploading files <file-upload-widgets>`,\n+and :ref:`handling of multi-valued input <composite-widgets>`.\n+\n+.. _text-widgets:\n+\n+Widgets handling input of text\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+These widgets make use of the HTML elements ``input`` and ``textarea``.\n+\n ``TextInput``\n ~~~~~~~~~~~~~\n \n@@ -205,39 +306,8 @@ commonly used groups of widgets:\n \n     Hidden input: ``<input type='hidden' ...>``\n \n-``MultipleHiddenInput``\n-~~~~~~~~~~~~~~~~~~~~~~~\n-\n-.. class:: MultipleHiddenInput\n-\n-    Multiple ``<input type='hidden' ...>`` widgets.\n-\n-    A widget that handles multiple hidden widgets for fields that have a list\n-    of values.\n-\n-    .. attribute:: MultipleHiddenInput.choices\n-\n-        This attribute is optional when the field does not have a\n-        :attr:`~Field.choices` attribute. If it does, it will override anything\n-        you set here when the attribute is updated on the :class:`Field`.\n-\n-``FileInput``\n-~~~~~~~~~~~~~\n-\n-.. class:: FileInput\n-\n-    File upload input: ``<input type='file' ...>``\n-\n-``ClearableFileInput``\n-~~~~~~~~~~~~~~~~~~~~~~\n-\n-.. class:: ClearableFileInput\n-\n-    .. versionadded:: 1.3\n-\n-    File upload input: ``<input type='file' ...>``, with an additional checkbox\n-    input to clear the field's value, if the field is not required and has\n-    initial data.\n+    Note that there also is a :class:`MultipleHiddenInput` widget that\n+    encapsulates a set of hidden input elements.\n \n ``DateInput``\n ~~~~~~~~~~~~~\n@@ -297,6 +367,11 @@ commonly used groups of widgets:\n \n     Text area: ``<textarea>...</textarea>``\n \n+.. _selector-widgets:\n+\n+Selector and checkbox widgets\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n ``CheckboxInput``\n ~~~~~~~~~~~~~~~~~\n \n@@ -440,6 +515,50 @@ commonly used groups of widgets:\n           ...\n         </ul>\n \n+.. _file-upload-widgets:\n+\n+File upload widgets\n+^^^^^^^^^^^^^^^^^^^\n+\n+``FileInput``\n+~~~~~~~~~~~~~\n+\n+.. class:: FileInput\n+\n+    File upload input: ``<input type='file' ...>``\n+\n+``ClearableFileInput``\n+~~~~~~~~~~~~~~~~~~~~~~\n+\n+.. class:: ClearableFileInput\n+\n+    .. versionadded:: 1.3\n+\n+    File upload input: ``<input type='file' ...>``, with an additional checkbox\n+    input to clear the field's value, if the field is not required and has\n+    initial data.\n+\n+.. _composite-widgets:\n+\n+Composite widgets\n+^^^^^^^^^^^^^^^^^\n+\n+``MultipleHiddenInput``\n+~~~~~~~~~~~~~~~~~~~~~~~\n+\n+.. class:: MultipleHiddenInput\n+\n+    Multiple ``<input type='hidden' ...>`` widgets.\n+\n+    A widget that handles multiple hidden widgets for fields that have a list\n+    of values.\n+\n+    .. attribute:: MultipleHiddenInput.choices\n+\n+        This attribute is optional when the field does not have a\n+        :attr:`~Field.choices` attribute. If it does, it will override anything\n+        you set here when the attribute is updated on the :class:`Field`.\n+\n ``MultiWidget``\n ~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "29a7829799ebef7515ca57a96133a31c8266e8d4",
            "filename": "docs/topics/forms/media.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/a73838fde33374573b8e765dfcb0225287d396c0/docs%2Ftopics%2Fforms%2Fmedia.txt",
            "raw_url": "https://github.com/django/django/raw/a73838fde33374573b8e765dfcb0225287d396c0/docs%2Ftopics%2Fforms%2Fmedia.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fforms%2Fmedia.txt?ref=a73838fde33374573b8e765dfcb0225287d396c0",
            "patch": "@@ -38,6 +38,8 @@ in a form suitable for easy inclusion on your Web page.\n     whichever toolkit suits your requirements. Django is able to integrate\n     with any JavaScript toolkit.\n \n+.. _media-as-a-static-definition:\n+\n Media as a static definition\n ----------------------------\n \n@@ -78,10 +80,8 @@ A dictionary describing the CSS files required for various forms of output\n media.\n \n The values in the dictionary should be a tuple/list of file names. See\n-`the section on media paths`_ for details of how to specify paths to media\n-files.\n-\n-.. _the section on media paths: `Paths in media definitions`_\n+:ref:`the section on media paths <form-media-paths>` for details of how to\n+specify paths to media files.\n \n The keys in the dictionary are the output media types. These are the same\n types accepted by CSS files in media declarations: 'all', 'aural', 'braille',\n@@ -117,8 +117,8 @@ If this last CSS definition were to be rendered, it would become the following H\n ``js``\n ~~~~~~\n \n-A tuple describing the required JavaScript files. See\n-`the section on media paths`_ for details of how to specify paths to media\n+A tuple describing the required JavaScript files. See :ref:`the section on\n+media paths <form-media-paths>` for details of how to specify paths to media\n files.\n \n ``extend``\n@@ -164,10 +164,10 @@ declaration to the media declaration::\n     <script type=\"text/javascript\" src=\"http://static.example.com/whizbang.js\"></script>\n \n If you require even more control over media inheritance, define your media\n-using a `dynamic property`_. Dynamic properties give you complete control over\n-which media files are inherited, and which are not.\n+using a :ref:`dynamic property <dynamic-property>`. Dynamic properties give\n+you complete control over which media files are inherited, and which are not.\n \n-.. _dynamic property: `Media as a dynamic property`_\n+.. _dynamic-property:\n \n Media as a dynamic property\n ---------------------------\n@@ -198,9 +198,9 @@ Paths in media definitions\n .. versionchanged:: 1.3\n \n Paths used to specify media can be either relative or absolute. If a path\n-starts with '/', 'http://' or 'https://', it will be interpreted as an absolute\n-path, and left as-is. All other paths will be prepended with the value of\n-the appropriate prefix.\n+starts with ``/``, ``http://`` or ``https://``, it will be interpreted as an\n+absolute path, and left as-is. All other paths will be prepended with the value\n+of the appropriate prefix.\n \n As part of the introduction of the\n :doc:`staticfiles app </ref/contrib/staticfiles>` two new settings were added"
        }
    ],
    "stats": {
        "total": 292,
        "additions": 214,
        "deletions": 78
    }
}