{
    "author": "jezdez",
    "message": "Fixed #15535 -- Stopped the blocktrans template tag from raising a KeyError if an included variable can't be found in the context. Thanks, melinath.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15709 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "93cd8442fc6a1b4838ccc6609b6771d697958c05",
    "files": [
        {
            "sha": "e6b3b6132a36d183d2a47dd9742ef8544de22581",
            "filename": "django/templatetags/i18n.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/93cd8442fc6a1b4838ccc6609b6771d697958c05/django%2Ftemplatetags%2Fi18n.py",
            "raw_url": "https://github.com/django/django/raw/93cd8442fc6a1b4838ccc6609b6771d697958c05/django%2Ftemplatetags%2Fi18n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fi18n.py?ref=93cd8442fc6a1b4838ccc6609b6771d697958c05",
            "patch": "@@ -113,7 +113,7 @@ def render(self, context):\n             result = translation.ugettext(singular)\n         # Escape all isolated '%' before substituting in the context.\n         result = re.sub(u'%(?!\\()', u'%%', result)\n-        data = dict([(v, _render_value_in_context(context[v], context)) for v in vars])\n+        data = dict([(v, _render_value_in_context(context.get(v, ''), context)) for v in vars])\n         context.pop()\n         return result % data\n "
        },
        {
            "sha": "fb47b27d90ba13d12a8c30a79abaf277e518faf8",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/93cd8442fc6a1b4838ccc6609b6771d697958c05/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/93cd8442fc6a1b4838ccc6609b6771d697958c05/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=93cd8442fc6a1b4838ccc6609b6771d697958c05",
            "patch": "@@ -1245,6 +1245,9 @@ def get_template_tests(self):\n             'i18n32': ('{% load i18n %}{{ \"hu\"|language_name }} {{ \"hu\"|language_name_local }} {{ \"hu\"|language_bidi }}', {}, u'Hungarian Magyar False'),\n             'i18n33': ('{% load i18n %}{{ langcode|language_name }} {{ langcode|language_name_local }} {{ langcode|language_bidi }}', {'langcode': 'nl'}, u'Dutch Nederlands False'),\n \n+            # blocktrans handling of variables which are not in the context.\n+            'i18n34': ('{% load i18n %}{% blocktrans %}{{ missing }}{% endblocktrans %}', {}, u''),\n+\n             ### HANDLING OF TEMPLATE_STRING_IF_INVALID ###################################\n \n             'invalidstr01': ('{{ var|default:\"Foo\" }}', {}, ('Foo','INVALID')),"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}