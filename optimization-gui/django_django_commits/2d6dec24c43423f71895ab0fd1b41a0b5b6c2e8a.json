{
    "author": "ramiro",
    "message": "Fixed #16207 -- Enhanced documentation about user profile model instance creation. Thanks foxwhisper for the report, melinath for the patch and Julien for reviewing it.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16450 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "2d6dec24c43423f71895ab0fd1b41a0b5b6c2e8a",
    "files": [
        {
            "sha": "4d40458379f044946fa48e6c1975f8bf243bbd41",
            "filename": "docs/topics/auth.txt",
            "status": "modified",
            "additions": 34,
            "deletions": 10,
            "changes": 44,
            "blob_url": "https://github.com/django/django/blob/2d6dec24c43423f71895ab0fd1b41a0b5b6c2e8a/docs%2Ftopics%2Fauth.txt",
            "raw_url": "https://github.com/django/django/raw/2d6dec24c43423f71895ab0fd1b41a0b5b6c2e8a/docs%2Ftopics%2Fauth.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth.txt?ref=2d6dec24c43423f71895ab0fd1b41a0b5b6c2e8a",
            "patch": "@@ -262,9 +262,10 @@ Methods\n \n         Returns a site-specific profile for this user. Raises\n         :exc:`django.contrib.auth.models.SiteProfileNotAvailable` if the\n-        current site doesn't allow profiles. For information on how to define a\n-        site-specific user profile, see the section on `storing additional user\n-        information`_ below.\n+        current site doesn't allow profiles, or\n+        :exc:`django.core.exceptions.ObjectDoesNotExist` if the user does not\n+        have a profile. For information on how to define a site-specific user\n+        profile, see the section on `storing additional user information`_ below.\n \n .. _storing additional user information: #storing-additional-information-about-users\n \n@@ -470,7 +471,18 @@ you'd like to have available, and also add a\n :class:`~django.db.models.Field.OneToOneField` named ``user`` from your model\n to the :class:`~django.contrib.auth.models.User` model. This will ensure only\n one instance of your model can be created for each\n-:class:`~django.contrib.auth.models.User`.\n+:class:`~django.contrib.auth.models.User`. For example::\n+\n+    from django.contrib.auth.models import User\n+\n+    class UserProfile(models.Model):\n+        # This field is required.\n+        user = models.OneToOneField(User)\n+\n+        # Other fields here\n+        accepted_eula = models.BooleanField()\n+        favorite_animal = models.CharField(max_length=20, default=\"Dragons.\")\n+\n \n To indicate that this model is the user profile model for a given site, fill in\n the setting :setting:`AUTH_PROFILE_MODULE` with a string consisting of the\n@@ -496,14 +508,26 @@ instance of the user profile model associated with that\n :class:`~django.contrib.auth.models.User`.\n \n The method :class:`~django.contrib.auth.models.User.get_profile()`\n-does not create the profile, if it does not exist. You need to\n-register a handler for the signal\n-:attr:`django.db.models.signals.post_save` on the User model, and, in\n-the handler, if created=True, create the associated user profile.\n+does not create a profile if one does not exist. You need to register a handler\n+for the User model's :attr:`django.db.models.signals.post_save` signal and, in\n+the handler, if ``created`` is ``True``, create the associated user profile::\n+\n+    # in models.py\n+\n+    from django.contrib.auth.models import User\n+    from django.db.models.signals import post_save\n+\n+    # definition of UserProfile from above\n+    # ...\n+\n+    def create_user_profile(sender, instance, created, **kwargs):\n+        if created:\n+            UserProfile.objects.create(user=instance)\n \n-For more information, see `Chapter 12 of the Django book`_.\n+    post_save.connect(create_user_profile, sender=User)\n \n-.. _Chapter 12 of the Django book: http://www.djangobook.com/en/1.0/chapter12/#cn222\n+.. seealso:: :doc:`/topics/signals` for more information on Django's signal\n+    dispatcher.\n \n Authentication in Web requests\n =============================="
        }
    ],
    "stats": {
        "total": 44,
        "additions": 34,
        "deletions": 10
    }
}