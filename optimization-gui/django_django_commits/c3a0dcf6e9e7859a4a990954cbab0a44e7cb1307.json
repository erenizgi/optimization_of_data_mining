{
    "author": "malcolmt",
    "message": "Added convenience method for viewing Query SQL without params.\n\nThis is the old Query.as_sql() method revived: it's like Query.__str__,\nbut the parameters aren't substituted into the placeholders. Thus, it's\na more accurate representation of the SQL the (default) backend will\nsee. Entirely internal.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16655 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "c3a0dcf6e9e7859a4a990954cbab0a44e7cb1307",
    "files": [
        {
            "sha": "fd2e7a6d9a5d9eba339e18e5bacbf83076f0f08f",
            "filename": "django/db/models/sql/query.py",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/c3a0dcf6e9e7859a4a990954cbab0a44e7cb1307/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/c3a0dcf6e9e7859a4a990954cbab0a44e7cb1307/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fquery.py?ref=c3a0dcf6e9e7859a4a990954cbab0a44e7cb1307",
            "patch": "@@ -156,14 +156,21 @@ def __init__(self, model, where=WhereNode):\n     def __str__(self):\n         \"\"\"\n         Returns the query as a string of SQL with the parameter values\n-        substituted in.\n+        substituted in (use sql_with_params() to see the unsubstituted string).\n \n         Parameter values won't necessarily be quoted correctly, since that is\n         done by the database interface at execution time.\n         \"\"\"\n-        sql, params = self.get_compiler(DEFAULT_DB_ALIAS).as_sql()\n+        sql, params = self.sql_with_params()\n         return sql % params\n \n+    def sql_with_params(self):\n+        \"\"\"\n+        Returns the query as an SQL string and the parameters that will be\n+        subsituted into the query.\n+        \"\"\"\n+        return self.get_compiler(DEFAULT_DB_ALIAS).as_sql()\n+\n     def __deepcopy__(self, memo):\n         result = self.clone(memo=memo)\n         memo[id(self)] = result"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 9,
        "deletions": 2
    }
}