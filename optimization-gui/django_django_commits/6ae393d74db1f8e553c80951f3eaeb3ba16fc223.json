{
    "author": "jphalip",
    "message": "Fixed #15092 -- Made `{% now %}` work with single-quoted string arguments. Thanks to ninja_otoko for the report and to steveire, Aymeric Augustin and Claude Paroz for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17391 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "6ae393d74db1f8e553c80951f3eaeb3ba16fc223",
    "files": [
        {
            "sha": "fa54f457c890ff64230c42af4f6c447f33be9881",
            "filename": "django/template/defaulttags.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/6ae393d74db1f8e553c80951f3eaeb3ba16fc223/django%2Ftemplate%2Fdefaulttags.py",
            "raw_url": "https://github.com/django/django/raw/6ae393d74db1f8e553c80951f3eaeb3ba16fc223/django%2Ftemplate%2Fdefaulttags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaulttags.py?ref=6ae393d74db1f8e553c80951f3eaeb3ba16fc223",
            "patch": "@@ -1049,10 +1049,10 @@ def now(parser, token):\n \n         It is {% now \"jS F Y H:i\" %}\n     \"\"\"\n-    bits = token.contents.split('\"')\n-    if len(bits) != 3:\n+    bits = token.split_contents()\n+    if len(bits) != 2:\n         raise TemplateSyntaxError(\"'now' statement takes one argument\")\n-    format_string = bits[1]\n+    format_string = bits[1][1:-1]\n     return NowNode(format_string)\n \n @register.tag"
        },
        {
            "sha": "b067cb55b0f31b6d28591aebd0c22abba2ee9cfe",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 11,
            "deletions": 7,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/6ae393d74db1f8e553c80951f3eaeb3ba16fc223/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/6ae393d74db1f8e553c80951f3eaeb3ba16fc223/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=6ae393d74db1f8e553c80951f3eaeb3ba16fc223",
            "patch": "@@ -1462,14 +1462,18 @@ def get_template_tests(self):\n \n             ### NOW TAG ########################################################\n             # Simple case\n-            'now01': ('{% now \"j n Y\"%}', {}, str(datetime.now().day) + ' ' + str(datetime.now().month) + ' ' + str(datetime.now().year)),\n-\n-            # Check parsing of escaped and special characters\n-            'now02': ('{% now \"j \"n\" Y\"%}', {}, template.TemplateSyntaxError),\n-        #    'now03': ('{% now \"j \\\"n\\\" Y\"%}', {}, str(datetime.now().day) + '\"' + str(datetime.now().month) + '\"' + str(datetime.now().year)),\n-        #    'now04': ('{% now \"j \\nn\\n Y\"%}', {}, str(datetime.now().day) + '\\n' + str(datetime.now().month) + '\\n' + str(datetime.now().year))\n+            'now01': ('{% now \"j n Y\" %}', {}, \"%d %d %d\" % (\n+                datetime.now().day, datetime.now().month, datetime.now().year)),\n             # Check parsing of locale strings\n-            'now05': ('{% now \"DATE_FORMAT\" %}', {},  date_format(datetime.now())),\n+            'now02': ('{% now \"DATE_FORMAT\" %}', {},  date_format(datetime.now())),\n+            # Also accept simple quotes - #15092\n+            'now03': (\"{% now 'j n Y' %}\", {}, \"%d %d %d\" % (\n+                datetime.now().day, datetime.now().month, datetime.now().year)),\n+            'now04': (\"{% now 'DATE_FORMAT' %}\", {},  date_format(datetime.now())),\n+            'now05': ('''{% now 'j \"n\" Y'%}''', {}, '''%d \"%d\" %d''' % (\n+                datetime.now().day, datetime.now().month, datetime.now().year)),\n+            'now06': ('''{% now \"j 'n' Y\"%}''', {}, '''%d '%d' %d''' % (\n+                datetime.now().day, datetime.now().month, datetime.now().year)),\n \n             ### URL TAG ########################################################\n             # Successes"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 14,
        "deletions": 10
    }
}