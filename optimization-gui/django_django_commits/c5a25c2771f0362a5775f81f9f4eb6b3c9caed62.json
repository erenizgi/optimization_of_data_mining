{
    "author": "claudep",
    "message": "Add introspection support for BinaryField",
    "sha": "c5a25c2771f0362a5775f81f9f4eb6b3c9caed62",
    "files": [
        {
            "sha": "ff56dca5c249f2f17b67f17a473a2ac7b0bbf7e7",
            "filename": "django/db/backends/oracle/introspection.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/django%2Fdb%2Fbackends%2Foracle%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/django%2Fdb%2Fbackends%2Foracle%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fintrospection.py?ref=c5a25c2771f0362a5775f81f9f4eb6b3c9caed62",
            "patch": "@@ -7,6 +7,7 @@\n class DatabaseIntrospection(BaseDatabaseIntrospection):\n     # Maps type objects to Django Field types.\n     data_types_reverse = {\n+        cx_Oracle.BLOB: 'BinaryField',\n         cx_Oracle.CLOB: 'TextField',\n         cx_Oracle.DATETIME: 'DateField',\n         cx_Oracle.FIXED_CHAR: 'CharField',"
        },
        {
            "sha": "5161b15f92033fc7784f43c7bb48528fd0b2d6c3",
            "filename": "django/db/backends/postgresql_psycopg2/introspection.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py?ref=c5a25c2771f0362a5775f81f9f4eb6b3c9caed62",
            "patch": "@@ -7,6 +7,7 @@ class DatabaseIntrospection(BaseDatabaseIntrospection):\n     # Maps type codes to Django Field types.\n     data_types_reverse = {\n         16: 'BooleanField',\n+        17: 'BinaryField',\n         20: 'BigIntegerField',\n         21: 'SmallIntegerField',\n         23: 'IntegerField',"
        },
        {
            "sha": "431e112e568c3bc8761f508d7b6952dae9d902cc",
            "filename": "django/db/backends/sqlite3/introspection.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/django%2Fdb%2Fbackends%2Fsqlite3%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/django%2Fdb%2Fbackends%2Fsqlite3%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fsqlite3%2Fintrospection.py?ref=c5a25c2771f0362a5775f81f9f4eb6b3c9caed62",
            "patch": "@@ -30,6 +30,7 @@ class FlexibleFieldLookupDict(object):\n         'real': 'FloatField',\n         'text': 'TextField',\n         'char': 'CharField',\n+        'blob': 'BinaryField',\n         'date': 'DateField',\n         'datetime': 'DateTimeField',\n         'time': 'TimeField',"
        },
        {
            "sha": "00c5ebea3c6c5b5e4357d9413f3ec80aa1136716",
            "filename": "tests/introspection/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/tests%2Fintrospection%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/tests%2Fintrospection%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fintrospection%2Fmodels.py?ref=c5a25c2771f0362a5775f81f9f4eb6b3c9caed62",
            "patch": "@@ -10,6 +10,7 @@ class Reporter(models.Model):\n     last_name = models.CharField(max_length=30)\n     email = models.EmailField()\n     facebook_user_id = models.BigIntegerField(null=True)\n+    raw_data = models.BinaryField(null=True)\n \n     class Meta:\n         unique_together = ('first_name', 'last_name')"
        },
        {
            "sha": "67e0266a6682d478e0e047d1a9d627c9919daa5a",
            "filename": "tests/introspection/tests.py",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/tests%2Fintrospection%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c5a25c2771f0362a5775f81f9f4eb6b3c9caed62/tests%2Fintrospection%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fintrospection%2Ftests.py?ref=c5a25c2771f0362a5775f81f9f4eb6b3c9caed62",
            "patch": "@@ -60,9 +60,13 @@ def test_get_table_description_names(self):\n     def test_get_table_description_types(self):\n         cursor = connection.cursor()\n         desc = connection.introspection.get_table_description(cursor, Reporter._meta.db_table)\n+        # The MySQL exception is due to the cursor.description returning the same constant for\n+        # text and blob columns. TODO: use information_schema database to retrieve the proper\n+        # field type on MySQL\n         self.assertEqual(\n             [datatype(r[1], r) for r in desc],\n-            ['IntegerField', 'CharField', 'CharField', 'CharField', 'BigIntegerField']\n+            ['IntegerField', 'CharField', 'CharField', 'CharField',\n+             'BigIntegerField', 'BinaryField' if connection.vendor != 'mysql' else 'TextField']\n         )\n \n     # The following test fails on Oracle due to #17202 (can't correctly\n@@ -85,7 +89,7 @@ def test_get_table_description_nullable(self):\n         desc = connection.introspection.get_table_description(cursor, Reporter._meta.db_table)\n         self.assertEqual(\n             [r[6] for r in desc],\n-            [False, False, False, False, True]\n+            [False, False, False, False, True, True]\n         )\n \n     # Regression test for #9991 - 'real' types in postgres"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 10,
        "deletions": 2
    }
}