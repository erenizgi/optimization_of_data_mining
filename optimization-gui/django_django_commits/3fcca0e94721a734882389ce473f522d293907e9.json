{
    "author": "akaariai",
    "message": "Added a way to check if a signal has listeners",
    "sha": "3fcca0e94721a734882389ce473f522d293907e9",
    "files": [
        {
            "sha": "8d26e58bf4d63489b9da506a90a8cea8d5530980",
            "filename": "django/dispatch/dispatcher.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/3fcca0e94721a734882389ce473f522d293907e9/django%2Fdispatch%2Fdispatcher.py",
            "raw_url": "https://github.com/django/django/raw/3fcca0e94721a734882389ce473f522d293907e9/django%2Fdispatch%2Fdispatcher.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdispatch%2Fdispatcher.py?ref=3fcca0e94721a734882389ce473f522d293907e9",
            "patch": "@@ -141,6 +141,9 @@ def disconnect(self, receiver=None, sender=None, weak=True, dispatch_uid=None):\n                     del self.receivers[index]\n                     break\n \n+    def has_listeners(self, sender=None):\n+        return bool(self._live_receivers(_make_id(sender)))\n+\n     def send(self, sender, **named):\n         \"\"\"\n         Send signal from sender to all connected receivers."
        },
        {
            "sha": "4e4669d34cbe6cdbf4a0eb58ad064126de43c67c",
            "filename": "tests/regressiontests/dispatch/tests/test_dispatcher.py",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/3fcca0e94721a734882389ce473f522d293907e9/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py",
            "raw_url": "https://github.com/django/django/raw/3fcca0e94721a734882389ce473f522d293907e9/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py?ref=3fcca0e94721a734882389ce473f522d293907e9",
            "patch": "@@ -126,6 +126,17 @@ def testDisconnection(self):\n         a_signal.disconnect(receiver_3)\n         self._testIsClean(a_signal)\n \n+    def test_has_listeners(self):\n+        self.assertIs(a_signal.has_listeners(), False)\n+        self.assertIs(a_signal.has_listeners(sender=object()), False)\n+        receiver_1 = Callable()\n+        a_signal.connect(receiver_1)\n+        self.assertIs(a_signal.has_listeners(), True)\n+        self.assertIs(a_signal.has_listeners(sender=object()), True)\n+        a_signal.disconnect(receiver_1)\n+        self.assertIs(a_signal.has_listeners(), False)\n+        self.assertIs(a_signal.has_listeners(sender=object()), False)\n+\n \n class ReceiverTestCase(unittest.TestCase):\n     \"\"\""
        }
    ],
    "stats": {
        "total": 14,
        "additions": 14,
        "deletions": 0
    }
}