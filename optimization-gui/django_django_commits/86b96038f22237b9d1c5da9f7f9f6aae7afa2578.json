{
    "author": "aaugustin",
    "message": "Merge pull request #847 from fhahn/ticket_18176\n\nFixed #18176 -- Added test for year lookups with year < 1000",
    "sha": "86b96038f22237b9d1c5da9f7f9f6aae7afa2578",
    "files": [
        {
            "sha": "e2d30f0eccddaed324bdfe49ef09e69cb10c2b37",
            "filename": "tests/regressiontests/model_regress/tests.py",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/86b96038f22237b9d1c5da9f7f9f6aae7afa2578/tests%2Fregressiontests%2Fmodel_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/86b96038f22237b9d1c5da9f7f9f6aae7afa2578/tests%2Fregressiontests%2Fmodel_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_regress%2Ftests.py?ref=86b96038f22237b9d1c5da9f7f9f6aae7afa2578",
            "patch": "@@ -57,6 +57,7 @@ def test_date_lookup(self):\n         Party.objects.create(when=datetime.datetime(1999, 12, 31))\n         Party.objects.create(when=datetime.datetime(1998, 12, 31))\n         Party.objects.create(when=datetime.datetime(1999, 1, 1))\n+        Party.objects.create(when=datetime.datetime(1, 3, 3))\n         self.assertQuerysetEqual(\n             Party.objects.filter(when__month=2), []\n         )\n@@ -104,6 +105,20 @@ def test_date_lookup(self):\n             attrgetter(\"when\")\n         )\n \n+        # Regression test for #18969\n+        self.assertQuerysetEqual(\n+                Party.objects.filter(when__year=1), [\n+                        datetime.date(1, 3, 3),\n+                    ],\n+                attrgetter(\"when\")\n+        )\n+        self.assertQuerysetEqual(\n+                Party.objects.filter(when__year='1'), [\n+                        datetime.date(1, 3, 3),\n+                    ],\n+                attrgetter(\"when\")\n+       )\n+\n     def test_date_filter_null(self):\n         # Date filtering was failing with NULL date values in SQLite\n         # (regression test for #3501, amongst other things)."
        }
    ],
    "stats": {
        "total": 15,
        "additions": 15,
        "deletions": 0
    }
}