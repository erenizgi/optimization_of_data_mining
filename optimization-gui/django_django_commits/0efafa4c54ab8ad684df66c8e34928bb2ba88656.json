{
    "author": "aaugustin",
    "message": "Fixed #18447 -- Made LazyObject unwrap on dict access.\n\nThanks Roman Gladkov and Zbigniew Siciarz.",
    "sha": "0efafa4c54ab8ad684df66c8e34928bb2ba88656",
    "files": [
        {
            "sha": "f19a46aa3aa7a43ad3719801c1b862d95ec8a825",
            "filename": "django/utils/functional.py",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/0efafa4c54ab8ad684df66c8e34928bb2ba88656/django%2Futils%2Ffunctional.py",
            "raw_url": "https://github.com/django/django/raw/0efafa4c54ab8ad684df66c8e34928bb2ba88656/django%2Futils%2Ffunctional.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ffunctional.py?ref=0efafa4c54ab8ad684df66c8e34928bb2ba88656",
            "patch": "@@ -249,9 +249,22 @@ def _setup(self):\n         \"\"\"\n         raise NotImplementedError\n \n-    # introspection support:\n+    # Introspection support\n     __dir__ = new_method_proxy(dir)\n \n+    # Dictionary methods support\n+    @new_method_proxy\n+    def __getitem__(self, key):\n+        return self[key]\n+\n+    @new_method_proxy\n+    def __setitem__(self, key, value):\n+        self[key] = value\n+\n+    @new_method_proxy\n+    def __delitem__(self, key):\n+        del self[key]\n+\n \n # Workaround for http://bugs.python.org/issue12370\n _super = super"
        },
        {
            "sha": "3bd6bf1e7f4ad193f1ceb881451afe100e7ea39d",
            "filename": "tests/utils_tests/simplelazyobject.py",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/0efafa4c54ab8ad684df66c8e34928bb2ba88656/tests%2Futils_tests%2Fsimplelazyobject.py",
            "raw_url": "https://github.com/django/django/raw/0efafa4c54ab8ad684df66c8e34928bb2ba88656/tests%2Futils_tests%2Fsimplelazyobject.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Futils_tests%2Fsimplelazyobject.py?ref=0efafa4c54ab8ad684df66c8e34928bb2ba88656",
            "patch": "@@ -128,3 +128,13 @@ def test_pickle_complex(self):\n         self.assertEqual(unpickled, x)\n         self.assertEqual(six.text_type(unpickled), six.text_type(x))\n         self.assertEqual(unpickled.name, x.name)\n+\n+    def test_dict(self):\n+        # See ticket #18447\n+        lazydict = SimpleLazyObject(lambda: {'one': 1})\n+        self.assertEqual(lazydict['one'], 1)\n+        lazydict['one'] = -1\n+        self.assertEqual(lazydict['one'], -1)\n+        del lazydict['one']\n+        with self.assertRaises(KeyError):\n+            lazydict['one']"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 24,
        "deletions": 1
    }
}