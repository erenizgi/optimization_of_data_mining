{
    "author": "andrewgodwin",
    "message": "Fixed #15613: Don't send content-length headers for non-regular files. Thanks to jaylett.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16014 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "4d3ab063b1b36bd4fb9a75d26b6c883d632aef0e",
    "files": [
        {
            "sha": "0caef8c9d32eeab926a6316936a61f72a0d48f65",
            "filename": "django/views/static.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/4d3ab063b1b36bd4fb9a75d26b6c883d632aef0e/django%2Fviews%2Fstatic.py",
            "raw_url": "https://github.com/django/django/raw/4d3ab063b1b36bd4fb9a75d26b6c883d632aef0e/django%2Fviews%2Fstatic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fstatic.py?ref=4d3ab063b1b36bd4fb9a75d26b6c883d632aef0e",
            "patch": "@@ -5,6 +5,7 @@\n \n import mimetypes\n import os\n+import stat\n import posixpath\n import re\n import urllib\n@@ -58,7 +59,8 @@ def serve(request, path, document_root=None, show_indexes=False):\n         return HttpResponseNotModified(mimetype=mimetype)\n     response = HttpResponse(open(fullpath, 'rb').read(), mimetype=mimetype)\n     response[\"Last-Modified\"] = http_date(statobj.st_mtime)\n-    response[\"Content-Length\"] = statobj.st_size\n+    if stat.S_ISREG(statobj.st_mode):\n+        response[\"Content-Length\"] = statobj.st_size\n     if encoding:\n         response[\"Content-Encoding\"] = encoding\n     return response"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}