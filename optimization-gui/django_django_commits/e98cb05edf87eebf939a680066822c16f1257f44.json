{
    "author": "aaugustin",
    "message": "[py3] Fixed the str tests.\n\nThese tests don't look very meaningful. They were ported from\ndoctests...",
    "sha": "e98cb05edf87eebf939a680066822c16f1257f44",
    "files": [
        {
            "sha": "2c11ac8c789493a0632d1fd0f867195fbef2fada",
            "filename": "tests/modeltests/str/tests.py",
            "status": "modified",
            "additions": 13,
            "deletions": 4,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/e98cb05edf87eebf939a680066822c16f1257f44/tests%2Fmodeltests%2Fstr%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e98cb05edf87eebf939a680066822c16f1257f44/tests%2Fmodeltests%2Fstr%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fstr%2Ftests.py?ref=e98cb05edf87eebf939a680066822c16f1257f44",
            "patch": "@@ -4,23 +4,32 @@\n import datetime\n \n from django.test import TestCase\n+from django.utils import six\n+from django.utils.unittest import skipIf\n \n from .models import Article, InternationalArticle\n \n \n class SimpleTests(TestCase):\n+\n+    @skipIf(six.PY3, \"tests a __str__ method returning unicode under Python 2\")\n     def test_basic(self):\n         a = Article.objects.create(\n             headline=b'Area man programs in Python',\n             pub_date=datetime.datetime(2005, 7, 28)\n         )\n-        self.assertEqual(str(a), b'Area man programs in Python')\n-        self.assertEqual(repr(a), b'<Article: Area man programs in Python>')\n+        self.assertEqual(str(a), str('Area man programs in Python'))\n+        self.assertEqual(repr(a), str('<Article: Area man programs in Python>'))\n \n     def test_international(self):\n         a = InternationalArticle.objects.create(\n             headline='Girl wins €12.500 in lottery',\n             pub_date=datetime.datetime(2005, 7, 28)\n         )\n-        # The default str() output will be the UTF-8 encoded output of __unicode__().\n-        self.assertEqual(str(a), b'Girl wins \\xe2\\x82\\xac12.500 in lottery')\n+        if six.PY3:\n+            self.assertEqual(str(a), 'Girl wins €12.500 in lottery')\n+        else:\n+            # On Python 2, the default str() output will be the UTF-8 encoded\n+            # output of __unicode__() -- or __str__() when the\n+            # python_2_unicode_compatible decorator is used.\n+            self.assertEqual(str(a), b'Girl wins \\xe2\\x82\\xac12.500 in lottery')"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 13,
        "deletions": 4
    }
}