{
    "author": "claudep",
    "message": "Return namedtuple from get_table_description\n\nWe don't make use of it currently to not break third-party db\nbackends.",
    "sha": "223fc8eaf9d04eb2c277a30f4f46745d4403b69b",
    "files": [
        {
            "sha": "78dbbc670bdd8460e539a3a8f11c389ac837954f",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=223fc8eaf9d04eb2c277a30f4f46745d4403b69b",
            "patch": "@@ -4,6 +4,7 @@\n     from django.utils.six.moves import _thread as thread\n except ImportError:\n     from django.utils.six.moves import _dummy_thread as thread\n+from collections import namedtuple\n from contextlib import contextmanager\n \n from django.conf import settings\n@@ -918,6 +919,12 @@ def modify_insert_params(self, placeholders, params):\n         \"\"\"\n         return params\n \n+\n+# Structure returned by the DB-API cursor.description interface (PEP 249)\n+FieldInfo = namedtuple('FieldInfo',\n+    'name type_code display_size internal_size precision scale null_ok'\n+)\n+\n class BaseDatabaseIntrospection(object):\n     \"\"\"\n     This class encapsulates all backend-specific introspection utilities"
        },
        {
            "sha": "52e97baedb8da3fccfa69202318d8edf4395388c",
            "filename": "django/db/backends/mysql/introspection.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py?ref=223fc8eaf9d04eb2c277a30f4f46745d4403b69b",
            "patch": "@@ -1,7 +1,7 @@\n import re\n from .base import FIELD_TYPE\n \n-from django.db.backends import BaseDatabaseIntrospection\n+from django.db.backends import BaseDatabaseIntrospection, FieldInfo\n \n \n foreign_key_re = re.compile(r\"\\sCONSTRAINT `[^`]*` FOREIGN KEY \\(`([^`]*)`\\) REFERENCES `([^`]*)` \\(`([^`]*)`\\)\")\n@@ -47,7 +47,7 @@ def get_table_description(self, cursor, table_name):\n         length_map = dict(cursor.fetchall())\n \n         cursor.execute(\"SELECT * FROM %s LIMIT 1\" % self.connection.ops.quote_name(table_name))\n-        return [line[:3] + (length_map.get(line[0], line[3]),) + line[4:]\n+        return [FieldInfo(*(line[:3] + (length_map.get(line[0], line[3]),) + line[4:]))\n             for line in cursor.description]\n \n     def _name_to_index(self, cursor, table_name):"
        },
        {
            "sha": "2a68b999bc342b0286ab0a90ff41685401330175",
            "filename": "django/db/backends/oracle/introspection.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2Foracle%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2Foracle%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fintrospection.py?ref=223fc8eaf9d04eb2c277a30f4f46745d4403b69b",
            "patch": "@@ -1,4 +1,4 @@\n-from django.db.backends import BaseDatabaseIntrospection\n+from django.db.backends import BaseDatabaseIntrospection, FieldInfo\n import cx_Oracle\n import re\n \n@@ -47,7 +47,7 @@ def get_table_description(self, cursor, table_name):\n         cursor.execute(\"SELECT * FROM %s WHERE ROWNUM < 2\" % self.connection.ops.quote_name(table_name))\n         description = []\n         for desc in cursor.description:\n-            description.append((desc[0].lower(),) + desc[1:])\n+            description.append(FieldInfo(*((desc[0].lower(),) + desc[1:])))\n         return description\n \n     def table_name_converter(self, name):"
        },
        {
            "sha": "440fa44c4e2dd6325adf7053b9df4b9666d38d9e",
            "filename": "django/db/backends/postgresql_psycopg2/introspection.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py?ref=223fc8eaf9d04eb2c277a30f4f46745d4403b69b",
            "patch": "@@ -1,6 +1,6 @@\n from __future__ import unicode_literals\n \n-from django.db.backends import BaseDatabaseIntrospection\n+from django.db.backends import BaseDatabaseIntrospection, FieldInfo\n \n \n class DatabaseIntrospection(BaseDatabaseIntrospection):\n@@ -45,7 +45,7 @@ def get_table_description(self, cursor, table_name):\n             WHERE table_name = %s\"\"\", [table_name])\n         null_map = dict(cursor.fetchall())\n         cursor.execute(\"SELECT * FROM %s LIMIT 1\" % self.connection.ops.quote_name(table_name))\n-        return [line[:6] + (null_map[line[0]]=='YES',)\n+        return [FieldInfo(*(line[:6] + (null_map[line[0]]=='YES',)))\n                 for line in cursor.description]\n \n     def get_relations(self, cursor, table_name):"
        },
        {
            "sha": "dfc1d94d47b8799f2ef9c3647e0f1ae1366cf7c3",
            "filename": "django/db/backends/sqlite3/introspection.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2Fsqlite3%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/223fc8eaf9d04eb2c277a30f4f46745d4403b69b/django%2Fdb%2Fbackends%2Fsqlite3%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fsqlite3%2Fintrospection.py?ref=223fc8eaf9d04eb2c277a30f4f46745d4403b69b",
            "patch": "@@ -1,5 +1,5 @@\n import re\n-from django.db.backends import BaseDatabaseIntrospection\n+from django.db.backends import BaseDatabaseIntrospection, FieldInfo\n \n field_size_re = re.compile(r'^\\s*(?:var)?char\\s*\\(\\s*(\\d+)\\s*\\)\\s*$')\n \n@@ -60,7 +60,7 @@ def get_table_list(self, cursor):\n \n     def get_table_description(self, cursor, table_name):\n         \"Returns a description of the table, with the DB-API cursor.description interface.\"\n-        return [(info['name'], info['type'], None, info['size'], None, None,\n+        return [FieldInfo(info['name'], info['type'], None, info['size'], None, None,\n                  info['null_ok']) for info in self._table_info(cursor, table_name)]\n \n     def get_relations(self, cursor, table_name):"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 15,
        "deletions": 8
    }
}