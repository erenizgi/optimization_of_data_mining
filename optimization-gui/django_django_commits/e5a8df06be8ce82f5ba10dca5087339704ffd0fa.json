{
    "author": "claudep",
    "message": "Fixed #19846 -- Optimized a dict of lists in BlockContext class\n\nThanks Curtis Maloney for the report and the patch.",
    "sha": "e5a8df06be8ce82f5ba10dca5087339704ffd0fa",
    "files": [
        {
            "sha": "b0bf7139bf393165c5cfb1ef1870729351ab60fe",
            "filename": "django/template/loader_tags.py",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/e5a8df06be8ce82f5ba10dca5087339704ffd0fa/django%2Ftemplate%2Floader_tags.py",
            "raw_url": "https://github.com/django/django/raw/e5a8df06be8ce82f5ba10dca5087339704ffd0fa/django%2Ftemplate%2Floader_tags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Floader_tags.py?ref=e5a8df06be8ce82f5ba10dca5087339704ffd0fa",
            "patch": "@@ -1,3 +1,5 @@\n+from collections import defaultdict\n+\n from django.conf import settings\n from django.template.base import TemplateSyntaxError, Library, Node, TextNode,\\\n     token_kwargs, Variable\n@@ -15,19 +17,16 @@ class ExtendsError(Exception):\n class BlockContext(object):\n     def __init__(self):\n         # Dictionary of FIFO queues.\n-        self.blocks = {}\n+        self.blocks = defaultdict(list)\n \n     def add_blocks(self, blocks):\n         for name, block in six.iteritems(blocks):\n-            if name in self.blocks:\n-                self.blocks[name].insert(0, block)\n-            else:\n-                self.blocks[name] = [block]\n+            self.blocks[name].insert(0, block)\n \n     def pop(self, name):\n         try:\n             return self.blocks[name].pop()\n-        except (IndexError, KeyError):\n+        except IndexError:\n             return None\n \n     def push(self, name, block):\n@@ -36,7 +35,7 @@ def push(self, name, block):\n     def get_block(self, name):\n         try:\n             return self.blocks[name][-1]\n-        except (IndexError, KeyError):\n+        except IndexError:\n             return None\n \n class BlockNode(Node):"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 6,
        "deletions": 7
    }
}