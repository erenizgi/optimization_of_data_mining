{
    "author": "SmileyChris",
    "message": "Tidy up the sessions documentation creating links for session methods and crosslinking settings\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16245 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "26156794f12a392e18bc0aa6cb8ff8a4007459ed",
    "files": [
        {
            "sha": "1fd6a5c031fd80d0a8c8dcadf2dcd4c95fe57dd6",
            "filename": "docs/topics/http/sessions.txt",
            "status": "modified",
            "additions": 65,
            "deletions": 55,
            "changes": 120,
            "blob_url": "https://github.com/django/django/blob/26156794f12a392e18bc0aa6cb8ff8a4007459ed/docs%2Ftopics%2Fhttp%2Fsessions.txt",
            "raw_url": "https://github.com/django/django/raw/26156794f12a392e18bc0aa6cb8ff8a4007459ed/docs%2Ftopics%2Fhttp%2Fsessions.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fhttp%2Fsessions.txt?ref=26156794f12a392e18bc0aa6cb8ff8a4007459ed",
            "patch": "@@ -17,14 +17,15 @@ Sessions are implemented via a piece of :doc:`middleware </ref/middleware>`.\n \n To enable session functionality, do the following:\n \n-    * Edit the ``MIDDLEWARE_CLASSES`` setting and make sure\n-      ``MIDDLEWARE_CLASSES`` contains ``'django.contrib.sessions.middleware.SessionMiddleware'``.\n-      The default ``settings.py`` created by ``django-admin.py startproject`` has\n-      ``SessionMiddleware`` activated.\n+    * Edit the :setting:`MIDDLEWARE_CLASSES` setting and make sure\n+      it contains ``'django.contrib.sessions.middleware.SessionMiddleware'``.\n+      The default ``settings.py`` created by ``django-admin.py startproject``\n+      has ``SessionMiddleware`` activated.\n \n If you don't want to use sessions, you might as well remove the\n-``SessionMiddleware`` line from ``MIDDLEWARE_CLASSES`` and ``'django.contrib.sessions'``\n-from your ``INSTALLED_APPS``. It'll save you a small bit of overhead.\n+``SessionMiddleware`` line from ``MIDDLEWARE_CLASSES`` and\n+``'django.contrib.sessions'`` from your :setting:`INSTALLED_APPS`.\n+It'll save you a small bit of overhead.\n \n Configuring the session engine\n ==============================\n@@ -86,82 +87,88 @@ configuration instructions for the `using database-backed sessions`_.\n Using file-based sessions\n -------------------------\n \n-To use file-based sessions, set the ``SESSION_ENGINE`` setting to\n+To use file-based sessions, set the :setting:`SESSION_ENGINE` setting to\n ``\"django.contrib.sessions.backends.file\"``.\n \n-You might also want to set the ``SESSION_FILE_PATH`` setting (which defaults\n-to output from ``tempfile.gettempdir()``, most likely ``/tmp``) to control\n-where Django stores session files. Be sure to check that your Web server has\n-permissions to read and write to this location.\n+You might also want to set the :setting:`SESSION_FILE_PATH` setting (which\n+defaults to output from ``tempfile.gettempdir()``, most likely ``/tmp``) to\n+control where Django stores session files. Be sure to check that your Web\n+server has permissions to read and write to this location.\n \n \n Using sessions in views\n =======================\n \n-When ``SessionMiddleware`` is activated, each ``HttpRequest`` object -- the\n-first argument to any Django view function -- will have a ``session``\n-attribute, which is a dictionary-like object. You can read it and write to it.\n+When ``SessionMiddleware`` is activated, each :class:`~django.http.HttpRequest`\n+object -- the first argument to any Django view function -- will have a\n+``session`` attribute, which is a dictionary-like object.\n \n-A session object has the following standard dictionary methods:\n+You can read it and write to ``request.session`` at any point in your view.\n+You can edit it multiple times.\n \n-    * ``__getitem__(key)``\n+.. class:: backends.base.SessionBase\n+\n+    This is the base class for all session objects. It has the following\n+    standard dictionary methods:\n+\n+    .. method:: __getitem__(key)\n \n       Example: ``fav_color = request.session['fav_color']``\n \n-    * ``__setitem__(key, value)``\n+    .. method:: __setitem__(key, value)\n \n       Example: ``request.session['fav_color'] = 'blue'``\n \n-    * ``__delitem__(key)``\n+    .. method:: __delitem__(key)\n \n       Example: ``del request.session['fav_color']``. This raises ``KeyError``\n       if the given ``key`` isn't already in the session.\n \n-    * ``__contains__(key)``\n+    .. method:: __contains__(key)\n \n       Example: ``'fav_color' in request.session``\n \n-    * ``get(key, default=None)``\n+    .. method:: get(key, default=None)\n \n       Example: ``fav_color = request.session.get('fav_color', 'red')``\n \n-    * ``keys()``\n+    .. method:: keys\n \n-    * ``items()``\n+    .. method:: items\n \n-    * ``setdefault()``\n+    .. method:: setdefault\n \n-    * ``clear()``\n+    .. method:: clear\n \n-It also has these methods:\n+    It also has these methods:\n \n-    * ``flush()``\n+    .. method:: flush\n \n       Delete the current session data from the session and regenerate the\n       session key value that is sent back to the user in the cookie. This is\n       used if you want to ensure that the previous session data can't be\n       accessed again from the user's browser (for example, the\n       :func:`django.contrib.auth.logout()` function calls it).\n \n-    * ``set_test_cookie()``\n+    .. method:: set_test_cookie\n \n       Sets a test cookie to determine whether the user's browser supports\n       cookies. Due to the way cookies work, you won't be able to test this\n       until the user's next page request. See `Setting test cookies`_ below for\n       more information.\n \n-    * ``test_cookie_worked()``\n+    .. method:: test_cookie_worked\n \n       Returns either ``True`` or ``False``, depending on whether the user's\n       browser accepted the test cookie. Due to the way cookies work, you'll\n       have to call ``set_test_cookie()`` on a previous, separate page request.\n       See `Setting test cookies`_ below for more information.\n \n-    * ``delete_test_cookie()``\n+    .. method:: delete_test_cookie\n \n       Deletes the test cookie. Use this to clean up after yourself.\n \n-    * ``set_expiry(value)``\n+    .. method:: set_expiry(value)\n \n       Sets the expiration time for the session. You can pass a number of\n       different values:\n@@ -184,26 +191,23 @@ It also has these methods:\n       purposes. Session expiration is computed from the last time the\n       session was *modified*.\n \n-    * ``get_expiry_age()``\n+    .. method:: get_expiry_age\n \n       Returns the number of seconds until this session expires. For sessions\n       with no custom expiration (or those set to expire at browser close), this\n-      will equal ``settings.SESSION_COOKIE_AGE``.\n+      will equal :setting:`SESSION_COOKIE_AGE`.\n \n-    * ``get_expiry_date()``\n+    .. method:: get_expiry_date\n \n       Returns the date this session will expire. For sessions with no custom\n       expiration (or those set to expire at browser close), this will equal the\n-      date ``settings.SESSION_COOKIE_AGE`` seconds from now.\n+      date :setting:`SESSION_COOKIE_AGE` seconds from now.\n \n-    * ``get_expire_at_browser_close()``\n+    .. method:: get_expire_at_browser_close\n \n       Returns either ``True`` or ``False``, depending on whether the user's\n       session cookie will expire when the user's Web browser is closed.\n \n-You can edit ``request.session`` at any point in your view. You can edit it\n-multiple times.\n-\n Session object guidelines\n -------------------------\n \n@@ -249,25 +253,29 @@ This simplistic view logs in a \"member\" of the site::\n             pass\n         return HttpResponse(\"You're logged out.\")\n \n-The standard ``django.contrib.auth.logout()`` function actually does a bit\n-more than this to prevent inadvertent data leakage. It calls\n-``request.session.flush()``. We are using this example as a demonstration of\n-how to work with session objects, not as a full ``logout()`` implementation.\n+The standard :meth:`django.contrib.auth.logout` function actually does a bit\n+more than this to prevent inadvertent data leakage. It calls the\n+:meth:`~backends.base.SessionBase.flush` method of ``request.session``.\n+We are using this example as a demonstration of how to work with session\n+objects, not as a full ``logout()`` implementation.\n \n Setting test cookies\n ====================\n \n As a convenience, Django provides an easy way to test whether the user's\n-browser accepts cookies. Just call ``request.session.set_test_cookie()`` in a\n-view, and call ``request.session.test_cookie_worked()`` in a subsequent view --\n+browser accepts cookies. Just call the\n+:meth:`~backends.base.SessionBase.set_test_cookie` method of\n+``request.session`` in a view, and call\n+:meth:`~backends.base.SessionBase.test_cookie_worked` in a subsequent view --\n not in the same view call.\n \n This awkward split between ``set_test_cookie()`` and ``test_cookie_worked()``\n is necessary due to the way cookies work. When you set a cookie, you can't\n actually tell whether a browser accepted it until the browser's next request.\n \n-It's good practice to use ``delete_test_cookie()`` to clean up after yourself.\n-Do this after you've verified that the test cookie worked.\n+It's good practice to use\n+:meth:`~backends.base.SessionBase.delete_test_cookie()` to clean up after\n+yourself. Do this after you've verified that the test cookie worked.\n \n Here's a typical usage example::\n \n@@ -346,9 +354,9 @@ the session object::\n \n     request.session.modified = True\n \n-To change this default behavior, set the ``SESSION_SAVE_EVERY_REQUEST`` setting\n-to ``True``. If ``SESSION_SAVE_EVERY_REQUEST`` is ``True``, Django will save\n-the session to the database on every single request.\n+To change this default behavior, set the :setting:`SESSION_SAVE_EVERY_REQUEST`\n+setting to ``True``. When set to ``True``, Django will save the session to the\n+database on every single request.\n \n Note that the session cookie is only sent when a session has been created or\n modified. If ``SESSION_SAVE_EVERY_REQUEST`` is ``True``, the session cookie\n@@ -361,21 +369,22 @@ Browser-length sessions vs. persistent sessions\n ===============================================\n \n You can control whether the session framework uses browser-length sessions vs.\n-persistent sessions with the ``SESSION_EXPIRE_AT_BROWSER_CLOSE`` setting.\n+persistent sessions with the :setting:`SESSION_EXPIRE_AT_BROWSER_CLOSE`\n+setting.\n \n By default, ``SESSION_EXPIRE_AT_BROWSER_CLOSE`` is set to ``False``, which\n means session cookies will be stored in users' browsers for as long as\n-``SESSION_COOKIE_AGE``. Use this if you don't want people to have to log in\n-every time they open a browser.\n+:setting:`SESSION_COOKIE_AGE`. Use this if you don't want people to have to\n+log in every time they open a browser.\n \n If ``SESSION_EXPIRE_AT_BROWSER_CLOSE`` is set to ``True``, Django will use\n browser-length cookies -- cookies that expire as soon as the user closes his or\n her browser. Use this if you want people to have to log in every time they open\n a browser.\n \n This setting is a global default and can be overwritten at a per-session level\n-by explicitly calling ``request.session.set_expiry()`` as described above in\n-`using sessions in views`_.\n+by explicitly calling the :meth:`~backends.base.SessionBase.set_expiry` method\n+of ``request.session`` as described above in `using sessions in views`_.\n \n Clearing the session table\n ==========================\n@@ -397,7 +406,8 @@ in the past -- but your application may have different requirements.\n Settings\n ========\n \n-A few :doc:`Django settings </ref/settings>` give you control over session behavior:\n+A few :doc:`Django settings </ref/settings>` give you control over session\n+behavior:\n \n SESSION_ENGINE\n --------------"
        }
    ],
    "stats": {
        "total": 120,
        "additions": 65,
        "deletions": 55
    }
}