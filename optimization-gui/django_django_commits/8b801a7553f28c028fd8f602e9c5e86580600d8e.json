{
    "author": "carljm",
    "message": "Fixed some tests from r16934 to be auto-id-independent.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16960 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "8b801a7553f28c028fd8f602e9c5e86580600d8e",
    "files": [
        {
            "sha": "619c2bf3b4f80ead8103eaddea0546ef411af2ec",
            "filename": "tests/regressiontests/admin_inlines/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 8,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/8b801a7553f28c028fd8f602e9c5e86580600d8e/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/8b801a7553f28c028fd8f602e9c5e86580600d8e/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py?ref=8b801a7553f28c028fd8f602e9c5e86580600d8e",
            "patch": "@@ -230,12 +230,14 @@ def setUp(self):\n         self.user.user_permissions.add(permission)\n \n         author = Author.objects.create(pk=1, name=u'The Author')\n-        author.books.create(name=u'The inline Book')\n+        book = author.books.create(name=u'The inline Book')\n         self.author_change_url = '/admin/admin_inlines/author/%i/' % author.id\n+        self.book_id = book.id\n \n         holder = Holder2.objects.create(dummy=13)\n-        Inner2.objects.create(dummy=42, holder=holder)\n+        inner2 = Inner2.objects.create(dummy=42, holder=holder)\n         self.holder_change_url = '/admin/admin_inlines/holder2/%i/' % holder.id\n+        self.inner2_id = inner2.id\n \n         self.assertEqual(\n             self.client.login(username='admin', password='secret'),\n@@ -308,7 +310,7 @@ def test_inline_change_m2m_change_perm(self):\n         self.assertContains(response, '<h2>Author-book relationships</h2>')\n         self.assertContains(response, 'Add another Author-Book Relationship')\n         self.assertContains(response, 'value=\"4\" id=\"id_Author_books-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"Author_books-0-id\" value=\"1\"')\n+        self.assertContains(response, '<input type=\"hidden\" name=\"Author_books-0-id\" value=\"%i\"' % self.book_id)\n         self.assertContains(response, 'id=\"id_Author_books-0-DELETE\"')\n \n     def test_inline_change_fk_add_perm(self):\n@@ -320,7 +322,7 @@ def test_inline_change_fk_add_perm(self):\n         self.assertContains(response, 'Add another Inner2')\n         # 3 extra forms only, not the existing instance form\n         self.assertContains(response, 'value=\"3\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertNotContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"1\"')\n+        self.assertNotContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n \n     def test_inline_change_fk_change_perm(self):\n         permission = Permission.objects.get(codename='change_inner2', content_type=self.inner_ct)\n@@ -330,7 +332,7 @@ def test_inline_change_fk_change_perm(self):\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         # Just the one form for existing instances\n         self.assertContains(response, 'value=\"1\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"1\"')\n+        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n         # max-num 0 means we can't add new ones\n         self.assertContains(response, 'value=\"0\" id=\"id_inner2_set-MAX_NUM_FORMS\"')\n \n@@ -344,7 +346,7 @@ def test_inline_change_fk_add_change_perm(self):\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         # One form for existing instance and three extra for new\n         self.assertContains(response, 'value=\"4\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"1\"')\n+        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n \n \n     def test_inline_change_fk_change_del_perm(self):\n@@ -357,7 +359,7 @@ def test_inline_change_fk_change_del_perm(self):\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         # One form for existing instance only, no new\n         self.assertContains(response, 'value=\"1\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"1\"')\n+        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n         self.assertContains(response, 'id=\"id_inner2_set-0-DELETE\"')\n \n \n@@ -373,5 +375,5 @@ def test_inline_change_fk_all_perms(self):\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         # One form for existing instance only, three for new\n         self.assertContains(response, 'value=\"4\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"1\"')\n+        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n         self.assertContains(response, 'id=\"id_inner2_set-0-DELETE\"')"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 10,
        "deletions": 8
    }
}