{
    "author": "ramiro",
    "message": "Fixed #15122 -- Restored reporting of the template files tried in the texmplate loader post mortem section of the TemplateDoesNotExit 500 error debug page. Thanks rdrey for reporting this regression.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15252 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "19bfdadc430fa8d366de1b8ca821cc4c64341b67",
    "files": [
        {
            "sha": "f7888c3a4bd5c1dfbdc361c36ecaf96fdcfff701",
            "filename": "django/views/debug.py",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/19bfdadc430fa8d366de1b8ca821cc4c64341b67/django%2Fviews%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/19bfdadc430fa8d366de1b8ca821cc4c64341b67/django%2Fviews%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdebug.py?ref=19bfdadc430fa8d366de1b8ca821cc4c64341b67",
            "patch": "@@ -89,17 +89,18 @@ def get_traceback_html(self):\n             for loader in template_source_loaders:\n                 try:\n                     module = import_module(loader.__module__)\n-                    source_list_func = module.get_template_sources\n+                    if hasattr(loader, '__class__'):\n+                        source_list_func = loader.get_template_sources\n+                        loader_name = loader.__module__ + '.' + loader.__class__.__name__\n+                    else: # NOTE: Remember to remove this branch when we deprecate old template loaders in 1.4\n+                        source_list_func = module.get_template_sources\n+                        loader_name = loader.__module__ + '.' + loader.__name__\n                     # NOTE: This assumes exc_value is the name of the template that\n                     # the loader attempted to load.\n                     template_list = [{'name': t, 'exists': os.path.exists(t)} \\\n                         for t in source_list_func(str(self.exc_value))]\n                 except (ImportError, AttributeError):\n                     template_list = []\n-                if hasattr(loader, '__class__'):\n-                    loader_name = loader.__module__ + '.' + loader.__class__.__name__\n-                else:\n-                    loader_name = loader.__module__ + '.' + loader.__name__\n                 self.loader_debug_info.append({\n                     'loader': loader_name,\n                     'templates': template_list,"
        },
        {
            "sha": "c71e8c502df1bc28bdc8cb68c248d3af8aec61fa",
            "filename": "tests/regressiontests/views/tests/debug.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/19bfdadc430fa8d366de1b8ca821cc4c64341b67/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/19bfdadc430fa8d366de1b8ca821cc4c64341b67/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py?ref=19bfdadc430fa8d366de1b8ca821cc4c64341b67",
            "patch": "@@ -48,3 +48,7 @@ def test_template_exceptions(self):\n                 self.assertFalse(raising_loc.find('raise BrokenException') == -1,\n                     \"Failed to find 'raise BrokenException' in last frame of traceback, instead found: %s\" %\n                         raising_loc)\n+\n+    def test_template_loader_postmortem(self):\n+        response = self.client.get(reverse('raises_template_does_not_exist'))\n+        self.assertContains(response, 'templates/i_dont_exist.html</code> (File does not exist)</li>', status_code=500)"
        },
        {
            "sha": "b7ff3efbdcfa640c3ad966dc4c1a7dffb1d28b0d",
            "filename": "tests/regressiontests/views/urls.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/19bfdadc430fa8d366de1b8ca821cc4c64341b67/tests%2Fregressiontests%2Fviews%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/19bfdadc430fa8d366de1b8ca821cc4c64341b67/tests%2Fregressiontests%2Fviews%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Furls.py?ref=19bfdadc430fa8d366de1b8ca821cc4c64341b67",
            "patch": "@@ -143,6 +143,7 @@\n urlpatterns += patterns('regressiontests.views.views',\n     url(r'view_exception/(?P<n>\\d+)/$', 'view_exception', name='view_exception'),\n     url(r'template_exception/(?P<n>\\d+)/$', 'template_exception', name='template_exception'),\n+    url(r'^raises_template_does_not_exist/$', 'raises_template_does_not_exist', name='raises_template_does_not_exist'),\n \n     (r'^shortcuts/render_to_response/$', 'render_to_response_view'),\n     (r'^shortcuts/render_to_response/request_context/$', 'render_to_response_view_with_request_context'),"
        },
        {
            "sha": "bcff08e125199baf5e2434559cc02a6e1b5794ee",
            "filename": "tests/regressiontests/views/views.py",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/19bfdadc430fa8d366de1b8ca821cc4c64341b67/tests%2Fregressiontests%2Fviews%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/19bfdadc430fa8d366de1b8ca821cc4c64341b67/tests%2Fregressiontests%2Fviews%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Fviews.py?ref=19bfdadc430fa8d366de1b8ca821cc4c64341b67",
            "patch": "@@ -4,7 +4,7 @@\n from django.http import HttpResponse, HttpResponseRedirect\n from django.core.urlresolvers import get_resolver\n from django.shortcuts import render_to_response, render\n-from django.template import Context, RequestContext\n+from django.template import Context, RequestContext, TemplateDoesNotExist\n from django.views.debug import technical_500_response\n from django.views.generic.create_update import create_object\n \n@@ -120,3 +120,11 @@ def render_view_with_current_app_conflict(request):\n         'foo': 'FOO',\n         'bar': 'BAR',\n     }, current_app=\"foobar_app\", context_instance=RequestContext(request))\n+\n+def raises_template_does_not_exist(request):\n+    # We need to inspect the HTML generated by the fancy 500 debug view but\n+    # the test client ignores it, so we send it explicitly.\n+    try:\n+        return render_to_response('i_dont_exist.html')\n+    except TemplateDoesNotExist:\n+        return technical_500_response(request, *sys.exc_info())"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 20,
        "deletions": 6
    }
}