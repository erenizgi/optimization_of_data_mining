{
    "author": "claudep",
    "message": "[py3] Used smart_str to prevent regressions in http handling",
    "sha": "09c589810d54ef14132084e34f4ef6133fdac3b9",
    "files": [
        {
            "sha": "85d9b3b9208accdceef484f57790001d39e8ddc9",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/09c589810d54ef14132084e34f4ef6133fdac3b9/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/09c589810d54ef14132084e34f4ef6133fdac3b9/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=09c589810d54ef14132084e34f4ef6133fdac3b9",
            "patch": "@@ -61,14 +61,14 @@ def value_encode(self, val):\n         if not _cookie_allows_colon_in_names:\n             def load(self, rawdata):\n                 self.bad_cookies = set()\n-                super(SimpleCookie, self).load(str(rawdata))\n+                super(SimpleCookie, self).load(smart_str(rawdata))\n                 for key in self.bad_cookies:\n                     del self[key]\n \n             # override private __set() method:\n             # (needed for using our Morsel, and for laxness with CookieError\n             def _BaseCookie__set(self, key, real_value, coded_value):\n-                key = str(key)\n+                key = smart_str(key)\n                 try:\n                     M = self.get(key, Morsel())\n                     M.set(key, real_value, coded_value)\n@@ -85,7 +85,7 @@ def _BaseCookie__set(self, key, real_value, coded_value):\n from django.http.multipartparser import MultiPartParser\n from django.http.utils import *\n from django.utils.datastructures import MultiValueDict, ImmutableList\n-from django.utils.encoding import smart_bytes, iri_to_uri, force_text\n+from django.utils.encoding import smart_bytes, smart_str, iri_to_uri, force_text\n from django.utils.http import cookie_date\n from django.utils import six\n from django.utils import timezone\n@@ -137,7 +137,7 @@ def build_request_repr(request, path_override=None, GET_override=None,\n     except:\n         meta = '<could not parse>'\n     path = path_override if path_override is not None else request.path\n-    return str('<%s\\npath:%s,\\nGET:%s,\\nPOST:%s,\\nCOOKIES:%s,\\nMETA:%s>' %\n+    return smart_str('<%s\\npath:%s,\\nGET:%s,\\nPOST:%s,\\nCOOKIES:%s,\\nMETA:%s>' %\n                      (request.__class__.__name__,\n                       path,\n                       six.text_type(get),"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}