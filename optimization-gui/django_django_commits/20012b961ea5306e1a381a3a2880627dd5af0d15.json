{
    "author": "aaugustin",
    "message": "[py3] Updated bundled version of six",
    "sha": "20012b961ea5306e1a381a3a2880627dd5af0d15",
    "files": [
        {
            "sha": "e4ce9398442e3bf5e765e969f1a4e0d530206eb2",
            "filename": "django/utils/six.py",
            "status": "modified",
            "additions": 31,
            "deletions": 19,
            "changes": 50,
            "blob_url": "https://github.com/django/django/blob/20012b961ea5306e1a381a3a2880627dd5af0d15/django%2Futils%2Fsix.py",
            "raw_url": "https://github.com/django/django/raw/20012b961ea5306e1a381a3a2880627dd5af0d15/django%2Futils%2Fsix.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fsix.py?ref=20012b961ea5306e1a381a3a2880627dd5af0d15",
            "patch": "@@ -5,7 +5,7 @@\n import types\n \n __author__ = \"Benjamin Peterson <benjamin@python.org>\"\n-__version__ = \"1.1.0\"\n+__version__ = \"1.2.0\"\n \n \n # True if we are running on Python 3.\n@@ -26,19 +26,23 @@\n     text_type = unicode\n     binary_type = str\n \n-    # It's possible to have sizeof(long) != sizeof(Py_ssize_t).\n-    class X(object):\n-        def __len__(self):\n-            return 1 << 31\n-    try:\n-        len(X())\n-    except OverflowError:\n-        # 32-bit\n+    if sys.platform == \"java\":\n+        # Jython always uses 32 bits.\n         MAXSIZE = int((1 << 31) - 1)\n     else:\n-        # 64-bit\n-        MAXSIZE = int((1 << 63) - 1)\n-    del X\n+        # It's possible to have sizeof(long) != sizeof(Py_ssize_t).\n+        class X(object):\n+            def __len__(self):\n+                return 1 << 31\n+        try:\n+            len(X())\n+        except OverflowError:\n+            # 32-bit\n+            MAXSIZE = int((1 << 31) - 1)\n+        else:\n+            # 64-bit\n+            MAXSIZE = int((1 << 63) - 1)\n+            del X\n \n \n def _add_doc(func, doc):\n@@ -201,22 +205,30 @@ def remove_move(name):\n     _iteritems = \"iteritems\"\n \n \n+try:\n+    advance_iterator = next\n+except NameError:\n+    def advance_iterator(it):\n+        return it.next()\n+next = advance_iterator\n+\n+\n if PY3:\n     def get_unbound_function(unbound):\n         return unbound\n \n-\n-    advance_iterator = next\n+    Iterator = object\n \n     def callable(obj):\n         return any(\"__call__\" in klass.__dict__ for klass in type(obj).__mro__)\n else:\n     def get_unbound_function(unbound):\n         return unbound.im_func\n \n+    class Iterator(object):\n \n-    def advance_iterator(it):\n-        return it.next()\n+        def next(self):\n+            return type(self).__next__(self)\n \n     callable = callable\n _add_doc(get_unbound_function,\n@@ -231,15 +243,15 @@ def advance_iterator(it):\n \n def iterkeys(d):\n     \"\"\"Return an iterator over the keys of a dictionary.\"\"\"\n-    return getattr(d, _iterkeys)()\n+    return iter(getattr(d, _iterkeys)())\n \n def itervalues(d):\n     \"\"\"Return an iterator over the values of a dictionary.\"\"\"\n-    return getattr(d, _itervalues)()\n+    return iter(getattr(d, _itervalues)())\n \n def iteritems(d):\n     \"\"\"Return an iterator over the (key, value) pairs of a dictionary.\"\"\"\n-    return getattr(d, _iteritems)()\n+    return iter(getattr(d, _iteritems)())\n \n \n if PY3:"
        }
    ],
    "stats": {
        "total": 50,
        "additions": 31,
        "deletions": 19
    }
}