{
    "author": "andrewgodwin",
    "message": "Merge remote-tracking branch 'core/master' into schema-alteration\n\nConflicts:\n\tdjango/db/backends/mysql/base.py\n\tdjango/db/backends/postgresql_psycopg2/base.py",
    "sha": "9313dea7006ab77d54735fdd5825a812684e7144",
    "files": [
        {
            "sha": "6a7f22ada4fb7781d3160e4db5ed984986964369",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -31,6 +31,8 @@ The PRIMARY AUTHORS are (and/or have been):\n     * Claude Paroz\n     * Anssi Kääriäinen\n     * Florian Apolloner\n+    * Jeremy Dunck\n+    * Bryan Veloso\n \n More information on the main contributors to Django can be found in\n docs/internals/committers.txt.\n@@ -167,7 +169,6 @@ answer newbie questions, and generally made Django that much better:\n     dready <wil@mojipage.com>\n     Maximillian Dornseif <md@hudora.de>\n     Daniel Duan <DaNmarner@gmail.com>\n-    Jeremy Dunck <http://dunck.us/>\n     Andrew Durdin <adurdin@gmail.com>\n     dusk@woofle.net\n     Andy Dustman <farcepest@gmail.com>\n@@ -506,6 +507,7 @@ answer newbie questions, and generally made Django that much better:\n     Johan C. Stöver <johan@nilling.nl>\n     Nowell Strite <http://nowell.strite.org/>\n     Thomas Stromberg <tstromberg@google.com>\n+    Travis Swicegood <travis@domain51.com>\n     Pascal Varet\n     SuperJared\n     Radek Švarz <http://www.svarz.cz/translate/>"
        },
        {
            "sha": "6272f4ed5d2379b22906711328c739ec43ece839",
            "filename": "django/conf/__init__.py",
            "status": "modified",
            "additions": 13,
            "deletions": 5,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fconf%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fconf%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2F__init__.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -7,7 +7,6 @@\n \"\"\"\n \n import os\n-import re\n import time     # Needed for Windows\n import warnings\n \n@@ -26,7 +25,7 @@ class LazySettings(LazyObject):\n     The user can manually configure settings prior to using them. Otherwise,\n     Django uses the settings module pointed to by DJANGO_SETTINGS_MODULE.\n     \"\"\"\n-    def _setup(self):\n+    def _setup(self, name):\n         \"\"\"\n         Load the settings module pointed to by the environment variable. This\n         is used the first time we need any settings at all, if the user has not\n@@ -37,12 +36,21 @@ def _setup(self):\n             if not settings_module: # If it's set but is an empty string.\n                 raise KeyError\n         except KeyError:\n-            # NOTE: This is arguably an EnvironmentError, but that causes\n-            # problems with Python's interactive help.\n-            raise ImportError(\"Settings cannot be imported, because environment variable %s is undefined.\" % ENVIRONMENT_VARIABLE)\n+            raise ImproperlyConfigured(\n+                \"Requested setting %s, but settings are not configured. \"\n+                \"You must either define the environment variable %s \"\n+                \"or call settings.configure() before accessing settings.\"\n+                % (name, ENVIRONMENT_VARIABLE))\n \n         self._wrapped = Settings(settings_module)\n \n+\n+    def __getattr__(self, name):\n+        if self._wrapped is empty:\n+            self._setup(name)\n+        return getattr(self._wrapped, name)\n+\n+\n     def configure(self, default_settings=global_settings, **options):\n         \"\"\"\n         Called to manually configure the settings. The 'default_settings'"
        },
        {
            "sha": "0a34f807b3f14c84cca2e1f8c072bb111e2f2ba3",
            "filename": "django/contrib/admin/filters.py",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Ffilters.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Ffilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ffilters.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -8,13 +8,13 @@\n import datetime\n \n from django.db import models\n-from django.core.exceptions import ImproperlyConfigured\n+from django.core.exceptions import ImproperlyConfigured, ValidationError\n from django.utils.encoding import smart_text\n from django.utils.translation import ugettext_lazy as _\n from django.utils import timezone\n-\n from django.contrib.admin.util import (get_model_from_relation,\n     reverse_field_path, get_limit_choices_to_from_path, prepare_lookup_value)\n+from django.contrib.admin.options import IncorrectLookupParameters\n \n class ListFilter(object):\n     title = None  # Human-readable title to appear in the right sidebar.\n@@ -129,7 +129,10 @@ def has_output(self):\n         return True\n \n     def queryset(self, request, queryset):\n-        return queryset.filter(**self.used_parameters)\n+        try:\n+            return queryset.filter(**self.used_parameters)\n+        except ValidationError as e:\n+            raise IncorrectLookupParameters(e)\n \n     @classmethod\n     def register(cls, test, list_filter_class, take_priority=False):"
        },
        {
            "sha": "f4205f2ce7b4526de50638269576318ad1bc390a",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -14,9 +14,10 @@\n from django.core.paginator import Paginator\n from django.core.urlresolvers import reverse\n from django.db import models, transaction, router\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.related import RelatedObject\n from django.db.models.fields import BLANK_CHOICE_DASH, FieldDoesNotExist\n-from django.db.models.sql.constants import LOOKUP_SEP, QUERY_TERMS\n+from django.db.models.sql.constants import QUERY_TERMS\n from django.http import Http404, HttpResponse, HttpResponseRedirect\n from django.shortcuts import get_object_or_404\n from django.template.response import SimpleTemplateResponse, TemplateResponse\n@@ -1456,8 +1457,10 @@ def has_delete_permission(self, request, obj=None):\n         return request.user.has_perm(\n             self.opts.app_label + '.' + self.opts.get_delete_permission())\n \n+\n class StackedInline(InlineModelAdmin):\n     template = 'admin/edit_inline/stacked.html'\n \n+\n class TabularInline(InlineModelAdmin):\n     template = 'admin/edit_inline/tabular.html'"
        },
        {
            "sha": "4dc9459ff3661ab4792fa8255e63b194af832645",
            "filename": "django/contrib/admin/static/admin/js/inlines.js",
            "status": "modified",
            "additions": 254,
            "deletions": 118,
            "changes": 372,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.js",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.js?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -9,128 +9,264 @@\n  * All rights reserved.\n  *\n  * Spiced up with Code from Zain Memon's GSoC project 2009\n- * and modified for Django by Jannis Leidel\n+ * and modified for Django by Jannis Leidel, Travis Swicegood and Julien Phalip.\n  *\n  * Licensed under the New BSD License\n  * See: http://www.opensource.org/licenses/bsd-license.php\n  */\n (function($) {\n-\t$.fn.formset = function(opts) {\n-\t\tvar options = $.extend({}, $.fn.formset.defaults, opts);\n-\t\tvar updateElementIndex = function(el, prefix, ndx) {\n-\t\t\tvar id_regex = new RegExp(\"(\" + prefix + \"-(\\\\d+|__prefix__))\");\n-\t\t\tvar replacement = prefix + \"-\" + ndx;\n-\t\t\tif ($(el).attr(\"for\")) {\n-\t\t\t\t$(el).attr(\"for\", $(el).attr(\"for\").replace(id_regex, replacement));\n-\t\t\t}\n-\t\t\tif (el.id) {\n-\t\t\t\tel.id = el.id.replace(id_regex, replacement);\n-\t\t\t}\n-\t\t\tif (el.name) {\n-\t\t\t\tel.name = el.name.replace(id_regex, replacement);\n-\t\t\t}\n-\t\t};\n-\t\tvar totalForms = $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\").attr(\"autocomplete\", \"off\");\n-\t\tvar nextIndex = parseInt(totalForms.val(), 10);\n-\t\tvar maxForms = $(\"#id_\" + options.prefix + \"-MAX_NUM_FORMS\").attr(\"autocomplete\", \"off\");\n-\t\t// only show the add button if we are allowed to add more items,\n+  $.fn.formset = function(opts) {\n+    var options = $.extend({}, $.fn.formset.defaults, opts);\n+    var $this = $(this);\n+    var $parent = $this.parent();\n+    var updateElementIndex = function(el, prefix, ndx) {\n+      var id_regex = new RegExp(\"(\" + prefix + \"-(\\\\d+|__prefix__))\");\n+      var replacement = prefix + \"-\" + ndx;\n+      if ($(el).attr(\"for\")) {\n+        $(el).attr(\"for\", $(el).attr(\"for\").replace(id_regex, replacement));\n+      }\n+      if (el.id) {\n+        el.id = el.id.replace(id_regex, replacement);\n+      }\n+      if (el.name) {\n+        el.name = el.name.replace(id_regex, replacement);\n+      }\n+    };\n+    var totalForms = $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\").attr(\"autocomplete\", \"off\");\n+    var nextIndex = parseInt(totalForms.val(), 10);\n+    var maxForms = $(\"#id_\" + options.prefix + \"-MAX_NUM_FORMS\").attr(\"autocomplete\", \"off\");\n+    // only show the add button if we are allowed to add more items,\n         // note that max_num = None translates to a blank string.\n-\t\tvar showAddButton = maxForms.val() === '' || (maxForms.val()-totalForms.val()) > 0;\n-\t\t$(this).each(function(i) {\n-\t\t\t$(this).not(\".\" + options.emptyCssClass).addClass(options.formCssClass);\n-\t\t});\n-\t\tif ($(this).length && showAddButton) {\n-\t\t\tvar addButton;\n-\t\t\tif ($(this).attr(\"tagName\") == \"TR\") {\n-\t\t\t\t// If forms are laid out as table rows, insert the\n-\t\t\t\t// \"add\" button in a new table row:\n-\t\t\t\tvar numCols = this.eq(-1).children().length;\n-\t\t\t\t$(this).parent().append('<tr class=\"' + options.addCssClass + '\"><td colspan=\"' + numCols + '\"><a href=\"javascript:void(0)\">' + options.addText + \"</a></tr>\");\n-\t\t\t\taddButton = $(this).parent().find(\"tr:last a\");\n-\t\t\t} else {\n-\t\t\t\t// Otherwise, insert it immediately after the last form:\n-\t\t\t\t$(this).filter(\":last\").after('<div class=\"' + options.addCssClass + '\"><a href=\"javascript:void(0)\">' + options.addText + \"</a></div>\");\n-\t\t\t\taddButton = $(this).filter(\":last\").next().find(\"a\");\n-\t\t\t}\n-\t\t\taddButton.click(function(e) {\n-\t\t\t\te.preventDefault();\n-\t\t\t\tvar totalForms = $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\");\n-\t\t\t\tvar template = $(\"#\" + options.prefix + \"-empty\");\n-\t\t\t\tvar row = template.clone(true);\n-\t\t\t\trow.removeClass(options.emptyCssClass)\n-\t\t\t\t\t.addClass(options.formCssClass)\n-\t\t\t\t\t.attr(\"id\", options.prefix + \"-\" + nextIndex);\n-\t\t\t\tif (row.is(\"tr\")) {\n-\t\t\t\t\t// If the forms are laid out in table rows, insert\n-\t\t\t\t\t// the remove button into the last table cell:\n-\t\t\t\t\trow.children(\":last\").append('<div><a class=\"' + options.deleteCssClass +'\" href=\"javascript:void(0)\">' + options.deleteText + \"</a></div>\");\n-\t\t\t\t} else if (row.is(\"ul\") || row.is(\"ol\")) {\n-\t\t\t\t\t// If they're laid out as an ordered/unordered list,\n-\t\t\t\t\t// insert an <li> after the last list item:\n-\t\t\t\t\trow.append('<li><a class=\"' + options.deleteCssClass +'\" href=\"javascript:void(0)\">' + options.deleteText + \"</a></li>\");\n-\t\t\t\t} else {\n-\t\t\t\t\t// Otherwise, just insert the remove button as the\n-\t\t\t\t\t// last child element of the form's container:\n-\t\t\t\t\trow.children(\":first\").append('<span><a class=\"' + options.deleteCssClass + '\" href=\"javascript:void(0)\">' + options.deleteText + \"</a></span>\");\n-\t\t\t\t}\n-\t\t\t\trow.find(\"*\").each(function() {\n-\t\t\t\t\tupdateElementIndex(this, options.prefix, totalForms.val());\n-\t\t\t\t});\n-\t\t\t\t// Insert the new form when it has been fully edited\n-\t\t\t\trow.insertBefore($(template));\n-\t\t\t\t// Update number of total forms\n-\t\t\t\t$(totalForms).val(parseInt(totalForms.val(), 10) + 1);\n-\t\t\t\tnextIndex += 1;\n-\t\t\t\t// Hide add button in case we've hit the max, except we want to add infinitely\n-\t\t\t\tif ((maxForms.val() !== '') && (maxForms.val()-totalForms.val()) <= 0) {\n-\t\t\t\t\taddButton.parent().hide();\n-\t\t\t\t}\n-\t\t\t\t// The delete button of each row triggers a bunch of other things\n-\t\t\t\trow.find(\"a.\" + options.deleteCssClass).click(function(e) {\n-\t\t\t\t\te.preventDefault();\n-\t\t\t\t\t// Remove the parent form containing this button:\n-\t\t\t\t\tvar row = $(this).parents(\".\" + options.formCssClass);\n-\t\t\t\t\trow.remove();\n-\t\t\t\t\tnextIndex -= 1;\n-\t\t\t\t\t// If a post-delete callback was provided, call it with the deleted form:\n-\t\t\t\t\tif (options.removed) {\n-\t\t\t\t\t\toptions.removed(row);\n-\t\t\t\t\t}\n-\t\t\t\t\t// Update the TOTAL_FORMS form count.\n-\t\t\t\t\tvar forms = $(\".\" + options.formCssClass);\n-\t\t\t\t\t$(\"#id_\" + options.prefix + \"-TOTAL_FORMS\").val(forms.length);\n-\t\t\t\t\t// Show add button again once we drop below max\n-\t\t\t\t\tif ((maxForms.val() === '') || (maxForms.val()-forms.length) > 0) {\n-\t\t\t\t\t\taddButton.parent().show();\n-\t\t\t\t\t}\n-\t\t\t\t\t// Also, update names and ids for all remaining form controls\n-\t\t\t\t\t// so they remain in sequence:\n-\t\t\t\t\tfor (var i=0, formCount=forms.length; i<formCount; i++)\n-\t\t\t\t\t{\n-\t\t\t\t\t\tupdateElementIndex($(forms).get(i), options.prefix, i);\n-\t\t\t\t\t\t$(forms.get(i)).find(\"*\").each(function() {\n-\t\t\t\t\t\t\tupdateElementIndex(this, options.prefix, i);\n-\t\t\t\t\t\t});\n-\t\t\t\t\t}\n-\t\t\t\t});\n-\t\t\t\t// If a post-add callback was supplied, call it with the added form:\n-\t\t\t\tif (options.added) {\n-\t\t\t\t\toptions.added(row);\n-\t\t\t\t}\n-\t\t\t});\n-\t\t}\n-\t\treturn this;\n-\t};\n-\t/* Setup plugin defaults */\n-\t$.fn.formset.defaults = {\n-\t\tprefix: \"form\",\t\t\t\t\t// The form prefix for your django formset\n-\t\taddText: \"add another\",\t\t\t// Text for the add link\n-\t\tdeleteText: \"remove\",\t\t\t// Text for the delete link\n-\t\taddCssClass: \"add-row\",\t\t\t// CSS class applied to the add link\n-\t\tdeleteCssClass: \"delete-row\",\t// CSS class applied to the delete link\n-\t\temptyCssClass: \"empty-row\",\t\t// CSS class applied to the empty row\n-\t\tformCssClass: \"dynamic-form\",\t// CSS class applied to each form in a formset\n-\t\tadded: null,\t\t\t\t\t// Function called each time a new form is added\n-\t\tremoved: null\t\t\t\t\t// Function called each time a form is deleted\n-\t};\n+    var showAddButton = maxForms.val() === '' || (maxForms.val()-totalForms.val()) > 0;\n+    $this.each(function(i) {\n+      $(this).not(\".\" + options.emptyCssClass).addClass(options.formCssClass);\n+    });\n+    if ($this.length && showAddButton) {\n+      var addButton;\n+      if ($this.attr(\"tagName\") == \"TR\") {\n+        // If forms are laid out as table rows, insert the\n+        // \"add\" button in a new table row:\n+        var numCols = this.eq(-1).children().length;\n+        $parent.append('<tr class=\"' + options.addCssClass + '\"><td colspan=\"' + numCols + '\"><a href=\"javascript:void(0)\">' + options.addText + \"</a></tr>\");\n+        addButton = $parent.find(\"tr:last a\");\n+      } else {\n+        // Otherwise, insert it immediately after the last form:\n+        $this.filter(\":last\").after('<div class=\"' + options.addCssClass + '\"><a href=\"javascript:void(0)\">' + options.addText + \"</a></div>\");\n+        addButton = $this.filter(\":last\").next().find(\"a\");\n+      }\n+      addButton.click(function(e) {\n+        e.preventDefault();\n+        var totalForms = $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\");\n+        var template = $(\"#\" + options.prefix + \"-empty\");\n+        var row = template.clone(true);\n+        row.removeClass(options.emptyCssClass)\n+          .addClass(options.formCssClass)\n+          .attr(\"id\", options.prefix + \"-\" + nextIndex);\n+        if (row.is(\"tr\")) {\n+          // If the forms are laid out in table rows, insert\n+          // the remove button into the last table cell:\n+          row.children(\":last\").append('<div><a class=\"' + options.deleteCssClass +'\" href=\"javascript:void(0)\">' + options.deleteText + \"</a></div>\");\n+        } else if (row.is(\"ul\") || row.is(\"ol\")) {\n+          // If they're laid out as an ordered/unordered list,\n+          // insert an <li> after the last list item:\n+          row.append('<li><a class=\"' + options.deleteCssClass +'\" href=\"javascript:void(0)\">' + options.deleteText + \"</a></li>\");\n+        } else {\n+          // Otherwise, just insert the remove button as the\n+          // last child element of the form's container:\n+          row.children(\":first\").append('<span><a class=\"' + options.deleteCssClass + '\" href=\"javascript:void(0)\">' + options.deleteText + \"</a></span>\");\n+        }\n+        row.find(\"*\").each(function() {\n+          updateElementIndex(this, options.prefix, totalForms.val());\n+        });\n+        // Insert the new form when it has been fully edited\n+        row.insertBefore($(template));\n+        // Update number of total forms\n+        $(totalForms).val(parseInt(totalForms.val(), 10) + 1);\n+        nextIndex += 1;\n+        // Hide add button in case we've hit the max, except we want to add infinitely\n+        if ((maxForms.val() !== '') && (maxForms.val()-totalForms.val()) <= 0) {\n+          addButton.parent().hide();\n+        }\n+        // The delete button of each row triggers a bunch of other things\n+        row.find(\"a.\" + options.deleteCssClass).click(function(e) {\n+          e.preventDefault();\n+          // Remove the parent form containing this button:\n+          var row = $(this).parents(\".\" + options.formCssClass);\n+          row.remove();\n+          nextIndex -= 1;\n+          // If a post-delete callback was provided, call it with the deleted form:\n+          if (options.removed) {\n+            options.removed(row);\n+          }\n+          // Update the TOTAL_FORMS form count.\n+          var forms = $(\".\" + options.formCssClass);\n+          $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\").val(forms.length);\n+          // Show add button again once we drop below max\n+          if ((maxForms.val() === '') || (maxForms.val()-forms.length) > 0) {\n+            addButton.parent().show();\n+          }\n+          // Also, update names and ids for all remaining form controls\n+          // so they remain in sequence:\n+          for (var i=0, formCount=forms.length; i<formCount; i++)\n+          {\n+            updateElementIndex($(forms).get(i), options.prefix, i);\n+            $(forms.get(i)).find(\"*\").each(function() {\n+              updateElementIndex(this, options.prefix, i);\n+            });\n+          }\n+        });\n+        // If a post-add callback was supplied, call it with the added form:\n+        if (options.added) {\n+          options.added(row);\n+        }\n+      });\n+    }\n+    return this;\n+  };\n+\n+  /* Setup plugin defaults */\n+  $.fn.formset.defaults = {\n+    prefix: \"form\",          // The form prefix for your django formset\n+    addText: \"add another\",      // Text for the add link\n+    deleteText: \"remove\",      // Text for the delete link\n+    addCssClass: \"add-row\",      // CSS class applied to the add link\n+    deleteCssClass: \"delete-row\",  // CSS class applied to the delete link\n+    emptyCssClass: \"empty-row\",    // CSS class applied to the empty row\n+    formCssClass: \"dynamic-form\",  // CSS class applied to each form in a formset\n+    added: null,          // Function called each time a new form is added\n+    removed: null          // Function called each time a form is deleted\n+  };\n+\n+\n+  // Tabular inlines ---------------------------------------------------------\n+  $.fn.tabularFormset = function(options) {\n+    var $rows = $(this);\n+    var alternatingRows = function(row) {\n+      $($rows.selector).not(\".add-row\").removeClass(\"row1 row2\")\n+        .filter(\":even\").addClass(\"row1\").end()\n+        .filter(\":odd\").addClass(\"row2\");\n+    };\n+\n+    var reinitDateTimeShortCuts = function() {\n+      // Reinitialize the calendar and clock widgets by force\n+      if (typeof DateTimeShortcuts != \"undefined\") {\n+        $(\".datetimeshortcuts\").remove();\n+        DateTimeShortcuts.init();\n+      }\n+    };\n+\n+    var updateSelectFilter = function() {\n+      // If any SelectFilter widgets are a part of the new form,\n+      // instantiate a new SelectFilter instance for it.\n+      if (typeof SelectFilter != 'undefined'){\n+        $('.selectfilter').each(function(index, value){\n+          var namearr = value.name.split('-');\n+          SelectFilter.init(value.id, namearr[namearr.length-1], false, options.adminStaticPrefix );\n+        });\n+        $('.selectfilterstacked').each(function(index, value){\n+          var namearr = value.name.split('-');\n+          SelectFilter.init(value.id, namearr[namearr.length-1], true, options.adminStaticPrefix );\n+        });\n+      }\n+    };\n+\n+    var initPrepopulatedFields = function(row) {\n+      row.find('.prepopulated_field').each(function() {\n+        var field = $(this),\n+            input = field.find('input, select, textarea'),\n+            dependency_list = input.data('dependency_list') || [],\n+            dependencies = [];\n+        $.each(dependency_list, function(i, field_name) {\n+          dependencies.push('#' + row.find('.field-' + field_name).find('input, select, textarea').attr('id'));\n+        });\n+        if (dependencies.length) {\n+          input.prepopulate(dependencies, input.attr('maxlength'));\n+        }\n+      });\n+    };\n+\n+    $rows.formset({\n+      prefix: options.prefix,\n+      addText: options.addText,\n+      formCssClass: \"dynamic-\" + options.prefix,\n+      deleteCssClass: \"inline-deletelink\",\n+      deleteText: options.deleteText,\n+      emptyCssClass: \"empty-form\",\n+      removed: alternatingRows,\n+      added: function(row) {\n+        initPrepopulatedFields(row);\n+        reinitDateTimeShortCuts();\n+        updateSelectFilter();\n+        alternatingRows(row);\n+      }\n+    });\n+\n+    return $rows;\n+  };\n+\n+  // Stacked inlines ---------------------------------------------------------\n+  $.fn.stackedFormset = function(options) {\n+    var $rows = $(this);\n+    var updateInlineLabel = function(row) {\n+      $($rows.selector).find(\".inline_label\").each(function(i) {\n+        var count = i + 1;\n+        $(this).html($(this).html().replace(/(#\\d+)/g, \"#\" + count));\n+      });\n+    };\n+\n+    var reinitDateTimeShortCuts = function() {\n+      // Reinitialize the calendar and clock widgets by force, yuck.\n+      if (typeof DateTimeShortcuts != \"undefined\") {\n+        $(\".datetimeshortcuts\").remove();\n+        DateTimeShortcuts.init();\n+      }\n+    };\n+\n+    var updateSelectFilter = function() {\n+      // If any SelectFilter widgets were added, instantiate a new instance.\n+      if (typeof SelectFilter != \"undefined\"){\n+        $(\".selectfilter\").each(function(index, value){\n+          var namearr = value.name.split('-');\n+          SelectFilter.init(value.id, namearr[namearr.length-1], false, options.adminStaticPrefix);\n+        });\n+        $(\".selectfilterstacked\").each(function(index, value){\n+          var namearr = value.name.split('-');\n+          SelectFilter.init(value.id, namearr[namearr.length-1], true, options.adminStaticPrefix);\n+        });\n+      }\n+    };\n+\n+    var initPrepopulatedFields = function(row) {\n+      row.find('.prepopulated_field').each(function() {\n+        var field = $(this),\n+            input = field.find('input, select, textarea'),\n+            dependency_list = input.data('dependency_list') || [],\n+            dependencies = [];\n+        $.each(dependency_list, function(i, field_name) {\n+          dependencies.push('#' + row.find('.form-row .field-' + field_name).find('input, select, textarea').attr('id'));\n+        });\n+        if (dependencies.length) {\n+          input.prepopulate(dependencies, input.attr('maxlength'));\n+        }\n+      });\n+    };\n+\n+    $rows.formset({\n+      prefix: options.prefix,\n+      addText: options.addText,\n+      formCssClass: \"dynamic-\" + options.prefix,\n+      deleteCssClass: \"inline-deletelink\",\n+      deleteText: options.deleteText,\n+      emptyCssClass: \"empty-form\",\n+      removed: updateInlineLabel,\n+      added: (function(row) {\n+        initPrepopulatedFields(row);\n+        reinitDateTimeShortCuts();\n+        updateSelectFilter();\n+        updateInlineLabel(row);\n+      })\n+    });\n+\n+    return $rows;\n+  };\n })(django.jQuery);"
        },
        {
            "sha": "d48ee0a0984a0f68863cb3129175f9330c0c8f4d",
            "filename": "django/contrib/admin/static/admin/js/inlines.min.js",
            "status": "modified",
            "additions": 9,
            "deletions": 5,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.min.js",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.min.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.min.js?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,5 +1,9 @@\n-(function(b){b.fn.formset=function(g){var a=b.extend({},b.fn.formset.defaults,g),k=function(c,f,e){var d=RegExp(\"(\"+f+\"-(\\\\d+|__prefix__))\");f=f+\"-\"+e;b(c).attr(\"for\")&&b(c).attr(\"for\",b(c).attr(\"for\").replace(d,f));if(c.id)c.id=c.id.replace(d,f);if(c.name)c.name=c.name.replace(d,f)};g=b(\"#id_\"+a.prefix+\"-TOTAL_FORMS\").attr(\"autocomplete\",\"off\");var l=parseInt(g.val(),10),h=b(\"#id_\"+a.prefix+\"-MAX_NUM_FORMS\").attr(\"autocomplete\",\"off\");g=h.val()===\"\"||h.val()-g.val()>0;b(this).each(function(){b(this).not(\".\"+\n-a.emptyCssClass).addClass(a.formCssClass)});if(b(this).length&&g){var j;if(b(this).attr(\"tagName\")==\"TR\"){g=this.eq(-1).children().length;b(this).parent().append('<tr class=\"'+a.addCssClass+'\"><td colspan=\"'+g+'\"><a href=\"javascript:void(0)\">'+a.addText+\"</a></tr>\");j=b(this).parent().find(\"tr:last a\")}else{b(this).filter(\":last\").after('<div class=\"'+a.addCssClass+'\"><a href=\"javascript:void(0)\">'+a.addText+\"</a></div>\");j=b(this).filter(\":last\").next().find(\"a\")}j.click(function(c){c.preventDefault();\n-var f=b(\"#id_\"+a.prefix+\"-TOTAL_FORMS\");c=b(\"#\"+a.prefix+\"-empty\");var e=c.clone(true);e.removeClass(a.emptyCssClass).addClass(a.formCssClass).attr(\"id\",a.prefix+\"-\"+l);if(e.is(\"tr\"))e.children(\":last\").append('<div><a class=\"'+a.deleteCssClass+'\" href=\"javascript:void(0)\">'+a.deleteText+\"</a></div>\");else e.is(\"ul\")||e.is(\"ol\")?e.append('<li><a class=\"'+a.deleteCssClass+'\" href=\"javascript:void(0)\">'+a.deleteText+\"</a></li>\"):e.children(\":first\").append('<span><a class=\"'+a.deleteCssClass+'\" href=\"javascript:void(0)\">'+\n-a.deleteText+\"</a></span>\");e.find(\"*\").each(function(){k(this,a.prefix,f.val())});e.insertBefore(b(c));b(f).val(parseInt(f.val(),10)+1);l+=1;h.val()!==\"\"&&h.val()-f.val()<=0&&j.parent().hide();e.find(\"a.\"+a.deleteCssClass).click(function(d){d.preventDefault();d=b(this).parents(\".\"+a.formCssClass);d.remove();l-=1;a.removed&&a.removed(d);d=b(\".\"+a.formCssClass);b(\"#id_\"+a.prefix+\"-TOTAL_FORMS\").val(d.length);if(h.val()===\"\"||h.val()-d.length>0)j.parent().show();for(var i=0,m=d.length;i<m;i++){k(b(d).get(i),\n-a.prefix,i);b(d.get(i)).find(\"*\").each(function(){k(this,a.prefix,i)})}});a.added&&a.added(e)})}return this};b.fn.formset.defaults={prefix:\"form\",addText:\"add another\",deleteText:\"remove\",addCssClass:\"add-row\",deleteCssClass:\"delete-row\",emptyCssClass:\"empty-row\",formCssClass:\"dynamic-form\",added:null,removed:null}})(django.jQuery);\n+(function(b){b.fn.formset=function(d){var a=b.extend({},b.fn.formset.defaults,d),c=b(this),d=c.parent(),i=function(a,e,g){var d=RegExp(\"(\"+e+\"-(\\\\d+|__prefix__))\"),e=e+\"-\"+g;b(a).attr(\"for\")&&b(a).attr(\"for\",b(a).attr(\"for\").replace(d,e));a.id&&(a.id=a.id.replace(d,e));a.name&&(a.name=a.name.replace(d,e))},f=b(\"#id_\"+a.prefix+\"-TOTAL_FORMS\").attr(\"autocomplete\",\"off\"),g=parseInt(f.val(),10),e=b(\"#id_\"+a.prefix+\"-MAX_NUM_FORMS\").attr(\"autocomplete\",\"off\"),f=\"\"===e.val()||0<e.val()-f.val();c.each(function(){b(this).not(\".\"+\n+a.emptyCssClass).addClass(a.formCssClass)});if(c.length&&f){var h;\"TR\"==c.attr(\"tagName\")?(c=this.eq(-1).children().length,d.append('<tr class=\"'+a.addCssClass+'\"><td colspan=\"'+c+'\"><a href=\"javascript:void(0)\">'+a.addText+\"</a></tr>\"),h=d.find(\"tr:last a\")):(c.filter(\":last\").after('<div class=\"'+a.addCssClass+'\"><a href=\"javascript:void(0)\">'+a.addText+\"</a></div>\"),h=c.filter(\":last\").next().find(\"a\"));h.click(function(d){d.preventDefault();var f=b(\"#id_\"+a.prefix+\"-TOTAL_FORMS\"),d=b(\"#\"+a.prefix+\n+\"-empty\"),c=d.clone(true);c.removeClass(a.emptyCssClass).addClass(a.formCssClass).attr(\"id\",a.prefix+\"-\"+g);c.is(\"tr\")?c.children(\":last\").append('<div><a class=\"'+a.deleteCssClass+'\" href=\"javascript:void(0)\">'+a.deleteText+\"</a></div>\"):c.is(\"ul\")||c.is(\"ol\")?c.append('<li><a class=\"'+a.deleteCssClass+'\" href=\"javascript:void(0)\">'+a.deleteText+\"</a></li>\"):c.children(\":first\").append('<span><a class=\"'+a.deleteCssClass+'\" href=\"javascript:void(0)\">'+a.deleteText+\"</a></span>\");c.find(\"*\").each(function(){i(this,\n+a.prefix,f.val())});c.insertBefore(b(d));b(f).val(parseInt(f.val(),10)+1);g=g+1;e.val()!==\"\"&&e.val()-f.val()<=0&&h.parent().hide();c.find(\"a.\"+a.deleteCssClass).click(function(d){d.preventDefault();d=b(this).parents(\".\"+a.formCssClass);d.remove();g=g-1;a.removed&&a.removed(d);d=b(\".\"+a.formCssClass);b(\"#id_\"+a.prefix+\"-TOTAL_FORMS\").val(d.length);(e.val()===\"\"||e.val()-d.length>0)&&h.parent().show();for(var c=0,f=d.length;c<f;c++){i(b(d).get(c),a.prefix,c);b(d.get(c)).find(\"*\").each(function(){i(this,\n+a.prefix,c)})}});a.added&&a.added(c)})}return this};b.fn.formset.defaults={prefix:\"form\",addText:\"add another\",deleteText:\"remove\",addCssClass:\"add-row\",deleteCssClass:\"delete-row\",emptyCssClass:\"empty-row\",formCssClass:\"dynamic-form\",added:null,removed:null};b.fn.tabularFormset=function(d){var a=b(this),c=function(){b(a.selector).not(\".add-row\").removeClass(\"row1 row2\").filter(\":even\").addClass(\"row1\").end().filter(\":odd\").addClass(\"row2\")};a.formset({prefix:d.prefix,addText:d.addText,formCssClass:\"dynamic-\"+\n+d.prefix,deleteCssClass:\"inline-deletelink\",deleteText:d.deleteText,emptyCssClass:\"empty-form\",removed:c,added:function(a){a.find(\".prepopulated_field\").each(function(){var d=b(this).find(\"input, select, textarea\"),c=d.data(\"dependency_list\")||[],e=[];b.each(c,function(d,b){e.push(\"#\"+a.find(\".field-\"+b).find(\"input, select, textarea\").attr(\"id\"))});e.length&&d.prepopulate(e,d.attr(\"maxlength\"))});\"undefined\"!=typeof DateTimeShortcuts&&(b(\".datetimeshortcuts\").remove(),DateTimeShortcuts.init());\"undefined\"!=\n+typeof SelectFilter&&(b(\".selectfilter\").each(function(a,b){var c=b.name.split(\"-\");SelectFilter.init(b.id,c[c.length-1],false,d.adminStaticPrefix)}),b(\".selectfilterstacked\").each(function(a,b){var c=b.name.split(\"-\");SelectFilter.init(b.id,c[c.length-1],true,d.adminStaticPrefix)}));c(a)}});return a};b.fn.stackedFormset=function(d){var a=b(this),c=function(){b(a.selector).find(\".inline_label\").each(function(a){a+=1;b(this).html(b(this).html().replace(/(#\\d+)/g,\"#\"+a))})};a.formset({prefix:d.prefix,\n+addText:d.addText,formCssClass:\"dynamic-\"+d.prefix,deleteCssClass:\"inline-deletelink\",deleteText:d.deleteText,emptyCssClass:\"empty-form\",removed:c,added:function(a){a.find(\".prepopulated_field\").each(function(){var d=b(this).find(\"input, select, textarea\"),c=d.data(\"dependency_list\")||[],e=[];b.each(c,function(d,b){e.push(\"#\"+a.find(\".form-row .field-\"+b).find(\"input, select, textarea\").attr(\"id\"))});e.length&&d.prepopulate(e,d.attr(\"maxlength\"))});\"undefined\"!=typeof DateTimeShortcuts&&(b(\".datetimeshortcuts\").remove(),\n+DateTimeShortcuts.init());\"undefined\"!=typeof SelectFilter&&(b(\".selectfilter\").each(function(a,b){var c=b.name.split(\"-\");SelectFilter.init(b.id,c[c.length-1],false,d.adminStaticPrefix)}),b(\".selectfilterstacked\").each(function(a,b){var c=b.name.split(\"-\");SelectFilter.init(b.id,c[c.length-1],true,d.adminStaticPrefix)}));c(a)}});return a}})(django.jQuery);"
        },
        {
            "sha": "2025dd8083b3e058401e8dfc703fc7170296d225",
            "filename": "django/contrib/admin/templates/admin/edit_inline/stacked.html",
            "status": "modified",
            "additions": 6,
            "deletions": 58,
            "changes": 64,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Fstacked.html",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Fstacked.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Fstacked.html?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -20,63 +20,11 @@ <h3><b>{{ inline_admin_formset.opts.verbose_name|title }}:</b>&nbsp;<span class=\n \n <script type=\"text/javascript\">\n (function($) {\n-    $(document).ready(function() {\n-        var rows = \"#{{ inline_admin_formset.formset.prefix }}-group .inline-related\";\n-        var updateInlineLabel = function(row) {\n-            $(rows).find(\".inline_label\").each(function(i) {\n-                var count = i + 1;\n-                $(this).html($(this).html().replace(/(#\\d+)/g, \"#\" + count));\n-            });\n-        };\n-        var reinitDateTimeShortCuts = function() {\n-            // Reinitialize the calendar and clock widgets by force, yuck.\n-            if (typeof DateTimeShortcuts != \"undefined\") {\n-                $(\".datetimeshortcuts\").remove();\n-                DateTimeShortcuts.init();\n-            }\n-        };\n-        var updateSelectFilter = function() {\n-            // If any SelectFilter widgets were added, instantiate a new instance.\n-            if (typeof SelectFilter != \"undefined\"){\n-                $(\".selectfilter\").each(function(index, value){\n-                  var namearr = value.name.split('-');\n-                  SelectFilter.init(value.id, namearr[namearr.length-1], false, \"{% static \"admin/\" %}\");\n-                });\n-                $(\".selectfilterstacked\").each(function(index, value){\n-                  var namearr = value.name.split('-');\n-                  SelectFilter.init(value.id, namearr[namearr.length-1], true, \"{% static \"admin/\" %}\");\n-                });\n-            }\n-        };\n-        var initPrepopulatedFields = function(row) {\n-            row.find('.prepopulated_field').each(function() {\n-                var field = $(this);\n-                var input = field.find('input, select, textarea');\n-                var dependency_list = input.data('dependency_list') || [];\n-                var dependencies = [];\n-                $.each(dependency_list, function(i, field_name) {\n-                  dependencies.push('#' + row.find('.form-row .field-' + field_name).find('input, select, textarea').attr('id'));\n-                });\n-                if (dependencies.length) {\n-                    input.prepopulate(dependencies, input.attr('maxlength'));\n-                }\n-            });\n-        };\n-        $(rows).formset({\n-            prefix: \"{{ inline_admin_formset.formset.prefix }}\",\n-            addText: \"{% blocktrans with verbose_name=inline_admin_formset.opts.verbose_name|title %}Add another {{ verbose_name }}{% endblocktrans %}\",\n-            formCssClass: \"dynamic-{{ inline_admin_formset.formset.prefix }}\",\n-            deleteCssClass: \"inline-deletelink\",\n-            deleteText: \"{% trans \"Remove\" %}\",\n-            emptyCssClass: \"empty-form\",\n-            removed: updateInlineLabel,\n-            added: (function(row) {\n-                initPrepopulatedFields(row);\n-                reinitDateTimeShortCuts();\n-                updateSelectFilter();\n-                updateInlineLabel(row);\n-            })\n-        });\n-    });\n+  $(\"#{{ inline_admin_formset.formset.prefix }}-group .inline-related\").stackedFormset({\n+    prefix: '{{ inline_admin_formset.formset.prefix }}',\n+    adminStaticPrefix: '{% static \"admin/\" %}',\n+    deleteText: \"{% trans \"Remove\" %}\",\n+    addText: \"{% blocktrans with verbose_name=inline_admin_formset.opts.verbose_name|title %}Add another {{ verbose_name }}{% endblocktrans %}\"\n+  });\n })(django.jQuery);\n </script>"
        },
        {
            "sha": "f2757ede4882051f20e5a50633f04636d94972e3",
            "filename": "django/contrib/admin/templates/admin/edit_inline/tabular.html",
            "status": "modified",
            "additions": 7,
            "deletions": 58,
            "changes": 65,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -67,64 +67,13 @@ <h2>{{ inline_admin_formset.opts.verbose_name_plural|capfirst }}</h2>\n </div>\n \n <script type=\"text/javascript\">\n+\n (function($) {\n-    $(document).ready(function($) {\n-        var rows = \"#{{ inline_admin_formset.formset.prefix }}-group .tabular.inline-related tbody tr\";\n-        var alternatingRows = function(row) {\n-            $(rows).not(\".add-row\").removeClass(\"row1 row2\")\n-                .filter(\":even\").addClass(\"row1\").end()\n-                .filter(rows + \":odd\").addClass(\"row2\");\n-        }\n-        var reinitDateTimeShortCuts = function() {\n-            // Reinitialize the calendar and clock widgets by force\n-            if (typeof DateTimeShortcuts != \"undefined\") {\n-                $(\".datetimeshortcuts\").remove();\n-                DateTimeShortcuts.init();\n-            }\n-        }\n-        var updateSelectFilter = function() {\n-            // If any SelectFilter widgets are a part of the new form,\n-            // instantiate a new SelectFilter instance for it.\n-            if (typeof SelectFilter != \"undefined\"){\n-                $(\".selectfilter\").each(function(index, value){\n-                  var namearr = value.name.split('-');\n-                  SelectFilter.init(value.id, namearr[namearr.length-1], false, \"{% static \"admin/\" %}\");\n-                });\n-                $(\".selectfilterstacked\").each(function(index, value){\n-                  var namearr = value.name.split('-');\n-                  SelectFilter.init(value.id, namearr[namearr.length-1], true, \"{% static \"admin/\" %}\");\n-                });\n-            }\n-        }\n-        var initPrepopulatedFields = function(row) {\n-            row.find('.prepopulated_field').each(function() {\n-                var field = $(this);\n-                var input = field.find('input, select, textarea');\n-                var dependency_list = input.data('dependency_list') || [];\n-                var dependencies = [];\n-                $.each(dependency_list, function(i, field_name) {\n-                  dependencies.push('#' + row.find('.field-' + field_name).find('input, select, textarea').attr('id'));\n-                });\n-                if (dependencies.length) {\n-                    input.prepopulate(dependencies, input.attr('maxlength'));\n-                }\n-            });\n-        }\n-        $(rows).formset({\n-            prefix: \"{{ inline_admin_formset.formset.prefix }}\",\n-            addText: \"{% blocktrans with verbose_name=inline_admin_formset.opts.verbose_name|title %}Add another {{ verbose_name }}{% endblocktrans %}\",\n-            formCssClass: \"dynamic-{{ inline_admin_formset.formset.prefix }}\",\n-            deleteCssClass: \"inline-deletelink\",\n-            deleteText: \"{% trans \"Remove\" %}\",\n-            emptyCssClass: \"empty-form\",\n-            removed: alternatingRows,\n-            added: (function(row) {\n-                initPrepopulatedFields(row);\n-                reinitDateTimeShortCuts();\n-                updateSelectFilter();\n-                alternatingRows(row);\n-            })\n-        });\n-    });\n+  $(\"#{{ inline_admin_formset.formset.prefix }}-group .tabular.inline-related tbody tr\").tabularFormset({\n+    prefix: \"{{ inline_admin_formset.formset.prefix }}\",\n+    adminStaticPrefix: '{% static \"admin/\" %}',\n+    addText: \"{% blocktrans with inline_admin_formset.opts.verbose_name|title as verbose_name %}Add another {{ verbose_name }}{% endblocktrans %}\",\n+    deleteText: \"{% trans 'Remove' %}\"\n+  });\n })(django.jQuery);\n </script>"
        },
        {
            "sha": "ce435dea81858eb81b83fc9cf6c9029ee477f3fd",
            "filename": "django/contrib/admin/templatetags/admin_list.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -182,7 +182,7 @@ def items_for_result(cl, result, form):\n         row_class = ''\n         try:\n             f, attr, value = lookup_field(field_name, result, cl.model_admin)\n-        except (AttributeError, ObjectDoesNotExist):\n+        except ObjectDoesNotExist:\n             result_repr = EMPTY_CHANGELIST_VALUE\n         else:\n             if f is None:"
        },
        {
            "sha": "f95fe53de188aff6dea5861cfff4142bf2e7f05e",
            "filename": "django/contrib/admin/util.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fadmin%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Futil.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -4,7 +4,7 @@\n import decimal\n \n from django.db import models\n-from django.db.models.sql.constants import LOOKUP_SEP\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.deletion import Collector\n from django.db.models.related import RelatedObject\n from django.forms.forms import pretty_name"
        },
        {
            "sha": "11518193e7cc8d70043a2a35fd26e22d971b6323",
            "filename": "django/contrib/auth/decorators.py",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fdecorators.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fdecorators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fdecorators.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -8,6 +8,7 @@\n from django.core.exceptions import PermissionDenied\n from django.utils.decorators import available_attrs\n from django.utils.encoding import force_str\n+from django.shortcuts import resolve_url\n \n \n def user_passes_test(test_func, login_url=None, redirect_field_name=REDIRECT_FIELD_NAME):\n@@ -23,17 +24,19 @@ def _wrapped_view(request, *args, **kwargs):\n             if test_func(request.user):\n                 return view_func(request, *args, **kwargs)\n             path = request.build_absolute_uri()\n-            # urlparse chokes on lazy objects in Python 3\n-            login_url_as_str = force_str(login_url or settings.LOGIN_URL)\n+            # urlparse chokes on lazy objects in Python 3, force to str\n+            resolved_login_url = force_str(\n+                resolve_url(login_url or settings.LOGIN_URL))\n             # If the login url is the same scheme and net location then just\n             # use the path as the \"next\" url.\n-            login_scheme, login_netloc = urlparse(login_url_as_str)[:2]\n+            login_scheme, login_netloc = urlparse(resolved_login_url)[:2]\n             current_scheme, current_netloc = urlparse(path)[:2]\n             if ((not login_scheme or login_scheme == current_scheme) and\n                 (not login_netloc or login_netloc == current_netloc)):\n                 path = request.get_full_path()\n             from django.contrib.auth.views import redirect_to_login\n-            return redirect_to_login(path, login_url, redirect_field_name)\n+            return redirect_to_login(\n+                path, resolved_login_url, redirect_field_name)\n         return _wrapped_view\n     return decorator\n "
        },
        {
            "sha": "08488237c79a7377f046619702cf51f9f8dfc140",
            "filename": "django/contrib/auth/forms.py",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fforms.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -11,7 +11,7 @@\n \n from django.contrib.auth import authenticate\n from django.contrib.auth.models import User\n-from django.contrib.auth.hashers import UNUSABLE_PASSWORD, is_password_usable, identify_hasher\n+from django.contrib.auth.hashers import UNUSABLE_PASSWORD, identify_hasher\n from django.contrib.auth.tokens import default_token_generator\n from django.contrib.sites.models import get_current_site\n \n@@ -24,22 +24,22 @@\n class ReadOnlyPasswordHashWidget(forms.Widget):\n     def render(self, name, value, attrs):\n         encoded = value\n-\n-        if not is_password_usable(encoded):\n-            return \"None\"\n-\n         final_attrs = self.build_attrs(attrs)\n \n-        try:\n-            hasher = identify_hasher(encoded)\n-        except ValueError:\n-            summary = mark_safe(\"<strong>Invalid password format or unknown hashing algorithm.</strong>\")\n+        if encoded == '' or encoded == UNUSABLE_PASSWORD:\n+            summary = mark_safe(\"<strong>%s</strong>\" % ugettext(\"No password set.\"))\n         else:\n-            summary = format_html_join('',\n-                                       \"<strong>{0}</strong>: {1} \",\n-                                       ((ugettext(key), value)\n-                                        for key, value in hasher.safe_summary(encoded).items())\n-                                       )\n+            try:\n+                hasher = identify_hasher(encoded)\n+            except ValueError:\n+                summary = mark_safe(\"<strong>%s</strong>\" % ugettext(\n+                    \"Invalid password format or unknown hashing algorithm.\"))\n+            else:\n+                summary = format_html_join('',\n+                                           \"<strong>{0}</strong>: {1} \",\n+                                           ((ugettext(key), value)\n+                                            for key, value in hasher.safe_summary(encoded).items())\n+                                           )\n \n         return format_html(\"<div{0}>{1}</div>\", flatatt(final_attrs), summary)\n "
        },
        {
            "sha": "c628059d34da0ed334ffdbaccd14966e9606f50a",
            "filename": "django/contrib/auth/hashers.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fhashers.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fhashers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fhashers.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -28,7 +28,13 @@ def reset_hashers(**kwargs):\n \n \n def is_password_usable(encoded):\n-    return (encoded is not None and encoded != UNUSABLE_PASSWORD)\n+    if encoded is None or encoded == UNUSABLE_PASSWORD:\n+        return False\n+    try:\n+        hasher = identify_hasher(encoded)\n+    except ValueError:\n+        return False\n+    return True\n \n \n def check_password(password, encoded, setter=None, preferred='default'):"
        },
        {
            "sha": "98eb44ea05aeec2dcf227fbcd0ae61750dd75fbf",
            "filename": "django/contrib/auth/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fmodels.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -25,7 +25,7 @@ def update_last_login(sender, user, **kwargs):\n     the user logging in.\n     \"\"\"\n     user.last_login = timezone.now()\n-    user.save()\n+    user.save(update_fields=['last_login'])\n user_logged_in.connect(update_last_login)\n \n "
        },
        {
            "sha": "cefc310e40cf0494dce08d3f59de5b0e24171da1",
            "filename": "django/contrib/auth/tests/decorators.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Ftests%2Fdecorators.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Ftests%2Fdecorators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fdecorators.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -25,7 +25,7 @@ def normal_view(request):\n             pass\n         login_required(normal_view)\n \n-    def testLoginRequired(self, view_url='/login_required/', login_url=settings.LOGIN_URL):\n+    def testLoginRequired(self, view_url='/login_required/', login_url='/login/'):\n         \"\"\"\n         Check that login_required works on a simple view wrapped in a\n         login_required decorator."
        },
        {
            "sha": "74aa47e199829dcc2dc27a70c51395e7167d7a3e",
            "filename": "django/contrib/auth/tests/forms.py",
            "status": "modified",
            "additions": 12,
            "deletions": 6,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -236,23 +236,29 @@ class Meta(UserChangeForm.Meta):\n         # Just check we can create it\n         form = MyUserForm({})\n \n+    def test_unsuable_password(self):\n+        user = User.objects.get(username='empty_password')\n+        user.set_unusable_password()\n+        user.save()\n+        form = UserChangeForm(instance=user)\n+        self.assertIn(_(\"No password set.\"), form.as_table())\n+\n     def test_bug_17944_empty_password(self):\n         user = User.objects.get(username='empty_password')\n         form = UserChangeForm(instance=user)\n-        # Just check that no error is raised.\n-        form.as_table()\n+        self.assertIn(_(\"No password set.\"), form.as_table())\n \n     def test_bug_17944_unmanageable_password(self):\n         user = User.objects.get(username='unmanageable_password')\n         form = UserChangeForm(instance=user)\n-        # Just check that no error is raised.\n-        form.as_table()\n+        self.assertIn(_(\"Invalid password format or unknown hashing algorithm.\"),\n+            form.as_table())\n \n     def test_bug_17944_unknown_password_algorithm(self):\n         user = User.objects.get(username='unknown_password')\n         form = UserChangeForm(instance=user)\n-        # Just check that no error is raised.\n-        form.as_table()\n+        self.assertIn(_(\"Invalid password format or unknown hashing algorithm.\"),\n+            form.as_table())\n \n \n @override_settings(USE_TZ=False, PASSWORD_HASHERS=('django.contrib.auth.hashers.SHA1PasswordHasher',))"
        },
        {
            "sha": "d867a57d985ebc047940083a55c4227a14269228",
            "filename": "django/contrib/auth/tests/hashers.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Ftests%2Fhashers.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Ftests%2Fhashers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fhashers.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -100,6 +100,10 @@ def doit():\n         self.assertRaises(ValueError, doit)\n         self.assertRaises(ValueError, identify_hasher, \"lolcat$salt$hash\")\n \n+    def test_bad_encoded(self):\n+        self.assertFalse(is_password_usable('letmein_badencoded'))\n+        self.assertFalse(is_password_usable(''))\n+\n     def test_low_level_pkbdf2(self):\n         hasher = PBKDF2PasswordHasher()\n         encoded = hasher.encode('letmein', 'seasalt')"
        },
        {
            "sha": "e3402b13b9bde8d40aa44f1bfb39510cafb40c98",
            "filename": "django/contrib/auth/tests/views.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,7 +1,7 @@\n import os\n import re\n \n-from django.conf import settings\n+from django.conf import global_settings, settings\n from django.contrib.sites.models import Site, RequestSite\n from django.contrib.auth.models import User\n from django.core import mail\n@@ -23,7 +23,8 @@\n         ('en', 'English'),\n     ),\n     LANGUAGE_CODE='en',\n-    TEMPLATE_DIRS = (\n+    TEMPLATE_LOADERS=global_settings.TEMPLATE_LOADERS,\n+    TEMPLATE_DIRS=(\n         os.path.join(os.path.dirname(__file__), 'templates'),\n     ),\n     USE_TZ=False,"
        },
        {
            "sha": "024be5e46d7f8d778aa918ef9b35fec684f6c397",
            "filename": "django/contrib/auth/views.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fauth%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fviews.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -7,9 +7,9 @@\n from django.core.urlresolvers import reverse\n from django.http import HttpResponseRedirect, QueryDict\n from django.template.response import TemplateResponse\n-from django.utils.encoding import force_str\n from django.utils.http import base36_to_int\n from django.utils.translation import ugettext as _\n+from django.shortcuts import resolve_url\n from django.views.decorators.debug import sensitive_post_parameters\n from django.views.decorators.cache import never_cache\n from django.views.decorators.csrf import csrf_protect\n@@ -38,16 +38,16 @@ def login(request, template_name='registration/login.html',\n     if request.method == \"POST\":\n         form = authentication_form(data=request.POST)\n         if form.is_valid():\n-            netloc = urlparse(redirect_to)[1]\n-\n             # Use default setting if redirect_to is empty\n             if not redirect_to:\n                 redirect_to = settings.LOGIN_REDIRECT_URL\n+            redirect_to = resolve_url(redirect_to)\n \n+            netloc = urlparse(redirect_to)[1]\n             # Heavier security check -- don't allow redirection to a different\n             # host.\n-            elif netloc and netloc != request.get_host():\n-                redirect_to = settings.LOGIN_REDIRECT_URL\n+            if netloc and netloc != request.get_host():\n+                redirect_to = resolve_url(settings.LOGIN_REDIRECT_URL)\n \n             # Okay, security checks complete. Log the user in.\n             auth_login(request, form.get_user())\n@@ -110,17 +110,17 @@ def logout_then_login(request, login_url=None, current_app=None, extra_context=N\n     \"\"\"\n     if not login_url:\n         login_url = settings.LOGIN_URL\n+    login_url = resolve_url(login_url)\n     return logout(request, login_url, current_app=current_app, extra_context=extra_context)\n \n def redirect_to_login(next, login_url=None,\n                       redirect_field_name=REDIRECT_FIELD_NAME):\n     \"\"\"\n     Redirects the user to the login page, passing the given 'next' page\n     \"\"\"\n-    # urlparse chokes on lazy objects in Python 3\n-    login_url_as_str = force_str(login_url or settings.LOGIN_URL)\n+    resolved_url = resolve_url(login_url or settings.LOGIN_URL)\n \n-    login_url_parts = list(urlparse(login_url_as_str))\n+    login_url_parts = list(urlparse(resolved_url))\n     if redirect_field_name:\n         querystring = QueryDict(login_url_parts[4], mutable=True)\n         querystring[redirect_field_name] = next\n@@ -229,7 +229,7 @@ def password_reset_complete(request,\n                             template_name='registration/password_reset_complete.html',\n                             current_app=None, extra_context=None):\n     context = {\n-        'login_url': settings.LOGIN_URL\n+        'login_url': resolve_url(settings.LOGIN_URL)\n     }\n     if extra_context is not None:\n         context.update(extra_context)"
        },
        {
            "sha": "2b8924d92e8cc3f6044e74317c80b96292f19a5d",
            "filename": "django/contrib/gis/db/backends/base.py",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fbase.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -90,8 +90,6 @@ def convert_geom(self, geom_val, geom_field):\n \n     # For quoting column values, rather than columns.\n     def geo_quote_name(self, name):\n-        if isinstance(name, six.text_type):\n-            name = name.encode('ascii')\n         return \"'%s'\" % name\n \n     # GeometryField operations"
        },
        {
            "sha": "2fc9123d269ccdeab9bbcfed16f5cd11089d4d9c",
            "filename": "django/contrib/gis/db/backends/util.py",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Futil.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -3,20 +3,6 @@\n backends.\n \"\"\"\n \n-from django.utils import six\n-\n-def gqn(val):\n-    \"\"\"\n-    The geographic quote name function; used for quoting tables and\n-    geometries (they use single rather than the double quotes of the\n-    backend quotename function).\n-    \"\"\"\n-    if isinstance(val, six.string_types):\n-        if isinstance(val, six.text_type): val = val.encode('ascii')\n-        return \"'%s'\" % val\n-    else:\n-        return str(val)\n-\n class SpatialOperation(object):\n     \"\"\"\n     Base class for generating spatial SQL."
        },
        {
            "sha": "ec078aebedfb702b797b3198f976a42470106223",
            "filename": "django/contrib/gis/db/models/sql/where.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fwhere.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fwhere.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fwhere.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,5 +1,5 @@\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.fields import FieldDoesNotExist\n-from django.db.models.sql.constants import LOOKUP_SEP\n from django.db.models.sql.expressions import SQLEvaluator\n from django.db.models.sql.where import Constraint, WhereNode\n from django.contrib.gis.db.models.fields import GeometryField"
        },
        {
            "sha": "22394a2888fa53e9e470220586b7c422500fc62c",
            "filename": "django/contrib/gis/gdal/tests/test_ds.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgdal%2Ftests%2Ftest_ds.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgdal%2Ftests%2Ftest_ds.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2Ftests%2Ftest_ds.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -181,7 +181,11 @@ def test05_geometries(self):\n \n                     # Making sure the SpatialReference is as expected.\n                     if hasattr(source, 'srs_wkt'):\n-                        self.assertEqual(source.srs_wkt, g.srs.wkt)\n+                        self.assertEqual(\n+                            source.srs_wkt,\n+                            # Depending on lib versions, WGS_84 might be WGS_1984\n+                            g.srs.wkt.replace('SPHEROID[\"WGS_84\"', 'SPHEROID[\"WGS_1984\"')\n+                        )\n \n     def test06_spatial_filter(self):\n         \"Testing the Layer.spatial_filter property.\""
        },
        {
            "sha": "dda22036e352d265a7050eb4436c1fd55dfbd9db",
            "filename": "django/contrib/gis/gdal/tests/test_geom.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgdal%2Ftests%2Ftest_geom.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgdal%2Ftests%2Ftest_geom.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2Ftests%2Ftest_geom.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,3 +1,4 @@\n+import json\n from binascii import b2a_hex\n try:\n     from django.utils.six.moves import cPickle as pickle\n@@ -111,8 +112,9 @@ def test01e_json(self):\n         for g in self.geometries.json_geoms:\n             geom = OGRGeometry(g.wkt)\n             if not hasattr(g, 'not_equal'):\n-                self.assertEqual(g.json, geom.json)\n-                self.assertEqual(g.json, geom.geojson)\n+                # Loading jsons to prevent decimal differences\n+                self.assertEqual(json.loads(g.json), json.loads(geom.json))\n+                self.assertEqual(json.loads(g.json), json.loads(geom.geojson))\n             self.assertEqual(OGRGeometry(g.wkt), OGRGeometry(geom.json))\n \n     def test02_points(self):"
        },
        {
            "sha": "aed6cf366ce68f897fd5bc89a0ac488ed888c992",
            "filename": "django/contrib/gis/geos/libgeos.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Flibgeos.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Flibgeos.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Flibgeos.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -110,7 +110,7 @@ def geos_version_info():\n     is a release candidate (and what number release candidate), and the C API\n     version.\n     \"\"\"\n-    ver = geos_version()\n+    ver = geos_version().decode()\n     m = version_regex.match(ver)\n     if not m: raise GEOSException('Could not parse version info string \"%s\"' % ver)\n     return dict((key, m.group(key)) for key in ('version', 'release_candidate', 'capi_version', 'major', 'minor', 'subminor'))"
        },
        {
            "sha": "820cdfa5a4760cca206f2fb73d72cfe736ff1487",
            "filename": "django/contrib/gis/geos/mutable_list.py",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Fmutable_list.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Fmutable_list.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Fmutable_list.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -215,15 +215,18 @@ def reverse(self):\n         \"Standard list reverse method\"\n         self[:] = self[-1::-1]\n \n-    def sort(self, cmp=cmp, key=None, reverse=False):\n+    def sort(self, cmp=None, key=None, reverse=False):\n         \"Standard list sort method\"\n         if key:\n             temp = [(key(v),v) for v in self]\n-            temp.sort(cmp=cmp, key=lambda x: x[0], reverse=reverse)\n+            temp.sort(key=lambda x: x[0], reverse=reverse)\n             self[:] = [v[1] for v in temp]\n         else:\n             temp = list(self)\n-            temp.sort(cmp=cmp, reverse=reverse)\n+            if cmp is not None:\n+                temp.sort(cmp=cmp, reverse=reverse)\n+            else:\n+                temp.sort(reverse=reverse)\n             self[:] = temp\n \n     ### Private routines ###"
        },
        {
            "sha": "6b715d8c597e8bdccdbe3a03fae0ea034a419b59",
            "filename": "django/contrib/gis/geos/tests/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2F__init__.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -16,7 +16,8 @@\n def suite():\n     \"Builds a test suite for the GEOS tests.\"\n     s = TestSuite()\n-    map(s.addTest, test_suites)\n+    for suite in test_suites:\n+        s.addTest(suite)\n     return s\n \n def run(verbosity=1):"
        },
        {
            "sha": "7300ab9c639c024d5050a6a2dc1f47ad643881d6",
            "filename": "django/contrib/gis/geos/tests/test_geos.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,4 +1,5 @@\n import ctypes\n+import json\n import random\n \n from django.contrib.gis.geos import (GEOSException, GEOSIndexError, GEOSGeometry,\n@@ -204,8 +205,9 @@ def test_json(self):\n         for g in self.geometries.json_geoms:\n             geom = GEOSGeometry(g.wkt)\n             if not hasattr(g, 'not_equal'):\n-                self.assertEqual(g.json, geom.json)\n-                self.assertEqual(g.json, geom.geojson)\n+                # Loading jsons to prevent decimal differences\n+                self.assertEqual(json.loads(g.json), json.loads(geom.json))\n+                self.assertEqual(json.loads(g.json), json.loads(geom.geojson))\n             self.assertEqual(GEOSGeometry(g.wkt), GEOSGeometry(geom.json))\n \n     def test_fromfile(self):"
        },
        {
            "sha": "675505f0f93c686692822afed172cf1fb87bc7f2",
            "filename": "django/contrib/gis/geos/tests/test_mutable_list.py",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_mutable_list.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_mutable_list.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_mutable_list.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -55,14 +55,14 @@ class ListMixinTest(unittest.TestCase):\n \n     def lists_of_len(self, length=None):\n         if length is None: length = self.limit\n-        pl = range(length)\n+        pl = list(range(length))\n         return pl, self.listType(pl)\n \n     def limits_plus(self, b):\n         return range(-self.limit - b, self.limit + b)\n \n     def step_range(self):\n-        return range(-1 - self.limit, 0) + range(1, 1 + self.limit)\n+        return list(range(-1 - self.limit, 0)) + list(range(1, 1 + self.limit))\n \n     def test01_getslice(self):\n         'Slice retrieval'\n@@ -160,13 +160,13 @@ def test03_delslice(self):\n                     del pl[i:j]\n                     del ul[i:j]\n                     self.assertEqual(pl[:], ul[:], 'del slice [%d:%d]' % (i,j))\n-                    for k in range(-Len - 1,0) + range(1,Len):\n+                    for k in list(range(-Len - 1, 0)) + list(range(1, Len)):\n                         pl, ul = self.lists_of_len(Len)\n                         del pl[i:j:k]\n                         del ul[i:j:k]\n                         self.assertEqual(pl[:], ul[:], 'del slice [%d:%d:%d]' % (i,j,k))\n \n-                for k in range(-Len - 1,0) + range(1,Len):\n+                for k in list(range(-Len - 1, 0)) + list(range(1, Len)):\n                     pl, ul = self.lists_of_len(Len)\n                     del pl[:i:k]\n                     del ul[:i:k]\n@@ -177,7 +177,7 @@ def test03_delslice(self):\n                     del ul[i::k]\n                     self.assertEqual(pl[:], ul[:], 'del slice [%d::%d]' % (i,k))\n \n-            for k in range(-Len - 1,0) + range(1,Len):\n+            for k in list(range(-Len - 1, 0)) + list(range(1, Len)):\n                 pl, ul = self.lists_of_len(Len)\n                 del pl[::k]\n                 del ul[::k]\n@@ -320,7 +320,7 @@ def test_11_sorting(self):\n         pl.sort()\n         ul.sort()\n         self.assertEqual(pl[:], ul[:], 'sort')\n-        mid = pl[len(pl) / 2]\n+        mid = pl[len(pl) // 2]\n         pl.sort(key=lambda x: (mid-x)**2)\n         ul.sort(key=lambda x: (mid-x)**2)\n         self.assertEqual(pl[:], ul[:], 'sort w/ key')\n@@ -330,15 +330,15 @@ def test_11_sorting(self):\n         pl.sort(reverse=True)\n         ul.sort(reverse=True)\n         self.assertEqual(pl[:], ul[:], 'sort w/ reverse')\n-        mid = pl[len(pl) / 2]\n+        mid = pl[len(pl) // 2]\n         pl.sort(key=lambda x: (mid-x)**2)\n         ul.sort(key=lambda x: (mid-x)**2)\n         self.assertEqual(pl[:], ul[:], 'sort w/ key')\n \n     def test_12_arithmetic(self):\n         'Arithmetic'\n         pl, ul = self.lists_of_len()\n-        al = range(10,14)\n+        al = list(range(10,14))\n         self.assertEqual(list(pl + al), list(ul + al), 'add')\n         self.assertEqual(type(ul), type(ul + al), 'type of add result')\n         self.assertEqual(list(al + pl), list(al + ul), 'radd')"
        },
        {
            "sha": "cd3cec3074bdda1501f7427eb675eaa4c779df1e",
            "filename": "django/contrib/gis/tests/geoapp/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Fgeoapp%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -191,7 +191,8 @@ def test_raw_sql_query(self):\n         cities1 = City.objects.all()\n         # Only PostGIS would support a 'select *' query because of its recognized\n         # HEXEWKB format for geometry fields\n-        cities2 = City.objects.raw('select id, name, asText(point) from geoapp_city')\n+        as_text = 'ST_AsText' if postgis else 'asText'\n+        cities2 = City.objects.raw('select id, name, %s(point) from geoapp_city' % as_text)\n         self.assertEqual(len(cities1), len(list(cities2)))\n         self.assertTrue(isinstance(cities2[0].point, Point))\n "
        },
        {
            "sha": "7f7a0111f1e86d6a89683a520a25f077f9a21919",
            "filename": "django/contrib/gis/tests/test_spatialrefsys.py",
            "status": "modified",
            "additions": 12,
            "deletions": 20,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Ftests%2Ftest_spatialrefsys.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fgis%2Ftests%2Ftest_spatialrefsys.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Ftest_spatialrefsys.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -8,9 +8,11 @@\n test_srs = ({'srid' : 4326,\n              'auth_name' : ('EPSG', True),\n              'auth_srid' : 4326,\n-             'srtext' : 'GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]]',\n-             'srtext14' : 'GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4326\"]]',\n-             'proj4' : '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ',\n+             # Only the beginning, because there are differences depending on installed libs\n+             'srtext' : 'GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\"',\n+             'proj4' : ['+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ',\n+                        # +ellps=WGS84 has been removed in the 4326 proj string in proj-4.8\n+                        '+proj=longlat +datum=WGS84 +no_defs '],\n              'spheroid' : 'WGS 84', 'name' : 'WGS 84',\n              'geographic' : True, 'projected' : False, 'spatialite' : True,\n              'ellipsoid' : (6378137.0, 6356752.3, 298.257223563), # From proj's \"cs2cs -le\" and Wikipedia (semi-minor only)\n@@ -19,9 +21,9 @@\n             {'srid' : 32140,\n              'auth_name' : ('EPSG', False),\n              'auth_srid' : 32140,\n-             'srtext' : 'PROJCS[\"NAD83 / Texas South Central\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4269\"]],PROJECTION[\"Lambert_Conformal_Conic_2SP\"],PARAMETER[\"standard_parallel_1\",30.28333333333333],PARAMETER[\"standard_parallel_2\",28.38333333333333],PARAMETER[\"latitude_of_origin\",27.83333333333333],PARAMETER[\"central_meridian\",-99],PARAMETER[\"false_easting\",600000],PARAMETER[\"false_northing\",4000000],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AUTHORITY[\"EPSG\",\"32140\"]]',\n-             'srtext14': 'PROJCS[\"NAD83 / Texas South Central\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4269\"]],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],PROJECTION[\"Lambert_Conformal_Conic_2SP\"],PARAMETER[\"standard_parallel_1\",30.28333333333333],PARAMETER[\"standard_parallel_2\",28.38333333333333],PARAMETER[\"latitude_of_origin\",27.83333333333333],PARAMETER[\"central_meridian\",-99],PARAMETER[\"false_easting\",600000],PARAMETER[\"false_northing\",4000000],AUTHORITY[\"EPSG\",\"32140\"],AXIS[\"X\",EAST],AXIS[\"Y\",NORTH]]',\n-             'proj4' : '+proj=lcc +lat_1=30.28333333333333 +lat_2=28.38333333333333 +lat_0=27.83333333333333 +lon_0=-99 +x_0=600000 +y_0=4000000 +ellps=GRS80 +datum=NAD83 +units=m +no_defs ',\n+             'srtext' : 'PROJCS[\"NAD83 / Texas South Central\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\"',\n+             'proj4' : ['+proj=lcc +lat_1=30.28333333333333 +lat_2=28.38333333333333 +lat_0=27.83333333333333 +lon_0=-99 +x_0=600000 +y_0=4000000 +ellps=GRS80 +datum=NAD83 +units=m +no_defs ',\n+                        '+proj=lcc +lat_1=30.28333333333333 +lat_2=28.38333333333333 +lat_0=27.83333333333333 +lon_0=-99 +x_0=600000 +y_0=4000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs '],\n              'spheroid' : 'GRS 1980', 'name' : 'NAD83 / Texas South Central',\n              'geographic' : False, 'projected' : True, 'spatialite' : False,\n              'ellipsoid' : (6378137.0, 6356752.31414, 298.257222101), # From proj's \"cs2cs -le\" and Wikipedia (semi-minor only)\n@@ -51,17 +53,12 @@ def test01_retrieve(self):\n \n             # No proj.4 and different srtext on oracle backends :(\n             if postgis:\n-                if connection.ops.spatial_version >= (1, 4, 0):\n-                    srtext = sd['srtext14']\n-                else:\n-                    srtext = sd['srtext']\n-                self.assertEqual(srtext, srs.wkt)\n-                self.assertEqual(sd['proj4'], srs.proj4text)\n+                self.assertTrue(srs.wkt.startswith(sd['srtext']))\n+                self.assertTrue(srs.proj4text in sd['proj4'])\n \n     @no_mysql\n     def test02_osr(self):\n         \"Testing getting OSR objects from SpatialRefSys model objects.\"\n-        from django.contrib.gis.gdal import GDAL_VERSION\n         for sd in test_srs:\n             sr = SpatialRefSys.objects.get(srid=sd['srid'])\n             self.assertEqual(True, sr.spheroid.startswith(sd['spheroid']))\n@@ -76,15 +73,10 @@ def test02_osr(self):\n             # Testing the SpatialReference object directly.\n             if postgis or spatialite:\n                 srs = sr.srs\n-                if GDAL_VERSION <= (1, 8):\n-                    self.assertEqual(sd['proj4'], srs.proj4)\n+                self.assertTrue(srs.proj4 in sd['proj4'])\n                 # No `srtext` field in the `spatial_ref_sys` table in SpatiaLite\n                 if not spatialite:\n-                    if connection.ops.spatial_version >= (1, 4, 0):\n-                        srtext = sd['srtext14']\n-                    else:\n-                        srtext = sd['srtext']\n-                    self.assertEqual(srtext, srs.wkt)\n+                    self.assertTrue(srs.wkt.startswith(sd['srtext']))\n \n     @no_mysql\n     def test03_ellipsoid(self):"
        },
        {
            "sha": "389c919c07a5b774f71ea34bda476fc0863fd357",
            "filename": "django/contrib/markup/templatetags/markup.py",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmarkup%2Ftemplatetags%2Fmarkup.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -47,6 +47,9 @@ def markdown(value, arg=''):\n     they will be silently ignored.\n \n     \"\"\"\n+    import warnings\n+    warnings.warn('The markdown filter has been deprecated',\n+                  category=DeprecationWarning)\n     try:\n         import markdown\n     except ImportError:\n@@ -72,6 +75,9 @@ def markdown(value, arg=''):\n \n @register.filter(is_safe=True)\n def restructuredtext(value):\n+    import warnings\n+    warnings.warn('The restructuredtext filter has been deprecated',\n+                  category=DeprecationWarning)\n     try:\n         from docutils.core import publish_parts\n     except ImportError:"
        },
        {
            "sha": "19a3b7e9d002dec9481fbba4bede8bb58686795e",
            "filename": "django/contrib/markup/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fmarkup%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fmarkup%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmarkup%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,7 +1,9 @@\n # Quick tests for the markup templatetags (django.contrib.markup)\n import re\n+import warnings\n \n from django.template import Template, Context\n+from django import test\n from django.utils import unittest\n from django.utils.html import escape\n \n@@ -21,7 +23,7 @@\n except ImportError:\n     docutils = None\n \n-class Templates(unittest.TestCase):\n+class Templates(test.TestCase):\n \n     textile_content = \"\"\"Paragraph 1\n \n@@ -37,6 +39,13 @@ class Templates(unittest.TestCase):\n \n .. _link: http://www.example.com/\"\"\"\n \n+    def setUp(self):\n+        self.save_warnings_state()\n+        warnings.filterwarnings('ignore', category=DeprecationWarning, module='django.contrib.markup')\n+\n+    def tearDown(self):\n+        self.restore_warnings_state()\n+\n     @unittest.skipUnless(textile, 'textile not installed')\n     def test_textile(self):\n         t = Template(\"{% load markup %}{{ textile_content|textile }}\")"
        },
        {
            "sha": "6b5b016234a6598f9e825007646dcfd88ca939d8",
            "filename": "django/contrib/messages/storage/cookie.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -46,10 +46,10 @@ class CookieStorage(BaseStorage):\n     Stores messages in a cookie.\n     \"\"\"\n     cookie_name = 'messages'\n-    # We should be able to store 4K in a cookie, but Internet Explorer\n-    # imposes 4K as the *total* limit for a domain.  To allow other\n-    # cookies, we go for 3/4 of 4K.\n-    max_cookie_size = 3072\n+    # uwsgi's default configuration enforces a maximum size of 4kb for all the\n+    # HTTP headers. In order to leave some room for other cookies and headers,\n+    # restrict the session cookie to 1/2 of 4kb. See #18781.\n+    max_cookie_size = 2048\n     not_finished = '__messagesnotfinished__'\n \n     def _get(self, *args, **kwargs):"
        },
        {
            "sha": "b3ced12773b4ec03a3b7d0cf4bf93577c714daa8",
            "filename": "django/contrib/messages/tests/base.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fmessages%2Ftests%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fmessages%2Ftests%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmessages%2Ftests%2Fbase.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -152,7 +152,7 @@ def test_full_request_response_cycle(self):\n         cycle.\n         \"\"\"\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show')\n         for level in ('debug', 'info', 'success', 'warning', 'error'):\n@@ -170,7 +170,7 @@ def test_full_request_response_cycle(self):\n     @override_settings(MESSAGE_LEVEL=constants.DEBUG)\n     def test_with_template_response(self):\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show_template_response')\n         for level in self.levels.keys():\n@@ -194,7 +194,7 @@ def test_multiple_posts(self):\n         before a GET.\n         \"\"\"\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show')\n         messages = []\n@@ -226,7 +226,7 @@ def test_middleware_disabled(self):\n         when one attempts to store a message.\n         \"\"\"\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show')\n         for level in ('debug', 'info', 'success', 'warning', 'error'):\n@@ -251,7 +251,7 @@ def test_middleware_disabled_fail_silently(self):\n         raised if 'fail_silently' = True\n         \"\"\"\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n             'fail_silently': True,\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show')"
        },
        {
            "sha": "9aa602f41664d1493c6f7b8526c64dce85061cf8",
            "filename": "django/contrib/sessions/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fsessions%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcontrib%2Fsessions%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsessions%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,4 +1,4 @@\n-from datetime import datetime, timedelta\n+from datetime import timedelta\n import shutil\n import string\n import tempfile\n@@ -302,11 +302,11 @@ def test_exists_searches_cache_first(self):\n             self.assertTrue(self.session.exists(self.session.session_key))\n \n     def test_load_overlong_key(self):\n-        with warnings.catch_warnings(record=True) as w:\n-            warnings.simplefilter(\"always\")\n+        # Some backends might issue a warning\n+        with warnings.catch_warnings():\n+            warnings.simplefilter(\"ignore\")\n             self.session._session_key = (string.ascii_letters + string.digits) * 20\n             self.assertEqual(self.session.load(), {})\n-            self.assertEqual(len(w), 1)\n \n \n @override_settings(USE_TZ=True)\n@@ -352,11 +352,11 @@ class CacheSessionTests(SessionTestsMixin, unittest.TestCase):\n     backend = CacheSession\n \n     def test_load_overlong_key(self):\n-        with warnings.catch_warnings(record=True) as w:\n-            warnings.simplefilter(\"always\")\n+        # Some backends might issue a warning\n+        with warnings.catch_warnings():\n+            warnings.simplefilter(\"ignore\")\n             self.session._session_key = (string.ascii_letters + string.digits) * 20\n             self.assertEqual(self.session.load(), {})\n-            self.assertEqual(len(w), 1)\n \n \n class SessionMiddlewareTests(unittest.TestCase):"
        },
        {
            "sha": "7a32a3dac7499bde134fcc187c99ba1f5db2f20f",
            "filename": "django/core/handlers/wsgi.py",
            "status": "modified",
            "additions": 11,
            "deletions": 12,
            "changes": 23,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fhandlers%2Fwsgi.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -223,18 +223,17 @@ def __call__(self, environ, start_response):\n         set_script_prefix(base.get_script_name(environ))\n         signals.request_started.send(sender=self.__class__)\n         try:\n-            try:\n-                request = self.request_class(environ)\n-            except UnicodeDecodeError:\n-                logger.warning('Bad Request (UnicodeDecodeError)',\n-                    exc_info=sys.exc_info(),\n-                    extra={\n-                        'status_code': 400,\n-                    }\n-                )\n-                response = http.HttpResponseBadRequest()\n-            else:\n-                response = self.get_response(request)\n+            request = self.request_class(environ)\n+        except UnicodeDecodeError:\n+            logger.warning('Bad Request (UnicodeDecodeError)',\n+                exc_info=sys.exc_info(),\n+                extra={\n+                    'status_code': 400,\n+                }\n+            )\n+            response = http.HttpResponseBadRequest()\n+        else:\n+            response = self.get_response(request)\n         finally:\n             signals.request_finished.send(sender=self.__class__)\n "
        },
        {
            "sha": "b40570efc9e0ee73efe6d7c5b80bda2ea030167b",
            "filename": "django/core/management/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcore%2Fmanagement%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcore%2Fmanagement%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2F__init__.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -5,6 +5,7 @@\n import imp\n import warnings\n \n+from django.core.exceptions import ImproperlyConfigured\n from django.core.management.base import BaseCommand, CommandError, handle_default_options\n from django.core.management.color import color_style\n from django.utils.importlib import import_module\n@@ -105,7 +106,7 @@ def get_commands():\n         try:\n             from django.conf import settings\n             apps = settings.INSTALLED_APPS\n-        except (AttributeError, EnvironmentError, ImportError):\n+        except (AttributeError, ImproperlyConfigured):\n             apps = []\n \n         # Find and load the management module for each installed app."
        },
        {
            "sha": "9c24701d2e83cfa04aa5b7c89c6fed2e7bc7ef91",
            "filename": "django/core/management/commands/runserver.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,4 +1,5 @@\n from optparse import make_option\n+from datetime import datetime\n import os\n import re\n import sys\n@@ -90,10 +91,12 @@ def inner_run(self, *args, **options):\n         self.stdout.write(\"Validating models...\\n\\n\")\n         self.validate(display_num_errors=True)\n         self.stdout.write((\n+            \"%(started_at)s\\n\"\n             \"Django version %(version)s, using settings %(settings)r\\n\"\n             \"Development server is running at http://%(addr)s:%(port)s/\\n\"\n             \"Quit the server with %(quit_command)s.\\n\"\n         ) % {\n+            \"started_at\": datetime.now().strftime('%B %d, %Y - %X'),\n             \"version\": self.get_version(),\n             \"settings\": settings.SETTINGS_MODULE,\n             \"addr\": self._raw_ipv6 and '[%s]' % self.addr or self.addr,"
        },
        {
            "sha": "6c3d00d140544560ec5bf611860c07c0a4f2467c",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1054,9 +1054,12 @@ def get_key_columns(self, cursor, table_name):\n \n     def get_primary_key_column(self, cursor, table_name):\n         \"\"\"\n-        Backends can override this to return the column name of the primary key for the given table.\n+        Returns the name of the primary key column for the given table.\n         \"\"\"\n-        raise NotImplementedError\n+        for column in six.iteritems(self.get_indexes(cursor, table_name)):\n+            if column[1]['primary_key']:\n+                return column[0]\n+        return None\n \n     def get_indexes(self, cursor, table_name):\n         \"\"\""
        },
        {
            "sha": "26d87d6a850f8c27340cd21f01a76926aba03564",
            "filename": "django/db/backends/mysql/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fbackends%2Fmysql%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fbackends%2Fmysql%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fmysql%2Fbase.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -38,6 +38,7 @@\n from django.db.backends.mysql.introspection import DatabaseIntrospection\n from django.db.backends.mysql.validation import DatabaseValidation\n from django.db.backends.mysql.schema import DatabaseSchemaEditor\n+from django.utils.encoding import force_str\n from django.utils.functional import cached_property\n from django.utils.safestring import SafeBytes, SafeText\n from django.utils import six\n@@ -392,7 +393,7 @@ def _cursor(self):\n             if settings_dict['NAME']:\n                 kwargs['db'] = settings_dict['NAME']\n             if settings_dict['PASSWORD']:\n-                kwargs['passwd'] = settings_dict['PASSWORD']\n+                kwargs['passwd'] = force_str(settings_dict['PASSWORD'])\n             if settings_dict['HOST'].startswith('/'):\n                 kwargs['unix_socket'] = settings_dict['HOST']\n             elif settings_dict['HOST']:"
        },
        {
            "sha": "93e89c12631db590f05f3cca252690b3a9b50600",
            "filename": "django/db/backends/mysql/introspection.py",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -2,7 +2,6 @@\n from .base import FIELD_TYPE\n \n from django.db.backends import BaseDatabaseIntrospection\n-from django.utils import six\n \n \n foreign_key_re = re.compile(r\"\\sCONSTRAINT `[^`]*` FOREIGN KEY \\(`([^`]*)`\\) REFERENCES `([^`]*)` \\(`([^`]*)`\\)\")\n@@ -88,15 +87,6 @@ def get_key_columns(self, cursor, table_name):\n         key_columns.extend(cursor.fetchall())\n         return key_columns\n \n-    def get_primary_key_column(self, cursor, table_name):\n-        \"\"\"\n-        Returns the name of the primary key column for the given table\n-        \"\"\"\n-        for column in six.iteritems(self.get_indexes(cursor, table_name)):\n-            if column[1]['primary_key']:\n-                return column[0]\n-        return None\n-\n     def get_indexes(self, cursor, table_name):\n         cursor.execute(\"SHOW INDEX FROM %s\" % self.connection.ops.quote_name(table_name))\n         # Do a two-pass search for indexes: on first pass check which indexes"
        },
        {
            "sha": "fb19931c608683ae41e19fbf2b3013c1cdea934f",
            "filename": "django/db/backends/postgresql_psycopg2/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -14,6 +14,7 @@\n from django.db.backends.postgresql_psycopg2.version import get_version\n from django.db.backends.postgresql_psycopg2.introspection import DatabaseIntrospection\n from django.db.backends.postgresql_psycopg2.schema import DatabaseSchemaEditor\n+from django.utils.encoding import force_str\n from django.utils.log import getLogger\n from django.utils.safestring import SafeText, SafeBytes\n from django.utils import six\n@@ -175,7 +176,7 @@ def _cursor(self):\n             if settings_dict['USER']:\n                 conn_params['user'] = settings_dict['USER']\n             if settings_dict['PASSWORD']:\n-                conn_params['password'] = settings_dict['PASSWORD']\n+                conn_params['password'] = force_str(settings_dict['PASSWORD'])\n             if settings_dict['HOST']:\n                 conn_params['host'] = settings_dict['HOST']\n             if settings_dict['PORT']:"
        },
        {
            "sha": "629497eb3d68501fe3cca06335917c7420143d95",
            "filename": "django/db/models/constants.py",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fconstants.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fconstants.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fconstants.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -0,0 +1,7 @@\n+\"\"\"\n+Constants used across the ORM in general.\n+\"\"\"\n+\n+# Separator used to split filter strings apart.\n+LOOKUP_SEP = '__'\n+"
        },
        {
            "sha": "8bf08b7a9370a21c709cbe2f27ac6a324f4e8b16",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -8,6 +8,7 @@\n \n from django.core import exceptions\n from django.db import connections, router, transaction, IntegrityError\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.fields import AutoField\n from django.db.models.query_utils import (Q, select_related_descend,\n     deferred_class_factory, InvalidQuery)\n@@ -1613,8 +1614,6 @@ def prefetch_related_objects(result_cache, related_lookups):\n     Populates prefetched objects caches for a list of results\n     from a QuerySet\n     \"\"\"\n-    from django.db.models.sql.constants import LOOKUP_SEP\n-\n     if len(result_cache) == 0:\n         return # nothing to do\n "
        },
        {
            "sha": "f06d6b11a4c3b023c6ded5c604b41cf52595a3df",
            "filename": "django/db/models/sql/compiler.py",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -3,9 +3,10 @@\n from django.core.exceptions import FieldError\n from django.db import transaction\n from django.db.backends.util import truncate_name\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.query_utils import select_related_descend\n from django.db.models.sql.constants import (SINGLE, MULTI, ORDER_DIR,\n-    LOOKUP_SEP, GET_ITERATOR_CHUNK_SIZE)\n+        GET_ITERATOR_CHUNK_SIZE)\n from django.db.models.sql.datastructures import EmptyResultSet\n from django.db.models.sql.expressions import SQLEvaluator\n from django.db.models.sql.query import get_order_dir, Query\n@@ -608,8 +609,12 @@ def fill_related_selections(self, opts=None, root_alias=None, cur_depth=1,\n                 restricted = False\n \n         for f, model in opts.get_fields_with_model():\n+            # The get_fields_with_model() returns None for fields that live\n+            # in the field's local model. So, for those fields we want to use\n+            # the f.model - that is the field's local model.\n+            field_model = model or f.model\n             if not select_related_descend(f, restricted, requested,\n-                                          only_load.get(model or self.query.model)):\n+                                          only_load.get(field_model)):\n                 continue\n             # The \"avoid\" set is aliases we want to avoid just for this\n             # particular branch of the recursion. They aren't permanently"
        },
        {
            "sha": "f750310624078a9a0836bfca13f381e5ceb770c3",
            "filename": "django/db/models/sql/constants.py",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fconstants.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fconstants.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fconstants.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,7 +1,13 @@\n+\"\"\"\n+Constants specific to the SQL storage portion of the ORM.\n+\"\"\"\n+\n from collections import namedtuple\n import re\n \n-# Valid query types (a set is used for speedy lookups).\n+# Valid query types (a set is used for speedy lookups). These are (currently)\n+# considered SQL-specific; other storage systems may choose to use different\n+# lookup types.\n QUERY_TERMS = set([\n     'exact', 'iexact', 'contains', 'icontains', 'gt', 'gte', 'lt', 'lte', 'in',\n     'startswith', 'istartswith', 'endswith', 'iendswith', 'range', 'year',\n@@ -12,9 +18,6 @@\n # Larger values are slightly faster at the expense of more storage space.\n GET_ITERATOR_CHUNK_SIZE = 100\n \n-# Separator used to split filter strings apart.\n-LOOKUP_SEP = '__'\n-\n # Constants to make looking up tuple values clearer.\n # Join lists (indexes into the tuples that are values in the alias_map\n # dictionary in the Query class)."
        },
        {
            "sha": "ac8fea6da3e9ac08ea88f9acd63d19b2342974ce",
            "filename": "django/db/models/sql/expressions.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fexpressions.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fexpressions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fexpressions.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,6 +1,6 @@\n from django.core.exceptions import FieldError\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.fields import FieldDoesNotExist\n-from django.db.models.sql.constants import LOOKUP_SEP\n \n class SQLEvaluator(object):\n     def __init__(self, expression, query, allow_joins=True):"
        },
        {
            "sha": "77f24fcf24a261fcc76a5d948541f6d91c22a32b",
            "filename": "django/db/models/sql/query.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fquery.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -15,11 +15,12 @@\n from django.utils import six\n from django.db import connections, DEFAULT_DB_ALIAS\n from django.db.models import signals\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.expressions import ExpressionNode\n from django.db.models.fields import FieldDoesNotExist\n from django.db.models.sql import aggregates as base_aggregates_module\n-from django.db.models.sql.constants import (QUERY_TERMS, LOOKUP_SEP, ORDER_DIR,\n-    SINGLE, ORDER_PATTERN, JoinInfo)\n+from django.db.models.sql.constants import (QUERY_TERMS, ORDER_DIR, SINGLE,\n+        ORDER_PATTERN, JoinInfo)\n from django.db.models.sql.datastructures import EmptyResultSet, Empty, MultiJoin\n from django.db.models.sql.expressions import SQLEvaluator\n from django.db.models.sql.where import (WhereNode, Constraint, EverythingNode,"
        },
        {
            "sha": "c6995c6abbfd1a0d5eb0b7f8d98079d5f7f62e07",
            "filename": "django/db/models/sql/subqueries.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fsubqueries.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -3,6 +3,7 @@\n \"\"\"\n \n from django.core.exceptions import FieldError\n+from django.db.models.constants import LOOKUP_SEP\n from django.db.models.fields import DateField, FieldDoesNotExist\n from django.db.models.sql.constants import *\n from django.db.models.sql.datastructures import Date"
        },
        {
            "sha": "124e4f669adb750822338da51c0f5e4b8ae4e8d1",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -199,7 +199,7 @@ def to_python(self, value):\n \n     def widget_attrs(self, widget):\n         attrs = super(CharField, self).widget_attrs(widget)\n-        if self.max_length is not None and isinstance(widget, (TextInput, PasswordInput)):\n+        if self.max_length is not None and isinstance(widget, TextInput):\n             # The HTML attribute is maxlength, not max_length.\n             attrs.update({'maxlength': str(self.max_length)})\n         return attrs"
        },
        {
            "sha": "763da0cff22aa0a5ea4261b35a8d5119e76c2129",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 11,
            "deletions": 7,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -260,10 +260,17 @@ def render(self, name, value, attrs=None):\n             final_attrs['value'] = force_text(self._format_value(value))\n         return format_html('<input{0} />', flatatt(final_attrs))\n \n+\n class TextInput(Input):\n     input_type = 'text'\n \n-class PasswordInput(Input):\n+    def __init__(self, attrs=None):\n+        if attrs is not None:\n+            self.input_type = attrs.pop('type', self.input_type)\n+        super(TextInput, self).__init__(attrs)\n+\n+\n+class PasswordInput(TextInput):\n     input_type = 'password'\n \n     def __init__(self, attrs=None, render_value=False):\n@@ -400,9 +407,8 @@ def render(self, name, value, attrs=None):\n                            flatatt(final_attrs),\n                            force_text(value))\n \n-class DateInput(Input):\n-    input_type = 'text'\n \n+class DateInput(TextInput):\n     def __init__(self, attrs=None, format=None):\n         super(DateInput, self).__init__(attrs)\n         if format:\n@@ -431,9 +437,8 @@ def _has_changed(self, initial, data):\n             pass\n         return super(DateInput, self)._has_changed(self._format_value(initial), data)\n \n-class DateTimeInput(Input):\n-    input_type = 'text'\n \n+class DateTimeInput(TextInput):\n     def __init__(self, attrs=None, format=None):\n         super(DateTimeInput, self).__init__(attrs)\n         if format:\n@@ -462,9 +467,8 @@ def _has_changed(self, initial, data):\n             pass\n         return super(DateTimeInput, self)._has_changed(self._format_value(initial), data)\n \n-class TimeInput(Input):\n-    input_type = 'text'\n \n+class TimeInput(TextInput):\n     def __init__(self, attrs=None, format=None):\n         super(TimeInput, self).__init__(attrs)\n         if format:"
        },
        {
            "sha": "ecb39129addfcce5863bf65f9cfbbd49eb68a94f",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 35,
            "deletions": 21,
            "changes": 56,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -2,6 +2,7 @@\n \n import copy\n import datetime\n+from email.header import Header\n import os\n import re\n import sys\n@@ -560,31 +561,44 @@ def serialize(self):\n     else:\n         __str__ = serialize\n \n-    def _convert_to_ascii(self, *values):\n-        \"\"\"Converts all values to ascii strings.\"\"\"\n-        for value in values:\n-            if not isinstance(value, six.string_types):\n-                value = str(value)\n-            try:\n-                if six.PY3:\n-                    # Ensure string only contains ASCII\n-                    value.encode('us-ascii')\n+    def _convert_to_charset(self, value, charset, mime_encode=False):\n+        \"\"\"Converts headers key/value to ascii/latin1 native strings.\n+\n+        `charset` must be 'ascii' or 'latin-1'. If `mime_encode` is True and\n+        `value` value can't be represented in the given charset, MIME-encoding\n+        is applied.\n+        \"\"\"\n+        if not isinstance(value, (bytes, six.text_type)):\n+            value = str(value)\n+        try:\n+            if six.PY3:\n+                if isinstance(value, str):\n+                    # Ensure string is valid in given charset\n+                    value.encode(charset)\n                 else:\n-                    if isinstance(value, str):\n-                        # Ensure string only contains ASCII\n-                        value.decode('us-ascii')\n-                    else:\n-                        # Convert unicode to an ASCII string\n-                        value = value.encode('us-ascii')\n-            except UnicodeError as e:\n-                e.reason += ', HTTP response headers must be in US-ASCII format'\n+                    # Convert bytestring using given charset\n+                    value = value.decode(charset)\n+            else:\n+                if isinstance(value, str):\n+                    # Ensure string is valid in given charset\n+                    value.decode(charset)\n+                else:\n+                    # Convert unicode string to given charset\n+                    value = value.encode(charset)\n+        except UnicodeError as e:\n+            if mime_encode:\n+                # Wrapping in str() is a workaround for #12422 under Python 2.\n+                value = str(Header(value, 'utf-8').encode())\n+            else:\n+                e.reason += ', HTTP response headers must be in %s format' % charset\n                 raise\n-            if '\\n' in value or '\\r' in value:\n-                raise BadHeaderError(\"Header values can't contain newlines (got %r)\" % value)\n-            yield value\n+        if str('\\n') in value or str('\\r') in value:\n+            raise BadHeaderError(\"Header values can't contain newlines (got %r)\" % value)\n+        return value\n \n     def __setitem__(self, header, value):\n-        header, value = self._convert_to_ascii(header, value)\n+        header = self._convert_to_charset(header, 'ascii')\n+        value = self._convert_to_charset(value, 'latin1', mime_encode=True)\n         self._headers[header.lower()] = (header, value)\n \n     def __delitem__(self, header):"
        },
        {
            "sha": "c9e8d73c82174999123ce0597d9ecb796f279f84",
            "filename": "django/middleware/csrf.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fmiddleware%2Fcsrf.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fmiddleware%2Fcsrf.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fmiddleware%2Fcsrf.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -105,7 +105,7 @@ def process_view(self, request, callback, callback_args, callback_kwargs):\n         if getattr(callback, 'csrf_exempt', False):\n             return None\n \n-        # Assume that anything not defined as 'safe' by RC2616 needs protection\n+        # Assume that anything not defined as 'safe' by RFC2616 needs protection\n         if request.method not in ('GET', 'HEAD', 'OPTIONS', 'TRACE'):\n             if getattr(request, '_dont_enforce_csrf_checks', False):\n                 # Mechanism to turn off CSRF checks for test suite."
        },
        {
            "sha": "a824446b7e9254b013ac25b0d4a1175d078688ae",
            "filename": "django/shortcuts/__init__.py",
            "status": "modified",
            "additions": 32,
            "deletions": 17,
            "changes": 49,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fshortcuts%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fshortcuts%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fshortcuts%2F__init__.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -66,23 +66,7 @@ def redirect(to, *args, **kwargs):\n     else:\n         redirect_class = HttpResponseRedirect\n \n-    # If it's a model, use get_absolute_url()\n-    if hasattr(to, 'get_absolute_url'):\n-        return redirect_class(to.get_absolute_url())\n-\n-    # Next try a reverse URL resolution.\n-    try:\n-        return redirect_class(urlresolvers.reverse(to, args=args, kwargs=kwargs))\n-    except urlresolvers.NoReverseMatch:\n-        # If this is a callable, re-raise.\n-        if callable(to):\n-            raise\n-        # If this doesn't \"feel\" like a URL, re-raise.\n-        if '/' not in to and '.' not in to:\n-            raise\n-\n-    # Finally, fall back and assume it's a URL\n-    return redirect_class(to)\n+    return redirect_class(resolve_url(to, *args, **kwargs))\n \n def _get_queryset(klass):\n     \"\"\"\n@@ -128,3 +112,34 @@ def get_list_or_404(klass, *args, **kwargs):\n         raise Http404('No %s matches the given query.' % queryset.model._meta.object_name)\n     return obj_list\n \n+def resolve_url(to, *args, **kwargs):\n+    \"\"\"\n+    Return a URL appropriate for the arguments passed.\n+\n+    The arguments could be:\n+\n+        * A model: the model's `get_absolute_url()` function will be called.\n+\n+        * A view name, possibly with arguments: `urlresolvers.reverse()` will\n+          be used to reverse-resolve the name.\n+\n+        * A URL, which will be returned as-is.\n+\n+    \"\"\"\n+    # If it's a model, use get_absolute_url()\n+    if hasattr(to, 'get_absolute_url'):\n+        return to.get_absolute_url()\n+\n+    # Next try a reverse URL resolution.\n+    try:\n+        return urlresolvers.reverse(to, args=args, kwargs=kwargs)\n+    except urlresolvers.NoReverseMatch:\n+        # If this is a callable, re-raise.\n+        if callable(to):\n+            raise\n+        # If this doesn't \"feel\" like a URL, re-raise.\n+        if '/' not in to and '.' not in to:\n+            raise\n+\n+    # Finally, fall back and assume it's a URL\n+    return to"
        },
        {
            "sha": "ea1dd0281ec1a4972a55f5fb606de3bd37897c50",
            "filename": "django/template/defaulttags.py",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Ftemplate%2Fdefaulttags.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Ftemplate%2Fdefaulttags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaulttags.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -531,11 +531,9 @@ def cycle(parser, token):\n     The optional flag \"silent\" can be used to prevent the cycle declaration\n     from returning any value::\n \n-        {% cycle 'row1' 'row2' as rowcolors silent %}{# no value here #}\n         {% for o in some_list %}\n-            <tr class=\"{% cycle rowcolors %}\">{# first value will be \"row1\" #}\n-                ...\n-            </tr>\n+            {% cycle 'row1' 'row2' as rowcolors silent %}\n+            <tr class=\"{{ rowcolors }}\">{% include \"subtemplate.html \" %}</tr>\n         {% endfor %}\n \n     \"\"\""
        },
        {
            "sha": "d140304f1d1f32c647bd102a2b884a2db8946b67",
            "filename": "django/test/signals.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Ftest%2Fsignals.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Ftest%2Fsignals.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fsignals.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -51,6 +51,13 @@ def clear_context_processors_cache(**kwargs):\n         context._standard_context_processors = None\n \n \n+@receiver(setting_changed)\n+def clear_template_loaders_cache(**kwargs):\n+    if kwargs['setting'] == 'TEMPLATE_LOADERS':\n+        from django.template import loader\n+        loader.template_source_loaders = None\n+\n+\n @receiver(setting_changed)\n def clear_serializers_cache(**kwargs):\n     if kwargs['setting'] == 'SERIALIZATION_MODULES':"
        },
        {
            "sha": "1ea12aed8a2cf9ce7af9187aab55dd15f307c404",
            "filename": "django/utils/_os.py",
            "status": "modified",
            "additions": 10,
            "deletions": 7,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Futils%2F_os.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Futils%2F_os.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2F_os.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,6 +1,6 @@\n import os\n import stat\n-from os.path import join, normcase, normpath, abspath, isabs, sep\n+from os.path import join, normcase, normpath, abspath, isabs, sep, dirname\n from django.utils.encoding import force_text\n from django.utils import six\n \n@@ -41,13 +41,16 @@ def safe_join(base, *paths):\n     paths = [force_text(p) for p in paths]\n     final_path = abspathu(join(base, *paths))\n     base_path = abspathu(base)\n-    base_path_len = len(base_path)\n     # Ensure final_path starts with base_path (using normcase to ensure we\n-    # don't false-negative on case insensitive operating systems like Windows)\n-    # and that the next character after the final path is os.sep (or nothing,\n-    # in which case final_path must be equal to base_path).\n-    if not normcase(final_path).startswith(normcase(base_path)) \\\n-       or final_path[base_path_len:base_path_len+1] not in ('', sep):\n+    # don't false-negative on case insensitive operating systems like Windows),\n+    # further, one of the following conditions must be true:\n+    #  a) The next character is the path separator (to prevent conditions like\n+    #     safe_join(\"/dir\", \"/../d\"))\n+    #  b) The final path must be the same as the base path.\n+    #  c) The base path must be the most root path (meaning either \"/\" or \"C:\\\\\")\n+    if (not normcase(final_path).startswith(normcase(base_path + sep)) and\n+        normcase(final_path) != normcase(base_path) and\n+        dirname(normcase(base_path)) != normcase(base_path)):\n         raise ValueError('The joined path (%s) is located outside of the base '\n                          'path component (%s)' % (final_path, base_path))\n     return final_path"
        },
        {
            "sha": "6ccb665249cfcb53284851b0c32113358c86d649",
            "filename": "django/utils/html_parser.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Futils%2Fhtml_parser.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Futils%2Fhtml_parser.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhtml_parser.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -5,8 +5,7 @@\n current_version = sys.version_info\n \n use_workaround = (\n-    (current_version < (2, 6, 8)) or\n-    (current_version >= (2, 7) and current_version < (2, 7, 3)) or\n+    (current_version < (2, 7, 3)) or\n     (current_version >= (3, 0) and current_version < (3, 2, 3))\n )\n "
        },
        {
            "sha": "52e13a4533af473bcacc6ecef453ed2ace3687de",
            "filename": "django/views/generic/dates.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fviews%2Fgeneric%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/django%2Fviews%2Fgeneric%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fdates.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -372,6 +372,9 @@ def get_dated_queryset(self, ordering=None, **lookup):\n         return qs\n \n     def get_date_list_period(self):\n+        \"\"\"\n+        Get the aggregation period for the list of dates: 'year', 'month', or 'day'.\n+        \"\"\"\n         return self.date_list_period\n \n     def get_date_list(self, queryset, date_type=None):"
        },
        {
            "sha": "05133d8917b4d3f58028f251efb9e584a7d35f06",
            "filename": "docs/README",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2FREADME",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2FREADME",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2FREADME?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,9 +1,8 @@\n The documentation in this tree is in plain text files and can be viewed using\n any text file viewer.\n \n-Technically speaking, it uses ReST (reStructuredText) [1], and the Sphinx\n-documentation system [2].  This allows it to be built into other forms for\n-easier viewing and browsing.\n+It uses ReST (reStructuredText) [1], and the Sphinx documentation system [2].  \n+This allows it to be built into other forms for easier viewing and browsing.\n \n To create an HTML version of the docs:\n "
        },
        {
            "sha": "736e1f62bf69d89c0feab84f6822c4f3b04528b3",
            "filename": "docs/contents.txt",
            "status": "modified",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fcontents.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fcontents.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fcontents.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -28,14 +28,3 @@ Indices, glossary and tables\n * :ref:`genindex`\n * :ref:`modindex`\n * :ref:`glossary`\n-\n-Deprecated/obsolete documentation\n-=================================\n-\n-The following documentation covers features that have been deprecated or that\n-have been replaced in newer versions of Django.\n-\n-.. toctree::\n-   :maxdepth: 2\n-\n-   obsolete/index"
        },
        {
            "sha": "ea6aa2e74e9e6f2fcc632961cd7f45b69cc466ce",
            "filename": "docs/faq/admin.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ffaq%2Fadmin.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ffaq%2Fadmin.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ffaq%2Fadmin.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -91,8 +91,7 @@ The dynamically-generated admin site is ugly! How can I change it?\n We like it, but if you don't agree, you can modify the admin site's\n presentation by editing the CSS stylesheet and/or associated image files. The\n site is built using semantic HTML and plenty of CSS hooks, so any changes you'd\n-like to make should be possible by editing the stylesheet. We've got a\n-:doc:`guide to the CSS used in the admin </obsolete/admin-css>` to get you started.\n+like to make should be possible by editing the stylesheet.\n \n What browsers are supported for using the admin?\n ------------------------------------------------\n@@ -104,5 +103,5 @@ There *may* be minor stylistic differences between supported browsers—for\n example, some browsers may not support rounded corners. These are considered\n acceptable variations in rendering.\n \n-.. _YUI's A-grade: http://yuilibrary.com/yui/docs/tutorials/gbs/ \n+.. _YUI's A-grade: http://yuilibrary.com/yui/docs/tutorials/gbs/\n "
        },
        {
            "sha": "a772a379d533eeb9c04a27796b6caffab950dc7d",
            "filename": "docs/faq/install.txt",
            "status": "modified",
            "additions": 17,
            "deletions": 23,
            "changes": 40,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ffaq%2Finstall.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ffaq%2Finstall.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ffaq%2Finstall.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -16,8 +16,9 @@ How do I get started?\n What are Django's prerequisites?\n --------------------------------\n \n-Django requires Python_, specifically Python 2.6.5 - 2.7.x.  No other Python\n-libraries are required for basic Django usage.\n+Django requires Python, specifically Python 2.6.5 - 2.7.x. No other Python\n+libraries are required for basic Django usage. Django 1.5 also has\n+experimental support for Python 3.2 and above.\n \n For a development environment -- if you just want to experiment with Django --\n you don't need to have a separate Web server installed; Django comes with its\n@@ -50,15 +51,12 @@ aren't available under older versions of Python.\n Third-party applications for use with Django are, of course, free to set their\n own version requirements.\n \n-Over the next year or two Django will begin dropping support for older Python\n-versions as part of a migration which will end with Django running on Python 3\n-(see below for details).\n-\n All else being equal, we recommend that you use the latest 2.x release\n (currently Python 2.7). This will let you take advantage of the numerous\n-improvements and optimizations to the Python language since version 2.6, and\n-will help ease the process of dropping support for older Python versions on\n-the road to Python 3.\n+improvements and optimizations to the Python language since version 2.6.\n+\n+Generally speaking, we don't recommend running Django on Python 3 yet; see\n+below for more.\n \n What Python version can I use with Django?\n ------------------------------------------\n@@ -71,25 +69,21 @@ Django version Python versions\n 1.2            2.4, 2.5, 2.6, 2.7\n 1.3            2.4, 2.5, 2.6, 2.7\n **1.4**        **2.5, 2.6, 2.7**\n-*1.5 (future)* *2.6, 2.7, 3.x (experimental)*\n+*1.5 (future)* *2.6, 2.7* and *3.2, 3.3 (experimental)*\n ============== ===============\n \n Can I use Django with Python 3?\n -------------------------------\n \n-Not at the moment. Python 3.0 introduced a number of\n-backwards-incompatible changes to the Python language, and although\n-these changes are generally a good thing for Python's future, it will\n-be a while before most Python software catches up and is able to run\n-on Python 3.0. For larger Python-based software like Django, the\n-transition is expected to take at least a year or two (since it\n-involves dropping support for older Python releases and so must be\n-done gradually).\n-\n-In the meantime, Python 2.x releases will be supported and provided\n-with bug fixes and security updates by the Python development team, so\n-continuing to use a Python 2.x release during the transition should\n-not present any risk.\n+Django 1.5 introduces experimental support for Python 3.2 and 3.3. However, we\n+don't yet suggest that you use Django and Python 3 in production.\n+\n+Python 3 support should be considered a \"preview\". It's offered to bootstrap\n+the transition of the Django ecosystem to Python 3, and to help you start\n+porting your apps for future Python 3 compatibility. But we're not yet\n+confident enough to promise stability in production.\n+\n+Our current plan is to make Django 1.6 suitable for general use with Python 3.\n \n Will Django run under shared hosting (like TextDrive or Dreamhost)?\n -------------------------------------------------------------------"
        },
        {
            "sha": "69965b66e18954cfc0fb774a8e32809aa07ebd13",
            "filename": "docs/faq/models.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ffaq%2Fmodels.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ffaq%2Fmodels.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ffaq%2Fmodels.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -11,7 +11,7 @@ Then, just do this::\n \n     >>> from django.db import connection\n     >>> connection.queries\n-    [{'sql': 'SELECT polls_polls.id,polls_polls.question,polls_polls.pub_date FROM polls_polls',\n+    [{'sql': 'SELECT polls_polls.id, polls_polls.question, polls_polls.pub_date FROM polls_polls',\n     'time': '0.002'}]\n \n ``connection.queries`` is only available if :setting:`DEBUG` is ``True``."
        },
        {
            "sha": "9ff06479c63ff5cc8461be7ccefec40a70d80512",
            "filename": "docs/howto/custom-model-fields.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fhowto%2Fcustom-model-fields.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fhowto%2Fcustom-model-fields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Fcustom-model-fields.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -181,10 +181,10 @@ card values plus their suits; 104 characters in total.\n     Many of Django's model fields accept options that they don't do anything\n     with. For example, you can pass both\n     :attr:`~django.db.models.Field.editable` and\n-    :attr:`~django.db.models.Field.auto_now` to a\n+    :attr:`~django.db.models.DateField.auto_now` to a\n     :class:`django.db.models.DateField` and it will simply ignore the\n     :attr:`~django.db.models.Field.editable` parameter\n-    (:attr:`~django.db.models.Field.auto_now` being set implies\n+    (:attr:`~django.db.models.DateField.auto_now` being set implies\n     ``editable=False``). No error is raised in this case.\n \n     This behavior simplifies the field classes, because they don't need to\n@@ -516,8 +516,8 @@ for the first time, the ``add`` parameter will be ``True``, otherwise it will be\n You only need to override this method if you want to preprocess the value\n somehow, just before saving. For example, Django's\n :class:`~django.db.models.DateTimeField` uses this method to set the attribute\n-correctly in the case of :attr:`~django.db.models.Field.auto_now` or\n-:attr:`~django.db.models.Field.auto_now_add`.\n+correctly in the case of :attr:`~django.db.models.DateField.auto_now` or\n+:attr:`~django.db.models.DateField.auto_now_add`.\n \n If you do override this method, you must return the value of the attribute at\n the end. You should also update the model's attribute if you make any changes"
        },
        {
            "sha": "8b29c95fa227f1de70a3910dd009c7c9fbc1d04b",
            "filename": "docs/index.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Findex.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -5,7 +5,7 @@\n Django documentation\n ====================\n \n-.. rubric:: Everything you need to know about Django (and then some).\n+.. rubric:: Everything you need to know about Django.\n \n Getting help\n ============"
        },
        {
            "sha": "ca56d36880eb2fdc6bfec0fff82736ccdac121b1",
            "filename": "docs/internals/committers.txt",
            "status": "modified",
            "additions": 28,
            "deletions": 10,
            "changes": 38,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Finternals%2Fcommitters.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Finternals%2Fcommitters.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fcommitters.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -379,6 +379,34 @@ Florian Apolloner\n .. _Graz University of Technology: http://tugraz.at/\n .. _Ubuntuusers webteam: http://wiki.ubuntuusers.de/ubuntuusers/Webteam\n \n+Jeremy Dunck\n+    Jeremy was rescued from corporate IT drudgery by Free Software and, in part, \n+    Django.  Many of Jeremy's interests center around access to information.\n+\n+    Jeremy was the lead developer of Pegasus News, one of the first uses of \n+    Django outside World Online, and has since joined Votizen, a startup intent \n+    on reducing the influence of money in politics.\n+\n+    He serves as DSF Secretary, organizes and helps organize sprints, cares \n+    about the health and equity of the Django community.  He has gone an \n+    embarrassingly long time without a working blog.\n+    \n+    Jeremy lives in Mountain View, CA, USA.\n+\n+`Bryan Veloso`_\n+    Bryan found Django 0.96 through a fellow designer who was evangelizing\n+    its use. It was his first foray outside of the land that was PHP-based\n+    templating. Although he has only ever used Django for personal projects,\n+    it is the very reason he considers himself a designer/developer\n+    hybrid and is working to further design within the Django community.\n+\n+    Bryan works as a designer at GitHub by day, and masquerades as a `vlogger`_\n+    and `shoutcaster`_ in the after-hours. Bryan lives in Los Angeles, CA, USA.\n+\n+.. _bryan veloso: http://avalonstar.com/\n+.. _vlogger: http://youtube.com/bryanveloso/\n+.. _shoutcaster: http://twitch.tv/vlogalonstar/\n+\n Specialists\n -----------\n \n@@ -403,16 +431,6 @@ Ian Kelly\n Matt Boersma\n     Matt is also responsible for Django's Oracle support.\n \n-Jeremy Dunck\n-    Jeremy is the lead developer of Pegasus News, a personalized local site based\n-    in Dallas, Texas. An early contributor to Greasemonkey and Django, he sees\n-    technology as a tool for communication and access to knowledge.\n-\n-    Jeremy helped kick off GeoDjango development, and is mostly responsible for\n-    the serious speed improvements that signals received in Django 1.0.\n-\n-    Jeremy lives in Dallas, Texas, USA.\n-\n `Simon Meers`_\n     Simon discovered Django 0.96 during his Computer Science PhD research and\n     has been developing with it full-time ever since. His core code"
        },
        {
            "sha": "4add7519126808c1f40065cf1eb5531b3de87357",
            "filename": "docs/internals/deprecation.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Finternals%2Fdeprecation.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Finternals%2Fdeprecation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fdeprecation.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -264,6 +264,9 @@ these changes.\n   in 1.4. The backward compatibility will be removed --\n   ``HttpRequest.raw_post_data`` will no longer work.\n \n+* ``django.contrib.markup`` will be removed following an accelerated\n+  deprecation.\n+\n 1.7\n ---\n "
        },
        {
            "sha": "f9b122e62db0238a17d48e95b05a362ee20c6034",
            "filename": "docs/intro/install.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Finstall.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Finstall.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Finstall.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -10,11 +10,9 @@ Install Python\n --------------\n \n Being a Python Web framework, Django requires Python. It works with any Python\n-version from 2.6.5 to 2.7 (due to backwards incompatibilities in Python 3.0,\n-Django does not currently work with Python 3.0; see :doc:`the Django FAQ\n-</faq/install>` for more information on supported Python versions and the 3.0\n-transition), these versions of Python include a lightweight database called\n-SQLite_ so you won't need to set up a database just yet.\n+version from 2.6.5 to 2.7. It also features experimental support for versions\n+3.2 and 3.3. All these versions of Python include a lightweight database\n+called SQLite_ so you won't need to set up a database just yet.\n \n .. _sqlite: http://sqlite.org/\n "
        },
        {
            "sha": "4d5a86f82b9d715c06e2ff7578b54989e8b35c59",
            "filename": "docs/intro/overview.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Foverview.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Foverview.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Foverview.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -31,7 +31,7 @@ the file ``mysite/news/models.py``::\n             return self.full_name\n \n     class Article(models.Model):\n-        pub_date = models.DateTimeField()\n+        pub_date = models.DateField()\n         headline = models.CharField(max_length=200)\n         content = models.TextField()\n         reporter = models.ForeignKey(Reporter)\n@@ -96,8 +96,8 @@ access your data. The API is created on the fly, no code generation necessary::\n     DoesNotExist: Reporter matching query does not exist. Lookup parameters were {'id': 2}\n \n     # Create an article.\n-    >>> from datetime import datetime\n-    >>> a = Article(pub_date=datetime.now(), headline='Django is cool',\n+    >>> from datetime import date\n+    >>> a = Article(pub_date=date.today(), headline='Django is cool',\n     ...     content='Yeah.', reporter=r)\n     >>> a.save()\n \n@@ -140,7 +140,7 @@ as registering your model in the admin site::\n     from django.db import models\n \n     class Article(models.Model):\n-        pub_date = models.DateTimeField()\n+        pub_date = models.DateField()\n         headline = models.CharField(max_length=200)\n         content = models.TextField()\n         reporter = models.ForeignKey(Reporter)"
        },
        {
            "sha": "03d4bf68b3f7a7ddfd0533dc9f23b006986acfcd",
            "filename": "docs/intro/tutorial03.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Ftutorial03.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Ftutorial03.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial03.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -513,8 +513,9 @@ Here's what happens if a user goes to \"/polls/34/\" in this system:\n   further processing.\n \n Now that we've decoupled that, we need to decouple the ``polls.urls``\n-URLconf by removing the leading \"polls/\" from each line, and removing the\n-lines registering the admin site. Your ``polls/urls.py`` file should now look like\n+URLconf by removing the leading \"polls/\" from each line, removing the\n+lines registering the admin site, and removing the ``include`` import which\n+is no longer used. Your ``polls/urls.py`` file should now look like\n this::\n \n     from django.conf.urls import patterns, url"
        },
        {
            "sha": "49e597ca29a4c59e5b582abe03d9a853cd02ba05",
            "filename": "docs/intro/tutorial04.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Ftutorial04.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Ftutorial04.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial04.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -218,7 +218,7 @@ Read on for details.\n First, open the ``polls/urls.py`` URLconf. It looks like this, according to the\n tutorial so far::\n \n-    from django.conf.urls import patterns, include, url\n+    from django.conf.urls import patterns, url\n \n     urlpatterns = patterns('polls.views',\n         url(r'^$', 'index'),\n@@ -229,7 +229,7 @@ tutorial so far::\n \n Change it like so::\n \n-    from django.conf.urls import patterns, include, url\n+    from django.conf.urls import patterns, url\n     from django.views.generic import DetailView, ListView\n     from polls.models import Poll\n "
        },
        {
            "sha": "ea4b18de039cbdda12d057fc52318a4b1454f3cf",
            "filename": "docs/intro/whatsnext.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Fwhatsnext.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fintro%2Fwhatsnext.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Fwhatsnext.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -67,8 +67,7 @@ different needs:\n   whathaveyou.\n \n * Finally, there's some \"specialized\" documentation not usually relevant to\n-  most developers. This includes the :doc:`release notes </releases/index>`,\n-  :doc:`documentation of obsolete features </obsolete/index>`,\n+  most developers. This includes the :doc:`release notes </releases/index>` and\n   :doc:`internals documentation </internals/index>` for those who want to add\n   code to Django itself, and a :doc:`few other things that simply don't fit\n   elsewhere </misc/index>`."
        },
        {
            "sha": "164dd262b5f8b39891b77a1406a2df01184771e2",
            "filename": "docs/obsolete/_images/formrow.png",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2F_images%2Fformrow.png",
            "raw_url": "https://github.com/django/django/raw/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2F_images%2Fformrow.png",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fobsolete%2F_images%2Fformrow.png?ref=dbf8b93c527733fb5e3ea101a67bd94db745888e"
        },
        {
            "sha": "6acda978091070ec62c96c9d335b5bb0fdfb06e4",
            "filename": "docs/obsolete/_images/module.png",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2F_images%2Fmodule.png",
            "raw_url": "https://github.com/django/django/raw/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2F_images%2Fmodule.png",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fobsolete%2F_images%2Fmodule.png?ref=dbf8b93c527733fb5e3ea101a67bd94db745888e"
        },
        {
            "sha": "0aba8163d6347e17ea3afaef4f8248a0f5696377",
            "filename": "docs/obsolete/_images/objecttools_01.png",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2F_images%2Fobjecttools_01.png",
            "raw_url": "https://github.com/django/django/raw/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2F_images%2Fobjecttools_01.png",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fobsolete%2F_images%2Fobjecttools_01.png?ref=dbf8b93c527733fb5e3ea101a67bd94db745888e"
        },
        {
            "sha": "06a854009bcef5dd425f9ca50b6239a60cd09b7f",
            "filename": "docs/obsolete/_images/objecttools_02.png",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2F_images%2Fobjecttools_02.png",
            "raw_url": "https://github.com/django/django/raw/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2F_images%2Fobjecttools_02.png",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fobsolete%2F_images%2Fobjecttools_02.png?ref=dbf8b93c527733fb5e3ea101a67bd94db745888e"
        },
        {
            "sha": "f4cca549b444d82b8e5844bbfbfe4226ee752647",
            "filename": "docs/obsolete/admin-css.txt",
            "status": "removed",
            "additions": 0,
            "deletions": 186,
            "changes": 186,
            "blob_url": "https://github.com/django/django/blob/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2Fadmin-css.txt",
            "raw_url": "https://github.com/django/django/raw/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2Fadmin-css.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fobsolete%2Fadmin-css.txt?ref=dbf8b93c527733fb5e3ea101a67bd94db745888e",
            "patch": "@@ -1,186 +0,0 @@\n-======================================\n-Customizing the Django admin interface\n-======================================\n-\n-.. warning::\n-\n-    The design of the admin has changed somewhat since this document was\n-    written, and parts may not apply any more. This document is no longer\n-    maintained since an official API for customizing the Django admin interface\n-    is in development.\n-\n-Django's dynamic admin interface gives you a fully-functional admin for free\n-with no hand-coding required. The dynamic admin is designed to be\n-production-ready, not just a starting point, so you can use it as-is on a real\n-site. While the underlying format of the admin pages is built in to Django, you\n-can customize the look and feel by editing the admin stylesheet and images.\n-\n-Here's a quick and dirty overview some of the main styles and classes used in\n-the Django admin CSS.\n-\n-Modules\n-=======\n-\n-The ``.module`` class is a basic building block for grouping content in the\n-admin. It's generally applied to a ``div`` or a ``fieldset``. It wraps the content\n-group in a box and applies certain styles to the elements within. An ``h2``\n-within a ``div.module`` will align to the top of the ``div`` as a header for the\n-whole group.\n-\n-.. image:: _images/module.png\n-   :alt: Example use of module class on admin homepage\n-\n-Column Types\n-============\n-\n-.. note::\n-\n-    All admin pages (except the dashboard) are fluid-width. All fixed-width\n-    classes from previous Django versions have been removed.\n-\n-The base template for each admin page has a block that defines the column\n-structure for the page. This sets a class on the page content area\n-(``div#content``) so everything on the page knows how wide it should be. There\n-are three column types available.\n-\n-colM\n-    This is the default column setting for all pages. The \"M\" stands for \"main\".\n-    Assumes that all content on the page is in one main column\n-    (``div#content-main``).\n-colMS\n-    This is for pages with one main column and a sidebar on the right. The \"S\"\n-    stands for \"sidebar\". Assumes that main content is in ``div#content-main``\n-    and sidebar content is in ``div#content-related``. This is used on the main\n-    admin page.\n-colSM\n-    Same as above, with the sidebar on the left. The source order of the columns\n-    doesn't matter.\n-\n-For instance, you could stick this in a template to make a two-column page with\n-the sidebar on the right:\n-\n-.. code-block:: html+django\n-\n-    {% block coltype %}colMS{% endblock %}\n-\n-Text Styles\n-===========\n-\n-Font Sizes\n-----------\n-\n-Most HTML elements (headers, lists, etc.) have base font sizes in the stylesheet\n-based on context. There are three classes are available for forcing text to a\n-certain size in any context.\n-\n-small\n-    11px\n-tiny\n-    10px\n-mini\n-    9px (use sparingly)\n-\n-Font Styles and Alignment\n--------------------------\n-\n-There are also a few styles for styling text.\n-\n-.quiet\n-    Sets font color to light gray. Good for side notes in instructions. Combine\n-    with ``.small`` or ``.tiny`` for sheer excitement.\n-.help\n-    This is a custom class for blocks of inline help text explaining the\n-    function of form elements. It makes text smaller and gray, and when applied\n-    to ``p`` elements within ``.form-row`` elements (see Form Styles below),\n-    it will offset the text to align with the form field. Use this for help\n-    text, instead of ``small quiet``. It works on other elements, but try to\n-    put the class on a ``p`` whenever you can.\n-.align-left\n-    It aligns the text left. Only works on block elements containing inline\n-    elements.\n-.align-right\n-    Are you paying attention?\n-.nowrap\n-    Keeps text and inline objects from wrapping. Comes in handy for table\n-    headers you want to stay on one line.\n-\n-Floats and Clears\n------------------\n-\n-float-left\n-    floats left\n-float-right\n-    floats right\n-clear\n-    clears all\n-\n-Object Tools\n-============\n-\n-Certain actions which apply directly to an object are used in form and\n-changelist pages. These appear in a \"toolbar\" row above the form or changelist,\n-to the right of the page. The tools are wrapped in a ``ul`` with the class\n-``object-tools``. There are two custom tool types which can be defined with an\n-additional class on the ``a`` for that tool. These are ``.addlink`` and\n-``.viewsitelink``.\n-\n-Example from a changelist page:\n-\n-.. code-block:: html+django\n-\n-    <ul class=\"object-tools\">\n-      <li><a href=\"/stories/add/\" class=\"addlink\">Add redirect</a></li>\n-    </ul>\n-\n-.. image:: _images/objecttools_01.png\n-   :alt: Object tools on a changelist page\n-\n-and from a form page:\n-\n-.. code-block:: html+django\n-\n-    <ul class=\"object-tools\">\n-     <li><a href=\"/history/303/152383/\">History</a></li>\n-     <li><a href=\"/r/303/152383/\" class=\"viewsitelink\">View on site</a></li>\n-    </ul>\n-\n-.. image:: _images/objecttools_02.png\n-   :alt: Object tools on a form page\n-\n-Form Styles\n-===========\n-\n-Fieldsets\n----------\n-\n-Admin forms are broken up into groups by ``fieldset`` elements. Each form fieldset\n-should have a class ``.module``. Each fieldset should have a header ``h2`` within the\n-fieldset at the top (except the first group in the form, and in some cases where the\n-group of fields doesn't have a logical label).\n-\n-Each fieldset can also take extra classes in addition to ``.module`` to apply\n-appropriate formatting to the group of fields.\n-\n-.aligned\n-    This will align the labels and inputs side by side on the same line.\n-.wide\n-    Used in combination with ``.aligned`` to widen the space available for the\n-    labels.\n-\n-Form Rows\n----------\n-\n-Each row of the form (within the ``fieldset``) should be enclosed in a ``div``\n-with class ``form-row``. If the field in the row is required, a class of\n-``required`` should also be added to the ``div.form-row``.\n-\n-.. image:: _images/formrow.png\n-   :alt: Example use of form-row class\n-\n-Labels\n-------\n-\n-Form labels should always precede the field, except in the case\n-of checkboxes and radio buttons, where the ``input`` should come first. Any\n-explanation or help text should follow the ``label`` in a ``p`` with class\n-``.help``."
        },
        {
            "sha": "ddc86237cc0fbd5bc8784f9883c5a4f5ea6e8127",
            "filename": "docs/obsolete/index.txt",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/dbf8b93c527733fb5e3ea101a67bd94db745888e/docs%2Fobsolete%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fobsolete%2Findex.txt?ref=dbf8b93c527733fb5e3ea101a67bd94db745888e",
            "patch": "@@ -1,12 +0,0 @@\n-Deprecated/obsolete documentation\n-=================================\n-\n-These documents cover features that have been deprecated or that have been\n-replaced in newer versions of Django. They're preserved here for folks using old\n-versions of Django or those still using deprecated APIs. No new code based on\n-these APIs should be written.\n-\n-.. toctree::\n-   :maxdepth: 1\n-   \n-   admin-css\n\\ No newline at end of file"
        },
        {
            "sha": "cc9aa852f156e386b8a21d0de88c10a246c3abb8",
            "filename": "docs/ref/class-based-views/base.txt",
            "status": "modified",
            "additions": 35,
            "deletions": 30,
            "changes": 65,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fbase.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fbase.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views%2Fbase.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -8,6 +8,11 @@ themselves or inherited from. They may not provide all the capabilities\n required for projects, in which case there are Mixins and Generic class-based\n views.\n \n+Many of Django's built-in class-based views inherit from other class-based\n+views or various mixins. Because this inheritence chain is very important, the\n+ancestor classes are  documented under the section title of **Ancestors (MRO)**.\n+MRO is an acronym for Method Resolution Order.\n+\n View\n ----\n \n@@ -20,6 +25,7 @@ View\n \n     1. :meth:`dispatch()`\n     2. :meth:`http_method_not_allowed()`\n+    3. :meth:`options()`\n \n     **Example views.py**::\n \n@@ -41,8 +47,20 @@ View\n             url(r'^mine/$', MyView.as_view(), name='my-view'),\n         )\n \n+    **Attributes**\n+\n+    .. attribute:: http_method_names = ['get', 'post', 'put', 'delete', 'head', 'options', 'trace']\n+\n+        The default list of HTTP method names that this view will accept.\n+\n     **Methods**\n \n+    .. classmethod:: as_view(**initkwargs)\n+\n+        Returns a callable view that takes a request and returns a response::\n+\n+            response = MyView.as_view()(request)\n+\n     .. method:: dispatch(request, *args, **kwargs)\n \n         The ``view`` part of the view -- the method that accepts a ``request``\n@@ -53,6 +71,11 @@ View\n         delegated to :meth:`~View.get()`, a ``POST`` to :meth:`~View.post()`,\n         and so on.\n \n+        By default, a ``HEAD`` request will be delegated to :meth:`~View.get()`.\n+        If you need to handle ``HEAD`` requests in a different way than ``GET``,\n+        you can override the :meth:`~View.head()` method. See\n+        :ref:`supporting-other-http-methods` for an example.\n+\n         The default implementation also sets ``request``, ``args`` and\n         ``kwargs`` as instance variables, so any method on the view can know\n         the full details of the request that was made to invoke the view.\n@@ -62,14 +85,13 @@ View\n         If the view was called with a HTTP method it doesn't support, this\n         method is called instead.\n \n-        The default implementation returns ``HttpResponseNotAllowed`` with list\n-        of allowed methods in plain text.\n+        The default implementation returns ``HttpResponseNotAllowed`` with a\n+        list of allowed methods in plain text.\n \n-    .. note::\n+    .. method:: options(request, *args, **kwargs)\n \n-        Documentation on class-based views is a work in progress. As yet, only the\n-        methods defined directly on the class are documented here, not methods\n-        defined on superclasses.\n+        Handles responding to requests for the OPTIONS HTTP verb.  Returns a\n+        list of the allowed HTTP method names for the view.\n \n TemplateView\n ------------\n@@ -81,6 +103,8 @@ TemplateView\n \n     **Ancestors (MRO)**\n \n+    This view inherits methods and attributes from the following views:\n+\n     * :class:`django.views.generic.base.TemplateView`\n     * :class:`django.views.generic.base.TemplateResponseMixin`\n     * :class:`django.views.generic.base.View`\n@@ -116,28 +140,11 @@ TemplateView\n             url(r'^$', HomePageView.as_view(), name='home'),\n         )\n \n-    **Methods and Attributes**\n-\n-    .. attribute:: template_name\n-\n-        The full name of a template to use.\n-\n-    .. method:: get_context_data(**kwargs)\n-\n-        Return a context data dictionary consisting of the contents of\n-        ``kwargs`` stored in the context variable ``params``.\n-\n     **Context**\n \n     * ``params``: The dictionary of keyword arguments captured from the URL\n       pattern that served the view.\n \n-    .. note::\n-\n-        Documentation on class-based views is a work in progress. As yet, only the\n-        methods defined directly on the class are documented here, not methods\n-        defined on superclasses.\n-\n RedirectView\n ------------\n \n@@ -156,6 +163,8 @@ RedirectView\n \n     **Ancestors (MRO)**\n \n+    This view inherits methods and attributes from the following view:\n+\n     * :class:`django.views.generic.base.View`\n \n     **Method Flowchart**\n@@ -194,7 +203,7 @@ RedirectView\n             url(r'^go-to-django/$', RedirectView.as_view(url='http://djangoproject.com'), name='go-to-django'),\n         )\n \n-    **Methods and Attributes**\n+    **Attributes**\n \n     .. attribute:: url\n \n@@ -215,6 +224,8 @@ RedirectView\n         then the query string is discarded. By default, ``query_string`` is\n         ``False``.\n \n+    **Methods**\n+\n     .. method:: get_redirect_url(**kwargs)\n \n         Constructs the target URL for redirection.\n@@ -225,9 +236,3 @@ RedirectView\n         :attr:`~RedirectView.query_string`. Subclasses may implement any\n         behavior they wish, as long as the method returns a redirect-ready URL\n         string.\n-\n-    .. note::\n-\n-        Documentation on class-based views is a work in progress. As yet, only the\n-        methods defined directly on the class are documented here, not methods\n-        defined on superclasses."
        },
        {
            "sha": "64b269f514733ba44795ef6a338aa05937a7fe20",
            "filename": "docs/ref/class-based-views/generic-date-based.txt",
            "status": "modified",
            "additions": 79,
            "deletions": 49,
            "changes": 128,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fgeneric-date-based.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fgeneric-date-based.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views%2Fgeneric-date-based.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -2,13 +2,15 @@\n Generic date views\n ==================\n \n-Date-based generic views (in the module :mod:`django.views.generic.dates`)\n-are views for displaying drilldown pages for date-based data.\n+.. module:: django.views.generic.dates\n+\n+Date-based generic views, provided in :mod:`django.views.generic.dates`, are\n+views for displaying drilldown pages for date-based data.\n \n ArchiveIndexView\n ----------------\n \n-.. class:: django.views.generic.dates.ArchiveIndexView\n+.. class:: ArchiveIndexView\n \n     A top-level index page showing the \"latest\" objects, by date. Objects with\n     a date in the *future* are not included unless you set ``allow_future`` to\n@@ -36,7 +38,7 @@ ArchiveIndexView\n YearArchiveView\n ---------------\n \n-.. class:: django.views.generic.dates.YearArchiveView\n+.. class:: YearArchiveView\n \n     A yearly archive page showing all available months in a given year. Objects\n     with a date in the *future* are not displayed unless you set\n@@ -58,13 +60,15 @@ YearArchiveView\n \n         A boolean specifying whether to retrieve the full list of objects for\n         this year and pass those to the template. If ``True``, the list of\n-        objects will be made available to the context. By default, this is\n+        objects will be made available to the context. If ``False``, the\n+        ``None`` queryset will be used as the object list. By default, this is\n         ``False``.\n \n     .. method:: get_make_object_list()\n \n-        Determine if an object list will be returned as part of the context. If\n-        ``False``, the ``None`` queryset will be used as the object list.\n+        Determine if an object list will be returned as part of the context.\n+        Returns :attr:`~YearArchiveView.make_object_list` by default.\n+\n \n     **Context**\n \n@@ -80,16 +84,18 @@ YearArchiveView\n       :class:`datetime.datetime<python:datetime.datetime>` objects, in\n       ascending order.\n \n-    * ``year``: A :class:`datetime.date<python:datetime.date>` object\n+    * ``year``: A :class:`~datetime.date` object\n       representing the given year.\n \n-    * ``next_year``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the first day of the next year. If the next year is in the\n-      future, this will be ``None``.\n+    * ``next_year``: A :class:`~datetime.date` object\n+      representing the first day of the next year, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n-    * ``previous_year``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the first day of the previous year. Unlike ``next_year``,\n-      this will never be ``None``.\n+    * ``previous_year``: A :class:`~datetime.date` object\n+      representing the first day of the previous year, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n     **Notes**\n \n@@ -98,7 +104,7 @@ YearArchiveView\n MonthArchiveView\n ----------------\n \n-.. class:: django.views.generic.dates.MonthArchiveView\n+.. class:: MonthArchiveView\n \n     A monthly archive page showing all objects in a given month. Objects with a\n     date in the *future* are not displayed unless you set ``allow_future`` to\n@@ -131,16 +137,18 @@ MonthArchiveView\n       :class:`datetime.datetime<python:datetime.datetime>` objects, in\n       ascending order.\n \n-    * ``month``: A :class:`datetime.date<python:datetime.date>` object\n+    * ``month``: A :class:`~datetime.date` object\n       representing the given month.\n \n-    * ``next_month``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the first day of the next month. If the next month is in the\n-      future, this will be ``None``.\n+    * ``next_month``: A :class:`~datetime.date` object\n+      representing the first day of the next month, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n-    * ``previous_month``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the first day of the previous month. Unlike ``next_month``,\n-      this will never be ``None``.\n+    * ``previous_month``: A :class:`~datetime.date` object\n+      representing the first day of the previous month, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n     **Notes**\n \n@@ -149,7 +157,7 @@ MonthArchiveView\n WeekArchiveView\n ---------------\n \n-.. class:: django.views.generic.dates.WeekArchiveView\n+.. class:: WeekArchiveView\n \n     A weekly archive page showing all objects in a given week. Objects with a\n     date in the *future* are not displayed unless you set ``allow_future`` to\n@@ -175,16 +183,18 @@ WeekArchiveView\n     :class:`~django.views.generic.dates.BaseDateListView`), the template's\n     context will be:\n \n-    * ``week``: A :class:`datetime.date<python:datetime.date>` object\n+    * ``week``: A :class:`~datetime.date` object\n       representing the first day of the given week.\n \n-    * ``next_week``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the first day of the next week. If the next week is in the\n-      future, this will be ``None``.\n+    * ``next_week``: A :class:`~datetime.date` object\n+      representing the first day of the next week, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n-    * ``previous_week``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the first day of the previous week. Unlike ``next_week``,\n-      this will never be ``None``.\n+    * ``previous_week``: A :class:`~datetime.date` object\n+      representing the first day of the previous week, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n     **Notes**\n \n@@ -193,7 +203,7 @@ WeekArchiveView\n DayArchiveView\n --------------\n \n-.. class:: django.views.generic.dates.DayArchiveView\n+.. class:: DayArchiveView\n \n     A day archive page showing all objects in a given day. Days in the future\n     throw a 404 error, regardless of whether any objects exist for future days,\n@@ -220,24 +230,28 @@ DayArchiveView\n     :class:`~django.views.generic.dates.BaseDateListView`), the template's\n     context will be:\n \n-    * ``day``: A :class:`datetime.date<python:datetime.date>` object\n+    * ``day``: A :class:`~datetime.date` object\n       representing the given day.\n \n-    * ``next_day``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the next day. If the next day is in the future, this will be\n-      ``None``.\n+    * ``next_day``: A :class:`~datetime.date` object\n+      representing the next day, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n-    * ``previous_day``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the previous day. Unlike ``next_day``, this will never be\n-      ``None``.\n+    * ``previous_day``: A :class:`~datetime.date` object\n+      representing the previous day, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n-    * ``next_month``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the first day of the next month. If the next month is in the\n-      future, this will be ``None``.\n+    * ``next_month``: A :class:`~datetime.date` object\n+      representing the first day of the next month, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n-    * ``previous_month``: A :class:`datetime.date<python:datetime.date>` object\n-      representing the first day of the previous month. Unlike ``next_month``,\n-      this will never be ``None``.\n+    * ``previous_month``: A :class:`~datetime.date` object\n+      representing the first day of the previous month, according to\n+      :attr:`~BaseDateListView.allow_empty` and\n+      :attr:`~DateMixin.allow_future`.\n \n     **Notes**\n \n@@ -246,7 +260,7 @@ DayArchiveView\n TodayArchiveView\n ----------------\n \n-.. class:: django.views.generic.dates.TodayArchiveView\n+.. class:: TodayArchiveView\n \n     A day archive page showing all objects for *today*. This is exactly the\n     same as :class:`django.views.generic.dates.DayArchiveView`, except today's\n@@ -271,7 +285,7 @@ TodayArchiveView\n DateDetailView\n --------------\n \n-.. class:: django.views.generic.dates.DateDetailView\n+.. class:: DateDetailView\n \n     A page representing an individual object. If the object has a date value in\n     the future, the view will throw a 404 error by default, unless you set\n@@ -293,6 +307,22 @@ DateDetailView\n \n .. note::\n \n-    All of the generic views listed above have matching Base* views that only\n-    differ in that the they do not include the\n-    :class:`~django.views.generic.detail.SingleObjectTemplateResponseMixin`.\n+    All of the generic views listed above have matching ``Base`` views that\n+    only differ in that the they do not include the\n+    :class:`~django.views.generic.detail.SingleObjectTemplateResponseMixin`:\n+\n+    .. class:: BaseArchiveIndexView\n+\n+    .. class:: BaseYearArchiveView\n+\n+    .. class:: BaseMonthArchiveView\n+\n+    .. class:: BaseWeekArchiveView\n+\n+    .. class:: BaseDayArchiveView\n+\n+    .. class:: BaseTodayArchiveView\n+\n+    .. class:: BaseDateDetailView\n+\n+"
        },
        {
            "sha": "12603ff0df2837dd50df9b706a5bd639928617dd",
            "filename": "docs/ref/class-based-views/generic-display.txt",
            "status": "modified",
            "additions": 56,
            "deletions": 1,
            "changes": 57,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fgeneric-display.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fgeneric-display.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views%2Fgeneric-display.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -15,6 +15,8 @@ DetailView\n \n     **Ancestors (MRO)**\n \n+    This view inherits methods and attributes from the following views:\n+\n     * :class:`django.views.generic.detail.SingleObjectTemplateResponseMixin`\n     * :class:`django.views.generic.base.TemplateResponseMixin`\n     * :class:`django.views.generic.detail.BaseDetailView`\n@@ -71,7 +73,9 @@ ListView\n     objects (usually, but not necessarily a queryset) that the view is\n     operating upon.\n \n-    **Mixins**\n+    **Ancestors (MRO)**\n+\n+    This view inherits methods and attributes from the following views:\n \n     * :class:`django.views.generic.list.ListView`\n     * :class:`django.views.generic.list.MultipleObjectTemplateResponseMixin`\n@@ -90,3 +94,54 @@ ListView\n     6. :meth:`get_context_data()`\n     7. :meth:`get()`\n     8. :meth:`render_to_response()`\n+\n+\n+    **Example views.py**::\n+\n+        from django.views.generic.list import ListView\n+        from django.utils import timezone\n+\n+        from articles.models import Article\n+\n+        class ArticleListView(ListView):\n+\n+            model = Article\n+\n+            def get_context_data(self, **kwargs):\n+                context = super(ArticleListView, self).get_context_data(**kwargs)\n+                context['now'] = timezone.now()\n+                return context\n+\n+    **Example urls.py**::\n+\n+        from django.conf.urls import patterns, url\n+\n+        from article.views import ArticleListView\n+\n+        urlpatterns = patterns('',\n+            url(r'^$', ArticleListView.as_view(), name='article-list'),\n+        )\n+\n+.. class:: django.views.generic.list.BaseListView\n+\n+    A base view for displaying a list of objects. It is not intended to be used\n+    directly, but rather as a parent class of the\n+    :class:`django.views.generic.list.ListView` or other views representing\n+    lists of objects.\n+\n+    **Ancestors (MRO)**\n+\n+    This view inherits methods and attributes from the following views:\n+\n+    * :class:`django.views.generic.list.MultipleObjectMixin`\n+    * :class:`django.views.generic.base.View`\n+\n+    **Methods**\n+\n+    .. method:: get(request, *args, **kwargs)\n+\n+        Adds :attr:`object_list` to the context. If\n+        :attr:`~django.views.generic.list.MultipleObjectMixin.allow_empty`\n+        is True then display an empty list. If\n+        :attr:`~django.views.generic.list.MultipleObjectMixin.allow_empty` is\n+        False then raise a 404 error."
        },
        {
            "sha": "c4b632604a445e7ed2d8d420a849bcc90ea3729d",
            "filename": "docs/ref/class-based-views/index.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views%2Findex.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -23,7 +23,7 @@ it is safe to store state variables on the instance (i.e., ``self.foo = 3`` is\n a thread-safe operation).\n \n A class-based view is deployed into a URL pattern using the\n-:meth:`~View.as_view()` classmethod::\n+:meth:`~django.views.generic.base.View.as_view()` classmethod::\n \n     urlpatterns = patterns('',\n         (r'^view/$', MyView.as_view(size=42)),\n@@ -37,9 +37,10 @@ A class-based view is deployed into a URL pattern using the\n     is modified, the actions of one user visiting your view could have an\n     effect on subsequent users visiting the same view.\n \n-Any argument passed into :meth:`~View.as_view()` will be assigned onto the\n-instance that is used to service a request. Using the previous example,\n-this means that every request on ``MyView`` is able to use ``self.size``.\n+Any argument passed into :meth:`~django.views.generic.base.View.as_view()` will\n+be assigned onto the instance that is used to service a request. Using the\n+previous example, this means that every request on ``MyView`` is able to use\n+``self.size``.\n \n Base vs Generic views\n ---------------------"
        },
        {
            "sha": "01181ebb6c65c9f5d3b606d7370b395656d11c88",
            "filename": "docs/ref/class-based-views/mixins-date-based.txt",
            "status": "modified",
            "additions": 114,
            "deletions": 59,
            "changes": 173,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fmixins-date-based.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fmixins-date-based.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views%2Fmixins-date-based.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -2,11 +2,12 @@\n Date-based mixins\n =================\n \n+.. currentmodule:: django.views.generic.dates\n \n YearMixin\n ---------\n \n-.. class:: django.views.generic.dates.YearMixin\n+.. class:: YearMixin\n \n     A mixin that can be used to retrieve and provide parsing information for a\n     year component of a date.\n@@ -20,29 +21,45 @@ YearMixin\n \n     .. attribute:: year\n \n-        **Optional** The value for the year (as a string). By default, set to\n+        **Optional** The value for the year, as a string. By default, set to\n         ``None``, which means the year will be determined using other means.\n \n     .. method:: get_year_format()\n \n-        Returns the :func:`~time.strftime` format to use when parsing the year. Returns\n-        :attr:`YearMixin.year_format` by default.\n+        Returns the :func:`~time.strftime` format to use when parsing the\n+        year. Returns :attr:`~YearMixin.year_format` by default.\n \n     .. method:: get_year()\n \n-        Returns the year for which this view will display data. Tries the\n-        following sources, in order:\n+        Returns the year for which this view will display data, as a string.\n+        Tries the following sources, in order:\n \n         * The value of the :attr:`YearMixin.year` attribute.\n-        * The value of the `year` argument captured in the URL pattern\n+        * The value of the `year` argument captured in the URL pattern.\n         * The value of the `year` GET query argument.\n \n         Raises a 404 if no valid year specification can be found.\n \n+    .. method:: get_next_year(date)\n+\n+        Returns a date object containing the first day of the year after the\n+        date provided. This function can also return ``None`` or raise an\n+        :class:`~django.http.Http404` exception, depending on the values of\n+        :attr:`~BaseDateListView.allow_empty` and\n+        :attr:`~DateMixin.allow_future`.\n+\n+    .. method:: get_previous_year(date)\n+\n+        Returns a date object containing the first day of the year before the\n+        date provided. This function can also return ``None`` or raise an\n+        :class:`~django.http.Http404` exception, depending on the values of\n+        :attr:`~BaseDateListView.allow_empty` and\n+        :attr:`~DateMixin.allow_future`.\n+\n MonthMixin\n ----------\n \n-.. class:: django.views.generic.dates.MonthMixin\n+.. class:: MonthMixin\n \n     A mixin that can be used to retrieve and provide parsing information for a\n     month component of a date.\n@@ -51,47 +68,50 @@ MonthMixin\n \n     .. attribute:: month_format\n \n-        The :func:`~time.strftime` format to use when parsing the month. By default, this is\n-        ``'%b'``.\n+        The :func:`~time.strftime` format to use when parsing the month. By\n+        default, this is ``'%b'``.\n \n     .. attribute:: month\n \n-        **Optional** The value for the month (as a string). By default, set to\n+        **Optional** The value for the month, as a string. By default, set to\n         ``None``, which means the month will be determined using other means.\n \n     .. method:: get_month_format()\n \n-        Returns the :func:`~time.strftime` format to use when parsing the month. Returns\n-        :attr:`MonthMixin.month_format` by default.\n+        Returns the :func:`~time.strftime` format to use when parsing the\n+        month. Returns :attr:`~MonthMixin.month_format` by default.\n \n     .. method:: get_month()\n \n-        Returns the month for which this view will display data. Tries the\n-        following sources, in order:\n+        Returns the month for which this view will display data, as a string.\n+        Tries the following sources, in order:\n \n         * The value of the :attr:`MonthMixin.month` attribute.\n-        * The value of the `month` argument captured in the URL pattern\n+        * The value of the `month` argument captured in the URL pattern.\n         * The value of the `month` GET query argument.\n \n         Raises a 404 if no valid month specification can be found.\n \n     .. method:: get_next_month(date)\n \n         Returns a date object containing the first day of the month after the\n-        date provided. Returns ``None`` if mixed with a view that sets\n-        ``allow_future = False``, and the next month is in the future. If\n-        ``allow_empty = False``, returns the next month that contains data.\n+        date provided. This function can also return ``None`` or raise an\n+        :class:`~django.http.Http404` exception, depending on the values of\n+        :attr:`~BaseDateListView.allow_empty` and\n+        :attr:`~DateMixin.allow_future`.\n \n     .. method:: get_prev_month(date)\n \n         Returns a date object containing the first day of the month before the\n-        date provided. If ``allow_empty = False``, returns the previous month\n-        that contained data.\n+        date provided. This function can also return ``None`` or raise an\n+        :class:`~django.http.Http404` exception, depending on the values of\n+        :attr:`~BaseDateListView.allow_empty` and\n+        :attr:`~DateMixin.allow_future`.\n \n DayMixin\n --------\n \n-.. class:: django.views.generic.dates.DayMixin\n+.. class:: DayMixin\n \n     A mixin that can be used to retrieve and provide parsing information for a\n     day component of a date.\n@@ -100,46 +120,50 @@ DayMixin\n \n     .. attribute:: day_format\n \n-        The :func:`~time.strftime` format to use when parsing the day. By default, this is\n-        ``'%d'``.\n+        The :func:`~time.strftime` format to use when parsing the day. By\n+        default, this is ``'%d'``.\n \n     .. attribute:: day\n \n-        **Optional** The value for the day (as a string). By default, set to\n+        **Optional** The value for the day, as a string. By default, set to\n         ``None``, which means the day will be determined using other means.\n \n     .. method:: get_day_format()\n \n-        Returns the :func:`~time.strftime` format to use when parsing the day. Returns\n-        :attr:`DayMixin.day_format` by default.\n+        Returns the :func:`~time.strftime` format to use when parsing the day.\n+        Returns :attr:`~DayMixin.day_format` by default.\n \n     .. method:: get_day()\n \n-        Returns the day for which this view will display data. Tries the\n-        following sources, in order:\n+        Returns the day for which this view will display data, as a string.\n+        Tries the following sources, in order:\n \n         * The value of the :attr:`DayMixin.day` attribute.\n-        * The value of the `day` argument captured in the URL pattern\n+        * The value of the `day` argument captured in the URL pattern.\n         * The value of the `day` GET query argument.\n \n         Raises a 404 if no valid day specification can be found.\n \n     .. method:: get_next_day(date)\n \n-        Returns a date object containing the next day after the date provided.\n-        Returns ``None`` if mixed with a view that sets ``allow_future = False``,\n-        and the next day is in the future. If ``allow_empty = False``, returns\n-        the next day that contains data.\n+        Returns a date object containing the next valid day after the date\n+        provided. This function can also return ``None`` or raise an\n+        :class:`~django.http.Http404` exception, depending on the values of\n+        :attr:`~BaseDateListView.allow_empty` and\n+        :attr:`~DateMixin.allow_future`.\n \n     .. method:: get_prev_day(date)\n \n-        Returns a date object containing the previous day. If\n-        ``allow_empty = False``, returns the previous day that contained data.\n+        Returns a date object containing the previous valid day. This function\n+        can also return ``None`` or raise an :class:`~django.http.Http404`\n+        exception, depending on the values of\n+        :attr:`~BaseDateListView.allow_empty` and\n+        :attr:`~DateMixin.allow_future`.\n \n WeekMixin\n ---------\n \n-.. class:: django.views.generic.dates.WeekMixin\n+.. class:: WeekMixin\n \n     A mixin that can be used to retrieve and provide parsing information for a\n     week component of a date.\n@@ -148,35 +172,51 @@ WeekMixin\n \n     .. attribute:: week_format\n \n-        The :func:`~time.strftime` format to use when parsing the week. By default, this is\n-        ``'%U'``.\n+        The :func:`~time.strftime` format to use when parsing the week. By\n+        default, this is ``'%U'``, which means the week starts on Sunday. Set\n+        it to ``'%W'`` if your week starts on Monday.\n \n     .. attribute:: week\n \n-        **Optional** The value for the week (as a string). By default, set to\n+        **Optional** The value for the week, as a string. By default, set to\n         ``None``, which means the week will be determined using other means.\n \n     .. method:: get_week_format()\n \n-        Returns the :func:`~time.strftime` format to use when parsing the week. Returns\n-        :attr:`WeekMixin.week_format` by default.\n+        Returns the :func:`~time.strftime` format to use when parsing the\n+        week. Returns :attr:`~WeekMixin.week_format` by default.\n \n     .. method:: get_week()\n \n-        Returns the week for which this view will display data. Tries the\n-        following sources, in order:\n+        Returns the week for which this view will display data, as a string.\n+        Tries the following sources, in order:\n \n         * The value of the :attr:`WeekMixin.week` attribute.\n         * The value of the `week` argument captured in the URL pattern\n         * The value of the `week` GET query argument.\n \n         Raises a 404 if no valid week specification can be found.\n \n+    .. method:: get_next_week(date)\n+\n+        Returns a date object containing the first day of the week after the\n+        date provided. This function can also return ``None`` or raise an\n+        :class:`~django.http.Http404` exception, depending on the values of\n+        :attr:`~BaseDateListView.allow_empty` and\n+        :attr:`~DateMixin.allow_future`.\n+\n+    .. method:: get_prev_week(date)\n+\n+        Returns a date object containing the first day of the week before the\n+        date provided. This function can also return ``None`` or raise an\n+        :class:`~django.http.Http404` exception, depending on the values of\n+        :attr:`~BaseDateListView.allow_empty` and\n+        :attr:`~DateMixin.allow_future`.\n \n DateMixin\n ---------\n \n-.. class:: django.views.generic.dates.DateMixin\n+.. class:: DateMixin\n \n     A mixin class providing common behavior for all date-based views.\n \n@@ -186,7 +226,7 @@ DateMixin\n \n         The name of the ``DateField`` or ``DateTimeField`` in the\n         ``QuerySet``'s model that the date-based archive should use to\n-        determine the objects on the page.\n+        determine the list of objects to display on the page.\n \n         When :doc:`time zone support </topics/i18n/timezones>` is enabled and\n         ``date_field`` is a ``DateTimeField``, dates are assumed to be in the\n@@ -210,26 +250,26 @@ DateMixin\n     .. method:: get_date_field()\n \n         Returns the name of the field that contains the date data that this\n-        view will operate on. Returns :attr:`DateMixin.date_field` by default.\n+        view will operate on. Returns :attr:`~DateMixin.date_field` by default.\n \n     .. method:: get_allow_future()\n \n         Determine whether to include \"future\" objects on this page, where\n         \"future\" means objects in which the field specified in ``date_field``\n         is greater than the current date/time. Returns\n-        :attr:`DateMixin.allow_future` by default.\n+        :attr:`~DateMixin.allow_future` by default.\n \n BaseDateListView\n ----------------\n \n-.. class:: django.views.generic.dates.BaseDateListView\n+.. class:: BaseDateListView\n \n     A base class that provides common behavior for all date-based views. There\n     won't normally be a reason to instantiate\n     :class:`~django.views.generic.dates.BaseDateListView`; instantiate one of\n     the subclasses instead.\n \n-    While this view (and it's subclasses) are executing, ``self.object_list``\n+    While this view (and its subclasses) are executing, ``self.object_list``\n     will contain the list of objects that the view is operating upon, and\n     ``self.date_list`` will contain the list of dates for which data is\n     available.\n@@ -245,10 +285,18 @@ BaseDateListView\n \n         A boolean specifying whether to display the page if no objects are\n         available. If this is ``True`` and no objects are available, the view\n-        will display an empty page instead of raising a 404. By default, this\n-        is ``False``.\n+        will display an empty page instead of raising a 404.\n+\n+        This is identical to :attr:`MultipleObjectMixin.allow_empty`, except\n+        for the default value, which is ``False``.\n+\n+    .. attribute:: date_list_period\n \n-    .. method:: get_dated_items():\n+        **Optional** A string defining the aggregation period for\n+        ``date_list``. It must be one of ``'year'`` (default), ``'month'``, or\n+        ``'day'``.\n+\n+    .. method:: get_dated_items()\n \n         Returns a 3-tuple containing (``date_list``, ``object_list``,\n         ``extra_context``).\n@@ -265,10 +313,17 @@ BaseDateListView\n         ``lookup``. Enforces any restrictions on the queryset, such as\n         ``allow_empty`` and ``allow_future``.\n \n-    .. method:: get_date_list(queryset, date_type)\n+    .. method:: get_date_list_period()\n+\n+        Returns the aggregation period for ``date_list``. Returns\n+        :attr:`~BaseDateListView.date_list_period` by default.\n+\n+    .. method:: get_date_list(queryset, date_type=None)\n \n-        Returns the list of dates of type ``date_type`` for which\n-        ``queryset`` contains entries. For example, ``get_date_list(qs,\n-        'year')`` will return the list of years for which ``qs`` has entries.\n-        See :meth:`~django.db.models.query.QuerySet.dates()` for the\n-        ways that the ``date_type`` argument can be used.\n+        Returns the list of dates of type ``date_type`` for which ``queryset``\n+        contains entries. For example, ``get_date_list(qs, 'year')`` will\n+        return the list of years for which ``qs`` has entries. If\n+        ``date_type`` isn't provided, the result of\n+        :meth:`BaseDateListView.get_date_list_period` is used. See\n+        :meth:`~django.db.models.query.QuerySet.dates()` for the ways that the\n+        ``date_type`` argument can be used."
        },
        {
            "sha": "cdb743fcbd1b6b5f5c257d025e903997efa1a20a",
            "filename": "docs/ref/class-based-views/mixins-multiple-object.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fmixins-multiple-object.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fmixins-multiple-object.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views%2Fmixins-multiple-object.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -86,7 +86,8 @@ MultipleObjectMixin\n \n     .. method:: get_queryset()\n \n-        Returns the queryset that represents the data this view will display.\n+        Get the list of items for this view. This must be an iterable and may\n+        be a queryset (in which queryset-specific behavior will be enabled).\n \n     .. method:: paginate_queryset(queryset, page_size)\n "
        },
        {
            "sha": "d2f0df241e5d9cedbae4cfb24c979b333c2581d5",
            "filename": "docs/ref/class-based-views/mixins-simple.txt",
            "status": "modified",
            "additions": 17,
            "deletions": 8,
            "changes": 25,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fmixins-simple.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fclass-based-views%2Fmixins-simple.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views%2Fmixins-simple.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -9,16 +9,17 @@ ContextMixin\n \n     .. versionadded:: 1.5\n \n-    **classpath**\n-\n-    ``django.views.generic.base.ContextMixin``\n-\n     **Methods**\n \n     .. method:: get_context_data(**kwargs)\n \n         Returns a dictionary representing the template context. The keyword\n-        arguments provided will make up the returned context.\n+        arguments provided will make up the returned context. Example usage::\n+\n+            def get_context_data(self, **kwargs):\n+                context = super(RandomNumberView, self).get_context_data(**kwargs)\n+                context['number'] = random.randrange(1, 100)\n+                return context\n \n         The template context of all class-based generic views include a\n         ``view`` variable that points to the ``View`` instance.\n@@ -42,7 +43,13 @@ TemplateResponseMixin\n     suitable context. The template to use is configurable and can be\n     further customized by subclasses.\n \n-    **Methods and Attributes**\n+    **Attributes**\n+\n+    .. attribute:: template_name\n+\n+        The full name of a template to use as defined by a string. Not defining\n+        a template_name will raise a\n+        :class:`django.core.exceptions.ImproperlyConfigured` exception.\n \n     .. attribute:: response_class\n \n@@ -57,12 +64,14 @@ TemplateResponseMixin\n         instantiation, create a ``TemplateResponse`` subclass and assign it to\n         ``response_class``.\n \n+    **Methods**\n+\n     .. method:: render_to_response(context, **response_kwargs)\n \n         Returns a ``self.response_class`` instance.\n \n-        If any keyword arguments are provided, they will be\n-        passed to the constructor of the response class.\n+        If any keyword arguments are provided, they will be passed to the\n+        constructor of the response class.\n \n         Calls :meth:`~TemplateResponseMixin.get_template_names()` to obtain the\n         list of template names that will be searched looking for an existent"
        },
        {
            "sha": "f03c7fda0d5f1ae8234523a0372972ddcf5cdb1a",
            "filename": "docs/ref/contrib/comments/moderation.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fcomments%2Fmoderation.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fcomments%2Fmoderation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcomments%2Fmoderation.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -32,11 +32,11 @@ A simple example is the best illustration of this. Suppose we have the\n following model, which would represent entries in a Weblog::\n \n     from django.db import models\n-    \n+\n     class Entry(models.Model):\n         title = models.CharField(maxlength=250)\n         body = models.TextField()\n-        pub_date = models.DateTimeField()\n+        pub_date = models.DateField()\n         enable_comments = models.BooleanField()\n \n Now, suppose that we want the following steps to be applied whenever a\n@@ -55,11 +55,11 @@ Accomplishing this is fairly straightforward and requires very little\n code::\n \n     from django.contrib.comments.moderation import CommentModerator, moderator\n-    \n+\n     class EntryModerator(CommentModerator):\n         email_notification = True\n         enable_field = 'enable_comments'\n-    \n+\n     moderator.register(Entry, EntryModerator)\n \n The :class:`CommentModerator` class pre-defines a number of useful moderation"
        },
        {
            "sha": "e98da6e4298ccd13f9eefa86537f7b3ad33d5386",
            "filename": "docs/ref/contrib/contenttypes.txt",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fcontenttypes.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fcontenttypes.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcontenttypes.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -187,6 +187,14 @@ The ``ContentTypeManager``\n         probably won't ever need to call this method yourself; Django will call\n         it automatically when it's needed.\n \n+    .. method:: get_for_id(id)\n+\n+        Lookup a :class:`~django.contrib.contenttypes.models.ContentType` by ID.\n+        Since this method uses the same shared cache as\n+        :meth:`~django.contrib.contenttypes.models.ContentTypeManager.get_for_model`,\n+        it's preferred to use this method over the usual\n+        ``ContentType.objects.get(pk=id)``\n+\n     .. method:: get_for_model(model[, for_concrete_model=True])\n \n         Takes either a model class or an instance of a model, and returns the"
        },
        {
            "sha": "d5231de3e5173b5714e50d2c12c8adfaa46157ba",
            "filename": "docs/ref/contrib/formtools/form-wizard.txt",
            "status": "modified",
            "additions": 61,
            "deletions": 1,
            "changes": 62,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -155,7 +155,8 @@ or the\n :meth:`~django.views.generic.base.TemplateResponseMixin.get_template_names()`\n method, which are documented in the\n :class:`~django.views.generic.base.TemplateResponseMixin` documentation.  The\n-latter one allows you to use a different template for each form.\n+latter one allows you to use a different template for each form (:ref:`see the\n+example below <wizard-template-for-each-form>`).\n \n This template expects a ``wizard`` object that has various items attached to\n it:\n@@ -238,6 +239,65 @@ wizard's :meth:`as_view` method takes a list of your\n         (r'^contact/$', ContactWizard.as_view([ContactForm1, ContactForm2])),\n     )\n \n+.. _wizard-template-for-each-form:\n+\n+Using a different template for each form\n+----------------------------------------\n+\n+As mentioned above, you may specify a different template for each form.\n+Consider an example using a form wizard to implement a multi-step checkout\n+process for an online store. In the first step, the user specifies a billing\n+and shipping address. In the second step, the user chooses payment type. If\n+they chose to pay by credit card, they will enter credit card information in\n+the next step. In the final step, they will confirm the purchase.\n+\n+Here's what the view code might look like::\n+\n+    from django.http import HttpResponseRedirect\n+    from django.contrib.formtools.wizard.views import SessionWizardView\n+\n+    FORMS = [(\"address\", myapp.forms.AddressForm),\n+             (\"paytype\", myapp.forms.PaymentChoiceForm),\n+             (\"cc\", myapp.forms.CreditCardForm),\n+             (\"confirmation\", myapp.forms.OrderForm)]\n+\n+    TEMPLATES = {\"address\": \"checkout/billingaddress.html\",\n+                 \"paytype\": \"checkout/paymentmethod.html\",\n+                 \"cc\": \"checkout/creditcard.html\",\n+                 \"confirmation\": \"checkout/confirmation.html\"}\n+\n+    def pay_by_credit_card(wizard):\n+        \"\"\"Return true if user opts to pay by credit card\"\"\"\n+        # Get cleaned data from payment step\n+        cleaned_data = wizard.get_cleaned_data_for_step('paytype') or {'method': 'none'}\n+        # Return true if the user selected credit card\n+        return cleaned_data['method'] == 'cc'\n+\n+\n+    class OrderWizard(SessionWizardView):\n+        def get_template_names(self):\n+            return [TEMPLATES[self.steps.current]]\n+\n+        def done(self, form_list, **kwargs):\n+            do_something_with_the_form_data(form_list)\n+            return HttpResponseRedirect('/page-to-redirect-to-when-done/')\n+            ...\n+\n+The ``urls.py`` file would contain something like::\n+\n+    urlpatterns = patterns('',\n+        (r'^checkout/$', OrderWizard.as_view(FORMS, condition_dict={'cc': pay_by_credit_card})),\n+    )\n+\n+Note that the ``OrderWizard`` object is initialized with a list of pairs.\n+The first element in the pair is a string that corresponds to the name of the\n+step and the second is the form class.\n+\n+In this example, the\n+:meth:`~django.views.generic.base.TemplateResponseMixin.get_template_names()`\n+method returns a list containing a single template, which is selected based on\n+the name of the current step.\n+\n .. _wizardview-advanced-methods:\n \n Advanced ``WizardView`` methods"
        },
        {
            "sha": "b81597320216afdd4ac7fd1788b4bc6967cfc351",
            "filename": "docs/ref/contrib/gis/install.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -959,15 +959,15 @@ Ubuntu & Debian GNU/Linux\n Ubuntu\n ^^^^^^\n \n-11.10\n-~~~~~\n+11.10 through 12.04\n+~~~~~~~~~~~~~~~~~~~\n \n-In Ubuntu 11.10, PostgreSQL was upgraded to 9.1. The installation commands are:\n+In Ubuntu 11.10, PostgreSQL was upgraded to 9.1. The installation command is:\n \n .. code-block:: bash\n \n-    $ sudo apt-get install binutils gdal-bin libproj-dev postgresql-9.1-postgis \\\n-         postgresql-server-dev-9.1 python-psycopg2\n+    $ sudo apt-get install binutils gdal-bin libproj-dev \\\n+         postgresql-9.1-postgis postgresql-server-dev-9.1 python-psycopg2\n \n .. _ubuntu10:\n \n@@ -976,7 +976,7 @@ In Ubuntu 11.10, PostgreSQL was upgraded to 9.1. The installation commands are:\n \n In Ubuntu 10.04, PostgreSQL was upgraded to 8.4 and GDAL was upgraded to 1.6.\n Ubuntu 10.04 uses PostGIS 1.4, while Ubuntu 10.10 uses PostGIS 1.5 (with\n-geography support).  The installation commands are:\n+geography support).  The installation command is:\n \n .. code-block:: bash\n "
        },
        {
            "sha": "ec265342b307ba9f6c2c304ad91aa4285f4c1935",
            "filename": "docs/ref/contrib/gis/tutorial.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -674,8 +674,8 @@ __ http://spatialreference.org/ref/epsg/32140/\n .. admonition:: Raw queries\n \n     When using :doc:`raw queries </topics/db/sql>`, you should generally wrap\n-    your geometry fields with the ``asText()`` SQL function so as the field\n-    value will be recognized by GEOS::\n+    your geometry fields with the ``asText()`` SQL function (or ``ST_AsText``\n+    for PostGIS) so as the field value will be recognized by GEOS::\n \n         City.objects.raw('SELECT id, name, asText(point) from myapp_city')\n "
        },
        {
            "sha": "9215c64f932970c449e3be4d884cb0f61f1bd34d",
            "filename": "docs/ref/contrib/markup.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fmarkup.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fmarkup.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fmarkup.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -5,6 +5,9 @@ django.contrib.markup\n .. module:: django.contrib.markup\n    :synopsis: A collection of template filters that implement common markup languages.\n \n+.. deprecated:: 1.5\n+    This module has been deprecated.\n+\n Django provides template filters that implement the following markup\n languages:\n "
        },
        {
            "sha": "bc921a9d33db5aaab5f8384cbede63bab63a3efd",
            "filename": "docs/ref/contrib/messages.txt",
            "status": "modified",
            "additions": 47,
            "deletions": 49,
            "changes": 96,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fmessages.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fcontrib%2Fmessages.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fmessages.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -5,47 +5,44 @@ The messages framework\n .. module:: django.contrib.messages\n    :synopsis: Provides cookie- and session-based temporary message storage.\n \n-Quite commonly in web applications, you may need to display a one-time\n-notification message (also know as \"flash message\") to the user after\n-processing a form or some other types of user input. For this, Django provides\n-full support for cookie- and session-based messaging, for both anonymous and\n-authenticated users. The messages framework allows you to temporarily store\n-messages in one request and retrieve them for display in a subsequent request\n-(usually the next one). Every message is tagged with a specific ``level`` that\n-determines its priority (e.g., ``info``, ``warning``, or ``error``).\n+Quite commonly in web applications, you need to display a one-time\n+notification message (also known as \"flash message\") to the user after\n+processing a form or some other types of user input.\n+\n+For this, Django provides full support for cookie- and session-based\n+messaging, for both anonymous and authenticated users. The messages framework\n+allows you to temporarily store messages in one request and retrieve them for\n+display in a subsequent request (usually the next one). Every message is\n+tagged with a specific ``level`` that determines its priority (e.g., ``info``,\n+``warning``, or ``error``).\n \n Enabling messages\n =================\n \n Messages are implemented through a :doc:`middleware </ref/middleware>`\n class and corresponding :doc:`context processor </ref/templates/api>`.\n \n-To enable message functionality, do the following:\n-\n-* Edit the :setting:`MIDDLEWARE_CLASSES` setting and make sure\n-  it contains ``'django.contrib.messages.middleware.MessageMiddleware'``.\n+The default ``settings.py`` created by ``django-admin.py startproject``\n+already contains all the settings required to enable message functionality:\n \n-  If you are using a :ref:`storage backend <message-storage-backends>` that\n-  relies on :doc:`sessions </topics/http/sessions>` (the default),\n-  ``'django.contrib.sessions.middleware.SessionMiddleware'`` must be\n-  enabled and appear before ``MessageMiddleware`` in your\n-  :setting:`MIDDLEWARE_CLASSES`.\n+* ``'django.contrib.messages'`` is in :setting:`INSTALLED_APPS`.\n \n-* Edit the :setting:`TEMPLATE_CONTEXT_PROCESSORS` setting and make sure\n-  it contains ``'django.contrib.messages.context_processors.messages'``.\n+* :setting:`MIDDLEWARE_CLASSES` contains\n+  ``'django.contrib.sessions.middleware.SessionMiddleware'`` and\n+  ``'django.contrib.messages.middleware.MessageMiddleware'``.\n \n-* Add ``'django.contrib.messages'`` to your :setting:`INSTALLED_APPS`\n-  setting\n+  The default :ref:`storage backend <message-storage-backends>` relies on\n+  :doc:`sessions </topics/http/sessions>`. That's why ``SessionMiddleware``\n+  must be enabled and appear before ``MessageMiddleware`` in\n+  :setting:`MIDDLEWARE_CLASSES`.\n \n-The default ``settings.py`` created by ``django-admin.py startproject`` has\n-``MessageMiddleware`` activated and the ``django.contrib.messages`` app\n-installed. Also, the default value for :setting:`TEMPLATE_CONTEXT_PROCESSORS`\n-contains ``'django.contrib.messages.context_processors.messages'``.\n+* :setting:`TEMPLATE_CONTEXT_PROCESSORS`   contains\n+  ``'django.contrib.messages.context_processors.messages'``.\n \n-If you don't want to use messages, you can remove the\n-``MessageMiddleware`` line from :setting:`MIDDLEWARE_CLASSES`, the ``messages``\n-context processor from :setting:`TEMPLATE_CONTEXT_PROCESSORS` and\n-``'django.contrib.messages'`` from your :setting:`INSTALLED_APPS`.\n+If you don't want to use messages, you can remove\n+``'django.contrib.messages'`` from your :setting:`INSTALLED_APPS`, the\n+``MessageMiddleware`` line from :setting:`MIDDLEWARE_CLASSES`, and the\n+``messages`` context processor from :setting:`TEMPLATE_CONTEXT_PROCESSORS`.\n \n Configuring the message engine\n ==============================\n@@ -56,34 +53,35 @@ Storage backends\n ----------------\n \n The messages framework can use different backends to store temporary messages.\n-If the default FallbackStorage isn't suitable to your needs, you can change\n-which backend is being used by adding a `MESSAGE_STORAGE`_ to your\n-settings, referencing the module and class of the storage class. For\n-example::\n \n-    MESSAGE_STORAGE = 'django.contrib.messages.storage.cookie.CookieStorage'\n+Django provides three built-in storage classes:\n \n-The value should be the full path of the desired storage class.\n+.. class:: django.contrib.messages.storage.session.SessionStorage\n \n-Three storage classes are available:\n+    This class stores all messages inside of the request's session. Therefore\n+    it requires Django's ``contrib.sessions`` application.\n \n-``'django.contrib.messages.storage.session.SessionStorage'``\n-    This class stores all messages inside of the request's session. It\n-    requires Django's ``contrib.sessions`` application.\n+.. class:: django.contrib.messages.storage.cookie.CookieStorage\n \n-``'django.contrib.messages.storage.cookie.CookieStorage'``\n     This class stores the message data in a cookie (signed with a secret hash\n     to prevent manipulation) to persist notifications across requests. Old\n-    messages are dropped if the cookie data size would exceed 4096 bytes.\n+    messages are dropped if the cookie data size would exceed 2048 bytes.\n+\n+.. class:: django.contrib.messages.storage.fallback.FallbackStorage\n \n-``'django.contrib.messages.storage.fallback.FallbackStorage'``\n-    This is the default storage class.\n+    This class first uses ``CookieStorage``, and falls back to using\n+    ``SessionStorage`` for the messages that could not fit in a single cookie.\n+    It also requires Django's ``contrib.sessions`` application.\n \n-    This class first uses CookieStorage for all messages, falling back to using\n-    SessionStorage for the messages that could not fit in a single cookie.\n+    This behavior avoids writing to the session whenever possible. It should\n+    provide the best performance in the general case.\n \n-    Since it is uses SessionStorage, it also requires Django's\n-    ``contrib.sessions`` application.\n+:class:`~django.contrib.messages.storage.fallback.FallbackStorage` is the\n+default storage class. If it isn't suitable to your needs, you can select\n+another storage class by setting `MESSAGE_STORAGE`_ to its full import path,\n+for example::\n+\n+    MESSAGE_STORAGE = 'django.contrib.messages.storage.cookie.CookieStorage'\n \n To write your own storage class, subclass the ``BaseStorage`` class in\n ``django.contrib.messages.storage.base`` and implement the ``_get`` and\n@@ -97,8 +95,8 @@ to that of the Python logging module. Message levels allow you to group\n messages by type so they can be filtered or displayed differently in views and\n templates.\n \n-The built-in levels (which can be imported from ``django.contrib.messages``\n-directly) are:\n+The built-in levels, which can be imported from ``django.contrib.messages``\n+directly, are:\n \n =========== ========\n Constant    Purpose"
        },
        {
            "sha": "7c06bf97eefac83ba22b6664a797a8b486d8cdf1",
            "filename": "docs/ref/forms/fields.txt",
            "status": "modified",
            "additions": 44,
            "deletions": 17,
            "changes": 61,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fforms%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fforms%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Ffields.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -398,11 +398,21 @@ For each field, we describe the default widget used if you don't specify\n \n     If no ``input_formats`` argument is provided, the default input formats are::\n \n-        '%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', # '2006-10-25', '10/25/2006', '10/25/06'\n-        '%b %d %Y', '%b %d, %Y',            # 'Oct 25 2006', 'Oct 25, 2006'\n-        '%d %b %Y', '%d %b, %Y',            # '25 Oct 2006', '25 Oct, 2006'\n-        '%B %d %Y', '%B %d, %Y',            # 'October 25 2006', 'October 25, 2006'\n-        '%d %B %Y', '%d %B, %Y',            # '25 October 2006', '25 October, 2006'\n+        '%Y-%m-%d',       # '2006-10-25'\n+        '%m/%d/%Y',       # '10/25/2006'\n+        '%m/%d/%y',       # '10/25/06'\n+\n+    Additionally, if you specify :setting:`USE_L10N=False<USE_L10N>` in your settings, the\n+    following will also be included in the default input formats::\n+\n+        '%b %m %d',       # 'Oct 25 2006'\n+        '%b %d, %Y',      # 'Oct 25, 2006'\n+        '%d %b %Y',       # '25 Oct 2006'\n+        '%d %b, %Y',      # '25 Oct, 2006'\n+        '%B %d %Y',       # 'October 25 2006'\n+        '%B %d, %Y',      # 'October 25, 2006'\n+        '%d %B %Y',       # '25 October 2006'\n+        '%d %B, %Y',      # '25 October, 2006'\n \n ``DateTimeField``\n ~~~~~~~~~~~~~~~~~\n@@ -842,7 +852,7 @@ Slightly complex built-in ``Field`` classes\n ``MultiValueField``\n ~~~~~~~~~~~~~~~~~~~\n \n-.. class:: MultiValueField(**kwargs)\n+.. class:: MultiValueField(fields=(), **kwargs)\n \n     * Default widget: ``TextInput``\n     * Empty value: ``''`` (an empty string)\n@@ -851,22 +861,39 @@ Slightly complex built-in ``Field`` classes\n       as an argument to the ``MultiValueField``.\n     * Error message keys: ``required``, ``invalid``\n \n-    This abstract field (must be subclassed) aggregates the logic of multiple\n-    fields. Subclasses should not have to implement clean(). Instead, they must\n-    implement compress(), which takes a list of valid values and returns a\n-    \"compressed\" version of those values -- a single value.  For example,\n-    :class:`SplitDateTimeField` is a subclass which combines a time field and\n-    a date field into a datetime object.\n+    Aggregates the logic of multiple fields that together produce a single\n+    value.\n+\n+    This field is abstract and must be subclassed. In contrast with the\n+    single-value fields, subclasses of :class:`MultiValueField` must not\n+    implement :meth:`~django.forms.Field.clean` but instead - implement\n+    :meth:`~MultiValueField.compress`.\n \n     Takes one extra required argument:\n \n     .. attribute:: fields\n \n-        A list of fields which are cleaned into a single field. Each value in\n-        ``clean`` is cleaned by the corresponding field in ``fields`` -- the first\n-        value is cleaned by the first field, the second value is cleaned by\n-        the second field, etc.  Once all fields are cleaned, the list of clean\n-        values is \"compressed\" into a single value.\n+        A tuple of fields whose values are cleaned and subsequently combined\n+        into a single value.  Each value of the field is cleaned by the\n+        corresponding field in ``fields`` -- the first value is cleaned by the\n+        first field, the second value is cleaned by the second field, etc.\n+        Once all fields are cleaned, the list of clean values is combined into\n+        a single value by :meth:`~MultiValueField.compress`.\n+\n+    .. attribute:: MultiValueField.widget\n+\n+        Must be a subclass of :class:`django.forms.MultiWidget`.\n+        Default value is :class:`~django.forms.widgets.TextInput`, which\n+        probably is not very useful in this case.\n+\n+    .. method:: compress(data_list)\n+\n+        Takes a list of valid values and returns  a \"compressed\" version of\n+        those values -- in a single value. For example,\n+        :class:`SplitDateTimeField` is a subclass which combines a time field\n+        and a date field into a ``datetime`` object.\n+\n+        This method must be implemented in the subclasses.\n \n ``SplitDateTimeField``\n ~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "sha": "4724cbdec2e64dd92ad328d0e63762441196958e",
            "filename": "docs/ref/forms/widgets.txt",
            "status": "modified",
            "additions": 178,
            "deletions": 58,
            "changes": 236,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fforms%2Fwidgets.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fforms%2Fwidgets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Fwidgets.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -11,6 +11,16 @@ A widget is Django's representation of a HTML input element. The widget\n handles the rendering of the HTML, and the extraction of data from a GET/POST\n dictionary that corresponds to the widget.\n \n+.. tip::\n+\n+    Widgets should not be confused with the :doc:`form fields </ref/forms/fields>`.\n+    Form fields deal with the logic of input validation and are used directly\n+    in templates. Widgets deal with rendering of HTML form input elements on\n+    the web page and extraction of raw submitted data. However, widgets do\n+    need to be :ref:`assigned <widget-to-field>` to form fields.\n+\n+.. _widget-to-field:\n+\n Specifying widgets\n ------------------\n \n@@ -95,15 +105,23 @@ choices are inherent to the model and not just the representational widget.\n Customizing widget instances\n ----------------------------\n \n-When Django renders a widget as HTML, it only renders the bare minimum\n-HTML - Django doesn't add a class definition, or any other widget-specific\n-attributes. This means that all :class:`TextInput` widgets will appear the same\n-on your Web page.\n+When Django renders a widget as HTML, it only renders very minimal markup -\n+Django doesn't add class names, or any other widget-specific attributes. This\n+means, for example, that all :class:`TextInput` widgets will appear the same\n+on your Web pages.\n+\n+There are two ways to customize widgets: :ref:`per widget instance\n+<styling-widget-instances>` and :ref:`per widget class <styling-widget-classes>`.\n \n-If you want to make one widget look different to another, you need to\n-specify additional attributes for each widget. When you specify a\n-widget, you can provide a list of attributes that will be added to the\n-rendered HTML for the widget.\n+.. _styling-widget-instances:\n+\n+Styling widget instances\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+If you want to make one widget instance look different from another, you will\n+need to specify additional attributes at the time when the widget object is\n+instantiated and assigned to a form field (and perhaps add some rules to your\n+CSS files).\n \n For example, take the following simple form::\n \n@@ -126,10 +144,9 @@ provided for each widget will be rendered exactly the same::\n \n On a real Web page, you probably don't want every widget to look the same. You\n might want a larger input element for the comment, and you might want the\n-'name' widget to have some special CSS class. To do this, you use the\n-:attr:`Widget.attrs` argument when creating the widget:\n-\n-For example::\n+'name' widget to have some special CSS class. It is also possible to specify\n+the 'type' attribute to take advantage of the new HTML5 input types.  To do\n+this, you use the :attr:`Widget.attrs` argument when creating the widget::\n \n     class CommentForm(forms.Form):\n         name = forms.CharField(\n@@ -146,31 +163,116 @@ Django will then include the extra attributes in the rendered output:\n     <tr><th>Url:</th><td><input type=\"text\" name=\"url\"/></td></tr>\n     <tr><th>Comment:</th><td><input type=\"text\" name=\"comment\" size=\"40\"/></td></tr>\n \n-.. _built-in widgets:\n+.. _styling-widget-classes:\n \n-Built-in widgets\n-----------------\n+Styling widget classes\n+^^^^^^^^^^^^^^^^^^^^^^\n \n-Django provides a representation of all the basic HTML widgets, plus some\n-commonly used groups of widgets:\n+With widgets, it is possible to add media (``css`` and ``javascript``)\n+and more deeply customize their appearance and behavior.\n \n-``Widget``\n-~~~~~~~~~~\n+In a nutshell, you will need to subclass the widget and either\n+:ref:`define a class \"Media\" <media-as-a-static-definition>` as a member of the\n+subclass, or :ref:`create a property \"media\" <dynamic-property>`, returning an\n+instance of that class.\n+\n+These methods involve somewhat advanced Python programming and are described in\n+detail in the :doc:`Form Media </topics/forms/media>` topic guide.\n+\n+.. _base-widget-classes:\n+\n+Base Widget classes\n+-------------------\n \n-.. class:: Widget\n+Base widget classes :class:`Widget` and :class:`MultiWidget` are subclassed by\n+all the :ref:`built-in widgets <built-in widgets>` and may serve as a\n+foundation for custom widgets.\n \n-    This abstract class cannot be rendered, but provides the basic attribute :attr:`~Widget.attrs`.\n+.. class:: Widget(attrs=None)\n+\n+    This abstract class cannot be rendered, but provides the basic attribute\n+    :attr:`~Widget.attrs`.  You may also implement or override the\n+    :meth:`~Widget.render()` method on custom widgets.\n \n     .. attribute:: Widget.attrs\n \n-        A dictionary containing HTML attributes to be set on the rendered widget.\n+        A dictionary containing HTML attributes to be set on the rendered\n+        widget.\n \n         .. code-block:: python\n \n             >>> name = forms.TextInput(attrs={'size': 10, 'title': 'Your name',})\n             >>> name.render('name', 'A name')\n             u'<input title=\"Your name\" type=\"text\" name=\"name\" value=\"A name\" size=\"10\" />'\n \n+    .. method:: render(name, value, attrs=None)\n+\n+        Returns HTML for the widget, as a Unicode string. This method must be\n+        implemented by the subclass, otherwise ``NotImplementedError`` will be\n+        raised.\n+\n+        The 'value' given is not guaranteed to be valid input, therefore\n+        subclass implementations should program defensively.\n+\n+.. class:: MultiWidget(widgets, attrs=None)\n+\n+    A widget that is composed of multiple widgets.\n+    :class:`~django.forms.widgets.MultiWidget` works hand in hand with the\n+    :class:`~django.forms.MultiValueField`.\n+\n+    .. method:: render(name, value, attrs=None)\n+\n+        Argument `value` is handled differently in this method from the\n+        subclasses of :class:`~Widget`.\n+\n+        If `value` is a list, output of :meth:`~MultiWidget.render` will be a\n+        concatenation of rendered child widgets. If `value` is not a list, it\n+        will be first processed by the method :meth:`~MultiWidget.decompress()`\n+        to create the list and then processed as above.\n+\n+        Unlike in the single value widgets, method :meth:`~MultiWidget.render`\n+        need not be implemented in the subclasses.\n+\n+    .. method:: decompress(value)\n+\n+        Returns a list of \"decompressed\" values for the given value of the\n+        multi-value field that makes use of the widget. The input value can be\n+        assumed as valid, but not necessarily non-empty.\n+\n+        This method **must be implemented** by the subclass, and since the\n+        value may be empty, the implementation must be defensive.\n+\n+        The rationale behind \"decompression\" is that it is necessary to \"split\"\n+        the combined value of the form field into the values of the individual\n+        field encapsulated within the multi-value field (e.g. when displaying\n+        the partially or fully filled-out form).\n+\n+        .. tip::\n+\n+            Note that :class:`~django.forms.MultiValueField` has a\n+            complementary method :meth:`~django.forms.MultiValueField.compress`\n+            with the opposite responsibility - to combine cleaned values of\n+            all member fields into one.\n+\n+\n+.. _built-in widgets:\n+\n+Built-in widgets\n+----------------\n+\n+Django provides a representation of all the basic HTML widgets, plus some\n+commonly used groups of widgets in the ``django.forms.widgets`` module,\n+including :ref:`the input of text <text-widgets>`, :ref:`various checkboxes\n+and selectors <selector-widgets>`, :ref:`uploading files <file-upload-widgets>`,\n+and :ref:`handling of multi-valued input <composite-widgets>`.\n+\n+.. _text-widgets:\n+\n+Widgets handling input of text\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+These widgets make use of the HTML elements ``input`` and ``textarea``.\n+\n ``TextInput``\n ~~~~~~~~~~~~~\n \n@@ -204,39 +306,8 @@ commonly used groups of widgets:\n \n     Hidden input: ``<input type='hidden' ...>``\n \n-``MultipleHiddenInput``\n-~~~~~~~~~~~~~~~~~~~~~~~\n-\n-.. class:: MultipleHiddenInput\n-\n-    Multiple ``<input type='hidden' ...>`` widgets.\n-\n-    A widget that handles multiple hidden widgets for fields that have a list\n-    of values.\n-\n-    .. attribute:: MultipleHiddenInput.choices\n-\n-        This attribute is optional when the field does not have a\n-        :attr:`~Field.choices` attribute. If it does, it will override anything\n-        you set here when the attribute is updated on the :class:`Field`.\n-\n-``FileInput``\n-~~~~~~~~~~~~~\n-\n-.. class:: FileInput\n-\n-    File upload input: ``<input type='file' ...>``\n-\n-``ClearableFileInput``\n-~~~~~~~~~~~~~~~~~~~~~~\n-\n-.. class:: ClearableFileInput\n-\n-    .. versionadded:: 1.3\n-\n-    File upload input: ``<input type='file' ...>``, with an additional checkbox\n-    input to clear the field's value, if the field is not required and has\n-    initial data.\n+    Note that there also is a :class:`MultipleHiddenInput` widget that\n+    encapsulates a set of hidden input elements.\n \n ``DateInput``\n ~~~~~~~~~~~~~\n@@ -245,7 +316,7 @@ commonly used groups of widgets:\n \n     Date input as a simple text box: ``<input type='text' ...>``\n \n-    Takes one optional argument:\n+    Takes same arguments as :class:`TextInput`, with one more optional argument:\n \n     .. attribute:: DateInput.format\n \n@@ -262,7 +333,7 @@ commonly used groups of widgets:\n \n     Date/time input as a simple text box: ``<input type='text' ...>``\n \n-    Takes one optional argument:\n+    Takes same arguments as :class:`TextInput`, with one more optional argument:\n \n     .. attribute:: DateTimeInput.format\n \n@@ -279,7 +350,7 @@ commonly used groups of widgets:\n \n     Time input as a simple text box: ``<input type='text' ...>``\n \n-    Takes one optional argument:\n+    Takes same arguments as :class:`TextInput`, with one more optional argument:\n \n     .. attribute:: TimeInput.format\n \n@@ -296,6 +367,11 @@ commonly used groups of widgets:\n \n     Text area: ``<textarea>...</textarea>``\n \n+.. _selector-widgets:\n+\n+Selector and checkbox widgets\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n ``CheckboxInput``\n ~~~~~~~~~~~~~~~~~\n \n@@ -439,6 +515,50 @@ commonly used groups of widgets:\n           ...\n         </ul>\n \n+.. _file-upload-widgets:\n+\n+File upload widgets\n+^^^^^^^^^^^^^^^^^^^\n+\n+``FileInput``\n+~~~~~~~~~~~~~\n+\n+.. class:: FileInput\n+\n+    File upload input: ``<input type='file' ...>``\n+\n+``ClearableFileInput``\n+~~~~~~~~~~~~~~~~~~~~~~\n+\n+.. class:: ClearableFileInput\n+\n+    .. versionadded:: 1.3\n+\n+    File upload input: ``<input type='file' ...>``, with an additional checkbox\n+    input to clear the field's value, if the field is not required and has\n+    initial data.\n+\n+.. _composite-widgets:\n+\n+Composite widgets\n+^^^^^^^^^^^^^^^^^\n+\n+``MultipleHiddenInput``\n+~~~~~~~~~~~~~~~~~~~~~~~\n+\n+.. class:: MultipleHiddenInput\n+\n+    Multiple ``<input type='hidden' ...>`` widgets.\n+\n+    A widget that handles multiple hidden widgets for fields that have a list\n+    of values.\n+\n+    .. attribute:: MultipleHiddenInput.choices\n+\n+        This attribute is optional when the field does not have a\n+        :attr:`~Field.choices` attribute. If it does, it will override anything\n+        you set here when the attribute is updated on the :class:`Field`.\n+\n ``MultiWidget``\n ~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "8b3c31f0294f9c32f9c546b67a644f8996677b5f",
            "filename": "docs/ref/models/fields.txt",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fmodels%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fmodels%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Ffields.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -195,6 +195,14 @@ support tablespaces for indexes, this option is ignored.\n The default value for the field. This can be a value or a callable object. If\n callable it will be called every time a new object is created.\n \n+The default cannot be a mutable object (model instance, list, set, etc.), as a\n+reference to the same instance of that object would be used as the default\n+value in all new model instances. Instead, wrap the desired default in a\n+callable.  For example, if you had a custom ``JSONField`` and wanted to specify\n+a dictionary as the default, use a ``lambda`` as follows::\n+\n+    contact_info = JSONField(\"ContactInfo\", default=lambda:{\"email\": \"to1@example.com\"})\n+\n ``editable``\n ------------\n \n@@ -983,10 +991,10 @@ define the details of how the relation works.\n     this with functions from the Python ``datetime`` module to limit choices of\n     objects by date. For example::\n \n-        limit_choices_to = {'pub_date__lte': datetime.now}\n+        limit_choices_to = {'pub_date__lte': datetime.date.today}\n \n     only allows the choice of related objects with a ``pub_date`` before the\n-    current date/time to be chosen.\n+    current date to be chosen.\n \n     Instead of a dictionary this can also be a :class:`~django.db.models.Q`\n     object for more :ref:`complex queries <complex-lookups-with-q>`. However,"
        },
        {
            "sha": "2fdc87df8c7ef634d0ce6167680e653dc7d327d2",
            "filename": "docs/ref/models/instances.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fmodels%2Finstances.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fmodels%2Finstances.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Finstances.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -135,7 +135,7 @@ access to more than a single field::\n             raise ValidationError('Draft entries may not have a publication date.')\n         # Set the pub_date for published items if it hasn't been set already.\n         if self.status == 'published' and self.pub_date is None:\n-            self.pub_date = datetime.datetime.now()\n+            self.pub_date = datetime.date.today()\n \n Any :exc:`~django.core.exceptions.ValidationError` exceptions raised by\n ``Model.clean()`` will be stored in a special key error dictionary key,"
        },
        {
            "sha": "8ec7cfc79171fe4e102d80b2e514013b90a9b6ca",
            "filename": "docs/ref/models/querysets.txt",
            "status": "modified",
            "additions": 51,
            "deletions": 6,
            "changes": 57,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fmodels%2Fquerysets.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fmodels%2Fquerysets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Fquerysets.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -31,6 +31,9 @@ You can evaluate a ``QuerySet`` in the following ways:\n       for e in Entry.objects.all():\n           print(e.headline)\n \n+  Note: Don't use this if all you want to do is determine if at least one\n+  result exists. It's more efficient to use :meth:`~QuerySet.exists`.\n+\n * **Slicing.** As explained in :ref:`limiting-querysets`, a ``QuerySet`` can\n   be sliced, using Python's array-slicing syntax. Slicing an unevaluated\n   ``QuerySet`` usually returns another unevaluated ``QuerySet``, but Django\n@@ -75,7 +78,7 @@ You can evaluate a ``QuerySet`` in the following ways:\n \n   Note: *Don't* use this if all you want to do is determine if at least one\n   result exists, and don't need the actual objects. It's more efficient to\n-  use :meth:`exists() <QuerySet.exists>` (see below).\n+  use :meth:`~QuerySet.exists` (see below).\n \n .. _pickling QuerySets:\n \n@@ -1047,7 +1050,7 @@ defer\n In some complex data-modeling situations, your models might contain a lot of\n fields, some of which could contain a lot of data (for example, text fields),\n or require expensive processing to convert them to Python objects. If you are\n-using the results of a queryset in some situation where you know you don't know\n+using the results of a queryset in some situation where you don't know\n if you need those particular fields when you initially fetch the data, you can\n tell Django not to retrieve them from the database.\n \n@@ -1523,9 +1526,40 @@ exists\n \n Returns ``True`` if the :class:`.QuerySet` contains any results, and ``False``\n if not. This tries to perform the query in the simplest and fastest way\n-possible, but it *does* execute nearly the same query. This means that calling\n-:meth:`.QuerySet.exists` is faster than ``bool(some_query_set)``, but not by\n-a large degree. If ``some_query_set`` has not yet been evaluated, but you know\n+possible, but it *does* execute nearly the same query as a normal\n+:class:`.QuerySet` query.\n+\n+:meth:`~.QuerySet.exists` is useful for searches relating to both\n+object membership in a :class:`.QuerySet` and to the existence of any objects in\n+a :class:`.QuerySet`, particularly in the context of a large :class:`.QuerySet`.\n+\n+The most efficient method of finding whether a model with a unique field\n+(e.g. ``primary_key``) is a member of a :class:`.QuerySet` is::\n+\n+    entry = Entry.objects.get(pk=123)\n+    if some_query_set.filter(pk=entry.pk).exists():\n+        print(\"Entry contained in queryset\")\n+\n+Which will be faster than the following which requires evaluating and iterating\n+through the entire queryset::\n+\n+    if entry in some_query_set:\n+       print(\"Entry contained in QuerySet\")\n+\n+And to find whether a queryset contains any items::\n+\n+    if some_query_set.exists():\n+        print(\"There is at least one object in some_query_set\")\n+\n+Which will be faster than::\n+\n+    if some_query_set:\n+        print(\"There is at least one object in some_query_set\")\n+\n+... but not by a large degree (hence needing a large queryset for efficiency\n+gains).\n+\n+Additionally, if a ``some_query_set`` has not yet been evaluated, but you know\n that it will be at some point, then using ``some_query_set.exists()`` will do\n more overall work (one query for the existence check plus an extra one to later\n retrieve the results) than simply using ``bool(some_query_set)``, which\n@@ -1945,6 +1979,17 @@ SQL equivalent::\n You can use ``range`` anywhere you can use ``BETWEEN`` in SQL — for dates,\n numbers and even characters.\n \n+.. warning::\n+\n+    Filtering a ``DateTimeField`` with dates won't include items on the last\n+    day, because the bounds are interpreted as \"0am on the given date\". If\n+    ``pub_date`` was a ``DateTimeField``, the above expression would be turned\n+    into this SQL::\n+\n+        SELECT ... WHERE pub_date BETWEEN '2005-01-01 00:00:00' and '2005-03-31 00:00:00';\n+\n+    Generally speaking, you can't mix dates and datetimes.\n+\n .. fieldlookup:: year\n \n year\n@@ -1958,7 +2003,7 @@ Example::\n \n SQL equivalent::\n \n-    SELECT ... WHERE pub_date BETWEEN '2005-01-01' AND '2005-12-31 23:59:59.999999';\n+    SELECT ... WHERE pub_date BETWEEN '2005-01-01' AND '2005-12-31';\n \n (The exact SQL syntax varies for each database engine.)\n "
        },
        {
            "sha": "16d067172d4d714a8822880d36940d7e7c6bf78f",
            "filename": "docs/ref/settings.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 23,
            "changes": 36,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fsettings.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Fref%2Fsettings.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsettings.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1304,25 +1304,13 @@ The URL where requests are redirected after login when the\n This is used by the :func:`~django.contrib.auth.decorators.login_required`\n decorator, for example.\n \n-.. _`note on LOGIN_REDIRECT_URL setting`:\n-\n-.. note::\n-    You can use :func:`~django.core.urlresolvers.reverse_lazy` to reference\n-    URLs by their name instead of providing a hardcoded value. Assuming a\n-    ``urls.py`` with an URLpattern named ``home``::\n-\n-        urlpatterns = patterns('',\n-            url('^welcome/$', 'test_app.views.home', name='home'),\n-        )\n-\n-    You can use :func:`~django.core.urlresolvers.reverse_lazy` like this::\n-\n-        from django.core.urlresolvers import reverse_lazy\n-\n-        LOGIN_REDIRECT_URL = reverse_lazy('home')\n+.. versionchanged:: 1.5\n \n-    This also works fine with localized URLs using\n-    :func:`~django.conf.urls.i18n.i18n_patterns`.\n+This setting now also accepts view function names and\n+:ref:`named URL patterns <naming-url-patterns>` which can be used to reduce\n+configuration duplication since you no longer have to define the URL in two\n+places (``settings`` and URLconf).\n+For backward compatibility reasons the default remains unchanged.\n \n .. setting:: LOGIN_URL\n \n@@ -1334,8 +1322,13 @@ Default: ``'/accounts/login/'``\n The URL where requests are redirected for login, especially when using the\n :func:`~django.contrib.auth.decorators.login_required` decorator.\n \n-.. note::\n-    See the `note on LOGIN_REDIRECT_URL setting`_\n+.. versionchanged:: 1.5\n+\n+This setting now also accepts view function names and\n+:ref:`named URL patterns <naming-url-patterns>` which can be used to reduce\n+configuration duplication since you no longer have to define the URL in two\n+places (``settings`` and URLconf).\n+For backward compatibility reasons the default remains unchanged.\n \n .. setting:: LOGOUT_URL\n \n@@ -1346,9 +1339,6 @@ Default: ``'/accounts/logout/'``\n \n LOGIN_URL counterpart.\n \n-.. note::\n-    See the `note on LOGIN_REDIRECT_URL setting`_\n-\n .. setting:: MANAGERS\n \n MANAGERS"
        },
        {
            "sha": "6420239f4765869380ae2884ee9f2701ca34d6f8",
            "filename": "docs/releases/1.5.txt",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Freleases%2F1.5.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Freleases%2F1.5.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.5.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -121,6 +121,12 @@ Django 1.5 also includes several smaller improvements worth noting:\n   argument. By default the batch_size is unlimited except for SQLite where\n   single batch is limited so that 999 parameters per query isn't exceeded.\n \n+* The :setting:`LOGIN_URL` and :setting:`LOGIN_REDIRECT_URL` settings now also\n+  accept view function names and\n+  :ref:`named URL patterns <naming-url-patterns>`. This allows you to reduce\n+  configuration duplication. More information can be found in the\n+  :func:`~django.contrib.auth.decorators.login_required` documentation.\n+\n Backwards incompatible changes in 1.5\n =====================================\n \n@@ -358,3 +364,11 @@ the built-in :func:`itertools.product` instead.\n The :class:`~django.utils.encoding.StrAndUnicode` mix-in has been deprecated.\n Define a ``__str__`` method and apply the\n :func:`~django.utils.encoding.python_2_unicode_compatible` decorator instead.\n+\n+``django.utils.markup``\n+~~~~~~~~~~~~~~~~~~~~~~~\n+\n+The markup contrib module has been deprecated and will follow an accelerated\n+deprecation schedule. Direct use of python markup libraries or 3rd party tag\n+libraries is preferred to Django maintaining this functionality in the\n+framework."
        },
        {
            "sha": "2329d1effa960e210602672a2de5cb4807453f39",
            "filename": "docs/releases/index.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Freleases%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Freleases%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2Findex.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -14,6 +14,7 @@ up to and including the new version.\n Final releases\n ==============\n \n+.. _development_release_notes:\n \n 1.5 release\n -----------"
        },
        {
            "sha": "ef03d5479ca2a444b420c170a2c378c9ab7a5db6",
            "filename": "docs/topics/auth.txt",
            "status": "modified",
            "additions": 37,
            "deletions": 0,
            "changes": 37,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fauth.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fauth.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -650,6 +650,36 @@ the handler, if ``created`` is ``True``, create the associated user profile::\n .. seealso:: :doc:`/topics/signals` for more information on Django's signal\n     dispatcher.\n \n+Adding UserProfile fields to the admin\n+--------------------------------------\n+\n+To add the UserProfile fields to the user page in the admin, define an\n+:class:`~django.contrib.admin.InlineModelAdmin` (for this example, we'll use a\n+:class:`~django.contrib.admin.StackedInline`) in your app's ``admin.py`` and\n+add it to a ``UserAdmin`` class which is registered with the\n+:class:`~django.contrib.auth.models.User` class::\n+\n+    from django.contrib import admin\n+    from django.contrib.auth.admin import UserAdmin\n+    from django.contrib.auth.models import User\n+\n+    from my_user_profile_app.models import UserProfile\n+\n+    # Define an inline admin descriptor for UserProfile model\n+    # which acts a bit like a singleton\n+    class UserProfileInline(admin.StackedInline):\n+        model = UserProfile\n+        can_delete = False\n+        verbose_name_plural = 'profile'\n+\n+    # Define a new User admin\n+    class UserAdmin(UserAdmin):\n+        inlines = (UserProfileInline, )\n+\n+    # Re-register UserAdmin\n+    admin.site.unregister(User)\n+    admin.site.register(User, UserAdmin)\n+\n Authentication in Web requests\n ==============================\n \n@@ -947,6 +977,13 @@ The login_required decorator\n \n         (r'^accounts/login/$', 'django.contrib.auth.views.login'),\n \n+    .. versionchanged:: 1.5\n+\n+    As of version 1.5 :setting:`settings.LOGIN_URL <LOGIN_URL>` now also accepts\n+    view function names and :ref:`named URL patterns <naming-url-patterns>`.\n+    This allows you to freely remap your login view within your URLconf\n+    without having to update the setting.\n+\n .. function:: views.login(request, [template_name, redirect_field_name, authentication_form])\n \n     **URL name:** ``login``"
        },
        {
            "sha": "2d3e00ab4cd74361364289cfea2ba50171ad3f84",
            "filename": "docs/topics/class-based-views/index.txt",
            "status": "modified",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fclass-based-views%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fclass-based-views%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fclass-based-views%2Findex.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -84,6 +84,50 @@ function-like entry to class-based views::\n For more information on how to use the built in generic views, consult the next\n topic on :doc:`generic class based views</topics/class-based-views/generic-display>`.\n \n+.. _supporting-other-http-methods:\n+\n+Supporting other HTTP methods\n+-----------------------------\n+\n+Suppose somebody wants to access our book library over HTTP using the views\n+as an API. The API client would connect every now and then and download book\n+data for the books published since last visit. But if no new books appeared\n+since then, it is a waste of CPU time and bandwidth to fetch the books from the\n+database, render a full response and send it to the client. It might be\n+preferable to ask the API when the most recent book was published.\n+\n+We map the URL to book list view in the URLconf::\n+\n+    from django.conf.urls import patterns\n+    from books.views import BookListView\n+\n+    urlpatterns = patterns('',\n+        (r'^books/$', BookListView.as_view()),\n+    )\n+\n+And the view::\n+\n+    from django.http import HttpResponse\n+    from django.views.generic import ListView\n+    from books.models import Book\n+\n+    class BookListView(ListView):\n+        model = Book\n+\n+        def head(self, *args, **kwargs):\n+            last_book = self.get_queryset().latest('publication_date')\n+            response = HttpResponse('')\n+            # RFC 1123 date format\n+            response['Last-Modified'] = last_book.publication_date.strftime('%a, %d %b %Y %H:%M:%S GMT')\n+            return response\n+\n+If the view is accessed from a ``GET`` request, a plain-and-simple object\n+list is returned in the response (using ``book_list.html`` template). But if\n+the client issues a ``HEAD`` request, the response has an empty body and\n+the ``Last-Modified`` header indicates when the most recent book was published.\n+Based on this information, the client may or may not download the full object\n+list.\n+\n Decorating class-based views\n ============================\n "
        },
        {
            "sha": "c869362d16e98f4d679516733b3d45a80d92e12e",
            "filename": "docs/topics/db/examples/many_to_one.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fdb%2Fexamples%2Fmany_to_one.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fdb%2Fexamples%2Fmany_to_one.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Fexamples%2Fmany_to_one.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -42,8 +42,8 @@ Create a few Reporters::\n \n Create an Article::\n \n-    >>> from datetime import datetime\n-    >>> a = Article(id=None, headline=\"This is a test\", pub_date=datetime(2005, 7, 27), reporter=r)\n+    >>> from datetime import date\n+    >>> a = Article(id=None, headline=\"This is a test\", pub_date=date(2005, 7, 27), reporter=r)\n     >>> a.save()\n \n     >>> a.reporter.id\n@@ -65,7 +65,7 @@ database, which always returns unicode strings)::\n \n Create an Article via the Reporter object::\n \n-    >>> new_article = r.article_set.create(headline=\"John's second story\", pub_date=datetime(2005, 7, 29))\n+    >>> new_article = r.article_set.create(headline=\"John's second story\", pub_date=date(2005, 7, 29))\n     >>> new_article\n     <Article: John's second story>\n     >>> new_article.reporter\n@@ -75,7 +75,7 @@ Create an Article via the Reporter object::\n \n Create a new article, and add it to the article set::\n \n-    >>> new_article2 = Article(headline=\"Paul's story\", pub_date=datetime(2006, 1, 17))\n+    >>> new_article2 = Article(headline=\"Paul's story\", pub_date=date(2006, 1, 17))\n     >>> r.article_set.add(new_article2)\n     >>> new_article2.reporter\n     <Reporter: John Smith>"
        },
        {
            "sha": "d2ff8645a96c2f45943d85e243a1555ab5cec4e7",
            "filename": "docs/topics/db/multi-db.txt",
            "status": "modified",
            "additions": 92,
            "deletions": 36,
            "changes": 128,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fdb%2Fmulti-db.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fdb%2Fmulti-db.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Fmulti-db.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -201,73 +201,129 @@ An example\n     write to propagate to the slaves). It also doesn't consider the\n     interaction of transactions with the database utilization strategy.\n \n-So - what does this mean in practice? Say you want ``myapp`` to\n-exist on the ``other`` database, and you want all other models in a\n-master/slave relationship between the databases ``master``, ``slave1`` and\n-``slave2``. To implement this, you would need 2 routers::\n+So - what does this mean in practice? Let's consider another sample\n+configuration. This one will have several databases: one for the\n+``auth`` application, and all other apps using a master/slave setup\n+with two read slaves. Here are the settings specifying these\n+databases::\n \n-    class MyAppRouter(object):\n-        \"\"\"A router to control all database operations on models in\n-        the myapp application\"\"\"\n+    DATABASES = {\n+        'auth_db': {\n+            'NAME': 'auth_db',\n+            'ENGINE': 'django.db.backends.mysql',\n+            'USER': 'mysql_user',\n+            'PASSWORD': 'swordfish',\n+        },\n+        'master': {\n+            'NAME': 'master',\n+            'ENGINE': 'django.db.backends.mysql',\n+            'USER': 'mysql_user',\n+            'PASSWORD': 'spam',\n+        },\n+        'slave1': {\n+            'NAME': 'slave1',\n+            'ENGINE': 'django.db.backends.mysql',\n+            'USER': 'mysql_user',\n+            'PASSWORD': 'eggs',\n+        },\n+        'slave2': {\n+            'NAME': 'slave2',\n+            'ENGINE': 'django.db.backends.mysql',\n+            'USER': 'mysql_user',\n+            'PASSWORD': 'bacon',\n+        },\n+    }\n+\n+Now we'll need to handle routing. First we want a router that knows to\n+send queries for the ``auth`` app to ``auth_db``::\n \n+    class AuthRouter(object):\n+        \"\"\"\n+        A router to control all database operations on models in the\n+        auth application.\n+        \"\"\"\n         def db_for_read(self, model, **hints):\n-            \"Point all operations on myapp models to 'other'\"\n-            if model._meta.app_label == 'myapp':\n-                return 'other'\n+            \"\"\"\n+            Attempts to read auth models go to auth_db.\n+            \"\"\"\n+            if model._meta.app_label == 'auth':\n+                return 'auth_db'\n             return None\n \n         def db_for_write(self, model, **hints):\n-            \"Point all operations on myapp models to 'other'\"\n-            if model._meta.app_label == 'myapp':\n-                return 'other'\n+            \"\"\"\n+            Attempts to write auth models go to auth_db.\n+            \"\"\"\n+            if model._meta.app_label == 'auth':\n+                return 'auth_db'\n             return None\n \n         def allow_relation(self, obj1, obj2, **hints):\n-            \"Allow any relation if a model in myapp is involved\"\n-            if obj1._meta.app_label == 'myapp' or obj2._meta.app_label == 'myapp':\n-                return True\n+            \"\"\"\n+            Allow relations if a model in the auth app is involved.\n+            \"\"\"\n+            if obj1._meta.app_label == 'auth' or \\\n+               obj2._meta.app_label == 'auth':\n+               return True\n             return None\n \n         def allow_syncdb(self, db, model):\n-            \"Make sure the myapp app only appears on the 'other' db\"\n-            if db == 'other':\n-                return model._meta.app_label == 'myapp'\n-            elif model._meta.app_label == 'myapp':\n+            \"\"\"\n+            Make sure the auth app only appears in the 'auth_db'\n+            database.\n+            \"\"\"\n+            if db == 'auth_db':\n+                return model._meta.app_label == 'auth'\n+            elif model._meta.app_label == 'auth':\n                 return False\n             return None\n \n-    class MasterSlaveRouter(object):\n-        \"\"\"A router that sets up a simple master/slave configuration\"\"\"\n+And we also want a router that sends all other apps to the\n+master/slave configuration, and randomly chooses a slave to read\n+from::\n \n+    import random\n+\n+    class MasterSlaveRouter(object):\n         def db_for_read(self, model, **hints):\n-            \"Point all read operations to a random slave\"\n-            return random.choice(['slave1','slave2'])\n+            \"\"\"\n+            Reads go to a randomly-chosen slave.\n+            \"\"\"\n+            return random.choice(['slave1', 'slave2'])\n \n         def db_for_write(self, model, **hints):\n-            \"Point all write operations to the master\"\n+            \"\"\"\n+            Writes always go to master.\n+            \"\"\"\n             return 'master'\n \n         def allow_relation(self, obj1, obj2, **hints):\n-            \"Allow any relation between two objects in the db pool\"\n-            db_list = ('master','slave1','slave2')\n-            if obj1._state.db in db_list and obj2._state.db in db_list:\n+            \"\"\"\n+            Relations between objects are allowed if both objects are\n+            in the master/slave pool.\n+            \"\"\"\n+            db_list = ('master', 'slave1', 'slave2')\n+            if obj1.state.db in db_list and obj2.state.db in db_list:\n                 return True\n             return None\n \n         def allow_syncdb(self, db, model):\n-            \"Explicitly put all models on all databases.\"\n+            \"\"\"\n+            All non-auth models end up in this pool.\n+            \"\"\"\n             return True\n \n-Then, in your settings file, add the following (substituting ``path.to.`` with\n-the actual python path to the module where you define the routers)::\n+Finally, in the settings file, we add the following (substituting\n+``path.to.`` with the actual python path to the module(s) where the\n+routers are defined)::\n \n-    DATABASE_ROUTERS = ['path.to.MyAppRouter', 'path.to.MasterSlaveRouter']\n+    DATABASE_ROUTERS = ['path.to.AuthRouter', 'path.to.MasterSlaveRouter']\n \n The order in which routers are processed is significant. Routers will\n be queried in the order the are listed in the\n :setting:`DATABASE_ROUTERS` setting . In this example, the\n-``MyAppRouter`` is processed before the ``MasterSlaveRouter``, and as a\n-result, decisions concerning the models in ``myapp`` are processed\n+``AuthRouter`` is processed before the ``MasterSlaveRouter``, and as a\n+result, decisions concerning the models in ``auth`` are processed\n before any other decision is made. If the :setting:`DATABASE_ROUTERS`\n setting listed the two routers in the other order,\n ``MasterSlaveRouter.allow_syncdb()`` would be processed first. The\n@@ -276,11 +332,11 @@ that all models would be available on all databases.\n \n With this setup installed, lets run some Django code::\n \n-    >>> # This retrieval will be performed on the 'credentials' database\n+    >>> # This retrieval will be performed on the 'auth_db' database\n     >>> fred = User.objects.get(username='fred')\n     >>> fred.first_name = 'Frederick'\n \n-    >>> # This save will also be directed to 'credentials'\n+    >>> # This save will also be directed to 'auth_db'\n     >>> fred.save()\n \n     >>> # These retrieval will be randomly allocated to a slave database"
        },
        {
            "sha": "5385b2a72d2d1804eac62c19543d65cf44140925",
            "filename": "docs/topics/db/queries.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fdb%2Fqueries.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fdb%2Fqueries.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Fqueries.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -35,8 +35,8 @@ models, which comprise a Weblog application:\n         blog = models.ForeignKey(Blog)\n         headline = models.CharField(max_length=255)\n         body_text = models.TextField()\n-        pub_date = models.DateTimeField()\n-        mod_date = models.DateTimeField()\n+        pub_date = models.DateField()\n+        mod_date = models.DateField()\n         authors = models.ManyToManyField(Author)\n         n_comments = models.IntegerField()\n         n_pingbacks = models.IntegerField()\n@@ -233,7 +233,7 @@ refinements together. For example::\n     >>> Entry.objects.filter(\n     ...     headline__startswith='What'\n     ... ).exclude(\n-    ...     pub_date__gte=datetime.now()\n+    ...     pub_date__gte=datetime.date.today()\n     ... ).filter(\n     ...     pub_date__gte=datetime(2005, 1, 30)\n     ... )\n@@ -258,8 +258,8 @@ stored, used and reused.\n Example::\n \n     >> q1 = Entry.objects.filter(headline__startswith=\"What\")\n-    >> q2 = q1.exclude(pub_date__gte=datetime.now())\n-    >> q3 = q1.filter(pub_date__gte=datetime.now())\n+    >> q2 = q1.exclude(pub_date__gte=datetime.date.today())\n+    >> q3 = q1.filter(pub_date__gte=datetime.date.today())\n \n These three ``QuerySets`` are separate. The first is a base\n :class:`~django.db.models.query.QuerySet` containing all entries that contain a\n@@ -282,7 +282,7 @@ actually run the query until the :class:`~django.db.models.query.QuerySet` is\n *evaluated*. Take a look at this example::\n \n     >>> q = Entry.objects.filter(headline__startswith=\"What\")\n-    >>> q = q.filter(pub_date__lte=datetime.now())\n+    >>> q = q.filter(pub_date__lte=datetime.date.today())\n     >>> q = q.exclude(body_text__icontains=\"food\")\n     >>> print(q)\n \n@@ -968,11 +968,12 @@ Be aware that the ``update()`` method is converted directly to an SQL\n statement. It is a bulk operation for direct updates. It doesn't run any\n :meth:`~django.db.models.Model.save` methods on your models, or emit the\n ``pre_save`` or ``post_save`` signals (which are a consequence of calling\n-:meth:`~django.db.models.Model.save`). If you want to save every item in a\n-:class:`~django.db.models.query.QuerySet` and make sure that the\n-:meth:`~django.db.models.Model.save` method is called on each instance, you\n-don't need any special function to handle that. Just loop over them and call\n-:meth:`~django.db.models.Model.save`::\n+:meth:`~django.db.models.Model.save`), or honor the\n+:attr:`~django.db.models.DateField.auto_now` field option.\n+If you want to save every item in a :class:`~django.db.models.query.QuerySet`\n+and make sure that the :meth:`~django.db.models.Model.save` method is called on\n+each instance, you don't need any special function to handle that. Just loop\n+over them and call :meth:`~django.db.models.Model.save`::\n \n     for item in my_queryset:\n         item.save()"
        },
        {
            "sha": "29a7829799ebef7515ca57a96133a31c8266e8d4",
            "filename": "docs/topics/forms/media.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fforms%2Fmedia.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fforms%2Fmedia.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fforms%2Fmedia.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -38,6 +38,8 @@ in a form suitable for easy inclusion on your Web page.\n     whichever toolkit suits your requirements. Django is able to integrate\n     with any JavaScript toolkit.\n \n+.. _media-as-a-static-definition:\n+\n Media as a static definition\n ----------------------------\n \n@@ -78,10 +80,8 @@ A dictionary describing the CSS files required for various forms of output\n media.\n \n The values in the dictionary should be a tuple/list of file names. See\n-`the section on media paths`_ for details of how to specify paths to media\n-files.\n-\n-.. _the section on media paths: `Paths in media definitions`_\n+:ref:`the section on media paths <form-media-paths>` for details of how to\n+specify paths to media files.\n \n The keys in the dictionary are the output media types. These are the same\n types accepted by CSS files in media declarations: 'all', 'aural', 'braille',\n@@ -117,8 +117,8 @@ If this last CSS definition were to be rendered, it would become the following H\n ``js``\n ~~~~~~\n \n-A tuple describing the required JavaScript files. See\n-`the section on media paths`_ for details of how to specify paths to media\n+A tuple describing the required JavaScript files. See :ref:`the section on\n+media paths <form-media-paths>` for details of how to specify paths to media\n files.\n \n ``extend``\n@@ -164,10 +164,10 @@ declaration to the media declaration::\n     <script type=\"text/javascript\" src=\"http://static.example.com/whizbang.js\"></script>\n \n If you require even more control over media inheritance, define your media\n-using a `dynamic property`_. Dynamic properties give you complete control over\n-which media files are inherited, and which are not.\n+using a :ref:`dynamic property <dynamic-property>`. Dynamic properties give\n+you complete control over which media files are inherited, and which are not.\n \n-.. _dynamic property: `Media as a dynamic property`_\n+.. _dynamic-property:\n \n Media as a dynamic property\n ---------------------------\n@@ -198,9 +198,9 @@ Paths in media definitions\n .. versionchanged:: 1.3\n \n Paths used to specify media can be either relative or absolute. If a path\n-starts with '/', 'http://' or 'https://', it will be interpreted as an absolute\n-path, and left as-is. All other paths will be prepended with the value of\n-the appropriate prefix.\n+starts with ``/``, ``http://`` or ``https://``, it will be interpreted as an\n+absolute path, and left as-is. All other paths will be prepended with the value\n+of the appropriate prefix.\n \n As part of the introduction of the\n :doc:`staticfiles app </ref/contrib/staticfiles>` two new settings were added"
        },
        {
            "sha": "caff03c581ce9ae6c79c642f2ffbb47c09f2e311",
            "filename": "docs/topics/forms/modelforms.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fforms%2Fmodelforms.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fforms%2Fmodelforms.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fforms%2Fmodelforms.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -311,18 +311,18 @@ model fields:\n    to exclude from the form.\n \n For example, if you want a form for the ``Author`` model (defined\n-above) that includes only the ``name`` and ``title`` fields, you would\n+above) that includes only the ``name`` and ``birth_date`` fields, you would\n specify ``fields`` or ``exclude`` like this::\n \n     class PartialAuthorForm(ModelForm):\n         class Meta:\n             model = Author\n-            fields = ('name', 'title')\n+            fields = ('name', 'birth_date')\n \n     class PartialAuthorForm(ModelForm):\n         class Meta:\n             model = Author\n-            exclude = ('birth_date',)\n+            exclude = ('title',)\n \n Since the Author model has only 3 fields, 'name', 'title', and\n 'birth_date', the forms above will contain exactly the same fields."
        },
        {
            "sha": "4503bbd6ef16f4aee012c59d6513b931738f0644",
            "filename": "docs/topics/http/urls.txt",
            "status": "modified",
            "additions": 52,
            "deletions": 50,
            "changes": 102,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fhttp%2Furls.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fhttp%2Furls.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fhttp%2Furls.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -20,18 +20,18 @@ Overview\n ========\n \n To design URLs for an app, you create a Python module informally called a\n-**URLconf** (URL configuration). This module is pure Python code and\n-is a simple mapping between URL patterns (as simple regular expressions) to\n-Python callback functions (your views).\n+**URLconf** (URL configuration). This module is pure Python code and is a\n+simple mapping between URL patterns (simple regular expressions) to Python\n+functions (your views).\n \n This mapping can be as short or as long as needed. It can reference other\n mappings. And, because it's pure Python code, it can be constructed\n dynamically.\n \n .. versionadded:: 1.4\n-    Django also allows to translate URLs according to the active language.\n-    This process is described in the\n-    :ref:`internationalization docs <url-internationalization>`.\n+    Django also provides a way to translate URLs according to the active\n+    language. See the :ref:`internationalization documentation\n+    <url-internationalization>` for more information.\n \n .. _how-django-processes-a-request:\n \n@@ -154,11 +154,12 @@ The matching/grouping algorithm\n Here's the algorithm the URLconf parser follows, with respect to named groups\n vs. non-named groups in a regular expression:\n \n-If there are any named arguments, it will use those, ignoring non-named arguments.\n-Otherwise, it will pass all non-named arguments as positional arguments.\n+1. If there are any named arguments, it will use those, ignoring non-named\n+   arguments.\n \n-In both cases, it will pass any extra keyword arguments as keyword arguments.\n-See \"Passing extra options to view functions\" below.\n+2. Otherwise, it will pass all non-named arguments as positional arguments.\n+\n+In both cases, any extra keyword arguments that have been given as per `Passing extra options to view functions`_ (below) will also be passed to the view.\n \n What the URLconf searches against\n =================================\n@@ -176,6 +177,44 @@ The URLconf doesn't look at the request method. In other words, all request\n methods -- ``POST``, ``GET``, ``HEAD``, etc. -- will be routed to the same\n function for the same URL.\n \n+Notes on capturing text in URLs\n+===============================\n+\n+Each captured argument is sent to the view as a plain Python string, regardless\n+of what sort of match the regular expression makes. For example, in this\n+URLconf line::\n+\n+    (r'^articles/(?P<year>\\d{4})/$', 'news.views.year_archive'),\n+\n+...the ``year`` argument to ``news.views.year_archive()`` will be a string, not\n+an integer, even though the ``\\d{4}`` will only match integer strings.\n+\n+A convenient trick is to specify default parameters for your views' arguments.\n+Here's an example URLconf and view::\n+\n+    # URLconf\n+    urlpatterns = patterns('',\n+        (r'^blog/$', 'blog.views.page'),\n+        (r'^blog/page(?P<num>\\d+)/$', 'blog.views.page'),\n+    )\n+\n+    # View (in blog/views.py)\n+    def page(request, num=\"1\"):\n+        # Output the appropriate page of blog entries, according to num.\n+\n+In the above example, both URL patterns point to the same view --\n+``blog.views.page`` -- but the first pattern doesn't capture anything from the\n+URL. If the first pattern matches, the ``page()`` function will use its\n+default argument for ``num``, ``\"1\"``. If the second pattern matches,\n+``page()`` will use whatever ``num`` value was captured by the regex.\n+\n+Performance\n+===========\n+\n+Each regular expression in a ``urlpatterns`` is compiled the first time it's\n+accessed. This makes the system blazingly fast.\n+\n+\n Syntax of the urlpatterns variable\n ==================================\n \n@@ -209,10 +248,10 @@ The first argument to ``patterns()`` is a string ``prefix``. See\n \n The remaining arguments should be tuples in this format::\n \n-    (regular expression, Python callback function [, optional dictionary [, optional name]])\n+    (regular expression, Python callback function [, optional_dictionary [, optional_name]])\n \n-...where ``optional dictionary`` and ``optional name`` are optional. (See\n-`Passing extra options to view functions`_ below.)\n+The ``optional_dictionary`` and ``optional_name`` parameters are described in\n+`Passing extra options to view functions`_ below.\n \n .. note::\n     Because `patterns()` is a function call, it accepts a maximum of 255\n@@ -332,43 +371,6 @@ value should suffice.\n See the documentation about :ref:`the 500 (HTTP Internal Server Error) view\n <http_internal_server_error_view>` for more information.\n \n-Notes on capturing text in URLs\n-===============================\n-\n-Each captured argument is sent to the view as a plain Python string, regardless\n-of what sort of match the regular expression makes. For example, in this\n-URLconf line::\n-\n-    (r'^articles/(?P<year>\\d{4})/$', 'news.views.year_archive'),\n-\n-...the ``year`` argument to ``news.views.year_archive()`` will be a string, not\n-an integer, even though the ``\\d{4}`` will only match integer strings.\n-\n-A convenient trick is to specify default parameters for your views' arguments.\n-Here's an example URLconf and view::\n-\n-    # URLconf\n-    urlpatterns = patterns('',\n-        (r'^blog/$', 'blog.views.page'),\n-        (r'^blog/page(?P<num>\\d+)/$', 'blog.views.page'),\n-    )\n-\n-    # View (in blog/views.py)\n-    def page(request, num=\"1\"):\n-        # Output the appropriate page of blog entries, according to num.\n-\n-In the above example, both URL patterns point to the same view --\n-``blog.views.page`` -- but the first pattern doesn't capture anything from the\n-URL. If the first pattern matches, the ``page()`` function will use its\n-default argument for ``num``, ``\"1\"``. If the second pattern matches,\n-``page()`` will use whatever ``num`` value was captured by the regex.\n-\n-Performance\n-===========\n-\n-Each regular expression in a ``urlpatterns`` is compiled the first time it's\n-accessed. This makes the system blazingly fast.\n-\n The view prefix\n ===============\n "
        },
        {
            "sha": "a7f48fe1fd490540f2163650d071d3a89839d7d3",
            "filename": "docs/topics/i18n/translation.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fi18n%2Ftranslation.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fi18n%2Ftranslation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Ftranslation.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1251,6 +1251,11 @@ As a convenience, Django comes with a view, :func:`django.views.i18n.set_languag\n that sets a user's language preference and redirects to a given URL or, by default,\n back to the previous page.\n \n+Make sure that the following item is in your\n+:setting:`TEMPLATE_CONTEXT_PROCESSORS` list in your settings file::\n+\n+    'django.core.context_processors.i18n'\n+\n Activate this view by adding the following line to your URLconf::\n \n     (r'^i18n/', include('django.conf.urls.i18n')),"
        },
        {
            "sha": "39b9a93c0472f0aec78f56fa7ace558c96ba4dce",
            "filename": "docs/topics/install.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 8,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Finstall.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Finstall.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Finstall.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -9,10 +9,8 @@ Install Python\n \n Being a Python Web framework, Django requires Python.\n \n-It works with any Python version from 2.6.5 to 2.7 (due to backwards\n-incompatibilities in Python 3.0, Django does not currently work with\n-Python 3.0; see :doc:`the Django FAQ </faq/install>` for more\n-information on supported Python versions and the 3.0 transition).\n+It works with any Python version from 2.6.5 to 2.7. It also features\n+experimental support for versions 3.2 and 3.3.\n \n Get Python at http://www.python.org. If you're running Linux or Mac OS X, you\n probably already have it installed.\n@@ -259,15 +257,14 @@ Installing the development version\n \n     If you decide to use the latest development version of Django,\n     you'll want to pay close attention to `the development timeline`_,\n-    and you'll want to keep an eye on `the list of\n-    backwards-incompatible changes`_. This will help you stay on top\n-    of any new features you might want to use, as well as any changes\n+    and you'll want to keep an eye on the :ref:`release notes for the\n+    upcoming release <development_release_notes>`. This will help you stay\n+    on top of any new features you might want to use, as well as any changes\n     you'll need to make to your code when updating your copy of Django.\n     (For stable releases, any necessary changes are documented in the\n     release notes.)\n \n .. _the development timeline: https://code.djangoproject.com/timeline\n-.. _the list of backwards-incompatible changes: https://code.djangoproject.com/wiki/BackwardsIncompatibleChanges\n \n If you'd like to be able to update your Django code occasionally with the\n latest bug fixes and improvements, follow these instructions:"
        },
        {
            "sha": "28baf875226dbb29253c2e2ede179caa2530ee92",
            "filename": "docs/topics/logging.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Flogging.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Flogging.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Flogging.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -255,12 +255,12 @@ complex logging setup, configured using :meth:`logging.dictConfig`::\n         },\n         'handlers': {\n             'null': {\n-                'level':'DEBUG',\n-                'class':'django.utils.log.NullHandler',\n+                'level': 'DEBUG',\n+                'class': 'django.utils.log.NullHandler',\n             },\n             'console':{\n-                'level':'DEBUG',\n-                'class':'logging.StreamHandler',\n+                'level': 'DEBUG',\n+                'class': 'logging.StreamHandler',\n                 'formatter': 'simple'\n             },\n             'mail_admins': {\n@@ -271,9 +271,9 @@ complex logging setup, configured using :meth:`logging.dictConfig`::\n         },\n         'loggers': {\n             'django': {\n-                'handlers':['null'],\n+                'handlers': ['null'],\n                 'propagate': True,\n-                'level':'INFO',\n+                'level': 'INFO',\n             },\n             'django.request': {\n                 'handlers': ['mail_admins'],"
        },
        {
            "sha": "f5749faaf2e1887957efc8bedad4194683608398",
            "filename": "docs/topics/python3.txt",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fpython3.txt",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/docs%2Ftopics%2Fpython3.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fpython3.txt?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -324,8 +324,8 @@ Writing compatible code with six\n six_ is the canonical compatibility library for supporting Python 2 and 3 in\n a single codebase. Read its documentation!\n \n-:mod`six` is bundled with Django as of version 1.4.2. You can import it as\n-:mod`django.utils.six`.\n+:mod:`six` is bundled with Django as of version 1.4.2. You can import it as\n+:mod:`django.utils.six`.\n \n Here are the most common changes required to write compatible code.\n \n@@ -400,5 +400,12 @@ The version of six bundled with Django includes one extra function:\n     2 and :meth:`~django.utils.datastructures.MultiValueDict.lists()` on\n     Python 3.\n \n+.. function:: assertRaisesRegex(testcase, *args, **kwargs)\n+\n+    This replaces ``testcase.assertRaisesRegexp`` on Python 2, and\n+    ``testcase.assertRaisesRegex`` on Python 3. ``assertRaisesRegexp`` still\n+    exists in current Python3 versions, but issues a warning.\n+\n+\n In addition to six' defaults moves, Django's version provides ``thread`` as\n ``_thread`` and ``dummy_thread`` as ``_dummy_thread``."
        },
        {
            "sha": "57f45ab0ffae00221671764ce324f217bafa3d59",
            "filename": "tests/regressiontests/admin_inlines/tests.py",
            "status": "modified",
            "additions": 59,
            "deletions": 2,
            "changes": 61,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -8,10 +8,11 @@\n from django.test.utils import override_settings\n \n # local test models\n-from .admin import InnerInline\n+from .admin import InnerInline, TitleInline, site\n from .models import (Holder, Inner, Holder2, Inner2, Holder3, Inner3, Person,\n     OutfitItem, Fashionista, Teacher, Parent, Child, Author, Book, Profile,\n-    ProfileCollection, ParentModelWithCustomPk, ChildModel1, ChildModel2)\n+    ProfileCollection, ParentModelWithCustomPk, ChildModel1, ChildModel2,\n+    Title)\n \n \n @override_settings(PASSWORD_HASHERS=('django.contrib.auth.hashers.SHA1PasswordHasher',))\n@@ -408,6 +409,47 @@ class SeleniumFirefoxTests(AdminSeleniumWebDriverTestCase):\n     fixtures = ['admin-views-users.xml']\n     urls = \"regressiontests.admin_inlines.urls\"\n \n+    def test_add_stackeds(self):\n+        \"\"\"\n+        Ensure that the \"Add another XXX\" link correctly adds items to the\n+        stacked formset.\n+        \"\"\"\n+        self.admin_login(username='super', password='secret')\n+        self.selenium.get('%s%s' % (self.live_server_url,\n+            '/admin/admin_inlines/holder4/add/'))\n+\n+        inline_id = '#inner4stacked_set-group'\n+        rows_length = lambda: len(self.selenium.find_elements_by_css_selector(\n+            '%s .dynamic-inner4stacked_set' % inline_id))\n+        self.assertEqual(rows_length(), 3)\n+\n+        add_button = self.selenium.find_element_by_link_text(\n+            'Add another Inner4 Stacked')\n+        add_button.click()\n+\n+        self.assertEqual(rows_length(), 4)\n+\n+    def test_delete_stackeds(self):\n+        self.admin_login(username='super', password='secret')\n+        self.selenium.get('%s%s' % (self.live_server_url,\n+            '/admin/admin_inlines/holder4/add/'))\n+\n+        inline_id = '#inner4stacked_set-group'\n+        rows_length = lambda: len(self.selenium.find_elements_by_css_selector(\n+            '%s .dynamic-inner4stacked_set' % inline_id))\n+        self.assertEqual(rows_length(), 3)\n+\n+        add_button = self.selenium.find_element_by_link_text(\n+            'Add another Inner4 Stacked')\n+        add_button.click()\n+        add_button.click()\n+\n+        self.assertEqual(rows_length(), 5, msg=\"sanity check\")\n+        for delete_link in self.selenium.find_elements_by_css_selector(\n+                '%s .inline-deletelink' % inline_id):\n+            delete_link.click()\n+        self.assertEqual(rows_length(), 3)\n+\n     def test_add_inlines(self):\n         \"\"\"\n         Ensure that the \"Add another XXX\" link correctly adds items to the\n@@ -516,6 +558,21 @@ def test_delete_inlines(self):\n         self.assertEqual(len(self.selenium.find_elements_by_css_selector(\n             'form#profilecollection_form tr.dynamic-profile_set#profile_set-2')), 1)\n \n+    def test_alternating_rows(self):\n+        self.admin_login(username='super', password='secret')\n+        self.selenium.get('%s%s' % (self.live_server_url,\n+            '/admin/admin_inlines/profilecollection/add/'))\n+\n+        # Add a few inlines\n+        self.selenium.find_element_by_link_text('Add another Profile').click()\n+        self.selenium.find_element_by_link_text('Add another Profile').click()\n+\n+        row_selector = 'form#profilecollection_form tr.dynamic-profile_set'\n+        self.assertEqual(len(self.selenium.find_elements_by_css_selector(\n+            \"%s.row1\" % row_selector)), 2, msg=\"Expect two row1 styled rows\")\n+        self.assertEqual(len(self.selenium.find_elements_by_css_selector(\n+            \"%s.row2\" % row_selector)), 1, msg=\"Expect one row2 styled row\")\n+\n \n class SeleniumChromeTests(SeleniumFirefoxTests):\n     webdriver_class = 'selenium.webdriver.chrome.webdriver.WebDriver'"
        },
        {
            "sha": "6028eac846e9f647821db11f3864bef21d355abc",
            "filename": "tests/regressiontests/admin_scripts/tests.py",
            "status": "modified",
            "additions": 19,
            "deletions": 19,
            "changes": 38,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -181,11 +181,11 @@ class DjangoAdminNoSettings(AdminScriptTestCase):\n     \"A series of tests for django-admin.py when there is no settings.py file.\"\n \n     def test_builtin_command(self):\n-        \"no settings: django-admin builtin commands fail with an import error when no settings provided\"\n+        \"no settings: django-admin builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, 'environment variable DJANGO_SETTINGS_MODULE is undefined')\n+        self.assertOutput(err, 'settings are not configured')\n \n     def test_builtin_with_bad_settings(self):\n         \"no settings: django-admin builtin commands fail if settings file (from argument) doesn't exist\"\n@@ -213,11 +213,11 @@ def tearDown(self):\n         self.remove_settings('settings.py')\n \n     def test_builtin_command(self):\n-        \"default: django-admin builtin commands fail with an import error when no settings provided\"\n+        \"default: django-admin builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, 'environment variable DJANGO_SETTINGS_MODULE is undefined')\n+        self.assertOutput(err, 'settings are not configured')\n \n     def test_builtin_with_settings(self):\n         \"default: django-admin builtin commands succeed if settings are provided as argument\"\n@@ -279,11 +279,11 @@ def tearDown(self):\n         self.remove_settings('settings.py')\n \n     def test_builtin_command(self):\n-        \"fulldefault: django-admin builtin commands fail with an import error when no settings provided\"\n+        \"fulldefault: django-admin builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, 'environment variable DJANGO_SETTINGS_MODULE is undefined')\n+        self.assertOutput(err, 'settings are not configured')\n \n     def test_builtin_with_settings(self):\n         \"fulldefault: django-admin builtin commands succeed if a settings file is provided\"\n@@ -345,11 +345,11 @@ def tearDown(self):\n         self.remove_settings('settings.py')\n \n     def test_builtin_command(self):\n-        \"minimal: django-admin builtin commands fail with an import error when no settings provided\"\n+        \"minimal: django-admin builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, 'environment variable DJANGO_SETTINGS_MODULE is undefined')\n+        self.assertOutput(err, 'settings are not configured')\n \n     def test_builtin_with_settings(self):\n         \"minimal: django-admin builtin commands fail if settings are provided as argument\"\n@@ -411,11 +411,11 @@ def tearDown(self):\n         self.remove_settings('alternate_settings.py')\n \n     def test_builtin_command(self):\n-        \"alternate: django-admin builtin commands fail with an import error when no settings provided\"\n+        \"alternate: django-admin builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, 'environment variable DJANGO_SETTINGS_MODULE is undefined')\n+        self.assertOutput(err, 'settings are not configured')\n \n     def test_builtin_with_settings(self):\n         \"alternate: django-admin builtin commands succeed if settings are provided as argument\"\n@@ -482,11 +482,11 @@ def tearDown(self):\n         self.remove_settings('alternate_settings.py')\n \n     def test_builtin_command(self):\n-        \"alternate: django-admin builtin commands fail with an import error when no settings provided\"\n+        \"alternate: django-admin builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, 'environment variable DJANGO_SETTINGS_MODULE is undefined')\n+        self.assertOutput(err, 'settings are not configured')\n \n     def test_builtin_with_settings(self):\n         \"alternate: django-admin builtin commands succeed if settings are provided as argument\"\n@@ -570,11 +570,11 @@ def test_setup_environ_custom_template(self):\n         self.assertTrue(os.path.exists(os.path.join(app_path, 'api.py')))\n \n     def test_builtin_command(self):\n-        \"directory: django-admin builtin commands fail with an import error when no settings provided\"\n+        \"directory: django-admin builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, 'environment variable DJANGO_SETTINGS_MODULE is undefined')\n+        self.assertOutput(err, 'settings are not configured')\n \n     def test_builtin_with_bad_settings(self):\n         \"directory: django-admin builtin commands fail if settings file (from argument) doesn't exist\"\n@@ -621,7 +621,7 @@ class ManageNoSettings(AdminScriptTestCase):\n     \"A series of tests for manage.py when there is no settings.py file.\"\n \n     def test_builtin_command(self):\n-        \"no settings: manage.py builtin commands fail with an import error when no settings provided\"\n+        \"no settings: manage.py builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n@@ -786,7 +786,7 @@ def tearDown(self):\n         self.remove_settings('settings.py')\n \n     def test_builtin_command(self):\n-        \"minimal: manage.py builtin commands fail with an import error when no settings provided\"\n+        \"minimal: manage.py builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n@@ -852,7 +852,7 @@ def tearDown(self):\n         self.remove_settings('alternate_settings.py')\n \n     def test_builtin_command(self):\n-        \"alternate: manage.py builtin commands fail with an import error when no default settings provided\"\n+        \"alternate: manage.py builtin commands fail with an error when no default settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n@@ -895,7 +895,7 @@ def test_custom_command(self):\n         args = ['noargs_command']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"Unknown command: 'noargs_command'\")\n+        self.assertOutput(err, \"Could not import settings 'regressiontests.settings'\")\n \n     def test_custom_command_with_settings(self):\n         \"alternate: manage.py can execute user commands if settings are provided as argument\"\n@@ -927,7 +927,7 @@ def tearDown(self):\n         self.remove_settings('alternate_settings.py')\n \n     def test_builtin_command(self):\n-        \"multiple: manage.py builtin commands fail with an import error when no settings provided\"\n+        \"multiple: manage.py builtin commands fail with an error when no settings provided\"\n         args = ['sqlall', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)"
        },
        {
            "sha": "a5476e9eb761723ce776238be1bc998ad130b374",
            "filename": "tests/regressiontests/admin_views/admin.py",
            "status": "modified",
            "additions": 15,
            "deletions": 3,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -27,11 +27,14 @@\n     Album, Question, Answer, ComplexSortedPerson, PrePopulatedPostLargeSlug,\n     AdminOrderedField, AdminOrderedModelMethod, AdminOrderedAdminMethod,\n     AdminOrderedCallable, Report, Color2, UnorderedObject, MainPrepopulated,\n-    RelatedPrepopulated, UndeletableObject)\n+    RelatedPrepopulated, UndeletableObject, Simple)\n \n \n def callable_year(dt_value):\n-    return dt_value.year\n+    try:\n+        return dt_value.year\n+    except AttributeError:\n+        return None\n callable_year.admin_order_field = 'date'\n \n \n@@ -127,7 +130,7 @@ def changelist_view(self, request):\n \n \n class ThingAdmin(admin.ModelAdmin):\n-    list_filter = ('color__warm', 'color__value')\n+    list_filter = ('color__warm', 'color__value', 'pub_date',)\n \n \n class InquisitionAdmin(admin.ModelAdmin):\n@@ -575,6 +578,14 @@ def change_view(self, *args, **kwargs):\n         return super(UndeletableObjectAdmin, self).change_view(*args, **kwargs)\n \n \n+def callable_on_unknown(obj):\n+    return obj.unknown\n+\n+\n+class AttributeErrorRaisingAdmin(admin.ModelAdmin):\n+    list_display = [callable_on_unknown, ]\n+\n+\n site = admin.AdminSite(name=\"admin\")\n site.register(Article, ArticleAdmin)\n site.register(CustomArticle, CustomArticleAdmin)\n@@ -648,6 +659,7 @@ def change_view(self, *args, **kwargs):\n site.register(AdminOrderedAdminMethod, AdminOrderedAdminMethodAdmin)\n site.register(AdminOrderedCallable, AdminOrderedCallableAdmin)\n site.register(Color2, CustomTemplateFilterColorAdmin)\n+site.register(Simple, AttributeErrorRaisingAdmin)\n \n # Register core models we need in our tests\n from django.contrib.auth.models import User, Group"
        },
        {
            "sha": "031fb50f0f3b8d17c55753e8c45f83c08487db3a",
            "filename": "tests/regressiontests/admin_views/customadmin.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_views%2Fcustomadmin.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_views%2Fcustomadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fcustomadmin.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -49,3 +49,4 @@ def queryset(self, request):\n site.register(models.ChapterXtra1, base_admin.ChapterXtra1Admin)\n site.register(User, UserLimitedAdmin)\n site.register(models.UndeletableObject, base_admin.UndeletableObjectAdmin)\n+site.register(models.Simple, base_admin.AttributeErrorRaisingAdmin)"
        },
        {
            "sha": "2b143004d93dc06193534d1990ec6d77a159512c",
            "filename": "tests/regressiontests/admin_views/models.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -128,6 +128,7 @@ class Meta:\n class Thing(models.Model):\n     title = models.CharField(max_length=20)\n     color = models.ForeignKey(Color, limit_choices_to={'warm': True})\n+    pub_date = models.DateField(blank=True, null=True)\n     def __str__(self):\n         return self.title\n \n@@ -649,3 +650,9 @@ class UndeletableObject(models.Model):\n     Refs #10057.\n     \"\"\"\n     name = models.CharField(max_length=255)\n+\n+\n+class Simple(models.Model):\n+    \"\"\"\n+    Simple model with nothing on it for use in testing\n+    \"\"\""
        },
        {
            "sha": "36fea59f2ec6f48a0833be3ec126b51675c7712d",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 19,
            "deletions": 1,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -46,7 +46,7 @@\n     OtherStory, ComplexSortedPerson, Parent, Child, AdminOrderedField,\n     AdminOrderedModelMethod, AdminOrderedAdminMethod, AdminOrderedCallable,\n     Report, MainPrepopulated, RelatedPrepopulated, UnorderedObject,\n-    UndeletableObject)\n+    Simple, UndeletableObject)\n \n \n ERROR_MESSAGE = \"Please enter the correct username and password \\\n@@ -436,6 +436,10 @@ def testIncorrectLookupParameters(self):\n         response = self.client.get('/test_admin/%s/admin_views/thing/' % self.urlbit, {'color__id__exact': 'StringNotInteger!'})\n         self.assertRedirects(response, '/test_admin/%s/admin_views/thing/?e=1' % self.urlbit)\n \n+        # Regression test for #18530\n+        response = self.client.get('/test_admin/%s/admin_views/thing/' % self.urlbit, {'pub_date__gte': 'foo'})\n+        self.assertRedirects(response, '/test_admin/%s/admin_views/thing/?e=1' % self.urlbit)\n+\n     def testIsNullLookups(self):\n         \"\"\"Ensure is_null is handled correctly.\"\"\"\n         Article.objects.create(title=\"I Could Go Anywhere\", content=\"Versatile\", date=datetime.datetime.now())\n@@ -578,6 +582,20 @@ def test_change_view_with_show_delete_extra_context(self):\n                                    (self.urlbit, instance.pk))\n         self.assertNotContains(response, 'deletelink')\n \n+    def test_allows_attributeerror_to_bubble_up(self):\n+        \"\"\"\n+        Ensure that AttributeErrors are allowed to bubble when raised inside\n+        a change list view.\n+\n+        Requires a model to be created so there's something to be displayed\n+\n+        Refs: #16655, #18593, and #18747\n+        \"\"\"\n+        Simple.objects.create()\n+        with self.assertRaises(AttributeError):\n+            self.client.get('/test_admin/%s/admin_views/simple/' % self.urlbit)\n+\n+\n @override_settings(PASSWORD_HASHERS=('django.contrib.auth.hashers.SHA1PasswordHasher',))\n class AdminViewFormUrlTest(TestCase):\n     urls = \"regressiontests.admin_views.urls\""
        },
        {
            "sha": "cfa298253c65d5f70108e2e759883cca43b1da15",
            "filename": "tests/regressiontests/backends/tests.py",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbackends%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -401,6 +401,19 @@ def test_unicode_fetches(self):\n         self.assertEqual(list(cursor.fetchmany(2)), [('Jane', 'Doe'), ('John', 'Doe')])\n         self.assertEqual(list(cursor.fetchall()), [('Mary', 'Agnelline'), ('Peter', 'Parker')])\n \n+    def test_unicode_password(self):\n+        old_password = connection.settings_dict['PASSWORD']\n+        connection.settings_dict['PASSWORD'] = \"françois\"\n+        try:\n+            cursor = connection.cursor()\n+        except backend.Database.DatabaseError:\n+            # As password is probably wrong, a database exception is expected\n+            pass\n+        except Exception as e:\n+            self.fail(\"Unexpected error raised with unicode password: %s\" % e)\n+        finally:\n+            connection.settings_dict['PASSWORD'] = old_password\n+\n     def test_database_operations_helper_class(self):\n         # Ticket #13630\n         self.assertTrue(hasattr(connection, 'ops'))"
        },
        {
            "sha": "f80b29e17b8553650ae8a6ba148968ff962c48ac",
            "filename": "tests/regressiontests/comment_tests/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2F__init__.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -17,7 +17,7 @@\n @override_settings(PASSWORD_HASHERS=('django.contrib.auth.hashers.UnsaltedMD5PasswordHasher',))\n class CommentTestCase(TestCase):\n     fixtures = [\"comment_tests\"]\n-    urls = 'django.contrib.comments.urls'\n+    urls = 'regressiontests.comment_tests.urls_default'\n \n     def createSomeComments(self):\n         # Two anonymous comments on two different objects"
        },
        {
            "sha": "e204f9ebcb6747cc00aef0b551dd9903017dbcfb",
            "filename": "tests/regressiontests/comment_tests/urls_default.py",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fcomment_tests%2Furls_default.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fcomment_tests%2Furls_default.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Furls_default.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -0,0 +1,9 @@\n+from django.conf.urls import patterns, include\n+\n+urlpatterns = patterns('',\n+    (r'^', include('django.contrib.comments.urls')),\n+\n+    # Provide the auth system login and logout views\n+    (r'^accounts/login/$', 'django.contrib.auth.views.login', {'template_name': 'login.html'}),\n+    (r'^accounts/logout/$', 'django.contrib.auth.views.logout'),\n+)"
        },
        {
            "sha": "444649ac92199a97e5abb7b29d803cfe88e4a0c0",
            "filename": "tests/regressiontests/defer_regress/models.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fdefer_regress%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fdefer_regress%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdefer_regress%2Fmodels.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -52,6 +52,9 @@ def __str__(self):\n class Feature(models.Model):\n     item = models.ForeignKey(SimpleItem)\n \n+class SpecialFeature(models.Model):\n+    feature = models.ForeignKey(Feature)\n+\n class ItemAndSimpleItem(models.Model):\n     item = models.ForeignKey(Item)\n     simple = models.ForeignKey(SimpleItem)"
        },
        {
            "sha": "c77ca32135d8663bef32707833495235d8c4681c",
            "filename": "tests/regressiontests/defer_regress/tests.py",
            "status": "modified",
            "additions": 15,
            "deletions": 1,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fdefer_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fdefer_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdefer_regress%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -9,7 +9,7 @@\n from django.test import TestCase\n \n from .models import (ResolveThis, Item, RelatedItem, Child, Leaf, Proxy,\n-    SimpleItem, Feature, ItemAndSimpleItem)\n+    SimpleItem, Feature, ItemAndSimpleItem, SpecialFeature)\n \n \n class DeferRegressionTest(TestCase):\n@@ -115,6 +115,7 @@ def test_basic(self):\n                 RelatedItem,\n                 ResolveThis,\n                 SimpleItem,\n+                SpecialFeature,\n             ]\n         )\n \n@@ -152,6 +153,7 @@ def test_basic(self):\n                 \"RelatedItem_Deferred_item_id\",\n                 \"ResolveThis\",\n                 \"SimpleItem\",\n+                \"SpecialFeature\",\n             ]\n         )\n \n@@ -197,6 +199,18 @@ def test_defer_with_select_related(self):\n         self.assertEqual(obj.item, item2)\n         self.assertEqual(obj.item_id, item2.id)\n \n+    def test_only_with_select_related(self):\n+        # Test for #17485.\n+        item = SimpleItem.objects.create(name='first', value=47)\n+        feature = Feature.objects.create(item=item)\n+        SpecialFeature.objects.create(feature=feature)\n+\n+        qs = Feature.objects.only('item__name').select_related('item')\n+        self.assertEqual(len(qs), 1)\n+\n+        qs = SpecialFeature.objects.only('feature__item__name').select_related('feature__item')\n+        self.assertEqual(len(qs), 1)\n+\n     def test_deferred_class_factory(self):\n         from django.db.models.query_utils import deferred_class_factory\n         new_class = deferred_class_factory(Item,"
        },
        {
            "sha": "104144b288101d39daa074c5e0601cbcab61e51e",
            "filename": "tests/regressiontests/forms/tests/widgets.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -31,9 +31,9 @@ def test_textinput(self):\n         self.assertHTMLEqual(w.render('email', 'ŠĐĆŽćžšđ', attrs={'class': 'fun'}), '<input type=\"text\" name=\"email\" value=\"\\u0160\\u0110\\u0106\\u017d\\u0107\\u017e\\u0161\\u0111\" class=\"fun\" />')\n \n         # You can also pass 'attrs' to the constructor:\n-        w = TextInput(attrs={'class': 'fun'})\n-        self.assertHTMLEqual(w.render('email', ''), '<input type=\"text\" class=\"fun\" name=\"email\" />')\n-        self.assertHTMLEqual(w.render('email', 'foo@example.com'), '<input type=\"text\" class=\"fun\" value=\"foo@example.com\" name=\"email\" />')\n+        w = TextInput(attrs={'class': 'fun', 'type': 'email'})\n+        self.assertHTMLEqual(w.render('email', ''), '<input type=\"email\" class=\"fun\" name=\"email\" />')\n+        self.assertHTMLEqual(w.render('email', 'foo@example.com'), '<input type=\"email\" class=\"fun\" value=\"foo@example.com\" name=\"email\" />')\n \n         # 'attrs' passed to render() get precedence over those passed to the constructor:\n         w = TextInput(attrs={'class': 'pretty'})\n@@ -915,8 +915,8 @@ def test_datetimeinput(self):\n         self.assertHTMLEqual(w.render('date', datetime.datetime(2007, 9, 17, 12, 51)), '<input type=\"text\" name=\"date\" value=\"2007-09-17 12:51:00\" />')\n \n         # Use 'format' to change the way a value is displayed.\n-        w = DateTimeInput(format='%d/%m/%Y %H:%M')\n-        self.assertHTMLEqual(w.render('date', d), '<input type=\"text\" name=\"date\" value=\"17/09/2007 12:51\" />')\n+        w = DateTimeInput(format='%d/%m/%Y %H:%M', attrs={'type': 'datetime'})\n+        self.assertHTMLEqual(w.render('date', d), '<input type=\"datetime\" name=\"date\" value=\"17/09/2007 12:51\" />')\n         self.assertFalse(w._has_changed(d, '17/09/2007 12:51'))\n \n         # Make sure a custom format works with _has_changed. The hidden input will use\n@@ -938,8 +938,8 @@ def test_dateinput(self):\n         self.assertHTMLEqual(w.render('date', '2007-09-17'), '<input type=\"text\" name=\"date\" value=\"2007-09-17\" />')\n \n         # Use 'format' to change the way a value is displayed.\n-        w = DateInput(format='%d/%m/%Y')\n-        self.assertHTMLEqual(w.render('date', d), '<input type=\"text\" name=\"date\" value=\"17/09/2007\" />')\n+        w = DateInput(format='%d/%m/%Y', attrs={'type': 'date'})\n+        self.assertHTMLEqual(w.render('date', d), '<input type=\"date\" name=\"date\" value=\"17/09/2007\" />')\n         self.assertFalse(w._has_changed(d, '17/09/2007'))\n \n         # Make sure a custom format works with _has_changed. The hidden input will use\n@@ -963,8 +963,8 @@ def test_timeinput(self):\n         self.assertHTMLEqual(w.render('time', '13:12:11'), '<input type=\"text\" name=\"time\" value=\"13:12:11\" />')\n \n         # Use 'format' to change the way a value is displayed.\n-        w = TimeInput(format='%H:%M')\n-        self.assertHTMLEqual(w.render('time', t), '<input type=\"text\" name=\"time\" value=\"12:51\" />')\n+        w = TimeInput(format='%H:%M', attrs={'type': 'time'})\n+        self.assertHTMLEqual(w.render('time', t), '<input type=\"time\" name=\"time\" value=\"12:51\" />')\n         self.assertFalse(w._has_changed(t, '12:51'))\n \n         # Make sure a custom format works with _has_changed. The hidden input will use"
        },
        {
            "sha": "4c6aed1b97a41b8556176721318f3e9585a09470",
            "filename": "tests/regressiontests/httpwrappers/tests.py",
            "status": "modified",
            "additions": 42,
            "deletions": 22,
            "changes": 64,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -11,6 +11,7 @@\n                          SimpleCookie, BadHeaderError,\n                          parse_cookie)\n from django.test import TestCase\n+from django.utils.encoding import smart_str\n from django.utils import six\n from django.utils import unittest\n \n@@ -228,33 +229,52 @@ def test_non_default_encoding(self):\n         self.assertEqual(copy.deepcopy(q).encoding, 'iso-8859-15')\n \n class HttpResponseTests(unittest.TestCase):\n-    def test_unicode_headers(self):\n-        r = HttpResponse()\n-\n-        # If we insert a unicode value it will be converted to an ascii\n-        r['value'] = 'test value'\n-        self.assertTrue(isinstance(r['value'], str))\n-\n-        # An error is raised when a unicode object with non-ascii is assigned.\n-        self.assertRaises(UnicodeEncodeError, r.__setitem__, 'value', 't\\xebst value')\n \n-        # An error is raised when  a unicode object with non-ASCII format is\n-        # passed as initial mimetype or content_type.\n-        self.assertRaises(UnicodeEncodeError, HttpResponse,\n-                content_type='t\\xebst value')\n+    def test_headers_type(self):\n+        r = HttpResponse()\n \n-        # HttpResponse headers must be convertible to ASCII.\n-        self.assertRaises(UnicodeEncodeError, HttpResponse,\n-                content_type='t\\xebst value')\n+        # The following tests explicitly test types in addition to values\n+        # because in Python 2 u'foo' == b'foo'.\n+\n+        # ASCII unicode or bytes values are converted to native strings.\n+        r['key'] = 'test'\n+        self.assertEqual(r['key'], str('test'))\n+        self.assertIsInstance(r['key'], str)\n+        r['key'] = 'test'.encode('ascii')\n+        self.assertEqual(r['key'], str('test'))\n+        self.assertIsInstance(r['key'], str)\n+\n+        # Latin-1 unicode or bytes values are also converted to native strings.\n+        r['key'] = 'café'\n+        self.assertEqual(r['key'], smart_str('café', 'latin-1'))\n+        self.assertIsInstance(r['key'], str)\n+        r['key'] = 'café'.encode('latin-1')\n+        self.assertEqual(r['key'], smart_str('café', 'latin-1'))\n+        self.assertIsInstance(r['key'], str)\n+\n+        # Other unicode values are MIME-encoded (there's no way to pass them as bytes).\n+        r['key'] = '†'\n+        self.assertEqual(r['key'], str('=?utf-8?b?4oCg?='))\n+        self.assertIsInstance(r['key'], str)\n+\n+        # The response also converts unicode or bytes keys to strings, but requires\n+        # them to contain ASCII\n+        r = HttpResponse()\n+        r['foo'] = 'bar'\n+        l = list(r.items())\n+        self.assertEqual(l[0], ('foo', 'bar'))\n+        self.assertIsInstance(l[0][0], str)\n \n-        # The response also converts unicode keys to strings.)\n-        r['test'] = 'testing key'\n+        r = HttpResponse()\n+        r[b'foo'] = 'bar'\n         l = list(r.items())\n-        l.sort()\n-        self.assertEqual(l[1], ('test', 'testing key'))\n+        self.assertEqual(l[0], ('foo', 'bar'))\n+        self.assertIsInstance(l[0][0], str)\n+\n+        r = HttpResponse()\n+        self.assertRaises(UnicodeError, r.__setitem__, 'føø', 'bar')\n+        self.assertRaises(UnicodeError, r.__setitem__, 'føø'.encode('utf-8'), 'bar')\n \n-        # It will also raise errors for keys with non-ascii data.\n-        self.assertRaises(UnicodeEncodeError, r.__setitem__, 't\\xebst key', 'value')\n \n     def test_newlines_in_headers(self):\n         # Bug #10188: Do not allow newlines in headers (CR or LF)"
        },
        {
            "sha": "dacf2a3fb3c2ac93c911b2aa94ce401b72634af3",
            "filename": "tests/regressiontests/model_permalink/models.py",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fmodel_permalink%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fmodel_permalink%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_permalink%2Fmodels.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,6 +1,13 @@\n from django.db import models\n \n \n+def set_attr(name, value):\n+    def wrapper(function):\n+        setattr(function, name, value)\n+        return function\n+    return wrapper\n+\n+\n class Guitarist(models.Model):\n     name = models.CharField(max_length=50)\n     slug = models.CharField(max_length=50)\n@@ -9,3 +16,9 @@ class Guitarist(models.Model):\n     def url(self):\n         \"Returns the URL for this guitarist.\"\n         return ('guitarist_detail', [self.slug])\n+\n+    @models.permalink\n+    @set_attr('attribute', 'value')\n+    def url_with_attribute(self):\n+        \"Returns the URL for this guitarist and holds an attribute\"\n+        return ('guitarist_detail', [self.slug])"
        },
        {
            "sha": "049f338c2ed98604027a695c9fdaaeb3ab761842",
            "filename": "tests/regressiontests/model_permalink/tests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fmodel_permalink%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fmodel_permalink%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_permalink%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -16,3 +16,12 @@ def test_wrapped_docstring(self):\n         \"Methods using the @permalink decorator retain their docstring.\"\n         g = Guitarist(name='Adrien Moignard', slug='adrienmoignard')\n         self.assertEqual(g.url.__doc__, \"Returns the URL for this guitarist.\")\n+\n+    def test_wrapped_attribute(self):\n+        \"\"\"\n+        Methods using the @permalink decorator can have attached attributes\n+        from other decorators\n+        \"\"\"\n+        g = Guitarist(name='Adrien Moignard', slug='adrienmoignard')\n+        self.assertTrue(hasattr(g.url_with_attribute, 'attribute'))\n+        self.assertEqual(g.url_with_attribute.attribute, 'value')"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/regressiontests/resolve_url/__init__.py",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fresolve_url%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fresolve_url%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fresolve_url%2F__init__.py?ref=9313dea7006ab77d54735fdd5825a812684e7144"
        },
        {
            "sha": "238902edd271cbdfcb74ef29950b20a0e32c4275",
            "filename": "tests/regressiontests/resolve_url/models.py",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fresolve_url%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fresolve_url%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fresolve_url%2Fmodels.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -0,0 +1,12 @@\n+\"\"\"\n+Regression tests for the resolve_url function.\n+\"\"\"\n+\n+from django.db import models\n+\n+\n+class UnimportantThing(models.Model):\n+    importance = models.IntegerField()\n+\n+    def get_absolute_url(self):\n+        return '/importance/%d/' % (self.importance,)"
        },
        {
            "sha": "d0bf44abde5434da4c1c1a0d95173525a9a0b7dd",
            "filename": "tests/regressiontests/resolve_url/tests.py",
            "status": "added",
            "additions": 68,
            "deletions": 0,
            "changes": 68,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fresolve_url%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fresolve_url%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fresolve_url%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -0,0 +1,68 @@\n+from __future__ import unicode_literals\n+\n+from django.core.urlresolvers import NoReverseMatch\n+from django.contrib.auth.views import logout\n+from django.utils.unittest import TestCase\n+from django.shortcuts import resolve_url\n+\n+from .models import UnimportantThing\n+\n+\n+class ResolveUrlTests(TestCase):\n+    \"\"\"\n+    Tests for the ``resolve_url`` function.\n+    \"\"\"\n+\n+    def test_url_path(self):\n+        \"\"\"\n+        Tests that passing a URL path to ``resolve_url`` will result in the\n+        same url.\n+        \"\"\"\n+        self.assertEqual('/something/', resolve_url('/something/'))\n+\n+    def test_full_url(self):\n+        \"\"\"\n+        Tests that passing a full URL to ``resolve_url`` will result in the\n+        same url.\n+        \"\"\"\n+        url = 'http://example.com/'\n+        self.assertEqual(url, resolve_url(url))\n+\n+    def test_model(self):\n+        \"\"\"\n+        Tests that passing a model to ``resolve_url`` will result in\n+        ``get_absolute_url`` being called on that model instance.\n+        \"\"\"\n+        m = UnimportantThing(importance=1)\n+        self.assertEqual(m.get_absolute_url(), resolve_url(m))\n+\n+    def test_view_function(self):\n+        \"\"\"\n+        Tests that passing a view name to ``resolve_url`` will result in the\n+        URL path mapping to that view name.\n+        \"\"\"\n+        resolved_url = resolve_url(logout)\n+        self.assertEqual('/accounts/logout/', resolved_url)\n+\n+    def test_valid_view_name(self):\n+        \"\"\"\n+        Tests that passing a view function to ``resolve_url`` will result in\n+        the URL path mapping to that view.\n+        \"\"\"\n+        resolved_url = resolve_url('django.contrib.auth.views.logout')\n+        self.assertEqual('/accounts/logout/', resolved_url)\n+\n+    def test_domain(self):\n+        \"\"\"\n+        Tests that passing a domain to ``resolve_url`` returns the same domain.\n+        \"\"\"\n+        self.assertEqual(resolve_url('example.com'), 'example.com')\n+\n+    def test_non_view_callable_raises_no_reverse_match(self):\n+        \"\"\"\n+        Tests that passing a non-view callable into ``resolve_url`` raises a\n+        ``NoReverseMatch`` exception.\n+        \"\"\"\n+        with self.assertRaises(NoReverseMatch):\n+            resolve_url(lambda: 'asdf')\n+"
        },
        {
            "sha": "a205d67431b63f7ca8b8b0825d07ef5652314da6",
            "filename": "tests/regressiontests/utils/os_utils.py",
            "status": "added",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Futils%2Fos_utils.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Futils%2Fos_utils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fos_utils.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -0,0 +1,26 @@\n+import os\n+\n+from django.utils import unittest\n+from django.utils._os import safe_join\n+\n+\n+class SafeJoinTests(unittest.TestCase):\n+    def test_base_path_ends_with_sep(self):\n+        drive, path = os.path.splitdrive(safe_join(\"/abc/\", \"abc\"))\n+        self.assertEqual(\n+            path,\n+            \"{0}abc{0}abc\".format(os.path.sep)\n+        )\n+\n+    def test_root_path(self):\n+        drive, path = os.path.splitdrive(safe_join(\"/\", \"path\"))\n+        self.assertEqual(\n+            path,\n+            \"{0}path\".format(os.path.sep),\n+        )\n+\n+        drive, path = os.path.splitdrive(safe_join(\"/\", \"\"))\n+        self.assertEqual(\n+            path,\n+            os.path.sep,\n+        )"
        },
        {
            "sha": "061c669eb7a3c475679b624b2ae496533ba437f8",
            "filename": "tests/regressiontests/utils/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Futils%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Futils%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Ftests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -21,6 +21,7 @@\n from .ipv6 import TestUtilsIPv6\n from .jslex import JsToCForGettextTest, JsTokensTest\n from .module_loading import CustomLoader, DefaultLoader, EggLoader\n+from .os_utils import SafeJoinTests\n from .regex_helper import NormalizeTests\n from .simplelazyobject import TestUtilsSimpleLazyObject\n from .termcolors import TermColorTests"
        },
        {
            "sha": "8592b07efe9c9c38e013d1a0cac945610679d472",
            "filename": "tests/regressiontests/views/tests/debug.py",
            "status": "modified",
            "additions": 6,
            "deletions": 15,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -1,36 +1,27 @@\n-from __future__ import absolute_import\n+from __future__ import absolute_import, unicode_literals\n \n import inspect\n import os\n import sys\n \n from django.conf import settings\n+from django.core import mail\n from django.core.files.uploadedfile import SimpleUploadedFile\n-from django.test import TestCase, RequestFactory\n-from django.test.utils import (setup_test_template_loader,\n-                               restore_template_loaders)\n from django.core.urlresolvers import reverse\n+from django.test import TestCase, RequestFactory\n+from django.test.utils import (override_settings, setup_test_template_loader,\n+    restore_template_loaders)\n from django.views.debug import ExceptionReporter\n-from django.core import mail\n \n from .. import BrokenException, except_args\n from ..views import (sensitive_view, non_sensitive_view, paranoid_view,\n     custom_exception_reporter_filter_view, sensitive_method_view)\n \n \n+@override_settings(DEBUG=True, TEMPLATE_DEBUG=True)\n class DebugViewTests(TestCase):\n     urls = \"regressiontests.views.urls\"\n \n-    def setUp(self):\n-        self.old_debug = settings.DEBUG\n-        settings.DEBUG = True\n-        self.old_template_debug = settings.TEMPLATE_DEBUG\n-        settings.TEMPLATE_DEBUG = True\n-\n-    def tearDown(self):\n-        settings.DEBUG = self.old_debug\n-        settings.TEMPLATE_DEBUG = self.old_template_debug\n-\n     def test_files(self):\n         response = self.client.get('/raises/')\n         self.assertEqual(response.status_code, 500)"
        },
        {
            "sha": "a81fee68582b11a393221a0fc55d86cb6028ee4c",
            "filename": "tests/runtests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fruntests.py",
            "raw_url": "https://github.com/django/django/raw/9313dea7006ab77d54735fdd5825a812684e7144/tests%2Fruntests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fruntests.py?ref=9313dea7006ab77d54735fdd5825a812684e7144",
            "patch": "@@ -92,7 +92,7 @@ def setup(verbosity, test_labels):\n     settings.TEMPLATE_DIRS = (os.path.join(RUNTESTS_DIR, TEST_TEMPLATE_DIR),)\n     settings.USE_I18N = True\n     settings.LANGUAGE_CODE = 'en'\n-    settings.LOGIN_URL = '/accounts/login/'\n+    settings.LOGIN_URL = 'django.contrib.auth.views.login'\n     settings.MIDDLEWARE_CLASSES = (\n         'django.contrib.sessions.middleware.SessionMiddleware',\n         'django.contrib.auth.middleware.AuthenticationMiddleware',"
        }
    ],
    "stats": {
        "total": 3301,
        "additions": 2045,
        "deletions": 1256
    }
}