{
    "author": "ramiro",
    "message": "Reverted r16386 because it replaced a brittle method with another not less\narbitrary method when the test client checks for the presence of the bundled\nsession backends+session middleware combination.\n\nWe will revisit the issue soon, probably to make these checks even less strict.\n\nRefs #7836, #16605\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17739 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "a935e834433cfc691882c2bbf1249a39abecd35b",
    "files": [
        {
            "sha": "6f3b73dde3375734ca743641cb0d395a1fe2a1b2",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/a935e834433cfc691882c2bbf1249a39abecd35b/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/a935e834433cfc691882c2bbf1249a39abecd35b/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=a935e834433cfc691882c2bbf1249a39abecd35b",
            "patch": "@@ -350,7 +350,7 @@ def _session(self):\n         \"\"\"\n         Obtains the current session variables.\n         \"\"\"\n-        if 'django.contrib.sessions.middleware.SessionMiddleware' in settings.MIDDLEWARE_CLASSES:\n+        if 'django.contrib.sessions' in settings.INSTALLED_APPS:\n             engine = import_module(settings.SESSION_ENGINE)\n             cookie = self.cookies.get(settings.SESSION_COOKIE_NAME, None)\n             if cookie:\n@@ -498,7 +498,7 @@ def login(self, **credentials):\n         \"\"\"\n         user = authenticate(**credentials)\n         if user and user.is_active \\\n-                and 'django.contrib.sessions.middleware.SessionMiddleware' in settings.MIDDLEWARE_CLASSES:\n+                and 'django.contrib.sessions' in settings.INSTALLED_APPS:\n             engine = import_module(settings.SESSION_ENGINE)\n \n             # Create a fake request to store login details."
        },
        {
            "sha": "0f98b2c53fc114c3c3f3601e56f352f92d9ac33c",
            "filename": "tests/regressiontests/test_client_regress/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 13,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/a935e834433cfc691882c2bbf1249a39abecd35b/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/a935e834433cfc691882c2bbf1249a39abecd35b/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py?ref=a935e834433cfc691882c2bbf1249a39abecd35b",
            "patch": "@@ -13,7 +13,7 @@\n import django.template.context\n from django.test import Client, TestCase\n from django.test.client import encode_file, RequestFactory\n-from django.test.utils import ContextList, override_settings\n+from django.test.utils import ContextList\n from django.template.response import SimpleTemplateResponse\n from django.http import HttpResponse\n \n@@ -564,18 +564,6 @@ def test_login(self):\n         self.assertEqual(response.context['user'].username, 'testclient')\n \n \n-class NoSessionsAppInstalled(SessionEngineTests):\n-    \"\"\"#7836 - Test client can exercise sessions even when 'django.contrib.sessions' isn't installed.\"\"\"\n-\n-    # Remove the 'session' contrib app from INSTALLED_APPS\n-    @override_settings(INSTALLED_APPS=tuple(filter(lambda a: a!='django.contrib.sessions', settings.INSTALLED_APPS)))\n-    def test_session(self):\n-        # This request sets a session variable.\n-        response = self.client.get('/test_client_regress/set_session/')\n-        self.assertEqual(response.status_code, 200)\n-        self.assertEqual(self.client.session['session_var'], 'YES')\n-\n-\n class URLEscapingTests(TestCase):\n     def test_simple_argument_get(self):\n         \"Get a view that has a simple string argument\""
        }
    ],
    "stats": {
        "total": 18,
        "additions": 3,
        "deletions": 15
    }
}