{
    "author": "freakboy3742",
    "message": "Fixed #15359 -- Ensure that the -h option is always honored by django-admin.py. Thanks to teubank for the report.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15605 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "b151bccdcc654856b849ab19b6deb68c22794e23",
    "files": [
        {
            "sha": "bafab17112ad78ced85e340503b7b1f8dd057e29",
            "filename": "django/core/management/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/b151bccdcc654856b849ab19b6deb68c22794e23/django%2Fcore%2Fmanagement%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/b151bccdcc654856b849ab19b6deb68c22794e23/django%2Fcore%2Fmanagement%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2F__init__.py?ref=b151bccdcc654856b849ab19b6deb68c22794e23",
            "patch": "@@ -372,7 +372,7 @@ def execute(self):\n         elif self.argv[1:] == ['--version']:\n             # LaxOptionParser already takes care of printing the version.\n             pass\n-        elif self.argv[1:] == ['--help']:\n+        elif self.argv[1:] in (['--help'], ['-h']):\n             parser.print_lax_help()\n             sys.stderr.write(self.main_help_text() + '\\n')\n         else:"
        },
        {
            "sha": "76cecc0842876c9da63b78dae2951df63dcd6a26",
            "filename": "tests/regressiontests/admin_scripts/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/b151bccdcc654856b849ab19b6deb68c22794e23/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/b151bccdcc654856b849ab19b6deb68c22794e23/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py?ref=b151bccdcc654856b849ab19b6deb68c22794e23",
            "patch": "@@ -1115,6 +1115,16 @@ def test_help(self):\n             self.assertOutput(out, \"Usage: manage.py subcommand [options] [args]\")\n         self.assertOutput(err, \"Type 'manage.py help <subcommand>' for help on a specific subcommand.\")\n \n+    def test_short_help(self):\n+        \"-h is handled as a short form of --help\"\n+        args = ['-h']\n+        out, err = self.run_manage(args)\n+        if sys.version_info < (2, 5):\n+            self.assertOutput(out, \"usage: manage.py subcommand [options] [args]\")\n+        else:\n+            self.assertOutput(out, \"Usage: manage.py subcommand [options] [args]\")\n+        self.assertOutput(err, \"Type 'manage.py help <subcommand>' for help on a specific subcommand.\")\n+\n     def test_specific_help(self):\n         \"--help can be used on a specific command\"\n         args = ['sqlall','--help']"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 11,
        "deletions": 1
    }
}