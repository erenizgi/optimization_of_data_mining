{
    "author": "jezdez",
    "message": "Replaced old-style with new-style decorator syntax.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16138 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "0b1a061881ff49b0d56c48e026da421a68318a89",
    "files": [
        {
            "sha": "5e199cec1d5a15f52b5320e0843f68fd0905b65e",
            "filename": "django/contrib/admin/templatetags/admin_list.py",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_list.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -19,6 +19,7 @@\n \n DOT = '.'\n \n+@register.simple_tag\n def paginator_number(cl,i):\n     \"\"\"\n     Generates an individual page index link in a paginated list.\n@@ -29,8 +30,8 @@ def paginator_number(cl,i):\n         return mark_safe(u'<span class=\"this-page\">%d</span> ' % (i+1))\n     else:\n         return mark_safe(u'<a href=\"%s\"%s>%d</a> ' % (escape(cl.get_query_string({PAGE_VAR: i})), (i == cl.paginator.num_pages-1 and ' class=\"end\"' or ''), i+1))\n-paginator_number = register.simple_tag(paginator_number)\n \n+@register.inclusion_tag('admin/pagination.html')\n def pagination(cl):\n     \"\"\"\n     Generates the series of links to the pages in a paginated list.\n@@ -75,7 +76,6 @@ def pagination(cl):\n         'ALL_VAR': ALL_VAR,\n         '1': 1,\n     }\n-pagination = register.inclusion_tag('admin/pagination.html')(pagination)\n \n def result_headers(cl):\n     \"\"\"\n@@ -123,7 +123,8 @@ def result_headers(cl):\n \n def _boolean_icon(field_val):\n     BOOLEAN_MAPPING = {True: 'yes', False: 'no', None: 'unknown'}\n-    return mark_safe(u'<img src=\"%simg/admin/icon-%s.gif\" alt=\"%s\" />' % (settings.ADMIN_MEDIA_PREFIX, BOOLEAN_MAPPING[field_val], field_val))\n+    return mark_safe(u'<img src=\"%simg/admin/icon-%s.gif\" alt=\"%s\" />' %\n+        (settings.ADMIN_MEDIA_PREFIX, BOOLEAN_MAPPING[field_val], field_val))\n \n def items_for_result(cl, result, form):\n     \"\"\"\n@@ -222,6 +223,7 @@ def result_hidden_fields(cl):\n             if form[cl.model._meta.pk.name].is_hidden:\n                 yield mark_safe(force_unicode(form[cl.model._meta.pk.name]))\n \n+@register.inclusion_tag(\"admin/change_list_results.html\")\n def result_list(cl):\n     \"\"\"\n     Displays the headers and data list together\n@@ -230,8 +232,8 @@ def result_list(cl):\n             'result_hidden_fields': list(result_hidden_fields(cl)),\n             'result_headers': list(result_headers(cl)),\n             'results': list(results(cl))}\n-result_list = register.inclusion_tag(\"admin/change_list_results.html\")(result_list)\n \n+@register.inclusion_tag('admin/date_hierarchy.html')\n def date_hierarchy(cl):\n     \"\"\"\n     Displays the date hierarchy for date drill-down functionality.\n@@ -303,8 +305,8 @@ def date_hierarchy(cl):\n                     'title': str(year.year),\n                 } for year in years]\n             }\n-date_hierarchy = register.inclusion_tag('admin/date_hierarchy.html')(date_hierarchy)\n \n+@register.inclusion_tag('admin/search_form.html')\n def search_form(cl):\n     \"\"\"\n     Displays a search form for searching the list.\n@@ -314,17 +316,16 @@ def search_form(cl):\n         'show_result_count': cl.result_count != cl.full_result_count,\n         'search_var': SEARCH_VAR\n     }\n-search_form = register.inclusion_tag('admin/search_form.html')(search_form)\n \n+@register.inclusion_tag('admin/filter.html')\n def admin_list_filter(cl, spec):\n     return {'title': spec.title(), 'choices' : list(spec.choices(cl))}\n-admin_list_filter = register.inclusion_tag('admin/filter.html')(admin_list_filter)\n \n+@register.inclusion_tag('admin/actions.html', takes_context=True)\n def admin_actions(context):\n     \"\"\"\n     Track the number of times the action field has been rendered on the page,\n     so we know which value to use.\n     \"\"\"\n     context['action_index'] = context.get('action_index', -1) + 1\n     return context\n-admin_actions = register.inclusion_tag(\"admin/actions.html\", takes_context=True)(admin_actions)"
        },
        {
            "sha": "e55b3bf2bd3c1bb3470fe6d7bdac45ebd5bd555e",
            "filename": "django/contrib/admin/templatetags/admin_modify.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_modify.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_modify.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_modify.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -2,6 +2,7 @@\n \n register = template.Library()\n \n+@register.inclusion_tag('admin/prepopulated_fields_js.html', takes_context=True)\n def prepopulated_fields_js(context):\n     \"\"\"\n     Creates a list of prepopulated_fields that should render Javascript for\n@@ -17,8 +18,8 @@ def prepopulated_fields_js(context):\n                     prepopulated_fields.extend(inline_admin_form.prepopulated_fields)\n     context.update({'prepopulated_fields': prepopulated_fields})\n     return context\n-prepopulated_fields_js = register.inclusion_tag('admin/prepopulated_fields_js.html', takes_context=True)(prepopulated_fields_js)\n \n+@register.inclusion_tag('admin/submit_line.html', takes_context=True)\n def submit_row(context):\n     \"\"\"\n     Displays the row of buttons for delete and save.\n@@ -39,8 +40,8 @@ def submit_row(context):\n         'is_popup': is_popup,\n         'show_save': True\n     }\n-submit_row = register.inclusion_tag('admin/submit_line.html', takes_context=True)(submit_row)\n \n+@register.filter\n def cell_count(inline_admin_form):\n     \"\"\"Returns the number of cells used in a tabular inline\"\"\"\n     count = 1 # Hidden cell with hidden 'id' field\n@@ -53,4 +54,3 @@ def cell_count(inline_admin_form):\n         # Delete checkbox\n         count += 1\n     return count\n-cell_count = register.filter(cell_count)"
        },
        {
            "sha": "888b5ed9c334cb5c64b3da9d833ef784f4bbac80",
            "filename": "django/contrib/admin/templatetags/log.py",
            "status": "modified",
            "additions": 17,
            "deletions": 18,
            "changes": 35,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Flog.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Flog.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Flog.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -20,7 +20,8 @@ def render(self, context):\n             context[self.varname] = LogEntry.objects.filter(user__id__exact=user_id).select_related('content_type', 'user')[:self.limit]\n         return ''\n \n-class DoGetAdminLog:\n+@register.tag\n+def get_admin_log(parser, token):\n     \"\"\"\n     Populates a template variable with the admin log for the given criteria.\n \n@@ -38,20 +39,18 @@ class DoGetAdminLog:\n     (user ID) or the name of a template context variable containing the user\n     object whose ID you want.\n     \"\"\"\n-    def __init__(self, tag_name):\n-        self.tag_name = tag_name\n-\n-    def __call__(self, parser, token):\n-        tokens = token.contents.split()\n-        if len(tokens) < 4:\n-            raise template.TemplateSyntaxError(\"'%s' statements require two arguments\" % self.tag_name)\n-        if not tokens[1].isdigit():\n-            raise template.TemplateSyntaxError(\"First argument in '%s' must be an integer\" % self.tag_name)\n-        if tokens[2] != 'as':\n-            raise template.TemplateSyntaxError(\"Second argument in '%s' must be 'as'\" % self.tag_name)\n-        if len(tokens) > 4:\n-            if tokens[4] != 'for_user':\n-                raise template.TemplateSyntaxError(\"Fourth argument in '%s' must be 'for_user'\" % self.tag_name)\n-        return AdminLogNode(limit=tokens[1], varname=tokens[3], user=(len(tokens) > 5 and tokens[5] or None))\n-\n-register.tag('get_admin_log', DoGetAdminLog('get_admin_log'))\n+    tokens = token.contents.split()\n+    if len(tokens) < 4:\n+        raise template.TemplateSyntaxError(\n+            \"'get_admin_log' statements require two arguments\")\n+    if not tokens[1].isdigit():\n+        raise template.TemplateSyntaxError(\n+            \"First argument to 'get_admin_log' must be an integer\")\n+    if tokens[2] != 'as':\n+        raise template.TemplateSyntaxError(\n+            \"Second argument to 'get_admin_log' must be 'as'\")\n+    if len(tokens) > 4:\n+        if tokens[4] != 'for_user':\n+            raise template.TemplateSyntaxError(\n+                \"Fourth argument to 'get_admin_log' must be 'for_user'\")\n+    return AdminLogNode(limit=tokens[1], varname=tokens[3], user=(len(tokens) > 5 and tokens[5] or None))"
        },
        {
            "sha": "b5313a162ea0806da0a1cbbb51fd52ebd0c8039d",
            "filename": "django/contrib/admin/views/decorators.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmin%2Fviews%2Fdecorators.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmin%2Fviews%2Fdecorators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fviews%2Fdecorators.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -9,6 +9,7 @@ def staff_member_required(view_func):\n     Decorator for views that checks that the user is logged in and is a staff\n     member, displaying the login page if necessary.\n     \"\"\"\n+    @wraps(view_func)\n     def _checklogin(request, *args, **kwargs):\n         if request.user.is_active and request.user.is_staff:\n             # The user is valid. Continue to the admin page.\n@@ -25,4 +26,4 @@ def _checklogin(request, *args, **kwargs):\n             },\n         }\n         return login(request, **defaults)\n-    return wraps(view_func)(_checklogin)\n+    return _checklogin"
        },
        {
            "sha": "319b489e46f83eee54b71d836cd23be90f6f9ee0",
            "filename": "django/contrib/admindocs/views.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmindocs%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fadmindocs%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Fviews.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -27,22 +27,23 @@ def get_root_path():\n     except urlresolvers.NoReverseMatch:\n         return getattr(settings, \"ADMIN_SITE_ROOT_URL\", \"/admin/\")\n \n+@staff_member_required\n def doc_index(request):\n     if not utils.docutils_is_available:\n         return missing_docutils_page(request)\n     return render_to_response('admin_doc/index.html', {\n         'root_path': get_root_path(),\n     }, context_instance=RequestContext(request))\n-doc_index = staff_member_required(doc_index)\n \n+@staff_member_required\n def bookmarklets(request):\n     admin_root = get_root_path()\n     return render_to_response('admin_doc/bookmarklets.html', {\n         'root_path': admin_root,\n         'admin_url': mark_safe(\"%s://%s%s\" % (request.is_secure() and 'https' or 'http', request.get_host(), admin_root)),\n     }, context_instance=RequestContext(request))\n-bookmarklets = staff_member_required(bookmarklets)\n \n+@staff_member_required\n def template_tag_index(request):\n     if not utils.docutils_is_available:\n         return missing_docutils_page(request)\n@@ -76,8 +77,8 @@ def template_tag_index(request):\n         'root_path': get_root_path(),\n         'tags': tags\n     }, context_instance=RequestContext(request))\n-template_tag_index = staff_member_required(template_tag_index)\n \n+@staff_member_required\n def template_filter_index(request):\n     if not utils.docutils_is_available:\n         return missing_docutils_page(request)\n@@ -111,8 +112,8 @@ def template_filter_index(request):\n         'root_path': get_root_path(),\n         'filters': filters\n     }, context_instance=RequestContext(request))\n-template_filter_index = staff_member_required(template_filter_index)\n \n+@staff_member_required\n def view_index(request):\n     if not utils.docutils_is_available:\n         return missing_docutils_page(request)\n@@ -142,8 +143,8 @@ def view_index(request):\n         'root_path': get_root_path(),\n         'views': views\n     }, context_instance=RequestContext(request))\n-view_index = staff_member_required(view_index)\n \n+@staff_member_required\n def view_detail(request, view):\n     if not utils.docutils_is_available:\n         return missing_docutils_page(request)\n@@ -167,8 +168,8 @@ def view_detail(request, view):\n         'body': body,\n         'meta': metadata,\n     }, context_instance=RequestContext(request))\n-view_detail = staff_member_required(view_detail)\n \n+@staff_member_required\n def model_index(request):\n     if not utils.docutils_is_available:\n         return missing_docutils_page(request)\n@@ -177,8 +178,8 @@ def model_index(request):\n         'root_path': get_root_path(),\n         'models': m_list\n     }, context_instance=RequestContext(request))\n-model_index = staff_member_required(model_index)\n \n+@staff_member_required\n def model_detail(request, app_label, model_name):\n     if not utils.docutils_is_available:\n         return missing_docutils_page(request)\n@@ -272,8 +273,8 @@ def model_detail(request, app_label, model_name):\n         'description': model.__doc__,\n         'fields': fields,\n     }, context_instance=RequestContext(request))\n-model_detail = staff_member_required(model_detail)\n \n+@staff_member_required\n def template_detail(request, template):\n     templates = []\n     for site_settings_module in settings.ADMIN_FOR:\n@@ -297,7 +298,6 @@ def template_detail(request, template):\n         'name': template,\n         'templates': templates,\n     }, context_instance=RequestContext(request))\n-template_detail = staff_member_required(template_detail)\n \n ####################\n # Helper functions #"
        },
        {
            "sha": "7962a40d97ff970518c7c365e75432f08f542042",
            "filename": "django/contrib/comments/templatetags/comments.py",
            "status": "modified",
            "additions": 11,
            "deletions": 23,
            "changes": 34,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fcomments%2Ftemplatetags%2Fcomments.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fcomments%2Ftemplatetags%2Fcomments.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcomments%2Ftemplatetags%2Fcomments.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -14,7 +14,7 @@ class BaseCommentNode(template.Node):\n     obvious.\n     \"\"\"\n \n-    #@classmethod\n+    @classmethod\n     def handle_token(cls, parser, token):\n         \"\"\"Class method to parse get_comment_list/count/form and return a Node.\"\"\"\n         tokens = token.contents.split()\n@@ -43,9 +43,7 @@ def handle_token(cls, parser, token):\n         else:\n             raise template.TemplateSyntaxError(\"%r tag requires 4 or 5 arguments\" % tokens[0])\n \n-    handle_token = classmethod(handle_token)\n-\n-    #@staticmethod\n+    @staticmethod\n     def lookup_content_type(token, tagname):\n         try:\n             app, model = token.split('.')\n@@ -54,7 +52,6 @@ def lookup_content_type(token, tagname):\n             raise template.TemplateSyntaxError(\"Third argument in %r must be in the format 'app.model'\" % tagname)\n         except ContentType.DoesNotExist:\n             raise template.TemplateSyntaxError(\"%r tag has non-existant content-type: '%s.%s'\" % (tagname, app, model))\n-    lookup_content_type = staticmethod(lookup_content_type)\n \n     def __init__(self, ctype=None, object_pk_expr=None, object_expr=None, as_varname=None, comment=None):\n         if ctype is None and object_expr is None:\n@@ -146,7 +143,7 @@ def render(self, context):\n class RenderCommentFormNode(CommentFormNode):\n     \"\"\"Render the comment form directly\"\"\"\n \n-    #@classmethod\n+    @classmethod\n     def handle_token(cls, parser, token):\n         \"\"\"Class method to parse render_comment_form and return a Node.\"\"\"\n         tokens = token.contents.split()\n@@ -163,7 +160,6 @@ def handle_token(cls, parser, token):\n                 ctype = BaseCommentNode.lookup_content_type(tokens[2], tokens[0]),\n                 object_pk_expr = parser.compile_filter(tokens[3])\n             )\n-    handle_token = classmethod(handle_token)\n \n     def render(self, context):\n         ctype, object_pk = self.get_target_ctype_pk(context)\n@@ -183,7 +179,7 @@ def render(self, context):\n class RenderCommentListNode(CommentListNode):\n     \"\"\"Render the comment list directly\"\"\"\n \n-    #@classmethod\n+    @classmethod\n     def handle_token(cls, parser, token):\n         \"\"\"Class method to parse render_comment_list and return a Node.\"\"\"\n         tokens = token.contents.split()\n@@ -200,7 +196,6 @@ def handle_token(cls, parser, token):\n                 ctype = BaseCommentNode.lookup_content_type(tokens[2], tokens[0]),\n                 object_pk_expr = parser.compile_filter(tokens[3])\n             )\n-    handle_token = classmethod(handle_token)\n \n     def render(self, context):\n         ctype, object_pk = self.get_target_ctype_pk(context)\n@@ -224,7 +219,7 @@ def render(self, context):\n # the automagic docstrings-into-admin-docs tricks. So each node gets a cute\n # wrapper function that just exists to hold the docstring.\n \n-#@register.tag\n+@register.tag\n def get_comment_count(parser, token):\n     \"\"\"\n     Gets the comment count for the given params and populates the template\n@@ -245,7 +240,7 @@ def get_comment_count(parser, token):\n     \"\"\"\n     return CommentCountNode.handle_token(parser, token)\n \n-#@register.tag\n+@register.tag\n def get_comment_list(parser, token):\n     \"\"\"\n     Gets the list of comments for the given params and populates the template\n@@ -267,7 +262,7 @@ def get_comment_list(parser, token):\n     \"\"\"\n     return CommentListNode.handle_token(parser, token)\n \n-#@register.tag\n+@register.tag\n def render_comment_list(parser, token):\n     \"\"\"\n     Render the comment list (as returned by ``{% get_comment_list %}``)\n@@ -285,7 +280,7 @@ def render_comment_list(parser, token):\n     \"\"\"\n     return RenderCommentListNode.handle_token(parser, token)\n \n-#@register.tag\n+@register.tag\n def get_comment_form(parser, token):\n     \"\"\"\n     Get a (new) form object to post a new comment.\n@@ -297,7 +292,7 @@ def get_comment_form(parser, token):\n     \"\"\"\n     return CommentFormNode.handle_token(parser, token)\n \n-#@register.tag\n+@register.tag\n def render_comment_form(parser, token):\n     \"\"\"\n     Render the comment form (as returned by ``{% render_comment_form %}``) through\n@@ -310,7 +305,7 @@ def render_comment_form(parser, token):\n     \"\"\"\n     return RenderCommentFormNode.handle_token(parser, token)\n \n-#@register.simple_tag\n+@register.simple_tag\n def comment_form_target():\n     \"\"\"\n     Get the target URL for the comment form.\n@@ -321,7 +316,7 @@ def comment_form_target():\n     \"\"\"\n     return comments.get_form_target()\n \n-#@register.simple_tag\n+@register.simple_tag\n def get_comment_permalink(comment, anchor_pattern=None):\n     \"\"\"\n     Get the permalink for a comment, optionally specifying the format of the\n@@ -335,10 +330,3 @@ def get_comment_permalink(comment, anchor_pattern=None):\n         return comment.get_absolute_url(anchor_pattern)\n     return comment.get_absolute_url()\n \n-register.tag(get_comment_count)\n-register.tag(get_comment_list)\n-register.tag(get_comment_form)\n-register.tag(render_comment_form)\n-register.simple_tag(comment_form_target)\n-register.simple_tag(get_comment_permalink)\n-register.tag(render_comment_list)"
        },
        {
            "sha": "81301cfce165d97084ed862b891eb9b4ebaf9b3b",
            "filename": "django/contrib/contenttypes/generic.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -339,13 +339,12 @@ def __init__(self, data=None, files=None, instance=None, save_as_new=None,\n             prefix=prefix\n         )\n \n-    #@classmethod\n+    @classmethod\n     def get_default_prefix(cls):\n         opts = cls.model._meta\n         return '-'.join((opts.app_label, opts.object_name.lower(),\n                         cls.ct_field.name, cls.ct_fk_field.name,\n         ))\n-    get_default_prefix = classmethod(get_default_prefix)\n \n     def save_new(self, form, commit=True):\n         # Avoid a circular import."
        },
        {
            "sha": "702d968145b3ee26d23850ff3bf8d5cee8617393",
            "filename": "django/contrib/flatpages/templatetags/flatpages.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fflatpages%2Ftemplatetags%2Fflatpages.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fflatpages%2Ftemplatetags%2Fflatpages.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fflatpages%2Ftemplatetags%2Fflatpages.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -38,6 +38,7 @@ def render(self, context):\n         return ''\n \n \n+@register.tag\n def get_flatpages(parser, token):\n     \"\"\"\n     Retrieves all flatpage objects available for the current site and\n@@ -94,5 +95,3 @@ def get_flatpages(parser, token):\n         return FlatpageNode(context_name, starts_with=prefix, user=user)\n     else:\n         raise template.TemplateSyntaxError(syntax_message)\n-\n-register.tag('get_flatpages', get_flatpages)"
        },
        {
            "sha": "eee2b4d4f9db2668d46e041178eaf692a84a72d9",
            "filename": "django/contrib/humanize/templatetags/humanize.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -77,6 +77,7 @@ def apnumber(value):\n apnumber.is_safe = True\n register.filter(apnumber)\n \n+@register.filter\n def naturalday(value, arg=None):\n     \"\"\"\n     For date values that are tomorrow, today or yesterday compared to\n@@ -101,8 +102,8 @@ def naturalday(value, arg=None):\n     elif delta.days == -1:\n         return _(u'yesterday')\n     return defaultfilters.date(value, arg)\n-register.filter(naturalday)\n \n+@register.filter\n def naturaltime(value, arg=None):\n     \"\"\"\n     For date and time values shows how many seconds, minutes or hours ago compared to\n@@ -133,4 +134,3 @@ def naturaltime(value, arg=None):\n     elif delta.seconds / 60 / 60 < 24:\n         return _(u'%s hours ago' % (delta.seconds/60/60))\n     return naturalday(value, arg)\n-register.filter(naturaltime)"
        },
        {
            "sha": "05d8dc7f54f1a24782b4e76f38365b196926eaae",
            "filename": "django/contrib/webdesign/templatetags/webdesign.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fwebdesign%2Ftemplatetags%2Fwebdesign.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fcontrib%2Fwebdesign%2Ftemplatetags%2Fwebdesign.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fwebdesign%2Ftemplatetags%2Fwebdesign.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -20,7 +20,7 @@ def render(self, context):\n             paras = ['<p>%s</p>' % p for p in paras]\n         return u'\\n\\n'.join(paras)\n \n-#@register.tag\n+@register.tag\n def lorem(parser, token):\n     \"\"\"\n     Creates random Latin text useful for providing test data in templates.\n@@ -64,4 +64,3 @@ def lorem(parser, token):\n     if len(bits) != 1:\n         raise template.TemplateSyntaxError(\"Incorrect format for %r tag\" % tagname)\n     return LoremNode(count, method, common)\n-lorem = register.tag(lorem)"
        },
        {
            "sha": "3810ebf7fde1ef0aa5a8877b045efd99e7d3e6cb",
            "filename": "django/forms/formsets.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fforms%2Fformsets.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fforms%2Fformsets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fformsets.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -218,10 +218,9 @@ def compare_ordering_key(k):\n         return [self.forms[i[0]] for i in self._ordering]\n     ordered_forms = property(_get_ordered_forms)\n \n-    #@classmethod\n+    @classmethod\n     def get_default_prefix(cls):\n         return 'form'\n-    get_default_prefix = classmethod(get_default_prefix)\n \n     def non_form_errors(self):\n         \"\"\""
        },
        {
            "sha": "ecfdc92182b5d1258b9b4ca60eb593821965f28f",
            "filename": "django/forms/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fforms%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fforms%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fmodels.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -701,11 +701,10 @@ def _construct_form(self, i, **kwargs):\n         setattr(form.instance, self.fk.get_attname(), self.instance.pk)\n         return form\n \n-    #@classmethod\n+    @classmethod\n     def get_default_prefix(cls):\n         from django.db.models.fields.related import RelatedObject\n         return RelatedObject(cls.fk.rel.to, cls.model, cls.fk).get_accessor_name().replace('+','')\n-    get_default_prefix = classmethod(get_default_prefix)\n \n     def save_new(self, form, commit=True):\n         # Use commit=False so we can assign the parent key afterwards, then"
        },
        {
            "sha": "087c86d5eac009531d55edcbdfa806c2a26318f6",
            "filename": "django/template/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplate%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplate%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fbase.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -823,7 +823,7 @@ def tag(self, name=None, compile_function=None):\n             # @register.tag()\n             return self.tag_function\n         elif name != None and compile_function == None:\n-            if(callable(name)):\n+            if callable(name):\n                 # @register.tag\n                 return self.tag_function(name)\n             else:\n@@ -847,7 +847,7 @@ def filter(self, name=None, filter_func=None):\n             # @register.filter()\n             return self.filter_function\n         elif filter_func == None:\n-            if(callable(name)):\n+            if callable(name):\n                 # @register.filter\n                 return self.filter_function(name)\n             else:"
        },
        {
            "sha": "ea49c1932c222f5efa93ae46a212c5dc69fc6003",
            "filename": "django/template/defaulttags.py",
            "status": "modified",
            "additions": 21,
            "deletions": 38,
            "changes": 59,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplate%2Fdefaulttags.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplate%2Fdefaulttags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaulttags.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -501,7 +501,7 @@ def render(self, context):\n         context.pop()\n         return output\n \n-#@register.tag\n+@register.tag\n def autoescape(parser, token):\n     \"\"\"\n     Force autoescape behaviour for this block.\n@@ -515,18 +515,16 @@ def autoescape(parser, token):\n     nodelist = parser.parse(('endautoescape',))\n     parser.delete_first_token()\n     return AutoEscapeControlNode((arg == 'on'), nodelist)\n-autoescape = register.tag(autoescape)\n \n-#@register.tag\n+@register.tag\n def comment(parser, token):\n     \"\"\"\n     Ignores everything between ``{% comment %}`` and ``{% endcomment %}``.\n     \"\"\"\n     parser.skip_past('endcomment')\n     return CommentNode()\n-comment = register.tag(comment)\n \n-#@register.tag\n+@register.tag\n def cycle(parser, token):\n     \"\"\"\n     Cycles among the given strings each time this tag is encountered.\n@@ -617,12 +615,12 @@ def cycle(parser, token):\n         values = [parser.compile_filter(arg) for arg in args[1:]]\n         node = CycleNode(values)\n     return node\n-cycle = register.tag(cycle)\n \n+@register.tag\n def csrf_token(parser, token):\n     return CsrfTokenNode()\n-register.tag(csrf_token)\n \n+@register.tag\n def debug(parser, token):\n     \"\"\"\n     Outputs a whole load of debugging information, including the current\n@@ -635,9 +633,8 @@ def debug(parser, token):\n         </pre>\n     \"\"\"\n     return DebugNode()\n-debug = register.tag(debug)\n \n-#@register.tag(name=\"filter\")\n+@register.tag('filter')\n def do_filter(parser, token):\n     \"\"\"\n     Filters the contents of the block through variable filters.\n@@ -659,9 +656,8 @@ def do_filter(parser, token):\n     nodelist = parser.parse(('endfilter',))\n     parser.delete_first_token()\n     return FilterNode(filter_expr, nodelist)\n-do_filter = register.tag(\"filter\", do_filter)\n \n-#@register.tag\n+@register.tag\n def firstof(parser, token):\n     \"\"\"\n     Outputs the first variable passed that is not False, without escaping.\n@@ -700,9 +696,8 @@ def firstof(parser, token):\n     if len(bits) < 1:\n         raise TemplateSyntaxError(\"'firstof' statement requires at least one argument\")\n     return FirstOfNode([parser.compile_filter(bit) for bit in bits])\n-firstof = register.tag(firstof)\n \n-#@register.tag(name=\"for\")\n+@register.tag('for')\n def do_for(parser, token):\n     \"\"\"\n     Loops over each item in an array.\n@@ -792,7 +787,6 @@ def do_for(parser, token):\n     else:\n         nodelist_empty = None\n     return ForNode(loopvars, sequence, is_reversed, nodelist_loop, nodelist_empty)\n-do_for = register.tag(\"for\", do_for)\n \n def do_ifequal(parser, token, negate):\n     bits = list(token.split_contents())\n@@ -810,7 +804,7 @@ def do_ifequal(parser, token, negate):\n     val2 = parser.compile_filter(bits[2])\n     return IfEqualNode(val1, val2, nodelist_true, nodelist_false, negate)\n \n-#@register.tag\n+@register.tag\n def ifequal(parser, token):\n     \"\"\"\n     Outputs the contents of the block if the two arguments equal each other.\n@@ -828,16 +822,14 @@ def ifequal(parser, token):\n         {% endifnotequal %}\n     \"\"\"\n     return do_ifequal(parser, token, False)\n-ifequal = register.tag(ifequal)\n \n-#@register.tag\n+@register.tag\n def ifnotequal(parser, token):\n     \"\"\"\n     Outputs the contents of the block if the two arguments are not equal.\n     See ifequal.\n     \"\"\"\n     return do_ifequal(parser, token, True)\n-ifnotequal = register.tag(ifnotequal)\n \n class TemplateLiteral(Literal):\n     def __init__(self, value, text):\n@@ -860,7 +852,7 @@ def __init__(self, parser, *args, **kwargs):\n     def create_var(self, value):\n         return TemplateLiteral(self.template_parser.compile_filter(value), value)\n \n-#@register.tag(name=\"if\")\n+@register.tag('if')\n def do_if(parser, token):\n     \"\"\"\n     The ``{% if %}`` tag evaluates a variable, and if that variable is \"true\"\n@@ -927,9 +919,8 @@ def do_if(parser, token):\n     else:\n         nodelist_false = NodeList()\n     return IfNode(var, nodelist_true, nodelist_false)\n-do_if = register.tag(\"if\", do_if)\n \n-#@register.tag\n+@register.tag\n def ifchanged(parser, token):\n     \"\"\"\n     Checks if a value has changed from the last iteration of a loop.\n@@ -968,9 +959,8 @@ def ifchanged(parser, token):\n         nodelist_false = NodeList()\n     values = [parser.compile_filter(bit) for bit in bits[1:]]\n     return IfChangedNode(nodelist_true, nodelist_false, *values)\n-ifchanged = register.tag(ifchanged)\n \n-#@register.tag\n+@register.tag\n def ssi(parser, token):\n     \"\"\"\n     Outputs the contents of a given file into the page.\n@@ -1003,9 +993,8 @@ def ssi(parser, token):\n             raise TemplateSyntaxError(\"Second (optional) argument to %s tag\"\n                                       \" must be 'parsed'\" % bits[0])\n     return SsiNode(bits[1], parsed, legacy_filepath=True)\n-ssi = register.tag(ssi)\n \n-#@register.tag\n+@register.tag\n def load(parser, token):\n     \"\"\"\n     Loads a custom template tag set.\n@@ -1053,9 +1042,8 @@ def load(parser, token):\n                 raise TemplateSyntaxError(\"'%s' is not a valid tag library: %s\" %\n                                           (taglib, e))\n     return LoadNode()\n-load = register.tag(load)\n \n-#@register.tag\n+@register.tag\n def now(parser, token):\n     \"\"\"\n     Displays the date, formatted according to the given string.\n@@ -1072,9 +1060,8 @@ def now(parser, token):\n         raise TemplateSyntaxError(\"'now' statement takes one argument\")\n     format_string = bits[1]\n     return NowNode(format_string)\n-now = register.tag(now)\n \n-#@register.tag\n+@register.tag\n def regroup(parser, token):\n     \"\"\"\n     Regroups a list of alike objects by a common attribute.\n@@ -1136,8 +1123,8 @@ def regroup(parser, token):\n \n     var_name = lastbits_reversed[0][::-1]\n     return RegroupNode(target, expression, var_name)\n-regroup = register.tag(regroup)\n \n+@register.tag\n def spaceless(parser, token):\n     \"\"\"\n     Removes whitespace between HTML tags, including tab and newline characters.\n@@ -1166,9 +1153,8 @@ def spaceless(parser, token):\n     nodelist = parser.parse(('endspaceless',))\n     parser.delete_first_token()\n     return SpacelessNode(nodelist)\n-spaceless = register.tag(spaceless)\n \n-#@register.tag\n+@register.tag\n def templatetag(parser, token):\n     \"\"\"\n     Outputs one of the bits used to compose template tags.\n@@ -1200,8 +1186,8 @@ def templatetag(parser, token):\n                                   \" Must be one of: %s\" %\n                                   (tag, TemplateTagNode.mapping.keys()))\n     return TemplateTagNode(tag)\n-templatetag = register.tag(templatetag)\n \n+@register.tag\n def url(parser, token):\n     \"\"\"\n     Returns an absolute URL matching given view with its parameters.\n@@ -1299,9 +1285,8 @@ def url(parser, token):\n                 args.append(parser.compile_filter(value))\n \n     return URLNode(viewname, args, kwargs, asvar, legacy_view_name=True)\n-url = register.tag(url)\n \n-#@register.tag\n+@register.tag\n def widthratio(parser, token):\n     \"\"\"\n     For creating bar charts and such, this tag calculates the ratio of a given\n@@ -1323,9 +1308,8 @@ def widthratio(parser, token):\n     return WidthRatioNode(parser.compile_filter(this_value_expr),\n                           parser.compile_filter(max_value_expr),\n                           parser.compile_filter(max_width))\n-widthratio = register.tag(widthratio)\n \n-#@register.tag\n+@register.tag('with')\n def do_with(parser, token):\n     \"\"\"\n     Adds one or more values to the context (inside of this block) for caching\n@@ -1358,4 +1342,3 @@ def do_with(parser, token):\n     nodelist = parser.parse(('endwith',))\n     parser.delete_first_token()\n     return WithNode(None, None, nodelist, extra_context=extra_context)\n-do_with = register.tag('with', do_with)"
        },
        {
            "sha": "f5cac33dc6fd383a54a42f71a65817b1f74f795c",
            "filename": "django/template/loader_tags.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplate%2Floader_tags.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplate%2Floader_tags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Floader_tags.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -173,6 +173,7 @@ def render(self, context):\n                 raise\n             return ''\n \n+@register.tag('block')\n def do_block(parser, token):\n     \"\"\"\n     Define a block that can be overridden by child templates.\n@@ -193,6 +194,7 @@ def do_block(parser, token):\n     parser.delete_first_token()\n     return BlockNode(block_name, nodelist)\n \n+@register.tag('extends')\n def do_extends(parser, token):\n     \"\"\"\n     Signal that this template extends a parent template.\n@@ -216,6 +218,7 @@ def do_extends(parser, token):\n         raise TemplateSyntaxError(\"'%s' cannot appear more than once in the same template\" % bits[0])\n     return ExtendsNode(nodelist, parent_name, parent_name_expr)\n \n+@register.tag('include')\n def do_include(parser, token):\n     \"\"\"\n     Loads a template and renders it with the current context. You can pass\n@@ -261,7 +264,3 @@ def do_include(parser, token):\n                                    isolated_context=isolated_context)\n     return IncludeNode(parser.compile_filter(bits[1]), extra_context=namemap,\n                        isolated_context=isolated_context)\n-\n-register.tag('block', do_block)\n-register.tag('extends', do_extends)\n-register.tag('include', do_include)"
        },
        {
            "sha": "495623deaf7b8a3e2cc3fb556c1984a7eb2afd79",
            "filename": "django/templatetags/cache.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplatetags%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplatetags%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fcache.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -32,6 +32,7 @@ def render(self, context):\n             cache.set(cache_key, value, expire_time)\n         return value\n \n+@register.tag('cache')\n def do_cache(parser, token):\n     \"\"\"\n     This will cache the contents of a template fragment for a given amount\n@@ -59,5 +60,3 @@ def do_cache(parser, token):\n     if len(tokens) < 3:\n         raise TemplateSyntaxError(u\"'%r' tag requires at least 2 arguments.\" % tokens[0])\n     return CacheNode(nodelist, tokens[1], tokens[2], tokens[3:])\n-\n-register.tag('cache', do_cache)"
        },
        {
            "sha": "17821367a6a563ddc3f4a0aadc72852ca69b4bd6",
            "filename": "django/templatetags/i18n.py",
            "status": "modified",
            "additions": 10,
            "deletions": 12,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplatetags%2Fi18n.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Ftemplatetags%2Fi18n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fi18n.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -117,6 +117,7 @@ def render(self, context):\n         context.pop()\n         return result % data\n \n+@register.tag(\"get_available_languages\")\n def do_get_available_languages(parser, token):\n     \"\"\"\n     This will store a list of available languages\n@@ -138,6 +139,7 @@ def do_get_available_languages(parser, token):\n         raise TemplateSyntaxError(\"'get_available_languages' requires 'as variable' (got %r)\" % args)\n     return GetAvailableLanguagesNode(args[2])\n \n+@register.tag(\"get_language_info\")\n def do_get_language_info(parser, token):\n     \"\"\"\n     This will store the language information dictionary for the given language\n@@ -156,6 +158,7 @@ def do_get_language_info(parser, token):\n         raise TemplateSyntaxError(\"'%s' requires 'for string as variable' (got %r)\" % (args[0], args[1:]))\n     return GetLanguageInfoNode(args[2], args[4])\n \n+@register.tag(\"get_language_info_list\")\n def do_get_language_info_list(parser, token):\n     \"\"\"\n     This will store a list of language information dictionaries for the given\n@@ -178,15 +181,19 @@ def do_get_language_info_list(parser, token):\n         raise TemplateSyntaxError(\"'%s' requires 'for sequence as variable' (got %r)\" % (args[0], args[1:]))\n     return GetLanguageInfoListNode(args[2], args[4])\n \n+@register.filter\n def language_name(lang_code):\n     return translation.get_language_info(lang_code)['name']\n \n+@register.filter\n def language_name_local(lang_code):\n     return translation.get_language_info(lang_code)['name_local']\n \n+@register.filter\n def language_bidi(lang_code):\n     return translation.get_language_info(lang_code)['bidi']\n \n+@register.tag(\"get_current_language\")\n def do_get_current_language(parser, token):\n     \"\"\"\n     This will store the current language in the context.\n@@ -204,6 +211,7 @@ def do_get_current_language(parser, token):\n         raise TemplateSyntaxError(\"'get_current_language' requires 'as variable' (got %r)\" % args)\n     return GetCurrentLanguageNode(args[2])\n \n+@register.tag(\"get_current_language_bidi\")\n def do_get_current_language_bidi(parser, token):\n     \"\"\"\n     This will store the current language layout in the context.\n@@ -221,6 +229,7 @@ def do_get_current_language_bidi(parser, token):\n         raise TemplateSyntaxError(\"'get_current_language_bidi' requires 'as variable' (got %r)\" % args)\n     return GetCurrentLanguageBidiNode(args[2])\n \n+@register.tag(\"trans\")\n def do_translate(parser, token):\n     \"\"\"\n     This will mark a string for translation and will\n@@ -279,6 +288,7 @@ def top(self):\n     value, noop = TranslateParser(token.contents).top()\n     return TranslateNode(parser.compile_filter(value), noop)\n \n+@register.tag(\"blocktrans\")\n def do_block_translate(parser, token):\n     \"\"\"\n     This will translate a block of text with parameters.\n@@ -356,15 +366,3 @@ def do_block_translate(parser, token):\n \n     return BlockTranslateNode(extra_context, singular, plural, countervar,\n             counter)\n-\n-register.tag('get_available_languages', do_get_available_languages)\n-register.tag('get_language_info', do_get_language_info)\n-register.tag('get_language_info_list', do_get_language_info_list)\n-register.tag('get_current_language', do_get_current_language)\n-register.tag('get_current_language_bidi', do_get_current_language_bidi)\n-register.tag('trans', do_translate)\n-register.tag('blocktrans', do_block_translate)\n-\n-register.filter(language_name)\n-register.filter(language_name_local)\n-register.filter(language_bidi)"
        },
        {
            "sha": "ee169ec7cc1616c9d8feee17a08debcc9d94fc96",
            "filename": "django/utils/decorators.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Futils%2Fdecorators.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Futils%2Fdecorators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fdecorators.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -77,6 +77,7 @@ def make_middleware_decorator(middleware_class):\n     def _make_decorator(*m_args, **m_kwargs):\n         middleware = middleware_class(*m_args, **m_kwargs)\n         def _decorator(view_func):\n+            @wraps(view_func, assigned=available_attrs(view_func))\n             def _wrapped_view(request, *args, **kwargs):\n                 if hasattr(middleware, 'process_request'):\n                     result = middleware.process_request(request)\n@@ -99,6 +100,6 @@ def _wrapped_view(request, *args, **kwargs):\n                     if result is not None:\n                         return result\n                 return response\n-            return wraps(view_func, assigned=available_attrs(view_func))(_wrapped_view)\n+            return _wrapped_view\n         return _decorator\n     return _make_decorator"
        },
        {
            "sha": "9635bf92a60aa917a8a7c1ef9643f3e45f2b0afd",
            "filename": "django/utils/functional.py",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Futils%2Ffunctional.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Futils%2Ffunctional.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ffunctional.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -17,14 +17,15 @@ def memoize(func, cache, num_args):\n \n     Only the first num_args are considered when creating the key.\n     \"\"\"\n+    @wraps(func)\n     def wrapper(*args):\n         mem_args = args[:num_args]\n         if mem_args in cache:\n             return cache[mem_args]\n         result = func(*args)\n         cache[mem_args] = result\n         return result\n-    return wraps(func)(wrapper)\n+    return wrapper\n \n class Promise(object):\n     \"\"\"\n@@ -135,11 +136,12 @@ def __deepcopy__(self, memo):\n             memo[id(self)] = self\n             return self\n \n+    @wraps(func)\n     def __wrapper__(*args, **kw):\n         # Creates the proxy object, instead of the actual value.\n         return __proxy__(args, kw)\n \n-    return wraps(func)(__wrapper__)\n+    return __wrapper__\n \n def _lazy_proxy_unpickle(func, args, kwargs, *resultclasses):\n     return lazy(func, *resultclasses)(*args, **kwargs)\n@@ -151,14 +153,15 @@ def allow_lazy(func, *resultclasses):\n     immediately, otherwise a __proxy__ is returned that will evaluate the\n     function when needed.\n     \"\"\"\n+    @wraps(func)\n     def wrapper(*args, **kwargs):\n         for arg in list(args) + kwargs.values():\n             if isinstance(arg, Promise):\n                 break\n         else:\n             return func(*args, **kwargs)\n         return lazy(func, *resultclasses)(*args, **kwargs)\n-    return wraps(func)(wrapper)\n+    return wrapper\n \n class LazyObject(object):\n     \"\"\""
        },
        {
            "sha": "d96d71651eacf5c0cf03bb6cf708e9c436b51028",
            "filename": "django/views/decorators/cache.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fviews%2Fdecorators%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fviews%2Fdecorators%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdecorators%2Fcache.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -58,11 +58,12 @@ def cache_page(*args, **kwargs):\n \n def cache_control(**kwargs):\n     def _cache_controller(viewfunc):\n+        @wraps(viewfunc, assigned=available_attrs(viewfunc))\n         def _cache_controlled(request, *args, **kw):\n             response = viewfunc(request, *args, **kw)\n             patch_cache_control(response, **kwargs)\n             return response\n-        return wraps(viewfunc, assigned=available_attrs(viewfunc))(_cache_controlled)\n+        return _cache_controlled\n     return _cache_controller\n \n \n@@ -71,8 +72,9 @@ def never_cache(view_func):\n     Decorator that adds headers to a response so that it will\n     never be cached.\n     \"\"\"\n+    @wraps(view_func, assigned=available_attrs(view_func))\n     def _wrapped_view_func(request, *args, **kwargs):\n         response = view_func(request, *args, **kwargs)\n         add_never_cache_headers(response)\n         return response\n-    return wraps(view_func, assigned=available_attrs(view_func))(_wrapped_view_func)\n+    return _wrapped_view_func"
        },
        {
            "sha": "6fc882efa75192b50c970fb98c403a5b9961b78d",
            "filename": "django/views/decorators/http.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fviews%2Fdecorators%2Fhttp.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fviews%2Fdecorators%2Fhttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdecorators%2Fhttp.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -29,6 +29,7 @@ def my_view(request):\n     Note that request methods should be in uppercase.\n     \"\"\"\n     def decorator(func):\n+        @wraps(func, assigned=available_attrs(func))\n         def inner(request, *args, **kwargs):\n             if request.method not in request_method_list:\n                 logger.warning('Method Not Allowed (%s): %s' % (request.method, request.path),\n@@ -39,7 +40,7 @@ def inner(request, *args, **kwargs):\n                 )\n                 return HttpResponseNotAllowed(request_method_list)\n             return func(request, *args, **kwargs)\n-        return wraps(func, assigned=available_attrs(func))(inner)\n+        return inner\n     return decorator\n \n require_GET = require_http_methods([\"GET\"])"
        },
        {
            "sha": "cd2f9c0f55ca5c598a964e4c2a63d3b5cda8bb94",
            "filename": "django/views/decorators/vary.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fviews%2Fdecorators%2Fvary.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/django%2Fviews%2Fdecorators%2Fvary.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdecorators%2Fvary.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -14,11 +14,12 @@ def index(request):\n     Note that the header names are not case-sensitive.\n     \"\"\"\n     def decorator(func):\n+        @wraps(func, assigned=available_attrs(func))\n         def inner_func(*args, **kwargs):\n             response = func(*args, **kwargs)\n             patch_vary_headers(response, headers)\n             return response\n-        return wraps(func, assigned=available_attrs(func))(inner_func)\n+        return inner_func\n     return decorator\n \n def vary_on_cookie(func):\n@@ -30,8 +31,9 @@ def vary_on_cookie(func):\n         def index(request):\n             ...\n     \"\"\"\n+    @wraps(func, assigned=available_attrs(func))\n     def inner_func(*args, **kwargs):\n         response = func(*args, **kwargs)\n         patch_vary_headers(response, ('Cookie',))\n         return response\n-    return wraps(func, assigned=available_attrs(func))(inner_func)\n+    return inner_func"
        },
        {
            "sha": "24e6d748e785f3e6a4160cfd0f710a0a2e9c353f",
            "filename": "tests/modeltests/select_for_update/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/tests%2Fmodeltests%2Fselect_for_update%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/tests%2Fmodeltests%2Fselect_for_update%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fselect_for_update%2Ftests.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -6,7 +6,6 @@\n from django.db.utils import ConnectionHandler, DEFAULT_DB_ALIAS, DatabaseError\n from django.test import (TransactionTestCase, skipIfDBFeature,\n     skipUnlessDBFeature)\n-from django.utils.functional import wraps\n from django.utils import unittest\n \n from models import Person"
        },
        {
            "sha": "bb5f24ebfe01509fd449ec7a49ad42797efe40c3",
            "filename": "tests/regressiontests/admin_views/views.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/0b1a061881ff49b0d56c48e026da421a68318a89/tests%2Fregressiontests%2Fadmin_views%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/0b1a061881ff49b0d56c48e026da421a68318a89/tests%2Fregressiontests%2Fadmin_views%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fviews.py?ref=0b1a061881ff49b0d56c48e026da421a68318a89",
            "patch": "@@ -1,6 +1,6 @@\n from django.contrib.admin.views.decorators import staff_member_required\n from django.http import HttpResponse\n \n+@staff_member_required\n def secure_view(request):\n     return HttpResponse('%s' % request.POST)\n-secure_view = staff_member_required(secure_view)\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 257,
        "additions": 114,
        "deletions": 143
    }
}