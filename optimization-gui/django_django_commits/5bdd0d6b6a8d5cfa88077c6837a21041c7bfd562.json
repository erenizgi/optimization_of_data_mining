{
    "author": "claudep",
    "message": "Favored text (StringIO) over binary content for deserialization\n\nThis is also more Python 3 compatible, as the json module in\nPython 3 is expecting text. Thanks Vinay Sajip for noticing it.",
    "sha": "5bdd0d6b6a8d5cfa88077c6837a21041c7bfd562",
    "files": [
        {
            "sha": "937d839239b5dc79d0a1d5ce0d9651264b6da2cd",
            "filename": "django/core/serializers/json.py",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/5bdd0d6b6a8d5cfa88077c6837a21041c7bfd562/django%2Fcore%2Fserializers%2Fjson.py",
            "raw_url": "https://github.com/django/django/raw/5bdd0d6b6a8d5cfa88077c6837a21041c7bfd562/django%2Fcore%2Fserializers%2Fjson.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fjson.py?ref=5bdd0d6b6a8d5cfa88077c6837a21041c7bfd562",
            "patch": "@@ -8,7 +8,6 @@\n import datetime\n import decimal\n import json\n-from io import BytesIO\n \n from django.core.serializers.base import DeserializationError\n from django.core.serializers.python import Serializer as PythonSerializer\n@@ -63,13 +62,13 @@ def Deserializer(stream_or_string, **options):\n     Deserialize a stream or string of JSON data.\n     \"\"\"\n     if isinstance(stream_or_string, bytes):\n-        stream = BytesIO(stream_or_string)\n-    elif isinstance(stream_or_string, unicode):\n-        stream = BytesIO(smart_str(stream_or_string))\n-    else:\n-        stream = stream_or_string\n+        stream_or_string = stream_or_string.decode('utf-8')\n     try:\n-        for obj in PythonDeserializer(json.load(stream), **options):\n+        if isinstance(stream_or_string, basestring):\n+            objects = json.loads(stream_or_string)\n+        else:\n+            objects = json.load(stream_or_string)\n+        for obj in PythonDeserializer(objects, **options):\n             yield obj\n     except GeneratorExit:\n         raise"
        },
        {
            "sha": "b639ad2daeda3e94c789fe1f89f9d9f9b3c0f969",
            "filename": "django/core/serializers/pyyaml.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/5bdd0d6b6a8d5cfa88077c6837a21041c7bfd562/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "raw_url": "https://github.com/django/django/raw/5bdd0d6b6a8d5cfa88077c6837a21041c7bfd562/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fpyyaml.py?ref=5bdd0d6b6a8d5cfa88077c6837a21041c7bfd562",
            "patch": "@@ -6,7 +6,7 @@\n \n import decimal\n import yaml\n-from io import BytesIO\n+from io import StringIO\n \n from django.db import models\n from django.core.serializers.base import DeserializationError\n@@ -51,9 +51,9 @@ def Deserializer(stream_or_string, **options):\n     Deserialize a stream or string of YAML data.\n     \"\"\"\n     if isinstance(stream_or_string, bytes):\n-        stream = BytesIO(stream_or_string)\n-    if isinstance(stream_or_string, unicode):\n-        stream = BytesIO(smart_str(stream_or_string))\n+        stream_or_string = stream_or_string.decode('utf-8')\n+    if isinstance(stream_or_string, basestring):\n+        stream = StringIO(stream_or_string)\n     else:\n         stream = stream_or_string\n     try:"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 10,
        "deletions": 11
    }
}