{
    "author": "andersk",
    "message": "Fixed #19523 -- Improved performance of Django's bash completion\n\nPrevious version took about 150ms to source, even on a warm cache,\nprimarily because it forks+execs /usr/bin/basename 44 times.\nThis patch makes it faster by a factor of 5 (and I imagine that a little\nmore thought would reduce the time to effectively zero).",
    "sha": "e535da6865f0e02f0b593b52ed2e040b24a886d6",
    "files": [
        {
            "sha": "8f852117050ead8a53de22f737b187afb9625c5e",
            "filename": "extras/django_bash_completion",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/e535da6865f0e02f0b593b52ed2e040b24a886d6/extras%2Fdjango_bash_completion",
            "raw_url": "https://github.com/django/django/raw/e535da6865f0e02f0b593b52ed2e040b24a886d6/extras%2Fdjango_bash_completion",
            "contents_url": "https://api.github.com/repos/django/django/contents/extras%2Fdjango_bash_completion?ref=e535da6865f0e02f0b593b52ed2e040b24a886d6",
            "patch": "@@ -42,10 +42,10 @@ complete -F _django_completion -o default django-admin.py manage.py django-admin\n _python_django_completion()\n {\n     if [[ ${COMP_CWORD} -ge 2 ]]; then\n-        PYTHON_EXE=$( basename -- ${COMP_WORDS[0]} )\n+        PYTHON_EXE=${COMP_WORDS[0]##*/}\n         echo $PYTHON_EXE | egrep \"python([2-9]\\.[0-9])?\" >/dev/null 2>&1\n         if [[ $? == 0 ]]; then\n-            PYTHON_SCRIPT=$( basename -- ${COMP_WORDS[1]} )\n+            PYTHON_SCRIPT=${COMP_WORDS[1]##*/}\n             echo $PYTHON_SCRIPT | egrep \"manage\\.py|django-admin(\\.py)?\" >/dev/null 2>&1\n             if [[ $? == 0 ]]; then\n                 COMPREPLY=( $( COMP_WORDS=\"${COMP_WORDS[*]:1}\" \\\n@@ -61,7 +61,7 @@ unset pythons\n if command -v whereis &>/dev/null; then\n     python_interpreters=$(whereis python | cut -d \" \" -f 2-)\n     for python in $python_interpreters; do\n-        pythons=\"${pythons} $(basename -- $python)\"\n+        pythons=\"${pythons} ${python##*/}\"\n     done\n     pythons=$(echo $pythons | tr \" \" \"\\n\" | sort -u | tr \"\\n\" \" \")\n else"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}