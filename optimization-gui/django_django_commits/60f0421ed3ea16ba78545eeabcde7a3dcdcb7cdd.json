{
    "author": "jezdez",
    "message": "Fixed #12347 -- Added a mimetype option to sitemaps views to further customize the output of the view, e.g. to support Yahoo's plain text urllist format. Thanks, afurlan.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16475 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "60f0421ed3ea16ba78545eeabcde7a3dcdcb7cdd",
    "files": [
        {
            "sha": "2255587a9e869b6b0acdeaa22a5a50f91fac5247",
            "filename": "django/contrib/sitemaps/views.py",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/60f0421ed3ea16ba78545eeabcde7a3dcdcb7cdd/django%2Fcontrib%2Fsitemaps%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/60f0421ed3ea16ba78545eeabcde7a3dcdcb7cdd/django%2Fcontrib%2Fsitemaps%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsitemaps%2Fviews.py?ref=60f0421ed3ea16ba78545eeabcde7a3dcdcb7cdd",
            "patch": "@@ -5,7 +5,8 @@\n from django.utils.encoding import smart_str\n from django.core.paginator import EmptyPage, PageNotAnInteger\n \n-def index(request, sitemaps, template_name='sitemap_index.xml'):\n+def index(request, sitemaps,\n+        template_name='sitemap_index.xml', mimetype='application/xml'):\n     current_site = get_current_site(request)\n     sites = []\n     protocol = request.is_secure() and 'https' or 'http'\n@@ -21,9 +22,10 @@ def index(request, sitemaps, template_name='sitemap_index.xml'):\n             for page in range(2, pages+1):\n                 sites.append('%s://%s%s?p=%s' % (protocol, current_site.domain, sitemap_url, page))\n     xml = loader.render_to_string(template_name, {'sitemaps': sites})\n-    return HttpResponse(xml, mimetype='application/xml')\n+    return HttpResponse(xml, mimetype=mimetype)\n \n-def sitemap(request, sitemaps, section=None, template_name='sitemap.xml'):\n+def sitemap(request, sitemaps, section=None,\n+        template_name='sitemap.xml', mimetype='application/xml'):\n     maps, urls = [], []\n     if section is not None:\n         if section not in sitemaps:\n@@ -43,4 +45,4 @@ def sitemap(request, sitemaps, section=None, template_name='sitemap.xml'):\n         except PageNotAnInteger:\n             raise Http404(\"No page '%s'\" % page)\n     xml = smart_str(loader.render_to_string(template_name, {'urlset': urls}))\n-    return HttpResponse(xml, mimetype='application/xml')\n+    return HttpResponse(xml, mimetype=mimetype)"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 6,
        "deletions": 4
    }
}