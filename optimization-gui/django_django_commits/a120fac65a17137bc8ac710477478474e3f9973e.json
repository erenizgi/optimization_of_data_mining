{
    "author": "aaugustin",
    "message": "Introduced force_bytes and force_str.\n\nThis is consistent with the smart_* series of functions and it's going\nto be used by the next commit.",
    "sha": "a120fac65a17137bc8ac710477478474e3f9973e",
    "files": [
        {
            "sha": "7027b82a61dca72f453409981daebfb6d379ef6f",
            "filename": "django/utils/encoding.py",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/a120fac65a17137bc8ac710477478474e3f9973e/django%2Futils%2Fencoding.py",
            "raw_url": "https://github.com/django/django/raw/a120fac65a17137bc8ac710477478474e3f9973e/django%2Futils%2Fencoding.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fencoding.py?ref=a120fac65a17137bc8ac710477478474e3f9973e",
            "patch": "@@ -139,6 +139,19 @@ def smart_bytes(s, encoding='utf-8', strings_only=False, errors='strict'):\n     \"\"\"\n     Returns a bytestring version of 's', encoded as specified in 'encoding'.\n \n+    If strings_only is True, don't convert (some) non-string-like objects.\n+    \"\"\"\n+    if isinstance(s, Promise):\n+        # The input is the result of a gettext_lazy() call.\n+        return s\n+    return force_bytes(s, encoding, strings_only, errors)\n+\n+\n+def force_bytes(s, encoding='utf-8', strings_only=False, errors='strict'):\n+    \"\"\"\n+    Similar to smart_bytes, except that lazy instances are resolved to\n+    strings, rather than kept as lazy objects.\n+\n     If strings_only is True, don't convert (some) non-string-like objects.\n     \"\"\"\n     if isinstance(s, bytes):\n@@ -169,8 +182,10 @@ def smart_bytes(s, encoding='utf-8', strings_only=False, errors='strict'):\n \n if six.PY3:\n     smart_str = smart_text\n+    force_str = force_text\n else:\n     smart_str = smart_bytes\n+    force_str = force_bytes\n     # backwards compatibility for Python 2\n     smart_unicode = smart_text\n     force_unicode = force_text\n@@ -181,6 +196,10 @@ def smart_bytes(s, encoding='utf-8', strings_only=False, errors='strict'):\n This is suitable for writing to sys.stdout (for instance).\n \"\"\"\n \n+force_str.__doc__ = \"\"\"\\\n+Apply force_text in Python 3 and force_bytes in Python 2.\n+\"\"\"\n+\n def iri_to_uri(iri):\n     \"\"\"\n     Convert an Internationalized Resource Identifier (IRI) portion to a URI"
        },
        {
            "sha": "de19578cac3fe8e93540db46e852d1bc35e34382",
            "filename": "docs/ref/utils.txt",
            "status": "modified",
            "additions": 16,
            "deletions": 1,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/a120fac65a17137bc8ac710477478474e3f9973e/docs%2Fref%2Futils.txt",
            "raw_url": "https://github.com/django/django/raw/a120fac65a17137bc8ac710477478474e3f9973e/docs%2Fref%2Futils.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Futils.txt?ref=a120fac65a17137bc8ac710477478474e3f9973e",
            "patch": "@@ -240,14 +240,29 @@ The functions defined in this module share the following properties:\n     If ``strings_only`` is ``True``, don't convert (some) non-string-like\n     objects.\n \n+.. function:: force_bytes(s, encoding='utf-8', strings_only=False, errors='strict')\n+\n+    .. versionadded:: 1.5\n+\n+    Similar to ``smart_bytes``, except that lazy instances are resolved to\n+    bytestrings, rather than kept as lazy objects.\n+\n+    If ``strings_only`` is ``True``, don't convert (some) non-string-like\n+    objects.\n+\n .. function:: smart_str(s, encoding='utf-8', strings_only=False, errors='strict')\n \n     Alias of :func:`smart_bytes` on Python 2 and :func:`smart_text` on Python\n-    3. This function always returns a :class:`str`.\n+    3. This function returns a :class:`str` or a lazy string.\n \n     For instance, this is  suitable for writing to :attr:`sys.stdout` on\n     Python 2 and 3.\n \n+.. function:: force_str(s, encoding='utf-8', strings_only=False, errors='strict')\n+\n+    Alias of :func:`force_bytes` on Python 2 and :func:`force_text` on Python\n+    3. This function always returns a :class:`str`.\n+\n .. function:: iri_to_uri(iri)\n \n     Convert an Internationalized Resource Identifier (IRI) portion to a URI"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 35,
        "deletions": 1
    }
}