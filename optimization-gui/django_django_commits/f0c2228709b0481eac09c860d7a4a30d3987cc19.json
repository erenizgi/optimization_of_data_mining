{
    "author": "jphalip",
    "message": "Fixed #13068 (again) -- Corrected the admin stacked inline template to allow prepopulated fields to work (Thanks Stanislas Guerra for the report). Also fixed a regression introduced in [16953] where prepopulated fields wouldn't be recognized any more due to the additional \"field-\" CSS class name prefix.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17562 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f0c2228709b0481eac09c860d7a4a30d3987cc19",
    "files": [
        {
            "sha": "08e8ca306d7d3dfd1e7d2a2451e6d7a6d86ab432",
            "filename": "django/contrib/admin/templates/admin/edit_inline/stacked.html",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Fstacked.html",
            "raw_url": "https://github.com/django/django/raw/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Fstacked.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Fstacked.html?ref=f0c2228709b0481eac09c860d7a4a30d3987cc19",
            "patch": "@@ -27,14 +27,14 @@ <h3><b>{{ inline_admin_formset.opts.verbose_name|title }}:</b>&nbsp;<span class=\n                 var count = i + 1;\n                 $(this).html($(this).html().replace(/(#\\d+)/g, \"#\" + count));\n             });\n-        }\n+        };\n         var reinitDateTimeShortCuts = function() {\n             // Reinitialize the calendar and clock widgets by force, yuck.\n             if (typeof DateTimeShortcuts != \"undefined\") {\n                 $(\".datetimeshortcuts\").remove();\n                 DateTimeShortcuts.init();\n             }\n-        }\n+        };\n         var updateSelectFilter = function() {\n             // If any SelectFilter widgets were added, instantiate a new instance.\n             if (typeof SelectFilter != \"undefined\"){\n@@ -47,21 +47,21 @@ <h3><b>{{ inline_admin_formset.opts.verbose_name|title }}:</b>&nbsp;<span class=\n                   SelectFilter.init(value.id, namearr[namearr.length-1], true, \"{% static \"admin/\" %}\");\n                 });\n             }\n-        }\n+        };\n         var initPrepopulatedFields = function(row) {\n             row.find('.prepopulated_field').each(function() {\n                 var field = $(this);\n                 var input = field.find('input, select, textarea');\n                 var dependency_list = input.data('dependency_list') || [];\n                 var dependencies = [];\n                 $.each(dependency_list, function(i, field_name) {\n-                  dependencies.push('#' + row.find(field_name).find('input, select, textarea').attr('id'));\n+                  dependencies.push('#' + row.find('.form-row .field-' + field_name).find('input, select, textarea').attr('id'));\n                 });\n                 if (dependencies.length) {\n                     input.prepopulate(dependencies, input.attr('maxlength'));\n                 }\n             });\n-        }\n+        };\n         $(rows).formset({\n             prefix: \"{{ inline_admin_formset.formset.prefix }}\",\n             addText: \"{% blocktrans with verbose_name=inline_admin_formset.opts.verbose_name|title %}Add another {{ verbose_name }}{% endblocktrans %}\","
        },
        {
            "sha": "9e215afd92a3e2e227022fb8c6e239589ccc35a4",
            "filename": "django/contrib/admin/templates/admin/edit_inline/tabular.html",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html",
            "raw_url": "https://github.com/django/django/raw/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html?ref=f0c2228709b0481eac09c860d7a4a30d3987cc19",
            "patch": "@@ -22,7 +22,7 @@ <h2>{{ inline_admin_formset.opts.verbose_name_plural|capfirst }}</h2>\n         {% if inline_admin_form.form.non_field_errors %}\n         <tr><td colspan=\"{{ inline_admin_form|cell_count }}\">{{ inline_admin_form.form.non_field_errors }}</td></tr>\n         {% endif %}\n-        <tr class=\"{% cycle \"row1\" \"row2\" %} {% if inline_admin_form.original or inline_admin_form.show_url %}has_original{% endif %}{% if forloop.last %} empty-form{% endif %}\"\n+        <tr class=\"form-row {% cycle \"row1\" \"row2\" %} {% if inline_admin_form.original or inline_admin_form.show_url %}has_original{% endif %}{% if forloop.last %} empty-form{% endif %}\"\n              id=\"{{ inline_admin_formset.formset.prefix }}-{% if not forloop.last %}{{ forloop.counter0 }}{% else %}empty{% endif %}\">\n         <td class=\"original\">\n           {% if inline_admin_form.original or inline_admin_form.show_url %}<p>\n@@ -103,7 +103,7 @@ <h2>{{ inline_admin_formset.opts.verbose_name_plural|capfirst }}</h2>\n                 var dependency_list = input.data('dependency_list') || [];\n                 var dependencies = [];\n                 $.each(dependency_list, function(i, field_name) {\n-                  dependencies.push('#' + row.find(field_name).find('input, select, textarea').attr('id'));\n+                  dependencies.push('#' + row.find('.field-' + field_name).find('input, select, textarea').attr('id'));\n                 });\n                 if (dependencies.length) {\n                     input.prepopulate(dependencies, input.attr('maxlength'));"
        },
        {
            "sha": "c8d08c880f7db3d34eba11be679b3d225d07e8d6",
            "filename": "django/contrib/admin/templates/admin/includes/fieldset.html",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html",
            "raw_url": "https://github.com/django/django/raw/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html?ref=f0c2228709b0481eac09c860d7a4a30d3987cc19",
            "patch": "@@ -7,7 +7,7 @@\n         <div class=\"form-row{% if line.fields|length_is:'1' and line.errors %} errors{% endif %}{% for field in line %}{% if field.field.name %} field-{{ field.field.name }}{% endif %}{% endfor %}\">\n             {% if line.fields|length_is:'1' %}{{ line.errors }}{% endif %}\n             {% for field in line %}\n-                <div{% if not line.fields|length_is:'1' %} class=\"field-box{% if not field.is_readonly and field.errors %} errors{% endif %}\"{% endif %}>\n+                <div{% if not line.fields|length_is:'1' %} class=\"field-box{% if field.field.name %} field-{{ field.field.name }}{% endif %}{% if not field.is_readonly and field.errors %} errors{% endif %}\"{% endif %}>\n                     {% if not line.fields|length_is:'1' and not field.is_readonly %}{{ field.errors }}{% endif %}\n                     {% if field.is_checkbox %}\n                         {{ field.field }}{{ field.label_tag }}"
        },
        {
            "sha": "0ff4d27acd0294e758a1f7f7b2be1b62db6d96aa",
            "filename": "django/contrib/admin/templates/admin/prepopulated_fields_js.html",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fprepopulated_fields_js.html",
            "raw_url": "https://github.com/django/django/raw/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fprepopulated_fields_js.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fprepopulated_fields_js.html?ref=f0c2228709b0481eac09c860d7a4a30d3987cc19",
            "patch": "@@ -1,7 +1,7 @@\n {% load l10n %}\n <script type=\"text/javascript\">\n (function($) {\n-    var field = null;\n+    var field;\n \n {% for field in prepopulated_fields %}\n     field = {\n@@ -13,10 +13,13 @@\n \n     {% for dependency in field.dependencies %}\n     field['dependency_ids'].push('#{{ dependency.auto_id }}');\n-    field['dependency_list'].push('.{{ dependency.name }}');\n+    field['dependency_list'].push('{{ dependency.name }}');\n     {% endfor %}\n \n-    $('.empty-form .{{ field.field.name }}').addClass('prepopulated_field');\n+    {% comment %}\n+    Mark prepopulated fields in the main form and stacked inlines (.empty-form .form-row) and in tabular inlines (.empty-form.form-row)\n+    {% endcomment %}\n+    $('.empty-form .form-row .field-{{ field.field.name }}, .empty-form.form-row .field-{{ field.field.name }}').addClass('prepopulated_field');\n     $(field.id).data('dependency_list', field['dependency_list'])\n                .prepopulate(field['dependency_ids'], field.maxLength);\n {% endfor %}"
        },
        {
            "sha": "26618dce076990e610f9ae93cfa8919c4efcc8d6",
            "filename": "django/contrib/admin/tests.py",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/f0c2228709b0481eac09c860d7a4a30d3987cc19/django%2Fcontrib%2Fadmin%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftests.py?ref=f0c2228709b0481eac09c860d7a4a30d3987cc19",
            "patch": "@@ -1,4 +1,5 @@\n import sys\n+from selenium.common.exceptions import NoSuchElementException\n \n from django.test import LiveServerTestCase\n from django.utils.importlib import import_module\n@@ -71,4 +72,16 @@ def get_css_value(self, selector, attribute):\n         with Django.\n         \"\"\"\n         return self.selenium.execute_script(\n-            'return django.jQuery(\"%s\").css(\"%s\")' % (selector, attribute))\n\\ No newline at end of file\n+            'return django.jQuery(\"%s\").css(\"%s\")' % (selector, attribute))\n+\n+    def select_option(self, selector, value):\n+        \"\"\"\n+        Helper function to select the <OPTION> that has the value `value` and\n+        that is in the <SELECT> widget identified by the CSS selector `selector`.\n+        \"\"\"\n+        options = self.selenium.find_elements_by_css_selector('%s option' % selector)\n+        for option in options:\n+            if option.get_attribute('value') == value:\n+                option.click()\n+                return\n+        raise NoSuchElementException('Option \"%s\" not found in \"%s\"' % (value, selector))\n\\ No newline at end of file"
        },
        {
            "sha": "b10d1786406caebde23b58659cac4704e00d6a4f",
            "filename": "tests/regressiontests/admin_views/admin.py",
            "status": "modified",
            "additions": 34,
            "deletions": 1,
            "changes": 35,
            "blob_url": "https://github.com/django/django/blob/f0c2228709b0481eac09c860d7a4a30d3987cc19/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py",
            "raw_url": "https://github.com/django/django/raw/f0c2228709b0481eac09c860d7a4a30d3987cc19/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fadmin.py?ref=f0c2228709b0481eac09c860d7a4a30d3987cc19",
            "patch": "@@ -26,7 +26,7 @@\n     CoverLetter, Story, OtherStory, Book, Promo, ChapterXtra1, Pizza, Topping,\n     Album, Question, Answer, ComplexSortedPerson, PrePopulatedPostLargeSlug,\n     AdminOrderedField, AdminOrderedModelMethod, AdminOrderedAdminMethod,\n-    AdminOrderedCallable, Report, Color2)\n+    AdminOrderedCallable, Report, Color2, MainPrepopulated, RelatedPrepopulated)\n \n \n def callable_year(dt_value):\n@@ -532,6 +532,38 @@ class CustomTemplateBooleanFieldListFilter(BooleanFieldListFilter):\n class CustomTemplateFilterColorAdmin(admin.ModelAdmin):\n     list_filter = (('warm', CustomTemplateBooleanFieldListFilter),)\n \n+\n+# For Selenium Prepopulated tests -------------------------------------\n+class RelatedPrepopulatedInline1(admin.StackedInline):\n+    fieldsets = (\n+        (None, {\n+            'fields': (('pubdate', 'status'), ('name', 'slug1', 'slug2',),)\n+        }),\n+    )\n+    model = RelatedPrepopulated\n+    extra = 1\n+    prepopulated_fields = {'slug1': ['name', 'pubdate'],\n+                           'slug2': ['status', 'name']}\n+\n+class RelatedPrepopulatedInline2(admin.TabularInline):\n+    model = RelatedPrepopulated\n+    extra = 1\n+    prepopulated_fields = {'slug1': ['name', 'pubdate'],\n+                           'slug2': ['status', 'name']}\n+\n+class MainPrepopulatedAdmin(admin.ModelAdmin):\n+    inlines = [RelatedPrepopulatedInline1, RelatedPrepopulatedInline2]\n+    fieldsets = (\n+        (None, {\n+            'fields': (('pubdate', 'status'), ('name', 'slug1', 'slug2',),)\n+        }),\n+    )\n+    prepopulated_fields = {'slug1': ['name', 'pubdate'],\n+                           'slug2': ['status', 'name']}\n+\n+\n+\n+\n site = admin.AdminSite(name=\"admin\")\n site.register(Article, ArticleAdmin)\n site.register(CustomArticle, CustomArticleAdmin)\n@@ -576,6 +608,7 @@ class CustomTemplateFilterColorAdmin(admin.ModelAdmin):\n site.register(Story, StoryAdmin)\n site.register(OtherStory, OtherStoryAdmin)\n site.register(Report, ReportAdmin)\n+site.register(MainPrepopulated, MainPrepopulatedAdmin)\n \n # We intentionally register Promo and ChapterXtra1 but not Chapter nor ChapterXtra2.\n # That way we cover all four cases:"
        },
        {
            "sha": "cf2896f60a17299f48b7c6cbbfb84950058aec72",
            "filename": "tests/regressiontests/admin_views/models.py",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/f0c2228709b0481eac09c860d7a4a30d3987cc19/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/f0c2228709b0481eac09c860d7a4a30d3987cc19/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py?ref=f0c2228709b0481eac09c860d7a4a30d3987cc19",
            "patch": "@@ -575,3 +575,25 @@ class Report(models.Model):\n \n     def __unicode__(self):\n         return self.title\n+\n+\n+class MainPrepopulated(models.Model):\n+    name = models.CharField(max_length=100)\n+    pubdate = models.DateField()\n+    status = models.CharField(\n+        max_length=20,\n+        choices=(('option one', 'Option One'),\n+                 ('option two', 'Option Two')))\n+    slug1 = models.SlugField()\n+    slug2 = models.SlugField()\n+\n+class RelatedPrepopulated(models.Model):\n+    parent = models.ForeignKey(MainPrepopulated)\n+    name = models.CharField(max_length=75)\n+    pubdate = models.DateField()\n+    status = models.CharField(\n+        max_length=20,\n+        choices=(('option one', 'Option One'),\n+                 ('option two', 'Option Two')))\n+    slug1 = models.SlugField(max_length=50)\n+    slug2 = models.SlugField(max_length=60)\n\\ No newline at end of file"
        },
        {
            "sha": "7349dec947b40fbe29560bed5b677aa29fe1732c",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 107,
            "deletions": 2,
            "changes": 109,
            "blob_url": "https://github.com/django/django/blob/f0c2228709b0481eac09c860d7a4a30d3987cc19/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/f0c2228709b0481eac09c860d7a4a30d3987cc19/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=f0c2228709b0481eac09c860d7a4a30d3987cc19",
            "patch": "@@ -17,7 +17,8 @@\n from django.contrib.admin.sites import LOGIN_FORM_KEY\n from django.contrib.admin.util import quote\n from django.contrib.admin.views.main import IS_POPUP_VAR\n-from django.contrib.auth import REDIRECT_FIELD_NAME, admin\n+from django.contrib.admin.tests import AdminSeleniumWebDriverTestCase\n+from django.contrib.auth import REDIRECT_FIELD_NAME\n from django.contrib.auth.models import Group, User, Permission, UNUSABLE_PASSWORD\n from django.contrib.contenttypes.models import ContentType\n from django.forms.util import ErrorList\n@@ -40,7 +41,7 @@\n     FoodDelivery, RowLevelChangePermissionModel, Paper, CoverLetter, Story,\n     OtherStory, ComplexSortedPerson, Parent, Child, AdminOrderedField,\n     AdminOrderedModelMethod, AdminOrderedAdminMethod, AdminOrderedCallable,\n-    Report)\n+    Report, MainPrepopulated, RelatedPrepopulated)\n \n \n ERROR_MESSAGE = \"Please enter the correct username and password \\\n@@ -2892,6 +2893,110 @@ def test_prepopulated_maxlength_localized(self):\n         response = self.client.get('/test_admin/admin/admin_views/prepopulatedpostlargeslug/add/')\n         self.assertContains(response, \"maxLength: 1000\") # instead of 1,000\n \n+\n+class SeleniumPrePopulatedTests(AdminSeleniumWebDriverTestCase):\n+    urls = \"regressiontests.admin_views.urls\"\n+    fixtures = ['admin-views-users.xml']\n+\n+    def test_basic(self):\n+        \"\"\"\n+        Ensure that the Javascript-automated prepopulated fields work with the\n+        main form and with stacked and tabular inlines.\n+        Refs #13068, #9264, #9983, #9784.\n+        \"\"\"\n+        self.admin_login(username='super', password='secret', login_url='/test_admin/admin/')\n+        self.selenium.get('%s%s' % (self.live_server_url,\n+            '/test_admin/admin/admin_views/mainprepopulated/add/'))\n+\n+        # Main form ----------------------------------------------------------\n+        self.selenium.find_element_by_css_selector('#id_pubdate').send_keys('2012-02-18')\n+        self.select_option('#id_status', 'option two')\n+        self.selenium.find_element_by_css_selector('#id_name').send_keys(u' this is the mAin nÀMë and it\\'s awεšome')\n+        slug1 = self.selenium.find_element_by_css_selector('#id_slug1').get_attribute('value')\n+        slug2 = self.selenium.find_element_by_css_selector('#id_slug2').get_attribute('value')\n+        self.assertEqual(slug1, 'main-name-and-its-awesome-2012-02-18')\n+        self.assertEqual(slug2, 'option-two-main-name-and-its-awesome')\n+\n+        # Stacked inlines ----------------------------------------------------\n+        # Initial inline\n+        self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-0-pubdate').send_keys('2011-12-17')\n+        self.select_option('#id_relatedprepopulated_set-0-status', 'option one')\n+        self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-0-name').send_keys(u' here is a sŤāÇkeð   inline !  ')\n+        slug1 = self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-0-slug1').get_attribute('value')\n+        slug2 = self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-0-slug2').get_attribute('value')\n+        self.assertEqual(slug1, 'here-stacked-inline-2011-12-17')\n+        self.assertEqual(slug2, 'option-one-here-stacked-inline')\n+\n+        # Add an inline\n+        self.selenium.find_element_by_css_selector('#relatedprepopulated_set-group .add-row a').click()\n+        self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-1-pubdate').send_keys('1999-01-25')\n+        self.select_option('#id_relatedprepopulated_set-1-status', 'option two')\n+        self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-1-name').send_keys(u' now you haVe anöther   sŤāÇkeð  inline with a very ... loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog text... ')\n+        slug1 = self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-1-slug1').get_attribute('value')\n+        slug2 = self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-1-slug2').get_attribute('value')\n+        self.assertEqual(slug1, 'now-you-have-another-stacked-inline-very-loooooooo') # 50 characters maximum for slug1 field\n+        self.assertEqual(slug2, 'option-two-now-you-have-another-stacked-inline-very-looooooo') # 60 characters maximum for slug2 field\n+\n+        # Tabular inlines ----------------------------------------------------\n+        # Initial inline\n+        self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-2-0-pubdate').send_keys('1234-12-07')\n+        self.select_option('#id_relatedprepopulated_set-2-0-status', 'option two')\n+        self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-2-0-name').send_keys(u'And now, with a tÃbűlaŘ inline !!!')\n+        slug1 = self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-2-0-slug1').get_attribute('value')\n+        slug2 = self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-2-0-slug2').get_attribute('value')\n+        self.assertEqual(slug1, 'and-now-tabular-inline-1234-12-07')\n+        self.assertEqual(slug2, 'option-two-and-now-tabular-inline')\n+\n+        # Add an inline\n+        self.selenium.find_element_by_css_selector('#relatedprepopulated_set-2-group .add-row a').click()\n+        self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-2-1-pubdate').send_keys('1981-08-22')\n+        self.select_option('#id_relatedprepopulated_set-2-1-status', 'option one')\n+        self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-2-1-name').send_keys(u'a tÃbűlaŘ inline with ignored ;\"&*^\\%$#@-/`~ characters')\n+        slug1 = self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-2-1-slug1').get_attribute('value')\n+        slug2 = self.selenium.find_element_by_css_selector('#id_relatedprepopulated_set-2-1-slug2').get_attribute('value')\n+        self.assertEqual(slug1, 'tabular-inline-ignored-characters-1981-08-22')\n+        self.assertEqual(slug2, 'option-one-tabular-inline-ignored-characters')\n+\n+        # Save and check that everything is properly stored in the database\n+        self.selenium.find_element_by_xpath('//input[@value=\"Save\"]').click()\n+        self.assertEqual(MainPrepopulated.objects.all().count(), 1)\n+        MainPrepopulated.objects.get(\n+            name=u' this is the mAin nÀMë and it\\'s awεšome',\n+            pubdate='2012-02-18',\n+            status='option two',\n+            slug1='main-name-and-its-awesome-2012-02-18',\n+            slug2='option-two-main-name-and-its-awesome',\n+        )\n+        self.assertEqual(RelatedPrepopulated.objects.all().count(), 4)\n+        RelatedPrepopulated.objects.get(\n+            name=u' here is a sŤāÇkeð   inline !  ',\n+            pubdate='2011-12-17',\n+            status='option one',\n+            slug1='here-stacked-inline-2011-12-17',\n+            slug2='option-one-here-stacked-inline',\n+        )\n+        RelatedPrepopulated.objects.get(\n+            name=u' now you haVe anöther   sŤāÇkeð  inline with a very ... loooooooooooooooooo', # 75 characters in name field\n+            pubdate='1999-01-25',\n+            status='option two',\n+            slug1='now-you-have-another-stacked-inline-very-loooooooo',\n+            slug2='option-two-now-you-have-another-stacked-inline-very-looooooo',\n+        )\n+        RelatedPrepopulated.objects.get(\n+            name=u'And now, with a tÃbűlaŘ inline !!!',\n+            pubdate='1234-12-07',\n+            status='option two',\n+            slug1='and-now-tabular-inline-1234-12-07',\n+            slug2='option-two-and-now-tabular-inline',\n+        )\n+        RelatedPrepopulated.objects.get(\n+            name=u'a tÃbűlaŘ inline with ignored ;\"&*^\\%$#@-/`~ characters',\n+            pubdate='1981-08-22',\n+            status='option one',\n+            slug1='tabular-inline-ignored-characters-1981-08-22',\n+            slug2='option-one-tabular-inline-ignored-characters',\n+        )\n+\n class ReadonlyTest(TestCase):\n     urls = \"regressiontests.admin_views.urls\"\n     fixtures = ['admin-views-users.xml']"
        }
    ],
    "stats": {
        "total": 206,
        "additions": 191,
        "deletions": 15
    }
}