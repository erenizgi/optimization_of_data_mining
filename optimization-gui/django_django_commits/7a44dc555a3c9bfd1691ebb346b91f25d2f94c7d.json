{
    "author": "vicould",
    "message": "Fixed #16479 - Forms generated from formsets use ErrorList instead of supplied error_class\n\nPatch with tests from charettes, updated.",
    "sha": "7a44dc555a3c9bfd1691ebb346b91f25d2f94c7d",
    "files": [
        {
            "sha": "c646eed506fb173409b960b17b5fedf7bbcc2215",
            "filename": "django/forms/formsets.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/7a44dc555a3c9bfd1691ebb346b91f25d2f94c7d/django%2Fforms%2Fformsets.py",
            "raw_url": "https://github.com/django/django/raw/7a44dc555a3c9bfd1691ebb346b91f25d2f94c7d/django%2Fforms%2Fformsets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fformsets.py?ref=7a44dc555a3c9bfd1691ebb346b91f25d2f94c7d",
            "patch": "@@ -123,7 +123,11 @@ def _construct_form(self, i, **kwargs):\n         \"\"\"\n         Instantiates and returns the i-th form instance in a formset.\n         \"\"\"\n-        defaults = {'auto_id': self.auto_id, 'prefix': self.add_prefix(i)}\n+        defaults = {\n+            'auto_id': self.auto_id,\n+            'prefix': self.add_prefix(i),\n+            'error_class': self.error_class,\n+            }\n         if self.is_bound:\n             defaults['data'] = self.data\n             defaults['files'] = self.files"
        },
        {
            "sha": "b3ceee551b390f00d01bd76e690e8045d2aa11a9",
            "filename": "tests/regressiontests/forms/tests/formsets.py",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/7a44dc555a3c9bfd1691ebb346b91f25d2f94c7d/tests%2Fregressiontests%2Fforms%2Ftests%2Fformsets.py",
            "raw_url": "https://github.com/django/django/raw/7a44dc555a3c9bfd1691ebb346b91f25d2f94c7d/tests%2Fregressiontests%2Fforms%2Ftests%2Fformsets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fformsets.py?ref=7a44dc555a3c9bfd1691ebb346b91f25d2f94c7d",
            "patch": "@@ -3,6 +3,7 @@\n \n from django.forms import Form, CharField, IntegerField, ValidationError, DateField\n from django.forms.formsets import formset_factory, BaseFormSet\n+from django.forms.util import ErrorList\n from django.test import TestCase\n \n \n@@ -847,6 +848,15 @@ def test_formset_nonzero(self):\n         self.assertTrue(formset)\n \n \n+    def test_formset_error_class(self):\n+        # Regression tests for #16479 -- formsets form use ErrorList instead of supplied error_class\n+        class CustomErrorList(ErrorList):\n+            pass\n+\n+        formset = FavoriteDrinksFormSet(error_class=CustomErrorList)\n+        self.assertEqual(formset.forms[0].error_class, CustomErrorList)\n+\n+\n data = {\n     'choices-TOTAL_FORMS': '1', # the number of forms rendered\n     'choices-INITIAL_FORMS': '0', # the number of forms with initial data"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 15,
        "deletions": 1
    }
}