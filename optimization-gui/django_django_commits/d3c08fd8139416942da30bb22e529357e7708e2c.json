{
    "author": "unknown",
    "message": "Fixed #15573: Forced the default site id to be 1 when creating test databases, to prevent a large number of errors when running the tests using the oracle backend.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16027 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "d3c08fd8139416942da30bb22e529357e7708e2c",
    "files": [
        {
            "sha": "437a4297afa587f51a9d71404508a0d7b51d326c",
            "filename": "django/db/backends/creation.py",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/d3c08fd8139416942da30bb22e529357e7708e2c/django%2Fdb%2Fbackends%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/d3c08fd8139416942da30bb22e529357e7708e2c/django%2Fdb%2Fbackends%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fcreation.py?ref=d3c08fd8139416942da30bb22e529357e7708e2c",
            "patch": "@@ -247,6 +247,14 @@ def create_test_db(self, verbosity=1, autoclobber=False):\n             verbosity=max(verbosity - 1, 0),\n             interactive=False,\n             database=self.connection.alias)\n+        \n+        # One effect of calling syncdb followed by flush is that the id of the\n+        # default site may or may not be 1, depending on how the sequence was\n+        # reset.  If the sites app is loaded, then we coerce it.\n+        from django.db.models import get_model\n+        Site = get_model('sites', 'Site')\n+        if Site is not None and Site.objects.using(self.connection.alias).count() == 1:\n+            Site.objects.using(self.connection.alias).update(id=settings.SITE_ID)\n \n         from django.core.cache import get_cache\n         from django.core.cache.backends.db import BaseDatabaseCache"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 8,
        "deletions": 0
    }
}