{
    "author": "timgraham",
    "message": "Fixed #16929 - Documented how to extend UserAdmin with UserProfile fields; thanks charettes for the draft example.",
    "sha": "22242c510f84c53803afe2907649c892cb1b3d9a",
    "files": [
        {
            "sha": "ef03d5479ca2a444b420c170a2c378c9ab7a5db6",
            "filename": "docs/topics/auth.txt",
            "status": "modified",
            "additions": 31,
            "deletions": 1,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/22242c510f84c53803afe2907649c892cb1b3d9a/docs%2Ftopics%2Fauth.txt",
            "raw_url": "https://github.com/django/django/raw/22242c510f84c53803afe2907649c892cb1b3d9a/docs%2Ftopics%2Fauth.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth.txt?ref=22242c510f84c53803afe2907649c892cb1b3d9a",
            "patch": "@@ -650,6 +650,36 @@ the handler, if ``created`` is ``True``, create the associated user profile::\n .. seealso:: :doc:`/topics/signals` for more information on Django's signal\n     dispatcher.\n \n+Adding UserProfile fields to the admin\n+--------------------------------------\n+\n+To add the UserProfile fields to the user page in the admin, define an\n+:class:`~django.contrib.admin.InlineModelAdmin` (for this example, we'll use a\n+:class:`~django.contrib.admin.StackedInline`) in your app's ``admin.py`` and\n+add it to a ``UserAdmin`` class which is registered with the\n+:class:`~django.contrib.auth.models.User` class::\n+\n+    from django.contrib import admin\n+    from django.contrib.auth.admin import UserAdmin\n+    from django.contrib.auth.models import User\n+\n+    from my_user_profile_app.models import UserProfile\n+\n+    # Define an inline admin descriptor for UserProfile model\n+    # which acts a bit like a singleton\n+    class UserProfileInline(admin.StackedInline):\n+        model = UserProfile\n+        can_delete = False\n+        verbose_name_plural = 'profile'\n+\n+    # Define a new User admin\n+    class UserAdmin(UserAdmin):\n+        inlines = (UserProfileInline, )\n+\n+    # Re-register UserAdmin\n+    admin.site.unregister(User)\n+    admin.site.register(User, UserAdmin)\n+\n Authentication in Web requests\n ==============================\n \n@@ -948,7 +978,7 @@ The login_required decorator\n         (r'^accounts/login/$', 'django.contrib.auth.views.login'),\n \n     .. versionchanged:: 1.5\n-    \n+\n     As of version 1.5 :setting:`settings.LOGIN_URL <LOGIN_URL>` now also accepts\n     view function names and :ref:`named URL patterns <naming-url-patterns>`.\n     This allows you to freely remap your login view within your URLconf"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 31,
        "deletions": 1
    }
}