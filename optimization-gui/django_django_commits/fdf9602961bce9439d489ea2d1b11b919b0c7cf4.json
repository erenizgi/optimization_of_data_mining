{
    "author": "spookylukey",
    "message": "Fixed #11058 - list_display_links doesn't allow callables not defined in the model\n\nThanks to dvine for the report and julien for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15619 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "fdf9602961bce9439d489ea2d1b11b919b0c7cf4",
    "files": [
        {
            "sha": "ba3525624da6a0ab15c8325bccb3bfcb8e62aab5",
            "filename": "django/contrib/admin/validation.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/fdf9602961bce9439d489ea2d1b11b919b0c7cf4/django%2Fcontrib%2Fadmin%2Fvalidation.py",
            "raw_url": "https://github.com/django/django/raw/fdf9602961bce9439d489ea2d1b11b919b0c7cf4/django%2Fcontrib%2Fadmin%2Fvalidation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fvalidation.py?ref=fdf9602961bce9439d489ea2d1b11b919b0c7cf4",
            "patch": "@@ -46,9 +46,8 @@ def validate(cls, model):\n     if hasattr(cls, 'list_display_links'):\n         check_isseq(cls, 'list_display_links', cls.list_display_links)\n         for idx, field in enumerate(cls.list_display_links):\n-            fetch_attr(cls, model, opts, 'list_display_links[%d]' % idx, field)\n             if field not in cls.list_display:\n-                raise ImproperlyConfigured(\"'%s.list_display_links[%d]'\"\n+                raise ImproperlyConfigured(\"'%s.list_display_links[%d]' \"\n                         \"refers to '%s' which is not defined in 'list_display'.\"\n                         % (cls.__name__, idx, field))\n "
        },
        {
            "sha": "c28dc8b7b32756117128eb66e50fe8fe904902d3",
            "filename": "docs/ref/contrib/admin/index.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/fdf9602961bce9439d489ea2d1b11b919b0c7cf4/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/fdf9602961bce9439d489ea2d1b11b919b0c7cf4/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt?ref=fdf9602961bce9439d489ea2d1b11b919b0c7cf4",
            "patch": "@@ -479,11 +479,11 @@ subclass::\n     By default, the change list page will link the first column -- the first\n     field specified in ``list_display`` -- to the change page for each item.\n     But ``list_display_links`` lets you change which columns are linked. Set\n-    ``list_display_links`` to a list or tuple of field names (in the same\n+    ``list_display_links`` to a list or tuple of fields (in the same\n     format as ``list_display``) to link.\n \n-    ``list_display_links`` can specify one or many field names. As long as the\n-    field names appear in ``list_display``, Django doesn't care how many (or\n+    ``list_display_links`` can specify one or many fields. As long as the\n+    fields appear in ``list_display``, Django doesn't care how many (or\n     how few) fields are linked. The only requirement is: If you want to use\n     ``list_display_links``, you must define ``list_display``.\n "
        },
        {
            "sha": "cb2e3d1b0bc6c4b74c2b4e73aedb210882dd4848",
            "filename": "tests/regressiontests/modeladmin/models.py",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/fdf9602961bce9439d489ea2d1b11b919b0c7cf4/tests%2Fregressiontests%2Fmodeladmin%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/fdf9602961bce9439d489ea2d1b11b919b0c7cf4/tests%2Fregressiontests%2Fmodeladmin%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodeladmin%2Fmodels.py?ref=fdf9602961bce9439d489ea2d1b11b919b0c7cf4",
            "patch": "@@ -8,7 +8,7 @@ class Band(models.Model):\n     name = models.CharField(max_length=100)\n     bio = models.TextField()\n     sign_date = models.DateField()\n-    \n+\n     def __unicode__(self):\n         return self.name\n \n@@ -32,5 +32,8 @@ class ValidationTestModel(models.Model):\n     pub_date = models.DateTimeField()\n     band = models.ForeignKey(Band)\n \n+    def decade_published_in(self):\n+        return self.pub_date.strftime('%Y')[:3] + \"0's\"\n+\n class ValidationTestInlineModel(models.Model):\n     parent = models.ForeignKey(ValidationTestModel)"
        },
        {
            "sha": "74dacd32276af7a61e3875da0981aca9a291252c",
            "filename": "tests/regressiontests/modeladmin/tests.py",
            "status": "modified",
            "additions": 15,
            "deletions": 5,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/fdf9602961bce9439d489ea2d1b11b919b0c7cf4/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/fdf9602961bce9439d489ea2d1b11b919b0c7cf4/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py?ref=fdf9602961bce9439d489ea2d1b11b919b0c7cf4",
            "patch": "@@ -771,8 +771,13 @@ class ValidationTestModelAdmin(ModelAdmin):\n             ValidationTestModel,\n         )\n \n+        def a_callable(obj):\n+            pass\n+\n         class ValidationTestModelAdmin(ModelAdmin):\n-            list_display = ('name',)\n+            def a_method(self, obj):\n+                pass\n+            list_display = ('name', 'decade_published_in', 'a_method', a_callable)\n \n         validate(ValidationTestModelAdmin, ValidationTestModel)\n \n@@ -794,7 +799,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.list_display_links\\[0\\]' refers to 'non_existent_field' that is neither a field, method or property of model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.list_display_links\\[0\\]' refers to 'non_existent_field' which is not defined in 'list_display'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -805,15 +810,20 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.list_display_links\\[0\\]'refers to 'name' which is not defined in 'list_display'.\",\n+            \"'ValidationTestModelAdmin.list_display_links\\[0\\]' refers to 'name' which is not defined in 'list_display'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n         )\n \n+        def a_callable(obj):\n+            pass\n+\n         class ValidationTestModelAdmin(ModelAdmin):\n-            list_display = ('name',)\n-            list_display_links = ('name',)\n+            def a_method(self, obj):\n+                pass\n+            list_display = ('name', 'decade_published_in', 'a_method', a_callable)\n+            list_display_links = ('name', 'decade_published_in', 'a_method', a_callable)\n \n         validate(ValidationTestModelAdmin, ValidationTestModel)\n "
        }
    ],
    "stats": {
        "total": 34,
        "additions": 23,
        "deletions": 11
    }
}