{
    "author": "freakboy3742",
    "message": "Fixed #13190 -- Improved error handling for the case where no authentication backends are defined. Thanks to Joel3000 for the report, and ≈Åukasz Rekucki for the final patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14793 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "34a386378ff4ac5081017691eb4eff83e30c8aa0",
    "files": [
        {
            "sha": "95251752d4c0dc62dba2d461dd4400b70b7efc3b",
            "filename": "django/contrib/auth/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/34a386378ff4ac5081017691eb4eff83e30c8aa0/django%2Fcontrib%2Fauth%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/34a386378ff4ac5081017691eb4eff83e30c8aa0/django%2Fcontrib%2Fauth%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2F__init__.py?ref=34a386378ff4ac5081017691eb4eff83e30c8aa0",
            "patch": "@@ -37,6 +37,8 @@ def get_backends():\n     backends = []\n     for backend_path in settings.AUTHENTICATION_BACKENDS:\n         backends.append(load_backend(backend_path))\n+    if not backends:\n+        raise ImproperlyConfigured('No authentication backends have been defined. Does AUTHENTICATION_BACKENDS contain anything?')\n     return backends\n \n def authenticate(**credentials):"
        },
        {
            "sha": "dfd59956c55a48f197d4bba1cd8f5e548c6c0294",
            "filename": "django/contrib/auth/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/34a386378ff4ac5081017691eb4eff83e30c8aa0/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/34a386378ff4ac5081017691eb4eff83e30c8aa0/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py?ref=34a386378ff4ac5081017691eb4eff83e30c8aa0",
            "patch": "@@ -1,4 +1,4 @@\n-from django.contrib.auth.tests.auth_backends import BackendTest, RowlevelBackendTest, AnonymousUserBackendTest, NoAnonymousUserBackendTest\n+from django.contrib.auth.tests.auth_backends import BackendTest, RowlevelBackendTest, AnonymousUserBackendTest, NoAnonymousUserBackendTest, NoBackendsTest\n from django.contrib.auth.tests.basic import BasicTestCase\n from django.contrib.auth.tests.decorators import LoginRequiredTestCase\n from django.contrib.auth.tests.forms import UserCreationFormTest, AuthenticationFormTest, SetPasswordFormTest, PasswordChangeFormTest, UserChangeFormTest, PasswordResetFormTest"
        },
        {
            "sha": "490861cb436ac91984e7795217d855e6a71e034d",
            "filename": "django/contrib/auth/tests/auth_backends.py",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/34a386378ff4ac5081017691eb4eff83e30c8aa0/django%2Fcontrib%2Fauth%2Ftests%2Fauth_backends.py",
            "raw_url": "https://github.com/django/django/raw/34a386378ff4ac5081017691eb4eff83e30c8aa0/django%2Fcontrib%2Fauth%2Ftests%2Fauth_backends.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fauth_backends.py?ref=34a386378ff4ac5081017691eb4eff83e30c8aa0",
            "patch": "@@ -3,6 +3,7 @@\n from django.conf import settings\n from django.contrib.auth.models import User, Group, Permission, AnonymousUser\n from django.contrib.contenttypes.models import ContentType\n+from django.core.exceptions import ImproperlyConfigured\n from django.test import TestCase\n \n \n@@ -251,3 +252,18 @@ def test_has_module_perms(self):\n \n     def test_get_all_permissions(self):\n         self.assertEqual(self.user1.get_all_permissions(TestObj()), set())\n+\n+class NoBackendsTest(TestCase):\n+    \"\"\"\n+    Tests that an appropriate error is raised if no auth backends are provided.\n+    \"\"\"\n+    def setUp(self):\n+        self.old_AUTHENTICATION_BACKENDS = settings.AUTHENTICATION_BACKENDS\n+        settings.AUTHENTICATION_BACKENDS = []\n+        self.user = User.objects.create_user('test', 'test@example.com', 'test')\n+\n+    def tearDown(self):\n+        settings.AUTHENTICATION_BACKENDS = self.old_AUTHENTICATION_BACKENDS\n+\n+    def test_raises_exception(self):\n+        self.assertRaises(ImproperlyConfigured, self.user.has_perm, ('perm', TestObj(),))"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 19,
        "deletions": 1
    }
}