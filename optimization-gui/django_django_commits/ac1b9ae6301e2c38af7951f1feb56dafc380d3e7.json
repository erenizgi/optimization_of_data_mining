{
    "author": "apollo13",
    "message": "Fixed GIS testsuite.\n\nMoved HAS_SPATIALREFSYS back into the tests namespace since it only operates\non the default database and isn't a global flag like HAS_GDAL.",
    "sha": "ac1b9ae6301e2c38af7951f1feb56dafc380d3e7",
    "files": [
        {
            "sha": "5c336f321039e67cdc88f736502013380e7a98d5",
            "filename": "django/contrib/gis/gdal/__init__.py",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/ac1b9ae6301e2c38af7951f1feb56dafc380d3e7/django%2Fcontrib%2Fgis%2Fgdal%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/ac1b9ae6301e2c38af7951f1feb56dafc380d3e7/django%2Fcontrib%2Fgis%2Fgdal%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgdal%2F__init__.py?ref=ac1b9ae6301e2c38af7951f1feb56dafc380d3e7",
            "patch": "@@ -44,18 +44,6 @@\n except:\n     HAS_GDAL, GEOJSON = False, False\n \n-from django.contrib.gis.tests.utils import no_mysql, oracle, postgis, spatialite\n-HAS_SPATIALREFSYS = True\n-if oracle:\n-    from django.contrib.gis.db.backends.oracle.models import SpatialRefSys\n-elif postgis:\n-    from django.contrib.gis.db.backends.postgis.models import SpatialRefSys\n-elif spatialite:\n-    from django.contrib.gis.db.backends.spatialite.models import SpatialRefSys\n-else:\n-    HAS_SPATIALREFSYS = False\n-    SpatialRefSys = None\n-\n try:\n     from django.contrib.gis.gdal.envelope import Envelope\n except ImportError:"
        },
        {
            "sha": "9d2b7c7c3cdac13c959c32c10ef3285e764393e8",
            "filename": "django/contrib/gis/tests/test_geoforms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/ac1b9ae6301e2c38af7951f1feb56dafc380d3e7/django%2Fcontrib%2Fgis%2Ftests%2Ftest_geoforms.py",
            "raw_url": "https://github.com/django/django/raw/ac1b9ae6301e2c38af7951f1feb56dafc380d3e7/django%2Fcontrib%2Fgis%2Ftests%2Ftest_geoforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Ftest_geoforms.py?ref=ac1b9ae6301e2c38af7951f1feb56dafc380d3e7",
            "patch": "@@ -1,5 +1,6 @@\n from django.forms import ValidationError\n-from django.contrib.gis.gdal import HAS_GDAL, HAS_SPATIALREFSYS\n+from django.contrib.gis.gdal import HAS_GDAL\n+from django.contrib.gis.tests.utils import HAS_SPATIALREFSYS\n from django.utils import unittest\n \n "
        },
        {
            "sha": "5cdc68a74d5b89fecb39fc0b9a99e0fa1185d66c",
            "filename": "django/contrib/gis/tests/test_spatialrefsys.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/ac1b9ae6301e2c38af7951f1feb56dafc380d3e7/django%2Fcontrib%2Fgis%2Ftests%2Ftest_spatialrefsys.py",
            "raw_url": "https://github.com/django/django/raw/ac1b9ae6301e2c38af7951f1feb56dafc380d3e7/django%2Fcontrib%2Fgis%2Ftests%2Ftest_spatialrefsys.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Ftest_spatialrefsys.py?ref=ac1b9ae6301e2c38af7951f1feb56dafc380d3e7",
            "patch": "@@ -1,6 +1,7 @@\n from django.db import connection\n-from django.contrib.gis.gdal import HAS_GDAL, HAS_SPATIALREFSYS, SpatialRefSys\n-from django.contrib.gis.tests.utils import no_mysql, oracle, postgis, spatialite\n+from django.contrib.gis.gdal import HAS_GDAL\n+from django.contrib.gis.tests.utils import (no_mysql, oracle, postgis,\n+    spatialite, HAS_SPATIALREFSYS, SpatialRefSys)\n from django.utils import unittest\n \n "
        },
        {
            "sha": "a83ba8a93fcc6eccd1e084472d48862e601b7718",
            "filename": "django/contrib/gis/tests/utils.py",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/ac1b9ae6301e2c38af7951f1feb56dafc380d3e7/django%2Fcontrib%2Fgis%2Ftests%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/ac1b9ae6301e2c38af7951f1feb56dafc380d3e7/django%2Fcontrib%2Fgis%2Ftests%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Futils.py?ref=ac1b9ae6301e2c38af7951f1feb56dafc380d3e7",
            "patch": "@@ -24,3 +24,14 @@ def no_spatialite(func): return no_backend(func, 'spatialite')\n postgis = _default_db == 'postgis'\n mysql   = _default_db == 'mysql'\n spatialite = _default_db == 'spatialite'\n+\n+HAS_SPATIALREFSYS = True\n+if oracle:\n+    from django.contrib.gis.db.backends.oracle.models import SpatialRefSys\n+elif postgis:\n+    from django.contrib.gis.db.backends.postgis.models import SpatialRefSys\n+elif spatialite:\n+    from django.contrib.gis.db.backends.spatialite.models import SpatialRefSys\n+else:\n+    HAS_SPATIALREFSYS = False\n+    SpatialRefSys = None"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 16,
        "deletions": 15
    }
}