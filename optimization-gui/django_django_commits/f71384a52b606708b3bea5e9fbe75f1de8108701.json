{
    "author": "adrianholovaty",
    "message": "Fixed #15229 -- Improved URLValidator to accept ftp:// links. Thanks, codefisher and crayz_train\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15847 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f71384a52b606708b3bea5e9fbe75f1de8108701",
    "files": [
        {
            "sha": "a40af0c8ddb074cf168bf369d2ffc91991a91155",
            "filename": "django/core/validators.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/f71384a52b606708b3bea5e9fbe75f1de8108701/django%2Fcore%2Fvalidators.py",
            "raw_url": "https://github.com/django/django/raw/f71384a52b606708b3bea5e9fbe75f1de8108701/django%2Fcore%2Fvalidators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fvalidators.py?ref=f71384a52b606708b3bea5e9fbe75f1de8108701",
            "patch": "@@ -45,7 +45,7 @@ def get_method(self):\n \n class URLValidator(RegexValidator):\n     regex = re.compile(\n-        r'^https?://' # http:// or https://\n+        r'^(?:http|ftp)s?://' # http:// or https://\n         r'(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+(?:[A-Z]{2,6}\\.?|[A-Z0-9-]{2,}\\.?)|' #domain...\n         r'localhost|' #localhost...\n         r'\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})' # ...or ip"
        },
        {
            "sha": "cbd7cb8034e235ccb4db5dd1e74645adcb38f41b",
            "filename": "tests/modeltests/validation/tests.py",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/f71384a52b606708b3bea5e9fbe75f1de8108701/tests%2Fmodeltests%2Fvalidation%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/f71384a52b606708b3bea5e9fbe75f1de8108701/tests%2Fmodeltests%2Fvalidation%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fvalidation%2Ftests.py?ref=f71384a52b606708b3bea5e9fbe75f1de8108701",
            "patch": "@@ -61,6 +61,18 @@ def test_correct_url_value_passes(self):\n         mtv = ModelToValidate(number=10, name='Some Name', url='http://www.djangoproject.com/')\n         self.assertEqual(None, mtv.full_clean()) # This will fail if there's no Internet connection\n \n+    def test_correct_https_url_but_nonexisting(self):\n+        mtv = ModelToValidate(number=10, name='Some Name', url='https://www.djangoproject.com/')\n+        self.assertFieldFailsValidationWithMessage(mtv.full_clean, 'url', [u'This URL appears to be a broken link.'])\n+\n+    def test_correct_ftp_url_but_nonexisting(self):\n+        mtv = ModelToValidate(number=10, name='Some Name', url='ftp://ftp.google.com/we-love-microsoft.html')\n+        self.assertFieldFailsValidationWithMessage(mtv.full_clean, 'url', [u'This URL appears to be a broken link.'])\n+\n+    def test_correct_ftps_url_but_nonexisting(self):\n+        mtv = ModelToValidate(number=10, name='Some Name', url='ftps://ftp.google.com/we-love-microsoft.html')\n+        self.assertFieldFailsValidationWithMessage(mtv.full_clean, 'url', [u'This URL appears to be a broken link.'])\n+\n     def test_text_greater_that_charfields_max_length_raises_erros(self):\n         mtv = ModelToValidate(number=10, name='Some Name'*100)\n         self.assertFailsValidation(mtv.full_clean, ['name',])"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 13,
        "deletions": 1
    }
}