{
    "author": "claudep",
    "message": "Reverted 905e33f, now that DatabaseFeatures does not need confirm\n\nConnection.features does not need to be confirmed any more, after\ncommit aa42357, rendering obsolete the workaround when using\nTEST_MIRROR (Refs #16885, #17760).",
    "sha": "ad47364dd324508e8332ea853da59772431398aa",
    "files": [
        {
            "sha": "4f05284543504285a14c68acc3da64db424e84c7",
            "filename": "django/test/simple.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/ad47364dd324508e8332ea853da59772431398aa/django%2Ftest%2Fsimple.py",
            "raw_url": "https://github.com/django/django/raw/ad47364dd324508e8332ea853da59772431398aa/django%2Ftest%2Fsimple.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fsimple.py?ref=ad47364dd324508e8332ea853da59772431398aa",
            "patch": "@@ -320,7 +320,6 @@ def setup_databases(self, **kwargs):\n             mirrors.append((alias, connections[alias].settings_dict['NAME']))\n             connections[alias].settings_dict['NAME'] = (\n                 connections[mirror_alias].settings_dict['NAME'])\n-            connections[alias].features = connections[mirror_alias].features\n \n         return old_names, mirrors\n "
        },
        {
            "sha": "89182872bd50b3ee80d4114f74f68d0501d07e76",
            "filename": "tests/regressiontests/test_runner/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/ad47364dd324508e8332ea853da59772431398aa/tests%2Fregressiontests%2Ftest_runner%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ad47364dd324508e8332ea853da59772431398aa/tests%2Fregressiontests%2Ftest_runner%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_runner%2Ftests.py?ref=ad47364dd324508e8332ea853da59772431398aa",
            "patch": "@@ -204,28 +204,6 @@ def test_all_options_given(self):\n         self.assertOutput(out, 'bar:foo:31337')\n \n \n-class Ticket16885RegressionTests(unittest.TestCase):\n-    def test_ticket_16885(self):\n-        \"\"\"Features are also confirmed on mirrored databases.\"\"\"\n-        old_db_connections = db.connections\n-        try:\n-            db.connections = db.ConnectionHandler({\n-                'default': {\n-                    'ENGINE': 'django.db.backends.sqlite3',\n-                },\n-                'slave': {\n-                    'ENGINE': 'django.db.backends.sqlite3',\n-                    'TEST_MIRROR': 'default',\n-                },\n-            })\n-            slave = db.connections['slave']\n-            self.assertEqual(slave.features.supports_transactions, None)\n-            DjangoTestSuiteRunner(verbosity=0).setup_databases()\n-            self.assertNotEqual(slave.features.supports_transactions, None)\n-        finally:\n-            db.connections = old_db_connections\n-\n-\n class Ticket17477RegressionTests(AdminScriptTestCase):\n     def setUp(self):\n         self.write_settings('settings.py')"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 0,
        "deletions": 23
    }
}