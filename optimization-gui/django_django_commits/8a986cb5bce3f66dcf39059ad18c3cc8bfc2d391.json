{
    "author": "ramiro",
    "message": "Fixed small errors in GeoDjango tutorial, enhanced code pygmentation in install document.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17497 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "8a986cb5bce3f66dcf39059ad18c3cc8bfc2d391",
    "files": [
        {
            "sha": "d54479b2822cc788981292d464c290440c1b97e5",
            "filename": "docs/ref/contrib/gis/install.txt",
            "status": "modified",
            "additions": 38,
            "deletions": 12,
            "changes": 50,
            "blob_url": "https://github.com/django/django/blob/8a986cb5bce3f66dcf39059ad18c3cc8bfc2d391/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt",
            "raw_url": "https://github.com/django/django/raw/8a986cb5bce3f66dcf39059ad18c3cc8bfc2d391/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fgis%2Finstall.txt?ref=8a986cb5bce3f66dcf39059ad18c3cc8bfc2d391",
            "patch": "@@ -4,6 +4,8 @@\n GeoDjango Installation\n ======================\n \n+.. highlight:: console\n+\n Overview\n ========\n In general, GeoDjango installation requires:\n@@ -157,7 +159,9 @@ Troubleshooting\n Can't find GEOS Library\n ~~~~~~~~~~~~~~~~~~~~~~~\n \n-When GeoDjango can't find GEOS, this error is raised::\n+When GeoDjango can't find GEOS, this error is raised:\n+\n+.. code-block:: text\n \n     ImportError: Could not find the GEOS library (tried \"geos_c\"). Try setting GEOS_LIBRARY_PATH in your settings.\n \n@@ -174,7 +178,9 @@ If using a binary package of GEOS (e.g., on Ubuntu), you may need to :ref:`binut\n If your GEOS library is in a non-standard location, or you don't want to\n modify the system's library path then the :setting:`GEOS_LIBRARY_PATH`\n setting may be added to your Django settings file with the full path to the\n-GEOS C library.  For example::\n+GEOS C library.  For example:\n+\n+.. code-block:: python\n \n     GEOS_LIBRARY_PATH = '/home/bob/local/lib/libgeos_c.so'\n \n@@ -295,7 +301,9 @@ Can't find GDAL Library\n ~~~~~~~~~~~~~~~~~~~~~~~\n \n When GeoDjango can't find the GDAL library, the ``HAS_GDAL`` flag\n-will be false::\n+will be false:\n+\n+.. code-block:: pycon\n \n     >>> from django.contrib.gis import gdal\n     >>> gdal.HAS_GDAL\n@@ -312,7 +320,9 @@ The solution is to properly configure your :ref:`libsettings` *or* set\n If your GDAL library is in a non-standard location, or you don't want to\n modify the system's library path then the :setting:`GDAL_LIBRARY_PATH`\n setting may be added to your Django settings file with the full path to\n-the GDAL library.  For example::\n+the GDAL library.  For example:\n+\n+.. code-block:: python\n \n     GDAL_LIBRARY_PATH = '/home/sue/local/lib/libgdal.so'\n \n@@ -323,7 +333,9 @@ Can't find GDAL data files (``GDAL_DATA``)\n \n When installed from source, GDAL versions 1.5.1 and below have an autoconf bug\n that places data in the wrong location. [#]_   This can lead to error messages\n-like this::\n+like this:\n+\n+.. code-block:: text\n \n     ERROR 4: Unable to open EPSG support file gcs.csv.\n     ...\n@@ -337,7 +349,9 @@ GDAL data files before invoking Python  (typically ``/usr/local/share``; use\n     $ python manage.py shell\n \n If using Apache, you may need to add this environment variable to your configuration\n-file::\n+file:\n+\n+.. code-block:: apache\n \n     SetEnv GDAL_DATA /usr/local/share\n \n@@ -457,7 +471,9 @@ Thus, download pysqlite2 2.6, and untar::\n     $ cd pysqlite-2.6.0\n \n Next, use a text editor (e.g., ``emacs`` or ``vi``) to edit the ``setup.cfg`` file\n-to look like the following::\n+to look like the following:\n+\n+.. code-block:: ini\n \n     [build_ext]\n     #define=\n@@ -627,7 +643,9 @@ In order to conduct database transformations to the so-called \"Google\"\n projection (a spherical mercator projection used by Google Maps),\n an entry must be added to your spatial database's ``spatial_ref_sys`` table.\n Invoke the Django shell from your project and execute the\n-``add_srs_entry`` function::\n+``add_srs_entry`` function:\n+\n+.. code-block:: pycon\n \n     $ python manage shell\n     >>> from django.contrib.gis.utils import add_srs_entry\n@@ -814,7 +832,9 @@ __ http://www.kyngchaos.com/software/postgres\n \n     Use of these binaries requires Django 1.0.3 and above.  If you are\n     using a previous version of Django (like 1.0.2), then you will have\n-    to add the following in your settings::\n+    to add the following in your settings:\n+\n+    .. code-block:: python\n \n         GEOS_LIBRARY_PATH='/Library/Frameworks/GEOS.framework/GEOS'\n         GDAL_LIBRARY_PATH='/Library/Frameworks/GDAL.framework/GDAL'\n@@ -841,7 +861,9 @@ pysqlite2\n ~~~~~~~~~\n \n Follow the :ref:`pysqlite2` source install instructions, however,\n-when editing the ``setup.cfg`` use the following instead::\n+when editing the ``setup.cfg`` use the following instead:\n+\n+.. code-block:: ini\n \n     [build_ext]\n     #define=\n@@ -866,7 +888,9 @@ location available in your ``PATH``.  For example::\n     $ sudo cp spatialite /Library/Frameworks/SQLite3.framework/Programs\n \n Finally, for GeoDjango to be able to find the KyngChaos SpatiaLite library,\n-add the following to your ``settings.py``::\n+add the following to your ``settings.py``:\n+\n+.. code-block:: python\n \n     SPATIALITE_LIBRARY_PATH='/Library/Frameworks/SQLite3.framework/SQLite3'\n \n@@ -1216,7 +1240,9 @@ Modify Windows Environment\n In order to use GeoDjango, you will need to add your Python and OSGeo4W\n directories to your Windows system ``Path``, as well as create ``GDAL_DATA``\n and ``PROJ_LIB`` environment variables.  The following set of commands,\n-executable with ``cmd.exe``, will set this up::\n+executable with ``cmd.exe``, will set this up:\n+\n+.. code-block:: bat\n \n      set OSGEO4W_ROOT=C:\\OSGeo4W\n      set PYTHON_ROOT=C:\\Python27"
        },
        {
            "sha": "eebd50a1afc5a208611840a98f53337deeb1bb78",
            "filename": "docs/ref/contrib/gis/tutorial.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 12,
            "changes": 25,
            "blob_url": "https://github.com/django/django/blob/8a986cb5bce3f66dcf39059ad18c3cc8bfc2d391/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt",
            "raw_url": "https://github.com/django/django/raw/8a986cb5bce3f66dcf39059ad18c3cc8bfc2d391/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt?ref=8a986cb5bce3f66dcf39059ad18c3cc8bfc2d391",
            "patch": "@@ -284,7 +284,7 @@ This management command should produce the following output:\n .. code-block:: sql\n \n     BEGIN;\n-    CREATE TABLE \"world_worldborders\" (\n+    CREATE TABLE \"world_worldborder\" (\n         \"id\" serial NOT NULL PRIMARY KEY,\n         \"name\" varchar(50) NOT NULL,\n         \"area\" integer NOT NULL,\n@@ -299,16 +299,16 @@ This management command should produce the following output:\n         \"lat\" double precision NOT NULL\n     )\n     ;\n-    SELECT AddGeometryColumn('world_worldborders', 'mpoly', 4326, 'MULTIPOLYGON', 2);\n-    ALTER TABLE \"world_worldborders\" ALTER \"mpoly\" SET NOT NULL;\n-    CREATE INDEX \"world_worldborders_mpoly_id\" ON \"world_worldborders\" USING GIST ( \"mpoly\" GIST_GEOMETRY_OPS );\n+    SELECT AddGeometryColumn('world_worldborder', 'mpoly', 4326, 'MULTIPOLYGON', 2);\n+    ALTER TABLE \"world_worldborder\" ALTER \"mpoly\" SET NOT NULL;\n+    CREATE INDEX \"world_worldborder_mpoly_id\" ON \"world_worldborder\" USING GIST ( \"mpoly\" GIST_GEOMETRY_OPS );\n     COMMIT;\n \n If satisfied, you may then create this table in the database by running the\n ``syncdb`` management command::\n \n     $ python manage.py syncdb\n-    Creating table world_worldborders\n+    Creating table world_worldborder\n     Installing custom SQL for world.WorldBorder model\n \n The ``syncdb`` command may also prompt you to create an admin user; go ahead\n@@ -547,7 +547,8 @@ and mapping dictionary created above, automatically:\n \n .. code-block:: bash\n \n-    $ python manage.py ogrinspect world/data/TM_WORLD_BORDERS-0.3.shp WorldBorder --srid=4326 --mapping --multi\n+    $ python manage.py ogrinspect world/data/TM_WORLD_BORDERS-0.3.shp WorldBorder \\\n+        --srid=4326 --mapping --multi\n \n A few notes about the command-line options given above:\n \n@@ -661,12 +662,12 @@ of abstraction::\n \n     >>> qs = WorldBorder.objects.filter(mpoly__intersects=pnt)\n     >>> print qs.query # Generating the SQL\n-    SELECT \"world_worldborders\".\"id\", \"world_worldborders\".\"name\", \"world_worldborders\".\"area\",\n-    \"world_worldborders\".\"pop2005\", \"world_worldborders\".\"fips\", \"world_worldborders\".\"iso2\",\n-    \"world_worldborders\".\"iso3\", \"world_worldborders\".\"un\", \"world_worldborders\".\"region\",\n-    \"world_worldborders\".\"subregion\", \"world_worldborders\".\"lon\", \"world_worldborders\".\"lat\",\n-    \"world_worldborders\".\"mpoly\" FROM \"world_worldborders\"\n-    WHERE ST_Intersects(\"world_worldborders\".\"mpoly\", ST_Transform(%s, 4326))\n+    SELECT \"world_worldborder\".\"id\", \"world_worldborder\".\"name\", \"world_worldborder\".\"area\",\n+    \"world_worldborder\".\"pop2005\", \"world_worldborder\".\"fips\", \"world_worldborder\".\"iso2\",\n+    \"world_worldborder\".\"iso3\", \"world_worldborder\".\"un\", \"world_worldborder\".\"region\",\n+    \"world_worldborder\".\"subregion\", \"world_worldborder\".\"lon\", \"world_worldborder\".\"lat\",\n+    \"world_worldborder\".\"mpoly\" FROM \"world_worldborder\"\n+    WHERE ST_Intersects(\"world_worldborder\".\"mpoly\", ST_Transform(%s, 4326))\n     >>> qs # printing evaluates the queryset\n     [<WorldBorder: United States>]\n "
        }
    ],
    "stats": {
        "total": 75,
        "additions": 51,
        "deletions": 24
    }
}