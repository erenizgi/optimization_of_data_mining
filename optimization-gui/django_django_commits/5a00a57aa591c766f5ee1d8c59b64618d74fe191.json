{
    "author": "ptone",
    "message": "Fixed #19240 -- include pagination error details in ListView 404\n\nThanks to seawolf for the patch",
    "sha": "5a00a57aa591c766f5ee1d8c59b64618d74fe191",
    "files": [
        {
            "sha": "946dad69f5697ff274e7f244c03d5bce5cacf7e8",
            "filename": "django/views/generic/list.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/5a00a57aa591c766f5ee1d8c59b64618d74fe191/django%2Fviews%2Fgeneric%2Flist.py",
            "raw_url": "https://github.com/django/django/raw/5a00a57aa591c766f5ee1d8c59b64618d74fe191/django%2Fviews%2Fgeneric%2Flist.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Flist.py?ref=5a00a57aa591c766f5ee1d8c59b64618d74fe191",
            "patch": "@@ -50,9 +50,10 @@ def paginate_queryset(self, queryset, page_size):\n         try:\n             page = paginator.page(page_number)\n             return (paginator, page, page.object_list, page.has_other_pages())\n-        except InvalidPage:\n-            raise Http404(_('Invalid page (%(page_number)s)') % {\n-                                'page_number': page_number\n+        except InvalidPage as e:\n+            raise Http404(_('Invalid page (%(page_number)s): %(message)s') % {\n+                                'page_number': page_number,\n+                                'message': e.message,\n             })\n \n     def get_paginate_by(self, queryset):"
        },
        {
            "sha": "6c73138043e0fb1a15784dec0fb42017bd3febf3",
            "filename": "tests/regressiontests/generic_views/list.py",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/5a00a57aa591c766f5ee1d8c59b64618d74fe191/tests%2Fregressiontests%2Fgeneric_views%2Flist.py",
            "raw_url": "https://github.com/django/django/raw/5a00a57aa591c766f5ee1d8c59b64618d74fe191/tests%2Fregressiontests%2Fgeneric_views%2Flist.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Flist.py?ref=5a00a57aa591c766f5ee1d8c59b64618d74fe191",
            "patch": "@@ -2,6 +2,7 @@\n \n from django.core.exceptions import ImproperlyConfigured\n from django.test import TestCase\n+from django.test.utils import override_settings\n from django.views.generic.base import View\n \n from .models import Author, Artist\n@@ -171,8 +172,17 @@ def test_paginated_list_view_does_not_load_entire_table(self):\n         with self.assertNumQueries(3):\n             self.client.get('/list/authors/notempty/paginated/')\n \n+    @override_settings(DEBUG=True)\n+    def test_paginated_list_view_returns_useful_message_on_invalid_page(self):\n+        # test for #19240\n+        # tests that source exception's message is included in page\n+        self._make_authors(1)\n+        res = self.client.get('/list/authors/paginated/2/')\n+        self.assertEqual(res.status_code, 404)\n+        self.assertEqual(res.context.get('reason'),\n+                \"Invalid page (2): That page contains no results\")\n+\n     def _make_authors(self, n):\n         Author.objects.all().delete()\n         for i in range(n):\n             Author.objects.create(name='Author %02i' % i, slug='a%s' % i)\n-"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 15,
        "deletions": 4
    }
}