{
    "author": "andrewgodwin",
    "message": "Fix bug in get_indexes affecting the tests",
    "sha": "c5e2ecae6949d4e89530610d768bbbd563ddc19b",
    "files": [
        {
            "sha": "477478ca9dd11a40041c4e915614b045328dd22c",
            "filename": "django/db/backends/mysql/introspection.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/c5e2ecae6949d4e89530610d768bbbd563ddc19b/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/c5e2ecae6949d4e89530610d768bbbd563ddc19b/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py?ref=c5e2ecae6949d4e89530610d768bbbd563ddc19b",
            "patch": "@@ -103,6 +103,7 @@ def get_indexes(self, cursor, table_name):\n                 continue\n             if row[4] not in indexes:\n                 indexes[row[4]] = {'primary_key': False, 'unique': False}\n+            # It's possible to have the unique and PK constraints in separate indexes.\n             if row[2] == 'PRIMARY':\n                 indexes[row[4]]['primary_key'] = True\n             if not bool(row[1]):"
        },
        {
            "sha": "d43b95406ccf1e522462b63cedaf19206604d447",
            "filename": "django/db/backends/postgresql_psycopg2/introspection.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/c5e2ecae6949d4e89530610d768bbbd563ddc19b/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/c5e2ecae6949d4e89530610d768bbbd563ddc19b/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fintrospection.py?ref=c5e2ecae6949d4e89530610d768bbbd563ddc19b",
            "patch": "@@ -86,7 +86,13 @@ def get_indexes(self, cursor, table_name):\n             # Here, we skip any indexes across multiple fields.\n             if ' ' in row[1]:\n                 continue\n-            indexes[row[0]] = {'primary_key': row[3], 'unique': row[2]}\n+            if row[0] not in indexes:\n+                indexes[row[0]] = {'primary_key': False, 'unique': False}\n+            # It's possible to have the unique and PK constraints in separate indexes.\n+            if row[3]:\n+                indexes[row[0]]['primary_key'] = True\n+            if row[2]:\n+                indexes[row[0]]['unique'] = True\n         return indexes\n \n     def get_constraints(self, cursor, table_name):"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 8,
        "deletions": 1
    }
}