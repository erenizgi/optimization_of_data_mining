{
    "author": "claudep",
    "message": "Fixed #19192 -- Allowed running tests with dummy db backend\n\nThanks Simon Charette for the initial patch, and Jan Bednařík for\nhis work on the ticket.",
    "sha": "b740da3504ea3b9c841f5a9eb14191a0b5410565",
    "files": [
        {
            "sha": "4b6636314d9cc8304c0fddd422b22c62a4f5eed2",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/b740da3504ea3b9c841f5a9eb14191a0b5410565/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/b740da3504ea3b9c841f5a9eb14191a0b5410565/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=b740da3504ea3b9c841f5a9eb14191a0b5410565",
            "patch": "@@ -126,6 +126,7 @@ answer newbie questions, and generally made Django that much better:\n     Chris Chamberlin <dja@cdc.msbx.net>\n     Amit Chakradeo <http://amit.chakradeo.net/>\n     ChaosKCW\n+    Simon Charette <charette.s@gmail.com>\n     Kowito Charoenratchatabhan <kowito@felspar.com>\n     Sengtha Chay <sengtha@e-khmer.com>\n     ivan.chelubeev@gmail.com"
        },
        {
            "sha": "b648aae9c9c34dc8fd0ec1e2a2c28426a966cff9",
            "filename": "django/db/backends/dummy/base.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/b740da3504ea3b9c841f5a9eb14191a0b5410565/django%2Fdb%2Fbackends%2Fdummy%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/b740da3504ea3b9c841f5a9eb14191a0b5410565/django%2Fdb%2Fbackends%2Fdummy%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fdummy%2Fbase.py?ref=b740da3504ea3b9c841f5a9eb14191a0b5410565",
            "patch": "@@ -31,6 +31,10 @@ class DatabaseOperations(BaseDatabaseOperations):\n class DatabaseClient(BaseDatabaseClient):\n     runshell = complain\n \n+class DatabaseCreation(BaseDatabaseCreation):\n+    create_test_db = ignore\n+    destroy_test_db = ignore\n+\n class DatabaseIntrospection(BaseDatabaseIntrospection):\n     get_table_list = complain\n     get_table_description = complain\n@@ -64,6 +68,6 @@ def __init__(self, *args, **kwargs):\n         self.features = BaseDatabaseFeatures(self)\n         self.ops = DatabaseOperations(self)\n         self.client = DatabaseClient(self)\n-        self.creation = BaseDatabaseCreation(self)\n+        self.creation = DatabaseCreation(self)\n         self.introspection = DatabaseIntrospection(self)\n         self.validation = BaseDatabaseValidation(self)"
        },
        {
            "sha": "5ef4d5537de2f1bb13e30423a5c0f88c29254f2f",
            "filename": "tests/regressiontests/test_runner/tests.py",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/b740da3504ea3b9c841f5a9eb14191a0b5410565/tests%2Fregressiontests%2Ftest_runner%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/b740da3504ea3b9c841f5a9eb14191a0b5410565/tests%2Fregressiontests%2Ftest_runner%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_runner%2Ftests.py?ref=b740da3504ea3b9c841f5a9eb14191a0b5410565",
            "patch": "@@ -261,6 +261,24 @@ def test_transaction_support(self):\n                 db.connections = old_db_connections\n \n \n+class DummyBackendTest(unittest.TestCase):\n+    def test_setup_databases(self):\n+        \"\"\"\n+        Test that setup_databases() doesn't fail with dummy database backend.\n+        \"\"\"\n+        runner = DjangoTestSuiteRunner(verbosity=0)\n+        old_db_connections = db.connections\n+        try:\n+            db.connections = db.ConnectionHandler({})\n+            old_config = runner.setup_databases()\n+            runner.teardown_databases(old_config)\n+        except Exception as e:\n+            self.fail(\"setup_databases/teardown_databases unexpectedly raised \"\n+                      \"an error: %s\" % e)\n+        finally:\n+            db.connections = old_db_connections\n+\n+\n class AutoIncrementResetTest(TransactionTestCase):\n     \"\"\"\n     Here we test creating the same model two times in different test methods,"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 24,
        "deletions": 1
    }
}