{
    "author": "jbronn",
    "message": "Fixed #16864 -- WKT regex now allows negative SRIDs.  Thanks, Marcel Dancak for bug report and initial patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16843 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f97a574196102ef2479da4e519d7cffc7a5fdf6c",
    "files": [
        {
            "sha": "22d16cb4c8827ce0295fe4595a5206898bfbf6f3",
            "filename": "django/contrib/gis/geometry/regex.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/f97a574196102ef2479da4e519d7cffc7a5fdf6c/django%2Fcontrib%2Fgis%2Fgeometry%2Fregex.py",
            "raw_url": "https://github.com/django/django/raw/f97a574196102ef2479da4e519d7cffc7a5fdf6c/django%2Fcontrib%2Fgis%2Fgeometry%2Fregex.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeometry%2Fregex.py?ref=f97a574196102ef2479da4e519d7cffc7a5fdf6c",
            "patch": "@@ -4,7 +4,7 @@\n # to prevent potentially malicious input from reaching the underlying C\n # library.  Not a substitute for good Web security programming practices.\n hex_regex = re.compile(r'^[0-9A-F]+$', re.I)\n-wkt_regex = re.compile(r'^(SRID=(?P<srid>\\d+);)?'\n+wkt_regex = re.compile(r'^(SRID=(?P<srid>\\-?\\d+);)?'\n                        r'(?P<wkt>'\n                        r'(?P<type>POINT|LINESTRING|LINEARRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)'\n                        r'[ACEGIMLONPSRUTYZ\\d,\\.\\-\\(\\) ]+)$',"
        },
        {
            "sha": "eb13a62cb98c185c79daf75a8b4f86df6fe90755",
            "filename": "django/contrib/gis/geos/tests/test_geos.py",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/f97a574196102ef2479da4e519d7cffc7a5fdf6c/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "raw_url": "https://github.com/django/django/raw/f97a574196102ef2479da4e519d7cffc7a5fdf6c/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Ftests%2Ftest_geos.py?ref=f97a574196102ef2479da4e519d7cffc7a5fdf6c",
            "patch": "@@ -182,13 +182,14 @@ def test01g_create_wkb(self):\n \n     def test01h_ewkt(self):\n         \"Testing EWKT.\"\n-        srid = 32140\n-        for p in self.geometries.polygons:\n-            ewkt = 'SRID=%d;%s' % (srid, p.wkt)\n-            poly = fromstr(ewkt)\n-            self.assertEqual(srid, poly.srid)\n-            self.assertEqual(srid, poly.shell.srid)\n-            self.assertEqual(srid, fromstr(poly.ewkt).srid) # Checking export\n+        srids = (-1, 32140)\n+        for srid in srids:\n+            for p in self.geometries.polygons:\n+                ewkt = 'SRID=%d;%s' % (srid, p.wkt)\n+                poly = fromstr(ewkt)\n+                self.assertEqual(srid, poly.srid)\n+                self.assertEqual(srid, poly.shell.srid)\n+                self.assertEqual(srid, fromstr(poly.ewkt).srid) # Checking export\n \n     def test01i_json(self):\n         \"Testing GeoJSON input/output (via GDAL).\""
        }
    ],
    "stats": {
        "total": 17,
        "additions": 9,
        "deletions": 8
    }
}