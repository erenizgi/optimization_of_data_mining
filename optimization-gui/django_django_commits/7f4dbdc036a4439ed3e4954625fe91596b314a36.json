{
    "author": "akaariai",
    "message": "Revert \"Splitted expressions tests into smaller methods\"\n\nThis reverts commit c2532825dbe2a422bbce67285637febb0ef9c9f1.",
    "sha": "7f4dbdc036a4439ed3e4954625fe91596b314a36",
    "files": [
        {
            "sha": "14419ec55bf9e48cafd7e76872a53e9b9177bc48",
            "filename": "tests/modeltests/expressions/tests.py",
            "status": "modified",
            "additions": 15,
            "deletions": 28,
            "changes": 43,
            "blob_url": "https://github.com/django/django/blob/7f4dbdc036a4439ed3e4954625fe91596b314a36/tests%2Fmodeltests%2Fexpressions%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/7f4dbdc036a4439ed3e4954625fe91596b314a36/tests%2Fmodeltests%2Fexpressions%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fexpressions%2Ftests.py?ref=7f4dbdc036a4439ed3e4954625fe91596b314a36",
            "patch": "@@ -9,7 +9,7 @@\n \n \n class ExpressionsTests(TestCase):\n-    def setUp(self):\n+    def test_filter(self):\n         Company.objects.create(\n             name=\"Example Inc.\", num_employees=2300, num_chairs=5, is_large=False,\n             ceo=Employee.objects.create(firstname=\"Joe\", lastname=\"Smith\")\n@@ -23,8 +23,6 @@ def setUp(self):\n             ceo=Employee.objects.create(firstname=\"Max\", lastname=\"Mustermann\")\n         )\n \n-\n-    def test_filter(self):\n         company_query = Company.objects.values(\n             \"name\", \"num_employees\", \"num_chairs\", \"is_large\"\n         ).order_by(\n@@ -160,13 +158,6 @@ def test_filter(self):\n             ],\n             lambda o: o,\n         )\n-\n-    def test_comparisons(self):\n-        company_query = Company.objects.values(\n-            \"name\", \"num_employees\", \"num_chairs\", \"is_large\"\n-        ).order_by(\n-            \"name\", \"num_employees\", \"num_chairs\", \"is_large\"\n-        )\n         # The comparison operators and the bitwise unary not can be used\n         # to assign to boolean fields\n         for expression in (\n@@ -189,19 +180,19 @@ def test_comparisons(self):\n             self.assertQuerysetEqual(\n                 company_query, [\n                     {\n-                        'num_chairs': 5,\n+                        'num_chairs': 5294600,\n                         'name': 'Example Inc.',\n                         'num_employees': 2300,\n                         'is_large': True\n                     },\n                     {\n-                        'num_chairs': 4,\n+                        'num_chairs': 15,\n                         'name': 'Foobar Ltd.',\n                         'num_employees': 3,\n                         'is_large': False\n                     },\n                     {\n-                        'num_chairs': 1,\n+                        'num_chairs': 1088,\n                         'name': 'Test GmbH',\n                         'num_employees': 32,\n                         'is_large': False\n@@ -239,39 +230,35 @@ def test_comparisons(self):\n             lambda c: six.text_type(c.point_of_contact),\n         )\n \n-    def test_joins(self):\n         c = Company.objects.all()[0]\n-        c.point_of_contact = Employee.objects.create(\n-            firstname=\"Guido\", lastname=\"van Rossum\")\n-        old_ceo = c.ceo\n-        c.ceo = c.point_of_contact\n+        c.point_of_contact = Employee.objects.create(firstname=\"Guido\", lastname=\"van Rossum\")\n         c.save()\n \n         # F Expressions can also span joins\n         self.assertQuerysetEqual(\n-            Company.objects.filter(\n-                ceo__firstname=F(\"point_of_contact__firstname\")),\n-            [\n-                \"Example Inc.\",\n+            Company.objects.filter(ceo__firstname=F(\"point_of_contact__firstname\")), [\n+                \"Foobar Ltd.\",\n+                \"Test GmbH\",\n             ],\n             lambda c: c.name\n         )\n-        c.ceo = old_ceo\n-        c.save()\n-        # Guido is point of contanct but not CEO. For the null cases we do\n-        # not generate a match.\n+\n         Company.objects.exclude(\n             ceo__firstname=F(\"point_of_contact__firstname\")\n         ).update(name=\"foo\")\n-        self.assertEqual(Company.objects.filter(name=\"foo\").count(), 1)\n+        self.assertEqual(\n+            Company.objects.exclude(\n+                ceo__firstname=F('point_of_contact__firstname')\n+            ).get().name,\n+            \"foo\",\n+        )\n \n         self.assertRaises(FieldError,\n             lambda: Company.objects.exclude(\n                 ceo__firstname=F('point_of_contact__firstname')\n             ).update(name=F('point_of_contact__lastname'))\n         )\n \n-    def test_save(self):\n         # F expressions can be used to update attributes on single objects\n         test_gmbh = Company.objects.get(name=\"Test GmbH\")\n         self.assertEqual(test_gmbh.num_employees, 32)"
        }
    ],
    "stats": {
        "total": 43,
        "additions": 15,
        "deletions": 28
    }
}