{
    "author": "akaariai",
    "message": "Splitted expressions tests into smaller methods",
    "sha": "c2532825dbe2a422bbce67285637febb0ef9c9f1",
    "files": [
        {
            "sha": "5898eac7bbb9ce3e9f2a9ee44bfcbb9261f3b7b1",
            "filename": "tests/modeltests/expressions/tests.py",
            "status": "modified",
            "additions": 28,
            "deletions": 15,
            "changes": 43,
            "blob_url": "https://github.com/django/django/blob/c2532825dbe2a422bbce67285637febb0ef9c9f1/tests%2Fmodeltests%2Fexpressions%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c2532825dbe2a422bbce67285637febb0ef9c9f1/tests%2Fmodeltests%2Fexpressions%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fexpressions%2Ftests.py?ref=c2532825dbe2a422bbce67285637febb0ef9c9f1",
            "patch": "@@ -9,7 +9,7 @@\n \n \n class ExpressionsTests(TestCase):\n-    def test_filter(self):\n+    def setUp(self):\n         Company.objects.create(\n             name=\"Example Inc.\", num_employees=2300, num_chairs=5, is_large=False,\n             ceo=Employee.objects.create(firstname=\"Joe\", lastname=\"Smith\")\n@@ -23,6 +23,8 @@ def test_filter(self):\n             ceo=Employee.objects.create(firstname=\"Max\", lastname=\"Mustermann\")\n         )\n \n+\n+    def test_filter(self):\n         company_query = Company.objects.values(\n             \"name\", \"num_employees\", \"num_chairs\", \"is_large\"\n         ).order_by(\n@@ -158,6 +160,13 @@ def test_filter(self):\n             ],\n             lambda o: o,\n         )\n+\n+    def test_comparisons(self):\n+        company_query = Company.objects.values(\n+            \"name\", \"num_employees\", \"num_chairs\", \"is_large\"\n+        ).order_by(\n+            \"name\", \"num_employees\", \"num_chairs\", \"is_large\"\n+        )\n         # The comparison operators and the bitwise unary not can be used\n         # to assign to boolean fields\n         for expression in (\n@@ -180,19 +189,19 @@ def test_filter(self):\n             self.assertQuerysetEqual(\n                 company_query, [\n                     {\n-                        'num_chairs': 5294600,\n+                        'num_chairs': 5,\n                         'name': 'Example Inc.',\n                         'num_employees': 2300,\n                         'is_large': True\n                     },\n                     {\n-                        'num_chairs': 15,\n+                        'num_chairs': 4,\n                         'name': 'Foobar Ltd.',\n                         'num_employees': 3,\n                         'is_large': False\n                     },\n                     {\n-                        'num_chairs': 1088,\n+                        'num_chairs': 1,\n                         'name': 'Test GmbH',\n                         'num_employees': 32,\n                         'is_large': False\n@@ -230,35 +239,39 @@ def test_filter(self):\n             lambda c: six.text_type(c.point_of_contact),\n         )\n \n+    def test_joins(self):\n         c = Company.objects.all()[0]\n-        c.point_of_contact = Employee.objects.create(firstname=\"Guido\", lastname=\"van Rossum\")\n+        c.point_of_contact = Employee.objects.create(\n+            firstname=\"Guido\", lastname=\"van Rossum\")\n+        old_ceo = c.ceo\n+        c.ceo = c.point_of_contact\n         c.save()\n \n         # F Expressions can also span joins\n         self.assertQuerysetEqual(\n-            Company.objects.filter(ceo__firstname=F(\"point_of_contact__firstname\")), [\n-                \"Foobar Ltd.\",\n-                \"Test GmbH\",\n+            Company.objects.filter(\n+                ceo__firstname=F(\"point_of_contact__firstname\")),\n+            [\n+                \"Example Inc.\",\n             ],\n             lambda c: c.name\n         )\n-\n+        c.ceo = old_ceo\n+        c.save()\n+        # Guido is point of contanct but not CEO. For the null cases we do\n+        # not generate a match.\n         Company.objects.exclude(\n             ceo__firstname=F(\"point_of_contact__firstname\")\n         ).update(name=\"foo\")\n-        self.assertEqual(\n-            Company.objects.exclude(\n-                ceo__firstname=F('point_of_contact__firstname')\n-            ).get().name,\n-            \"foo\",\n-        )\n+        self.assertEqual(Company.objects.filter(name=\"foo\").count(), 1)\n \n         self.assertRaises(FieldError,\n             lambda: Company.objects.exclude(\n                 ceo__firstname=F('point_of_contact__firstname')\n             ).update(name=F('point_of_contact__lastname'))\n         )\n \n+    def test_save(self):\n         # F expressions can be used to update attributes on single objects\n         test_gmbh = Company.objects.get(name=\"Test GmbH\")\n         self.assertEqual(test_gmbh.num_employees, 32)"
        }
    ],
    "stats": {
        "total": 43,
        "additions": 28,
        "deletions": 15
    }
}