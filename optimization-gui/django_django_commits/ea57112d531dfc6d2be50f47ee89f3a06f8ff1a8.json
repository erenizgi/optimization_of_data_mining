{
    "author": "aaugustin",
    "message": "Reverted 6a64822bf4632707212314a25a843c862bdb3874.\n\nThis commit caused every test that does two or more assertContains to\nfail, because of #6527. It also made HttpResponse non-pickleable.\n\nRefs #13222.",
    "sha": "ea57112d531dfc6d2be50f47ee89f3a06f8ff1a8",
    "files": [
        {
            "sha": "4a5c479419334d939e0d6202965e79b5b35ce318",
            "filename": "django/http/response.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ea57112d531dfc6d2be50f47ee89f3a06f8ff1a8/django%2Fhttp%2Fresponse.py",
            "raw_url": "https://github.com/django/django/raw/ea57112d531dfc6d2be50f47ee89f3a06f8ff1a8/django%2Fhttp%2Fresponse.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2Fresponse.py?ref=ea57112d531dfc6d2be50f47ee89f3a06f8ff1a8",
            "patch": "@@ -260,9 +260,9 @@ def content(self, value):\n         else:\n             self._container = [value]\n             self._base_content_is_iter = False\n-        self._iterator = iter(self._container)\n \n     def __iter__(self):\n+        self._iterator = iter(self._container)\n         return self\n \n     def __next__(self):\n@@ -284,7 +284,7 @@ def write(self, content):\n     def tell(self):\n         if self._base_content_is_iter:\n             raise Exception(\"This %s instance cannot tell its position\" % self.__class__.__name__)\n-        return len(self.content)\n+        return sum([len(chunk) for chunk in self])\n \n \n class StreamingHttpResponse(HttpResponseBase):"
        },
        {
            "sha": "bfb4ae1fd5520e4662aaab6a6372dcedc9cc06e4",
            "filename": "tests/regressiontests/httpwrappers/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/ea57112d531dfc6d2be50f47ee89f3a06f8ff1a8/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ea57112d531dfc6d2be50f47ee89f3a06f8ff1a8/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py?ref=ea57112d531dfc6d2be50f47ee89f3a06f8ff1a8",
            "patch": "@@ -330,13 +330,6 @@ def test_iter_content(self):\n         self.assertRaises(UnicodeEncodeError,\n                           getattr, r, 'content')\n \n-    def test_iterator_isnt_rewound(self):\n-        # Regression test for #13222\n-        r = HttpResponse('abc')\n-        i = iter(r)\n-        self.assertEqual(list(i), [b'abc'])\n-        self.assertEqual(list(i), [])\n-\n     def test_file_interface(self):\n         r = HttpResponse()\n         r.write(b\"hello\")"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 2,
        "deletions": 9
    }
}