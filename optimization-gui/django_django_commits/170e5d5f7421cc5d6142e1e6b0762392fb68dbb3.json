{
    "author": "jezdez",
    "message": "Fixed #17458 -- Marked Http404 error messages for translation. Thanks, Claude Paroz.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17447 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "170e5d5f7421cc5d6142e1e6b0762392fb68dbb3",
    "files": [
        {
            "sha": "8d8e1c7a3e3841883554845e578a309654cfbb09",
            "filename": "django/contrib/contenttypes/views.py",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/170e5d5f7421cc5d6142e1e6b0762392fb68dbb3/django%2Fcontrib%2Fcontenttypes%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/170e5d5f7421cc5d6142e1e6b0762392fb68dbb3/django%2Fcontrib%2Fcontenttypes%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcontenttypes%2Fviews.py?ref=170e5d5f7421cc5d6142e1e6b0762392fb68dbb3",
            "patch": "@@ -2,6 +2,7 @@\n from django.contrib.contenttypes.models import ContentType\n from django.contrib.sites.models import Site, get_current_site\n from django.core.exceptions import ObjectDoesNotExist\n+from django.utils.translation import ugettext as _\n \n def shortcut(request, content_type_id, object_id):\n     \"\"\"\n@@ -11,17 +12,18 @@ def shortcut(request, content_type_id, object_id):\n     try:\n         content_type = ContentType.objects.get(pk=content_type_id)\n         if not content_type.model_class():\n-            raise http.Http404(\"Content type %s object has no associated model\"\n-                               % content_type_id)\n+            raise http.Http404(_(u\"Content type %(ct_id)s object has no associated model\") %\n+                               {'ct_id': content_type_id})\n         obj = content_type.get_object_for_this_type(pk=object_id)\n     except (ObjectDoesNotExist, ValueError):\n-        raise http.Http404(\"Content type %s object %s doesn't exist\"\n-                           % (content_type_id, object_id))\n+        raise http.Http404(_(u\"Content type %(ct_id)s object %(obj_id)s doesn't exist\") %\n+                           {'ct_id': content_type_id, 'obj_id': object_id})\n+\n     try:\n         get_absolute_url = obj.get_absolute_url\n     except AttributeError:\n-        raise http.Http404(\"%s objects don't have a get_absolute_url() method\"\n-                           % content_type.name)\n+        raise http.Http404(_(\"%(ct_name)s objects don't have a get_absolute_url() method\") %\n+                           {'ct_name': content_type.name})\n     absurl = get_absolute_url()\n \n     # Try to figure out the object's domain, so we can do a cross-site redirect"
        },
        {
            "sha": "3a9acad7b04b9cc8691458492296c277076cfae7",
            "filename": "django/contrib/gis/sitemaps/views.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/170e5d5f7421cc5d6142e1e6b0762392fb68dbb3/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/170e5d5f7421cc5d6142e1e6b0762392fb68dbb3/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fsitemaps%2Fviews.py?ref=170e5d5f7421cc5d6142e1e6b0762392fb68dbb3",
            "patch": "@@ -7,6 +7,7 @@\n from django.db import connections, DEFAULT_DB_ALIAS\n from django.db.models import get_model\n from django.utils.encoding import smart_str\n+from django.utils.translation import ugettext as _\n \n from django.contrib.gis.shortcuts import render_to_kml, render_to_kmz\n \n@@ -40,7 +41,7 @@ def sitemap(request, sitemaps, section=None):\n     maps, urls = [], []\n     if section is not None:\n         if section not in sitemaps:\n-            raise Http404(\"No sitemap available for section: %r\" % section)\n+            raise Http404(_(u\"No sitemap available for section: %r\") % section)\n         maps.append(sitemaps[section])\n     else:\n         maps = sitemaps.values()\n@@ -54,9 +55,9 @@ def sitemap(request, sitemaps, section=None):\n             else:\n                 urls.extend(site.get_urls(page=page, site=current_site))\n         except EmptyPage:\n-            raise Http404(\"Page %s empty\" % page)\n+            raise Http404(_(u\"Page %s empty\") % page)\n         except PageNotAnInteger:\n-            raise Http404(\"No page '%s'\" % page)\n+            raise Http404(_(u\"No page '%s'\") % page)\n     xml = smart_str(loader.render_to_string('gis/sitemaps/geo_sitemap.xml', {'urlset': urls}))\n     return HttpResponse(xml, content_type='application/xml')\n "
        },
        {
            "sha": "fc51a0bf3aa766a9bf8dca3dfe985753cb70f035",
            "filename": "django/contrib/gis/views.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/170e5d5f7421cc5d6142e1e6b0762392fb68dbb3/django%2Fcontrib%2Fgis%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/170e5d5f7421cc5d6142e1e6b0762392fb68dbb3/django%2Fcontrib%2Fgis%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fviews.py?ref=170e5d5f7421cc5d6142e1e6b0762392fb68dbb3",
            "patch": "@@ -1,9 +1,10 @@\n from django.http import Http404\n+from django.utils.translation import ugettext as _\n \n def feed(request, url, feed_dict=None):\n     \"\"\"Provided for backwards compatibility.\"\"\"\n     if not feed_dict:\n-        raise Http404(\"No feeds are registered.\")\n+        raise Http404(_(u\"No feeds are registered.\"))\n \n     try:\n         slug, param = url.split('/', 1)\n@@ -13,7 +14,7 @@ def feed(request, url, feed_dict=None):\n     try:\n         f = feed_dict[slug]\n     except KeyError:\n-        raise Http404(\"Slug %r isn't registered.\" % slug)\n+        raise Http404(_(u\"Slug %r isn't registered.\") % slug)\n \n     instance = f()\n     instance.feed_url = getattr(f, 'feed_url', None) or request.path"
        },
        {
            "sha": "f2279802fc708371944c630ed3c4b956bdad419a",
            "filename": "django/views/static.py",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/170e5d5f7421cc5d6142e1e6b0762392fb68dbb3/django%2Fviews%2Fstatic.py",
            "raw_url": "https://github.com/django/django/raw/170e5d5f7421cc5d6142e1e6b0762392fb68dbb3/django%2Fviews%2Fstatic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fstatic.py?ref=170e5d5f7421cc5d6142e1e6b0762392fb68dbb3",
            "patch": "@@ -14,6 +14,7 @@\n from django.http import Http404, HttpResponse, HttpResponseRedirect, HttpResponseNotModified\n from django.template import loader, Template, Context, TemplateDoesNotExist\n from django.utils.http import http_date, parse_http_date\n+from django.utils.translation import ugettext as _, ugettext_noop\n \n def serve(request, path, document_root=None, show_indexes=False):\n     \"\"\"\n@@ -48,9 +49,9 @@ def serve(request, path, document_root=None, show_indexes=False):\n     if os.path.isdir(fullpath):\n         if show_indexes:\n             return directory_index(newpath, fullpath)\n-        raise Http404(\"Directory indexes are not allowed here.\")\n+        raise Http404(_(u\"Directory indexes are not allowed here.\"))\n     if not os.path.exists(fullpath):\n-        raise Http404('\"%s\" does not exist' % fullpath)\n+        raise Http404(_(u'\"%s\" does not exist') % fullpath)\n     # Respect the If-Modified-Since header.\n     statobj = os.stat(fullpath)\n     mimetype, encoding = mimetypes.guess_type(fullpath)\n@@ -69,16 +70,17 @@ def serve(request, path, document_root=None, show_indexes=False):\n \n \n DEFAULT_DIRECTORY_INDEX_TEMPLATE = \"\"\"\n+{% load i18n %}\n <!DOCTYPE html>\n <html lang=\"en\">\n   <head>\n     <meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\" />\n     <meta http-equiv=\"Content-Language\" content=\"en-us\" />\n     <meta name=\"robots\" content=\"NONE,NOARCHIVE\" />\n-    <title>Index of {{ directory }}</title>\n+    <title>{% blocktrans %}Index of {{ directory }}{% endblocktrans %}</title>\n   </head>\n   <body>\n-    <h1>Index of {{ directory }}</h1>\n+    <h1>{% blocktrans %}Index of {{ directory }}{% endblocktrans %}</h1>\n     <ul>\n       {% ifnotequal directory \"/\" %}\n       <li><a href=\"../\">../</a></li>\n@@ -90,6 +92,7 @@ def serve(request, path, document_root=None, show_indexes=False):\n   </body>\n </html>\n \"\"\"\n+template_translatable = ugettext_noop(u\"Index of %(directory)s\")\n \n def directory_index(path, fullpath):\n     try:"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 22,
        "deletions": 15
    }
}