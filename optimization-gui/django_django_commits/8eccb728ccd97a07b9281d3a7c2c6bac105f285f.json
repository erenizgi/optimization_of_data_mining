{
    "author": "spookylukey",
    "message": "Fixed #15964 - Do not order admin actions by description\n\nThanks to julien for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16162 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "8eccb728ccd97a07b9281d3a7c2c6bac105f285f",
    "files": [
        {
            "sha": "c603210e8be6d2c6faccc926d92efa197e40233b",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/8eccb728ccd97a07b9281d3a7c2c6bac105f285f/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/8eccb728ccd97a07b9281d3a7c2c6bac105f285f/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=8eccb728ccd97a07b9281d3a7c2c6bac105f285f",
            "patch": "@@ -576,9 +576,7 @@ def get_actions(self, request):\n         # get_action might have returned None, so filter any of those out.\n         actions = filter(None, actions)\n \n-        # Convert the actions into a SortedDict keyed by name\n-        # and sorted by description.\n-        actions.sort(key=lambda k: k[2].lower())\n+        # Convert the actions into a SortedDict keyed by name.\n         actions = SortedDict([\n             (name, (func, name, desc))\n             for func, name, desc in actions"
        },
        {
            "sha": "854fb60e702f83671d6f7e8b11290015e65a7765",
            "filename": "tests/regressiontests/admin_views/models.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/8eccb728ccd97a07b9281d3a7c2c6bac105f285f/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/8eccb728ccd97a07b9281d3a7c2c6bac105f285f/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py?ref=8eccb728ccd97a07b9281d3a7c2c6bac105f285f",
            "patch": "@@ -341,13 +341,15 @@ def external_mail(modeladmin, request, selected):\n         'from@example.com',\n         ['to@example.com']\n     ).send()\n+external_mail.short_description = 'External mail (Another awesome action)'\n \n def redirect_to(modeladmin, request, selected):\n     from django.http import HttpResponseRedirect\n     return HttpResponseRedirect('/some-where-else/')\n+redirect_to.short_description = 'Redirect to (Awesome action)'\n \n class ExternalSubscriberAdmin(admin.ModelAdmin):\n-    actions = [external_mail, redirect_to]\n+    actions = [redirect_to, external_mail]\n \n class Media(models.Model):\n     name = models.CharField(max_length=60)"
        },
        {
            "sha": "25740bcceac4d6bb81d54b49267ceb109130bd78",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/8eccb728ccd97a07b9281d3a7c2c6bac105f285f/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/8eccb728ccd97a07b9281d3a7c2c6bac105f285f/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=8eccb728ccd97a07b9281d3a7c2c6bac105f285f",
            "patch": "@@ -1971,6 +1971,20 @@ def test_default_redirect(self):\n         response = self.client.post(url, action_data)\n         self.assertRedirects(response, url)\n \n+    def test_actions_ordering(self):\n+        \"\"\"\n+        Ensure that actions are ordered as expected.\n+        Refs #15964.\n+        \"\"\"\n+        response = self.client.get('/test_admin/admin/admin_views/externalsubscriber/')\n+        self.assertTrue('''<label>Action: <select name=\"action\">\n+<option value=\"\" selected=\"selected\">---------</option>\n+<option value=\"delete_selected\">Delete selected external subscribers</option>\n+<option value=\"redirect_to\">Redirect to (Awesome action)</option>\n+<option value=\"external_mail\">External mail (Another awesome action)</option>\n+</select>'''in response.content,\n+        )\n+\n     def test_model_without_action(self):\n         \"Tests a ModelAdmin without any action\"\n         response = self.client.get('/test_admin/admin/admin_views/oldsubscriber/')"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 18,
        "deletions": 4
    }
}