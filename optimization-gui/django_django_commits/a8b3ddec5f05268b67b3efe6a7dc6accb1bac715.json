{
    "author": "aaugustin",
    "message": "[py3] Applied minor fixes so the test suite starts",
    "sha": "a8b3ddec5f05268b67b3efe6a7dc6accb1bac715",
    "files": [
        {
            "sha": "5e630d520708fc52166750a4033513ad6c5b57aa",
            "filename": "django/core/management/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/a8b3ddec5f05268b67b3efe6a7dc6accb1bac715/django%2Fcore%2Fmanagement%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/a8b3ddec5f05268b67b3efe6a7dc6accb1bac715/django%2Fcore%2Fmanagement%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fbase.py?ref=a8b3ddec5f05268b67b3efe6a7dc6accb1bac715",
            "patch": "@@ -6,14 +6,14 @@\n import os\n import sys\n \n-from io import BytesIO\n from optparse import make_option, OptionParser\n import traceback\n \n import django\n from django.core.exceptions import ImproperlyConfigured\n from django.core.management.color import color_style\n from django.utils.encoding import smart_str\n+from django.utils.six import StringIO\n \n \n class CommandError(Exception):\n@@ -273,7 +273,7 @@ def validate(self, app=None, display_num_errors=False):\n \n         \"\"\"\n         from django.core.management.validation import get_validation_errors\n-        s = BytesIO()\n+        s = StringIO()\n         num_errors = get_validation_errors(s, app)\n         if num_errors:\n             s.seek(0)"
        },
        {
            "sha": "35ae2231d66f274a65f100d4bc09f61190f38d12",
            "filename": "django/db/models/base.py",
            "status": "modified",
            "additions": 24,
            "deletions": 23,
            "changes": 47,
            "blob_url": "https://github.com/django/django/blob/a8b3ddec5f05268b67b3efe6a7dc6accb1bac715/django%2Fdb%2Fmodels%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/a8b3ddec5f05268b67b3efe6a7dc6accb1bac715/django%2Fdb%2Fmodels%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fbase.py?ref=a8b3ddec5f05268b67b3efe6a7dc6accb1bac715",
            "patch": "@@ -28,6 +28,30 @@\n from django.utils.text import get_text_list, capfirst\n \n \n+def subclass_exception(name, parents, module, attached_to=None):\n+    \"\"\"\n+    Create exception subclass. Used by ModelBase below.\n+\n+    If 'attached_to' is supplied, the exception will be created in a way that\n+    allows it to be pickled, assuming the returned exception class will be added\n+    as an attribute to the 'attached_to' class.\n+    \"\"\"\n+    class_dict = {'__module__': module}\n+    if attached_to is not None:\n+        def __reduce__(self):\n+            # Exceptions are special - they've got state that isn't\n+            # in self.__dict__. We assume it is all in self.args.\n+            return (unpickle_inner_exception, (attached_to, name), self.args)\n+\n+        def __setstate__(self, args):\n+            self.args = args\n+\n+        class_dict['__reduce__'] = __reduce__\n+        class_dict['__setstate__'] = __setstate__\n+\n+    return type(name, parents, class_dict)\n+\n+\n class ModelBase(type):\n     \"\"\"\n     Metaclass for all models.\n@@ -929,29 +953,6 @@ def model_unpickle(model, attrs):\n     return cls.__new__(cls)\n model_unpickle.__safe_for_unpickle__ = True\n \n-def subclass_exception(name, parents, module, attached_to=None):\n-    \"\"\"\n-    Create exception subclass.\n-\n-    If 'attached_to' is supplied, the exception will be created in a way that\n-    allows it to be pickled, assuming the returned exception class will be added\n-    as an attribute to the 'attached_to' class.\n-    \"\"\"\n-    class_dict = {'__module__': module}\n-    if attached_to is not None:\n-        def __reduce__(self):\n-            # Exceptions are special - they've got state that isn't\n-            # in self.__dict__. We assume it is all in self.args.\n-            return (unpickle_inner_exception, (attached_to, name), self.args)\n-\n-        def __setstate__(self, args):\n-            self.args = args\n-\n-        class_dict['__reduce__'] = __reduce__\n-        class_dict['__setstate__'] = __setstate__\n-\n-    return type(name, parents, class_dict)\n-\n def unpickle_inner_exception(klass, exception_name):\n     # Get the exception class from the class it is attached to:\n     exception = getattr(klass, exception_name)"
        },
        {
            "sha": "2c38e8d72e0101f59897e653cd167944c80fb556",
            "filename": "django/db/models/fields/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/a8b3ddec5f05268b67b3efe6a7dc6accb1bac715/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/a8b3ddec5f05268b67b3efe6a7dc6accb1bac715/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2F__init__.py?ref=a8b3ddec5f05268b67b3efe6a7dc6accb1bac715",
            "patch": "@@ -135,6 +135,8 @@ def __lt__(self, other):\n             return self.creation_counter < other.creation_counter\n         return NotImplemented\n \n+    __hash__ = object.__hash__\n+\n     def __deepcopy__(self, memodict):\n         # We don't have to deepcopy very much here, since most things are not\n         # intended to be altered after initial creation."
        },
        {
            "sha": "a9ae7f5db1079e5457e14038fadf188dd3449104",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/a8b3ddec5f05268b67b3efe6a7dc6accb1bac715/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/a8b3ddec5f05268b67b3efe6a7dc6accb1bac715/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=a8b3ddec5f05268b67b3efe6a7dc6accb1bac715",
            "patch": "@@ -194,9 +194,9 @@ def _base_environ(self, **request):\n             'SERVER_NAME':       'testserver',\n             'SERVER_PORT':       '80',\n             'SERVER_PROTOCOL':   'HTTP/1.1',\n-            'wsgi.version':      (1,0),\n+            'wsgi.version':      (1, 0),\n             'wsgi.url_scheme':   'http',\n-            'wsgi.input':        FakePayload(''),\n+            'wsgi.input':        FakePayload(b''),\n             'wsgi.errors':       self.errors,\n             'wsgi.multiprocess': True,\n             'wsgi.multithread':  False,"
        }
    ],
    "stats": {
        "total": 57,
        "additions": 30,
        "deletions": 27
    }
}