{
    "author": "claudep",
    "message": "Replaced some smart_xxx by force_xxx equivalent\n\nsmart_str/smart_text should only be used when a potential lazy\nstring should be preserved in the result of the function call.",
    "sha": "ae88e73fa630694a152b54df68d53ce535312e45",
    "files": [
        {
            "sha": "5f5f46f0d1b0157803ca8677b72d957b3641db5a",
            "filename": "django/contrib/databrowse/datastructures.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcontrib%2Fdatabrowse%2Fdatastructures.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcontrib%2Fdatabrowse%2Fdatastructures.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fdatabrowse%2Fdatastructures.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -7,7 +7,7 @@\n from django.db import models\n from django.utils import formats\n from django.utils.text import capfirst\n-from django.utils.encoding import smart_text, smart_str, iri_to_uri\n+from django.utils.encoding import smart_text, force_str, iri_to_uri\n from django.db.models.query import QuerySet\n from django.utils.encoding import python_2_unicode_compatible\n \n@@ -23,7 +23,7 @@ def __init__(self, site, model):\n         self.verbose_name_plural = model._meta.verbose_name_plural\n \n     def __repr__(self):\n-        return smart_str('<EasyModel for %s>' % self.model._meta.object_name)\n+        return force_str('<EasyModel for %s>' % self.model._meta.object_name)\n \n     def model_databrowse(self):\n         \"Returns the ModelDatabrowse class for this model.\"\n@@ -62,7 +62,7 @@ def __init__(self, easy_model, field):\n         self.model, self.field = easy_model, field\n \n     def __repr__(self):\n-        return smart_str('<EasyField for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n+        return force_str('<EasyField for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n \n     def choices(self):\n         for value, label in self.field.choices:\n@@ -80,7 +80,7 @@ def __init__(self, easy_model, field, value, label):\n         self.value, self.label = value, label\n \n     def __repr__(self):\n-        return smart_str('<EasyChoice for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n+        return force_str('<EasyChoice for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n \n     def url(self):\n         return '%s%s/%s/%s/%s/' % (self.model.site.root_url, self.model.model._meta.app_label, self.model.model._meta.module_name, self.field.field.name, iri_to_uri(self.value))\n@@ -91,7 +91,7 @@ def __init__(self, easy_model, instance):\n         self.model, self.instance = easy_model, instance\n \n     def __repr__(self):\n-        return smart_str('<EasyInstance for %s (%s)>' % (self.model.model._meta.object_name, self.instance._get_pk_val()))\n+        return force_str('<EasyInstance for %s (%s)>' % (self.model.model._meta.object_name, self.instance._get_pk_val()))\n \n     def __str__(self):\n         val = smart_text(self.instance)\n@@ -135,7 +135,7 @@ def __init__(self, easy_model, instance, field):\n         self.raw_value = getattr(instance.instance, field.name)\n \n     def __repr__(self):\n-        return smart_str('<EasyInstanceField for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n+        return force_str('<EasyInstanceField for %s.%s>' % (self.model.model._meta.object_name, self.field.name))\n \n     def values(self):\n         \"\"\""
        },
        {
            "sha": "426a0a15c0ba0b17bfce8578041b5b6088c66853",
            "filename": "django/core/cache/backends/memcached.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcache%2Fbackends%2Fmemcached.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -6,7 +6,7 @@\n from django.core.cache.backends.base import BaseCache, InvalidCacheBackendError\n \n from django.utils import six\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import force_str\n \n class BaseMemcachedCache(BaseCache):\n     def __init__(self, server, params, library, value_not_found_exception):\n@@ -53,7 +53,7 @@ def _get_memcache_timeout(self, timeout):\n \n     def make_key(self, key, version=None):\n         # Python 2 memcache requires the key to be a byte string.\n-        return smart_str(super(BaseMemcachedCache, self).make_key(key, version))\n+        return force_str(super(BaseMemcachedCache, self).make_key(key, version))\n \n     def add(self, key, value, timeout=0, version=None):\n         key = self.make_key(key, version=version)"
        },
        {
            "sha": "39b99ff78fd11b5041285c7425a9074f24abecf4",
            "filename": "django/core/files/uploadedfile.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Ffiles%2Fuploadedfile.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Ffiles%2Fuploadedfile.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fuploadedfile.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -8,7 +8,7 @@\n from django.conf import settings\n from django.core.files.base import File\n from django.core.files import temp as tempfile\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import force_str\n \n __all__ = ('UploadedFile', 'TemporaryUploadedFile', 'InMemoryUploadedFile',\n            'SimpleUploadedFile')\n@@ -30,7 +30,7 @@ def __init__(self, file=None, name=None, content_type=None, size=None, charset=N\n         self.charset = charset\n \n     def __repr__(self):\n-        return smart_str(\"<%s: %s (%s)>\" % (\n+        return force_str(\"<%s: %s (%s)>\" % (\n             self.__class__.__name__, self.name, self.content_type))\n \n     def _get_name(self):"
        },
        {
            "sha": "e445d07a613315676593df29a0ecb4b174bb8d76",
            "filename": "django/core/handlers/wsgi.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fhandlers%2Fwsgi.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -9,7 +9,7 @@\n from django.core.handlers import base\n from django.core.urlresolvers import set_script_prefix\n from django.utils import datastructures\n-from django.utils.encoding import force_text, smart_str, iri_to_uri\n+from django.utils.encoding import force_str, force_text, iri_to_uri\n from django.utils.log import getLogger\n \n logger = getLogger('django.request')\n@@ -246,5 +246,5 @@ def __call__(self, environ, start_response):\n         response_headers = [(str(k), str(v)) for k, v in response.items()]\n         for c in response.cookies.values():\n             response_headers.append((str('Set-Cookie'), str(c.output(header=''))))\n-        start_response(smart_str(status), response_headers)\n+        start_response(force_str(status), response_headers)\n         return response"
        },
        {
            "sha": "895753ea12767c111949953ebee45572fbfd2d92",
            "filename": "django/core/management/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fmanagement%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fmanagement%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fbase.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -12,7 +12,7 @@\n import django\n from django.core.exceptions import ImproperlyConfigured\n from django.core.management.color import color_style\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import force_str\n from django.utils.six import StringIO\n \n \n@@ -65,7 +65,7 @@ def write(self, msg, style_func=None, ending=None):\n             msg += ending\n         style_func = [f for f in (style_func, self.style_func, lambda x:x)\n                       if f is not None][0]\n-        self._out.write(smart_str(style_func(msg)))\n+        self._out.write(force_str(style_func(msg)))\n \n \n class BaseCommand(object):"
        },
        {
            "sha": "6cd66f3a6a7fc75b97daab6683639e5600ffc902",
            "filename": "django/core/management/validation.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fvalidation.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -1,7 +1,7 @@\n import sys\n \n from django.core.management.color import color_style\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import force_str\n from django.utils.itercompat import is_iterable\n from django.utils import six\n \n@@ -13,7 +13,7 @@ def __init__(self, outfile=sys.stdout):\n \n     def add(self, context, error):\n         self.errors.append((context, error))\n-        self.outfile.write(self.style.ERROR(smart_str(\"%s: %s\\n\" % (context, error))))\n+        self.outfile.write(self.style.ERROR(force_str(\"%s: %s\\n\" % (context, error))))\n \n def get_validation_errors(outfile, app=None):\n     \"\"\""
        },
        {
            "sha": "fe3bb49bbe5816a465d03d8e79c2539367d5650c",
            "filename": "django/core/urlresolvers.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Furlresolvers.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Furlresolvers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Furlresolvers.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -14,7 +14,7 @@\n from django.http import Http404\n from django.core.exceptions import ImproperlyConfigured, ViewDoesNotExist\n from django.utils.datastructures import MultiValueDict\n-from django.utils.encoding import iri_to_uri, force_text, smart_str\n+from django.utils.encoding import force_str, force_text, iri_to_uri\n from django.utils.functional import memoize, lazy\n from django.utils.importlib import import_module\n from django.utils.module_loading import module_has_submodule\n@@ -195,7 +195,7 @@ def __init__(self, regex, callback, default_args=None, name=None):\n         self.name = name\n \n     def __repr__(self):\n-        return smart_str('<%s %s %s>' % (self.__class__.__name__, self.name, self.regex.pattern))\n+        return force_str('<%s %s %s>' % (self.__class__.__name__, self.name, self.regex.pattern))\n \n     def add_prefix(self, prefix):\n         \"\"\"\n@@ -245,7 +245,7 @@ def __init__(self, regex, urlconf_name, default_kwargs=None, app_name=None, name\n         self._app_dict = {}\n \n     def __repr__(self):\n-        return smart_str('<%s %s (%s:%s) %s>' % (\n+        return force_str('<%s %s (%s:%s) %s>' % (\n             self.__class__.__name__, self.urlconf_name, self.app_name,\n             self.namespace, self.regex.pattern))\n "
        },
        {
            "sha": "317e3880bfe0522fbb1cba8c26a4827921481e38",
            "filename": "django/core/validators.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fvalidators.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fcore%2Fvalidators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fvalidators.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -8,7 +8,7 @@\n \n from django.core.exceptions import ValidationError\n from django.utils.translation import ugettext_lazy as _\n-from django.utils.encoding import smart_text\n+from django.utils.encoding import force_text\n from django.utils.ipv6 import is_valid_ipv6_address\n from django.utils import six\n \n@@ -36,7 +36,7 @@ def __call__(self, value):\n         \"\"\"\n         Validates that the input matches the regular expression.\n         \"\"\"\n-        if not self.regex.search(smart_text(value)):\n+        if not self.regex.search(force_text(value)):\n             raise ValidationError(self.message, code=self.code)\n \n class URLValidator(RegexValidator):\n@@ -55,7 +55,7 @@ def __call__(self, value):\n         except ValidationError as e:\n             # Trivial case failed. Try for possible IDN domain\n             if value:\n-                value = smart_text(value)\n+                value = force_text(value)\n                 scheme, netloc, path, query, fragment = urlsplit(value)\n                 try:\n                     netloc = netloc.encode('idna').decode('ascii') # IDN -> ACE"
        },
        {
            "sha": "f0fd2f56d26e180be192833b78b58543eb35d637",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -609,7 +609,7 @@ def last_executed_query(self, cursor, sql, params):\n         exists for database backends to provide a better implementation\n         according to their own quoting schemes.\n         \"\"\"\n-        from django.utils.encoding import smart_text, force_text\n+        from django.utils.encoding import force_text\n \n         # Convert params to contain Unicode values.\n         to_unicode = lambda s: force_text(s, strings_only=True, errors='replace')\n@@ -618,7 +618,7 @@ def last_executed_query(self, cursor, sql, params):\n         else:\n             u_params = dict([(to_unicode(k), to_unicode(v)) for k, v in params.items()])\n \n-        return smart_text(sql) % u_params\n+        return force_text(sql) % u_params\n \n     def last_insert_id(self, cursor, table_name, pk_name):\n         \"\"\"\n@@ -802,8 +802,8 @@ def tablespace_sql(self, tablespace, inline=False):\n \n     def prep_for_like_query(self, x):\n         \"\"\"Prepares a value for use in a LIKE query.\"\"\"\n-        from django.utils.encoding import smart_text\n-        return smart_text(x).replace(\"\\\\\", \"\\\\\\\\\").replace(\"%\", \"\\%\").replace(\"_\", \"\\_\")\n+        from django.utils.encoding import force_text\n+        return force_text(x).replace(\"\\\\\", \"\\\\\\\\\").replace(\"%\", \"\\%\").replace(\"_\", \"\\_\")\n \n     # Same as prep_for_like_query(), but called for \"iexact\" matches, which\n     # need not necessarily be implemented using \"LIKE\" in the backend."
        },
        {
            "sha": "62024c8ee4271bba5830806a7530d25e0f672732",
            "filename": "django/db/models/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fdb%2Fmodels%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fdb%2Fmodels%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fbase.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -23,7 +23,7 @@\n from django.db.models.loading import register_models, get_model\n from django.utils.translation import ugettext_lazy as _\n from django.utils.functional import curry\n-from django.utils.encoding import smart_str, force_text\n+from django.utils.encoding import force_str, force_text\n from django.utils import six\n from django.utils.text import get_text_list, capfirst\n \n@@ -404,7 +404,7 @@ def __repr__(self):\n             u = six.text_type(self)\n         except (UnicodeEncodeError, UnicodeDecodeError):\n             u = '[Bad Unicode data]'\n-        return smart_str('<%s: %s>' % (self.__class__.__name__, u))\n+        return force_str('<%s: %s>' % (self.__class__.__name__, u))\n \n     def __str__(self):\n         if not six.PY3 and hasattr(self, '__unicode__'):"
        },
        {
            "sha": "f16632ef25003e10a1287ade4a9f49f239a4d0c5",
            "filename": "django/db/models/fields/files.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -8,7 +8,7 @@\n from django.core.files.storage import default_storage\n from django.core.files.images import ImageFile\n from django.db.models import signals\n-from django.utils.encoding import force_text, smart_str\n+from django.utils.encoding import force_str, force_text\n from django.utils import six\n from django.utils.translation import ugettext_lazy as _\n \n@@ -280,7 +280,7 @@ def contribute_to_class(self, cls, name):\n         setattr(cls, self.name, self.descriptor_class(self))\n \n     def get_directory_name(self):\n-        return os.path.normpath(force_text(datetime.datetime.now().strftime(smart_str(self.upload_to))))\n+        return os.path.normpath(force_text(datetime.datetime.now().strftime(force_str(self.upload_to))))\n \n     def get_filename(self, filename):\n         return os.path.normpath(self.storage.get_valid_name(os.path.basename(filename)))"
        },
        {
            "sha": "2198f38cbbbe272e1717326bbd8e091a7d22c574",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -61,14 +61,14 @@ def value_encode(self, val):\n         if not _cookie_allows_colon_in_names:\n             def load(self, rawdata):\n                 self.bad_cookies = set()\n-                super(SimpleCookie, self).load(smart_str(rawdata))\n+                super(SimpleCookie, self).load(force_str(rawdata))\n                 for key in self.bad_cookies:\n                     del self[key]\n \n             # override private __set() method:\n             # (needed for using our Morsel, and for laxness with CookieError\n             def _BaseCookie__set(self, key, real_value, coded_value):\n-                key = smart_str(key)\n+                key = force_str(key)\n                 try:\n                     M = self.get(key, Morsel())\n                     M.set(key, real_value, coded_value)\n@@ -85,7 +85,7 @@ def _BaseCookie__set(self, key, real_value, coded_value):\n from django.http.multipartparser import MultiPartParser\n from django.http.utils import *\n from django.utils.datastructures import MultiValueDict, ImmutableList\n-from django.utils.encoding import force_bytes, force_text, smart_str, iri_to_uri\n+from django.utils.encoding import force_bytes, force_str, force_text, iri_to_uri\n from django.utils.http import cookie_date\n from django.utils import six\n from django.utils import timezone\n@@ -137,7 +137,7 @@ def build_request_repr(request, path_override=None, GET_override=None,\n     except Exception:\n         meta = '<could not parse>'\n     path = path_override if path_override is not None else request.path\n-    return smart_str('<%s\\npath:%s,\\nGET:%s,\\nPOST:%s,\\nCOOKIES:%s,\\nMETA:%s>' %\n+    return force_str('<%s\\npath:%s,\\nGET:%s,\\nPOST:%s,\\nCOOKIES:%s,\\nMETA:%s>' %\n                      (request.__class__.__name__,\n                       path,\n                       six.text_type(get),"
        },
        {
            "sha": "0a2b2c943797f4c4a2e9d7acacdc7a1a29e3593a",
            "filename": "django/template/base.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Ftemplate%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Ftemplate%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fbase.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -11,7 +11,7 @@\n from django.utils.itercompat import is_iterable\n from django.utils.text import (smart_split, unescape_string_literal,\n     get_text_list)\n-from django.utils.encoding import smart_text, force_text, smart_str\n+from django.utils.encoding import force_str, force_text\n from django.utils.translation import ugettext_lazy, pgettext_lazy\n from django.utils.safestring import (SafeData, EscapeData, mark_safe,\n     mark_for_escaping)\n@@ -116,7 +116,7 @@ class Template(object):\n     def __init__(self, template_string, origin=None,\n                  name='<Unknown Template>'):\n         try:\n-            template_string = smart_text(template_string)\n+            template_string = force_text(template_string)\n         except UnicodeDecodeError:\n             raise TemplateEncodingError(\"Templates can only be constructed \"\n                                         \"from unicode or UTF-8 strings.\")\n@@ -848,7 +848,7 @@ def __init__(self, s):\n         self.s = s\n \n     def __repr__(self):\n-        return \"<Text Node: '%s'>\" % smart_str(self.s[:25], 'ascii',\n+        return force_str(\"<Text Node: '%s'>\" % self.s[:25], 'ascii',\n                 errors='replace')\n \n     def render(self, context):"
        },
        {
            "sha": "555982eede53372b698ff959f0e7b0e9fc901650",
            "filename": "django/utils/formats.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Futils%2Fformats.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Futils%2Fformats.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fformats.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -4,7 +4,7 @@\n from django.conf import settings\n from django.utils import dateformat, numberformat, datetime_safe\n from django.utils.importlib import import_module\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import force_str\n from django.utils.functional import lazy\n from django.utils.safestring import mark_safe\n from django.utils import six\n@@ -66,7 +66,7 @@ def get_format(format_type, lang=None, use_l10n=None):\n     If use_l10n is provided and is not None, that will force the value to\n     be localized (or not), overriding the value of settings.USE_L10N.\n     \"\"\"\n-    format_type = smart_str(format_type)\n+    format_type = force_str(format_type)\n     if use_l10n or (use_l10n is None and settings.USE_L10N):\n         if lang is None:\n             lang = get_language()\n@@ -160,14 +160,14 @@ def localize_input(value, default=None):\n         return number_format(value)\n     elif isinstance(value, datetime.datetime):\n         value = datetime_safe.new_datetime(value)\n-        format = smart_str(default or get_format('DATETIME_INPUT_FORMATS')[0])\n+        format = force_str(default or get_format('DATETIME_INPUT_FORMATS')[0])\n         return value.strftime(format)\n     elif isinstance(value, datetime.date):\n         value = datetime_safe.new_date(value)\n-        format = smart_str(default or get_format('DATE_INPUT_FORMATS')[0])\n+        format = force_str(default or get_format('DATE_INPUT_FORMATS')[0])\n         return value.strftime(format)\n     elif isinstance(value, datetime.time):\n-        format = smart_str(default or get_format('TIME_INPUT_FORMATS')[0])\n+        format = force_str(default or get_format('TIME_INPUT_FORMATS')[0])\n         return value.strftime(format)\n     return value\n "
        },
        {
            "sha": "d3c70f12092ba4874a057e521006fa41b5a8e5d1",
            "filename": "django/utils/http.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Futils%2Fhttp.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Futils%2Fhttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhttp.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -15,7 +15,7 @@\n from email.utils import formatdate\n \n from django.utils.datastructures import MultiValueDict\n-from django.utils.encoding import force_text, smart_str\n+from django.utils.encoding import force_str, force_text\n from django.utils.functional import allow_lazy\n from django.utils import six\n \n@@ -39,7 +39,7 @@ def urlquote(url, safe='/'):\n     can safely be used as part of an argument to a subsequent iri_to_uri() call\n     without double-quoting occurring.\n     \"\"\"\n-    return force_text(urllib_parse.quote(smart_str(url), smart_str(safe)))\n+    return force_text(urllib_parse.quote(force_str(url), force_str(safe)))\n urlquote = allow_lazy(urlquote, six.text_type)\n \n def urlquote_plus(url, safe=''):\n@@ -49,23 +49,23 @@ def urlquote_plus(url, safe=''):\n     returned string can safely be used as part of an argument to a subsequent\n     iri_to_uri() call without double-quoting occurring.\n     \"\"\"\n-    return force_text(urllib_parse.quote_plus(smart_str(url), smart_str(safe)))\n+    return force_text(urllib_parse.quote_plus(force_str(url), force_str(safe)))\n urlquote_plus = allow_lazy(urlquote_plus, six.text_type)\n \n def urlunquote(quoted_url):\n     \"\"\"\n     A wrapper for Python's urllib.unquote() function that can operate on\n     the result of django.utils.http.urlquote().\n     \"\"\"\n-    return force_text(urllib_parse.unquote(smart_str(quoted_url)))\n+    return force_text(urllib_parse.unquote(force_str(quoted_url)))\n urlunquote = allow_lazy(urlunquote, six.text_type)\n \n def urlunquote_plus(quoted_url):\n     \"\"\"\n     A wrapper for Python's urllib.unquote_plus() function that can operate on\n     the result of django.utils.http.urlquote_plus().\n     \"\"\"\n-    return force_text(urllib_parse.unquote_plus(smart_str(quoted_url)))\n+    return force_text(urllib_parse.unquote_plus(force_str(quoted_url)))\n urlunquote_plus = allow_lazy(urlunquote_plus, six.text_type)\n \n def urlencode(query, doseq=0):\n@@ -79,8 +79,8 @@ def urlencode(query, doseq=0):\n     elif hasattr(query, 'items'):\n         query = query.items()\n     return urllib_parse.urlencode(\n-        [(smart_str(k),\n-         [smart_str(i) for i in v] if isinstance(v, (list,tuple)) else smart_str(v))\n+        [(force_str(k),\n+         [force_str(i) for i in v] if isinstance(v, (list,tuple)) else force_str(v))\n             for k, v in query],\n         doseq)\n "
        },
        {
            "sha": "9fd33a7ea8a4bff2f5ade1edfe44d7013b87ec36",
            "filename": "django/utils/translation/trans_real.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Futils%2Ftranslation%2Ftrans_real.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Futils%2Ftranslation%2Ftrans_real.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftranslation%2Ftrans_real.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -9,7 +9,7 @@\n from threading import local\n \n from django.utils.importlib import import_module\n-from django.utils.encoding import smart_str, smart_text\n+from django.utils.encoding import force_str, force_text\n from django.utils.safestring import mark_safe, SafeData\n from django.utils import six\n from django.utils.six import StringIO\n@@ -454,7 +454,7 @@ def templatize(src, origin=None):\n     from django.conf import settings\n     from django.template import (Lexer, TOKEN_TEXT, TOKEN_VAR, TOKEN_BLOCK,\n             TOKEN_COMMENT, TRANSLATOR_COMMENT_MARK)\n-    src = smart_text(src, settings.FILE_CHARSET)\n+    src = force_text(src, settings.FILE_CHARSET)\n     out = StringIO()\n     message_context = None\n     intrans = False\n@@ -469,7 +469,7 @@ def templatize(src, origin=None):\n                 content = ''.join(comment)\n                 translators_comment_start = None\n                 for lineno, line in enumerate(content.splitlines(True)):\n-                    if line.lstrip().startswith(smart_text(TRANSLATOR_COMMENT_MARK)):\n+                    if line.lstrip().startswith(TRANSLATOR_COMMENT_MARK):\n                         translators_comment_start = lineno\n                 for lineno, line in enumerate(content.splitlines(True)):\n                     if translators_comment_start is not None and lineno >= translators_comment_start:\n@@ -584,7 +584,7 @@ def templatize(src, origin=None):\n                 out.write(' # %s' % t.contents)\n             else:\n                 out.write(blankout(t.contents, 'X'))\n-    return smart_str(out.getvalue())\n+    return force_str(out.getvalue())\n \n def parse_accept_lang_header(lang_string):\n     \"\"\""
        },
        {
            "sha": "654c99778e03fde5c3a4beae3049f6b00534fa76",
            "filename": "django/utils/tzinfo.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ae88e73fa630694a152b54df68d53ce535312e45/django%2Futils%2Ftzinfo.py",
            "raw_url": "https://github.com/django/django/raw/ae88e73fa630694a152b54df68d53ce535312e45/django%2Futils%2Ftzinfo.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftzinfo.py?ref=ae88e73fa630694a152b54df68d53ce535312e45",
            "patch": "@@ -5,7 +5,7 @@\n import time\n from datetime import timedelta, tzinfo\n \n-from django.utils.encoding import smart_text, smart_str, DEFAULT_LOCALE_ENCODING\n+from django.utils.encoding import force_str, force_text, DEFAULT_LOCALE_ENCODING\n \n # Python's doc say: \"A tzinfo subclass must have an __init__() method that can\n # be called with no arguments\". FixedOffset and LocalTimezone don't honor this\n@@ -53,7 +53,7 @@ def __init__(self, dt):\n         self._tzname = self.tzname(dt)\n \n     def __repr__(self):\n-        return smart_str(self._tzname)\n+        return force_str(self._tzname)\n \n     def __getinitargs__(self):\n         return self.__dt,\n@@ -72,7 +72,7 @@ def dst(self, dt):\n \n     def tzname(self, dt):\n         try:\n-            return smart_text(time.tzname[self._isdst(dt)],\n+            return force_text(time.tzname[self._isdst(dt)],\n                                  DEFAULT_LOCALE_ENCODING)\n         except UnicodeDecodeError:\n             return None"
        }
    ],
    "stats": {
        "total": 112,
        "additions": 56,
        "deletions": 56
    }
}