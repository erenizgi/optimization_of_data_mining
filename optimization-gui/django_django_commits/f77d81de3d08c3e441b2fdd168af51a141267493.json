{
    "author": "timgraham",
    "message": "Fixed #15208 - Document ModelAdmin.formfield_for_choice_field; thanks julien.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15399 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f77d81de3d08c3e441b2fdd168af51a141267493",
    "files": [
        {
            "sha": "32668e7b2ce00b91973ecef53e40e511c0af6463",
            "filename": "docs/ref/contrib/admin/index.txt",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/f77d81de3d08c3e441b2fdd168af51a141267493/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/f77d81de3d08c3e441b2fdd168af51a141267493/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt?ref=f77d81de3d08c3e441b2fdd168af51a141267493",
            "patch": "@@ -927,6 +927,25 @@ templates used by the :class:`ModelAdmin` views:\n                     kwargs[\"queryset\"] = Car.objects.filter(owner=request.user)\n                 return super(MyModelAdmin, self).formfield_for_manytomany(db_field, request, **kwargs)\n \n+.. method:: ModelAdmin.formfield_for_choice_field(self, db_field, request, **kwargs)\n+\n+    Like the ``formfield_for_foreignkey`` and ``formfield_for_manytomany``\n+    methods, the ``formfield_for_choice_field`` method can be overridden to\n+    change the default formfield for a field that has declared choices. For\n+    example, if the choices available to a superuser should be different than\n+    those available to regular staff, you could proceed as follows::\n+\n+        class MyModelAdmin(admin.ModelAdmin):\n+            def formfield_for_choice_field(self, db_field, request, **kwargs):\n+                if db_field.name == \"status\":\n+                    kwargs['choices'] = (\n+                        ('accepted', 'Accepted'),\n+                        ('denied', 'Denied'),\n+                    )\n+                    if request.user.is_superuser:\n+                        kwargs['choices'] += (('ready', 'Ready for deployment'),)\n+                return super(MyModelAdmin, self).formfield_for_choice_field(db_field, request, **kwargs)\n+\n .. method:: ModelAdmin.has_add_permission(self, request)\n \n     Should return ``True`` if adding an object is permitted, ``False``"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 19,
        "deletions": 0
    }
}