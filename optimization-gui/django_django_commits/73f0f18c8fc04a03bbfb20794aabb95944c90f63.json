{
    "author": "claudep",
    "message": "[py3] Fixed admin_scripts tests",
    "sha": "73f0f18c8fc04a03bbfb20794aabb95944c90f63",
    "files": [
        {
            "sha": "a8fc7ed503488ddd33dafe4ae6057e5a3c330f4d",
            "filename": "tests/regressiontests/admin_scripts/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/73f0f18c8fc04a03bbfb20794aabb95944c90f63/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/73f0f18c8fc04a03bbfb20794aabb95944c90f63/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py?ref=73f0f18c8fc04a03bbfb20794aabb95944c90f63",
            "patch": "@@ -71,6 +71,10 @@ def remove_settings(self, filename, is_dir=False):\n                 os.remove(full_name + 'c')\n         except OSError:\n             pass\n+        # Also remove a __pycache__ directory, if it exists\n+        cache_name = os.path.join(test_dir, '__pycache__')\n+        if os.path.isdir(cache_name):\n+            shutil.rmtree(cache_name)\n \n     def _ext_backend_paths(self):\n         \"\"\"\n@@ -110,14 +114,11 @@ def run_test(self, script, args, settings_file=None, apps=None):\n         python_path.extend(ext_backend_base_dirs)\n         os.environ[python_path_var_name] = os.pathsep.join(python_path)\n \n-        # Silence the DeprecationWarning caused by having a locale directory\n-        # in the project directory.\n-        cmd = [sys.executable, '-Wignore:::django.utils.translation', script]\n-\n         # Move to the test directory and run\n         os.chdir(test_dir)\n-        out, err = subprocess.Popen(cmd + args,\n-                stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()\n+        out, err = subprocess.Popen([sys.executable, script] + args,\n+                stdout=subprocess.PIPE, stderr=subprocess.PIPE,\n+                universal_newlines=True).communicate()\n \n         # Restore the old environment\n         if old_django_settings_module:"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 7,
        "deletions": 6
    }
}