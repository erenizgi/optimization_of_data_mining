{
    "author": "jphalip",
    "message": "Fixed #17197 -- Prevented a locale leakage from an i18n test causing collateral failures in the rest of the test suite. Thanks to Florian Apolloner for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17080 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "9d410ee64b1a0f2d8a714eeffa7e17e09965f01c",
    "files": [
        {
            "sha": "877cf964ddb300a5f41b5387e89b4bfd8bb38c5a",
            "filename": "tests/regressiontests/views/tests/i18n.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/9d410ee64b1a0f2d8a714eeffa7e17e09965f01c/tests%2Fregressiontests%2Fviews%2Ftests%2Fi18n.py",
            "raw_url": "https://github.com/django/django/raw/9d410ee64b1a0f2d8a714eeffa7e17e09965f01c/tests%2Fregressiontests%2Fviews%2Ftests%2Fi18n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fi18n.py?ref=9d410ee64b1a0f2d8a714eeffa7e17e09965f01c",
            "patch": "@@ -6,7 +6,7 @@\n \n from django.conf import settings\n from django.test import TestCase\n-from django.utils.translation import override, activate\n+from django.utils.translation import override, activate, get_language\n from django.utils.text import javascript_quote\n \n from ..urls import locale_dir\n@@ -25,6 +25,7 @@ def test_setlang(self):\n \n     def test_jsi18n(self):\n         \"\"\"The javascript_catalog can be deployed with language settings\"\"\"\n+        saved_lang = get_language()\n         for lang_code in ['es', 'fr', 'ru']:\n             activate(lang_code)\n             catalog = gettext.translation('djangojs', locale_dir, [lang_code])\n@@ -37,6 +38,7 @@ def test_jsi18n(self):\n             if lang_code == 'fr':\n                 # Message with context (msgctxt)\n                 self.assertContains(response, \"['month name\\x04May'] = 'mai';\", 1)\n+        activate(saved_lang)\n \n \n class JsI18NTests(TestCase):"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}