{
    "author": "unknown",
    "message": "Fixed #7198 (again) -- Corrects a problem with string interpolation from r16876 and adds tests for the new error message.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16888 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "39bbd1653a7d7b55476c529afad9d6932ee9d8ca",
    "files": [
        {
            "sha": "c34468643fbae6b3d610bb54a71999c3d4e65e91",
            "filename": "django/db/models/loading.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/39bbd1653a7d7b55476c529afad9d6932ee9d8ca/django%2Fdb%2Fmodels%2Floading.py",
            "raw_url": "https://github.com/django/django/raw/39bbd1653a7d7b55476c529afad9d6932ee9d8ca/django%2Fdb%2Fmodels%2Floading.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Floading.py?ref=39bbd1653a7d7b55476c529afad9d6932ee9d8ca",
            "patch": "@@ -146,7 +146,7 @@ def get_app(self, app_label, emptyOK=False):\n                     if mod is None:\n                         if emptyOK:\n                             return None\n-                        raise ImproperlyConfigured(\"App with label %s is missing a models.py module.\")\n+                        raise ImproperlyConfigured(\"App with label %s is missing a models.py module.\" % app_label)\n                     else:\n                         return mod\n             raise ImproperlyConfigured(\"App with label %s could not be found\" % app_label)"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/modeltests/empty/no_models/__init__.py",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/39bbd1653a7d7b55476c529afad9d6932ee9d8ca/tests%2Fmodeltests%2Fempty%2Fno_models%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/39bbd1653a7d7b55476c529afad9d6932ee9d8ca/tests%2Fmodeltests%2Fempty%2Fno_models%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fempty%2Fno_models%2F__init__.py?ref=39bbd1653a7d7b55476c529afad9d6932ee9d8ca"
        },
        {
            "sha": "7b892bcaca398f11de7680116d485ccdbf0aab77",
            "filename": "tests/modeltests/empty/no_models/tests.py",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/39bbd1653a7d7b55476c529afad9d6932ee9d8ca/tests%2Fmodeltests%2Fempty%2Fno_models%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/39bbd1653a7d7b55476c529afad9d6932ee9d8ca/tests%2Fmodeltests%2Fempty%2Fno_models%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fempty%2Fno_models%2Ftests.py?ref=39bbd1653a7d7b55476c529afad9d6932ee9d8ca",
            "patch": "@@ -0,0 +1,5 @@\n+from django.test import TestCase\n+\n+class NoModelTests(TestCase):\n+    \"\"\" A placeholder test case. See modeltests.empty.tests for more info. \"\"\"\n+    pass"
        },
        {
            "sha": "b3a8a72ad200c3e9dff7e512f996967501cb4b28",
            "filename": "tests/modeltests/empty/tests.py",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/39bbd1653a7d7b55476c529afad9d6932ee9d8ca/tests%2Fmodeltests%2Fempty%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/39bbd1653a7d7b55476c529afad9d6932ee9d8ca/tests%2Fmodeltests%2Fempty%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fempty%2Ftests.py?ref=39bbd1653a7d7b55476c529afad9d6932ee9d8ca",
            "patch": "@@ -1,4 +1,10 @@\n+from __future__ import with_statement\n+\n+from django.conf import settings\n+from django.core.exceptions import ImproperlyConfigured\n+from django.db.models.loading import get_app\n from django.test import TestCase\n+from django.test.utils import override_settings\n \n from models import Empty\n \n@@ -13,3 +19,19 @@ def test_empty(self):\n         self.assertTrue(m.id is not None)\n         existing = Empty(m.id)\n         existing.save()\n+\n+class NoModelTests(TestCase):\n+    \"\"\"\n+    Test for #7198 to ensure that the proper error message is raised\n+    when attempting to load an app with no models.py file.\n+\n+    Becuase the test runner won't currently load a test module with no\n+    models.py file, this TestCase instead lives in this module.\n+\n+    It seemed like an appropriate home for it.\n+    \"\"\"\n+    @override_settings(INSTALLED_APPS=(\"modeltests.empty.no_models\",))\n+    def test_no_models(self):\n+        with self.assertRaisesRegexp(ImproperlyConfigured,\n+                    'App with label no_models is missing a models.py module.'):\n+            get_app('no_models')"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 28,
        "deletions": 1
    }
}