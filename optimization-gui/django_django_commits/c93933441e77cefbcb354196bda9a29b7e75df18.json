{
    "author": "jphalip",
    "message": "Fixed #17429 -- Ensured that `Meta.ordering=None` works the same if it were an empty list. Thanks to self[at]dicos[dot]ru for the report and to bigkevmcd for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17334 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "c93933441e77cefbcb354196bda9a29b7e75df18",
    "files": [
        {
            "sha": "72948f9cd712fce091de27af1c801dcebcd60f79",
            "filename": "django/db/models/sql/compiler.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/c93933441e77cefbcb354196bda9a29b7e75df18/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "raw_url": "https://github.com/django/django/raw/c93933441e77cefbcb354196bda9a29b7e75df18/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py?ref=c93933441e77cefbcb354196bda9a29b7e75df18",
            "patch": "@@ -347,7 +347,9 @@ def get_ordering(self):\n         elif not self.query.default_ordering:\n             ordering = self.query.order_by\n         else:\n-            ordering = self.query.order_by or self.query.model._meta.ordering\n+            ordering = (self.query.order_by\n+                        or self.query.model._meta.ordering\n+                        or [])\n         qn = self.quote_name_unless_alias\n         qn2 = self.connection.ops.quote_name\n         distinct = self.query.distinct"
        },
        {
            "sha": "ded3e8ffa7710248f1223dab565d69c6d80eab71",
            "filename": "tests/regressiontests/queries/tests.py",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/c93933441e77cefbcb354196bda9a29b7e75df18/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/c93933441e77cefbcb354196bda9a29b7e75df18/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fqueries%2Ftests.py?ref=c93933441e77cefbcb354196bda9a29b7e75df18",
            "patch": "@@ -830,6 +830,17 @@ def test_ticket8439(self):\n             1\n         )\n \n+    def test_ticket17429(self):\n+        \"\"\"\n+        Ensure that Meta.ordering=None works the same as Meta.ordering=[]\n+        \"\"\"\n+        original_ordering = Tag._meta.ordering\n+        Tag._meta.ordering = None\n+        self.assertQuerysetEqual(\n+            Tag.objects.all(),\n+            ['<Tag: t1>', '<Tag: t2>', '<Tag: t3>', '<Tag: t4>', '<Tag: t5>'],\n+        )\n+        Tag._meta.ordering = original_ordering\n \n class Queries2Tests(TestCase):\n     def setUp(self):"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 14,
        "deletions": 1
    }
}