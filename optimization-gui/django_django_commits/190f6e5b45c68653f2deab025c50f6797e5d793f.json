{
    "author": "ramiro",
    "message": "Fixed #14753 -- Fixed the test client to not raise an AssertionError when request.raw_post_data is accessed from a view it has fetched with GET. Thanks zimnyx for the report and ojii for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15254 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "190f6e5b45c68653f2deab025c50f6797e5d793f",
    "files": [
        {
            "sha": "24fe62764a883f1a694c40b68b3331145ba4bda2",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/190f6e5b45c68653f2deab025c50f6797e5d793f/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/190f6e5b45c68653f2deab025c50f6797e5d793f/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=190f6e5b45c68653f2deab025c50f6797e5d793f",
            "patch": "@@ -46,7 +46,7 @@ def __init__(self, content):\n \n     def read(self, num_bytes=None):\n         if num_bytes is None:\n-            num_bytes = self.__len or 1\n+            num_bytes = self.__len or 0\n         assert self.__len >= num_bytes, \"Cannot read more than the available bytes from the HTTP incoming data.\"\n         content = self.__content.read(num_bytes)\n         self.__len -= num_bytes"
        },
        {
            "sha": "8f39961a8258b6b59d377f502d2092f6c85e7166",
            "filename": "tests/regressiontests/test_client_regress/models.py",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/190f6e5b45c68653f2deab025c50f6797e5d793f/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/190f6e5b45c68653f2deab025c50f6797e5d793f/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py?ref=190f6e5b45c68653f2deab025c50f6797e5d793f",
            "patch": "@@ -879,3 +879,12 @@ def test_response_template_data(self):\n     def test_response_no_template(self):\n         response = self.client.get(\"/test_client_regress/request_methods/\")\n         self.assertEqual(response.template, None)\n+\n+class RawPostDataTest(TestCase):\n+    \"Access to request.raw_post_data from the test client.\"\n+    def test_raw_post_data(self):\n+        # Refs #14753\n+        try:\n+            response = self.client.get(\"/test_client_regress/raw_post_data/\")\n+        except AssertionError:\n+            self.fail(\"Accessing request.raw_post_data from a view fetched with GET by the test client shouldn't fail.\")"
        },
        {
            "sha": "31edc96a86eb962873a845f555324b9e50cd6b47",
            "filename": "tests/regressiontests/test_client_regress/urls.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/190f6e5b45c68653f2deab025c50f6797e5d793f/tests%2Fregressiontests%2Ftest_client_regress%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/190f6e5b45c68653f2deab025c50f6797e5d793f/tests%2Fregressiontests%2Ftest_client_regress%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_client_regress%2Furls.py?ref=190f6e5b45c68653f2deab025c50f6797e5d793f",
            "patch": "@@ -26,4 +26,5 @@\n     (r'^parse_unicode_json/$', views.return_json_file),\n     (r'^check_headers/$', views.check_headers),\n     (r'^check_headers_redirect/$', redirect_to, {'url': '/test_client_regress/check_headers/'}),\n+    (r'^raw_post_data/$', views.raw_post_data),\n )"
        },
        {
            "sha": "9fcb894fe096e2a7366b03d40b4dc441a7afdc1a",
            "filename": "tests/regressiontests/test_client_regress/views.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/190f6e5b45c68653f2deab025c50f6797e5d793f/tests%2Fregressiontests%2Ftest_client_regress%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/190f6e5b45c68653f2deab025c50f6797e5d793f/tests%2Fregressiontests%2Ftest_client_regress%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_client_regress%2Fviews.py?ref=190f6e5b45c68653f2deab025c50f6797e5d793f",
            "patch": "@@ -91,3 +91,6 @@ def check_headers(request):\n     \"A view that responds with value of the X-ARG-CHECK header\"\n     return HttpResponse('HTTP_X_ARG_CHECK: %s' % request.META.get('HTTP_X_ARG_CHECK', 'Undefined'))\n \n+def raw_post_data(request):\n+    \"A view that is requested with GET and accesses request.raw_post_data. Refs #14753.\"\n+    return HttpResponse(request.raw_post_data)"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 14,
        "deletions": 1
    }
}