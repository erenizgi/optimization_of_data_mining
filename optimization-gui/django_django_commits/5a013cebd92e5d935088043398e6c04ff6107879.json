{
    "author": "timgraham",
    "message": "Fixed #17073 - focused uwsgi docs to Django integration; thanks Preston Holmes.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17586 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "5a013cebd92e5d935088043398e6c04ff6107879",
    "files": [
        {
            "sha": "aa56ea089a4d47f9bdf70d8f310f84962f6c52f6",
            "filename": "docs/howto/deployment/wsgi/uwsgi.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 182,
            "changes": 195,
            "blob_url": "https://github.com/django/django/blob/5a013cebd92e5d935088043398e6c04ff6107879/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fuwsgi.txt",
            "raw_url": "https://github.com/django/django/raw/5a013cebd92e5d935088043398e6c04ff6107879/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fuwsgi.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Fdeployment%2Fwsgi%2Fuwsgi.txt?ref=5a013cebd92e5d935088043398e6c04ff6107879",
            "patch": "@@ -7,12 +7,7 @@ How to use Django with uWSGI\n uWSGI_ is a fast, self-healing and developer/sysadmin-friendly application\n container server coded in pure C.\n \n-It also provides a fast `caching framework`_ but its documentation is not the\n-purpose of this document.\n-\n .. _uWSGI: http://projects.unbit.it/uwsgi/\n-.. _caching framework: http://projects.unbit.it/uwsgi/wiki/CachingFramework\n-\n \n Prerequisite: uWSGI\n ===================\n@@ -27,89 +22,27 @@ line. For example::\n     # or install LTS (long term support)\n     pip install http://projects.unbit.it/downloads/uwsgi-lts.tar.gz\n \n-.. _installation procedures: http://projects0.unbit.it/uwsgi/wiki/Install\n-\n-Prerequisite: general concept\n-=============================\n+.. _installation procedures: http://projects.unbit.it/uwsgi/wiki/Install\n \n uWSGI model\n -----------\n \n uWSGI operates on a client-server model. Your Web server (ie. nginx, Apache)\n communicates with a django-uwsgi \"worker\" process to serve dynamic content.\n-The Web server can communicate with the uWSGI process either:\n-\n-* directly by the uWSGI protocol through a socket created by uWSGI,\n-* or by proxying HTTP requests to the minimalist HTTP server built in uWSGI.\n-\n-In the first case: the Web server can do uWSGI protocol (often with a\n-module). It can then use either a Unix domain socket (a \"named pipe\" on Win32\n-systems), or it can use a TCP socket. What you choose is a matterr of\n-preference. Usually, a TCP socket is easier because connecting to a port\n-doesn't require special permissions.\n-\n-In the second case, the Web server doesn't need to speak the uWSGI protocol. It\n-just needs to be able to proxy HTTP requests to the HTTP server built-in uWSGI.\n-The procedure is the same as proxying to any HTTP server. Note that the Web\n-server is a \"reverse proxy\" in this case.\n-\n-Configuring the uWSGI server\n-----------------------------\n-\n-In any case, when you set up your Web server, you'll just need to point its\n-uwsgi or proxy module to the host/port or socket you specified when starting\n-the uWSGI server.\n-\n-.. admonition:: Choosing the socket\n-\n-    The easiest is to set the socket to a high level (>49152) local port like\n-    127.0.0.1:49152. If the socket is a file, the system administrator must\n-    ensure that the Web server process has read, write and execute privileges\n-    on that file.\n-\n-uWSGI is highly configurable and thus there are many ways to start the\n-process. For example, uwsgi version 0.9.6.8 provides a hundred switches.  This\n-guide demonstrates the most important of them, but is not a substitute the\n-official manual and online documentation.\n-\n-uWSGI supports configuration through:\n+See uWSGI's `background documentation`_ for more detail.\n \n-* environment variables\n-* command line switches\n-* ldap\n-* ini files\n-* xml files\n-* yaml files\n+.. _background documentation: http://projects.unbit.it/uwsgi/wiki/Background\n \n-Managing the uWSGI server\n--------------------------\n+Configuring and starting the uWSGI server for Django\n+----------------------------------------------------\n \n-The system administrator controls the worker process pool by sending signals\n-to the master process. For example, the unix kill command sends such signals.\n-uWSGI can write the master process id to a \"pidfile\". A \"pidfile\" is a plain\n-text file containing just a process id.\n+uWSGI supports multiple ways to configure the process, see uWSGI's\n+`configuration documentation`_ and `examples`_\n \n-Starting the server\n--------------------\n+.. _configuration documentation: http://projects.unbit.it/uwsgi/wiki/Doc\n+.. _examples: http://projects.unbit.it/uwsgi/wiki/Example\n \n-Starting an uWSGI server is the role of the system administrator, like\n-starting the Web server. It is *not* the role of the Web server to start the\n-uWSGI server. This means:\n-\n-* the uWSGI server can be restarted or reloaded independently from the Web\n-  server,\n-* (except with Cherokee), it is the role of the system administrator to make\n-  uWSGI start on boot or reboot: either through tools like supervisor or\n-  daemontools, either directly at init level in a file like /etc/rc.local or\n-  /etc/conf.d/local\n-\n-Managing uWSGI\n-==============\n-\n-Starting the server\n--------------------\n-\n-Example command line for a Web server that understands the uWSGI protocol::\n+An example command to start a uWSGI server::\n \n     uwsgi --chdir=/path/to/your/project\n         --module='mysite.wsgi:application' \\\n@@ -156,110 +89,8 @@ Example ini configuration file usage::\n \n     uwsgi --ini uwsgi.ini\n \n-Read more `uWSGI configuration examples\n-<http://projects.unbit.it/uwsgi/wiki/Example>`_.\n-\n-.. admonition:: Massive application hosting\n-\n-    `uWSGI emperor <http://projects.unbit.it/uwsgi/wiki/Emperor>`_ is a special\n-    uWSGI process that can manage many master processes at once.\n-\n-Reloading the daemon\n---------------------\n-\n-As mentioned above, the uWSGI master process is one of the core components of\n-the uWSGI stack. The signal to brutally reload all the workers and the master\n-process is SIGTERM. Example command to brutally reload the uWSGI processes::\n-\n-    kill -TERM `cat /tmp/project-master.pid`\n-\n-Patching the daemon\n--------------------\n-\n-One of the great advantages of uWSGI is its ability to gradually restart each\n-worker without losing any requests.\n-\n-For example, uWSGI can be signaled that worker should reload the code after\n-handling their current request (if any) from bash::\n-\n-    # using kill to send the signal\n-    kill -HUP `cat /tmp/project-master.pid`\n-\n-    # if uwsgi was started with --touch-reload=/tmp/somefile\n-    touch /tmp/somefile\n-\n-Or from Python::\n-\n-    uwsgi.reload()\n-\n-Stopping the daemon\n--------------------\n-\n-If you have the process running in the foreground, it's easy enough to stop it:\n-Simply hitting ``Ctrl-C`` will stop and quit the uWSGI server. However, when\n-you're dealing with background processes, you'll need to resort to the Unix\n-``kill`` command.\n-\n-The ``kill`` is used to send a signal to the uWSGI master process. The\n-`uWSGI signals are documented online\n-<http://projects.unbit.it/uwsgi/wiki/uWSGISignals>`_. Example command to\n-completely stop the uWSGI stack::\n-\n-    kill -INT `cat /tmp/project-master.pid`\n-\n-HTTP server configuration\n-=========================\n-\n-Nginx setup\n------------\n-\n-Nginx provides the `uwsgi module <http://wiki.nginx.org/HttpUwsgiModule>`_ by\n-default since nginx 0.8.40. Configuring Nginx to use an uWSGI server is as\n-simple as setting it up to proxy requests::\n-\n-    location / {\n-        uwsgi_pass 127.0.0.1:49152;\n-        # in case of a socket file:\n-        # uwsgi_pass unix:/tmp/yourproject.sock;\n-    }\n-\n-Note that default uwsgi parameters should be included somewhere in your Nginx\n-configuration. For example::\n-\n-    http {\n-        include       uwsgi_params;\n-        # [...] normal nginx configuration here\n-    }\n-\n-Cherokee setup\n---------------\n-\n-Cherokee setup is documented in the `official Cherokee uWSGI documentation\n-<http://www.cherokee-project.com/doc/cookbook_uwsgi.html>`_.\n-\n-Lighttpd setup\n---------------\n-\n-`Lighttpd uwsgi module <http://projects.unbit.it/uwsgi/wiki/RunOnLighttpd>`_ is\n-still experimental.\n-\n-Troubleshooting\n-===============\n-\n-As usual, the first thing to do is to check the logs. This implies:\n-\n-* the web server log, which will indicate if it couldn't connect to the uWSGI\n-  process,\n-* the uWSGI log, which will indicate if an exception was thrown.\n \n-Typical gotchas:\n+See the uWSGI docs on `managing the uWSGI process`_ for information on\n+starting, stoping, and reloading the uWSGI workers.\n \n-* If the socket is a file, the Web server process should have read, write and\n-  execute permissions on the socket file. The ``--chmod-socket`` option can do\n-  it.\n-* In some cases, for instance if uWSGI was started without ``--vacuum`` or\n-  killed with ``SIGKILL``, it won't remove the socket and pidfile when it is\n-  interrupted. It is safe to remove them manually and to start uWSGI again in\n-  that case.\n-* uWSGI can start the process in the foreground, this will make errors easily\n-  visible to the system administrator.\n+.. _managing the uWSGI process: http://projects.unbit.it/uwsgi/wiki/Management"
        }
    ],
    "stats": {
        "total": 195,
        "additions": 13,
        "deletions": 182
    }
}