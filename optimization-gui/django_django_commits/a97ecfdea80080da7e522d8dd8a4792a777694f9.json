{
    "author": "spookylukey",
    "message": "Fixed #4027 - Document how to make copies of model instances\n\nThanks to Marek Kubica for the report and initial patch, and to oinopion and\nerikr for work on the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17064 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "a97ecfdea80080da7e522d8dd8a4792a777694f9",
    "files": [
        {
            "sha": "345687e4949467bc8f9efbc46070c45c5116f652",
            "filename": "docs/topics/db/queries.txt",
            "status": "modified",
            "additions": 40,
            "deletions": 0,
            "changes": 40,
            "blob_url": "https://github.com/django/django/blob/a97ecfdea80080da7e522d8dd8a4792a777694f9/docs%2Ftopics%2Fdb%2Fqueries.txt",
            "raw_url": "https://github.com/django/django/raw/a97ecfdea80080da7e522d8dd8a4792a777694f9/docs%2Ftopics%2Fdb%2Fqueries.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Fqueries.txt?ref=a97ecfdea80080da7e522d8dd8a4792a777694f9",
            "patch": "@@ -828,6 +828,46 @@ complete query set::\n \n     Entry.objects.all().delete()\n \n+.. _topics-db-queries-copy:\n+\n+Copying model instances\n+=======================\n+\n+Although there is no built-in method for copying model instances, it is\n+possible to easily create new instance with all fields' values copied. In the\n+simplest case, you can just set ``pk`` to ``None``. Using our blog example::\n+\n+    blog = Blog(name='My blog', tagline='Blogging is easy')\n+    blog.save() # post.pk == 1\n+\n+    blog.pk = None\n+    blog.save() # post.pk == 2\n+\n+Things get more complicated if you use inheritance. Consider a subclass of\n+``Blog``::\n+\n+    class ThemeBlog(Blog):\n+        theme = models.CharField(max_length=200)\n+\n+    django_blog = ThemeBlog(name='Django', tagline='Django is easy', theme = 'python')\n+    django_blog.save() # django_blog.pk == 3\n+\n+Due to how inheritance works, you have to set both ``pk`` and ``id`` to None::\n+\n+    django_blog.pk = None\n+    django_blog.id = None\n+    django_blog.save() # django_blog.pk == 4\n+\n+This process does not copy related objects. If you want to copy relations,\n+you have to write a little bit more code. In our example, ``Entry`` has a many to many\n+field to ``Author``::\n+\n+    entry = Entry.objects.all()[0] # some previous entry\n+    old_authors = entry.authors.all()\n+    entry.pk = None\n+    entry.save()\n+    entry.authors = old_authors # saves new many2many relations\n+\n .. _topics-db-queries-update:\n \n Updating multiple objects at once"
        }
    ],
    "stats": {
        "total": 40,
        "additions": 40,
        "deletions": 0
    }
}