{
    "author": "timgraham",
    "message": "Added an example of using a form wizard with different templates; thanks Lorin Hochstein for the patch.",
    "sha": "553583958d907de09c2b87788ec7454c1bde7d1c",
    "files": [
        {
            "sha": "d5231de3e5173b5714e50d2c12c8adfaa46157ba",
            "filename": "docs/ref/contrib/formtools/form-wizard.txt",
            "status": "modified",
            "additions": 61,
            "deletions": 1,
            "changes": 62,
            "blob_url": "https://github.com/django/django/blob/553583958d907de09c2b87788ec7454c1bde7d1c/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "raw_url": "https://github.com/django/django/raw/553583958d907de09c2b87788ec7454c1bde7d1c/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt?ref=553583958d907de09c2b87788ec7454c1bde7d1c",
            "patch": "@@ -155,7 +155,8 @@ or the\n :meth:`~django.views.generic.base.TemplateResponseMixin.get_template_names()`\n method, which are documented in the\n :class:`~django.views.generic.base.TemplateResponseMixin` documentation.  The\n-latter one allows you to use a different template for each form.\n+latter one allows you to use a different template for each form (:ref:`see the\n+example below <wizard-template-for-each-form>`).\n \n This template expects a ``wizard`` object that has various items attached to\n it:\n@@ -238,6 +239,65 @@ wizard's :meth:`as_view` method takes a list of your\n         (r'^contact/$', ContactWizard.as_view([ContactForm1, ContactForm2])),\n     )\n \n+.. _wizard-template-for-each-form:\n+\n+Using a different template for each form\n+----------------------------------------\n+\n+As mentioned above, you may specify a different template for each form.\n+Consider an example using a form wizard to implement a multi-step checkout\n+process for an online store. In the first step, the user specifies a billing\n+and shipping address. In the second step, the user chooses payment type. If\n+they chose to pay by credit card, they will enter credit card information in\n+the next step. In the final step, they will confirm the purchase.\n+\n+Here's what the view code might look like::\n+\n+    from django.http import HttpResponseRedirect\n+    from django.contrib.formtools.wizard.views import SessionWizardView\n+\n+    FORMS = [(\"address\", myapp.forms.AddressForm),\n+             (\"paytype\", myapp.forms.PaymentChoiceForm),\n+             (\"cc\", myapp.forms.CreditCardForm),\n+             (\"confirmation\", myapp.forms.OrderForm)]\n+\n+    TEMPLATES = {\"address\": \"checkout/billingaddress.html\",\n+                 \"paytype\": \"checkout/paymentmethod.html\",\n+                 \"cc\": \"checkout/creditcard.html\",\n+                 \"confirmation\": \"checkout/confirmation.html\"}\n+\n+    def pay_by_credit_card(wizard):\n+        \"\"\"Return true if user opts to pay by credit card\"\"\"\n+        # Get cleaned data from payment step\n+        cleaned_data = wizard.get_cleaned_data_for_step('paytype') or {'method': 'none'}\n+        # Return true if the user selected credit card\n+        return cleaned_data['method'] == 'cc'\n+\n+\n+    class OrderWizard(SessionWizardView):\n+        def get_template_names(self):\n+            return [TEMPLATES[self.steps.current]]\n+\n+        def done(self, form_list, **kwargs):\n+            do_something_with_the_form_data(form_list)\n+            return HttpResponseRedirect('/page-to-redirect-to-when-done/')\n+            ...\n+\n+The ``urls.py`` file would contain something like::\n+\n+    urlpatterns = patterns('',\n+        (r'^checkout/$', OrderWizard.as_view(FORMS, condition_dict={'cc': pay_by_credit_card})),\n+    )\n+\n+Note that the ``OrderWizard`` object is initialized with a list of pairs.\n+The first element in the pair is a string that corresponds to the name of the\n+step and the second is the form class.\n+\n+In this example, the\n+:meth:`~django.views.generic.base.TemplateResponseMixin.get_template_names()`\n+method returns a list containing a single template, which is selected based on\n+the name of the current step.\n+\n .. _wizardview-advanced-methods:\n \n Advanced ``WizardView`` methods"
        }
    ],
    "stats": {
        "total": 62,
        "additions": 61,
        "deletions": 1
    }
}