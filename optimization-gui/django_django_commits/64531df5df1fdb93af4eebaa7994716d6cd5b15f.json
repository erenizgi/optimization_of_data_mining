{
    "author": "claudep",
    "message": "Sent got_request_exception signal before handle_uncaught_exception\n\nIn some cases (notably Python 3), when handle_uncaught_exception was\nitself raising an exception, the got_request_exception was storing\nthe latter exception instead of the original exception.",
    "sha": "64531df5df1fdb93af4eebaa7994716d6cd5b15f",
    "files": [
        {
            "sha": "3fc40358d00fc0b86686af3a11005f722669f1c5",
            "filename": "django/core/handlers/base.py",
            "status": "modified",
            "additions": 5,
            "deletions": 9,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/64531df5df1fdb93af4eebaa7994716d6cd5b15f/django%2Fcore%2Fhandlers%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/64531df5df1fdb93af4eebaa7994716d6cd5b15f/django%2Fcore%2Fhandlers%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fhandlers%2Fbase.py?ref=64531df5df1fdb93af4eebaa7994716d6cd5b15f",
            "patch": "@@ -152,10 +152,8 @@ def get_response(self, request):\n                         callback, param_dict = resolver.resolve404()\n                         response = callback(request, **param_dict)\n                     except:\n-                        try:\n-                            response = self.handle_uncaught_exception(request, resolver, sys.exc_info())\n-                        finally:\n-                            signals.got_request_exception.send(sender=self.__class__, request=request)\n+                        signals.got_request_exception.send(sender=self.__class__, request=request)\n+                        response = self.handle_uncaught_exception(request, resolver, sys.exc_info())\n             except exceptions.PermissionDenied:\n                 logger.warning(\n                     'Forbidden (Permission denied): %s', request.path,\n@@ -167,12 +165,10 @@ def get_response(self, request):\n                     callback, param_dict = resolver.resolve403()\n                     response = callback(request, **param_dict)\n                 except:\n-                    try:\n-                        response = self.handle_uncaught_exception(request,\n-                            resolver, sys.exc_info())\n-                    finally:\n-                        signals.got_request_exception.send(\n+                    signals.got_request_exception.send(\n                             sender=self.__class__, request=request)\n+                    response = self.handle_uncaught_exception(request,\n+                            resolver, sys.exc_info())\n             except SystemExit:\n                 # Allow sys.exit() to actually exit. See tickets #1023 and #4701\n                 raise"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 5,
        "deletions": 9
    }
}