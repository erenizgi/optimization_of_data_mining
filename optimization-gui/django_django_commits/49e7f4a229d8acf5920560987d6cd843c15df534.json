{
    "author": "jphalip",
    "message": "Fixed #17908 -- Made some `contrib.markup` tests be skipped so they don't fail on old versions of Markdown. Thanks to Preston Holmes for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17749 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "49e7f4a229d8acf5920560987d6cd843c15df534",
    "files": [
        {
            "sha": "cccb5c8e8515f0466811ce3f2600431551ee7fdc",
            "filename": "django/contrib/markup/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/49e7f4a229d8acf5920560987d6cd843c15df534/django%2Fcontrib%2Fmarkup%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/49e7f4a229d8acf5920560987d6cd843c15df534/django%2Fcontrib%2Fmarkup%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmarkup%2Ftests.py?ref=49e7f4a229d8acf5920560987d6cd843c15df534",
            "patch": "@@ -12,6 +12,7 @@\n \n try:\n     import markdown\n+    markdown_version = getattr(markdown, \"version_info\", 0)\n except ImportError:\n     markdown = None\n \n@@ -36,7 +37,6 @@ class Templates(unittest.TestCase):\n \n .. _link: http://www.example.com/\"\"\"\n \n-\n     @unittest.skipUnless(textile, 'texttile not installed')\n     def test_textile(self):\n         t = Template(\"{% load markup %}{{ textile_content|textile }}\")\n@@ -58,14 +58,14 @@ def test_markdown(self):\n         pattern = re.compile(\"\"\"<p>Paragraph 1\\s*</p>\\s*<h2>\\s*An h2</h2>\"\"\")\n         self.assertTrue(pattern.match(rendered))\n \n-    @unittest.skipUnless(markdown, 'markdown no installed')\n+    @unittest.skipUnless(markdown and markdown_version >= (2,1), 'markdown >= 2.1 not installed')\n     def test_markdown_attribute_disable(self):\n         t = Template(\"{% load markup %}{{ markdown_content|markdown:'safe' }}\")\n         markdown_content = \"{@onclick=alert('hi')}some paragraph\"\n         rendered = t.render(Context({'markdown_content':markdown_content})).strip()\n         self.assertTrue('@' in rendered)\n \n-    @unittest.skipUnless(markdown, 'markdown no installed')\n+    @unittest.skipUnless(markdown and markdown_version >= (2,1), 'markdown >= 2.1 not installed')\n     def test_markdown_attribute_enable(self):\n         t = Template(\"{% load markup %}{{ markdown_content|markdown }}\")\n         markdown_content = \"{@onclick=alert('hi')}some paragraph\""
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}