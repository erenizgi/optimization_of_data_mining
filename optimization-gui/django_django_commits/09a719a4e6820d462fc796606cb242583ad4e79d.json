{
    "author": "claudep",
    "message": "Fixed #7833 -- Improved UserCreationForm password validation\n\nMake UserCreationForm password validation similar to\nSetPasswordForm and AdminPasswordChangeForm, so as the match\ncheck is only done when both passwords are supplied.\nThanks Mitar for the suggestion.",
    "sha": "09a719a4e6820d462fc796606cb242583ad4e79d",
    "files": [
        {
            "sha": "dfd039f018098e5d0971b37e5fbca2745658ba0b",
            "filename": "django/contrib/auth/forms.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/09a719a4e6820d462fc796606cb242583ad4e79d/django%2Fcontrib%2Fauth%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/09a719a4e6820d462fc796606cb242583ad4e79d/django%2Fcontrib%2Fauth%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fforms.py?ref=09a719a4e6820d462fc796606cb242583ad4e79d",
            "patch": "@@ -89,9 +89,9 @@ def clean_username(self):\n         raise forms.ValidationError(self.error_messages['duplicate_username'])\n \n     def clean_password2(self):\n-        password1 = self.cleaned_data.get(\"password1\", \"\")\n-        password2 = self.cleaned_data[\"password2\"]\n-        if password1 != password2:\n+        password1 = self.cleaned_data.get(\"password1\")\n+        password2 = self.cleaned_data.get(\"password2\")\n+        if password1 and password2 and password1 != password2:\n             raise forms.ValidationError(\n                 self.error_messages['password_mismatch'])\n         return password2"
        },
        {
            "sha": "13b8dd1216b4139f79bf18f3970de81f20db6d04",
            "filename": "django/contrib/auth/tests/forms.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/09a719a4e6820d462fc796606cb242583ad4e79d/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/09a719a4e6820d462fc796606cb242583ad4e79d/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py?ref=09a719a4e6820d462fc796606cb242583ad4e79d",
            "patch": "@@ -65,6 +65,7 @@ def test_both_passwords(self):\n         form = UserCreationForm(data)\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form['password1'].errors, required_error)\n+        self.assertEqual(form['password2'].errors, [])\n \n     def test_success(self):\n         # The success case."
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}