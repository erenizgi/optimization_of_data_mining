{
    "author": "jphalip",
    "message": "Fixed #17163 -- Added the `NamedUrlWizardView.get_step_url()` method. Thanks, Bradley Ayers.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17235 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "355f7fc564cb4dc67a84075664bf98ac203d2b13",
    "files": [
        {
            "sha": "aac29bf6ab3fe304f4568bb2d0e7972e6bb40252",
            "filename": "django/contrib/formtools/wizard/views.py",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/355f7fc564cb4dc67a84075664bf98ac203d2b13/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/355f7fc564cb4dc67a84075664bf98ac203d2b13/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py?ref=355f7fc564cb4dc67a84075664bf98ac203d2b13",
            "patch": "@@ -591,6 +591,9 @@ def get_initkwargs(cls, *args, **kwargs):\n             'step name \"%s\" is reserved for \"done\" view' % initkwargs['done_step_name']\n         return initkwargs\n \n+    def get_step_url(self, step):\n+        return reverse(self.url_name, kwargs={'step': step})\n+\n     def get(self, *args, **kwargs):\n         \"\"\"\n         This renders the form or, if needed, does the http redirects.\n@@ -604,10 +607,8 @@ def get(self, *args, **kwargs):\n                 query_string = \"?%s\" % self.request.GET.urlencode()\n             else:\n                 query_string = \"\"\n-            next_step_url = reverse(self.url_name, kwargs={\n-                'step': self.steps.current,\n-            }) + query_string\n-            return redirect(next_step_url)\n+            return redirect(self.get_step_url(self.steps.current)\n+                            + query_string)\n \n         # is the current step the \"done\" name/view?\n         elif step_url == self.done_step_name:\n@@ -636,7 +637,7 @@ def get(self, *args, **kwargs):\n         # invalid step name, reset to first and redirect.\n         else:\n             self.storage.current_step = self.steps.first\n-            return redirect(self.url_name, step=self.steps.first)\n+            return redirect(self.get_step_url(self.steps.first))\n \n     def post(self, *args, **kwargs):\n         \"\"\"\n@@ -646,7 +647,7 @@ def post(self, *args, **kwargs):\n         wizard_goto_step = self.request.POST.get('wizard_goto_step', None)\n         if wizard_goto_step and wizard_goto_step in self.get_form_list():\n             self.storage.current_step = wizard_goto_step\n-            return redirect(self.url_name, step=wizard_goto_step)\n+            return redirect(self.get_step_url(wizard_goto_step))\n         return super(NamedUrlWizardView, self).post(*args, **kwargs)\n \n     def get_context_data(self, form, **kwargs):\n@@ -665,23 +666,23 @@ def render_next_step(self, form, **kwargs):\n         \"\"\"\n         next_step = self.get_next_step()\n         self.storage.current_step = next_step\n-        return redirect(self.url_name, step=next_step)\n+        return redirect(self.get_step_url(next_step))\n \n     def render_revalidation_failure(self, failed_step, form, **kwargs):\n         \"\"\"\n         When a step fails, we have to redirect the user to the first failing\n         step.\n         \"\"\"\n         self.storage.current_step = failed_step\n-        return redirect(self.url_name, step=failed_step)\n+        return redirect(self.get_step_url(failed_step))\n \n     def render_done(self, form, **kwargs):\n         \"\"\"\n         When rendering the done view, we have to redirect first (if the URL\n         name doesn't fit).\n         \"\"\"\n         if kwargs.get('step', None) != self.done_step_name:\n-            return redirect(self.url_name, step=self.done_step_name)\n+            return redirect(self.get_step_url(self.done_step_name))\n         return super(NamedUrlWizardView, self).render_done(form, **kwargs)\n \n "
        },
        {
            "sha": "a3d9673db9af589eada39a8bce6cee1d0cf0d50b",
            "filename": "docs/ref/contrib/formtools/form-wizard.txt",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/355f7fc564cb4dc67a84075664bf98ac203d2b13/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "raw_url": "https://github.com/django/django/raw/355f7fc564cb4dc67a84075664bf98ac203d2b13/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt?ref=355f7fc564cb4dc67a84075664bf98ac203d2b13",
            "patch": "@@ -557,8 +557,8 @@ an ``instance_dict`` argument that should contain instances of ``ModelForm`` and\n ``ModelFormSet``.  Similarly to :attr:`~WizardView.initial_dict`, these\n dictionary key values should be equal to the step number in the form list.\n \n-Usage of NamedUrlWizardView\n-===========================\n+Usage of ``NamedUrlWizardView``\n+===============================\n \n .. class:: NamedUrlWizardView\n \n@@ -595,3 +595,15 @@ Example code for the changed ``urls.py`` file::\n         url(r'^contact/(?P<step>.+)/$', contact_wizard, name='contact_step'),\n         url(r'^contact/$', contact_wizard, name='contact'),\n     )\n+\n+Advanced ``NamedUrlWizardView`` methods\n+=======================================\n+\n+.. method:: NamedUrlWizardView.get_step_url(step)\n+\n+    This method returns the URL for a specific step.\n+\n+    Default implementation::\n+\n+        def get_step_url(self, step):\n+            return reverse(self.url_name, kwargs={'step': step})"
        }
    ],
    "stats": {
        "total": 35,
        "additions": 24,
        "deletions": 11
    }
}