{
    "author": "jphalip",
    "message": "Fixed #16676 -- Corrected the behavior of the 'add' template filter to return an empty string instead of the given value unchanged in the case of an invalid use. Thanks to dtrebbien for the report and to Aymeric Augustin for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16851 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "436aeb6e1513085d09e33683cd0f60ee4fb746a7",
    "files": [
        {
            "sha": "77a322415787aaa27a1591e8215c4001d1ddde71",
            "filename": "django/template/defaultfilters.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/436aeb6e1513085d09e33683cd0f60ee4fb746a7/django%2Ftemplate%2Fdefaultfilters.py",
            "raw_url": "https://github.com/django/django/raw/436aeb6e1513085d09e33683cd0f60ee4fb746a7/django%2Ftemplate%2Fdefaultfilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaultfilters.py?ref=436aeb6e1513085d09e33683cd0f60ee4fb746a7",
            "patch": "@@ -665,8 +665,8 @@ def add(value, arg):\n     except (ValueError, TypeError):\n         try:\n             return value + arg\n-        except:\n-            return value\n+        except Exception:\n+            return ''\n add.is_safe = False\n \n def get_digit(value, arg):"
        },
        {
            "sha": "6b7934935dff0ace8dd2ff4c821ba27ec9b221c4",
            "filename": "tests/regressiontests/templates/filters.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/436aeb6e1513085d09e33683cd0f60ee4fb746a7/tests%2Fregressiontests%2Ftemplates%2Ffilters.py",
            "raw_url": "https://github.com/django/django/raw/436aeb6e1513085d09e33683cd0f60ee4fb746a7/tests%2Fregressiontests%2Ftemplates%2Ffilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ffilters.py?ref=436aeb6e1513085d09e33683cd0f60ee4fb746a7",
            "patch": "@@ -346,10 +346,10 @@ def get_filter_tests():\n         #Ticket 9520: Make sure |date doesn't blow up on non-dates\n         'date03': (r'{{ d|date:\"m\" }}', {'d': 'fail_string'}, ''),\n \n-         # Tests for #11687\n+         # Tests for #11687 and #16676\n          'add01': (r'{{ i|add:\"5\" }}', {'i': 2000}, '2005'),\n-         'add02': (r'{{ i|add:\"napis\" }}', {'i': 2000}, '2000'),\n-         'add03': (r'{{ i|add:16 }}', {'i': 'not_an_int'}, 'not_an_int'),\n+         'add02': (r'{{ i|add:\"napis\" }}', {'i': 2000}, ''),\n+         'add03': (r'{{ i|add:16 }}', {'i': 'not_an_int'}, ''),\n          'add04': (r'{{ i|add:\"16\" }}', {'i': 'not_an_int'}, 'not_an_int16'),\n          'add05': (r'{{ l1|add:l2 }}', {'l1': [1, 2], 'l2': [3, 4]}, '[1, 2, 3, 4]'),\n          'add06': (r'{{ t1|add:t2 }}', {'t1': (3, 4), 't2': (1, 2)}, '(3, 4, 1, 2)'),"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 5,
        "deletions": 5
    }
}