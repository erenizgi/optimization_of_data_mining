{
    "author": "jezdez",
    "message": "Stopped the collectstatic management from being wastful with file handlers. Refs r17519.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17521 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "803de60c088e7a439b5549575e1e3a082ae26d54",
    "files": [
        {
            "sha": "7004ff0454e91137dfb77a47e9529e38915f5289",
            "filename": "django/contrib/staticfiles/management/commands/collectstatic.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/803de60c088e7a439b5549575e1e3a082ae26d54/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py",
            "raw_url": "https://github.com/django/django/raw/803de60c088e7a439b5549575e1e3a082ae26d54/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py?ref=803de60c088e7a439b5549575e1e3a082ae26d54",
            "patch": "@@ -107,7 +107,7 @@ def collect(self):\n                     prefixed_path = os.path.join(storage.prefix, path)\n                 else:\n                     prefixed_path = path\n-                found_files[prefixed_path] = storage.open(path)\n+                found_files[prefixed_path] = (storage, path)\n                 handler(path, prefixed_path, storage)\n \n         # Here we check if the storage backend has a post_process"
        },
        {
            "sha": "0293363fc4ced8875b4d37c02d2a00480fedf145",
            "filename": "django/contrib/staticfiles/storage.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/803de60c088e7a439b5549575e1e3a082ae26d54/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "raw_url": "https://github.com/django/django/raw/803de60c088e7a439b5549575e1e3a082ae26d54/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fstorage.py?ref=803de60c088e7a439b5549575e1e3a082ae26d54",
            "patch": "@@ -198,7 +198,8 @@ def post_process(self, paths, dry_run=False, **options):\n \n             # use the original, local file, not the copied-but-unprocessed\n             # file, which might be somewhere far away, like S3\n-            with paths[name] as original_file:\n+            storage, path = paths[name]\n+            with storage.open(path) as original_file:\n \n                 # generate the hash with the original content, even for\n                 # adjustable files."
        },
        {
            "sha": "368154cabf6e438609f675797fc6bbc9e72b0a82",
            "filename": "docs/ref/contrib/staticfiles.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/803de60c088e7a439b5549575e1e3a082ae26d54/docs%2Fref%2Fcontrib%2Fstaticfiles.txt",
            "raw_url": "https://github.com/django/django/raw/803de60c088e7a439b5549575e1e3a082ae26d54/docs%2Fref%2Fcontrib%2Fstaticfiles.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fstaticfiles.txt?ref=803de60c088e7a439b5549575e1e3a082ae26d54",
            "patch": "@@ -281,8 +281,8 @@ StaticFilesStorage\n     .. versionadded:: 1.4\n \n     This method is called by the :djadmin:`collectstatic` management command\n-    after each run and gets passed the paths of found files, as well as the\n-    command line options.\n+    after each run and gets passed the local storages and paths of found\n+    files as a dictionary, as well as the command line options.\n \n     The :class:`~django.contrib.staticfiles.storage.CachedStaticFilesStorage`\n     uses this behind the scenes to replace the paths with their hashed"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 5,
        "deletions": 4
    }
}