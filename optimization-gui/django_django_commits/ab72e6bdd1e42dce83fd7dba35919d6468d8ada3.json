{
    "author": "ramiro",
    "message": "Tweaked a tests tweak from r16960 so it uses the right model.\n\nWhen testing for permission enforcement in the admin for m2m\nrelationships we were erroneously using the ID of the related model\ninstead of using the ID of the corresponding automatically created\nintermediate model. This manifested as a failure under Oracle but can\nfail with any backend if the IDs of both models diverge.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17001 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ab72e6bdd1e42dce83fd7dba35919d6468d8ada3",
    "files": [
        {
            "sha": "c2e3bbc3973d181cc2193dd30411daa16d7ead16",
            "filename": "tests/regressiontests/admin_inlines/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ab72e6bdd1e42dce83fd7dba35919d6468d8ada3/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ab72e6bdd1e42dce83fd7dba35919d6468d8ada3/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py?ref=ab72e6bdd1e42dce83fd7dba35919d6468d8ada3",
            "patch": "@@ -233,7 +233,9 @@ def setUp(self):\n         author = Author.objects.create(pk=1, name=u'The Author')\n         book = author.books.create(name=u'The inline Book')\n         self.author_change_url = '/admin/admin_inlines/author/%i/' % author.id\n-        self.book_id = book.id\n+        # Get the ID of the automatically created intermediate model for thw Author-Book m2m\n+        author_book_auto_m2m_intermediate = Author.books.through.objects.get(author=author, book=book)\n+        self.author_book_auto_m2m_intermediate_id = author_book_auto_m2m_intermediate.pk\n \n         holder = Holder2.objects.create(dummy=13)\n         inner2 = Inner2.objects.create(dummy=42, holder=holder)\n@@ -311,7 +313,7 @@ def test_inline_change_m2m_change_perm(self):\n         self.assertContains(response, '<h2>Author-book relationships</h2>')\n         self.assertContains(response, 'Add another Author-Book Relationship')\n         self.assertContains(response, 'value=\"4\" id=\"id_Author_books-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"Author_books-0-id\" value=\"%i\"' % self.book_id)\n+        self.assertContains(response, '<input type=\"hidden\" name=\"Author_books-0-id\" value=\"%i\"' % self.author_book_auto_m2m_intermediate_id)\n         self.assertContains(response, 'id=\"id_Author_books-0-DELETE\"')\n \n     def test_inline_change_fk_add_perm(self):"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}