{
    "author": "claudep",
    "message": "Reported OpenLayersWidget exceptions through logging",
    "sha": "9d2e1f065ede189f65e79eb3cb33a33b460a4351",
    "files": [
        {
            "sha": "f4379be7f317599e0cc5cc038ab72f330dbb802f",
            "filename": "django/contrib/gis/admin/widgets.py",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/9d2e1f065ede189f65e79eb3cb33a33b460a4351/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/9d2e1f065ede189f65e79eb3cb33a33b460a4351/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fadmin%2Fwidgets.py?ref=9d2e1f065ede189f65e79eb3cb33a33b460a4351",
            "patch": "@@ -1,3 +1,5 @@\n+import logging\n+\n from django.forms.widgets import Textarea\n from django.template import loader, Context\n from django.templatetags.static import static\n@@ -10,6 +12,8 @@\n # Creating a template context that contains Django settings\n # values needed by admin map templates.\n geo_context = Context({'LANGUAGE_BIDI' : translation.get_language_bidi()})\n+logger = logging.getLogger('django.contrib.gis')\n+\n \n class OpenLayersWidget(Textarea):\n     \"\"\"\n@@ -29,7 +33,11 @@ def render(self, name, value, attrs=None):\n         if isinstance(value, six.string_types):\n             try:\n                 value = GEOSGeometry(value)\n-            except (GEOSException, ValueError):\n+            except (GEOSException, ValueError) as err:\n+                logger.error(\n+                    \"Error creating geometry from value '%s' (%s)\" % (\n+                    value, err)\n+                )\n                 value = None\n \n         if value and value.geom_type.upper() != self.geom_type:\n@@ -56,7 +64,11 @@ def render(self, name, value, attrs=None):\n                     ogr = value.ogr\n                     ogr.transform(srid)\n                     wkt = ogr.wkt\n-                except OGRException:\n+                except OGRException as err:\n+                    logger.error(\n+                        \"Error transforming geometry from srid '%s' to srid '%s' (%s)\" % (\n+                        value.srid, srid, err)\n+                    )\n                     wkt = ''\n             else:\n                 wkt = value.wkt"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 14,
        "deletions": 2
    }
}