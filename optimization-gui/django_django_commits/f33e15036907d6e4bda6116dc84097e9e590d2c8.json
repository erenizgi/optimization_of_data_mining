{
    "author": "spookylukey",
    "message": "Documented utils.html.escape and conditional_escape",
    "sha": "f33e15036907d6e4bda6116dc84097e9e590d2c8",
    "files": [
        {
            "sha": "fe2e6b7a29b4934f02370835a7eb63ad938124b2",
            "filename": "django/utils/html.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/f33e15036907d6e4bda6116dc84097e9e590d2c8/django%2Futils%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/f33e15036907d6e4bda6116dc84097e9e590d2c8/django%2Futils%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhtml.py?ref=f33e15036907d6e4bda6116dc84097e9e590d2c8",
            "patch": "@@ -31,11 +31,11 @@\n trailing_empty_content_re = re.compile(r'(?:<p>(?:&nbsp;|\\s|<br \\/>)*?</p>\\s*)+\\Z')\n del x # Temporary variable\n \n-def escape(html):\n+def escape(text):\n     \"\"\"\n-    Returns the given HTML with ampersands, quotes and angle brackets encoded.\n+    Returns the given text with ampersands, quotes and angle brackets encoded for use in HTML.\n     \"\"\"\n-    return mark_safe(force_unicode(html).replace('&', '&amp;').replace('<', '&lt;').replace('>', '&gt;').replace('\"', '&quot;').replace(\"'\", '&#39;'))\n+    return mark_safe(force_unicode(text).replace('&', '&amp;').replace('<', '&lt;').replace('>', '&gt;').replace('\"', '&quot;').replace(\"'\", '&#39;'))\n escape = allow_lazy(escape, unicode)\n \n _base_js_escapes = (\n@@ -63,14 +63,14 @@ def escapejs(value):\n     return value\n escapejs = allow_lazy(escapejs, unicode)\n \n-def conditional_escape(html):\n+def conditional_escape(text):\n     \"\"\"\n     Similar to escape(), except that it doesn't operate on pre-escaped strings.\n     \"\"\"\n-    if isinstance(html, SafeData):\n-        return html\n+    if isinstance(text, SafeData):\n+        return text\n     else:\n-        return escape(html)\n+        return escape(text)\n \n def linebreaks(value, autoescape=False):\n     \"\"\"Converts newlines into <p> and <br />s.\"\"\""
        },
        {
            "sha": "549812296bcb95aaef6e49ba5da110500e673aa9",
            "filename": "docs/ref/utils.txt",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/f33e15036907d6e4bda6116dc84097e9e590d2c8/docs%2Fref%2Futils.txt",
            "raw_url": "https://github.com/django/django/raw/f33e15036907d6e4bda6116dc84097e9e590d2c8/docs%2Fref%2Futils.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Futils.txt?ref=f33e15036907d6e4bda6116dc84097e9e590d2c8",
            "patch": "@@ -387,6 +387,28 @@ Atom1Feed\n     input is a proper string, then add support for lazy translation objects at the\n     end.\n \n+``django.utils.html``\n+=====================\n+\n+.. module:: django.utils.html\n+   :synopsis: HTML helper functions\n+\n+Usually you should build up HTML using Django's templates to make use of its\n+autoescape mechanism, using the utilities in :mod:`django.utils.safestring`\n+where appropriate. This module provides some additional low level utilitiesfor\n+escaping HTML.\n+\n+.. function:: escape(text)\n+\n+    Returns the given text with ampersands, quotes and angle brackets encoded\n+    for use in HTML. The input is first passed through\n+    :func:`~django.utils.encoding.force_unicode` and the output has\n+    :func:`~django.utils.safestring.mark_safe` applied.\n+\n+.. function:: conditional_escape(text)\n+\n+    Similar to ``escape()``, except that it doesn't operate on pre-escaped strings,\n+    so it will not double escape.\n \n ``django.utils.http``\n ====================="
        }
    ],
    "stats": {
        "total": 36,
        "additions": 29,
        "deletions": 7
    }
}