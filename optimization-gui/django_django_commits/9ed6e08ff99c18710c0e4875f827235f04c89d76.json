{
    "author": "aaugustin",
    "message": "Removed deprecated URLField.verify_exists.\n\nThe deprecation schedule was slightly accelerated because of possible security ramifications.\n\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17847 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "9ed6e08ff99c18710c0e4875f827235f04c89d76",
    "files": [
        {
            "sha": "a88ea409f678f742351ee1b4b4293cd5d3413379",
            "filename": "django/conf/global_settings.py",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/django%2Fconf%2Fglobal_settings.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/django%2Fconf%2Fglobal_settings.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Fglobal_settings.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -403,11 +403,6 @@\n # Hint: you really don't!\n TRANSACTIONS_MANAGED = False\n \n-# The User-Agent string to use when checking for URL validity through the\n-# isExistingURL validator.\n-from django import get_version\n-URL_VALIDATOR_USER_AGENT = \"Django/%s (https://www.djangoproject.com)\" % get_version()\n-\n # The tablespaces to use for each model when not specified otherwise.\n DEFAULT_TABLESPACE = ''\n DEFAULT_INDEX_TABLESPACE = ''"
        },
        {
            "sha": "7d7f473b6dd988e4bf47079d9560cd6e7114df5d",
            "filename": "django/core/validators.py",
            "status": "modified",
            "additions": 1,
            "deletions": 65,
            "changes": 66,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/django%2Fcore%2Fvalidators.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/django%2Fcore%2Fvalidators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fvalidators.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -1,6 +1,4 @@\n import re\n-import urllib\n-import urllib2\n import urlparse\n \n from django.core.exceptions import ValidationError\n@@ -11,13 +9,6 @@\n # These values, if given to validate(), will trigger the self.required check.\n EMPTY_VALUES = (None, '', [], (), {})\n \n-try:\n-    from django.conf import settings\n-    URL_VALIDATOR_USER_AGENT = settings.URL_VALIDATOR_USER_AGENT\n-except ImportError:\n-    # It's OK if Django settings aren't configured.\n-    URL_VALIDATOR_USER_AGENT = 'Django (http://www.djangoproject.com/)'\n-\n class RegexValidator(object):\n     regex = ''\n     message = _(u'Enter a valid value.')\n@@ -51,11 +42,8 @@ class URLValidator(RegexValidator):\n         r'(?::\\d+)?' # optional port\n         r'(?:/?|[/?]\\S+)$', re.IGNORECASE)\n \n-    def __init__(self, verify_exists=False,\n-                 validator_user_agent=URL_VALIDATOR_USER_AGENT):\n+    def __init__(self):\n         super(URLValidator, self).__init__()\n-        self.verify_exists = verify_exists\n-        self.user_agent = validator_user_agent\n \n     def __call__(self, value):\n         try:\n@@ -76,58 +64,6 @@ def __call__(self, value):\n         else:\n             url = value\n \n-        if self.verify_exists:\n-            import warnings\n-            warnings.warn(\n-                \"The URLField verify_exists argument has intractable security \"\n-                \"and performance issues. Accordingly, it has been deprecated.\",\n-                DeprecationWarning\n-                )\n-\n-            headers = {\n-                \"Accept\": \"text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5\",\n-                \"Accept-Language\": \"en-us,en;q=0.5\",\n-                \"Accept-Charset\": \"ISO-8859-1,utf-8;q=0.7,*;q=0.7\",\n-                \"Connection\": \"close\",\n-                \"User-Agent\": self.user_agent,\n-            }\n-            url = url.encode('utf-8')\n-            # Quote characters from the unreserved set, refs #16812\n-            url = urllib.quote(url, \"!*'();:@&=+$,/?#[]\")\n-            broken_error = ValidationError(\n-                _(u'This URL appears to be a broken link.'), code='invalid_link')\n-            try:\n-                req = urllib2.Request(url, None, headers)\n-                req.get_method = lambda: 'HEAD'\n-                #Create an opener that does not support local file access\n-                opener = urllib2.OpenerDirector()\n-\n-                #Don't follow redirects, but don't treat them as errors either\n-                error_nop = lambda *args, **kwargs: True\n-                http_error_processor = urllib2.HTTPErrorProcessor()\n-                http_error_processor.http_error_301 = error_nop\n-                http_error_processor.http_error_302 = error_nop\n-                http_error_processor.http_error_307 = error_nop\n-\n-                handlers = [urllib2.UnknownHandler(),\n-                            urllib2.HTTPHandler(),\n-                            urllib2.HTTPDefaultErrorHandler(),\n-                            urllib2.FTPHandler(),\n-                            http_error_processor]\n-                try:\n-                    import ssl\n-                except ImportError:\n-                    # Python isn't compiled with SSL support\n-                    pass\n-                else:\n-                    handlers.append(urllib2.HTTPSHandler())\n-                map(opener.add_handler, handlers)\n-                opener.open(req, timeout=10)\n-            except ValueError:\n-                raise ValidationError(_(u'Enter a valid URL.'), code='invalid')\n-            except: # urllib2.URLError, httplib.InvalidURL, etc.\n-                raise broken_error\n-\n \n def validate_integer(value):\n     try:"
        },
        {
            "sha": "121797a58141d45ad80958f581f4a4eda46179ca",
            "filename": "django/db/models/fields/__init__.py",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2F__init__.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -890,7 +890,7 @@ class EmailField(CharField):\n     description = _(\"E-mail address\")\n \n     def __init__(self, *args, **kwargs):\n-        # max_length should be overridden to 254 characters to be fully \n+        # max_length should be overridden to 254 characters to be fully\n         # compliant with RFCs 3696 and 5321\n \n         kwargs['max_length'] = kwargs.get('max_length', 75)\n@@ -1251,12 +1251,10 @@ def formfield(self, **kwargs):\n class URLField(CharField):\n     description = _(\"URL\")\n \n-    def __init__(self, verbose_name=None, name=None, verify_exists=False,\n-                 **kwargs):\n+    def __init__(self, verbose_name=None, name=None, **kwargs):\n         kwargs['max_length'] = kwargs.get('max_length', 200)\n         CharField.__init__(self, verbose_name, name, **kwargs)\n-        self.validators.append(\n-            validators.URLValidator(verify_exists=verify_exists))\n+        self.validators.append(validators.URLValidator())\n \n     def formfield(self, **kwargs):\n         # As with CharField, this will cause URL validation to be performed"
        },
        {
            "sha": "216bb4c489816affd95f1e91010e12690098e12c",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -598,14 +598,11 @@ def to_python(self, data):\n class URLField(CharField):\n     default_error_messages = {\n         'invalid': _(u'Enter a valid URL.'),\n-        'invalid_link': _(u'This URL appears to be a broken link.'),\n     }\n \n-    def __init__(self, max_length=None, min_length=None, verify_exists=False,\n-            validator_user_agent=validators.URL_VALIDATOR_USER_AGENT, *args, **kwargs):\n-        super(URLField, self).__init__(max_length, min_length, *args,\n-                                       **kwargs)\n-        self.validators.append(validators.URLValidator(verify_exists=verify_exists, validator_user_agent=validator_user_agent))\n+    def __init__(self, max_length=None, min_length=None, *args, **kwargs):\n+        super(URLField, self).__init__(max_length, min_length, *args, **kwargs)\n+        self.validators.append(validators.URLValidator())\n \n     def to_python(self, value):\n "
        },
        {
            "sha": "4956a71b448d3cd2d96b0114feefd2a9bc152917",
            "filename": "docs/ref/forms/fields.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 15,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Fref%2Fforms%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Fref%2Fforms%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Ffields.txt?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -789,7 +789,7 @@ For each field, we describe the default widget used if you don't specify\n     * Empty value: ``''`` (an empty string)\n     * Normalizes to: A Unicode object.\n     * Validates that the given value is a valid URL.\n-    * Error message keys: ``required``, ``invalid``, ``invalid_link``\n+    * Error message keys: ``required``, ``invalid``\n \n     Takes the following optional arguments:\n \n@@ -798,20 +798,6 @@ For each field, we describe the default widget used if you don't specify\n \n     These are the same as ``CharField.max_length`` and ``CharField.min_length``.\n \n-    .. attribute:: verify_exists\n-\n-        If ``True``, the validator will attempt to load the given URL, raising\n-        ``ValidationError`` if the page gives a 404. Defaults to ``False``.\n-\n-        .. deprecated:: 1.4\n-            ``verify_exists`` was deprecated for security reasons and will be removed in\n-            Django 1.5. This deprecation also removes ``validator_user_agent``.\n-\n-    .. attribute:: validator_user_agent\n-\n-        String used as the user-agent used when checking for a URL's existence.\n-        Defaults to the value of the :setting:`URL_VALIDATOR_USER_AGENT` setting.\n-\n .. versionchanged:: 1.2\n    The URLField previously did not recognize URLs as valid that contained an IDN\n    (Internationalized Domain Name; a domain name containing unicode characters)"
        },
        {
            "sha": "5521a0ed243661bb096d749cec8c04e1fbaa58cb",
            "filename": "docs/ref/models/fields.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 20,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Fref%2Fmodels%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Fref%2Fmodels%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Ffields.txt?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -484,10 +484,10 @@ A :class:`CharField` that checks that the value is a valid email address.\n .. admonition:: Incompliance to RFCs\n \n     The default 75 character ``max_length`` is not capable of storing all\n-    possible RFC3696/5321-compliant email addresses. In order to store all \n-    possible valid email addresses, a ``max_length`` of 254 is required. \n-    The default ``max_length`` of 75 exists for historical reasons. The \n-    default has not been changed in order to maintain backwards \n+    possible RFC3696/5321-compliant email addresses. In order to store all\n+    possible valid email addresses, a ``max_length`` of 254 is required.\n+    The default ``max_length`` of 75 exists for historical reasons. The\n+    default has not been changed in order to maintain backwards\n     compatibility with existing uses of :class:`EmailField`.\n \n ``FileField``\n@@ -887,23 +887,9 @@ shortcuts.\n ``URLField``\n ------------\n \n-.. class:: URLField([verify_exists=False, max_length=200, **options])\n+.. class:: URLField([max_length=200, **options])\n \n-A :class:`CharField` for a URL. Has one extra optional argument:\n-\n-.. deprecated:: 1.4\n-   ``verify_exists`` is deprecated for security reasons as of 1.4 and will be\n-   removed in Django 1.5. Prior to 1.3.1, the default value was ``True``.\n-\n-.. attribute:: URLField.verify_exists\n-\n-    If ``True``, the URL given will be checked for existence (i.e.,\n-    the URL actually loads and doesn't give a 404 response) using a\n-    ``HEAD`` request. Redirects are allowed, but will not be followed.\n-\n-    Note that when you're using the single-threaded development server,\n-    validating a URL being served by the same server will hang. This should not\n-    be a problem for multithreaded servers.\n+A :class:`CharField` for a URL.\n \n The admin represents this as an ``<input type=\"text\">`` (a single-line input).\n "
        },
        {
            "sha": "a1a0c76470fcd4b8b3caad6e54437cec56f50968",
            "filename": "docs/ref/settings.txt",
            "status": "modified",
            "additions": 9,
            "deletions": 12,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Fref%2Fsettings.txt",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Fref%2Fsettings.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsettings.txt?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -2148,18 +2148,6 @@ to ensure your processes are running in the correct environment.\n \n .. _pytz: http://pytz.sourceforge.net/\n \n-.. setting:: URL_VALIDATOR_USER_AGENT\n-\n-URL_VALIDATOR_USER_AGENT\n-------------------------\n-\n-Default: ``Django/<version> (https://www.djangoproject.com/)``\n-\n-The string to use as the ``User-Agent`` header when checking to see if\n-URLs exist (see the ``verify_exists`` option on\n-:class:`~django.db.models.URLField`). This setting was deprecated in\n-1.3.1 along with ``verify_exists`` and will be removed in 1.4.\n-\n .. setting:: USE_ETAGS\n \n USE_ETAGS\n@@ -2344,3 +2332,12 @@ IGNORABLE_404_STARTS\n \n .. deprecated:: 1.4\n    This setting has been superseded by :setting:`IGNORABLE_404_URLS`.\n+\n+.. setting:: URL_VALIDATOR_USER_AGENT\n+\n+URL_VALIDATOR_USER_AGENT\n+------------------------\n+\n+.. deprecated:: 1.5\n+    This value was used as the ``User-Agent`` header when checking if a URL\n+    exists, a feature that was removed due to security and performance issues."
        },
        {
            "sha": "5b83d26d87d8959b2ba49d0bfd1ec2107769cbc0",
            "filename": "docs/ref/validators.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 19,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Fref%2Fvalidators.txt",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Fref%2Fvalidators.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fvalidators.txt?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -88,26 +88,10 @@ to, or in lieu of custom ``field.clean()`` methods.\n \n ``URLValidator``\n ----------------\n-.. class:: URLValidator([verify_exists=False, validator_user_agent=URL_VALIDATOR_USER_AGENT])\n+.. class:: URLValidator()\n \n-    A :class:`RegexValidator` that ensures a value looks like a URL and\n-    optionally verifies that the URL actually exists (i.e., doesn't return a\n-    404 status code). Raises an error code of ``'invalid'`` if it doesn't look\n-    like a URL, and a code of ``'invalid_link'`` if it doesn't exist.\n-\n-    :param verify_exists: Sets :attr:`verify_exists`. Defaults to ``False``.\n-    :param validator_user_agent: Sets :attr:`validator_user_agent`. Defaults to\n-        :setting:`URL_VALIDATOR_USER_AGENT` or, if that setting is set to a\n-        null value, ``\"Django (https://www.djangoproject.com/)\"``.\n-\n-    .. attribute:: verify_exists\n-\n-        If set to ``True``, this validator checks that the URL actually exists.\n-\n-    .. attribute:: validator_user_agent\n-\n-        If :attr:`verify_exists` is ``True``, Django uses this value as the\n-        \"User-agent\" for the request.\n+    A :class:`RegexValidator` that ensures a value looks like a URL, and raises\n+    an error code of ``'invalid'`` if it doesn't.\n \n ``validate_email``\n ------------------"
        },
        {
            "sha": "6eadf217cc9df2b823c9d2a69d34d5f345f6dbcd",
            "filename": "docs/topics/forms/modelforms.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Ftopics%2Fforms%2Fmodelforms.txt",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/docs%2Ftopics%2Fforms%2Fmodelforms.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fforms%2Fmodelforms.txt?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -106,8 +106,7 @@ Model field                      Form field\n \n ``TimeField``                    ``TimeField``\n \n-``URLField``                     ``URLField`` with ``verify_exists`` set\n-                                 to the model field's ``verify_exists``\n+``URLField``                     ``URLField``\n ===============================  ========================================\n \n .. versionadded:: 1.2"
        },
        {
            "sha": "e402162b9a2d463090929a41aba89e0ec5d9b207",
            "filename": "tests/modeltests/validation/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fmodeltests%2Fvalidation%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fmodeltests%2Fvalidation%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fvalidation%2Fmodels.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -15,7 +15,6 @@ class ModelToValidate(models.Model):\n     parent = models.ForeignKey('self', blank=True, null=True, limit_choices_to={'number': 10})\n     email = models.EmailField(blank=True)\n     url = models.URLField(blank=True)\n-    url_verify = models.URLField(blank=True, verify_exists=True)\n     f_with_custom_validator = models.IntegerField(blank=True, null=True, validators=[validate_answer_to_universe])\n \n     def clean(self):\n@@ -102,4 +101,4 @@ class MultipleAutoFields(models.Model):\n         auto2 = models.AutoField(primary_key=True)\n except AssertionError, assertion_error:\n     pass # Fail silently\n-assert str(assertion_error) == u\"A model can't have more than one AutoField.\"\n\\ No newline at end of file\n+assert str(assertion_error) == u\"A model can't have more than one AutoField.\""
        },
        {
            "sha": "f25549830600d3b42e61e60a1949bd3e88047230",
            "filename": "tests/modeltests/validation/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 32,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fmodeltests%2Fvalidation%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fmodeltests%2Fvalidation%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fvalidation%2Ftests.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -1,14 +1,9 @@\n from __future__ import absolute_import\n \n-import warnings\n-\n from django import forms\n from django.core.exceptions import NON_FIELD_ERRORS\n from django.test import TestCase\n \n-# Import the verify_exists_urls from the 'forms' test app\n-from regressiontests.forms.tests.fields import verify_exists_urls\n-\n from . import ValidationTestCase\n from .models import (Author, Article, ModelToValidate,\n     GenericIPAddressTestModel, GenericIPAddrUnpackUniqueTest)\n@@ -22,14 +17,6 @@\n \n class BaseModelValidationTests(ValidationTestCase):\n \n-    def setUp(self):\n-        self.save_warnings_state()\n-        warnings.filterwarnings('ignore', category=DeprecationWarning,\n-                                module='django.core.validators')\n-\n-    def tearDown(self):\n-        self.restore_warnings_state()\n-\n     def test_missing_required_field_raises_error(self):\n         mtv = ModelToValidate(f_with_custom_validator=42)\n         self.assertFailsValidation(mtv.full_clean, ['name', 'number'])\n@@ -70,25 +57,6 @@ def test_wrong_url_value_raises_error(self):\n         mtv = ModelToValidate(number=10, name='Some Name', url='not a url')\n         self.assertFieldFailsValidationWithMessage(mtv.full_clean, 'url', [u'Enter a valid value.'])\n \n-    #The tests below which use url_verify are deprecated\n-    def test_correct_url_but_nonexisting_gives_404(self):\n-        mtv = ModelToValidate(number=10, name='Some Name', url_verify='http://qa-dev.w3.org/link-testsuite/http.php?code=404')\n-        self.assertFieldFailsValidationWithMessage(mtv.full_clean, 'url_verify', [u'This URL appears to be a broken link.'])\n-\n-    @verify_exists_urls(existing_urls=('http://www.google.com/',))\n-    def test_correct_url_value_passes(self):\n-        mtv = ModelToValidate(number=10, name='Some Name', url_verify='http://www.google.com/')\n-        self.assertEqual(None, mtv.full_clean()) # This will fail if there's no Internet connection\n-\n-    @verify_exists_urls(existing_urls=('http://qa-dev.w3.org/link-testsuite/http.php?code=301',))\n-    def test_correct_url_with_redirect(self):\n-        mtv = ModelToValidate(number=10, name='Some Name', url_verify='http://qa-dev.w3.org/link-testsuite/http.php?code=301') #example.com is a redirect to iana.org now\n-        self.assertEqual(None, mtv.full_clean()) # This will fail if there's no Internet connection\n-\n-    def test_correct_https_url_but_nonexisting(self):\n-        mtv = ModelToValidate(number=10, name='Some Name', url_verify='https://www.example.com/')\n-        self.assertFieldFailsValidationWithMessage(mtv.full_clean, 'url_verify', [u'This URL appears to be a broken link.'])\n-\n     def test_text_greater_that_charfields_max_length_raises_erros(self):\n         mtv = ModelToValidate(number=10, name='Some Name'*100)\n         self.assertFailsValidation(mtv.full_clean, ['name',])"
        },
        {
            "sha": "973bf22ab1c31110f0f776f0abff39fe6a9df1f3",
            "filename": "tests/regressiontests/forms/tests/error_messages.py",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fregressiontests%2Fforms%2Ftests%2Ferror_messages.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fregressiontests%2Fforms%2Ftests%2Ferror_messages.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ferror_messages.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -7,8 +7,6 @@\n from django.test import TestCase\n from django.utils.safestring import mark_safe\n \n-from .fields import verify_exists_urls\n-\n \n class AssertFormErrorsMixin(object):\n     def assertFormErrors(self, expected, the_callable, *args, **kwargs):\n@@ -143,17 +141,14 @@ def test_filefield(self):\n         self.assertFormErrors([u'EMPTY FILE'], f.clean, SimpleUploadedFile('name', None))\n         self.assertFormErrors([u'EMPTY FILE'], f.clean, SimpleUploadedFile('name', ''))\n \n-    @verify_exists_urls()\n     def test_urlfield(self):\n         e = {\n             'required': 'REQUIRED',\n             'invalid': 'INVALID',\n-            'invalid_link': 'INVALID LINK',\n         }\n-        f = URLField(verify_exists=True, error_messages=e)\n+        f = URLField(error_messages=e)\n         self.assertFormErrors([u'REQUIRED'], f.clean, '')\n         self.assertFormErrors([u'INVALID'], f.clean, 'abc.c')\n-        self.assertFormErrors([u'INVALID LINK'], f.clean, 'http://www.broken.djangoproject.com')\n \n     def test_booleanfield(self):\n         e = {"
        },
        {
            "sha": "3820bb9858ce919536460bf1f9a51b23257f22d2",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 1,
            "deletions": 60,
            "changes": 61,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -27,10 +27,8 @@\n import datetime\n import re\n import os\n-import urllib2\n import warnings\n from decimal import Decimal\n-from functools import wraps\n \n from django.core.files.uploadedfile import SimpleUploadedFile\n from django.forms import *\n@@ -48,32 +46,6 @@ def fix_os_paths(x):\n         return x\n \n \n-def verify_exists_urls(existing_urls=()):\n-    \"\"\"\n-    Patches urllib to simulate the availability of some urls even when there\n-    is no Internet connection. This hack should be removed alongside with\n-    `URLField.verify_exists` in Django 1.5.\n-    \"\"\"\n-    def decorator(func):\n-        @wraps(func)\n-        def wrapper(*args, **kwargs):\n-            from django.core import validators\n-            # patch urllib2.OpenerDirector\n-            original_open = validators.urllib2.OpenerDirector.open\n-            def custom_open(self, req, data=None, timeout=None):\n-                if req.get_full_url() in existing_urls:\n-                    return True\n-                raise Exception()\n-            try:\n-                urllib2.OpenerDirector.open = custom_open\n-                func(*args, **kwargs)\n-            finally:\n-                # unpatch urllib2.OpenerDirector\n-                validators.urllib2.OpenerDirector.open = original_open\n-        return wrapper\n-    return decorator\n-\n-\n class FieldsTests(SimpleTestCase):\n \n     def setUp(self):\n@@ -651,30 +623,6 @@ def test_urlfield_2(self):\n         self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example.')\n         self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://.com')\n \n-    @verify_exists_urls(('http://www.google.com/',))\n-    def test_urlfield_3(self):\n-        f = URLField(verify_exists=True)\n-        self.assertEqual(u'http://www.google.com/', f.clean('http://www.google.com'))\n-        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example')\n-        self.assertRaises(ValidationError, f.clean, 'http://www.broken.djangoproject.com') # bad domain\n-        self.assertRaises(ValidationError, f.clean, 'http://qa-dev.w3.org/link-testsuite/http.php?code=405') # Method not allowed\n-        try:\n-            f.clean('http://www.broken.djangoproject.com') # bad domain\n-        except ValidationError, e:\n-            self.assertEqual(\"[u'This URL appears to be a broken link.']\", str(e))\n-        self.assertRaises(ValidationError, f.clean, 'http://qa-dev.w3.org/link-testsuite/http.php?code=400') # good domain, bad page\n-        try:\n-            f.clean('http://google.com/we-love-microsoft.html') # good domain, bad page\n-        except ValidationError, e:\n-            self.assertEqual(\"[u'This URL appears to be a broken link.']\", str(e))\n-\n-    @verify_exists_urls(('http://www.google.com/',))\n-    def test_urlfield_4(self):\n-        f = URLField(verify_exists=True, required=False)\n-        self.assertEqual(u'', f.clean(''))\n-        self.assertEqual(u'http://www.google.com/', f.clean('http://www.google.com'))\n-\n-    @verify_exists_urls(('http://example.com/',))\n     def test_urlfield_5(self):\n         f = URLField(min_length=15, max_length=20)\n         self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at least 15 characters (it has 13).']\", f.clean, 'http://f.com')\n@@ -698,7 +646,7 @@ def test_urlfield_8(self):\n         self.assertEqual(u'http://example.com/?some_param=some_value', f.clean('http://example.com?some_param=some_value'))\n \n     def test_urlfield_9(self):\n-        f = URLField(verify_exists=False)\n+        f = URLField()\n         urls = (\n             u'http://עברית.idn.icann.org/',\n             u'http://sãopaulo.com/',\n@@ -722,13 +670,6 @@ def test_urlfield_9(self):\n         except ValidationError, e:\n             self.assertEqual(\"[u'This URL appears to be a broken link.']\", str(e))\n \n-    @verify_exists_urls((u'http://xn--hxargifdar.idn.icann.org/%CE%91%CF%81%CF%87%CE%B9%CE%BA%CE%AE_%CF%83%CE%B5%CE%BB%CE%AF%CE%B4%CE%B1',))\n-    def test_urlfield_10(self):\n-        # UTF-8 in the domain.\n-        f = URLField(verify_exists=True)\n-        url = u'http://\\u03b5\\u03bb\\u03bb\\u03b7\\u03bd\\u03b9\\u03ba\\u03ac.idn.icann.org/\\u0391\\u03c1\\u03c7\\u03b9\\u03ba\\u03ae_\\u03c3\\u03b5\\u03bb\\u03af\\u03b4\\u03b1'\n-        self.assertEqual(url, f.clean(url))\n-\n     def test_urlfield_not_string(self):\n         f = URLField(required=False)\n         self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 23)"
        },
        {
            "sha": "a1555666b3656a3b65b9c7312935a47bcbb545b1",
            "filename": "tests/regressiontests/generic_inline_admin/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fregressiontests%2Fgeneric_inline_admin%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fregressiontests%2Fgeneric_inline_admin%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_inline_admin%2Fmodels.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -16,7 +16,7 @@ class Media(models.Model):\n     content_type = models.ForeignKey(ContentType)\n     object_id = models.PositiveIntegerField()\n     content_object = generic.GenericForeignKey()\n-    url = models.URLField(verify_exists=False)\n+    url = models.URLField()\n     description = models.CharField(max_length=100, blank=True)\n     keywords = models.CharField(max_length=100, blank=True)\n "
        },
        {
            "sha": "d070a9be7588d5b67524730ba28d072b7537eb8f",
            "filename": "tests/regressiontests/model_forms_regress/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fregressiontests%2Fmodel_forms_regress%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/9ed6e08ff99c18710c0e4875f827235f04c89d76/tests%2Fregressiontests%2Fmodel_forms_regress%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_forms_regress%2Fmodels.py?ref=9ed6e08ff99c18710c0e4875f827235f04c89d76",
            "patch": "@@ -57,7 +57,7 @@ class Author1(models.Model):\n     full_name = models.CharField(max_length=255)\n \n class Homepage(models.Model):\n-    url = models.URLField(verify_exists=False)\n+    url = models.URLField()\n \n class Document(models.Model):\n     myfile = models.FileField(upload_to='unused', blank=True)"
        }
    ],
    "stats": {
        "total": 283,
        "additions": 32,
        "deletions": 251
    }
}