{
    "author": "jezdez",
    "message": "Fixed #16410 -- Fixed get_cache to behave gracefully when given a string that can't be split. Thanks, jedie.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16511 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "90b6181657eafe1601ee90e4af26cd32cb301fb4",
    "files": [
        {
            "sha": "b97c7469bbd5c6827257a7db4473ddb6ccc7e039",
            "filename": "django/core/cache/__init__.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/90b6181657eafe1601ee90e4af26cd32cb301fb4/django%2Fcore%2Fcache%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/90b6181657eafe1601ee90e4af26cd32cb301fb4/django%2Fcore%2Fcache%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcache%2F__init__.py?ref=90b6181657eafe1601ee90e4af26cd32cb301fb4",
            "patch": "@@ -126,12 +126,12 @@ def parse_backend_conf(backend, **kwargs):\n         location = args.pop('LOCATION', '')\n         return backend, location, args\n     else:\n-        # Trying to import the given backend, in case it's a dotted path\n-        mod_path, cls_name = backend.rsplit('.', 1)\n         try:\n+            # Trying to import the given backend, in case it's a dotted path\n+            mod_path, cls_name = backend.rsplit('.', 1)\n             mod = importlib.import_module(mod_path)\n             backend_cls = getattr(mod, cls_name)\n-        except (AttributeError, ImportError):\n+        except (AttributeError, ImportError, ValueError):\n             raise InvalidCacheBackendError(\"Could not find backend '%s'\" % backend)\n         location = kwargs.pop('LOCATION', '')\n         return backend, location, kwargs"
        },
        {
            "sha": "6f1aa0d24f15ff7c40535cbdc21b806906f01e84",
            "filename": "tests/regressiontests/cache/tests.py",
            "status": "modified",
            "additions": 18,
            "deletions": 1,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/90b6181657eafe1601ee90e4af26cd32cb301fb4/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/90b6181657eafe1601ee90e4af26cd32cb301fb4/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcache%2Ftests.py?ref=90b6181657eafe1601ee90e4af26cd32cb301fb4",
            "patch": "@@ -12,7 +12,7 @@\n from django.conf import settings\n from django.core import management\n from django.core.cache import get_cache, DEFAULT_CACHE_ALIAS\n-from django.core.cache.backends.base import CacheKeyWarning\n+from django.core.cache.backends.base import CacheKeyWarning, InvalidCacheBackendError\n from django.db import connections, router\n from django.http import HttpResponse, HttpRequest, QueryDict\n from django.middleware.cache import FetchFromCacheMiddleware, UpdateCacheMiddleware, CacheMiddleware\n@@ -938,6 +938,23 @@ def test_custom_key_validation(self):\n         cache.set(key, val)\n         self.assertEqual(cache.get(key), val)\n \n+\n+class GetCacheTests(unittest.TestCase):\n+\n+    def test_simple(self):\n+        cache = get_cache('locmem://')\n+        from django.core.cache.backends.locmem import LocMemCache\n+        self.assertTrue(isinstance(cache, LocMemCache))\n+\n+        from django.core.cache import cache\n+        self.assertTrue(isinstance(cache, get_cache('default').__class__))\n+\n+        cache = get_cache(\n+            'django.core.cache.backends.dummy.DummyCache', **{'TIMEOUT': 120})\n+        self.assertEqual(cache.default_timeout, 120)\n+\n+        self.assertRaises(InvalidCacheBackendError, get_cache, 'does_not_exist')\n+\n class CacheUtils(unittest.TestCase):\n     \"\"\"TestCase for django.utils.cache functions.\"\"\"\n "
        }
    ],
    "stats": {
        "total": 25,
        "additions": 21,
        "deletions": 4
    }
}