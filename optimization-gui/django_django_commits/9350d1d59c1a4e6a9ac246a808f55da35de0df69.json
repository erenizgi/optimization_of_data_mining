{
    "author": "aaugustin",
    "message": "Fixed #17976 -- Made forms.BooleanField pickleable.\n\nThis was a regression in Django 1.4.\nThanks bronger for the report and claudep for the patch.",
    "sha": "9350d1d59c1a4e6a9ac246a808f55da35de0df69",
    "files": [
        {
            "sha": "4813af69e96b0e89249492b85c8b6d03a9dac8c5",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/9350d1d59c1a4e6a9ac246a808f55da35de0df69/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/9350d1d59c1a4e6a9ac246a808f55da35de0df69/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=9350d1d59c1a4e6a9ac246a808f55da35de0df69",
            "patch": "@@ -487,15 +487,18 @@ def _has_changed(self, initial, data):\n             pass\n         return super(TimeInput, self)._has_changed(self._format_value(initial), data)\n \n+\n+# Defined at module level so that CheckboxInput is picklable (#17976)\n+def boolean_check(v):\n+    return not (v is False or v is None or v == '')\n+\n+\n class CheckboxInput(Widget):\n     def __init__(self, attrs=None, check_test=None):\n         super(CheckboxInput, self).__init__(attrs)\n         # check_test is a callable that takes a value and returns True\n         # if the checkbox should be checked for that value.\n-        if check_test is None:\n-            self.check_test = lambda v: not (v is False or v is None or v == '')\n-        else:\n-            self.check_test = check_test\n+        self.check_test = boolean_check if check_test is None else check_test\n \n     def render(self, name, value, attrs=None):\n         final_attrs = self.build_attrs(attrs, type='checkbox', name=name)"
        },
        {
            "sha": "3c91cdc41eb93baefe73685e407dcb66bec989e6",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/9350d1d59c1a4e6a9ac246a808f55da35de0df69/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/9350d1d59c1a4e6a9ac246a808f55da35de0df69/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=9350d1d59c1a4e6a9ac246a808f55da35de0df69",
            "patch": "@@ -25,6 +25,7 @@\n __init__(). For example, CharField has a max_length option.\n \"\"\"\n import datetime\n+import pickle\n import re\n import os\n import warnings\n@@ -690,6 +691,9 @@ def test_booleanfield_2(self):\n         self.assertEqual(False, f.clean('false'))\n         self.assertEqual(False, f.clean('FaLsE'))\n \n+    def test_boolean_picklable(self):\n+        self.assertIsInstance(pickle.loads(pickle.dumps(BooleanField())), BooleanField)\n+\n     # ChoiceField #################################################################\n \n     def test_choicefield_1(self):"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 11,
        "deletions": 4
    }
}