{
    "author": "akaariai",
    "message": "Made sure global settings are changed in test db creation\n\nThere was an assumption that changing connection.settings_dict changed\nalso the settings.DATABASES values. This assumption is now gone.",
    "sha": "905ea9619b871ded3204b1d0deb7e6fb9b081679",
    "files": [
        {
            "sha": "2baed62855cc82cbe1e004173fa5d94b03d0e4a3",
            "filename": "django/db/backends/creation.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/905ea9619b871ded3204b1d0deb7e6fb9b081679/django%2Fdb%2Fbackends%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/905ea9619b871ded3204b1d0deb7e6fb9b081679/django%2Fdb%2Fbackends%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fcreation.py?ref=905ea9619b871ded3204b1d0deb7e6fb9b081679",
            "patch": "@@ -281,6 +281,7 @@ def create_test_db(self, verbosity=1, autoclobber=False):\n         self._create_test_db(verbosity, autoclobber)\n \n         self.connection.close()\n+        settings.DATABASES[self.connection.alias][\"NAME\"] = test_database_name\n         self.connection.settings_dict[\"NAME\"] = test_database_name\n \n         # Report syncdb messages at one level lower than that requested."
        },
        {
            "sha": "1cc3957232dc5ace8dee8f16bc789463fe693689",
            "filename": "django/db/backends/oracle/creation.py",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/905ea9619b871ded3204b1d0deb7e6fb9b081679/django%2Fdb%2Fbackends%2Foracle%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/905ea9619b871ded3204b1d0deb7e6fb9b081679/django%2Fdb%2Fbackends%2Foracle%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fcreation.py?ref=905ea9619b871ded3204b1d0deb7e6fb9b081679",
            "patch": "@@ -104,10 +104,12 @@ def _create_test_db(self, verbosity=1, autoclobber=False):\n                     print(\"Tests cancelled.\")\n                     sys.exit(1)\n \n-        self.connection.settings_dict['SAVED_USER'] = self.connection.settings_dict['USER']\n-        self.connection.settings_dict['SAVED_PASSWORD'] = self.connection.settings_dict['PASSWORD']\n-        self.connection.settings_dict['TEST_USER'] = self.connection.settings_dict['USER'] = TEST_USER\n-        self.connection.settings_dict['PASSWORD'] = TEST_PASSWD\n+        from django.db import settings\n+        real_settings = settings.DATABASES[self.connection.alias]\n+        real_settings['SAVED_USER'] = self.connection.settings_dict['SAVED_USER'] = self.connection.settings_dict['USER']\n+        real_settings['SAVED_PASSWORD'] = self.connection.settings_dict['SAVED_PASSWORD'] = self.connection.settings_dict['PASSWORD']\n+        real_settings['TEST_USER'] = real_settings['USER'] = self.connection.settings_dict['TEST_USER'] = self.connection.settings_dict['USER'] = TEST_USER\n+        real_settings['PASSWORD'] = self.connection.settings_dict['PASSWORD'] = TEST_PASSWD\n \n         return self.connection.settings_dict['NAME']\n "
        }
    ],
    "stats": {
        "total": 11,
        "additions": 7,
        "deletions": 4
    }
}