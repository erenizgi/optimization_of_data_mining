{
    "author": "aaugustin",
    "message": "Upgraded manage.py cleanup to be compatible with time zone support. See also r17121.\n\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17124 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "119e188717db82d3ce661fb5d1e0d3df1c91eb3a",
    "files": [
        {
            "sha": "e19d1649be1627531e818a404fe980f9279182d9",
            "filename": "django/core/management/commands/cleanup.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/119e188717db82d3ce661fb5d1e0d3df1c91eb3a/django%2Fcore%2Fmanagement%2Fcommands%2Fcleanup.py",
            "raw_url": "https://github.com/django/django/raw/119e188717db82d3ce661fb5d1e0d3df1c91eb3a/django%2Fcore%2Fmanagement%2Fcommands%2Fcleanup.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fcleanup.py?ref=119e188717db82d3ce661fb5d1e0d3df1c91eb3a",
            "patch": "@@ -1,11 +1,11 @@\n-import datetime\n from django.core.management.base import NoArgsCommand\n+from django.utils import timezone\n \n class Command(NoArgsCommand):\n     help = \"Can be run as a cronjob or directly to clean out old data from the database (only expired sessions at the moment).\"\n \n     def handle_noargs(self, **options):\n         from django.db import transaction\n         from django.contrib.sessions.models import Session\n-        Session.objects.filter(expire_date__lt=datetime.datetime.now()).delete()\n+        Session.objects.filter(expire_date__lt=timezone.now()).delete()\n         transaction.commit_unless_managed()"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}