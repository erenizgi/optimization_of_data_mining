{
    "author": "jphalip",
    "message": "Fixed #16371 -- Added a prefix \"field-\" to all CSS class names automatically generated from field names in admin forms to avoid conflicts with other common class names (e.g. \"button\"). This is backwards-incompatible for those who previously used plain field names as selector in custom style sheets or javascript transformations.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16953 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "17659adf93574deeaeb23b867f1c67248a7a3c80",
    "files": [
        {
            "sha": "b891a76a72bcd771a888c44a4371359399334ad7",
            "filename": "django/contrib/admin/templates/admin/edit_inline/tabular.html",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/17659adf93574deeaeb23b867f1c67248a7a3c80/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html",
            "raw_url": "https://github.com/django/django/raw/17659adf93574deeaeb23b867f1c67248a7a3c80/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fedit_inline%2Ftabular.html?ref=17659adf93574deeaeb23b867f1c67248a7a3c80",
            "patch": "@@ -44,7 +44,7 @@ <h2>{{ inline_admin_formset.opts.verbose_name_plural|capfirst }}</h2>\n         {% for fieldset in inline_admin_form %}\n           {% for line in fieldset %}\n             {% for field in line %}\n-              <td class=\"{{ field.field.name }}\">\n+              <td{% if field.field.name %} class=\"field-{{ field.field.name }}\"{% endif %}>\n               {% if field.is_readonly %}\n                   <p>{{ field.contents }}</p>\n               {% else %}"
        },
        {
            "sha": "0b71d501f9a17400f756cc073a34a3b8ab21bc78",
            "filename": "django/contrib/admin/templates/admin/includes/fieldset.html",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/17659adf93574deeaeb23b867f1c67248a7a3c80/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html",
            "raw_url": "https://github.com/django/django/raw/17659adf93574deeaeb23b867f1c67248a7a3c80/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fincludes%2Ffieldset.html?ref=17659adf93574deeaeb23b867f1c67248a7a3c80",
            "patch": "@@ -4,7 +4,7 @@\n         <div class=\"description\">{{ fieldset.description|safe }}</div>\n     {% endif %}\n     {% for line in fieldset %}\n-        <div class=\"form-row{% if line.fields|length_is:'1' and line.errors %} errors{% endif %}{% for field in line %} {{ field.field.name }}{% endfor %}\">\n+        <div class=\"form-row{% if line.fields|length_is:'1' and line.errors %} errors{% endif %}{% for field in line %}{% if field.field.name %} field-{{ field.field.name }}{% endif %}{% endfor %}\">\n             {% if line.fields|length_is:'1' %}{{ line.errors }}{% endif %}\n             {% for field in line %}\n                 <div{% if not line.fields|length_is:'1' %} class=\"field-box{% if not field.is_readonly and field.errors %} errors{% endif %}\"{% endif %}>"
        },
        {
            "sha": "b71fd21daa75244f891e727ef772d6c4b023c5ae",
            "filename": "docs/releases/1.4.txt",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/17659adf93574deeaeb23b867f1c67248a7a3c80/docs%2Freleases%2F1.4.txt",
            "raw_url": "https://github.com/django/django/raw/17659adf93574deeaeb23b867f1c67248a7a3c80/docs%2Freleases%2F1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.4.txt?ref=17659adf93574deeaeb23b867f1c67248a7a3c80",
            "patch": "@@ -431,6 +431,16 @@ files were removed and grouped into two sprite files, respectively:\n those icons to customize the admin then you will want to replace them with your\n own icons or retrieve them from a previous release.\n \n+CSS class names in admin forms\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+To avoid conflicts with other common CSS class names (e.g. \"button\"), a prefix\n+\"field-\" has been added to all CSS class names automatically generated from the\n+form field names in the main admin forms, stacked inline forms and tabular\n+inline cells. You will need to take that prefix into account in your custom\n+style sheets or javascript files if you previously used plain field names as\n+selectors for custom styles or javascript transformations.\n+\n Compatibility with old signed data\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "b15e97af1f3859449b088422d127c0c0a81e6235",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 32,
            "deletions": 5,
            "changes": 37,
            "blob_url": "https://github.com/django/django/blob/17659adf93574deeaeb23b867f1c67248a7a3c80/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/17659adf93574deeaeb23b867f1c67248a7a3c80/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=17659adf93574deeaeb23b867f1c67248a7a3c80",
            "patch": "@@ -2786,11 +2786,11 @@ def test_readonly_get(self):\n             formats.localize(datetime.date.today() - datetime.timedelta(days=7))\n         )\n \n-        self.assertContains(response, '<div class=\"form-row coolness\">')\n-        self.assertContains(response, '<div class=\"form-row awesomeness_level\">')\n-        self.assertContains(response, '<div class=\"form-row posted\">')\n-        self.assertContains(response, '<div class=\"form-row value\">')\n-        self.assertContains(response, '<div class=\"form-row \">')\n+        self.assertContains(response, '<div class=\"form-row field-coolness\">')\n+        self.assertContains(response, '<div class=\"form-row field-awesomeness_level\">')\n+        self.assertContains(response, '<div class=\"form-row field-posted\">')\n+        self.assertContains(response, '<div class=\"form-row field-value\">')\n+        self.assertContains(response, '<div class=\"form-row\">')\n         self.assertContains(response, '<p class=\"help\">', 3)\n         self.assertContains(response, '<p class=\"help\">Some help text for the title (with unicode ŠĐĆŽćžšđ)</p>')\n         self.assertContains(response, '<p class=\"help\">Some help text for the content (with unicode ŠĐĆŽćžšđ)</p>')\n@@ -2983,6 +2983,33 @@ def test_group_permission_performance(self):\n             self.assertEqual(response.status_code, 200)\n \n \n+class CSSTest(TestCase):\n+    urls = \"regressiontests.admin_views.urls\"\n+    fixtures = ['admin-views-users.xml']\n+\n+    def setUp(self):\n+        self.client.login(username='super', password='secret')\n+\n+    def tearDown(self):\n+        self.client.logout()\n+\n+    def test_css_classes(self):\n+        response = self.client.get('/test_admin/admin/admin_views/post/add/')\n+\n+        # The main form\n+        self.assertContains(response, 'class=\"form-row field-title\"')\n+        self.assertContains(response, 'class=\"form-row field-content\"')\n+        self.assertContains(response, 'class=\"form-row field-public\"')\n+        self.assertContains(response, 'class=\"form-row field-awesomeness_level\"')\n+        self.assertContains(response, 'class=\"form-row field-coolness\"')\n+        self.assertContains(response, 'class=\"form-row field-value\"')\n+        self.assertContains(response, 'class=\"form-row\"') # The lambda function\n+\n+        # The tabular inline\n+        self.assertContains(response, '<td class=\"field-url\">')\n+        self.assertContains(response, '<td class=\"field-posted\">')\n+\n+\n try:\n     import docutils\n except ImportError:"
        }
    ],
    "stats": {
        "total": 51,
        "additions": 44,
        "deletions": 7
    }
}