{
    "author": "aaugustin",
    "message": "Fixed #5968 -- Allowed (un-)registering with databrowse several models at once.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17405 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88",
    "files": [
        {
            "sha": "d90bb562b2335d88a6f976dc9c83f9c785968f59",
            "filename": "django/contrib/databrowse/sites.py",
            "status": "modified",
            "additions": 5,
            "deletions": 9,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88/django%2Fcontrib%2Fdatabrowse%2Fsites.py",
            "raw_url": "https://github.com/django/django/raw/1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88/django%2Fcontrib%2Fdatabrowse%2Fsites.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fdatabrowse%2Fsites.py?ref=1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88",
            "patch": "@@ -73,7 +73,7 @@ def __init__(self):\n         self.registry = {} # model_class -> databrowse_class\n         self.root_url = None\n \n-    def register(self, model_or_iterable, databrowse_class=None, **options):\n+    def register(self, *model_list, **options):\n         \"\"\"\n         Registers the given model(s) with the given databrowse site.\n \n@@ -84,23 +84,19 @@ def register(self, model_or_iterable, databrowse_class=None, **options):\n \n         If a model is already registered, this will raise AlreadyRegistered.\n         \"\"\"\n-        databrowse_class = databrowse_class or DefaultModelDatabrowse\n-        if issubclass(model_or_iterable, models.Model):\n-            model_or_iterable = [model_or_iterable]\n-        for model in model_or_iterable:\n+        databrowse_class = options.pop('databrowse_class', DefaultModelDatabrowse)\n+        for model in model_list:\n             if model in self.registry:\n                 raise AlreadyRegistered('The model %s is already registered' % model.__name__)\n             self.registry[model] = databrowse_class\n \n-    def unregister(self, model_or_iterable):\n+    def unregister(self, *model_list):\n         \"\"\"\n         Unregisters the given model(s).\n \n         If a model isn't already registered, this will raise NotRegistered.\n         \"\"\"\n-        if issubclass(model_or_iterable, models.Model):\n-            model_or_iterable = [model_or_iterable]\n-        for model in model_or_iterable:\n+        for model in model_list:\n             if model not in self.registry:\n                 raise NotRegistered('The model %s is not registered' % model.__name__)\n             del self.registry[model]"
        },
        {
            "sha": "3d411bb7b4d936d8c45f234a90800863e9fbaf0f",
            "filename": "docs/ref/contrib/databrowse.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88/docs%2Fref%2Fcontrib%2Fdatabrowse.txt",
            "raw_url": "https://github.com/django/django/raw/1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88/docs%2Fref%2Fcontrib%2Fdatabrowse.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fdatabrowse.txt?ref=1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88",
            "patch": "@@ -33,13 +33,18 @@ How to use Databrowse\n 2. Register a number of models with the Databrowse site::\n \n        from django.contrib import databrowse\n-       from myapp.models import SomeModel, SomeOtherModel\n+       from myapp.models import SomeModel, SomeOtherModel, YetAnotherModel\n \n        databrowse.site.register(SomeModel)\n-       databrowse.site.register(SomeOtherModel)\n+       databrowse.site.register(SomeOtherModel, YetAnotherModel)\n \n    Note that you should register the model *classes*, not instances.\n \n+   .. versionchanged:: 1.4\n+\n+   Since Django 1.4, it is possible to register several models in the same\n+   call to :func:`~databrowse.site.register`.\n+\n    It doesn't matter where you put this, as long as it gets executed at some\n    point. A good place for it is in your :doc:`URLconf file\n    </topics/http/urls>` (``urls.py``)."
        },
        {
            "sha": "944c6aa82e65fc2575fbd456b8a65b9d0ca4b9a7",
            "filename": "tests/runtests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88/tests%2Fruntests.py",
            "raw_url": "https://github.com/django/django/raw/1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88/tests%2Fruntests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fruntests.py?ref=1cc800783c0f02a8f65e85b53ecb05ae5c0a4d88",
            "patch": "@@ -4,9 +4,13 @@\n import subprocess\n import sys\n import tempfile\n+import warnings\n \n from django import contrib\n \n+# databrowse is deprecated, but we still want to run its tests\n+warnings.filterwarnings('ignore', \"The Databrowse contrib app is deprecated\",\n+                        PendingDeprecationWarning, 'django.contrib.databrowse')\n \n CONTRIB_DIR_NAME = 'django.contrib'\n MODEL_TESTS_DIR_NAME = 'modeltests'\n@@ -34,6 +38,7 @@\n     'django.contrib.comments',\n     'django.contrib.admin',\n     'django.contrib.admindocs',\n+    'django.contrib.databrowse',\n     'django.contrib.staticfiles',\n     'django.contrib.humanize',\n     'regressiontests.staticfiles_tests',"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 17,
        "deletions": 11
    }
}