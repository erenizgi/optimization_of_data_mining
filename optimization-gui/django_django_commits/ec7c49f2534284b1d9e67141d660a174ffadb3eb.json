{
    "author": "spookylukey",
    "message": "Fixed hyperlinking of template tags for Sphinx >= 1.0\n\nFollow on from incomplete fix in [14477], and [14631] which removed\ncompatibility for Sphinx < 1.0\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14639 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ec7c49f2534284b1d9e67141d660a174ffadb3eb",
    "files": [
        {
            "sha": "24be84111026909e73bac0cd1cb4eff4e2e90957",
            "filename": "docs/_ext/djangodocs.py",
            "status": "modified",
            "additions": 7,
            "deletions": 12,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/ec7c49f2534284b1d9e67141d660a174ffadb3eb/docs%2F_ext%2Fdjangodocs.py",
            "raw_url": "https://github.com/django/django/raw/ec7c49f2534284b1d9e67141d660a174ffadb3eb/docs%2F_ext%2Fdjangodocs.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2F_ext%2Fdjangodocs.py?ref=ec7c49f2534284b1d9e67141d660a174ffadb3eb",
            "patch": "@@ -233,18 +233,13 @@ def finish(self):\n             self.warn(\"cannot create templatebuiltins.js due to missing simplejson dependency\")\n             return\n         self.info(bold(\"writing templatebuiltins.js...\"))\n-        try:\n-            xrefs = self.env.reftargets.items()\n-            templatebuiltins = dict([('ttags', [n for ((t,n),(l,a)) in xrefs\n-                                                if t == 'ttag' and\n-                                                l == 'ref/templates/builtins']),\n-                                     ('tfilters', [n for ((t,n),(l,a)) in xrefs\n-                                                   if t == 'tfilter' and\n-                                                   l == 'ref/templates/builtins'])])\n-        except AttributeError:\n-            xrefs = self.env.domaindata[\"std\"][\"objects\"]\n-            templatebuiltins = dict([('ttags', [n for (t,n) in xrefs if t == 'templatetag']),\n-                                     ('tfilters', [n for (t,n) in xrefs if t == 'templatefilter'])])\n+        xrefs = self.env.domaindata[\"std\"][\"objects\"]\n+        templatebuiltins = dict([('ttags', [n for ((t,n), (l,a)) in xrefs.items()\n+                                            if t == 'templatetag' and\n+                                            l == 'ref/templates/builtins' ]),\n+                                 ('tfilters', [n for ((t,n), (l,a)) in xrefs.items()\n+                                               if t == 'templatefilter' and\n+                                               t == 'ref/templates/builtins'])])\n         outfilename = os.path.join(self.outdir, \"templatebuiltins.js\")\n         f = open(outfilename, 'wb')\n         f.write('var django_template_builtins = ')"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 7,
        "deletions": 12
    }
}