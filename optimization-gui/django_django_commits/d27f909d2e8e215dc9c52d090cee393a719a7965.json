{
    "author": "jezdez",
    "message": "Fixed #12847 -- Added name parameter to simple_tag, assignment_tag and inclusion_tag helpers. Thanks, vladmos.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16373 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "d27f909d2e8e215dc9c52d090cee393a719a7965",
    "files": [
        {
            "sha": "78da99813b7d4a4209c9d4f7625f3efb48c2d418",
            "filename": "django/template/base.py",
            "status": "modified",
            "additions": 11,
            "deletions": 8,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/d27f909d2e8e215dc9c52d090cee393a719a7965/django%2Ftemplate%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/d27f909d2e8e215dc9c52d090cee393a719a7965/django%2Ftemplate%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fbase.py?ref=d27f909d2e8e215dc9c52d090cee393a719a7965",
            "patch": "@@ -866,7 +866,7 @@ def filter_function(self, func):\n         self.filters[getattr(func, \"_decorated_function\", func).__name__] = func\n         return func\n \n-    def simple_tag(self, func=None, takes_context=None):\n+    def simple_tag(self, func=None, takes_context=None, name=None):\n         def dec(func):\n             params, xx, xxx, defaults = getargspec(func)\n             if takes_context:\n@@ -887,9 +887,10 @@ def render(self, context):\n                         func_args = resolved_vars\n                     return func(*func_args)\n \n-            compile_func = partial(generic_tag_compiler, params, defaults, getattr(func, \"_decorated_function\", func).__name__, SimpleNode)\n+            function_name = name or getattr(func, '_decorated_function', func).__name__\n+            compile_func = partial(generic_tag_compiler, params, defaults, function_name, SimpleNode)\n             compile_func.__doc__ = func.__doc__\n-            self.tag(getattr(func, \"_decorated_function\", func).__name__, compile_func)\n+            self.tag(function_name, compile_func)\n             return func\n \n         if func is None:\n@@ -901,7 +902,7 @@ def render(self, context):\n         else:\n             raise TemplateSyntaxError(\"Invalid arguments provided to simple_tag\")\n \n-    def assignment_tag(self, func=None, takes_context=None):\n+    def assignment_tag(self, func=None, takes_context=None, name=None):\n         def dec(func):\n             params, xx, xxx, defaults = getargspec(func)\n             if takes_context:\n@@ -948,8 +949,9 @@ def compile_func(parser, token):\n                             % (tag_name, params_min, params_max))\n                 return AssignmentNode(params_vars, target_var)\n \n+            function_name = name or getattr(func, '_decorated_function', func).__name__\n             compile_func.__doc__ = func.__doc__\n-            self.tag(getattr(func, \"_decorated_function\", func).__name__, compile_func)\n+            self.tag(function_name, compile_func)\n             return func\n \n         if func is None:\n@@ -961,7 +963,7 @@ def compile_func(parser, token):\n         else:\n             raise TemplateSyntaxError(\"Invalid arguments provided to assignment_tag\")\n \n-    def inclusion_tag(self, file_name, context_class=Context, takes_context=False):\n+    def inclusion_tag(self, file_name, context_class=Context, takes_context=False, name=None):\n         def dec(func):\n             params, xx, xxx, defaults = getargspec(func)\n             if takes_context:\n@@ -1003,9 +1005,10 @@ def render(self, context):\n                         new_context['csrf_token'] = csrf_token\n                     return self.nodelist.render(new_context)\n \n-            compile_func = partial(generic_tag_compiler, params, defaults, getattr(func, \"_decorated_function\", func).__name__, InclusionNode)\n+            function_name = name or getattr(func, '_decorated_function', func).__name__\n+            compile_func = partial(generic_tag_compiler, params, defaults, function_name, InclusionNode)\n             compile_func.__doc__ = func.__doc__\n-            self.tag(getattr(func, \"_decorated_function\", func).__name__, compile_func)\n+            self.tag(function_name, compile_func)\n             return func\n         return dec\n "
        },
        {
            "sha": "97f1e9a53b0cc0be703162659f73bee94e97eb1a",
            "filename": "docs/howto/custom-template-tags.txt",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/d27f909d2e8e215dc9c52d090cee393a719a7965/docs%2Fhowto%2Fcustom-template-tags.txt",
            "raw_url": "https://github.com/django/django/raw/d27f909d2e8e215dc9c52d090cee393a719a7965/docs%2Fhowto%2Fcustom-template-tags.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Fcustom-template-tags.txt?ref=d27f909d2e8e215dc9c52d090cee393a719a7965",
            "patch": "@@ -687,6 +687,16 @@ Or, using decorator syntax::\n For more information on how the ``takes_context`` option works, see the section\n on :ref:`inclusion tags<howto-custom-template-tags-inclusion-tags>`.\n \n+.. versionadded:: 1.4\n+\n+If you need to rename your tag, you can provide a custom name for it::\n+\n+    register.simple_tags(lambda x: x - 1, name='minusone')\n+\n+    @register.simple_tag(name='minustwo')\n+    def some_function(value):\n+        return value - 1\n+\n .. _howto-custom-template-tags-assignment-tags:\n \n Assignment tags"
        },
        {
            "sha": "65f3dfe050f45ba03a60c2ef6c58590b185ccdbd",
            "filename": "docs/releases/1.4.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/d27f909d2e8e215dc9c52d090cee393a719a7965/docs%2Freleases%2F1.4.txt",
            "raw_url": "https://github.com/django/django/raw/d27f909d2e8e215dc9c52d090cee393a719a7965/docs%2Freleases%2F1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.4.txt?ref=d27f909d2e8e215dc9c52d090cee393a719a7965",
            "patch": "@@ -175,6 +175,7 @@ Django 1.4 also includes several smaller improvements worth noting:\n   code are slightly emphasized. This change makes it easier to scan a stacktrace\n   for issues in user code.\n \n+* Customizable names for :meth:`~django.template.Library.simple_tag`.\n \n .. _backwards-incompatible-changes-1.4:\n "
        },
        {
            "sha": "97f26749533bcbd738dfdff57aeccd26caae6a9c",
            "filename": "tests/regressiontests/templates/templatetags/custom.py",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/d27f909d2e8e215dc9c52d090cee393a719a7965/tests%2Fregressiontests%2Ftemplates%2Ftemplatetags%2Fcustom.py",
            "raw_url": "https://github.com/django/django/raw/d27f909d2e8e215dc9c52d090cee393a719a7965/tests%2Fregressiontests%2Ftemplates%2Ftemplatetags%2Fcustom.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftemplatetags%2Fcustom.py?ref=d27f909d2e8e215dc9c52d090cee393a719a7965",
            "patch": "@@ -114,3 +114,9 @@ def assignment_params_and_context(context, arg):\n     \"\"\"Expected assignment_params_and_context __doc__\"\"\"\n     return \"assignment_params_and_context - Expected result (context value: %s): %s\" % (context['value'], arg)\n assignment_params_and_context.anything = \"Expected assignment_params_and_context __dict__\"\n+\n+register.simple_tag(lambda x: x - 1, name='minusone')\n+\n+@register.simple_tag(name='minustwo')\n+def minustwo_overridden_name(value):\n+    return value - 2"
        },
        {
            "sha": "36a1ca3fe031b9aa914619178a6954445d9d9019",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/d27f909d2e8e215dc9c52d090cee393a719a7965/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d27f909d2e8e215dc9c52d090cee393a719a7965/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=d27f909d2e8e215dc9c52d090cee393a719a7965",
            "patch": "@@ -1385,6 +1385,11 @@ def get_template_tests(self):\n             'templatetag11': ('{% templatetag opencomment %}', {}, '{#'),\n             'templatetag12': ('{% templatetag closecomment %}', {}, '#}'),\n \n+            # Simple tags with customized names\n+            'simpletag-renamed01': ('{% load custom %}{% minusone 7 %}', {}, '6'),\n+            'simpletag-renamed02': ('{% load custom %}{% minustwo 7 %}', {}, '5'),\n+            'simpletag-renamed03': ('{% load custom %}{% minustwo_overridden_name 7 %}', {}, template.TemplateSyntaxError),\n+\n             ### WIDTHRATIO TAG ########################################################\n             'widthratio01': ('{% widthratio a b 0 %}', {'a':50,'b':100}, '0'),\n             'widthratio02': ('{% widthratio a b 100 %}', {'a':0,'b':0}, ''),"
        }
    ],
    "stats": {
        "total": 41,
        "additions": 33,
        "deletions": 8
    }
}