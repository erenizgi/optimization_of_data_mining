{
    "author": "aaugustin",
    "message": "[py3] Avoided relying on 2.x-only internals\n\nin LiveServerTestCase.",
    "sha": "688678e7c091e4549777d8cc47e8984d5e672976",
    "files": [
        {
            "sha": "0e33ef082a8db280217d87f917bf650dd778c3a0",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 19,
            "deletions": 16,
            "changes": 35,
            "blob_url": "https://github.com/django/django/blob/688678e7c091e4549777d8cc47e8984d5e672976/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/688678e7c091e4549777d8cc47e8984d5e672976/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=688678e7c091e4549777d8cc47e8984d5e672976",
            "patch": "@@ -917,23 +917,26 @@ def log_message(*args):\n         pass\n \n \n-class _ImprovedEvent(threading._Event):\n-    \"\"\"\n-    Does the same as `threading.Event` except it overrides the wait() method\n-    with some code borrowed from Python 2.7 to return the set state of the\n-    event (see: http://hg.python.org/cpython/rev/b5aa8aa78c0f/). This allows\n-    to know whether the wait() method exited normally or because of the\n-    timeout. This class can be removed when Django supports only Python >= 2.7.\n-    \"\"\"\n+if sys.version_info >= (2, 6, 0):\n+    _ImprovedEvent = threading._Event\n+else:\n+    class _ImprovedEvent(threading._Event):\n+        \"\"\"\n+        Does the same as `threading.Event` except it overrides the wait() method\n+        with some code borrowed from Python 2.7 to return the set state of the\n+        event (see: http://hg.python.org/cpython/rev/b5aa8aa78c0f/). This allows\n+        to know whether the wait() method exited normally or because of the\n+        timeout. This class can be removed when Django supports only Python >= 2.7.\n+        \"\"\"\n \n-    def wait(self, timeout=None):\n-        self._Event__cond.acquire()\n-        try:\n-            if not self._Event__flag:\n-                self._Event__cond.wait(timeout)\n-            return self._Event__flag\n-        finally:\n-            self._Event__cond.release()\n+        def wait(self, timeout=None):\n+            self._Event__cond.acquire()\n+            try:\n+                if not self._Event__flag:\n+                    self._Event__cond.wait(timeout)\n+                return self._Event__flag\n+            finally:\n+                self._Event__cond.release()\n \n \n class StoppableWSGIServer(WSGIServer):"
        }
    ],
    "stats": {
        "total": 35,
        "additions": 19,
        "deletions": 16
    }
}