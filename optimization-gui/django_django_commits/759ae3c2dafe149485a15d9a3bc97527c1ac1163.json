{
    "author": "kmtracey",
    "message": "Fixed #18739 -- witdthratio behavior on None args\n\nMade behavior given None consistent with how non-numerics were handled.\nThanks to ja.geb@me.com for the report.",
    "sha": "759ae3c2dafe149485a15d9a3bc97527c1ac1163",
    "files": [
        {
            "sha": "cb2ecd26d8fedb5cd489a2b02af47a8f6e3064d6",
            "filename": "django/template/defaulttags.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/759ae3c2dafe149485a15d9a3bc97527c1ac1163/django%2Ftemplate%2Fdefaulttags.py",
            "raw_url": "https://github.com/django/django/raw/759ae3c2dafe149485a15d9a3bc97527c1ac1163/django%2Ftemplate%2Fdefaulttags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaulttags.py?ref=759ae3c2dafe149485a15d9a3bc97527c1ac1163",
            "patch": "@@ -448,15 +448,15 @@ def render(self, context):\n             max_width = int(self.max_width.resolve(context))\n         except VariableDoesNotExist:\n             return ''\n-        except ValueError:\n+        except (ValueError, TypeError):\n             raise TemplateSyntaxError(\"widthratio final argument must be an number\")\n         try:\n             value = float(value)\n             max_value = float(max_value)\n             ratio = (value / max_value) * max_width\n         except ZeroDivisionError:\n             return '0'\n-        except ValueError:\n+        except (ValueError, TypeError):\n             return ''\n         return str(int(round(ratio)))\n "
        },
        {
            "sha": "a21b7ff323d47622bc503953cdd20aa6d263e4a9",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/759ae3c2dafe149485a15d9a3bc97527c1ac1163/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/759ae3c2dafe149485a15d9a3bc97527c1ac1163/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=759ae3c2dafe149485a15d9a3bc97527c1ac1163",
            "patch": "@@ -1466,6 +1466,14 @@ def get_template_tests(self):\n             # #10043: widthratio should allow max_width to be a variable\n             'widthratio11': ('{% widthratio a b c %}', {'a':50,'b':100, 'c': 100}, '50'),\n \n+            # #18739: widthratio should handle None args consistently with non-numerics\n+            'widthratio12a': ('{% widthratio a b c %}', {'a':'a','b':100,'c':100}, ''),\n+            'widthratio12b': ('{% widthratio a b c %}', {'a':None,'b':100,'c':100}, ''),\n+            'widthratio13a': ('{% widthratio a b c %}', {'a':0,'b':'b','c':100}, ''),\n+            'widthratio13b': ('{% widthratio a b c %}', {'a':0,'b':None,'c':100}, ''),\n+            'widthratio14a': ('{% widthratio a b c %}', {'a':0,'b':100,'c':'c'}, template.TemplateSyntaxError),\n+            'widthratio14b': ('{% widthratio a b c %}', {'a':0,'b':100,'c':None}, template.TemplateSyntaxError),\n+\n             ### WITH TAG ########################################################\n             'with01': ('{% with key=dict.key %}{{ key }}{% endwith %}', {'dict': {'key': 50}}, '50'),\n             'legacywith01': ('{% with dict.key as key %}{{ key }}{% endwith %}', {'dict': {'key': 50}}, '50'),"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 10,
        "deletions": 2
    }
}