{
    "author": "kmtracey",
    "message": "Fixed #15565: Ensure terminal echo is on after reloader reloads (something turns it off on some systems if reload happens while at a pdb prompt). Thanks for the report zimnyx.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15883 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f5b22ed9977d19bc35ed02bcb965c0e0f48ef127",
    "files": [
        {
            "sha": "e5a421e586ca0cf4e0b164a63c6c6ba93eed8c5c",
            "filename": "django/utils/autoreload.py",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/f5b22ed9977d19bc35ed02bcb965c0e0f48ef127/django%2Futils%2Fautoreload.py",
            "raw_url": "https://github.com/django/django/raw/f5b22ed9977d19bc35ed02bcb965c0e0f48ef127/django%2Futils%2Fautoreload.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fautoreload.py?ref=f5b22ed9977d19bc35ed02bcb965c0e0f48ef127",
            "patch": "@@ -42,6 +42,10 @@\n except ImportError:\n     pass\n \n+try:\n+    import termios\n+except ImportError:\n+    termios = None\n \n RUN_RELOADER = True\n \n@@ -67,7 +71,16 @@ def code_changed():\n             return True\n     return False\n \n+def ensure_echo_on():\n+    if termios:\n+        fd = sys.stdin.fileno()\n+        attr_list = termios.tcgetattr(fd)\n+        if not attr_list[3] & termios.ECHO:\n+            attr_list[3] |= termios.ECHO\n+            termios.tcsetattr(fd, termios.TCSANOW, attr_list)\n+\n def reloader_thread():\n+    ensure_echo_on()\n     while RUN_RELOADER:\n         if code_changed():\n             sys.exit(3) # force reload"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 13,
        "deletions": 0
    }
}