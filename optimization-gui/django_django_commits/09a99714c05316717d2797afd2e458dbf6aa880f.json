{
    "author": "claudep",
    "message": "Moved get_primary_key_column implementation to base\n\nRefs #17574.",
    "sha": "09a99714c05316717d2797afd2e458dbf6aa880f",
    "files": [
        {
            "sha": "9b0f4957491b8f574a31752e1f78709de88b0403",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/09a99714c05316717d2797afd2e458dbf6aa880f/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/09a99714c05316717d2797afd2e458dbf6aa880f/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=09a99714c05316717d2797afd2e458dbf6aa880f",
            "patch": "@@ -1034,9 +1034,12 @@ def get_key_columns(self, cursor, table_name):\n \n     def get_primary_key_column(self, cursor, table_name):\n         \"\"\"\n-        Backends can override this to return the column name of the primary key for the given table.\n+        Returns the name of the primary key column for the given table.\n         \"\"\"\n-        raise NotImplementedError\n+        for column in six.iteritems(self.get_indexes(cursor, table_name)):\n+            if column[1]['primary_key']:\n+                return column[0]\n+        return None\n \n     def get_indexes(self, cursor, table_name):\n         \"\"\""
        },
        {
            "sha": "c552263e5ecff4490f3199572254f92c80472304",
            "filename": "django/db/backends/mysql/introspection.py",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/09a99714c05316717d2797afd2e458dbf6aa880f/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py",
            "raw_url": "https://github.com/django/django/raw/09a99714c05316717d2797afd2e458dbf6aa880f/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fmysql%2Fintrospection.py?ref=09a99714c05316717d2797afd2e458dbf6aa880f",
            "patch": "@@ -2,7 +2,6 @@\n from .base import FIELD_TYPE\n \n from django.db.backends import BaseDatabaseIntrospection\n-from django.utils import six\n \n \n foreign_key_re = re.compile(r\"\\sCONSTRAINT `[^`]*` FOREIGN KEY \\(`([^`]*)`\\) REFERENCES `([^`]*)` \\(`([^`]*)`\\)\")\n@@ -88,15 +87,6 @@ def get_key_columns(self, cursor, table_name):\n         key_columns.extend(cursor.fetchall())\n         return key_columns\n \n-    def get_primary_key_column(self, cursor, table_name):\n-        \"\"\"\n-        Returns the name of the primary key column for the given table\n-        \"\"\"\n-        for column in six.iteritems(self.get_indexes(cursor, table_name)):\n-            if column[1]['primary_key']:\n-                return column[0]\n-        return None\n-\n     def get_indexes(self, cursor, table_name):\n         cursor.execute(\"SHOW INDEX FROM %s\" % self.connection.ops.quote_name(table_name))\n         # Do a two-pass search for indexes: on first pass check which indexes"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 5,
        "deletions": 12
    }
}