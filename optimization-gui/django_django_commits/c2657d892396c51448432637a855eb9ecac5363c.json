{
    "author": "ramiro",
    "message": "Fixed #14921 -- Tweak changes made in r14861 for the Oracle backend so the test runner can actually create the test DB. Thanks Karen for the report.\n\nIn Oracle, the name of a DB as handled by Django hasn't a counterpart anyway. So use the 'production DB name' as it was done before.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14993 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "c2657d892396c51448432637a855eb9ecac5363c",
    "files": [
        {
            "sha": "3ba8922a310da6dac59cd9ab493cea92f9f7d96b",
            "filename": "django/db/backends/creation.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c2657d892396c51448432637a855eb9ecac5363c/django%2Fdb%2Fbackends%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/c2657d892396c51448432637a855eb9ecac5363c/django%2Fdb%2Fbackends%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fcreation.py?ref=c2657d892396c51448432637a855eb9ecac5363c",
            "patch": "@@ -374,7 +374,7 @@ def create_test_db(self, verbosity=1, autoclobber=False):\n \n     def _get_test_db_name(self):\n         \"\"\"\n-        Internal implementation - returns the name of the test DB that wll be\n+        Internal implementation - returns the name of the test DB that will be\n         created. Only useful when called from create_test_db() and\n         _create_test_db() and when no external munging is done with the 'NAME'\n         or 'TEST_NAME' settings."
        },
        {
            "sha": "bda70397c250a1e22a767e4a145d797d0f4751c8",
            "filename": "django/db/backends/oracle/creation.py",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/c2657d892396c51448432637a855eb9ecac5363c/django%2Fdb%2Fbackends%2Foracle%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/c2657d892396c51448432637a855eb9ecac5363c/django%2Fdb%2Fbackends%2Foracle%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fcreation.py?ref=c2657d892396c51448432637a855eb9ecac5363c",
            "patch": "@@ -43,7 +43,7 @@ def __init__(self, connection):\n         super(DatabaseCreation, self).__init__(connection)\n \n     def _create_test_db(self, verbosity=1, autoclobber=False):\n-        TEST_NAME = self._get_test_db_name()\n+        TEST_NAME = self._test_database_name()\n         TEST_USER = self._test_database_user()\n         TEST_PASSWD = self._test_database_passwd()\n         TEST_TBLSPACE = self._test_database_tblspace()\n@@ -201,7 +201,7 @@ def _execute_statements(self, cursor, statements, parameters, verbosity):\n                 sys.stderr.write(\"Failed (%s)\\n\" % (err))\n                 raise\n \n-    def _get_test_db_name(self):\n+    def _test_database_name(self):\n         name = TEST_DATABASE_PREFIX + self.connection.settings_dict['NAME']\n         try:\n             if self.connection.settings_dict['TEST_NAME']:\n@@ -251,3 +251,11 @@ def _test_database_tblspace_tmp(self):\n         except KeyError:\n             pass\n         return name\n+\n+    def _get_test_db_name(self):\n+        \"\"\"\n+        We need to return the 'production' DB name to get the test DB creation\n+        machinery to work. This isn't a great deal in this case because DB\n+        names as handled by Django haven't real counterparts in Oracle.\n+        \"\"\"\n+        return self.connection.settings_dict['NAME']"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 11,
        "deletions": 3
    }
}