{
    "author": "ramiro",
    "message": "Removed ad-hoc support for usage of short names of built-in DB backends.\n\nThis non-standard naming was deprecated in Django 1.2.",
    "sha": "35e8dc5169013437d71ae60e05c7f3356d86236e",
    "files": [
        {
            "sha": "146de7b9f40473546fbc0872ae3edc93fceced64",
            "filename": "django/db/utils.py",
            "status": "modified",
            "additions": 7,
            "deletions": 16,
            "changes": 23,
            "blob_url": "https://github.com/django/django/blob/35e8dc5169013437d71ae60e05c7f3356d86236e/django%2Fdb%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/35e8dc5169013437d71ae60e05c7f3356d86236e/django%2Fdb%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Futils.py?ref=35e8dc5169013437d71ae60e05c7f3356d86236e",
            "patch": "@@ -28,28 +28,19 @@ def load_backend(backend_name):\n         # listing all possible (built-in) database backends.\n         backend_dir = os.path.join(os.path.dirname(__file__), 'backends')\n         try:\n-            available_backends = [f for f in os.listdir(backend_dir)\n+            builtin_backends = [f for f in os.listdir(backend_dir)\n                     if os.path.isdir(os.path.join(backend_dir, f))\n-                    and not (f.startswith('.') or f == '__pycache__')]\n+                    and not (f.startswith('.') or f in ('__pycache__', 'dummy'))]\n         except EnvironmentError:\n-            available_backends = []\n-        full_notation = backend_name.startswith('django.db.backends.')\n-        if full_notation:\n-            backend_name = backend_name[19:] # See #15621.\n-        if backend_name not in available_backends:\n-            backend_reprs = map(repr, sorted(available_backends))\n+            builtin_backends = []\n+        if backend_name not in ['django.db.backends.%s' % b for b in\n+                                builtin_backends]:\n+            backend_reprs = map(repr, sorted(builtin_backends))\n             error_msg = (\"%r isn't an available database backend.\\n\"\n-                         \"Try using django.db.backends.XXX, where XXX \"\n+                         \"Try using 'django.db.backends.XXX', where XXX \"\n                          \"is one of:\\n    %s\\nError was: %s\" %\n                          (backend_name, \", \".join(backend_reprs), e_user))\n             raise ImproperlyConfigured(error_msg)\n-        elif not full_notation:\n-            # user tried to use the old notation for the database backend\n-            error_msg = (\"%r isn't an available database backend.\\n\"\n-                         \"Try using django.db.backends.%s instead.\\n\"\n-                         \"Error was: %s\" %\n-                         (backend_name, backend_name, e_user))\n-            raise ImproperlyConfigured(error_msg)\n         else:\n             # If there's some other error, this must be an error in Django\n             raise"
        },
        {
            "sha": "d284cfaac88537c0020a20cbf55a5091781ad303",
            "filename": "tests/regressiontests/backends/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/35e8dc5169013437d71ae60e05c7f3356d86236e/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/35e8dc5169013437d71ae60e05c7f3356d86236e/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbackends%2Ftests.py?ref=35e8dc5169013437d71ae60e05c7f3356d86236e",
            "patch": "@@ -666,13 +666,6 @@ def runner2(other_thread_connection):\n         self.assertEqual(len(exceptions), 0)\n \n \n-class BackendLoadingTests(TestCase):\n-    def test_old_style_backends_raise_useful_exception(self):\n-        six.assertRaisesRegex(self, ImproperlyConfigured,\n-            \"Try using django.db.backends.sqlite3 instead\",\n-            load_backend, 'sqlite3')\n-\n-\n class MySQLPKZeroTests(TestCase):\n     \"\"\"\n     Zero as id for AutoField should raise exception in MySQL, because MySQL"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 7,
        "deletions": 23
    }
}