{
    "author": "adrianholovaty",
    "message": "Merge pull request #24 from marcneuwirth/master\n\nRemoved 'return false' in favor of preventDefault in admin JS.",
    "sha": "04785d2697b05186362b8d430c06109cdb91c069",
    "files": [
        {
            "sha": "668e1157c81b02b83662610188dffd6bef9976b1",
            "filename": "django/contrib/admin/static/admin/js/inlines.js",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/04785d2697b05186362b8d430c06109cdb91c069/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.js",
            "raw_url": "https://github.com/django/django/raw/04785d2697b05186362b8d430c06109cdb91c069/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Finlines.js?ref=04785d2697b05186362b8d430c06109cdb91c069",
            "patch": "@@ -31,11 +31,11 @@\n \t\t\t}\n \t\t};\n \t\tvar totalForms = $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\").attr(\"autocomplete\", \"off\");\n-\t\tvar nextIndex = parseInt(totalForms.val());\n+\t\tvar nextIndex = parseInt(totalForms.val(), 10);\n \t\tvar maxForms = $(\"#id_\" + options.prefix + \"-MAX_NUM_FORMS\").attr(\"autocomplete\", \"off\");\n \t\t// only show the add button if we are allowed to add more items,\n         // note that max_num = None translates to a blank string.\n-\t\tvar showAddButton = maxForms.val() == '' || (maxForms.val()-totalForms.val()) > 0;\n+\t\tvar showAddButton = maxForms.val() === '' || (maxForms.val()-totalForms.val()) > 0;\n \t\t$(this).each(function(i) {\n \t\t\t$(this).not(\".\" + options.emptyCssClass).addClass(options.formCssClass);\n \t\t});\n@@ -52,13 +52,14 @@\n \t\t\t\t$(this).filter(\":last\").after('<div class=\"' + options.addCssClass + '\"><a href=\"javascript:void(0)\">' + options.addText + \"</a></div>\");\n \t\t\t\taddButton = $(this).filter(\":last\").next().find(\"a\");\n \t\t\t}\n-\t\t\taddButton.click(function() {\n+\t\t\taddButton.click(function(e) {\n+\t\t\t\te.preventDefault();\n \t\t\t\tvar totalForms = $(\"#id_\" + options.prefix + \"-TOTAL_FORMS\");\n \t\t\t\tvar template = $(\"#\" + options.prefix + \"-empty\");\n \t\t\t\tvar row = template.clone(true);\n \t\t\t\trow.removeClass(options.emptyCssClass)\n-\t\t\t\t    .addClass(options.formCssClass)\n-\t\t\t\t    .attr(\"id\", options.prefix + \"-\" + nextIndex);\n+\t\t\t\t\t.addClass(options.formCssClass)\n+\t\t\t\t\t.attr(\"id\", options.prefix + \"-\" + nextIndex);\n \t\t\t\tif (row.is(\"tr\")) {\n \t\t\t\t\t// If the forms are laid out in table rows, insert\n \t\t\t\t\t// the remove button into the last table cell:\n@@ -78,14 +79,15 @@\n \t\t\t\t// Insert the new form when it has been fully edited\n \t\t\t\trow.insertBefore($(template));\n \t\t\t\t// Update number of total forms\n-\t\t\t\t$(totalForms).val(parseInt(totalForms.val()) + 1);\n+\t\t\t\t$(totalForms).val(parseInt(totalForms.val(), 10) + 1);\n \t\t\t\tnextIndex += 1;\n \t\t\t\t// Hide add button in case we've hit the max, except we want to add infinitely\n-\t\t\t\tif ((maxForms.val() != '') && (maxForms.val()-totalForms.val()) <= 0) {\n+\t\t\t\tif ((maxForms.val() !== '') && (maxForms.val()-totalForms.val()) <= 0) {\n \t\t\t\t\taddButton.parent().hide();\n \t\t\t\t}\n \t\t\t\t// The delete button of each row triggers a bunch of other things\n-\t\t\t\trow.find(\"a.\" + options.deleteCssClass).click(function() {\n+\t\t\t\trow.find(\"a.\" + options.deleteCssClass).click(function(e) {\n+\t\t\t\t\te.preventDefault();\n \t\t\t\t\t// Remove the parent form containing this button:\n \t\t\t\t\tvar row = $(this).parents(\".\" + options.formCssClass);\n \t\t\t\t\trow.remove();\n@@ -98,7 +100,7 @@\n \t\t\t\t\tvar forms = $(\".\" + options.formCssClass);\n \t\t\t\t\t$(\"#id_\" + options.prefix + \"-TOTAL_FORMS\").val(forms.length);\n \t\t\t\t\t// Show add button again once we drop below max\n-\t\t\t\t\tif ((maxForms.val() == '') || (maxForms.val()-forms.length) > 0) {\n+\t\t\t\t\tif ((maxForms.val() === '') || (maxForms.val()-forms.length) > 0) {\n \t\t\t\t\t\taddButton.parent().show();\n \t\t\t\t\t}\n \t\t\t\t\t// Also, update names and ids for all remaining form controls\n@@ -110,17 +112,15 @@\n \t\t\t\t\t\t\tupdateElementIndex(this, options.prefix, i);\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n-\t\t\t\t\treturn false;\n \t\t\t\t});\n \t\t\t\t// If a post-add callback was supplied, call it with the added form:\n \t\t\t\tif (options.added) {\n \t\t\t\t\toptions.added(row);\n \t\t\t\t}\n-\t\t\t\treturn false;\n \t\t\t});\n \t\t}\n \t\treturn this;\n-\t}\n+\t};\n \t/* Setup plugin defaults */\n \t$.fn.formset.defaults = {\n \t\tprefix: \"form\",\t\t\t\t\t// The form prefix for your django formset\n@@ -132,5 +132,5 @@\n \t\tformCssClass: \"dynamic-form\",\t// CSS class applied to each form in a formset\n \t\tadded: null,\t\t\t\t\t// Function called each time a new form is added\n \t\tremoved: null\t\t\t\t\t// Function called each time a form is deleted\n-\t}\n+\t};\n })(django.jQuery);"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 13,
        "deletions": 13
    }
}