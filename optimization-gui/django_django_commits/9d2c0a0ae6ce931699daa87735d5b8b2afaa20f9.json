{
    "author": "ptone",
    "message": "Removed superfluous cookie check from auth login.\n\nThis is ensured through the CSRF protection of the view",
    "sha": "9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9",
    "files": [
        {
            "sha": "38c445f71abcc15fa89b621fece51c238c46984c",
            "filename": "django/contrib/admin/forms.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9/django%2Fcontrib%2Fadmin%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9/django%2Fcontrib%2Fadmin%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fforms.py?ref=9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9",
            "patch": "@@ -33,5 +33,4 @@ def clean(self):\n                 raise forms.ValidationError(message % {\n                     'username': self.username_field.verbose_name\n                 })\n-        self.check_for_test_cookie()\n         return self.cleaned_data"
        },
        {
            "sha": "f3ad655c65e0196cfb09dd192293998feb65848c",
            "filename": "django/contrib/auth/forms.py",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9/django%2Fcontrib%2Fauth%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9/django%2Fcontrib%2Fauth%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fforms.py?ref=9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9",
            "patch": "@@ -1,5 +1,7 @@\n from __future__ import unicode_literals\n \n+import warnings\n+\n from django import forms\n from django.forms.util import flatatt\n from django.template import loader\n@@ -153,8 +155,6 @@ class AuthenticationForm(forms.Form):\n     error_messages = {\n         'invalid_login': _(\"Please enter a correct %(username)s and password. \"\n                            \"Note that both fields may be case-sensitive.\"),\n-        'no_cookies': _(\"Your Web browser doesn't appear to have cookies \"\n-                        \"enabled. Cookies are required for logging in.\"),\n         'inactive': _(\"This account is inactive.\"),\n     }\n \n@@ -189,12 +189,11 @@ def clean(self):\n                     })\n             elif not self.user_cache.is_active:\n                 raise forms.ValidationError(self.error_messages['inactive'])\n-        self.check_for_test_cookie()\n         return self.cleaned_data\n \n     def check_for_test_cookie(self):\n-        if self.request and not self.request.session.test_cookie_worked():\n-            raise forms.ValidationError(self.error_messages['no_cookies'])\n+        warnings.warn(\"check_for_test_cookie is deprecated; ensure your login \"\n+                \"view is CSRF-protected.\", DeprecationWarning)\n \n     def get_user_id(self):\n         if self.user_cache:"
        },
        {
            "sha": "c9f53f1956b1493f335bc16f925b07838079ac6b",
            "filename": "django/contrib/auth/views.py",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9/django%2Fcontrib%2Fauth%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9/django%2Fcontrib%2Fauth%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fviews.py?ref=9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9",
            "patch": "@@ -45,15 +45,10 @@ def login(request, template_name='registration/login.html',\n             # Okay, security check complete. Log the user in.\n             auth_login(request, form.get_user())\n \n-            if request.session.test_cookie_worked():\n-                request.session.delete_test_cookie()\n-\n             return HttpResponseRedirect(redirect_to)\n     else:\n         form = authentication_form(request)\n \n-    request.session.set_test_cookie()\n-\n     current_site = get_current_site(request)\n \n     context = {"
        },
        {
            "sha": "f1ae1338df73118ff539e844a9fedb3f03e48218",
            "filename": "docs/internals/deprecation.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9/docs%2Finternals%2Fdeprecation.txt",
            "raw_url": "https://github.com/django/django/raw/9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9/docs%2Finternals%2Fdeprecation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fdeprecation.txt?ref=9d2c0a0ae6ce931699daa87735d5b8b2afaa20f9",
            "patch": "@@ -320,6 +320,12 @@ these changes.\n   deprecated. Use the :class:`warnings.catch_warnings` context manager\n   available starting with Python 2.6 instead.\n \n+* The undocumented ``check_for_test_cookie`` method in\n+  :class:`~django.contrib.auth.forms.AuthenticationForm` will be removed\n+  following an accelerated deprecation. Users subclassing this form should\n+  remove calls to this method, and instead ensure that their auth related views\n+  are CSRF protected, which ensures that cookies are enabled.\n+\n 1.8\n ---\n "
        }
    ],
    "stats": {
        "total": 21,
        "additions": 10,
        "deletions": 11
    }
}