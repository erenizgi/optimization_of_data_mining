{
    "author": "mjjohnson",
    "message": "Fixed #17069 -- Added log filter example to docs.\n\nAdded an example of filtering admin error emails (to exclude\nUnreadablePostErrors) to the docs.",
    "sha": "32ffcb21a00e08eb478cc287bc3254ee765d815d",
    "files": [
        {
            "sha": "b54a9475ae73b3bb5f7f4d8f4e24c7207a090864",
            "filename": "docs/topics/logging.txt",
            "status": "modified",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/django/django/blob/32ffcb21a00e08eb478cc287bc3254ee765d815d/docs%2Ftopics%2Flogging.txt",
            "raw_url": "https://github.com/django/django/raw/32ffcb21a00e08eb478cc287bc3254ee765d815d/docs%2Ftopics%2Flogging.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Flogging.txt?ref=32ffcb21a00e08eb478cc287bc3254ee765d815d",
            "patch": "@@ -516,6 +516,35 @@ logging module.\n    through the filter. Handling of that record will not proceed if the callback\n    returns False.\n \n+   For instance, to filter out :class:`~django.http.UnreadablePostError`\n+   (raised when a user cancels an upload) from the admin emails, you would\n+   create a filter function::\n+\n+    from django.http import UnreadablePostError\n+\n+    def skip_unreadable_post(record):\n+        if record.exc_info:\n+            exc_type, exc_value = record.exc_info[:2]\n+            if isinstance(exc_value, UnreadablePostError):\n+                return False\n+        return True\n+\n+   and then add it to your logging config::\n+\n+        'filters': {\n+            'skip_unreadable_posts': {\n+                '()': 'django.utils.log.CallbackFilter',\n+                'callback': skip_unreadable_post,\n+            }\n+        },\n+        'handlers': {\n+            'mail_admins': {\n+                'level': 'ERROR',\n+                'filters': ['skip_unreadable_posts'],\n+                'class': 'django.utils.log.AdminEmailHandler'\n+            }\n+        },\n+\n .. class:: RequireDebugFalse()\n \n    .. versionadded:: 1.4"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 29,
        "deletions": 0
    }
}