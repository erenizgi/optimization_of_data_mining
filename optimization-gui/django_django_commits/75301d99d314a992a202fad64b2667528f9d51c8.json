{
    "author": "jbronn",
    "message": "Fixed `inspectapp` tests to work with improved PG driver in GDAL 1.9+.",
    "sha": "75301d99d314a992a202fad64b2667528f9d51c8",
    "files": [
        {
            "sha": "8fc39db58d1625da876001683df1a22d440277d7",
            "filename": "django/contrib/gis/tests/inspectapp/tests.py",
            "status": "modified",
            "additions": 20,
            "deletions": 2,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/75301d99d314a992a202fad64b2667528f9d51c8/django%2Fcontrib%2Fgis%2Ftests%2Finspectapp%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/75301d99d314a992a202fad64b2667528f9d51c8/django%2Fcontrib%2Fgis%2Ftests%2Finspectapp%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Ftests%2Finspectapp%2Ftests.py?ref=75301d99d314a992a202fad64b2667528f9d51c8",
            "patch": "@@ -4,7 +4,7 @@\n \n from django.db import connections\n from django.test import TestCase\n-from django.contrib.gis.gdal import Driver\n+from django.contrib.gis.gdal import Driver, GDAL_VERSION\n from django.contrib.gis.geometry.test_data import TEST_DATA\n from django.contrib.gis.utils.ogrinspect import ogrinspect\n \n@@ -74,15 +74,33 @@ def test_time_field(self):\n             '',\n             'class Measurement(models.Model):',\n             '    f_decimal = models.DecimalField(max_digits=0, decimal_places=0)',\n+        ]\n+\n+        if GDAL_VERSION < (1, 9, 0):\n+            # Prior to GDAL 1.9, the order of the model fields was not\n+            # the same as the columns in the database.\n+            expected.extend([\n             '    f_int = models.IntegerField()',\n             '    f_datetime = models.DateTimeField()',\n             '    f_time = models.TimeField()',\n             '    f_float = models.FloatField()',\n             '    f_char = models.CharField(max_length=10)',\n             '    f_date = models.DateField()',\n+            ])\n+        else:\n+            expected.extend([\n+            '    f_float = models.FloatField()',\n+            '    f_int = models.IntegerField()',\n+            '    f_char = models.CharField(max_length=10)',\n+            '    f_date = models.DateField()',\n+            '    f_datetime = models.DateTimeField()',\n+            '    f_time = models.TimeField()',\n+            ])\n+\n+        expected.extend([\n             '    geom = models.PolygonField()',\n             '    objects = models.GeoManager()',\n-        ]\n+        ])\n \n         self.assertEqual(model_def, '\\n'.join(expected))\n "
        }
    ],
    "stats": {
        "total": 22,
        "additions": 20,
        "deletions": 2
    }
}