{
    "author": "claudep",
    "message": "Marked bytestrings with b prefix. Refs #18269\n\nThis is a preparation for unicode literals general usage in\nDjango (Python 3 compatibility).",
    "sha": "38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
    "files": [
        {
            "sha": "bf6684766bc979d1461e39bdd50cc7731fd5ba84",
            "filename": "django/contrib/humanize/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcontrib%2Fhumanize%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcontrib%2Fhumanize%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -190,7 +190,7 @@ def now(self, tz=None):\n         orig_humanize_datetime = humanize.datetime\n         orig_timesince_datetime = timesince.datetime\n         humanize.datetime = MockDateTime\n-        timesince.datetime = new.module(\"mock_datetime\")\n+        timesince.datetime = new.module(b\"mock_datetime\")\n         timesince.datetime.datetime = MockDateTime\n \n         try:"
        },
        {
            "sha": "3ba519188bfacbd63c0f920ce28987a4b308be7b",
            "filename": "django/core/context_processors.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcore%2Fcontext_processors.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcore%2Fcontext_processors.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcontext_processors.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -22,7 +22,7 @@ def _get_val():\n             # In order to be able to provide debugging info in the\n             # case of misconfiguration, we use a sentinel value\n             # instead of returning an empty dict.\n-            return 'NOTPROVIDED'\n+            return b'NOTPROVIDED'\n         else:\n             return token\n     _get_val = lazy(_get_val, str)"
        },
        {
            "sha": "ad0922b88bc9e2562ff4712a66fcecbb218484d3",
            "filename": "django/core/files/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcore%2Ffiles%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcore%2Ffiles%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fbase.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -125,7 +125,7 @@ class ContentFile(File):\n     A File-like object that takes just raw content, rather than an actual file.\n     \"\"\"\n     def __init__(self, content, name=None):\n-        content = content or ''\n+        content = content or b''\n         super(ContentFile, self).__init__(BytesIO(content), name=name)\n         self.size = len(content)\n "
        },
        {
            "sha": "97d53482e4ccdd9799cc2a7695cde8d08192fabc",
            "filename": "django/core/files/uploadedfile.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcore%2Ffiles%2Fuploadedfile.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcore%2Ffiles%2Fuploadedfile.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fuploadedfile.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -30,8 +30,8 @@ def __init__(self, file=None, name=None, content_type=None, size=None, charset=N\n         self.charset = charset\n \n     def __repr__(self):\n-        return \"<%s: %s (%s)>\" % (\n-            self.__class__.__name__, smart_str(self.name), self.content_type)\n+        return smart_str(\"<%s: %s (%s)>\" % (\n+            self.__class__.__name__, self.name, self.content_type))\n \n     def _get_name(self):\n         return self._name"
        },
        {
            "sha": "128ff7ac64fa0798272fc89c6a9ee1ad4158d392",
            "filename": "django/core/handlers/wsgi.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fcore%2Fhandlers%2Fwsgi.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fhandlers%2Fwsgi.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -78,32 +78,32 @@ class LimitedStream(object):\n     def __init__(self, stream, limit, buf_size=64 * 1024 * 1024):\n         self.stream = stream\n         self.remaining = limit\n-        self.buffer = ''\n+        self.buffer = b''\n         self.buf_size = buf_size\n \n     def _read_limited(self, size=None):\n         if size is None or size > self.remaining:\n             size = self.remaining\n         if size == 0:\n-            return ''\n+            return b''\n         result = self.stream.read(size)\n         self.remaining -= len(result)\n         return result\n \n     def read(self, size=None):\n         if size is None:\n             result = self.buffer + self._read_limited()\n-            self.buffer = ''\n+            self.buffer = b''\n         elif size < len(self.buffer):\n             result = self.buffer[:size]\n             self.buffer = self.buffer[size:]\n         else: # size >= len(self.buffer)\n             result = self.buffer + self._read_limited(size - len(self.buffer))\n-            self.buffer = ''\n+            self.buffer = b''\n         return result\n \n     def readline(self, size=None):\n-        while '\\n' not in self.buffer and \\\n+        while b'\\n' not in self.buffer and \\\n               (size is None or len(self.buffer) < size):\n             if size:\n                 # since size is not None here, len(self.buffer) < size"
        },
        {
            "sha": "4fba304e23786442d5ae6217b8dc8fef22dbe545",
            "filename": "django/db/backends/sqlite3/base.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -51,15 +51,15 @@ def adapt_datetime_with_timezone_support(value):\n             default_timezone = timezone.get_default_timezone()\n             value = timezone.make_aware(value, default_timezone)\n         value = value.astimezone(timezone.utc).replace(tzinfo=None)\n-    return value.isoformat(\" \")\n-\n-Database.register_converter(\"bool\", lambda s: str(s) == '1')\n-Database.register_converter(\"time\", parse_time)\n-Database.register_converter(\"date\", parse_date)\n-Database.register_converter(\"datetime\", parse_datetime_with_timezone_support)\n-Database.register_converter(\"timestamp\", parse_datetime_with_timezone_support)\n-Database.register_converter(\"TIMESTAMP\", parse_datetime_with_timezone_support)\n-Database.register_converter(\"decimal\", util.typecast_decimal)\n+    return value.isoformat(b\" \")\n+\n+Database.register_converter(b\"bool\", lambda s: str(s) == '1')\n+Database.register_converter(b\"time\", parse_time)\n+Database.register_converter(b\"date\", parse_date)\n+Database.register_converter(b\"datetime\", parse_datetime_with_timezone_support)\n+Database.register_converter(b\"timestamp\", parse_datetime_with_timezone_support)\n+Database.register_converter(b\"TIMESTAMP\", parse_datetime_with_timezone_support)\n+Database.register_converter(b\"decimal\", util.typecast_decimal)\n Database.register_adapter(datetime.datetime, adapt_datetime_with_timezone_support)\n Database.register_adapter(decimal.Decimal, util.rev_typecast_decimal)\n if Database.version_info >= (2, 4, 1):"
        },
        {
            "sha": "08bfc73a8792aa5093c2871bb20b73bb41d70d90",
            "filename": "django/db/models/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fdb%2Fmodels%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fdb%2Fmodels%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fbase.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -57,11 +57,11 @@ def __new__(cls, name, bases, attrs):\n \n         new_class.add_to_class('_meta', Options(meta, **kwargs))\n         if not abstract:\n-            new_class.add_to_class('DoesNotExist', subclass_exception('DoesNotExist',\n+            new_class.add_to_class('DoesNotExist', subclass_exception(b'DoesNotExist',\n                     tuple(x.DoesNotExist\n                             for x in parents if hasattr(x, '_meta') and not x._meta.abstract)\n                                     or (ObjectDoesNotExist,), module))\n-            new_class.add_to_class('MultipleObjectsReturned', subclass_exception('MultipleObjectsReturned',\n+            new_class.add_to_class('MultipleObjectsReturned', subclass_exception(b'MultipleObjectsReturned',\n                     tuple(x.MultipleObjectsReturned\n                             for x in parents if hasattr(x, '_meta') and not x._meta.abstract)\n                                     or (MultipleObjectsReturned,), module))"
        },
        {
            "sha": "5fcf9590eb6c586b6c0c8fcdebf2bf6086088b6b",
            "filename": "django/forms/models.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fforms%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fforms%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fmodels.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -388,10 +388,10 @@ def modelform_factory(model, form=ModelForm, fields=None, exclude=None,\n     parent = (object,)\n     if hasattr(form, 'Meta'):\n         parent = (form.Meta, object)\n-    Meta = type('Meta', parent, attrs)\n+    Meta = type(b'Meta', parent, attrs)\n \n     # Give this new form class a reasonable name.\n-    class_name = model.__name__ + 'Form'\n+    class_name = model.__name__ + b'Form'\n \n     # Class attributes for the new form class.\n     form_class_attrs = {"
        },
        {
            "sha": "bf848deb388a856eabbe7dc7b04d2ed38acae083",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -18,7 +18,7 @@\n # See ticket #13007, http://bugs.python.org/issue2193 and http://trac.edgewall.org/ticket/2256\n _tc = Cookie.SimpleCookie()\n try:\n-    _tc.load('foo:bar=1')\n+    _tc.load(b'foo:bar=1')\n     _cookie_allows_colon_in_names = True\n except Cookie.CookieError:\n     _cookie_allows_colon_in_names = False\n@@ -650,8 +650,8 @@ def delete_cookie(self, key, path='/', domain=None):\n \n     def _get_content(self):\n         if self.has_header('Content-Encoding'):\n-            return ''.join([str(e) for e in self._container])\n-        return ''.join([smart_str(e, self._charset) for e in self._container])\n+            return b''.join([str(e) for e in self._container])\n+        return b''.join([smart_str(e, self._charset) for e in self._container])\n \n     def _set_content(self, value):\n         if hasattr(value, '__iter__'):"
        },
        {
            "sha": "162c08e38d062bb5dc138b7829ed6067f867cf5e",
            "filename": "django/http/multipartparser.py",
            "status": "modified",
            "additions": 19,
            "deletions": 19,
            "changes": 38,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fhttp%2Fmultipartparser.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fhttp%2Fmultipartparser.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2Fmultipartparser.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -268,7 +268,7 @@ def __init__(self, producer, length=None):\n         \"\"\"\n         self._producer = producer\n         self._empty = False\n-        self._leftover = ''\n+        self._leftover = b''\n         self.length = length\n         self.position = 0\n         self._remaining = length\n@@ -282,7 +282,7 @@ def parts():\n             remaining = (size is not None and [size] or [self._remaining])[0]\n             # do the whole thing in one shot if no limit was provided.\n             if remaining is None:\n-                yield ''.join(self)\n+                yield b''.join(self)\n                 return\n \n             # otherwise do some bookkeeping to return exactly enough\n@@ -298,7 +298,7 @@ def parts():\n                 remaining -= len(emitting)\n                 yield emitting\n \n-        out = ''.join(parts())\n+        out = b''.join(parts())\n         return out\n \n     def next(self):\n@@ -311,7 +311,7 @@ def next(self):\n         \"\"\"\n         if self._leftover:\n             output = self._leftover\n-            self._leftover = ''\n+            self._leftover = b''\n         else:\n             output = next(self._producer)\n             self._unget_history = []\n@@ -341,7 +341,7 @@ def unget(self, bytes):\n             return\n         self._update_unget_history(len(bytes))\n         self.position -= len(bytes)\n-        self._leftover = ''.join([bytes, self._leftover])\n+        self._leftover = b''.join([bytes, self._leftover])\n \n     def _update_unget_history(self, num_bytes):\n         \"\"\"\n@@ -459,7 +459,7 @@ def next(self):\n         if not chunks:\n             raise StopIteration()\n \n-        chunk = ''.join(chunks)\n+        chunk = b''.join(chunks)\n         boundary = self._find_boundary(chunk, len(chunk) < self._rollback)\n \n         if boundary:\n@@ -495,9 +495,9 @@ def _find_boundary(self, data, eof = False):\n             end = index\n             next = index + len(self._boundary)\n             # backup over CRLF\n-            if data[max(0,end-1)] == '\\n':\n+            if data[max(0,end-1)] == b'\\n':\n                 end -= 1\n-            if data[max(0,end-1)] == '\\r':\n+            if data[max(0,end-1)] == b'\\r':\n                 end -= 1\n             return end, next\n \n@@ -531,7 +531,7 @@ def parse_boundary_stream(stream, max_header_size):\n     # 'find' returns the top of these four bytes, so we'll\n     # need to munch them later to prevent them from polluting\n     # the payload.\n-    header_end = chunk.find('\\r\\n\\r\\n')\n+    header_end = chunk.find(b'\\r\\n\\r\\n')\n \n     def _parse_header(line):\n         main_value_pair, params = parse_header(line)\n@@ -557,7 +557,7 @@ def _parse_header(line):\n     outdict = {}\n \n     # Eliminate blank lines\n-    for line in header.split('\\r\\n'):\n+    for line in header.split(b'\\r\\n'):\n         # This terminology (\"main value\" and \"dictionary of\n         # parameters\") is from the Python docs.\n         try:\n@@ -580,7 +580,7 @@ def _parse_header(line):\n class Parser(object):\n     def __init__(self, stream, boundary):\n         self._stream = stream\n-        self._separator = '--' + boundary\n+        self._separator = b'--' + boundary\n \n     def __iter__(self):\n         boundarystream = InterBoundaryIter(self._stream, self._separator)\n@@ -590,27 +590,27 @@ def __iter__(self):\n \n def parse_header(line):\n     \"\"\" Parse the header into a key-value. \"\"\"\n-    plist = _parse_header_params(';' + line)\n+    plist = _parse_header_params(b';' + line)\n     key = plist.pop(0).lower()\n     pdict = {}\n     for p in plist:\n-        i = p.find('=')\n+        i = p.find(b'=')\n         if i >= 0:\n             name = p[:i].strip().lower()\n             value = p[i+1:].strip()\n-            if len(value) >= 2 and value[0] == value[-1] == '\"':\n+            if len(value) >= 2 and value[0] == value[-1] == b'\"':\n                 value = value[1:-1]\n-                value = value.replace('\\\\\\\\', '\\\\').replace('\\\\\"', '\"')\n+                value = value.replace(b'\\\\\\\\', b'\\\\').replace(b'\\\\\"', b'\"')\n             pdict[name] = value\n     return key, pdict\n \n def _parse_header_params(s):\n     plist = []\n-    while s[:1] == ';':\n+    while s[:1] == b';':\n         s = s[1:]\n-        end = s.find(';')\n-        while end > 0 and s.count('\"', 0, end) % 2:\n-            end = s.find(';', end + 1)\n+        end = s.find(b';')\n+        while end > 0 and s.count(b'\"', 0, end) % 2:\n+            end = s.find(b';', end + 1)\n         if end < 0:\n             end = len(s)\n         f = s[:end]"
        },
        {
            "sha": "f826c8a80c334ffb169a90f53340d96bddaedc68",
            "filename": "django/utils/crypto.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Futils%2Fcrypto.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Futils%2Fcrypto.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcrypto.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -23,8 +23,8 @@\n from django.conf import settings\n \n \n-_trans_5c = \"\".join([chr(x ^ 0x5C) for x in xrange(256)])\n-_trans_36 = \"\".join([chr(x ^ 0x36) for x in xrange(256)])\n+_trans_5c = b\"\".join([chr(x ^ 0x5C) for x in xrange(256)])\n+_trans_36 = b\"\".join([chr(x ^ 0x36) for x in xrange(256)])\n \n \n def salted_hmac(key_salt, value, secret=None):\n@@ -148,11 +148,11 @@ def pbkdf2(password, salt, iterations, dklen=0, digest=None):\n \n     def F(i):\n         def U():\n-            u = salt + struct.pack('>I', i)\n+            u = salt + struct.pack(b'>I', i)\n             for j in xrange(int(iterations)):\n                 u = _fast_hmac(password, u, digest).digest()\n                 yield _bin_to_long(u)\n         return _long_to_bin(reduce(operator.xor, U()), hex_format_string)\n \n     T = [F(x) for x in range(1, l + 1)]\n-    return ''.join(T[:-1]) + T[-1][:r]\n+    return b''.join(T[:-1]) + T[-1][:r]"
        },
        {
            "sha": "9d9b8b8a2d38595b1119bfa570579a1103eef4c2",
            "filename": "django/utils/encoding.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Futils%2Fencoding.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Futils%2Fencoding.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fencoding.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -154,7 +154,7 @@ def iri_to_uri(iri):\n     # converted.\n     if iri is None:\n         return iri\n-    return urllib.quote(smart_str(iri), safe=\"/#%[]=:;$&()+,!?*@'~\")\n+    return urllib.quote(smart_str(iri), safe=b\"/#%[]=:;$&()+,!?*@'~\")\n \n def filepath_to_uri(path):\n     \"\"\"Convert an file system path to a URI portion that is suitable for\n@@ -173,7 +173,7 @@ def filepath_to_uri(path):\n         return path\n     # I know about `os.sep` and `os.altsep` but I want to leave\n     # some flexibility for hardcoding separators.\n-    return urllib.quote(smart_str(path).replace(\"\\\\\", \"/\"), safe=\"/~!*()'\")\n+    return urllib.quote(smart_str(path).replace(\"\\\\\", \"/\"), safe=b\"/~!*()'\")\n \n # The encoding of the default system locale but falls back to the\n # given fallback encoding if the encoding is unsupported by python or could"
        },
        {
            "sha": "1b1a16a91193e71521ea3a98252b201c99368aca",
            "filename": "django/utils/html.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Futils%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Futils%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhtml.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -116,7 +116,7 @@ def smart_urlquote(url):\n     # contains a % not followed by two hexadecimal digits. See #9655.\n     if '%' not in url or unquoted_percents_re.search(url):\n         # See http://bugs.python.org/issue2637\n-        url = urllib.quote(smart_str(url), safe='!*\\'();:@&=+$,/?#[]~')\n+        url = urllib.quote(smart_str(url), safe=b'!*\\'();:@&=+$,/?#[]~')\n \n     return force_unicode(url)\n "
        },
        {
            "sha": "7bdf0d25ee6fa41166e30da3c61e31ae28c1179a",
            "filename": "django/views/debug.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fviews%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/django%2Fviews%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdebug.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -333,7 +333,7 @@ def _get_lines_from_file(self, filename, lineno, context_lines, loader=None, mod\n                 source = source.splitlines()\n         if source is None:\n             try:\n-                with open(filename) as fp:\n+                with open(filename, 'rb') as fp:\n                     source = fp.readlines()\n             except (OSError, IOError):\n                 pass"
        },
        {
            "sha": "10108d1f4fc7ff306d7a3d152cda5d59a366eb6b",
            "filename": "docs/ref/files/file.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/docs%2Fref%2Ffiles%2Ffile.txt",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/docs%2Fref%2Ffiles%2Ffile.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Ffiles%2Ffile.txt?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -96,7 +96,7 @@ The ``ContentFile`` Class\n \n         from django.core.files.base import ContentFile\n \n-        f1 = ContentFile(\"my string content\")\n+        f1 = ContentFile(b\"my string content\")\n         f2 = ContentFile(u\"my unicode content encoded as UTF-8\".encode('UTF-8'))\n \n .. currentmodule:: django.core.files.images"
        },
        {
            "sha": "46ce4138a4f665091ffbe8a5925d4be1b53482ac",
            "filename": "docs/ref/unicode.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/docs%2Fref%2Funicode.txt",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/docs%2Fref%2Funicode.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Funicode.txt?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -269,15 +269,15 @@ You can pass either Unicode strings or UTF-8 bytestrings as arguments to\n querysets are identical::\n \n     qs = People.objects.filter(name__contains=u'Å')\n-    qs = People.objects.filter(name__contains='\\xc3\\x85') # UTF-8 encoding of Å\n+    qs = People.objects.filter(name__contains=b'\\xc3\\x85') # UTF-8 encoding of Å\n \n Templates\n =========\n \n You can use either Unicode or bytestrings when creating templates manually::\n \n \tfrom django.template import Template\n-\tt1 = Template('This is a bytestring template.')\n+\tt1 = Template(b'This is a bytestring template.')\n \tt2 = Template(u'This is a Unicode template.')\n \n But the common case is to read templates from the filesystem, and this creates"
        },
        {
            "sha": "af8bcbca4e5a23bdfd0e6b0f6047e30e5f8b12b6",
            "filename": "tests/modeltests/model_forms/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fmodel_forms%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -1126,7 +1126,7 @@ def test_file_field(self):\n \n         f = TextFileForm(\n                 data={'description': u'Assistance'},\n-                files={'file': SimpleUploadedFile('test1.txt', 'hello world')})\n+                files={'file': SimpleUploadedFile('test1.txt', b'hello world')})\n         self.assertEqual(f.is_valid(), True)\n         self.assertEqual(type(f.cleaned_data['file']), SimpleUploadedFile)\n         instance = f.save()\n@@ -1135,7 +1135,7 @@ def test_file_field(self):\n         instance.file.delete()\n         f = TextFileForm(\n                 data={'description': u'Assistance'},\n-                files={'file': SimpleUploadedFile('test1.txt', 'hello world')})\n+                files={'file': SimpleUploadedFile('test1.txt', b'hello world')})\n         self.assertEqual(f.is_valid(), True)\n         self.assertEqual(type(f.cleaned_data['file']), SimpleUploadedFile)\n         instance = f.save()\n@@ -1144,7 +1144,7 @@ def test_file_field(self):\n         # Check if the max_length attribute has been inherited from the model.\n         f = TextFileForm(\n                 data={'description': u'Assistance'},\n-                files={'file': SimpleUploadedFile('test-maxlength.txt', 'hello world')})\n+                files={'file': SimpleUploadedFile('test-maxlength.txt', b'hello world')})\n         self.assertEqual(f.is_valid(), False)\n \n         # Edit an instance that already has the file defined in the model. This will not\n@@ -1165,7 +1165,7 @@ def test_file_field(self):\n \n         f = TextFileForm(\n                 data={'description': u'Assistance'},\n-                files={'file': SimpleUploadedFile('test2.txt', 'hello world')}, instance=instance)\n+                files={'file': SimpleUploadedFile('test2.txt', b'hello world')}, instance=instance)\n         self.assertEqual(f.is_valid(), True)\n         instance = f.save()\n         self.assertEqual(instance.file.name, 'tests/test2.txt')\n@@ -1174,7 +1174,7 @@ def test_file_field(self):\n         instance.file.delete()\n         f = TextFileForm(\n                 data={'description': u'Assistance'},\n-                files={'file': SimpleUploadedFile('test2.txt', 'hello world')})\n+                files={'file': SimpleUploadedFile('test2.txt', b'hello world')})\n         self.assertEqual(f.is_valid(), True)\n         instance = f.save()\n         self.assertEqual(instance.file.name, 'tests/test2.txt')\n@@ -1193,7 +1193,7 @@ def test_file_field(self):\n \n         f = TextFileForm(\n                 data={'description': u'Assistance'},\n-                files={'file': SimpleUploadedFile('test3.txt', 'hello world')}, instance=instance)\n+                files={'file': SimpleUploadedFile('test3.txt', b'hello world')}, instance=instance)\n         self.assertEqual(f.is_valid(), True)\n         instance = f.save()\n         self.assertEqual(instance.file.name, 'tests/test3.txt')\n@@ -1215,7 +1215,7 @@ def test_file_field(self):\n \n         f = TextFileForm(\n                 data={'description': u'Assistance'},\n-                files={'file': SimpleUploadedFile('test3.txt', 'hello world')})\n+                files={'file': SimpleUploadedFile('test3.txt', b'hello world')})\n         self.assertEqual(f.is_valid(), True)\n         instance = f.save()\n         self.assertEqual(instance.file.name, 'tests/test3.txt')"
        },
        {
            "sha": "e792c944a10eb32d4620daadf3b716f98396ddc3",
            "filename": "tests/modeltests/serializers/tests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fmodeltests%2Fserializers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fmodeltests%2Fserializers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fserializers%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -113,8 +113,8 @@ def test_altering_serialized_output(self):\n         Tests the ability to create new objects by\n         modifying serialized content.\n         \"\"\"\n-        old_headline = \"Poker has no place on ESPN\"\n-        new_headline = \"Poker has no place on television\"\n+        old_headline = b\"Poker has no place on ESPN\"\n+        new_headline = b\"Poker has no place on television\"\n         serial_str = serializers.serialize(self.serializer_name,\n                                            Article.objects.all())\n         serial_str = serial_str.replace(old_headline, new_headline)\n@@ -284,7 +284,7 @@ def test_forward_refs(self):\n \n class XmlSerializerTestCase(SerializersTestBase, TestCase):\n     serializer_name = \"xml\"\n-    pkless_str = \"\"\"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+    pkless_str = b\"\"\"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n <django-objects version=\"1.0\">\n     <object model=\"serializers.category\">\n         <field type=\"CharField\" name=\"name\">Reference</field>\n@@ -330,7 +330,7 @@ def _get_field_values(serial_str, field_name):\n \n class XmlSerializerTransactionTestCase(SerializersTransactionTestBase, TransactionTestCase):\n     serializer_name = \"xml\"\n-    fwd_ref_str = \"\"\"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+    fwd_ref_str = b\"\"\"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n <django-objects version=\"1.0\">\n     <object pk=\"1\" model=\"serializers.article\">\n         <field to=\"serializers.author\" name=\"author\" rel=\"ManyToOneRel\">1</field>\n@@ -350,7 +350,7 @@ class XmlSerializerTransactionTestCase(SerializersTransactionTestBase, Transacti\n \n class JsonSerializerTestCase(SerializersTestBase, TestCase):\n     serializer_name = \"json\"\n-    pkless_str = \"\"\"[{\"pk\": null, \"model\": \"serializers.category\", \"fields\": {\"name\": \"Reference\"}}]\"\"\"\n+    pkless_str = b\"\"\"[{\"pk\": null, \"model\": \"serializers.category\", \"fields\": {\"name\": \"Reference\"}}]\"\"\"\n \n     @staticmethod\n     def _validate_output(serial_str):\n@@ -380,7 +380,7 @@ def _get_field_values(serial_str, field_name):\n \n class JsonSerializerTransactionTestCase(SerializersTransactionTestBase, TransactionTestCase):\n     serializer_name = \"json\"\n-    fwd_ref_str = \"\"\"[\n+    fwd_ref_str = b\"\"\"[\n     {\n         \"pk\": 1,\n         \"model\": \"serializers.article\",\n@@ -413,7 +413,7 @@ class JsonSerializerTransactionTestCase(SerializersTransactionTestBase, Transact\n else:\n     class YamlSerializerTestCase(SerializersTestBase, TestCase):\n         serializer_name = \"yaml\"\n-        fwd_ref_str = \"\"\"- fields:\n+        fwd_ref_str = b\"\"\"- fields:\n     headline: Forward references pose no problem\n     pub_date: 2006-06-16 15:00:00\n     categories: [1]\n@@ -429,7 +429,7 @@ class YamlSerializerTestCase(SerializersTestBase, TestCase):\n   pk: 1\n   model: serializers.author\"\"\"\n \n-        pkless_str = \"\"\"- fields:\n+        pkless_str = b\"\"\"- fields:\n     name: Reference\n   pk: null\n   model: serializers.category\"\"\"\n@@ -469,7 +469,7 @@ def _get_field_values(serial_str, field_name):\n \n     class YamlSerializerTransactionTestCase(SerializersTransactionTestBase, TransactionTestCase):\n         serializer_name = \"yaml\"\n-        fwd_ref_str = \"\"\"- fields:\n+        fwd_ref_str = b\"\"\"- fields:\n     headline: Forward references pose no problem\n     pub_date: 2006-06-16 15:00:00\n     categories: [1]"
        },
        {
            "sha": "1b0eb0972fa1c4ae59a274300e5c015fcd86298b",
            "filename": "tests/modeltests/str/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fmodeltests%2Fstr%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fmodeltests%2Fstr%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fstr%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -11,16 +11,16 @@\n class SimpleTests(TestCase):\n     def test_basic(self):\n         a = Article.objects.create(\n-            headline='Area man programs in Python',\n+            headline=b'Area man programs in Python',\n             pub_date=datetime.datetime(2005, 7, 28)\n         )\n-        self.assertEqual(str(a), 'Area man programs in Python')\n-        self.assertEqual(repr(a), '<Article: Area man programs in Python>')\n+        self.assertEqual(str(a), b'Area man programs in Python')\n+        self.assertEqual(repr(a), b'<Article: Area man programs in Python>')\n \n     def test_international(self):\n         a = InternationalArticle.objects.create(\n             headline=u'Girl wins €12.500 in lottery',\n             pub_date=datetime.datetime(2005, 7, 28)\n         )\n         # The default str() output will be the UTF-8 encoded output of __unicode__().\n-        self.assertEqual(str(a), 'Girl wins \\xe2\\x82\\xac12.500 in lottery')\n\\ No newline at end of file\n+        self.assertEqual(str(a), b'Girl wins \\xe2\\x82\\xac12.500 in lottery')"
        },
        {
            "sha": "055f494dcd541960d39ac11f297547a69e77bada",
            "filename": "tests/regressiontests/admin_util/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fadmin_util%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fadmin_util%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_util%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -170,7 +170,7 @@ def test_label_for_field(self):\n         )\n         self.assertEqual(\n             label_for_field(\"__str__\", Article),\n-            \"article\"\n+            b\"article\"\n         )\n \n         self.assertRaises("
        },
        {
            "sha": "be1d2940512b72c45f329a3b96eeeacd4f8fd81c",
            "filename": "tests/regressiontests/admin_widgets/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -280,7 +280,7 @@ def test_render(self):\n         )\n \n         self.assertHTMLEqual(\n-            conditional_escape(w.render('test', SimpleUploadedFile('test', 'content'))),\n+            conditional_escape(w.render('test', SimpleUploadedFile('test', b'content'))),\n             '<input type=\"file\" name=\"test\" />',\n         )\n "
        },
        {
            "sha": "cbba7c19a360425377dee4433f42a6734275c4a6",
            "filename": "tests/regressiontests/cache/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcache%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -822,7 +822,7 @@ def test_old_initialization(self):\n     def test_second_call_doesnt_crash(self):\n         err = StringIO.StringIO()\n         management.call_command('createcachetable', self._table_name, verbosity=0, interactive=False, stderr=err)\n-        self.assertTrue(\"Cache table 'test cache table' could not be created\" in err.getvalue())\n+        self.assertTrue(b\"Cache table 'test cache table' could not be created\" in err.getvalue())\n \n \n @override_settings(USE_TZ=True)"
        },
        {
            "sha": "2d9b4f755fa86a47a5d19318a69446c754374f87",
            "filename": "tests/regressiontests/csrf_tests/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fcsrf_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fcsrf_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcsrf_tests%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -47,7 +47,7 @@ def is_secure(self):\n class CsrfViewMiddlewareTest(TestCase):\n     # The csrf token is potentially from an untrusted source, so could have\n     # characters that need dealing with.\n-    _csrf_id_cookie = \"<1>\\xc2\\xa1\"\n+    _csrf_id_cookie = b\"<1>\\xc2\\xa1\"\n     _csrf_id = \"1\"\n \n     def _get_GET_no_csrf_cookie_request(self):"
        },
        {
            "sha": "87035d96d70a97a45c1caa52f157fe34adc5cd7b",
            "filename": "tests/regressiontests/file_storage/tests.py",
            "status": "modified",
            "additions": 27,
            "deletions": 27,
            "changes": 54,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_storage%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -127,7 +127,7 @@ def test_file_accessed_time(self):\n         \"\"\"\n         self.assertFalse(self.storage.exists('test.file'))\n \n-        f = ContentFile('custom contents')\n+        f = ContentFile(b'custom contents')\n         f_name = self.storage.save('test.file', f)\n         atime = self.storage.accessed_time(f_name)\n \n@@ -143,7 +143,7 @@ def test_file_created_time(self):\n         \"\"\"\n         self.assertFalse(self.storage.exists('test.file'))\n \n-        f = ContentFile('custom contents')\n+        f = ContentFile(b'custom contents')\n         f_name = self.storage.save('test.file', f)\n         ctime = self.storage.created_time(f_name)\n \n@@ -160,7 +160,7 @@ def test_file_modified_time(self):\n         \"\"\"\n         self.assertFalse(self.storage.exists('test.file'))\n \n-        f = ContentFile('custom contents')\n+        f = ContentFile(b'custom contents')\n         f_name = self.storage.save('test.file', f)\n         mtime = self.storage.modified_time(f_name)\n \n@@ -177,7 +177,7 @@ def test_file_save_without_name(self):\n         \"\"\"\n         self.assertFalse(self.storage.exists('test.file'))\n \n-        f = ContentFile('custom contents')\n+        f = ContentFile(b'custom contents')\n         f.name = 'test.file'\n \n         storage_f_name = self.storage.save(None, f)\n@@ -194,11 +194,11 @@ def test_file_save_with_path(self):\n         \"\"\"\n         self.assertFalse(self.storage.exists('path/to'))\n         self.storage.save('path/to/test.file',\n-            ContentFile('file saved with path'))\n+            ContentFile(b'file saved with path'))\n \n         self.assertTrue(self.storage.exists('path/to'))\n         self.assertEqual(self.storage.open('path/to/test.file').read(),\n-            'file saved with path')\n+            b'file saved with path')\n \n         self.assertTrue(os.path.exists(\n             os.path.join(self.temp_dir, 'path', 'to', 'test.file')))\n@@ -211,7 +211,7 @@ def test_file_path(self):\n         \"\"\"\n         self.assertFalse(self.storage.exists('test.file'))\n \n-        f = ContentFile('custom contents')\n+        f = ContentFile(b'custom contents')\n         f_name = self.storage.save('test.file', f)\n \n         self.assertEqual(self.storage.path(f_name),\n@@ -246,8 +246,8 @@ def test_listdir(self):\n         self.assertFalse(self.storage.exists('storage_test_2'))\n         self.assertFalse(self.storage.exists('storage_dir_1'))\n \n-        f = self.storage.save('storage_test_1', ContentFile('custom content'))\n-        f = self.storage.save('storage_test_2', ContentFile('custom content'))\n+        f = self.storage.save('storage_test_1', ContentFile(b'custom content'))\n+        f = self.storage.save('storage_test_2', ContentFile(b'custom content'))\n         os.mkdir(os.path.join(self.temp_dir, 'storage_dir_1'))\n \n         dirs, files = self.storage.listdir('')\n@@ -304,18 +304,18 @@ def fake_makedirs(path):\n             os.makedirs = fake_makedirs\n \n             self.storage.save('normal/test.file',\n-                ContentFile('saved normally'))\n+                ContentFile(b'saved normally'))\n             self.assertEqual(self.storage.open('normal/test.file').read(),\n-                'saved normally')\n+                b'saved normally')\n \n             self.storage.save('raced/test.file',\n-                ContentFile('saved with race'))\n+                ContentFile(b'saved with race'))\n             self.assertEqual(self.storage.open('raced/test.file').read(),\n-                'saved with race')\n+                b'saved with race')\n \n             # Check that OSErrors aside from EEXIST are still raised.\n             self.assertRaises(OSError,\n-                self.storage.save, 'error/test.file', ContentFile('not saved'))\n+                self.storage.save, 'error/test.file', ContentFile(b'not saved'))\n         finally:\n             os.makedirs = real_makedirs\n \n@@ -341,16 +341,16 @@ def fake_remove(path):\n         try:\n             os.remove = fake_remove\n \n-            self.storage.save('normal.file', ContentFile('delete normally'))\n+            self.storage.save('normal.file', ContentFile(b'delete normally'))\n             self.storage.delete('normal.file')\n             self.assertFalse(self.storage.exists('normal.file'))\n \n-            self.storage.save('raced.file', ContentFile('delete with race'))\n+            self.storage.save('raced.file', ContentFile(b'delete with race'))\n             self.storage.delete('raced.file')\n             self.assertFalse(self.storage.exists('normal.file'))\n \n             # Check that OSErrors aside from ENOENT are still raised.\n-            self.storage.save('error.file', ContentFile('delete with error'))\n+            self.storage.save('error.file', ContentFile(b'delete with error'))\n             self.assertRaises(OSError, self.storage.delete, 'error.file')\n         finally:\n             os.remove = real_remove\n@@ -374,9 +374,9 @@ class CustomStorageTests(FileStorageTests):\n     storage_class = CustomStorage\n \n     def test_custom_get_available_name(self):\n-        first = self.storage.save('custom_storage', ContentFile('custom contents'))\n+        first = self.storage.save('custom_storage', ContentFile(b'custom contents'))\n         self.assertEqual(first, 'custom_storage')\n-        second = self.storage.save('custom_storage', ContentFile('more contents'))\n+        second = self.storage.save('custom_storage', ContentFile(b'more contents'))\n         self.assertEqual(second, 'custom_storage.2')\n         self.storage.delete(first)\n         self.storage.delete(second)\n@@ -410,7 +410,7 @@ def tearDown(self):\n         shutil.rmtree(self.storage_dir)\n \n     def save_file(self, name):\n-        name = self.storage.save(name, SlowFile(\"Data\"))\n+        name = self.storage.save(name, SlowFile(b\"Data\"))\n \n     def test_race_condition(self):\n         self.thread.start()\n@@ -433,7 +433,7 @@ def tearDown(self):\n         shutil.rmtree(self.storage_dir)\n \n     def test_file_upload_permissions(self):\n-        name = self.storage.save(\"the_file\", ContentFile(\"data\"))\n+        name = self.storage.save(\"the_file\", ContentFile(b\"data\"))\n         actual_mode = os.stat(self.storage.path(name))[0] & 0777\n         self.assertEqual(actual_mode, 0666)\n \n@@ -453,8 +453,8 @@ def test_directory_with_dot(self):\n         sure we still mangle the file name instead of the directory name.\n         \"\"\"\n \n-        self.storage.save('dotted.path/test', ContentFile(\"1\"))\n-        self.storage.save('dotted.path/test', ContentFile(\"2\"))\n+        self.storage.save('dotted.path/test', ContentFile(b\"1\"))\n+        self.storage.save('dotted.path/test', ContentFile(b\"2\"))\n \n         self.assertFalse(os.path.exists(os.path.join(self.storage_dir, 'dotted_.path')))\n         self.assertTrue(os.path.exists(os.path.join(self.storage_dir, 'dotted.path/test')))\n@@ -465,8 +465,8 @@ def test_first_character_dot(self):\n         File names with a dot as their first character don't have an extension,\n         and the underscore should get added to the end.\n         \"\"\"\n-        self.storage.save('dotted.path/.test', ContentFile(\"1\"))\n-        self.storage.save('dotted.path/.test', ContentFile(\"2\"))\n+        self.storage.save('dotted.path/.test', ContentFile(b\"1\"))\n+        self.storage.save('dotted.path/.test', ContentFile(b\"2\"))\n \n         self.assertTrue(os.path.exists(os.path.join(self.storage_dir, 'dotted.path/.test')))\n         self.assertTrue(os.path.exists(os.path.join(self.storage_dir, 'dotted.path/.test_1')))\n@@ -542,11 +542,11 @@ class ContentFileTestCase(unittest.TestCase):\n     Test that the constructor of ContentFile accepts 'name' (#16590).\n     \"\"\"\n     def test_content_file_default_name(self):\n-        self.assertEqual(ContentFile(\"content\").name, None)\n+        self.assertEqual(ContentFile(b\"content\").name, None)\n \n     def test_content_file_custom_name(self):\n         name = \"I can have a name too!\"\n-        self.assertEqual(ContentFile(\"content\", name=name).name, name)\n+        self.assertEqual(ContentFile(b\"content\", name=name).name, name)\n \n class NoNameFileTestCase(unittest.TestCase):\n     \"\"\""
        },
        {
            "sha": "c8de8035f9f965ea3992f7e2eff024987671cfb1",
            "filename": "tests/regressiontests/file_uploads/tests.py",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -24,7 +24,7 @@\n \n class FileUploadTests(TestCase):\n     def test_simple_upload(self):\n-        with open(__file__) as fp:\n+        with open(__file__, 'rb') as fp:\n             post_data = {\n                 'name': 'Ringo',\n                 'file_field': fp,\n@@ -36,11 +36,11 @@ def test_large_upload(self):\n         tdir = tempfile.gettempdir()\n \n         file1 = tempfile.NamedTemporaryFile(suffix=\".file1\", dir=tdir)\n-        file1.write('a' * (2 ** 21))\n+        file1.write(b'a' * (2 ** 21))\n         file1.seek(0)\n \n         file2 = tempfile.NamedTemporaryFile(suffix=\".file2\", dir=tdir)\n-        file2.write('a' * (10 * 2 ** 20))\n+        file2.write(b'a' * (10 * 2 ** 20))\n         file2.seek(0)\n \n         post_data = {\n@@ -89,7 +89,7 @@ def test_unicode_file_name(self):\n \n         # This file contains chinese symbols and an accented char in the name.\n         with open(os.path.join(tdir, UNICODE_FILENAME.encode('utf-8')), 'w+b') as file1:\n-            file1.write('b' * (2 ** 10))\n+            file1.write(b'b' * (2 ** 10))\n             file1.seek(0)\n \n             post_data = {\n@@ -214,20 +214,20 @@ def test_empty_multipart_handled_gracefully(self):\n             'CONTENT_TYPE': client.MULTIPART_CONTENT,\n             'PATH_INFO': '/file_uploads/echo/',\n             'REQUEST_METHOD': 'POST',\n-            'wsgi.input': client.FakePayload(''),\n+            'wsgi.input': client.FakePayload(b''),\n         }\n         got = json.loads(self.client.request(**r).content)\n         self.assertEqual(got, {})\n \n     def test_custom_upload_handler(self):\n         # A small file (under the 5M quota)\n         smallfile = tempfile.NamedTemporaryFile()\n-        smallfile.write('a' * (2 ** 21))\n+        smallfile.write(b'a' * (2 ** 21))\n         smallfile.seek(0)\n \n         # A big file (over the quota)\n         bigfile = tempfile.NamedTemporaryFile()\n-        bigfile.write('a' * (10 * 2 ** 20))\n+        bigfile.write(b'a' * (10 * 2 ** 20))\n         bigfile.seek(0)\n \n         # Small file posting should work.\n@@ -242,7 +242,7 @@ def test_custom_upload_handler(self):\n \n     def test_broken_custom_upload_handler(self):\n         f = tempfile.NamedTemporaryFile()\n-        f.write('a' * (2 ** 21))\n+        f.write(b'a' * (2 ** 21))\n         f.seek(0)\n \n         # AttributeError: You cannot alter upload handlers after the upload has been processed.\n@@ -255,15 +255,15 @@ def test_broken_custom_upload_handler(self):\n \n     def test_fileupload_getlist(self):\n         file1 = tempfile.NamedTemporaryFile()\n-        file1.write('a' * (2 ** 23))\n+        file1.write(b'a' * (2 ** 23))\n         file1.seek(0)\n \n         file2 = tempfile.NamedTemporaryFile()\n-        file2.write('a' * (2 * 2 ** 18))\n+        file2.write(b'a' * (2 * 2 ** 18))\n         file2.seek(0)\n \n         file2a = tempfile.NamedTemporaryFile()\n-        file2a.write('a' * (5 * 2 ** 20))\n+        file2a.write(b'a' * (5 * 2 ** 20))\n         file2a.seek(0)\n \n         response = self.client.post('/file_uploads/getlist_count/', {\n@@ -299,14 +299,14 @@ def handle_uncaught_exception(self, request, resolver, exc_info):\n         # this test would fail.  So we need to know exactly what kind of error\n         # it raises when there is an attempt to read more than the available bytes:\n         try:\n-            client.FakePayload('a').read(2)\n+            client.FakePayload(b'a').read(2)\n         except Exception as reference_error:\n             pass\n \n         # install the custom handler that tries to access request.POST\n         self.client.handler = POSTAccessingHandler()\n \n-        with open(__file__) as fp:\n+        with open(__file__, 'rb') as fp:\n             post_data = {\n                 'name': 'Ringo',\n                 'file_field': fp,\n@@ -374,7 +374,7 @@ def test_readonly_root(self):\n         \"\"\"Permission errors are not swallowed\"\"\"\n         os.chmod(temp_storage.location, 0500)\n         try:\n-            self.obj.testfile.save('foo.txt', SimpleUploadedFile('foo.txt', 'x'))\n+            self.obj.testfile.save('foo.txt', SimpleUploadedFile('foo.txt', b'x'))\n         except OSError as err:\n             self.assertEqual(err.errno, errno.EACCES)\n         except Exception:\n@@ -383,9 +383,9 @@ def test_readonly_root(self):\n     def test_not_a_directory(self):\n         \"\"\"The correct IOError is raised when the upload directory name exists but isn't a directory\"\"\"\n         # Create a file with the upload directory name\n-        open(UPLOAD_TO, 'w').close()\n+        open(UPLOAD_TO, 'wb').close()\n         try:\n-            self.obj.testfile.save('foo.txt', SimpleUploadedFile('foo.txt', 'x'))\n+            self.obj.testfile.save('foo.txt', SimpleUploadedFile('foo.txt', b'x'))\n         except IOError as err:\n             # The test needs to be done on a specific string as IOError\n             # is raised even without the patch (just not early enough)"
        },
        {
            "sha": "d66ee2c08484b823fffc1b29dc3cecf5719fd59e",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -540,27 +540,27 @@ def test_filefield_1(self):\n         self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None, '')\n         self.assertEqual('files/test2.pdf', f.clean(None, 'files/test2.pdf'))\n-        self.assertRaisesMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, SimpleUploadedFile('', ''))\n-        self.assertRaisesMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, SimpleUploadedFile('', ''), '')\n+        self.assertRaisesMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, SimpleUploadedFile('', b''))\n+        self.assertRaisesMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, SimpleUploadedFile('', b''), '')\n         self.assertEqual('files/test3.pdf', f.clean(None, 'files/test3.pdf'))\n         self.assertRaisesMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, 'some content that is not a file')\n         self.assertRaisesMessage(ValidationError, \"[u'The submitted file is empty.']\", f.clean, SimpleUploadedFile('name', None))\n-        self.assertRaisesMessage(ValidationError, \"[u'The submitted file is empty.']\", f.clean, SimpleUploadedFile('name', ''))\n-        self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', 'Some File Content'))))\n-        self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('我隻氣墊船裝滿晒鱔.txt', 'मेरी मँडराने वाली नाव सर्पमीनों से भरी ह'))))\n-        self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', 'Some File Content'), 'files/test4.pdf')))\n+        self.assertRaisesMessage(ValidationError, \"[u'The submitted file is empty.']\", f.clean, SimpleUploadedFile('name', b''))\n+        self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', b'Some File Content'))))\n+        self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('我隻氣墊船裝滿晒鱔.txt', u'मेरी मँडराने वाली नाव सर्पमीनों से भरी ह'.encode('utf-8')))))\n+        self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', b'Some File Content'), 'files/test4.pdf')))\n \n     def test_filefield_2(self):\n         f = FileField(max_length = 5)\n-        self.assertRaisesMessage(ValidationError, \"[u'Ensure this filename has at most 5 characters (it has 18).']\", f.clean, SimpleUploadedFile('test_maxlength.txt', 'hello world'))\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this filename has at most 5 characters (it has 18).']\", f.clean, SimpleUploadedFile('test_maxlength.txt', b'hello world'))\n         self.assertEqual('files/test1.pdf', f.clean('', 'files/test1.pdf'))\n         self.assertEqual('files/test2.pdf', f.clean(None, 'files/test2.pdf'))\n-        self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', 'Some File Content'))))\n+        self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', b'Some File Content'))))\n \n     def test_filefield_3(self):\n         f = FileField(allow_empty_file=True)\n         self.assertEqual(SimpleUploadedFile,\n-                         type(f.clean(SimpleUploadedFile('name', ''))))\n+                         type(f.clean(SimpleUploadedFile('name', b''))))\n \n     # URLField ##################################################################\n "
        },
        {
            "sha": "16cf46fc29b6b3097bc2807dfd23161c9955392f",
            "filename": "tests/regressiontests/forms/tests/forms.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -1463,17 +1463,17 @@ class FileForm(Form):\n         f = FileForm(data={}, files={}, auto_id=False)\n         self.assertHTMLEqual(f.as_table(), '<tr><th>File1:</th><td><ul class=\"errorlist\"><li>This field is required.</li></ul><input type=\"file\" name=\"file1\" /></td></tr>')\n \n-        f = FileForm(data={}, files={'file1': SimpleUploadedFile('name', '')}, auto_id=False)\n+        f = FileForm(data={}, files={'file1': SimpleUploadedFile('name', b'')}, auto_id=False)\n         self.assertHTMLEqual(f.as_table(), '<tr><th>File1:</th><td><ul class=\"errorlist\"><li>The submitted file is empty.</li></ul><input type=\"file\" name=\"file1\" /></td></tr>')\n \n         f = FileForm(data={}, files={'file1': 'something that is not a file'}, auto_id=False)\n         self.assertHTMLEqual(f.as_table(), '<tr><th>File1:</th><td><ul class=\"errorlist\"><li>No file was submitted. Check the encoding type on the form.</li></ul><input type=\"file\" name=\"file1\" /></td></tr>')\n \n-        f = FileForm(data={}, files={'file1': SimpleUploadedFile('name', 'some content')}, auto_id=False)\n+        f = FileForm(data={}, files={'file1': SimpleUploadedFile('name', b'some content')}, auto_id=False)\n         self.assertHTMLEqual(f.as_table(), '<tr><th>File1:</th><td><input type=\"file\" name=\"file1\" /></td></tr>')\n         self.assertTrue(f.is_valid())\n \n-        f = FileForm(data={}, files={'file1': SimpleUploadedFile('我隻氣墊船裝滿晒鱔.txt', 'मेरी मँडराने वाली नाव सर्पमीनों से भरी ह')}, auto_id=False)\n+        f = FileForm(data={}, files={'file1': SimpleUploadedFile('我隻氣墊船裝滿晒鱔.txt', u'मेरी मँडराने वाली नाव सर्पमीनों से भरी ह'.encode('utf-8'))}, auto_id=False)\n         self.assertHTMLEqual(f.as_table(), '<tr><th>File1:</th><td><input type=\"file\" name=\"file1\" /></td></tr>')\n \n     def test_basic_processing_in_view(self):"
        },
        {
            "sha": "7f569651c7dcce3cc2ce9031c8a30d342bae4c3b",
            "filename": "tests/regressiontests/forms/tests/models.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fmodels.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -106,7 +106,7 @@ def test_initial_instance_value(self):\n class FormsModelTestCase(TestCase):\n     def test_unicode_filename(self):\n         # FileModel with unicode filename and data #########################\n-        f = FileForm(data={}, files={'file1': SimpleUploadedFile('我隻氣墊船裝滿晒鱔.txt', 'मेरी मँडराने वाली नाव सर्पमीनों से भरी ह')}, auto_id=False)\n+        f = FileForm(data={}, files={'file1': SimpleUploadedFile('我隻氣墊船裝滿晒鱔.txt', u'मेरी मँडराने वाली नाव सर्पमीनों से भरी ह'.encode('utf-8'))}, auto_id=False)\n         self.assertTrue(f.is_valid())\n         self.assertTrue('file1' in f.cleaned_data)\n         m = FileModel.objects.create(file=f.cleaned_data['file1'])\n@@ -177,7 +177,7 @@ class A(models.Model):\n         class Meta:\n             model=A\n \n-        self.assertRaises(ValueError, ModelFormMetaclass, 'Form', (ModelForm,), {'Meta': Meta})\n+        self.assertRaises(ValueError, ModelFormMetaclass, b'Form', (ModelForm,), {'Meta': Meta})\n \n         class B(models.Model):\n             pass\n@@ -195,4 +195,4 @@ class B(models.Model):\n         class Meta:\n             model=A\n \n-        self.assertTrue(issubclass(ModelFormMetaclass('Form', (ModelForm,), {'Meta': Meta}), ModelForm))\n+        self.assertTrue(issubclass(ModelFormMetaclass(b'Form', (ModelForm,), {'Meta': Meta}), ModelForm))"
        },
        {
            "sha": "20c11f99a86dac4f277d21028154a45f70cf2e84",
            "filename": "tests/regressiontests/forms/tests/regressions.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Fregressions.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Fregressions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fregressions.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -54,10 +54,11 @@ class SomeForm(Form):\n \n         # Testing choice validation with UTF-8 bytestrings as input (these are the\n         # Russian abbreviations \"мес.\" and \"шт.\".\n-        UNITS = (('\\xd0\\xbc\\xd0\\xb5\\xd1\\x81.', '\\xd0\\xbc\\xd0\\xb5\\xd1\\x81.'), ('\\xd1\\x88\\xd1\\x82.', '\\xd1\\x88\\xd1\\x82.'))\n+        UNITS = ((b'\\xd0\\xbc\\xd0\\xb5\\xd1\\x81.', b'\\xd0\\xbc\\xd0\\xb5\\xd1\\x81.'),\n+                 (b'\\xd1\\x88\\xd1\\x82.', b'\\xd1\\x88\\xd1\\x82.'))\n         f = ChoiceField(choices=UNITS)\n         self.assertEqual(f.clean(u'\\u0448\\u0442.'), u'\\u0448\\u0442.')\n-        self.assertEqual(f.clean('\\xd1\\x88\\xd1\\x82.'), u'\\u0448\\u0442.')\n+        self.assertEqual(f.clean(b'\\xd1\\x88\\xd1\\x82.'), u'\\u0448\\u0442.')\n \n         # Translated error messages used to be buggy.\n         with override('ru'):"
        },
        {
            "sha": "8630b456665f3cc59c4943ec4f0e762a46f307ca",
            "filename": "tests/regressiontests/forms/tests/widgets.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -1182,7 +1182,7 @@ def test_clear_input_checked_returns_false_only_if_not_required(self):\n         \"\"\"\n         widget = ClearableFileInput()\n         widget.is_required = True\n-        f = SimpleUploadedFile('something.txt', 'content')\n+        f = SimpleUploadedFile('something.txt', b'content')\n         self.assertEqual(widget.value_from_datadict(\n                 data={'myfile-clear': True},\n                 files={'myfile': f},"
        },
        {
            "sha": "ae2062c756b4b6ed7c839cb09b0a9fc996a928f8",
            "filename": "tests/regressiontests/handlers/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fhandlers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fhandlers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhandlers%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -28,7 +28,7 @@ def test_lock_safety(self):\n     def test_bad_path_info(self):\n         \"\"\"Tests for bug #15672 ('request' referenced before assignment)\"\"\"\n         environ = RequestFactory().get('/').environ\n-        environ['PATH_INFO'] = '\\xed'\n+        environ['PATH_INFO'] = b'\\xed'\n         handler = WSGIHandler()\n         response = handler(environ, lambda *a, **k: None)\n         self.assertEqual(response.status_code, 400)"
        },
        {
            "sha": "218c5b5b3bfc014bcff2490b01239ade5eb5f092",
            "filename": "tests/regressiontests/httpwrappers/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -174,7 +174,7 @@ def test_invalid_input_encoding(self):\n         QueryDicts must be able to handle invalid input encoding (in this\n         case, bad UTF-8 encoding).\n         \"\"\"\n-        q = QueryDict('foo=bar&foo=\\xff')\n+        q = QueryDict(b'foo=bar&foo=\\xff')\n         self.assertEqual(q['foo'], u'\\ufffd')\n         self.assertEqual(q.getlist('foo'), [u'bar', u'\\ufffd'])\n \n@@ -198,7 +198,7 @@ def test_update_from_querydict(self):\n \n     def test_non_default_encoding(self):\n         \"\"\"#13572 - QueryDict with a non-default encoding\"\"\"\n-        q = QueryDict('sbb=one', encoding='rot_13')\n+        q = QueryDict(b'sbb=one', encoding='rot_13')\n         self.assertEqual(q.encoding , 'rot_13' )\n         self.assertEqual(q.items() , [(u'foo', u'bar')] )\n         self.assertEqual(q.urlencode() , 'sbb=one' )\n@@ -285,8 +285,8 @@ def test_iter_content(self):\n             except StopIteration:\n                 break\n         #'\\xde\\x9e' == unichr(1950).encode('utf-8')\n-        self.assertEqual(result, ['1', '2', '3', '\\xde\\x9e'])\n-        self.assertEqual(r.content, '123\\xde\\x9e')\n+        self.assertEqual(result, ['1', '2', '3', b'\\xde\\x9e'])\n+        self.assertEqual(r.content, b'123\\xde\\x9e')\n \n         #with Content-Encoding header\n         r = HttpResponse([1,1,2,4,8])\n@@ -321,7 +321,7 @@ def test_decode_2(self):\n         Test that we haven't broken normal encoding\n         \"\"\"\n         c = SimpleCookie()\n-        c['test'] = \"\\xf0\"\n+        c['test'] = b\"\\xf0\"\n         c2 = SimpleCookie()\n         c2.load(c.output())\n         self.assertEqual(c['test'].value, c2['test'].value)"
        },
        {
            "sha": "5e95ee36ec80fb68d5c1a22d7b991417f490a4fe",
            "filename": "tests/regressiontests/i18n/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -230,7 +230,7 @@ def test_safe_status(self):\n         \"\"\"\n         Translating a string requiring no auto-escaping shouldn't change the \"safe\" status.\n         \"\"\"\n-        s = mark_safe('Password')\n+        s = mark_safe(b'Password')\n         self.assertEqual(SafeString, type(s))\n         with translation.override('de', deactivate=True):\n             self.assertEqual(SafeUnicode, type(ugettext(s)))"
        },
        {
            "sha": "3a8add6e34e67008ee468a25c261b9b8ca677ada",
            "filename": "tests/regressiontests/localflavor/mk/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -92,7 +92,7 @@ def test_field_blank_option(self):\n         \"\"\"\n         Test that the empty option is there.\n         \"\"\"\n-        municipality_select_html = \"\"\"\\\n+        municipality_select_html = b\"\"\"\\\n <select name=\"municipality\" id=\"id_municipality\">\n <option value=\"\">---------</option>\n <option value=\"AD\">Aerodrom</option>"
        },
        {
            "sha": "99d52a701c772e2cef3d6714cd67c53db0aadc2b",
            "filename": "tests/regressiontests/mail/tests.py",
            "status": "modified",
            "additions": 18,
            "deletions": 18,
            "changes": 36,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fmail%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fmail%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmail%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -86,7 +86,7 @@ def test_message_header_overrides(self):\n         \"\"\"\n         headers = {\"date\": \"Fri, 09 Nov 2001 01:08:47 -0000\", \"Message-ID\": \"foo\"}\n         email = EmailMessage('subject', 'content', 'from@example.com', ['to@example.com'], headers=headers)\n-        self.assertEqual(email.message().as_string(), 'Content-Type: text/plain; charset=\"utf-8\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: 7bit\\nSubject: subject\\nFrom: from@example.com\\nTo: to@example.com\\ndate: Fri, 09 Nov 2001 01:08:47 -0000\\nMessage-ID: foo\\n\\ncontent')\n+        self.assertEqual(email.message().as_string(), b'Content-Type: text/plain; charset=\"utf-8\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: 7bit\\nSubject: subject\\nFrom: from@example.com\\nTo: to@example.com\\ndate: Fri, 09 Nov 2001 01:08:47 -0000\\nMessage-ID: foo\\n\\ncontent')\n \n     def test_from_header(self):\n         \"\"\"\n@@ -168,7 +168,7 @@ def test_encoding(self):\n         email = EmailMessage('Subject', 'Firstname Sürname is a great guy.', 'from@example.com', ['other@example.com'])\n         email.encoding = 'iso-8859-1'\n         message = email.message()\n-        self.assertTrue(message.as_string().startswith('Content-Type: text/plain; charset=\"iso-8859-1\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: quoted-printable\\nSubject: Subject\\nFrom: from@example.com\\nTo: other@example.com'))\n+        self.assertTrue(message.as_string().startswith(b'Content-Type: text/plain; charset=\"iso-8859-1\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: quoted-printable\\nSubject: Subject\\nFrom: from@example.com\\nTo: other@example.com'))\n         self.assertEqual(message.get_payload(), 'Firstname S=FCrname is a great guy.')\n \n         # Make sure MIME attachments also works correctly with other encodings than utf-8\n@@ -177,8 +177,8 @@ def test_encoding(self):\n         msg = EmailMultiAlternatives('Subject', text_content, 'from@example.com', ['to@example.com'])\n         msg.encoding = 'iso-8859-1'\n         msg.attach_alternative(html_content, \"text/html\")\n-        self.assertEqual(msg.message().get_payload(0).as_string(), 'Content-Type: text/plain; charset=\"iso-8859-1\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: quoted-printable\\n\\nFirstname S=FCrname is a great guy.')\n-        self.assertEqual(msg.message().get_payload(1).as_string(), 'Content-Type: text/html; charset=\"iso-8859-1\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: quoted-printable\\n\\n<p>Firstname S=FCrname is a <strong>great</strong> guy.</p>')\n+        self.assertEqual(msg.message().get_payload(0).as_string(), b'Content-Type: text/plain; charset=\"iso-8859-1\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: quoted-printable\\n\\nFirstname S=FCrname is a great guy.')\n+        self.assertEqual(msg.message().get_payload(1).as_string(), b'Content-Type: text/html; charset=\"iso-8859-1\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: quoted-printable\\n\\n<p>Firstname S=FCrname is a <strong>great</strong> guy.</p>')\n \n     def test_attachments(self):\n         \"\"\"Regression test for #9367\"\"\"\n@@ -188,7 +188,7 @@ def test_attachments(self):\n         html_content = '<p>This is an <strong>important</strong> message.</p>'\n         msg = EmailMultiAlternatives(subject, text_content, from_email, [to], headers=headers)\n         msg.attach_alternative(html_content, \"text/html\")\n-        msg.attach(\"an attachment.pdf\", \"%PDF-1.4.%...\", mimetype=\"application/pdf\")\n+        msg.attach(\"an attachment.pdf\", b\"%PDF-1.4.%...\", mimetype=\"application/pdf\")\n         msg_str = msg.message().as_string()\n         message = email.message_from_string(msg_str)\n         self.assertTrue(message.is_multipart())\n@@ -205,7 +205,7 @@ def test_non_ascii_attachment_filename(self):\n         content = 'This is the message.'\n         msg = EmailMessage(subject, content, from_email, [to], headers=headers)\n         # Unicode in file name\n-        msg.attach(u\"une pièce jointe.pdf\", \"%PDF-1.4.%...\", mimetype=\"application/pdf\")\n+        msg.attach(u\"une pièce jointe.pdf\", b\"%PDF-1.4.%...\", mimetype=\"application/pdf\")\n         msg_str = msg.message().as_string()\n         message = email.message_from_string(msg_str)\n         payload = message.get_payload()\n@@ -289,31 +289,31 @@ def test_dont_mangle_from_in_body(self):\n         # Regression for #13433 - Make sure that EmailMessage doesn't mangle\n         # 'From ' in message body.\n         email = EmailMessage('Subject', 'From the future', 'bounce@example.com', ['to@example.com'], headers={'From': 'from@example.com'})\n-        self.assertFalse('>From the future' in email.message().as_string())\n+        self.assertFalse(b'>From the future' in email.message().as_string())\n \n     def test_dont_base64_encode(self):\n         # Ticket #3472\n         # Shouldn't use Base64 encoding at all\n         msg = EmailMessage('Subject', 'UTF-8 encoded body', 'bounce@example.com', ['to@example.com'], headers={'From': 'from@example.com'})\n-        self.assertFalse('Content-Transfer-Encoding: base64' in msg.message().as_string())\n+        self.assertFalse(b'Content-Transfer-Encoding: base64' in msg.message().as_string())\n \n         # Ticket #11212\n         # Shouldn't use quoted printable, should detect it can represent content with 7 bit data\n         msg = EmailMessage('Subject', 'Body with only ASCII characters.', 'bounce@example.com', ['to@example.com'], headers={'From': 'from@example.com'})\n         s = msg.message().as_string()\n-        self.assertFalse('Content-Transfer-Encoding: quoted-printable' in s)\n-        self.assertTrue('Content-Transfer-Encoding: 7bit' in s)\n+        self.assertFalse(b'Content-Transfer-Encoding: quoted-printable' in s)\n+        self.assertTrue(b'Content-Transfer-Encoding: 7bit' in s)\n \n         # Shouldn't use quoted printable, should detect it can represent content with 8 bit data\n         msg = EmailMessage('Subject', 'Body with latin characters: àáä.', 'bounce@example.com', ['to@example.com'], headers={'From': 'from@example.com'})\n         s = msg.message().as_string()\n-        self.assertFalse('Content-Transfer-Encoding: quoted-printable' in s)\n-        self.assertTrue('Content-Transfer-Encoding: 8bit' in s)\n+        self.assertFalse(b'Content-Transfer-Encoding: quoted-printable' in s)\n+        self.assertTrue(b'Content-Transfer-Encoding: 8bit' in s)\n \n         msg = EmailMessage('Subject', u'Body with non latin characters: А Б В Г Д Е Ж Ѕ З И І К Л М Н О П.', 'bounce@example.com', ['to@example.com'], headers={'From': 'from@example.com'})\n         s = msg.message().as_string()\n-        self.assertFalse('Content-Transfer-Encoding: quoted-printable' in s)\n-        self.assertTrue('Content-Transfer-Encoding: 8bit' in s)\n+        self.assertFalse(b'Content-Transfer-Encoding: quoted-printable' in s)\n+        self.assertTrue(b'Content-Transfer-Encoding: 8bit' in s)\n \n \n class BaseEmailBackendTests(object):\n@@ -438,7 +438,7 @@ def test_message_cc_header(self):\n         email = EmailMessage('Subject', 'Content', 'from@example.com', ['to@example.com'], cc=['cc@example.com'])\n         mail.get_connection().send_messages([email])\n         message = self.get_the_message()\n-        self.assertStartsWith(message.as_string(), 'Content-Type: text/plain; charset=\"utf-8\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: 7bit\\nSubject: Subject\\nFrom: from@example.com\\nTo: to@example.com\\nCc: cc@example.com\\nDate: ')\n+        self.assertStartsWith(message.as_string(), b'Content-Type: text/plain; charset=\"utf-8\"\\nMIME-Version: 1.0\\nContent-Transfer-Encoding: 7bit\\nSubject: Subject\\nFrom: from@example.com\\nTo: to@example.com\\nCc: cc@example.com\\nDate: ')\n \n     def test_idn_send(self):\n         \"\"\"\n@@ -517,8 +517,8 @@ def flush_mailbox(self):\n     def get_mailbox_content(self):\n         messages = []\n         for filename in os.listdir(self.tmp_dir):\n-            with open(os.path.join(self.tmp_dir, filename)) as fp:\n-                session = fp.read().split('\\n' + ('-' * 79) + '\\n')\n+            with open(os.path.join(self.tmp_dir, filename), 'rb') as fp:\n+                session = fp.read().split(b'\\n' + (b'-' * 79) + b'\\n')\n             messages.extend(email.message_from_string(m) for m in session if m)\n         return messages\n \n@@ -569,7 +569,7 @@ def flush_mailbox(self):\n         self.stream = sys.stdout = StringIO()\n \n     def get_mailbox_content(self):\n-        messages = self.stream.getvalue().split('\\n' + ('-' * 79) + '\\n')\n+        messages = self.stream.getvalue().split(b'\\n' + (b'-' * 79) + b'\\n')\n         return [email.message_from_string(m) for m in messages if m]\n \n     def test_console_stream_kwarg(self):"
        },
        {
            "sha": "d33f52af9adc0fdd1731d2d15f4ac171bec878ab",
            "filename": "tests/regressiontests/model_forms_regress/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -394,7 +394,7 @@ def test_full_clear(self):\n         form = DocumentForm()\n         self.assertTrue('name=\"myfile\"' in unicode(form))\n         self.assertTrue('myfile-clear' not in unicode(form))\n-        form = DocumentForm(files={'myfile': SimpleUploadedFile('something.txt', 'content')})\n+        form = DocumentForm(files={'myfile': SimpleUploadedFile('something.txt', b'content')})\n         self.assertTrue(form.is_valid())\n         doc = form.save(commit=False)\n         self.assertEqual(doc.myfile.name, 'something.txt')\n@@ -411,11 +411,11 @@ def test_clear_and_file_contradiction(self):\n         includes the current file and the clear checkbox.\n \n         \"\"\"\n-        form = DocumentForm(files={'myfile': SimpleUploadedFile('something.txt', 'content')})\n+        form = DocumentForm(files={'myfile': SimpleUploadedFile('something.txt', b'content')})\n         self.assertTrue(form.is_valid())\n         doc = form.save(commit=False)\n         form = DocumentForm(instance=doc,\n-                            files={'myfile': SimpleUploadedFile('something.txt', 'content')},\n+                            files={'myfile': SimpleUploadedFile('something.txt', b'content')},\n                             data={'myfile-clear': 'true'})\n         self.assertTrue(not form.is_valid())\n         self.assertEqual(form.errors['myfile'],"
        },
        {
            "sha": "3d2b19619441902a43dd4a7316691d3a017290a5",
            "filename": "tests/regressiontests/requests/tests.py",
            "status": "modified",
            "additions": 44,
            "deletions": 44,
            "changes": 88,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Frequests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Frequests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Frequests%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -204,91 +204,91 @@ def test_httponly_cookie(self):\n \n     def test_limited_stream(self):\n         # Read all of a limited stream\n-        stream = LimitedStream(StringIO('test'), 2)\n-        self.assertEqual(stream.read(), 'te')\n+        stream = LimitedStream(StringIO(b'test'), 2)\n+        self.assertEqual(stream.read(), b'te')\n         # Reading again returns nothing.\n-        self.assertEqual(stream.read(), '')\n+        self.assertEqual(stream.read(), b'')\n \n         # Read a number of characters greater than the stream has to offer\n-        stream = LimitedStream(StringIO('test'), 2)\n-        self.assertEqual(stream.read(5), 'te')\n+        stream = LimitedStream(StringIO(b'test'), 2)\n+        self.assertEqual(stream.read(5), b'te')\n         # Reading again returns nothing.\n-        self.assertEqual(stream.readline(5), '')\n+        self.assertEqual(stream.readline(5), b'')\n \n         # Read sequentially from a stream\n-        stream = LimitedStream(StringIO('12345678'), 8)\n-        self.assertEqual(stream.read(5), '12345')\n-        self.assertEqual(stream.read(5), '678')\n+        stream = LimitedStream(StringIO(b'12345678'), 8)\n+        self.assertEqual(stream.read(5), b'12345')\n+        self.assertEqual(stream.read(5), b'678')\n         # Reading again returns nothing.\n-        self.assertEqual(stream.readline(5), '')\n+        self.assertEqual(stream.readline(5), b'')\n \n         # Read lines from a stream\n-        stream = LimitedStream(StringIO('1234\\n5678\\nabcd\\nefgh\\nijkl'), 24)\n+        stream = LimitedStream(StringIO(b'1234\\n5678\\nabcd\\nefgh\\nijkl'), 24)\n         # Read a full line, unconditionally\n-        self.assertEqual(stream.readline(), '1234\\n')\n+        self.assertEqual(stream.readline(), b'1234\\n')\n         # Read a number of characters less than a line\n-        self.assertEqual(stream.readline(2), '56')\n+        self.assertEqual(stream.readline(2), b'56')\n         # Read the rest of the partial line\n-        self.assertEqual(stream.readline(), '78\\n')\n+        self.assertEqual(stream.readline(), b'78\\n')\n         # Read a full line, with a character limit greater than the line length\n-        self.assertEqual(stream.readline(6), 'abcd\\n')\n+        self.assertEqual(stream.readline(6), b'abcd\\n')\n         # Read the next line, deliberately terminated at the line end\n-        self.assertEqual(stream.readline(4), 'efgh')\n+        self.assertEqual(stream.readline(4), b'efgh')\n         # Read the next line... just the line end\n-        self.assertEqual(stream.readline(), '\\n')\n+        self.assertEqual(stream.readline(), b'\\n')\n         # Read everything else.\n-        self.assertEqual(stream.readline(), 'ijkl')\n+        self.assertEqual(stream.readline(), b'ijkl')\n \n         # Regression for #15018\n         # If a stream contains a newline, but the provided length\n         # is less than the number of provided characters, the newline\n         # doesn't reset the available character count\n-        stream = LimitedStream(StringIO('1234\\nabcdef'), 9)\n-        self.assertEqual(stream.readline(10), '1234\\n')\n-        self.assertEqual(stream.readline(3), 'abc')\n+        stream = LimitedStream(StringIO(b'1234\\nabcdef'), 9)\n+        self.assertEqual(stream.readline(10), b'1234\\n')\n+        self.assertEqual(stream.readline(3), b'abc')\n         # Now expire the available characters\n-        self.assertEqual(stream.readline(3), 'd')\n+        self.assertEqual(stream.readline(3), b'd')\n         # Reading again returns nothing.\n-        self.assertEqual(stream.readline(2), '')\n+        self.assertEqual(stream.readline(2), b'')\n \n         # Same test, but with read, not readline.\n-        stream = LimitedStream(StringIO('1234\\nabcdef'), 9)\n-        self.assertEqual(stream.read(6), '1234\\na')\n-        self.assertEqual(stream.read(2), 'bc')\n-        self.assertEqual(stream.read(2), 'd')\n-        self.assertEqual(stream.read(2), '')\n-        self.assertEqual(stream.read(), '')\n+        stream = LimitedStream(StringIO(b'1234\\nabcdef'), 9)\n+        self.assertEqual(stream.read(6), b'1234\\na')\n+        self.assertEqual(stream.read(2), b'bc')\n+        self.assertEqual(stream.read(2), b'd')\n+        self.assertEqual(stream.read(2), b'')\n+        self.assertEqual(stream.read(), b'')\n \n     def test_stream(self):\n-        payload = 'name=value'\n+        payload = b'name=value'\n         request = WSGIRequest({'REQUEST_METHOD': 'POST',\n                                'CONTENT_LENGTH': len(payload),\n                                'wsgi.input': StringIO(payload)})\n-        self.assertEqual(request.read(), 'name=value')\n+        self.assertEqual(request.read(), b'name=value')\n \n     def test_read_after_value(self):\n         \"\"\"\n         Reading from request is allowed after accessing request contents as\n         POST or body.\n         \"\"\"\n-        payload = 'name=value'\n+        payload = b'name=value'\n         request = WSGIRequest({'REQUEST_METHOD': 'POST',\n                                'CONTENT_LENGTH': len(payload),\n                                'wsgi.input': StringIO(payload)})\n         self.assertEqual(request.POST, {u'name': [u'value']})\n-        self.assertEqual(request.body, 'name=value')\n-        self.assertEqual(request.read(), 'name=value')\n+        self.assertEqual(request.body, b'name=value')\n+        self.assertEqual(request.read(), b'name=value')\n \n     def test_value_after_read(self):\n         \"\"\"\n         Construction of POST or body is not allowed after reading\n         from request.\n         \"\"\"\n-        payload = 'name=value'\n+        payload = b'name=value'\n         request = WSGIRequest({'REQUEST_METHOD': 'POST',\n                                'CONTENT_LENGTH': len(payload),\n                                'wsgi.input': StringIO(payload)})\n-        self.assertEqual(request.read(2), 'na')\n+        self.assertEqual(request.read(2), b'na')\n         self.assertRaises(Exception, lambda: request.body)\n         self.assertEqual(request.POST, {})\n \n@@ -335,17 +335,17 @@ def test_POST_multipart_with_content_length_zero(self):\n         self.assertEqual(request.POST, {})\n \n     def test_read_by_lines(self):\n-        payload = 'name=value'\n+        payload = b'name=value'\n         request = WSGIRequest({'REQUEST_METHOD': 'POST',\n                                'CONTENT_LENGTH': len(payload),\n                                'wsgi.input': StringIO(payload)})\n-        self.assertEqual(list(request), ['name=value'])\n+        self.assertEqual(list(request), [b'name=value'])\n \n     def test_POST_after_body_read(self):\n         \"\"\"\n         POST should be populated even if body is read first\n         \"\"\"\n-        payload = 'name=value'\n+        payload = b'name=value'\n         request = WSGIRequest({'REQUEST_METHOD': 'POST',\n                                'CONTENT_LENGTH': len(payload),\n                                'wsgi.input': StringIO(payload)})\n@@ -357,12 +357,12 @@ def test_POST_after_body_read_and_stream_read(self):\n         POST should be populated even if body is read first, and then\n         the stream is read second.\n         \"\"\"\n-        payload = 'name=value'\n+        payload = b'name=value'\n         request = WSGIRequest({'REQUEST_METHOD': 'POST',\n                                'CONTENT_LENGTH': len(payload),\n                                'wsgi.input': StringIO(payload)})\n         raw_data = request.body\n-        self.assertEqual(request.read(1), u'n')\n+        self.assertEqual(request.read(1), b'n')\n         self.assertEqual(request.POST, {u'name': [u'value']})\n \n     def test_POST_after_body_read_and_stream_read_multipart(self):\n@@ -383,14 +383,14 @@ def test_POST_after_body_read_and_stream_read_multipart(self):\n                                'wsgi.input': StringIO(payload)})\n         raw_data = request.body\n         # Consume enough data to mess up the parsing:\n-        self.assertEqual(request.read(13), u'--boundary\\r\\nC')\n+        self.assertEqual(request.read(13), b'--boundary\\r\\nC')\n         self.assertEqual(request.POST, {u'name': [u'value']})\n \n     def test_raw_post_data_returns_body(self):\n         \"\"\"\n         HttpRequest.raw_post_body should be the same as HttpRequest.body\n         \"\"\"\n-        payload = 'Hello There!'\n+        payload = b'Hello There!'\n         request = WSGIRequest({\n             'REQUEST_METHOD': 'POST',\n             'CONTENT_LENGTH': len(payload),\n@@ -409,7 +409,7 @@ class ExplodingStringIO(StringIO):\n             def read(self, len=0):\n                 raise IOError(\"kaboom!\")\n \n-        payload = 'name=value'\n+        payload = b'name=value'\n         request = WSGIRequest({'REQUEST_METHOD': 'POST',\n                                'CONTENT_LENGTH': len(payload),\n                                'wsgi.input': ExplodingStringIO(payload)})"
        },
        {
            "sha": "1da3345806b0689bda19cfce5c536ae1e321bea4",
            "filename": "tests/regressiontests/signing/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fsigning%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fsigning%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fsigning%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -12,8 +12,8 @@ def test_signature(self):\n         signer = signing.Signer('predictable-secret')\n         signer2 = signing.Signer('predictable-secret2')\n         for s in (\n-            'hello',\n-            '3098247:529:087:',\n+            b'hello',\n+            b'3098247:529:087:',\n             u'\\u2019'.encode('utf-8'),\n         ):\n             self.assertEqual(\n@@ -69,7 +69,7 @@ def test_dumps_loads(self):\n         \"dumps and loads be reversible for any JSON serializable object\"\n         objects = (\n             ['a', 'list'],\n-            'a string',\n+            b'a string',\n             u'a unicode string \\u2019',\n             {'a': 'dictionary'},\n         )"
        },
        {
            "sha": "6565a4d786c7081abff9f48f0e59c7e8f0365e0b",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 26,
            "deletions": 26,
            "changes": 52,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -387,8 +387,8 @@ def test_template_tag_simple_content(self):\n         self.assertEqual(relpath, \"cached/styles.93b1147e8552.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n             content = relfile.read()\n-            self.assertNotIn(\"cached/other.css\", content)\n-            self.assertIn(\"other.d41d8cd98f00.css\", content)\n+            self.assertNotIn(b\"cached/other.css\", content)\n+            self.assertIn(b\"other.d41d8cd98f00.css\", content)\n \n     def test_path_with_querystring(self):\n         relpath = self.cached_file_path(\"cached/styles.css?spam=eggs\")\n@@ -397,71 +397,71 @@ def test_path_with_querystring(self):\n         with storage.staticfiles_storage.open(\n                 \"cached/styles.93b1147e8552.css\") as relfile:\n             content = relfile.read()\n-            self.assertNotIn(\"cached/other.css\", content)\n-            self.assertIn(\"other.d41d8cd98f00.css\", content)\n+            self.assertNotIn(b\"cached/other.css\", content)\n+            self.assertIn(b\"other.d41d8cd98f00.css\", content)\n \n     def test_path_with_fragment(self):\n         relpath = self.cached_file_path(\"cached/styles.css#eggs\")\n         self.assertEqual(relpath, \"cached/styles.93b1147e8552.css#eggs\")\n         with storage.staticfiles_storage.open(\n                 \"cached/styles.93b1147e8552.css\") as relfile:\n             content = relfile.read()\n-            self.assertNotIn(\"cached/other.css\", content)\n-            self.assertIn(\"other.d41d8cd98f00.css\", content)\n+            self.assertNotIn(b\"cached/other.css\", content)\n+            self.assertIn(b\"other.d41d8cd98f00.css\", content)\n \n     def test_path_with_querystring_and_fragment(self):\n         relpath = self.cached_file_path(\"cached/css/fragments.css\")\n         self.assertEqual(relpath, \"cached/css/fragments.75433540b096.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n             content = relfile.read()\n-            self.assertIn('fonts/font.a4b0478549d0.eot?#iefix', content)\n-            self.assertIn('fonts/font.b8d603e42714.svg#webfontIyfZbseF', content)\n-            self.assertIn('data:font/woff;charset=utf-8;base64,d09GRgABAAAAADJoAA0AAAAAR2QAAQAAAAAAAAAAAAA', content)\n-            self.assertIn('#default#VML', content)\n+            self.assertIn(b'fonts/font.a4b0478549d0.eot?#iefix', content)\n+            self.assertIn(b'fonts/font.b8d603e42714.svg#webfontIyfZbseF', content)\n+            self.assertIn(b'data:font/woff;charset=utf-8;base64,d09GRgABAAAAADJoAA0AAAAAR2QAAQAAAAAAAAAAAAA', content)\n+            self.assertIn(b'#default#VML', content)\n \n     def test_template_tag_absolute(self):\n         relpath = self.cached_file_path(\"cached/absolute.css\")\n         self.assertEqual(relpath, \"cached/absolute.23f087ad823a.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n             content = relfile.read()\n-            self.assertNotIn(\"/static/cached/styles.css\", content)\n-            self.assertIn(\"/static/cached/styles.93b1147e8552.css\", content)\n-            self.assertIn('/static/cached/img/relative.acae32e4532b.png', content)\n+            self.assertNotIn(b\"/static/cached/styles.css\", content)\n+            self.assertIn(b\"/static/cached/styles.93b1147e8552.css\", content)\n+            self.assertIn(b'/static/cached/img/relative.acae32e4532b.png', content)\n \n     def test_template_tag_denorm(self):\n         relpath = self.cached_file_path(\"cached/denorm.css\")\n         self.assertEqual(relpath, \"cached/denorm.c5bd139ad821.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n             content = relfile.read()\n-            self.assertNotIn(\"..//cached///styles.css\", content)\n-            self.assertIn(\"../cached/styles.93b1147e8552.css\", content)\n-            self.assertNotIn(\"url(img/relative.png )\", content)\n-            self.assertIn('url(\"img/relative.acae32e4532b.png', content)\n+            self.assertNotIn(b\"..//cached///styles.css\", content)\n+            self.assertIn(b\"../cached/styles.93b1147e8552.css\", content)\n+            self.assertNotIn(b\"url(img/relative.png )\", content)\n+            self.assertIn(b'url(\"img/relative.acae32e4532b.png', content)\n \n     def test_template_tag_relative(self):\n         relpath = self.cached_file_path(\"cached/relative.css\")\n         self.assertEqual(relpath, \"cached/relative.2217ea7273c2.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n             content = relfile.read()\n-            self.assertNotIn(\"../cached/styles.css\", content)\n-            self.assertNotIn('@import \"styles.css\"', content)\n-            self.assertNotIn('url(img/relative.png)', content)\n-            self.assertIn('url(\"img/relative.acae32e4532b.png\")', content)\n-            self.assertIn(\"../cached/styles.93b1147e8552.css\", content)\n+            self.assertNotIn(b\"../cached/styles.css\", content)\n+            self.assertNotIn(b'@import \"styles.css\"', content)\n+            self.assertNotIn(b'url(img/relative.png)', content)\n+            self.assertIn(b'url(\"img/relative.acae32e4532b.png\")', content)\n+            self.assertIn(b\"../cached/styles.93b1147e8552.css\", content)\n \n     def test_template_tag_deep_relative(self):\n         relpath = self.cached_file_path(\"cached/css/window.css\")\n         self.assertEqual(relpath, \"cached/css/window.9db38d5169f3.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n             content = relfile.read()\n-            self.assertNotIn('url(img/window.png)', content)\n-            self.assertIn('url(\"img/window.acae32e4532b.png\")', content)\n+            self.assertNotIn(b'url(img/window.png)', content)\n+            self.assertIn(b'url(\"img/window.acae32e4532b.png\")', content)\n \n     def test_template_tag_url(self):\n         relpath = self.cached_file_path(\"cached/url.css\")\n         self.assertEqual(relpath, \"cached/url.615e21601e4b.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n-            self.assertIn(\"https://\", relfile.read())\n+            self.assertIn(b\"https://\", relfile.read())\n \n     def test_cache_invalidation(self):\n         name = \"cached/styles.css\"\n@@ -508,7 +508,7 @@ def test_cache_key_memcache_validation(self):\n         \"\"\"\n         Handle cache key creation correctly, see #17861.\n         \"\"\"\n-        name = \"/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/\" + chr(22) + chr(180)\n+        name = b\"/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/\" + chr(22) + chr(180)\n         cache_key = storage.staticfiles_storage.cache_key(name)\n         cache_validator = BaseCache({})\n         cache_validator.validate_key(cache_key)"
        },
        {
            "sha": "b3f90169cad7fcb93fdc63936710bbf0f3d779bb",
            "filename": "tests/regressiontests/string_lookup/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fstring_lookup%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fstring_lookup%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstring_lookup%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -54,7 +54,7 @@ def test_unicode_chars_in_queries(self):\n         self.assertEqual(Foo.objects.get(friend__contains=u'\\xe7'), fx)\n \n         # We can also do the above query using UTF-8 strings.\n-        self.assertEqual(Foo.objects.get(friend__contains='\\xc3\\xa7'), fx)\n+        self.assertEqual(Foo.objects.get(friend__contains=b'\\xc3\\xa7'), fx)\n \n     def test_queries_on_textfields(self):\n         \"\"\""
        },
        {
            "sha": "8590dd25af1ae8a347d1e3443d989b30b84c4fcf",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -192,17 +192,17 @@ def test_template_sources(path, template_dirs, expected_sources):\n         test_template_sources('../dir1blah', template_dirs, [])\n \n         # UTF-8 bytestrings are permitted.\n-        test_template_sources('\\xc3\\x85ngstr\\xc3\\xb6m', template_dirs,\n+        test_template_sources(b'\\xc3\\x85ngstr\\xc3\\xb6m', template_dirs,\n                               [u'/dir1/Ångström', u'/dir2/Ångström'])\n         # Unicode strings are permitted.\n         test_template_sources(u'Ångström', template_dirs,\n                               [u'/dir1/Ångström', u'/dir2/Ångström'])\n-        test_template_sources(u'Ångström', ['/Straße'], [u'/Straße/Ångström'])\n-        test_template_sources('\\xc3\\x85ngstr\\xc3\\xb6m', ['/Straße'],\n+        test_template_sources(u'Ångström', [b'/Stra\\xc3\\x9fe'], [u'/Straße/Ångström'])\n+        test_template_sources(b'\\xc3\\x85ngstr\\xc3\\xb6m', [b'/Stra\\xc3\\x9fe'],\n                               [u'/Straße/Ångström'])\n         # Invalid UTF-8 encoding in bytestrings is not. Should raise a\n         # semi-useful error message.\n-        test_template_sources('\\xc3\\xc3', template_dirs, UnicodeDecodeError)\n+        test_template_sources(b'\\xc3\\xc3', template_dirs, UnicodeDecodeError)\n \n         # Case insensitive tests (for win32). Not run unless we're on\n         # a case insensitive operating system.\n@@ -1239,11 +1239,11 @@ def get_template_tests(self):\n             'i18n02': ('{% load i18n %}{% trans \"xxxyyyxxx\" %}', {}, \"xxxyyyxxx\"),\n \n             # simple translation of a variable\n-            'i18n03': ('{% load i18n %}{% blocktrans %}{{ anton }}{% endblocktrans %}', {'anton': '\\xc3\\x85'}, u\"Å\"),\n+            'i18n03': ('{% load i18n %}{% blocktrans %}{{ anton }}{% endblocktrans %}', {'anton': b'\\xc3\\x85'}, u\"Å\"),\n \n             # simple translation of a variable and filter\n-            'i18n04': ('{% load i18n %}{% blocktrans with berta=anton|lower %}{{ berta }}{% endblocktrans %}', {'anton': '\\xc3\\x85'}, u'å'),\n-            'legacyi18n04': ('{% load i18n %}{% blocktrans with anton|lower as berta %}{{ berta }}{% endblocktrans %}', {'anton': '\\xc3\\x85'}, u'å'),\n+            'i18n04': ('{% load i18n %}{% blocktrans with berta=anton|lower %}{{ berta }}{% endblocktrans %}', {'anton': b'\\xc3\\x85'}, u'å'),\n+            'legacyi18n04': ('{% load i18n %}{% blocktrans with anton|lower as berta %}{{ berta }}{% endblocktrans %}', {'anton': b'\\xc3\\x85'}, u'å'),\n \n             # simple translation of a string with interpolation\n             'i18n05': ('{% load i18n %}{% blocktrans %}xxx{{ anton }}xxx{% endblocktrans %}', {'anton': 'yyy'}, \"xxxyyyxxx\"),"
        },
        {
            "sha": "0e0cefeb8eb3c18a44b976a11d61fc0001710ff0",
            "filename": "tests/regressiontests/templates/unicode.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ftemplates%2Funicode.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ftemplates%2Funicode.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Funicode.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -10,16 +10,16 @@ def test_template(self):\n         t1 = Template(u'ŠĐĆŽćžšđ {{ var }}')\n         # Templates can also be created from bytestrings. These are assumed to\n         # be encoded using UTF-8.\n-        s = '\\xc5\\xa0\\xc4\\x90\\xc4\\x86\\xc5\\xbd\\xc4\\x87\\xc5\\xbe\\xc5\\xa1\\xc4\\x91 {{ var }}'\n+        s = b'\\xc5\\xa0\\xc4\\x90\\xc4\\x86\\xc5\\xbd\\xc4\\x87\\xc5\\xbe\\xc5\\xa1\\xc4\\x91 {{ var }}'\n         t2 = Template(s)\n-        s = '\\x80\\xc5\\xc0'\n+        s = b'\\x80\\xc5\\xc0'\n         self.assertRaises(TemplateEncodingError, Template, s)\n \n         # Contexts can be constructed from unicode or UTF-8 bytestrings.\n-        c1 = Context({\"var\": \"foo\"})\n-        c2 = Context({u\"var\": \"foo\"})\n-        c3 = Context({\"var\": u\"Đđ\"})\n-        c4 = Context({u\"var\": \"\\xc4\\x90\\xc4\\x91\"})\n+        c1 = Context({b\"var\": b\"foo\"})\n+        c2 = Context({u\"var\": b\"foo\"})\n+        c3 = Context({b\"var\": u\"Đđ\"})\n+        c4 = Context({u\"var\": b\"\\xc4\\x90\\xc4\\x91\"})\n \n         # Since both templates and all four contexts represent the same thing,\n         # they all render the same (and are returned as unicode objects and"
        },
        {
            "sha": "3fb8f894fd92072ccc1875bd72ad40d463073032",
            "filename": "tests/regressiontests/test_client_regress/models.py",
            "status": "modified",
            "additions": 36,
            "deletions": 36,
            "changes": 72,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -122,14 +122,14 @@ def test_unicode_contains(self):\n         #Regression test for #10183\n         r = self.client.get('/test_client_regress/check_unicode/')\n         self.assertContains(r, u'さかき')\n-        self.assertContains(r, '\\xe5\\xb3\\xa0'.decode('utf-8'))\n+        self.assertContains(r, b'\\xe5\\xb3\\xa0'.decode('utf-8'))\n \n     def test_unicode_not_contains(self):\n         \"Unicode characters can be searched for, and not found in template context\"\n         #Regression test for #10183\n         r = self.client.get('/test_client_regress/check_unicode/')\n         self.assertNotContains(r, u'はたけ')\n-        self.assertNotContains(r, '\\xe3\\x81\\xaf\\xe3\\x81\\x9f\\xe3\\x81\\x91'.decode('utf-8'))\n+        self.assertNotContains(r, b'\\xe3\\x81\\xaf\\xe3\\x81\\x9f\\xe3\\x81\\x91'.decode('utf-8'))\n \n     def test_assert_contains_renders_template_response(self):\n         \"\"\" Test that we can pass in an unrendered SimpleTemplateReponse\n@@ -571,25 +571,25 @@ def test_simple_argument_get(self):\n         \"Get a view that has a simple string argument\"\n         response = self.client.get(reverse('arg_view', args=['Slartibartfast']))\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'Howdy, Slartibartfast')\n+        self.assertEqual(response.content, b'Howdy, Slartibartfast')\n \n     def test_argument_with_space_get(self):\n         \"Get a view that has a string argument that requires escaping\"\n         response = self.client.get(reverse('arg_view', args=['Arthur Dent']))\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'Hi, Arthur')\n+        self.assertEqual(response.content, b'Hi, Arthur')\n \n     def test_simple_argument_post(self):\n         \"Post for a view that has a simple string argument\"\n         response = self.client.post(reverse('arg_view', args=['Slartibartfast']))\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'Howdy, Slartibartfast')\n+        self.assertEqual(response.content, b'Howdy, Slartibartfast')\n \n     def test_argument_with_space_post(self):\n         \"Post for a view that has a string argument that requires escaping\"\n         response = self.client.post(reverse('arg_view', args=['Arthur Dent']))\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'Hi, Arthur')\n+        self.assertEqual(response.content, b'Hi, Arthur')\n \n @override_settings(PASSWORD_HASHERS=('django.contrib.auth.hashers.SHA1PasswordHasher',))\n class ExceptionTests(TestCase):\n@@ -721,17 +721,17 @@ def test_session(self):\n         # The session doesn't exist to start.\n         response = self.client.get('/test_client_regress/check_session/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'NO')\n+        self.assertEqual(response.content, b'NO')\n \n         # This request sets a session variable.\n         response = self.client.get('/test_client_regress/set_session/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'set_session')\n+        self.assertEqual(response.content, b'set_session')\n \n         # Check that the session has been modified\n         response = self.client.get('/test_client_regress/check_session/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'YES')\n+        self.assertEqual(response.content, b'YES')\n \n         # Log in\n         login = self.client.login(username='testclient',password='password')\n@@ -740,7 +740,7 @@ def test_session(self):\n         # Session should still contain the modified value\n         response = self.client.get('/test_client_regress/check_session/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'YES')\n+        self.assertEqual(response.content, b'YES')\n \n     def test_logout(self):\n         \"\"\"Logout should work whether the user is logged in or not (#9978).\"\"\"\n@@ -755,39 +755,39 @@ def test_get(self):\n         \"Request a view via request method GET\"\n         response = self.client.get('/test_client_regress/request_methods/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'request method: GET')\n+        self.assertEqual(response.content, b'request method: GET')\n \n     def test_post(self):\n         \"Request a view via request method POST\"\n         response = self.client.post('/test_client_regress/request_methods/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'request method: POST')\n+        self.assertEqual(response.content, b'request method: POST')\n \n     def test_head(self):\n         \"Request a view via request method HEAD\"\n         response = self.client.head('/test_client_regress/request_methods/')\n         self.assertEqual(response.status_code, 200)\n         # A HEAD request doesn't return any content.\n-        self.assertNotEqual(response.content, 'request method: HEAD')\n-        self.assertEqual(response.content, '')\n+        self.assertNotEqual(response.content, b'request method: HEAD')\n+        self.assertEqual(response.content, b'')\n \n     def test_options(self):\n         \"Request a view via request method OPTIONS\"\n         response = self.client.options('/test_client_regress/request_methods/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'request method: OPTIONS')\n+        self.assertEqual(response.content, b'request method: OPTIONS')\n \n     def test_put(self):\n         \"Request a view via request method PUT\"\n         response = self.client.put('/test_client_regress/request_methods/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'request method: PUT')\n+        self.assertEqual(response.content, b'request method: PUT')\n \n     def test_delete(self):\n         \"Request a view via request method DELETE\"\n         response = self.client.delete('/test_client_regress/request_methods/')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'request method: DELETE')\n+        self.assertEqual(response.content, b'request method: DELETE')\n \n class RequestMethodStringDataTests(TestCase):\n     def test_post(self):\n@@ -796,15 +796,15 @@ def test_post(self):\n         data = u'{\"test\": \"json\"}'\n         response = self.client.post('/test_client_regress/request_methods/', data=data, content_type='application/json')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'request method: POST')\n+        self.assertEqual(response.content, b'request method: POST')\n \n     def test_put(self):\n         \"Request a view with string data via request method PUT\"\n         # Regression test for #11371\n         data = u'{\"test\": \"json\"}'\n         response = self.client.put('/test_client_regress/request_methods/', data=data, content_type='application/json')\n         self.assertEqual(response.status_code, 200)\n-        self.assertEqual(response.content, 'request method: PUT')\n+        self.assertEqual(response.content, b'request method: PUT')\n \n class QueryStringTests(TestCase):\n     def test_get_like_requests(self):\n@@ -913,34 +913,34 @@ def read(self):\n class UploadedFileEncodingTest(TestCase):\n     def test_file_encoding(self):\n         encoded_file = encode_file('TEST_BOUNDARY', 'TEST_KEY', DummyFile('test_name.bin'))\n-        self.assertEqual('--TEST_BOUNDARY', encoded_file[0])\n-        self.assertEqual('Content-Disposition: form-data; name=\"TEST_KEY\"; filename=\"test_name.bin\"', encoded_file[1])\n-        self.assertEqual('TEST_FILE_CONTENT', encoded_file[-1])\n+        self.assertEqual(b'--TEST_BOUNDARY', encoded_file[0])\n+        self.assertEqual(b'Content-Disposition: form-data; name=\"TEST_KEY\"; filename=\"test_name.bin\"', encoded_file[1])\n+        self.assertEqual(b'TEST_FILE_CONTENT', encoded_file[-1])\n \n     def test_guesses_content_type_on_file_encoding(self):\n-        self.assertEqual('Content-Type: application/octet-stream',\n+        self.assertEqual(b'Content-Type: application/octet-stream',\n                          encode_file('IGNORE', 'IGNORE', DummyFile(\"file.bin\"))[2])\n-        self.assertEqual('Content-Type: text/plain',\n+        self.assertEqual(b'Content-Type: text/plain',\n                          encode_file('IGNORE', 'IGNORE', DummyFile(\"file.txt\"))[2])\n         self.assertIn(encode_file('IGNORE', 'IGNORE', DummyFile(\"file.zip\"))[2], (\n-                        'Content-Type: application/x-compress',\n-                        'Content-Type: application/x-zip',\n-                        'Content-Type: application/x-zip-compressed',\n-                        'Content-Type: application/zip',))\n-        self.assertEqual('Content-Type: application/octet-stream',\n+                        b'Content-Type: application/x-compress',\n+                        b'Content-Type: application/x-zip',\n+                        b'Content-Type: application/x-zip-compressed',\n+                        b'Content-Type: application/zip',))\n+        self.assertEqual(b'Content-Type: application/octet-stream',\n                          encode_file('IGNORE', 'IGNORE', DummyFile(\"file.unknown\"))[2])\n \n class RequestHeadersTest(TestCase):\n     def test_client_headers(self):\n         \"A test client can receive custom headers\"\n         response = self.client.get(\"/test_client_regress/check_headers/\", HTTP_X_ARG_CHECK='Testing 123')\n-        self.assertEqual(response.content, \"HTTP_X_ARG_CHECK: Testing 123\")\n+        self.assertEqual(response.content, b\"HTTP_X_ARG_CHECK: Testing 123\")\n         self.assertEqual(response.status_code, 200)\n \n     def test_client_headers_redirect(self):\n         \"Test client headers are preserved through redirects\"\n         response = self.client.get(\"/test_client_regress/check_headers_redirect/\", follow=True, HTTP_X_ARG_CHECK='Testing 123')\n-        self.assertEqual(response.content, \"HTTP_X_ARG_CHECK: Testing 123\")\n+        self.assertEqual(response.content, b\"HTTP_X_ARG_CHECK: Testing 123\")\n         self.assertRedirects(response, '/test_client_regress/check_headers/',\n             status_code=301, target_status_code=200)\n \n@@ -956,30 +956,30 @@ class ReadLimitedStreamTest(TestCase):\n     def test_body_from_empty_request(self):\n         \"\"\"HttpRequest.body on a test client GET request should return\n         the empty string.\"\"\"\n-        self.assertEqual(self.client.get(\"/test_client_regress/body/\").content, '')\n+        self.assertEqual(self.client.get(\"/test_client_regress/body/\").content, b'')\n \n     def test_read_from_empty_request(self):\n         \"\"\"HttpRequest.read() on a test client GET request should return the\n         empty string.\"\"\"\n-        self.assertEqual(self.client.get(\"/test_client_regress/read_all/\").content, '')\n+        self.assertEqual(self.client.get(\"/test_client_regress/read_all/\").content, b'')\n \n     def test_read_numbytes_from_empty_request(self):\n         \"\"\"HttpRequest.read(LARGE_BUFFER) on a test client GET request should\n         return the empty string.\"\"\"\n-        self.assertEqual(self.client.get(\"/test_client_regress/read_buffer/\").content, '')\n+        self.assertEqual(self.client.get(\"/test_client_regress/read_buffer/\").content, b'')\n \n     def test_read_from_nonempty_request(self):\n         \"\"\"HttpRequest.read() on a test client PUT request with some payload\n         should return that payload.\"\"\"\n-        payload = 'foobar'\n+        payload = b'foobar'\n         self.assertEqual(self.client.put(\"/test_client_regress/read_all/\",\n                                           data=payload,\n                                           content_type='text/plain').content, payload)\n \n     def test_read_numbytes_from_nonempty_request(self):\n         \"\"\"HttpRequest.read(LARGE_BUFFER) on a test client PUT request with\n         some payload should return that payload.\"\"\"\n-        payload = 'foobar'\n+        payload = b'foobar'\n         self.assertEqual(self.client.put(\"/test_client_regress/read_buffer/\",\n                                           data=payload,\n                                           content_type='text/plain').content, payload)"
        },
        {
            "sha": "1e12679af21e2db0a7a51f0709ae0b515a5e1ed0",
            "filename": "tests/regressiontests/views/__init__.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fviews%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/38408f8007eae21b9f1cbbcc7f86d4b2042ff86a/tests%2Fregressiontests%2Fviews%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2F__init__.py?ref=38408f8007eae21b9f1cbbcc7f86d4b2042ff86a",
            "patch": "@@ -3,8 +3,8 @@\n class BrokenException(Exception):\n     pass\n \n-except_args = ('Broken!',           # plain exception with ASCII text\n+except_args = (b'Broken!',           # plain exception with ASCII text\n                u'¡Broken!',         # non-ASCII unicode data\n-               '¡Broken!',          # non-ASCII, utf-8 encoded bytestring\n-               '\\xa1Broken!', )     # non-ASCII, latin1 bytestring\n+               u'¡Broken!'.encode('utf-8'), # non-ASCII, utf-8 encoded bytestring\n+               b'\\xa1Broken!', )     # non-ASCII, latin1 bytestring\n "
        }
    ],
    "stats": {
        "total": 593,
        "additions": 297,
        "deletions": 296
    }
}