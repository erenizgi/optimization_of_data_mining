{
    "author": "freakboy3742",
    "message": "Fixed #13674 -- Ensure that labels on added inlines fields have the right 'for' attribute. Thanks to Jonas for the report, and Julien Phalip for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15436 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "7494345c39162c9052894125ee7af37e1f18adb2",
    "files": [
        {
            "sha": "0153a415a366bf39d945de92a482d39087fac53a",
            "filename": "django/contrib/admin/media/js/inlines.js",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/7494345c39162c9052894125ee7af37e1f18adb2/django%2Fcontrib%2Fadmin%2Fmedia%2Fjs%2Finlines.js",
            "raw_url": "https://github.com/django/django/raw/7494345c39162c9052894125ee7af37e1f18adb2/django%2Fcontrib%2Fadmin%2Fmedia%2Fjs%2Finlines.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fmedia%2Fjs%2Finlines.js?ref=7494345c39162c9052894125ee7af37e1f18adb2",
            "patch": "@@ -75,6 +75,14 @@\n \t\t\t\t    }).each(function() {\n \t\t\t\t        var el = $(this);\n \t\t\t\t        el.attr(\"name\", el.attr(\"name\").replace(/__prefix__/g, nextIndex));\n+\t\t\t\t    })\n+\t\t\t\t    .end()\n+\t\t\t\t    .filter(function() {\n+\t\t\t\t        var el = $(this);\n+\t\t\t\t        return el.attr(\"for\") && el.attr(\"for\").search(/__prefix__/) >= 0;\n+\t\t\t\t    }).each(function() {\n+\t\t\t\t        var el = $(this);\n+\t\t\t\t        el.attr(\"for\", el.attr(\"for\").replace(/__prefix__/g, nextIndex));\n \t\t\t\t    });\n \t\t\t\tif (row.is(\"tr\")) {\n \t\t\t\t\t// If the forms are laid out in table rows, insert"
        },
        {
            "sha": "fa3540b151d89d59e5eef0f0d8473a818dfb15f4",
            "filename": "django/contrib/admin/media/js/inlines.min.js",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/7494345c39162c9052894125ee7af37e1f18adb2/django%2Fcontrib%2Fadmin%2Fmedia%2Fjs%2Finlines.min.js",
            "raw_url": "https://github.com/django/django/raw/7494345c39162c9052894125ee7af37e1f18adb2/django%2Fcontrib%2Fadmin%2Fmedia%2Fjs%2Finlines.min.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fmedia%2Fjs%2Finlines.min.js?ref=7494345c39162c9052894125ee7af37e1f18adb2",
            "patch": "@@ -1,6 +1,6 @@\n-(function(a){a.fn.formset=function(g){var b=a.extend({},a.fn.formset.defaults,g),l=function(d,f,e){var c=new RegExp(\"(\"+f+\"-\\\\d+)\");f=f+\"-\"+e;a(d).attr(\"for\")&&a(d).attr(\"for\",a(d).attr(\"for\").replace(c,f));if(d.id)d.id=d.id.replace(c,f);if(d.name)d.name=d.name.replace(c,f)};g=a(\"#id_\"+b.prefix+\"-TOTAL_FORMS\").attr(\"autocomplete\",\"off\");var j=parseInt(g.val()),h=a(\"#id_\"+b.prefix+\"-MAX_NUM_FORMS\").attr(\"autocomplete\",\"off\");g=h.val()==\"\"||h.val()-g.val()>0;a(this).each(function(){a(this).not(\".\"+\n-b.emptyCssClass).addClass(b.formCssClass)});if(a(this).length&&g){var i;if(a(this).attr(\"tagName\")==\"TR\"){g=this.eq(0).children().length;a(this).parent().append('<tr class=\"'+b.addCssClass+'\"><td colspan=\"'+g+'\"><a href=\"javascript:void(0)\">'+b.addText+\"</a></tr>\");i=a(this).parent().find(\"tr:last a\")}else{a(this).filter(\":last\").after('<div class=\"'+b.addCssClass+'\"><a href=\"javascript:void(0)\">'+b.addText+\"</a></div>\");i=a(this).filter(\":last\").next().find(\"a\")}i.click(function(){var d=a(\"#id_\"+\n-b.prefix+\"-TOTAL_FORMS\"),f=a(\"#\"+b.prefix+\"-empty\"),e=f.clone(true);e.removeClass(b.emptyCssClass).addClass(b.formCssClass).attr(\"id\",b.prefix+\"-\"+j);j+=1;e.find(\"*\").filter(function(){var c=a(this);return c.attr(\"id\")&&c.attr(\"id\").search(/__prefix__/)>=0}).each(function(){var c=a(this);c.attr(\"id\",c.attr(\"id\").replace(/__prefix__/g,j))}).end().filter(function(){var c=a(this);return c.attr(\"name\")&&c.attr(\"name\").search(/__prefix__/)>=0}).each(function(){var c=a(this);c.attr(\"name\",c.attr(\"name\").replace(/__prefix__/g,\n-j))});if(e.is(\"tr\"))e.children(\":last\").append('<div><a class=\"'+b.deleteCssClass+'\" href=\"javascript:void(0)\">'+b.deleteText+\"</a></div>\");else e.is(\"ul\")||e.is(\"ol\")?e.append('<li><a class=\"'+b.deleteCssClass+'\" href=\"javascript:void(0)\">'+b.deleteText+\"</a></li>\"):e.children(\":first\").append('<span><a class=\"'+b.deleteCssClass+'\" href=\"javascript:void(0)\">'+b.deleteText+\"</a></span>\");e.find(\"input,select,textarea,label,a\").each(function(){l(this,b.prefix,d.val())});e.insertBefore(a(f));a(d).val(parseInt(d.val())+\n-1);h.val()!=\"\"&&h.val()-d.val()<=0&&i.parent().hide();e.find(\"a.\"+b.deleteCssClass).click(function(){var c=a(this).parents(\".\"+b.formCssClass);c.remove();b.removed&&b.removed(c);c=a(\".\"+b.formCssClass);a(\"#id_\"+b.prefix+\"-TOTAL_FORMS\").val(c.length);if(h.val()==\"\"||h.val()-c.length>0)i.parent().show();for(var k=0,m=c.length;k<m;k++)a(c.get(k)).find(\"input,select,textarea,label,a\").each(function(){l(this,b.prefix,k)});return false});b.added&&b.added(e);return false})}return this};a.fn.formset.defaults=\n-{prefix:\"form\",addText:\"add another\",deleteText:\"remove\",addCssClass:\"add-row\",deleteCssClass:\"delete-row\",emptyCssClass:\"empty-row\",formCssClass:\"dynamic-form\",added:null,removed:null}})(django.jQuery);\n+(function(a){a.fn.formset=function(g){var b=a.extend({},a.fn.formset.defaults,g),l=function(d,f,e){var c=RegExp(\"(\"+f+\"-\\\\d+)\");f=f+\"-\"+e;a(d).attr(\"for\")&&a(d).attr(\"for\",a(d).attr(\"for\").replace(c,f));if(d.id)d.id=d.id.replace(c,f);if(d.name)d.name=d.name.replace(c,f)};g=a(\"#id_\"+b.prefix+\"-TOTAL_FORMS\").attr(\"autocomplete\",\"off\");var i=parseInt(g.val()),h=a(\"#id_\"+b.prefix+\"-MAX_NUM_FORMS\").attr(\"autocomplete\",\"off\");g=h.val()==\"\"||h.val()-g.val()>0;a(this).each(function(){a(this).not(\".\"+b.emptyCssClass).addClass(b.formCssClass)});\n+if(a(this).length&&g){var j;if(a(this).attr(\"tagName\")==\"TR\"){g=this.eq(0).children().length;a(this).parent().append('<tr class=\"'+b.addCssClass+'\"><td colspan=\"'+g+'\"><a href=\"javascript:void(0)\">'+b.addText+\"</a></tr>\");j=a(this).parent().find(\"tr:last a\")}else{a(this).filter(\":last\").after('<div class=\"'+b.addCssClass+'\"><a href=\"javascript:void(0)\">'+b.addText+\"</a></div>\");j=a(this).filter(\":last\").next().find(\"a\")}j.click(function(){var d=a(\"#id_\"+b.prefix+\"-TOTAL_FORMS\"),f=a(\"#\"+b.prefix+\"-empty\"),\n+e=f.clone(true);e.removeClass(b.emptyCssClass).addClass(b.formCssClass).attr(\"id\",b.prefix+\"-\"+i);i+=1;e.find(\"*\").filter(function(){var c=a(this);return c.attr(\"id\")&&c.attr(\"id\").search(/__prefix__/)>=0}).each(function(){var c=a(this);c.attr(\"id\",c.attr(\"id\").replace(/__prefix__/g,i))}).end().filter(function(){var c=a(this);return c.attr(\"name\")&&c.attr(\"name\").search(/__prefix__/)>=0}).each(function(){var c=a(this);c.attr(\"name\",c.attr(\"name\").replace(/__prefix__/g,i))}).end().filter(function(){var c=\n+a(this);return c.attr(\"for\")&&c.attr(\"for\").search(/__prefix__/)>=0}).each(function(){var c=a(this);c.attr(\"for\",c.attr(\"for\").replace(/__prefix__/g,i))});if(e.is(\"tr\"))e.children(\":last\").append('<div><a class=\"'+b.deleteCssClass+'\" href=\"javascript:void(0)\">'+b.deleteText+\"</a></div>\");else e.is(\"ul\")||e.is(\"ol\")?e.append('<li><a class=\"'+b.deleteCssClass+'\" href=\"javascript:void(0)\">'+b.deleteText+\"</a></li>\"):e.children(\":first\").append('<span><a class=\"'+b.deleteCssClass+'\" href=\"javascript:void(0)\">'+\n+b.deleteText+\"</a></span>\");e.find(\"input,select,textarea,label,a\").each(function(){l(this,b.prefix,d.val())});e.insertBefore(a(f));a(d).val(parseInt(d.val())+1);h.val()!=\"\"&&h.val()-d.val()<=0&&j.parent().hide();e.find(\"a.\"+b.deleteCssClass).click(function(){var c=a(this).parents(\".\"+b.formCssClass);c.remove();b.removed&&b.removed(c);c=a(\".\"+b.formCssClass);a(\"#id_\"+b.prefix+\"-TOTAL_FORMS\").val(c.length);if(h.val()==\"\"||h.val()-c.length>0)j.parent().show();for(var k=0,m=c.length;k<m;k++)a(c.get(k)).find(\"input,select,textarea,label,a\").each(function(){l(this,\n+b.prefix,k)});return false});b.added&&b.added(e);return false})}return this};a.fn.formset.defaults={prefix:\"form\",addText:\"add another\",deleteText:\"remove\",addCssClass:\"add-row\",deleteCssClass:\"delete-row\",emptyCssClass:\"empty-row\",formCssClass:\"dynamic-form\",added:null,removed:null}})(django.jQuery);"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 14,
        "deletions": 6
    }
}