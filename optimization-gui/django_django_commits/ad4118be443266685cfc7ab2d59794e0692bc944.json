{
    "author": "jezdez",
    "message": "Fixed #15598 -- Updated static URL helper to be no-op on non-local prefixes. Thanks, traff.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15839 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ad4118be443266685cfc7ab2d59794e0692bc944",
    "files": [
        {
            "sha": "8be564ec7a62c94e8483c7acef18d70098b48fbe",
            "filename": "django/conf/urls/static.py",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/ad4118be443266685cfc7ab2d59794e0692bc944/django%2Fconf%2Furls%2Fstatic.py",
            "raw_url": "https://github.com/django/django/raw/ad4118be443266685cfc7ab2d59794e0692bc944/django%2Fconf%2Furls%2Fstatic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Furls%2Fstatic.py?ref=ad4118be443266685cfc7ab2d59794e0692bc944",
            "patch": "@@ -15,12 +15,11 @@ def static(prefix, view='django.views.static.serve', **kwargs):\n     ) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n \n     \"\"\"\n-    if not settings.DEBUG:\n+    # No-op if not in debug mode or an non-local prefix\n+    if not settings.DEBUG or (prefix and '://' in prefix):\n         return []\n     elif not prefix:\n         raise ImproperlyConfigured(\"Empty static prefix not permitted\")\n-    elif '://' in prefix:\n-        raise ImproperlyConfigured(\"URL '%s' not allowed as static prefix\" % prefix)\n     return patterns('',\n         url(r'^%s(?P<path>.*)$' % re.escape(prefix.lstrip('/')), view, kwargs=kwargs),\n     )"
        },
        {
            "sha": "77e07141e320423042a7ab8684e05c9facd329f5",
            "filename": "docs/howto/static-files.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ad4118be443266685cfc7ab2d59794e0692bc944/docs%2Fhowto%2Fstatic-files.txt",
            "raw_url": "https://github.com/django/django/raw/ad4118be443266685cfc7ab2d59794e0692bc944/docs%2Fhowto%2Fstatic-files.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Fstatic-files.txt?ref=ad4118be443266685cfc7ab2d59794e0692bc944",
            "patch": "@@ -297,6 +297,12 @@ development::\n         # ... the rest of your URLconf goes here ...\n     ) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n \n+.. note::\n+\n+    The helper function will only be operational in debug mode and if\n+    the given prefix is local (e.g. ``/static/``) and not a URL (e.g.\n+    ``http://static.example.com/``).\n+\n .. _staticfiles-production:\n \n Serving static files in production"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 8,
        "deletions": 3
    }
}