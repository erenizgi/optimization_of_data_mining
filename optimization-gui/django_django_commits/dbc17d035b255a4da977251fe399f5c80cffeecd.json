{
    "author": "andrewgodwin",
    "message": "Un-borg-ify AppCache",
    "sha": "dbc17d035b255a4da977251fe399f5c80cffeecd",
    "files": [
        {
            "sha": "d57780c57847d6981fff697e496b4b89e2ff2d2a",
            "filename": "django/db/models/loading.py",
            "status": "modified",
            "additions": 12,
            "deletions": 20,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/dbc17d035b255a4da977251fe399f5c80cffeecd/django%2Fdb%2Fmodels%2Floading.py",
            "raw_url": "https://github.com/django/django/raw/dbc17d035b255a4da977251fe399f5c80cffeecd/django%2Fdb%2Fmodels%2Floading.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Floading.py?ref=dbc17d035b255a4da977251fe399f5c80cffeecd",
            "patch": "@@ -14,37 +14,29 @@\n __all__ = ('get_apps', 'get_app', 'get_models', 'get_model', 'register_models',\n         'load_app', 'app_cache_ready')\n \n+\n class AppCache(object):\n     \"\"\"\n     A cache that stores installed applications and their models. Used to\n     provide reverse-relations and for app introspection (e.g. admin).\n     \"\"\"\n-    # Use the Borg pattern to share state between all instances. Details at\n-    # http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/66531.\n-    __shared_state = dict(\n-        # Keys of app_store are the model modules for each application.\n-        app_store = SortedDict(),\n \n+    def __init__(self):\n+        # Keys of app_store are the model modules for each application.\n+        self.app_store = SortedDict()\n         # Mapping of installed app_labels to model modules for that app.\n-        app_labels = {},\n-\n+        self.app_labels = {}\n         # Mapping of app_labels to a dictionary of model names to model code.\n         # May contain apps that are not installed.\n-        app_models = SortedDict(),\n-\n+        self.app_models = SortedDict()\n         # Mapping of app_labels to errors raised when trying to import the app.\n-        app_errors = {},\n-\n+        self.app_errors = {}\n         # -- Everything below here is only used when populating the cache --\n-        loaded = False,\n-        handled = {},\n-        postponed = [],\n-        nesting_level = 0,\n-        _get_models_cache = {},\n-    )\n-\n-    def __init__(self):\n-        self.__dict__ = self.__shared_state\n+        self.loaded = False\n+        self.handled = {}\n+        self.postponed = []\n+        self.nesting_level = 0\n+        self._get_models_cache = {}\n \n     def _populate(self):\n         \"\"\""
        }
    ],
    "stats": {
        "total": 32,
        "additions": 12,
        "deletions": 20
    }
}