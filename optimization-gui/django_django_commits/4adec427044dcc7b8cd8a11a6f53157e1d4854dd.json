{
    "author": "alex",
    "message": "Converted United Kingdom localflavor doctests into unittests.  We have always been at war with doctests.  Thanks to Idan Gazit.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14953 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "4adec427044dcc7b8cd8a11a6f53157e1d4854dd",
    "files": [
        {
            "sha": "6fd536f936b00b20d217bb5cf6d884eed630a867",
            "filename": "tests/regressiontests/forms/localflavor/uk.py",
            "status": "modified",
            "additions": 28,
            "deletions": 64,
            "changes": 92,
            "blob_url": "https://github.com/django/django/blob/4adec427044dcc7b8cd8a11a6f53157e1d4854dd/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fuk.py",
            "raw_url": "https://github.com/django/django/raw/4adec427044dcc7b8cd8a11a6f53157e1d4854dd/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fuk.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fuk.py?ref=4adec427044dcc7b8cd8a11a6f53157e1d4854dd",
            "patch": "@@ -1,66 +1,30 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ UK form fields.\n+from django.contrib.localflavor.uk.forms import UKPostcodeField\n \n-tests = r\"\"\"\n-# UKPostcodeField #############################################################\n+from utils import LocalFlavorTestCase\n \n-UKPostcodeField validates that the data is a valid UK postcode.\n->>> from django.contrib.localflavor.uk.forms import UKPostcodeField\n->>> f = UKPostcodeField()\n->>> f.clean('BT32 4PX')\n-u'BT32 4PX'\n->>> f.clean('GIR 0AA')\n-u'GIR 0AA'\n->>> f.clean('BT324PX')\n-u'BT32 4PX'\n->>> f.clean('1NV 4L1D')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid postcode.']\n->>> f.clean('1NV4L1D')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid postcode.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean(' so11aa ')\n-u'SO1 1AA'\n->>> f.clean(' so1  1aa ')\n-u'SO1 1AA'\n->>> f.clean('G2 3wt')\n-u'G2 3WT'\n->>> f.clean('EC1A 1BB')\n-u'EC1A 1BB'\n->>> f.clean('Ec1a1BB')\n-u'EC1A 1BB'\n->>> f.clean(' b0gUS')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid postcode.']\n->>> f = UKPostcodeField(required=False)\n->>> f.clean('BT32 4PX')\n-u'BT32 4PX'\n->>> f.clean('GIR 0AA')\n-u'GIR 0AA'\n->>> f.clean('1NV 4L1D')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid postcode.']\n->>> f.clean('BT324PX')\n-u'BT32 4PX'\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n->>> f = UKPostcodeField(error_messages={'invalid': 'Enter a bloody postcode!'})\n->>> f.clean('1NV 4L1D')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a bloody postcode!']\n-\"\"\"\n+\n+class UKLocalFlavorTests(LocalFlavorTestCase):\n+    def test_UKPostcodeField(self):\n+        error_invalid = [u'Enter a valid postcode.']\n+        valid = {\n+            'BT32 4PX': 'BT32 4PX',\n+            'GIR 0AA': 'GIR 0AA',\n+            'BT324PX': 'BT32 4PX',\n+            ' so11aa ': 'SO1 1AA',\n+            ' so1  1aa ': 'SO1 1AA',\n+            'G2 3wt': 'G2 3WT',\n+            'EC1A 1BB': 'EC1A 1BB',\n+            'Ec1a1BB': 'EC1A 1BB',\n+        }\n+        invalid = {\n+            '1NV 4L1D': error_invalid,\n+            '1NV4L1D': error_invalid,\n+            ' b0gUS': error_invalid,\n+        }\n+        self.assertFieldOutput(UKPostcodeField, valid, invalid)\n+        valid = {}\n+        invalid = {\n+            '1NV 4L1D': [u'Enter a bloody postcode!'],\n+        }\n+        kwargs = {'error_messages': {'invalid': 'Enter a bloody postcode!'}}\n+        self.assertFieldOutput(UKPostcodeField, valid, invalid, field_kwargs=kwargs)"
        },
        {
            "sha": "268d86f8f4bcc071efa64d7705c6dff93a8ef997",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/4adec427044dcc7b8cd8a11a6f53157e1d4854dd/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/4adec427044dcc7b8cd8a11a6f53157e1d4854dd/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=4adec427044dcc7b8cd8a11a6f53157e1d4854dd",
            "patch": "@@ -1,7 +1,6 @@\n # -*- coding: utf-8 -*-\n from localflavor.cz import tests as localflavor_cz_tests\n from localflavor.se import tests as localflavor_se_tests\n-from localflavor.uk import tests as localflavor_uk_tests\n from localflavor.us import tests as localflavor_us_tests\n from localflavor.uy import tests as localflavor_uy_tests\n from localflavor.za import tests as localflavor_za_tests\n@@ -32,12 +31,12 @@\n from localflavor.ro import ROLocalFlavorTests\n from localflavor.sk import SKLocalFlavorTests\n from localflavor.tr import TRLocalFlavorTests\n+from localflavor.uk import UKLocalFlavorTests\n \n \n __test__ = {\n     'localflavor_cz_tests': localflavor_cz_tests,\n     'localflavor_se_tests': localflavor_se_tests,\n-    'localflavor_uk_tests': localflavor_uk_tests,\n     'localflavor_us_tests': localflavor_us_tests,\n     'localflavor_uy_tests': localflavor_uy_tests,\n     'localflavor_za_tests': localflavor_za_tests,"
        },
        {
            "sha": "9dc27b0fad45a9c65863029ba839d581a6d3289b",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/4adec427044dcc7b8cd8a11a6f53157e1d4854dd/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/4adec427044dcc7b8cd8a11a6f53157e1d4854dd/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=4adec427044dcc7b8cd8a11a6f53157e1d4854dd",
            "patch": "@@ -39,4 +39,5 @@\n     ROLocalFlavorTests,\n     SKLocalFlavorTests,\n     TRLocalFlavorTests,\n+    UKLocalFlavorTests,\n )"
        }
    ],
    "stats": {
        "total": 96,
        "additions": 30,
        "deletions": 66
    }
}