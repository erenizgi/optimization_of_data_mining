{
    "author": "ubernostrum",
    "message": "Merge pull request #331 from davidfischer/master\n\nTicket #17324 - Improve security docs with better CSRF explanation",
    "sha": "257c4011cb887524048acb8796b130761617d195",
    "files": [
        {
            "sha": "0a3c6bff0243918c9976239c98d86b507b991262",
            "filename": "docs/topics/security.txt",
            "status": "modified",
            "additions": 26,
            "deletions": 6,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/257c4011cb887524048acb8796b130761617d195/docs%2Ftopics%2Fsecurity.txt",
            "raw_url": "https://github.com/django/django/raw/257c4011cb887524048acb8796b130761617d195/docs%2Ftopics%2Fsecurity.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fsecurity.txt?ref=257c4011cb887524048acb8796b130761617d195",
            "patch": "@@ -76,9 +76,17 @@ POST to your Web site and have another logged in user unwittingly submit that\n form. The malicious user would have to know the nonce, which is user specific\n (using a cookie).\n \n+When deployed with :ref:`HTTPS <security-recommendation-ssl>`, \n+``CsrfViewMiddleware`` will check that the HTTP referer header is set to a \n+URL on the same origin (including subdomain and port). Because HTTPS\n+provides additional security, it is imperative to ensure connections use HTTPS\n+where it is available by forwarding insecure connection requests and using\n+HSTS for supported browsers.\n+\n Be very careful with marking views with the ``csrf_exempt`` decorator unless\n it is absolutely necessary.\n \n+\n SQL injection protection\n ========================\n \n@@ -112,6 +120,8 @@ The middleware is strongly recommended for any site that does not need to have\n its pages wrapped in a frame by third party sites, or only needs to allow that\n for a small section of the site.\n \n+.. _security-recommendation-ssl:\n+\n SSL/HTTPS\n =========\n \n@@ -147,7 +157,15 @@ server, there are some additional steps you may need:\n   any POST data being accepted over HTTP (which will be fine if you are\n   redirecting all HTTP traffic to HTTPS).\n \n-.. _additional-security-topics:\n+* Use HTTP Strict Transport Security (HSTS)\n+\n+  HSTS is an HTTP header that informs a browser that all future connections\n+  to a particular site should always use HTTPS. Combined with redirecting\n+  requests over HTTP to HTTPS, this will ensure that connections always enjoy\n+  the added security of SSL provided one successful connection has occurred.\n+  HSTS is usually configured on the web server.\n+\n+.. _host-headers-virtual-hosting:\n \n Host headers and virtual hosting\n ================================\n@@ -158,15 +176,17 @@ Site Scripting attacks, they can be used for Cross-Site Request\n Forgery and cache poisoning attacks in some circumstances. We\n recommend you ensure your Web server is configured such that:\n \n-    * It always validates incoming HTTP ``Host`` headers against the expected\n-      host name.\n-    * Disallows requests with no ``Host`` header.\n-    * Is *not* configured with a catch-all virtual host that forwards requests\n-      to a Django application.\n+* It always validates incoming HTTP ``Host`` headers against the expected\n+  host name.\n+* Disallows requests with no ``Host`` header.\n+* Is *not* configured with a catch-all virtual host that forwards requests\n+  to a Django application.\n \n Additionally, as of 1.3.1, Django requires you to explicitly enable support for\n the ``X-Forwarded-Host`` header if your configuration requires it.\n \n+.. _additional-security-topics:\n+\n Additional security topics\n ==========================\n "
        }
    ],
    "stats": {
        "total": 32,
        "additions": 26,
        "deletions": 6
    }
}