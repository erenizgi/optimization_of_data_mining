{
    "author": "jezdez",
    "message": "Fixed #14695 -- Stopped model fields from incorrectly overwriting the field name during model initialization if it was already passed as a keyword argument. Thanks, erikrose and willhardy.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16614 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "1abafe696e44522e8d71c11a53501aeb70a75d38",
    "files": [
        {
            "sha": "b9cc64ce3a69f5a026eff7602207738481d34bff",
            "filename": "django/db/models/fields/__init__.py",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/1abafe696e44522e8d71c11a53501aeb70a75d38/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/1abafe696e44522e8d71c11a53501aeb70a75d38/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2F__init__.py?ref=1abafe696e44522e8d71c11a53501aeb70a75d38",
            "patch": "@@ -220,15 +220,16 @@ def db_type(self, connection):\n         except KeyError:\n             return None\n \n+    @property\n     def unique(self):\n         return self._unique or self.primary_key\n-    unique = property(unique)\n \n     def set_attributes_from_name(self, name):\n-        self.name = name\n+        if not self.name:\n+            self.name = name\n         self.attname, self.column = self.get_attname_column()\n-        if self.verbose_name is None and name:\n-            self.verbose_name = name.replace('_', ' ')\n+        if self.verbose_name is None and self.name:\n+            self.verbose_name = self.name.replace('_', ' ')\n \n     def contribute_to_class(self, cls, name):\n         self.set_attributes_from_name(name)"
        },
        {
            "sha": "8adf7b655be894325d02eba779c4d1cf2445d08d",
            "filename": "tests/regressiontests/model_fields/models.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/1abafe696e44522e8d71c11a53501aeb70a75d38/tests%2Fregressiontests%2Fmodel_fields%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/1abafe696e44522e8d71c11a53501aeb70a75d38/tests%2Fregressiontests%2Fmodel_fields%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_fields%2Fmodels.py?ref=1abafe696e44522e8d71c11a53501aeb70a75d38",
            "patch": "@@ -66,6 +66,9 @@ class BooleanModel(models.Model):\n     bfield = models.BooleanField()\n     string = models.CharField(max_length=10, default='abc')\n \n+class RenamedField(models.Model):\n+    modelname = models.IntegerField(name=\"fieldname\", choices=((1,'One'),))\n+\n ###############################################################################\n # FileField\n "
        },
        {
            "sha": "faa74cc05b188b12bbb8777b90ed27bf1773402e",
            "filename": "tests/regressiontests/model_fields/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/1abafe696e44522e8d71c11a53501aeb70a75d38/tests%2Fregressiontests%2Fmodel_fields%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/1abafe696e44522e8d71c11a53501aeb70a75d38/tests%2Fregressiontests%2Fmodel_fields%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_fields%2Ftests.py?ref=1abafe696e44522e8d71c11a53501aeb70a75d38",
            "patch": "@@ -8,7 +8,7 @@\n from django.db.models.fields.files import FieldFile\n from django.utils import unittest\n \n-from models import Foo, Bar, Whiz, BigD, BigS, Image, BigInt, Post, NullBooleanModel, BooleanModel, Document\n+from models import Foo, Bar, Whiz, BigD, BigS, Image, BigInt, Post, NullBooleanModel, BooleanModel, Document, RenamedField\n \n # If PIL available, do these tests.\n if Image:\n@@ -53,6 +53,15 @@ def test_field_repr(self):\n         f = models.fields.CharField()\n         self.assertEqual(repr(f), '<django.db.models.fields.CharField>')\n \n+    def test_field_name(self):\n+        \"\"\"\n+        Regression test for #14695: explicitly defined field name overwritten\n+        by model's attribute name.\n+        \"\"\"\n+        instance = RenamedField()\n+        self.assertTrue(hasattr(instance, 'get_fieldname_display'))\n+        self.assertFalse(hasattr(instance, 'get_modelname_display'))\n+\n class DecimalFieldTests(test.TestCase):\n     def test_to_python(self):\n         f = models.DecimalField(max_digits=4, decimal_places=2)"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 18,
        "deletions": 5
    }
}