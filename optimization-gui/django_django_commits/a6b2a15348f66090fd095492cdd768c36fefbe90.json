{
    "author": "claudep",
    "message": "Removed deprecated gender check in cz localflavor. Refs #14593.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17939 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "a6b2a15348f66090fd095492cdd768c36fefbe90",
    "files": [
        {
            "sha": "f3676b230b058d8e464ba7cddbd112d3a8a9fc5a",
            "filename": "django/contrib/localflavor/cz/forms.py",
            "status": "modified",
            "additions": 4,
            "deletions": 17,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/a6b2a15348f66090fd095492cdd768c36fefbe90/django%2Fcontrib%2Flocalflavor%2Fcz%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/a6b2a15348f66090fd095492cdd768c36fefbe90/django%2Fcontrib%2Flocalflavor%2Fcz%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fcz%2Fforms.py?ref=a6b2a15348f66090fd095492cdd768c36fefbe90",
            "patch": "@@ -50,7 +50,6 @@ class CZBirthNumberField(Field):\n     \"\"\"\n     default_error_messages = {\n         'invalid_format': _(u'Enter a birth number in the format XXXXXX/XXXX or XXXXXXXXXX.'),\n-        'invalid_gender': _(u'Invalid optional parameter Gender, valid values are \\'f\\' and \\'m\\''),\n         'invalid': _(u'Enter a valid birth number.'),\n     }\n \n@@ -73,22 +72,10 @@ def clean(self, value, gender=None):\n         # Birth number is in format YYMMDD. Females have month value raised by 50.\n         # In case that all possible number are already used (for given date),\n         # the month field is raised by 20.\n-        if gender is not None:\n-            import warnings\n-            warnings.warn(\n-                \"Support for validating the gender of a CZ Birth number has been deprecated.\",\n-                DeprecationWarning)\n-            if gender == 'f':\n-                female_const = 50\n-            elif gender == 'm':\n-                female_const = 0\n-            else:\n-                raise ValidationError(self.error_messages['invalid_gender'])\n-\n-            month = int(birth[2:4]) - female_const\n-            if (not 1 <= month <= 12):\n-                if (not 1 <= (month - 20) <= 12):\n-                    raise ValidationError(self.error_messages['invalid'])\n+        month = int(birth[2:4])\n+        if (not 1 <= month <= 12) and (not 21 <= month <= 32) and \\\n+                (not 51 <= month <= 62) and (not 71 <= month <= 82):\n+            raise ValidationError(self.error_messages['invalid'])\n \n         day = int(birth[4:6])\n         if not (1 <= day <= 31):"
        },
        {
            "sha": "b8b46b34bbc632fb1f2ea8f5bd87689b4d567916",
            "filename": "tests/regressiontests/localflavor/cz/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 27,
            "changes": 27,
            "blob_url": "https://github.com/django/django/blob/a6b2a15348f66090fd095492cdd768c36fefbe90/tests%2Fregressiontests%2Flocalflavor%2Fcz%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/a6b2a15348f66090fd095492cdd768c36fefbe90/tests%2Fregressiontests%2Flocalflavor%2Fcz%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Fcz%2Ftests.py?ref=a6b2a15348f66090fd095492cdd768c36fefbe90",
            "patch": "@@ -1,5 +1,3 @@\n-import warnings\n-\n from django.contrib.localflavor.cz.forms import (CZPostalCodeField,\n     CZRegionSelect, CZBirthNumberField, CZICNumberField)\n \n@@ -8,17 +6,6 @@\n \n \n class CZLocalFlavorTests(SimpleTestCase):\n-    def setUp(self):\n-        self.save_warnings_state()\n-        warnings.filterwarnings(\n-            \"ignore\",\n-            category=DeprecationWarning,\n-            module='django.contrib.localflavor.cz.forms'\n-        )\n-\n-    def tearDown(self):\n-        self.restore_warnings_state()\n-\n     def test_CZRegionSelect(self):\n         f = CZRegionSelect()\n         out = u'''<select name=\"regions\">\n@@ -75,20 +62,6 @@ def test_CZBirthNumberField(self):\n         }\n         self.assertFieldOutput(CZBirthNumberField, valid, invalid)\n \n-        # These tests should go away in 1.4.\n-        # http://code.djangoproject.com/ticket/14593\n-        f = CZBirthNumberField()\n-        self.assertEqual(f.clean('880523/1237', 'm'), '880523/1237'),\n-        self.assertEqual(f.clean('885523/1231', 'f'), '885523/1231')\n-        self.assertRaisesRegexp(ValidationError, unicode(error_invalid),\n-            f.clean, '881523/0000', 'm')\n-        self.assertRaisesRegexp(ValidationError, unicode(error_invalid),\n-            f.clean, '885223/0000', 'm')\n-        self.assertRaisesRegexp(ValidationError, unicode(error_invalid),\n-            f.clean, '881523/0000', 'f')\n-        self.assertRaisesRegexp(ValidationError, unicode(error_invalid),\n-            f.clean, '885223/0000', 'f')\n-\n     def test_CZICNumberField(self):\n         error_invalid = [u'Enter a valid IC number.']\n         valid ={"
        }
    ],
    "stats": {
        "total": 48,
        "additions": 4,
        "deletions": 44
    }
}