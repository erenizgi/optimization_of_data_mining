{
    "author": "jphalip",
    "message": "Fixed #17064 -- Improved the UX for the admin's time and date picker widgets by brushing up the 'Cancel' button's visual feedback and by allowing the popups to get closed by pressing the 'Escape' key.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17021 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "dca81ad58a21ca9621a131c787544176618c27e8",
    "files": [
        {
            "sha": "2989f2f4fd7d912176063a53250ae947e4a1f06d",
            "filename": "django/contrib/admin/static/admin/css/widgets.css",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/dca81ad58a21ca9621a131c787544176618c27e8/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fcss%2Fwidgets.css",
            "raw_url": "https://github.com/django/django/raw/dca81ad58a21ca9621a131c787544176618c27e8/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fcss%2Fwidgets.css",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fcss%2Fwidgets.css?ref=dca81ad58a21ca9621a131c787544176618c27e8",
            "patch": "@@ -379,15 +379,19 @@ span.clearable-file-input label {\n \n .calendar-cancel {\n     margin: 0 !important;\n-    padding: 0;\n+    padding: 0 !important;\n     font-size: 10px;\n     background: #e1e1e1 url(../img/nav-bg.gif) 0 50% repeat-x;\n     border-top: 1px solid #ddd;\n }\n \n+.calendar-cancel:hover {\n+    background: #e1e1e1 url(../img/nav-bg-reverse.gif) 0 50% repeat-x;\n+}\n+\n .calendar-cancel a {\n-    padding: 2px;\n-    color: #999;\n+    color: black;\n+    display: block;\n }\n \n ul.timelist, .timelist li {"
        },
        {
            "sha": "3ecc06f098d0c1d60a9d4bfac5ac6d305166beb7",
            "filename": "django/contrib/admin/static/admin/js/admin/DateTimeShortcuts.js",
            "status": "modified",
            "additions": 17,
            "deletions": 3,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/dca81ad58a21ca9621a131c787544176618c27e8/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fadmin%2FDateTimeShortcuts.js",
            "raw_url": "https://github.com/django/django/raw/dca81ad58a21ca9621a131c787544176618c27e8/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fadmin%2FDateTimeShortcuts.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fadmin%2FDateTimeShortcuts.js?ref=dca81ad58a21ca9621a131c787544176618c27e8",
            "patch": "@@ -79,17 +79,24 @@ var DateTimeShortcuts = {\n         addEvent(clock_box, 'click', DateTimeShortcuts.cancelEventPropagation);\n \n         quickElement('h2', clock_box, gettext('Choose a time'));\n-        time_list = quickElement('ul', clock_box, '');\n+        var time_list = quickElement('ul', clock_box, '');\n         time_list.className = 'timelist';\n-        time_format = get_format('TIME_INPUT_FORMATS')[0];\n+        var time_format = get_format('TIME_INPUT_FORMATS')[0];\n         quickElement(\"a\", quickElement(\"li\", time_list, \"\"), gettext(\"Now\"), \"href\", \"javascript:DateTimeShortcuts.handleClockQuicklink(\" + num + \", new Date().strftime('\" + time_format + \"'));\");\n         quickElement(\"a\", quickElement(\"li\", time_list, \"\"), gettext(\"Midnight\"), \"href\", \"javascript:DateTimeShortcuts.handleClockQuicklink(\" + num + \", new Date(1970,1,1,0,0,0,0).strftime('\" + time_format + \"'));\");\n         quickElement(\"a\", quickElement(\"li\", time_list, \"\"), gettext(\"6 a.m.\"), \"href\", \"javascript:DateTimeShortcuts.handleClockQuicklink(\" + num + \", new Date(1970,1,1,6,0,0,0).strftime('\" + time_format + \"'));\");\n         quickElement(\"a\", quickElement(\"li\", time_list, \"\"), gettext(\"Noon\"), \"href\", \"javascript:DateTimeShortcuts.handleClockQuicklink(\" + num + \", new Date(1970,1,1,12,0,0,0).strftime('\" + time_format + \"'));\");\n \n-        cancel_p = quickElement('p', clock_box, '');\n+        var cancel_p = quickElement('p', clock_box, '');\n         cancel_p.className = 'calendar-cancel';\n         quickElement('a', cancel_p, gettext('Cancel'), 'href', 'javascript:DateTimeShortcuts.dismissClock(' + num + ');');\n+        django.jQuery(document).bind('keyup', function(event) {\n+            if (event.which == 27) {\n+                // ESC key closes popup\n+                DateTimeShortcuts.dismissClock(num);\n+                event.preventDefault();\n+            }\n+        });\n     },\n     openClock: function(num) {\n         var clock_box = document.getElementById(DateTimeShortcuts.clockDivName+num)\n@@ -195,6 +202,13 @@ var DateTimeShortcuts = {\n         var cancel_p = quickElement('p', cal_box, '');\n         cancel_p.className = 'calendar-cancel';\n         quickElement('a', cancel_p, gettext('Cancel'), 'href', 'javascript:DateTimeShortcuts.dismissCalendar(' + num + ');');\n+        django.jQuery(document).bind('keyup', function(event) {\n+            if (event.which == 27) {\n+                // ESC key closes popup\n+                DateTimeShortcuts.dismissCalendar(num);\n+                event.preventDefault();\n+            }\n+        });\n     },\n     openCalendar: function(num) {\n         var cal_box = document.getElementById(DateTimeShortcuts.calendarDivName1+num)"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 24,
        "deletions": 6
    }
}