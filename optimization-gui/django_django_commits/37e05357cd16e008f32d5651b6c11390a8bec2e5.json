{
    "author": "claudep",
    "message": "Used settings config for memcached tests.\n\nBy using settings config, we take advantage of custom settings like\nKEY_PREFIX which allows for example to run tests in parallel.",
    "sha": "37e05357cd16e008f32d5651b6c11390a8bec2e5",
    "files": [
        {
            "sha": "760cef79c5ce19543ba214889de45199506a96b4",
            "filename": "tests/regressiontests/cache/tests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/37e05357cd16e008f32d5651b6c11390a8bec2e5/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/37e05357cd16e008f32d5651b6c11390a8bec2e5/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcache%2Ftests.py?ref=37e05357cd16e008f32d5651b6c11390a8bec2e5",
            "patch": "@@ -6,7 +6,9 @@\n \n import hashlib\n import os\n+import random\n import re\n+import string\n import tempfile\n import time\n import warnings\n@@ -939,18 +941,17 @@ def test_incr_decr_timeout(self):\n         for cache in settings.CACHES.values()),\n     \"memcached not available\")\n class MemcachedCacheTests(unittest.TestCase, BaseCacheTests):\n-    backend_name = 'django.core.cache.backends.memcached.MemcachedCache'\n \n     def setUp(self):\n-        for cache in settings.CACHES.values():\n+        for cache_key, cache in settings.CACHES.items():\n             if cache['BACKEND'].startswith('django.core.cache.backends.memcached.'):\n-                name = cache['LOCATION']\n                 break\n-        self.cache = get_cache(self.backend_name, LOCATION=name)\n-        self.prefix_cache = get_cache(self.backend_name, LOCATION=name, KEY_PREFIX='cacheprefix')\n-        self.v2_cache = get_cache(self.backend_name, LOCATION=name, VERSION=2)\n-        self.custom_key_cache = get_cache(self.backend_name, LOCATION=name, KEY_FUNCTION=custom_key_func)\n-        self.custom_key_cache2 = get_cache(self.backend_name, LOCATION=name, KEY_FUNCTION='regressiontests.cache.tests.custom_key_func')\n+        random_prefix = ''.join(random.choice(string.ascii_letters) for x in range(10))\n+        self.cache = get_cache(cache_key)\n+        self.prefix_cache = get_cache(cache_key, KEY_PREFIX=random_prefix)\n+        self.v2_cache = get_cache(cache_key, VERSION=2)\n+        self.custom_key_cache = get_cache(cache_key, KEY_FUNCTION=custom_key_func)\n+        self.custom_key_cache2 = get_cache(cache_key, KEY_FUNCTION='regressiontests.cache.tests.custom_key_func')\n \n     def tearDown(self):\n         self.cache.clear()"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 9,
        "deletions": 8
    }
}