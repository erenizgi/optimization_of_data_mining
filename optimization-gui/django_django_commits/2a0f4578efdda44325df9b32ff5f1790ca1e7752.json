{
    "author": "claudep",
    "message": "Fixed #17584 -- Updated create_template_postgis-debian.sh script for PostgreSQL 9.1 installs. Thanks akaihola for the initial patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17706 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "2a0f4578efdda44325df9b32ff5f1790ca1e7752",
    "files": [
        {
            "sha": "ac9641d16845d1a19a4927b8aabe1412feab5e32",
            "filename": "docs/ref/contrib/gis/create_template_postgis-debian.sh",
            "status": "modified",
            "additions": 11,
            "deletions": 5,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/2a0f4578efdda44325df9b32ff5f1790ca1e7752/docs%2Fref%2Fcontrib%2Fgis%2Fcreate_template_postgis-debian.sh",
            "raw_url": "https://github.com/django/django/raw/2a0f4578efdda44325df9b32ff5f1790ca1e7752/docs%2Fref%2Fcontrib%2Fgis%2Fcreate_template_postgis-debian.sh",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fgis%2Fcreate_template_postgis-debian.sh?ref=2a0f4578efdda44325df9b32ff5f1790ca1e7752",
            "patch": "@@ -1,5 +1,8 @@\n #!/bin/bash\n \n+GEOGRAPHY=0\n+POSTGIS_SQL=postgis.sql\n+\n # For Ubuntu 8.x and 9.x releases.\n if [ -d \"/usr/share/postgresql-8.3-postgis\" ]\n then\n@@ -11,21 +14,24 @@ fi\n if [ -d \"/usr/share/postgresql/8.4/contrib\" ]\n then\n     POSTGIS_SQL_PATH=/usr/share/postgresql/8.4/contrib\n-    POSTGIS_SQL=postgis.sql\n fi\n \n # For Ubuntu 10.10 (with PostGIS 1.5)\n if [ -d \"/usr/share/postgresql/8.4/contrib/postgis-1.5\" ]\n then\n     POSTGIS_SQL_PATH=/usr/share/postgresql/8.4/contrib/postgis-1.5\n-    POSTGIS_SQL=postgis.sql\n     GEOGRAPHY=1\n-else\n-    GEOGRAPHY=0\n+fi\n+\n+# For Ubuntu 11.10 / Linux Mint 12 (with PostGIS 1.5)\n+if [ -d \"/usr/share/postgresql/9.1/contrib/postgis-1.5\" ]\n+then\n+    POSTGIS_SQL_PATH=/usr/share/postgresql/9.1/contrib/postgis-1.5\n+    GEOGRAPHY=1\n fi\n \n createdb -E UTF8 template_postgis && \\\n-createlang -d template_postgis plpgsql && \\\n+( createlang -d template_postgis -l | grep plpgsql || createlang -d template_postgis plpgsql ) && \\\n psql -d postgres -c \"UPDATE pg_database SET datistemplate='true' WHERE datname='template_postgis';\" && \\\n psql -d template_postgis -f $POSTGIS_SQL_PATH/$POSTGIS_SQL && \\\n psql -d template_postgis -f $POSTGIS_SQL_PATH/spatial_ref_sys.sql && \\"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 11,
        "deletions": 5
    }
}