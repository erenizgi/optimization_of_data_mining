{
    "author": "aaugustin",
    "message": "Fixed #16656 -- Changed the urlize filter to accept more top-level domains.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17359 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "05a3ecbf9637b8873dc0eb6913a94117a90c9bc0",
    "files": [
        {
            "sha": "5e39ac918338ab8975358357394a9971c303a026",
            "filename": "django/utils/html.py",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/05a3ecbf9637b8873dc0eb6913a94117a90c9bc0/django%2Futils%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/05a3ecbf9637b8873dc0eb6913a94117a90c9bc0/django%2Futils%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhtml.py?ref=05a3ecbf9637b8873dc0eb6913a94117a90c9bc0",
            "patch": "@@ -24,7 +24,7 @@\n     ('|'.join([re.escape(x) for x in LEADING_PUNCTUATION]),\n     '|'.join([re.escape(x) for x in TRAILING_PUNCTUATION])))\n simple_url_re = re.compile(r'^https?://\\w')\n-simple_url_2_re = re.compile(r'^www\\.|^(?!http)\\w[^@]+\\.(com|net|org)$')\n+simple_url_2_re = re.compile(r'^www\\.|^(?!http)\\w[^@]+\\.(com|edu|gov|int|mil|net|org|[a-z]{2})$')\n simple_email_re = re.compile(r'^\\S+@\\S+\\.\\S+$')\n link_target_attribute_re = re.compile(r'(<a [^>]*?)target=[^\\s>]+')\n html_gunk_re = re.compile(r'(?:<br clear=\"all\">|<i><\\/i>|<b><\\/b>|<em><\\/em>|<strong><\\/strong>|<\\/?smallcaps>|<\\/?uppercase>)', re.IGNORECASE)\n@@ -127,10 +127,11 @@ def urlize(text, trim_url_limit=None, nofollow=False, autoescape=False):\n     \"\"\"\n     Converts any URLs in text into clickable links.\n \n-    Works on http://, https://, www. links and links ending in .org, .net or\n-    .com. Links can have trailing punctuation (periods, commas, close-parens)\n-    and leading punctuation (opening parens) and it'll still do the right\n-    thing.\n+    Works on http://, https://, www. links, and also on links ending in one of\n+    the original seven gTLDs (.com, .edu, .gov, .int, .mil, .net, and .org) or\n+    a two-letter ccTLD. Links can have trailing punctuation (periods, commas,\n+    close-parens) and leading punctuation (opening parens) and it'll still do\n+    the right thing.\n \n     If trim_url_limit is not None, the URLs in link text longer than this limit\n     will truncated to trim_url_limit-3 characters and appended with an elipsis."
        },
        {
            "sha": "698b3c654d38e50d2245f1fb590d1fc612ec78f9",
            "filename": "docs/ref/templates/builtins.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 6,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/05a3ecbf9637b8873dc0eb6913a94117a90c9bc0/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "raw_url": "https://github.com/django/django/raw/05a3ecbf9637b8873dc0eb6913a94117a90c9bc0/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Ftemplates%2Fbuiltins.txt?ref=05a3ecbf9637b8873dc0eb6913a94117a90c9bc0",
            "patch": "@@ -2226,13 +2226,20 @@ urlize\n \n Converts URLs in text into clickable links.\n \n-Works on links prefixed with ``http://``, ``https://``, or ``www.``. For\n-example, ``http://goo.gl/aia1t`` will get converted but ``goo.gl/aia1t``\n-won't.\n+This template tag works on several kinds of links:\n \n-Also works on domain-only links ending in one of the common ``.com``, ``.net``,\n-or ``.org`` top level domains. For example, ``djangoproject.com`` will still\n-get converted.\n+- links prefixed with ``http://``, ``https://``, or ``www.``. For example,\n+  ``http://goo.gl/aia1t`` will get converted but ``goo.gl/aia1t`` won't.\n+- domain-only links ending in one of the original top level domains\n+  (``.com``, ``.edu``, ``.gov``, ``.int``, ``.mil``, ``.net``, and\n+  ``.org``). For example, ``djangoproject.com`` also gets converted.\n+- domain-only links ending in a dot followed by two letters. This covers\n+  most country codes. For example, ``djangocon.eu`` still gets converted.\n+\n+.. versionchanged:: 1.4\n+\n+Until Django 1.4, only the ``.com``, ``.net`` and ``.org`` suffixes were\n+supported for domain-only links.\n \n Links can have trailing punctuation (periods, commas, close-parens) and leading\n punctuation (opening parens) and ``urlize`` will still do the right thing."
        },
        {
            "sha": "d79965fee17e20f8e2e8987c3e57119d8e86cb36",
            "filename": "tests/regressiontests/defaultfilters/tests.py",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/05a3ecbf9637b8873dc0eb6913a94117a90c9bc0/tests%2Fregressiontests%2Fdefaultfilters%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/05a3ecbf9637b8873dc0eb6913a94117a90c9bc0/tests%2Fregressiontests%2Fdefaultfilters%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdefaultfilters%2Ftests.py?ref=05a3ecbf9637b8873dc0eb6913a94117a90c9bc0",
            "patch": "@@ -276,6 +276,12 @@ def test_urlize(self):\n         self.assertEqual(urlize('http://@foo.com'),\n             u'http://@foo.com')\n \n+        # Check urlize accepts more TLDs - see #16656\n+        self.assertEqual(urlize('usa.gov'),\n+            u'<a href=\"http://usa.gov\" rel=\"nofollow\">usa.gov</a>')\n+        self.assertEqual(urlize('europa.eu'),\n+            u'<a href=\"http://europa.eu\" rel=\"nofollow\">europa.eu</a>')\n+\n     def test_wordcount(self):\n         self.assertEqual(wordcount(''), 0)\n         self.assertEqual(wordcount(u'oneword'), 1)"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 25,
        "deletions": 11
    }
}