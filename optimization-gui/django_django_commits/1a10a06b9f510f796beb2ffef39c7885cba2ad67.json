{
    "author": "claudep",
    "message": "Fixed #18457 -- Fixed encoding error in yaml deserializer\n\nThanks jpaugh64 for the report.",
    "sha": "1a10a06b9f510f796beb2ffef39c7885cba2ad67",
    "files": [
        {
            "sha": "e490b8607d28f6514027b6b2adb5e7cec769def2",
            "filename": "django/core/serializers/pyyaml.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/1a10a06b9f510f796beb2ffef39c7885cba2ad67/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "raw_url": "https://github.com/django/django/raw/1a10a06b9f510f796beb2ffef39c7885cba2ad67/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fpyyaml.py?ref=1a10a06b9f510f796beb2ffef39c7885cba2ad67",
            "patch": "@@ -12,6 +12,8 @@\n from django.core.serializers.base import DeserializationError\n from django.core.serializers.python import Serializer as PythonSerializer\n from django.core.serializers.python import Deserializer as PythonDeserializer\n+from django.utils.encoding import smart_str\n+\n \n class DjangoSafeDumper(yaml.SafeDumper):\n     def represent_decimal(self, data):\n@@ -48,8 +50,10 @@ def Deserializer(stream_or_string, **options):\n     \"\"\"\n     Deserialize a stream or string of YAML data.\n     \"\"\"\n-    if isinstance(stream_or_string, basestring):\n+    if isinstance(stream_or_string, bytes):\n         stream = BytesIO(stream_or_string)\n+    if isinstance(stream_or_string, unicode):\n+        stream = BytesIO(smart_str(stream_or_string))\n     else:\n         stream = stream_or_string\n     try:"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}