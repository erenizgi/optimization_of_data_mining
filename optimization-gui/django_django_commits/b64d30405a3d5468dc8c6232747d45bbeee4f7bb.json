{
    "author": "ramiro",
    "message": "Fixed #18697 -- Made values accepted for two customizable admin templates consistent.\n\nThanks and at cloverfastfood dot com for the report.",
    "sha": "b64d30405a3d5468dc8c6232747d45bbeee4f7bb",
    "files": [
        {
            "sha": "185417015ab067e1e9f1aabdc2b6b3ad9029acb7",
            "filename": "django/contrib/admin/sites.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/django%2Fcontrib%2Fadmin%2Fsites.py",
            "raw_url": "https://github.com/django/django/raw/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/django%2Fcontrib%2Fadmin%2Fsites.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fsites.py?ref=b64d30405a3d5468dc8c6232747d45bbeee4f7bb",
            "patch": "@@ -391,9 +391,9 @@ def index(self, request, extra_context=None):\n             'app_list': app_list,\n         }\n         context.update(extra_context or {})\n-        return TemplateResponse(request, [\n-            self.index_template or 'admin/index.html',\n-        ], context, current_app=self.name)\n+        return TemplateResponse(request, self.index_template or\n+                                'admin/index.html', context,\n+                                current_app=self.name)\n \n     def app_index(self, request, app_label, extra_context=None):\n         user = request.user"
        },
        {
            "sha": "d15a387a7eced275edab54c26dfa67d97b9c1a9a",
            "filename": "django/contrib/auth/admin.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/django%2Fcontrib%2Fauth%2Fadmin.py",
            "raw_url": "https://github.com/django/django/raw/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/django%2Fcontrib%2Fauth%2Fadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fadmin.py?ref=b64d30405a3d5468dc8c6232747d45bbeee4f7bb",
            "patch": "@@ -148,10 +148,10 @@ def user_change_password(self, request, id, form_url=''):\n             'save_as': False,\n             'show_save': True,\n         }\n-        return TemplateResponse(request, [\n+        return TemplateResponse(request,\n             self.change_user_password_template or\n-            'admin/auth/user/change_password.html'\n-        ], context, current_app=self.admin_site.name)\n+            'admin/auth/user/change_password.html',\n+            context, current_app=self.admin_site.name)\n \n     def response_add(self, request, obj, **kwargs):\n         \"\"\""
        },
        {
            "sha": "d69d690af0916ef593bb5b302aa7cd117a127a85",
            "filename": "tests/regressiontests/admin_views/customadmin.py",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/tests%2Fregressiontests%2Fadmin_views%2Fcustomadmin.py",
            "raw_url": "https://github.com/django/django/raw/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/tests%2Fregressiontests%2Fadmin_views%2Fcustomadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fcustomadmin.py?ref=b64d30405a3d5468dc8c6232747d45bbeee4f7bb",
            "patch": "@@ -16,7 +16,7 @@ class Admin2(admin.AdminSite):\n     login_form = forms.CustomAdminAuthenticationForm\n     login_template = 'custom_admin/login.html'\n     logout_template = 'custom_admin/logout.html'\n-    index_template = 'custom_admin/index.html'\n+    index_template = ['custom_admin/index.html'] # a list, to test fix for #18697\n     password_change_template = 'custom_admin/password_change_form.html'\n     password_change_done_template = 'custom_admin/password_change_done.html'\n \n@@ -40,6 +40,10 @@ def queryset(self, request):\n         return qs.filter(is_superuser=False)\n \n \n+class CustomPwdTemplateUserAdmin(UserAdmin):\n+    change_user_password_template = ['admin/auth/user/change_password.html'] # a list, to test fix for #18697\n+\n+\n site = Admin2(name=\"admin2\")\n \n site.register(models.Article, base_admin.ArticleAdmin)\n@@ -50,3 +54,6 @@ def queryset(self, request):\n site.register(User, UserLimitedAdmin)\n site.register(models.UndeletableObject, base_admin.UndeletableObjectAdmin)\n site.register(models.Simple, base_admin.AttributeErrorRaisingAdmin)\n+\n+simple_site = Admin2(name='admin4')\n+simple_site.register(User, CustomPwdTemplateUserAdmin)"
        },
        {
            "sha": "bbb8281fed4a42bfee58c0fb36b19a5ee25e354b",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=b64d30405a3d5468dc8c6232747d45bbeee4f7bb",
            "patch": "@@ -770,7 +770,10 @@ def testCustomAdminSiteLogoutTemplate(self):\n         self.assertContains(response, 'Hello from a custom logout template')\n \n     def testCustomAdminSiteIndexViewAndTemplate(self):\n-        response = self.client.get('/test_admin/admin2/')\n+        try:\n+            response = self.client.get('/test_admin/admin2/')\n+        except TypeError:\n+            self.fail('AdminSite.index_template should accept a list of template paths')\n         self.assertIsInstance(response, TemplateResponse)\n         self.assertTemplateUsed(response, 'custom_admin/index.html')\n         self.assertContains(response, 'Hello from a custom index template *bar*')\n@@ -792,6 +795,15 @@ def testCustomAdminSiteView(self):\n         response = self.client.get('/test_admin/%s/my_view/' % self.urlbit)\n         self.assertEqual(response.content, b\"Django is a magical pony!\")\n \n+    def test_pwd_change_custom_template(self):\n+        self.client.login(username='super', password='secret')\n+        su = User.objects.get(username='super')\n+        try:\n+            response = self.client.get('/test_admin/admin4/auth/user/%s/password/' % su.pk)\n+        except TypeError:\n+            self.fail('ModelAdmin.change_user_password_template should accept a list of template paths')\n+        self.assertEqual(response.status_code, 200)\n+\n \n def get_perm(Model, perm):\n     \"\"\"Return the permission object, for the Model\"\"\""
        },
        {
            "sha": "441834cd2a65a50ecee209cf4366df342722c55c",
            "filename": "tests/regressiontests/admin_views/urls.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/tests%2Fregressiontests%2Fadmin_views%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/b64d30405a3d5468dc8c6232747d45bbeee4f7bb/tests%2Fregressiontests%2Fadmin_views%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Furls.py?ref=b64d30405a3d5468dc8c6232747d45bbeee4f7bb",
            "patch": "@@ -11,4 +11,5 @@\n     (r'^test_admin/admin/', include(admin.site.urls)),\n     (r'^test_admin/admin2/', include(customadmin.site.urls)),\n     (r'^test_admin/admin3/', include(admin.site.urls), dict(form_url='pony')),\n+    (r'^test_admin/admin4/', include(customadmin.simple_site.urls)),\n )"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 28,
        "deletions": 8
    }
}