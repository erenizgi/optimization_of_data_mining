{
    "author": "freakboy3742",
    "message": "Fixed #13631 -- Made sure that max_length and min_length are retained as attributes on form fields. Thanks to mila for the report.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15194 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "1222bd6f6f7f74a5b885f8a69242011ba3bc5a93",
    "files": [
        {
            "sha": "4d7728f58c62b900ac10b3b0042eeebc138a9055",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/1222bd6f6f7f74a5b885f8a69242011ba3bc5a93/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/1222bd6f6f7f74a5b885f8a69242011ba3bc5a93/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=1222bd6f6f7f74a5b885f8a69242011ba3bc5a93",
            "patch": "@@ -224,6 +224,7 @@ class IntegerField(Field):\n     }\n \n     def __init__(self, max_value=None, min_value=None, *args, **kwargs):\n+        self.max_value, self.min_value = max_value, min_value\n         super(IntegerField, self).__init__(*args, **kwargs)\n \n         if max_value is not None:\n@@ -279,6 +280,7 @@ class DecimalField(Field):\n     }\n \n     def __init__(self, max_value=None, min_value=None, max_digits=None, decimal_places=None, *args, **kwargs):\n+        self.max_value, self.min_value = max_value, min_value\n         self.max_digits, self.decimal_places = max_digits, decimal_places\n         Field.__init__(self, *args, **kwargs)\n \n@@ -587,7 +589,7 @@ def to_python(self, value):\n                 url_fields[0] = 'http'\n             if not url_fields[1]:\n                 # Assume that if no domain is provided, that the path segment\n-                # contains the domain. \n+                # contains the domain.\n                 url_fields[1] = url_fields[2]\n                 url_fields[2] = ''\n                 # Rebuild the url_fields list, since the domain segment may now"
        },
        {
            "sha": "576a9c3d7bae3f0295eef86ce13980fbd6124ee5",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 38,
            "deletions": 0,
            "changes": 38,
            "blob_url": "https://github.com/django/django/blob/1222bd6f6f7f74a5b885f8a69242011ba3bc5a93/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/1222bd6f6f7f74a5b885f8a69242011ba3bc5a93/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=1222bd6f6f7f74a5b885f8a69242011ba3bc5a93",
            "patch": "@@ -69,6 +69,8 @@ def test_charfield_1(self):\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n         self.assertEqual(u'[1, 2, 3]', f.clean([1, 2, 3]))\n+        self.assertEqual(f.max_length, None)\n+        self.assertEqual(f.min_length, None)\n \n     def test_charfield_2(self):\n         f = CharField(required=False)\n@@ -77,26 +79,34 @@ def test_charfield_2(self):\n         self.assertEqual(u'', f.clean(None))\n         self.assertEqual(u'', f.clean(''))\n         self.assertEqual(u'[1, 2, 3]', f.clean([1, 2, 3]))\n+        self.assertEqual(f.max_length, None)\n+        self.assertEqual(f.min_length, None)\n \n     def test_charfield_3(self):\n         f = CharField(max_length=10, required=False)\n         self.assertEqual(u'12345', f.clean('12345'))\n         self.assertEqual(u'1234567890', f.clean('1234567890'))\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at most 10 characters (it has 11).']\", f.clean, '1234567890a')\n+        self.assertEqual(f.max_length, 10)\n+        self.assertEqual(f.min_length, None)\n \n     def test_charfield_4(self):\n         f = CharField(min_length=10, required=False)\n         self.assertEqual(u'', f.clean(''))\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at least 10 characters (it has 5).']\", f.clean, '12345')\n         self.assertEqual(u'1234567890', f.clean('1234567890'))\n         self.assertEqual(u'1234567890a', f.clean('1234567890a'))\n+        self.assertEqual(f.max_length, None)\n+        self.assertEqual(f.min_length, 10)\n \n     def test_charfield_5(self):\n         f = CharField(min_length=10, required=True)\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at least 10 characters (it has 5).']\", f.clean, '12345')\n         self.assertEqual(u'1234567890', f.clean('1234567890'))\n         self.assertEqual(u'1234567890a', f.clean('1234567890a'))\n+        self.assertEqual(f.max_length, None)\n+        self.assertEqual(f.min_length, 10)\n \n     # IntegerField ################################################################\n \n@@ -114,6 +124,8 @@ def test_integerfield_1(self):\n         self.assertEqual(1, f.clean(' 1'))\n         self.assertEqual(1, f.clean(' 1 '))\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, '1a')\n+        self.assertEqual(f.max_value, None)\n+        self.assertEqual(f.min_value, None)\n \n     def test_integerfield_2(self):\n         f = IntegerField(required=False)\n@@ -129,6 +141,8 @@ def test_integerfield_2(self):\n         self.assertEqual(1, f.clean(' 1'))\n         self.assertEqual(1, f.clean(' 1 '))\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, '1a')\n+        self.assertEqual(f.max_value, None)\n+        self.assertEqual(f.min_value, None)\n \n     def test_integerfield_3(self):\n         f = IntegerField(max_value=10)\n@@ -138,6 +152,8 @@ def test_integerfield_3(self):\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 10.']\", f.clean, 11)\n         self.assertEqual(10, f.clean('10'))\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 10.']\", f.clean, '11')\n+        self.assertEqual(f.max_value, 10)\n+        self.assertEqual(f.min_value, None)\n \n     def test_integerfield_4(self):\n         f = IntegerField(min_value=10)\n@@ -147,6 +163,8 @@ def test_integerfield_4(self):\n         self.assertEqual(11, f.clean(11))\n         self.assertEqual(10, f.clean('10'))\n         self.assertEqual(11, f.clean('11'))\n+        self.assertEqual(f.max_value, None)\n+        self.assertEqual(f.min_value, 10)\n \n     def test_integerfield_5(self):\n         f = IntegerField(min_value=10, max_value=20)\n@@ -158,6 +176,8 @@ def test_integerfield_5(self):\n         self.assertEqual(11, f.clean('11'))\n         self.assertEqual(20, f.clean(20))\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 20.']\", f.clean, 21)\n+        self.assertEqual(f.max_value, 20)\n+        self.assertEqual(f.min_value, 10)\n \n     # FloatField ##################################################################\n \n@@ -176,19 +196,25 @@ def test_floatfield_1(self):\n         self.assertEqual(1.0, f.clean(' 1.0'))\n         self.assertEqual(1.0, f.clean(' 1.0 '))\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '1.0a')\n+        self.assertEqual(f.max_value, None)\n+        self.assertEqual(f.min_value, None)\n \n     def test_floatfield_2(self):\n         f = FloatField(required=False)\n         self.assertEqual(None, f.clean(''))\n         self.assertEqual(None, f.clean(None))\n         self.assertEqual(1.0, f.clean('1'))\n+        self.assertEqual(f.max_value, None)\n+        self.assertEqual(f.min_value, None)\n \n     def test_floatfield_3(self):\n         f = FloatField(max_value=1.5, min_value=0.5)\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 1.5.']\", f.clean, '1.6')\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 0.5.']\", f.clean, '0.4')\n         self.assertEqual(1.5, f.clean('1.5'))\n         self.assertEqual(0.5, f.clean('0.5'))\n+        self.assertEqual(f.max_value, 1.5)\n+        self.assertEqual(f.min_value, 0.5)\n \n     # DecimalField ################################################################\n \n@@ -222,12 +248,20 @@ def test_decimalfield_1(self):\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 2 decimal places.']\", f.clean, '-000.123')\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 4 digits in total.']\", f.clean, '-000.12345')\n         self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '--0.12')\n+        self.assertEqual(f.max_digits, 4)\n+        self.assertEqual(f.decimal_places, 2)\n+        self.assertEqual(f.max_value, None)\n+        self.assertEqual(f.min_value, None)\n \n     def test_decimalfield_2(self):\n         f = DecimalField(max_digits=4, decimal_places=2, required=False)\n         self.assertEqual(None, f.clean(''))\n         self.assertEqual(None, f.clean(None))\n         self.assertEqual(f.clean('1'), Decimal(\"1\"))\n+        self.assertEqual(f.max_digits, 4)\n+        self.assertEqual(f.decimal_places, 2)\n+        self.assertEqual(f.max_value, None)\n+        self.assertEqual(f.min_value, None)\n \n     def test_decimalfield_3(self):\n         f = DecimalField(max_digits=4, decimal_places=2, max_value=Decimal('1.5'), min_value=Decimal('0.5'))\n@@ -237,6 +271,10 @@ def test_decimalfield_3(self):\n         self.assertEqual(f.clean('0.5'), Decimal(\"0.5\"))\n         self.assertEqual(f.clean('.5'), Decimal(\"0.5\"))\n         self.assertEqual(f.clean('00.50'), Decimal(\"0.50\"))\n+        self.assertEqual(f.max_digits, 4)\n+        self.assertEqual(f.decimal_places, 2)\n+        self.assertEqual(f.max_value, Decimal('1.5'))\n+        self.assertEqual(f.min_value, Decimal('0.5'))\n \n     def test_decimalfield_4(self):\n         f = DecimalField(decimal_places=2)"
        }
    ],
    "stats": {
        "total": 42,
        "additions": 41,
        "deletions": 1
    }
}