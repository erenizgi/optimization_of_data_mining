{
    "author": "alex",
    "message": "Converted Belerusian localflavor tests to use the new, less verbose format.  Thanks to Idan Gazit for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14932 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "b035759199cce68164402e2dc1bc2b72de6aca2d",
    "files": [
        {
            "sha": "c68bc7d6d7f1bf5e913ea4fa4ecc1d10fca51681",
            "filename": "tests/regressiontests/forms/localflavor/be.py",
            "status": "modified",
            "additions": 72,
            "deletions": 87,
            "changes": 159,
            "blob_url": "https://github.com/django/django/blob/b035759199cce68164402e2dc1bc2b72de6aca2d/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fbe.py",
            "raw_url": "https://github.com/django/django/raw/b035759199cce68164402e2dc1bc2b72de6aca2d/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fbe.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fbe.py?ref=b035759199cce68164402e2dc1bc2b72de6aca2d",
            "patch": "@@ -1,94 +1,79 @@\n-from django.test import TestCase\n-from django.forms import *\n-\n from django.contrib.localflavor.be.forms import (BEPostalCodeField,\n     BEPhoneNumberField, BERegionSelect, BEProvinceSelect)\n \n-class BELocalFlavorTests(TestCase):\n-    \"\"\"\n-    Test case to validate BE localflavor\n-    \"\"\"\n-    def assertRaisesErrorWithMessage(self, error, message, callable, *args, **kwargs):\n-        self.assertRaises(error, callable, *args, **kwargs)\n-        try:\n-            callable(*args, **kwargs)\n-        except error, e:\n-            self.assertEqual(message, str(e))\n+from utils import LocalFlavorTestCase\n+\n \n-    def test_postal_code_field(self):\n-        f = BEPostalCodeField()\n-        self.assertEqual(u'1451', f.clean('1451'))\n-        self.assertEqual(u'2540', f.clean('2540'))\n-        err_message = \"[u'Enter a valid postal code in the range and format 1XXX - 9XXX.']\"\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '0287')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '14309')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '873')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '35 74')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '859A')\n-        err_message = \"[u'This field is required.']\"\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '')\n-        f = BEPostalCodeField(required=False)\n-        self.assertEqual(u'1451', f.clean('1451'))\n-        self.assertEqual(u'2540', f.clean('2540'))\n-        self.assertEqual(u'', f.clean(''))\n-        err_message = \"[u'Enter a valid postal code in the range and format 1XXX - 9XXX.']\"\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '0287')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '14309')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '873')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '35 74')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '859A')\n+class BELocalFlavorTests(LocalFlavorTestCase):\n+    def test_BEPostalCodeField(self):\n+        error_format = [u'Enter a valid postal code in the range and format 1XXX - 9XXX.']\n+        valid = {\n+            u'1451': '1451',\n+            u'2540': '2540',\n+        }\n+        invalid = {\n+            '0287': error_format,\n+            '14309': error_format,\n+            '873': error_format,\n+            '35 74': error_format,\n+            '859A': error_format,\n+        }\n+        self.assertFieldOutput(BEPostalCodeField, valid, invalid)\n \n-    def test_phone_number_field(self):\n-        f = BEPhoneNumberField()\n-        self.assertEqual(u'01 234 56 78', f.clean('01 234 56 78'))\n-        self.assertEqual(u'01/234.56.78', f.clean('01/234.56.78'))\n-        self.assertEqual(u'01.234.56.78', f.clean('01.234.56.78'))\n-        self.assertEqual(u'012 34 56 78', f.clean('012 34 56 78'))\n-        self.assertEqual(u'012/34.56.78', f.clean('012/34.56.78'))\n-        self.assertEqual(u'012.34.56.78', f.clean('012.34.56.78'))\n-        self.assertEqual(u'0412 34 56 78', f.clean('0412 34 56 78'))\n-        self.assertEqual(u'0412/34.56.78', f.clean('0412/34.56.78'))\n-        self.assertEqual(u'0412.34.56.78', f.clean('0412.34.56.78'))\n-        self.assertEqual(u'012345678', f.clean('012345678'))\n-        self.assertEqual(u'0412345678', f.clean('0412345678'))\n-        err_message = \"[u'Enter a valid phone number in one of the formats 0x xxx xx xx, 0xx xx xx xx, 04xx xx xx xx, 0x/xxx.xx.xx, 0xx/xx.xx.xx, 04xx/xx.xx.xx, 0x.xxx.xx.xx, 0xx.xx.xx.xx, 04xx.xx.xx.xx, 0xxxxxxxx or 04xxxxxxxx.']\"\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '01234567')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '12/345.67.89')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012/345.678.90')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012/34.56.789')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '0123/45.67.89')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012/345 678 90')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012/34 56 789')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012.34 56 789')\n-        err_message = \"[u'This field is required.']\"\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '')\n-        f = BEPhoneNumberField(required=False)\n-        self.assertEqual(u'01 234 56 78', f.clean('01 234 56 78'))\n-        self.assertEqual(u'01/234.56.78', f.clean('01/234.56.78'))\n-        self.assertEqual(u'01.234.56.78', f.clean('01.234.56.78'))\n-        self.assertEqual(u'012 34 56 78', f.clean('012 34 56 78'))\n-        self.assertEqual(u'012/34.56.78', f.clean('012/34.56.78'))\n-        self.assertEqual(u'012.34.56.78', f.clean('012.34.56.78'))\n-        self.assertEqual(u'0412 34 56 78', f.clean('0412 34 56 78'))\n-        self.assertEqual(u'0412/34.56.78', f.clean('0412/34.56.78'))\n-        self.assertEqual(u'0412.34.56.78', f.clean('0412.34.56.78'))\n-        self.assertEqual(u'012345678', f.clean('012345678'))\n-        self.assertEqual(u'0412345678', f.clean('0412345678'))\n-        self.assertEqual(u'', f.clean(''))\n-        err_message = \"[u'Enter a valid phone number in one of the formats 0x xxx xx xx, 0xx xx xx xx, 04xx xx xx xx, 0x/xxx.xx.xx, 0xx/xx.xx.xx, 04xx/xx.xx.xx, 0x.xxx.xx.xx, 0xx.xx.xx.xx, 04xx.xx.xx.xx, 0xxxxxxxx or 04xxxxxxxx.']\"\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '01234567')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '12/345.67.89')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012/345.678.90')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012/34.56.789')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '0123/45.67.89')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012/345 678 90')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012/34 56 789')\n-        self.assertRaisesErrorWithMessage(ValidationError, err_message, f.clean, '012.34 56 789')\n+    def test_BEPhoneNumberField(self):\n+        error_format = [\n+            ('Enter a valid phone number in one of the formats 0x xxx xx xx, '\n+                '0xx xx xx xx, 04xx xx xx xx, 0x/xxx.xx.xx, 0xx/xx.xx.xx, '\n+                '04xx/xx.xx.xx, 0x.xxx.xx.xx, 0xx.xx.xx.xx, 04xx.xx.xx.xx, '\n+                '0xxxxxxxx or 04xxxxxxxx.')\n+        ]\n+        valid = {\n+            u'01 234 56 78': '01 234 56 78',\n+            u'01/234.56.78': '01/234.56.78',\n+            u'01.234.56.78': '01.234.56.78',\n+            u'012 34 56 78': '012 34 56 78',\n+            u'012/34.56.78': '012/34.56.78',\n+            u'012.34.56.78': '012.34.56.78',\n+            u'0412 34 56 78': '0412 34 56 78',\n+            u'0412/34.56.78': '0412/34.56.78',\n+            u'0412.34.56.78': '0412.34.56.78',\n+            u'012345678': '012345678',\n+            u'0412345678': '0412345678',\n+        }\n+        invalid = {\n+            '01234567': error_format,\n+            '12/345.67.89': error_format,\n+            '012/345.678.90': error_format,\n+            '012/34.56.789': error_format,\n+            '0123/45.67.89': error_format,\n+            '012/345 678 90': error_format,\n+            '012/34 56 789': error_format,\n+            '012.34 56 789': error_format,\n+        }\n+        self.assertFieldOutput(BEPhoneNumberField, valid, invalid)\n \n-    def test_region_field(self):\n-        w = BERegionSelect()\n-        self.assertEqual(u'<select name=\"regions\">\\n<option value=\"BRU\">Brussels Capital Region</option>\\n<option value=\"VLG\" selected=\"selected\">Flemish Region</option>\\n<option value=\"WAL\">Wallonia</option>\\n</select>', w.render('regions', 'VLG'))\n+    def test_BERegionSelect(self):\n+        f = BERegionSelect()\n+        out = u'''<select name=\"regions\">\n+<option value=\"BRU\">Brussels Capital Region</option>\n+<option value=\"VLG\" selected=\"selected\">Flemish Region</option>\n+<option value=\"WAL\">Wallonia</option>\n+</select>'''\n+        self.assertEqual(f.render('regions', 'VLG'), out)\n \n-    def test_province_field(self):\n-        w = BEProvinceSelect()\n-        self.assertEqual(u'<select name=\"provinces\">\\n<option value=\"VAN\">Antwerp</option>\\n<option value=\"BRU\">Brussels</option>\\n<option value=\"VOV\">East Flanders</option>\\n<option value=\"VBR\">Flemish Brabant</option>\\n<option value=\"WHT\">Hainaut</option>\\n<option value=\"WLG\" selected=\"selected\">Liege</option>\\n<option value=\"VLI\">Limburg</option>\\n<option value=\"WLX\">Luxembourg</option>\\n<option value=\"WNA\">Namur</option>\\n<option value=\"WBR\">Walloon Brabant</option>\\n<option value=\"VWV\">West Flanders</option>\\n</select>', w.render('provinces', 'WLG'))\n+    def test_BEProvinceSelect(self):\n+        f = BEProvinceSelect()\n+        out = u'''<select name=\"provinces\">\n+<option value=\"VAN\">Antwerp</option>\n+<option value=\"BRU\">Brussels</option>\n+<option value=\"VOV\">East Flanders</option>\n+<option value=\"VBR\">Flemish Brabant</option>\n+<option value=\"WHT\">Hainaut</option>\n+<option value=\"WLG\" selected=\"selected\">Liege</option>\n+<option value=\"VLI\">Limburg</option>\n+<option value=\"WLX\">Luxembourg</option>\n+<option value=\"WNA\">Namur</option>\n+<option value=\"WBR\">Walloon Brabant</option>\n+<option value=\"VWV\">West Flanders</option>\n+</select>'''\n+        self.assertEqual(f.render('provinces', 'WLG'), out)"
        }
    ],
    "stats": {
        "total": 159,
        "additions": 72,
        "deletions": 87
    }
}