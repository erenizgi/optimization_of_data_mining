{
    "author": "jezdez",
    "message": "Fixed #4976 -- Stopped humanize template tags to raise a TypeError if passed a value of ``None``. Thanks, Simon G. and Adam Vandenberg.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15000 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "3cf8502d35cdfbb4f868a848b1f38dcc275f6be1",
    "files": [
        {
            "sha": "cfa93fe5346d776e78b8b73f6f97cfcf95aa55af",
            "filename": "django/contrib/humanize/templatetags/humanize.py",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/3cf8502d35cdfbb4f868a848b1f38dcc275f6be1/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "raw_url": "https://github.com/django/django/raw/3cf8502d35cdfbb4f868a848b1f38dcc275f6be1/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py?ref=3cf8502d35cdfbb4f868a848b1f38dcc275f6be1",
            "patch": "@@ -43,7 +43,10 @@ def intword(value):\n     numbers over 1 million. For example, 1000000 becomes '1.0 million', 1200000\n     becomes '1.2 million' and '1200000000' becomes '1.2 billion'.\n     \"\"\"\n-    value = int(value)\n+    try:\n+        value = int(value)\n+    except (TypeError, ValueError):\n+        return value\n     if value < 1000000:\n         return value\n     if value < 1000000000:\n@@ -66,7 +69,7 @@ def apnumber(value):\n     \"\"\"\n     try:\n         value = int(value)\n-    except ValueError:\n+    except (TypeError, ValueError):\n         return value\n     if not 0 < value < 10:\n         return value"
        },
        {
            "sha": "8c153f6cf15768caa3b4d83849613e85910e55c8",
            "filename": "django/forms/formsets.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/3cf8502d35cdfbb4f868a848b1f38dcc275f6be1/django%2Fforms%2Fformsets.py",
            "raw_url": "https://github.com/django/django/raw/3cf8502d35cdfbb4f868a848b1f38dcc275f6be1/django%2Fforms%2Fformsets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fformsets.py?ref=3cf8502d35cdfbb4f868a848b1f38dcc275f6be1",
            "patch": "@@ -263,6 +263,7 @@ def is_valid(self):\n         # We loop over every form.errors here rather than short circuiting on the\n         # first failure to make sure validation gets triggered for every form.\n         forms_valid = True\n+        err = self.errors\n         for i in range(0, self.total_form_count()):\n             form = self.forms[i]\n             if self.can_delete:"
        },
        {
            "sha": "7eeaaee594ca9e3fa82aeb8aa92ebd4ef7da1803",
            "filename": "tests/regressiontests/humanize/tests.py",
            "status": "modified",
            "additions": 12,
            "deletions": 7,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/3cf8502d35cdfbb4f868a848b1f38dcc275f6be1/tests%2Fregressiontests%2Fhumanize%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3cf8502d35cdfbb4f868a848b1f38dcc275f6be1/tests%2Fregressiontests%2Fhumanize%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhumanize%2Ftests.py?ref=3cf8502d35cdfbb4f868a848b1f38dcc275f6be1",
            "patch": "@@ -32,24 +32,29 @@ def test_ordinal(self):\n \n     def test_intcomma(self):\n         test_list = (100, 1000, 10123, 10311, 1000000, 1234567.25,\n-                     '100', '1000', '10123', '10311', '1000000', '1234567.1234567')\n+                     '100', '1000', '10123', '10311', '1000000', '1234567.1234567',\n+                     None)\n         result_list = ('100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.25',\n-                       '100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.1234567')\n+                       '100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.1234567',\n+                     None)\n \n         self.humanize_tester(test_list, result_list, 'intcomma')\n \n     def test_intword(self):\n         test_list = ('100', '1000000', '1200000', '1290000',\n-                     '1000000000','2000000000','6000000000000')\n+                     '1000000000','2000000000','6000000000000',\n+                     None)\n         result_list = ('100', '1.0 million', '1.2 million', '1.3 million',\n-                       '1.0 billion', '2.0 billion', '6.0 trillion')\n+                       '1.0 billion', '2.0 billion', '6.0 trillion',\n+                       None)\n \n         self.humanize_tester(test_list, result_list, 'intword')\n \n     def test_apnumber(self):\n         test_list = [str(x) for x in range(1, 11)]\n+        test_list.append(None)\n         result_list = (u'one', u'two', u'three', u'four', u'five', u'six',\n-                       u'seven', u'eight', u'nine', u'10')\n+                       u'seven', u'eight', u'nine', u'10', None)\n \n         self.humanize_tester(test_list, result_list, 'apnumber')\n \n@@ -61,10 +66,10 @@ def test_naturalday(self):\n         someday = today - timedelta(days=10)\n         notdate = u\"I'm not a date value\"\n \n-        test_list = (today, yesterday, tomorrow, someday, notdate)\n+        test_list = (today, yesterday, tomorrow, someday, notdate, None)\n         someday_result = defaultfilters.date(someday)\n         result_list = (_(u'today'), _(u'yesterday'), _(u'tomorrow'),\n-                       someday_result, u\"I'm not a date value\")\n+                       someday_result, u\"I'm not a date value\", None)\n         self.humanize_tester(test_list, result_list, 'naturalday')\n \n if __name__ == '__main__':"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 18,
        "deletions": 9
    }
}