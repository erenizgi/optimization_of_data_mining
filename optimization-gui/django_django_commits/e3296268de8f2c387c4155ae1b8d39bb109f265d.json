{
    "author": "jacobian",
    "message": "Added a draft document explaining how to release Django.\n\nThanks to James for the first draft; I made a few changes (svn->git) and\nsome supporting links, but mostly I added FIXME's.",
    "sha": "e3296268de8f2c387c4155ae1b8d39bb109f265d",
    "files": [
        {
            "sha": "109583b67f624093697076c8e574e59bceffdf3a",
            "filename": "docs/internals/howto-release-django.txt",
            "status": "added",
            "additions": 280,
            "deletions": 0,
            "changes": 280,
            "blob_url": "https://github.com/django/django/blob/e3296268de8f2c387c4155ae1b8d39bb109f265d/docs%2Finternals%2Fhowto-release-django.txt",
            "raw_url": "https://github.com/django/django/raw/e3296268de8f2c387c4155ae1b8d39bb109f265d/docs%2Finternals%2Fhowto-release-django.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fhowto-release-django.txt?ref=e3296268de8f2c387c4155ae1b8d39bb109f265d",
            "patch": "@@ -0,0 +1,280 @@\n+=====================\n+How is Django Formed?\n+=====================\n+\n+This document explains how to release Django. If you're unluky enough to\n+be driving a release, you should follow these instructions to get the\n+package out.\n+\n+**Please, keep these instructions up-to-date if you make changes!** The point\n+here is to be descriptive, not proscriptive, so feel free to streamline or\n+otherwise make changes, but **update this document accordingly!**\n+\n+Overview\n+========\n+\n+There are three types of releases that you might need to make\n+\n+* Security releases, disclosing and fixing a vulnerability. This'll\n+  generally involve two or three simultaneous releases -- e.g.\n+  1.5.X, 1.6.X, and, depending on timing, perhaps a 1.7 alpha/beta/rc.\n+\n+* Regular version releases, either a final release (e.g. 1.5) or a\n+  bugfix update (e.g. 1.5.1).\n+\n+* Pre-releases, e.g. 1.6 beta or something.\n+\n+In general the steps are about the same reguardless, but there are a few\n+differences noted. The short version is:\n+\n+#. If this is a security release, pre-notify the security distribution list\n+   at least one week before the actual release.\n+\n+#. Proofread (and create if needed) the release notes, looking for\n+   organiztion, writing errors, deprecation timelines, etc. Draft a blog post\n+   and email announcement.\n+\n+#. Update version numbers and create the release package(s)!\n+\n+#. Upload the package(s) to the the ``djangoproject.com`` server and creating\n+   some redirects for download/checksum links.\n+\n+#. Unless this is a pre-release, add the new version(s) to PyPI.\n+\n+#. Update the home page and download page to link to the new version(s).\n+\n+#. Post the blog entry and send out the email announcements.\n+\n+#. Update version numbers post-release.\n+\n+There's a lot of details, so please read on.\n+\n+Prerequisites\n+=============\n+\n+You'll need a few things hooked up to make this work:\n+\n+* A GPG key. *FIXME: sort out exactly whose keys are acceptable for a\n+  release.*\n+\n+* Access to Django's record on PyPI.\n+\n+* Access to the ``djangoproject.com`` server to upload files and trigger a\n+  deploy.\n+\n+* Access to the admin on ``djangoproject.com``.\n+\n+* Access to post to ``django-announe``.\n+\n+* If this is a security release, access to the pre-notification distribution\n+  list.\n+\n+If this is your first release, you'll need to corrdinate with James and Jacob\n+to get all these things ready to go.\n+\n+Pre-release tasks\n+=================\n+\n+A few items need to be taken care of before even beginning the release process.\n+This stuff starts about a week before the release; most of it can be done\n+any time leading up to the actual release:\n+\n+#. If this is a security release, send out pre-notification **one week**\n+   before the release. We maintain a list of who gets these pre-notifcation\n+   emails at *FIXME WHERE?*. This email should be signed by the key you'll use\n+   for the release, and should include patches for each issue being fixed.\n+\n+#. As the release aproaches, watch Trac to make sure no release blockers\n+   are left for the upcoming release.\n+\n+#. Check with the other committers to make sure they don't have any\n+   un-committed changes for the release.\n+\n+#. Proofread the release notes, including looking at the online\n+   version to catch any broken links or reST errors, and make sure the\n+   release notes contain the correct date.\n+\n+#. Double-check that the release notes mention deprecation timelines\n+   for any APIs noted as deprecated, and that they mention any changes\n+   in Python version support.\n+\n+#. Double-check that the release notes index has a link to the notes\n+   for the new release; this will be in ``docs/releases/index.txt``.\n+\n+Preparing for release\n+=====================\n+\n+Next, everything needs to be made ready for actually rolling the\n+release. The following things should be done a few days to a few hours\n+before release:\n+\n+#. Update the djangoproject home page and download page templates to\n+   reflect the new release. There are two templates to change:\n+   ``flatpages/download.html`` and ``homepage.html``; here's\n+   `one example commit for the 1.4.5 / 1.3.7 releases`__\n+\n+   __ https://github.com/django/djangoproject.com/commit/772edbc6ac5a2b8e718606b3338f2bcc429fb9b6\n+\n+#. Write the announcement blog post for the release. You can enter it into\n+   the admin at any time and mark it as inactive. Here's a few examples:\n+   `example security release accouncement`__, `example regular release\n+   announcement`__, `example pre-release announcement`__.\n+\n+   __ https://www.djangoproject.com/weblog/2013/feb/19/security/\n+   __ https://www.djangoproject.com/weblog/2012/mar/23/14/\n+   __ https://www.djangoproject.com/weblog/2012/nov/27/15-beta-1/\n+\n+#. Create redirects in the admin for the new downloads. For each release,\n+   we create two redirects that look like::\n+\n+        /download/<version>/tarball/ -> /m/releases/<version>/Django-<version>.tar.gz\n+        /download/<version>/checksum/ -> /m/pgp/Django-<version>.checksum.txt\n+\n+Actually rolling the release\n+============================\n+\n+OK, this is the fun part, where we actually push out a release!\n+\n+#. Check Jenkins is green for the version(s) you're putting out. You probably\n+   shouldn't issue a release until it's green.\n+\n+#. A release always begins from a release branch, so you\n+   should ``git pull`` to make sure you're up-to-date and then\n+   ``git checkout stable/<release>`` (e.g. checkout ``stable/1.5.x`` to issue\n+   a release in the 1.5 series.)\n+\n+#. If this is a security release, merge the apropriate patches from\n+   ``django-private``. *FIXME: actual commands here - make sure to --ff-\n+   only right?*. Make sure the commit messages explain that the commit\n+   is a security fix and that an announcement will follow (`example\n+   security commit`__)\n+\n+   __ https://github.com/django/django/commit/3ef4bbf495cc6c061789132e3d50a8231a89406b\n+\n+#. Update version numbers for the release. This has to happen in three\n+   places: ``django/__init__.py``, ``docs/conf.py``, and ``setup.py``.\n+   Please see `notes on setting the VERSION tuple`_ below for details\n+   on ``VERSION``. Here's `an example commit updating version numbers`__\n+\n+   __ https://github.com/django/django/commit/18d920ea4839fb54f9d2a5dcb555b6a5666ee469\n+\n+   Make sure the ``download_url`` in ``setup.py`` is the actual URL you'll\n+   use for the new release package, not the redirect URL (some tools can't\n+   properly follow redirects).\n+\n+#. If this is a pre-release package, update the \"Development Status\" trove\n+   classifier in ``setup.py`` to reflect this. Otherwise, make sure the\n+   classifier is set to ``Development Status :: 5 - Production/Stable``.\n+\n+#. Tag the release by running ``git tag`` *FIXME actual commands*.\n+\n+#. ``git push`` your work.\n+\n+#. Make sure you have an absolutely clean tree by running ``git clean -dfx``.\n+\n+#. Run ``python setup.py sdist`` to generate the release package.\n+\n+#. Generate the MD5 and SHA1 hashes of the release package. *FIXME\n+   actual commands for doign this?*\n+\n+#. Create a \"checksums\" file containing the hashes and release information.\n+   You can start with `a previous checksums file`__ and replace the\n+   dates, keys, links, and checksums. *FIXME: make a template file.*\n+\n+   __ https://www.djangoproject.com/m/pgp/Django-1.5b1.checksum.txt\n+\n+#. Sign the checksum file using the release key (``gpg\n+   --clearsign``), then verify the signature (``gpg --verify``). *FIXME:\n+   full, actual commands here*.\n+\n+If you're issuing multiple releases, repeat these steps for each release.\n+\n+Making the release(s) available to the public\n+=============================================\n+\n+Now you're ready to actually put the release out there. To do this:\n+\n+#. Upload the release package(s) to the djangoproject server; releases go\n+   in ``/home/www/djangoproject.com/src/media/releases``, under a\n+   directory for the appropriate version number (e.g.\n+   ``/home/www/djangoproject.com/src/media/releases/1.5`` for a ``1.5.X``\n+   release.).\n+\n+#. Upload the checksum file(s); these go in\n+   ``/home/www/djangoproject.com/src/media/pgp``.\n+\n+#. Test that the release packages install correctly using ``easy_install``\n+   and ``pip``. Here's how I do it (which requires `virtualenvwrapper`__):\n+\n+        $ mktmpenv\n+        $ easy_install http://www.djangoproject.com/download/<version>/tarball/\n+        $ deactivate\n+        $ mktmpenv\n+        $ pip install http://www.djangoproject.com/download/<version>/tarball/\n+        $ deactivate\n+\n+   This just tests that the tarballs are available (i.e. redirects are up) and\n+   that they install correctly, but it'll catch silly mistakes. *XXX FIXME:\n+   buildout too?*\n+\n+   __ https://pypi.python.org/pypi/virtualenvwrapper\n+\n+#. Ask a few people on IRC to verify the checksums by visiting the chucksums\n+   file (e.g. https://www.djangoproject.com/m/pgp/Django-1.5b1.checksum.txt)\n+   and following the instructions in it.\n+\n+#. If this is a security or regular release, register the new package with\n+   PyPI by uploading the ``PGK-INFO`` file generated in the release package\n+   *FIXME: be more specific about where this is and how to upload it.*\n+   Don't do this for pre-releases.\n+\n+#. Deploy the template changes you made a while back by running `fab deploy`\n+   from the ``djangoproject.com`` repo.\n+\n+#. Update the ``/download/`` flat page in the djangoproject.com\n+   admin. For alpha/beta/RC releases, we add a temporary third section\n+   to that page listing the preview package; otherwise, just update\n+   the \"Get the latest official version\" section.\n+\n+#. Make up the blog post announcing the release live.\n+\n+#. Post the release announcement to the django-announce,\n+   django-developers and django-users mailing lists. This should\n+   include links to both the announcement blog post and the release\n+   notes. *FIXME: make some templates with example text*.\n+\n+Post-release\n+============\n+\n+You're almost done! All that's left to do now is:\n+\n+#. Update the ``VERSION`` tuple in ``django/__init__.py`` again,\n+   incrementing to whatever the next expected release will be. For\n+   example, after releasing 1.2.1, update ``VERSION`` to report \"1.2.2\n+   pre-alpha\".\n+\n+Notes on setting the VERSION tuple\n+==================================\n+\n+Django's version reporting is controlled by the ``VERSION`` tuple in\n+``django/__init__.py``. This is a five-element tuple, whose elements\n+are:\n+\n+#. Major version.\n+#. Minor version.\n+#. Micro version.\n+#. Status -- can be one of \"alpha\", \"beta\", \"rc\" or \"final\".\n+#. Series number, for alpha/beta/RC packages which run in sequence\n+   (allowing, for example, \"beta 1\", \"beta 2\", etc.).\n+\n+For a final release, the status is always \"final\" and the series\n+number is always 0. A series number of 0 with an \"alpha\" status will\n+be reported as \"pre-alpha\".\n+\n+Some examples:\n+\n+* ``(1, 2, 1, 'final', 0)`` --> \"1.2.1\"\n+\n+* ``(1, 3, 0, 'alpha', 0)`` --> \"1.3 pre-alpha\"\n+\n+* ``(1, 3, 0, 'beta', 2)`` --> \"1.3 beta 2\""
        },
        {
            "sha": "9a80a90286991e33535aa73447ed38c04b5648d9",
            "filename": "docs/internals/index.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/e3296268de8f2c387c4155ae1b8d39bb109f265d/docs%2Finternals%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/e3296268de8f2c387c4155ae1b8d39bb109f265d/docs%2Finternals%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Findex.txt?ref=e3296268de8f2c387c4155ae1b8d39bb109f265d",
            "patch": "@@ -22,3 +22,4 @@ the hood\".\n    release-process\n    deprecation\n    git\n+   howto-release-django"
        }
    ],
    "stats": {
        "total": 281,
        "additions": 281,
        "deletions": 0
    }
}