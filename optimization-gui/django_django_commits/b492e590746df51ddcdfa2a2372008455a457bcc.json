{
    "author": "aaugustin",
    "message": "Updated release instructions to account for website automation.",
    "sha": "b492e590746df51ddcdfa2a2372008455a457bcc",
    "files": [
        {
            "sha": "b6f879753af57d52280df94ea153bf2ef49b7974",
            "filename": "docs/internals/howto-release-django.txt",
            "status": "modified",
            "additions": 17,
            "deletions": 37,
            "changes": 54,
            "blob_url": "https://github.com/django/django/blob/b492e590746df51ddcdfa2a2372008455a457bcc/docs%2Finternals%2Fhowto-release-django.txt",
            "raw_url": "https://github.com/django/django/raw/b492e590746df51ddcdfa2a2372008455a457bcc/docs%2Finternals%2Fhowto-release-django.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fhowto-release-django.txt?ref=b492e590746df51ddcdfa2a2372008455a457bcc",
            "patch": "@@ -17,7 +17,7 @@ There are three types of releases that you might need to make\n \n * Security releases, disclosing and fixing a vulnerability. This'll\n   generally involve two or three simultaneous releases -- e.g.\n-  1.5.X, 1.6.X, and, depending on timing, perhaps a 1.7 alpha/beta/rc.\n+  1.5.x, 1.6.x, and, depending on timing, perhaps a 1.7 alpha/beta/rc.\n \n * Regular version releases, either a final release (e.g. 1.5) or a\n   bugfix update (e.g. 1.5.1).\n@@ -36,12 +36,11 @@ differences noted. The short version is:\n \n #. Update version numbers and create the release package(s)!\n \n-#. Upload the package(s) to the the ``djangoproject.com`` server and create\n-   some redirects for download/checksum links.\n+#. Upload the package(s) to the ``djangoproject.com`` server.\n \n #. Unless this is a pre-release, add the new version(s) to PyPI.\n \n-#. Update the home page and download page to link to the new version(s).\n+#. Declare the new version in the admin on ``djangoproject.com``.\n \n #. Post the blog entry and send out the email announcements.\n \n@@ -62,7 +61,7 @@ You'll need a few things hooked up to make this work:\n * Access to the ``djangoproject.com`` server to upload files and trigger a\n   deploy.\n \n-* Access to the admin on ``djangoproject.com``.\n+* Access to the admin on ``djangoproject.com`` as a \"Site maintainer\".\n \n * Access to post to ``django-announce``.\n \n@@ -104,31 +103,15 @@ any time leading up to the actual release:\n Preparing for release\n =====================\n \n-Next, everything needs to be made ready for actually rolling the\n-release. The following things should be done a few days to a few hours\n-before release:\n \n-#. Update the djangoproject home page and download page templates to\n-   reflect the new release. There are two templates to change:\n-   ``flatpages/download.html`` and ``homepage.html``; here's\n-   `one example commit for the 1.4.5 / 1.3.7 releases`__\n+Write the announcement blog post for the release. You can enter it into the\n+admin at any time and mark it as inactive. Here are a few examples: `example\n+security release announcement`__, `example regular release announcement`__,\n+`example pre-release announcement`__.\n \n-   __ https://github.com/django/djangoproject.com/commit/772edbc6ac5a2b8e718606b3338f2bcc429fb9b6\n-\n-#. Write the announcement blog post for the release. You can enter it into\n-   the admin at any time and mark it as inactive. Here are a few examples:\n-   `example security release announcement`__, `example regular release\n-   announcement`__, `example pre-release announcement`__.\n-\n-   __ https://www.djangoproject.com/weblog/2013/feb/19/security/\n-   __ https://www.djangoproject.com/weblog/2012/mar/23/14/\n-   __ https://www.djangoproject.com/weblog/2012/nov/27/15-beta-1/\n-\n-#. Create redirects in the admin for the new downloads. For each release,\n-   we create two redirects that look like::\n-\n-        /download/<version>/tarball/ -> /m/releases/<version>/Django-<version>.tar.gz\n-        /download/<version>/checksum/ -> /m/pgp/Django-<version>.checksum.txt\n+__ https://www.djangoproject.com/weblog/2013/feb/19/security/\n+__ https://www.djangoproject.com/weblog/2012/mar/23/14/\n+__ https://www.djangoproject.com/weblog/2012/nov/27/15-beta-1/\n \n Actually rolling the release\n ============================\n@@ -144,7 +127,6 @@ OK, this is the fun part, where we actually push out a release!\n    stable/<release>`` (e.g. checkout ``stable/1.5.x`` to issue a release in the\n    1.5 series) and then ``git pull`` to make sure you're up-to-date.\n \n-\n #. If this is a security release, merge the appropriate patches from\n    ``django-private``. Rebase these patches as necessary to make each one a\n    simple commit on the release branch rather than a merge commit. To ensure\n@@ -209,7 +191,7 @@ Now you're ready to actually put the release out there. To do this:\n #. Upload the release package(s) to the djangoproject server; releases go\n    in ``/home/www/djangoproject.com/src/media/releases``, under a\n    directory for the appropriate version number (e.g.\n-   ``/home/www/djangoproject.com/src/media/releases/1.5`` for a ``1.5.X``\n+   ``/home/www/djangoproject.com/src/media/releases/1.5`` for a ``1.5.x``\n    release.).\n \n #. Upload the checksum file(s); these go in\n@@ -245,13 +227,10 @@ Now you're ready to actually put the release out there. To do this:\n    work. *FIXME: Is there any reason to pull this file out manually rather than\n    using \"python setup.py register\"?*\n \n-#. Deploy the template changes you made a while back by running `fab deploy`\n-   from the ``djangoproject.com`` repo.\n+#. Go to the `Add release page in the admin`__, enter the new release number\n+   exactly as it appears in the name of the tarball (Django-<version>.tar.gz).\n \n-#. Update the ``/download/`` flat page in the djangoproject.com\n-   admin. For alpha/beta/RC releases, we add a temporary third section\n-   to that page listing the preview package; otherwise, just update\n-   the \"Get the latest official version\" section.\n+   __ https://www.djangoproject.com/admin/releases/release/add/\n \n #. Make the blog post announcing the release live.\n \n@@ -283,7 +262,8 @@ You're almost done! All that's left to do now is:\n    the new version's docs, and update the ``docs/fixtures/doc_releases.json``\n    JSON fixture. *FIXME: what is the purpose of maintaining this fixture?*\n \n-#. Add the release in `Trac's versions list`_.\n+#. Add the release in `Trac's versions list`_ if necessary. Not all versions\n+   are declared; take example on previous releases.\n \n .. _Trac's versions list: https://code.djangoproject.com/admin/ticket/versions\n "
        }
    ],
    "stats": {
        "total": 54,
        "additions": 17,
        "deletions": 37
    }
}