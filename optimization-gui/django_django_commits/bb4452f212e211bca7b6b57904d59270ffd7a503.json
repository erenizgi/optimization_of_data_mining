{
    "author": "claudep",
    "message": "Fixed #18019 -- Use threaded runserver only when database supports it.",
    "sha": "bb4452f212e211bca7b6b57904d59270ffd7a503",
    "files": [
        {
            "sha": "97fc8ea8e1b91befca1501560d73739e3b7c8c12",
            "filename": "django/core/management/commands/testserver.py",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/bb4452f212e211bca7b6b57904d59270ffd7a503/django%2Fcore%2Fmanagement%2Fcommands%2Ftestserver.py",
            "raw_url": "https://github.com/django/django/raw/bb4452f212e211bca7b6b57904d59270ffd7a503/django%2Fcore%2Fmanagement%2Fcommands%2Ftestserver.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Ftestserver.py?ref=bb4452f212e211bca7b6b57904d59270ffd7a503",
            "patch": "@@ -35,4 +35,11 @@ def handle(self, *fixture_labels, **options):\n         # a strange error -- it causes this handle() method to be called\n         # multiple times.\n         shutdown_message = '\\nServer stopped.\\nNote that the test database, %r, has not been deleted. You can explore it on your own.' % db_name\n-        call_command('runserver', addrport=addrport, shutdown_message=shutdown_message, use_reloader=False, use_ipv6=options['use_ipv6'])\n+        use_threading = connection.features.test_db_allows_multiple_connections\n+        call_command('runserver',\n+            addrport=addrport,\n+            shutdown_message=shutdown_message,\n+            use_reloader=False,\n+            use_ipv6=options['use_ipv6'],\n+            use_threading=use_threading\n+        )"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 8,
        "deletions": 1
    }
}