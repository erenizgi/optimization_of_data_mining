{
    "author": "ramiro",
    "message": "Fixed #14503 -- Unified multiple implementations of test cases assert* methods that verify a given exception is raised by a callable throughout the Django test suite.\n\nReplaced them with a new assertRaisesMessage method of a new SimpleTestCase, a lightweight subclass of unittest.TestCase. Both are also available for usage in user tests.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16610 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "326949e444bcdde966d2421e2fb8bd8c87c65941",
    "files": [
        {
            "sha": "a3a03e3e5d11a37c57e0e6680302a93e00389ab4",
            "filename": "django/test/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/django%2Ftest%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/django%2Ftest%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2F__init__.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -3,5 +3,6 @@\n \"\"\"\n \n from django.test.client import Client, RequestFactory\n-from django.test.testcases import TestCase, TransactionTestCase, skipIfDBFeature, skipUnlessDBFeature\n+from django.test.testcases import (TestCase, TransactionTestCase,\n+        SimpleTestCase, skipIfDBFeature, skipUnlessDBFeature)\n from django.test.utils import Approximate"
        },
        {
            "sha": "34edd15db793ebdb18281a2a3841d2d7a5edf645",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 37,
            "deletions": 22,
            "changes": 59,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -21,7 +21,7 @@\n from django.utils.encoding import smart_str\n \n __all__ = ('DocTestRunner', 'OutputChecker', 'TestCase', 'TransactionTestCase',\n-           'skipIfDBFeature', 'skipUnlessDBFeature')\n+           'SimpleTestCase', 'skipIfDBFeature', 'skipUnlessDBFeature')\n \n normalize_long_ints = lambda s: re.sub(r'(?<![\\w])(\\d+)L(?![\\w])', '\\\\1', s)\n normalize_decimals = lambda s: re.sub(r\"Decimal\\('(\\d+(\\.\\d*)?)'\\)\", lambda m: \"Decimal(\\\"%s\\\")\" % m.groups()[0], s)\n@@ -235,8 +235,43 @@ def __exit__(self, exc_type, exc_value, traceback):\n             )\n         )\n \n+class SimpleTestCase(ut2.TestCase):\n \n-class TransactionTestCase(ut2.TestCase):\n+    def save_warnings_state(self):\n+        \"\"\"\n+        Saves the state of the warnings module\n+        \"\"\"\n+        self._warnings_state = get_warnings_state()\n+\n+    def restore_warnings_state(self):\n+        \"\"\"\n+        Restores the sate of the warnings module to the state\n+        saved by save_warnings_state()\n+        \"\"\"\n+        restore_warnings_state(self._warnings_state)\n+\n+    def settings(self, **kwargs):\n+        \"\"\"\n+        A context manager that temporarily sets a setting and reverts\n+        back to the original value when exiting the context.\n+        \"\"\"\n+        return override_settings(**kwargs)\n+\n+    def assertRaisesMessage(self, expected_exception, expected_message,\n+                           callable_obj=None, *args, **kwargs):\n+        \"\"\"Asserts that the message in a raised exception matches the passe value.\n+\n+        Args:\n+            expected_exception: Exception class expected to be raised.\n+            expected_message: expected error message string value.\n+            callable_obj: Function to be called.\n+            args: Extra args.\n+            kwargs: Extra kwargs.\n+        \"\"\"\n+        return self.assertRaisesRegexp(expected_exception,\n+                re.escape(expected_message), callable_obj, *args, **kwargs)\n+\n+class TransactionTestCase(SimpleTestCase):\n     # The class we'll use for the test client self.client.\n     # Can be overridden in derived classes.\n     client_class = Client\n@@ -332,26 +367,6 @@ def _urlconf_teardown(self):\n             settings.ROOT_URLCONF = self._old_root_urlconf\n             clear_url_caches()\n \n-    def save_warnings_state(self):\n-        \"\"\"\n-        Saves the state of the warnings module\n-        \"\"\"\n-        self._warnings_state = get_warnings_state()\n-\n-    def restore_warnings_state(self):\n-        \"\"\"\n-        Restores the sate of the warnings module to the state\n-        saved by save_warnings_state()\n-        \"\"\"\n-        restore_warnings_state(self._warnings_state)\n-\n-    def settings(self, **kwargs):\n-        \"\"\"\n-        A context manager that temporarily sets a setting and reverts\n-        back to the original value when exiting the context.\n-        \"\"\"\n-        return override_settings(**kwargs)\n-\n     def assertRedirects(self, response, expected_url, status_code=302,\n                         target_status_code=200, host=None, msg_prefix=''):\n         \"\"\"Asserts that a response redirected to a specific URL, and that the"
        },
        {
            "sha": "5f55bbe41807ffb8f091f4a87037321fc1974e44",
            "filename": "docs/ref/signals.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/docs%2Fref%2Fsignals.txt",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/docs%2Fref%2Fsignals.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsignals.txt?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -480,7 +480,7 @@ setting_changed\n .. data:: django.test.signals.setting_changed\n    :module:\n \n-Sent when some :ref:`settings are overridden <overriding-setting>` with the\n+Sent when some :ref:`settings are overridden <overriding-settings>` with the\n :meth:`django.test.TestCase.setting` context manager or the\n :func:`django.test.utils.override_settings` decorator/context manager.\n "
        },
        {
            "sha": "c5a18f8680278ec7ede2a437fd39b528e06a3875",
            "filename": "docs/topics/testing.txt",
            "status": "modified",
            "additions": 57,
            "deletions": 13,
            "changes": 70,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/docs%2Ftopics%2Ftesting.txt",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/docs%2Ftopics%2Ftesting.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Ftesting.txt?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -715,7 +715,7 @@ arguments at time of construction:\n             The headers sent via ``**extra`` should follow CGI_ specification.\n             For example, emulating a different \"Host\" header as sent in the\n             HTTP request from the browser to the server should be passed\n-            as ``HTTP_HOST``. \n+            as ``HTTP_HOST``.\n \n             .. _CGI: http://www.w3.org/CGI/\n \n@@ -1101,7 +1101,7 @@ TestCase\n .. currentmodule:: django.test\n \n Normal Python unit test classes extend a base class of ``unittest.TestCase``.\n-Django provides an extension of this base class:\n+Django provides a few extensions of this base class:\n \n .. class:: TestCase()\n \n@@ -1123,6 +1123,8 @@ additions, including:\n     * Django-specific assertions for testing for things\n       like redirection and form errors.\n \n+``TestCase`` inherits from :class:`~django.test.TransactionTestCase`.\n+\n .. class:: TransactionTestCase()\n \n Django ``TestCase`` classes make use of database transaction facilities, if\n@@ -1153,6 +1155,7 @@ When running on a database that does not support rollback (e.g. MySQL with the\n MyISAM storage engine), ``TestCase`` falls back to initializing the database\n by truncating tables and reloading initial data.\n \n+``TransactionTestCase`` inherits from :class:`~django.test.SimpleTestCase`.\n \n .. note::\n     The ``TestCase`` use of rollback to un-do the effects of the test code\n@@ -1166,6 +1169,31 @@ by truncating tables and reloading initial data.\n     A better long-term fix, that allows the test to take advantage of the\n     speed benefit of ``TestCase``, is to fix the underlying test problem.\n \n+.. class:: SimpleTestCase()\n+\n+.. versionadded:: 1.4\n+\n+A very thin subclass of :class:`unittest.TestCase`, it extends it with some\n+basic functionality like:\n+\n+ * Saving and restoring the Python warning machinery state.\n+ * Checking that a callable :meth:`raises a certain exeception <TestCase.assertRaisesMessage>`.\n+\n+If you need any of the other more complex and heavyweight Django-specific\n+features like:\n+\n+ * The ability to run tests with :ref:`modified settings <overriding-settings>`\n+ * Using the :attr:`~TestCase.client` :class:`~django.test.client.Client`.\n+ * Testing or using the ORM.\n+ * Database :attr:`~TestCase.fixtures`.\n+ * Custom test-time :attr:`URL maps <TestCase.urls>`.\n+ * Test :ref:`skipping based on database backend features <skipping-tests>`.\n+ * Our specialized :ref:`assert* <assertions>` metods.\n+\n+then you should use :class:`~django.test.TransactionTestCase` or\n+:class:`~django.test.TestCase` instead.\n+\n+``SimpleTestCase`` inherits from :class:`django.utils.unittest.TestCase`.\n \n Default test client\n ~~~~~~~~~~~~~~~~~~~\n@@ -1370,7 +1398,7 @@ For example::\n This test case will flush *all* the test databases before running\n ``testIndexPageView``.\n \n-.. _overriding-setting:\n+.. _overriding-settings:\n \n Overriding settings\n ~~~~~~~~~~~~~~~~~~~\n@@ -1402,7 +1430,9 @@ this use case Django provides a standard `Python context manager`_\n This example will override the :setting:`LOGIN_URL` setting for the code\n in the ``with`` block and reset its value to the previous state afterwards.\n \n-.. function:: utils.override_settings\n+.. currentmodule:: django.test.utils\n+\n+.. function:: override_settings\n \n In case you want to override a setting for just one test method or even the\n whole TestCase class, Django provides the\n@@ -1463,9 +1493,13 @@ contents of the test email outbox at the start of each test case.\n \n For more detail on email services during tests, see `Email services`_.\n \n+.. _assertions:\n+\n Assertions\n ~~~~~~~~~~\n \n+.. currentmodule:: django.test\n+\n .. versionchanged:: 1.2\n     Addded ``msg_prefix`` argument.\n \n@@ -1474,11 +1508,19 @@ such as ``assertTrue`` and ``assertEqual``, Django's custom ``TestCase`` class\n provides a number of custom assertion methods that are useful for testing Web\n applications:\n \n-The failure messages given by the assertion methods can be customized\n-with the ``msg_prefix`` argument. This string will be prefixed to any\n-failure message generated by the assertion. This allows you to provide\n-additional details that may help you to identify the location and\n-cause of an failure in your test suite.\n+The failure messages given by most of these assertion methods can be customized\n+with the ``msg_prefix`` argument. This string will be prefixed to any failure\n+message generated by the assertion. This allows you to provide additional\n+details that may help you to identify the location and cause of an failure in\n+your test suite.\n+\n+.. method:: TestCase.assertRaisesMessage(expected_exception, expected_message, callable_obj=None, *args, **kwargs)\n+\n+    Asserts that execution of callable ``callable_obj`` raised the\n+    ``expected_exception`` exception and that such exception has an\n+    ``expected_message`` representation. Any other outcome is reported as a\n+    failure. Similar to unittest's ``assertRaisesRegexp`` with the difference\n+    that ``expected_message`` isn't a regular expression.\n \n .. method:: TestCase.assertContains(response, text, count=None, status_code=200, msg_prefix='')\n \n@@ -1626,9 +1668,13 @@ manually, assign the empty list to ``mail.outbox``::\n     # Empty the test outbox\n     mail.outbox = []\n \n+.. _skipping-tests:\n+\n Skipping tests\n --------------\n \n+.. currentmodule:: django.test\n+\n .. versionadded:: 1.3\n \n The unittest library provides the ``@skipIf`` and ``@skipUnless``\n@@ -1651,8 +1697,7 @@ features class. See :class:`~django.db.backends.BaseDatabaseFeatures`\n class for a full list of database features that can be used as a basis\n for skipping tests.\n \n-skipIfDBFeature\n-~~~~~~~~~~~~~~~\n+.. function:: skipIfDBFeature(feature_name_string)\n \n Skip the decorated test if the named database feature is supported.\n \n@@ -1665,8 +1710,7 @@ it would under MySQL with MyISAM tables)::\n         def test_transaction_behavior(self):\n             # ... conditional test code\n \n-skipUnlessDBFeature\n-~~~~~~~~~~~~~~~~~~~\n+.. function:: skipUnlessDBFeature(feature_name_string)\n \n Skip the decorated test if the named database feature is *not*\n supported."
        },
        {
            "sha": "b956121ad605269d942271393ac112ff7f70441a",
            "filename": "tests/regressiontests/admin_validation/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Fadmin_validation%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Fadmin_validation%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_validation%2Ftests.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -19,12 +19,6 @@ class InvalidFields(admin.ModelAdmin):\n     fields = ['spam']\n \n class ValidationTestCase(TestCase):\n-    def assertRaisesMessage(self, exc, msg, func, *args, **kwargs):\n-        try:\n-            func(*args, **kwargs)\n-        except Exception, e:\n-            self.assertEqual(msg, str(e))\n-            self.assertTrue(isinstance(e, exc), \"Expected %s, got %s\" % (exc, type(e)))\n \n     def test_readonly_and_editable(self):\n         class SongAdmin(admin.ModelAdmin):"
        },
        {
            "sha": "a5c4d12e907e794fb8fe097fc4c9602ab5473044",
            "filename": "tests/regressiontests/custom_columns_regress/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Fcustom_columns_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Fcustom_columns_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcustom_columns_regress%2Ftests.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -9,13 +9,6 @@ def pks(objects):\n \n class CustomColumnRegression(TestCase):\n \n-    def assertRaisesMessage(self, exc, msg, func, *args, **kwargs):\n-        try:\n-            func(*args, **kwargs)\n-        except Exception, e:\n-            self.assertEqual(msg, str(e))\n-            self.assertTrue(isinstance(e, exc), \"Expected %s, got %s\" % (exc, type(e)))\n-\n     def setUp(self):\n         self.a1 = Author.objects.create(first_name='John', last_name='Smith')\n         self.a2 = Author.objects.create(first_name='Peter', last_name='Jones')"
        },
        {
            "sha": "c50ad91e2f0e6dd3d8ee37e3ea0da7ba7fb6c22b",
            "filename": "tests/regressiontests/file_storage/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 10,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_storage%2Ftests.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -22,6 +22,7 @@\n from django.core.files.images import get_image_dimensions\n from django.core.files.storage import FileSystemStorage, get_storage_class\n from django.core.files.uploadedfile import UploadedFile\n+from django.test import SimpleTestCase\n from django.utils import unittest\n \n # Try to import PIL in either of the two ways it can end up installed.\n@@ -36,14 +37,7 @@\n         Image = None\n \n \n-class GetStorageClassTests(unittest.TestCase):\n-    def assertRaisesErrorWithMessage(self, error, message, callable,\n-        *args, **kwargs):\n-        self.assertRaises(error, callable, *args, **kwargs)\n-        try:\n-            callable(*args, **kwargs)\n-        except error, e:\n-            self.assertEqual(message, str(e))\n+class GetStorageClassTests(SimpleTestCase):\n \n     def test_get_filesystem_storage(self):\n         \"\"\"\n@@ -57,7 +51,7 @@ def test_get_invalid_storage_module(self):\n         \"\"\"\n         get_storage_class raises an error if the requested import don't exist.\n         \"\"\"\n-        self.assertRaisesErrorWithMessage(\n+        self.assertRaisesMessage(\n             ImproperlyConfigured,\n             \"NonExistingStorage isn't a storage module.\",\n             get_storage_class,\n@@ -67,7 +61,7 @@ def test_get_nonexisting_storage_class(self):\n         \"\"\"\n         get_storage_class raises an error if the requested class don't exist.\n         \"\"\"\n-        self.assertRaisesErrorWithMessage(\n+        self.assertRaisesMessage(\n             ImproperlyConfigured,\n             'Storage module \"django.core.files.storage\" does not define a '\\\n                 '\"NonExistingStorage\" class.',"
        },
        {
            "sha": "575983ba8132cdcdf436233961d6d09ba866c7fa",
            "filename": "tests/regressiontests/fixtures_regress/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffixtures_regress%2Ftests.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -393,12 +393,6 @@ def test_loaddata_raises_error_when_fixture_has_invalid_foreign_key(self):\n \n \n class NaturalKeyFixtureTests(TestCase):\n-    def assertRaisesMessage(self, exc, msg, func, *args, **kwargs):\n-        try:\n-            func(*args, **kwargs)\n-        except Exception, e:\n-            self.assertEqual(msg, str(e))\n-            self.assertTrue(isinstance(e, exc), \"Expected %s, got %s\" % (exc, type(e)))\n \n     def test_nk_deserialize(self):\n         \"\"\""
        },
        {
            "sha": "e1b7fe00c615a6769fb8bab2b0843c28d6cadf33",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 176,
            "deletions": 183,
            "changes": 359,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -33,7 +33,7 @@\n \n from django.core.files.uploadedfile import SimpleUploadedFile\n from django.forms import *\n-from django.utils.unittest import TestCase\n+from django.test import SimpleTestCase\n \n \n def fix_os_paths(x):\n@@ -69,14 +69,7 @@ def urlopen(req):\n     return decorator\n \n \n-class FieldsTests(TestCase):\n-\n-    def assertRaisesErrorWithMessage(self, error, message, callable, *args, **kwargs):\n-        self.assertRaises(error, callable, *args, **kwargs)\n-        try:\n-            callable(*args, **kwargs)\n-        except error, e:\n-            self.assertEqual(message, str(e))\n+class FieldsTests(SimpleTestCase):\n \n     def test_field_sets_widget_is_required(self):\n         self.assertTrue(Field(required=True).widget.is_required)\n@@ -88,8 +81,8 @@ def test_charfield_1(self):\n         f = CharField()\n         self.assertEqual(u'1', f.clean(1))\n         self.assertEqual(u'hello', f.clean('hello'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n         self.assertEqual(u'[1, 2, 3]', f.clean([1, 2, 3]))\n         self.assertEqual(f.max_length, None)\n         self.assertEqual(f.min_length, None)\n@@ -108,23 +101,23 @@ def test_charfield_3(self):\n         f = CharField(max_length=10, required=False)\n         self.assertEqual(u'12345', f.clean('12345'))\n         self.assertEqual(u'1234567890', f.clean('1234567890'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at most 10 characters (it has 11).']\", f.clean, '1234567890a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at most 10 characters (it has 11).']\", f.clean, '1234567890a')\n         self.assertEqual(f.max_length, 10)\n         self.assertEqual(f.min_length, None)\n \n     def test_charfield_4(self):\n         f = CharField(min_length=10, required=False)\n         self.assertEqual(u'', f.clean(''))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at least 10 characters (it has 5).']\", f.clean, '12345')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at least 10 characters (it has 5).']\", f.clean, '12345')\n         self.assertEqual(u'1234567890', f.clean('1234567890'))\n         self.assertEqual(u'1234567890a', f.clean('1234567890a'))\n         self.assertEqual(f.max_length, None)\n         self.assertEqual(f.min_length, 10)\n \n     def test_charfield_5(self):\n         f = CharField(min_length=10, required=True)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at least 10 characters (it has 5).']\", f.clean, '12345')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at least 10 characters (it has 5).']\", f.clean, '12345')\n         self.assertEqual(u'1234567890', f.clean('1234567890'))\n         self.assertEqual(u'1234567890a', f.clean('1234567890a'))\n         self.assertEqual(f.max_length, None)\n@@ -134,18 +127,18 @@ def test_charfield_5(self):\n \n     def test_integerfield_1(self):\n         f = IntegerField()\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual(1, f.clean('1'))\n         self.assertEqual(True, isinstance(f.clean('1'), int))\n         self.assertEqual(23, f.clean('23'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, 'a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, 'a')\n         self.assertEqual(42, f.clean(42))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, 3.14)\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, 3.14)\n         self.assertEqual(1, f.clean('1 '))\n         self.assertEqual(1, f.clean(' 1'))\n         self.assertEqual(1, f.clean(' 1 '))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, '1a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, '1a')\n         self.assertEqual(f.max_value, None)\n         self.assertEqual(f.min_value, None)\n \n@@ -158,29 +151,29 @@ def test_integerfield_2(self):\n         self.assertEqual(1, f.clean('1'))\n         self.assertEqual(True, isinstance(f.clean('1'), int))\n         self.assertEqual(23, f.clean('23'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, 'a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, 'a')\n         self.assertEqual(1, f.clean('1 '))\n         self.assertEqual(1, f.clean(' 1'))\n         self.assertEqual(1, f.clean(' 1 '))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, '1a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a whole number.']\", f.clean, '1a')\n         self.assertEqual(f.max_value, None)\n         self.assertEqual(f.min_value, None)\n \n     def test_integerfield_3(self):\n         f = IntegerField(max_value=10)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual(1, f.clean(1))\n         self.assertEqual(10, f.clean(10))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 10.']\", f.clean, 11)\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is less than or equal to 10.']\", f.clean, 11)\n         self.assertEqual(10, f.clean('10'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 10.']\", f.clean, '11')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is less than or equal to 10.']\", f.clean, '11')\n         self.assertEqual(f.max_value, 10)\n         self.assertEqual(f.min_value, None)\n \n     def test_integerfield_4(self):\n         f = IntegerField(min_value=10)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 10.']\", f.clean, 1)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 10.']\", f.clean, 1)\n         self.assertEqual(10, f.clean(10))\n         self.assertEqual(11, f.clean(11))\n         self.assertEqual(10, f.clean('10'))\n@@ -190,34 +183,34 @@ def test_integerfield_4(self):\n \n     def test_integerfield_5(self):\n         f = IntegerField(min_value=10, max_value=20)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 10.']\", f.clean, 1)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 10.']\", f.clean, 1)\n         self.assertEqual(10, f.clean(10))\n         self.assertEqual(11, f.clean(11))\n         self.assertEqual(10, f.clean('10'))\n         self.assertEqual(11, f.clean('11'))\n         self.assertEqual(20, f.clean(20))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 20.']\", f.clean, 21)\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is less than or equal to 20.']\", f.clean, 21)\n         self.assertEqual(f.max_value, 20)\n         self.assertEqual(f.min_value, 10)\n \n     # FloatField ##################################################################\n \n     def test_floatfield_1(self):\n         f = FloatField()\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual(1.0, f.clean('1'))\n         self.assertEqual(True, isinstance(f.clean('1'), float))\n         self.assertEqual(23.0, f.clean('23'))\n         self.assertEqual(3.1400000000000001, f.clean('3.14'))\n         self.assertEqual(3.1400000000000001, f.clean(3.14))\n         self.assertEqual(42.0, f.clean(42))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, 'a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, 'a')\n         self.assertEqual(1.0, f.clean('1.0 '))\n         self.assertEqual(1.0, f.clean(' 1.0'))\n         self.assertEqual(1.0, f.clean(' 1.0 '))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '1.0a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '1.0a')\n         self.assertEqual(f.max_value, None)\n         self.assertEqual(f.min_value, None)\n \n@@ -231,8 +224,8 @@ def test_floatfield_2(self):\n \n     def test_floatfield_3(self):\n         f = FloatField(max_value=1.5, min_value=0.5)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 1.5.']\", f.clean, '1.6')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 0.5.']\", f.clean, '0.4')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is less than or equal to 1.5.']\", f.clean, '1.6')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 0.5.']\", f.clean, '0.4')\n         self.assertEqual(1.5, f.clean('1.5'))\n         self.assertEqual(0.5, f.clean('0.5'))\n         self.assertEqual(f.max_value, 1.5)\n@@ -242,34 +235,34 @@ def test_floatfield_3(self):\n \n     def test_decimalfield_1(self):\n         f = DecimalField(max_digits=4, decimal_places=2)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual(f.clean('1'), Decimal(\"1\"))\n         self.assertEqual(True, isinstance(f.clean('1'), Decimal))\n         self.assertEqual(f.clean('23'), Decimal(\"23\"))\n         self.assertEqual(f.clean('3.14'), Decimal(\"3.14\"))\n         self.assertEqual(f.clean(3.14), Decimal(\"3.14\"))\n         self.assertEqual(f.clean(Decimal('3.14')), Decimal(\"3.14\"))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, 'NaN')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, 'Inf')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '-Inf')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, 'a')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, u'łąść')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, 'NaN')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, 'Inf')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '-Inf')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, 'a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, u'łąść')\n         self.assertEqual(f.clean('1.0 '), Decimal(\"1.0\"))\n         self.assertEqual(f.clean(' 1.0'), Decimal(\"1.0\"))\n         self.assertEqual(f.clean(' 1.0 '), Decimal(\"1.0\"))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '1.0a')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 4 digits in total.']\", f.clean, '123.45')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 2 decimal places.']\", f.clean, '1.234')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 2 digits before the decimal point.']\", f.clean, '123.4')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '1.0a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 4 digits in total.']\", f.clean, '123.45')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 2 decimal places.']\", f.clean, '1.234')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 2 digits before the decimal point.']\", f.clean, '123.4')\n         self.assertEqual(f.clean('-12.34'), Decimal(\"-12.34\"))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 4 digits in total.']\", f.clean, '-123.45')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 4 digits in total.']\", f.clean, '-123.45')\n         self.assertEqual(f.clean('-.12'), Decimal(\"-0.12\"))\n         self.assertEqual(f.clean('-00.12'), Decimal(\"-0.12\"))\n         self.assertEqual(f.clean('-000.12'), Decimal(\"-0.12\"))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 2 decimal places.']\", f.clean, '-000.123')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 4 digits in total.']\", f.clean, '-000.12345')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '--0.12')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 2 decimal places.']\", f.clean, '-000.123')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 4 digits in total.']\", f.clean, '-000.12345')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a number.']\", f.clean, '--0.12')\n         self.assertEqual(f.max_digits, 4)\n         self.assertEqual(f.decimal_places, 2)\n         self.assertEqual(f.max_value, None)\n@@ -287,8 +280,8 @@ def test_decimalfield_2(self):\n \n     def test_decimalfield_3(self):\n         f = DecimalField(max_digits=4, decimal_places=2, max_value=Decimal('1.5'), min_value=Decimal('0.5'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is less than or equal to 1.5.']\", f.clean, '1.6')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 0.5.']\", f.clean, '0.4')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is less than or equal to 1.5.']\", f.clean, '1.6')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value is greater than or equal to 0.5.']\", f.clean, '0.4')\n         self.assertEqual(f.clean('1.5'), Decimal(\"1.5\"))\n         self.assertEqual(f.clean('0.5'), Decimal(\"0.5\"))\n         self.assertEqual(f.clean('.5'), Decimal(\"0.5\"))\n@@ -300,7 +293,7 @@ def test_decimalfield_3(self):\n \n     def test_decimalfield_4(self):\n         f = DecimalField(decimal_places=2)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 2 decimal places.']\", f.clean, '0.00000001')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 2 decimal places.']\", f.clean, '0.00000001')\n \n     def test_decimalfield_5(self):\n         f = DecimalField(max_digits=3)\n@@ -310,13 +303,13 @@ def test_decimalfield_5(self):\n         self.assertEqual(f.clean('0000000.100'), Decimal(\"0.100\"))\n         # Only leading whole zeros \"collapse\" to one digit.\n         self.assertEqual(f.clean('000000.02'), Decimal('0.02'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 3 digits in total.']\", f.clean, '000000.0002')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 3 digits in total.']\", f.clean, '000000.0002')\n         self.assertEqual(f.clean('.002'), Decimal(\"0.002\"))\n \n     def test_decimalfield_6(self):\n         f = DecimalField(max_digits=2, decimal_places=2)\n         self.assertEqual(f.clean('.01'), Decimal(\".01\"))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure that there are no more than 0 digits before the decimal point.']\", f.clean, '1.1')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure that there are no more than 0 digits before the decimal point.']\", f.clean, '1.1')\n \n     # DateField ###################################################################\n \n@@ -334,10 +327,10 @@ def test_datefield_1(self):\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean('October 25, 2006'))\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean('25 October 2006'))\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean('25 October, 2006'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '2006-4-31')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '200a-10-25')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '25/10/06')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '2006-4-31')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '200a-10-25')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '25/10/06')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n \n     def test_datefield_2(self):\n         f = DateField(required=False)\n@@ -351,9 +344,9 @@ def test_datefield_3(self):\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean(datetime.date(2006, 10, 25)))\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean(datetime.datetime(2006, 10, 25, 14, 30)))\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean('2006 10 25'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '2006-10-25')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '10/25/2006')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '10/25/06')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '2006-10-25')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '10/25/2006')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '10/25/06')\n \n     def test_datefield_4(self):\n         # Test whitespace stripping behavior (#5714)\n@@ -364,7 +357,7 @@ def test_datefield_4(self):\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean(' October  25 2006 '))\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean(' October 25, 2006 '))\n         self.assertEqual(datetime.date(2006, 10, 25), f.clean(' 25 October 2006 '))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '   ')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, '   ')\n \n     # TimeField ###################################################################\n \n@@ -374,23 +367,23 @@ def test_timefield_1(self):\n         self.assertEqual(datetime.time(14, 25, 59), f.clean(datetime.time(14, 25, 59)))\n         self.assertEqual(datetime.time(14, 25), f.clean('14:25'))\n         self.assertEqual(datetime.time(14, 25, 59), f.clean('14:25:59'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, 'hello')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, '1:24 p.m.')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, 'hello')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, '1:24 p.m.')\n \n     def test_timefield_2(self):\n         f = TimeField(input_formats=['%I:%M %p'])\n         self.assertEqual(datetime.time(14, 25), f.clean(datetime.time(14, 25)))\n         self.assertEqual(datetime.time(14, 25, 59), f.clean(datetime.time(14, 25, 59)))\n         self.assertEqual(datetime.time(4, 25), f.clean('4:25 AM'))\n         self.assertEqual(datetime.time(16, 25), f.clean('4:25 PM'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, '14:30:45')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, '14:30:45')\n \n     def test_timefield_3(self):\n         f = TimeField()\n         # Test whitespace stripping behavior (#5714)\n         self.assertEqual(datetime.time(14, 25), f.clean(' 14:25 '))\n         self.assertEqual(datetime.time(14, 25, 59), f.clean(' 14:25:59 '))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, '   ')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, '   ')\n \n     # DateTimeField ###############################################################\n \n@@ -415,8 +408,8 @@ def test_datetimefield_1(self):\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('10/25/06 14:30:00'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('10/25/06 14:30'))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 0, 0), f.clean('10/25/06'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date/time.']\", f.clean, 'hello')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date/time.']\", f.clean, '2006-10-25 4:30 p.m.')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date/time.']\", f.clean, 'hello')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date/time.']\", f.clean, '2006-10-25 4:30 p.m.')\n \n     def test_datetimefield_2(self):\n         f = DateTimeField(input_formats=['%Y %m %d %I:%M %p'])\n@@ -425,7 +418,7 @@ def test_datetimefield_2(self):\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 59), f.clean(datetime.datetime(2006, 10, 25, 14, 30, 59)))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 59, 200), f.clean(datetime.datetime(2006, 10, 25, 14, 30, 59, 200)))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30), f.clean('2006 10 25 2:30 PM'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date/time.']\", f.clean, '2006-10-25 14:30:45')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date/time.']\", f.clean, '2006-10-25 14:30:45')\n \n     def test_datetimefield_3(self):\n         f = DateTimeField(required=False)\n@@ -444,73 +437,73 @@ def test_datetimefield_4(self):\n         self.assertEqual(datetime.datetime(2006, 10, 25, 0, 0), f.clean(' 10/25/2006 '))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 14, 30, 45), f.clean(' 10/25/06 14:30:45 '))\n         self.assertEqual(datetime.datetime(2006, 10, 25, 0, 0), f.clean(' 10/25/06 '))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date/time.']\", f.clean, '   ')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date/time.']\", f.clean, '   ')\n \n     # RegexField ##################################################################\n \n     def test_regexfield_1(self):\n         f = RegexField('^\\d[A-F]\\d$')\n         self.assertEqual(u'2A2', f.clean('2A2'))\n         self.assertEqual(u'3F3', f.clean('3F3'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '3G3')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, ' 2A2')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '2A2 ')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '3G3')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, ' 2A2')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '2A2 ')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n \n     def test_regexfield_2(self):\n         f = RegexField('^\\d[A-F]\\d$', required=False)\n         self.assertEqual(u'2A2', f.clean('2A2'))\n         self.assertEqual(u'3F3', f.clean('3F3'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '3G3')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '3G3')\n         self.assertEqual(u'', f.clean(''))\n \n     def test_regexfield_3(self):\n         f = RegexField(re.compile('^\\d[A-F]\\d$'))\n         self.assertEqual(u'2A2', f.clean('2A2'))\n         self.assertEqual(u'3F3', f.clean('3F3'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '3G3')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, ' 2A2')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '2A2 ')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '3G3')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, ' 2A2')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '2A2 ')\n \n     def test_regexfield_4(self):\n         f = RegexField('^\\d\\d\\d\\d$', error_message='Enter a four-digit number.')\n         self.assertEqual(u'1234', f.clean('1234'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a four-digit number.']\", f.clean, '123')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a four-digit number.']\", f.clean, 'abcd')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a four-digit number.']\", f.clean, '123')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a four-digit number.']\", f.clean, 'abcd')\n \n     def test_regexfield_5(self):\n         f = RegexField('^\\d+$', min_length=5, max_length=10)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at least 5 characters (it has 3).']\", f.clean, '123')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at least 5 characters (it has 3).', u'Enter a valid value.']\", f.clean, 'abc')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at least 5 characters (it has 3).']\", f.clean, '123')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at least 5 characters (it has 3).', u'Enter a valid value.']\", f.clean, 'abc')\n         self.assertEqual(u'12345', f.clean('12345'))\n         self.assertEqual(u'1234567890', f.clean('1234567890'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at most 10 characters (it has 11).']\", f.clean, '12345678901')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '12345a')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at most 10 characters (it has 11).']\", f.clean, '12345678901')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid value.']\", f.clean, '12345a')\n \n     # EmailField ##################################################################\n \n     def test_emailfield_1(self):\n         f = EmailField()\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual(u'person@example.com', f.clean('person@example.com'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo@')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo@bar')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@invalid-.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@-invalid.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@inv-.alid-.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@inv-.-alid.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo@')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo@bar')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@invalid-.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@-invalid.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@inv-.alid-.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@inv-.-alid.com')\n         self.assertEqual(u'example@valid-----hyphens.com', f.clean('example@valid-----hyphens.com'))\n         self.assertEqual(u'example@valid-with-hyphens.com', f.clean('example@valid-with-hyphens.com'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'example@.com')\n         self.assertEqual(u'local@domain.with.idn.xyz\\xe4\\xf6\\xfc\\xdfabc.part.com', f.clean('local@domain.with.idn.xyzäöüßabc.part.com'))\n \n     def test_email_regexp_for_performance(self):\n         f = EmailField()\n         # Check for runaway regex security problem. This will take for-freeking-ever\n         # if the security fix isn't in place.\n-        self.assertRaisesErrorWithMessage(\n+        self.assertRaisesMessage(\n                 ValidationError,\n                 \"[u'Enter a valid e-mail address.']\",\n                 f.clean,\n@@ -523,39 +516,39 @@ def test_emailfield_2(self):\n         self.assertEqual(u'', f.clean(None))\n         self.assertEqual(u'person@example.com', f.clean('person@example.com'))\n         self.assertEqual(u'example@example.com', f.clean('      example@example.com  \\t   \\t '))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo@')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo@bar')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo@')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'foo@bar')\n \n     def test_emailfield_3(self):\n         f = EmailField(min_length=10, max_length=15)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at least 10 characters (it has 9).']\", f.clean, 'a@foo.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at least 10 characters (it has 9).']\", f.clean, 'a@foo.com')\n         self.assertEqual(u'alf@foo.com', f.clean('alf@foo.com'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at most 15 characters (it has 20).']\", f.clean, 'alf123456788@foo.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at most 15 characters (it has 20).']\", f.clean, 'alf123456788@foo.com')\n \n     # FileField ##################################################################\n \n     def test_filefield_1(self):\n         f = FileField()\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '', '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '', '')\n         self.assertEqual('files/test1.pdf', f.clean('', 'files/test1.pdf'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None, '')\n         self.assertEqual('files/test2.pdf', f.clean(None, 'files/test2.pdf'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, SimpleUploadedFile('', ''))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, SimpleUploadedFile('', ''), '')\n+        self.assertRaisesMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, SimpleUploadedFile('', ''))\n+        self.assertRaisesMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, SimpleUploadedFile('', ''), '')\n         self.assertEqual('files/test3.pdf', f.clean(None, 'files/test3.pdf'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, 'some content that is not a file')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'The submitted file is empty.']\", f.clean, SimpleUploadedFile('name', None))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'The submitted file is empty.']\", f.clean, SimpleUploadedFile('name', ''))\n+        self.assertRaisesMessage(ValidationError, \"[u'No file was submitted. Check the encoding type on the form.']\", f.clean, 'some content that is not a file')\n+        self.assertRaisesMessage(ValidationError, \"[u'The submitted file is empty.']\", f.clean, SimpleUploadedFile('name', None))\n+        self.assertRaisesMessage(ValidationError, \"[u'The submitted file is empty.']\", f.clean, SimpleUploadedFile('name', ''))\n         self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', 'Some File Content'))))\n         self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('我隻氣墊船裝滿晒鱔.txt', 'मेरी मँडराने वाली नाव सर्पमीनों से भरी ह'))))\n         self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', 'Some File Content'), 'files/test4.pdf')))\n \n     def test_filefield_2(self):\n         f = FileField(max_length = 5)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this filename has at most 5 characters (it has 18).']\", f.clean, SimpleUploadedFile('test_maxlength.txt', 'hello world'))\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this filename has at most 5 characters (it has 18).']\", f.clean, SimpleUploadedFile('test_maxlength.txt', 'hello world'))\n         self.assertEqual('files/test1.pdf', f.clean('', 'files/test1.pdf'))\n         self.assertEqual('files/test2.pdf', f.clean(None, 'files/test2.pdf'))\n         self.assertEqual(SimpleUploadedFile, type(f.clean(SimpleUploadedFile('name', 'Some File Content'))))\n@@ -569,8 +562,8 @@ def test_filefield_3(self):\n \n     def test_urlfield_1(self):\n         f = URLField()\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual(u'http://localhost/', f.clean('http://localhost'))\n         self.assertEqual(u'http://example.com/', f.clean('http://example.com'))\n         self.assertEqual(u'http://example.com./', f.clean('http://example.com.'))\n@@ -580,47 +573,47 @@ def test_urlfield_1(self):\n         self.assertEqual(u'http://subdomain.domain.com/', f.clean('subdomain.domain.com'))\n         self.assertEqual(u'http://200.8.9.10/', f.clean('http://200.8.9.10'))\n         self.assertEqual(u'http://200.8.9.10:8000/test', f.clean('http://200.8.9.10:8000/test'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'foo')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example.')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'com.')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, '.')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://invalid-.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://-invalid.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://inv-.alid-.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://inv-.-alid.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'foo')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example.')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'com.')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, '.')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://invalid-.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://-invalid.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://inv-.alid-.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://inv-.-alid.com')\n         self.assertEqual(u'http://valid-----hyphens.com/', f.clean('http://valid-----hyphens.com'))\n         self.assertEqual(u'http://some.idn.xyz\\xe4\\xf6\\xfc\\xdfabc.domain.com:123/blah', f.clean('http://some.idn.xyzäöüßabc.domain.com:123/blah'))\n         self.assertEqual(u'http://www.example.com/s/http://code.djangoproject.com/ticket/13804', f.clean('www.example.com/s/http://code.djangoproject.com/ticket/13804'))\n \n     def test_url_regex_ticket11198(self):\n         f = URLField()\n         # hangs \"forever\" if catastrophic backtracking in ticket:#11198 not fixed\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://%s' % (\"X\"*200,))\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://%s' % (\"X\"*200,))\n \n         # a second test, to make sure the problem is really addressed, even on\n         # domains that don't fail the domain label length check in the regex\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://%s' % (\"X\"*60,))\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://%s' % (\"X\"*60,))\n \n     def test_urlfield_2(self):\n         f = URLField(required=False)\n         self.assertEqual(u'', f.clean(''))\n         self.assertEqual(u'', f.clean(None))\n         self.assertEqual(u'http://example.com/', f.clean('http://example.com'))\n         self.assertEqual(u'http://www.example.com/', f.clean('http://www.example.com'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'foo')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example.')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'foo')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example.')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://.com')\n \n     @verify_exists_urls(('http://www.google.com/',))\n     def test_urlfield_3(self):\n         f = URLField(verify_exists=True)\n         self.assertEqual(u'http://www.google.com/', f.clean('http://www.google.com'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid URL.']\", f.clean, 'http://example')\n         self.assertRaises(ValidationError, f.clean, 'http://www.broken.djangoproject.com') # bad domain\n         self.assertRaises(ValidationError, f.clean, 'http://qa-dev.w3.org/link-testsuite/http.php?code=405') # Method not allowed\n         try:\n@@ -641,9 +634,9 @@ def test_urlfield_4(self):\n \n     def test_urlfield_5(self):\n         f = URLField(min_length=15, max_length=20)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at least 15 characters (it has 13).']\", f.clean, 'http://f.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at least 15 characters (it has 13).']\", f.clean, 'http://f.com')\n         self.assertEqual(u'http://example.com/', f.clean('http://example.com'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at most 20 characters (it has 38).']\", f.clean, 'http://abcdefghijklmnopqrstuvwxyz.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at most 20 characters (it has 38).']\", f.clean, 'http://abcdefghijklmnopqrstuvwxyz.com')\n \n     def test_urlfield_6(self):\n         f = URLField(required=False)\n@@ -697,15 +690,15 @@ def test_urlfield_10(self):\n \n     def test_booleanfield_1(self):\n         f = BooleanField()\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual(True, f.clean(True))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, False)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, False)\n         self.assertEqual(True, f.clean(1))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, 0)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, 0)\n         self.assertEqual(True, f.clean('Django rocks'))\n         self.assertEqual(True, f.clean('True'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, 'False')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, 'False')\n \n     def test_booleanfield_2(self):\n         f = BooleanField(required=False)\n@@ -726,24 +719,24 @@ def test_booleanfield_2(self):\n \n     def test_choicefield_1(self):\n         f = ChoiceField(choices=[('1', 'One'), ('2', 'Two')])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual(u'1', f.clean(1))\n         self.assertEqual(u'1', f.clean('1'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 3 is not one of the available choices.']\", f.clean, '3')\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 3 is not one of the available choices.']\", f.clean, '3')\n \n     def test_choicefield_2(self):\n         f = ChoiceField(choices=[('1', 'One'), ('2', 'Two')], required=False)\n         self.assertEqual(u'', f.clean(''))\n         self.assertEqual(u'', f.clean(None))\n         self.assertEqual(u'1', f.clean(1))\n         self.assertEqual(u'1', f.clean('1'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 3 is not one of the available choices.']\", f.clean, '3')\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 3 is not one of the available choices.']\", f.clean, '3')\n \n     def test_choicefield_3(self):\n         f = ChoiceField(choices=[('J', 'John'), ('P', 'Paul')])\n         self.assertEqual(u'J', f.clean('J'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. John is not one of the available choices.']\", f.clean, 'John')\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. John is not one of the available choices.']\", f.clean, 'John')\n \n     def test_choicefield_4(self):\n         f = ChoiceField(choices=[('Numbers', (('1', 'One'), ('2', 'Two'))), ('Letters', (('3','A'),('4','B'))), ('5','Other')])\n@@ -753,7 +746,7 @@ def test_choicefield_4(self):\n         self.assertEqual(u'3', f.clean('3'))\n         self.assertEqual(u'5', f.clean(5))\n         self.assertEqual(u'5', f.clean('5'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 6 is not one of the available choices.']\", f.clean, '6')\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 6 is not one of the available choices.']\", f.clean, '6')\n \n     # TypedChoiceField ############################################################\n     # TypedChoiceField is just like ChoiceField, except that coerced types will\n@@ -762,7 +755,7 @@ def test_choicefield_4(self):\n     def test_typedchoicefield_1(self):\n         f = TypedChoiceField(choices=[(1, \"+1\"), (-1, \"-1\")], coerce=int)\n         self.assertEqual(1, f.clean('1'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 2 is not one of the available choices.']\", f.clean, '2')\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 2 is not one of the available choices.']\", f.clean, '2')\n \n     def test_typedchoicefield_2(self):\n         # Different coercion, same validation.\n@@ -778,9 +771,9 @@ def test_typedchoicefield_4(self):\n         # Even more weirdness: if you have a valid choice but your coercion function\n         # can't coerce, you'll still get a validation error. Don't do this!\n         f = TypedChoiceField(choices=[('A', 'A'), ('B', 'B')], coerce=int)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. B is not one of the available choices.']\", f.clean, 'B')\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. B is not one of the available choices.']\", f.clean, 'B')\n         # Required fields require values\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n \n     def test_typedchoicefield_5(self):\n         # Non-required fields aren't required\n@@ -842,17 +835,17 @@ class MySQLNullBooleanForm(Form):\n \n     def test_multiplechoicefield_1(self):\n         f = MultipleChoiceField(choices=[('1', 'One'), ('2', 'Two')])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n         self.assertEqual([u'1'], f.clean([1]))\n         self.assertEqual([u'1'], f.clean(['1']))\n         self.assertEqual([u'1', u'2'], f.clean(['1', '2']))\n         self.assertEqual([u'1', u'2'], f.clean([1, '2']))\n         self.assertEqual([u'1', u'2'], f.clean((1, '2')))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a list of values.']\", f.clean, 'hello')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, [])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, ())\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 3 is not one of the available choices.']\", f.clean, ['3'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a list of values.']\", f.clean, 'hello')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, [])\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, ())\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 3 is not one of the available choices.']\", f.clean, ['3'])\n \n     def test_multiplechoicefield_2(self):\n         f = MultipleChoiceField(choices=[('1', 'One'), ('2', 'Two')], required=False)\n@@ -863,10 +856,10 @@ def test_multiplechoicefield_2(self):\n         self.assertEqual([u'1', u'2'], f.clean(['1', '2']))\n         self.assertEqual([u'1', u'2'], f.clean([1, '2']))\n         self.assertEqual([u'1', u'2'], f.clean((1, '2')))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a list of values.']\", f.clean, 'hello')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a list of values.']\", f.clean, 'hello')\n         self.assertEqual([], f.clean([]))\n         self.assertEqual([], f.clean(()))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 3 is not one of the available choices.']\", f.clean, ['3'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 3 is not one of the available choices.']\", f.clean, ['3'])\n \n     def test_multiplechoicefield_3(self):\n         f = MultipleChoiceField(choices=[('Numbers', (('1', 'One'), ('2', 'Two'))), ('Letters', (('3','A'),('4','B'))), ('5','Other')])\n@@ -876,8 +869,8 @@ def test_multiplechoicefield_3(self):\n         self.assertEqual([u'1', u'5'], f.clean([1, '5']))\n         self.assertEqual([u'1', u'5'], f.clean(['1', 5]))\n         self.assertEqual([u'1', u'5'], f.clean(['1', '5']))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 6 is not one of the available choices.']\", f.clean, ['6'])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 6 is not one of the available choices.']\", f.clean, ['1','6'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 6 is not one of the available choices.']\", f.clean, ['6'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 6 is not one of the available choices.']\", f.clean, ['1','6'])\n \n     # TypedMultipleChoiceField ############################################################\n     # TypedMultipleChoiceField is just like MultipleChoiceField, except that coerced types\n@@ -886,7 +879,7 @@ def test_multiplechoicefield_3(self):\n     def test_typedmultiplechoicefield_1(self):\n         f = TypedMultipleChoiceField(choices=[(1, \"+1\"), (-1, \"-1\")], coerce=int)\n         self.assertEqual([1], f.clean(['1']))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 2 is not one of the available choices.']\", f.clean, ['2'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 2 is not one of the available choices.']\", f.clean, ['2'])\n \n     def test_typedmultiplechoicefield_2(self):\n         # Different coercion, same validation.\n@@ -901,15 +894,15 @@ def test_typedmultiplechoicefield_3(self):\n     def test_typedmultiplechoicefield_4(self):\n         f = TypedMultipleChoiceField(choices=[(1, \"+1\"), (-1, \"-1\")], coerce=int)\n         self.assertEqual([1, -1], f.clean(['1','-1']))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. 2 is not one of the available choices.']\", f.clean, ['1','2'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. 2 is not one of the available choices.']\", f.clean, ['1','2'])\n \n     def test_typedmultiplechoicefield_5(self):\n         # Even more weirdness: if you have a valid choice but your coercion function\n         # can't coerce, you'll still get a validation error. Don't do this!\n         f = TypedMultipleChoiceField(choices=[('A', 'A'), ('B', 'B')], coerce=int)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. B is not one of the available choices.']\", f.clean, ['B'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. B is not one of the available choices.']\", f.clean, ['B'])\n         # Required fields require values\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, [])\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, [])\n \n     def test_typedmultiplechoicefield_6(self):\n         # Non-required fields aren't required\n@@ -926,16 +919,16 @@ def test_typedmultiplechoicefield_7(self):\n     def test_combofield_1(self):\n         f = ComboField(fields=[CharField(max_length=20), EmailField()])\n         self.assertEqual(u'test@example.com', f.clean('test@example.com'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at most 20 characters (it has 28).']\", f.clean, 'longemailaddress@example.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'not an e-mail')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at most 20 characters (it has 28).']\", f.clean, 'longemailaddress@example.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'not an e-mail')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n \n     def test_combofield_2(self):\n         f = ComboField(fields=[CharField(max_length=20), EmailField()], required=False)\n         self.assertEqual(u'test@example.com', f.clean('test@example.com'))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Ensure this value has at most 20 characters (it has 28).']\", f.clean, 'longemailaddress@example.com')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'not an e-mail')\n+        self.assertRaisesMessage(ValidationError, \"[u'Ensure this value has at most 20 characters (it has 28).']\", f.clean, 'longemailaddress@example.com')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid e-mail address.']\", f.clean, 'not an e-mail')\n         self.assertEqual(u'', f.clean(''))\n         self.assertEqual(u'', f.clean(None))\n \n@@ -964,7 +957,7 @@ def test_filepathfield_2(self):\n         for exp, got in zip(expected, fix_os_paths(f.choices)):\n             self.assertEqual(exp[1], got[1])\n             self.assertTrue(got[0].endswith(exp[0]))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Select a valid choice. fields.py is not one of the available choices.']\", f.clean, 'fields.py')\n+        self.assertRaisesMessage(ValidationError, \"[u'Select a valid choice. fields.py is not one of the available choices.']\", f.clean, 'fields.py')\n         assert fix_os_paths(f.clean(path + 'fields.py')).endswith('/django/forms/fields.py')\n \n     def test_filepathfield_3(self):\n@@ -1012,12 +1005,12 @@ def test_splitdatetimefield_1(self):\n         f = SplitDateTimeField()\n         assert isinstance(f.widget, SplitDateTimeWidget)\n         self.assertEqual(datetime.datetime(2006, 1, 10, 7, 30), f.clean([datetime.date(2006, 1, 10), datetime.time(7, 30)]))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a list of values.']\", f.clean, 'hello')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.', u'Enter a valid time.']\", f.clean, ['hello', 'there'])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, ['2006-01-10', 'there'])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, ['hello', '07:30'])\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, None)\n+        self.assertRaisesMessage(ValidationError, \"[u'This field is required.']\", f.clean, '')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a list of values.']\", f.clean, 'hello')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.', u'Enter a valid time.']\", f.clean, ['hello', 'there'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, ['2006-01-10', 'there'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, ['hello', '07:30'])\n \n     def test_splitdatetimefield_2(self):\n         f = SplitDateTimeField(required=False)\n@@ -1027,10 +1020,10 @@ def test_splitdatetimefield_2(self):\n         self.assertEqual(None, f.clean(''))\n         self.assertEqual(None, f.clean(['']))\n         self.assertEqual(None, f.clean(['', '']))\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a list of values.']\", f.clean, 'hello')\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.', u'Enter a valid time.']\", f.clean, ['hello', 'there'])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, ['2006-01-10', 'there'])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, ['hello', '07:30'])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, ['2006-01-10', ''])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, ['2006-01-10'])\n-        self.assertRaisesErrorWithMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, ['', '07:30'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a list of values.']\", f.clean, 'hello')\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.', u'Enter a valid time.']\", f.clean, ['hello', 'there'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, ['2006-01-10', 'there'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, ['hello', '07:30'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, ['2006-01-10', ''])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid time.']\", f.clean, ['2006-01-10'])\n+        self.assertRaisesMessage(ValidationError, \"[u'Enter a valid date.']\", f.clean, ['', '07:30'])"
        },
        {
            "sha": "231a336649890158db70d7db27ebd919cb0a1cfa",
            "filename": "tests/regressiontests/queries/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fqueries%2Ftests.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -22,19 +22,6 @@ class BaseQuerysetTest(TestCase):\n     def assertValueQuerysetEqual(self, qs, values):\n         return self.assertQuerysetEqual(qs, values, transform=lambda x: x)\n \n-    def assertRaisesMessage(self, exc, msg, func, *args, **kwargs):\n-        try:\n-            func(*args, **kwargs)\n-        except Exception, e:\n-            self.assertEqual(msg, str(e))\n-            self.assertTrue(isinstance(e, exc), \"Expected %s, got %s\" % (exc, type(e)))\n-        else:\n-            if hasattr(exc, '__name__'):\n-                excName = exc.__name__\n-            else:\n-                excName = str(exc)\n-            raise AssertionError(\"%s not raised\" % excName)\n-\n \n class Queries1Tests(BaseQuerysetTest):\n     def setUp(self):"
        },
        {
            "sha": "6d4ab022477187e36b10987de515639c0cbaa159",
            "filename": "tests/regressiontests/test_utils/tests.py",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_utils%2Ftests.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -1,6 +1,6 @@\n from __future__ import with_statement\n \n-from django.test import TestCase, skipUnlessDBFeature\n+from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature\n from django.utils.unittest import skip\n \n from models import Person\n@@ -48,6 +48,7 @@ def test_func():\n             self.client.get(\"/test_utils/get_person/%s/\" % person.pk)\n         self.assertNumQueries(2, test_func)\n \n+\n class AssertNumQueriesContextManagerTests(TestCase):\n     urls = 'regressiontests.test_utils.urls'\n \n@@ -129,6 +130,15 @@ def test_fixtures_are_skipped(self):\n         pass\n \n \n+class AssertRaisesMsgTest(SimpleTestCase):\n+\n+    def test_special_re_chars(self):\n+        \"\"\"assertRaisesMessage shouldn't interpret RE special chars.\"\"\"\n+        def func1():\n+            raise ValueError(\"[.*x+]y?\")\n+        self.assertRaisesMessage(ValueError, \"[.*x+]y?\", func1)\n+\n+\n __test__ = {\"API_TEST\": r\"\"\"\n # Some checks of the doctest output normalizer.\n # Standard doctests do fairly"
        },
        {
            "sha": "4b656e490941fff5e2e1e7ace37476f48cc3c822",
            "filename": "tests/regressiontests/urlpatterns_reverse/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -138,21 +138,13 @@\n class NoURLPatternsTests(TestCase):\n     urls = 'regressiontests.urlpatterns_reverse.no_urls'\n \n-    def assertRaisesErrorWithMessage(self, error, message, callable,\n-        *args, **kwargs):\n-        self.assertRaises(error, callable, *args, **kwargs)\n-        try:\n-            callable(*args, **kwargs)\n-        except error, e:\n-            self.assertEqual(message, str(e))\n-\n     def test_no_urls_exception(self):\n         \"\"\"\n         RegexURLResolver should raise an exception when no urlpatterns exist.\n         \"\"\"\n         resolver = RegexURLResolver(r'^$', self.urls)\n \n-        self.assertRaisesErrorWithMessage(ImproperlyConfigured,\n+        self.assertRaisesMessage(ImproperlyConfigured,\n             \"The included urlconf regressiontests.urlpatterns_reverse.no_urls \"\\\n             \"doesn't have any patterns in it\", getattr, resolver, 'url_patterns')\n "
        },
        {
            "sha": "d86a3c8fb8bf63bd97ba34a8f6fed7785eead50e",
            "filename": "tests/regressiontests/utils/datastructures.py",
            "status": "modified",
            "additions": 10,
            "deletions": 20,
            "changes": 30,
            "blob_url": "https://github.com/django/django/blob/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Futils%2Fdatastructures.py",
            "raw_url": "https://github.com/django/django/raw/326949e444bcdde966d2421e2fb8bd8c87c65941/tests%2Fregressiontests%2Futils%2Fdatastructures.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fdatastructures.py?ref=326949e444bcdde966d2421e2fb8bd8c87c65941",
            "patch": "@@ -4,22 +4,12 @@\n \n import copy\n import pickle\n-import unittest\n \n+from django.test import SimpleTestCase\n from django.utils.datastructures import *\n \n \n-class DatastructuresTestCase(unittest.TestCase):\n-    def assertRaisesErrorWithMessage(self, error, message, callable,\n-        *args, **kwargs):\n-        self.assertRaises(error, callable, *args, **kwargs)\n-        try:\n-            callable(*args, **kwargs)\n-        except error, e:\n-            self.assertEqual(message, str(e))\n-\n-\n-class SortedDictTests(DatastructuresTestCase):\n+class SortedDictTests(SimpleTestCase):\n     def setUp(self):\n         self.d1 = SortedDict()\n         self.d1[7] = 'seven'\n@@ -125,7 +115,7 @@ def test_clear(self):\n         self.assertEqual(self.d1, {})\n         self.assertEqual(self.d1.keyOrder, [])\n \n-class MergeDictTests(DatastructuresTestCase):\n+class MergeDictTests(SimpleTestCase):\n \n     def test_simple_mergedict(self):\n         d1 = {'chris':'cool', 'camri':'cute', 'cotton':'adorable',\n@@ -179,7 +169,7 @@ def test_mergedict_merges_multivaluedict(self):\n                            ('key2', ['value2', 'value3']),\n                            ('key4', ['value5', 'value6'])])\n \n-class MultiValueDictTests(DatastructuresTestCase):\n+class MultiValueDictTests(SimpleTestCase):\n \n     def test_multivaluedict(self):\n         d = MultiValueDict({'name': ['Adrian', 'Simon'],\n@@ -198,7 +188,7 @@ def test_multivaluedict(self):\n         # MultiValueDictKeyError: \"Key 'lastname' not found in\n         # <MultiValueDict: {'position': ['Developer'],\n         #                   'name': ['Adrian', 'Simon']}>\"\n-        self.assertRaisesErrorWithMessage(MultiValueDictKeyError,\n+        self.assertRaisesMessage(MultiValueDictKeyError,\n             '\"Key \\'lastname\\' not found in <MultiValueDict: {\\'position\\':'\\\n             ' [\\'Developer\\'], \\'name\\': [\\'Adrian\\', \\'Simon\\']}>\"',\n             d.__getitem__, 'lastname')\n@@ -248,7 +238,7 @@ def test_dict_translation(self):\n         self.assertEqual({}, MultiValueDict().dict())\n \n \n-class DotExpandedDictTests(DatastructuresTestCase):\n+class DotExpandedDictTests(SimpleTestCase):\n \n     def test_dotexpandeddict(self):\n \n@@ -262,13 +252,13 @@ def test_dotexpandeddict(self):\n         self.assertEqual(d['person']['2']['firstname'], ['Adrian'])\n \n \n-class ImmutableListTests(DatastructuresTestCase):\n+class ImmutableListTests(SimpleTestCase):\n \n     def test_sort(self):\n         d = ImmutableList(range(10))\n \n         # AttributeError: ImmutableList object is immutable.\n-        self.assertRaisesErrorWithMessage(AttributeError,\n+        self.assertRaisesMessage(AttributeError,\n             'ImmutableList object is immutable.', d.sort)\n \n         self.assertEqual(repr(d), '(0, 1, 2, 3, 4, 5, 6, 7, 8, 9)')\n@@ -279,11 +269,11 @@ def test_custom_warning(self):\n         self.assertEqual(d[1], 1)\n \n         # AttributeError: Object is immutable!\n-        self.assertRaisesErrorWithMessage(AttributeError,\n+        self.assertRaisesMessage(AttributeError,\n             'Object is immutable!', d.__setitem__, 1, 'test')\n \n \n-class DictWrapperTests(DatastructuresTestCase):\n+class DictWrapperTests(SimpleTestCase):\n \n     def test_dictwrapper(self):\n         f = lambda x: \"*%s\" % x"
        }
    ],
    "stats": {
        "total": 591,
        "additions": 299,
        "deletions": 292
    }
}