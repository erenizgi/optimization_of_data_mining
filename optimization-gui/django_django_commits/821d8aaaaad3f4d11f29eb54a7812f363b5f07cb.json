{
    "author": "jezdez",
    "message": "Fixed #15266 -- Applied login_required decorator to password_change_done view. Thanks, lasko.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16454 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "821d8aaaaad3f4d11f29eb54a7812f363b5f07cb",
    "files": [
        {
            "sha": "1011671fe6f2495a6b777f326919811604c66b5f",
            "filename": "django/contrib/auth/tests/views.py",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/821d8aaaaad3f4d11f29eb54a7812f363b5f07cb/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/821d8aaaaad3f4d11f29eb54a7812f363b5f07cb/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py?ref=821d8aaaaad3f4d11f29eb54a7812f363b5f07cb",
            "patch": "@@ -193,6 +193,23 @@ def test_password_change_succeeds(self):\n         self.fail_login()\n         self.login(password='password1')\n \n+    def test_password_change_done_succeeds(self):\n+        self.login()\n+        response = self.client.post('/password_change/', {\n+            'old_password': 'password',\n+            'new_password1': 'password1',\n+            'new_password2': 'password1',\n+            }\n+        )\n+        self.assertEqual(response.status_code, 302)\n+        self.assertTrue(response['Location'].endswith('/password_change/done/'))\n+\n+    def test_password_change_done_fails(self):\n+        response = self.client.get('/password_change/done/')\n+        self.assertEqual(response.status_code, 302)\n+        self.assertTrue(response['Location'].endswith('/login/?next=/password_change/done/'))\n+\n+\n class LoginTest(AuthViewsTestCase):\n \n     def test_current_site_in_context_after_login(self):"
        },
        {
            "sha": "c86ef535954f48b793813f02ed5c0b627abf2a08",
            "filename": "django/contrib/auth/views.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/821d8aaaaad3f4d11f29eb54a7812f363b5f07cb/django%2Fcontrib%2Fauth%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/821d8aaaaad3f4d11f29eb54a7812f363b5f07cb/django%2Fcontrib%2Fauth%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fviews.py?ref=821d8aaaaad3f4d11f29eb54a7812f363b5f07cb",
            "patch": "@@ -257,6 +257,7 @@ def password_change(request,\n     return TemplateResponse(request, template_name, context,\n                             current_app=current_app)\n \n+@login_required\n def password_change_done(request,\n                          template_name='registration/password_change_done.html',\n                          current_app=None, extra_context=None):"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 18,
        "deletions": 0
    }
}