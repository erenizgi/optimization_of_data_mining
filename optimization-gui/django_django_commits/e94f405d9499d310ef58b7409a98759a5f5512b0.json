{
    "author": "hirokiky",
    "message": "Fixed #18558 -- Added url property to HttpResponseRedirect*\n\nThanks coolRR for the report.",
    "sha": "e94f405d9499d310ef58b7409a98759a5f5512b0",
    "files": [
        {
            "sha": "c43823ce33863d38056b4979ed23f8cb652c272c",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -306,6 +306,7 @@ answer newbie questions, and generally made Django that much better:\n     Garth Kidd <http://www.deadlybloodyserious.com/>\n     kilian <kilian.cavalotti@lip6.fr>\n     Sune Kirkeby <http://ibofobi.dk/>\n+    Hiroki Kiyohara <hirokiky@gmail.com>\n     Bastian Kleineidam <calvin@debian.org>\n     Cameron Knight (ckknight)\n     Nena Kojadin <nena@kiberpipa.org>"
        },
        {
            "sha": "5aff375498e799d3c8c1f91b49c02c152b9d03bb",
            "filename": "django/contrib/auth/tests/decorators.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Fcontrib%2Fauth%2Ftests%2Fdecorators.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Fcontrib%2Fauth%2Ftests%2Fdecorators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fdecorators.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -34,7 +34,7 @@ def testLoginRequired(self, view_url='/login_required/', login_url='/login/'):\n         \"\"\"\n         response = self.client.get(view_url)\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(login_url in response['Location'])\n+        self.assertTrue(login_url in response.url)\n         self.login()\n         response = self.client.get(view_url)\n         self.assertEqual(response.status_code, 200)"
        },
        {
            "sha": "6c508cf6075e90a387d1152d355ac2aa793049a8",
            "filename": "django/contrib/auth/tests/views.py",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -46,7 +46,7 @@ def login(self, password='password'):\n             'password': password,\n             })\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(response['Location'].endswith(settings.LOGIN_REDIRECT_URL))\n+        self.assertTrue(response.url.endswith(settings.LOGIN_REDIRECT_URL))\n         self.assertTrue(SESSION_KEY in self.client.session)\n \n     def assertContainsEscaped(self, response, text, **kwargs):\n@@ -281,7 +281,7 @@ def test_password_change_succeeds(self):\n             'new_password2': 'password1',\n         })\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(response['Location'].endswith('/password_change/done/'))\n+        self.assertTrue(response.url.endswith('/password_change/done/'))\n         self.fail_login()\n         self.login(password='password1')\n \n@@ -293,13 +293,13 @@ def test_password_change_done_succeeds(self):\n             'new_password2': 'password1',\n         })\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(response['Location'].endswith('/password_change/done/'))\n+        self.assertTrue(response.url.endswith('/password_change/done/'))\n \n     def test_password_change_done_fails(self):\n         with self.settings(LOGIN_URL='/login/'):\n             response = self.client.get('/password_change/done/')\n             self.assertEqual(response.status_code, 302)\n-            self.assertTrue(response['Location'].endswith('/login/?next=/password_change/done/'))\n+            self.assertTrue(response.url.endswith('/login/?next=/password_change/done/'))\n \n \n @skipIfCustomUser\n@@ -336,7 +336,7 @@ def test_security_check(self, password='password'):\n                 'password': password,\n             })\n             self.assertEqual(response.status_code, 302)\n-            self.assertFalse(bad_url in response['Location'],\n+            self.assertFalse(bad_url in response.url,\n                              \"%s should be blocked\" % bad_url)\n \n         # These URLs *should* still pass the security check\n@@ -357,7 +357,7 @@ def test_security_check(self, password='password'):\n                     'password': password,\n             })\n             self.assertEqual(response.status_code, 302)\n-            self.assertTrue(good_url in response['Location'],\n+            self.assertTrue(good_url in response.url,\n                             \"%s should be allowed\" % good_url)\n \n \n@@ -376,7 +376,7 @@ def get_login_required_url(self, login_url):\n         settings.LOGIN_URL = login_url\n         response = self.client.get('/login_required/')\n         self.assertEqual(response.status_code, 302)\n-        return response['Location']\n+        return response.url\n \n     def test_standard_login_url(self):\n         login_url = '/login/'\n@@ -444,11 +444,11 @@ def test_logout_with_overridden_redirect_url(self):\n         self.login()\n         response = self.client.get('/logout/next_page/')\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(response['Location'].endswith('/somewhere/'))\n+        self.assertTrue(response.url.endswith('/somewhere/'))\n \n         response = self.client.get('/logout/next_page/?next=/login/')\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(response['Location'].endswith('/login/'))\n+        self.assertTrue(response.url.endswith('/login/'))\n \n         self.confirm_logged_out()\n \n@@ -457,23 +457,23 @@ def test_logout_with_next_page_specified(self):\n         self.login()\n         response = self.client.get('/logout/next_page/')\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(response['Location'].endswith('/somewhere/'))\n+        self.assertTrue(response.url.endswith('/somewhere/'))\n         self.confirm_logged_out()\n \n     def test_logout_with_redirect_argument(self):\n         \"Logout with query string redirects to specified resource\"\n         self.login()\n         response = self.client.get('/logout/?next=/login/')\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(response['Location'].endswith('/login/'))\n+        self.assertTrue(response.url.endswith('/login/'))\n         self.confirm_logged_out()\n \n     def test_logout_with_custom_redirect_argument(self):\n         \"Logout with custom query string redirects to specified resource\"\n         self.login()\n         response = self.client.get('/logout/custom_query/?follow=/somewhere/')\n         self.assertEqual(response.status_code, 302)\n-        self.assertTrue(response['Location'].endswith('/somewhere/'))\n+        self.assertTrue(response.url.endswith('/somewhere/'))\n         self.confirm_logged_out()\n \n     def test_security_check(self, password='password'):\n@@ -492,7 +492,7 @@ def test_security_check(self, password='password'):\n             self.login()\n             response = self.client.get(nasty_url)\n             self.assertEqual(response.status_code, 302)\n-            self.assertFalse(bad_url in response['Location'],\n+            self.assertFalse(bad_url in response.url,\n                              \"%s should be blocked\" % bad_url)\n             self.confirm_logged_out()\n \n@@ -512,6 +512,6 @@ def test_security_check(self, password='password'):\n             self.login()\n             response = self.client.get(safe_url)\n             self.assertEqual(response.status_code, 302)\n-            self.assertTrue(good_url in response['Location'],\n+            self.assertTrue(good_url in response.url,\n                             \"%s should be allowed\" % good_url)\n             self.confirm_logged_out()"
        },
        {
            "sha": "214f19a04d7276e1cda5472b5adf3614e54de8a1",
            "filename": "django/contrib/formtools/tests/wizard/namedwizardtests/tests.py",
            "status": "modified",
            "additions": 18,
            "deletions": 18,
            "changes": 36,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -21,7 +21,7 @@ def setUp(self):\n     def test_initial_call(self):\n         response = self.client.get(reverse('%s_start' % self.wizard_urlname))\n         self.assertEqual(response.status_code, 302)\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n         wizard = response.context['wizard']\n         self.assertEqual(wizard['steps'].current, 'form1')\n@@ -40,7 +40,7 @@ def test_initial_call_with_params(self):\n         self.assertEqual(response.status_code, 302)\n \n         # Test for proper redirect GET parameters\n-        location = response['Location']\n+        location = response.url\n         self.assertNotEqual(location.find('?'), -1)\n         querydict = QueryDict(location[location.find('?') + 1:])\n         self.assertEqual(dict(querydict.items()), get_params)\n@@ -60,7 +60,7 @@ def test_form_post_success(self):\n         response = self.client.post(\n             reverse(self.wizard_urlname, kwargs={'step': 'form1'}),\n             self.wizard_step_data[0])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n \n         self.assertEqual(response.status_code, 200)\n         wizard = response.context['wizard']\n@@ -79,7 +79,7 @@ def test_form_stepback(self):\n         response = self.client.post(\n             reverse(self.wizard_urlname, kwargs={'step': 'form1'}),\n             self.wizard_step_data[0])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n \n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['wizard']['steps'].current, 'form2')\n@@ -88,7 +88,7 @@ def test_form_stepback(self):\n             reverse(self.wizard_urlname, kwargs={\n                 'step': response.context['wizard']['steps'].current\n             }), {'wizard_goto_step': response.context['wizard']['steps'].prev})\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n \n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['wizard']['steps'].current, 'form1')\n@@ -116,7 +116,7 @@ def test_form_finish(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             self.wizard_step_data[0])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n \n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['wizard']['steps'].current, 'form2')\n@@ -128,7 +128,7 @@ def test_form_finish(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             post_data)\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n \n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['wizard']['steps'].current, 'form3')\n@@ -137,7 +137,7 @@ def test_form_finish(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             self.wizard_step_data[2])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n \n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['wizard']['steps'].current, 'form4')\n@@ -146,7 +146,7 @@ def test_form_finish(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             self.wizard_step_data[3])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n \n         all_data = response.context['form_list']\n@@ -169,7 +169,7 @@ def test_cleaned_data(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             self.wizard_step_data[0])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n \n         post_data = self.wizard_step_data[1]\n@@ -178,7 +178,7 @@ def test_cleaned_data(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             post_data)\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n \n         step2_url = reverse(self.wizard_urlname, kwargs={'step': 'form2'})\n@@ -194,14 +194,14 @@ def test_cleaned_data(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             self.wizard_step_data[2])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n \n         response = self.client.post(\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             self.wizard_step_data[3])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n \n         all_data = response.context['all_cleaned_data']\n@@ -227,7 +227,7 @@ def test_manipulated_data(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             self.wizard_step_data[0])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n \n         post_data = self.wizard_step_data[1]\n@@ -237,14 +237,14 @@ def test_manipulated_data(self):\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             post_data)\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n \n         response = self.client.post(\n             reverse(self.wizard_urlname,\n                     kwargs={'step': response.context['wizard']['steps'].current}),\n             self.wizard_step_data[2])\n-        loc = response['Location']\n+        loc = response.url\n         response = self.client.get(loc)\n         self.assertEqual(response.status_code, 200, loc)\n \n@@ -263,15 +263,15 @@ def test_form_reset(self):\n         response = self.client.post(\n             reverse(self.wizard_urlname, kwargs={'step': 'form1'}),\n             self.wizard_step_data[0])\n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['wizard']['steps'].current, 'form2')\n \n         response = self.client.get(\n             '%s?reset=1' % reverse('%s_start' % self.wizard_urlname))\n         self.assertEqual(response.status_code, 302)\n \n-        response = self.client.get(response['Location'])\n+        response = self.client.get(response.url)\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['wizard']['steps'].current, 'form1')\n "
        },
        {
            "sha": "88ac8848c21981ab49203b5ee4a2d7a0b4a3b680",
            "filename": "django/http/response.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Fhttp%2Fresponse.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Fhttp%2Fresponse.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2Fresponse.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -392,6 +392,8 @@ def __init__(self, redirect_to, *args, **kwargs):\n         super(HttpResponseRedirectBase, self).__init__(*args, **kwargs)\n         self['Location'] = iri_to_uri(redirect_to)\n \n+    url = property(lambda self: self['Location'])\n+\n \n class HttpResponseRedirect(HttpResponseRedirectBase):\n     status_code = 302"
        },
        {
            "sha": "2506437023c20e413fc1f56ff174707628860dd0",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -580,7 +580,7 @@ def _handle_redirects(self, response, **extra):\n \n         response.redirect_chain = []\n         while response.status_code in (301, 302, 303, 307):\n-            url = response['Location']\n+            url = response.url\n             redirect_chain = response.redirect_chain\n             redirect_chain.append((url, response.status_code))\n "
        },
        {
            "sha": "f9d028bb727acfb4fbc281146e0ee934db24085e",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -601,7 +601,7 @@ def assertRedirects(self, response, expected_url, status_code=302,\n                 \" code was %d (expected %d)\" %\n                     (response.status_code, status_code))\n \n-            url = response['Location']\n+            url = response.url\n             scheme, netloc, path, query, fragment = urlsplit(url)\n \n             redirect_response = response.client.get(path, QueryDict(query))"
        },
        {
            "sha": "30f5e87100fd925a8d795ba517e0321ceaebd53d",
            "filename": "docs/ref/request-response.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/docs%2Fref%2Frequest-response.txt",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/docs%2Fref%2Frequest-response.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Frequest-response.txt?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -746,6 +746,13 @@ types of HTTP responses. Like ``HttpResponse``, these subclasses live in\n     domain (e.g. ``'/search/'``). See :class:`HttpResponse` for other optional\n     constructor arguments. Note that this returns an HTTP status code 302.\n \n+    .. attribute:: HttpResponseRedirect.url\n+\n+        .. versionadded:: 1.6\n+\n+        This read-only attribute represents the URL the response will redirect\n+        to (equivalent to the ``Location`` response header).\n+\n .. class:: HttpResponsePermanentRedirect\n \n     Like :class:`HttpResponseRedirect`, but it returns a permanent redirect"
        },
        {
            "sha": "60537aca53ad935bf0f055071d31c69e45f9818b",
            "filename": "docs/releases/1.6.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/docs%2Freleases%2F1.6.txt",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/docs%2Freleases%2F1.6.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.6.txt?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -68,6 +68,10 @@ Minor features\n   :class:`~django.views.generic.edit.DeletionMixin` is now interpolated with\n   its ``object``\\'s ``__dict__``.\n \n+* :class:`~django.http.HttpResponseRedirect` and\n+  :class:`~django.http.HttpResponsePermanentRedirect` now provide an ``url``\n+  attribute (equivalent to the URL the response will redirect to).\n+\n Backwards incompatible changes in 1.6\n =====================================\n "
        },
        {
            "sha": "e0cd7cdfa12a1d70f6aa7725c1d021fd0bd3e558",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -1641,7 +1641,7 @@ def test_shortcut_view_only_available_to_staff(self):\n         response = self.client.get(shortcut_url, follow=False)\n         # Can't use self.assertRedirects() because User.get_absolute_url() is silly.\n         self.assertEqual(response.status_code, 302)\n-        self.assertEqual(response['Location'], 'http://example.com/users/super/')\n+        self.assertEqual(response.url, 'http://example.com/users/super/')\n \n \n @override_settings(PASSWORD_HASHERS=('django.contrib.auth.hashers.SHA1PasswordHasher',))"
        },
        {
            "sha": "7f6f261cb522f4d79815c3a849d58c7e233ef241",
            "filename": "tests/regressiontests/generic_views/base.py",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fbase.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -329,66 +329,66 @@ def test_permanent_redirect(self):\n         \"Default is a permanent redirect\"\n         response = RedirectView.as_view(url='/bar/')(self.rf.get('/foo/'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/')\n+        self.assertEqual(response.url, '/bar/')\n \n     def test_temporary_redirect(self):\n         \"Permanent redirects are an option\"\n         response = RedirectView.as_view(url='/bar/', permanent=False)(self.rf.get('/foo/'))\n         self.assertEqual(response.status_code, 302)\n-        self.assertEqual(response['Location'], '/bar/')\n+        self.assertEqual(response.url, '/bar/')\n \n     def test_include_args(self):\n         \"GET arguments can be included in the redirected URL\"\n         response = RedirectView.as_view(url='/bar/')(self.rf.get('/foo/'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/')\n+        self.assertEqual(response.url, '/bar/')\n \n         response = RedirectView.as_view(url='/bar/', query_string=True)(self.rf.get('/foo/?pork=spam'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/?pork=spam')\n+        self.assertEqual(response.url, '/bar/?pork=spam')\n \n     def test_include_urlencoded_args(self):\n         \"GET arguments can be URL-encoded when included in the redirected URL\"\n         response = RedirectView.as_view(url='/bar/', query_string=True)(\n             self.rf.get('/foo/?unicode=%E2%9C%93'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/?unicode=%E2%9C%93')\n+        self.assertEqual(response.url, '/bar/?unicode=%E2%9C%93')\n \n     def test_parameter_substitution(self):\n         \"Redirection URLs can be parameterized\"\n         response = RedirectView.as_view(url='/bar/%(object_id)d/')(self.rf.get('/foo/42/'), object_id=42)\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/42/')\n+        self.assertEqual(response.url, '/bar/42/')\n \n     def test_redirect_POST(self):\n         \"Default is a permanent redirect\"\n         response = RedirectView.as_view(url='/bar/')(self.rf.post('/foo/'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/')\n+        self.assertEqual(response.url, '/bar/')\n \n     def test_redirect_HEAD(self):\n         \"Default is a permanent redirect\"\n         response = RedirectView.as_view(url='/bar/')(self.rf.head('/foo/'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/')\n+        self.assertEqual(response.url, '/bar/')\n \n     def test_redirect_OPTIONS(self):\n         \"Default is a permanent redirect\"\n         response = RedirectView.as_view(url='/bar/')(self.rf.options('/foo/'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/')\n+        self.assertEqual(response.url, '/bar/')\n \n     def test_redirect_PUT(self):\n         \"Default is a permanent redirect\"\n         response = RedirectView.as_view(url='/bar/')(self.rf.put('/foo/'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/')\n+        self.assertEqual(response.url, '/bar/')\n \n     def test_redirect_DELETE(self):\n         \"Default is a permanent redirect\"\n         response = RedirectView.as_view(url='/bar/')(self.rf.delete('/foo/'))\n         self.assertEqual(response.status_code, 301)\n-        self.assertEqual(response['Location'], '/bar/')\n+        self.assertEqual(response.url, '/bar/')\n \n     def test_redirect_when_meta_contains_no_query_string(self):\n         \"regression for #16705\""
        },
        {
            "sha": "2d3240915e2ab17d8cf3898f93a21c45f9a9e284",
            "filename": "tests/regressiontests/httpwrappers/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -410,6 +410,8 @@ def test_redirect(self):\n             content='The resource has temporarily moved',\n             content_type='text/html')\n         self.assertContains(response, 'The resource has temporarily moved', status_code=302)\n+        # Test that url attribute is right\n+        self.assertEqual(response.url, response['Location'])\n \n     def test_not_modified(self):\n         response = HttpResponseNotModified()"
        },
        {
            "sha": "73a6279e2ce02748afe3745bd68634bf9b7b481a",
            "filename": "tests/regressiontests/middleware/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fmiddleware%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fmiddleware%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmiddleware%2Ftests.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -69,7 +69,7 @@ def test_append_slash_redirect(self):\n         request = self._get_request('slash')\n         r = CommonMiddleware().process_request(request)\n         self.assertEqual(r.status_code, 301)\n-        self.assertEqual(r['Location'], 'http://testserver/middleware/slash/')\n+        self.assertEqual(r.url, 'http://testserver/middleware/slash/')\n \n     @override_settings(APPEND_SLASH=True, DEBUG=True)\n     def test_append_slash_no_redirect_on_POST_in_DEBUG(self):\n@@ -101,7 +101,7 @@ def test_append_slash_quoted(self):\n         r = CommonMiddleware().process_request(request)\n         self.assertEqual(r.status_code, 301)\n         self.assertEqual(\n-            r['Location'],\n+            r.url,\n             'http://testserver/middleware/needsquoting%23/')\n \n     @override_settings(APPEND_SLASH=False, PREPEND_WWW=True)\n@@ -110,23 +110,23 @@ def test_prepend_www(self):\n         r = CommonMiddleware().process_request(request)\n         self.assertEqual(r.status_code, 301)\n         self.assertEqual(\n-            r['Location'],\n+            r.url,\n             'http://www.testserver/middleware/path/')\n \n     @override_settings(APPEND_SLASH=True, PREPEND_WWW=True)\n     def test_prepend_www_append_slash_have_slash(self):\n         request = self._get_request('slash/')\n         r = CommonMiddleware().process_request(request)\n         self.assertEqual(r.status_code, 301)\n-        self.assertEqual(r['Location'],\n+        self.assertEqual(r.url,\n                           'http://www.testserver/middleware/slash/')\n \n     @override_settings(APPEND_SLASH=True, PREPEND_WWW=True)\n     def test_prepend_www_append_slash_slashless(self):\n         request = self._get_request('slash')\n         r = CommonMiddleware().process_request(request)\n         self.assertEqual(r.status_code, 301)\n-        self.assertEqual(r['Location'],\n+        self.assertEqual(r.url,\n                           'http://www.testserver/middleware/slash/')\n \n \n@@ -171,7 +171,7 @@ def test_append_slash_redirect_custom_urlconf(self):\n         self.assertFalse(r is None,\n             \"CommonMiddlware failed to return APPEND_SLASH redirect using request.urlconf\")\n         self.assertEqual(r.status_code, 301)\n-        self.assertEqual(r['Location'], 'http://testserver/middleware/customurlconf/slash/')\n+        self.assertEqual(r.url, 'http://testserver/middleware/customurlconf/slash/')\n \n     @override_settings(APPEND_SLASH=True, DEBUG=True)\n     def test_append_slash_no_redirect_on_POST_in_DEBUG_custom_urlconf(self):\n@@ -208,7 +208,7 @@ def test_append_slash_quoted_custom_urlconf(self):\n             \"CommonMiddlware failed to return APPEND_SLASH redirect using request.urlconf\")\n         self.assertEqual(r.status_code, 301)\n         self.assertEqual(\n-            r['Location'],\n+            r.url,\n             'http://testserver/middleware/customurlconf/needsquoting%23/')\n \n     @override_settings(APPEND_SLASH=False, PREPEND_WWW=True)\n@@ -218,7 +218,7 @@ def test_prepend_www_custom_urlconf(self):\n         r = CommonMiddleware().process_request(request)\n         self.assertEqual(r.status_code, 301)\n         self.assertEqual(\n-            r['Location'],\n+            r.url,\n             'http://www.testserver/middleware/customurlconf/path/')\n \n     @override_settings(APPEND_SLASH=True, PREPEND_WWW=True)\n@@ -227,7 +227,7 @@ def test_prepend_www_append_slash_have_slash_custom_urlconf(self):\n         request.urlconf = 'regressiontests.middleware.extra_urls'\n         r = CommonMiddleware().process_request(request)\n         self.assertEqual(r.status_code, 301)\n-        self.assertEqual(r['Location'],\n+        self.assertEqual(r.url,\n                           'http://www.testserver/middleware/customurlconf/slash/')\n \n     @override_settings(APPEND_SLASH=True, PREPEND_WWW=True)\n@@ -236,7 +236,7 @@ def test_prepend_www_append_slash_slashless_custom_urlconf(self):\n         request.urlconf = 'regressiontests.middleware.extra_urls'\n         r = CommonMiddleware().process_request(request)\n         self.assertEqual(r.status_code, 301)\n-        self.assertEqual(r['Location'],\n+        self.assertEqual(r.url,\n                           'http://www.testserver/middleware/customurlconf/slash/')\n \n     # Legacy tests for the 404 error reporting via email (to be removed in 1.8)"
        },
        {
            "sha": "9777710dafccc11d1b7080891c8d80e04ed928b1",
            "filename": "tests/regressiontests/urlpatterns_reverse/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Furlpatterns_reverse%2Ftests.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -270,31 +270,31 @@ def get_absolute_url(self):\n \n         res = redirect(FakeObj())\n         self.assertTrue(isinstance(res, HttpResponseRedirect))\n-        self.assertEqual(res['Location'], '/hi-there/')\n+        self.assertEqual(res.url, '/hi-there/')\n \n         res = redirect(FakeObj(), permanent=True)\n         self.assertTrue(isinstance(res, HttpResponsePermanentRedirect))\n-        self.assertEqual(res['Location'], '/hi-there/')\n+        self.assertEqual(res.url, '/hi-there/')\n \n     def test_redirect_to_view_name(self):\n         res = redirect('hardcoded2')\n-        self.assertEqual(res['Location'], '/hardcoded/doc.pdf')\n+        self.assertEqual(res.url, '/hardcoded/doc.pdf')\n         res = redirect('places', 1)\n-        self.assertEqual(res['Location'], '/places/1/')\n+        self.assertEqual(res.url, '/places/1/')\n         res = redirect('headlines', year='2008', month='02', day='17')\n-        self.assertEqual(res['Location'], '/headlines/2008.02.17/')\n+        self.assertEqual(res.url, '/headlines/2008.02.17/')\n         self.assertRaises(NoReverseMatch, redirect, 'not-a-view')\n \n     def test_redirect_to_url(self):\n         res = redirect('/foo/')\n-        self.assertEqual(res['Location'], '/foo/')\n+        self.assertEqual(res.url, '/foo/')\n         res = redirect('http://example.com/')\n-        self.assertEqual(res['Location'], 'http://example.com/')\n+        self.assertEqual(res.url, 'http://example.com/')\n \n     def test_redirect_view_object(self):\n         from .views import absolute_kwargs_view\n         res = redirect(absolute_kwargs_view)\n-        self.assertEqual(res['Location'], '/absolute_arg_view/')\n+        self.assertEqual(res.url, '/absolute_arg_view/')\n         self.assertRaises(NoReverseMatch, redirect, absolute_kwargs_view, wrong_argument=None)\n \n "
        },
        {
            "sha": "0a091ed1b73e584dd35d141159363f72f2449248",
            "filename": "tests/regressiontests/views/tests/i18n.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fviews%2Ftests%2Fi18n.py",
            "raw_url": "https://github.com/django/django/raw/e94f405d9499d310ef58b7409a98759a5f5512b0/tests%2Fregressiontests%2Fviews%2Ftests%2Fi18n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fi18n.py?ref=e94f405d9499d310ef58b7409a98759a5f5512b0",
            "patch": "@@ -44,7 +44,7 @@ def test_setlang_unsafe_next(self):\n         lang_code, lang_name = settings.LANGUAGES[0]\n         post_data = dict(language=lang_code, next='//unsafe/redirection/')\n         response = self.client.post('/views/i18n/setlang/', data=post_data)\n-        self.assertEqual(response['Location'], 'http://testserver/')\n+        self.assertEqual(response.url, 'http://testserver/')\n         self.assertEqual(self.client.session['django_language'], lang_code)\n \n     def test_setlang_reversal(self):"
        }
    ],
    "stats": {
        "total": 148,
        "additions": 82,
        "deletions": 66
    }
}