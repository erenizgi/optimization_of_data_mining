{
    "author": "claudep",
    "message": "[py3] Fixed contrib.formtools tests",
    "sha": "363dbd920e9b77da83895598f0fc9f7f835df65d",
    "files": [
        {
            "sha": "f3537f4afd58cfbfcd908f2e7ed9ea1101d37576",
            "filename": "django/contrib/formtools/tests/__init__.py",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/363dbd920e9b77da83895598f0fc9f7f835df65d/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/363dbd920e9b77da83895598f0fc9f7f835df65d/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py?ref=363dbd920e9b77da83895598f0fc9f7f835df65d",
            "patch": "@@ -17,6 +17,7 @@\n from django.contrib.formtools.tests.forms import *\n \n success_string = \"Done was called!\"\n+success_string_encoded = success_string.encode()\n \n class TestFormPreview(preview.FormPreview):\n     def get_context(self, request, form):\n@@ -99,11 +100,11 @@ def test_form_submit(self):\n         # show we previously saw first stage of the form.\n         self.test_data.update({'stage':2})\n         response = self.client.post('/preview/', self.test_data)\n-        self.assertNotEqual(response.content, success_string)\n+        self.assertNotEqual(response.content, success_string_encoded)\n         hash = self.preview.security_hash(None, TestForm(self.test_data))\n         self.test_data.update({'hash': hash})\n         response = self.client.post('/preview/', self.test_data)\n-        self.assertEqual(response.content, success_string)\n+        self.assertEqual(response.content, success_string_encoded)\n \n     def test_bool_submit(self):\n         \"\"\"\n@@ -123,7 +124,7 @@ def test_bool_submit(self):\n         self.test_data.update({'hash': hash, 'bool1': 'False'})\n         with warnings.catch_warnings(record=True):\n             response = self.client.post('/preview/', self.test_data)\n-            self.assertEqual(response.content, success_string)\n+            self.assertEqual(response.content, success_string_encoded)\n \n     def test_form_submit_good_hash(self):\n         \"\"\"\n@@ -134,11 +135,11 @@ def test_form_submit_good_hash(self):\n         # show we previously saw first stage of the form.\n         self.test_data.update({'stage':2})\n         response = self.client.post('/preview/', self.test_data)\n-        self.assertNotEqual(response.content, success_string)\n+        self.assertNotEqual(response.content, success_string_encoded)\n         hash = utils.form_hmac(TestForm(self.test_data))\n         self.test_data.update({'hash': hash})\n         response = self.client.post('/preview/', self.test_data)\n-        self.assertEqual(response.content, success_string)\n+        self.assertEqual(response.content, success_string_encoded)\n \n \n     def test_form_submit_bad_hash(self):\n@@ -151,11 +152,11 @@ def test_form_submit_bad_hash(self):\n         self.test_data.update({'stage':2})\n         response = self.client.post('/preview/', self.test_data)\n         self.assertEqual(response.status_code, 200)\n-        self.assertNotEqual(response.content, success_string)\n+        self.assertNotEqual(response.content, success_string_encoded)\n         hash = utils.form_hmac(TestForm(self.test_data)) + \"bad\"\n         self.test_data.update({'hash': hash})\n         response = self.client.post('/previewpreview/', self.test_data)\n-        self.assertNotEqual(response.content, success_string)\n+        self.assertNotEqual(response.content, success_string_encoded)\n \n \n class FormHmacTests(unittest.TestCase):"
        },
        {
            "sha": "aafc83348479c39c697660fa2c68f18bdb4c0be5",
            "filename": "django/contrib/formtools/wizard/storage/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/363dbd920e9b77da83895598f0fc9f7f835df65d/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/363dbd920e9b77da83895598f0fc9f7f835df65d/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py?ref=363dbd920e9b77da83895598f0fc9f7f835df65d",
            "patch": "@@ -1,6 +1,5 @@\n from django.core.files.uploadedfile import UploadedFile\n from django.utils.datastructures import MultiValueDict\n-from django.utils.encoding import smart_bytes\n from django.utils.functional import lazy_property\n from django.utils import six\n \n@@ -74,8 +73,7 @@ def get_step_files(self, step):\n \n         files = {}\n         for field, field_dict in six.iteritems(wizard_files):\n-            field_dict = dict((smart_bytes(k), v)\n-                              for k, v in six.iteritems(field_dict))\n+            field_dict = field_dict.copy()\n             tmp_name = field_dict.pop('tmp_name')\n             files[field] = UploadedFile(\n                 file=self.file_storage.open(tmp_name), **field_dict)"
        },
        {
            "sha": "ed4a23928f7c186864a67322b91394b27c79c102",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/363dbd920e9b77da83895598f0fc9f7f835df65d/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/363dbd920e9b77da83895598f0fc9f7f835df65d/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=363dbd920e9b77da83895598f0fc9f7f835df65d",
            "patch": "@@ -193,7 +193,7 @@ def get_signed_cookie(self, key, default=RAISE_ERROR, salt='', max_age=None):\n         default argument in which case that value will be returned instead.\n         \"\"\"\n         try:\n-            cookie_value = self.COOKIES[key].encode('utf-8')\n+            cookie_value = self.COOKIES[key]\n         except KeyError:\n             if default is not RAISE_ERROR:\n                 return default"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 10,
        "deletions": 11
    }
}