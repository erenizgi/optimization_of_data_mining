{
    "author": "aaugustin",
    "message": "Made transaction management work even before the first SQL query.\n\nThanks Florian again.",
    "sha": "09ba70f9f1844680ac0e0b3a7c38ff7113cbdb02",
    "files": [
        {
            "sha": "68551aad51f16b59ec0bd1372ac21118aee29153",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/09ba70f9f1844680ac0e0b3a7c38ff7113cbdb02/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/09ba70f9f1844680ac0e0b3a7c38ff7113cbdb02/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=09ba70f9f1844680ac0e0b3a7c38ff7113cbdb02",
            "patch": "@@ -269,6 +269,8 @@ def enter_transaction_management(self, managed=True, forced=False):\n         \"\"\"\n         self.validate_no_atomic_block()\n \n+        self.ensure_connection()\n+\n         self.transaction_state.append(managed)\n \n         if not managed and self.is_dirty() and not forced:\n@@ -286,6 +288,8 @@ def leave_transaction_management(self):\n         \"\"\"\n         self.validate_no_atomic_block()\n \n+        self.ensure_connection()\n+\n         if self.transaction_state:\n             del self.transaction_state[-1]\n         else:"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}