{
    "author": "dmedvinsky",
    "message": "Fixed #18454 -- Added ability to pass a list of signals to `receiver`.\n\nAdded ability to use receiver decorator in the following way:\n\n    @receiver([post_save, post_delete], sender=MyModel)\n    def signals_receiver(sender, **kwargs):\n        ...",
    "sha": "d4da08375b634544b95859d4d4667b8f05e3a29a",
    "files": [
        {
            "sha": "8f57b185c384cf091acb0e905873f76b61a4e62a",
            "filename": "django/dispatch/dispatcher.py",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/d4da08375b634544b95859d4d4667b8f05e3a29a/django%2Fdispatch%2Fdispatcher.py",
            "raw_url": "https://github.com/django/django/raw/d4da08375b634544b95859d4d4667b8f05e3a29a/django%2Fdispatch%2Fdispatcher.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdispatch%2Fdispatcher.py?ref=d4da08375b634544b95859d4d4667b8f05e3a29a",
            "patch": "@@ -257,14 +257,21 @@ def _remove_receiver(self, receiver):\n def receiver(signal, **kwargs):\n     \"\"\"\n     A decorator for connecting receivers to signals. Used by passing in the\n-    signal and keyword arguments to connect::\n+    signal (or list of signals) and keyword arguments to connect::\n \n         @receiver(post_save, sender=MyModel)\n         def signal_receiver(sender, **kwargs):\n             ...\n \n+        @receiver([post_save, post_delete], sender=MyModel)\n+        def signals_receiver(sender, **kwargs):\n+            ...\n+\n     \"\"\"\n     def _decorator(func):\n-        signal.connect(func, **kwargs)\n+        if isinstance(signal, (list, tuple)):\n+            [s.connect(func, **kwargs) for s in signal]\n+        else:\n+            signal.connect(func, **kwargs)\n         return func\n     return _decorator"
        },
        {
            "sha": "2f20f5f9f90ed0d65b95c30fc137d1e62b6d7b45",
            "filename": "docs/releases/1.5.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/d4da08375b634544b95859d4d4667b8f05e3a29a/docs%2Freleases%2F1.5.txt",
            "raw_url": "https://github.com/django/django/raw/d4da08375b634544b95859d4d4667b8f05e3a29a/docs%2Freleases%2F1.5.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.5.txt?ref=d4da08375b634544b95859d4d4667b8f05e3a29a",
            "patch": "@@ -103,6 +103,9 @@ Django 1.5 also includes several smaller improvements worth noting:\n * In the localflavor for Canada, \"pq\" was added to the acceptable codes for\n   Quebec. It's an old abbreviation.\n \n+* The :ref:`receiver <connecting-receiver-functions>` decorator is now able to\n+  connect to more than one signal by supplying a list of signals.\n+\n Backwards incompatible changes in 1.5\n =====================================\n "
        },
        {
            "sha": "fa668cc8c72f6af8fb7f22c57f513f2364e360bd",
            "filename": "docs/topics/signals.txt",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/d4da08375b634544b95859d4d4667b8f05e3a29a/docs%2Ftopics%2Fsignals.txt",
            "raw_url": "https://github.com/django/django/raw/d4da08375b634544b95859d4d4667b8f05e3a29a/docs%2Ftopics%2Fsignals.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fsignals.txt?ref=d4da08375b634544b95859d4d4667b8f05e3a29a",
            "patch": "@@ -52,10 +52,10 @@ called when the signal is sent by using the\n :meth:`.Signal.connect` method:\n \n .. method:: Signal.connect(receiver, [sender=None, weak=True, dispatch_uid=None])\n-    \n+\n     :param receiver: The callback function which will be connected to this\n         signal. See :ref:`receiver-functions` for more information.\n-    \n+\n     :param sender: Specifies a particular sender to receive signals from. See\n         :ref:`connecting-to-specific-signals` for more information.\n \n@@ -129,10 +129,17 @@ receiver:\n \n Now, our ``my_callback`` function will be called each time a request finishes.\n \n+Note that ``receiver`` can also take a list of signals to connect a function\n+to.\n+\n .. versionadded:: 1.3\n \n The ``receiver`` decorator was added in Django 1.3.\n \n+.. versionchanged:: 1.5\n+\n+The ability to pass a list of signals was added.\n+\n .. admonition:: Where should this code live?\n \n     You can put signal handling and registration code anywhere you like.\n@@ -182,7 +189,7 @@ Preventing duplicate signals\n In some circumstances, the module in which you are connecting signals may be\n imported multiple times. This can cause your receiver function to be\n registered more than once, and thus called multiples times for a single signal\n-event. \n+event.\n \n If this behavior is problematic (such as when using signals to\n send an email whenever a model is saved), pass a unique identifier as"
        },
        {
            "sha": "b6d26217e11b1ae2fbd2934731482c423d542809",
            "filename": "tests/regressiontests/dispatch/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/d4da08375b634544b95859d4d4667b8f05e3a29a/tests%2Fregressiontests%2Fdispatch%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/d4da08375b634544b95859d4d4667b8f05e3a29a/tests%2Fregressiontests%2Fdispatch%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdispatch%2Ftests%2F__init__.py?ref=d4da08375b634544b95859d4d4667b8f05e3a29a",
            "patch": "@@ -4,5 +4,5 @@\n \n from __future__ import absolute_import\n \n-from .test_dispatcher import DispatcherTests\n+from .test_dispatcher import DispatcherTests, ReceiverTestCase\n from .test_saferef import SaferefTests"
        },
        {
            "sha": "5f7094d5fab43e0945846d26682509bb0584e210",
            "filename": "tests/regressiontests/dispatch/tests/test_dispatcher.py",
            "status": "modified",
            "additions": 29,
            "deletions": 1,
            "changes": 30,
            "blob_url": "https://github.com/django/django/blob/d4da08375b634544b95859d4d4667b8f05e3a29a/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py",
            "raw_url": "https://github.com/django/django/raw/d4da08375b634544b95859d4d4667b8f05e3a29a/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py?ref=d4da08375b634544b95859d4d4667b8f05e3a29a",
            "patch": "@@ -2,7 +2,7 @@\n import sys\n import time\n \n-from django.dispatch import Signal\n+from django.dispatch import Signal, receiver\n from django.utils import unittest\n \n \n@@ -33,6 +33,8 @@ def a(self, val, **kwargs):\n         return val\n \n a_signal = Signal(providing_args=[\"val\"])\n+b_signal = Signal(providing_args=[\"val\"])\n+c_signal = Signal(providing_args=[\"val\"])\n \n class DispatcherTests(unittest.TestCase):\n     \"\"\"Test suite for dispatcher (barely started)\"\"\"\n@@ -123,3 +125,29 @@ def testDisconnection(self):\n         garbage_collect()\n         a_signal.disconnect(receiver_3)\n         self._testIsClean(a_signal)\n+\n+\n+class ReceiverTestCase(unittest.TestCase):\n+    \"\"\"\n+    Test suite for receiver.\n+\n+    \"\"\"\n+    def testReceiverSingleSignal(self):\n+        @receiver(a_signal)\n+        def f(val, **kwargs):\n+            self.state = val\n+        self.state = False\n+        a_signal.send(sender=self, val=True)\n+        self.assertTrue(self.state)\n+\n+    def testReceiverSignalList(self):\n+        @receiver([a_signal, b_signal, c_signal])\n+        def f(val, **kwargs):\n+            self.state.append(val)\n+        self.state = []\n+        a_signal.send(sender=self, val='a')\n+        c_signal.send(sender=self, val='c')\n+        b_signal.send(sender=self, val='b')\n+        self.assertIn('a', self.state)\n+        self.assertIn('b', self.state)\n+        self.assertIn('c', self.state)"
        }
    ],
    "stats": {
        "total": 59,
        "additions": 52,
        "deletions": 7
    }
}