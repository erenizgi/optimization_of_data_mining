{
    "author": "honzakral",
    "message": "Fixed #14572 -- generic_inlineformset_factory shouldn't specify default formfield_callback. Thanks prestontimmons!\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16234 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ee8f6ca4054dc74f2846a3639dcdb7dc8c8b18b3",
    "files": [
        {
            "sha": "b025f5aa95ba6c8aadc1cc1acb60129d9e0ef511",
            "filename": "django/contrib/contenttypes/generic.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ee8f6ca4054dc74f2846a3639dcdb7dc8c8b18b3/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py",
            "raw_url": "https://github.com/django/django/raw/ee8f6ca4054dc74f2846a3639dcdb7dc8c8b18b3/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py?ref=ee8f6ca4054dc74f2846a3639dcdb7dc8c8b18b3",
            "patch": "@@ -362,7 +362,7 @@ def generic_inlineformset_factory(model, form=ModelForm,\n                                   fields=None, exclude=None,\n                                   extra=3, can_order=False, can_delete=True,\n                                   max_num=None,\n-                                  formfield_callback=lambda f: f.formfield()):\n+                                  formfield_callback=None):\n     \"\"\"\n     Returns an ``GenericInlineFormSet`` for the given kwargs.\n "
        },
        {
            "sha": "a2bf3bedf64ed11579b3357b5ad9bc99d7f0caf2",
            "filename": "tests/modeltests/generic_relations/tests.py",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/ee8f6ca4054dc74f2846a3639dcdb7dc8c8b18b3/tests%2Fmodeltests%2Fgeneric_relations%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ee8f6ca4054dc74f2846a3639dcdb7dc8c8b18b3/tests%2Fmodeltests%2Fgeneric_relations%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fgeneric_relations%2Ftests.py?ref=ee8f6ca4054dc74f2846a3639dcdb7dc8c8b18b3",
            "patch": "@@ -1,3 +1,4 @@\n+from django import forms\n from django.contrib.contenttypes.generic import generic_inlineformset_factory\n from django.contrib.contenttypes.models import ContentType\n from django.test import TestCase\n@@ -221,3 +222,23 @@ def test_generic_inline_formsets(self):\n         formset = GenericFormSet(instance=lion, prefix='x')\n         self.assertEqual(u''.join(form.as_p() for form in formset.forms), u\"\"\"<p><label for=\"id_x-0-tag\">Tag:</label> <input id=\"id_x-0-tag\" type=\"text\" name=\"x-0-tag\" maxlength=\"50\" /></p>\n <p><label for=\"id_x-0-DELETE\">Delete:</label> <input type=\"checkbox\" name=\"x-0-DELETE\" id=\"id_x-0-DELETE\" /><input type=\"hidden\" name=\"x-0-id\" id=\"id_x-0-id\" /></p>\"\"\")\n+\n+\n+class CustomWidget(forms.CharField):\n+    pass\n+\n+class TaggedItemForm(forms.ModelForm):\n+    class Meta:\n+        model = TaggedItem\n+        widgets = {'tag': CustomWidget}\n+\n+class GenericInlineFormsetTest(TestCase):\n+    \"\"\"\n+    Regression for #14572: Using base forms with widgets\n+    defined in Meta should not raise errors.\n+    \"\"\"\n+\n+    def test_generic_inlineformset_factory(self):\n+        Formset = generic_inlineformset_factory(TaggedItem, TaggedItemForm)\n+        form = Formset().forms[0]\n+        self.assertTrue(isinstance(form['tag'].field.widget, CustomWidget))"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 22,
        "deletions": 1
    }
}