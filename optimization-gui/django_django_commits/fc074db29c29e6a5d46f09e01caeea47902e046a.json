{
    "author": "apollo13",
    "message": "Adjusted runtests to the new layout.",
    "sha": "fc074db29c29e6a5d46f09e01caeea47902e046a",
    "files": [
        {
            "sha": "a07f514684f5735e8276aa1b8d084107eeb43fc1",
            "filename": "tests/runtests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 12,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/fc074db29c29e6a5d46f09e01caeea47902e046a/tests%2Fruntests.py",
            "raw_url": "https://github.com/django/django/raw/fc074db29c29e6a5d46f09e01caeea47902e046a/tests%2Fruntests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fruntests.py?ref=fc074db29c29e6a5d46f09e01caeea47902e046a",
            "patch": "@@ -10,15 +10,11 @@\n from django.utils import six\n \n CONTRIB_DIR_NAME = 'django.contrib'\n-MODEL_TESTS_DIR_NAME = 'modeltests'\n-REGRESSION_TESTS_DIR_NAME = 'regressiontests'\n \n TEST_TEMPLATE_DIR = 'templates'\n \n RUNTESTS_DIR = os.path.dirname(upath(__file__))\n CONTRIB_DIR = os.path.dirname(upath(contrib.__file__))\n-MODEL_TEST_DIR = os.path.join(RUNTESTS_DIR, MODEL_TESTS_DIR_NAME)\n-REGRESSION_TEST_DIR = os.path.join(RUNTESTS_DIR, REGRESSION_TESTS_DIR_NAME)\n TEMP_DIR = tempfile.mkdtemp(prefix='django_')\n os.environ['DJANGO_TEST_TEMP_DIR'] = TEMP_DIR\n \n@@ -37,9 +33,9 @@\n     'django.contrib.admindocs',\n     'django.contrib.staticfiles',\n     'django.contrib.humanize',\n-    'regressiontests.staticfiles_tests',\n-    'regressiontests.staticfiles_tests.apps.test',\n-    'regressiontests.staticfiles_tests.apps.no_label',\n+    'staticfiles_tests',\n+    'staticfiles_tests.apps.test',\n+    'staticfiles_tests.apps.no_label',\n ]\n \n def geodjango(settings):\n@@ -51,12 +47,10 @@ def geodjango(settings):\n def get_test_modules():\n     modules = []\n     for loc, dirpath in (\n-        (MODEL_TESTS_DIR_NAME, MODEL_TEST_DIR),\n-        (REGRESSION_TESTS_DIR_NAME, REGRESSION_TEST_DIR),\n+        (None, RUNTESTS_DIR),\n         (CONTRIB_DIR_NAME, CONTRIB_DIR)):\n         for f in os.listdir(dirpath):\n-            if (f.startswith('__init__') or\n-                f.startswith('.') or\n+            if ('.' in f or\n                 # Python 3 byte code dirs (PEP 3147)\n                 f == '__pycache__' or\n                 f.startswith('sql') or\n@@ -118,7 +112,10 @@ def setup(verbosity, test_labels):\n         settings.INSTALLED_APPS.extend(['django.contrib.gis', 'django.contrib.sitemaps'])\n \n     for module_dir, module_name in test_modules:\n-        module_label = '.'.join([module_dir, module_name])\n+        if module_dir:\n+            module_label = '.'.join([module_dir, module_name])\n+        else:\n+            module_label = module_name\n         # if the module was named on the command line, or\n         # no modules were named (i.e., run all), import\n         # this module and add it to the list to test."
        }
    ],
    "stats": {
        "total": 21,
        "additions": 9,
        "deletions": 12
    }
}