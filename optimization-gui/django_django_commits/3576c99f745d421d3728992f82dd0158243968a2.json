{
    "author": "aaugustin",
    "message": "Fixed #17808 -- Explained why fixtures can trigger RuntimeWarnings after enabling time zone support, and how to fix them.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17637 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "3576c99f745d421d3728992f82dd0158243968a2",
    "files": [
        {
            "sha": "9f1fcf0cef2f128b20d826be86aa1d0f72521618",
            "filename": "docs/topics/i18n/timezones.txt",
            "status": "modified",
            "additions": 32,
            "deletions": 5,
            "changes": 37,
            "blob_url": "https://github.com/django/django/blob/3576c99f745d421d3728992f82dd0158243968a2/docs%2Ftopics%2Fi18n%2Ftimezones.txt",
            "raw_url": "https://github.com/django/django/raw/3576c99f745d421d3728992f82dd0158243968a2/docs%2Ftopics%2Fi18n%2Ftimezones.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Ftimezones.txt?ref=3576c99f745d421d3728992f82dd0158243968a2",
            "patch": "@@ -380,8 +380,8 @@ Migration guide\n Here's how to migrate a project that was started before Django supported time\n zones.\n \n-Data\n-----\n+Database\n+--------\n \n PostgreSQL\n ~~~~~~~~~~\n@@ -428,15 +428,42 @@ code: :func:`~django.utils.timezone.now`,\n :func:`~django.utils.timezone.make_naive`.\n \n Finally, in order to help you locate code that needs upgrading, Django raises\n-a warning when you attempt to save a naive datetime to the database. During\n-development, you can turn such warnings into exceptions and get a traceback\n-by adding the following to your settings file::\n+a warning when you attempt to save a naive datetime to the database::\n+\n+    RuntimeWarning: DateTimeField received a naive datetime (2012-01-01 00:00:00) while time zone support is active.\n+\n+During development, you can turn such warnings into exceptions and get a\n+traceback by adding the following to your settings file::\n \n     import warnings\n     warnings.filterwarnings(\n             'error', r\"DateTimeField received a naive datetime\",\n             RuntimeWarning, r'django\\.db\\.models\\.fields')\n \n+Fixtures\n+--------\n+\n+When serializing an aware datetime, the UTC offset is included, like this::\n+\n+    \"2011-09-01T13:20:30+03:00\"\n+\n+For a naive datetime, it obviously isn't::\n+\n+    \"2011-09-01T13:20:30\"\n+\n+For models with :class:`~django.db.models.DateTimeField`\\ s, this difference\n+makes it impossible to write a fixture that works both with and without time\n+zone support.\n+\n+Fixtures generated with ``USE_TZ = False``, or before Django 1.4, use the\n+\"naive\" format. If your project contains such fixtures, after you enable time\n+zone support, you'll see :exc:`RuntimeWarning`\\ s when you load them. To get\n+rid of the warnings, you must convert your fixtures to the \"aware\" format.\n+\n+You can regenerate fixtures with :djadmin:`loaddata` then :djadmin:`dumpdata`.\n+Or, if they're small enough, you can simply edit them to add the UTC offset\n+that matches your :setting:`TIME_ZONE` to each serialized datetime.\n+\n .. _pytz: http://pytz.sourceforge.net/\n .. _these issues: http://pytz.sourceforge.net/#problems-with-localtime\n .. _tz database: http://en.wikipedia.org/wiki/Tz_database"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 32,
        "deletions": 5
    }
}