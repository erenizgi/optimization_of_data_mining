{
    "author": "aaugustin",
    "message": "Silenced warnings in the tests of deprecated features.",
    "sha": "4e5369a5962e59877ade8975620d73485061a706",
    "files": [
        {
            "sha": "da0e45a55e790c484abc6677d1176f1733c8d108",
            "filename": "django/contrib/auth/tests/models.py",
            "status": "modified",
            "additions": 17,
            "deletions": 9,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/4e5369a5962e59877ade8975620d73485061a706/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/4e5369a5962e59877ade8975620d73485061a706/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py?ref=4e5369a5962e59877ade8975620d73485061a706",
            "patch": "@@ -1,3 +1,5 @@\n+import warnings\n+\n from django.conf import settings\n from django.contrib.auth import get_user_model\n from django.contrib.auth.models import (Group, User, SiteProfileNotAvailable,\n@@ -17,21 +19,27 @@ def test_site_profile_not_available(self):\n \n         # calling get_profile without AUTH_PROFILE_MODULE set\n         del settings.AUTH_PROFILE_MODULE\n-        with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n-                \"You need to set AUTH_PROFILE_MODULE in your project\"):\n-            user.get_profile()\n+        with warnings.catch_warnings():\n+            warnings.simplefilter(\"ignore\", DeprecationWarning)\n+            with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n+                    \"You need to set AUTH_PROFILE_MODULE in your project\"):\n+                user.get_profile()\n \n         # Bad syntax in AUTH_PROFILE_MODULE:\n         settings.AUTH_PROFILE_MODULE = 'foobar'\n-        with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n-                \"app_label and model_name should be separated by a dot\"):\n-            user.get_profile()\n+        with warnings.catch_warnings():\n+            warnings.simplefilter(\"ignore\", DeprecationWarning)\n+            with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n+                    \"app_label and model_name should be separated by a dot\"):\n+                user.get_profile()\n \n         # module that doesn't exist\n         settings.AUTH_PROFILE_MODULE = 'foo.bar'\n-        with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n-                \"Unable to load the profile model\"):\n-            user.get_profile()\n+        with warnings.catch_warnings():\n+            warnings.simplefilter(\"ignore\", DeprecationWarning)\n+            with six.assertRaisesRegex(self, SiteProfileNotAvailable,\n+                    \"Unable to load the profile model\"):\n+                user.get_profile()\n \n \n @skipIfCustomUser"
        },
        {
            "sha": "27d65fecb1e58a3cef89d2aa01291df6c94e7821",
            "filename": "tests/modeltests/select_related/tests.py",
            "status": "modified",
            "additions": 22,
            "deletions": 10,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/4e5369a5962e59877ade8975620d73485061a706/tests%2Fmodeltests%2Fselect_related%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/4e5369a5962e59877ade8975620d73485061a706/tests%2Fmodeltests%2Fselect_related%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fselect_related%2Ftests.py?ref=4e5369a5962e59877ade8975620d73485061a706",
            "patch": "@@ -1,5 +1,7 @@\n from __future__ import absolute_import, unicode_literals\n \n+import warnings\n+\n from django.test import TestCase\n \n from .models import Domain, Kingdom, Phylum, Klass, Order, Family, Genus, Species\n@@ -53,7 +55,9 @@ def test_access_fks_with_select_related(self):\n         extra queries\n         \"\"\"\n         with self.assertNumQueries(1):\n-            person = Species.objects.select_related(depth=10).get(name=\"sapiens\")\n+            with warnings.catch_warnings():\n+                warnings.simplefilter(\"ignore\", DeprecationWarning)\n+                person = Species.objects.select_related(depth=10).get(name=\"sapiens\")\n             domain = person.genus.family.order.klass.phylum.kingdom.domain\n             self.assertEqual(domain.name, 'Eukaryota')\n \n@@ -94,7 +98,9 @@ def test_depth(self, depth=1, expected=7):\n         \"\"\"\n         # Notice: one fewer queries than above because of depth=1\n         with self.assertNumQueries(expected):\n-            pea = Species.objects.select_related(depth=depth).get(name=\"sativum\")\n+            with warnings.catch_warnings():\n+                warnings.simplefilter(\"ignore\", DeprecationWarning)\n+                pea = Species.objects.select_related(depth=depth).get(name=\"sativum\")\n             self.assertEqual(\n                 pea.genus.family.order.klass.phylum.kingdom.domain.name,\n                 'Eukaryota'\n@@ -113,14 +119,18 @@ def test_list_with_depth(self):\n         particular level. This can be used on lists as well.\n         \"\"\"\n         with self.assertNumQueries(5):\n-            world = Species.objects.all().select_related(depth=2)\n-            orders = [o.genus.family.order.name for o in world]\n+            with warnings.catch_warnings():\n+                warnings.simplefilter(\"ignore\", DeprecationWarning)\n+                world = Species.objects.all().select_related(depth=2)\n+                orders = [o.genus.family.order.name for o in world]\n             self.assertEqual(sorted(orders),\n                 ['Agaricales', 'Diptera', 'Fabales', 'Primates'])\n \n     def test_select_related_with_extra(self):\n-        s = Species.objects.all().select_related(depth=1)\\\n-            .extra(select={'a': 'select_related_species.id + 10'})[0]\n+        with warnings.catch_warnings():\n+            warnings.simplefilter(\"ignore\", DeprecationWarning)\n+            s = Species.objects.all().select_related(depth=1)\\\n+                .extra(select={'a': 'select_related_species.id + 10'})[0]\n         self.assertEqual(s.id + 10, s.a)\n \n     def test_certain_fields(self):\n@@ -156,7 +166,9 @@ def test_field_traversal(self):\n             self.assertEqual(s, 'Diptera')\n \n     def test_depth_fields_fails(self):\n-        self.assertRaises(TypeError,\n-            Species.objects.select_related,\n-            'genus__family__order', depth=4\n-        )\n+        with warnings.catch_warnings():\n+            warnings.simplefilter(\"ignore\", DeprecationWarning)\n+            self.assertRaises(TypeError,\n+                Species.objects.select_related,\n+                'genus__family__order', depth=4\n+            )"
        },
        {
            "sha": "a79c9c0aa10beb1b4583b4cc5d963b353fd28fe7",
            "filename": "tests/regressiontests/multiple_database/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/4e5369a5962e59877ade8975620d73485061a706/tests%2Fregressiontests%2Fmultiple_database%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/4e5369a5962e59877ade8975620d73485061a706/tests%2Fregressiontests%2Fmultiple_database%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmultiple_database%2Ftests.py?ref=4e5369a5962e59877ade8975620d73485061a706",
            "patch": "@@ -3,6 +3,7 @@\n import datetime\n import pickle\n from operator import attrgetter\n+import warnings\n \n from django.contrib.auth.models import User\n from django.contrib.contenttypes.models import ContentType\n@@ -1612,8 +1613,10 @@ def test_user_profiles(self):\n         bob_profile = UserProfile(user=bob, flavor='crunchy frog')\n         bob_profile.save()\n \n-        self.assertEqual(alice.get_profile().flavor, 'chocolate')\n-        self.assertEqual(bob.get_profile().flavor, 'crunchy frog')\n+        with warnings.catch_warnings():\n+            warnings.simplefilter(\"ignore\", DeprecationWarning)\n+            self.assertEqual(alice.get_profile().flavor, 'chocolate')\n+            self.assertEqual(bob.get_profile().flavor, 'crunchy frog')\n \n class AntiPetRouter(object):\n     # A router that only expresses an opinion on syncdb,"
        }
    ],
    "stats": {
        "total": 65,
        "additions": 44,
        "deletions": 21
    }
}