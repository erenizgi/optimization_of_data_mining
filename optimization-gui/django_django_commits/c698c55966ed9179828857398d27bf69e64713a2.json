{
    "author": "claudep",
    "message": "Created special PostgreSQL text indexes when unique is True\n\nRefs #19441.",
    "sha": "c698c55966ed9179828857398d27bf69e64713a2",
    "files": [
        {
            "sha": "88afd5f52f28587cea45fc3d7113f8d00916ef13",
            "filename": "django/db/backends/postgresql_psycopg2/creation.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c698c55966ed9179828857398d27bf69e64713a2/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/c698c55966ed9179828857398d27bf69e64713a2/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fcreation.py?ref=c698c55966ed9179828857398d27bf69e64713a2",
            "patch": "@@ -42,7 +42,7 @@ def sql_table_creation_suffix(self):\n \n     def sql_indexes_for_field(self, model, f, style):\n         output = []\n-        if f.db_index:\n+        if f.db_index or f.unique:\n             qn = self.connection.ops.quote_name\n             db_table = model._meta.db_table\n             tablespace = f.db_tablespace or model._meta.db_tablespace"
        },
        {
            "sha": "77b838622b50b05a5987d80f933dde412f4ffd69",
            "filename": "docs/ref/models/fields.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/c698c55966ed9179828857398d27bf69e64713a2/docs%2Fref%2Fmodels%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/c698c55966ed9179828857398d27bf69e64713a2/docs%2Fref%2Fmodels%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Ffields.txt?ref=c698c55966ed9179828857398d27bf69e64713a2",
            "patch": "@@ -272,6 +272,9 @@ field, a :exc:`django.db.IntegrityError` will be raised by the model's\n This option is valid on all field types except :class:`ManyToManyField` and\n :class:`FileField`.\n \n+Note that when ``unique`` is ``True``, you don't need to specify\n+:attr:`~Field.db_index`, because ``unique`` implies the creation of an index.\n+\n ``unique_for_date``\n -------------------\n "
        },
        {
            "sha": "e38eb005dbb0fa8c67e93ba8fe4e4a9c1b927d1f",
            "filename": "tests/regressiontests/indexes/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/c698c55966ed9179828857398d27bf69e64713a2/tests%2Fregressiontests%2Findexes%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/c698c55966ed9179828857398d27bf69e64713a2/tests%2Fregressiontests%2Findexes%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Findexes%2Fmodels.py?ref=c698c55966ed9179828857398d27bf69e64713a2",
            "patch": "@@ -17,4 +17,4 @@ class Meta:\n     class IndexedArticle(models.Model):\n         headline = models.CharField(max_length=100, db_index=True)\n         body = models.TextField(db_index=True)\n-        slug = models.CharField(max_length=40, unique=True, db_index=True)\n+        slug = models.CharField(max_length=40, unique=True)"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 5,
        "deletions": 2
    }
}