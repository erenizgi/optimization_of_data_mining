{
    "author": "jacobian",
    "message": "Merge branch 'deprecate-comments'",
    "sha": "faabf3614e27c2b616bf4730272fafa9627652d8",
    "files": [
        {
            "sha": "007b77ad7b59781d0fb158f87daa9786c7d6acd7",
            "filename": "django/contrib/comments/__init__.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/django%2Fcontrib%2Fcomments%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/django%2Fcontrib%2Fcomments%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcomments%2F__init__.py?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -1,10 +1,13 @@\n+import warnings\n from django.conf import settings\n from django.core import urlresolvers\n from django.core.exceptions import ImproperlyConfigured\n from django.contrib.comments.models import Comment\n from django.contrib.comments.forms import CommentForm\n from django.utils.importlib import import_module\n \n+warnings.warn(\"django.contrib.comments is deprecated and will be removed before Django 1.8.\", PendingDeprecationWarning)\n+\n DEFAULT_COMMENTS_APP = 'django.contrib.comments'\n \n def get_comment_app():"
        },
        {
            "sha": "197856ea4b01bce83556d0dfa8cbc51aaa262ca1",
            "filename": "docs/index.txt",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Findex.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -254,7 +254,6 @@ applications:\n * :doc:`Logging <topics/logging>`\n * :doc:`Sending emails <topics/email>`\n * :doc:`Syndication feeds (RSS/Atom) <ref/contrib/syndication>`\n-* :doc:`Comments <ref/contrib/comments/index>`, :doc:`comment moderation <ref/contrib/comments/moderation>` and :doc:`custom comments <ref/contrib/comments/custom>`\n * :doc:`Pagination <topics/pagination>`\n * :doc:`Messages framework <ref/contrib/messages>`\n * :doc:`Serialization <topics/serialization>`"
        },
        {
            "sha": "b9948affcbe4b86f8496cee2b518e77de74d3d97",
            "filename": "docs/internals/deprecation.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Finternals%2Fdeprecation.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Finternals%2Fdeprecation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fdeprecation.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -365,6 +365,8 @@ these changes.\n   - ``django.db.transaction.commit_unless_managed()``\n   - ``django.db.transaction.rollback_unless_managed()``\n \n+* ``django.contrib.comments`` will be removed.\n+\n 2.0\n ---\n "
        },
        {
            "sha": "fd70a6a224368e0743ad51b2141ff9889dcbb0b6",
            "filename": "docs/ref/contrib/comments/custom.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fcustom.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fcustom.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcomments%2Fcustom.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -4,6 +4,18 @@ Customizing the comments framework\n \n .. currentmodule:: django.contrib.comments\n \n+.. warning::\n+\n+    Django's comment framework has been deprecated and is no longer supported.\n+    Most users will be better served with a custom solution, or a hosted\n+    product like Disqus__.\n+\n+    The code formerly known as ``django.contrib.comments`` is `still available\n+    in an external repository`__.\n+\n+    __ https://disqus.com/\n+    __ https://github.com/django/django-contrib-comments\n+\n If the built-in comment framework doesn't quite fit your needs, you can extend\n the comment app's behavior to add custom data and logic. The comments framework\n lets you extend the built-in comment model, the built-in comment form, and the"
        },
        {
            "sha": "abf79c5f1420334739b8067abe5e81b343f0b0ba",
            "filename": "docs/ref/contrib/comments/example.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fexample.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fexample.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcomments%2Fexample.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -4,6 +4,18 @@\n Example of using the built-in comments app\n ===========================================\n \n+.. warning::\n+\n+    Django's comment framework has been deprecated and is no longer supported.\n+    Most users will be better served with a custom solution, or a hosted\n+    product like Disqus__.\n+\n+    The code formerly known as ``django.contrib.comments`` is `still available\n+    in an external repository`__.\n+\n+    __ https://disqus.com/\n+    __ https://github.com/django/django-contrib-comments\n+\n Follow the first three steps of the quick start guide in the\n :doc:`documentation </ref/contrib/comments/index>`.\n "
        },
        {
            "sha": "f2624ca8709633e0eb6449a686d3da4ec2d4ea3b",
            "filename": "docs/ref/contrib/comments/forms.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fforms.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fforms.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcomments%2Fforms.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -5,6 +5,18 @@ Comment form classes\n .. module:: django.contrib.comments.forms\n    :synopsis: Forms for dealing with the built-in comment model.\n \n+.. warning::\n+\n+    Django's comment framework has been deprecated and is no longer supported.\n+    Most users will be better served with a custom solution, or a hosted\n+    product like Disqus__.\n+\n+    The code formerly known as ``django.contrib.comments`` is `still available\n+    in an external repository`__.\n+\n+    __ https://disqus.com/\n+    __ https://github.com/django/django-contrib-comments\n+\n The ``django.contrib.comments.forms`` module contains a handful of forms\n you'll use when writing custom views dealing with comments, or when writing\n :doc:`custom comment apps </ref/contrib/comments/custom>`.\n@@ -43,4 +55,4 @@ forms that you can subclass to reuse pieces of the form handling logic:\n    Handles the details of the comment itself.\n \n    This class contains the ``name``, ``email``, ``url``, and the ``comment``\n-   field itself, along with the associated validation logic.\n\\ No newline at end of file\n+   field itself, along with the associated validation logic."
        },
        {
            "sha": "6db69d816844f09bb5c83444ae05d0e26a5b5da4",
            "filename": "docs/ref/contrib/comments/index.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcomments%2Findex.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -7,6 +7,18 @@ Django's comments framework\n \n .. highlightlang:: html+django\n \n+.. warning::\n+\n+    Django's comment framework has been deprecated and is no longer supported.\n+    Most users will be better served with a custom solution, or a hosted\n+    product like Disqus__.\n+\n+    The code formerly known as ``django.contrib.comments`` is `still available\n+    in an external repository`__.\n+\n+    __ https://disqus.com/\n+    __ https://github.com/django/django-contrib-comments\n+\n Django includes a simple, yet customizable comments framework. The built-in\n comments framework can be used to attach comments to any model, so you can use\n it for comments on blog entries, photos, book chapters, or anything else."
        },
        {
            "sha": "cae9c119719bbe19d74c4587bd4ae8458c4c1fd5",
            "filename": "docs/ref/contrib/comments/models.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fmodels.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fmodels.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcomments%2Fmodels.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -5,6 +5,18 @@ The built-in comment models\n .. module:: django.contrib.comments.models\n    :synopsis: The built-in comment models\n \n+.. warning::\n+\n+    Django's comment framework has been deprecated and is no longer supported.\n+    Most users will be better served with a custom solution, or a hosted\n+    product like Disqus__.\n+\n+    The code formerly known as ``django.contrib.comments`` is `still available\n+    in an external repository`__.\n+\n+    __ https://disqus.com/\n+    __ https://github.com/django/django-contrib-comments\n+\n .. class:: Comment\n \n     Django's built-in comment model. Has the following fields:"
        },
        {
            "sha": "796e257200caa7af52f1d2582618b441175fdea8",
            "filename": "docs/ref/contrib/comments/moderation.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fmoderation.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fmoderation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcomments%2Fmoderation.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -5,6 +5,18 @@ Generic comment moderation\n .. module:: django.contrib.comments.moderation\n    :synopsis: Support for automatic comment moderation.\n \n+.. warning::\n+\n+    Django's comment framework has been deprecated and is no longer supported.\n+    Most users will be better served with a custom solution, or a hosted\n+    product like Disqus__.\n+\n+    The code formerly known as ``django.contrib.comments`` is `still available\n+    in an external repository`__.\n+\n+    __ https://disqus.com/\n+    __ https://github.com/django/django-contrib-comments\n+\n Django's bundled comments application is extremely useful on its own,\n but the amount of comment spam circulating on the Web today\n essentially makes it necessary to have some sort of automatic"
        },
        {
            "sha": "f9df8980d77bf13b46084a8eb7962d3dddf403fe",
            "filename": "docs/ref/contrib/comments/signals.txt",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fsignals.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Fref%2Fcontrib%2Fcomments%2Fsignals.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcomments%2Fsignals.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -5,6 +5,18 @@ Signals sent by the comments app\n .. module:: django.contrib.comments.signals\n    :synopsis: Signals sent by the comment module.\n \n+.. warning::\n+\n+    Django's comment framework has been deprecated and is no longer supported.\n+    Most users will be better served with a custom solution, or a hosted\n+    product like Disqus__.\n+\n+    The code formerly known as ``django.contrib.comments`` is `still available\n+    in an external repository`__.\n+\n+    __ https://disqus.com/\n+    __ https://github.com/django/django-contrib-comments\n+\n The comment app sends a series of :doc:`signals </topics/signals>` to allow for\n comment moderation and similar activities. See :doc:`the introduction to signals\n </topics/signals>` for information about how to register for and receive these"
        },
        {
            "sha": "eec55c663292ac8deba7956db137a9bdea5fa66a",
            "filename": "docs/releases/1.6.txt",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Freleases%2F1.6.txt",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/docs%2Freleases%2F1.6.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.6.txt?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -271,6 +271,19 @@ current APIs are deprecated:\n The reasons for this change and the upgrade path are described in the\n :ref:`transactions documentation <transactions-upgrading-from-1.5>`.\n \n+``django.contrib.comments``\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Django's comment framework has been deprecated and is no longer supported. It\n+will be available in Django 1.6 and 1.7, and removed in Django 1.8. Most users\n+will be better served with a custom solution, or a hosted product like Disqus__.\n+\n+The code formerly known as ``django.contrib.comments`` is `still available\n+in an external repository`__.\n+\n+__ https://disqus.com/\n+__ https://github.com/django/django-contrib-comments\n+\n Changes to :ttag:`cycle` and :ttag:`firstof`\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "6c7a882e2548080d914e9574d5e71fc6ad244174",
            "filename": "tests/comment_tests/tests/comment_utils_moderators_tests.py",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/tests%2Fcomment_tests%2Ftests%2Fcomment_utils_moderators_tests.py",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/tests%2Fcomment_tests%2Ftests%2Fcomment_utils_moderators_tests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fcomment_tests%2Ftests%2Fcomment_utils_moderators_tests.py?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -4,6 +4,7 @@\n from django.contrib.comments.moderation import (moderator, CommentModerator,\n     AlreadyModerated)\n from django.core import mail\n+from django.test.utils import override_settings\n \n from . import CommentTestCase\n from ..models import Entry\n@@ -67,9 +68,10 @@ def testRegisterExistingModel(self):\n         self.assertRaises(AlreadyModerated, moderator.register, Entry, EntryModerator1)\n \n     def testEmailNotification(self):\n-        moderator.register(Entry, EntryModerator1)\n-        self.createSomeComments()\n-        self.assertEqual(len(mail.outbox), 2)\n+        with override_settings(MANAGERS=(\"test@example.com\",)):\n+            moderator.register(Entry, EntryModerator1)\n+            self.createSomeComments()\n+            self.assertEqual(len(mail.outbox), 2)\n \n     def testCommentsEnabled(self):\n         moderator.register(Entry, EntryModerator2)\n@@ -94,4 +96,4 @@ def testAutoModerateFieldImmediate(self):\n     def testAutoCloseFieldImmediate(self):\n         moderator.register(Entry, EntryModerator6)\n         c1, c2 = self.createSomeComments()\n-        self.assertEqual(Comment.objects.all().count(), 0)\n\\ No newline at end of file\n+        self.assertEqual(Comment.objects.all().count(), 0)"
        },
        {
            "sha": "f0cba38b806917cc5d8fee1aa43053cb95603f04",
            "filename": "tests/runtests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/faabf3614e27c2b616bf4730272fafa9627652d8/tests%2Fruntests.py",
            "raw_url": "https://github.com/django/django/raw/faabf3614e27c2b616bf4730272fafa9627652d8/tests%2Fruntests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fruntests.py?ref=faabf3614e27c2b616bf4730272fafa9627652d8",
            "patch": "@@ -80,10 +80,6 @@ def setup(verbosity, test_labels):\n     settings.TEMPLATE_DIRS = (os.path.join(RUNTESTS_DIR, TEST_TEMPLATE_DIR),)\n     settings.LANGUAGE_CODE = 'en'\n     settings.SITE_ID = 1\n-    # For testing comment-utils, we require the MANAGERS attribute\n-    # to be set, so that a test email is sent out which we catch\n-    # in our tests.\n-    settings.MANAGERS = (\"admin@djangoproject.com\",)\n \n     # Load all the ALWAYS_INSTALLED_APPS.\n     get_apps()"
        }
    ],
    "stats": {
        "total": 119,
        "additions": 109,
        "deletions": 10
    }
}