{
    "author": "kmtracey",
    "message": "Fix #16570: Restore ability to have decimal fields where max_digits equals decimal_places. Thanks dcwatson and kenth.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17089 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5",
    "files": [
        {
            "sha": "5889065fefaa2dc50ae062f300bc6dbbb7fad5ab",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5",
            "patch": "@@ -528,7 +528,7 @@ answer newbie questions, and generally made Django that much better:\n     wam-djangobug@wamber.net\n     Wang Chun <wangchun@exoweb.net>\n     Filip Wasilewski <filip.wasilewski@gmail.com>\n-    Dan Watson <http://theidioteque.net/>\n+    Dan Watson <http://danwatson.net/>\n     Joel Watts <joel@joelwatts.com>\n     Lakin Wecker <lakin@structuredabstraction.com>\n     Chris Wesseling <Chris.Wesseling@cwi.nl>"
        },
        {
            "sha": "3aaeaa94c88993bc75e6e2de5f6ee8ea1c346331",
            "filename": "django/core/management/validation.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "raw_url": "https://github.com/django/django/raw/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fvalidation.py?ref=efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5",
            "patch": "@@ -72,9 +72,9 @@ def get_validation_errors(outfile, app=None):\n                         mdigits_ok = True\n                 except (ValueError, TypeError):\n                     e.add(opts, mdigits_msg % f.name)\n-                invalid_values_msg = '\"%s\": DecimalFields require a \"max_digits\" attribute value that is greater than the value of the \"decimal_places\" attribute.'\n+                invalid_values_msg = '\"%s\": DecimalFields require a \"max_digits\" attribute value that is greater than or equal to the value of the \"decimal_places\" attribute.'\n                 if decimalp_ok and mdigits_ok:\n-                    if decimal_places >= max_digits:\n+                    if decimal_places > max_digits:\n                         e.add(opts, invalid_values_msg % f.name)\n             if isinstance(f, models.FileField) and not f.upload_to:\n                 e.add(opts, '\"%s\": FileFields require an \"upload_to\" attribute.' % f.name)"
        },
        {
            "sha": "e0cf92f9c39e3436bd492d57bdffc80781862975",
            "filename": "docs/ref/models/fields.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/docs%2Fref%2Fmodels%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/docs%2Fref%2Fmodels%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Ffields.txt?ref=efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5",
            "patch": "@@ -450,7 +450,7 @@ A fixed-precision decimal number, represented in Python by a\n .. attribute:: DecimalField.max_digits\n \n     The maximum number of digits allowed in the number. Note that this number\n-    must be greater than ``decimal_places``, if it exists.\n+    must be greater than or equal to ``decimal_places``, if it exists.\n \n .. attribute:: DecimalField.decimal_places\n "
        },
        {
            "sha": "93c1c66f1ca9f11cf7b061a646b0645d137edabe",
            "filename": "tests/modeltests/invalid_models/invalid_models/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2Fmodels.py?ref=efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5",
            "patch": "@@ -243,8 +243,7 @@ class PrimaryKeyNull(models.Model):\n invalid_models.fielderrors: \"decimalfield2\": DecimalFields require a \"max_digits\" attribute that is a positive integer.\n invalid_models.fielderrors: \"decimalfield3\": DecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\n invalid_models.fielderrors: \"decimalfield3\": DecimalFields require a \"max_digits\" attribute that is a positive integer.\n-invalid_models.fielderrors: \"decimalfield4\": DecimalFields require a \"max_digits\" attribute value that is greater than the value of the \"decimal_places\" attribute.\n-invalid_models.fielderrors: \"decimalfield5\": DecimalFields require a \"max_digits\" attribute value that is greater than the value of the \"decimal_places\" attribute.\n+invalid_models.fielderrors: \"decimalfield4\": DecimalFields require a \"max_digits\" attribute value that is greater than or equal to the value of the \"decimal_places\" attribute.\n invalid_models.fielderrors: \"filefield\": FileFields require an \"upload_to\" attribute.\n invalid_models.fielderrors: \"choices\": \"choices\" should be iterable (e.g., a tuple or list).\n invalid_models.fielderrors: \"choices2\": \"choices\" should be a sequence of two-tuples."
        },
        {
            "sha": "4dcfb17bb3a6b2e1038ee221e2d4dc24bd11d59f",
            "filename": "tests/regressiontests/model_fields/models.py",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/tests%2Fregressiontests%2Fmodel_fields%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5/tests%2Fregressiontests%2Fmodel_fields%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_fields%2Fmodels.py?ref=efe4e2e5178d2d6e6f710c3edee0d07cd6a60ab5",
            "patch": "@@ -69,6 +69,11 @@ class BooleanModel(models.Model):\n class RenamedField(models.Model):\n     modelname = models.IntegerField(name=\"fieldname\", choices=((1,'One'),))\n \n+# This model isn't used in any test, just here to ensure it validates successfully.\n+# See ticket #16570.\n+class DecimalLessThanOne(models.Model):\n+    d = models.DecimalField(max_digits=3, decimal_places=3)\n+\n ###############################################################################\n # FileField\n "
        }
    ],
    "stats": {
        "total": 16,
        "additions": 10,
        "deletions": 6
    }
}