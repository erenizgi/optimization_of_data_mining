{
    "author": "SmileyChris",
    "message": "Fixes Paginator.validate_number not raising a PageNotAnInteger exception when passed a non-int-castable type.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16026 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "13bb06984cdfb937d0eac13b78c7c2337442c561",
    "files": [
        {
            "sha": "3cec491905004bd420067af1c58916f02f5fd38c",
            "filename": "django/core/paginator.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13bb06984cdfb937d0eac13b78c7c2337442c561/django%2Fcore%2Fpaginator.py",
            "raw_url": "https://github.com/django/django/raw/13bb06984cdfb937d0eac13b78c7c2337442c561/django%2Fcore%2Fpaginator.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fpaginator.py?ref=13bb06984cdfb937d0eac13b78c7c2337442c561",
            "patch": "@@ -22,7 +22,7 @@ def validate_number(self, number):\n         \"Validates the given 1-based page number.\"\n         try:\n             number = int(number)\n-        except ValueError:\n+        except (TypeError, ValueError):\n             raise PageNotAnInteger('That page number is not an integer')\n         if number < 1:\n             raise EmptyPage('That page number is less than 1')"
        },
        {
            "sha": "3feeae9083ab36f755eb10a7ced11d43122bf5bd",
            "filename": "tests/regressiontests/pagination_regress/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/13bb06984cdfb937d0eac13b78c7c2337442c561/tests%2Fregressiontests%2Fpagination_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/13bb06984cdfb937d0eac13b78c7c2337442c561/tests%2Fregressiontests%2Fpagination_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fpagination_regress%2Ftests.py?ref=13bb06984cdfb937d0eac13b78c7c2337442c561",
            "patch": "@@ -1,4 +1,4 @@\n-from django.core.paginator import Paginator, EmptyPage\n+from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger\n from django.utils.unittest import TestCase\n \n class PaginatorTests(TestCase):\n@@ -27,6 +27,15 @@ def check_attribute(self, name, paginator, expected, params):\n             \"For '%s', expected %s but got %s.  Paginator parameters were: %s\"\n             % (name, expected, got, params))\n \n+    def test_invalid_page_number(self):\n+        \"\"\"\n+        Tests that invalid page numbers result in the correct exception being\n+        raised.\n+        \"\"\"\n+        paginator = Paginator([1, 2, 3], 2)\n+        self.assertRaises(PageNotAnInteger, paginator.validate_number, None)\n+        self.assertRaises(PageNotAnInteger, paginator.validate_number, 'x')\n+\n     def test_paginator(self):\n         \"\"\"\n         Tests the paginator attributes using varying inputs."
        }
    ],
    "stats": {
        "total": 13,
        "additions": 11,
        "deletions": 2
    }
}