{
    "author": "aaugustin",
    "message": "Fixed tests for date-based generic views.",
    "sha": "435081fd22cec08d98ccbf1efcd223ccaa634ecd",
    "files": [
        {
            "sha": "eb1f7d0a95fc30e1ada23f0835afd276fc31179e",
            "filename": "tests/regressiontests/generic_views/dates.py",
            "status": "modified",
            "additions": 15,
            "deletions": 11,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/435081fd22cec08d98ccbf1efcd223ccaa634ecd/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/435081fd22cec08d98ccbf1efcd223ccaa634ecd/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py?ref=435081fd22cec08d98ccbf1efcd223ccaa634ecd",
            "patch": "@@ -456,15 +456,17 @@ def test_datetime_day_view(self):\n \n     @override_settings(USE_TZ=True, TIME_ZONE='Africa/Nairobi')\n     def test_aware_datetime_day_view(self):\n-        BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0, tzinfo=timezone.utc))\n+        bs = BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0, tzinfo=timezone.utc))\n         res = self.client.get('/dates/booksignings/2008/apr/2/')\n         self.assertEqual(res.status_code, 200)\n         # 2008-04-02T00:00:00+03:00 (beginning of day) > 2008-04-01T22:00:00+00:00 (book signing event date)\n-        BookSigning.objects.filter(pk=1).update(event_date=datetime.datetime(2008, 4, 1, 22, 0, tzinfo=timezone.utc))\n+        bs.event_date = datetime.datetime(2008, 4, 1, 22, 0, tzinfo=timezone.utc)\n+        bs.save()\n         res = self.client.get('/dates/booksignings/2008/apr/2/')\n         self.assertEqual(res.status_code, 200)\n         # 2008-04-03T00:00:00+03:00 (end of day) > 2008-04-02T22:00:00+00:00 (book signing event date)\n-        BookSigning.objects.filter(pk=1).update(event_date=datetime.datetime(2008, 4, 2, 22, 0, tzinfo=timezone.utc))\n+        bs.event_date = datetime.datetime(2008, 4, 2, 22, 0, tzinfo=timezone.utc)\n+        bs.save()\n         res = self.client.get('/dates/booksignings/2008/apr/2/')\n         self.assertEqual(res.status_code, 404)\n \n@@ -524,20 +526,22 @@ def test_get_object_custom_queryset(self):\n         self.assertEqual(res.status_code, 404)\n \n     def test_datetime_date_detail(self):\n-        BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0))\n-        res = self.client.get('/dates/booksignings/2008/apr/2/1/')\n+        bs = BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0))\n+        res = self.client.get('/dates/booksignings/2008/apr/2/%d/' % bs.pk)\n         self.assertEqual(res.status_code, 200)\n \n     @override_settings(USE_TZ=True, TIME_ZONE='Africa/Nairobi')\n     def test_aware_datetime_date_detail(self):\n-        BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0, tzinfo=timezone.utc))\n-        res = self.client.get('/dates/booksignings/2008/apr/2/1/')\n+        bs = BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0, tzinfo=timezone.utc))\n+        res = self.client.get('/dates/booksignings/2008/apr/2/%d/' % bs.pk)\n         self.assertEqual(res.status_code, 200)\n         # 2008-04-02T00:00:00+03:00 (beginning of day) > 2008-04-01T22:00:00+00:00 (book signing event date)\n-        BookSigning.objects.filter(pk=1).update(event_date=datetime.datetime(2008, 4, 1, 22, 0, tzinfo=timezone.utc))\n-        res = self.client.get('/dates/booksignings/2008/apr/2/1/')\n+        bs.event_date = datetime.datetime(2008, 4, 1, 22, 0, tzinfo=timezone.utc)\n+        bs.save()\n+        res = self.client.get('/dates/booksignings/2008/apr/2/%d/' % bs.pk)\n         self.assertEqual(res.status_code, 200)\n         # 2008-04-03T00:00:00+03:00 (end of day) > 2008-04-02T22:00:00+00:00 (book signing event date)\n-        BookSigning.objects.filter(pk=1).update(event_date=datetime.datetime(2008, 4, 2, 22, 0, tzinfo=timezone.utc))\n-        res = self.client.get('/dates/booksignings/2008/apr/2/1/')\n+        bs.event_date = datetime.datetime(2008, 4, 2, 22, 0, tzinfo=timezone.utc)\n+        bs.save()\n+        res = self.client.get('/dates/booksignings/2008/apr/2/%d/' % bs.pk)\n         self.assertEqual(res.status_code, 404)"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 15,
        "deletions": 11
    }
}