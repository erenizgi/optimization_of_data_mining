{
    "author": "jphalip",
    "message": "Fixed #13760 -- Cleaned up unnecessary default option handling in a bunch of management commands. Thanks to Paul McMillan for the report and to adamv and Claude Paroz for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17028 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "59c051d1707ec1c32256193221b6ee2e3e533be5",
    "files": [
        {
            "sha": "a6628a039acc9e67b5b6a64fa1aa2f8dcad58e6f",
            "filename": "django/core/management/commands/createcachetable.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fcreatecachetable.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fcreatecachetable.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fcreatecachetable.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -18,7 +18,7 @@ class Command(LabelCommand):\n     requires_model_validation = False\n \n     def handle_label(self, tablename, **options):\n-        alias = options.get('database', DEFAULT_DB_ALIAS)\n+        alias = options.get('database')\n         connection = connections[alias]\n         fields = (\n             # \"key\" is a reserved word in MySQL, so use \"cache_key\" instead."
        },
        {
            "sha": "74659208d4fb3140ce87163be67910f1590c115c",
            "filename": "django/core/management/commands/dbshell.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fdbshell.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fdbshell.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fdbshell.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -16,7 +16,7 @@ class Command(BaseCommand):\n     requires_model_validation = False\n \n     def handle(self, **options):\n-        connection = connections[options.get('database', DEFAULT_DB_ALIAS)]\n+        connection = connections[options.get('database')]\n         try:\n             connection.client.runshell()\n         except OSError:"
        },
        {
            "sha": "1622929e93319e4c9d5bb326ac3df47d5a7f9436",
            "filename": "django/core/management/commands/dumpdata.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fdumpdata.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fdumpdata.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fdumpdata.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -30,13 +30,13 @@ class Command(BaseCommand):\n     def handle(self, *app_labels, **options):\n         from django.db.models import get_app, get_apps, get_model\n \n-        format = options.get('format','json')\n-        indent = options.get('indent',None)\n-        using = options.get('database', DEFAULT_DB_ALIAS)\n-        excludes = options.get('exclude',[])\n-        show_traceback = options.get('traceback', False)\n-        use_natural_keys = options.get('use_natural_keys', False)\n-        use_base_manager = options.get('use_base_manager', False)\n+        format = options.get('format')\n+        indent = options.get('indent')\n+        using = options.get('database')\n+        excludes = options.get('exclude')\n+        show_traceback = options.get('traceback')\n+        use_natural_keys = options.get('use_natural_keys')\n+        use_base_manager = options.get('use_base_manager')\n \n         excluded_apps = set()\n         excluded_models = set()"
        },
        {
            "sha": "6d0f14e2b6aa5e592c259819461890606cbfad26",
            "filename": "django/core/management/commands/flush.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fflush.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fflush.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fflush.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -23,9 +23,9 @@ class Command(NoArgsCommand):\n            're-executed, and the initial_data fixture will be re-installed.')\n \n     def handle_noargs(self, **options):\n-        db = options.get('database', DEFAULT_DB_ALIAS)\n+        db = options.get('database')\n         connection = connections[db]\n-        verbosity = int(options.get('verbosity', 1))\n+        verbosity = int(options.get('verbosity'))\n         interactive = options.get('interactive')\n \n         self.style = no_style()"
        },
        {
            "sha": "76073c7d5410e9e4e5457c3946b05d552655c34a",
            "filename": "django/core/management/commands/inspectdb.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Finspectdb.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Finspectdb.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Finspectdb.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -25,7 +25,7 @@ def handle_noargs(self, **options):\n             raise CommandError(\"Database inspection isn't supported for the currently selected database backend.\")\n \n     def handle_inspection(self, options):\n-        connection = connections[options.get('database', DEFAULT_DB_ALIAS)]\n+        connection = connections[options.get('database')]\n \n         table2model = lambda table_name: table_name.title().replace('_', '').replace(' ', '').replace('-', '')\n "
        },
        {
            "sha": "356e2d08bd815b4dcf8a85fec922866aa63c2025",
            "filename": "django/core/management/commands/loaddata.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Floaddata.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Floaddata.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Floaddata.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -34,13 +34,13 @@ class Command(BaseCommand):\n     )\n \n     def handle(self, *fixture_labels, **options):\n-        using = options.get('database', DEFAULT_DB_ALIAS)\n+        using = options.get('database')\n \n         connection = connections[using]\n         self.style = no_style()\n \n-        verbosity = int(options.get('verbosity', 1))\n-        show_traceback = options.get('traceback', False)\n+        verbosity = int(options.get('verbosity'))\n+        show_traceback = options.get('traceback')\n \n         # commit is a stealth option - it isn't really useful as\n         # a command line option, but it can be useful when invoking"
        },
        {
            "sha": "fa11f937453589f830ba15d8a439a4b0acd32c96",
            "filename": "django/core/management/commands/runserver.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Frunserver.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -139,4 +139,4 @@ def get_handler(self, *args, **options):\n         Serves admin media like old-school (deprecation pending).\n         \"\"\"\n         handler = super(Command, self).get_handler(*args, **options)\n-        return AdminMediaHandler(handler, options.get('admin_media_path', ''))\n+        return AdminMediaHandler(handler, options.get('admin_media_path'))"
        },
        {
            "sha": "59b2e77b692a5dfe2ac4b1b6d27bda95ce9c7343",
            "filename": "django/core/management/commands/sql.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsql.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsql.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsql.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -16,4 +16,4 @@ class Command(AppCommand):\n     output_transaction = True\n \n     def handle_app(self, app, **options):\n-        return u'\\n'.join(sql_create(app, self.style, connections[options.get('database', DEFAULT_DB_ALIAS)])).encode('utf-8')\n+        return u'\\n'.join(sql_create(app, self.style, connections[options.get('database')])).encode('utf-8')"
        },
        {
            "sha": "ab702bfffb04abeab6d5e158568d789152a4cd5e",
            "filename": "django/core/management/commands/sqlall.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlall.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlall.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlall.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -16,4 +16,4 @@ class Command(AppCommand):\n     output_transaction = True\n \n     def handle_app(self, app, **options):\n-        return u'\\n'.join(sql_all(app, self.style, connections[options.get('database', DEFAULT_DB_ALIAS)])).encode('utf-8')\n+        return u'\\n'.join(sql_all(app, self.style, connections[options.get('database')])).encode('utf-8')"
        },
        {
            "sha": "b8f491392b714c8fb56f45eeb778dc4d61fa8782",
            "filename": "django/core/management/commands/sqlclear.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlclear.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlclear.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlclear.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -16,4 +16,4 @@ class Command(AppCommand):\n     output_transaction = True\n \n     def handle_app(self, app, **options):\n-        return u'\\n'.join(sql_delete(app, self.style, connections[options.get('database', DEFAULT_DB_ALIAS)])).encode('utf-8')\n+        return u'\\n'.join(sql_delete(app, self.style, connections[options.get('database')])).encode('utf-8')"
        },
        {
            "sha": "6a984560de71cbc0bd154c459a26cb41813ac0ec",
            "filename": "django/core/management/commands/sqlcustom.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlcustom.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlcustom.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlcustom.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -16,4 +16,4 @@ class Command(AppCommand):\n     output_transaction = True\n \n     def handle_app(self, app, **options):\n-        return u'\\n'.join(sql_custom(app, self.style, connections[options.get('database', DEFAULT_DB_ALIAS)])).encode('utf-8')\n+        return u'\\n'.join(sql_custom(app, self.style, connections[options.get('database')])).encode('utf-8')"
        },
        {
            "sha": "19054fbfa962044792c29d296b150c5de4554151",
            "filename": "django/core/management/commands/sqlflush.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlflush.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlflush.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlflush.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -16,4 +16,4 @@ class Command(NoArgsCommand):\n     output_transaction = True\n \n     def handle_noargs(self, **options):\n-        return u'\\n'.join(sql_flush(self.style, connections[options.get('database', DEFAULT_DB_ALIAS)], only_django=True)).encode('utf-8')\n+        return u'\\n'.join(sql_flush(self.style, connections[options.get('database')], only_django=True)).encode('utf-8')"
        },
        {
            "sha": "bf55b0dffcc3d5894712c0f2340344bf054c3a0b",
            "filename": "django/core/management/commands/sqlindexes.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlindexes.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlindexes.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlindexes.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -17,4 +17,4 @@ class Command(AppCommand):\n     output_transaction = True\n \n     def handle_app(self, app, **options):\n-        return u'\\n'.join(sql_indexes(app, self.style, connections[options.get('database', DEFAULT_DB_ALIAS)])).encode('utf-8')\n+        return u'\\n'.join(sql_indexes(app, self.style, connections[options.get('database')])).encode('utf-8')"
        },
        {
            "sha": "976b8488863ed008f396301a360cbbc9b4731198",
            "filename": "django/core/management/commands/sqlreset.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlreset.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlreset.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlreset.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -17,4 +17,4 @@ class Command(AppCommand):\n     output_transaction = True\n \n     def handle_app(self, app, **options):\n-        return u'\\n'.join(sql_reset(app, self.style, connections[options.get('database', DEFAULT_DB_ALIAS)])).encode('utf-8')\n+        return u'\\n'.join(sql_reset(app, self.style, connections[options.get('database')])).encode('utf-8')"
        },
        {
            "sha": "6460f0006261638ef6b5148c2a804b07fb90b678",
            "filename": "django/core/management/commands/sqlsequencereset.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlsequencereset.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlsequencereset.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsqlsequencereset.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -16,5 +16,5 @@ class Command(AppCommand):\n     output_transaction = True\n \n     def handle_app(self, app, **options):\n-        connection = connections[options.get('database', DEFAULT_DB_ALIAS)]\n+        connection = connections[options.get('database')]\n         return u'\\n'.join(connection.ops.sequence_reset_sql(self.style, models.get_models(app, include_auto_created=True))).encode('utf-8')"
        },
        {
            "sha": "a9d803a8e43b5b610283bd2cdf267b767ed3afcd",
            "filename": "django/core/management/commands/syncdb.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsyncdb.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Fsyncdb.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsyncdb.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -22,9 +22,9 @@ class Command(NoArgsCommand):\n \n     def handle_noargs(self, **options):\n \n-        verbosity = int(options.get('verbosity', 1))\n+        verbosity = int(options.get('verbosity'))\n         interactive = options.get('interactive')\n-        show_traceback = options.get('traceback', False)\n+        show_traceback = options.get('traceback')\n \n         # Stealth option -- 'load_initial_data' is used by the testing setup\n         # process to disable initial fixture loading.\n@@ -51,7 +51,7 @@ def handle_noargs(self, **options):\n                 if not msg.startswith('No module named') or 'management' not in msg:\n                     raise\n \n-        db = options.get('database', DEFAULT_DB_ALIAS)\n+        db = options.get('database')\n         connection = connections[db]\n         cursor = connection.cursor()\n "
        },
        {
            "sha": "2a6dbfc387d8432e6733a558d2300e5ed16916d9",
            "filename": "django/core/management/commands/test.py",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Ftest.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Ftest.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Ftest.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -46,9 +46,7 @@ def handle(self, *test_labels, **options):\n         from django.test.utils import get_runner\n \n         TestRunner = get_runner(settings, options.get('testrunner'))\n-        options['verbosity'] = int(options.get('verbosity', 1))\n-        options.setdefault('interactive', True)\n-        options.setdefault('failfast', False)\n+        options['verbosity'] = int(options.get('verbosity'))\n \n         test_runner = TestRunner(**options)\n         failures = test_runner.run_tests(test_labels)"
        },
        {
            "sha": "2e0d8e426d23e65479a335e254e6513e1c3d1111",
            "filename": "django/core/management/commands/testserver.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Ftestserver.py",
            "raw_url": "https://github.com/django/django/raw/59c051d1707ec1c32256193221b6ee2e3e533be5/django%2Fcore%2Fmanagement%2Fcommands%2Ftestserver.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Ftestserver.py?ref=59c051d1707ec1c32256193221b6ee2e3e533be5",
            "patch": "@@ -21,8 +21,8 @@ def handle(self, *fixture_labels, **options):\n         from django.core.management import call_command\n         from django.db import connection\n \n-        verbosity = int(options.get('verbosity', 1))\n-        interactive = options.get('interactive', True)\n+        verbosity = int(options.get('verbosity'))\n+        interactive = options.get('interactive')\n         addrport = options.get('addrport')\n \n         # Create a test database."
        }
    ],
    "stats": {
        "total": 62,
        "additions": 30,
        "deletions": 32
    }
}