{
    "author": "malcolmt",
    "message": "Add the ability to do unordered comparisons in assertQuerysetEqual.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16654 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "0686c6b0ee7e6099cdcc48317d2649dc19dc89c9",
    "files": [
        {
            "sha": "71687f2a6e9ab578426790e1927e908b98b522f6",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/0686c6b0ee7e6099cdcc48317d2649dc19dc89c9/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/0686c6b0ee7e6099cdcc48317d2649dc19dc89c9/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=0686c6b0ee7e6099cdcc48317d2649dc19dc89c9",
            "patch": "@@ -597,7 +597,9 @@ def assertTemplateNotUsed(self, response, template_name, msg_prefix=''):\n             msg_prefix + \"Template '%s' was used unexpectedly in rendering\"\n             \" the response\" % template_name)\n \n-    def assertQuerysetEqual(self, qs, values, transform=repr):\n+    def assertQuerysetEqual(self, qs, values, transform=repr, ordered=True):\n+        if not ordered:\n+            return self.assertEqual(set(map(transform, qs)), set(values))\n         return self.assertEqual(map(transform, qs), values)\n \n     def assertNumQueries(self, num, func=None, *args, **kwargs):"
        },
        {
            "sha": "55c1868e133100eb9fb2848e9b35d86f9152d0b0",
            "filename": "docs/topics/testing.txt",
            "status": "modified",
            "additions": 11,
            "deletions": 4,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/0686c6b0ee7e6099cdcc48317d2649dc19dc89c9/docs%2Ftopics%2Ftesting.txt",
            "raw_url": "https://github.com/django/django/raw/0686c6b0ee7e6099cdcc48317d2649dc19dc89c9/docs%2Ftopics%2Ftesting.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Ftesting.txt?ref=0686c6b0ee7e6099cdcc48317d2649dc19dc89c9",
            "patch": "@@ -1592,7 +1592,7 @@ your test suite.\n     ``target_status_code`` will be the url and status code for the final\n     point of the redirect chain.\n \n-.. method:: TestCase.assertQuerysetEqual(qs, values, transform=repr)\n+.. method:: TestCase.assertQuerysetEqual(qs, values, transform=repr, ordered=True)\n \n     .. versionadded:: 1.3\n \n@@ -1603,9 +1603,16 @@ your test suite.\n     each value is compared. Any other callable can be used if ``repr()`` doesn't\n     provide a unique or helpful comparison.\n \n-    The comparison is also ordering dependent. If ``qs`` doesn't provide an\n-    implicit ordering, you will need to apply a ``order_by()`` clause to your\n-    queryset to ensure that the test will pass reliably.\n+    By default, the comparison is also ordering dependent. If ``qs`` doesn't\n+    provide an implicit ordering, you can set the ``ordered`` parameter to\n+    ``False``, which turns the comparison into a Python set comparison.\n+\n+    .. versionchanged:: 1.4\n+\tThe ``ordered`` parameter is new in version 1.4. In earlier versions,\n+\tyou would need to ensure the queryset is ordered consistently, possibly\n+\tvia an explicit ``order_by()`` call on the queryset prior to\n+\tcomparison.\n+\n \n .. method:: TestCase.assertNumQueries(num, func, *args, **kwargs)\n "
        }
    ],
    "stats": {
        "total": 19,
        "additions": 14,
        "deletions": 5
    }
}