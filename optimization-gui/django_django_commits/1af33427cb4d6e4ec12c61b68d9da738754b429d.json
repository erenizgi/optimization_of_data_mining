{
    "author": "freakboy3742",
    "message": "Fixed #15623 -- Corrected province codes for Canadian localflavor. Thanks to shelldweller for the report.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15864 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "1af33427cb4d6e4ec12c61b68d9da738754b429d",
    "files": [
        {
            "sha": "505d863f5e4ea1e88899cb0333f7b8419eddee2d",
            "filename": "django/contrib/localflavor/ca/ca_provinces.py",
            "status": "modified",
            "additions": 15,
            "deletions": 7,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/1af33427cb4d6e4ec12c61b68d9da738754b429d/django%2Fcontrib%2Flocalflavor%2Fca%2Fca_provinces.py",
            "raw_url": "https://github.com/django/django/raw/1af33427cb4d6e4ec12c61b68d9da738754b429d/django%2Fcontrib%2Flocalflavor%2Fca%2Fca_provinces.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fca%2Fca_provinces.py?ref=1af33427cb4d6e4ec12c61b68d9da738754b429d",
            "patch": "@@ -8,21 +8,26 @@\n This exists in this standalone file so that it's only imported into memory \n when explicitly needed. \n \"\"\" \n+import warnings\n+warnings.warn(\n+    'There have been recent changes to the CA localflavor. See the release notes for details',\n+    RuntimeWarning\n+)\n \n PROVINCE_CHOICES = ( \n     ('AB', 'Alberta'), \n     ('BC', 'British Columbia'), \n     ('MB', 'Manitoba'), \n     ('NB', 'New Brunswick'), \n-    ('NF', 'Newfoundland and Labrador'), \n+    ('NL', 'Newfoundland and Labrador'),\n     ('NT', 'Northwest Territories'), \n     ('NS', 'Nova Scotia'), \n     ('NU', 'Nunavut'), \n     ('ON', 'Ontario'), \n     ('PE', 'Prince Edward Island'), \n     ('QC', 'Quebec'), \n     ('SK', 'Saskatchewan'), \n-    ('YK', 'Yukon') \n+    ('YT', 'Yukon')\n )\n \n PROVINCES_NORMALIZED = {\n@@ -35,9 +40,10 @@\n     'manitoba': 'MB',\n     'nb': 'NB',\n     'new brunswick': 'NB',\n-    'nf': 'NF',\n-    'newfoundland': 'NF',\n-    'newfoundland and labrador': 'NF',\n+    'nf': 'NL',\n+    'nl': 'NL',\n+    'newfoundland': 'NL',\n+    'newfoundland and labrador': 'NL',\n     'nt': 'NT',\n     'northwest territories': 'NT',\n     'ns': 'NS',\n@@ -54,6 +60,8 @@\n     'quebec': 'QC',\n     'sk': 'SK',\n     'saskatchewan': 'SK',\n-    'yk': 'YK',\n-    'yukon': 'YK',\n+    'yk': 'YT',\n+    'yt': 'YT',\n+    'yukon': 'YT',\n+    'yukon territory': 'YT',\n }\n\\ No newline at end of file"
        },
        {
            "sha": "8a9a2098978c3bf7ec6fde7cfb0eab9121321325",
            "filename": "docs/releases/1.3.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/1af33427cb4d6e4ec12c61b68d9da738754b429d/docs%2Freleases%2F1.3.txt",
            "raw_url": "https://github.com/django/django/raw/1af33427cb4d6e4ec12c61b68d9da738754b429d/docs%2Freleases%2F1.3.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.3.txt?ref=1af33427cb4d6e4ec12c61b68d9da738754b429d",
            "patch": "@@ -475,6 +475,11 @@ local flavors:\n       has been removed from the province list in favor of the new\n       official designation \"Aceh (ACE)\".\n \n+    * Canada (ca) -- The province \"Newfoundland and Labrador\" has\n+      had its province code updated to \"NL\", rather than the\n+      older \"NF\". In addition, the Yukon Territory has had its\n+      province code corrected to \"YT\", instead of \"YK\".\n+\n FormSet updates\n ~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "bd31a5ce46a93282197c6f94cb215d152c945586",
            "filename": "tests/regressiontests/forms/localflavor/ca.py",
            "status": "modified",
            "additions": 15,
            "deletions": 2,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/1af33427cb4d6e4ec12c61b68d9da738754b429d/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fca.py",
            "raw_url": "https://github.com/django/django/raw/1af33427cb4d6e4ec12c61b68d9da738754b429d/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fca.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fca.py?ref=1af33427cb4d6e4ec12c61b68d9da738754b429d",
            "patch": "@@ -1,3 +1,5 @@\n+import warnings\n+\n from django.contrib.localflavor.ca.forms import (CAPostalCodeField,\n         CAPhoneNumberField, CAProvinceField, CAProvinceSelect,\n         CASocialInsuranceNumberField)\n@@ -6,22 +8,33 @@\n \n \n class CALocalFlavorTests(LocalFlavorTestCase):\n+    def setUp(self):\n+        self.save_warnings_state()\n+        warnings.filterwarnings(\n+            \"ignore\",\n+            category=RuntimeWarning,\n+            module='django.contrib.localflavor.ca.ca_provinces'\n+        )\n+\n+    def tearDown(self):\n+        self.restore_warnings_state()\n+\n     def test_CAProvinceSelect(self):\n         f = CAProvinceSelect()\n         out = u'''<select name=\"province\">\n <option value=\"AB\" selected=\"selected\">Alberta</option>\n <option value=\"BC\">British Columbia</option>\n <option value=\"MB\">Manitoba</option>\n <option value=\"NB\">New Brunswick</option>\n-<option value=\"NF\">Newfoundland and Labrador</option>\n+<option value=\"NL\">Newfoundland and Labrador</option>\n <option value=\"NT\">Northwest Territories</option>\n <option value=\"NS\">Nova Scotia</option>\n <option value=\"NU\">Nunavut</option>\n <option value=\"ON\">Ontario</option>\n <option value=\"PE\">Prince Edward Island</option>\n <option value=\"QC\">Quebec</option>\n <option value=\"SK\">Saskatchewan</option>\n-<option value=\"YK\">Yukon</option>\n+<option value=\"YT\">Yukon</option>\n </select>'''\n         self.assertEqual(f.render('province', 'AB'), out)\n "
        }
    ],
    "stats": {
        "total": 44,
        "additions": 35,
        "deletions": 9
    }
}