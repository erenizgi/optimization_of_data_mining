{
    "author": "ramiro",
    "message": "Converted internal link generation in the admin and admin document generator to use named URLs.\n\nThanks to Florian Apolloner for both the initial patch and his final push to get\nthis fixed, to Dario Ocles for his great work on the admin templates and\nswitching the admin_doc application to also use named URLs, to Mikko Hellsing\nfor his comments and to Jannis and Julien for their review and design guidance.\n\nFixes #15294.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16857 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "aaf77c1676e44019abe544911ff7a06eb2690295",
    "files": [
        {
            "sha": "2825c999888e6b993a753501cb4cf4b89900dec1",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 32,
            "deletions": 10,
            "changes": 42,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -11,6 +11,7 @@\n from django.views.decorators.csrf import csrf_protect\n from django.core.exceptions import PermissionDenied, ValidationError\n from django.core.paginator import Paginator\n+from django.core.urlresolvers import reverse\n from django.db import models, transaction, router\n from django.db.models.related import RelatedObject\n from django.db.models.fields import BLANK_CHOICE_DASH, FieldDoesNotExist\n@@ -776,9 +777,12 @@ def response_add(self, request, obj, post_url_continue='../%s/'):\n             # redirect to the change-list page for this object. Otherwise,\n             # redirect to the admin index.\n             if self.has_change_permission(request, None):\n-                post_url = '../'\n+                post_url = reverse('admin:%s_%s_changelist' %\n+                                   (opts.app_label, opts.module_name),\n+                                   current_app=self.admin_site.name)\n             else:\n-                post_url = '../../../'\n+                post_url = reverse('admin:index',\n+                                   current_app=self.admin_site.name)\n             return HttpResponseRedirect(post_url)\n \n     def response_change(self, request, obj):\n@@ -787,11 +791,14 @@ def response_change(self, request, obj):\n         \"\"\"\n         opts = obj._meta\n \n-        # Handle proxy models automatically created by .only() or .defer()\n+        # Handle proxy models automatically created by .only() or .defer().\n+        # Refs #14529\n         verbose_name = opts.verbose_name\n+        module_name = opts.module_name\n         if obj._deferred:\n             opts_ = opts.proxy_for_model._meta\n             verbose_name = opts_.verbose_name\n+            module_name = opts_.module_name\n \n         pk_value = obj._get_pk_val()\n \n@@ -805,19 +812,28 @@ def response_change(self, request, obj):\n         elif \"_saveasnew\" in request.POST:\n             msg = _('The %(name)s \"%(obj)s\" was added successfully. You may edit it again below.') % {'name': force_unicode(verbose_name), 'obj': obj}\n             self.message_user(request, msg)\n-            return HttpResponseRedirect(\"../%s/\" % pk_value)\n+            return HttpResponseRedirect(reverse('admin:%s_%s_change' %\n+                                        (opts.app_label, module_name),\n+                                        args=(pk_value,),\n+                                        current_app=self.admin_site.name))\n         elif \"_addanother\" in request.POST:\n             self.message_user(request, msg + ' ' + (_(\"You may add another %s below.\") % force_unicode(verbose_name)))\n-            return HttpResponseRedirect(\"../add/\")\n+            return HttpResponseRedirect(reverse('admin:%s_%s_add' %\n+                                        (opts.app_label, module_name),\n+                                        current_app=self.admin_site.name))\n         else:\n             self.message_user(request, msg)\n             # Figure out where to redirect. If the user has change permission,\n             # redirect to the change-list page for this object. Otherwise,\n             # redirect to the admin index.\n             if self.has_change_permission(request, None):\n-                return HttpResponseRedirect('../')\n+                post_url = reverse('admin:%s_%s_changelist' %\n+                                   (opts.app_label, module_name),\n+                                   current_app=self.admin_site.name)\n             else:\n-                return HttpResponseRedirect('../../../')\n+                post_url = reverse('admin:index',\n+                                   current_app=self.admin_site.name)\n+            return HttpResponseRedirect(post_url)\n \n     def response_action(self, request, queryset):\n         \"\"\"\n@@ -990,7 +1006,9 @@ def change_view(self, request, object_id, extra_context=None):\n             raise Http404(_('%(name)s object with primary key %(key)r does not exist.') % {'name': force_unicode(opts.verbose_name), 'key': escape(object_id)})\n \n         if request.method == 'POST' and \"_saveasnew\" in request.POST:\n-            return self.add_view(request, form_url='../add/')\n+            return self.add_view(request, form_url=reverse('admin:%s_%s_add' %\n+                                    (opts.app_label, opts.module_name),\n+                                    current_app=self.admin_site.name))\n \n         ModelForm = self.get_form(request, obj)\n         formsets = []\n@@ -1246,8 +1264,11 @@ def delete_view(self, request, object_id, extra_context=None):\n             self.message_user(request, _('The %(name)s \"%(obj)s\" was deleted successfully.') % {'name': force_unicode(opts.verbose_name), 'obj': force_unicode(obj_display)})\n \n             if not self.has_change_permission(request, None):\n-                return HttpResponseRedirect(\"../../../../\")\n-            return HttpResponseRedirect(\"../../\")\n+                return HttpResponseRedirect(reverse('admin:index',\n+                                                    current_app=self.admin_site.name))\n+            return HttpResponseRedirect(reverse('admin:%s_%s_changelist' %\n+                                        (opts.app_label, opts.module_name),\n+                                        current_app=self.admin_site.name))\n \n         object_name = force_unicode(opts.verbose_name)\n \n@@ -1292,6 +1313,7 @@ def history_view(self, request, object_id, extra_context=None):\n             'module_name': capfirst(force_unicode(opts.verbose_name_plural)),\n             'object': obj,\n             'app_label': app_label,\n+            'opts': opts,\n         }\n         context.update(extra_context or {})\n         return TemplateResponse(request, self.object_history_template or ["
        },
        {
            "sha": "3a5c12b70abb2ebd1c15ce2954ead8e53a2e6c4b",
            "filename": "django/contrib/admin/sites.py",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Fsites.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Fsites.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fsites.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -339,17 +339,19 @@ def index(self, request, extra_context=None):\n                 # Check whether user has any perm for this module.\n                 # If so, add the module to the model_list.\n                 if True in perms.values():\n+                    info = (app_label, model._meta.module_name)\n                     model_dict = {\n                         'name': capfirst(model._meta.verbose_name_plural),\n-                        'admin_url': mark_safe('%s/%s/' % (app_label, model.__name__.lower())),\n+                        'admin_url': reverse('admin:%s_%s_changelist' % info, current_app=self.name),\n+                        'add_url': reverse('admin:%s_%s_add' % info, current_app=self.name),\n                         'perms': perms,\n                     }\n                     if app_label in app_dict:\n                         app_dict[app_label]['models'].append(model_dict)\n                     else:\n                         app_dict[app_label] = {\n                             'name': app_label.title(),\n-                            'app_url': app_label + '/',\n+                            'app_url': reverse('admin:app_list', kwargs={'app_label': app_label}, current_app=self.name),\n                             'has_module_perms': has_module_perms,\n                             'models': [model_dict],\n                         }\n@@ -383,9 +385,11 @@ def app_index(self, request, app_label, extra_context=None):\n                     # Check whether user has any perm for this module.\n                     # If so, add the module to the model_list.\n                     if True in perms.values():\n+                        info = (app_label, model._meta.module_name)\n                         model_dict = {\n                             'name': capfirst(model._meta.verbose_name_plural),\n-                            'admin_url': '%s/' % model.__name__.lower(),\n+                            'admin_url': reverse('admin:%s_%s_changelist' % info, current_app=self.name),\n+                            'add_url': reverse('admin:%s_%s_add' % info, current_app=self.name),\n                             'perms': perms,\n                         }\n                         if app_dict:"
        },
        {
            "sha": "eeb9e8da79f8f1e28ae7e747e4f864ca03b7ba8d",
            "filename": "django/contrib/admin/templates/admin/500.html",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2F500.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2F500.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2F500.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n \n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"/\">{% trans \"Home\" %}</a> &rsaquo; {% trans \"Server error\" %}</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Server error' %}\n+</div>\n+{% endblock %}\n \n {% block title %}{% trans 'Server error (500)' %}{% endblock %}\n "
        },
        {
            "sha": "4616b16d3d7fdb75d512a1f2ebae66eb1e7169e6",
            "filename": "django/contrib/admin/templates/admin/app_index.html",
            "status": "modified",
            "additions": 11,
            "deletions": 9,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fapp_index.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fapp_index.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fapp_index.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,15 +1,17 @@\n-{% extends \"admin/index.html\" %} \n-{% load i18n %} \n+{% extends \"admin/index.html\" %}\n+{% load i18n %}\n+{% load url from future %}\n \n {% if not is_popup %}\n-\n {% block breadcrumbs %}\n-<div class=\"breadcrumbs\"><a href=\"../\">\n-{% trans \"Home\" %}</a> &rsaquo; \n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo;\n {% for app in app_list %}\n {% blocktrans with app.name as name %}{{ name }}{% endblocktrans %}\n-{% endfor %}</div>{% endblock %}\n-\n-{% endif %} \n+{% endfor %}\n+</div>\n+{% endblock %}\n+{% endif %}\n \n-{% block sidebar %}{% endblock %}\n\\ No newline at end of file\n+{% block sidebar %}{% endblock %}"
        },
        {
            "sha": "f79eacd459be4d8044a445148496301152dc19e0",
            "filename": "django/contrib/admin/templates/admin/auth/user/change_password.html",
            "status": "modified",
            "additions": 11,
            "deletions": 8,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fauth%2Fuser%2Fchange_password.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fauth%2Fuser%2Fchange_password.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fauth%2Fuser%2Fchange_password.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,21 +1,24 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n admin_static admin_modify %}\n {% load url from future %}\n+{% load admin_urls %}\n+\n {% block extrahead %}{{ block.super }}\n {% url 'admin:jsi18n' as jsi18nurl %}\n <script type=\"text/javascript\" src=\"{{ jsi18nurl|default:\"../../../../jsi18n/\" }}\"></script>\n {% endblock %}\n {% block extrastyle %}{{ block.super }}<link rel=\"stylesheet\" type=\"text/css\" href=\"{% static \"admin/css/forms.css\" %}\" />{% endblock %}\n {% block bodyclass %}{{ opts.app_label }}-{{ opts.object_name.lower }} change-form{% endblock %}\n-{% block breadcrumbs %}{% if not is_popup %}\n-<div class=\"breadcrumbs\">\n-     <a href=\"../../../../\">{% trans \"Home\" %}</a> &rsaquo;\n-     <a href=\"../../../\">{{ opts.app_label|capfirst|escape }}</a> &rsaquo;\n-     <a href=\"../../\">{{ opts.verbose_name_plural|capfirst }}</a> &rsaquo;\n-     <a href=\"../\">{{ original|truncatewords:\"18\" }}</a> &rsaquo;\n-     {% trans 'Change password' %}\n+{% if not is_popup %}\n+{% block breadcrumbs %}\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'admin:app_list' app_label=opts.app_label %}\">{{ opts.app_label|capfirst|escape }}</a>\n+&rsaquo; <a href=\"{% url opts|admin_urlname:'changelist' %}\">{{ opts.verbose_name_plural|capfirst }}</a>\n+&rsaquo; <a href=\"{% url opts|admin_urlname:'changelist' %}{{ original.pk }}\">{{ original|truncatewords:\"18\" }}</a>\n+&rsaquo; {% trans 'Change password' %}\n </div>\n-{% endif %}{% endblock %}\n+{% endblock %}\n+{% endif %}\n {% block content %}<div id=\"content-main\">\n <form action=\"{{ form_url }}\" method=\"post\" id=\"{{ opts.module_name }}_form\">{% csrf_token %}{% block form_top %}{% endblock %}\n <div>"
        },
        {
            "sha": "3b50adcd6ef045eff2a9db150bb7a41733ee1312",
            "filename": "django/contrib/admin/templates/admin/base.html",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fbase.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fbase.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fbase.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -32,17 +32,20 @@\n                 {% if docsroot %}\n                     <a href=\"{{ docsroot }}\">{% trans 'Documentation' %}</a> /\n                 {% endif %}\n-                <a href=\"{% url 'admin:password_change' %}\">\n-                {% trans 'Change password' %}</a> /\n-                <a href=\"{% url 'admin:logout' %}\">\n-                {% trans 'Log out' %}</a>\n+                <a href=\"{% url 'admin:password_change' %}\">{% trans 'Change password' %}</a> /\n+                <a href=\"{% url 'admin:logout' %}\">{% trans 'Log out' %}</a>\n             {% endblock %}\n         </div>\n         {% endif %}\n         {% block nav-global %}{% endblock %}\n     </div>\n     <!-- END Header -->\n-    {% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"/\">{% trans 'Home' %}</a>{% if title %} &rsaquo; {{ title }}{% endif %}</div>{% endblock %}\n+    {% block breadcrumbs %}\n+    <div class=\"breadcrumbs\">\n+    <a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+    {% if title %} &rsaquo; {{ title }}{% endif %}\n+    </div>\n+    {% endblock %}\n     {% endif %}\n \n     {% block messages %}"
        },
        {
            "sha": "0e2803d671f6cada3914c53d5b98e2060b0e2ffe",
            "filename": "django/contrib/admin/templates/admin/change_form.html",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fchange_form.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fchange_form.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fchange_form.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,6 +1,7 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n admin_static admin_modify %}\n {% load url from future %}\n+{% load admin_urls %}\n \n {% block extrahead %}{{ block.super }}\n {% url 'admin:jsi18n' as jsi18nurl %}\n@@ -14,14 +15,15 @@\n \n {% block bodyclass %}{{ opts.app_label }}-{{ opts.object_name.lower }} change-form{% endblock %}\n \n-{% block breadcrumbs %}{% if not is_popup %}\n-<div class=\"breadcrumbs\">\n-     <a href=\"../../../\">{% trans \"Home\" %}</a> &rsaquo;\n-     <a href=\"../../\">{{ app_label|capfirst|escape }}</a> &rsaquo;\n-     {% if has_change_permission %}<a href=\"../\">{{ opts.verbose_name_plural|capfirst }}</a>{% else %}{{ opts.verbose_name_plural|capfirst }}{% endif %} &rsaquo;\n-     {% if add %}{% trans \"Add\" %} {{ opts.verbose_name }}{% else %}{{ original|truncatewords:\"18\" }}{% endif %}\n+{% if not is_popup %}\n+{% block breadcrumbs %}\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'admin:app_list' app_label=opts.app_label %}\">{{ app_label|capfirst|escape }}</a>\n+&rsaquo; {% if has_change_permission %}<a href=\"{% url opts|admin_urlname:'changelist' %}\">{{ opts.verbose_name_plural|capfirst }}</a>{% else %}{{ opts.verbose_name_plural|capfirst }}{% endif %}\n+&rsaquo; {% if add %}{% trans 'Add' %} {{ opts.verbose_name }}{% else %}{{ original|truncatewords:\"18\" }}{% endif %}\n </div>\n-{% endif %}{% endblock %}\n+{% endblock %}\n+{% endif %}\n \n {% block content %}<div id=\"content-main\">\n {% block object-tools %}"
        },
        {
            "sha": "98869cfa5c80720762d4068f2caf372030814ccb",
            "filename": "django/contrib/admin/templates/admin/change_list.html",
            "status": "modified",
            "additions": 10,
            "deletions": 14,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fchange_list.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fchange_list.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fchange_list.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,6 +1,8 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n admin_static admin_list %}\n {% load url from future %}\n+{% load admin_urls %}\n+\n {% block extrastyle %}\n   {{ block.super }}\n   <link rel=\"stylesheet\" type=\"text/css\" href=\"{% static \"admin/css/changelists.css\" %}\" />\n@@ -36,19 +38,13 @@\n {% block bodyclass %}change-list{% endblock %}\n \n {% if not is_popup %}\n-  {% block breadcrumbs %}\n-    <div class=\"breadcrumbs\">\n-      <a href=\"../../\">\n-        {% trans \"Home\" %}\n-      </a>\n-       &rsaquo;\n-       <a href=\"../\">\n-         {{ app_label|capfirst }}\n-      </a>\n-      &rsaquo;\n-      {{ cl.opts.verbose_name_plural|capfirst }}\n-    </div>\n-  {% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'admin:app_list' app_label=cl.opts.app_label %}\">{{ app_label|capfirst|escape }}</a>\n+&rsaquo; {{ cl.opts.verbose_name_plural|capfirst }}\n+</div>\n+{% endblock %}\n {% endif %}\n \n {% block coltype %}flex{% endblock %}\n@@ -60,7 +56,7 @@\n         <ul class=\"object-tools\">\n           {% block object-tools-items %}\n             <li>\n-              <a href=\"add/{% if is_popup %}?_popup=1{% endif %}\" class=\"addlink\">\n+              <a href=\"{% url cl.opts|admin_urlname:'add' %}{% if is_popup %}?_popup=1{% endif %}\" class=\"addlink\">\n                 {% blocktrans with cl.opts.verbose_name as name %}Add {{ name }}{% endblocktrans %}\n               </a>\n             </li>"
        },
        {
            "sha": "f8b36e9c40dd874c92a77aa69cf9386457e353d4",
            "filename": "django/contrib/admin/templates/admin/delete_confirmation.html",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fdelete_confirmation.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fdelete_confirmation.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fdelete_confirmation.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,13 +1,15 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n+{% load admin_urls %}\n \n {% block breadcrumbs %}\n <div class=\"breadcrumbs\">\n-     <a href=\"../../../../\">{% trans \"Home\" %}</a> &rsaquo;\n-     <a href=\"../../../\">{{ app_label|capfirst }}</a> &rsaquo; \n-     <a href=\"../../\">{{ opts.verbose_name_plural|capfirst }}</a> &rsaquo;\n-     <a href=\"../\">{{ object|truncatewords:\"18\" }}</a> &rsaquo;\n-     {% trans 'Delete' %}\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'admin:app_list' app_label=opts.app_label %}\">{{ app_label|capfirst }}</a>\n+&rsaquo; <a href=\"{% url opts|admin_urlname:'changelist' %}\">{{ opts.verbose_name_plural|capfirst|escape }}</a>\n+&rsaquo; <a href=\"{% url opts|admin_urlname:'changelist' %}{{ object.pk }}\">{{ object|truncatewords:\"18\" }}</a>\n+&rsaquo; {% trans 'Delete' %}\n </div>\n {% endblock %}\n "
        },
        {
            "sha": "3120cc52897588ab3a19fc44be512c4c4402d4e0",
            "filename": "django/contrib/admin/templates/admin/delete_selected_confirmation.html",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fdelete_selected_confirmation.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fdelete_selected_confirmation.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fdelete_selected_confirmation.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,12 +1,14 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n l10n %}\n+{% load url from future %}\n+{% load admin_urls %}\n \n {% block breadcrumbs %}\n <div class=\"breadcrumbs\">\n-     <a href=\"../../\">{% trans \"Home\" %}</a> &rsaquo;\n-     <a href=\"../\">{{ app_label|capfirst }}</a> &rsaquo;\n-     <a href=\"./\">{{ opts.verbose_name_plural|capfirst }}</a> &rsaquo;\n-     {% trans 'Delete multiple objects' %}\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'admin:app_list' app_label=app_label %}\">{{ app_label|capfirst|escape }}</a>\n+&rsaquo; <a href=\"{% url opts|admin_urlname:'changelist' %}\">{{ opts.verbose_name_plural|capfirst }}</a>\n+&rsaquo; {% trans 'Delete multiple objects' %}\n </div>\n {% endblock %}\n "
        },
        {
            "sha": "86c795b2494d8ccd0c27ececaa9631f7a55c8c2f",
            "filename": "django/contrib/admin/templates/admin/index.html",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Findex.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Findex.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Findex.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -26,7 +26,7 @@\n             {% endif %}\n \n             {% if model.perms.add %}\n-                <td><a href=\"{{ model.admin_url }}add/\" class=\"addlink\">{% trans 'Add' %}</a></td>\n+                <td><a href=\"{{ model.add_url }}\" class=\"addlink\">{% trans 'Add' %}</a></td>\n             {% else %}\n                 <td>&nbsp;</td>\n             {% endif %}"
        },
        {
            "sha": "c2df4df7f0ea22e6bf0c3e3db4d212022999345f",
            "filename": "django/contrib/admin/templates/admin/invalid_setup.html",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Finvalid_setup.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Finvalid_setup.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Finvalid_setup.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n \n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../\">{% trans 'Home' %}</a> &rsaquo; {{ title }}</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {{ title }}\n+</div>\n+{% endblock %}\n \n {% block content %}\n <p>{% trans \"Something's wrong with your database installation. Make sure the appropriate database tables have been created, and make sure the database is readable by the appropriate user.\" %}</p>"
        },
        {
            "sha": "ebd19609cd32f1bc05bb8fd54585c7b240627839",
            "filename": "django/contrib/admin/templates/admin/object_history.html",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fobject_history.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fobject_history.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fobject_history.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,13 +1,15 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n+{% load admin_urls %}\n \n {% block breadcrumbs %}\n <div class=\"breadcrumbs\">\n-    <a href=\"../../../../\">{% trans 'Home' %}</a> &rsaquo; \n-    <a href=\"../../../\">{{ app_label|capfirst }}</a> &rsaquo; \n-    <a href=\"../../\">{{ module_name }}</a> &rsaquo; \n-    <a href=\"../\">{{ object|truncatewords:\"18\" }}</a> &rsaquo; \n-    {% trans 'History' %}\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'admin:app_list' app_label=app_label %}\">{{ app_label|capfirst|escape }}</a>\n+&rsaquo; <a href=\"{% url opts|admin_urlname:'changelist' %}\">{{ module_name }}</a>\n+&rsaquo; <a href=\"{% url opts|admin_urlname:'changelist' %}{{ object.pk }}\">{{ object|truncatewords:\"18\" }}</a>\n+&rsaquo; {% trans 'History' %}\n </div>\n {% endblock %}\n "
        },
        {
            "sha": "e95d864803add09753588c921e8fe7a745ac0ac2",
            "filename": "django/contrib/admin/templates/registration/logged_out.html",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Flogged_out.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Flogged_out.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Flogged_out.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,12 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n \n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../\">{% trans 'Home' %}</a></div>{% endblock %}\n+{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a></div>{% endblock %}\n \n {% block content %}\n \n <p>{% trans \"Thanks for spending some quality time with the Web site today.\" %}</p>\n \n-<p><a href=\"../\">{% trans 'Log in again' %}</a></p>\n+<p><a href=\"{% url 'admin:index' %}\">{% trans 'Log in again' %}</a></p>\n \n {% endblock %}"
        },
        {
            "sha": "863fc9671dfc843e573a5cb184107811c9bbe49f",
            "filename": "django/contrib/admin/templates/registration/password_change_done.html",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_change_done.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_change_done.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_change_done.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,8 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n {% load url from future %}\n-{% block userlinks %}{% url 'django-admindocs-docroot' as docsroot %}{% if docsroot %}<a href=\"{{ docsroot }}\">{% trans 'Documentation' %}</a> / {% endif %}{% trans 'Change password' %} / <a href=\"../../logout/\">{% trans 'Log out' %}</a>{% endblock %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../\">{% trans 'Home' %}</a> &rsaquo; {% trans 'Password change' %}</div>{% endblock %}\n+{% block userlinks %}{% url 'django-admindocs-docroot' as docsroot %}{% if docsroot %}<a href=\"{{ docsroot }}\">{% trans 'Documentation' %}</a> / {% endif %}{% trans 'Change password' %} / <a href=\"{% url 'admin:logout' %}\">{% trans 'Log out' %}</a>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Password change' %}\n+</div>\n+{% endblock %}\n \n {% block title %}{% trans 'Password change successful' %}{% endblock %}\n "
        },
        {
            "sha": "0e4ea535afa693442d1dd2e8f51cae7e98643e8f",
            "filename": "django/contrib/admin/templates/registration/password_change_form.html",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_change_form.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_change_form.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_change_form.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -2,8 +2,13 @@\n {% load i18n static %}\n {% load url from future %}\n {% block extrastyle %}{{ block.super }}<link rel=\"stylesheet\" type=\"text/css\" href=\"{% static \"admin/css/forms.css\" %}\" />{% endblock %}\n-{% block userlinks %}{% url 'django-admindocs-docroot' as docsroot %}{% if docsroot %}<a href=\"{{ docsroot }}\">{% trans 'Documentation' %}</a> / {% endif %} {% trans 'Change password' %} / <a href=\"../logout/\">{% trans 'Log out' %}</a>{% endblock %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../\">{% trans 'Home' %}</a> &rsaquo; {% trans 'Password change' %}</div>{% endblock %}\n+{% block userlinks %}{% url 'django-admindocs-docroot' as docsroot %}{% if docsroot %}<a href=\"{{ docsroot }}\">{% trans 'Documentation' %}</a> / {% endif %} {% trans 'Change password' %} / <a href=\"{% url 'admin:logout' %}\">{% trans 'Log out' %}</a>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Password change' %}\n+</div>\n+{% endblock %}\n \n {% block title %}{% trans 'Password change' %}{% endblock %}\n "
        },
        {
            "sha": "7c07707f0991125569ce1157f7bc246a5f421346",
            "filename": "django/contrib/admin/templates/registration/password_reset_complete.html",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_complete.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_complete.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_complete.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n \n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../\">{% trans 'Home' %}</a> &rsaquo; {% trans 'Password reset' %}</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Password reset' %}\n+</div>\n+{% endblock %}\n \n {% block title %}{% trans 'Password reset complete' %}{% endblock %}\n "
        },
        {
            "sha": "d5299ebd916badac007458e7d389305e1096fdd8",
            "filename": "django/contrib/admin/templates/registration/password_reset_confirm.html",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_confirm.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_confirm.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_confirm.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n \n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../\">{% trans 'Home' %}</a> &rsaquo; {% trans 'Password reset confirmation' %}</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Password reset confirmation' %}\n+</div>\n+{% endblock %}\n \n {% block title %}{% trans 'Password reset' %}{% endblock %}\n "
        },
        {
            "sha": "fd73af89286cba588ba2e54a9e5348496d220d47",
            "filename": "django/contrib/admin/templates/registration/password_reset_done.html",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_done.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_done.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_done.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n \n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../\">{% trans 'Home' %}</a> &rsaquo; {% trans 'Password reset' %}</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Password reset' %}\n+</div>\n+{% endblock %}\n \n {% block title %}{% trans 'Password reset successful' %}{% endblock %}\n "
        },
        {
            "sha": "2b591fe22e364aafdad3778d72c8318945b4dc73",
            "filename": "django/contrib/admin/templates/registration/password_reset_form.html",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_form.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_form.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fregistration%2Fpassword_reset_form.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n \n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../\">{% trans 'Home' %}</a> &rsaquo; {% trans 'Password reset' %}</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Password reset' %}\n+</div>\n+{% endblock %}\n \n {% block title %}{% trans \"Password reset\" %}{% endblock %}\n "
        },
        {
            "sha": "53dc65b5674816d3f9fcaf312c4f79bf20f68535",
            "filename": "django/contrib/admin/templatetags/admin_urls.py",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_urls.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_urls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplatetags%2Fadmin_urls.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -0,0 +1,8 @@\n+from django.core.urlresolvers import reverse, NoReverseMatch\n+from django import template\n+\n+register = template.Library()\n+\n+@register.filter\n+def admin_urlname(value, arg):\n+    return 'admin:%s_%s_%s' % (value.app_label, value.module_name, arg)"
        },
        {
            "sha": "baa717c4b36967042d35df222c2e8470f0d8d062",
            "filename": "django/contrib/admindocs/templates/admin_doc/bookmarklets.html",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fbookmarklets.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fbookmarklets.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fbookmarklets.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,6 +1,14 @@\n {% extends \"admin/base_site.html\" %}\n-\n-{% block breadcrumbs %}{% load i18n %}<div class=\"breadcrumbs\"><a href=\"../../\">{% trans \"Home\" %}</a> &rsaquo; <a href=\"../\">{% trans \"Documentation\" %}</a> &rsaquo; {% trans \"Bookmarklets\" %}</div>{% endblock %}\n+{% load i18n %}\n+{% load url from future %}\n+\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-docroot' %}\">{% trans 'Documentation' %}</a>\n+&rsaquo; {% trans 'Bookmarklets' %}\n+</div>\n+{% endblock %}\n {% block title %}{% trans \"Documentation bookmarklets\" %}{% endblock %}\n \n {% block content %}"
        },
        {
            "sha": "652fbfd576602fb525856aac918232624935fb48",
            "filename": "django/contrib/admindocs/templates/admin_doc/index.html",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Findex.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Findex.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Findex.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,6 +1,13 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"{{ root_path }}\">Home</a> &rsaquo; Documentation</div>{% endblock %}\n+{% load url from future %}\n+\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Documentation' %}</a>\n+</div>\n+{% endblock %}\n {% block title %}Documentation{% endblock %}\n \n {% block content %}"
        },
        {
            "sha": "34c18ffb7d0fe9929947a24d3ebe88841dce155e",
            "filename": "django/contrib/admindocs/templates/admin_doc/missing_docutils.html",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmissing_docutils.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmissing_docutils.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmissing_docutils.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,6 +1,12 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../\">Home</a> &rsaquo; Documentation</div>{% endblock %}\n+{% load url from future %}\n+\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; {% trans 'Documentation' %}</a>\n+</div>\n {% block title %}Please install docutils{% endblock %}\n \n {% block content %}"
        },
        {
            "sha": "82cb40563923c04f66b408ea1aeb9619ae41fa92",
            "filename": "django/contrib/admindocs/templates/admin_doc/model_detail.html",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmodel_detail.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmodel_detail.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmodel_detail.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,5 +1,7 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n+\n {% block extrahead %}\n {{ block.super }}\n <style type=\"text/css\">\n@@ -8,7 +10,14 @@\n </style>\n {% endblock %}\n \n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../../\">Home</a> &rsaquo; <a href=\"../../\">Documentation</a> &rsaquo; <a href=\"../\">Models</a> &rsaquo; {{ name }}</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-docroot' %}\">{% trans 'Documentation' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-models-index' %}\">{% trans 'Models' %}</a>\n+&rsaquo; {{ name }}\n+</div>\n+{% endblock %}\n \n {% block title %}Model: {{ name }}{% endblock %}\n \n@@ -41,6 +50,6 @@ <h1>{{ summary }}</h1>\n </table>\n </div>\n \n-<p class=\"small\"><a href=\"../\">&lsaquo; Back to Models Documentation</a></p>\n+<p class=\"small\"><a href=\"{% url 'django-admindocs-models-index' %}\">&lsaquo; Back to Models Documentation</a></p>\n </div>\n {% endblock %}"
        },
        {
            "sha": "4eb3cf69c93a34d52be1a6fe266425b47fb02bae",
            "filename": "django/contrib/admindocs/templates/admin_doc/model_index.html",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmodel_index.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmodel_index.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fmodel_index.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,16 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n+\n {% block coltype %}colSM{% endblock %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../\">Home</a> &rsaquo; <a href=\"../\">Documentation</a> &rsaquo; Models</div>{% endblock %}\n+\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-docroot' %}\">{% trans 'Documentation' %}</a>\n+&rsaquo; {% trans 'Models' %}\n+</div>\n+{% endblock %}\n \n {% block title %}Models{% endblock %}\n \n@@ -19,7 +28,7 @@ <h2 id=\"app-{{ group.grouper }}\">{{ group.grouper|capfirst }}</h2>\n <table class=\"xfull\">\n {% for model in group.list %}\n <tr>\n-<th><a href=\"{{ model.app_label }}.{{ model.object_name.lower }}/\">{{ model.object_name }}</a></th>\n+<th><a href=\"{% url 'django-admindocs-models-detail' app_label=model.app_label model_name=model.object_name.lower %}\">{{ model.object_name }}</a></th>\n </tr>\n {% endfor %}\n </table>"
        },
        {
            "sha": "307dd627df8cbf2678019a2c438255415bf17579",
            "filename": "django/contrib/admindocs/templates/admin_doc/template_detail.html",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_detail.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_detail.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_detail.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,6 +1,15 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../../\">Home</a> &rsaquo; <a href=\"../../\">Documentation</a> &rsaquo; Templates &rsaquo; {{ name }}</div>{% endblock %}\n+{% load url from future %}\n+\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-docroot' %}\">{% trans 'Documentation' %}</a>\n+&rsaquo; {% trans 'Templates' %}\n+&rsaquo; {{ name }}\n+</div>\n+{% endblock %}\n \n {% block title %}Template: {{ name }}{% endblock %}\n \n@@ -17,5 +26,5 @@ <h2>Search path for template \"{{ name }}\" on {{ group.grouper }}:</h2>\n     </ol>\n {% endfor %}\n \n-<p class=\"small\"><a href=\"../../\">&lsaquo; Back to Documentation</a></p>\n+<p class=\"small\"><a href=\"{% url 'django-admindocs-docroot' %}\">&lsaquo; Back to Documentation</a></p>\n {% endblock %}"
        },
        {
            "sha": "1809bc918286e1e98e3413b277a6a8b2edc7ecf3",
            "filename": "django/contrib/admindocs/templates/admin_doc/template_filter_index.html",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_filter_index.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_filter_index.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_filter_index.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,15 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n+\n {% block coltype %}colSM{% endblock %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../\">Home</a> &rsaquo; <a href=\"../\">Documentation</a> &rsaquo; filters</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-docroot' %}\">{% trans 'Documentation' %}</a>\n+&rsaquo; {% trans 'Filters' %}\n+</div>\n+{% endblock %}\n {% block title %}Template filters{% endblock %}\n \n {% block content %}"
        },
        {
            "sha": "18e5d952987e08a9e9cbdd0be8fd8b0f5bba9e86",
            "filename": "django/contrib/admindocs/templates/admin_doc/template_tag_index.html",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_tag_index.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_tag_index.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Ftemplate_tag_index.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,15 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n+\n {% block coltype %}colSM{% endblock %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../\">Home</a> &rsaquo; <a href=\"../\">Documentation</a> &rsaquo; Tags</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-docroot' %}\">{% trans 'Documentation' %}</a>\n+&rsaquo; {% trans 'Tags' %}\n+</div>\n+{% endblock %}\n {% block title %}Template tags{% endblock %}\n \n {% block content %}"
        },
        {
            "sha": "41c812110f40e42b169e47784b6924bbdb61294f",
            "filename": "django/contrib/admindocs/templates/admin_doc/view_detail.html",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fview_detail.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fview_detail.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fview_detail.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,6 +1,15 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../../\">Home</a> &rsaquo; <a href=\"../../\">Documentation</a> &rsaquo; <a href=\"../\">Views</a> &rsaquo; {{ name }}</div>{% endblock %}\n+{% load url from future %}\n+\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-docroot' %}\">{% trans 'Documentation' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-views-index' %}\">{% trans 'Views' %}</a>\n+&rsaquo; {{ name }}\n+</div>\n+{% endblock %}\n {% block title %}View: {{ name }}{% endblock %}\n \n {% block content %}\n@@ -21,5 +30,5 @@ <h3>Templates:</h3>\n <p>{{ meta.Templates }}</p>\n {% endif %}\n \n-<p class=\"small\"><a href=\"../\">&lsaquo; Back to Views Documentation</a></p>\n+<p class=\"small\"><a href=\"{% url 'django-admindocs-views-index' %}\">&lsaquo; Back to Views Documentation</a></p>\n {% endblock %}"
        },
        {
            "sha": "e508c84e199f429f689358ba35bd6eb7e5577bba",
            "filename": "django/contrib/admindocs/templates/admin_doc/view_index.html",
            "status": "modified",
            "additions": 11,
            "deletions": 3,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fview_index.html",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fview_index.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Ftemplates%2Fadmin_doc%2Fview_index.html?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,7 +1,15 @@\n {% extends \"admin/base_site.html\" %}\n {% load i18n %}\n+{% load url from future %}\n+\n {% block coltype %}colSM{% endblock %}\n-{% block breadcrumbs %}<div class=\"breadcrumbs\"><a href=\"../../\">Home</a> &rsaquo; <a href=\"../\">Documentation</a> &rsaquo; Views</div>{% endblock %}\n+{% block breadcrumbs %}\n+<div class=\"breadcrumbs\">\n+<a href=\"{% url 'admin:index' %}\">{% trans 'Home' %}</a>\n+&rsaquo; <a href=\"{% url 'django-admindocs-docroot' %}\">{% trans 'Documentation' %}</a>\n+&rsaquo; {% trans 'Views' %}\n+</div>\n+{% endblock %}\n {% block title %}Views{% endblock %}\n \n {% block content %}\n@@ -29,8 +37,8 @@ <h2 id=\"site{{ site_views.grouper.id }}\">Views by URL on {{ site_views.grouper.n\n \n {% for view in site_views.list|dictsort:\"url\" %}\n {% ifchanged %}\n-<h3><a href=\"{{ view.module }}.{{ view.name }}/\">{{ view.url }}</a></h3>\n-<p class=\"small quiet\">View function: {{ view.module }}.{{ view.name }}</p>\n+<h3><a href=\"{% url 'django-admindocs-views-detail' view=view.full_name %}\">{{ view.url }}</a></h3>\n+<p class=\"small quiet\">View function: {{ view.full_name }}</p>\n <p>{{ view.title }}</p>\n <hr />\n {% endifchanged %}"
        },
        {
            "sha": "9725865d81c19ec909d4e87496ceb157e6be0b75",
            "filename": "django/contrib/admindocs/views.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/django%2Fcontrib%2Fadmindocs%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmindocs%2Fviews.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -136,8 +136,7 @@ def view_index(request):\n             site_obj = GenericSite()\n         for (func, regex) in view_functions:\n             views.append({\n-                'name': getattr(func, '__name__', func.__class__.__name__),\n-                'module': func.__module__,\n+                'full_name': '%s.%s' % (func.__module__, getattr(func, '__name__', func.__class__.__name__)),\n                 'site_id': settings_mod.SITE_ID,\n                 'site': site_obj,\n                 'url': simplify_regex(regex),"
        },
        {
            "sha": "21145c565289af05ad114e11de4a615af042f787",
            "filename": "docs/ref/contrib/admin/index.txt",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1960,3 +1960,18 @@ if you specifically wanted the admin view from the admin instance named\n \n For more details, see the documentation on :ref:`reversing namespaced URLs\n <topics-http-reversing-url-namespaces>`.\n+\n+To allow easier reversing of the admin urls in templates, Django provides an \n+``admin_url`` filter which takes an action as argument:\n+\n+.. code-block:: html+django\n+\n+    {% load admin_urls %}\n+    {% load url from future %}\n+    <a href=\"{% url opts|admin_urlname:'add' %}\">Add user</a>\n+    <a href=\"{% url opts|admin_urlname:'delete' user.pk %}\">Delete this user</a>\n+\n+The action in the examples above match the last part of the URL names for\n+:class:`ModelAdmin` instances described above. The ``opts`` variable can be any\n+object which has an ``app_label`` and ``module_name`` and is usually supplied \n+by the admin views for the current model."
        },
        {
            "sha": "792d6005489ebee62cde02066f19c5521e620451",
            "filename": "tests/regressiontests/admin_custom_urls/__init__.py",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_custom_urls%2F__init__.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -0,0 +1 @@\n+#"
        },
        {
            "sha": "d803393a12a67de72ff39c7adebe589104452b01",
            "filename": "tests/regressiontests/admin_custom_urls/fixtures/actions.json",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Ffixtures%2Factions.json",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Ffixtures%2Factions.json",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_custom_urls%2Ffixtures%2Factions.json?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -0,0 +1,44 @@\n+[\n+  {\n+    \"pk\": \"delete\", \n+    \"model\": \"admin_custom_urls.action\", \n+    \"fields\": {\n+      \"description\": \"Remove things.\"\n+    }\n+  }, \n+  {\n+    \"pk\": \"rename\", \n+    \"model\": \"admin_custom_urls.action\", \n+    \"fields\": {\n+      \"description\": \"Gives things other names.\"\n+    }\n+  }, \n+  {\n+    \"pk\": \"add\", \n+    \"model\": \"admin_custom_urls.action\", \n+    \"fields\": {\n+      \"description\": \"Add things.\"\n+    }\n+  }, \n+  {\n+    \"pk\": \"path/to/file/\", \n+    \"model\": \"admin_custom_urls.action\", \n+    \"fields\": {\n+      \"description\": \"An action with '/' in its name.\"\n+    }\n+  }, \n+  {\n+    \"pk\": \"path/to/html/document.html\", \n+    \"model\": \"admin_custom_urls.action\", \n+    \"fields\": {\n+      \"description\": \"An action with a name similar to a HTML doc path.\"\n+    }\n+  }, \n+  {\n+    \"pk\": \"javascript:alert('Hello world');\\\">Click here</a>\", \n+    \"model\": \"admin_custom_urls.action\", \n+    \"fields\": {\n+      \"description\": \"An action with a name suspected of being a XSS attempt\"\n+    }\n+  }\n+]\n\\ No newline at end of file"
        },
        {
            "sha": "72d86d70ad19d513667ef26147f09f722b542c5b",
            "filename": "tests/regressiontests/admin_custom_urls/fixtures/users.json",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Ffixtures%2Fusers.json",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Ffixtures%2Fusers.json",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_custom_urls%2Ffixtures%2Fusers.json?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -0,0 +1,20 @@\n+[\n+  {\n+    \"pk\": 100,\n+    \"model\": \"auth.user\",\n+    \"fields\": {\n+      \"username\": \"super\",\n+      \"first_name\": \"Super\",\n+      \"last_name\": \"User\",\n+      \"is_active\": true,\n+      \"is_superuser\": true,\n+      \"is_staff\": true,\n+      \"last_login\": \"2007-05-30 13:20:10\",\n+      \"groups\": [],\n+      \"user_permissions\": [],\n+      \"password\": \"sha1$995a3$6011485ea3834267d719b4c801409b8b1ddd0158\",\n+      \"email\": \"super@example.com\",\n+      \"date_joined\": \"2007-05-30 13:20:10\"\n+    }\n+  }\n+]"
        },
        {
            "sha": "f8c83a9024aab44763ecc64137fd24a10328f7af",
            "filename": "tests/regressiontests/admin_custom_urls/models.py",
            "status": "added",
            "additions": 50,
            "deletions": 0,
            "changes": 50,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_custom_urls%2Fmodels.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -0,0 +1,50 @@\n+from functools import update_wrapper\n+\n+from django.contrib import admin\n+from django.db import models\n+\n+\n+class Action(models.Model):\n+    name = models.CharField(max_length=50, primary_key=True)\n+    description = models.CharField(max_length=70)\n+\n+    def __unicode__(self):\n+        return self.name\n+\n+\n+class ActionAdmin(admin.ModelAdmin):\n+    \"\"\"\n+    A ModelAdmin for the Action model that changes the URL of the add_view\n+    to '<app name>/<model name>/!add/'\n+    The Action model has a CharField PK.\n+    \"\"\"\n+\n+    list_display = ('name', 'description')\n+\n+    def remove_url(self, name):\n+        \"\"\"\n+        Remove all entries named 'name' from the ModelAdmin instance URL\n+        patterns list\n+        \"\"\"\n+        return filter(lambda e: e.name != name, super(ActionAdmin, self).get_urls())\n+\n+    def get_urls(self):\n+        # Add the URL of our custom 'add_view' view to the front of the URLs\n+        # list.  Remove the existing one(s) first\n+        from django.conf.urls.defaults import patterns, url\n+\n+        def wrap(view):\n+            def wrapper(*args, **kwargs):\n+                return self.admin_site.admin_view(view)(*args, **kwargs)\n+            return update_wrapper(wrapper, view)\n+\n+        info = self.model._meta.app_label, self.model._meta.module_name\n+\n+        view_name = '%s_%s_add' % info\n+\n+        return patterns('',\n+            url(r'^!add/$', wrap(self.add_view), name=view_name),\n+        ) + self.remove_url(view_name)\n+\n+\n+admin.site.register(Action, ActionAdmin)"
        },
        {
            "sha": "cfc6b8583e2e95a33c0fa24d8c0e875c4ff082f8",
            "filename": "tests/regressiontests/admin_custom_urls/tests.py",
            "status": "added",
            "additions": 72,
            "deletions": 0,
            "changes": 72,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_custom_urls%2Ftests.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -0,0 +1,72 @@\n+from django.core.urlresolvers import reverse\n+from django.template.response import TemplateResponse\n+from django.test import TestCase\n+\n+from models import Action\n+\n+\n+class AdminCustomUrlsTest(TestCase):\n+    fixtures = ['users.json', 'actions.json']\n+\n+    def setUp(self):\n+        self.client.login(username='super', password='secret')\n+\n+    def tearDown(self):\n+        self.client.logout()\n+\n+    def testBasicAddGet(self):\n+        \"\"\"\n+        A smoke test to ensure GET on the add_view works.\n+        \"\"\"\n+        response = self.client.get('/custom_urls/admin/admin_custom_urls/action/!add/')\n+        self.assertIsInstance(response, TemplateResponse)\n+        self.assertEqual(response.status_code, 200)\n+\n+    def testAddWithGETArgs(self):\n+        response = self.client.get('/custom_urls/admin/admin_custom_urls/action/!add/', {'name': 'My Action'})\n+        self.assertEqual(response.status_code, 200)\n+        self.assertTrue(\n+            'value=\"My Action\"' in response.content,\n+            \"Couldn't find an input with the right value in the response.\"\n+        )\n+\n+    def testBasicAddPost(self):\n+        \"\"\"\n+        A smoke test to ensure POST on add_view works.\n+        \"\"\"\n+        post_data = {\n+            '_popup': u'1',\n+            \"name\": u'Action added through a popup',\n+            \"description\": u\"Description of added action\",\n+        }\n+        response = self.client.post('/custom_urls/admin/admin_custom_urls/action/!add/', post_data)\n+        self.assertEqual(response.status_code, 200)\n+        self.assertContains(response, 'dismissAddAnotherPopup')\n+        self.assertContains(response, 'Action added through a popup')\n+\n+    def testAdminUrlsNoClash(self):\n+        \"\"\"\n+        Test that some admin URLs work correctly. The model has a CharField\n+        PK and the add_view URL has been customized.\n+        \"\"\"\n+        # Should get the change_view for model instance with PK 'add', not show\n+        # the add_view\n+        response = self.client.get('/custom_urls/admin/admin_custom_urls/action/add/')\n+        self.assertEqual(response.status_code, 200)\n+        self.assertContains(response, 'Change action')\n+\n+        # Ditto, but use reverse() to build the URL\n+        path = reverse('admin:%s_action_change' % Action._meta.app_label,\n+                args=('add',))\n+        response = self.client.get(path)\n+        self.assertEqual(response.status_code, 200)\n+        self.assertContains(response, 'Change action')\n+\n+        # Should correctly get the change_view for the model instance with the\n+        # funny-looking PK\n+        path = reverse('admin:%s_action_change' % Action._meta.app_label,\n+                args=(\"path/to/html/document.html\",))\n+        response = self.client.get(path)\n+        self.assertEqual(response.status_code, 200)\n+        self.assertContains(response, 'Change action')\n+        self.assertContains(response, 'value=\"path/to/html/document.html\"')"
        },
        {
            "sha": "6c2761a2225a47818e1665fdfe2e838efc029ff4",
            "filename": "tests/regressiontests/admin_custom_urls/urls.py",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_custom_urls%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_custom_urls%2Furls.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -0,0 +1,7 @@\n+from django.conf.urls.defaults import *\n+from django.contrib import admin\n+\n+urlpatterns = patterns('',\n+    (r'^admin/', include(admin.site.urls)),\n+)\n+"
        },
        {
            "sha": "78457d97abc4f9c4c94eb1a84ece11210f91f908",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -595,7 +595,7 @@ def test_save_as_display(self):\n         self.assertTrue(response.context['save_as'])\n         post_data = {'_saveasnew':'', 'name':'John M', 'gender':3, 'alive':'checked'}\n         response = self.client.post('/test_admin/admin/admin_views/person/1/', post_data)\n-        self.assertEqual(response.context['form_url'], '../add/')\n+        self.assertEqual(response.context['form_url'], '/test_admin/admin/admin_views/person/add/')\n \n class CustomModelAdminTest(AdminViewBasicTest):\n     urls = \"regressiontests.admin_views.urls\"\n@@ -842,7 +842,7 @@ def testAddView(self):\n         self.client.post('/test_admin/admin/', self.adduser_login)\n         addpage = self.client.get('/test_admin/admin/admin_views/article/add/')\n         self.assertEqual(addpage.status_code, 200)\n-        change_list_link = '<a href=\"../\">Articles</a> &rsaquo;'\n+        change_list_link = '&rsaquo; <a href=\"/test_admin/admin/admin_views/article/\">Articles</a>'\n         self.assertFalse(change_list_link in addpage.content,\n                     'User restricted to add permission is given link to change list view in breadcrumbs.')\n         post = self.client.post('/test_admin/admin/admin_views/article/add/', add_dict)"
        },
        {
            "sha": "e7c23e5144d8436e18ca00b89b67a1735bd36e99",
            "filename": "tests/urls.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/aaf77c1676e44019abe544911ff7a06eb2690295/tests%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Furls.py?ref=aaf77c1676e44019abe544911ff7a06eb2690295",
            "patch": "@@ -1,6 +1,5 @@\n from django.conf.urls import patterns, include\n \n-\n urlpatterns = patterns('',\n     # test_client modeltest urls\n     (r'^test_client/', include('modeltests.test_client.urls')),\n@@ -25,4 +24,7 @@\n     # admin widget tests\n     (r'widget_admin/', include('regressiontests.admin_widgets.urls')),\n \n+    # admin custom URL tests\n+    (r'^custom_urls/', include('regressiontests.admin_custom_urls.urls')),\n+\n )"
        }
    ],
    "stats": {
        "total": 594,
        "additions": 489,
        "deletions": 105
    }
}