{
    "author": "adrianholovaty",
    "message": "Changed BoundField.subwidgets() to return SubWidget objects instead of rendered strings. This means we can access individual radio buttons' properties in the template (see new docs)\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17175 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e",
    "files": [
        {
            "sha": "d3f2046779f24ce7bc403aeecb0e1384afe92854",
            "filename": "django/forms/forms.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e/django%2Fforms%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e/django%2Fforms%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fforms.py?ref=08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e",
            "patch": "@@ -418,7 +418,13 @@ def __iter__(self):\n         iterate over individual radio buttons in a template.\n         \"\"\"\n         for subwidget in self.field.widget.subwidgets(self.html_name, self.value()):\n-            yield self.as_widget(subwidget)\n+            yield subwidget\n+\n+    def __len__(self):\n+        return len(list(self.__iter__()))\n+\n+    def __getitem__(self, idx):\n+        return list(self.__iter__())[idx]\n \n     def _errors(self):\n         \"\"\""
        },
        {
            "sha": "49b148eeca2638d34627541128038b106226889e",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 18,
            "deletions": 2,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e",
            "patch": "@@ -137,6 +137,22 @@ def __new__(cls, name, bases, attrs):\n             new_class.media = media_property(new_class)\n         return new_class\n \n+class SubWidget(StrAndUnicode):\n+    \"\"\"\n+    Some widgets are made of multiple HTML elements -- namely, RadioSelect.\n+    This is a class that represents the \"inner\" HTML element of a widget.\n+    \"\"\"\n+    def __init__(self, parent_widget, name, value, attrs, choices):\n+        self.parent_widget = parent_widget\n+        self.name, self.value = name, value\n+        self.attrs, self.choices = attrs, choices\n+\n+    def __unicode__(self):\n+        args = [self.name, self.value, self.attrs]\n+        if self.choices:\n+            args.append(self.choices)\n+        return self.parent_widget.render(*args)\n+\n class Widget(object):\n     __metaclass__ = MediaDefiningClass\n     is_hidden = False          # Determines whether this corresponds to an <input type=\"hidden\">.\n@@ -163,7 +179,7 @@ def subwidgets(self, name, value, attrs=None, choices=()):\n \n         Arguments are the same as for render().\n         \"\"\"\n-        yield self\n+        yield SubWidget(self, name, value, attrs, choices)\n \n     def render(self, name, value, attrs=None):\n         \"\"\"\n@@ -623,7 +639,7 @@ def _has_changed(self, initial, data):\n         data_set = set([force_unicode(value) for value in data])\n         return data_set != initial_set\n \n-class RadioInput(StrAndUnicode):\n+class RadioInput(SubWidget):\n     \"\"\"\n     An object used by RadioFieldRenderer that represents a single\n     <input type='radio'>."
        },
        {
            "sha": "ac110c2ee8ff75c73ea35050ed526844022075e7",
            "filename": "docs/ref/forms/widgets.txt",
            "status": "modified",
            "additions": 35,
            "deletions": 2,
            "changes": 37,
            "blob_url": "https://github.com/django/django/blob/08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e/docs%2Fref%2Fforms%2Fwidgets.txt",
            "raw_url": "https://github.com/django/django/raw/08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e/docs%2Fref%2Fforms%2Fwidgets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Fwidgets.txt?ref=08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e",
            "patch": "@@ -386,8 +386,41 @@ commonly used groups of widgets:\n             <label><input type=\"radio\" name=\"beatles\" value=\"ringo\" /> Ringo</label>\n         </div>\n \n-    If you decide not to loop over the radio buttons, they'll be output in a\n-    ``<ul>`` with ``<li>`` tags, as above.\n+    That included the ``<label>`` tags. To get more granular, you can use each\n+    radio button's ``tag`` and ``choice_label`` attributes. For example, this template...\n+\n+    .. code-block:: html+django\n+\n+        {% for radio in myform.beatles %}\n+            <label>\n+                {{ radio.choice_label }}\n+                <span class=\"radio\">{{ radio.tag }}</span>\n+            </label>\n+        {% endfor %}\n+\n+    ...will result in the following HTML:\n+\n+    .. code-block:: html\n+\n+            <label>\n+                John\n+                <span class=\"radio\"><input type=\"radio\" name=\"beatles\" value=\"john\" /></span>\n+            </label>\n+            <label>\n+                Paul\n+                <span class=\"radio\"><input type=\"radio\" name=\"beatles\" value=\"paul\" /></span>\n+            </label>\n+            <label>\n+                George\n+                <span class=\"radio\"><input type=\"radio\" name=\"beatles\" value=\"george\" /></span>\n+            </label>\n+            <label>\n+                Ringo\n+                <span class=\"radio\"><input type=\"radio\" name=\"beatles\" value=\"ringo\" /></span>\n+            </label>\n+\n+    If you decide not to loop over the radio buttons -- e.g., if your template simply includes\n+    ``{{ myform.beatles }}`` -- they'll be output in a ``<ul>`` with ``<li>`` tags, as above.\n \n ``CheckboxSelectMultiple``\n ~~~~~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "sha": "4e9cc16f235f8a1bea38b58e21068d30e71ed755",
            "filename": "tests/regressiontests/forms/tests/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py?ref=08bec4fbc10ca5638ad22f20a753ec5e8d92eb0e",
            "patch": "@@ -439,7 +439,7 @@ class BeatleForm(Form):\n             name = ChoiceField(choices=[('john', 'John'), ('paul', 'Paul'), ('george', 'George'), ('ringo', 'Ringo')], widget=RadioSelect)\n \n         f = BeatleForm(auto_id=False)\n-        self.assertEqual('\\n'.join(list(f['name'])), \"\"\"<label><input type=\"radio\" name=\"name\" value=\"john\" /> John</label>\n+        self.assertEqual('\\n'.join([str(bf) for bf in f['name']]), \"\"\"<label><input type=\"radio\" name=\"name\" value=\"john\" /> John</label>\n <label><input type=\"radio\" name=\"name\" value=\"paul\" /> Paul</label>\n <label><input type=\"radio\" name=\"name\" value=\"george\" /> George</label>\n <label><input type=\"radio\" name=\"name\" value=\"ringo\" /> Ringo</label>\"\"\")\n@@ -454,7 +454,7 @@ class BeatleForm(Form):\n             name = CharField()\n \n         f = BeatleForm(auto_id=False)\n-        self.assertEqual('\\n'.join(list(f['name'])), u'<input type=\"text\" name=\"name\" />')\n+        self.assertEqual('\\n'.join([str(bf) for bf in f['name']]), u'<input type=\"text\" name=\"name\" />')\n \n     def test_forms_with_multiple_choice(self):\n         # MultipleChoiceField is a special case, as its data is required to be a list:"
        }
    ],
    "stats": {
        "total": 69,
        "additions": 62,
        "deletions": 7
    }
}