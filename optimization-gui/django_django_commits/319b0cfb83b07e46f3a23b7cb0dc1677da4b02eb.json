{
    "author": "alex",
    "message": "Explicitly close a file in the collectstatic management command.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16525 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "319b0cfb83b07e46f3a23b7cb0dc1677da4b02eb",
    "files": [
        {
            "sha": "341537ffa728b6a497e79eb05119ca7f1e09f134",
            "filename": "django/contrib/staticfiles/management/commands/collectstatic.py",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/319b0cfb83b07e46f3a23b7cb0dc1677da4b02eb/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py",
            "raw_url": "https://github.com/django/django/raw/319b0cfb83b07e46f3a23b7cb0dc1677da4b02eb/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fmanagement%2Fcommands%2Fcollectstatic.py?ref=319b0cfb83b07e46f3a23b7cb0dc1677da4b02eb",
            "patch": "@@ -1,3 +1,5 @@\n+from __future__ import with_statement\n+\n import os\n import sys\n from optparse import make_option\n@@ -9,6 +11,7 @@\n \n from django.contrib.staticfiles import finders\n \n+\n class Command(NoArgsCommand):\n     \"\"\"\n     Command that allows to copy or symlink media files from different\n@@ -236,7 +239,7 @@ def copy_file(self, path, prefixed_path, source_storage):\n                     os.makedirs(os.path.dirname(full_path))\n                 except OSError:\n                     pass\n-            source_file = source_storage.open(path)\n-            self.storage.save(prefixed_path, source_file)\n+            with source_storage.open(path) as source_file:\n+                self.storage.save(prefixed_path, source_file)\n         if not prefixed_path in self.copied_files:\n             self.copied_files.append(prefixed_path)"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 5,
        "deletions": 2
    }
}