{
    "author": "aaugustin",
    "message": "[py3] Fixed test_utils tests of doctests.",
    "sha": "8c356acf2e6896759e6ca7a369f0b04766a928f3",
    "files": [
        {
            "sha": "37490143724088a397debf3aa46f3a845ddc1fe8",
            "filename": "tests/regressiontests/test_utils/tests.py",
            "status": "modified",
            "additions": 19,
            "deletions": 14,
            "changes": 33,
            "blob_url": "https://github.com/django/django/blob/8c356acf2e6896759e6ca7a369f0b04766a928f3/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/8c356acf2e6896759e6ca7a369f0b04766a928f3/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_utils%2Ftests.py?ref=8c356acf2e6896759e6ca7a369f0b04766a928f3",
            "patch": "@@ -5,6 +5,7 @@\n from django.http import HttpResponse\n from django.template.loader import render_to_string\n from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature\n+from django.utils import six\n from django.utils.unittest import skip\n \n from .models import Person\n@@ -495,12 +496,6 @@ class MyCustomField(IntegerField):\n >>> from django.utils.xmlutils import SimplerXMLGenerator\n >>> from django.utils.six import StringIO\n \n->>> def produce_long():\n-...     return 42L\n-\n->>> def produce_int():\n-...     return 42\n-\n >>> def produce_json():\n ...     return json.dumps(['foo', {'bar': ('baz', None, 1.0, 2), 'whiz': 42}])\n \n@@ -529,14 +524,6 @@ class MyCustomField(IntegerField):\n ...     xml.endElement(\"bar\")\n ...     return stream.getvalue()\n \n-# Long values are normalized and are comparable to normal integers ...\n->>> produce_long()\n-42\n-\n-# ... and vice versa\n->>> produce_int()\n-42L\n-\n # JSON output is normalized for field order, so it doesn't matter\n # which order json dictionary attributes are listed in output\n >>> produce_json()\n@@ -560,3 +547,21 @@ class MyCustomField(IntegerField):\n '<foo bbb=\"2.0\" aaa=\"1.0\">Hello</foo><bar ddd=\"4.0\" ccc=\"3.0\"></bar>'\n \n \"\"\"}\n+\n+if not six.PY3:\n+    __test__[\"API_TEST\"] += \"\"\"\n+>>> def produce_long():\n+...     return 42L\n+\n+>>> def produce_int():\n+...     return 42\n+\n+# Long values are normalized and are comparable to normal integers ...\n+>>> produce_long()\n+42\n+\n+# ... and vice versa\n+>>> produce_int()\n+42L\n+\n+\"\"\""
        }
    ],
    "stats": {
        "total": 33,
        "additions": 19,
        "deletions": 14
    }
}