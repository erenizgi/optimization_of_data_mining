{
    "author": "claudep",
    "message": "[py3] Updated PostGIS adapter",
    "sha": "874908e3bba8538d1c108e1b38f9d9519c6e5416",
    "files": [
        {
            "sha": "8bb514d760b6dc2af38723ef32be4259aec9dd39",
            "filename": "django/contrib/gis/db/backends/postgis/adapter.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/874908e3bba8538d1c108e1b38f9d9519c6e5416/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fpostgis%2Fadapter.py",
            "raw_url": "https://github.com/django/django/raw/874908e3bba8538d1c108e1b38f9d9519c6e5416/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fpostgis%2Fadapter.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fbackends%2Fpostgis%2Fadapter.py?ref=874908e3bba8538d1c108e1b38f9d9519c6e5416",
            "patch": "@@ -1,6 +1,7 @@\n \"\"\"\n  This object provides quoting for GEOS geometries into PostgreSQL/PostGIS.\n \"\"\"\n+from __future__ import unicode_literals\n \n from psycopg2 import Binary\n from psycopg2.extensions import ISQLQuote\n@@ -10,7 +11,7 @@ def __init__(self, geom):\n         \"Initializes on the geometry.\"\n         # Getting the WKB (in string form, to allow easy pickling of\n         # the adaptor) and the SRID from the geometry.\n-        self.ewkb = str(geom.ewkb)\n+        self.ewkb = bytes(geom.ewkb)\n         self.srid = geom.srid\n         self._adapter = Binary(self.ewkb)\n \n@@ -39,7 +40,7 @@ def prepare(self, conn):\n     def getquoted(self):\n         \"Returns a properly quoted string for use in PostgreSQL/PostGIS.\"\n         # psycopg will figure out whether to use E'\\\\000' or '\\000'\n-        return 'ST_GeomFromEWKB(%s)' % self._adapter.getquoted()\n+        return str('ST_GeomFromEWKB(%s)' % self._adapter.getquoted().decode())\n \n     def prepare_database_save(self, unused):\n         return self"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 3,
        "deletions": 2
    }
}