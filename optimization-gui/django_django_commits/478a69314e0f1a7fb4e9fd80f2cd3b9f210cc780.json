{
    "author": "aaugustin",
    "message": "[py3] Fixed uses of __metaclass__ in tests.",
    "sha": "478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780",
    "files": [
        {
            "sha": "2494d5fd2caf628e9574ffa243633e2986fe9d93",
            "filename": "tests/modeltests/custom_pk/fields.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fmodeltests%2Fcustom_pk%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fmodeltests%2Fcustom_pk%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fcustom_pk%2Ffields.py?ref=478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780",
            "patch": "@@ -22,8 +22,7 @@ def __eq__(self, other):\n             return self.value == other.value\n         return self.value == other\n \n-class MyAutoField(models.CharField):\n-    __metaclass__ = models.SubfieldBase\n+class MyAutoField(six.with_metaclass(models.SubfieldBase, models.CharField)):\n \n     def __init__(self, *args, **kwargs):\n         kwargs['max_length'] = 10"
        },
        {
            "sha": "a3867e3671edee7149191934f7f5377893665eb6",
            "filename": "tests/modeltests/field_subclassing/fields.py",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ffield_subclassing%2Ffields.py?ref=478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780",
            "patch": "@@ -20,13 +20,12 @@ def __init__(self, first, second):\n     def __str__(self):\n         return '%s%s' % (force_text(self.first), force_text(self.second))\n \n-class SmallField(models.Field):\n+class SmallField(six.with_metaclass(models.SubfieldBase, models.Field)):\n     \"\"\"\n     Turns the \"Small\" class into a Django field. Because of the similarities\n     with normal character fields and the fact that Small.__unicode__ does\n     something sensible, we don't need to implement a lot here.\n     \"\"\"\n-    __metaclass__ = models.SubfieldBase\n \n     def __init__(self, *args, **kwargs):\n         kwargs['max_length'] = 2\n@@ -56,8 +55,7 @@ class SmallerField(SmallField):\n     pass\n \n \n-class JSONField(models.TextField):\n-    __metaclass__ = models.SubfieldBase\n+class JSONField(six.with_metaclass(models.SubfieldBase, models.TextField)):\n \n     description = (\"JSONField automatically serializes and desializes values to \"\n         \"and from JSON.\")"
        },
        {
            "sha": "569f2cec49e1d250cff142c11240971e562adb0b",
            "filename": "tests/modeltests/serializers/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fmodeltests%2Fserializers%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fmodeltests%2Fserializers%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fserializers%2Fmodels.py?ref=478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780",
            "patch": "@@ -99,8 +99,7 @@ def to_string(self):\n         return \"%s\" % self.title\n \n \n-class TeamField(models.CharField):\n-    __metaclass__ = models.SubfieldBase\n+class TeamField(six.with_metaclass(models.SubfieldBase, models.CharField)):\n \n     def __init__(self):\n         super(TeamField, self).__init__(max_length=100)"
        },
        {
            "sha": "e7cf7b9e1add059d61d4b5a784b50711410d4c0b",
            "filename": "tests/regressiontests/introspection/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fregressiontests%2Fintrospection%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fregressiontests%2Fintrospection%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fintrospection%2Ftests.py?ref=478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780",
            "patch": "@@ -4,6 +4,7 @@\n \n from django.db import connection\n from django.test import TestCase, skipUnlessDBFeature, skipIfDBFeature\n+from django.utils import six\n \n from .models import Reporter, Article\n \n@@ -35,8 +36,7 @@ def __new__(cls, name, bases, attrs):\n                 attrs[k] = ignore_not_implemented(v)\n         return type.__new__(cls, name, bases, attrs)\n \n-class IntrospectionTests(TestCase):\n-    __metaclass__ = IgnoreNotimplementedError\n+class IntrospectionTests(six.with_metaclass(IgnoreNotimplementedError, TestCase)):\n \n     def test_table_names(self):\n         tl = connection.introspection.table_names()"
        },
        {
            "sha": "90c907f2a6c83642f9ad5f570ffce0cb39ea1efd",
            "filename": "tests/regressiontests/model_forms_regress/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py?ref=478a69314e0f1a7fb4e9fd80f2cd3b9f210cc780",
            "patch": "@@ -485,9 +485,8 @@ def __new__(cls, name, bases, attrs):\n         new.base_fields = {}\n         return new\n \n-class CustomMetaclassForm(forms.ModelForm):\n-    __metaclass__ = CustomMetaclass\n-\n+class CustomMetaclassForm(six.with_metaclass(CustomMetaclass, forms.ModelForm)):\n+    pass\n \n class CustomMetaclassTestCase(TestCase):\n     def test_modelform_factory_metaclass(self):"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 8,
        "deletions": 13
    }
}