{
    "author": "aaugustin",
    "message": "Fixed comment_test tests under hash randomization.\n\nThanks clelland for the patch.",
    "sha": "789ea3342d5cdfc850a2f68818e707cdc5111bb9",
    "files": [
        {
            "sha": "c93d7abf7debe74437698c042b9afeb0dd05ea0e",
            "filename": "tests/regressiontests/comment_tests/tests/feed_tests.py",
            "status": "modified",
            "additions": 19,
            "deletions": 4,
            "changes": 23,
            "blob_url": "https://github.com/django/django/blob/789ea3342d5cdfc850a2f68818e707cdc5111bb9/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Ffeed_tests.py",
            "raw_url": "https://github.com/django/django/raw/789ea3342d5cdfc850a2f68818e707cdc5111bb9/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Ffeed_tests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Ffeed_tests.py?ref=789ea3342d5cdfc850a2f68818e707cdc5111bb9",
            "patch": "@@ -1,5 +1,7 @@\n from __future__ import absolute_import\n \n+from xml.etree import ElementTree as ET\n+\n from django.conf import settings\n from django.contrib.comments.models import Comment\n from django.contrib.contenttypes.models import ContentType\n@@ -31,8 +33,21 @@ def test_feed(self):\n         response = self.client.get(self.feed_url)\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response['Content-Type'], 'application/rss+xml; charset=utf-8')\n-        self.assertContains(response, '<rss xmlns:atom=\"http://www.w3.org/2005/Atom\" version=\"2.0\">')\n-        self.assertContains(response, '<title>example.com comments</title>')\n-        self.assertContains(response, '<link>http://example.com/</link>')\n-        self.assertContains(response, '</rss>')\n+\n+        rss_elem = ET.fromstring(response.content)\n+\n+        self.assertEqual(rss_elem.tag, \"rss\")\n+        self.assertEqual(rss_elem.attrib, {\"version\": \"2.0\"})\n+\n+        channel_elem = rss_elem.find(\"channel\")\n+\n+        title_elem = channel_elem.find(\"title\")\n+        self.assertEqual(title_elem.text, \"example.com comments\")\n+\n+        link_elem = channel_elem.find(\"link\")\n+        self.assertEqual(link_elem.text, \"http://example.com/\")\n+\n+        atomlink_elem = channel_elem.find(\"{http://www.w3.org/2005/Atom}link\")\n+        self.assertEqual(atomlink_elem.attrib, {\"href\": \"http://example.com/rss/comments/\", \"rel\": \"self\"})\n+\n         self.assertNotContains(response, \"A comment for the second site.\")"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 19,
        "deletions": 4
    }
}