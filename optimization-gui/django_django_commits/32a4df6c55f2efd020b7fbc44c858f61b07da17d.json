{
    "author": "claudep",
    "message": "Fixed #18395 -- Reset language-related global variables with setting_changed",
    "sha": "32a4df6c55f2efd020b7fbc44c858f61b07da17d",
    "files": [
        {
            "sha": "052b7dfa5c527ebaea1a89eac8ba2a832cd45067",
            "filename": "django/test/signals.py",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/32a4df6c55f2efd020b7fbc44c858f61b07da17d/django%2Ftest%2Fsignals.py",
            "raw_url": "https://github.com/django/django/raw/32a4df6c55f2efd020b7fbc44c858f61b07da17d/django%2Ftest%2Fsignals.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fsignals.py?ref=32a4df6c55f2efd020b7fbc44c858f61b07da17d",
            "patch": "@@ -11,6 +11,9 @@\n \n setting_changed = Signal(providing_args=[\"setting\", \"value\"])\n \n+# Most setting_changed receivers are supposed to be added below,\n+# except for cases where the receiver is related to a contrib app.\n+\n \n @receiver(setting_changed)\n def update_connections_time_zone(**kwargs):\n@@ -46,3 +49,12 @@ def update_connections_time_zone(**kwargs):\n def clear_context_processors_cache(**kwargs):\n     if kwargs['setting'] == 'TEMPLATE_CONTEXT_PROCESSORS':\n         context._standard_context_processors = None\n+\n+\n+@receiver(setting_changed)\n+def language_changed(**kwargs):\n+    if kwargs['setting'] in ('LOCALE_PATHS', 'LANGUAGE_CODE'):\n+        from django.utils.translation import trans_real\n+        trans_real._default = None\n+        if kwargs['setting'] == 'LOCALE_PATHS':\n+            trans_real._translations = {}"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 12,
        "deletions": 0
    }
}