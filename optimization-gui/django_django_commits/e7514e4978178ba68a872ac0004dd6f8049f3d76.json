{
    "author": "jezdez",
    "message": "Merge pull request #942 from stephrdev/trac-18000\n\nFixed #18000 -- Moved the code to handle goto requests to an extra WizardView method.",
    "sha": "e7514e4978178ba68a872ac0004dd6f8049f3d76",
    "files": [
        {
            "sha": "17cfa6baa77234a9545b434e3f803819763d60fe",
            "filename": "django/contrib/formtools/wizard/views.py",
            "status": "modified",
            "additions": 21,
            "deletions": 7,
            "changes": 28,
            "blob_url": "https://github.com/django/django/blob/e7514e4978178ba68a872ac0004dd6f8049f3d76/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/e7514e4978178ba68a872ac0004dd6f8049f3d76/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py?ref=e7514e4978178ba68a872ac0004dd6f8049f3d76",
            "patch": "@@ -265,11 +265,7 @@ def post(self, *args, **kwargs):\n         # form. (This makes stepping back a lot easier).\n         wizard_goto_step = self.request.POST.get('wizard_goto_step', None)\n         if wizard_goto_step and wizard_goto_step in self.get_form_list():\n-            self.storage.current_step = wizard_goto_step\n-            form = self.get_form(\n-                data=self.storage.get_step_data(self.steps.current),\n-                files=self.storage.get_step_files(self.steps.current))\n-            return self.render(form)\n+            return self.render_goto_step(wizard_goto_step)\n \n         # Check if form was refreshed\n         management_form = ManagementForm(self.request.POST, prefix=self.prefix)\n@@ -317,6 +313,17 @@ def render_next_step(self, form, **kwargs):\n         self.storage.current_step = next_step\n         return self.render(new_form, **kwargs)\n \n+    def render_goto_step(self, goto_step, **kwargs):\n+        \"\"\"\n+        This method gets called when the current step has to be changed.\n+        `goto_step` contains the requested step to go to.\n+        \"\"\"\n+        self.storage.current_step = goto_step\n+        form = self.get_form(\n+            data=self.storage.get_step_data(self.steps.current),\n+            files=self.storage.get_step_files(self.steps.current))\n+        return self.render(form)\n+\n     def render_done(self, form, **kwargs):\n         \"\"\"\n         This method gets called when all forms passed. The method should also\n@@ -660,8 +667,7 @@ def post(self, *args, **kwargs):\n         \"\"\"\n         wizard_goto_step = self.request.POST.get('wizard_goto_step', None)\n         if wizard_goto_step and wizard_goto_step in self.get_form_list():\n-            self.storage.current_step = wizard_goto_step\n-            return redirect(self.get_step_url(wizard_goto_step))\n+            return self.render_goto_step(wizard_goto_step)\n         return super(NamedUrlWizardView, self).post(*args, **kwargs)\n \n     def get_context_data(self, form, **kwargs):\n@@ -682,6 +688,14 @@ def render_next_step(self, form, **kwargs):\n         self.storage.current_step = next_step\n         return redirect(self.get_step_url(next_step))\n \n+    def render_goto_step(self, goto_step, **kwargs):\n+        \"\"\"\n+        This method gets called when the current step has to be changed.\n+        `goto_step` contains the requested step to go to.\n+        \"\"\"\n+        self.storage.current_step = goto_step\n+        return redirect(self.get_step_url(goto_step))\n+\n     def render_revalidation_failure(self, failed_step, form, **kwargs):\n         \"\"\"\n         When a step fails, we have to redirect the user to the first failing"
        },
        {
            "sha": "0032eeb5d8450fa4ef84de43c29d020693c37864",
            "filename": "docs/ref/contrib/formtools/form-wizard.txt",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/e7514e4978178ba68a872ac0004dd6f8049f3d76/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "raw_url": "https://github.com/django/django/raw/e7514e4978178ba68a872ac0004dd6f8049f3d76/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt?ref=e7514e4978178ba68a872ac0004dd6f8049f3d76",
            "patch": "@@ -469,6 +469,17 @@ Advanced ``WizardView`` methods\n         def process_step_files(self, form):\n             return self.get_form_step_files(form)\n \n+.. method:: WizardView.render_goto_step(step, goto_step, **kwargs)\n+\n+    .. versionadded:: 1.6\n+\n+    This method is called when the step should be changed to something else\n+    than the next step. By default, this method just stores the requested\n+    step ``goto_step`` in the storage and then renders the new step.\n+\n+    If you want to store the entered data of the current step before rendering\n+    the next step, you can overwrite this method.\n+\n .. method:: WizardView.render_revalidation_failure(step, form, **kwargs)\n \n     When the wizard thinks all steps have passed it revalidates all forms with"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 32,
        "deletions": 7
    }
}