{
    "author": "jezdez",
    "message": "Fixed #15856 -- Added Macedonian localflavor. Many thanks to vasiliyeah.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16385 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
    "files": [
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "django/contrib/localflavor/mk/__init__.py",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/django%2Fcontrib%2Flocalflavor%2Fmk%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/django%2Fcontrib%2Flocalflavor%2Fmk%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fmk%2F__init__.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410"
        },
        {
            "sha": "0548de3a40b7e167f605c0bda23b13f4628db02f",
            "filename": "django/contrib/localflavor/mk/forms.py",
            "status": "added",
            "additions": 100,
            "deletions": 0,
            "changes": 100,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/django%2Fcontrib%2Flocalflavor%2Fmk%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/django%2Fcontrib%2Flocalflavor%2Fmk%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fmk%2Fforms.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -0,0 +1,100 @@\n+import datetime\n+\n+from django.core.validators import EMPTY_VALUES\n+from django.forms import ValidationError\n+from django.forms.fields import RegexField, Select\n+from django.utils.translation import ugettext_lazy as _\n+\n+from mk_choices import MK_MUNICIPALITIES\n+\n+\n+class MKIdentityCardNumberField(RegexField):\n+    \"\"\"\n+    A Macedonian ID card number. Accepts both old and new format.\n+    \"\"\"\n+    default_error_messages = {\n+        'invalid': _(u'Identity card numbers must contain'\n+                     ' either 4 to 7 digits or an uppercase letter and 7 digits.'),\n+    }\n+\n+    def __init__(self, *args, **kwargs):\n+        kwargs['min_length'] = None\n+        kwargs['max_length'] = 8\n+        regex = ur'(^[A-Z]{1}\\d{7}$)|(^\\d{4,7}$)'\n+        super(MKIdentityCardNumberField, self).__init__(regex, *args, **kwargs)\n+\n+\n+class MKMunicipalitySelect(Select):\n+    \"\"\"\n+    A form ``Select`` widget that uses a list of Macedonian municipalities as\n+    choices. The label is the name of the municipality and the value\n+    is a 2 character code for the municipality.\n+    \"\"\"\n+\n+    def __init__(self, attrs=None):\n+        super(MKMunicipalitySelect, self).__init__(attrs, choices = MK_MUNICIPALITIES)\n+\n+\n+class UMCNField(RegexField):\n+    \"\"\"\n+    A form field that validates input as a unique master citizen\n+    number.\n+\n+    The format of the unique master citizen number has been kept the same from\n+    Yugoslavia. It is still in use in other countries as well, it is not applicable\n+    solely in Macedonia. For more information see:\n+    https://secure.wikimedia.org/wikipedia/en/wiki/Unique_Master_Citizen_Number\n+\n+    A value will pass validation if it complies to the following rules:\n+\n+    * Consists of exactly 13 digits\n+    * The first 7 digits represent a valid past date in the format DDMMYYY\n+    * The last digit of the UMCN passes a checksum test\n+    \"\"\"\n+    default_error_messages = {\n+        'invalid': _(u'This field should contain exactly 13 digits.'),\n+        'date': _(u'The first 7 digits of the UMCN must represent a valid past date.'),\n+        'checksum': _(u'The UMCN is not valid.'),\n+    }\n+\n+    def __init__(self, *args, **kwargs):\n+        kwargs['min_length'] = None\n+        kwargs['max_length'] = 13\n+        super(UMCNField, self).__init__(r'^\\d{13}$', *args, **kwargs)\n+\n+    def clean(self, value):\n+        value = super(UMCNField, self).clean(value)\n+\n+        if value in EMPTY_VALUES:\n+            return u''\n+\n+        if not self._validate_date_part(value):\n+            raise ValidationError(self.error_messages['date'])\n+        if self._validate_checksum(value):\n+            return value\n+        else:\n+            raise ValidationError(self.error_messages['checksum'])\n+\n+    def _validate_checksum(self, value):\n+        a,b,c,d,e,f,g,h,i,j,k,l,K = [int(digit) for digit in  value]\n+        m = 11 - (( 7*(a+g) + 6*(b+h) + 5*(c+i) + 4*(d+j) + 3*(e+k) + 2*(f+l)) % 11)\n+        if (m >= 1 and m <= 9) and K == m:\n+            return True\n+        elif m == 11 and K == 0:\n+            return True\n+        else:\n+            return False\n+\n+    def _validate_date_part(self, value):\n+        daypart, monthpart, yearpart = int(value[:2]), int(value[2:4]), int(value[4:7])\n+        if yearpart >= 800:\n+            yearpart += 1000\n+        else:\n+            yearpart += 2000\n+        try:\n+            date = datetime.datetime(year = yearpart, month = monthpart, day = daypart).date()\n+        except ValueError:\n+            return False\n+        if date >= datetime.datetime.now().date():\n+            return False\n+        return True"
        },
        {
            "sha": "d6d1efa0491133478cc592d7447d04efb1a5a703",
            "filename": "django/contrib/localflavor/mk/mk_choices.py",
            "status": "added",
            "additions": 92,
            "deletions": 0,
            "changes": 92,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/django%2Fcontrib%2Flocalflavor%2Fmk%2Fmk_choices.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/django%2Fcontrib%2Flocalflavor%2Fmk%2Fmk_choices.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fmk%2Fmk_choices.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -0,0 +1,92 @@\n+# -*- coding: utf-8 -*-\n+\"\"\"\n+Macedonian municipalities per the reorganization from 2004.\n+\"\"\"\n+from django.utils.translation import ugettext_lazy as _\n+\n+MK_MUNICIPALITIES = (\n+    ('AD', _(u'Aerodrom')),\n+    ('AR', _(u'Aračinovo')),\n+    ('BR', _(u'Berovo')),\n+    ('TL', _(u'Bitola')),\n+    ('BG', _(u'Bogdanci')),\n+    ('VJ', _(u'Bogovinje')),\n+    ('BS', _(u'Bosilovo')),\n+    ('BN', _(u'Brvenica')),\n+    ('BU', _(u'Butel')),\n+    ('VA', _(u'Valandovo')),\n+    ('VL', _(u'Vasilevo')),\n+    ('VV', _(u'Vevčani')),\n+    ('VE', _(u'Veles')),\n+    ('NI', _(u'Vinica')),\n+    ('VC', _(u'Vraneštica')),\n+    ('VH', _(u'Vrapčište')),\n+    ('GB', _(u'Gazi Baba')),\n+    ('GV', _(u'Gevgelija')),\n+    ('GT', _(u'Gostivar')),\n+    ('GR', _(u'Gradsko')),\n+    ('DB', _(u'Debar')),\n+    ('DA', _(u'Debarca')),\n+    ('DL', _(u'Delčevo')),\n+    ('DK', _(u'Demir Kapija')),\n+    ('DM', _(u'Demir Hisar')),\n+    ('DE', _(u'Dolneni')),\n+    ('DR', _(u'Drugovo')),\n+    ('GP', _(u'Gjorče Petrov')),\n+    ('ZE', _(u'Želino')),\n+    ('ZA', _(u'Zajas')),\n+    ('ZK', _(u'Zelenikovo')),\n+    ('ZR', _(u'Zrnovci')),\n+    ('IL', _(u'Ilinden')),\n+    ('JG', _(u'Jegunovce')),\n+    ('AV', _(u'Kavadarci')),\n+    ('KB', _(u'Karbinci')),\n+    ('KX', _(u'Karpoš')),\n+    ('VD', _(u'Kisela Voda')),\n+    ('KH', _(u'Kičevo')),\n+    ('KN', _(u'Konče')),\n+    ('OC', _(u'Koćani')),\n+    ('KY', _(u'Kratovo')),\n+    ('KZ', _(u'Kriva Palanka')),\n+    ('KG', _(u'Krivogaštani')),\n+    ('KS', _(u'Kruševo')),\n+    ('UM', _(u'Kumanovo')),\n+    ('LI', _(u'Lipkovo')),\n+    ('LO', _(u'Lozovo')),\n+    ('MR', _(u'Mavrovo i Rostuša')),\n+    ('MK', _(u'Makedonska Kamenica')),\n+    ('MD', _(u'Makedonski Brod')),\n+    ('MG', _(u'Mogila')),\n+    ('NG', _(u'Negotino')),\n+    ('NV', _(u'Novaci')),\n+    ('NS', _(u'Novo Selo')),\n+    ('OS', _(u'Oslomej')),\n+    ('OD', _(u'Ohrid')),\n+    ('PE', _(u'Petrovec')),\n+    ('PH', _(u'Pehčevo')),\n+    ('PN', _(u'Plasnica')),\n+    ('PP', _(u'Prilep')),\n+    ('PT', _(u'Probištip')),\n+    ('RV', _(u'Radoviš')),\n+    ('RN', _(u'Rankovce')),\n+    ('RE', _(u'Resen')),\n+    ('RO', _(u'Rosoman')),\n+    ('AJ', _(u'Saraj')),\n+    ('SL', _(u'Sveti Nikole')),\n+    ('SS', _(u'Sopište')),\n+    ('SD', _(u'Star Dojran')),\n+    ('NA', _(u'Staro Nagoričane')),\n+    ('UG', _(u'Struga')),\n+    ('RU', _(u'Strumica')),\n+    ('SU', _(u'Studeničani')),\n+    ('TR', _(u'Tearce')),\n+    ('ET', _(u'Tetovo')),\n+    ('CE', _(u'Centar')),\n+    ('CZ', _(u'Centar-Župa')),\n+    ('CI', _(u'Čair')),\n+    ('CA', _(u'Čaška')),\n+    ('CH', _(u'Češinovo-Obleševo')),\n+    ('CS', _(u'Čučer-Sandevo')),\n+    ('ST', _(u'Štip')),\n+    ('SO', _(u'Šuto Orizari')),\n+)"
        },
        {
            "sha": "b6363572901a95aeb3485315f3a71f5c5229ca0a",
            "filename": "django/contrib/localflavor/mk/models.py",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/django%2Fcontrib%2Flocalflavor%2Fmk%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/django%2Fcontrib%2Flocalflavor%2Fmk%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Flocalflavor%2Fmk%2Fmodels.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -0,0 +1,44 @@\n+from django.db.models.fields import CharField\n+from django.utils.translation import ugettext_lazy as _\n+\n+from django.contrib.localflavor.mk.mk_choices import MK_MUNICIPALITIES\n+from django.contrib.localflavor.mk.forms import (UMCNField as UMCNFormField,\n+    MKIdentityCardNumberField as MKIdentityCardNumberFormField)\n+\n+\n+class MKIdentityCardNumberField(CharField):\n+\n+    description = _(\"Macedonian identity card number\")\n+\n+    def __init__(self, *args, **kwargs):\n+        kwargs['max_length'] = 8\n+        super(MKIdentityCardNumberField, self).__init__(*args, **kwargs)\n+\n+    def formfield(self, **kwargs):\n+        defaults = {'form_class' : MKIdentityCardNumberFormField}\n+        defaults.update(kwargs)\n+        return super(MKIdentityCardNumberField, self).formfield(**defaults)\n+\n+\n+class MKMunicipalityField(CharField):\n+\n+    description = _(\"A Macedonian municipality (2 character code)\")\n+\n+    def __init__(self, *args, **kwargs):\n+        kwargs['choices'] = MK_MUNICIPALITIES\n+        kwargs['max_length'] = 2\n+        super(MKMunicipalityField, self).__init__(*args, **kwargs)\n+\n+\n+class UMCNField(CharField):\n+\n+    description = _(\"Unique master citizen number (13 digits)\")\n+\n+    def __init__(self, *args, **kwargs):\n+        kwargs['max_length'] = 13\n+        super(UMCNField, self).__init__(*args, **kwargs)\n+\n+    def formfield(self, **kwargs):\n+        defaults = {'form_class' : UMCNFormField}\n+        defaults.update(kwargs)\n+        return super(UMCNField, self).formfield(**defaults)"
        },
        {
            "sha": "ff9efdc24f4f4d9cfd39d059b73c796ebe68b520",
            "filename": "docs/ref/contrib/localflavor.txt",
            "status": "modified",
            "additions": 53,
            "deletions": 2,
            "changes": 55,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/docs%2Fref%2Fcontrib%2Flocalflavor.txt",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/docs%2Fref%2Fcontrib%2Flocalflavor.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Flocalflavor.txt?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -57,6 +57,7 @@ Countries currently supported by :mod:`~django.contrib.localflavor` are:\n     * Italy_\n     * Japan_\n     * Kuwait_\n+    * Macedonia_\n     * Mexico_\n     * `The Netherlands`_\n     * Norway_\n@@ -110,6 +111,7 @@ Here's an example of how to use them::\n .. _Italy: `Italy (it)`_\n .. _Japan: `Japan (jp)`_\n .. _Kuwait: `Kuwait (kw)`_\n+.. _Macedonia: `Macedonia (mk)`_\n .. _Mexico: `Mexico (mx)`_\n .. _Norway: `Norway (no)`_\n .. _Peru: `Peru (pe)`_\n@@ -652,8 +654,6 @@ Israel (``il``)\n .. _Israeli identification number: http://he.wikipedia.org/wiki/%D7%9E%D7%A1%D7%A4%D7%A8_%D7%96%D7%94%D7%95%D7%AA_(%D7%99%D7%A9%D7%A8%D7%90%D7%9C)\n .. _Luhn algorithm: http://en.wikipedia.org/wiki/Luhn_algorithm\n \n-\n-\n Italy (``it``)\n ==============\n \n@@ -705,6 +705,57 @@ Kuwait (``kw``)\n     * The birthdate of the person is a valid date.\n     * The calculated checksum equals to the last digit of the Civil ID.\n \n+Macedonia (``mk``)\n+===================\n+\n+.. versionadded:: 1.4\n+\n+.. class:: mk.forms.MKIdentityCardNumberField\n+\n+    A form field that validates input as a Macedonian identity card number.\n+    Both old and new identity card numbers are supported.\n+\n+\n+.. class:: mk.forms.MKMunicipalitySelect\n+\n+    A form ``Select`` widget that uses a list of Macedonian municipalities as\n+    choices.\n+\n+\n+.. class:: mk.forms.UMCNField\n+\n+    A form field that validates input as a unique master citizen\n+    number.\n+\n+    The format of the unique master citizen number is not unique\n+    to Macedonia. For more information see:\n+    https://secure.wikimedia.org/wikipedia/en/wiki/Unique_Master_Citizen_Number\n+\n+    A value will pass validation if it complies to the following rules:\n+\n+    * Consists of exactly 13 digits\n+    * The first 7 digits represent a valid past date in the format DDMMYYY\n+    * The last digit of the UMCN passes a checksum test\n+\n+\n+.. class:: mk.models.MKIdentityCardNumberField\n+\n+   A model field that forms represent as a\n+   ``forms.MKIdentityCardNumberField`` field.\n+\n+\n+.. class:: mk.models.MKMunicipalityField\n+\n+   A model field that forms represent as a\n+   ``forms.MKMunicipalitySelect`` and stores the 2 character code of the\n+   municipality in the database.\n+\n+\n+.. class:: mk.models.UMCNField\n+\n+   A model field that forms represent as a ``forms.UMCNField`` field.\n+\n+\n Mexico (``mx``)\n ===============\n "
        },
        {
            "sha": "8ef84af3842072ed763649777f3cca820bdeb256",
            "filename": "tests/regressiontests/forms/localflavor/mk.py",
            "status": "added",
            "additions": 131,
            "deletions": 0,
            "changes": 131,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fmk.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fmk.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fmk.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -0,0 +1,131 @@\n+from django.contrib.localflavor.mk.forms import (\n+    MKIdentityCardNumberField, MKMunicipalitySelect, UMCNField)\n+\n+from utils import LocalFlavorTestCase\n+\n+\n+class MKLocalFlavorTests(LocalFlavorTestCase):\n+\n+    def test_MKIdentityCardNumberField(self):\n+        error_invalid  = (u'Identity card numbers must contain'\n+            ' either 4 to 7 digits or an uppercase letter and 7 digits.')\n+        valid = {\n+            'L0018077':'L0018077',\n+            'A0078315' : 'A0078315',\n+        }\n+        invalid = {\n+            '123': error_invalid,\n+            'abcdf': error_invalid,\n+            '234390a': error_invalid,\n+        }\n+        self.assertFieldOutput(MKIdentityCardNumberField, valid, invalid)\n+\n+    def test_MKMunicipalitySelect(self):\n+        f = MKMunicipalitySelect()\n+        out=u'''<select name=\"municipality\">\n+<option value=\"AD\">Aerodrom</option>\n+<option value=\"AR\">Ara\\u010dinovo</option>\n+<option value=\"BR\">Berovo</option>\n+<option value=\"TL\">Bitola</option>\n+<option value=\"BG\">Bogdanci</option>\n+<option value=\"VJ\">Bogovinje</option>\n+<option value=\"BS\">Bosilovo</option>\n+<option value=\"BN\">Brvenica</option>\n+<option value=\"BU\">Butel</option>\n+<option value=\"VA\">Valandovo</option>\n+<option value=\"VL\">Vasilevo</option>\n+<option value=\"VV\">Vev\\u010dani</option>\n+<option value=\"VE\">Veles</option>\n+<option value=\"NI\">Vinica</option>\n+<option value=\"VC\">Vrane\\u0161tica</option>\n+<option value=\"VH\">Vrap\\u010di\\u0161te</option>\n+<option value=\"GB\">Gazi Baba</option>\n+<option value=\"GV\">Gevgelija</option>\n+<option value=\"GT\">Gostivar</option>\n+<option value=\"GR\">Gradsko</option>\n+<option value=\"DB\">Debar</option>\n+<option value=\"DA\">Debarca</option>\n+<option value=\"DL\" selected=\"selected\">Del\\u010devo</option>\n+<option value=\"DK\">Demir Kapija</option>\n+<option value=\"DM\">Demir Hisar</option>\n+<option value=\"DE\">Dolneni</option>\n+<option value=\"DR\">Drugovo</option>\n+<option value=\"GP\">Gjor\\u010de Petrov</option>\n+<option value=\"ZE\">\\u017delino</option>\n+<option value=\"ZA\">Zajas</option>\n+<option value=\"ZK\">Zelenikovo</option>\n+<option value=\"ZR\">Zrnovci</option>\n+<option value=\"IL\">Ilinden</option>\n+<option value=\"JG\">Jegunovce</option>\n+<option value=\"AV\">Kavadarci</option>\n+<option value=\"KB\">Karbinci</option>\n+<option value=\"KX\">Karpo\\u0161</option>\n+<option value=\"VD\">Kisela Voda</option>\n+<option value=\"KH\">Ki\\u010devo</option>\n+<option value=\"KN\">Kon\\u010de</option>\n+<option value=\"OC\">Ko\\u0107ani</option>\n+<option value=\"KY\">Kratovo</option>\n+<option value=\"KZ\">Kriva Palanka</option>\n+<option value=\"KG\">Krivoga\\u0161tani</option>\n+<option value=\"KS\">Kru\\u0161evo</option>\n+<option value=\"UM\">Kumanovo</option>\n+<option value=\"LI\">Lipkovo</option>\n+<option value=\"LO\">Lozovo</option>\n+<option value=\"MR\">Mavrovo i Rostu\\u0161a</option>\n+<option value=\"MK\">Makedonska Kamenica</option>\n+<option value=\"MD\">Makedonski Brod</option>\n+<option value=\"MG\">Mogila</option>\n+<option value=\"NG\">Negotino</option>\n+<option value=\"NV\">Novaci</option>\n+<option value=\"NS\">Novo Selo</option>\n+<option value=\"OS\">Oslomej</option>\n+<option value=\"OD\">Ohrid</option>\n+<option value=\"PE\">Petrovec</option>\n+<option value=\"PH\">Peh\\u010devo</option>\n+<option value=\"PN\">Plasnica</option>\n+<option value=\"PP\">Prilep</option>\n+<option value=\"PT\">Probi\\u0161tip</option>\n+<option value=\"RV\">Radovi\\u0161</option>\n+<option value=\"RN\">Rankovce</option>\n+<option value=\"RE\">Resen</option>\n+<option value=\"RO\">Rosoman</option>\n+<option value=\"AJ\">Saraj</option>\n+<option value=\"SL\">Sveti Nikole</option>\n+<option value=\"SS\">Sopi\\u0161te</option>\n+<option value=\"SD\">Star Dojran</option>\n+<option value=\"NA\">Staro Nagori\\u010dane</option>\n+<option value=\"UG\">Struga</option>\n+<option value=\"RU\">Strumica</option>\n+<option value=\"SU\">Studeni\\u010dani</option>\n+<option value=\"TR\">Tearce</option>\n+<option value=\"ET\">Tetovo</option>\n+<option value=\"CE\">Centar</option>\n+<option value=\"CZ\">Centar-\\u017dupa</option>\n+<option value=\"CI\">\\u010cair</option>\n+<option value=\"CA\">\\u010ca\\u0161ka</option>\n+<option value=\"CH\">\\u010ce\\u0161inovo-Oble\\u0161evo</option>\n+<option value=\"CS\">\\u010cu\\u010der-Sandevo</option>\n+<option value=\"ST\">\\u0160tip</option>\n+<option value=\"SO\">\\u0160uto Orizari</option>\n+</select>'''\n+        self.assertEqual(f.render('municipality', 'DL' ), out)\n+\n+    def test_UMCNField(self):\n+        error_invalid = [u'This field should contain exactly 13 digits.']\n+        error_checksum = [u'The UMCN is not valid.']\n+        error_date =  [u'The first 7 digits of the UMCN '\n+                        'must represent a valid past date.']\n+        valid = {\n+            '2402983450006': '2402983450006',\n+            '2803984430038': '2803984430038',\n+            '1909982045004': '1909982045004',\n+        }\n+        invalid = {\n+            '240298345': error_invalid,\n+            'abcdefghj': error_invalid,\n+            '2402082450006': error_date,\n+            '3002982450006': error_date,\n+            '2402983450007': error_checksum,\n+            '2402982450006': error_checksum,\n+        }\n+        self.assertFieldOutput(UMCNField, valid, invalid)"
        },
        {
            "sha": "5a28a2b1379f3c52b369afa2178a47b6c1e8eed6",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -23,6 +23,7 @@\n from localflavor.it import ITLocalFlavorTests\n from localflavor.jp import JPLocalFlavorTests\n from localflavor.kw import KWLocalFlavorTests\n+from localflavor.mk import MKLocalFlavorTests\n from localflavor.nl import NLLocalFlavorTests\n from localflavor.pl import PLLocalFlavorTests\n from localflavor.pt import PTLocalFlavorTests"
        },
        {
            "sha": "cb5f83cdaca72514364b54677d047c32da13bf72",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -36,6 +36,7 @@\n     ITLocalFlavorTests,\n     JPLocalFlavorTests,\n     KWLocalFlavorTests,\n+    MKLocalFlavorTests,\n     NLLocalFlavorTests,\n     PLLocalFlavorTests,\n     PTLocalFlavorTests,"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/regressiontests/localflavor/mk/__init__.py",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Fmk%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Fmk%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Fmk%2F__init__.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410"
        },
        {
            "sha": "50fcf05f9428c57e0ce9a8a5ecc26ed368894c14",
            "filename": "tests/regressiontests/localflavor/mk/forms.py",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Fforms.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -0,0 +1,7 @@\n+from django.forms import ModelForm\n+from models import MKPerson\n+\n+class MKPersonForm(ModelForm):\n+\n+    class Meta:\n+        model = MKPerson"
        },
        {
            "sha": "b79239a9bfadc180be1f8d7bdf7cff89528839bf",
            "filename": "tests/regressiontests/localflavor/mk/models.py",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Fmodels.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -0,0 +1,14 @@\n+from django.db import models\n+from django.contrib.localflavor.mk.models import (\n+    MKIdentityCardNumberField, MKMunicipalityField, UMCNField)\n+\n+class MKPerson(models.Model):\n+    first_name = models.CharField(max_length = 20)\n+    last_name = models.CharField(max_length = 20)\n+    umcn = UMCNField()\n+    id_number = MKIdentityCardNumberField()\n+    municipality  = MKMunicipalityField(blank = True)\n+    municipality_req = MKMunicipalityField(blank = False) \n+\n+    class Meta:\n+        app_label = 'localflavor'"
        },
        {
            "sha": "f7f2981a85c9a21f8e633b11dff49961433bc4af",
            "filename": "tests/regressiontests/localflavor/mk/tests.py",
            "status": "added",
            "additions": 176,
            "deletions": 0,
            "changes": 176,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Fmk%2Ftests.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -0,0 +1,176 @@\n+from django.test import TestCase\n+from forms import MKPersonForm\n+\n+class MKLocalflavorTests(TestCase):\n+    def setUp(self):\n+        self.form = MKPersonForm({\n+            'first_name':'Someone',\n+            'last_name':'Something',\n+            'umcn': '2402983450006',\n+            'municipality':'OD',\n+            'municipality_req':'VE',\n+            'id_number':'A1234567',\n+        })\n+\n+    def test_get_display_methods(self):\n+        \"\"\"\n+        Test that the get_*_display() methods are added to the model instances.\n+        \"\"\"\n+        person = self.form.save()\n+        self.assertEqual(person.get_municipality_display(), 'Ohrid')\n+        self.assertEqual(person.get_municipality_req_display(), 'Veles')\n+\n+    def test_municipality_required(self):\n+        \"\"\"\n+        Test that required MKMunicipalityFields throw appropriate errors.\n+        \"\"\"\n+\n+        form = MKPersonForm({\n+            'first_name':'Someone',\n+            'last_name':'Something',\n+            'umcn': '2402983450006',\n+            'municipality':'OD',\n+            'id_number':'A1234567',\n+        })\n+        self.assertFalse(form.is_valid())\n+        self.assertEqual(\n+            form.errors['municipality_req'], [u'This field is required.'])\n+\n+    def test_umcn_invalid(self):\n+        \"\"\"\n+        Test that UMCNFields throw appropriate errors for invalid UMCNs.\n+        \"\"\"\n+        form = MKPersonForm({\n+            'first_name':'Someone',\n+            'last_name':'Something',\n+            'umcn': '2402983450007',\n+            'municipality':'OD',\n+            'municipality_req':'VE',\n+            'id_number':'A1234567',\n+        })\n+        self.assertFalse(form.is_valid())\n+        self.assertEqual(form.errors['umcn'], [u'The UMCN is not valid.'])\n+\n+        form = MKPersonForm({\n+            'first_name':'Someone',\n+            'last_name':'Something',\n+            'umcn': '3002983450007',\n+            'municipality':'OD',\n+            'municipality_req':'VE',\n+            'id_number':'A1234567',\n+        })\n+        self.assertEqual(form.errors['umcn'],\n+                [u'The first 7 digits of the UMCN must represent a valid past date.'])\n+\n+    def test_idnumber_invalid(self):\n+        \"\"\"\n+        Test that MKIdentityCardNumberFields throw\n+        appropriate errors for invalid values\n+        \"\"\"\n+\n+        form = MKPersonForm({\n+            'first_name':'Someone',\n+            'last_name':'Something',\n+            'umcn': '2402983450007',\n+            'municipality':'OD',\n+            'municipality_req':'VE',\n+            'id_number':'A123456a',\n+        })\n+        self.assertFalse(form.is_valid())\n+        self.assertEqual(form.errors['id_number'],\n+            [u'Identity card numbers must contain either 4 to 7 '\n+              'digits or an uppercase letter and 7 digits.'])\n+\n+    def test_field_blank_option(self):\n+        \"\"\"\n+        Test that the empty option is there.\n+        \"\"\"\n+        municipality_select_html = \"\"\"\\\n+<select name=\"municipality\" id=\"id_municipality\">\n+<option value=\"\">---------</option>\n+<option value=\"AD\">Aerodrom</option>\n+<option value=\"AR\">Ara\\xc4\\x8dinovo</option>\n+<option value=\"BR\">Berovo</option>\n+<option value=\"TL\">Bitola</option>\n+<option value=\"BG\">Bogdanci</option>\n+<option value=\"VJ\">Bogovinje</option>\n+<option value=\"BS\">Bosilovo</option>\n+<option value=\"BN\">Brvenica</option>\n+<option value=\"BU\">Butel</option>\n+<option value=\"VA\">Valandovo</option>\n+<option value=\"VL\">Vasilevo</option>\n+<option value=\"VV\">Vev\\xc4\\x8dani</option>\n+<option value=\"VE\">Veles</option>\n+<option value=\"NI\">Vinica</option>\n+<option value=\"VC\">Vrane\\xc5\\xa1tica</option>\n+<option value=\"VH\">Vrap\\xc4\\x8di\\xc5\\xa1te</option>\n+<option value=\"GB\">Gazi Baba</option>\n+<option value=\"GV\">Gevgelija</option>\n+<option value=\"GT\">Gostivar</option>\n+<option value=\"GR\">Gradsko</option>\n+<option value=\"DB\">Debar</option>\n+<option value=\"DA\">Debarca</option>\n+<option value=\"DL\">Del\\xc4\\x8devo</option>\n+<option value=\"DK\">Demir Kapija</option>\n+<option value=\"DM\">Demir Hisar</option>\n+<option value=\"DE\">Dolneni</option>\n+<option value=\"DR\">Drugovo</option>\n+<option value=\"GP\">Gjor\\xc4\\x8de Petrov</option>\n+<option value=\"ZE\">\\xc5\\xbdelino</option>\n+<option value=\"ZA\">Zajas</option>\n+<option value=\"ZK\">Zelenikovo</option>\n+<option value=\"ZR\">Zrnovci</option>\n+<option value=\"IL\">Ilinden</option>\n+<option value=\"JG\">Jegunovce</option>\n+<option value=\"AV\">Kavadarci</option>\n+<option value=\"KB\">Karbinci</option>\n+<option value=\"KX\">Karpo\\xc5\\xa1</option>\n+<option value=\"VD\">Kisela Voda</option>\n+<option value=\"KH\">Ki\\xc4\\x8devo</option>\n+<option value=\"KN\">Kon\\xc4\\x8de</option>\n+<option value=\"OC\">Ko\\xc4\\x87ani</option>\n+<option value=\"KY\">Kratovo</option>\n+<option value=\"KZ\">Kriva Palanka</option>\n+<option value=\"KG\">Krivoga\\xc5\\xa1tani</option>\n+<option value=\"KS\">Kru\\xc5\\xa1evo</option>\n+<option value=\"UM\">Kumanovo</option>\n+<option value=\"LI\">Lipkovo</option>\n+<option value=\"LO\">Lozovo</option>\n+<option value=\"MR\">Mavrovo i Rostu\\xc5\\xa1a</option>\n+<option value=\"MK\">Makedonska Kamenica</option>\n+<option value=\"MD\">Makedonski Brod</option>\n+<option value=\"MG\">Mogila</option>\n+<option value=\"NG\">Negotino</option>\n+<option value=\"NV\">Novaci</option>\n+<option value=\"NS\">Novo Selo</option>\n+<option value=\"OS\">Oslomej</option>\n+<option value=\"OD\" selected=\"selected\">Ohrid</option>\n+<option value=\"PE\">Petrovec</option>\n+<option value=\"PH\">Peh\\xc4\\x8devo</option>\n+<option value=\"PN\">Plasnica</option>\n+<option value=\"PP\">Prilep</option>\n+<option value=\"PT\">Probi\\xc5\\xa1tip</option>\n+<option value=\"RV\">Radovi\\xc5\\xa1</option>\n+<option value=\"RN\">Rankovce</option>\n+<option value=\"RE\">Resen</option>\n+<option value=\"RO\">Rosoman</option>\n+<option value=\"AJ\">Saraj</option>\n+<option value=\"SL\">Sveti Nikole</option>\n+<option value=\"SS\">Sopi\\xc5\\xa1te</option>\n+<option value=\"SD\">Star Dojran</option>\n+<option value=\"NA\">Staro Nagori\\xc4\\x8dane</option>\n+<option value=\"UG\">Struga</option>\n+<option value=\"RU\">Strumica</option>\n+<option value=\"SU\">Studeni\\xc4\\x8dani</option>\n+<option value=\"TR\">Tearce</option>\n+<option value=\"ET\">Tetovo</option>\n+<option value=\"CE\">Centar</option>\n+<option value=\"CZ\">Centar-\\xc5\\xbdupa</option>\n+<option value=\"CI\">\\xc4\\x8cair</option>\n+<option value=\"CA\">\\xc4\\x8ca\\xc5\\xa1ka</option>\n+<option value=\"CH\">\\xc4\\x8ce\\xc5\\xa1inovo-Oble\\xc5\\xa1evo</option>\n+<option value=\"CS\">\\xc4\\x8cu\\xc4\\x8der-Sandevo</option>\n+<option value=\"ST\">\\xc5\\xa0tip</option>\n+<option value=\"SO\">\\xc5\\xa0uto Orizari</option>\n+</select>\"\"\"\n+        self.assertEqual(str(self.form['municipality']), municipality_select_html)"
        },
        {
            "sha": "6a02d99004d8504ed6a484336dbbc80d8f732794",
            "filename": "tests/regressiontests/localflavor/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/050e11956f8bf6589e8c93c6ccdbe5fc03e7e410/tests%2Fregressiontests%2Flocalflavor%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Flocalflavor%2Ftests.py?ref=050e11956f8bf6589e8c93c6ccdbe5fc03e7e410",
            "patch": "@@ -2,5 +2,7 @@\n from django.utils import unittest\n \n # just import your tests here\n-from us.tests import *\n from au.tests import *\n+from mk.tests import *\n+from us.tests import *\n+"
        }
    ],
    "stats": {
        "total": 625,
        "additions": 622,
        "deletions": 3
    }
}