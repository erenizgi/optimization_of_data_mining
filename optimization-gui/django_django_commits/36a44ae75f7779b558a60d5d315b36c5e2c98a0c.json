{
    "author": "carljm",
    "message": "Mocked datetime in the naturaltime tests to avoid sporadic test failure.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17023 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "36a44ae75f7779b558a60d5d315b36c5e2c98a0c",
    "files": [
        {
            "sha": "17fa2bf3bb3af28674337c773215530f4f2af9f7",
            "filename": "django/contrib/humanize/tests.py",
            "status": "modified",
            "additions": 18,
            "deletions": 1,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/36a44ae75f7779b558a60d5d315b36c5e2c98a0c/django%2Fcontrib%2Fhumanize%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/36a44ae75f7779b558a60d5d315b36c5e2c98a0c/django%2Fcontrib%2Fhumanize%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftests.py?ref=36a44ae75f7779b558a60d5d315b36c5e2c98a0c",
            "patch": "@@ -159,4 +159,21 @@ def test_naturaltime(self):\n             '1 day from now',\n             '1 year, 4 months from now',\n         ]\n-        self.humanize_tester(test_list, result_list, 'naturaltime')\n+\n+        # mock out datetime so these tests don't fail occasionally when the\n+        # test runs too slow\n+        class MockDateTime(object):\n+            def now(self):\n+                return now\n+\n+            def __call__(self, *args, **kwargs):\n+                return datetime(*args, **kwargs)\n+\n+        from django.contrib.humanize.templatetags import humanize\n+        orig_datetime = humanize.datetime\n+        humanize.datetime = MockDateTime()\n+\n+        try:\n+            self.humanize_tester(test_list, result_list, 'naturaltime')\n+        finally:\n+            humanize.datetime = orig_datetime"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 18,
        "deletions": 1
    }
}