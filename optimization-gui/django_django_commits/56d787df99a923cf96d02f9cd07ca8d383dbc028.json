{
    "author": "jezdez",
    "message": "Fixed #17542 -- Gracefully handle errors when checking if the values of a SelectDateWidget has changed if it's not required. Thanks, pigletto.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17436 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "56d787df99a923cf96d02f9cd07ca8d383dbc028",
    "files": [
        {
            "sha": "65d6bf15f5d46b21cae68b623a09e37b8f9d69d2",
            "filename": "django/forms/extras/widgets.py",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/56d787df99a923cf96d02f9cd07ca8d383dbc028/django%2Fforms%2Fextras%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/56d787df99a923cf96d02f9cd07ca8d383dbc028/django%2Fforms%2Fextras%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fextras%2Fwidgets.py?ref=56d787df99a923cf96d02f9cd07ca8d383dbc028",
            "patch": "@@ -136,6 +136,9 @@ def create_select(self, name, field, value, val, choices):\n         return select_html\n \n     def _has_changed(self, initial, data):\n-        input_format = get_format('DATE_INPUT_FORMATS')[0]\n-        data = datetime_safe.datetime.strptime(data, input_format).date()\n-        return super(SelectDateWidget, self)._has_changed(initial, data)\n\\ No newline at end of file\n+        try:\n+            input_format = get_format('DATE_INPUT_FORMATS')[0]\n+            data = datetime_safe.datetime.strptime(data, input_format).date()\n+        except (TypeError, ValueError):\n+            pass\n+        return super(SelectDateWidget, self)._has_changed(initial, data)"
        },
        {
            "sha": "c873af7a8caff9b71a6d03b66cb2706bd29431d7",
            "filename": "tests/regressiontests/forms/tests/extra.py",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/56d787df99a923cf96d02f9cd07ca8d383dbc028/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py",
            "raw_url": "https://github.com/django/django/raw/56d787df99a923cf96d02f9cd07ca8d383dbc028/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fextra.py?ref=56d787df99a923cf96d02f9cd07ca8d383dbc028",
            "patch": "@@ -18,6 +18,9 @@\n class GetDate(Form):\n     mydate = DateField(widget=SelectDateWidget)\n \n+class GetNotRequiredDate(Form):\n+    mydate = DateField(widget=SelectDateWidget, required=False)\n+\n class GetDateShowHiddenInitial(Form):\n     mydate = DateField(widget=SelectDateWidget, show_hidden_initial=True)\n \n@@ -619,6 +622,15 @@ class FormWithImage(Form):\n         self.assertTrue(FormWithFile().is_multipart())\n         self.assertTrue(FormWithImage().is_multipart())\n \n+    def test_field_not_required(self):\n+        b = GetNotRequiredDate({\n+            'mydate_year': '',\n+            'mydate_month': '',\n+            'mydate_day': ''\n+        })\n+        self.assertFalse(b.has_changed())\n+\n+\n \n class FormsExtraL10NTestCase(TestCase):\n     def setUp(self):"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 18,
        "deletions": 3
    }
}