{
    "author": "aaugustin",
    "message": "[py3] Replace filter/lambda by list comprehensions\n\nThis is more idiomatic and avoids returning a list on Python 2 and\nan iterator on Python 3.",
    "sha": "0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831",
    "files": [
        {
            "sha": "cceec07be8af1fbd0bab2038223cd6d7fb210e64",
            "filename": "django/core/management/commands/syncdb.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Fcore%2Fmanagement%2Fcommands%2Fsyncdb.py",
            "raw_url": "https://github.com/django/django/raw/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Fcore%2Fmanagement%2Fcommands%2Fsyncdb.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fsyncdb.py?ref=0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831",
            "patch": "@@ -75,7 +75,7 @@ def model_installed(model):\n                 (opts.auto_created and converter(opts.auto_created._meta.db_table) in tables))\n \n         manifest = SortedDict(\n-            (app_name, filter(model_installed, model_list))\n+            (app_name, list(filter(model_installed, model_list)))\n             for app_name, model_list in all_models\n         )\n "
        },
        {
            "sha": "6814ce27ff01a0b57645e1287f71e10a458a3d6d",
            "filename": "django/db/models/options.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Fdb%2Fmodels%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Fdb%2Fmodels%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Foptions.py?ref=0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831",
            "patch": "@@ -387,7 +387,7 @@ def get_all_related_objects_with_model(self, local_only=False,\n             predicates.append(lambda k, v: not k.field.rel.is_hidden())\n         cache = (self._related_objects_proxy_cache if include_proxy_eq\n                  else self._related_objects_cache)\n-        return filter(lambda t: all([p(*t) for p in predicates]), cache.items())\n+        return [t for t in cache.items() if all(p(*t) for p in predicates)]\n \n     def _fill_related_objects_cache(self):\n         cache = SortedDict()"
        },
        {
            "sha": "090ef0b7bee3abc073058b4269131d966e77d417",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831",
            "patch": "@@ -1107,7 +1107,7 @@ def iterator(self):\n             # If a field list has been specified, use it. Otherwise, use the\n             # full list of fields, including extras and aggregates.\n             if self._fields:\n-                fields = list(self._fields) + filter(lambda f: f not in self._fields, aggregate_names)\n+                fields = list(self._fields) + [f for f in aggregate_names if f not in self._fields]\n             else:\n                 fields = names\n "
        },
        {
            "sha": "9032cd024dff9030c86f3a2e42215016cd12b1ba",
            "filename": "django/utils/autoreload.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Futils%2Fautoreload.py",
            "raw_url": "https://github.com/django/django/raw/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Futils%2Fautoreload.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fautoreload.py?ref=0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831",
            "patch": "@@ -54,7 +54,8 @@\n \n def code_changed():\n     global _mtimes, _win\n-    for filename in filter(lambda v: v, map(lambda m: getattr(m, \"__file__\", None), sys.modules.values())):\n+    filenames = [getattr(m, \"__file__\", None) for m in sys.modules.values()]\n+    for filename in filter(None, filenames):\n         if filename.endswith(\".pyc\") or filename.endswith(\".pyo\"):\n             filename = filename[:-1]\n         if filename.endswith(\"$py.class\"):"
        },
        {
            "sha": "7624bb9c76a2377335b32130e195d132b4f19e35",
            "filename": "django/utils/ipv6.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Futils%2Fipv6.py",
            "raw_url": "https://github.com/django/django/raw/0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831/django%2Futils%2Fipv6.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fipv6.py?ref=0c198b85a3292cb7f2f2cd1b2d6dc6f04a1ed831",
            "patch": "@@ -263,6 +263,6 @@ def _is_shorthand_ip(ip_str):\n     \"\"\"\n     if ip_str.count('::') == 1:\n         return True\n-    if filter(lambda x: len(x) < 4, ip_str.split(':')):\n+    if any(len(x) < 4 for x in ip_str.split(':')):\n         return True\n     return False"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 6,
        "deletions": 5
    }
}