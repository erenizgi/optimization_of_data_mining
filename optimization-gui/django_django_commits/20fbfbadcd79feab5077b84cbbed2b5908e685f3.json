{
    "author": "alex",
    "message": "Explicitly close a file in the static serve view.  Thanks to Benjamin Peterson for the report.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16282 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "20fbfbadcd79feab5077b84cbbed2b5908e685f3",
    "files": [
        {
            "sha": "387b7da06b569fb2dcde7faf3696f9f84c4f7dd7",
            "filename": "django/views/static.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/20fbfbadcd79feab5077b84cbbed2b5908e685f3/django%2Fviews%2Fstatic.py",
            "raw_url": "https://github.com/django/django/raw/20fbfbadcd79feab5077b84cbbed2b5908e685f3/django%2Fviews%2Fstatic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fstatic.py?ref=20fbfbadcd79feab5077b84cbbed2b5908e685f3",
            "patch": "@@ -2,6 +2,7 @@\n Views and functions for serving static files. These are only to be used\n during development, and SHOULD NOT be used in a production setting.\n \"\"\"\n+from __future__ import with_statement\n \n import mimetypes\n import os\n@@ -57,7 +58,8 @@ def serve(request, path, document_root=None, show_indexes=False):\n     if not was_modified_since(request.META.get('HTTP_IF_MODIFIED_SINCE'),\n                               statobj.st_mtime, statobj.st_size):\n         return HttpResponseNotModified(mimetype=mimetype)\n-    response = HttpResponse(open(fullpath, 'rb').read(), mimetype=mimetype)\n+    with open(fullpath, 'rb') as f:\n+        response = HttpResponse(f.read(), mimetype=mimetype)\n     response[\"Last-Modified\"] = http_date(statobj.st_mtime)\n     if stat.S_ISREG(statobj.st_mode):\n         response[\"Content-Length\"] = statobj.st_size"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}