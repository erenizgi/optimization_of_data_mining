{
    "author": "alex",
    "message": "Removed all usages of deprecated TestCase methods (self.fail*).  This removed most of the Warnings emitted (with -Wall) during the test suite.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14803 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
    "files": [
        {
            "sha": "b88f565d6b66f2b2d33600b4f4f682e09f09bda9",
            "filename": "django/contrib/formtools/tests/__init__.py",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,14 +1,13 @@\n import os\n \n-from django import forms\n-from django import http\n+from django import forms, http\n from django.conf import settings\n from django.contrib.formtools import preview, wizard, utils\n from django.test import TestCase\n from django.utils import unittest\n \n-success_string = \"Done was called!\"\n \n+success_string = \"Done was called!\"\n \n class TestFormPreview(preview.FormPreview):\n     def get_context(self, request, form):\n@@ -100,7 +99,7 @@ def test_form_submit(self):\n         # show we previously saw first stage of the form.\n         self.test_data.update({'stage':2})\n         response = self.client.post('/test1/', self.test_data)\n-        self.failIfEqual(response.content, success_string)\n+        self.assertNotEqual(response.content, success_string)\n         hash = self.preview.security_hash(None, TestForm(self.test_data))\n         self.test_data.update({'hash': hash})\n         response = self.client.post('/test1/', self.test_data)\n@@ -134,7 +133,7 @@ def test_form_submit_django12_hash(self):\n         # show we previously saw first stage of the form.\n         self.test_data.update({'stage':2})\n         response = self.client.post('/test1/', self.test_data)\n-        self.failIfEqual(response.content, success_string)\n+        self.assertNotEqual(response.content, success_string)\n         hash = utils.security_hash(None, TestForm(self.test_data))\n         self.test_data.update({'hash': hash})\n         response = self.client.post('/test1/', self.test_data)\n@@ -151,11 +150,11 @@ def test_form_submit_django12_hash_custom_hash(self):\n         self.test_data.update({'stage':2})\n         response = self.client.post('/test2/', self.test_data)\n         self.assertEqual(response.status_code, 200)\n-        self.failIfEqual(response.content, success_string)\n+        self.assertNotEqual(response.content, success_string)\n         hash = utils.security_hash(None, TestForm(self.test_data))\n         self.test_data.update({'hash': hash})\n         response = self.client.post('/test2/', self.test_data)\n-        self.failIfEqual(response.content, success_string)\n+        self.assertNotEqual(response.content, success_string)\n \n \n class SecurityHashTests(unittest.TestCase):\n@@ -392,4 +391,3 @@ def done(self, request, form_list):\n                 \"wizard_step\": \"1\"}\n         wizard(DummyRequest(POST=data))\n         self.assertTrue(reached[0])\n-"
        },
        {
            "sha": "a79a3045478b54cb0a456374b7f85e64238cb134",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -355,7 +355,7 @@ def assertRedirects(self, response, expected_url, status_code=302,\n \n         if hasattr(response, 'redirect_chain'):\n             # The request was a followed redirect\n-            self.failUnless(len(response.redirect_chain) > 0,\n+            self.assertTrue(len(response.redirect_chain) > 0,\n                 msg_prefix + \"Response didn't redirect as expected: Response\"\n                 \" code was %d (expected %d)\" %\n                     (response.status_code, status_code))\n@@ -469,7 +469,7 @@ def assertFormError(self, response, form, field, errors, msg_prefix=''):\n                 if field:\n                     if field in context[form].errors:\n                         field_errors = context[form].errors[field]\n-                        self.failUnless(err in field_errors,\n+                        self.assertTrue(err in field_errors,\n                             msg_prefix + \"The field '%s' on form '%s' in\"\n                             \" context %d does not contain the error '%s'\"\n                             \" (actual errors: %s)\" %\n@@ -484,7 +484,7 @@ def assertFormError(self, response, form, field, errors, msg_prefix=''):\n                                       (form, i, field))\n                 else:\n                     non_field_errors = context[form].non_field_errors()\n-                    self.failUnless(err in non_field_errors,\n+                    self.assertTrue(err in non_field_errors,\n                         msg_prefix + \"The form '%s' in context %d does not\"\n                         \" contain the non-field error '%s'\"\n                         \" (actual errors: %s)\" %\n@@ -504,7 +504,7 @@ def assertTemplateUsed(self, response, template_name, msg_prefix=''):\n         template_names = [t.name for t in response.templates]\n         if not template_names:\n             self.fail(msg_prefix + \"No templates used to render the response\")\n-        self.failUnless(template_name in template_names,\n+        self.assertTrue(template_name in template_names,\n             msg_prefix + \"Template '%s' was not a template used to render\"\n             \" the response. Actual template(s) used: %s\" %\n                 (template_name, u', '.join(template_names)))\n@@ -518,7 +518,7 @@ def assertTemplateNotUsed(self, response, template_name, msg_prefix=''):\n             msg_prefix += \": \"\n \n         template_names = [t.name for t in response.templates]\n-        self.failIf(template_name in template_names,\n+        self.assertFalse(template_name in template_names,\n             msg_prefix + \"Template '%s' was used unexpectedly in rendering\"\n             \" the response\" % template_name)\n "
        },
        {
            "sha": "c856a5f18613f8208917d73d1390c7046ccc06e1",
            "filename": "tests/modeltests/model_formsets/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fmodeltests%2Fmodel_formsets%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fmodeltests%2Fmodel_formsets%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fmodel_formsets%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -2,13 +2,13 @@\n import re\n from datetime import date\n from decimal import Decimal\n+\n from django import forms\n from django.db import models\n-from django.forms.models import _get_foreign_key\n-from django.forms.models import inlineformset_factory\n-from django.forms.models import modelformset_factory\n-from django.forms.models import modelformset_factory\n+from django.forms.models import (_get_foreign_key, inlineformset_factory,\n+    modelformset_factory, modelformset_factory)\n from django.test import TestCase\n+\n from modeltests.model_formsets.models import (\n     Author, BetterAuthor, Book, BookWithCustomPK, Editor,\n     BookWithOptionalAltEditor, AlternateBook, AuthorMeeting, CustomPrimaryKey,\n@@ -30,7 +30,7 @@ def test_deletion(self):\n         }\n         formset = PoetFormSet(data, queryset=Poet.objects.all())\n         formset.save()\n-        self.failUnless(formset.is_valid())\n+        self.assertTrue(formset.is_valid())\n         self.assertEqual(Poet.objects.count(), 0)\n \n     def test_add_form_deletion_when_invalid(self):"
        },
        {
            "sha": "9b8bce0417338b27e6fdbdd786908f42a8923174",
            "filename": "tests/modeltests/signals/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fmodeltests%2Fsignals%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fmodeltests%2Fsignals%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fsignals%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -171,6 +171,6 @@ def test_disconnect_in_dispatch(self):\n         signals.post_save.connect(sender=Person, receiver=b)\n         p = Person.objects.create(first_name='John', last_name='Smith')\n \n-        self.failUnless(a._run)\n-        self.failUnless(b._run)\n+        self.assertTrue(a._run)\n+        self.assertTrue(b._run)\n         self.assertEqual(signals.post_save.receivers, [])"
        },
        {
            "sha": "426cc77686178e8045ca065386fda325fc84f0ce",
            "filename": "tests/modeltests/test_client/models.py",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fmodeltests%2Ftest_client%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fmodeltests%2Ftest_client%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ftest_client%2Fmodels.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -73,7 +73,7 @@ def test_post(self):\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['data'], '37')\n         self.assertEqual(response.templates[0].name, 'POST Template')\n-        self.failUnless('Data received' in response.content)\n+        self.assertTrue('Data received' in response.content)\n \n     def test_response_headers(self):\n         \"Check the value of HTTP headers returned in a response\"\n@@ -278,7 +278,7 @@ def test_view_with_login(self):\n \n         # Log in\n         login = self.client.login(username='testclient', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n \n         # Request a page that requires a login\n         response = self.client.get('/test_client/login_protected_view/')\n@@ -294,7 +294,7 @@ def test_view_with_method_login(self):\n \n         # Log in\n         login = self.client.login(username='testclient', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n \n         # Request a page that requires a login\n         response = self.client.get('/test_client/login_protected_method_view/')\n@@ -310,7 +310,7 @@ def test_view_with_login_and_custom_redirect(self):\n \n         # Log in\n         login = self.client.login(username='testclient', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n \n         # Request a page that requires a login\n         response = self.client.get('/test_client/login_protected_view_custom_redirect/')\n@@ -321,13 +321,13 @@ def test_view_with_bad_login(self):\n         \"Request a page that is protected with @login, but use bad credentials\"\n \n         login = self.client.login(username='otheruser', password='nopassword')\n-        self.failIf(login)\n+        self.assertFalse(login)\n \n     def test_view_with_inactive_login(self):\n         \"Request a page that is protected with @login, but use an inactive login\"\n \n         login = self.client.login(username='inactive', password='password')\n-        self.failIf(login)\n+        self.assertFalse(login)\n \n     def test_logout(self):\n         \"Request a logout after logging in\"\n@@ -355,7 +355,7 @@ def test_view_with_permissions(self):\n \n         # Log in\n         login = self.client.login(username='testclient', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n \n         # Log in with wrong permissions. Should result in 302.\n         response = self.client.get('/test_client/permission_protected_view/')\n@@ -372,7 +372,7 @@ def test_view_with_method_permissions(self):\n \n         # Log in\n         login = self.client.login(username='testclient', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n \n         # Log in with wrong permissions. Should result in 302.\n         response = self.client.get('/test_client/permission_protected_method_view/')"
        },
        {
            "sha": "d0b6ea3ab0dc82d243d75a7293136422ada961e1",
            "filename": "tests/modeltests/update/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fmodeltests%2Fupdate%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fmodeltests%2Fupdate%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fupdate%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -2,6 +2,7 @@\n \n from models import A, B, C, D, DataPoint, RelatedPoint\n \n+\n class SimpleTest(TestCase):\n     def setUp(self):\n         self.a1 = A.objects.create()\n@@ -15,38 +16,38 @@ def test_nonempty_update(self):\n         Test that update changes the right number of rows for a nonempty queryset\n         \"\"\"\n         num_updated = self.a1.b_set.update(y=100)\n-        self.failUnlessEqual(num_updated, 20)\n+        self.assertEqual(num_updated, 20)\n         cnt = B.objects.filter(y=100).count()\n-        self.failUnlessEqual(cnt, 20)\n+        self.assertEqual(cnt, 20)\n \n     def test_empty_update(self):\n         \"\"\"\n         Test that update changes the right number of rows for an empty queryset\n         \"\"\"\n         num_updated = self.a2.b_set.update(y=100)\n-        self.failUnlessEqual(num_updated, 0)\n+        self.assertEqual(num_updated, 0)\n         cnt = B.objects.filter(y=100).count()\n-        self.failUnlessEqual(cnt, 0)\n+        self.assertEqual(cnt, 0)\n \n     def test_nonempty_update_with_inheritance(self):\n         \"\"\"\n         Test that update changes the right number of rows for an empty queryset\n         when the update affects only a base table\n         \"\"\"\n         num_updated = self.a1.d_set.update(y=100)\n-        self.failUnlessEqual(num_updated, 20)\n+        self.assertEqual(num_updated, 20)\n         cnt = D.objects.filter(y=100).count()\n-        self.failUnlessEqual(cnt, 20)\n+        self.assertEqual(cnt, 20)\n \n     def test_empty_update_with_inheritance(self):\n         \"\"\"\n         Test that update changes the right number of rows for an empty queryset\n         when the update affects only a base table\n         \"\"\"\n         num_updated = self.a2.d_set.update(y=100)\n-        self.failUnlessEqual(num_updated, 0)\n+        self.assertEqual(num_updated, 0)\n         cnt = D.objects.filter(y=100).count()\n-        self.failUnlessEqual(cnt, 0)\n+        self.assertEqual(cnt, 0)\n \n class AdvancedTests(TestCase):\n \n@@ -112,4 +113,4 @@ def test_update_slice_fail(self):\n         \"\"\"\n         method = DataPoint.objects.all()[:2].update\n         self.assertRaises(AssertionError, method,\n-            another_value='another thing')\n\\ No newline at end of file\n+            another_value='another thing')"
        },
        {
            "sha": "cb16f4b8928b5217eedc26be542438909ed35e61",
            "filename": "tests/regressiontests/admin_changelist/tests.py",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -11,8 +11,8 @@ def test_select_related_preserved(self):\n         overwrite a custom select_related provided by ModelAdmin.queryset().\n         \"\"\"\n         m = ChildAdmin(Child, admin.site)\n-        cl = ChangeList(MockRequest(), Child, m.list_display, m.list_display_links, \n-                m.list_filter, m.date_hierarchy, m.search_fields, \n+        cl = ChangeList(MockRequest(), Child, m.list_display, m.list_display_links,\n+                m.list_filter, m.date_hierarchy, m.search_fields,\n                 m.list_select_related, m.list_per_page, m.list_editable, m)\n         self.assertEqual(cl.query_set.query.select_related, {'parent': {'name': {}}})\n \n@@ -25,24 +25,24 @@ def test_result_list_html(self):\n         new_child = Child.objects.create(name='name', parent=new_parent)\n         request = MockRequest()\n         m = ChildAdmin(Child, admin.site)\n-        cl = ChangeList(request, Child, m.list_display, m.list_display_links, \n-                m.list_filter, m.date_hierarchy, m.search_fields, \n+        cl = ChangeList(request, Child, m.list_display, m.list_display_links,\n+                m.list_filter, m.date_hierarchy, m.search_fields,\n                 m.list_select_related, m.list_per_page, m.list_editable, m)\n         cl.formset = None\n         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')\n         context = Context({'cl': cl})\n         table_output = template.render(context)\n         row_html = '<tbody><tr class=\"row1\"><td><input type=\"checkbox\" class=\"action-select\" value=\"1\" name=\"_selected_action\" /></td><th><a href=\"1/\">name</a></th><td>Parent object</td></tr></tbody>'\n-        self.failIf(table_output.find(row_html) == -1,\n+        self.assertFalse(table_output.find(row_html) == -1,\n             'Failed to find expected row element: %s' % table_output)\n \n     def test_result_list_editable_html(self):\n         \"\"\"\n-        Regression tests for #11791: Inclusion tag result_list generates a \n+        Regression tests for #11791: Inclusion tag result_list generates a\n         table and this checks that the items are nested within the table\n         element tags.\n         Also a regression test for #13599, verifies that hidden fields\n-        when list_editable is enabled are rendered in a div outside the \n+        when list_editable is enabled are rendered in a div outside the\n         table.\n         \"\"\"\n         new_parent = Parent.objects.create(name='parent')\n@@ -54,8 +54,8 @@ def test_result_list_editable_html(self):\n         m.list_display = ['id', 'name', 'parent']\n         m.list_display_links = ['id']\n         m.list_editable = ['name']\n-        cl = ChangeList(request, Child, m.list_display, m.list_display_links, \n-                m.list_filter, m.date_hierarchy, m.search_fields, \n+        cl = ChangeList(request, Child, m.list_display, m.list_display_links,\n+                m.list_filter, m.date_hierarchy, m.search_fields,\n                 m.list_select_related, m.list_per_page, m.list_editable, m)\n         FormSet = m.get_changelist_formset(request)\n         cl.formset = FormSet(queryset=cl.result_list)\n@@ -64,11 +64,11 @@ def test_result_list_editable_html(self):\n         table_output = template.render(context)\n         # make sure that hidden fields are in the correct place\n         hiddenfields_div = '<div class=\"hiddenfields\"><input type=\"hidden\" name=\"form-0-id\" value=\"1\" id=\"id_form-0-id\" /></div>'\n-        self.failIf(table_output.find(hiddenfields_div) == -1,\n+        self.assertFalse(table_output.find(hiddenfields_div) == -1,\n             'Failed to find hidden fields in: %s' % table_output)\n         # make sure that list editable fields are rendered in divs correctly\n         editable_name_field = '<input name=\"form-0-name\" value=\"name\" class=\"vTextField\" maxlength=\"30\" type=\"text\" id=\"id_form-0-name\" />'\n-        self.failIf('<td>%s</td>' % editable_name_field == -1,\n+        self.assertFalse('<td>%s</td>' % editable_name_field == -1,\n             'Failed to find \"name\" list_editable field in: %s' % table_output)\n \n class ChildAdmin(admin.ModelAdmin):"
        },
        {
            "sha": "b10474d001e15a283e221d67250ea4d507c38e91",
            "filename": "tests/regressiontests/admin_inlines/tests.py",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,12 +1,10 @@\n-from django.test import TestCase\n-\n from django.contrib.admin.helpers import InlineAdminForm\n from django.contrib.contenttypes.models import ContentType\n+from django.test import TestCase\n+\n # local test models\n-from models import Holder, Inner, InnerInline\n-from models import Holder2, Inner2, Holder3, Inner3\n-from models import Person, OutfitItem, Fashionista\n-from models import Teacher, Parent, Child\n+from models import (Holder, Inner, InnerInline, Holder2, Inner2, Holder3,\n+    Inner3, Person, OutfitItem, Fashionista, Teacher, Parent, Child)\n \n \n class TestInline(TestCase):\n@@ -19,7 +17,7 @@ def setUp(self):\n         self.change_url = '/test_admin/admin/admin_inlines/holder/%i/' % holder.id\n \n         result = self.client.login(username='super', password='secret')\n-        self.failUnlessEqual(result, True)\n+        self.assertEqual(result, True)\n \n     def tearDown(self):\n         self.client.logout()\n@@ -75,7 +73,7 @@ class TestInlineMedia(TestCase):\n     def setUp(self):\n \n         result = self.client.login(username='super', password='secret')\n-        self.failUnlessEqual(result, True)\n+        self.assertEqual(result, True)\n \n     def tearDown(self):\n         self.client.logout()"
        },
        {
            "sha": "bc79f08ed87d107c446426359742b64e94750991",
            "filename": "tests/regressiontests/admin_scripts/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -12,6 +12,7 @@\n from django.conf import settings\n from django.utils import unittest\n \n+\n class AdminScriptTestCase(unittest.TestCase):\n     def write_settings(self, filename, apps=None, is_dir=False, sdict=None):\n         test_dir = os.path.dirname(os.path.dirname(__file__))\n@@ -156,7 +157,7 @@ def assertNoOutput(self, stream):\n         self.assertEquals(len(stream), 0, \"Stream should be empty: actually contains '%s'\" % stream)\n     def assertOutput(self, stream, msg):\n         \"Utility assertion: assert that the given message exists in the output\"\n-        self.failUnless(msg in stream, \"'%s' does not match actual output text '%s'\" % (msg, stream))\n+        self.assertTrue(msg in stream, \"'%s' does not match actual output text '%s'\" % (msg, stream))\n \n ##########################################################################\n # DJANGO ADMIN TESTS"
        },
        {
            "sha": "db2d7f9be3073a56826b578c780db6c1728312d1",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 207,
            "deletions": 205,
            "changes": 412,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -2,10 +2,12 @@\n \n import re\n import datetime\n+\n from django.conf import settings\n from django.core import mail\n from django.core.files import temp as tempfile\n-from django.contrib.auth import REDIRECT_FIELD_NAME, admin # Register auth models with the admin.\n+# Register auth models with the admin.\n+from django.contrib.auth import REDIRECT_FIELD_NAME, admin\n from django.contrib.auth.models import User, Permission, UNUSABLE_PASSWORD\n from django.contrib.contenttypes.models import ContentType\n from django.contrib.admin.models import LogEntry, DELETION\n@@ -62,12 +64,12 @@ def testBasicAddGet(self):\n         A smoke test to ensure GET on the add_view works.\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/section/add/' % self.urlbit)\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def testAddWithGETArgs(self):\n         response = self.client.get('/test_admin/%s/admin_views/section/add/' % self.urlbit, {'name': 'My Section'})\n-        self.failUnlessEqual(response.status_code, 200)\n-        self.failUnless(\n+        self.assertEqual(response.status_code, 200)\n+        self.assertTrue(\n             'value=\"My Section\"' in response.content,\n             \"Couldn't find an input with the right value in the response.\"\n         )\n@@ -77,7 +79,7 @@ def testBasicEditGet(self):\n         A smoke test to ensure GET on the change_view works.\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/section/1/' % self.urlbit)\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def testBasicEditGetStringPK(self):\n         \"\"\"\n@@ -86,7 +88,7 @@ def testBasicEditGetStringPK(self):\n         model with an integer PK field.\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/section/abc/' % self.urlbit)\n-        self.failUnlessEqual(response.status_code, 404)\n+        self.assertEqual(response.status_code, 404)\n \n     def testBasicAddPost(self):\n         \"\"\"\n@@ -100,7 +102,7 @@ def testBasicAddPost(self):\n             \"article_set-MAX_NUM_FORMS\": u\"0\",\n         }\n         response = self.client.post('/test_admin/%s/admin_views/section/add/' % self.urlbit, post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n \n     # Post data for edit inline\n     inline_post_data = {\n@@ -148,7 +150,7 @@ def testBasicEditPost(self):\n         A smoke test to ensure POST on edit_view works.\n         \"\"\"\n         response = self.client.post('/test_admin/%s/admin_views/section/1/' % self.urlbit, self.inline_post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n \n     def testEditSaveAs(self):\n         \"\"\"\n@@ -164,16 +166,16 @@ def testEditSaveAs(self):\n             \"article_set-5-section\": u\"1\",\n         })\n         response = self.client.post('/test_admin/%s/admin_views/section/1/' % self.urlbit, post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n \n     def testChangeListSortingCallable(self):\n         \"\"\"\n         Ensure we can sort on a list_display field that is a callable\n         (column 2 is callable_year in ArticleAdmin)\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/article/' % self.urlbit, {'ot': 'asc', 'o': 2})\n-        self.failUnlessEqual(response.status_code, 200)\n-        self.failUnless(\n+        self.assertEqual(response.status_code, 200)\n+        self.assertTrue(\n             response.content.index('Oldest content') < response.content.index('Middle content') and\n             response.content.index('Middle content') < response.content.index('Newest content'),\n             \"Results of sorting on callable are out of order.\"\n@@ -185,8 +187,8 @@ def testChangeListSortingModel(self):\n         (colunn 3 is 'model_year' in ArticleAdmin)\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/article/' % self.urlbit, {'ot': 'dsc', 'o': 3})\n-        self.failUnlessEqual(response.status_code, 200)\n-        self.failUnless(\n+        self.assertEqual(response.status_code, 200)\n+        self.assertTrue(\n             response.content.index('Newest content') < response.content.index('Middle content') and\n             response.content.index('Middle content') < response.content.index('Oldest content'),\n             \"Results of sorting on Model method are out of order.\"\n@@ -198,8 +200,8 @@ def testChangeListSortingModelAdmin(self):\n         (colunn 4 is 'modeladmin_year' in ArticleAdmin)\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/article/' % self.urlbit, {'ot': 'asc', 'o': 4})\n-        self.failUnlessEqual(response.status_code, 200)\n-        self.failUnless(\n+        self.assertEqual(response.status_code, 200)\n+        self.assertTrue(\n             response.content.index('Oldest content') < response.content.index('Middle content') and\n             response.content.index('Middle content') < response.content.index('Newest content'),\n             \"Results of sorting on ModelAdmin method are out of order.\"\n@@ -210,20 +212,20 @@ def testLimitedFilter(self):\n         This also tests relation-spanning filters (e.g. 'color__value').\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/thing/' % self.urlbit)\n-        self.failUnlessEqual(response.status_code, 200)\n-        self.failUnless(\n+        self.assertEqual(response.status_code, 200)\n+        self.assertTrue(\n             '<div id=\"changelist-filter\">' in response.content,\n             \"Expected filter not found in changelist view.\"\n         )\n-        self.failIf(\n+        self.assertFalse(\n             '<a href=\"?color__id__exact=3\">Blue</a>' in response.content,\n             \"Changelist filter not correctly limited by limit_choices_to.\"\n         )\n \n     def testRelationSpanningFilters(self):\n         response = self.client.get('/test_admin/%s/admin_views/chapterxtra1/' %\n                                    self.urlbit)\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n         self.assertContains(response, '<div id=\"changelist-filter\">')\n         filters = {\n             'chap__id__exact': dict(\n@@ -256,7 +258,7 @@ def testRelationSpanningFilters(self):\n                 filtered_response = self.client.get(\n                     '/test_admin/%s/admin_views/chapterxtra1/?%s' % (\n                         self.urlbit, query_string))\n-                self.failUnlessEqual(filtered_response.status_code, 200)\n+                self.assertEqual(filtered_response.status_code, 200)\n                 # ensure changelist contains only valid objects\n                 for obj in filtered_response.context['cl'].query_set.all():\n                     self.assertTrue(params['test'](obj, value))\n@@ -280,8 +282,8 @@ def testIsNullLookups(self):\n \n     def testLogoutAndPasswordChangeURLs(self):\n         response = self.client.get('/test_admin/%s/admin_views/article/' % self.urlbit)\n-        self.failIf('<a href=\"/test_admin/%s/logout/\">' % self.urlbit not in response.content)\n-        self.failIf('<a href=\"/test_admin/%s/password_change/\">' % self.urlbit not in response.content)\n+        self.assertFalse('<a href=\"/test_admin/%s/logout/\">' % self.urlbit not in response.content)\n+        self.assertFalse('<a href=\"/test_admin/%s/password_change/\">' % self.urlbit not in response.content)\n \n     def testNamedGroupFieldChoicesChangeList(self):\n         \"\"\"\n@@ -290,8 +292,8 @@ def testNamedGroupFieldChoicesChangeList(self):\n         has been used in the choices option of a field.\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/fabric/' % self.urlbit)\n-        self.failUnlessEqual(response.status_code, 200)\n-        self.failUnless(\n+        self.assertEqual(response.status_code, 200)\n+        self.assertTrue(\n             '<a href=\"1/\">Horizontal</a>' in response.content and\n             '<a href=\"2/\">Vertical</a>' in response.content,\n             \"Changelist table isn't showing the right human-readable values set by a model field 'choices' option named group.\"\n@@ -303,12 +305,12 @@ def testNamedGroupFieldChoicesFilter(self):\n         been used in the choices option of a model field.\n         \"\"\"\n         response = self.client.get('/test_admin/%s/admin_views/fabric/' % self.urlbit)\n-        self.failUnlessEqual(response.status_code, 200)\n-        self.failUnless(\n+        self.assertEqual(response.status_code, 200)\n+        self.assertTrue(\n             '<div id=\"changelist-filter\">' in response.content,\n             \"Expected filter not found in changelist view.\"\n         )\n-        self.failUnless(\n+        self.assertTrue(\n             '<a href=\"?surface__exact=x\">Horizontal</a>' in response.content and\n             '<a href=\"?surface__exact=y\">Vertical</a>' in response.content,\n             \"Changelist filter isn't showing options contained inside a model field 'choices' option named group.\"\n@@ -320,7 +322,7 @@ def testChangeListNullBooleanDisplay(self):\n         # against the 'admin2' custom admin (which doesn't have the\n         # Post model).\n         response = self.client.get(\"/test_admin/admin/admin_views/post/\")\n-        self.failUnless('icon-unknown.gif' in response.content)\n+        self.assertTrue('icon-unknown.gif' in response.content)\n \n     def testI18NLanguageNonEnglishDefault(self):\n         \"\"\"\n@@ -380,14 +382,14 @@ class CustomModelAdminTest(AdminViewBasicTest):\n     def testCustomAdminSiteLoginForm(self):\n         self.client.logout()\n         request = self.client.get('/test_admin/admin2/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin2/', {\n             REDIRECT_FIELD_NAME: '/test_admin/admin2/',\n             LOGIN_FORM_KEY: 1,\n             'username': 'customform',\n             'password': 'secret',\n         })\n-        self.failUnlessEqual(login.status_code, 200)\n+        self.assertEqual(login.status_code, 200)\n         self.assertContains(login, 'custom form error')\n \n     def testCustomAdminSiteLoginTemplate(self):\n@@ -516,15 +518,15 @@ def testLogin(self):\n         \"\"\"\n         # Super User\n         request = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/', self.super_login)\n         self.assertRedirects(login, '/test_admin/admin/')\n-        self.failIf(login.context)\n+        self.assertFalse(login.context)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Test if user enters e-mail address\n         request = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/', self.super_email_login)\n         self.assertContains(login, \"Your e-mail address is not your username\")\n         # only correct passwords get a username hint\n@@ -538,46 +540,46 @@ def testLogin(self):\n \n         # Add User\n         request = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/', self.adduser_login)\n         self.assertRedirects(login, '/test_admin/admin/')\n-        self.failIf(login.context)\n+        self.assertFalse(login.context)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Change User\n         request = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/', self.changeuser_login)\n         self.assertRedirects(login, '/test_admin/admin/')\n-        self.failIf(login.context)\n+        self.assertFalse(login.context)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Delete User\n         request = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/', self.deleteuser_login)\n         self.assertRedirects(login, '/test_admin/admin/')\n-        self.failIf(login.context)\n+        self.assertFalse(login.context)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Regular User should not be able to login.\n         request = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/', self.joepublic_login)\n-        self.failUnlessEqual(login.status_code, 200)\n+        self.assertEqual(login.status_code, 200)\n         self.assertContains(login, \"Please enter a correct username and password.\")\n \n         # Requests without username should not return 500 errors.\n         request = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/', self.no_username_login)\n-        self.failUnlessEqual(login.status_code, 200)\n+        self.assertEqual(login.status_code, 200)\n         form = login.context[0].get('form')\n-        self.failUnlessEqual(form.errors['username'][0], 'This field is required.')\n+        self.assertEqual(form.errors['username'][0], 'This field is required.')\n \n     def testLoginSuccessfullyRedirectsToOriginalUrl(self):\n         request = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         query_string = 'the-answer=42'\n         redirect_url = '/test_admin/admin/?%s' % query_string\n         new_next = {REDIRECT_FIELD_NAME: redirect_url}\n@@ -596,26 +598,26 @@ def testAddView(self):\n         self.client.get('/test_admin/admin/')\n         self.client.post('/test_admin/admin/', self.changeuser_login)\n         # make sure the view removes test cookie\n-        self.failUnlessEqual(self.client.session.test_cookie_worked(), False)\n+        self.assertEqual(self.client.session.test_cookie_worked(), False)\n         request = self.client.get('/test_admin/admin/admin_views/article/add/')\n-        self.failUnlessEqual(request.status_code, 403)\n+        self.assertEqual(request.status_code, 403)\n         # Try POST just to make sure\n         post = self.client.post('/test_admin/admin/admin_views/article/add/', add_dict)\n-        self.failUnlessEqual(post.status_code, 403)\n-        self.failUnlessEqual(Article.objects.all().count(), 3)\n+        self.assertEqual(post.status_code, 403)\n+        self.assertEqual(Article.objects.all().count(), 3)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Add user may login and POST to add view, then redirect to admin root\n         self.client.get('/test_admin/admin/')\n         self.client.post('/test_admin/admin/', self.adduser_login)\n         addpage = self.client.get('/test_admin/admin/admin_views/article/add/')\n-        self.failUnlessEqual(addpage.status_code, 200)\n+        self.assertEqual(addpage.status_code, 200)\n         change_list_link = '<a href=\"../\">Articles</a> &rsaquo;'\n-        self.failIf(change_list_link in addpage.content,\n+        self.assertFalse(change_list_link in addpage.content,\n                     'User restricted to add permission is given link to change list view in breadcrumbs.')\n         post = self.client.post('/test_admin/admin/admin_views/article/add/', add_dict)\n         self.assertRedirects(post, '/test_admin/admin/')\n-        self.failUnlessEqual(Article.objects.all().count(), 4)\n+        self.assertEqual(Article.objects.all().count(), 4)\n         self.assertEquals(len(mail.outbox), 1)\n         self.assertEquals(mail.outbox[0].subject, 'Greetings from a created object')\n         self.client.get('/test_admin/admin/logout/')\n@@ -624,12 +626,12 @@ def testAddView(self):\n         self.client.get('/test_admin/admin/')\n         self.client.post('/test_admin/admin/', self.super_login)\n         addpage = self.client.get('/test_admin/admin/admin_views/article/add/')\n-        self.failUnlessEqual(addpage.status_code, 200)\n-        self.failIf(change_list_link not in addpage.content,\n+        self.assertEqual(addpage.status_code, 200)\n+        self.assertFalse(change_list_link not in addpage.content,\n                     'Unrestricted user is not given link to change list view in breadcrumbs.')\n         post = self.client.post('/test_admin/admin/admin_views/article/add/', add_dict)\n         self.assertRedirects(post, '/test_admin/admin/admin_views/article/')\n-        self.failUnlessEqual(Article.objects.all().count(), 5)\n+        self.assertEqual(Article.objects.all().count(), 5)\n         self.client.get('/test_admin/admin/logout/')\n \n         # 8509 - if a normal user is already logged in, it is possible\n@@ -639,7 +641,7 @@ def testAddView(self):\n         self.client.get('/test_admin/admin/')\n         self.client.post('/test_admin/admin/', self.super_login)\n         # make sure the view removes test cookie\n-        self.failUnlessEqual(self.client.session.test_cookie_worked(), False)\n+        self.assertEqual(self.client.session.test_cookie_worked(), False)\n \n     def testChangeView(self):\n         \"\"\"Change view should restrict access and allow users to edit items.\"\"\"\n@@ -653,34 +655,34 @@ def testChangeView(self):\n         self.client.get('/test_admin/admin/')\n         self.client.post('/test_admin/admin/', self.adduser_login)\n         request = self.client.get('/test_admin/admin/admin_views/article/')\n-        self.failUnlessEqual(request.status_code, 403)\n+        self.assertEqual(request.status_code, 403)\n         request = self.client.get('/test_admin/admin/admin_views/article/1/')\n-        self.failUnlessEqual(request.status_code, 403)\n+        self.assertEqual(request.status_code, 403)\n         post = self.client.post('/test_admin/admin/admin_views/article/1/', change_dict)\n-        self.failUnlessEqual(post.status_code, 403)\n+        self.assertEqual(post.status_code, 403)\n         self.client.get('/test_admin/admin/logout/')\n \n         # change user can view all items and edit them\n         self.client.get('/test_admin/admin/')\n         self.client.post('/test_admin/admin/', self.changeuser_login)\n         request = self.client.get('/test_admin/admin/admin_views/article/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         request = self.client.get('/test_admin/admin/admin_views/article/1/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         post = self.client.post('/test_admin/admin/admin_views/article/1/', change_dict)\n         self.assertRedirects(post, '/test_admin/admin/admin_views/article/')\n-        self.failUnlessEqual(Article.objects.get(pk=1).content, '<p>edited article</p>')\n+        self.assertEqual(Article.objects.get(pk=1).content, '<p>edited article</p>')\n \n         # one error in form should produce singular error message, multiple errors plural\n         change_dict['title'] = ''\n         post = self.client.post('/test_admin/admin/admin_views/article/1/', change_dict)\n-        self.failUnlessEqual(request.status_code, 200)\n-        self.failUnless('Please correct the error below.' in post.content,\n+        self.assertEqual(request.status_code, 200)\n+        self.assertTrue('Please correct the error below.' in post.content,\n                         'Singular error message not found in response to post with one error.')\n         change_dict['content'] = ''\n         post = self.client.post('/test_admin/admin/admin_views/article/1/', change_dict)\n-        self.failUnlessEqual(request.status_code, 200)\n-        self.failUnless('Please correct the errors below.' in post.content,\n+        self.assertEqual(request.status_code, 200)\n+        self.assertTrue('Please correct the errors below.' in post.content,\n                         'Plural error message not found in response to post with multiple errors.')\n         self.client.get('/test_admin/admin/logout/')\n \n@@ -712,7 +714,7 @@ def testCustomModelAdminTemplates(self):\n \n         # Test custom change list template with custom extra context\n         request = self.client.get('/test_admin/admin/admin_views/customarticle/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         self.assert_(\"var hello = 'Hello!';\" in request.content)\n         self.assertTemplateUsed(request, 'custom_admin/change_list.html')\n \n@@ -727,7 +729,7 @@ def testCustomModelAdminTemplates(self):\n             'date_1': '10:54:39'\n         })\n         self.assertRedirects(post, '/test_admin/admin/admin_views/customarticle/')\n-        self.failUnlessEqual(CustomArticle.objects.all().count(), 1)\n+        self.assertEqual(CustomArticle.objects.all().count(), 1)\n \n         # Test custom delete, change, and object history templates\n         # Test custom change form template\n@@ -755,10 +757,10 @@ def testDeleteView(self):\n         self.client.get('/test_admin/admin/')\n         self.client.post('/test_admin/admin/', self.adduser_login)\n         request = self.client.get('/test_admin/admin/admin_views/article/1/delete/')\n-        self.failUnlessEqual(request.status_code, 403)\n+        self.assertEqual(request.status_code, 403)\n         post = self.client.post('/test_admin/admin/admin_views/article/1/delete/', delete_dict)\n-        self.failUnlessEqual(post.status_code, 403)\n-        self.failUnlessEqual(Article.objects.all().count(), 3)\n+        self.assertEqual(post.status_code, 403)\n+        self.assertEqual(Article.objects.all().count(), 3)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Delete user can delete\n@@ -769,15 +771,15 @@ def testDeleteView(self):\n         self.assertContains(response, \"admin_views/article/1/\")\n \n         response = self.client.get('/test_admin/admin/admin_views/article/1/delete/')\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n         post = self.client.post('/test_admin/admin/admin_views/article/1/delete/', delete_dict)\n         self.assertRedirects(post, '/test_admin/admin/')\n-        self.failUnlessEqual(Article.objects.all().count(), 2)\n+        self.assertEqual(Article.objects.all().count(), 2)\n         self.assertEquals(len(mail.outbox), 1)\n         self.assertEquals(mail.outbox[0].subject, 'Greetings from a deleted object')\n         article_ct = ContentType.objects.get_for_model(Article)\n         logged = LogEntry.objects.get(content_type=article_ct, action_flag=DELETION)\n-        self.failUnlessEqual(logged.object_id, u'1')\n+        self.assertEqual(logged.object_id, u'1')\n         self.client.get('/test_admin/admin/logout/')\n \n     def testDisabledPermissionsWhenLoggedIn(self):\n@@ -810,7 +812,7 @@ def test_nesting(self):\n         \"\"\"\n         pattern = re.compile(r\"\"\"<li>Plot: <a href=\".+/admin_views/plot/1/\">World Domination</a>\\s*<ul>\\s*<li>Plot details: <a href=\".+/admin_views/plotdetails/1/\">almost finished</a>\"\"\")\n         response = self.client.get('/test_admin/admin/admin_views/villain/%s/delete/' % quote(1))\n-        self.failUnless(pattern.search(response.content))\n+        self.assertTrue(pattern.search(response.content))\n \n     def test_cyclic(self):\n         \"\"\"\n@@ -831,7 +833,7 @@ def test_perms_needed(self):\n         delete_user.user_permissions.add(get_perm(Plot,\n             Plot._meta.get_delete_permission()))\n \n-        self.failUnless(self.client.login(username='deleteuser',\n+        self.assertTrue(self.client.login(username='deleteuser',\n                                           password='secret'))\n \n         response = self.client.get('/test_admin/admin/admin_views/plot/%s/delete/' % quote(1))\n@@ -919,13 +921,13 @@ def test_get_history_view(self):\n         \"Retrieving the history for the object using urlencoded form of primary key should work\"\n         response = self.client.get('/test_admin/admin/admin_views/modelwithstringprimarykey/%s/history/' % quote(self.pk))\n         self.assertContains(response, escape(self.pk))\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def test_get_change_view(self):\n         \"Retrieving the object using urlencoded form of primary key should work\"\n         response = self.client.get('/test_admin/admin/admin_views/modelwithstringprimarykey/%s/' % quote(self.pk))\n         self.assertContains(response, escape(self.pk))\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def test_changelist_to_changeform_link(self):\n         \"The link from the changelist referring to the changeform of the object should be quoted\"\n@@ -1049,7 +1051,7 @@ def test_secure_view_shows_login_if_not_logged_in(self):\n \n     def test_secure_view_login_successfully_redirects_to_original_url(self):\n         request = self.client.get('/test_admin/admin/secure-view/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         query_string = 'the-answer=42'\n         redirect_url = '/test_admin/admin/secure-view/?%s' % query_string\n         new_next = {REDIRECT_FIELD_NAME: redirect_url}\n@@ -1066,17 +1068,17 @@ def test_staff_member_required_decorator_works_as_per_admin_login(self):\n         \"\"\"\n         # Super User\n         request = self.client.get('/test_admin/admin/secure-view/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/secure-view/', self.super_login)\n         self.assertRedirects(login, '/test_admin/admin/secure-view/')\n-        self.failIf(login.context)\n+        self.assertFalse(login.context)\n         self.client.get('/test_admin/admin/logout/')\n         # make sure the view removes test cookie\n-        self.failUnlessEqual(self.client.session.test_cookie_worked(), False)\n+        self.assertEqual(self.client.session.test_cookie_worked(), False)\n \n         # Test if user enters e-mail address\n         request = self.client.get('/test_admin/admin/secure-view/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/secure-view/', self.super_email_login)\n         self.assertContains(login, \"Your e-mail address is not your username\")\n         # only correct passwords get a username hint\n@@ -1090,33 +1092,33 @@ def test_staff_member_required_decorator_works_as_per_admin_login(self):\n \n         # Add User\n         request = self.client.get('/test_admin/admin/secure-view/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/secure-view/', self.adduser_login)\n         self.assertRedirects(login, '/test_admin/admin/secure-view/')\n-        self.failIf(login.context)\n+        self.assertFalse(login.context)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Change User\n         request = self.client.get('/test_admin/admin/secure-view/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/secure-view/', self.changeuser_login)\n         self.assertRedirects(login, '/test_admin/admin/secure-view/')\n-        self.failIf(login.context)\n+        self.assertFalse(login.context)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Delete User\n         request = self.client.get('/test_admin/admin/secure-view/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/secure-view/', self.deleteuser_login)\n         self.assertRedirects(login, '/test_admin/admin/secure-view/')\n-        self.failIf(login.context)\n+        self.assertFalse(login.context)\n         self.client.get('/test_admin/admin/logout/')\n \n         # Regular User should not be able to login.\n         request = self.client.get('/test_admin/admin/secure-view/')\n-        self.failUnlessEqual(request.status_code, 200)\n+        self.assertEqual(request.status_code, 200)\n         login = self.client.post('/test_admin/admin/secure-view/', self.joepublic_login)\n-        self.failUnlessEqual(login.status_code, 200)\n+        self.assertEqual(login.status_code, 200)\n         # Login.context is a list of context dicts we just need to check the first one.\n         self.assertContains(login, \"Please enter a correct username and password.\")\n \n@@ -1127,7 +1129,7 @@ def test_staff_member_required_decorator_works_as_per_admin_login(self):\n         self.client.get('/test_admin/admin/secure-view/')\n         self.client.post('/test_admin/admin/secure-view/', self.super_login)\n         # make sure the view removes test cookie\n-        self.failUnlessEqual(self.client.session.test_cookie_worked(), False)\n+        self.assertEqual(self.client.session.test_cookie_worked(), False)\n \n class AdminViewUnicodeTest(TestCase):\n     fixtures = ['admin-views-unicode.xml']\n@@ -1169,15 +1171,15 @@ def testUnicodeEdit(self):\n         }\n \n         response = self.client.post('/test_admin/admin/admin_views/book/1/', post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n \n     def testUnicodeDelete(self):\n         \"\"\"\n         Ensure that the delete_view handles non-ascii characters\n         \"\"\"\n         delete_dict = {'post': 'yes'}\n         response = self.client.get('/test_admin/admin/admin_views/book/1/delete/')\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n         response = self.client.post('/test_admin/admin/admin_views/book/1/delete/', delete_dict)\n         self.assertRedirects(response, '/test_admin/admin/admin_views/book/')\n \n@@ -1195,17 +1197,17 @@ def test_inheritance(self):\n         Podcast.objects.create(name=\"This Week in Django\",\n             release_date=datetime.date.today())\n         response = self.client.get('/test_admin/admin/admin_views/podcast/')\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def test_inheritance_2(self):\n         Vodcast.objects.create(name=\"This Week in Django\", released=True)\n         response = self.client.get('/test_admin/admin/admin_views/vodcast/')\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def test_custom_pk(self):\n         Language.objects.create(iso='en', name='English', english_name='English')\n         response = self.client.get('/test_admin/admin/admin_views/language/')\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def test_changelist_input_html(self):\n         response = self.client.get('/test_admin/admin/admin_views/person/')\n@@ -1217,9 +1219,9 @@ def test_changelist_input_html(self):\n         # CSRF field = 1\n         # field to track 'select all' across paginated views = 1\n         # 6 + 3 + 4 + 1 + 2 + 1 + 1 = 18 inputs\n-        self.failUnlessEqual(response.content.count(\"<input\"), 18)\n+        self.assertEqual(response.content.count(\"<input\"), 18)\n         # 1 select per object = 3 selects\n-        self.failUnlessEqual(response.content.count(\"<select\"), 4)\n+        self.assertEqual(response.content.count(\"<select\"), 4)\n \n     def test_post_messages(self):\n         # Ticket 12707: Saving inline editable should not show admin\n@@ -1265,8 +1267,8 @@ def test_post_submission(self):\n         }\n         self.client.post('/test_admin/admin/admin_views/person/', data)\n \n-        self.failUnlessEqual(Person.objects.get(name=\"John Mauchly\").alive, False)\n-        self.failUnlessEqual(Person.objects.get(name=\"Grace Hopper\").gender, 2)\n+        self.assertEqual(Person.objects.get(name=\"John Mauchly\").alive, False)\n+        self.assertEqual(Person.objects.get(name=\"Grace Hopper\").gender, 2)\n \n         # test a filtered page\n         data = {\n@@ -1286,7 +1288,7 @@ def test_post_submission(self):\n         }\n         self.client.post('/test_admin/admin/admin_views/person/?gender__exact=1', data)\n \n-        self.failUnlessEqual(Person.objects.get(name=\"John Mauchly\").alive, True)\n+        self.assertEqual(Person.objects.get(name=\"John Mauchly\").alive, True)\n \n         # test a searched page\n         data = {\n@@ -1301,7 +1303,7 @@ def test_post_submission(self):\n         }\n         self.client.post('/test_admin/admin/admin_views/person/?q=mauchly', data)\n \n-        self.failUnlessEqual(Person.objects.get(name=\"John Mauchly\").alive, False)\n+        self.assertEqual(Person.objects.get(name=\"John Mauchly\").alive, False)\n \n     def test_non_form_errors(self):\n         # test if non-form errors are handled; ticket #12716\n@@ -1375,13 +1377,13 @@ def test_list_editable_ordering(self):\n         }\n         response = self.client.post('/test_admin/admin/admin_views/category/', data)\n         # Successful post will redirect\n-        self.failUnlessEqual(response.status_code, 302)\n+        self.assertEqual(response.status_code, 302)\n \n         # Check that the order values have been applied to the right objects\n-        self.failUnlessEqual(Category.objects.get(id=1).order, 14)\n-        self.failUnlessEqual(Category.objects.get(id=2).order, 13)\n-        self.failUnlessEqual(Category.objects.get(id=3).order, 1)\n-        self.failUnlessEqual(Category.objects.get(id=4).order, 0)\n+        self.assertEqual(Category.objects.get(id=1).order, 14)\n+        self.assertEqual(Category.objects.get(id=2).order, 13)\n+        self.assertEqual(Category.objects.get(id=3).order, 1)\n+        self.assertEqual(Category.objects.get(id=4).order, 0)\n \n     def test_list_editable_action_submit(self):\n         # List editable changes should not be executed if the action \"Go\" button is\n@@ -1407,8 +1409,8 @@ def test_list_editable_action_submit(self):\n         }\n         self.client.post('/test_admin/admin/admin_views/person/', data)\n \n-        self.failUnlessEqual(Person.objects.get(name=\"John Mauchly\").alive, True)\n-        self.failUnlessEqual(Person.objects.get(name=\"Grace Hopper\").gender, 1)\n+        self.assertEqual(Person.objects.get(name=\"John Mauchly\").alive, True)\n+        self.assertEqual(Person.objects.get(name=\"Grace Hopper\").gender, 1)\n \n     def test_list_editable_action_choices(self):\n         # List editable changes should be executed if the \"Save\" button is\n@@ -1434,8 +1436,8 @@ def test_list_editable_action_choices(self):\n         }\n         self.client.post('/test_admin/admin/admin_views/person/', data)\n \n-        self.failUnlessEqual(Person.objects.get(name=\"John Mauchly\").alive, False)\n-        self.failUnlessEqual(Person.objects.get(name=\"Grace Hopper\").gender, 2)\n+        self.assertEqual(Person.objects.get(name=\"John Mauchly\").alive, False)\n+        self.assertEqual(Person.objects.get(name=\"Grace Hopper\").gender, 2)\n \n \n \n@@ -1476,7 +1478,7 @@ def testInline(self):\n         response = self.client.get('/test_admin/admin/admin_views/persona/add/')\n         names = name_re.findall(response.content)\n         # make sure we have no duplicate HTML names\n-        self.failUnlessEqual(len(names), len(set(names)))\n+        self.assertEqual(len(names), len(set(names)))\n \n         # test the add case\n         post_data = {\n@@ -1493,20 +1495,20 @@ def testInline(self):\n         }\n \n         response = self.client.post('/test_admin/admin/admin_views/persona/add/', post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n-        self.failUnlessEqual(Persona.objects.count(), 1)\n-        self.failUnlessEqual(FooAccount.objects.count(), 1)\n-        self.failUnlessEqual(BarAccount.objects.count(), 1)\n-        self.failUnlessEqual(FooAccount.objects.all()[0].username, foo_user)\n-        self.failUnlessEqual(BarAccount.objects.all()[0].username, bar_user)\n-        self.failUnlessEqual(Persona.objects.all()[0].accounts.count(), 2)\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(Persona.objects.count(), 1)\n+        self.assertEqual(FooAccount.objects.count(), 1)\n+        self.assertEqual(BarAccount.objects.count(), 1)\n+        self.assertEqual(FooAccount.objects.all()[0].username, foo_user)\n+        self.assertEqual(BarAccount.objects.all()[0].username, bar_user)\n+        self.assertEqual(Persona.objects.all()[0].accounts.count(), 2)\n \n         # test the edit case\n \n         response = self.client.get('/test_admin/admin/admin_views/persona/1/')\n         names = name_re.findall(response.content)\n         # make sure we have no duplicate HTML names\n-        self.failUnlessEqual(len(names), len(set(names)))\n+        self.assertEqual(len(names), len(set(names)))\n \n         post_data = {\n             \"name\": u\"Test Name\",\n@@ -1528,13 +1530,13 @@ def testInline(self):\n             \"accounts-2-0-persona\": \"1\",\n         }\n         response = self.client.post('/test_admin/admin/admin_views/persona/1/', post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Persona.objects.count(), 1)\n-        self.failUnlessEqual(FooAccount.objects.count(), 1)\n-        self.failUnlessEqual(BarAccount.objects.count(), 1)\n-        self.failUnlessEqual(FooAccount.objects.all()[0].username, \"%s-1\" % foo_user)\n-        self.failUnlessEqual(BarAccount.objects.all()[0].username, \"%s-1\" % bar_user)\n-        self.failUnlessEqual(Persona.objects.all()[0].accounts.count(), 2)\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Persona.objects.count(), 1)\n+        self.assertEqual(FooAccount.objects.count(), 1)\n+        self.assertEqual(BarAccount.objects.count(), 1)\n+        self.assertEqual(FooAccount.objects.all()[0].username, \"%s-1\" % foo_user)\n+        self.assertEqual(BarAccount.objects.all()[0].username, \"%s-1\" % bar_user)\n+        self.assertEqual(Persona.objects.all()[0].accounts.count(), 2)\n \n class AdminActionsTest(TestCase):\n     fixtures = ['admin-views-users.xml', 'admin-views-actions.xml']\n@@ -1570,9 +1572,9 @@ def test_model_admin_default_delete_action(self):\n         }\n         confirmation = self.client.post('/test_admin/admin/admin_views/subscriber/', action_data)\n         self.assertContains(confirmation, \"Are you sure you want to delete the selected subscriber objects\")\n-        self.failUnless(confirmation.content.count(ACTION_CHECKBOX_NAME) == 2)\n+        self.assertTrue(confirmation.content.count(ACTION_CHECKBOX_NAME) == 2)\n         response = self.client.post('/test_admin/admin/admin_views/subscriber/', delete_confirmation_data)\n-        self.failUnlessEqual(Subscriber.objects.count(), 0)\n+        self.assertEqual(Subscriber.objects.count(), 0)\n \n     def test_custom_function_mail_action(self):\n         \"Tests a custom action defined in a function\"\n@@ -1593,7 +1595,7 @@ def test_custom_function_action_with_redirect(self):\n             'index': 0,\n         }\n         response = self.client.post('/test_admin/admin/admin_views/externalsubscriber/', action_data)\n-        self.failUnlessEqual(response.status_code, 302)\n+        self.assertEqual(response.status_code, 302)\n \n     def test_default_redirect(self):\n         \"\"\"\n@@ -1665,7 +1667,7 @@ def test_user_message_on_none_selected(self):\n         response = self.client.post('/test_admin/admin/admin_views/subscriber/', action_data)\n         msg = \"\"\"Items must be selected in order to perform actions on them. No items have been changed.\"\"\"\n         self.assertContains(response, msg)\n-        self.failUnlessEqual(Subscriber.objects.count(), 2)\n+        self.assertEqual(Subscriber.objects.count(), 2)\n \n     def test_user_message_on_no_action(self):\n         \"\"\"\n@@ -1679,7 +1681,7 @@ def test_user_message_on_no_action(self):\n         response = self.client.post('/test_admin/admin/admin_views/subscriber/', action_data)\n         msg = \"\"\"No action selected.\"\"\"\n         self.assertContains(response, msg)\n-        self.failUnlessEqual(Subscriber.objects.count(), 2)\n+        self.assertEqual(Subscriber.objects.count(), 2)\n \n     def test_selection_counter(self):\n         \"\"\"\n@@ -1695,7 +1697,7 @@ class TestCustomChangeList(TestCase):\n \n     def setUp(self):\n         result = self.client.login(username='super', password='secret')\n-        self.failUnlessEqual(result, True)\n+        self.assertEqual(result, True)\n \n     def tearDown(self):\n         self.client.logout()\n@@ -1707,12 +1709,12 @@ def test_custom_changelist(self):\n         # Insert some data\n         post_data = {\"name\": u\"First Gadget\"}\n         response = self.client.post('/test_admin/%s/admin_views/gadget/add/' % self.urlbit, post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n         # Hit the page once to get messages out of the queue message list\n         response = self.client.get('/test_admin/%s/admin_views/gadget/' % self.urlbit)\n         # Ensure that that data is still not visible on the page\n         response = self.client.get('/test_admin/%s/admin_views/gadget/' % self.urlbit)\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n         self.assertNotContains(response, 'First Gadget')\n \n \n@@ -1721,7 +1723,7 @@ class TestInlineNotEditable(TestCase):\n \n     def setUp(self):\n         result = self.client.login(username='super', password='secret')\n-        self.failUnlessEqual(result, True)\n+        self.assertEqual(result, True)\n \n     def tearDown(self):\n         self.client.logout()\n@@ -1731,7 +1733,7 @@ def test(self):\n         InlineModelAdmin broken?\n         \"\"\"\n         response = self.client.get('/test_admin/admin/admin_views/parent/add/')\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n class AdminCustomQuerysetTest(TestCase):\n     fixtures = ['admin-views-users.xml']\n@@ -1798,7 +1800,7 @@ def test_inline_file_upload_edit_validation_error_post(self):\n             \"pictures-1-image\": \"\",\n         }\n         response = self.client.post('/test_admin/%s/admin_views/gallery/1/' % self.urlbit, post_data)\n-        self.failUnless(response._container[0].find(\"Currently:\") > -1)\n+        self.assertTrue(response._container[0].find(\"Currently:\") > -1)\n \n \n class AdminInlineTests(TestCase):\n@@ -1891,7 +1893,7 @@ def setUp(self):\n         }\n \n         result = self.client.login(username='super', password='secret')\n-        self.failUnlessEqual(result, True)\n+        self.assertEqual(result, True)\n         self.collector = Collector(pk=1,name='John Fowles')\n         self.collector.save()\n \n@@ -1903,9 +1905,9 @@ def test_simple_inline(self):\n         # First add a new inline\n         self.post_data['widget_set-0-name'] = \"Widget 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Widget.objects.count(), 1)\n-        self.failUnlessEqual(Widget.objects.all()[0].name, \"Widget 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Widget.objects.count(), 1)\n+        self.assertEqual(Widget.objects.all()[0].name, \"Widget 1\")\n \n         # Check that the PK link exists on the rendered form\n         response = self.client.get('/test_admin/admin/admin_views/collector/1/')\n@@ -1916,27 +1918,27 @@ def test_simple_inline(self):\n         self.post_data['widget_set-0-id'] = \"1\"\n         self.post_data['widget_set-0-name'] = \"Widget 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Widget.objects.count(), 1)\n-        self.failUnlessEqual(Widget.objects.all()[0].name, \"Widget 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Widget.objects.count(), 1)\n+        self.assertEqual(Widget.objects.all()[0].name, \"Widget 1\")\n \n         # Now modify that inline\n         self.post_data['widget_set-INITIAL_FORMS'] = \"1\"\n         self.post_data['widget_set-0-id'] = \"1\"\n         self.post_data['widget_set-0-name'] = \"Widget 1 Updated\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Widget.objects.count(), 1)\n-        self.failUnlessEqual(Widget.objects.all()[0].name, \"Widget 1 Updated\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Widget.objects.count(), 1)\n+        self.assertEqual(Widget.objects.all()[0].name, \"Widget 1 Updated\")\n \n     def test_explicit_autofield_inline(self):\n         \"A model with an explicit autofield primary key can be saved as inlines. Regression for #8093\"\n         # First add a new inline\n         self.post_data['grommet_set-0-name'] = \"Grommet 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Grommet.objects.count(), 1)\n-        self.failUnlessEqual(Grommet.objects.all()[0].name, \"Grommet 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Grommet.objects.count(), 1)\n+        self.assertEqual(Grommet.objects.all()[0].name, \"Grommet 1\")\n \n         # Check that the PK link exists on the rendered form\n         response = self.client.get('/test_admin/admin/admin_views/collector/1/')\n@@ -1947,28 +1949,28 @@ def test_explicit_autofield_inline(self):\n         self.post_data['grommet_set-0-code'] = \"1\"\n         self.post_data['grommet_set-0-name'] = \"Grommet 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Grommet.objects.count(), 1)\n-        self.failUnlessEqual(Grommet.objects.all()[0].name, \"Grommet 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Grommet.objects.count(), 1)\n+        self.assertEqual(Grommet.objects.all()[0].name, \"Grommet 1\")\n \n         # Now modify that inline\n         self.post_data['grommet_set-INITIAL_FORMS'] = \"1\"\n         self.post_data['grommet_set-0-code'] = \"1\"\n         self.post_data['grommet_set-0-name'] = \"Grommet 1 Updated\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Grommet.objects.count(), 1)\n-        self.failUnlessEqual(Grommet.objects.all()[0].name, \"Grommet 1 Updated\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Grommet.objects.count(), 1)\n+        self.assertEqual(Grommet.objects.all()[0].name, \"Grommet 1 Updated\")\n \n     def test_char_pk_inline(self):\n         \"A model with a character PK can be saved as inlines. Regression for #10992\"\n         # First add a new inline\n         self.post_data['doohickey_set-0-code'] = \"DH1\"\n         self.post_data['doohickey_set-0-name'] = \"Doohickey 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(DooHickey.objects.count(), 1)\n-        self.failUnlessEqual(DooHickey.objects.all()[0].name, \"Doohickey 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(DooHickey.objects.count(), 1)\n+        self.assertEqual(DooHickey.objects.all()[0].name, \"Doohickey 1\")\n \n         # Check that the PK link exists on the rendered form\n         response = self.client.get('/test_admin/admin/admin_views/collector/1/')\n@@ -1979,28 +1981,28 @@ def test_char_pk_inline(self):\n         self.post_data['doohickey_set-0-code'] = \"DH1\"\n         self.post_data['doohickey_set-0-name'] = \"Doohickey 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(DooHickey.objects.count(), 1)\n-        self.failUnlessEqual(DooHickey.objects.all()[0].name, \"Doohickey 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(DooHickey.objects.count(), 1)\n+        self.assertEqual(DooHickey.objects.all()[0].name, \"Doohickey 1\")\n \n         # Now modify that inline\n         self.post_data['doohickey_set-INITIAL_FORMS'] = \"1\"\n         self.post_data['doohickey_set-0-code'] = \"DH1\"\n         self.post_data['doohickey_set-0-name'] = \"Doohickey 1 Updated\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(DooHickey.objects.count(), 1)\n-        self.failUnlessEqual(DooHickey.objects.all()[0].name, \"Doohickey 1 Updated\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(DooHickey.objects.count(), 1)\n+        self.assertEqual(DooHickey.objects.all()[0].name, \"Doohickey 1 Updated\")\n \n     def test_integer_pk_inline(self):\n         \"A model with an integer PK can be saved as inlines. Regression for #10992\"\n         # First add a new inline\n         self.post_data['whatsit_set-0-index'] = \"42\"\n         self.post_data['whatsit_set-0-name'] = \"Whatsit 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Whatsit.objects.count(), 1)\n-        self.failUnlessEqual(Whatsit.objects.all()[0].name, \"Whatsit 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Whatsit.objects.count(), 1)\n+        self.assertEqual(Whatsit.objects.all()[0].name, \"Whatsit 1\")\n \n         # Check that the PK link exists on the rendered form\n         response = self.client.get('/test_admin/admin/admin_views/collector/1/')\n@@ -2011,27 +2013,27 @@ def test_integer_pk_inline(self):\n         self.post_data['whatsit_set-0-index'] = \"42\"\n         self.post_data['whatsit_set-0-name'] = \"Whatsit 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Whatsit.objects.count(), 1)\n-        self.failUnlessEqual(Whatsit.objects.all()[0].name, \"Whatsit 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Whatsit.objects.count(), 1)\n+        self.assertEqual(Whatsit.objects.all()[0].name, \"Whatsit 1\")\n \n         # Now modify that inline\n         self.post_data['whatsit_set-INITIAL_FORMS'] = \"1\"\n         self.post_data['whatsit_set-0-index'] = \"42\"\n         self.post_data['whatsit_set-0-name'] = \"Whatsit 1 Updated\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(Whatsit.objects.count(), 1)\n-        self.failUnlessEqual(Whatsit.objects.all()[0].name, \"Whatsit 1 Updated\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(Whatsit.objects.count(), 1)\n+        self.assertEqual(Whatsit.objects.all()[0].name, \"Whatsit 1 Updated\")\n \n     def test_inherited_inline(self):\n         \"An inherited model can be saved as inlines. Regression for #11042\"\n         # First add a new inline\n         self.post_data['fancydoodad_set-0-name'] = \"Fancy Doodad 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(FancyDoodad.objects.count(), 1)\n-        self.failUnlessEqual(FancyDoodad.objects.all()[0].name, \"Fancy Doodad 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(FancyDoodad.objects.count(), 1)\n+        self.assertEqual(FancyDoodad.objects.all()[0].name, \"Fancy Doodad 1\")\n \n         # Check that the PK link exists on the rendered form\n         response = self.client.get('/test_admin/admin/admin_views/collector/1/')\n@@ -2042,18 +2044,18 @@ def test_inherited_inline(self):\n         self.post_data['fancydoodad_set-0-doodad_ptr'] = \"1\"\n         self.post_data['fancydoodad_set-0-name'] = \"Fancy Doodad 1\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(FancyDoodad.objects.count(), 1)\n-        self.failUnlessEqual(FancyDoodad.objects.all()[0].name, \"Fancy Doodad 1\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(FancyDoodad.objects.count(), 1)\n+        self.assertEqual(FancyDoodad.objects.all()[0].name, \"Fancy Doodad 1\")\n \n         # Now modify that inline\n         self.post_data['fancydoodad_set-INITIAL_FORMS'] = \"1\"\n         self.post_data['fancydoodad_set-0-doodad_ptr'] = \"1\"\n         self.post_data['fancydoodad_set-0-name'] = \"Fancy Doodad 1 Updated\"\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n-        self.failUnlessEqual(response.status_code, 302)\n-        self.failUnlessEqual(FancyDoodad.objects.count(), 1)\n-        self.failUnlessEqual(FancyDoodad.objects.all()[0].name, \"Fancy Doodad 1 Updated\")\n+        self.assertEqual(response.status_code, 302)\n+        self.assertEqual(FancyDoodad.objects.count(), 1)\n+        self.assertEqual(FancyDoodad.objects.all()[0].name, \"Fancy Doodad 1 Updated\")\n \n     def test_ordered_inline(self):\n         \"\"\"Check that an inline with an editable ordering fields is\n@@ -2102,14 +2104,14 @@ def test_ordered_inline(self):\n         })\n         response = self.client.post('/test_admin/admin/admin_views/collector/1/', self.post_data)\n         # Successful post will redirect\n-        self.failUnlessEqual(response.status_code, 302)\n+        self.assertEqual(response.status_code, 302)\n \n         # Check that the order values have been applied to the right objects\n-        self.failUnlessEqual(self.collector.category_set.count(), 4)\n-        self.failUnlessEqual(Category.objects.get(id=1).order, 14)\n-        self.failUnlessEqual(Category.objects.get(id=2).order, 13)\n-        self.failUnlessEqual(Category.objects.get(id=3).order, 1)\n-        self.failUnlessEqual(Category.objects.get(id=4).order, 0)\n+        self.assertEqual(self.collector.category_set.count(), 4)\n+        self.assertEqual(Category.objects.get(id=1).order, 14)\n+        self.assertEqual(Category.objects.get(id=2).order, 13)\n+        self.assertEqual(Category.objects.get(id=3).order, 1)\n+        self.assertEqual(Category.objects.get(id=4).order, 0)\n \n \n class NeverCacheTests(TestCase):\n@@ -2124,64 +2126,64 @@ def tearDown(self):\n     def testAdminIndex(self):\n         \"Check the never-cache status of the main index\"\n         response = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testAppIndex(self):\n         \"Check the never-cache status of an application index\"\n         response = self.client.get('/test_admin/admin/admin_views/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testModelIndex(self):\n         \"Check the never-cache status of a model index\"\n         response = self.client.get('/test_admin/admin/admin_views/fabric/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testModelAdd(self):\n         \"Check the never-cache status of a model add page\"\n         response = self.client.get('/test_admin/admin/admin_views/fabric/add/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testModelView(self):\n         \"Check the never-cache status of a model edit page\"\n         response = self.client.get('/test_admin/admin/admin_views/section/1/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testModelHistory(self):\n         \"Check the never-cache status of a model history page\"\n         response = self.client.get('/test_admin/admin/admin_views/section/1/history/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testModelDelete(self):\n         \"Check the never-cache status of a model delete page\"\n         response = self.client.get('/test_admin/admin/admin_views/section/1/delete/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testLogin(self):\n         \"Check the never-cache status of login views\"\n         self.client.logout()\n         response = self.client.get('/test_admin/admin/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testLogout(self):\n         \"Check the never-cache status of logout view\"\n         response = self.client.get('/test_admin/admin/logout/')\n-        self.failUnlessEqual(get_max_age(response), 0)\n+        self.assertEqual(get_max_age(response), 0)\n \n     def testPasswordChange(self):\n         \"Check the never-cache status of the password change view\"\n         self.client.logout()\n         response = self.client.get('/test_admin/password_change/')\n-        self.failUnlessEqual(get_max_age(response), None)\n+        self.assertEqual(get_max_age(response), None)\n \n     def testPasswordChangeDone(self):\n         \"Check the never-cache status of the password change done view\"\n         response = self.client.get('/test_admin/admin/password_change/done/')\n-        self.failUnlessEqual(get_max_age(response), None)\n+        self.assertEqual(get_max_age(response), None)\n \n     def testJsi18n(self):\n         \"Check the never-cache status of the Javascript i18n view\"\n         response = self.client.get('/test_admin/admin/jsi18n/')\n-        self.failUnlessEqual(get_max_age(response), None)\n+        self.assertEqual(get_max_age(response), None)\n \n \n class ReadonlyTest(TestCase):\n@@ -2391,5 +2393,5 @@ def tearDown(self):\n \n     def testLangNamePresent(self):\n         response = self.client.get('/test_admin/%s/admin_views/' % self.urlbit)\n-        self.failIf(' lang=\"\"' in response.content)\n-        self.failIf(' xml:lang=\"\"' in response.content)\n+        self.assertFalse(' lang=\"\"' in response.content)\n+        self.assertFalse(' xml:lang=\"\"' in response.content)"
        },
        {
            "sha": "78e7ba42d9b09ddf4b59cf9aa6237072880b26ee",
            "filename": "tests/regressiontests/admin_widgets/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_widgets%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -143,7 +143,7 @@ def tearDown(self):\n \n     def test_changelist_foreignkey(self):\n         response = self.client.get('%s/admin_widgets/car/' % self.admin_root)\n-        self.failUnless('%s/auth/user/add/' % self.admin_root in response.content)\n+        self.assertTrue('%s/auth/user/add/' % self.admin_root in response.content)\n \n \n class AdminForeignKeyRawIdWidget(DjangoTestCase):"
        },
        {
            "sha": "70c14fdd2874df1601561fc49260fac253c05543",
            "filename": "tests/regressiontests/app_loading/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fapp_loading%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fapp_loading%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fapp_loading%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -47,28 +47,28 @@ def test_egg1(self):\n         egg_name = '%s/modelapp.egg' % self.egg_dir\n         sys.path.append(egg_name)\n         models = load_app('app_with_models')\n-        self.failIf(models is None)\n+        self.assertFalse(models is None)\n \n     def test_egg2(self):\n         \"\"\"Loading an app from an egg that has no models returns no models (and no error)\"\"\"\n         egg_name = '%s/nomodelapp.egg' % self.egg_dir\n         sys.path.append(egg_name)\n         models = load_app('app_no_models')\n-        self.failUnless(models is None)\n+        self.assertTrue(models is None)\n \n     def test_egg3(self):\n         \"\"\"Models module can be loaded from an app located under an egg's top-level package\"\"\"\n         egg_name = '%s/omelet.egg' % self.egg_dir\n         sys.path.append(egg_name)\n         models = load_app('omelet.app_with_models')\n-        self.failIf(models is None)\n+        self.assertFalse(models is None)\n \n     def test_egg4(self):\n         \"\"\"Loading an app with no models from under the top-level egg package generates no error\"\"\"\n         egg_name = '%s/omelet.egg' % self.egg_dir\n         sys.path.append(egg_name)\n         models = load_app('omelet.app_no_models')\n-        self.failUnless(models is None)\n+        self.assertTrue(models is None)\n \n     def test_egg5(self):\n         \"\"\"Loading an app from an egg that has an import error in its models module raises that error\"\"\"\n@@ -80,4 +80,4 @@ def test_egg5(self):\n         except ImportError, e:\n             # Make sure the message is indicating the actual\n             # problem in the broken app.\n-            self.failUnless(\"modelz\" in e.args[0])\n+            self.assertTrue(\"modelz\" in e.args[0])"
        },
        {
            "sha": "df35b8c77419ae0966e91c46be16bcd9cfa9c9db",
            "filename": "tests/regressiontests/bug8245/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fbug8245%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fbug8245%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbug8245%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -12,7 +12,7 @@ def test_bug_8245(self):\n         try:\n             admin.autodiscover()\n         except Exception, e:\n-            self.failUnlessEqual(str(e), \"Bad admin module\")\n+            self.assertEqual(str(e), \"Bad admin module\")\n         else:\n             self.fail(\n                 'autodiscover should have raised a \"Bad admin module\" error.')\n@@ -22,7 +22,7 @@ def test_bug_8245(self):\n         try:\n             admin.autodiscover()\n         except Exception, e:\n-            self.failUnlessEqual(str(e), \"Bad admin module\")\n+            self.assertEqual(str(e), \"Bad admin module\")\n         else:\n             self.fail(\n                 'autodiscover should have raised a \"Bad admin module\" error.')"
        },
        {
            "sha": "eea6f5fc0c2926e4d881b0501ec05d4279ae4ab9",
            "filename": "tests/regressiontests/builtin_server/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fbuiltin_server%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fbuiltin_server%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbuiltin_server%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -48,5 +48,5 @@ def test_file_wrapper_no_sendfile(self):\n         err = StringIO()\n         handler = FileWrapperHandler(None, StringIO(), err, env)\n         handler.run(wsgi_app)\n-        self.failIf(handler._used_sendfile)\n+        self.assertFalse(handler._used_sendfile)\n         self.assertEqual(handler.stdout.getvalue().splitlines()[-1],'Hello World!')"
        },
        {
            "sha": "5efa5c64a8a612a2e1b5c4927df53e0e7aa815b8",
            "filename": "tests/regressiontests/comment_tests/tests/comment_form_tests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_form_tests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_form_tests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_form_tests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,19 +1,21 @@\n import time\n+\n from django.conf import settings\n-from django.contrib.comments.models import Comment\n from django.contrib.comments.forms import CommentForm\n+from django.contrib.comments.models import Comment\n from django.utils.hashcompat import sha_constructor\n+\n from regressiontests.comment_tests.models import Article\n from regressiontests.comment_tests.tests import CommentTestCase\n \n-class CommentFormTests(CommentTestCase):\n \n+class CommentFormTests(CommentTestCase):\n     def testInit(self):\n         f = CommentForm(Article.objects.get(pk=1))\n         self.assertEqual(f.initial['content_type'], str(Article._meta))\n         self.assertEqual(f.initial['object_pk'], \"1\")\n-        self.failIfEqual(f.initial['security_hash'], None)\n-        self.failIfEqual(f.initial['timestamp'], None)\n+        self.assertNotEqual(f.initial['security_hash'], None)\n+        self.assertNotEqual(f.initial['timestamp'], None)\n \n     def testValidPost(self):\n         a = Article.objects.get(pk=1)\n@@ -26,7 +28,7 @@ def tamperWithForm(self, **kwargs):\n         d = self.getValidData(a)\n         d.update(kwargs)\n         f = CommentForm(Article.objects.get(pk=1), data=d)\n-        self.failIf(f.is_valid())\n+        self.assertFalse(f.is_valid())\n         return f\n \n     def testHoneypotTampering(self):\n@@ -88,12 +90,12 @@ def testProfanities(self):\n         # Try with COMMENTS_ALLOW_PROFANITIES off\n         settings.COMMENTS_ALLOW_PROFANITIES = False\n         f = CommentForm(a, data=dict(d, comment=\"What a rooster!\"))\n-        self.failIf(f.is_valid())\n+        self.assertFalse(f.is_valid())\n \n         # Now with COMMENTS_ALLOW_PROFANITIES on\n         settings.COMMENTS_ALLOW_PROFANITIES = True\n         f = CommentForm(a, data=dict(d, comment=\"What a rooster!\"))\n-        self.failUnless(f.is_valid())\n+        self.assertTrue(f.is_valid())\n \n         # Restore settings\n         settings.PROFANITIES_LIST, settings.COMMENTS_ALLOW_PROFANITIES = saved"
        },
        {
            "sha": "b8a62b424614dbd70614e23df70db0f6521cc6da",
            "filename": "tests/regressiontests/comment_tests/tests/comment_view_tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_view_tests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_view_tests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_view_tests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -199,7 +199,7 @@ def receive(sender, **kwargs):\n         signals.comment_will_be_posted.connect(receive)\n         self.testCreateValidComment()\n         c = Comment.objects.all()[0]\n-        self.failIf(c.is_public)\n+        self.assertFalse(c.is_public)\n \n     def testCommentNext(self):\n         \"\"\"Test the different \"next\" actions the comment view can take\"\"\"\n@@ -208,22 +208,22 @@ def testCommentNext(self):\n         response = self.client.post(\"/post/\", data)\n         location = response[\"Location\"]\n         match = post_redirect_re.match(location)\n-        self.failUnless(match != None, \"Unexpected redirect location: %s\" % location)\n+        self.assertTrue(match != None, \"Unexpected redirect location: %s\" % location)\n \n         data[\"next\"] = \"/somewhere/else/\"\n         data[\"comment\"] = \"This is another comment\"\n         response = self.client.post(\"/post/\", data)\n         location = response[\"Location\"]\n         match = re.search(r\"^http://testserver/somewhere/else/\\?c=\\d+$\", location)\n-        self.failUnless(match != None, \"Unexpected redirect location: %s\" % location)\n+        self.assertTrue(match != None, \"Unexpected redirect location: %s\" % location)\n \n     def testCommentDoneView(self):\n         a = Article.objects.get(pk=1)\n         data = self.getValidData(a)\n         response = self.client.post(\"/post/\", data)\n         location = response[\"Location\"]\n         match = post_redirect_re.match(location)\n-        self.failUnless(match != None, \"Unexpected redirect location: %s\" % location)\n+        self.assertTrue(match != None, \"Unexpected redirect location: %s\" % location)\n         pk = int(match.group('pk'))\n         response = self.client.get(location)\n         self.assertTemplateUsed(response, \"comments/posted.html\")\n@@ -240,7 +240,7 @@ def testCommentNextWithQueryString(self):\n         response = self.client.post(\"/post/\", data)\n         location = response[\"Location\"]\n         match = re.search(r\"^http://testserver/somewhere/else/\\?foo=bar&c=\\d+$\", location)\n-        self.failUnless(match != None, \"Unexpected redirect location: %s\" % location)\n+        self.assertTrue(match != None, \"Unexpected redirect location: %s\" % location)\n \n     def testCommentPostRedirectWithInvalidIntegerPK(self):\n         \"\"\""
        },
        {
            "sha": "2cbf66f07ed5b6b57e126cb50f14a3830b9fc725",
            "filename": "tests/regressiontests/comment_tests/tests/model_tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmodel_tests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmodel_tests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmodel_tests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,12 +1,13 @@\n from django.contrib.comments.models import Comment\n+\n from regressiontests.comment_tests.models import Author, Article\n from regressiontests.comment_tests.tests import CommentTestCase\n \n-class CommentModelTests(CommentTestCase):\n \n+class CommentModelTests(CommentTestCase):\n     def testSave(self):\n         for c in self.createSomeComments():\n-            self.failIfEqual(c.submit_date, None)\n+            self.assertNotEqual(c.submit_date, None)\n \n     def testUserProperties(self):\n         c1, c2, c3, c4 = self.createSomeComments()"
        },
        {
            "sha": "ef79b4dc15186d6eefd6ac0965694ba6665d6df3",
            "filename": "tests/regressiontests/comment_tests/tests/moderation_view_tests.py",
            "status": "modified",
            "additions": 15,
            "deletions": 13,
            "changes": 28,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmoderation_view_tests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmoderation_view_tests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fmoderation_view_tests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,8 +1,10 @@\n-from django.contrib.comments.models import Comment, CommentFlag\n from django.contrib.auth.models import User, Permission\n+from django.contrib.comments import signals\n+from django.contrib.comments.models import Comment, CommentFlag\n from django.contrib.contenttypes.models import ContentType\n+\n from regressiontests.comment_tests.tests import CommentTestCase\n-from django.contrib.comments import signals\n+\n \n class FlagViewTests(CommentTestCase):\n \n@@ -35,15 +37,15 @@ def testFlagPostTwice(self):\n     def testFlagAnon(self):\n         \"\"\"GET/POST the flag view while not logged in: redirect to log in.\"\"\"\n         comments = self.createSomeComments()\n-        pk = comments[0].pk        \n+        pk = comments[0].pk\n         response = self.client.get(\"/flag/%d/\" % pk)\n         self.assertEqual(response[\"Location\"], \"http://testserver/accounts/login/?next=/flag/%d/\" % pk)\n         response = self.client.post(\"/flag/%d/\" % pk)\n         self.assertEqual(response[\"Location\"], \"http://testserver/accounts/login/?next=/flag/%d/\" % pk)\n \n     def testFlaggedView(self):\n         comments = self.createSomeComments()\n-        pk = comments[0].pk        \n+        pk = comments[0].pk\n         response = self.client.get(\"/flagged/\", data={\"c\":pk})\n         self.assertTemplateUsed(response, \"comments/flagged.html\")\n \n@@ -75,7 +77,7 @@ class DeleteViewTests(CommentTestCase):\n     def testDeletePermissions(self):\n         \"\"\"The delete view should only be accessible to 'moderators'\"\"\"\n         comments = self.createSomeComments()\n-        pk = comments[0].pk        \n+        pk = comments[0].pk\n         self.client.login(username=\"normaluser\", password=\"normaluser\")\n         response = self.client.get(\"/delete/%d/\" % pk)\n         self.assertEqual(response[\"Location\"], \"http://testserver/accounts/login/?next=/delete/%d/\" % pk)\n@@ -93,7 +95,7 @@ def testDeletePost(self):\n         response = self.client.post(\"/delete/%d/\" % pk)\n         self.assertEqual(response[\"Location\"], \"http://testserver/deleted/?c=%d\" % pk)\n         c = Comment.objects.get(pk=pk)\n-        self.failUnless(c.is_removed)\n+        self.assertTrue(c.is_removed)\n         self.assertEqual(c.flags.filter(flag=CommentFlag.MODERATOR_DELETION, user__username=\"normaluser\").count(), 1)\n \n     def testDeleteSignals(self):\n@@ -110,7 +112,7 @@ def receive(sender, **kwargs):\n \n     def testDeletedView(self):\n         comments = self.createSomeComments()\n-        pk = comments[0].pk        \n+        pk = comments[0].pk\n         response = self.client.get(\"/deleted/\", data={\"c\":pk})\n         self.assertTemplateUsed(response, \"comments/deleted.html\")\n \n@@ -119,7 +121,7 @@ class ApproveViewTests(CommentTestCase):\n     def testApprovePermissions(self):\n         \"\"\"The delete view should only be accessible to 'moderators'\"\"\"\n         comments = self.createSomeComments()\n-        pk = comments[0].pk        \n+        pk = comments[0].pk\n         self.client.login(username=\"normaluser\", password=\"normaluser\")\n         response = self.client.get(\"/approve/%d/\" % pk)\n         self.assertEqual(response[\"Location\"], \"http://testserver/accounts/login/?next=/approve/%d/\" % pk)\n@@ -138,7 +140,7 @@ def testApprovePost(self):\n         response = self.client.post(\"/approve/%d/\" % c1.pk)\n         self.assertEqual(response[\"Location\"], \"http://testserver/approved/?c=%d\" % c1.pk)\n         c = Comment.objects.get(pk=c1.pk)\n-        self.failUnless(c.is_public)\n+        self.assertTrue(c.is_public)\n         self.assertEqual(c.flags.filter(flag=CommentFlag.MODERATOR_APPROVAL, user__username=\"normaluser\").count(), 1)\n \n     def testApproveSignals(self):\n@@ -155,21 +157,21 @@ def receive(sender, **kwargs):\n \n     def testApprovedView(self):\n         comments = self.createSomeComments()\n-        pk = comments[0].pk        \n+        pk = comments[0].pk\n         response = self.client.get(\"/approved/\", data={\"c\":pk})\n         self.assertTemplateUsed(response, \"comments/approved.html\")\n \n class AdminActionsTests(CommentTestCase):\n     urls = \"regressiontests.comment_tests.urls_admin\"\n-    \n+\n     def setUp(self):\n         super(AdminActionsTests, self).setUp()\n-        \n+\n         # Make \"normaluser\" a moderator\n         u = User.objects.get(username=\"normaluser\")\n         u.is_staff = True\n         perms = Permission.objects.filter(\n-            content_type__app_label = 'comments', \n+            content_type__app_label = 'comments',\n             codename__endswith = 'comment'\n         )\n         for perm in perms:"
        },
        {
            "sha": "44466fe9754e7f0989b5fee45c3021e4c3fccf89",
            "filename": "tests/regressiontests/file_storage/tests.py",
            "status": "modified",
            "additions": 13,
            "deletions": 14,
            "changes": 27,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_storage%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -16,12 +16,11 @@\n     import dummy_threading as threading\n \n from django.conf import settings\n-from django.core.exceptions import SuspiciousOperation\n+from django.core.exceptions import SuspiciousOperation, ImproperlyConfigured\n from django.core.files.base import ContentFile, File\n from django.core.files.images import get_image_dimensions\n from django.core.files.storage import FileSystemStorage, get_storage_class\n from django.core.files.uploadedfile import UploadedFile\n-from django.core.exceptions import ImproperlyConfigured\n from django.utils import unittest\n \n # Try to import PIL in either of the two ways it can end up installed.\n@@ -103,7 +102,7 @@ def test_file_access_options(self):\n         \"\"\"\n         Standard file access options are available, and work as expected.\n         \"\"\"\n-        self.failIf(self.storage.exists('storage_test'))\n+        self.assertFalse(self.storage.exists('storage_test'))\n         f = self.storage.open('storage_test', 'w')\n         f.write('storage contents')\n         f.close()\n@@ -114,14 +113,14 @@ def test_file_access_options(self):\n         f.close()\n \n         self.storage.delete('storage_test')\n-        self.failIf(self.storage.exists('storage_test'))\n+        self.assertFalse(self.storage.exists('storage_test'))\n \n     def test_file_accessed_time(self):\n         \"\"\"\n         File storage returns a Datetime object for the last accessed time of\n         a file.\n         \"\"\"\n-        self.failIf(self.storage.exists('test.file'))\n+        self.assertFalse(self.storage.exists('test.file'))\n \n         f = ContentFile('custom contents')\n         f_name = self.storage.save('test.file', f)\n@@ -137,7 +136,7 @@ def test_file_created_time(self):\n         File storage returns a Datetime object for the creation time of\n         a file.\n         \"\"\"\n-        self.failIf(self.storage.exists('test.file'))\n+        self.assertFalse(self.storage.exists('test.file'))\n \n         f = ContentFile('custom contents')\n         f_name = self.storage.save('test.file', f)\n@@ -154,7 +153,7 @@ def test_file_modified_time(self):\n         File storage returns a Datetime object for the last modified time of\n         a file.\n         \"\"\"\n-        self.failIf(self.storage.exists('test.file'))\n+        self.assertFalse(self.storage.exists('test.file'))\n \n         f = ContentFile('custom contents')\n         f_name = self.storage.save('test.file', f)\n@@ -171,7 +170,7 @@ def test_file_save_without_name(self):\n         File storage extracts the filename from the content object if no\n         name is given explicitly.\n         \"\"\"\n-        self.failIf(self.storage.exists('test.file'))\n+        self.assertFalse(self.storage.exists('test.file'))\n \n         f = ContentFile('custom contents')\n         f.name = 'test.file'\n@@ -188,7 +187,7 @@ def test_file_path(self):\n         \"\"\"\n         File storage returns the full path of a file\n         \"\"\"\n-        self.failIf(self.storage.exists('test.file'))\n+        self.assertFalse(self.storage.exists('test.file'))\n \n         f = ContentFile('custom contents')\n         f_name = self.storage.save('test.file', f)\n@@ -213,7 +212,7 @@ def test_file_with_mixin(self):\n         File storage can get a mixin to extend the functionality of the\n         returned file.\n         \"\"\"\n-        self.failIf(self.storage.exists('test.file'))\n+        self.assertFalse(self.storage.exists('test.file'))\n \n         class TestFileMixin(object):\n             mixed_in = True\n@@ -232,9 +231,9 @@ def test_listdir(self):\n         \"\"\"\n         File storage returns a tuple containing directories and files.\n         \"\"\"\n-        self.failIf(self.storage.exists('storage_test_1'))\n-        self.failIf(self.storage.exists('storage_test_2'))\n-        self.failIf(self.storage.exists('storage_dir_1'))\n+        self.assertFalse(self.storage.exists('storage_test_1'))\n+        self.assertFalse(self.storage.exists('storage_test_2'))\n+        self.assertFalse(self.storage.exists('storage_dir_1'))\n \n         f = self.storage.save('storage_test_1', ContentFile('custom content'))\n         f = self.storage.save('storage_test_2', ContentFile('custom content'))\n@@ -357,7 +356,7 @@ def test_directory_with_dot(self):\n         self.storage.save('dotted.path/test', ContentFile(\"1\"))\n         self.storage.save('dotted.path/test', ContentFile(\"2\"))\n \n-        self.failIf(os.path.exists(os.path.join(self.storage_dir, 'dotted_.path')))\n+        self.assertFalse(os.path.exists(os.path.join(self.storage_dir, 'dotted_.path')))\n         self.assert_(os.path.exists(os.path.join(self.storage_dir, 'dotted.path/test')))\n         self.assert_(os.path.exists(os.path.join(self.storage_dir, 'dotted.path/test_1')))\n "
        },
        {
            "sha": "31f2297d4f2c3576c00090ab80e719980fe01c5f",
            "filename": "tests/regressiontests/file_uploads/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,6 +1,6 @@\n #! -*- coding: utf-8 -*-\n-import os\n import errno\n+import os\n import shutil\n from StringIO import StringIO\n \n@@ -15,6 +15,7 @@\n from models import FileModel, temp_storage, UPLOAD_TO\n import uploadhandler\n \n+\n UNICODE_FILENAME = u'test-0123456789__Orlans.jpg'\n \n class FileUploadTests(TestCase):"
        },
        {
            "sha": "84f6348fa335f2e60971712c3971f54d5eee11ff",
            "filename": "tests/regressiontests/generic_inline_admin/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fgeneric_inline_admin%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fgeneric_inline_admin%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_inline_admin%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,13 +1,14 @@\n # coding: utf-8\n \n-from django.test import TestCase\n from django.conf import settings\n from django.contrib.contenttypes.generic import generic_inlineformset_factory\n+from django.test import TestCase\n \n # local test models\n from models import Episode, EpisodeExtra, EpisodeMaxNum, EpisodeExclude, \\\n                    Media, EpisodePermanent, MediaPermanentInline, Category\n \n+\n class GenericAdminViewTest(TestCase):\n     fixtures = ['users.xml']\n \n@@ -41,14 +42,14 @@ def testBasicAddGet(self):\n         A smoke test to ensure GET on the add_view works.\n         \"\"\"\n         response = self.client.get('/generic_inline_admin/admin/generic_inline_admin/episode/add/')\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def testBasicEditGet(self):\n         \"\"\"\n         A smoke test to ensure GET on the change_view works.\n         \"\"\"\n         response = self.client.get('/generic_inline_admin/admin/generic_inline_admin/episode/%d/' % self.episode_pk)\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n \n     def testBasicAddPost(self):\n         \"\"\"\n@@ -62,7 +63,7 @@ def testBasicAddPost(self):\n             \"generic_inline_admin-media-content_type-object_id-MAX_NUM_FORMS\": u\"0\",\n         }\n         response = self.client.post('/generic_inline_admin/admin/generic_inline_admin/episode/add/', post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n \n     def testBasicEditPost(self):\n         \"\"\"\n@@ -83,7 +84,7 @@ def testBasicEditPost(self):\n         }\n         url = '/generic_inline_admin/admin/generic_inline_admin/episode/%d/' % self.episode_pk\n         response = self.client.post(url, post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n \n     def testGenericInlineFormset(self):\n         EpisodeMediaFormSet = generic_inlineformset_factory(Media, can_delete=False, extra=3)\n@@ -118,7 +119,7 @@ def testGenericInlineFormsetFactory(self):\n         # Regression test for #12340.\n         e = Episode.objects.get(name='This Week in Django')\n         formset = inline_formset(instance=e)\n-        self.failUnless(formset.get_queryset().ordered)\n+        self.assertTrue(formset.get_queryset().ordered)\n \n class GenericInlineAdminParametersTest(TestCase):\n     fixtures = ['users.xml']\n@@ -178,7 +179,7 @@ def testExcludeParam(self):\n         e = self._create_object(EpisodeExclude)\n         response = self.client.get('/generic_inline_admin/admin/generic_inline_admin/episodeexclude/%s/' % e.pk)\n         formset = response.context['inline_admin_formsets'][0].formset\n-        self.failIf('url' in formset.forms[0], 'The formset has excluded \"url\" field.')\n+        self.assertFalse('url' in formset.forms[0], 'The formset has excluded \"url\" field.')\n \n class GenericInlineAdminWithUniqueTogetherTest(TestCase):\n     fixtures = ['users.xml']\n@@ -202,9 +203,9 @@ def testAdd(self):\n             \"generic_inline_admin-phonenumber-content_type-object_id-0-category\": \"%s\" % category_id,\n         }\n         response = self.client.get('/generic_inline_admin/admin/generic_inline_admin/contact/add/')\n-        self.failUnlessEqual(response.status_code, 200)\n+        self.assertEqual(response.status_code, 200)\n         response = self.client.post('/generic_inline_admin/admin/generic_inline_admin/contact/add/', post_data)\n-        self.failUnlessEqual(response.status_code, 302) # redirect somewhere\n+        self.assertEqual(response.status_code, 302) # redirect somewhere\n \n class NoInlineDeletionTest(TestCase):\n     def test_no_deletion(self):"
        },
        {
            "sha": "b983bca8abe5fa36a2d81dbcf9e5ca87c7669183",
            "filename": "tests/regressiontests/httpwrappers/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fhttpwrappers%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -52,10 +52,10 @@ def test_single_key_value(self):\n         self.assertRaises(AttributeError, q.setlist, 'foo', ['bar'])\n         self.assertRaises(AttributeError, q.appendlist, 'foo', ['bar'])\n \n-        self.failUnless(q.has_key('foo'))\n-        self.failUnless('foo' in q)\n-        self.failIf(q.has_key('bar'))\n-        self.failIf('bar' in q)\n+        self.assertTrue(q.has_key('foo'))\n+        self.assertTrue('foo' in q)\n+        self.assertFalse(q.has_key('bar'))\n+        self.assertFalse('bar' in q)\n \n         self.assertEqual(q.items(), [(u'foo', u'bar')])\n         self.assertEqual(q.lists(), [(u'foo', [u'bar'])])\n@@ -92,7 +92,7 @@ def test_mutable_delete(self):\n         q = QueryDict('').copy()\n         q['name'] = 'john'\n         del q['name']\n-        self.failIf('name' in q)\n+        self.assertFalse('name' in q)\n \n     def test_basic_mutable_operations(self):\n         q = QueryDict('').copy()\n@@ -109,8 +109,8 @@ def test_basic_mutable_operations(self):\n         q.appendlist('foo', 'another')\n         self.assertEqual(q.getlist('foo'), ['bar', 'baz', 'another'])\n         self.assertEqual(q['foo'], 'another')\n-        self.failUnless(q.has_key('foo'))\n-        self.failUnless('foo' in q)\n+        self.assertTrue(q.has_key('foo'))\n+        self.assertTrue('foo' in q)\n \n         self.assertEqual(q.items(),  [(u'foo', u'another'), (u'name', u'john')])\n         self.assertEqual(q.lists(), [(u'foo', [u'bar', u'baz', u'another']), (u'name', [u'john'])])\n@@ -213,7 +213,7 @@ def test_unicode_headers(self):\n \n         # If we insert a unicode value it will be converted to an ascii\n         r['value'] = u'test value'\n-        self.failUnless(isinstance(r['value'], str))\n+        self.assertTrue(isinstance(r['value'], str))\n \n         # An error is raised ~hen a unicode object with non-ascii is assigned.\n         self.assertRaises(UnicodeEncodeError, r.__setitem__, 'value', u't\\xebst value')"
        },
        {
            "sha": "44bb2f6ab4ec96974dee8b48898086fe6416c92d",
            "filename": "tests/regressiontests/i18n/commands/compilation.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -32,4 +32,4 @@ def test_bom_rejection(self):\n         # underlying compile_messages function instead\n         out = StringIO()\n         self.assertRaises(CommandError, compile_messages, out, locale=LOCALE)\n-        self.failIf(os.path.exists(self.MO_FILE))\n+        self.assertFalse(os.path.exists(self.MO_FILE))"
        },
        {
            "sha": "5bd9d18ddd1bca905a8c49d5d3375f645b845a2f",
            "filename": "tests/regressiontests/inline_formsets/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Finline_formsets%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Finline_formsets%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Finline_formsets%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,5 +1,6 @@\n-from django.test import TestCase\n from django.forms.models import inlineformset_factory\n+from django.test import TestCase\n+\n from regressiontests.inline_formsets.models import Poet, Poem, School, Parent, Child\n \n \n@@ -20,7 +21,7 @@ def test_deletion(self):\n         }\n         formset = PoemFormSet(data, instance=poet)\n         formset.save()\n-        self.failUnless(formset.is_valid())\n+        self.assertTrue(formset.is_valid())\n         self.assertEqual(Poem.objects.count(), 0)\n \n     def test_add_form_deletion_when_invalid(self):"
        },
        {
            "sha": "b77a2a38131d46520d4709370458f7eb07e74ffb",
            "filename": "tests/regressiontests/middleware/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fmiddleware%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fmiddleware%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmiddleware%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,9 +1,10 @@\n # -*- coding: utf-8 -*-\n \n-from django.test import TestCase\n+from django.conf import settings\n from django.http import HttpRequest\n from django.middleware.common import CommonMiddleware\n-from django.conf import settings\n+from django.test import TestCase\n+\n \n class CommonMiddlewareTest(TestCase):\n     def setUp(self):\n@@ -74,7 +75,7 @@ def test_append_slash_no_redirect_on_POST_in_DEBUG(self):\n         try:\n             CommonMiddleware().process_request(request)\n         except RuntimeError, e:\n-            self.failUnless('end in a slash' in str(e))\n+            self.assertTrue('end in a slash' in str(e))\n         settings.DEBUG = False\n \n     def test_append_slash_disabled(self):\n@@ -125,7 +126,7 @@ def test_prepend_www_append_slash_slashless(self):\n         self.assertEquals(r.status_code, 301)\n         self.assertEquals(r['Location'],\n                           'http://www.testserver/middleware/slash/')\n-   \n+\n \n     # The following tests examine expected behavior given a custom urlconf that\n     # overrides the default one through the request object.\n@@ -165,7 +166,7 @@ def test_append_slash_redirect_custom_urlconf(self):\n       request = self._get_request('customurlconf/slash')\n       request.urlconf = 'regressiontests.middleware.extra_urls'\n       r = CommonMiddleware().process_request(request)\n-      self.failIf(r is None, \n+      self.assertFalse(r is None,\n           \"CommonMiddlware failed to return APPEND_SLASH redirect using request.urlconf\")\n       self.assertEquals(r.status_code, 301)\n       self.assertEquals(r['Location'], 'http://testserver/middleware/customurlconf/slash/')\n@@ -188,7 +189,7 @@ def test_append_slash_no_redirect_on_POST_in_DEBUG_custom_urlconf(self):\n       try:\n           CommonMiddleware().process_request(request)\n       except RuntimeError, e:\n-          self.failUnless('end in a slash' in str(e))\n+          self.assertTrue('end in a slash' in str(e))\n       settings.DEBUG = False\n \n     def test_append_slash_disabled_custom_urlconf(self):\n@@ -209,7 +210,7 @@ def test_append_slash_quoted_custom_urlconf(self):\n       request = self._get_request('customurlconf/needsquoting#')\n       request.urlconf = 'regressiontests.middleware.extra_urls'\n       r = CommonMiddleware().process_request(request)\n-      self.failIf(r is None, \n+      self.assertFalse(r is None,\n           \"CommonMiddlware failed to return APPEND_SLASH redirect using request.urlconf\")\n       self.assertEquals(r.status_code, 301)\n       self.assertEquals("
        },
        {
            "sha": "e38df4a80f60ebba8f0c46e0361a0b8eed5a1b9f",
            "filename": "tests/regressiontests/model_forms_regress/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_forms_regress%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,11 +1,12 @@\n-import unittest\n from datetime import date\n \n from django import forms\n-from django.forms.models import modelform_factory, ModelChoiceField, fields_for_model, construct_instance\n-from django.test import TestCase\n from django.core.exceptions import FieldError, ValidationError\n from django.core.files.uploadedfile import SimpleUploadedFile\n+from django.forms.models import (modelform_factory, ModelChoiceField,\n+    fields_for_model, construct_instance)\n+from django.utils import unittest\n+from django.test import TestCase\n \n from models import Person, RealPerson, Triple, FilePathModel, Article, \\\n     Publication, CustomFF, Author, Author1, Homepage, Document, Edition\n@@ -38,10 +39,10 @@ def test_multiple_field_unique_together(self):\n         Triple.objects.create(left=1, middle=2, right=3)\n \n         form = TripleForm({'left': '1', 'middle': '2', 'right': '3'})\n-        self.failIf(form.is_valid())\n+        self.assertFalse(form.is_valid())\n \n         form = TripleForm({'left': '1', 'middle': '3', 'right': '1'})\n-        self.failUnless(form.is_valid())\n+        self.assertTrue(form.is_valid())\n \n class TripleFormWithCleanOverride(forms.ModelForm):\n     class Meta:\n@@ -59,7 +60,7 @@ def test_override_clean(self):\n         optional.\n         \"\"\"\n         form = TripleFormWithCleanOverride({'left': 1, 'middle': 2, 'right': 1})\n-        self.failUnless(form.is_valid())\n+        self.assertTrue(form.is_valid())\n         # form.instance.left will be None if the instance was not constructed\n         # by form.full_clean().\n         self.assertEquals(form.instance.left, 1)"
        },
        {
            "sha": "6a2825fed9b5e0bc03c4097c46262e17bc2a0b31",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 10,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -1,23 +1,22 @@\n-import tempfile\n-import shutil\n import os\n-import sys\n import posixpath\n+import shutil\n+import sys\n+import tempfile\n from StringIO import StringIO\n \n-from django.test import TestCase\n from django.conf import settings\n from django.contrib.staticfiles import finders, storage\n-from django.core.files.storage import default_storage\n from django.core.exceptions import ImproperlyConfigured\n+from django.core.files.storage import default_storage\n from django.core.management import call_command\n from django.db.models.loading import load_app\n from django.template import Template, Context\n+from django.test import TestCase\n \n \n TEST_ROOT = os.path.dirname(__file__)\n \n-\n class StaticFilesTestCase(TestCase):\n     \"\"\"\n     Test case with a couple utility assertions.\n@@ -73,7 +72,7 @@ def tearDown(self):\n         settings.INSTALLED_APPS = self.old_installed_apps\n \n     def assertFileContains(self, filepath, text):\n-        self.failUnless(text in self._get_file(filepath),\n+        self.assertTrue(text in self._get_file(filepath),\n                         \"'%s' not in '%s'\" % (text, filepath))\n \n     def assertFileNotFound(self, filepath):\n@@ -178,8 +177,8 @@ def test_all_files(self):\n         finally:\n             sys.stdout = _stdout\n         self.assertEquals(len(lines), 3) # three because there is also the \"Found <file> here\" line\n-        self.failUnless('project' in lines[1])\n-        self.failUnless('apps' in lines[2])\n+        self.assertTrue('project' in lines[1])\n+        self.assertTrue('apps' in lines[2])\n \n \n class TestBuildStatic(BuildStaticTestCase, TestDefaults):\n@@ -252,7 +251,7 @@ def test_links_created(self):\n             With ``--link``, symbolic links are created.\n \n             \"\"\"\n-            self.failUnless(os.path.islink(os.path.join(settings.STATIC_ROOT, 'test.txt')))\n+            self.assertTrue(os.path.islink(os.path.join(settings.STATIC_ROOT, 'test.txt')))\n \n \n class TestServeStatic(StaticFilesTestCase):"
        },
        {
            "sha": "1281b91ad8e5bf441457f3b6479655639ea4d492",
            "filename": "tests/regressiontests/test_client_regress/models.py",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_client_regress%2Fmodels.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -3,15 +3,16 @@\n Regression tests for the Test Client, especially the customized assertions.\n \"\"\"\n import os\n-from django.conf import settings\n \n-from django.test import Client, TestCase\n-from django.test.utils import ContextList\n-from django.core.urlresolvers import reverse\n+from django.conf import settings\n from django.core.exceptions import SuspiciousOperation\n-from django.template import TemplateDoesNotExist, TemplateSyntaxError, Context, Template\n-from django.template import loader\n+from django.core.urlresolvers import reverse\n+from django.template import (TemplateDoesNotExist, TemplateSyntaxError,\n+    Context, Template, loader)\n+from django.test import Client, TestCase\n from django.test.client import encode_file\n+from django.test.utils import ContextList\n+\n \n class AssertContainsTests(TestCase):\n     def setUp(self):\n@@ -484,7 +485,7 @@ def test_login_different_client(self):\n         # Create a second client, and log in.\n         c = Client()\n         login = c.login(username='testclient', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n \n         # Get a redirection page with the second client.\n         response = c.get(\"/test_client_regress/login_protected_redirect_view/\")\n@@ -508,7 +509,7 @@ def tearDown(self):\n     def test_login(self):\n         \"A session engine that modifies the session key can be used to log in\"\n         login = self.client.login(username='testclient', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n \n         # Try to access a login protected page.\n         response = self.client.get(\"/test_client/login_protected_view/\")\n@@ -547,7 +548,7 @@ def test_exception_cleared(self):\n         \"#5836 - A stale user exception isn't re-raised by the test client.\"\n \n         login = self.client.login(username='testclient',password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n         try:\n             response = self.client.get(\"/test_client_regress/staff_only/\")\n             self.fail(\"General users should not be able to visit this page\")\n@@ -558,7 +559,7 @@ def test_exception_cleared(self):\n \n         # This next operation should be successful; if it isn't we have a problem.\n         login = self.client.login(username='staff', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n         try:\n             self.client.get(\"/test_client_regress/staff_only/\")\n         except SuspiciousOperation:\n@@ -670,7 +671,7 @@ def test_session(self):\n \n         # Log in\n         login = self.client.login(username='testclient',password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n \n         # Session should still contain the modified value\n         response = self.client.get('/test_client_regress/check_session/')\n@@ -681,7 +682,7 @@ def test_logout(self):\n         \"\"\"Logout should work whether the user is logged in or not (#9978).\"\"\"\n         self.client.logout()\n         login = self.client.login(username='testclient',password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n         self.client.logout()\n         self.client.logout()\n \n@@ -875,4 +876,3 @@ def test_response_template_data(self):\n     def test_response_no_template(self):\n         response = self.client.get(\"/test_client_regress/request_methods/\")\n         self.assertEqual(response.template, None)\n-"
        },
        {
            "sha": "4ebe37f558cda94eb5b3ed1ffa6a3a4d57ae8461",
            "filename": "tests/regressiontests/views/tests/debug.py",
            "status": "modified",
            "additions": 7,
            "deletions": 8,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fdebug.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -12,8 +12,8 @@ class DebugViewTests(TestCase):\n     def setUp(self):\n         self.old_debug = settings.DEBUG\n         settings.DEBUG = True\n-        self.old_template_debug = settings.TEMPLATE_DEBUG \n-        settings.TEMPLATE_DEBUG = True \n+        self.old_template_debug = settings.TEMPLATE_DEBUG\n+        settings.TEMPLATE_DEBUG = True\n \n     def tearDown(self):\n         settings.DEBUG = self.old_debug\n@@ -27,8 +27,8 @@ def test_files(self):\n             'file_data.txt': SimpleUploadedFile('file_data.txt', 'haha'),\n         }\n         response = self.client.post('/views/raises/', data)\n-        self.failUnless('file_data.txt' in response.content)\n-        self.failIf('haha' in response.content)\n+        self.assertTrue('file_data.txt' in response.content)\n+        self.assertFalse('haha' in response.content)\n \n     def test_404(self):\n         response = self.client.get('/views/raises404/')\n@@ -45,7 +45,6 @@ def test_template_exceptions(self):\n                 self.client.get(reverse('template_exception', args=(n,)))\n             except TemplateSyntaxError, e:\n                 raising_loc = inspect.trace()[-1][-2][0].strip()\n-                self.failIf(raising_loc.find('raise BrokenException') == -1,\n-                    \"Failed to find 'raise BrokenException' in last frame of traceback, instead found: %s\" % \n-                        raising_loc) \n-\n+                self.assertFalse(raising_loc.find('raise BrokenException') == -1,\n+                    \"Failed to find 'raise BrokenException' in last frame of traceback, instead found: %s\" %\n+                        raising_loc)"
        },
        {
            "sha": "4ba1c35c6fb427ebc244b3ea1d0faca74c00bac1",
            "filename": "tests/regressiontests/views/tests/generic/create_update.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fcreate_update.py",
            "raw_url": "https://github.com/django/django/raw/5bc0ec4ec4b7c888a291bc81b2edd72812231d96/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fcreate_update.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fgeneric%2Fcreate_update.py?ref=5bc0ec4ec4b7c888a291bc81b2edd72812231d96",
            "patch": "@@ -19,7 +19,7 @@ def test_login_required_view(self):\n         self.assertRedirects(response, '/accounts/login/?next=%s' % view_url)\n         # Now login and try again.\n         login = self.client.login(username='testclient', password='password')\n-        self.failUnless(login, 'Could not log in')\n+        self.assertTrue(login, 'Could not log in')\n         response = self.client.get(view_url)\n         self.assertEqual(response.status_code, 200)\n         self.assertTemplateUsed(response, 'views/article_form.html')"
        }
    ],
    "stats": {
        "total": 763,
        "additions": 385,
        "deletions": 378
    }
}