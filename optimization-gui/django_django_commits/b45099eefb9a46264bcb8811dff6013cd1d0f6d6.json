{
    "author": "jphalip",
    "message": "Fixed #17190 -- Ensured that the `NullBooleanSelect` widget's options get lazily localized. Thanks to pennersr for the report and to kenth for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17091 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "b45099eefb9a46264bcb8811dff6013cd1d0f6d6",
    "files": [
        {
            "sha": "8c1e20b1797602e1bfe918d4a6820c2739a1c8c7",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/b45099eefb9a46264bcb8811dff6013cd1d0f6d6/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/b45099eefb9a46264bcb8811dff6013cd1d0f6d6/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=b45099eefb9a46264bcb8811dff6013cd1d0f6d6",
            "patch": "@@ -552,7 +552,9 @@ class NullBooleanSelect(Select):\n     A Select Widget intended to be used with NullBooleanField.\n     \"\"\"\n     def __init__(self, attrs=None):\n-        choices = ((u'1', ugettext('Unknown')), (u'2', ugettext('Yes')), (u'3', ugettext('No')))\n+        choices = ((u'1', ugettext_lazy('Unknown')),\n+                   (u'2', ugettext_lazy('Yes')),\n+                   (u'3', ugettext_lazy('No')))\n         super(NullBooleanSelect, self).__init__(attrs, choices)\n \n     def render(self, name, value, attrs=None, choices=()):"
        },
        {
            "sha": "b567ea370ed1acaa661f8fe79d209d78d6d9b8c4",
            "filename": "tests/regressiontests/forms/tests/widgets.py",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/b45099eefb9a46264bcb8811dff6013cd1d0f6d6/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/b45099eefb9a46264bcb8811dff6013cd1d0f6d6/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py?ref=b45099eefb9a46264bcb8811dff6013cd1d0f6d6",
            "patch": "@@ -984,6 +984,10 @@ def test_splithiddendatetime(self):\n         self.assertEqual(w.render('date', datetime.datetime(2007, 9, 17, 12, 51)), u'<input type=\"hidden\" name=\"date_0\" value=\"2007-09-17\" /><input type=\"hidden\" name=\"date_1\" value=\"12:51:00\" />')\n \n \n+class NullBooleanSelectLazyForm(Form):\n+    \"\"\"Form to test for lazy evaluation. Refs #17190\"\"\"\n+    bool = BooleanField(widget=NullBooleanSelect())\n+\n class FormsI18NWidgetsTestCase(TestCase):\n     def setUp(self):\n         super(FormsI18NWidgetsTestCase, self).setUp()\n@@ -1025,6 +1029,15 @@ def test_splithiddendatetime(self):\n         w.is_localized = True\n         self.assertEqual(w.render('date', datetime.datetime(2007, 9, 17, 12, 51)), u'<input type=\"hidden\" name=\"date_0\" value=\"17.09.2007\" /><input type=\"hidden\" name=\"date_1\" value=\"12:51:00\" />')\n \n+    def test_nullbooleanselect(self):\n+        \"\"\"\n+        Ensure that the NullBooleanSelect widget's options are lazily\n+        localized.\n+        Refs #17190\n+        \"\"\"\n+        f = NullBooleanSelectLazyForm()\n+        self.assertEqual(f.fields['bool'].widget.render('id_bool', True), u'<select name=\"id_bool\">\\n<option value=\"1\">Unbekannt</option>\\n<option value=\"2\" selected=\"selected\">Ja</option>\\n<option value=\"3\">Nein</option>\\n</select>')\n+\n \n class SelectAndTextWidget(MultiWidget):\n     \"\"\""
        }
    ],
    "stats": {
        "total": 17,
        "additions": 16,
        "deletions": 1
    }
}