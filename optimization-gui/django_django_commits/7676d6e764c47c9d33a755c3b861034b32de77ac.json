{
    "author": "claudep",
    "message": "Made sitemaps tests use override_settings. Refs #14478",
    "sha": "7676d6e764c47c9d33a755c3b861034b32de77ac",
    "files": [
        {
            "sha": "224277e2a0ada1e8b2ad8f4e0f1c0424c6ece4ba",
            "filename": "django/contrib/sitemaps/tests/base.py",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/7676d6e764c47c9d33a755c3b861034b32de77ac/django%2Fcontrib%2Fsitemaps%2Ftests%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/7676d6e764c47c9d33a755c3b861034b32de77ac/django%2Fcontrib%2Fsitemaps%2Ftests%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsitemaps%2Ftests%2Fbase.py?ref=7676d6e764c47c9d33a755c3b861034b32de77ac",
            "patch": "@@ -1,6 +1,3 @@\n-import os\n-\n-from django.conf import settings\n from django.contrib.auth.models import User\n from django.contrib.sites.models import Site\n from django.test import TestCase\n@@ -13,16 +10,9 @@ class SitemapTestsBase(TestCase):\n \n     def setUp(self):\n         self.base_url = '%s://%s' % (self.protocol, self.domain)\n-        self.old_USE_L10N = settings.USE_L10N\n-        self.old_TEMPLATE_DIRS = settings.TEMPLATE_DIRS\n-        settings.TEMPLATE_DIRS = (\n-            os.path.join(os.path.dirname(__file__), 'templates'),\n-        )\n         self.old_Site_meta_installed = Site._meta.installed\n         # Create a user that will double as sitemap content\n         User.objects.create_user('testuser', 'test@example.com', 's3krit')\n \n     def tearDown(self):\n-        settings.USE_L10N = self.old_USE_L10N\n-        settings.TEMPLATE_DIRS = self.old_TEMPLATE_DIRS\n         Site._meta.installed = self.old_Site_meta_installed"
        },
        {
            "sha": "5786aa48d577e8523390840d62e3fddcbe6a9604",
            "filename": "django/contrib/sitemaps/tests/http.py",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/7676d6e764c47c9d33a755c3b861034b32de77ac/django%2Fcontrib%2Fsitemaps%2Ftests%2Fhttp.py",
            "raw_url": "https://github.com/django/django/raw/7676d6e764c47c9d33a755c3b861034b32de77ac/django%2Fcontrib%2Fsitemaps%2Ftests%2Fhttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsitemaps%2Ftests%2Fhttp.py?ref=7676d6e764c47c9d33a755c3b861034b32de77ac",
            "patch": "@@ -1,15 +1,19 @@\n+import os\n from datetime import date\n+\n from django.conf import settings\n from django.contrib.auth.models import User\n from django.contrib.sitemaps import Sitemap, GenericSitemap\n from django.contrib.sites.models import Site\n from django.core.exceptions import ImproperlyConfigured\n+from django.test.utils import override_settings\n from django.utils.unittest import skipUnless\n from django.utils.formats import localize\n from django.utils.translation import activate, deactivate\n \n from .base import SitemapTestsBase\n \n+\n class HTTPSitemapTests(SitemapTestsBase):\n \n     def test_simple_sitemap_index(self):\n@@ -21,6 +25,9 @@ def test_simple_sitemap_index(self):\n </sitemapindex>\n \"\"\" % self.base_url)\n \n+    @override_settings(\n+        TEMPLATE_DIRS=(os.path.join(os.path.dirname(__file__), 'templates'),)\n+    )\n     def test_simple_sitemap_custom_index(self):\n         \"A simple sitemap index can be rendered with a custom template\"\n         response = self.client.get('/simple/custom-index.xml')\n@@ -49,6 +56,9 @@ def test_simple_sitemap(self):\n </urlset>\n \"\"\" % (self.base_url, date.today()))\n \n+    @override_settings(\n+        TEMPLATE_DIRS=(os.path.join(os.path.dirname(__file__), 'templates'),)\n+    )\n     def test_simple_custom_sitemap(self):\n         \"A simple sitemap can be rendered with a custom template\"\n         response = self.client.get('/simple/custom-sitemap.xml')\n@@ -60,10 +70,9 @@ def test_simple_custom_sitemap(self):\n \"\"\" % (self.base_url, date.today()))\n \n     @skipUnless(settings.USE_I18N, \"Internationalization is not enabled\")\n+    @override_settings(USE_L10N=True)\n     def test_localized_priority(self):\n         \"The priority value should not be localized (Refs #14164)\"\n-        # Localization should be active\n-        settings.USE_L10N = True\n         activate('fr')\n         self.assertEqual(u'0,3', localize(0.3))\n "
        }
    ],
    "stats": {
        "total": 23,
        "additions": 11,
        "deletions": 12
    }
}