{
    "author": "andrewgodwin",
    "message": "Reverting [16376] in preparation for reverting [16356]. See #16182.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16425 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "222a5ed69e174e6b7b123c1101744e18aa372a4a",
    "files": [
        {
            "sha": "74c7e822b4aba38e11235464b289cdb9258f56c9",
            "filename": "django/contrib/formtools/wizard/tests/cookiestoragetests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 10,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/222a5ed69e174e6b7b123c1101744e18aa372a4a/django%2Fcontrib%2Fformtools%2Fwizard%2Ftests%2Fcookiestoragetests.py",
            "raw_url": "https://github.com/django/django/raw/222a5ed69e174e6b7b123c1101744e18aa372a4a/django%2Fcontrib%2Fformtools%2Fwizard%2Ftests%2Fcookiestoragetests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Fwizard%2Ftests%2Fcookiestoragetests.py?ref=222a5ed69e174e6b7b123c1101744e18aa372a4a",
            "patch": "@@ -25,7 +25,6 @@ def test_manipulated_cookie(self):\n         self.assertRaises(SuspiciousOperation, storage.load_data)\n \n     def test_reset_cookie(self):\n-        from django.core.signing import SignatureExpired\n         request = get_request()\n         storage = self.get_storage()('wizard1', request, None)\n \n@@ -36,15 +35,7 @@ def test_reset_cookie(self):\n \n         cookie_signer = signing.get_cookie_signer(storage.prefix)\n         signed_cookie_data = cookie_signer.sign(storage.encoder.encode(storage.data))\n-\n-        # signing with different timestamps generates different signatures\n-        self.assertNotEqual(response.cookies[storage.prefix].value, signed_cookie_data)\n-        self.assertEqual(cookie_signer.unsign(response.cookies[storage.prefix].value),\n-                         cookie_signer.unsign(signed_cookie_data))\n-        self.assertRaises(SignatureExpired,\n-                          lambda: cookie_signer.unsign(value=response.cookies[storage.prefix].value, max_age=0))\n-        self.assertEqual(cookie_signer.unsign(value=response.cookies[storage.prefix].value, max_age=10),\n-                         cookie_signer.unsign(signed_cookie_data))\n+        self.assertEqual(response.cookies[storage.prefix].value, signed_cookie_data)\n \n         storage.init_data()\n         storage.update_response(response)"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 1,
        "deletions": 10
    }
}