{
    "author": "alex",
    "message": "Converted the modeladmin tests to run on python 2 and 3.",
    "sha": "cca01c96d18f72cfc156ccfade769735b9de4f98",
    "files": [
        {
            "sha": "d55d50d0a5cde14c055adaee0961a730dfb9bc82",
            "filename": "tests/regressiontests/modeladmin/tests.py",
            "status": "modified",
            "additions": 29,
            "deletions": 29,
            "changes": 58,
            "blob_url": "https://github.com/django/django/blob/cca01c96d18f72cfc156ccfade769735b9de4f98/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/cca01c96d18f72cfc156ccfade769735b9de4f98/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py?ref=cca01c96d18f72cfc156ccfade769735b9de4f98",
            "patch": "@@ -5,7 +5,7 @@\n from django import forms\n from django.conf import settings\n from django.contrib.admin.options import (ModelAdmin, TabularInline,\n-     InlineModelAdmin, HORIZONTAL, VERTICAL)\n+     HORIZONTAL, VERTICAL)\n from django.contrib.admin.sites import AdminSite\n from django.contrib.admin.validation import validate\n from django.contrib.admin.widgets import AdminDateWidget, AdminRadioSelect\n@@ -15,7 +15,7 @@\n from django.forms.models import BaseModelFormSet\n from django.forms.widgets import Select\n from django.test import TestCase\n-from django.test.utils import override_settings, str_prefix\n+from django.test.utils import str_prefix\n from django.utils import unittest\n \n from .models import Band, Concert, ValidationTestModel, ValidationTestInlineModel\n@@ -24,6 +24,7 @@\n class MockRequest(object):\n     pass\n \n+\n class MockSuperUser(object):\n     def has_perm(self, perm):\n         return True\n@@ -47,7 +48,7 @@ def setUp(self):\n     def test_default_fields(self):\n         ma = ModelAdmin(Band, self.site)\n \n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n             ['name', 'bio', 'sign_date'])\n \n     def test_default_fieldsets(self):\n@@ -72,7 +73,7 @@ class BandAdmin(ModelAdmin):\n \n         ma = BandAdmin(Band, self.site)\n \n-        self.assertEqual( ma.get_fieldsets(request),\n+        self.assertEqual(ma.get_fieldsets(request),\n             [(None, {'fields': ['name']})])\n \n         self.assertEqual(ma.get_fieldsets(request, self.band),\n@@ -90,33 +91,33 @@ class BandAdmin(ModelAdmin):\n             fields = ['name']\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(), ['name'])\n-        self.assertEqual(ma.get_form(request, self.band).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields), ['name'])\n+        self.assertEqual(list(ma.get_form(request, self.band).base_fields),\n             ['name'])\n \n         # Using `fieldsets`.\n         class BandAdmin(ModelAdmin):\n             fieldsets = [(None, {'fields': ['name']})]\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(), ['name'])\n-        self.assertEqual(ma.get_form(request, self.band).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields), ['name'])\n+        self.assertEqual(list(ma.get_form(request, self.band).base_fields),\n             ['name'])\n \n         # Using `exclude`.\n         class BandAdmin(ModelAdmin):\n             exclude = ['bio']\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n             ['name', 'sign_date'])\n \n         # You can also pass a tuple to `exclude`.\n         class BandAdmin(ModelAdmin):\n             exclude = ('bio',)\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n             ['name', 'sign_date'])\n \n         # Using `fields` and `exclude`.\n@@ -125,7 +126,7 @@ class BandAdmin(ModelAdmin):\n             exclude = ['bio']\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n             ['name'])\n \n     def test_custom_form_meta_exclude_with_readonly(self):\n@@ -148,8 +149,8 @@ class BandAdmin(ModelAdmin):\n             form = AdminBandForm\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n-            ['sign_date',])\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n+            ['sign_date'])\n \n         # Then, with `InlineModelAdmin`  -----------------\n \n@@ -172,8 +173,8 @@ class BandAdmin(ModelAdmin):\n \n         ma = BandAdmin(Band, self.site)\n         self.assertEqual(\n-            list(ma.get_formsets(request))[0]().forms[0].fields.keys(),\n-            ['main_band', 'opening_band', 'id', 'DELETE',])\n+            list(list(ma.get_formsets(request))[0]().forms[0].fields),\n+            ['main_band', 'opening_band', 'id', 'DELETE'])\n \n     def test_custom_form_meta_exclude(self):\n         \"\"\"\n@@ -194,8 +195,8 @@ class BandAdmin(ModelAdmin):\n             form = AdminBandForm\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n-            ['bio', 'sign_date',])\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n+            ['bio', 'sign_date'])\n \n         # Then, with `InlineModelAdmin`  -----------------\n \n@@ -218,8 +219,8 @@ class BandAdmin(ModelAdmin):\n \n         ma = BandAdmin(Band, self.site)\n         self.assertEqual(\n-            list(ma.get_formsets(request))[0]().forms[0].fields.keys(),\n-            ['main_band', 'opening_band', 'day', 'id', 'DELETE',])\n+            list(list(ma.get_formsets(request))[0]().forms[0].fields),\n+            ['main_band', 'opening_band', 'day', 'id', 'DELETE'])\n \n     def test_custom_form_validation(self):\n         # If we specify a form, it should use it allowing custom validation to work\n@@ -235,7 +236,7 @@ class BandAdmin(ModelAdmin):\n             form = AdminBandForm\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n             ['name', 'bio', 'sign_date', 'delete'])\n \n         self.assertEqual(\n@@ -255,17 +256,16 @@ class Meta:\n                 exclude = ['name']\n \n         class BandAdmin(ModelAdmin):\n-            exclude = ['sign_date',]\n+            exclude = ['sign_date']\n             form = AdminBandForm\n \n             def get_form(self, request, obj=None, **kwargs):\n                 kwargs['exclude'] = ['bio']\n                 return super(BandAdmin, self).get_form(request, obj, **kwargs)\n \n         ma = BandAdmin(Band, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n-            ['name', 'sign_date',])\n-\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n+            ['name', 'sign_date'])\n \n     def test_formset_exclude_kwarg_override(self):\n         \"\"\"\n@@ -296,8 +296,8 @@ class BandAdmin(ModelAdmin):\n \n         ma = BandAdmin(Band, self.site)\n         self.assertEqual(\n-            list(ma.get_formsets(request))[0]().forms[0].fields.keys(),\n-            ['main_band', 'day', 'transport', 'id', 'DELETE',])\n+            list(list(ma.get_formsets(request))[0]().forms[0].fields),\n+            ['main_band', 'day', 'transport', 'id', 'DELETE'])\n \n     def test_queryset_override(self):\n         # If we need to override the queryset of a ModelChoiceField in our custom form\n@@ -461,7 +461,7 @@ class ConcertAdmin(ModelAdmin):\n             form = AdminConcertForm\n \n         ma = ConcertAdmin(Concert, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n             ['main_band', 'opening_band', 'day'])\n \n         class AdminConcertForm(forms.ModelForm):\n@@ -475,7 +475,7 @@ class ConcertAdmin(ModelAdmin):\n             form = AdminConcertForm\n \n         ma = ConcertAdmin(Concert, self.site)\n-        self.assertEqual(ma.get_form(request).base_fields.keys(),\n+        self.assertEqual(list(ma.get_form(request).base_fields),\n             ['extra', 'transport'])\n \n         class ConcertInline(TabularInline):\n@@ -491,7 +491,7 @@ class BandAdmin(ModelAdmin):\n \n         ma = BandAdmin(Band, self.site)\n         self.assertEqual(\n-            list(ma.get_formsets(request))[0]().forms[0].fields.keys(),\n+            list(list(ma.get_formsets(request))[0]().forms[0].fields),\n             ['extra', 'transport', 'id', 'DELETE', 'main_band'])\n \n "
        }
    ],
    "stats": {
        "total": 58,
        "additions": 29,
        "deletions": 29
    }
}