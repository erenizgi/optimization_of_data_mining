{
    "author": "aaugustin",
    "message": "Fixed #17513 -- Prevented the MySQL backend from leaking MySQLdb-specific exceptions. Thanks Claude Paroz.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17352 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ca187fea88b626508e125e0843c991fe63f8ed95",
    "files": [
        {
            "sha": "02bdda199b76e2699b0cca884ead120b933909a8",
            "filename": "django/db/backends/mysql/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ca187fea88b626508e125e0843c991fe63f8ed95/django%2Fdb%2Fbackends%2Fmysql%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/ca187fea88b626508e125e0843c991fe63f8ed95/django%2Fdb%2Fbackends%2Fmysql%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fmysql%2Fbase.py?ref=ca187fea88b626508e125e0843c991fe63f8ed95",
            "patch": "@@ -119,7 +119,7 @@ def executemany(self, query, args):\n             # misclassified and Django would prefer the more logical place.\n             if e[0] in self.codes_for_integrityerror:\n                 raise utils.IntegrityError, utils.IntegrityError(*tuple(e)), sys.exc_info()[2]\n-            raise\n+            raise utils.DatabaseError, utils.DatabaseError(*tuple(e)), sys.exc_info()[2]\n         except Database.DatabaseError, e:\n             raise utils.DatabaseError, utils.DatabaseError(*tuple(e)), sys.exc_info()[2]\n "
        },
        {
            "sha": "436da8c2d037a313f0fff61ccfee65b13ad77acd",
            "filename": "tests/regressiontests/backends/tests.py",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ca187fea88b626508e125e0843c991fe63f8ed95/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ca187fea88b626508e125e0843c991fe63f8ed95/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbackends%2Ftests.py?ref=ca187fea88b626508e125e0843c991fe63f8ed95",
            "patch": "@@ -351,6 +351,12 @@ def test_database_operations_helper_class(self):\n         self.assertTrue(hasattr(connection.ops, 'connection'))\n         self.assertEqual(connection, connection.ops.connection)\n \n+    def test_duplicate_table_error(self):\n+        \"\"\" Test that creating an existing table returns a DatabaseError \"\"\"\n+        cursor = connection.cursor()\n+        query = 'CREATE TABLE %s (id INTEGER);' % models.Article._meta.db_table\n+        with self.assertRaises(DatabaseError):\n+            cursor.execute(query)\n \n # We don't make these tests conditional because that means we would need to\n # check and differentiate between:"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 7,
        "deletions": 1
    }
}