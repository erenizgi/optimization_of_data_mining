{
    "author": "charettes",
    "message": "Fixed #20010 -- Make sure `last_executed_query` contains it's associated parameters on Oracle.\n\nAlso removed some unused imports.",
    "sha": "bc7a10299f7ad7f468fa78d5990b7b545d4d599d",
    "files": [
        {
            "sha": "6309088c4cf51c5252070a2980caf0abd2e1c472",
            "filename": "django/db/backends/oracle/base.py",
            "status": "modified",
            "additions": 7,
            "deletions": 10,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/bc7a10299f7ad7f468fa78d5990b7b545d4d599d/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/bc7a10299f7ad7f468fa78d5990b7b545d4d599d/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fbase.py?ref=bc7a10299f7ad7f468fa78d5990b7b545d4d599d",
            "patch": "@@ -5,7 +5,6 @@\n \"\"\"\n from __future__ import unicode_literals\n \n-import datetime\n import decimal\n import re\n import sys\n@@ -45,16 +44,13 @@ def _setup_environment(environ):\n     from django.core.exceptions import ImproperlyConfigured\n     raise ImproperlyConfigured(\"Error loading cx_Oracle module: %s\" % e)\n \n-from django.conf import settings\n from django.db import utils\n from django.db.backends import *\n from django.db.backends.oracle.client import DatabaseClient\n from django.db.backends.oracle.creation import DatabaseCreation\n from django.db.backends.oracle.introspection import DatabaseIntrospection\n from django.utils.encoding import force_bytes, force_text\n-from django.utils.functional import cached_property\n-from django.utils import six\n-from django.utils import timezone\n+\n \n DatabaseError = Database.DatabaseError\n IntegrityError = Database.IntegrityError\n@@ -267,11 +263,12 @@ def field_cast_sql(self, db_type):\n     def last_executed_query(self, cursor, sql, params):\n         # http://cx-oracle.sourceforge.net/html/cursor.html#Cursor.statement\n         # The DB API definition does not define this attribute.\n-        if six.PY3:\n-            return cursor.statement\n-        else:\n-            query = cursor.statement\n-            return query if isinstance(query, unicode) else query.decode(\"utf-8\")\n+        statement = cursor.statement\n+        if not six.PY3 and not isinstance(statement, unicode):\n+            statement = statement.decode('utf-8')\n+        # Unlike Psycopg's `query` and MySQLdb`'s `_last_executed`, CxOracle's\n+        # `statement` doesn't contain the query parameters. refs #20010.\n+        return super(DatabaseOperations, self).last_executed_query(cursor, statement, params)\n \n     def last_insert_id(self, cursor, table_name, pk_name):\n         sq_name = self._get_sequence_name(table_name)"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 7,
        "deletions": 10
    }
}