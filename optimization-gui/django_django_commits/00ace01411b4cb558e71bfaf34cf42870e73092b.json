{
    "author": "aaugustin",
    "message": "[py3] Documented coding guidelines for Python 3.",
    "sha": "00ace01411b4cb558e71bfaf34cf42870e73092b",
    "files": [
        {
            "sha": "39a280e464c5a44709d237d4e2ac39f12cd95faf",
            "filename": "docs/conf.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/00ace01411b4cb558e71bfaf34cf42870e73092b/docs%2Fconf.py",
            "raw_url": "https://github.com/django/django/raw/00ace01411b4cb558e71bfaf34cf42870e73092b/docs%2Fconf.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fconf.py?ref=00ace01411b4cb558e71bfaf34cf42870e73092b",
            "patch": "@@ -94,6 +94,7 @@\n intersphinx_mapping = {\n     'python': ('http://docs.python.org/2.7', None),\n     'sphinx': ('http://sphinx.pocoo.org/', None),\n+    'six': ('http://packages.python.org/six/', None),\n }\n \n # Python's docs don't change every week."
        },
        {
            "sha": "cfa38d9bec6df17d01a81f5f6d7a08f570ba6bcc",
            "filename": "docs/topics/python3.txt",
            "status": "modified",
            "additions": 98,
            "deletions": 25,
            "changes": 123,
            "blob_url": "https://github.com/django/django/blob/00ace01411b4cb558e71bfaf34cf42870e73092b/docs%2Ftopics%2Fpython3.txt",
            "raw_url": "https://github.com/django/django/raw/00ace01411b4cb558e71bfaf34cf42870e73092b/docs%2Ftopics%2Fpython3.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fpython3.txt?ref=00ace01411b4cb558e71bfaf34cf42870e73092b",
            "patch": "@@ -2,42 +2,34 @@\n Python 3 compatibility\n ======================\n \n-Django 1.5 is the first version of Django to support Python 3.\n-\n-The same code runs both on Python 2 (≥2.6.5) and Python 3 (≥3.2). To\n-achieve this:\n-\n-- wherever possible, Django uses the six_ compatibility layer,\n-- all modules declare ``from __future__ import unicode_literals``.\n+Django 1.5 is the first version of Django to support Python 3. The same code\n+runs both on Python 2 (≥ 2.6.5) and Python 3 (≥ 3.2), thanks to the six_\n+compatibility layer and ``unicode_literals``.\n \n .. _six: http://packages.python.org/six/\n \n This document is not meant as a Python 2 to Python 3 migration guide. There\n-are many existing resources, including `Python's official porting guide`_. But\n-it describes guidelines that apply to Django's code and are recommended for\n-pluggable apps that run with both Python 2 and 3.\n+are many existing resources, including `Python's official porting guide`_.\n+Rather, it describes guidelines that apply to Django's code and are\n+recommended for pluggable apps that run with both Python 2 and 3.\n \n .. _Python's official porting guide: http://docs.python.org/py3k/howto/pyporting.html\n \n-.. module: django.utils.six\n-\n-django.utils.six\n-================\n-\n-Read the documentation of six_. It's the canonical compatibility library for\n-supporting Python 2 and 3 in a single codebase.\n+Syntax requirements\n+===================\n \n-``six`` is bundled with Django: you can import it as :mod:`django.utils.six`.\n+Unicode\n+-------\n \n-.. _string-handling:\n+In Python 3, all strings are considered Unicode by default. The ``unicode``\n+type from Python 2 is called ``str`` in Python 3, and ``str`` becomes\n+``bytes``.\n \n-String handling\n-===============\n+You mustn't use the ``u`` prefix before a unicode string literal because it's\n+a syntax error in Python 3.2. You must prefix byte strings with ``b``.\n \n-In Python 3, all strings are considered Unicode strings by default. Byte\n-strings must be prefixed with the letter ``b``. In order to enable the same\n-behavior in Python 2, every module must import ``unicode_literals`` from\n-``__future__``::\n+In order to enable the same behavior in Python 2, every module must import\n+``unicode_literals`` from ``__future__``::\n \n     from __future__ import unicode_literals\n \n@@ -47,3 +39,84 @@ behavior in Python 2, every module must import ``unicode_literals`` from\n Be cautious if you have to `slice bytestrings`_.\n \n .. _slice bytestrings: http://docs.python.org/py3k/howto/pyporting.html#bytes-literals\n+\n+Exceptions\n+----------\n+\n+When you capture exceptions, use the ``as`` keyword::\n+\n+    try:\n+        ...\n+    except MyException as exc:\n+        ...\n+\n+This older syntax was removed in Python 3::\n+\n+    try:\n+        ...\n+    except MyException, exc:\n+        ...\n+\n+The syntax to reraise an exception with a different traceback also changed.\n+Use :func:`six.reraise`.\n+\n+\n+.. module: django.utils.six\n+\n+Writing compatible code with six\n+================================\n+\n+six is the canonical compatibility library for supporting Python 2 and 3 in\n+a single codebase. Read its `documentation <six>`_!\n+\n+:mod:`six` is bundled with Django: you can import it as :mod:`django.utils.six`.\n+\n+Here are the most common changes required to write compatible code.\n+\n+String types\n+------------\n+\n+The ``basestring`` and ``unicode`` types were removed in Python 3, and the\n+meaning of ``str`` changed. To test these types, use the following idioms::\n+\n+    isinstance(myvalue, six.string_types)       # replacement for basestring\n+    isinstance(myvalue, six.text_type)          # replacement for unicode\n+    isinstance(myvalue, bytes)                  # replacement for str\n+\n+Python ≥ 2.6 provides ``bytes`` as an alias for ``str``, so you don't need\n+:attr:`six.binary_type`.\n+\n+``long``\n+--------\n+\n+The ``long`` type no longer exists in Python 3. ``1L`` is a syntax error. Use\n+:data:`six.integer_types` check if a value is an integer or a long::\n+\n+    isinstance(myvalue, six.integer_types)      # replacement for (int, long)\n+\n+``xrange``\n+----------\n+\n+Import :func:`six.moves.xrange` wherever you use ``xrange``.\n+\n+Moved modules\n+-------------\n+\n+Some modules were renamed in Python 3. The :mod:`django.utils.six.moves\n+<six.moves>` module provides a compatible location to import them.\n+\n+In addition to six' defaults, Django's version provides ``dummy_thread`` as\n+``_dummy_thread``.\n+\n+PY3\n+---\n+\n+If you need different code in Python 2 and Python 3, check :data:`six.PY3`::\n+\n+    if six.PY3:\n+        # do stuff Python 3-wise\n+    else:\n+        # do stuff Python 2-wise\n+\n+This is a last resort solution when :mod:`six` doesn't provide an appropriate\n+function."
        }
    ],
    "stats": {
        "total": 124,
        "additions": 99,
        "deletions": 25
    }
}