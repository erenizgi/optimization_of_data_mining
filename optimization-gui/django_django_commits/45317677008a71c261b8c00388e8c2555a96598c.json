{
    "author": "spookylukey",
    "message": "Fixed auth context processor tests, which were not running at all previously.\n\nIt seems they were accidentally disabled following being moved from\nregressiontests in [15990]\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16304 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "45317677008a71c261b8c00388e8c2555a96598c",
    "files": [
        {
            "sha": "a7cc00450795c14026307f67ad6af16bb8f0a57d",
            "filename": "django/contrib/auth/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "patch": "@@ -2,6 +2,7 @@\n     RowlevelBackendTest, AnonymousUserBackendTest, NoAnonymousUserBackendTest,\n     NoBackendsTest, InActiveUserBackendTest, NoInActiveUserBackendTest)\n from django.contrib.auth.tests.basic import BasicTestCase\n+from django.contrib.auth.tests.context_processors import AuthContextProcessorTests\n from django.contrib.auth.tests.decorators import LoginRequiredTestCase\n from django.contrib.auth.tests.forms import (UserCreationFormTest,\n     AuthenticationFormTest, SetPasswordFormTest, PasswordChangeFormTest,"
        },
        {
            "sha": "49172c60e0ccae3e2b80a40791737a639630e125",
            "filename": "django/contrib/auth/tests/context_processors.py",
            "status": "modified",
            "additions": 15,
            "deletions": 4,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Fcontext_processors.py",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Fcontext_processors.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fcontext_processors.py?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "patch": "@@ -1,16 +1,27 @@\n-# from django.conf import settings\n+import os\n+\n+from django.conf import settings\n from django.contrib.auth import authenticate\n from django.db.models import Q\n from django.test import TestCase\n-# from django.template import Template\n+\n \n class AuthContextProcessorTests(TestCase):\n     \"\"\"\n     Tests for the ``django.contrib.auth.context_processors.auth`` processor\n     \"\"\"\n-    urls = 'regressiontests.context_processors.urls'\n+    urls = 'django.contrib.auth.tests.urls'\n     fixtures = ['context-processors-users.xml']\n \n+    def setUp(self):\n+        self.old_TEMPLATE_DIRS = settings.TEMPLATE_DIRS\n+        settings.TEMPLATE_DIRS = (\n+            os.path.join(os.path.dirname(__file__), 'templates'),\n+        )\n+\n+    def tearDown(self):\n+        settings.TEMPLATE_DIRS = self.old_TEMPLATE_DIRS\n+\n     def test_session_not_accessed(self):\n         \"\"\"\n         Tests that the session is not accessed simply by including\n@@ -74,4 +85,4 @@ def test_user_attrs(self):\n         # equality in a non-duck-typing way\n         # See bug #12060\n         self.assertEqual(response.context['user'], user)\n-        self.assertEqual(user, response.context['user'])\n\\ No newline at end of file\n+        self.assertEqual(user, response.context['user'])"
        },
        {
            "sha": "b5c65db28dfab60787f6546dbded497564e28bf6",
            "filename": "django/contrib/auth/tests/templates/context_processors/auth_attrs_access.html",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_access.html",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_access.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_access.html?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "previous_filename": "tests/regressiontests/context_processors/templates/context_processors/auth_attrs_access.html"
        },
        {
            "sha": "7b7e448ad2f71901b9ff35b025d6b99bf73a12ba",
            "filename": "django/contrib/auth/tests/templates/context_processors/auth_attrs_messages.html",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_messages.html",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_messages.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_messages.html?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "previous_filename": "tests/regressiontests/context_processors/templates/context_processors/auth_attrs_messages.html"
        },
        {
            "sha": "8d1c8b69c3fce7bea45c73efd06983e3c419a92f",
            "filename": "django/contrib/auth/tests/templates/context_processors/auth_attrs_no_access.html",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_no_access.html",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_no_access.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_no_access.html?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "previous_filename": "tests/regressiontests/context_processors/templates/context_processors/auth_attrs_no_access.html"
        },
        {
            "sha": "a5db868e9e5b78c5193543dab287d09f4dcd5ad6",
            "filename": "django/contrib/auth/tests/templates/context_processors/auth_attrs_perms.html",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_perms.html",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_perms.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_perms.html?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "previous_filename": "tests/regressiontests/context_processors/templates/context_processors/auth_attrs_perms.html"
        },
        {
            "sha": "a28ff937f8848bf8e6194a01a27e3445aefbb78b",
            "filename": "django/contrib/auth/tests/templates/context_processors/auth_attrs_test_access.html",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_test_access.html",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_test_access.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_test_access.html?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "previous_filename": "tests/regressiontests/context_processors/templates/context_processors/auth_attrs_test_access.html"
        },
        {
            "sha": "5df2a344cc8ae0badf6fc0731aa67416b22abdd2",
            "filename": "django/contrib/auth/tests/templates/context_processors/auth_attrs_user.html",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_user.html",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_user.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Ftemplates%2Fcontext_processors%2Fauth_attrs_user.html?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "previous_filename": "tests/regressiontests/context_processors/templates/context_processors/auth_attrs_user.html"
        },
        {
            "sha": "4445a9c014999b3afe0c9ca3ff1f5d277ecd66a1",
            "filename": "django/contrib/auth/tests/urls.py",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/45317677008a71c261b8c00388e8c2555a96598c/django%2Fcontrib%2Fauth%2Ftests%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Furls.py?ref=45317677008a71c261b8c00388e8c2555a96598c",
            "patch": "@@ -1,8 +1,11 @@\n from django.conf.urls.defaults import patterns, url\n+from django.contrib.auth import context_processors\n from django.contrib.auth.urls import urlpatterns\n from django.contrib.auth.views import password_reset\n from django.contrib.auth.decorators import login_required\n+from django.contrib.messages.api import info\n from django.http import HttpResponse\n+from django.shortcuts import render_to_response\n from django.template import Template, RequestContext\n from django.views.decorators.cache import never_cache\n \n@@ -35,7 +38,7 @@ def auth_processor_perms(request):\n         RequestContext(request, {}, processors=[context_processors.auth]))\n \n def auth_processor_messages(request):\n-    request.user.message_set.create(message=\"Message 1\")\n+    info(request, \"Message 1\")\n     return render_to_response('context_processors/auth_attrs_messages.html',\n          RequestContext(request, {}, processors=[context_processors.auth]))\n "
        }
    ],
    "stats": {
        "total": 25,
        "additions": 20,
        "deletions": 5
    }
}