{
    "author": "claudep",
    "message": "[py3] Pass bytes to md5 in truncate_name",
    "sha": "187ec5a1664377337afdc9c701307717ab80ab9e",
    "files": [
        {
            "sha": "9d70248ebf68403a230274989041fbf9e0f15b4b",
            "filename": "django/db/backends/util.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/187ec5a1664377337afdc9c701307717ab80ab9e/django%2Fdb%2Fbackends%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/187ec5a1664377337afdc9c701307717ab80ab9e/django%2Fdb%2Fbackends%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Futil.py?ref=187ec5a1664377337afdc9c701307717ab80ab9e",
            "patch": "@@ -6,6 +6,7 @@\n from time import time\n \n from django.conf import settings\n+from django.utils.encoding import smart_bytes\n from django.utils.log import getLogger\n from django.utils.timezone import utc\n \n@@ -137,7 +138,7 @@ def truncate_name(name, length=None, hash_len=4):\n     if length is None or len(name) <= length:\n         return name\n \n-    hsh = hashlib.md5(name).hexdigest()[:hash_len]\n+    hsh = hashlib.md5(smart_bytes(name)).hexdigest()[:hash_len]\n     return '%s%s' % (name[:length-hash_len], hsh)\n \n def format_number(value, max_digits, decimal_places):"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}