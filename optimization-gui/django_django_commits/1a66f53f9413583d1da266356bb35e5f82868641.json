{
    "author": "claudep",
    "message": "Fixed #18340 -- Fixed formtools form_hmac with Unicode input\n\nUsing cPickle, two apparently identical Unicode strings could\ngenerate different pickled results depending on previous operations\non those strings.",
    "sha": "1a66f53f9413583d1da266356bb35e5f82868641",
    "files": [
        {
            "sha": "bf06846f286910b7a7f4cd9c41032ea8ec43b2f6",
            "filename": "django/contrib/formtools/tests/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/1a66f53f9413583d1da266356bb35e5f82868641/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/1a66f53f9413583d1da266356bb35e5f82868641/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2F__init__.py?ref=1a66f53f9413583d1da266356bb35e5f82868641",
            "patch": "@@ -156,18 +156,15 @@ def test_form_submit_bad_hash(self):\n \n \n class FormHmacTests(unittest.TestCase):\n-    \"\"\"\n-    Same as SecurityHashTests, but with form_hmac\n-    \"\"\"\n \n     def test_textfield_hash(self):\n         \"\"\"\n         Regression test for #10034: the hash generation function should ignore\n         leading/trailing whitespace so as to be friendly to broken browsers that\n         submit it (usually in textareas).\n         \"\"\"\n-        f1 = HashTestForm({'name': 'joe', 'bio': 'Nothing notable.'})\n-        f2 = HashTestForm({'name': '  joe', 'bio': 'Nothing notable.  '})\n+        f1 = HashTestForm({'name': u'joe', 'bio': u'Nothing notable.'})\n+        f2 = HashTestForm({'name': u'  joe', 'bio': u'Nothing notable.  '})\n         hash1 = utils.form_hmac(f1)\n         hash2 = utils.form_hmac(f2)\n         self.assertEqual(hash1, hash2)"
        },
        {
            "sha": "96a0092a35685e0a04ad3f215715eaab0345e66e",
            "filename": "django/contrib/formtools/utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/1a66f53f9413583d1da266356bb35e5f82868641/django%2Fcontrib%2Fformtools%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/1a66f53f9413583d1da266356bb35e5f82868641/django%2Fcontrib%2Fformtools%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Futils.py?ref=1a66f53f9413583d1da266356bb35e5f82868641",
            "patch": "@@ -1,7 +1,5 @@\n-try:\n-    import cPickle as pickle\n-except ImportError:\n-    import pickle\n+# Do not try cPickle here (see #18340)\n+import pickle\n \n from django.utils.crypto import salted_hmac\n "
        }
    ],
    "stats": {
        "total": 13,
        "additions": 4,
        "deletions": 9
    }
}