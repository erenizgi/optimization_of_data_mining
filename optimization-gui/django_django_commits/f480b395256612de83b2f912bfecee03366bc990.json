{
    "author": "carljm",
    "message": "Various tweaks and additions to 'how to release Django' document.",
    "sha": "f480b395256612de83b2f912bfecee03366bc990",
    "files": [
        {
            "sha": "fffdc9b86983373df2e51f59a528ba138075eb57",
            "filename": "docs/internals/howto-release-django.txt",
            "status": "modified",
            "additions": 38,
            "deletions": 25,
            "changes": 63,
            "blob_url": "https://github.com/django/django/blob/f480b395256612de83b2f912bfecee03366bc990/docs%2Finternals%2Fhowto-release-django.txt",
            "raw_url": "https://github.com/django/django/raw/f480b395256612de83b2f912bfecee03366bc990/docs%2Finternals%2Fhowto-release-django.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fhowto-release-django.txt?ref=f480b395256612de83b2f912bfecee03366bc990",
            "patch": "@@ -36,7 +36,7 @@ differences noted. The short version is:\n \n #. Update version numbers and create the release package(s)!\n \n-#. Upload the package(s) to the the ``djangoproject.com`` server and creating\n+#. Upload the package(s) to the the ``djangoproject.com`` server and create\n    some redirects for download/checksum links.\n \n #. Unless this is a pre-release, add the new version(s) to PyPI.\n@@ -47,7 +47,7 @@ differences noted. The short version is:\n \n #. Update version numbers post-release.\n \n-There's a lot of details, so please read on.\n+There are a lot of details, so please read on.\n \n Prerequisites\n =============\n@@ -116,7 +116,7 @@ before release:\n    __ https://github.com/django/djangoproject.com/commit/772edbc6ac5a2b8e718606b3338f2bcc429fb9b6\n \n #. Write the announcement blog post for the release. You can enter it into\n-   the admin at any time and mark it as inactive. Here's a few examples:\n+   the admin at any time and mark it as inactive. Here are a few examples:\n    `example security release announcement`__, `example regular release\n    announcement`__, `example pre-release announcement`__.\n \n@@ -135,19 +135,28 @@ Actually rolling the release\n \n OK, this is the fun part, where we actually push out a release!\n \n-#. Check Jenkins is green for the version(s) you're putting out. You probably\n-   shouldn't issue a release until it's green.\n+#. Check `Jenkins`__ is green for the version(s) you're putting out. You\n+   probably shouldn't issue a release until it's green.\n+\n+   __ http://ci.djangoproject.com\n+\n+#. A release always begins from a release branch, so you should ``git checkout\n+   stable/<release>`` (e.g. checkout ``stable/1.5.x`` to issue a release in the\n+   1.5 series) and then ``git pull`` to make sure you're up-to-date.\n \n-#. A release always begins from a release branch, so you\n-   should ``git pull`` to make sure you're up-to-date and then\n-   ``git checkout stable/<release>`` (e.g. checkout ``stable/1.5.x`` to issue\n-   a release in the 1.5 series.)\n \n #. If this is a security release, merge the appropriate patches from\n-   ``django-private``. *FIXME: actual commands here - make sure to --ff-\n-   only right?*. Make sure the commit messages explain that the commit\n-   is a security fix and that an announcement will follow (`example\n-   security commit`__)\n+   ``django-private``. Rebase these patches as necessary to make each one a\n+   simple commit on the release branch rather than a merge commit. To ensure\n+   this, merge them with the ``--ff-only`` flag; for example, ``git checkout\n+   stable/1.5.x; git merge --ff-only security/1.5.x``, if ``security/1.5.x`` is\n+   a branch in the ``django-private`` repo containing the necessary security\n+   patches for the next release in the 1.5 series. If git refuses to merge with\n+   ``--ff-only``, switch to the security-patch branch and rebase it on the\n+   branch you are about to merge it into (``git checkout security/1.5.x; git\n+   rebase stable/1.5.x``) and then switch back and do the merge. Make sure the\n+   commit message for each security fix explains that the commit is a security\n+   fix and that an announcement will follow (`example security commit`__)\n \n    __ https://github.com/django/django/commit/3ef4bbf495cc6c061789132e3d50a8231a89406b\n \n@@ -166,7 +175,7 @@ OK, this is the fun part, where we actually push out a release!\n    classifier in ``setup.py`` to reflect this. Otherwise, make sure the\n    classifier is set to ``Development Status :: 5 - Production/Stable``.\n \n-#. Tag the release by running ``git tag`` *FIXME actual commands*.\n+#. Tag the release by running ``git tag -s`` *FIXME actual commands*.\n \n #. ``git push`` your work.\n \n@@ -207,7 +216,7 @@ Now you're ready to actually put the release out there. To do this:\n    ``/home/www/djangoproject.com/src/media/pgp``.\n \n #. Test that the release packages install correctly using ``easy_install``\n-   and ``pip``. Here's how I do it (which requires `virtualenvwrapper`__):\n+   and ``pip``. Here's one method (which requires `virtualenvwrapper`__)::\n \n         $ mktmpenv\n         $ easy_install https://www.djangoproject.com/download/<version>/tarball/\n@@ -217,20 +226,24 @@ Now you're ready to actually put the release out there. To do this:\n         $ deactivate\n \n    This just tests that the tarballs are available (i.e. redirects are up) and\n-   that they install correctly, but it'll catch silly mistakes. *XXX FIXME:\n+   that they install correctly, but it'll catch silly mistakes. *FIXME:\n    buildout too?*\n \n    __ https://pypi.python.org/pypi/virtualenvwrapper\n \n-#. Ask a few people on IRC to verify the checksums by visiting the chucksums\n+#. Ask a few people on IRC to verify the checksums by visiting the checksums\n    file (e.g. https://www.djangoproject.com/m/pgp/Django-1.5b1.checksum.txt)\n-   and following the instructions in it.\n-\n-#. If this is a security or regular release, register the new package with\n-   PyPI by uploading the ``PGK-INFO`` file generated in the release package.\n-   This file's *in* the distribution tarball, so you'll need to pull it\n-   out. ``tar xzf dist/Django-<version>.tar.gz Django-<version>/PKG-INFO``\n-   ought to work.\n+   and following the instructions in it. For bonus points, they can also unpack\n+   the downloaded release tarball and verify that its contents appear to be\n+   correct (proper version numbers, no stray ``.pyc`` or other undesirable\n+   files).\n+\n+#. If this is a security or regular release, register the new package with PyPI\n+   by uploading the ``PGK-INFO`` file generated in the release package.  This\n+   file's *in* the distribution tarball, so you'll need to pull it out. ``tar\n+   xzf dist/Django-<version>.tar.gz Django-<version>/PKG-INFO`` ought to\n+   work. *FIXME: Is there any reason to pull this file out manually rather than\n+   using \"python setup.py register\"?*\n \n #. Deploy the template changes you made a while back by running `fab deploy`\n    from the ``djangoproject.com`` repo.\n@@ -240,7 +253,7 @@ Now you're ready to actually put the release out there. To do this:\n    to that page listing the preview package; otherwise, just update\n    the \"Get the latest official version\" section.\n \n-#. Make up the blog post announcing the release live.\n+#. Make the blog post announcing the release live.\n \n #. Post the release announcement to the django-announce,\n    django-developers and django-users mailing lists. This should"
        }
    ],
    "stats": {
        "total": 63,
        "additions": 38,
        "deletions": 25
    }
}