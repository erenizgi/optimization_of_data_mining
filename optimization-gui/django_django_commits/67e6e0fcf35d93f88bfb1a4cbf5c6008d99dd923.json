{
    "author": "aaugustin",
    "message": "Fixed #17087 -- Re-organized the i18n docs to reduce confusion between USE_I18N/USE_L10N and the concepts of internationalization/localisation. Re\nmoved some duplicate content.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17026 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
    "files": [
        {
            "sha": "7310e525917467b1a0fad2efcbc9c3af92d35742",
            "filename": "docs/howto/i18n.txt",
            "status": "removed",
            "additions": 0,
            "deletions": 121,
            "changes": 121,
            "blob_url": "https://github.com/django/django/blob/4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60/docs%2Fhowto%2Fi18n.txt",
            "raw_url": "https://github.com/django/django/raw/4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60/docs%2Fhowto%2Fi18n.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Fi18n.txt?ref=4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60",
            "patch": "@@ -1,121 +0,0 @@\n-.. _using-translations-in-your-own-projects:\n-\n-===============================================\n-Using internationalization in your own projects\n-===============================================\n-\n-At runtime, Django builds an in-memory unified catalog of literals-translations.\n-To achieve this it looks for translations by following this algorithm regarding\n-the order in which it examines the different file paths to load the compiled\n-:term:`message files <message file>` (``.mo``) and the precedence of multiple\n-translations for the same literal:\n-\n-1. The directories listed in :setting:`LOCALE_PATHS` have the highest\n-   precedence, with the ones appearing first having higher precedence than\n-   the ones appearing later.\n-2. Then, it looks for and uses if it exists a ``locale`` directory in each\n-   of the installed apps listed in :setting:`INSTALLED_APPS`.  The ones\n-   appearing first have higher precedence than the ones appearing later.\n-3. Then, it looks for a ``locale`` directory in the project directory, or\n-   more accurately, in the directory containing your settings file.\n-4. Finally, the Django-provided base translation in ``django/conf/locale``\n-   is used as a fallback.\n-\n-.. deprecated:: 1.3\n-    Lookup in the ``locale`` subdirectory of the directory containing your\n-    settings file (item 3 above) is deprecated since the 1.3 release and will be\n-    removed in Django 1.5. You can use the :setting:`LOCALE_PATHS` setting\n-    instead, by listing the absolute filesystem path of such ``locale``\n-    directory in the setting value.\n-\n-.. seealso::\n-\n-    The translations for literals included in JavaScript assets are looked up\n-    following a similar but not identical algorithm. See the\n-    :ref:`javascript_catalog view documentation <javascript_catalog-view>` for\n-    more details.\n-\n-In all cases the name of the directory containing the translation is expected to\n-be named using :term:`locale name` notation. E.g. ``de``, ``pt_BR``, ``es_AR``,\n-etc.\n-\n-This way, you can write applications that include their own translations, and\n-you can override base translations in your project path. Or, you can just build\n-a big project out of several apps and put all translations into one big common\n-message file specific to the project you are composing. The choice is yours.\n-\n-.. note::\n-\n-    If you're using manually configured settings, as described in\n-    :ref:`settings-without-django-settings-module`, the ``locale`` directory in\n-    the project directory will not be examined, since Django loses the ability\n-    to work out the location of the project directory. (Django normally uses the\n-    location of the settings file to determine this, and a settings file doesn't\n-    exist if you're manually configuring your settings.)\n-\n-All message file repositories are structured the same way. They are:\n-\n-* All paths listed in :setting:`LOCALE_PATHS` in your settings file are\n-  searched for ``<language>/LC_MESSAGES/django.(po|mo)``\n-* ``$PROJECTPATH/locale/<language>/LC_MESSAGES/django.(po|mo)`` --\n-  deprecated, see above.\n-* ``$APPPATH/locale/<language>/LC_MESSAGES/django.(po|mo)``\n-* ``$PYTHONPATH/django/conf/locale/<language>/LC_MESSAGES/django.(po|mo)``\n-\n-To create message files, you use the :djadmin:`django-admin.py makemessages <makemessages>`\n-tool. You only need to be in the same directory where the ``locale/`` directory\n-is located. And you use :djadmin:`django-admin.py compilemessages <compilemessages>`\n-to produce the binary ``.mo`` files that are used by ``gettext``. Read the\n-:doc:`/topics/i18n/localization` document for more details.\n-\n-You can also run ``django-admin.py compilemessages --settings=path.to.settings``\n-to make the compiler process all the directories in your :setting:`LOCALE_PATHS`\n-setting.\n-\n-Finally, you should give some thought to the structure of your translation\n-files. If your applications need to be delivered to other users and will\n-be used in other projects, you might want to use app-specific translations.\n-But using app-specific translations and project-specific translations could\n-produce weird problems with ``makemessages``: It will traverse all directories\n-below the current path and so might put message IDs into a unified, common\n-message file for the current project that are already in application message\n-files.\n-\n-The easiest way out is to store applications that are not part of the project\n-(and so carry their own translations) outside the project tree. That way,\n-``django-admin.py makemessages``, when ran on a project level will only extract\n-strings that are connected to your explicit project and not strings that are\n-distributed independently.\n-\n-Using translations outside views and templates\n-==============================================\n-\n-While Django provides a rich set of i18n tools for use in views and templates,\n-it does not restrict the usage to Django-specific code. The Django translation\n-mechanisms can be used to translate arbitrary texts to any language that is\n-supported by Django (as long as an appropriate translation catalog exists, of\n-course). You can load a translation catalog, activate it and translate text to\n-language of your choice, but remember to switch back to original language, as\n-activating a translation catalog is done on per-thread basis and such change\n-will affect code running in the same thread.\n-\n-For example::\n-\n-    from django.utils import translation\n-    def welcome_translated(language):\n-        cur_language = translation.get_language()\n-        try:\n-            translation.activate(language)\n-            text = translation.ugettext('welcome')\n-        finally:\n-            translation.activate(cur_language)\n-        return text\n-\n-Calling this function with the value 'de' will give you ``\"Willkommen\"``,\n-regardless of :setting:`LANGUAGE_CODE` and language set by middleware.\n-\n-Functions of particular interest are ``django.utils.translation.get_language()``\n-which returns the language used in the current thread,\n-``django.utils.translation.activate()`` which activates a translation catalog\n-for the current thread, and ``django.utils.translation.check_for_language()``\n-which checks if the given language is supported by Django."
        },
        {
            "sha": "3616f7ae1639cc2b5435a878f8bcc53957777536",
            "filename": "docs/howto/index.txt",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Fhowto%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Fhowto%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Findex.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -18,7 +18,6 @@ you quickly accomplish common tasks.\n    deployment/index\n    error-reporting\n    initial-data\n-   i18n\n    jython\n    legacy-databases\n    outputting-csv"
        },
        {
            "sha": "7e6de0d4913c505f568a6f4f45288bd8637cf978",
            "filename": "docs/internals/contributing/index.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Finternals%2Fcontributing%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Finternals%2Fcontributing%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fcontributing%2Findex.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -56,7 +56,7 @@ Browse the following sections to find out how:\n    triaging-tickets\n    writing-code/index\n    writing-documentation\n-   translations\n+   localizing\n    committing-code\n \n .. _django-users: http://groups.google.com/group/django-users"
        },
        {
            "sha": "90a07c1e2d7ff7406545c294d54fd7587edd6b07",
            "filename": "docs/internals/contributing/localizing.txt",
            "status": "renamed",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Finternals%2Fcontributing%2Flocalizing.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Finternals%2Fcontributing%2Flocalizing.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fcontributing%2Flocalizing.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -1,15 +1,15 @@\n-=======================================\n-Submitting and maintaining translations\n-=======================================\n+=================\n+Localizing Django\n+=================\n \n Various parts of Django, such as the admin site and validation error messages,\n-are internationalized. This means they display different text depending on each\n-user's language setting. For this, Django uses the same internationalization and\n-localization infrastructure available to Django applications, described in the\n-:doc:`i18n documentation</topics/i18n/index>`.\n+are internationalized. This means they display differently depending on each\n+user's language or country. For this, Django uses the same internationalization\n+and localization infrastructure available to Django applications, described in\n+the :doc:`i18n documentation </topics/i18n/index>`.\n \n-Internationalization\n---------------------\n+Translations\n+------------\n \n Translations are contributed by Django users worldwide. The translation work is\n coordinated at `Transifex`_.\n@@ -45,8 +45,8 @@ do:\n      For more information about how to use Transifex, read the\n      `Transifex User Guide`_.\n \n-Localization\n-------------\n+Formats\n+-------\n \n You can also review ``conf/locale/<locale>/formats.py``. This file describes\n the date, time and numbers formatting particularities of your locale. See",
            "previous_filename": "docs/internals/contributing/translations.txt"
        },
        {
            "sha": "4671906fa1a99635205e6753d7d30f71510855e9",
            "filename": "docs/ref/contrib/localflavor.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Fref%2Fcontrib%2Flocalflavor.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Fref%2Fcontrib%2Flocalflavor.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Flocalflavor.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -146,7 +146,7 @@ Django's general catalog in ``django/conf/locale``. If you want localflavor's\n texts to be translated, like form fields error messages, you must include\n :mod:`django.contrib.localflavor` in the :setting:`INSTALLED_APPS` setting, so\n the internationalization system can find the catalog, as explained in\n-:ref:`using-translations-in-your-own-projects`.\n+:ref:`how-django-discovers-translations`.\n \n Adding flavors\n =============="
        },
        {
            "sha": "999e2bad008b2da0ae23dcfbc98fb70abe967647",
            "filename": "docs/ref/settings.txt",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Fref%2Fsettings.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Fref%2Fsettings.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fsettings.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -1243,7 +1243,7 @@ LOCALE_PATHS\n Default: ``()`` (Empty tuple)\n \n A tuple of directories where Django looks for translation files.\n-See :ref:`using-translations-in-your-own-projects`.\n+See :ref:`how-django-discovers-translations`.\n \n Example::\n \n@@ -2038,10 +2038,10 @@ USE_I18N\n \n Default: ``True``\n \n-A boolean that specifies whether Django's internationalization system should be\n-enabled. This provides an easy way to turn it off, for performance. If this is\n-set to ``False``, Django will make some optimizations so as not to load the\n-internationalization machinery.\n+A boolean that specifies whether Django's translation system should be enabled.\n+This provides an easy way to turn it off, for performance. If this is set to\n+``False``, Django will make some optimizations so as not to load the\n+translation machinery.\n \n See also :setting:`USE_L10N`\n \n@@ -2054,9 +2054,9 @@ USE_L10N\n \n Default: ``False``\n \n-A boolean that specifies if data will be localized by default or not. If this\n-is set to ``True``, e.g. Django will display numbers and dates using the\n-format of the current locale.\n+A boolean that specifies if localized formatting of data will be enabled by\n+default or not. If this is set to ``True``, e.g. Django will display numbers and\n+dates using the format of the current locale.\n \n See also :setting:`USE_I18N` and :setting:`LANGUAGE_CODE`\n "
        },
        {
            "sha": "bce2f59cd3e35e3de49afa45dfffebffc8c506f3",
            "filename": "docs/ref/utils.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Fref%2Futils.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Fref%2Futils.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Futils.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -455,7 +455,7 @@ appropriate entities.\n    :synopsis: Internationalization support.\n \n For a complete discussion on the usage of the following see the\n-:doc:`Internationalization documentation </topics/i18n/internationalization>`.\n+:doc:`translation documentation </topics/i18n/translation>`.\n \n .. function:: gettext(message)\n "
        },
        {
            "sha": "1d85683d95f368f29b562071db25a47f8435c760",
            "filename": "docs/topics/cache.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Ftopics%2Fcache.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Ftopics%2Fcache.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fcache.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -494,12 +494,9 @@ more on these decorators.\n .. versionadded:: 1.2\n \n If :setting:`USE_I18N` is set to ``True`` then the generated cache key will\n-include the name of the active :term:`language<language code>`.\n-This allows you to easily cache multilingual sites without having to create\n-the cache key yourself.\n-\n-See :doc:`/topics/i18n/deployment` for more on how Django discovers the active\n-language.\n+include the name of the active :term:`language<language code>` -- see also\n+:ref:`how-django-discovers-language-preference`). This allows you to easily\n+cache multilingual sites without having to create the cache key yourself.\n \n __ `Controlling cache: Using other headers`_\n "
        },
        {
            "sha": "eed5c96af7d110d2a7314ec540471cefb7b92a5a",
            "filename": "docs/topics/i18n/deployment.txt",
            "status": "removed",
            "additions": 0,
            "deletions": 217,
            "changes": 217,
            "blob_url": "https://github.com/django/django/blob/4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60/docs%2Ftopics%2Fi18n%2Fdeployment.txt",
            "raw_url": "https://github.com/django/django/raw/4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60/docs%2Ftopics%2Fi18n%2Fdeployment.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Fdeployment.txt?ref=4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60",
            "patch": "@@ -1,217 +0,0 @@\n-==========================\n-Deployment of translations\n-==========================\n-\n-If you don't need internationalization\n-======================================\n-\n-Django's internationalization hooks are on by default, and that means there's a\n-bit of i18n-related overhead in certain places of the framework. If you don't\n-use internationalization, you should take the two seconds to set\n-:setting:`USE_I18N = False <USE_I18N>` in your settings file. If\n-:setting:`USE_I18N` is set to ``False``, then Django will make some\n-optimizations so as not to load the internationalization machinery.\n-\n-You'll probably also want to remove ``'django.core.context_processors.i18n'``\n-from your :setting:`TEMPLATE_CONTEXT_PROCESSORS` setting.\n-\n-.. note::\n-\n-    There is also an independent but related :setting:`USE_L10N` setting that\n-    controls if Django should implement format localization.\n-\n-    If :setting:`USE_L10N` is set to ``True``, Django will handle numbers times,\n-    and dates in the format of the current locale. That includes representation\n-    of these field types on templates and allowed input formats for dates,\n-    times on model forms.\n-\n-    See :ref:`format-localization` for more details.\n-\n-If you do need internationalization\n-===================================\n-\n-.. _how-django-discovers-language-preference:\n-\n-How Django discovers language preference\n-----------------------------------------\n-\n-Once you've prepared your translations -- or, if you just want to use the\n-translations that come with Django -- you'll just need to activate translation\n-for your app.\n-\n-Behind the scenes, Django has a very flexible model of deciding which language\n-should be used -- installation-wide, for a particular user, or both.\n-\n-To set an installation-wide language preference, set :setting:`LANGUAGE_CODE`.\n-Django uses this language as the default translation -- the final attempt if no\n-other translator finds a translation.\n-\n-If all you want to do is run Django with your native language, and a language\n-file is available for it, all you need to do is set :setting:`LANGUAGE_CODE`.\n-\n-If you want to let each individual user specify which language he or she\n-prefers, use ``LocaleMiddleware``. ``LocaleMiddleware`` enables language\n-selection based on data from the request. It customizes content for each user.\n-\n-To use ``LocaleMiddleware``, add ``'django.middleware.locale.LocaleMiddleware'``\n-to your :setting:`MIDDLEWARE_CLASSES` setting. Because middleware order\n-matters, you should follow these guidelines:\n-\n-* Make sure it's one of the first middlewares installed.\n-* It should come after ``SessionMiddleware``, because ``LocaleMiddleware``\n-  makes use of session data. And it should come before ``CommonMiddleware``\n-  because ``CommonMiddleware`` needs an activated language in order\n-  to resolve the requested URL.\n-* If you use ``CacheMiddleware``, put ``LocaleMiddleware`` after it.\n-\n-For example, your :setting:`MIDDLEWARE_CLASSES` might look like this::\n-\n-    MIDDLEWARE_CLASSES = (\n-       'django.contrib.sessions.middleware.SessionMiddleware',\n-       'django.middleware.locale.LocaleMiddleware',\n-       'django.middleware.common.CommonMiddleware',\n-    )\n-\n-(For more on middleware, see the :doc:`middleware documentation\n-</topics/http/middleware>`.)\n-\n-``LocaleMiddleware`` tries to determine the user's language preference by\n-following this algorithm:\n-\n-.. versionchanged:: 1.4\n-\n-* First, it looks for the language prefix in the requested URL.  This is\n-  only performed when you are using the ``i18n_patterns`` function in your\n-  root URLconf. See :ref:`url-internationalization` for more information\n-  about the language prefix and how to internationalize URL patterns.\n-\n-* Failing that, it looks for a ``django_language`` key in the current\n-  user's session.\n-\n-* Failing that, it looks for a cookie.\n-\n-  The name of the cookie used is set by the :setting:`LANGUAGE_COOKIE_NAME`\n-  setting. (The default name is ``django_language``.)\n-\n-* Failing that, it looks at the ``Accept-Language`` HTTP header. This\n-  header is sent by your browser and tells the server which language(s) you\n-  prefer, in order by priority. Django tries each language in the header\n-  until it finds one with available translations.\n-\n-* Failing that, it uses the global :setting:`LANGUAGE_CODE` setting.\n-\n-.. _locale-middleware-notes:\n-\n-Notes:\n-\n-* In each of these places, the language preference is expected to be in the\n-  standard :term:`language format<language code>`, as a string. For example,\n-  Brazilian Portuguese is ``pt-br``.\n-\n-* If a base language is available but the sublanguage specified is not,\n-  Django uses the base language. For example, if a user specifies ``de-at``\n-  (Austrian German) but Django only has ``de`` available, Django uses\n-  ``de``.\n-\n-* Only languages listed in the :setting:`LANGUAGES` setting can be selected.\n-  If you want to restrict the language selection to a subset of provided\n-  languages (because your application doesn't provide all those languages),\n-  set :setting:`LANGUAGES` to a list of languages. For example::\n-\n-      LANGUAGES = (\n-        ('de', _('German')),\n-        ('en', _('English')),\n-      )\n-\n-  This example restricts languages that are available for automatic\n-  selection to German and English (and any sublanguage, like de-ch or\n-  en-us).\n-\n-* If you define a custom :setting:`LANGUAGES` setting, as explained in the\n-  previous bullet, it's OK to mark the languages as translation strings\n-  -- but use a \"dummy\" ``ugettext()`` function, not the one in\n-  ``django.utils.translation``. You should *never* import\n-  ``django.utils.translation`` from within your settings file, because that\n-  module in itself depends on the settings, and that would cause a circular\n-  import.\n-\n-  The solution is to use a \"dummy\" ``ugettext()`` function. Here's a sample\n-  settings file::\n-\n-      ugettext = lambda s: s\n-\n-      LANGUAGES = (\n-          ('de', ugettext('German')),\n-          ('en', ugettext('English')),\n-      )\n-\n-  With this arrangement, ``django-admin.py makemessages`` will still find\n-  and mark these strings for translation, but the translation won't happen\n-  at runtime -- so you'll have to remember to wrap the languages in the\n-  *real* ``ugettext()`` in any code that uses :setting:`LANGUAGES` at\n-  runtime.\n-\n-* The ``LocaleMiddleware`` can only select languages for which there is a\n-  Django-provided base translation. If you want to provide translations\n-  for your application that aren't already in the set of translations\n-  in Django's source tree, you'll want to provide at least a basic\n-  one as described in the :ref:`Locale restrictions<locale-restrictions>`\n-  note.\n-\n-Once ``LocaleMiddleware`` determines the user's preference, it makes this\n-preference available as ``request.LANGUAGE_CODE`` for each\n-:class:`~django.http.HttpRequest`. Feel free to read this value in your view\n-code. Here's a simple example::\n-\n-    def hello_world(request, count):\n-        if request.LANGUAGE_CODE == 'de-at':\n-            return HttpResponse(\"You prefer to read Austrian German.\")\n-        else:\n-            return HttpResponse(\"You prefer to read another language.\")\n-\n-Note that, with static (middleware-less) translation, the language is in\n-``settings.LANGUAGE_CODE``, while with dynamic (middleware) translation, it's\n-in ``request.LANGUAGE_CODE``.\n-\n-.. _settings file: ../settings/\n-.. _middleware documentation: ../middleware/\n-.. _session: ../sessions/\n-.. _request object: ../request_response/#httprequest-objects\n-\n-How Django discovers translations\n----------------------------------\n-\n-As described in :ref:`using-translations-in-your-own-projects`, Django looks for\n-translations by following this algorithm regarding the order in which it\n-examines the different file paths to load the compiled :term:`message files\n-<message file>` (``.mo``) and the precedence of multiple translations for the\n-same literal:\n-\n-1. The directories listed in :setting:`LOCALE_PATHS` have the highest\n-   precedence, with the ones appearing first having higher precedence than\n-   the ones appearing later.\n-2. Then, it looks for and uses if it exists a ``locale`` directory in each\n-   of the installed apps listed in :setting:`INSTALLED_APPS`.  The ones\n-   appearing first have higher precedence than the ones appearing later.\n-3. Then, it looks for a ``locale`` directory in the project directory, or\n-   more accurately, in the directory containing your settings file.\n-4. Finally, the Django-provided base translation in ``django/conf/locale``\n-   is used as a fallback.\n-\n-.. deprecated:: 1.3\n-    Lookup in the ``locale`` subdirectory of the directory containing your\n-    settings file (item 3 above) is deprecated since the 1.3 release and will be\n-    removed in Django 1.5. You can use the :setting:`LOCALE_PATHS` setting\n-    instead, by listing the absolute filesystem path of such ``locale``\n-    directory in the setting value.\n-\n-.. seealso::\n-\n-    The translations for literals included in JavaScript assets are looked up\n-    following a similar but not identical algorithm. See the\n-    :ref:`javascript_catalog view documentation <javascript_catalog-view>` for\n-    more details.\n-\n-In all cases the name of the directory containing the translation is expected to\n-be named using :term:`locale name` notation. E.g. ``de``, ``pt_BR``, ``es_AR``,\n-etc."
        },
        {
            "sha": "ffd0bcdd2271177409a2faec9f412cf932a597ee",
            "filename": "docs/topics/i18n/formatting.txt",
            "status": "added",
            "additions": 182,
            "deletions": 0,
            "changes": 182,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Ftopics%2Fi18n%2Fformatting.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Ftopics%2Fi18n%2Fformatting.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Fformatting.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -0,0 +1,182 @@\n+===================\n+Format localization\n+===================\n+\n+.. _format-localization:\n+\n+.. versionadded:: 1.2\n+\n+Overview\n+========\n+\n+Django's formatting system is capable to display dates, times and numbers in templates using the format specified for the current :term:`locale <locale\n+name>`. It also handles localized input in forms.\n+\n+When it's enabled, two users accessing the same content may see dates, times and\n+numbers formatted in different ways, depending on the formats for their current\n+locale.\n+\n+The formatting system is disabled by default. To enable it, it's\n+necessary to set :setting:`USE_L10N = True <USE_L10N>` in your settings file.\n+\n+.. note::\n+\n+    The default :file:`settings.py` file created by :djadmin:`django-admin.py\n+    startproject <startproject>` includes :setting:`USE_L10N = True <USE_L10N>`\n+    for convenience.\n+\n+.. note::\n+\n+    There is also an independent but related :setting:`USE_I18N` setting that\n+    controls if Django should activate translation. See\n+    :doc:`/topics/i18n/translation` for more details.\n+\n+Locale aware input in forms\n+===========================\n+\n+When formatting is enabled, Django can use localized formats when parsing dates,\n+times and numbers in forms. That means it tries different formats for different\n+locales when guessing the format used by the user when inputting data on forms.\n+\n+.. note::\n+    Django uses different formats for displaying data to those it uses for\n+    parsing data. Most notably, the formats for parsing dates can't use the\n+    ``%a`` (abbreviated weekday name), ``%A`` (full weekday name),\n+    ``%b`` (abbreviated month name), ``%B`` (full month name),\n+    or ``%p`` (AM/PM).\n+\n+To enable a form field to localize input and output data simply use its\n+``localize`` argument::\n+\n+    class CashRegisterForm(forms.Form):\n+       product = forms.CharField()\n+       revenue = forms.DecimalField(max_digits=4, decimal_places=2, localize=True)\n+\n+.. _topic-l10n-templates:\n+\n+Controlling localization in templates\n+=====================================\n+\n+When you have enabled formatting with :setting:`USE_L10N`, Django\n+will try to use a locale specific format whenever it outputs a value\n+in a template.\n+\n+However, it may not always be appropriate to use localized values --\n+for example, if you're outputting Javascript or XML that is designed\n+to be machine-readable, you will always want unlocalized values. You\n+may also want to use localization in selected templates, rather than\n+using localization everywhere.\n+\n+To allow for fine control over the use of localization, Django\n+provides the ``l10n`` template library that contains the following\n+tags and filters.\n+\n+Template tags\n+-------------\n+\n+.. templatetag:: localize\n+\n+localize\n+~~~~~~~~\n+\n+.. versionadded:: 1.3\n+\n+Enables or disables localization of template variables in the\n+contained block.\n+\n+This tag allows a more fine grained control of localization than\n+:setting:`USE_L10N`.\n+\n+To activate or deactivate localization for a template block, use::\n+\n+    {% load l10n %}\n+\n+    {% localize on %}\n+        {{ value }}\n+    {% endlocalize %}\n+\n+    {% localize off %}\n+        {{ value }}\n+    {% endlocalize %}\n+\n+.. note::\n+\n+    The value of :setting:`USE_L10N` isn't respected inside of a\n+    ``{% localize %}`` block.\n+\n+See :tfilter:`localize` and :tfilter:`unlocalize` for template filters that will\n+do the same job on a per-variable basis.\n+\n+Template filters\n+----------------\n+\n+.. templatefilter:: localize\n+\n+localize\n+~~~~~~~~\n+\n+.. versionadded:: 1.3\n+\n+Forces localization of a single value.\n+\n+For example::\n+\n+    {% load l10n %}\n+\n+    {{ value|localize }}\n+\n+To disable localization on a single value, use :tfilter:`unlocalize`. To control\n+localization over a large section of a template, use the :ttag:`localize` template\n+tag.\n+\n+\n+.. templatefilter:: unlocalize\n+\n+unlocalize\n+~~~~~~~~~~\n+\n+.. versionadded:: 1.3\n+\n+Forces a single value to be printed without localization.\n+\n+For example::\n+\n+    {% load l10n %}\n+\n+    {{ value|unlocalize }}\n+\n+To force localization of a single value, use :tfilter:`localize`. To\n+control localization over a large section of a template, use the\n+:ttag:`localize` template tag.\n+\n+Creating custom format files\n+============================\n+\n+Django provides format definitions for many locales, but sometimes you might\n+want to create your own, because a format files doesn't exist for your locale,\n+or because you want to overwrite some of the values.\n+\n+To use custom formats, specify the path where you'll place format files first.\n+To do that, just set your :setting:`FORMAT_MODULE_PATH` setting to the package\n+where format files will exist, for instance::\n+\n+    FORMAT_MODULE_PATH = 'mysite.formats'\n+\n+Files are not placed directly in this directory, but in a directory named as\n+the locale, and must be named ``formats.py``.\n+\n+To customize the English formats, a structure like this would be needed::\n+\n+    mysite/\n+        formats/\n+            __init__.py\n+            en/\n+                __init__.py\n+                formats.py\n+\n+where :file:`formats.py` contains custom format definitions. For example::\n+\n+    THOUSAND_SEPARATOR = ' '\n+\n+to use a space as a thousand separator, instead of the default for English,\n+a comma."
        },
        {
            "sha": "4e2c9c345c4e795178a8c0bb54d34e8c90660097",
            "filename": "docs/topics/i18n/index.txt",
            "status": "modified",
            "additions": 47,
            "deletions": 49,
            "changes": 96,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Ftopics%2Fi18n%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Ftopics%2Fi18n%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Findex.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -2,64 +2,77 @@\n Internationalization and localization\n =====================================\n \n+.. toctree::\n+   :hidden:\n+   :maxdepth: 1\n+\n+   translation\n+   formatting\n+\n Overview\n ========\n \n-Django has full support for internationalization of text in code and\n-templates, and format localization of dates and numbers. Here's how it works.\n+The goal of internationalization and localization is to allow a single Web\n+application to offer its content in languages and formats tailored to the\n+audience.\n+\n+Django has full support for :doc:`translation of text\n+</topics/i18n/translation>` and :doc:`formatting of dates, times and numbers\n+</topics/i18n/formatting>`.\n \n Essentially, Django does two things:\n \n-* It allows developers and template authors to specify which parts of\n-  their apps should be translatable.\n-* It uses these hooks to translate Web apps for particular users according\n-  to their language preferences.\n+* It allows developers and template authors to specify which parts of their apps\n+  should be translated or formatted for local languages and cultures.\n+* It uses these hooks to localize Web apps for particular users according to\n+  their preferences.\n \n-The complete process can be seen as divided in three stages. It is also possible\n-to identify an identical number of roles with very well defined responsibilities\n-associated with each of these tasks (although it's perfectly normal if you\n-find yourself performing more than one of these roles):\n+Obviously, translation depends on the target language. Formatting usually\n+depends on the target country.\n \n-* For application authors wishing to make sure their Django apps can be\n-  used in different locales: :doc:`/topics/i18n/internationalization`.\n-* For translators wanting to translate Django apps: :doc:`/topics/i18n/localization`.\n-* For system administrators/final users setting up internationalized apps or\n-  developers integrating third party apps: :doc:`/topics/i18n/deployment`.\n+Definitions\n+===========\n \n-.. toctree::\n-   :hidden:\n-   :maxdepth: 1\n+The words \"internationalization\" and \"localization\" often cause confusion;\n+here's a simplified definition:\n+\n+.. glossary::\n \n-   internationalization\n-   localization\n-   deployment\n+    internationalization\n+      Preparing the software for localization. Usually done by developers.\n \n-.. _ seealso::\n+    localization\n+      Writing the translations and local formats. Usually done by translators.\n \n-For more general information about the topic, see the `GNU gettext documentation`_\n-and the `Wikipedia article`_.\n+More details can be found in the `W3C Web Internationalization FAQ`_, the `Wikipedia article`_ or the `GNU gettext documentation`_.\n \n+.. _W3C Web Internationalization FAQ: http://www.w3.org/International/questions/qa-i18n\n .. _GNU gettext documentation: http://www.gnu.org/software/gettext/manual/gettext.html#Concepts\n .. _Wikipedia article: http://en.wikipedia.org/wiki/Internationalization_and_localization\n \n-Glossary\n-========\n+.. warning::\n \n-First lets define some terms that will help us to handle a common language:\n+    Translation and formatting are controlled by :setting:`USE_I18N` and\n+    :setting:`USE_L10N` settings respectively. However, both features involve\n+    internationalization and localization. The names of the settings are an\n+    unfortunate result of Django's history.\n+\n+Here are some other terms that will help us to handle a common language:\n \n .. glossary::\n \n     locale name\n       A locale name, either a language specification of the form ``ll`` or a\n       combined language and country specification of the form ``ll_CC``.\n-      Examples: ``it``, ``de_AT``, ``es``, ``pt_BR``. Note the underscore in\n-      some of them and the case of the part located to its right.\n+      Examples: ``it``, ``de_AT``, ``es``, ``pt_BR``. The language part is\n+      always is lower case and the country part in upper case. The separator\n+      is an underscore.\n \n     language code\n       Represents the name of a language. Browsers send the names of the\n       languages they accept in the ``Accept-Language`` HTTP header using this\n-      format. Examples: ``it``, ``de-at``, ``es``, ``pt-br``. Note the ``-``\n-      separator.\n+      format. Examples: ``it``, ``de-at``, ``es``, ``pt-br``. Both the language\n+      and the country parts are in lower case. The separator is a dash.\n \n     message file\n       A message file is a plain-text file, representing a single language,\n@@ -70,21 +83,6 @@ First lets define some terms that will help us to handle a common language:\n     translation string\n       A literal that can be translated.\n \n-.. _specialties-of-django-i18n:\n-\n-Specialties of Django translation\n-=================================\n-\n-Django's translation machinery uses the standard ``gettext`` module that comes\n-with Python. If you know ``gettext``, you might note these specialties in the\n-way Django does translation:\n-\n-* The string domain is ``django`` or ``djangojs``. This string domain is\n-  used to differentiate between different programs that store their data\n-  in a common message-file library (usually ``/usr/share/locale/``). The\n-  ``django`` domain is used for python and template translation strings\n-  and is loaded into the global translation catalogs. The ``djangojs``\n-  domain is only used for JavaScript translation catalogs to make sure\n-  that those are as small as possible.\n-* Django doesn't use ``xgettext`` alone. It uses Python wrappers around\n-  ``xgettext`` and ``msgfmt``. This is mostly for convenience.\n+    format file\n+      A format file is a Python module that defines the data formats for a given\n+      locale.\n\\ No newline at end of file"
        },
        {
            "sha": "13a970f02ff4e4c083752a756e56e5c209bb3fdb",
            "filename": "docs/topics/i18n/localization.txt",
            "status": "removed",
            "additions": 0,
            "deletions": 409,
            "changes": 409,
            "blob_url": "https://github.com/django/django/blob/4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60/docs%2Ftopics%2Fi18n%2Flocalization.txt",
            "raw_url": "https://github.com/django/django/raw/4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60/docs%2Ftopics%2Fi18n%2Flocalization.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Flocalization.txt?ref=4f00a2d316d6a8ffb6ca4ab6c89aaf8fb8bd3e60",
            "patch": "@@ -1,409 +0,0 @@\n-============\n-Localization\n-============\n-\n-This document covers three localization-related topics: `Creating language\n-files`_ , `locale aware date, time and numbers input/output in forms`_,\n-and `controlling localization in templates`_.\n-\n-.. _`Creating language files`: how-to-create-language-files_\n-.. _`locale aware date, time and numbers input/output in forms`: format-localization_\n-.. _`controlling localization in templates`: topic-l10n-templates_\n-\n-.. seealso::\n-\n-    The :doc:`/howto/i18n` document included with the Django HOW-TO documents collection.\n-\n-.. _how-to-create-language-files:\n-\n-How to create language files\n-============================\n-\n-Once the string literals of an application have been tagged for later\n-translation, the translation themselves need to be written (or obtained). Here's\n-how that works.\n-\n-.. _locale-restrictions:\n-\n-.. admonition:: Locale restrictions\n-\n-    Django does not support localizing your application into a locale for which\n-    Django itself has not been translated. In this case, it will ignore your\n-    translation files. If you were to try this and Django supported it, you\n-    would inevitably see a mixture of translated strings (from your application)\n-    and English strings (from Django itself). If you want to support a locale\n-    for your application that is not already part of Django, you'll need to make\n-    at least a minimal translation of the Django core.\n-\n-    A good starting point is to copy the Django English ``.po`` file and to\n-    translate at least some :term:`translation strings <translation string>`.\n-\n-Message files\n--------------\n-\n-The first step is to create a :term:`message file` for a new language. A message\n-file is a plain-text file, representing a single language, that contains all\n-available translation strings and how they should be represented in the given\n-language. Message files have a ``.po`` file extension.\n-\n-Django comes with a tool, ``django-admin.py makemessages``, that automates the\n-creation and upkeep of these files.\n-\n-.. admonition:: Gettext utilities\n-\n-    The ``makemessages`` command (and ``compilemessages`` discussed later) use\n-    commands from the GNU gettext toolset: ``xgettext``, ``msgfmt``,\n-    ``msgmerge`` and ``msguniq``.\n-\n-    .. versionchanged:: 1.2\n-\n-    The minimum version of the ``gettext`` utilities supported is 0.15.\n-\n-To create or update a message file, run this command::\n-\n-    django-admin.py makemessages -l de\n-\n-...where ``de`` is the language code for the message file you want to create.\n-The language code, in this case, is in :term:`locale format<locale name>`. For\n-example, it's ``pt_BR`` for Brazilian Portuguese and ``de_AT`` for Austrian\n-German.\n-\n-The script should be run from one of two places:\n-\n-* The root directory of your Django project.\n-* The root directory of your Django app.\n-\n-The script runs over your project source tree or your application source tree\n-and pulls out all strings marked for translation. It creates (or updates) a\n-message file in the directory ``locale/LANG/LC_MESSAGES``. In the ``de``\n-example, the file will be ``locale/de/LC_MESSAGES/django.po``.\n-\n-By default ``django-admin.py makemessages`` examines every file that has the\n-``.html`` or ``.txt`` file extension. In case you want to override that\n-default, use the ``--extension`` or ``-e`` option to specify the file\n-extensions to examine::\n-\n-    django-admin.py makemessages -l de -e txt\n-\n-Separate multiple extensions with commas and/or use ``-e`` or ``--extension``\n-multiple times::\n-\n-    django-admin.py makemessages -l de -e html,txt -e xml\n-\n-When :ref:`creating message files from JavaScript source code\n-<creating-message-files-from-js-code>` you need to use the special 'djangojs'\n-domain, **not** ``-e js``.\n-\n-.. admonition:: No gettext?\n-\n-    If you don't have the ``gettext`` utilities installed, ``django-admin.py\n-    makemessages`` will create empty files. If that's the case, either install\n-    the ``gettext`` utilities or just copy the English message file\n-    (``locale/en/LC_MESSAGES/django.po``) if available and use it as a starting\n-    point; it's just an empty translation file.\n-\n-.. admonition:: Working on Windows?\n-\n-   If you're using Windows and need to install the GNU gettext utilities so\n-   ``django-admin makemessages`` works see :ref:`gettext_on_windows` for more\n-   information.\n-\n-The format of ``.po`` files is straightforward. Each ``.po`` file contains a\n-small bit of metadata, such as the translation maintainer's contact\n-information, but the bulk of the file is a list of **messages** -- simple\n-mappings between translation strings and the actual translated text for the\n-particular language.\n-\n-For example, if your Django app contained a translation string for the text\n-``\"Welcome to my site.\"``, like so::\n-\n-    _(\"Welcome to my site.\")\n-\n-...then ``django-admin.py makemessages`` will have created a ``.po`` file\n-containing the following snippet -- a message::\n-\n-    #: path/to/python/module.py:23\n-    msgid \"Welcome to my site.\"\n-    msgstr \"\"\n-\n-A quick explanation:\n-\n-* ``msgid`` is the translation string, which appears in the source. Don't\n-  change it.\n-* ``msgstr`` is where you put the language-specific translation. It starts\n-  out empty, so it's your responsibility to change it. Make sure you keep\n-  the quotes around your translation.\n-* As a convenience, each message includes, in the form of a comment line\n-  prefixed with ``#`` and located above the ``msgid`` line, the filename and\n-  line number from which the translation string was gleaned.\n-\n-Long messages are a special case. There, the first string directly after the\n-``msgstr`` (or ``msgid``) is an empty string. Then the content itself will be\n-written over the next few lines as one string per line. Those strings are\n-directly concatenated. Don't forget trailing spaces within the strings;\n-otherwise, they'll be tacked together without whitespace!\n-\n-.. admonition:: Mind your charset\n-\n-    When creating a PO file with your favorite text editor, first edit\n-    the charset line (search for ``\"CHARSET\"``) and set it to the charset\n-    you'll be using to edit the content. Due to the way the ``gettext`` tools\n-    work internally and because we want to allow non-ASCII source strings in\n-    Django's core and your applications, you **must** use UTF-8 as the encoding\n-    for your PO file. This means that everybody will be using the same\n-    encoding, which is important when Django processes the PO files.\n-\n-To reexamine all source code and templates for new translation strings and\n-update all message files for **all** languages, run this::\n-\n-    django-admin.py makemessages -a\n-\n-Compiling message files\n------------------------\n-\n-After you create your message file -- and each time you make changes to it --\n-you'll need to compile it into a more efficient form, for use by ``gettext``.\n-Do this with the ``django-admin.py compilemessages`` utility.\n-\n-This tool runs over all available ``.po`` files and creates ``.mo`` files, which\n-are binary files optimized for use by ``gettext``. In the same directory from\n-which you ran ``django-admin.py makemessages``, run ``django-admin.py\n-compilemessages`` like this::\n-\n-   django-admin.py compilemessages\n-\n-That's it. Your translations are ready for use.\n-\n-.. admonition:: Working on Windows?\n-\n-   If you're using Windows and need to install the GNU gettext utilities so\n-   ``django-admin compilemessages`` works see :ref:`gettext_on_windows` for more\n-   information.\n-\n-.. admonition:: .po files: Encoding and BOM usage.\n-\n-   Django only supports ``.po`` files encoded in UTF-8 and without any BOM\n-   (Byte Order Mark) so if your text editor adds such marks to the beginning of\n-   files by default then you will need to reconfigure it.\n-\n-.. _creating-message-files-from-js-code:\n-\n-Creating message files from JavaScript source code\n-==================================================\n-\n-You create and update the message files the same way as the other Django\n-message files -- with the ``django-admin.py makemessages`` tool. The only\n-difference is you need to explicitly specify what in gettext parlance is known\n-as a domain in this case the ``djangojs`` domain, by providing a ``-d djangojs``\n-parameter, like this::\n-\n-    django-admin.py makemessages -d djangojs -l de\n-\n-This would create or update the message file for JavaScript for German.\n-After updating message files, just run ``django-admin.py compilemessages``\n-the same way as you do with normal Django message files.\n-\n-.. _gettext_on_windows:\n-\n-``gettext`` on Windows\n-======================\n-\n-This is only needed for people who either want to extract message IDs or compile\n-message files (``.po``). Translation work itself just involves editing existing\n-files of this type, but if you want to create your own message files, or want to\n-test or compile a changed message file, you will need the ``gettext`` utilities:\n-\n-* Download the following zip files from the GNOME servers\n-  http://ftp.gnome.org/pub/gnome/binaries/win32/dependencies/ or from one\n-  of its mirrors_\n-\n-  * ``gettext-runtime-X.zip``\n-  * ``gettext-tools-X.zip``\n-\n-  ``X`` is the version number, we are requiring ``0.15`` or higher.\n-\n-* Extract the contents of the ``bin\\`` directories in both files to the\n-  same folder on your system (i.e. ``C:\\Program Files\\gettext-utils``)\n-\n-* Update the system PATH:\n-\n-  * ``Control Panel > System > Advanced > Environment Variables``.\n-  * In the ``System variables`` list, click ``Path``, click ``Edit``.\n-  * Add ``;C:\\Program Files\\gettext-utils\\bin`` at the end of the\n-    ``Variable value`` field.\n-\n-.. _mirrors: http://ftp.gnome.org/pub/GNOME/MIRRORS\n-\n-You may also use ``gettext`` binaries you have obtained elsewhere, so long as\n-the ``xgettext --version`` command works properly. Do not attempt to use Django\n-translation utilities with a ``gettext`` package if the command ``xgettext\n---version`` entered at a Windows command prompt causes a popup window saying\n-\"xgettext.exe has generated errors and will be closed by Windows\".\n-\n-.. _format-localization:\n-\n-Format localization\n-===================\n-\n-.. versionadded:: 1.2\n-\n-Django's formatting system is disabled by default. To enable it, it's\n-necessary to set :setting:`USE_L10N = True <USE_L10N>` in your settings file.\n-\n-.. note::\n-\n-    The default :file:`settings.py` file created by :djadmin:`django-admin.py\n-    startproject <startproject>` includes :setting:`USE_L10N = True <USE_L10N>`\n-    for convenience.\n-\n-When using Django's formatting system, dates and numbers on templates will be\n-displayed using the format specified for the current locale. Two users\n-accessing the same content, but in different language, will see date and\n-number fields formatted in different ways, depending on the format for their\n-current locale.\n-\n-Django will also use localized formats when parsing data in forms. That means\n-Django uses different formats for different locales when guessing the format\n-used by the user when inputting data on forms.\n-\n-.. note::\n-    Django uses different formats for displaying data to those it uses for\n-    parsing data. Most notably, the formats for parsing dates can't use the\n-    ``%a`` (abbreviated weekday name), ``%A`` (full weekday name),\n-    ``%b`` (abbreviated month name), ``%B`` (full month name),\n-    or ``%p`` (AM/PM).\n-\n-To enable a form field to localize input and output data simply use its\n-``localize`` argument::\n-\n-    class CashRegisterForm(forms.Form):\n-       product = forms.CharField()\n-       revenue = forms.DecimalField(max_digits=4, decimal_places=2, localize=True)\n-\n-Creating custom format files\n-----------------------------\n-\n-Django provides format definitions for many locales, but sometimes you might\n-want to create your own, because a format files doesn't exist for your locale,\n-or because you want to overwrite some of the values.\n-\n-To use custom formats, first thing to do, is to specify the path where you'll\n-place format files. To do that, just set your :setting:`FORMAT_MODULE_PATH`\n-setting to the path (in the format ``'foo.bar.baz``) where format files\n-will exists.\n-\n-Files are not placed directly in this directory, but in a directory named as\n-the locale, and must be named ``formats.py``.\n-\n-To customize the English formats, a structure like this would be needed::\n-\n-    mysite/\n-        formats/\n-            __init__.py\n-            en/\n-                __init__.py\n-                formats.py\n-\n-where :file:`formats.py` contains custom format definitions. For example::\n-\n-    THOUSAND_SEPARATOR = ' '\n-\n-to use a space as a thousand separator, instead of the default for English,\n-a comma.\n-\n-.. _topic-l10n-templates:\n-\n-Controlling localization in templates\n-=====================================\n-\n-When you have enabled localization using :setting:`USE_L10N`, Django\n-will try to use a locale specific format whenever it outputs a value\n-in a template.\n-\n-However, it may not always be appropriate to use localized values --\n-for example, if you're outputting Javascript or XML that is designed\n-to be machine-readable, you will always want unlocalized values. You\n-may also want to use localization in selected templates, rather than\n-using localization everywhere.\n-\n-To allow for fine control over the use of localization, Django\n-provides the ``l10n`` template library that contains the following\n-tags and filters.\n-\n-Template tags\n--------------\n-\n-.. templatetag:: localize\n-\n-localize\n-~~~~~~~~\n-\n-.. versionadded:: 1.3\n-\n-Enables or disables localization of template variables in the\n-contained block.\n-\n-This tag allows a more fine grained control of localization than\n-:setting:`USE_L10N`.\n-\n-To activate or deactivate localization for a template block, use::\n-\n-    {% load l10n %}\n-\n-    {% localize on %}\n-        {{ value }}\n-    {% endlocalize %}\n-\n-    {% localize off %}\n-        {{ value }}\n-    {% endlocalize %}\n-\n-.. note::\n-\n-    The value of :setting:`USE_L10N` is not respected inside of a\n-    `{% localize %}` block.\n-\n-See :tfilter:`localized` and :tfilter:`unlocalized` for a template filter that will\n-do the same job on a per-variable basis.\n-\n-Template filters\n-----------------\n-\n-.. templatefilter:: localize\n-\n-localize\n-~~~~~~~~\n-\n-.. versionadded:: 1.3\n-\n-Forces localization of a single value.\n-\n-For example::\n-\n-    {% load l10n %}\n-\n-    {{ value|localize }}\n-\n-To disable localization on a single value, use :tfilter:`unlocalize`. To control\n-localization over a large section of a template, use the :ttag:`localize` template\n-tag.\n-\n-\n-.. templatefilter:: unlocalize\n-\n-unlocalize\n-~~~~~~~~~~\n-\n-.. versionadded:: 1.3\n-\n-Forces a single value to be printed without localization.\n-\n-For example::\n-\n-    {% load l10n %}\n-\n-    {{ value|unlocalize }}\n-\n-To force localization of a single value, use :tfilter:`localize`. To\n-control localization over a large section of a template, use the\n-:ttag:`localize` template tag."
        },
        {
            "sha": "bef052e52d8a93bd44c9c17be3e84f7fcbf7324f",
            "filename": "docs/topics/i18n/translation.txt",
            "status": "renamed",
            "additions": 586,
            "deletions": 46,
            "changes": 632,
            "blob_url": "https://github.com/django/django/blob/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Ftopics%2Fi18n%2Ftranslation.txt",
            "raw_url": "https://github.com/django/django/raw/67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923/docs%2Ftopics%2Fi18n%2Ftranslation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Ftranslation.txt?ref=67e6e0fcf35d93f88bfb1a4cbf5c6008d99dd923",
            "patch": "@@ -1,27 +1,44 @@\n-====================\n-Internationalization\n-====================\n+===========\n+Translation\n+===========\n \n .. module:: django.utils.translation\n \n Overview\n ========\n \n-The goal of internationalization is to allow a single Web application to offer\n-its content and functionality in multiple languages and locales.\n+In order to make a Django project translatable, you have to add a minimal amount\n+of hooks to your Python code and templates. These hooks are called\n+:term:`translation strings <translation string>`. They tell Django: \"This text\n+should be translated into the end user's language, if a translation for this\n+text is available in that language.\" It's your responsibility to mark\n+translatable strings; the system can only translate strings it knows about.\n+\n+Django then provides utilities to extract the translation strings into a\n+:term:`message file`. This file is a convenient way for translators to provide\n+the equivalent of the translation strings in the target language. Once the\n+translators have filled in the message file, it must be compiled. This process\n+relies on the GNU gettext toolset.\n+\n+Once this is done, Django takes care of translating Web apps on the fly in each\n+available language, according to users' language preferences.\n+\n+Django's internationalization hooks are on by default, and that means there's a\n+bit of i18n-related overhead in certain places of the framework. If you don't\n+use internationalization, you should take the two seconds to set\n+:setting:`USE_I18N = False <USE_I18N>` in your settings file. Then Django will\n+make some optimizations so as not to load the internationalization machinery.\n+You'll probably also want to remove ``'django.core.context_processors.i18n'``\n+from your :setting:`TEMPLATE_CONTEXT_PROCESSORS` setting.\n \n-For text translations, you, the Django developer, can accomplish this goal by\n-adding a minimal amount of hooks to your Python and templates. These hooks\n-are called **translation strings**. They tell Django: \"This text should be\n-translated into the end user's language, if a translation for this text is\n-available in that language.\" It's your responsibility to mark translatable\n-strings; the system can only translate strings it knows about.\n+.. note::\n \n-Django takes care of using these hooks to translate Web apps, on the fly,\n-according to users' language preferences.\n+    There is also an independent but related :setting:`USE_L10N` setting that\n+    controls if Django should implement format localization. See\n+    :doc:`/topics/i18n/formatting` for more details.\n \n-Specifying translation strings: In Python code\n-==============================================\n+Internationalization: in Python code\n+====================================\n \n Standard translation\n --------------------\n@@ -85,8 +102,8 @@ Translation works on variables. Again, here's an identical example::\n \n (The caveat with using variables or computed values, as in the previous two\n examples, is that Django's translation-string-detecting utility,\n-``django-admin.py makemessages``, won't be able to find these strings. More on\n-``makemessages`` later.)\n+:djadmin:`django-admin.py makemessages <makemessages>`, won't be able to find\n+these strings. More on :djadmin:`makemessages` later.)\n \n The strings you pass to ``_()`` or ``ugettext()`` can take placeholders,\n specified with Python's standard named-string interpolation syntax. Example::\n@@ -126,7 +143,7 @@ This also works in templates with the :ttag:`comment` tag:\n \n     {% comment %}Translators: This is a text of the base template {% endcomment %}\n \n-The comment will then appear in the resulting .po file and should also be\n+The comment will then appear in the resulting ``.po`` file and should also be\n displayed by most translation tools.\n \n Marking strings as no-op\n@@ -221,9 +238,10 @@ cardinality of the elements at play.\n                 count\n         ) % d\n \n-    You would get a ``a format specification for argument 'name', as in\n-    'msgstr[0]', doesn't exist in 'msgid'`` error when running\n-    ``django-admin.py compilemessages``.\n+    You would get an error when running :djadmin:`django-admin.py\n+    compilemessages <compilemessages>`::\n+\n+        a format specification for argument 'name', as in 'msgstr[0]', doesn't exist in 'msgid'\n \n .. _contextual-markers:\n \n@@ -239,10 +257,10 @@ these words correctly in different contexts, you can use the\n :func:`django.utils.translation.npgettext()` function if the string needs\n pluralization. Both take a context string as the first variable.\n \n-In the resulting .po file, the string will then appear as often as there are\n-different contextual markers for the same string (the context will appear on\n-the ``msgctxt`` line), allowing the translator to give a different translation\n-for each of them.\n+In the resulting ``.po`` file, the string will then appear as often as there are\n+different contextual markers for the same string (the context will appear on the\n+``msgctxt`` line), allowing the translator to give a different translation for\n+each of them.\n \n For example::\n \n@@ -258,7 +276,7 @@ or::\n         name = models.CharField(help_text=pgettext_lazy(\n             'help text for MyThing model', 'This is the help text'))\n \n-will appear in the .po file as:\n+will appear in the ``.po`` file as:\n \n .. code-block:: po\n \n@@ -333,7 +351,7 @@ name::\n \n         class Meta:\n             verbose_name = _('my thing')\n-            verbose_name_plural = _('mythings')\n+            verbose_name_plural = _('my things')\n \n Notes on model classes translation\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n@@ -398,7 +416,7 @@ strings when ``result`` itself is used in a string (usually at template\n rendering time).\n \n Localized names of languages\n-============================\n+----------------------------\n \n .. function:: get_language_info\n \n@@ -421,8 +439,8 @@ Similar access to this information is available for template code. See below.\n \n .. _specifying-translation-strings-in-template-code:\n \n-Specifying translation strings: In template code\n-================================================\n+Internationalization: in template code\n+======================================\n \n .. highlightlang:: html+django\n \n@@ -672,17 +690,17 @@ There are also simple filters available for convenience:\n \n .. _Django templates: ../templates_python/\n \n-Specifying translation strings: In JavaScript code\n-==================================================\n+Internationalization: in JavaScript code\n+========================================\n \n .. highlightlang:: python\n \n Adding translations to JavaScript poses some problems:\n \n * JavaScript code doesn't have access to a ``gettext`` implementation.\n \n-* JavaScript code doesn't have access to .po or .mo files; they need to be\n-  delivered by the server.\n+* JavaScript code doesn't have access to ``.po`` or ``.mo`` files; they need to\n+  be delivered by the server.\n \n * The translation catalogs for JavaScript should be kept as small as\n   possible.\n@@ -700,12 +718,12 @@ The ``javascript_catalog`` view\n \n .. function:: javascript_catalog(request, domain='djangojs', packages=None)\n \n-The main solution to these problems is the :meth:`django.views.i18n.javascript_catalog`\n-view, which sends out a JavaScript code library with functions that mimic the\n-``gettext`` interface, plus an array of translation strings. Those translation\n-strings are taken from applications or Django core, according to what you\n-specify in either the info_dict or the URL. Paths listed in\n-:setting:`LOCALE_PATHS` are also included.\n+The main solution to these problems is the\n+:meth:`django.views.i18n.javascript_catalog` view, which sends out a JavaScript\n+code library with functions that mimic the ``gettext`` interface, plus an array\n+of translation strings. Those translation strings are taken from applications or\n+Django core, according to what you specify in either the ``info_dict`` or the\n+URL. Paths listed in :setting:`LOCALE_PATHS` are also included.\n \n You hook it up like this::\n \n@@ -815,8 +833,8 @@ to produce proper pluralizations).\n \n .. _url-internationalization:\n \n-Specifying translation strings: In URL patterns\n-===============================================\n+Internationalization: in URL patterns\n+=====================================\n \n ..  versionadded:: 1.4\n \n@@ -922,9 +940,9 @@ URL patterns can also be marked translatable using the\n     )\n \n \n-After you've created the translations (see :doc:`localization` for more\n-information), the :func:`~django.core.urlresolvers.reverse` function will\n-return the URL in the active language. Example::\n+After you've created the translations, the\n+:func:`~django.core.urlresolvers.reverse` function will return the URL in the\n+active language. Example::\n \n     from django.core.urlresolvers import reverse\n     from django.utils.translation import activate\n@@ -971,10 +989,242 @@ template tag. It enables the given language in the enclosed template section:\n \n The :ttag:`language` tag expects the language code as the only argument.\n \n+.. _how-to-create-language-files:\n+\n+Localization: how to create language files\n+==========================================\n+\n+Once the string literals of an application have been tagged for later\n+translation, the translation themselves need to be written (or obtained). Here's\n+how that works.\n+\n+.. _locale-restrictions:\n+\n+.. admonition:: Locale restrictions\n+\n+    Django does not support localizing your application into a locale for which\n+    Django itself has not been translated. In this case, it will ignore your\n+    translation files. If you were to try this and Django supported it, you\n+    would inevitably see a mixture of translated strings (from your application)\n+    and English strings (from Django itself). If you want to support a locale\n+    for your application that is not already part of Django, you'll need to make\n+    at least a minimal translation of the Django core.\n+\n+    A good starting point is to copy the Django English ``.po`` file and to\n+    translate at least some :term:`translation strings <translation string>`.\n+\n+Message files\n+-------------\n+\n+The first step is to create a :term:`message file` for a new language. A message\n+file is a plain-text file, representing a single language, that contains all\n+available translation strings and how they should be represented in the given\n+language. Message files have a ``.po`` file extension.\n+\n+Django comes with a tool, :djadmin:`django-admin.py makemessages\n+<makemessages>`, that automates the creation and upkeep of these files.\n+\n+.. admonition:: Gettext utilities\n+\n+    The ``makemessages`` command (and ``compilemessages`` discussed later) use\n+    commands from the GNU gettext toolset: ``xgettext``, ``msgfmt``,\n+    ``msgmerge`` and ``msguniq``.\n+\n+    .. versionchanged:: 1.2\n+\n+    The minimum version of the ``gettext`` utilities supported is 0.15.\n+\n+To create or update a message file, run this command::\n+\n+    django-admin.py makemessages -l de\n+\n+...where ``de`` is the language code for the message file you want to create.\n+The language code, in this case, is in :term:`locale format<locale name>`. For\n+example, it's ``pt_BR`` for Brazilian Portuguese and ``de_AT`` for Austrian\n+German.\n+\n+The script should be run from one of two places:\n+\n+* The root directory of your Django project.\n+* The root directory of your Django app.\n+\n+The script runs over your project source tree or your application source tree\n+and pulls out all strings marked for translation. It creates (or updates) a\n+message file in the directory ``locale/LANG/LC_MESSAGES``. In the ``de``\n+example, the file will be ``locale/de/LC_MESSAGES/django.po``.\n+\n+By default :djadmin:`django-admin.py makemessages <makemessages>` examines every\n+file that has the ``.html`` or ``.txt`` file extension. In case you want to\n+override that default, use the ``--extension`` or ``-e`` option to specify the\n+file extensions to examine::\n+\n+    django-admin.py makemessages -l de -e txt\n+\n+Separate multiple extensions with commas and/or use ``-e`` or ``--extension``\n+multiple times::\n+\n+    django-admin.py makemessages -l de -e html,txt -e xml\n+\n+.. warning::\n+\n+    When :ref:`creating message files from JavaScript source code\n+    <creating-message-files-from-js-code>` you need to use the special\n+    'djangojs' domain, **not** ``-e js``.\n+\n+.. admonition:: No gettext?\n+\n+    If you don't have the ``gettext`` utilities installed,\n+    :djadmin:`makemessages` will create empty files. If that's the case, either\n+    install the ``gettext`` utilities or just copy the English message file\n+    (``locale/en/LC_MESSAGES/django.po``) if available and use it as a starting\n+    point; it's just an empty translation file.\n+\n+.. admonition:: Working on Windows?\n+\n+   If you're using Windows and need to install the GNU gettext utilities so\n+   :djadmin:`makemessages` works, see :ref:`gettext_on_windows` for more\n+   information.\n+\n+The format of ``.po`` files is straightforward. Each ``.po`` file contains a\n+small bit of metadata, such as the translation maintainer's contact\n+information, but the bulk of the file is a list of **messages** -- simple\n+mappings between translation strings and the actual translated text for the\n+particular language.\n+\n+For example, if your Django app contained a translation string for the text\n+``\"Welcome to my site.\"``, like so::\n+\n+    _(\"Welcome to my site.\")\n+\n+...then :djadmin:`django-admin.py makemessages <makemessages>` will have created\n+a ``.po`` file containing the following snippet -- a message::\n+\n+    #: path/to/python/module.py:23\n+    msgid \"Welcome to my site.\"\n+    msgstr \"\"\n+\n+A quick explanation:\n+\n+* ``msgid`` is the translation string, which appears in the source. Don't\n+  change it.\n+* ``msgstr`` is where you put the language-specific translation. It starts\n+  out empty, so it's your responsibility to change it. Make sure you keep\n+  the quotes around your translation.\n+* As a convenience, each message includes, in the form of a comment line\n+  prefixed with ``#`` and located above the ``msgid`` line, the filename and\n+  line number from which the translation string was gleaned.\n+\n+Long messages are a special case. There, the first string directly after the\n+``msgstr`` (or ``msgid``) is an empty string. Then the content itself will be\n+written over the next few lines as one string per line. Those strings are\n+directly concatenated. Don't forget trailing spaces within the strings;\n+otherwise, they'll be tacked together without whitespace!\n+\n+.. admonition:: Mind your charset\n+\n+    When creating a PO file with your favorite text editor, first edit\n+    the charset line (search for ``\"CHARSET\"``) and set it to the charset\n+    you'll be using to edit the content. Due to the way the ``gettext`` tools\n+    work internally and because we want to allow non-ASCII source strings in\n+    Django's core and your applications, you **must** use UTF-8 as the encoding\n+    for your PO file. This means that everybody will be using the same\n+    encoding, which is important when Django processes the PO files.\n+\n+To reexamine all source code and templates for new translation strings and\n+update all message files for **all** languages, run this::\n+\n+    django-admin.py makemessages -a\n+\n+Compiling message files\n+-----------------------\n+\n+After you create your message file -- and each time you make changes to it --\n+you'll need to compile it into a more efficient form, for use by ``gettext``. Do\n+this with the :djadmin:`django-admin.py compilemessages <compilemessages>`\n+utility.\n+\n+This tool runs over all available ``.po`` files and creates ``.mo`` files, which\n+are binary files optimized for use by ``gettext``. In the same directory from\n+which you ran :djadmin:`django-admin.py makemessages <makemessages>`, run :djadmin:`django-admin.py compilemessages <compilemessages>` like this::\n+\n+   django-admin.py compilemessages\n+\n+That's it. Your translations are ready for use.\n+\n+.. admonition:: Working on Windows?\n+\n+   If you're using Windows and need to install the GNU gettext utilities so\n+   :djadmin:`django-admin.py compilemessages <compilemessages>` works see\n+   :ref:`gettext_on_windows` for more information.\n+\n+.. admonition:: .po files: Encoding and BOM usage.\n+\n+   Django only supports ``.po`` files encoded in UTF-8 and without any BOM\n+   (Byte Order Mark) so if your text editor adds such marks to the beginning of\n+   files by default then you will need to reconfigure it.\n+\n+.. _creating-message-files-from-js-code:\n+\n+Creating message files from JavaScript source code\n+--------------------------------------------------\n+\n+You create and update the message files the same way as the other Django message\n+files -- with the :djadmin:`django-admin.py makemessages <makemessages>` tool.\n+The only difference is you need to explicitly specify what in gettext parlance\n+is known as a domain in this case the ``djangojs`` domain, by providing a ``-d\n+djangojs`` parameter, like this::\n+\n+    django-admin.py makemessages -d djangojs -l de\n+\n+This would create or update the message file for JavaScript for German. After\n+updating message files, just run :djadmin:`django-admin.py compilemessages\n+<compilemessages>` the same way as you do with normal Django message files.\n+\n+.. _gettext_on_windows:\n+\n+``gettext`` on Windows\n+----------------------\n+\n+This is only needed for people who either want to extract message IDs or compile\n+message files (``.po``). Translation work itself just involves editing existing\n+files of this type, but if you want to create your own message files, or want to\n+test or compile a changed message file, you will need the ``gettext`` utilities:\n+\n+* Download the following zip files from the GNOME servers\n+  http://ftp.gnome.org/pub/gnome/binaries/win32/dependencies/ or from one\n+  of its mirrors_\n+\n+  * ``gettext-runtime-X.zip``\n+  * ``gettext-tools-X.zip``\n+\n+  ``X`` is the version number, we are requiring ``0.15`` or higher.\n+\n+* Extract the contents of the ``bin\\`` directories in both files to the\n+  same folder on your system (i.e. ``C:\\Program Files\\gettext-utils``)\n+\n+* Update the system PATH:\n+\n+  * ``Control Panel > System > Advanced > Environment Variables``.\n+  * In the ``System variables`` list, click ``Path``, click ``Edit``.\n+  * Add ``;C:\\Program Files\\gettext-utils\\bin`` at the end of the\n+    ``Variable value`` field.\n+\n+.. _mirrors: http://ftp.gnome.org/pub/GNOME/MIRRORS\n+\n+You may also use ``gettext`` binaries you have obtained elsewhere, so long as\n+the ``xgettext --version`` command works properly. Do not attempt to use Django\n+translation utilities with a ``gettext`` package if the command ``xgettext\n+--version`` entered at a Windows command prompt causes a popup window saying\n+\"xgettext.exe has generated errors and will be closed by Windows\".\n+\n+\n+Miscellaneous\n+=============\n+\n .. _set_language-redirect-view:\n \n The ``set_language`` redirect view\n-==================================\n+----------------------------------\n \n .. highlightlang:: python\n \n@@ -1019,3 +1269,293 @@ Here's example HTML template code:\n     </select>\n     <input type=\"submit\" value=\"Go\" />\n     </form>\n+\n+Using translations outside views and templates\n+----------------------------------------------\n+\n+While Django provides a rich set of i18n tools for use in views and templates,\n+it does not restrict the usage to Django-specific code. The Django translation\n+mechanisms can be used to translate arbitrary texts to any language that is\n+supported by Django (as long as an appropriate translation catalog exists, of\n+course). You can load a translation catalog, activate it and translate text to\n+language of your choice, but remember to switch back to original language, as\n+activating a translation catalog is done on per-thread basis and such change\n+will affect code running in the same thread.\n+\n+For example::\n+\n+    from django.utils import translation\n+    def welcome_translated(language):\n+        cur_language = translation.get_language()\n+        try:\n+            translation.activate(language)\n+            text = translation.ugettext('welcome')\n+        finally:\n+            translation.activate(cur_language)\n+        return text\n+\n+Calling this function with the value 'de' will give you ``\"Willkommen\"``,\n+regardless of :setting:`LANGUAGE_CODE` and language set by middleware.\n+\n+Functions of particular interest are ``django.utils.translation.get_language()``\n+which returns the language used in the current thread,\n+``django.utils.translation.activate()`` which activates a translation catalog\n+for the current thread, and ``django.utils.translation.check_for_language()``\n+which checks if the given language is supported by Django.\n+\n+Implementation notes\n+====================\n+\n+.. _specialties-of-django-i18n:\n+\n+Specialties of Django translation\n+---------------------------------\n+\n+Django's translation machinery uses the standard ``gettext`` module that comes\n+with Python. If you know ``gettext``, you might note these specialties in the\n+way Django does translation:\n+\n+* The string domain is ``django`` or ``djangojs``. This string domain is\n+  used to differentiate between different programs that store their data\n+  in a common message-file library (usually ``/usr/share/locale/``). The\n+  ``django`` domain is used for python and template translation strings\n+  and is loaded into the global translation catalogs. The ``djangojs``\n+  domain is only used for JavaScript translation catalogs to make sure\n+  that those are as small as possible.\n+* Django doesn't use ``xgettext`` alone. It uses Python wrappers around\n+  ``xgettext`` and ``msgfmt``. This is mostly for convenience.\n+\n+.. _how-django-discovers-language-preference:\n+\n+How Django discovers language preference\n+----------------------------------------\n+\n+Once you've prepared your translations -- or, if you just want to use the\n+translations that come with Django -- you'll just need to activate translation\n+for your app.\n+\n+Behind the scenes, Django has a very flexible model of deciding which language\n+should be used -- installation-wide, for a particular user, or both.\n+\n+To set an installation-wide language preference, set :setting:`LANGUAGE_CODE`.\n+Django uses this language as the default translation -- the final attempt if no\n+other translator finds a translation.\n+\n+If all you want to do is run Django with your native language, and a language\n+file is available for it, all you need to do is set :setting:`LANGUAGE_CODE`.\n+\n+If you want to let each individual user specify which language he or she\n+prefers, use ``LocaleMiddleware``. ``LocaleMiddleware`` enables language\n+selection based on data from the request. It customizes content for each user.\n+\n+To use ``LocaleMiddleware``, add ``'django.middleware.locale.LocaleMiddleware'``\n+to your :setting:`MIDDLEWARE_CLASSES` setting. Because middleware order\n+matters, you should follow these guidelines:\n+\n+* Make sure it's one of the first middlewares installed.\n+* It should come after ``SessionMiddleware``, because ``LocaleMiddleware``\n+  makes use of session data. And it should come before ``CommonMiddleware``\n+  because ``CommonMiddleware`` needs an activated language in order\n+  to resolve the requested URL.\n+* If you use ``CacheMiddleware``, put ``LocaleMiddleware`` after it.\n+\n+For example, your :setting:`MIDDLEWARE_CLASSES` might look like this::\n+\n+    MIDDLEWARE_CLASSES = (\n+       'django.contrib.sessions.middleware.SessionMiddleware',\n+       'django.middleware.locale.LocaleMiddleware',\n+       'django.middleware.common.CommonMiddleware',\n+    )\n+\n+(For more on middleware, see the :doc:`middleware documentation\n+</topics/http/middleware>`.)\n+\n+``LocaleMiddleware`` tries to determine the user's language preference by\n+following this algorithm:\n+\n+.. versionchanged:: 1.4\n+\n+* First, it looks for the language prefix in the requested URL.  This is\n+  only performed when you are using the ``i18n_patterns`` function in your\n+  root URLconf. See :ref:`url-internationalization` for more information\n+  about the language prefix and how to internationalize URL patterns.\n+\n+* Failing that, it looks for a ``django_language`` key in the current\n+  user's session.\n+\n+* Failing that, it looks for a cookie.\n+\n+  The name of the cookie used is set by the :setting:`LANGUAGE_COOKIE_NAME`\n+  setting. (The default name is ``django_language``.)\n+\n+* Failing that, it looks at the ``Accept-Language`` HTTP header. This\n+  header is sent by your browser and tells the server which language(s) you\n+  prefer, in order by priority. Django tries each language in the header\n+  until it finds one with available translations.\n+\n+* Failing that, it uses the global :setting:`LANGUAGE_CODE` setting.\n+\n+.. _locale-middleware-notes:\n+\n+Notes:\n+\n+* In each of these places, the language preference is expected to be in the\n+  standard :term:`language format<language code>`, as a string. For example,\n+  Brazilian Portuguese is ``pt-br``.\n+\n+* If a base language is available but the sublanguage specified is not,\n+  Django uses the base language. For example, if a user specifies ``de-at``\n+  (Austrian German) but Django only has ``de`` available, Django uses\n+  ``de``.\n+\n+* Only languages listed in the :setting:`LANGUAGES` setting can be selected.\n+  If you want to restrict the language selection to a subset of provided\n+  languages (because your application doesn't provide all those languages),\n+  set :setting:`LANGUAGES` to a list of languages. For example::\n+\n+      LANGUAGES = (\n+        ('de', _('German')),\n+        ('en', _('English')),\n+      )\n+\n+  This example restricts languages that are available for automatic\n+  selection to German and English (and any sublanguage, like de-ch or\n+  en-us).\n+\n+* If you define a custom :setting:`LANGUAGES` setting, as explained in the\n+  previous bullet, it's OK to mark the languages as translation strings\n+  -- but use a \"dummy\" ``ugettext()`` function, not the one in\n+  ``django.utils.translation``. You should *never* import\n+  ``django.utils.translation`` from within your settings file, because that\n+  module in itself depends on the settings, and that would cause a circular\n+  import.\n+\n+  The solution is to use a \"dummy\" ``ugettext()`` function. Here's a sample\n+  settings file::\n+\n+      ugettext = lambda s: s\n+\n+      LANGUAGES = (\n+          ('de', ugettext('German')),\n+          ('en', ugettext('English')),\n+      )\n+\n+  With this arrangement, :djadmin:`django-admin.py makemessages <makemessages>`\n+  will still find and mark these strings for translation, but the translation\n+  won't happen at runtime -- so you'll have to remember to wrap the languages in\n+  the *real* ``ugettext()`` in any code that uses :setting:`LANGUAGES` at\n+  runtime.\n+\n+* The ``LocaleMiddleware`` can only select languages for which there is a\n+  Django-provided base translation. If you want to provide translations\n+  for your application that aren't already in the set of translations\n+  in Django's source tree, you'll want to provide at least a basic\n+  one as described in the :ref:`Locale restrictions<locale-restrictions>`\n+  note.\n+\n+Once ``LocaleMiddleware`` determines the user's preference, it makes this\n+preference available as ``request.LANGUAGE_CODE`` for each\n+:class:`~django.http.HttpRequest`. Feel free to read this value in your view\n+code. Here's a simple example::\n+\n+    def hello_world(request, count):\n+        if request.LANGUAGE_CODE == 'de-at':\n+            return HttpResponse(\"You prefer to read Austrian German.\")\n+        else:\n+            return HttpResponse(\"You prefer to read another language.\")\n+\n+Note that, with static (middleware-less) translation, the language is in\n+``settings.LANGUAGE_CODE``, while with dynamic (middleware) translation, it's\n+in ``request.LANGUAGE_CODE``.\n+\n+.. _settings file: ../settings/\n+.. _middleware documentation: ../middleware/\n+.. _session: ../sessions/\n+.. _request object: ../request_response/#httprequest-objects\n+\n+.. _how-django-discovers-translations:\n+\n+How Django discovers translations\n+---------------------------------\n+\n+At runtime, Django builds an in-memory unified catalog of literals-translations.\n+To achieve this it looks for translations by following this algorithm regarding\n+the order in which it examines the different file paths to load the compiled\n+:term:`message files <message file>` (``.mo``) and the precedence of multiple\n+translations for the same literal:\n+\n+1. The directories listed in :setting:`LOCALE_PATHS` have the highest\n+   precedence, with the ones appearing first having higher precedence than\n+   the ones appearing later.\n+2. Then, it looks for and uses if it exists a ``locale`` directory in each\n+   of the installed apps listed in :setting:`INSTALLED_APPS`.  The ones\n+   appearing first have higher precedence than the ones appearing later.\n+3. Then, it looks for a ``locale`` directory in the project directory, or\n+   more accurately, in the directory containing your settings file.\n+4. Finally, the Django-provided base translation in ``django/conf/locale``\n+   is used as a fallback.\n+\n+.. deprecated:: 1.3\n+\n+    Lookup in the ``locale`` subdirectory of the directory containing your\n+    settings file (item 3 above) is deprecated since the 1.3 release and will be\n+    removed in Django 1.5. You can use the :setting:`LOCALE_PATHS` setting\n+    instead, by listing the absolute filesystem path of such ``locale``\n+    directory in the setting value.\n+\n+.. seealso::\n+\n+    The translations for literals included in JavaScript assets are looked up\n+    following a similar but not identical algorithm. See the\n+    :ref:`javascript_catalog view documentation <javascript_catalog-view>` for\n+    more details.\n+\n+In all cases the name of the directory containing the translation is expected to\n+be named using :term:`locale name` notation. E.g. ``de``, ``pt_BR``, ``es_AR``,\n+etc.\n+\n+This way, you can write applications that include their own translations, and\n+you can override base translations in your project path. Or, you can just build\n+a big project out of several apps and put all translations into one big common\n+message file specific to the project you are composing. The choice is yours.\n+\n+.. note::\n+\n+    If you're using manually configured settings, as described in\n+    :ref:`settings-without-django-settings-module`, the ``locale`` directory in\n+    the project directory will not be examined, since Django loses the ability\n+    to work out the location of the project directory. (Django normally uses the\n+    location of the settings file to determine this, and a settings file doesn't\n+    exist if you're manually configuring your settings.)\n+\n+All message file repositories are structured the same way. They are:\n+\n+* All paths listed in :setting:`LOCALE_PATHS` in your settings file are\n+  searched for ``<language>/LC_MESSAGES/django.(po|mo)``\n+* ``$PROJECTPATH/locale/<language>/LC_MESSAGES/django.(po|mo)`` --\n+  deprecated, see above.\n+* ``$APPPATH/locale/<language>/LC_MESSAGES/django.(po|mo)``\n+* ``$PYTHONPATH/django/conf/locale/<language>/LC_MESSAGES/django.(po|mo)``\n+\n+To create message files, you use the :djadmin:`django-admin.py makemessages <makemessages>`\n+tool. You only need to be in the same directory where the ``locale/`` directory\n+is located. And you use :djadmin:`django-admin.py compilemessages <compilemessages>`\n+to produce the binary ``.mo`` files that are used by ``gettext``.\n+\n+You can also run :djadmin:`django-admin.py compilemessages\n+--settings=path.to.settings <compilemessages>` to make the compiler process all\n+the directories in your :setting:`LOCALE_PATHS` setting.\n+\n+Finally, you should give some thought to the structure of your translation\n+files. If your applications need to be delivered to other users and will be used\n+in other projects, you might want to use app-specific translations. But using\n+app-specific translations and project-specific translations could produce weird\n+problems with :djadmin:`makemessages`: it will traverse all directories below\n+the current path and so might put message IDs into a unified, common message\n+file for the current project that are already in application message files.\n+\n+The easiest way out is to store applications that are not part of the project\n+(and so carry their own translations) outside the project tree. That way,\n+:djadmin:`django-admin.py makemessages <makemessages>`, when ran on a project\n+level will only extract strings that are connected to your explicit project and\n+not strings that are distributed independently.",
            "previous_filename": "docs/topics/i18n/internationalization.txt"
        }
    ],
    "stats": {
        "total": 1711,
        "additions": 840,
        "deletions": 871
    }
}