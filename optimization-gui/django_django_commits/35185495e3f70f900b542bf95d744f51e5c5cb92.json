{
    "author": "claudep",
    "message": "Fixed #17066 -- Prevented TypeError in GeoIP.__del__\n\nWhen garbaging GeoIP instances, it happens that GeoIP_delete is\nalready None.\nThanks mitar for the report and stefanw for tests.",
    "sha": "35185495e3f70f900b542bf95d744f51e5c5cb92",
    "files": [
        {
            "sha": "4b8b6e1ed3a28446dcc11d2e6a70379a4d2e6a14",
            "filename": "django/contrib/gis/geoip/base.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/35185495e3f70f900b542bf95d744f51e5c5cb92/django%2Fcontrib%2Fgis%2Fgeoip%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/35185495e3f70f900b542bf95d744f51e5c5cb92/django%2Fcontrib%2Fgis%2Fgeoip%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeoip%2Fbase.py?ref=35185495e3f70f900b542bf95d744f51e5c5cb92",
            "patch": "@@ -125,6 +125,8 @@ def __init__(self, path=None, cache=0, country=None, city=None):\n \n     def __del__(self):\n         # Cleaning any GeoIP file handles lying around.\n+        if GeoIP_delete is None:\n+            return\n         if self._country: GeoIP_delete(self._country)\n         if self._city: GeoIP_delete(self._city)\n "
        }
    ],
    "stats": {
        "total": 2,
        "additions": 2,
        "deletions": 0
    }
}