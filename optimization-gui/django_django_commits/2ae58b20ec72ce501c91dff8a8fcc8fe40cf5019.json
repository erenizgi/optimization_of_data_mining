{
    "author": "aaugustin",
    "message": "[py3] Fixed egg template loader.",
    "sha": "2ae58b20ec72ce501c91dff8a8fcc8fe40cf5019",
    "files": [
        {
            "sha": "7e35b34ec4e4a424db442ce4059583c94573876e",
            "filename": "django/template/loaders/eggs.py",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/2ae58b20ec72ce501c91dff8a8fcc8fe40cf5019/django%2Ftemplate%2Floaders%2Feggs.py",
            "raw_url": "https://github.com/django/django/raw/2ae58b20ec72ce501c91dff8a8fcc8fe40cf5019/django%2Ftemplate%2Floaders%2Feggs.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Floaders%2Feggs.py?ref=2ae58b20ec72ce501c91dff8a8fcc8fe40cf5019",
            "patch": "@@ -1,13 +1,15 @@\n # Wrapper for loading templates from eggs via pkg_resources.resource_string.\n+from __future__ import unicode_literals\n \n try:\n     from pkg_resources import resource_string\n except ImportError:\n     resource_string = None\n \n+from django.conf import settings\n from django.template.base import TemplateDoesNotExist\n from django.template.loader import BaseLoader\n-from django.conf import settings\n+from django.utils import six\n \n class Loader(BaseLoader):\n     is_usable = resource_string is not None\n@@ -22,9 +24,12 @@ def load_template_source(self, template_name, template_dirs=None):\n             pkg_name = 'templates/' + template_name\n             for app in settings.INSTALLED_APPS:\n                 try:\n-                    return (resource_string(app, pkg_name).decode(settings.FILE_CHARSET), 'egg:%s:%s' % (app, pkg_name))\n-                except:\n-                    pass\n+                    resource = resource_string(app, pkg_name)\n+                except Exception:\n+                    continue\n+                if not six.PY3:\n+                    resource = resource.decode(settings.FILE_CHARSET)\n+                return (resource, 'egg:%s:%s' % (app, pkg_name))\n         raise TemplateDoesNotExist(template_name)\n \n _loader = Loader()"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 9,
        "deletions": 4
    }
}