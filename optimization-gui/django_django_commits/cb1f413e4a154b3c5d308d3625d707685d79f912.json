{
    "author": "ramiro",
    "message": "Fixed #16372 -- Changed strategy implemented in r16369 to fix #14049 to avoid affecting the statistics of test cases ran/skipped kept by unittest. Thanks zimnyx for the report.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16579 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "cb1f413e4a154b3c5d308d3625d707685d79f912",
    "files": [
        {
            "sha": "5a06e3f6349e453319f34486623e0a2f74628576",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 20,
            "deletions": 21,
            "changes": 41,
            "blob_url": "https://github.com/django/django/blob/cb1f413e4a154b3c5d308d3625d707685d79f912/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/cb1f413e4a154b3c5d308d3625d707685d79f912/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=cb1f413e4a154b3c5d308d3625d707685d79f912",
            "patch": "@@ -283,28 +283,27 @@ def __call__(self, result=None):\n         include a call to super().setUp().\n         \"\"\"\n         testMethod = getattr(self, self._testMethodName)\n-        if (getattr(self.__class__, \"__unittest_skip__\", False) or\n-            getattr(testMethod, \"__unittest_skip__\", False)):\n-            return\n-\n-        self.client = self.client_class()\n-        try:\n-            self._pre_setup()\n-        except (KeyboardInterrupt, SystemExit):\n-            raise\n-        except Exception:\n-            import sys\n-            result.addError(self, sys.exc_info())\n-            return\n+        skipped = (getattr(self.__class__, \"__unittest_skip__\", False) or\n+            getattr(testMethod, \"__unittest_skip__\", False))\n+\n+        if not skipped:\n+            self.client = self.client_class()\n+            try:\n+                self._pre_setup()\n+            except (KeyboardInterrupt, SystemExit):\n+                raise\n+            except Exception:\n+                result.addError(self, sys.exc_info())\n+                return\n         super(TransactionTestCase, self).__call__(result)\n-        try:\n-            self._post_teardown()\n-        except (KeyboardInterrupt, SystemExit):\n-            raise\n-        except Exception:\n-            import sys\n-            result.addError(self, sys.exc_info())\n-            return\n+        if not skipped:\n+            try:\n+                self._post_teardown()\n+            except (KeyboardInterrupt, SystemExit):\n+                raise\n+            except Exception:\n+                result.addError(self, sys.exc_info())\n+                return\n \n     def _post_teardown(self):\n         \"\"\" Performs any post-test things. This includes:"
        }
    ],
    "stats": {
        "total": 41,
        "additions": 20,
        "deletions": 21
    }
}