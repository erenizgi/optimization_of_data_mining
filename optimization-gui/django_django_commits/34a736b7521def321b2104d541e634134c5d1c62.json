{
    "author": "claudep",
    "message": "Used pkgutil to get list of backend modules\n\nRefs #18827.",
    "sha": "34a736b7521def321b2104d541e634134c5d1c62",
    "files": [
        {
            "sha": "5fa78fe3509c9d6d26b4ed0c4f458552cd6f7f42",
            "filename": "django/db/utils.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/34a736b7521def321b2104d541e634134c5d1c62/django%2Fdb%2Futils.py",
            "raw_url": "https://github.com/django/django/raw/34a736b7521def321b2104d541e634134c5d1c62/django%2Fdb%2Futils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Futils.py?ref=34a736b7521def321b2104d541e634134c5d1c62",
            "patch": "@@ -1,4 +1,5 @@\n import os\n+import pkgutil\n from threading import local\n \n from django.conf import settings\n@@ -28,9 +29,9 @@ def load_backend(backend_name):\n         # listing all possible (built-in) database backends.\n         backend_dir = os.path.join(os.path.dirname(__file__), 'backends')\n         try:\n-            builtin_backends = [f for f in os.listdir(backend_dir)\n-                    if os.path.isdir(os.path.join(backend_dir, f))\n-                    and not (f.startswith('.') or f in ('__pycache__', 'dummy'))]\n+            builtin_backends = [\n+                name for _, name, ispkg in pkgutil.iter_modules([backend_dir])\n+                if ispkg and name != 'dummy']\n         except EnvironmentError:\n             builtin_backends = []\n         if backend_name not in ['django.db.backends.%s' % b for b in"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}