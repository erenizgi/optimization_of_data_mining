{
    "author": "jezdez",
    "message": "Fixed #10080 -- Slightly extended the fix made in r10401 by also taking command line options into account that don't have have a default set. Thanks, Claude Paroz.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17467 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "538257b4ae5cd8a5e3b9fc79c167294560101e18",
    "files": [
        {
            "sha": "8e8330484d2fe3a1561bf24d808c54cf2e24d048",
            "filename": "django/core/management/__init__.py",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/538257b4ae5cd8a5e3b9fc79c167294560101e18/django%2Fcore%2Fmanagement%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/538257b4ae5cd8a5e3b9fc79c167294560101e18/django%2Fcore%2Fmanagement%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2F__init__.py?ref=538257b4ae5cd8a5e3b9fc79c167294560101e18",
            "patch": "@@ -139,9 +139,12 @@ def call_command(name, *args, **options):\n     # when the script runs from the command line, but since call_command can\n     # be called programatically, we need to simulate the loading and handling\n     # of defaults (see #10080 for details).\n-    defaults = dict([(o.dest, o.default)\n-                     for o in klass.option_list\n-                     if o.default is not NO_DEFAULT])\n+    defaults = {}\n+    for opt in klass.option_list:\n+        if opt.default is NO_DEFAULT:\n+            defaults[opt.dest] = None\n+        else:\n+            defaults[opt.dest] = opt.default\n     defaults.update(options)\n \n     return klass.execute(*args, **defaults)"
        },
        {
            "sha": "4ad5579e1efc0cd7b62a373d963e0a839026fd1e",
            "filename": "tests/modeltests/user_commands/management/commands/dance.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/538257b4ae5cd8a5e3b9fc79c167294560101e18/tests%2Fmodeltests%2Fuser_commands%2Fmanagement%2Fcommands%2Fdance.py",
            "raw_url": "https://github.com/django/django/raw/538257b4ae5cd8a5e3b9fc79c167294560101e18/tests%2Fmodeltests%2Fuser_commands%2Fmanagement%2Fcommands%2Fdance.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fuser_commands%2Fmanagement%2Fcommands%2Fdance.py?ref=538257b4ae5cd8a5e3b9fc79c167294560101e18",
            "patch": "@@ -9,8 +9,10 @@ class Command(BaseCommand):\n     requires_model_validation = True\n \n     option_list =[\n-        make_option(\"-s\", \"--style\", default=\"Rock'n'Roll\")\n+        make_option(\"-s\", \"--style\", default=\"Rock'n'Roll\"),\n+        make_option(\"-x\", \"--example\")\n     ]\n \n     def handle(self, *args, **options):\n+        example = options[\"example\"]\n         self.stdout.write(\"I don't feel like dancing %s.\" % options[\"style\"])"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 9,
        "deletions": 4
    }
}