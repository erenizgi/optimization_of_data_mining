{
    "author": "claudep",
    "message": "Fixed #19107 -- Workarounded message-encoding bug on Python < 2.6.6\n\nThanks Bernardo Pires for the report.",
    "sha": "501d793398c3ecc3c8a54475d07609cf34643553",
    "files": [
        {
            "sha": "98ab3c907535bbf9672abf5d6f7687abc5608317",
            "filename": "django/core/mail/message.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/501d793398c3ecc3c8a54475d07609cf34643553/django%2Fcore%2Fmail%2Fmessage.py",
            "raw_url": "https://github.com/django/django/raw/501d793398c3ecc3c8a54475d07609cf34643553/django%2Fcore%2Fmail%2Fmessage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fmessage.py?ref=501d793398c3ecc3c8a54475d07609cf34643553",
            "patch": "@@ -3,6 +3,7 @@\n import mimetypes\n import os\n import random\n+import sys\n import time\n from email import charset as Charset, encoders as Encoders\n from email.generator import Generator\n@@ -138,6 +139,9 @@ def as_string(self, unixfrom=False):\n         \"\"\"\n         fp = six.StringIO()\n         g = Generator(fp, mangle_from_ = False)\n+        if sys.version_info < (2, 6, 6) and isinstance(self._payload, six.text_type):\n+            # Workaround for http://bugs.python.org/issue1368247\n+            self._payload = self._payload.encode(self._charset.output_charset)\n         g.flatten(self, unixfrom=unixfrom)\n         return fp.getvalue()\n "
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}