{
    "author": "jezdez",
    "message": "Fixed #15750 -- Handle empty mail server credentials gracefully. Thanks, LeandroSouza and bedmondmark.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16494 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "3bd23ee96fdff0572568eaa42d69c1ce2e46cc18",
    "files": [
        {
            "sha": "3ee283b5f1f786ace7d205ef64e6dbab992a799a",
            "filename": "django/core/mail/backends/smtp.py",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/3bd23ee96fdff0572568eaa42d69c1ce2e46cc18/django%2Fcore%2Fmail%2Fbackends%2Fsmtp.py",
            "raw_url": "https://github.com/django/django/raw/3bd23ee96fdff0572568eaa42d69c1ce2e46cc18/django%2Fcore%2Fmail%2Fbackends%2Fsmtp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fbackends%2Fsmtp.py?ref=3bd23ee96fdff0572568eaa42d69c1ce2e46cc18",
            "patch": "@@ -18,8 +18,14 @@ def __init__(self, host=None, port=None, username=None, password=None,\n         super(EmailBackend, self).__init__(fail_silently=fail_silently)\n         self.host = host or settings.EMAIL_HOST\n         self.port = port or settings.EMAIL_PORT\n-        self.username = username or settings.EMAIL_HOST_USER\n-        self.password = password or settings.EMAIL_HOST_PASSWORD\n+        if username is None:\n+            self.username = settings.EMAIL_HOST_USER\n+        else:\n+            self.username = username\n+        if password is None:\n+            self.password = settings.EMAIL_HOST_PASSWORD\n+        else:\n+            self.password = password\n         if use_tls is None:\n             self.use_tls = settings.EMAIL_USE_TLS\n         else:"
        },
        {
            "sha": "08eb7b9f45541a3096a9dad38d857ad559cc18cb",
            "filename": "tests/regressiontests/mail/tests.py",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/3bd23ee96fdff0572568eaa42d69c1ce2e46cc18/tests%2Fregressiontests%2Fmail%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3bd23ee96fdff0572568eaa42d69c1ce2e46cc18/tests%2Fregressiontests%2Fmail%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmail%2Ftests.py?ref=3bd23ee96fdff0572568eaa42d69c1ce2e46cc18",
            "patch": "@@ -635,3 +635,24 @@ def flush_mailbox(self):\n \n     def get_mailbox_content(self):\n         return self.server.get_sink()\n+\n+    @override_settings(EMAIL_HOST_USER=\"not empty username\",\n+                        EMAIL_HOST_PASSWORD=\"not empty password\")\n+    def test_email_authentication_use_settings(self):\n+        backend = smtp.EmailBackend()\n+        self.assertEqual(backend.username, 'not empty username')\n+        self.assertEqual(backend.password, 'not empty password')\n+\n+    @override_settings(EMAIL_HOST_USER=\"not empty username\",\n+                        EMAIL_HOST_PASSWORD=\"not empty password\")\n+    def test_email_authentication_override_settings(self):\n+        backend = smtp.EmailBackend(username='username', password='password')\n+        self.assertEqual(backend.username, 'username')\n+        self.assertEqual(backend.password, 'password')\n+\n+    @override_settings(EMAIL_HOST_USER=\"not empty username\",\n+                        EMAIL_HOST_PASSWORD=\"not empty password\")\n+    def test_email_disabled_authentication(self):\n+        backend = smtp.EmailBackend(username='', password='')\n+        self.assertEqual(backend.username, '')\n+        self.assertEqual(backend.password, '')"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 29,
        "deletions": 2
    }
}