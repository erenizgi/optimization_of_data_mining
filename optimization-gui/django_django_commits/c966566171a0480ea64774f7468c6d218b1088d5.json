{
    "author": "freakboy3742",
    "message": "Fixed #14960 -- Added tests for inclusion tags. Thanks to Julien Phalip for the report, and to avenet and Paul Bissex for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15819 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "c966566171a0480ea64774f7468c6d218b1088d5",
    "files": [
        {
            "sha": "fe5b09520786cd2fe965a8d4d6c0c040626b16f2",
            "filename": "tests/regressiontests/templates/custom.py",
            "status": "modified",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/c966566171a0480ea64774f7468c6d218b1088d5/tests%2Fregressiontests%2Ftemplates%2Fcustom.py",
            "raw_url": "https://github.com/django/django/raw/c966566171a0480ea64774f7468c6d218b1088d5/tests%2Fregressiontests%2Ftemplates%2Fcustom.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Fcustom.py?ref=c966566171a0480ea64774f7468c6d218b1088d5",
            "patch": "@@ -52,3 +52,29 @@ def a_simple_tag_without_parameters(arg):\n         register = template.Library()\n         decorator = register.simple_tag(takes_context=True)\n         self.assertRaises(template.TemplateSyntaxError, decorator, a_simple_tag_without_parameters)\n+\n+    def test_inclusion_tags(self):\n+        c = template.Context({'value': 42})\n+\n+        t = template.Template('{% load custom %}{% inclusion_no_params %}')\n+        self.assertEquals(t.render(c), u'inclusion_no_params - Expected result\\n')\n+\n+        t = template.Template('{% load custom %}{% inclusion_one_param 37 %}')\n+        self.assertEquals(t.render(c), u'inclusion_one_param - Expected result: 37\\n')\n+\n+        t = template.Template('{% load custom %}{% inclusion_explicit_no_context 37 %}')\n+        self.assertEquals(t.render(c), u'inclusion_explicit_no_context - Expected result: 37\\n')\n+\n+        t = template.Template('{% load custom %}{% inclusion_no_params_with_context %}')\n+        self.assertEquals(t.render(c), u'inclusion_no_params_with_context - Expected result (context value: 42)\\n')\n+\n+        t = template.Template('{% load custom %}{% inclusion_params_and_context 37 %}')\n+        self.assertEquals(t.render(c), u'inclusion_params_and_context - Expected result (context value: 42): 37\\n')\n+\n+    def test_inclusion_tag_registration(self):\n+        # Test that the decorators preserve the decorated function's docstring, name and attributes.\n+        self.verify_tag(custom.inclusion_no_params, 'inclusion_no_params')\n+        self.verify_tag(custom.inclusion_one_param, 'inclusion_one_param')\n+        self.verify_tag(custom.inclusion_explicit_no_context, 'inclusion_explicit_no_context')\n+        self.verify_tag(custom.inclusion_no_params_with_context, 'inclusion_no_params_with_context')\n+        self.verify_tag(custom.inclusion_params_and_context, 'inclusion_params_and_context')"
        },
        {
            "sha": "b2e8a1681c37c80a0efc82408c4c1b098df874bb",
            "filename": "tests/regressiontests/templates/templatetags/custom.py",
            "status": "modified",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/django/django/blob/c966566171a0480ea64774f7468c6d218b1088d5/tests%2Fregressiontests%2Ftemplates%2Ftemplatetags%2Fcustom.py",
            "raw_url": "https://github.com/django/django/raw/c966566171a0480ea64774f7468c6d218b1088d5/tests%2Fregressiontests%2Ftemplates%2Ftemplatetags%2Fcustom.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftemplatetags%2Fcustom.py?ref=c966566171a0480ea64774f7468c6d218b1088d5",
            "patch": "@@ -39,3 +39,33 @@ def params_and_context(context, arg):\n     return \"params_and_context - Expected result (context value: %s): %s\" % (context['value'], arg)\n params_and_context.anything = \"Expected params_and_context __dict__\"\n \n+@register.inclusion_tag('inclusion.html')\n+def inclusion_no_params():\n+    \"\"\"Expected inclusion_no_params __doc__\"\"\"\n+    return {\"result\" : \"inclusion_no_params - Expected result\"}\n+inclusion_no_params.anything = \"Expected inclusion_no_params __dict__\"\n+\n+@register.inclusion_tag('inclusion.html')\n+def inclusion_one_param(arg):\n+    \"\"\"Expected inclusion_one_param __doc__\"\"\"\n+    return {\"result\" : \"inclusion_one_param - Expected result: %s\" % arg}\n+inclusion_one_param.anything = \"Expected inclusion_one_param __dict__\"\n+\n+@register.inclusion_tag('inclusion.html', takes_context=False)\n+def inclusion_explicit_no_context(arg):\n+    \"\"\"Expected inclusion_explicit_no_context __doc__\"\"\"\n+    return {\"result\" : \"inclusion_explicit_no_context - Expected result: %s\" % arg}\n+inclusion_explicit_no_context.anything = \"Expected inclusion_explicit_no_context __dict__\"\n+\n+@register.inclusion_tag('inclusion.html', takes_context=True)\n+def inclusion_no_params_with_context(context):\n+    \"\"\"Expected inclusion_no_params_with_context __doc__\"\"\"\n+    return {\"result\" : \"inclusion_no_params_with_context - Expected result (context value: %s)\" % context['value']}\n+inclusion_no_params_with_context.anything = \"Expected inclusion_no_params_with_context __dict__\"\n+\n+@register.inclusion_tag('inclusion.html', takes_context=True)\n+def inclusion_params_and_context(context, arg):\n+    \"\"\"Expected inclusion_params_and_context __doc__\"\"\"\n+    return {\"result\" : \"inclusion_params_and_context - Expected result (context value: %s): %s\" % (context['value'], arg)}\n+inclusion_params_and_context.anything = \"Expected inclusion_params_and_context __dict__\"\n+"
        }
    ],
    "stats": {
        "total": 56,
        "additions": 56,
        "deletions": 0
    }
}