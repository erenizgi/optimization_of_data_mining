{
    "author": "SmileyChris",
    "message": "Fixed #15525 -- Custom template tags loading breaks whenever templatetags is a python file\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16703 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "0f8f46802a172d47971a848227065894efd6a622",
    "files": [
        {
            "sha": "f8aadb34dfb222a457a7650f9a22a7c0c10b8ed5",
            "filename": "django/utils/module_loading.py",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/0f8f46802a172d47971a848227065894efd6a622/django%2Futils%2Fmodule_loading.py",
            "raw_url": "https://github.com/django/django/raw/0f8f46802a172d47971a848227065894efd6a622/django%2Futils%2Fmodule_loading.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fmodule_loading.py?ref=0f8f46802a172d47971a848227065894efd6a622",
            "patch": "@@ -11,10 +11,16 @@ def module_has_submodule(package, module_name):\n         return sys.modules[name] is not None\n     except KeyError:\n         pass\n+    try:\n+        package_path = package.__path__   # No __path__, then not a package.\n+    except AttributeError:\n+        # Since the remainder of this function assumes that we're dealing with\n+        # a package (module with a __path__), so if it's not, then bail here.\n+        return False\n     for finder in sys.meta_path:\n-        if finder.find_module(name, package.__path__):\n+        if finder.find_module(name, package_path):\n             return True\n-    for entry in package.__path__:  # No __path__, then not a package.\n+    for entry in package_path:\n         try:\n             # Try the cached finder.\n             finder = sys.path_importer_cache[entry]"
        },
        {
            "sha": "cbd81c7294b2c2b866ab032947397c056c12d119",
            "filename": "tests/regressiontests/utils/module_loading.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/0f8f46802a172d47971a848227065894efd6a622/tests%2Fregressiontests%2Futils%2Fmodule_loading.py",
            "raw_url": "https://github.com/django/django/raw/0f8f46802a172d47971a848227065894efd6a622/tests%2Fregressiontests%2Futils%2Fmodule_loading.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fmodule_loading.py?ref=0f8f46802a172d47971a848227065894efd6a622",
            "patch": "@@ -18,6 +18,8 @@ def tearDown(self):\n     def test_loader(self):\n         \"Normal module existence can be tested\"\n         test_module = import_module('regressiontests.utils.test_module')\n+        test_no_submodule = import_module(\n+            'regressiontests.utils.test_no_submodule')\n \n         # An importable child\n         self.assertTrue(module_has_submodule(test_module, 'good_module'))\n@@ -40,6 +42,11 @@ def test_loader(self):\n         import types  # causes attempted import of regressiontests.utils.types\n         self.assertFalse(module_has_submodule(sys.modules['regressiontests.utils'], 'types'))\n \n+        # A module which doesn't have a __path__ (so no submodules)\n+        self.assertFalse(module_has_submodule(test_no_submodule, 'anything'))\n+        self.assertRaises(ImportError, import_module,\n+            'regressiontests.utils.test_no_submodule.anything')\n+\n class EggLoader(unittest.TestCase):\n     def setUp(self):\n         self.old_path = sys.path[:]"
        },
        {
            "sha": "3c424ac788d30c5c7452560c4e54363d608265ed",
            "filename": "tests/regressiontests/utils/test_no_submodule.py",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/0f8f46802a172d47971a848227065894efd6a622/tests%2Fregressiontests%2Futils%2Ftest_no_submodule.py",
            "raw_url": "https://github.com/django/django/raw/0f8f46802a172d47971a848227065894efd6a622/tests%2Fregressiontests%2Futils%2Ftest_no_submodule.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Ftest_no_submodule.py?ref=0f8f46802a172d47971a848227065894efd6a622",
            "patch": "@@ -0,0 +1 @@\n+# Used to test for modules which don't have submodules."
        }
    ],
    "stats": {
        "total": 18,
        "additions": 16,
        "deletions": 2
    }
}