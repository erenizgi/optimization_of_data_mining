{
    "author": "kmtracey",
    "message": "Ensure stdin is a tty before handing it to termios, so as to prevent prolems when running under IDEs.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15911 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "3e7ce3c750f05948615474e3f1b6e98ceb35fb75",
    "files": [
        {
            "sha": "ffa75e2c4f45062a262f82bc453eeaa9d819b412",
            "filename": "django/utils/autoreload.py",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/3e7ce3c750f05948615474e3f1b6e98ceb35fb75/django%2Futils%2Fautoreload.py",
            "raw_url": "https://github.com/django/django/raw/3e7ce3c750f05948615474e3f1b6e98ceb35fb75/django%2Futils%2Fautoreload.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fautoreload.py?ref=3e7ce3c750f05948615474e3f1b6e98ceb35fb75",
            "patch": "@@ -73,11 +73,12 @@ def code_changed():\n \n def ensure_echo_on():\n     if termios:\n-        fd = sys.stdin.fileno()\n-        attr_list = termios.tcgetattr(fd)\n-        if not attr_list[3] & termios.ECHO:\n-            attr_list[3] |= termios.ECHO\n-            termios.tcsetattr(fd, termios.TCSANOW, attr_list)\n+        fd = sys.stdin\n+        if fd.isatty():\n+            attr_list = termios.tcgetattr(fd)\n+            if not attr_list[3] & termios.ECHO:\n+                attr_list[3] |= termios.ECHO\n+                termios.tcsetattr(fd, termios.TCSANOW, attr_list)\n \n def reloader_thread():\n     ensure_echo_on()"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 6,
        "deletions": 5
    }
}