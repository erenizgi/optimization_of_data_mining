{
    "author": "aaugustin",
    "message": "[py3] Fixed templates tests.",
    "sha": "6cb76cb140d8ca9815fc90829b6636eb6e43ac42",
    "files": [
        {
            "sha": "8b4aebbf2274daa60e808c552435807c74d04500",
            "filename": "tests/regressiontests/templates/filters.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/6cb76cb140d8ca9815fc90829b6636eb6e43ac42/tests%2Fregressiontests%2Ftemplates%2Ffilters.py",
            "raw_url": "https://github.com/django/django/raw/6cb76cb140d8ca9815fc90829b6636eb6e43ac42/tests%2Fregressiontests%2Ftemplates%2Ffilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ffilters.py?ref=6cb76cb140d8ca9815fc90829b6636eb6e43ac42",
            "patch": "@@ -114,7 +114,7 @@ def get_filter_tests():\n         # The make_list filter can destroy existing escaping, so the results are\n         # escaped.\n         'filter-make_list01': (\"{% autoescape off %}{{ a|make_list }}{% endautoescape %}\", {\"a\": mark_safe(\"&\")}, str_prefix(\"[%(_)s'&']\")),\n-        'filter-make_list02': (\"{{ a|make_list }}\", {\"a\": mark_safe(\"&\")}, \"[u&#39;&amp;&#39;]\"),\n+        'filter-make_list02': (\"{{ a|make_list }}\", {\"a\": mark_safe(\"&\")}, str_prefix(\"[%(_)s&#39;&amp;&#39;]\")),\n         'filter-make_list03': ('{% autoescape off %}{{ a|make_list|stringformat:\"s\"|safe }}{% endautoescape %}', {\"a\": mark_safe(\"&\")}, str_prefix(\"[%(_)s'&']\")),\n         'filter-make_list04': ('{{ a|make_list|stringformat:\"s\"|safe }}', {\"a\": mark_safe(\"&\")}, str_prefix(\"[%(_)s'&']\")),\n "
        },
        {
            "sha": "41f40e746762f97b3997aadca51a650d916bbe35",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/6cb76cb140d8ca9815fc90829b6636eb6e43ac42/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/6cb76cb140d8ca9815fc90829b6636eb6e43ac42/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=6cb76cb140d8ca9815fc90829b6636eb6e43ac42",
            "patch": "@@ -27,6 +27,7 @@\n from django.test.utils import (setup_test_template_loader,\n     restore_template_loaders, override_settings)\n from django.utils import unittest\n+from django.utils.encoding import python_2_unicode_compatible\n from django.utils.formats import date_format\n from django.utils.translation import activate, deactivate, ugettext as _\n from django.utils.safestring import mark_safe\n@@ -148,10 +149,11 @@ def b(self):\n         raise SomeException\n     b = property(b)\n \n+@python_2_unicode_compatible\n class UTF8Class:\n-    \"Class whose __str__ returns non-ASCII data\"\n+    \"Class whose __str__ returns non-ASCII data on Python 2\"\n     def __str__(self):\n-        return 'ŠĐĆŽćžšđ'.encode('utf-8')\n+        return 'ŠĐĆŽćžšđ'\n \n class Templates(unittest.TestCase):\n     def setUp(self):\n@@ -1451,8 +1453,9 @@ def get_template_tests(self):\n             'widthratio04': ('{% widthratio a b 100 %}', {'a':50,'b':100}, '50'),\n             'widthratio05': ('{% widthratio a b 100 %}', {'a':100,'b':100}, '100'),\n \n-            # 62.5 should round to 63\n-            'widthratio06': ('{% widthratio a b 100 %}', {'a':50,'b':80}, '63'),\n+            # 62.5 should round to 63 on Python 2 and 62 on Python 3\n+            # See http://docs.python.org/py3k/whatsnew/3.0.html\n+            'widthratio06': ('{% widthratio a b 100 %}', {'a':50,'b':80}, '62' if six.PY3 else '63'),\n \n             # 71.4 should round to 71\n             'widthratio07': ('{% widthratio a b 100 %}', {'a':50,'b':70}, '71'),"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 8,
        "deletions": 5
    }
}