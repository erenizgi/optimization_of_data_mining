{
    "author": "jezdez",
    "message": "Fixed #16604 -- Use new save_related hook when saving objects on the changelist, too. Thanks, pdeglopper.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16599 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "d68666700fa3ca24701479bd0831c3dcfb9f5ab1",
    "files": [
        {
            "sha": "922205f8cdea01c6af86059bf983c2988387491c",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/d68666700fa3ca24701479bd0831c3dcfb9f5ab1/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/d68666700fa3ca24701479bd0831c3dcfb9f5ab1/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=d68666700fa3ca24701479bd0831c3dcfb9f5ab1",
            "patch": "@@ -1146,7 +1146,7 @@ def changelist_view(self, request, extra_context=None):\n                     if form.has_changed():\n                         obj = self.save_form(request, form, change=True)\n                         self.save_model(request, obj, form, change=True)\n-                        form.save_m2m()\n+                        self.save_related(request, form, formsets=[], change=True)\n                         change_msg = self.construct_change_message(request, form, None)\n                         self.log_change(request, obj, change_msg)\n                         changecount += 1"
        },
        {
            "sha": "8dc61e34e5b0658b26a483f2fec03c1a34bc77bc",
            "filename": "tests/regressiontests/admin_views/models.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/d68666700fa3ca24701479bd0831c3dcfb9f5ab1/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/d68666700fa3ca24701479bd0831c3dcfb9f5ab1/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Fmodels.py?ref=d68666700fa3ca24701479bd0831c3dcfb9f5ab1",
            "patch": "@@ -391,6 +391,8 @@ class ParentAdmin(admin.ModelAdmin):\n     model = Parent\n     inlines = [ChildInline]\n \n+    list_editable = ('name',)\n+\n     def save_related(self, request, form, formsets, change):\n         super(ParentAdmin, self).save_related(request, form, formsets, change)\n         first_name, last_name = form.instance.name.split()"
        },
        {
            "sha": "8daa4662a9e40c9e7ad6c54150d1e1d875bbc23e",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/d68666700fa3ca24701479bd0831c3dcfb9f5ab1/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d68666700fa3ca24701479bd0831c3dcfb9f5ab1/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=d68666700fa3ca24701479bd0831c3dcfb9f5ab1",
            "patch": "@@ -3160,3 +3160,22 @@ def test_should_be_able_to_edit_related_objects_on_change_view(self):\n \n         self.assertEqual('Josh Stone', Parent.objects.latest('id').name)\n         self.assertEqual([u'Catherine Stone', u'Paul Stone'], children_names)\n+\n+    def test_should_be_able_to_edit_related_objects_on_changelist_view(self):\n+        parent = Parent.objects.create(name='Josh Rock')\n+        paul = Child.objects.create(parent=parent, name='Paul')\n+        catherine = Child.objects.create(parent=parent, name='Catherine')\n+        post = {\n+            'form-TOTAL_FORMS': '1',\n+            'form-INITIAL_FORMS': '1',\n+            'form-MAX_NUM_FORMS': '0',\n+            'form-0-id': parent.id,\n+            'form-0-name': 'Josh Stone',\n+            '_save': 'Save'\n+        }\n+\n+        response = self.client.post('/test_admin/admin/admin_views/parent/', post)\n+        children_names = list(Child.objects.order_by('name').values_list('name', flat=True))\n+\n+        self.assertEqual('Josh Stone', Parent.objects.latest('id').name)\n+        self.assertEqual([u'Catherine Stone', u'Paul Stone'], children_names)"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 22,
        "deletions": 1
    }
}