{
    "author": "freakboy3742",
    "message": "Fixed #15371 -- Ensure that a superuser created with the createsuperuser management command with --noinput has an invalid password, not a blank password. Thanks to yishaibeeri for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15631 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "b9a20d1e3bacd9e461dd8b82c219b5100c4b7876",
    "files": [
        {
            "sha": "9ab552685280c9e5e54ab707e49a013a7af53995",
            "filename": "django/contrib/auth/management/commands/createsuperuser.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/b9a20d1e3bacd9e461dd8b82c219b5100c4b7876/django%2Fcontrib%2Fauth%2Fmanagement%2Fcommands%2Fcreatesuperuser.py",
            "raw_url": "https://github.com/django/django/raw/b9a20d1e3bacd9e461dd8b82c219b5100c4b7876/django%2Fcontrib%2Fauth%2Fmanagement%2Fcommands%2Fcreatesuperuser.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fmanagement%2Fcommands%2Fcreatesuperuser.py?ref=b9a20d1e3bacd9e461dd8b82c219b5100c4b7876",
            "patch": "@@ -53,7 +53,8 @@ def handle(self, *args, **options):\n             except exceptions.ValidationError:\n                 raise CommandError(\"Invalid email address.\")\n \n-        password = ''\n+        # If not provided, create the user with an unusable password\n+        password = None\n \n         # Try to determine the current system user's username to use as a default.\n         try:"
        },
        {
            "sha": "132e7f77f920b8bba1a51353b76f30127185314f",
            "filename": "django/contrib/auth/tests/basic.py",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/b9a20d1e3bacd9e461dd8b82c219b5100c4b7876/django%2Fcontrib%2Fauth%2Ftests%2Fbasic.py",
            "raw_url": "https://github.com/django/django/raw/b9a20d1e3bacd9e461dd8b82c219b5100c4b7876/django%2Fcontrib%2Fauth%2Ftests%2Fbasic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fbasic.py?ref=b9a20d1e3bacd9e461dd8b82c219b5100c4b7876",
            "patch": "@@ -62,7 +62,9 @@ def test_createsuperuser_management_command(self):\n         self.assertEqual(command_output, 'Superuser created successfully.')\n         u = User.objects.get(username=\"joe\")\n         self.assertEquals(u.email, 'joe@somewhere.org')\n-        self.assertTrue(u.check_password(''))\n+\n+        # created password should be unusable\n+        self.assertFalse(u.has_usable_password())\n \n         # We can supress output on the management command\n         new_io = StringIO()\n@@ -77,7 +79,8 @@ def test_createsuperuser_management_command(self):\n         self.assertEqual(command_output, '')\n         u = User.objects.get(username=\"joe2\")\n         self.assertEquals(u.email, 'joe2@somewhere.org')\n-        self.assertTrue(u.check_password(''))\n+        self.assertFalse(u.has_usable_password())\n+\n \n         new_io = StringIO()\n         call_command(\"createsuperuser\",\n@@ -88,5 +91,5 @@ def test_createsuperuser_management_command(self):\n         )\n         u = User.objects.get(username=\"joe+admin@somewhere.org\")\n         self.assertEquals(u.email, 'joe@somewhere.org')\n-        self.assertTrue(u.check_password(''))\n+        self.assertFalse(u.has_usable_password())\n "
        }
    ],
    "stats": {
        "total": 12,
        "additions": 8,
        "deletions": 4
    }
}