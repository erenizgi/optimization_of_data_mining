{
    "author": "alex",
    "message": "Converted the Argentina localflavor doctests to unittests.  We have always been at war with doctests.  Thanks to Idan Gazit for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14872 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "aa05224dba4f77a9e30454245fa59db9038f597c",
    "files": [
        {
            "sha": "9c672690ce6a8be7c8699b9771eca363846264fe",
            "filename": "tests/regressiontests/forms/localflavor/ar.py",
            "status": "modified",
            "additions": 93,
            "deletions": 288,
            "changes": 381,
            "blob_url": "https://github.com/django/django/blob/aa05224dba4f77a9e30454245fa59db9038f597c/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Far.py",
            "raw_url": "https://github.com/django/django/raw/aa05224dba4f77a9e30454245fa59db9038f597c/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Far.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Far.py?ref=aa05224dba4f77a9e30454245fa59db9038f597c",
            "patch": "@@ -1,294 +1,99 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ AR form fields.\n+from django.contrib.localflavor.ar.forms import (ARProvinceSelect,\n+    ARPostalCodeField, ARDNIField, ARCUITField)\n \n-tests = r\"\"\"\n-# ARProvinceField #############################################################\n+from utils import LocalFlavorTestCase\n \n->>> from django.contrib.localflavor.ar.forms import ARProvinceSelect\n->>> f = ARProvinceSelect()\n->>> f.render('provincias', 'A')\n-u'<select name=\"provincias\">\\n<option value=\"B\">Buenos Aires</option>\\n<option value=\"K\">Catamarca</option>\\n<option value=\"H\">Chaco</option>\\n<option value=\"U\">Chubut</option>\\n<option value=\"C\">Ciudad Aut\\xf3noma de Buenos Aires</option>\\n<option value=\"X\">C\\xf3rdoba</option>\\n<option value=\"W\">Corrientes</option>\\n<option value=\"E\">Entre R\\xedos</option>\\n<option value=\"P\">Formosa</option>\\n<option value=\"Y\">Jujuy</option>\\n<option value=\"L\">La Pampa</option>\\n<option value=\"F\">La Rioja</option>\\n<option value=\"M\">Mendoza</option>\\n<option value=\"N\">Misiones</option>\\n<option value=\"Q\">Neuqu\\xe9n</option>\\n<option value=\"R\">R\\xedo Negro</option>\\n<option value=\"A\" selected=\"selected\">Salta</option>\\n<option value=\"J\">San Juan</option>\\n<option value=\"D\">San Luis</option>\\n<option value=\"Z\">Santa Cruz</option>\\n<option value=\"S\">Santa Fe</option>\\n<option value=\"G\">Santiago del Estero</option>\\n<option value=\"V\">Tierra del Fuego, Ant\\xe1rtida e Islas del Atl\\xe1ntico Sur</option>\\n<option value=\"T\">Tucum\\xe1n</option>\\n</select>'\n \n-# ARPostalCodeField ###########################################################\n+class ARLocalFlavorTests(LocalFlavorTestCase):\n+    def test_ARProvinceSelect(self):\n+        f = ARProvinceSelect()\n+        out = u'''<select name=\"provincias\">\n+<option value=\"B\">Buenos Aires</option>\n+<option value=\"K\">Catamarca</option>\n+<option value=\"H\">Chaco</option>\n+<option value=\"U\">Chubut</option>\n+<option value=\"C\">Ciudad Aut\\xf3noma de Buenos Aires</option>\n+<option value=\"X\">C\\xf3rdoba</option>\n+<option value=\"W\">Corrientes</option>\n+<option value=\"E\">Entre R\\xedos</option>\n+<option value=\"P\">Formosa</option>\n+<option value=\"Y\">Jujuy</option>\n+<option value=\"L\">La Pampa</option>\n+<option value=\"F\">La Rioja</option>\n+<option value=\"M\">Mendoza</option>\n+<option value=\"N\">Misiones</option>\n+<option value=\"Q\">Neuqu\\xe9n</option>\n+<option value=\"R\">R\\xedo Negro</option>\n+<option value=\"A\" selected=\"selected\">Salta</option>\n+<option value=\"J\">San Juan</option>\n+<option value=\"D\">San Luis</option>\n+<option value=\"Z\">Santa Cruz</option>\n+<option value=\"S\">Santa Fe</option>\n+<option value=\"G\">Santiago del Estero</option>\n+<option value=\"V\">Tierra del Fuego, Ant\\xe1rtida e Islas del Atl\\xe1ntico Sur</option>\n+<option value=\"T\">Tucum\\xe1n</option>\n+</select>'''\n+        self.assertEqual(f.render('provincias', 'A'), out)\n \n->>> from django.contrib.localflavor.ar.forms import ARPostalCodeField\n->>> f = ARPostalCodeField()\n->>> f.clean('5000')\n-u'5000'\n->>> f.clean('C1064AAB')\n-u'C1064AAB'\n->>> f.clean('c1064AAB')\n-u'C1064AAB'\n->>> f.clean('C1064aab')\n-u'C1064AAB'\n->>> f.clean(u'4400')\n-u'4400'\n->>> f.clean(u'C1064AAB')\n-u'C1064AAB'\n->>> f.clean('C1064AABB')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Ensure this value has at most 8 characters (it has 9).', u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('C1064AA')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('C106AAB')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('106AAB')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('500')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Ensure this value has at least 4 characters (it has 3).', u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('5PPP')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean(u'')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n+    def test_ARPostalCodeField(self):\n+        error_format = [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n+        error_atmost = [u'Ensure this value has at most 8 characters (it has 9).']\n+        error_atleast = [u'Ensure this value has at least 4 characters (it has 3).']\n+        valid = {\n+            '5000': '5000',\n+            'C1064AAB': 'C1064AAB',\n+            'c1064AAB': 'C1064AAB',\n+            'C1064aab': 'C1064AAB',\n+            '4400': '4400',\n+            u'C1064AAB': 'C1064AAB',\n+        }\n+        invalid = {\n+            'C1064AABB': error_atmost + error_format,\n+            'C1064AA': error_format,\n+            'C1064AB': error_format,\n+            '106AAB': error_format,\n+            '500': error_atleast + error_format,\n+            '5PPP': error_format,\n+        }\n+        self.assertFieldOutput(ARPostalCodeField, valid, invalid)\n \n->>> f = ARPostalCodeField(required=False)\n->>> f.clean('5000')\n-u'5000'\n->>> f.clean('C1064AAB')\n-u'C1064AAB'\n->>> f.clean('c1064AAB')\n-u'C1064AAB'\n->>> f.clean('C1064aab')\n-u'C1064AAB'\n->>> f.clean(u'4400')\n-u'4400'\n->>> f.clean(u'C1064AAB')\n-u'C1064AAB'\n->>> f.clean('C1064AABB')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Ensure this value has at most 8 characters (it has 9).', u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('C1064AA')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('C106AAB')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('106AAB')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('500')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Ensure this value has at least 4 characters (it has 3).', u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean('5PPP')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a postal code in the format NNNN or ANNNNAAA.']\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n->>> f.clean(u'')\n-u''\n+    def test_ARDNIField(self):\n+        error_length = [u'This field requires 7 or 8 digits.']\n+        error_digitsonly = [u'This field requires only numbers.']\n+        valid = {\n+            '20123456': '20123456',\n+            '20.123.456': '20123456',\n+            u'20123456': '20123456',\n+            u'20.123.456': '20123456',\n+            '20.123456': '20123456',\n+            '9123456': '9123456',\n+            '9.123.456': '9123456',\n+        }\n+        invalid = {\n+            '101234566': error_length,\n+            'W0123456': error_digitsonly,\n+            '10,123,456': error_digitsonly,\n+        }\n+        self.assertFieldOutput(ARDNIField, valid, invalid)\n \n-# ARDNIField ##################################################################\n-\n->>> from django.contrib.localflavor.ar.forms import ARDNIField\n->>> f = ARDNIField()\n->>> f.clean('20123456')\n-u'20123456'\n->>> f.clean('20.123.456')\n-u'20123456'\n->>> f.clean('9123456')\n-u'9123456'\n->>> f.clean('9.123.456')\n-u'9123456'\n->>> f.clean(u'20123456')\n-u'20123456'\n->>> f.clean(u'20.123.456')\n-u'20123456'\n->>> f.clean('20.123456')\n-u'20123456'\n->>> f.clean('101234566')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field requires 7 or 8 digits.']\n->>> f.clean('W0123456')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field requires only numbers.']\n->>> f.clean('10,123,456')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field requires only numbers.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean(u'')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n-\n->>> f = ARDNIField(required=False)\n->>> f.clean('20123456')\n-u'20123456'\n->>> f.clean('20.123.456')\n-u'20123456'\n->>> f.clean('9123456')\n-u'9123456'\n->>> f.clean('9.123.456')\n-u'9123456'\n->>> f.clean(u'20123456')\n-u'20123456'\n->>> f.clean(u'20.123.456')\n-u'20123456'\n->>> f.clean('20.123456')\n-u'20123456'\n->>> f.clean('101234566')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field requires 7 or 8 digits.']\n->>> f.clean('W0123456')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field requires only numbers.']\n->>> f.clean('10,123,456')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field requires only numbers.']\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n->>> f.clean(u'')\n-u''\n-\n-# ARCUITField #################################################################\n-\n->>> from django.contrib.localflavor.ar.forms import ARCUITField\n->>> f = ARCUITField()\n->>> f.clean('20-10123456-9')\n-u'20-10123456-9'\n->>> f.clean(u'20-10123456-9')\n-u'20-10123456-9'\n->>> f.clean('27-10345678-4')\n-u'27-10345678-4'\n->>> f.clean('20101234569')\n-u'20-10123456-9'\n->>> f.clean('27103456784')\n-u'27-10345678-4'\n->>> f.clean('2-10123456-9')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('210123456-9')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('20-10123456')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('20-10123456-')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('20-10123456-5')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Invalid CUIT.']\n->>> f.clean(u'2-10123456-9')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('27-10345678-1')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Invalid CUIT.']\n->>> f.clean(u'27-10345678-1')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Invalid CUIT.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean(u'')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n-\n->>> f = ARCUITField(required=False)\n->>> f.clean('20-10123456-9')\n-u'20-10123456-9'\n->>> f.clean(u'20-10123456-9')\n-u'20-10123456-9'\n->>> f.clean('27-10345678-4')\n-u'27-10345678-4'\n->>> f.clean('20101234569')\n-u'20-10123456-9'\n->>> f.clean('27103456784')\n-u'27-10345678-4'\n->>> f.clean('2-10123456-9')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('210123456-9')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('20-10123456')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('20-10123456-')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('20-10123456-5')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Invalid CUIT.']\n->>> f.clean(u'2-10123456-9')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n->>> f.clean('27-10345678-1')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Invalid CUIT.']\n->>> f.clean(u'27-10345678-1')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Invalid CUIT.']\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n->>> f.clean(u'')\n-u''\n-\"\"\"\n+    def test_ARCUITField(self):\n+        error_format = [u'Enter a valid CUIT in XX-XXXXXXXX-X or XXXXXXXXXXXX format.']\n+        error_invalid = [u'Invalid CUIT.']\n+        valid = {\n+            '20-10123456-9': '20-10123456-9',\n+            u'20-10123456-9': '20-10123456-9',\n+            '27-10345678-4': '27-10345678-4',\n+            '20101234569': '20-10123456-9',\n+            '27103456784': '27-10345678-4',\n+        }\n+        invalid = {\n+            '2-10123456-9': error_format,\n+            '210123456-9': error_format,\n+            '20-10123456': error_format,\n+            '20-10123456-': error_format,\n+             '20-10123456-5': error_invalid,\n+            '2-10123456-9': error_format,\n+             '27-10345678-1': error_invalid,\n+             u'27-10345678-1': error_invalid,\n+        }\n+        self.assertFieldOutput(ARCUITField, valid, invalid)"
        },
        {
            "sha": "7087cf0eb8ec851850b233e4fa03629e39da252f",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/aa05224dba4f77a9e30454245fa59db9038f597c/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/aa05224dba4f77a9e30454245fa59db9038f597c/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=aa05224dba4f77a9e30454245fa59db9038f597c",
            "patch": "@@ -1,20 +1,17 @@\n # -*- coding: utf-8 -*-\n-from localflavor.ar import tests as localflavor_ar_tests\n from localflavor.at import tests as localflavor_at_tests\n from localflavor.au import tests as localflavor_au_tests\n from localflavor.br import tests as localflavor_br_tests\n from localflavor.ca import tests as localflavor_ca_tests\n from localflavor.ch import tests as localflavor_ch_tests\n from localflavor.cl import tests as localflavor_cl_tests\n from localflavor.cz import tests as localflavor_cz_tests\n-from localflavor.de import DELocalFlavorTests\n from localflavor.es import tests as localflavor_es_tests\n from localflavor.fi import tests as localflavor_fi_tests\n from localflavor.fr import tests as localflavor_fr_tests\n from localflavor.generic import tests as localflavor_generic_tests\n from localflavor.id import tests as localflavor_id_tests\n from localflavor.ie import tests as localflavor_ie_tests\n-from localflavor.il import ILLocalFlavorTests\n from localflavor.is_ import tests as localflavor_is_tests\n from localflavor.it import tests as localflavor_it_tests\n from localflavor.jp import tests as localflavor_jp_tests\n@@ -25,16 +22,19 @@\n from localflavor.ro import tests as localflavor_ro_tests\n from localflavor.se import tests as localflavor_se_tests\n from localflavor.sk import tests as localflavor_sk_tests\n-from localflavor.tr import TRLocalFlavorTests\n from localflavor.uk import tests as localflavor_uk_tests\n from localflavor.us import tests as localflavor_us_tests\n from localflavor.uy import tests as localflavor_uy_tests\n from localflavor.za import tests as localflavor_za_tests\n \n+from localflavor.ar import ARLocalFlavorTests\n+from localflavor.de import DELocalFlavorTests\n from localflavor.be import BELocalFlavorTests\n+from localflavor.il import ILLocalFlavorTests\n+from localflavor.tr import TRLocalFlavorTests\n+\n \n __test__ = {\n-    'localflavor_ar_tests': localflavor_ar_tests,\n     'localflavor_at_tests': localflavor_at_tests,\n     'localflavor_au_tests': localflavor_au_tests,\n     'localflavor_br_tests': localflavor_br_tests,"
        }
    ],
    "stats": {
        "total": 391,
        "additions": 98,
        "deletions": 293
    }
}