{
    "author": "claudep",
    "message": "Got rid of old __cmp__methods replaced by rich comparison.\n\nThe __cmp__ methods are unsupported in Python 3.\n_doctest.py has been left untouched because it is likely it will\nnot be migrated to Python 3.",
    "sha": "d04f72fb31bab43386e12963c1c6dec23ae16143",
    "files": [
        {
            "sha": "1a9dcf0b5bef334369454299fde99c4d7f0b8489",
            "filename": "django/contrib/gis/geos/mutable_list.py",
            "status": "modified",
            "additions": 20,
            "deletions": 9,
            "changes": 29,
            "blob_url": "https://github.com/django/django/blob/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Fcontrib%2Fgis%2Fgeos%2Fmutable_list.py",
            "raw_url": "https://github.com/django/django/raw/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Fcontrib%2Fgis%2Fgeos%2Fmutable_list.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fgeos%2Fmutable_list.py?ref=d04f72fb31bab43386e12963c1c6dec23ae16143",
            "patch": "@@ -8,6 +8,9 @@\n \n Author: Aryeh Leib Taurog.\n \"\"\"\n+from django.utils.functional import total_ordering\n+\n+@total_ordering\n class ListMixin(object):\n     \"\"\"\n     A base class which provides complete list interface.\n@@ -143,20 +146,28 @@ def __imul__(self, n):\n                 self.extend(cache)\n         return self\n \n-    def __cmp__(self, other):\n-        'cmp'\n+    def __eq__(self, other):\n+        for i in range(len(self)):\n+            try:\n+                c = self[i] == other[i]\n+            except IndexError:\n+                # must be other is shorter\n+                return False\n+            if not c:\n+                return False\n+        return True\n+\n+    def __lt__(self, other):\n         slen = len(self)\n         for i in range(slen):\n             try:\n-                c = cmp(self[i], other[i])\n+                c = self[i] < other[i]\n             except IndexError:\n                 # must be other is shorter\n-                return 1\n-            else:\n-                # elements not equal\n-                if c: return c\n-\n-        return cmp(slen, len(other))\n+                return False\n+            if c:\n+                return c\n+        return slen < len(other)\n \n     ### Public list interface Methods ###\n     ## Non-mutating ##"
        },
        {
            "sha": "eaf12dad6d81eca2e6ebdfefa72a081080d613ec",
            "filename": "django/contrib/gis/maps/google/overlays.py",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Fcontrib%2Fgis%2Fmaps%2Fgoogle%2Foverlays.py",
            "raw_url": "https://github.com/django/django/raw/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Fcontrib%2Fgis%2Fmaps%2Fgoogle%2Foverlays.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fmaps%2Fgoogle%2Foverlays.py?ref=d04f72fb31bab43386e12963c1c6dec23ae16143",
            "patch": "@@ -1,5 +1,7 @@\n-from django.utils.safestring import mark_safe\n from django.contrib.gis.geos import fromstr, Point, LineString, LinearRing, Polygon\n+from django.utils.functional import total_ordering\n+from django.utils.safestring import mark_safe\n+\n \n class GEvent(object):\n     \"\"\"\n@@ -166,6 +168,7 @@ def js_params(self):\n         return '%s, \"%s\", %s, %s' % (self.latlngs, self.color, self.weight, self.opacity)\n \n \n+@total_ordering\n class GIcon(object):\n     \"\"\"\n     Creates a GIcon object to pass into a Gmarker object.\n@@ -231,8 +234,11 @@ def __init__(self, varname, image=None, iconsize=None,\n         self.iconanchor = iconanchor\n         self.infowindowanchor = infowindowanchor\n \n-    def __cmp__(self, other):\n-        return cmp(self.varname, other.varname)\n+    def __eq__(self, other):\n+        return self.varname == other.varname\n+\n+    def __lt__(self, other):\n+        return self.varname < other.varname\n     \n     def __hash__(self):\n         # XOR with hash of GIcon type so that hash('varname') won't "
        },
        {
            "sha": "46e198c4107946165e36739fd92623ad7ef90bd2",
            "filename": "django/contrib/gis/measure.py",
            "status": "modified",
            "additions": 20,
            "deletions": 4,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Fcontrib%2Fgis%2Fmeasure.py",
            "raw_url": "https://github.com/django/django/raw/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Fcontrib%2Fgis%2Fmeasure.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fmeasure.py?ref=d04f72fb31bab43386e12963c1c6dec23ae16143",
            "patch": "@@ -38,6 +38,8 @@\n __all__ = ['A', 'Area', 'D', 'Distance']\n from decimal import Decimal\n \n+from django.utils.functional import total_ordering\n+\n class MeasureBase(object):\n     def default_units(self, kwargs):\n         \"\"\"\n@@ -84,6 +86,7 @@ def unit_attname(cls, unit_str):\n         else:\n             raise Exception('Could not find a unit keyword associated with \"%s\"' % unit_str)\n \n+@total_ordering\n class Distance(MeasureBase):\n     UNITS = {\n         'chain' : 20.1168,\n@@ -178,9 +181,15 @@ def __repr__(self):\n     def __str__(self):\n         return '%s %s' % (getattr(self, self._default_unit), self._default_unit)\n \n-    def __cmp__(self, other):\n+    def __eq__(self, other):\n+        if isinstance(other, Distance):\n+            return self.m == other.m\n+        else:\n+            return NotImplemented\n+\n+    def __lt__(self, other):\n         if isinstance(other, Distance):\n-            return cmp(self.m, other.m)\n+            return self.m < other.m\n         else:\n             return NotImplemented\n \n@@ -244,6 +253,7 @@ def __idiv__(self, other):\n     def __nonzero__(self):\n         return bool(self.m)\n \n+@total_ordering\n class Area(MeasureBase):\n     # Getting the square units values and the alias dictionary.\n     UNITS = dict([('sq_%s' % k, v ** 2) for k, v in Distance.UNITS.items()])\n@@ -267,9 +277,15 @@ def __repr__(self):\n     def __str__(self):\n         return '%s %s' % (getattr(self, self._default_unit), self._default_unit)\n \n-    def __cmp__(self, other):\n+    def __eq__(self, other):\n+        if isinstance(other, Area):\n+            return self.sq_m == other.sq_m\n+        else:\n+            return NotImplemented\n+\n+    def __lt__(self, other):\n         if isinstance(other, Area):\n-            return cmp(self.sq_m, other.sq_m)\n+            return self.sq_m < other.sq_m\n         else:\n             return NotImplemented\n "
        },
        {
            "sha": "2a2c8739fb7fd204bd3a4f9bd1dca7a0db8c9e21",
            "filename": "django/dispatch/saferef.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Fdispatch%2Fsaferef.py",
            "raw_url": "https://github.com/django/django/raw/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Fdispatch%2Fsaferef.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdispatch%2Fsaferef.py?ref=d04f72fb31bab43386e12963c1c6dec23ae16143",
            "patch": "@@ -155,12 +155,12 @@ def __str__(self):\n     def __nonzero__( self ):\n         \"\"\"Whether we are still a valid reference\"\"\"\n         return self() is not None\n-    \n-    def __cmp__( self, other ):\n+\n+    def __eq__(self, other):\n         \"\"\"Compare with another reference\"\"\"\n-        if not isinstance (other,self.__class__):\n-            return cmp( self.__class__, type(other) )\n-        return cmp( self.key, other.key)\n+        if not isinstance(other, self.__class__):\n+            return self.__class__ == type(other)\n+        return self.key == other.key\n     \n     def __call__(self):\n         \"\"\"Return a strong reference to the bound method"
        },
        {
            "sha": "31466ee8b810476dd5e8d803789cc591a4d115d5",
            "filename": "django/utils/functional.py",
            "status": "modified",
            "additions": 15,
            "deletions": 8,
            "changes": 23,
            "blob_url": "https://github.com/django/django/blob/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Futils%2Ffunctional.py",
            "raw_url": "https://github.com/django/django/raw/d04f72fb31bab43386e12963c1c6dec23ae16143/django%2Futils%2Ffunctional.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ffunctional.py?ref=d04f72fb31bab43386e12963c1c6dec23ae16143",
            "patch": "@@ -58,6 +58,7 @@ def lazy(func, *resultclasses):\n     function is evaluated on every access.\n     \"\"\"\n \n+    @total_ordering\n     class __proxy__(Promise):\n         \"\"\"\n         Encapsulate a function call and act as a proxy for methods that are\n@@ -124,17 +125,23 @@ def __unicode_cast(self):\n         def __str_cast(self):\n             return str(func(*self.__args, **self.__kw))\n \n-        def __cmp__(self, rhs):\n+        def __cast(self):\n             if self._delegate_str:\n-                s = str(func(*self.__args, **self.__kw))\n+                return self.__str_cast()\n             elif self._delegate_unicode:\n-                s = unicode(func(*self.__args, **self.__kw))\n+                return self.__unicode_cast()\n             else:\n-                s = func(*self.__args, **self.__kw)\n-            if isinstance(rhs, Promise):\n-                return -cmp(rhs, s)\n-            else:\n-                return cmp(s, rhs)\n+                return func(*self.__args, **self.__kw)\n+\n+        def __eq__(self, other):\n+            if isinstance(other, Promise):\n+                other = other.__cast()\n+            return self.__cast() == other\n+\n+        def __lt__(self, other):\n+            if isinstance(other, Promise):\n+                other = other.__cast()\n+            return self.__cast() < other\n \n         def __mod__(self, rhs):\n             if self._delegate_str:"
        }
    ],
    "stats": {
        "total": 98,
        "additions": 69,
        "deletions": 29
    }
}