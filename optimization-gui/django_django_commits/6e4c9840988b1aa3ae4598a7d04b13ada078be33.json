{
    "author": "claudep",
    "message": "[py3] Workarounded a Python bug in mail header encoding",
    "sha": "6e4c9840988b1aa3ae4598a7d04b13ada078be33",
    "files": [
        {
            "sha": "db9023a0bb281f3d0d0cf033a325ed6f2a19abb4",
            "filename": "django/core/mail/message.py",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/6e4c9840988b1aa3ae4598a7d04b13ada078be33/django%2Fcore%2Fmail%2Fmessage.py",
            "raw_url": "https://github.com/django/django/raw/6e4c9840988b1aa3ae4598a7d04b13ada078be33/django%2Fcore%2Fmail%2Fmessage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fmessage.py?ref=6e4c9840988b1aa3ae4598a7d04b13ada078be33",
            "patch": "@@ -99,7 +99,12 @@ def sanitize_address(addr, encoding):\n     if isinstance(addr, six.string_types):\n         addr = parseaddr(force_text(addr))\n     nm, addr = addr\n-    nm = Header(nm, encoding).encode()\n+    # This try-except clause is needed on Python 3 < 3.2.4\n+    # http://bugs.python.org/issue14291\n+    try:\n+        nm = Header(nm, encoding).encode()\n+    except UnicodeEncodeError:\n+        nm = Header(nm, 'utf-8').encode()\n     try:\n         addr.encode('ascii')\n     except UnicodeEncodeError:  # IDN"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 6,
        "deletions": 1
    }
}