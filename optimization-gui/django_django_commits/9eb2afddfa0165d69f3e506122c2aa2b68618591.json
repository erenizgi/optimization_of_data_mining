{
    "author": "ramiro",
    "message": "Removed more code for handling of PostgreSQL versions older than 8.2; use always \"INSERT... RETURNING...\" rather than \"INSERT...; SELECT CURRVAL...\". Thanks Christoph Pettus for the report and hints. Fixes #12180. Refs [16423].\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16443 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "9eb2afddfa0165d69f3e506122c2aa2b68618591",
    "files": [
        {
            "sha": "d25a2fe1ffe9541ee60d600737bbc04f4033926b",
            "filename": "django/db/backends/postgresql_psycopg2/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/9eb2afddfa0165d69f3e506122c2aa2b68618591/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/9eb2afddfa0165d69f3e506122c2aa2b68618591/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py?ref=9eb2afddfa0165d69f3e506122c2aa2b68618591",
            "patch": "@@ -66,7 +66,7 @@ def __iter__(self):\n \n class DatabaseFeatures(BaseDatabaseFeatures):\n     needs_datetime_string_cast = False\n-    can_return_id_from_insert = False\n+    can_return_id_from_insert = True\n     requires_rollback_on_dirty_transaction = True\n     has_real_datatype = True\n     can_defer_constraint_checks = True\n@@ -147,11 +147,6 @@ def _cursor(self):\n             if set_tz:\n                 cursor.execute(\"SET TIME ZONE %s\", [settings_dict['TIME_ZONE']])\n             self._get_pg_version()\n-            if self.features.uses_autocommit:\n-                # FIXME: Eventually we'll enable this by default for\n-                # versions that support it, but, right now, that's hard to\n-                # do without breaking other things (#10509).\n-                self.features.can_return_id_from_insert = True\n         return CursorWrapper(cursor)\n \n     def _enter_transaction_management(self, managed):"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 1,
        "deletions": 6
    }
}