{
    "author": "hineichris",
    "message": "Fixed #19237 -- Improved strip_tags utility\n\nThe previous pattern didn't properly addressed cases where '>'\nwas present inside quoted tag content.",
    "sha": "bf1871d874a371ad0ae6c7e098e7665a468dca16",
    "files": [
        {
            "sha": "d914234d606d951e667afc2f6edf5460f4afc88c",
            "filename": "django/utils/html.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/bf1871d874a371ad0ae6c7e098e7665a468dca16/django%2Futils%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/bf1871d874a371ad0ae6c7e098e7665a468dca16/django%2Futils%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhtml.py?ref=bf1871d874a371ad0ae6c7e098e7665a468dca16",
            "patch": "@@ -33,6 +33,7 @@\n html_gunk_re = re.compile(r'(?:<br clear=\"all\">|<i><\\/i>|<b><\\/b>|<em><\\/em>|<strong><\\/strong>|<\\/?smallcaps>|<\\/?uppercase>)', re.IGNORECASE)\n hard_coded_bullets_re = re.compile(r'((?:<p>(?:%s).*?[a-zA-Z].*?</p>\\s*)+)' % '|'.join([re.escape(x) for x in DOTS]), re.DOTALL)\n trailing_empty_content_re = re.compile(r'(?:<p>(?:&nbsp;|\\s|<br \\/>)*?</p>\\s*)+\\Z')\n+strip_tags_re = re.compile(r'</?\\S([^=]*=(\\s*\"[^\"]*\"|\\s*\\'[^\\']*\\'|\\S*)|[^>])*?>', re.IGNORECASE)\n \n \n def escape(text):\n@@ -117,7 +118,7 @@ def linebreaks(value, autoescape=False):\n \n def strip_tags(value):\n     \"\"\"Returns the given HTML with all tags stripped.\"\"\"\n-    return re.sub(r'<[^>]*?>', '', force_text(value))\n+    return strip_tags_re.sub('', force_text(value))\n strip_tags = allow_lazy(strip_tags)\n \n def remove_tags(html, tags):"
        },
        {
            "sha": "a0226c47657f1bd5e7745a252d81702462cfe3ed",
            "filename": "tests/regressiontests/utils/html.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/bf1871d874a371ad0ae6c7e098e7665a468dca16/tests%2Fregressiontests%2Futils%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/bf1871d874a371ad0ae6c7e098e7665a468dca16/tests%2Fregressiontests%2Futils%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fhtml.py?ref=bf1871d874a371ad0ae6c7e098e7665a468dca16",
            "patch": "@@ -65,6 +65,9 @@ def test_strip_tags(self):\n             ('<f', '<f'),\n             ('</fe', '</fe'),\n             ('<x>b<y>', 'b'),\n+            ('a<p onclick=\"alert(\\'<test>\\')\">b</p>c', 'abc'),\n+            ('a<p a >b</p>c', 'abc'),\n+            ('d<a:b c:d>e</p>f', 'def'),\n         )\n         for value, output in items:\n             self.check_output(f, value, output)"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}