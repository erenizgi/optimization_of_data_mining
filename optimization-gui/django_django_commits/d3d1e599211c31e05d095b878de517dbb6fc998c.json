{
    "author": "andrewgodwin",
    "message": "Add a SQlite backend. One test passes!",
    "sha": "d3d1e599211c31e05d095b878de517dbb6fc998c",
    "files": [
        {
            "sha": "7918d5d3ef869693089357ecf3794e9761f09bf9",
            "filename": "django/db/backends/sqlite3/base.py",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/d3d1e599211c31e05d095b878de517dbb6fc998c/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/d3d1e599211c31e05d095b878de517dbb6fc998c/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fsqlite3%2Fbase.py?ref=d3d1e599211c31e05d095b878de517dbb6fc998c",
            "patch": "@@ -18,6 +18,7 @@\n from django.db.backends.sqlite3.client import DatabaseClient\n from django.db.backends.sqlite3.creation import DatabaseCreation\n from django.db.backends.sqlite3.introspection import DatabaseIntrospection\n+from django.db.backends.sqlite3.schema import DatabaseSchemaEditor\n from django.utils.dateparse import parse_date, parse_datetime, parse_time\n from django.utils.functional import cached_property\n from django.utils.safestring import SafeString\n@@ -336,6 +337,10 @@ def close(self):\n         if self.settings_dict['NAME'] != \":memory:\":\n             BaseDatabaseWrapper.close(self)\n \n+    def schema_editor(self):\n+        \"Returns a new instance of this backend's SchemaEditor\"\n+        return DatabaseSchemaEditor(self)\n+\n FORMAT_QMARK_REGEX = re.compile(r'(?<!%)%s')\n \n class SQLiteCursorWrapper(Database.Cursor):"
        },
        {
            "sha": "bfd943c6fb5d54967e6fb3dc9593d666aeab3fdc",
            "filename": "django/db/backends/sqlite3/schema.py",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/d3d1e599211c31e05d095b878de517dbb6fc998c/django%2Fdb%2Fbackends%2Fsqlite3%2Fschema.py",
            "raw_url": "https://github.com/django/django/raw/d3d1e599211c31e05d095b878de517dbb6fc998c/django%2Fdb%2Fbackends%2Fsqlite3%2Fschema.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fsqlite3%2Fschema.py?ref=d3d1e599211c31e05d095b878de517dbb6fc998c",
            "patch": "@@ -0,0 +1,6 @@\n+from django.db.backends.schema import BaseDatabaseSchemaEditor\n+\n+\n+class DatabaseSchemaEditor(BaseDatabaseSchemaEditor):\n+\n+    sql_delete_table = \"DROP TABLE %(table)s\""
        },
        {
            "sha": "3d0b1064055e71abc819a17ef7346e8bc4ac6f4a",
            "filename": "tests/modeltests/schema/tests.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/d3d1e599211c31e05d095b878de517dbb6fc998c/tests%2Fmodeltests%2Fschema%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d3d1e599211c31e05d095b878de517dbb6fc998c/tests%2Fmodeltests%2Fschema%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fschema%2Ftests.py?ref=d3d1e599211c31e05d095b878de517dbb6fc998c",
            "patch": "@@ -44,18 +44,18 @@ def tearDown(self):\n             # Remove any M2M tables first\n             for field in model._meta.local_many_to_many:\n                 try:\n-                    cursor.execute(\"DROP TABLE %s CASCADE\" % (\n-                        connection.ops.quote_name(field.rel.through._meta.db_table),\n-                    ))\n+                    cursor.execute(connection.schema_editor().sql_delete_table % {\n+                        \"table\": connection.ops.quote_name(field.rel.through._meta.db_table),\n+                    })\n                 except DatabaseError:\n                     connection.rollback()\n                 else:\n                     connection.commit()\n             # Then remove the main tables\n             try:\n-                cursor.execute(\"DROP TABLE %s CASCADE\" % (\n-                    connection.ops.quote_name(model._meta.db_table),\n-                ))\n+                cursor.execute(connection.schema_editor().sql_delete_table % {\n+                    \"table\": connection.ops.quote_name(model._meta.db_table),\n+                })\n             except DatabaseError:\n                 connection.rollback()\n             else:"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 17,
        "deletions": 6
    }
}