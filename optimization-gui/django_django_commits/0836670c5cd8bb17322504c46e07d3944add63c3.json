{
    "author": "aaugustin",
    "message": "Fixed #6195 -- Documented caching options for javascript_catalog.",
    "sha": "0836670c5cd8bb17322504c46e07d3944add63c3",
    "files": [
        {
            "sha": "caa73761897641c7dbe2eb782116c7af31cfe0a8",
            "filename": "docs/topics/conditional-view-processing.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/0836670c5cd8bb17322504c46e07d3944add63c3/docs%2Ftopics%2Fconditional-view-processing.txt",
            "raw_url": "https://github.com/django/django/raw/0836670c5cd8bb17322504c46e07d3944add63c3/docs%2Ftopics%2Fconditional-view-processing.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fconditional-view-processing.txt?ref=0836670c5cd8bb17322504c46e07d3944add63c3",
            "patch": "@@ -27,7 +27,7 @@ instead of a full response, telling the client that nothing has changed.\n When you need more fine-grained control you may use per-view conditional\n processing functions.\n \n-.. conditional-decorators:\n+.. _conditional-decorators:\n \n The ``condition`` decorator\n ==========================="
        },
        {
            "sha": "3c53b2b70e90cf4570560fe0306f67bb724fcecc",
            "filename": "docs/topics/i18n/translation.txt",
            "status": "modified",
            "additions": 46,
            "deletions": 0,
            "changes": 46,
            "blob_url": "https://github.com/django/django/blob/0836670c5cd8bb17322504c46e07d3944add63c3/docs%2Ftopics%2Fi18n%2Ftranslation.txt",
            "raw_url": "https://github.com/django/django/raw/0836670c5cd8bb17322504c46e07d3944add63c3/docs%2Ftopics%2Fi18n%2Ftranslation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Ftranslation.txt?ref=0836670c5cd8bb17322504c46e07d3944add63c3",
            "patch": "@@ -946,6 +946,52 @@ This isn't as fast as string interpolation in Python, so keep it to those\n cases where you really need it (for example, in conjunction with ``ngettext``\n to produce proper pluralizations).\n \n+Note on performance\n+-------------------\n+\n+The :func:`~django.views.i18n.javascript_catalog` view generates the catalog\n+from ``.mo`` files on every request. Since its output is constant — at least\n+for a given version of a site — it's a good candidate for caching.\n+\n+Server-side caching will reduce CPU load. It's easily implemented with the\n+:func:`~django.views.decorators.cache.cache_page` decorator. To trigger cache\n+invalidation when your translations change, provide a version-dependant key\n+prefix, as shown in the example below, or map the view at a version-dependant\n+URL.\n+\n+.. code-block:: python\n+\n+    from django.views.decorators.cache import cache_page\n+    from django.views.i18n import javascript_catalog\n+\n+    # The value returned by get_version() must change when translations change.\n+    @cache_page(86400, key_prefix='js18n-%s' % get_version())\n+    def cached_javascript_catalog(request, domain='djangojs', packages=None):\n+        return javascript_catalog(request, domain, packages)\n+\n+Client-side caching will save bandwidth and make your site load faster. If\n+you're using ETags (:setting:`USE_ETAGS = True <USE_ETAGS>`), you're already\n+covered. Otherwise, you can apply :ref:`conditional decorators\n+<conditional-decorators>`. In the following example, the cache is invalidated\n+whenever your restart your application server.\n+\n+.. code-block:: python\n+\n+    from django.utils import timezone\n+    from django.views.decorators.http import last_modified\n+    from django.views.i18n import javascript_catalog\n+\n+    last_modified_date = timezone.now()\n+    @last_modified(lambda req, **kw: last_modified_date)\n+    def cached_javascript_catalog(request, domain='djangojs', packages=None):\n+        return javascript_catalog(request, domain, packages)\n+\n+You can even pre-generate the javascript catalog as part of your deployment\n+procedure and serve it as a static file. This radical technique is implemented\n+in django-statici18n_.\n+\n+.. _django-statici18n: http://django-statici18n.readthedocs.org/en/latest/\n+\n .. _url-internationalization:\n \n Internationalization: in URL patterns"
        }
    ],
    "stats": {
        "total": 48,
        "additions": 47,
        "deletions": 1
    }
}