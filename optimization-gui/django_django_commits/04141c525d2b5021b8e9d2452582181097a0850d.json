{
    "author": "claudep",
    "message": "Fixed #19663 -- Allowed None in colorize() text parameter\n\nThanks Jonathan Liuti for the report and the initial patch, and\nSimon Charette for the review.",
    "sha": "04141c525d2b5021b8e9d2452582181097a0850d",
    "files": [
        {
            "sha": "bb14837716bb3e902c045925a465a2782dd04751",
            "filename": "django/utils/termcolors.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/04141c525d2b5021b8e9d2452582181097a0850d/django%2Futils%2Ftermcolors.py",
            "raw_url": "https://github.com/django/django/raw/04141c525d2b5021b8e9d2452582181097a0850d/django%2Futils%2Ftermcolors.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftermcolors.py?ref=04141c525d2b5021b8e9d2452582181097a0850d",
            "patch": "@@ -52,8 +52,8 @@ def colorize(text='', opts=(), **kwargs):\n         if o in opt_dict:\n             code_list.append(opt_dict[o])\n     if 'noreset' not in opts:\n-        text = text + '\\x1b[%sm' % RESET\n-    return ('\\x1b[%sm' % ';'.join(code_list)) + text\n+        text = '%s\\x1b[%sm' % (text or '', RESET)\n+    return '%s%s' % (('\\x1b[%sm' % ';'.join(code_list)), text or '')\n \n def make_style(opts=(), **kwargs):\n     \"\"\""
        },
        {
            "sha": "8cc28009cdd89f46c0e465c8f6083e29f0302a61",
            "filename": "tests/regressiontests/utils/termcolors.py",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/04141c525d2b5021b8e9d2452582181097a0850d/tests%2Fregressiontests%2Futils%2Ftermcolors.py",
            "raw_url": "https://github.com/django/django/raw/04141c525d2b5021b8e9d2452582181097a0850d/tests%2Fregressiontests%2Futils%2Ftermcolors.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Ftermcolors.py?ref=04141c525d2b5021b8e9d2452582181097a0850d",
            "patch": "@@ -1,5 +1,7 @@\n from django.utils import unittest\n-from django.utils.termcolors import parse_color_setting, PALETTES, DEFAULT_PALETTE, LIGHT_PALETTE, DARK_PALETTE, NOCOLOR_PALETTE\n+from django.utils.termcolors import (parse_color_setting, PALETTES,\n+    DEFAULT_PALETTE, LIGHT_PALETTE, DARK_PALETTE, NOCOLOR_PALETTE, colorize)\n+\n \n class TermColorTests(unittest.TestCase):\n \n@@ -146,3 +148,10 @@ def test_opts_case(self):\n         self.assertEqual(parse_color_setting('error=green,bLiNk'),\n                           dict(PALETTES[NOCOLOR_PALETTE],\n                             ERROR={'fg':'green', 'opts': ('blink',)}))\n+\n+    def test_colorize_empty_text(self):\n+        self.assertEqual(colorize(text=None), '\\x1b[m\\x1b[0m')\n+        self.assertEqual(colorize(text=''), '\\x1b[m\\x1b[0m')\n+\n+        self.assertEqual(colorize(text=None, opts=('noreset')), '\\x1b[m')\n+        self.assertEqual(colorize(text='', opts=('noreset')), '\\x1b[m')"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 12,
        "deletions": 3
    }
}