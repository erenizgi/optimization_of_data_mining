{
    "author": "spookylukey",
    "message": "Deprecated csrf_response_exempt and csrf_view_exempt decorators\n\nWith the removal of CsrfResponseMiddleware, csrf_response_exempt serves no\npurposes, and csrf_exempt and csrf_view_exempt perform the same function.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15956 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "16f6acdb89c42efaa99b81989a9fae01ff8e607d",
    "files": [
        {
            "sha": "c9fd82ceed10d346ade155ea3a445d3a98f53235",
            "filename": "django/views/decorators/csrf.py",
            "status": "modified",
            "additions": 14,
            "deletions": 15,
            "changes": 29,
            "blob_url": "https://github.com/django/django/blob/16f6acdb89c42efaa99b81989a9fae01ff8e607d/django%2Fviews%2Fdecorators%2Fcsrf.py",
            "raw_url": "https://github.com/django/django/raw/16f6acdb89c42efaa99b81989a9fae01ff8e607d/django%2Fviews%2Fdecorators%2Fcsrf.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdecorators%2Fcsrf.py?ref=16f6acdb89c42efaa99b81989a9fae01ff8e607d",
            "patch": "@@ -1,3 +1,5 @@\n+import warnings\n+\n from django.middleware.csrf import CsrfViewMiddleware\n from django.utils.decorators import decorator_from_middleware, available_attrs\n from functools import wraps\n@@ -31,30 +33,27 @@ def csrf_response_exempt(view_func):\n     Modifies a view function so that its response is exempt\n     from the post-processing of the CSRF middleware.\n     \"\"\"\n-    def wrapped_view(*args, **kwargs):\n-        resp = view_func(*args, **kwargs)\n-        resp.csrf_exempt = True\n-        return resp\n-    return wraps(view_func, assigned=available_attrs(view_func))(wrapped_view)\n+    warnings.warn(\"csrf_response_exempt is deprecated. It no longer performs a \"\n+                  \"function, and calls to it can be removed.\",\n+                  PendingDeprecationWarning)\n+    return view_func\n \n def csrf_view_exempt(view_func):\n     \"\"\"\n     Marks a view function as being exempt from CSRF view protection.\n     \"\"\"\n+    warnings.warn(\"csrf_view_exempt is deprecated. Use csrf_exempt instead.\",\n+                  PendingDeprecationWarning)\n+    return csrf_exempt(view_func)\n+\n+def csrf_exempt(view_func):\n+    \"\"\"\n+    Marks a view function as being exempt from the CSRF view protection.\n+    \"\"\"\n     # We could just do view_func.csrf_exempt = True, but decorators\n     # are nicer if they don't have side-effects, so we return a new\n     # function.\n     def wrapped_view(*args, **kwargs):\n         return view_func(*args, **kwargs)\n     wrapped_view.csrf_exempt = True\n     return wraps(view_func, assigned=available_attrs(view_func))(wrapped_view)\n-\n-def csrf_exempt(view_func):\n-    \"\"\"\n-    Marks a view function as being exempt from the CSRF checks\n-    and post processing.\n-\n-    This is the same as using both the csrf_view_exempt and\n-    csrf_response_exempt decorators.\n-    \"\"\"\n-    return csrf_response_exempt(csrf_view_exempt(view_func))"
        },
        {
            "sha": "730f21d699d0e56435b2894b715f103837328667",
            "filename": "docs/internals/deprecation.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/16f6acdb89c42efaa99b81989a9fae01ff8e607d/docs%2Finternals%2Fdeprecation.txt",
            "raw_url": "https://github.com/django/django/raw/16f6acdb89c42efaa99b81989a9fae01ff8e607d/docs%2Finternals%2Fdeprecation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fdeprecation.txt?ref=16f6acdb89c42efaa99b81989a9fae01ff8e607d",
            "patch": "@@ -179,6 +179,13 @@ their deprecation, as per the :ref:`Django deprecation policy\n           have been deprecated since the 1.4 release. The native versions\n           should be used instead.\n \n+        * The :func:`~django.views.decorators.csrf.csrf_response_exempt` and\n+          :func:`~django.views.decorators.csrf.csrf_view_exempt` decorators will\n+          be removed. Since 1.4 ``csrf_response_exempt`` has been a no-op (it\n+          returns the same function), and ``csrf_view_exempt`` has been a\n+          synonym for ``django.views.decorators.csrf.csrf_exempt``, which should\n+          be used to replace it.\n+\n     * 2.0\n         * ``django.views.defaults.shortcut()``. This function has been moved\n           to ``django.contrib.contenttypes.views.shortcut()`` as part of the"
        },
        {
            "sha": "22cebcf5474597d9bedd00ddcf416bfdd3cd9291",
            "filename": "tests/regressiontests/csrf_tests/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/16f6acdb89c42efaa99b81989a9fae01ff8e607d/tests%2Fregressiontests%2Fcsrf_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/16f6acdb89c42efaa99b81989a9fae01ff8e607d/tests%2Fregressiontests%2Fcsrf_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcsrf_tests%2Ftests.py?ref=16f6acdb89c42efaa99b81989a9fae01ff8e607d",
            "patch": "@@ -4,7 +4,7 @@\n from django.test import TestCase\n from django.http import HttpRequest, HttpResponse\n from django.middleware.csrf import CsrfViewMiddleware\n-from django.views.decorators.csrf import csrf_exempt, csrf_view_exempt, requires_csrf_token\n+from django.views.decorators.csrf import csrf_exempt, requires_csrf_token\n from django.core.context_processors import csrf\n from django.conf import settings\n from django.template import RequestContext, Template\n@@ -200,10 +200,10 @@ def test_token_node_with_csrf_cookie(self):\n \n     def test_get_token_for_exempt_view(self):\n         \"\"\"\n-        Check that get_token still works for a view decorated with 'csrf_view_exempt'.\n+        Check that get_token still works for a view decorated with 'csrf_exempt'.\n         \"\"\"\n         req = self._get_GET_csrf_cookie_request()\n-        CsrfViewMiddleware().process_view(req, csrf_view_exempt(token_view), (), {})\n+        CsrfViewMiddleware().process_view(req, csrf_exempt(token_view), (), {})\n         resp = token_view(req)\n         self._check_token_present(resp)\n "
        }
    ],
    "stats": {
        "total": 42,
        "additions": 24,
        "deletions": 18
    }
}