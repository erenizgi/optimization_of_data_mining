{
    "author": "aaugustin",
    "message": "Fixed #17377 -- Don't depend on a warm cache in admin_views.UserAdminTest.test_user_permission_performance. Thanks Gregor MÃ¼llegger.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17199 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "58276bd338a6d3f8361935dd49bc0500382f4c21",
    "files": [
        {
            "sha": "756597c70fe44cb68553abe1a4f6450129a51112",
            "filename": "tests/regressiontests/admin_views/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/58276bd338a6d3f8361935dd49bc0500382f4c21/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/58276bd338a6d3f8361935dd49bc0500382f4c21/tests%2Fregressiontests%2Fadmin_views%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_views%2Ftests.py?ref=58276bd338a6d3f8361935dd49bc0500382f4c21",
            "patch": "@@ -2982,7 +2982,9 @@ def test_save_add_another_button(self):\n     def test_user_permission_performance(self):\n         u = User.objects.all()[0]\n \n-        with self.assertNumQueries(7):\n+        # Don't depend on a warm cache, see #17377.\n+        ContentType.objects.clear_cache()\n+        with self.assertNumQueries(8):\n             response = self.client.get('/test_admin/admin/auth/user/%s/' % u.pk)\n             self.assertEqual(response.status_code, 200)\n "
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}