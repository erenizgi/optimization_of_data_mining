{
    "author": "spookylukey",
    "message": "Fixed #15661 - LogEntry objects have no unicode method\n\nThanks to Keryn Knight for the report and initial patch, and ShawnMilo for\nadditional work on the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16120 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f459169170910c3d94ee916ed79e2b9ff48915a2",
    "files": [
        {
            "sha": "ae716228813e2db229e9cc1d23745cdc68cfce3b",
            "filename": "django/contrib/admin/models.py",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/f459169170910c3d94ee916ed79e2b9ff48915a2/django%2Fcontrib%2Fadmin%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/f459169170910c3d94ee916ed79e2b9ff48915a2/django%2Fcontrib%2Fadmin%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fmodels.py?ref=f459169170910c3d94ee916ed79e2b9ff48915a2",
            "patch": "@@ -33,6 +33,17 @@ class Meta:\n     def __repr__(self):\n         return smart_unicode(self.action_time)\n \n+    def __unicode__(self):\n+\n+        if self.action_flag == ADDITION:\n+            return _('Added \"%(object)s\".') % {'object': self.object_repr}\n+        elif self.action_flag == CHANGE:\n+            return _('Changed \"%(object)s\" - %(changes)s') % {'object': self.object_repr, 'changes': self.change_message}\n+        elif self.action_flag == DELETION:\n+            return _('Deleted \"%(object)s.\"') % {'object': self.object_repr}\n+\n+        return_value = _('LogEntry Object')\n+\n     def is_addition(self):\n         return self.action_flag == ADDITION\n \n@@ -53,4 +64,4 @@ def get_admin_url(self):\n         \"\"\"\n         if self.content_type and self.object_id:\n             return mark_safe(u\"%s/%s/%s/\" % (self.content_type.app_label, self.content_type.model, quote(self.object_id)))\n-        return None\n\\ No newline at end of file\n+        return None"
        },
        {
            "sha": "ef34a5b026613a7d919b182350721381a7a1d728",
            "filename": "tests/regressiontests/admin_util/tests.py",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/f459169170910c3d94ee916ed79e2b9ff48915a2/tests%2Fregressiontests%2Fadmin_util%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/f459169170910c3d94ee916ed79e2b9ff48915a2/tests%2Fregressiontests%2Fadmin_util%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_util%2Ftests.py?ref=f459169170910c3d94ee916ed79e2b9ff48915a2",
            "patch": "@@ -235,3 +235,24 @@ def test_related_name(self):\n             label_for_field('guest', Event, return_attr=True),\n             ('awesome guest', None),\n         )\n+\n+    def test_logentry_unicode(self):\n+        \"\"\"\n+        Regression test for #15661\n+        \"\"\"\n+        log_entry = admin.models.LogEntry()\n+\n+        log_entry.action_flag = admin.models.ADDITION\n+        self.assertTrue(\n+            unicode(log_entry).startswith('Added ')\n+        )\n+\n+        log_entry.action_flag = admin.models.CHANGE\n+        self.assertTrue(\n+            unicode(log_entry).startswith('Changed ')\n+        )\n+\n+        log_entry.action_flag = admin.models.DELETION\n+        self.assertTrue(\n+            unicode(log_entry).startswith('Deleted ')\n+        )"
        }
    ],
    "stats": {
        "total": 34,
        "additions": 33,
        "deletions": 1
    }
}