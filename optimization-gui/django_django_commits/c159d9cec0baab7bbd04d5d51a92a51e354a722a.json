{
    "author": "akaariai",
    "message": "Fixed Oracle failure caused by None converted to '' in select_related case",
    "sha": "c159d9cec0baab7bbd04d5d51a92a51e354a722a",
    "files": [
        {
            "sha": "da4c69f362137a3f6ca9b8fce34e4060ee9806f9",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/c159d9cec0baab7bbd04d5d51a92a51e354a722a/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/c159d9cec0baab7bbd04d5d51a92a51e354a722a/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=c159d9cec0baab7bbd04d5d51a92a51e354a722a",
            "patch": "@@ -1418,8 +1418,15 @@ def get_cached_row(row, index_start, using,  klass_info, offset=0):\n     fields = row[index_start : index_start + field_count]\n     # If all the select_related columns are None, then the related\n     # object must be non-existent - set the relation to None.\n-    # Otherwise, construct the related object.\n-    if fields == (None,) * field_count:\n+    # Otherwise, construct the related object. Also, some backends treat ''\n+    # and None equivalently for char fields, so we have to be prepared for\n+    # '' values.\n+    if connections[using].features.interprets_empty_strings_as_nulls:\n+        vals = tuple([None if f == '' else f for f in fields])\n+    else:\n+        vals = fields\n+\n+    if vals == (None,) * field_count:\n         obj = None\n     else:\n         if field_names:"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 9,
        "deletions": 2
    }
}