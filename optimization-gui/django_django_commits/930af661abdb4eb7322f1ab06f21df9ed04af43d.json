{
    "author": "freakboy3742",
    "message": "Fixed #20048, #20060 -- Modified tests for contrib apps sensitive to custom User models.\n\nThanks to matiasb for the report of #20060 and the draft patch for #20048.",
    "sha": "930af661abdb4eb7322f1ab06f21df9ed04af43d",
    "files": [
        {
            "sha": "59996d982446a89b4db54c1b4c03498be73beca4",
            "filename": "django/contrib/flatpages/tests/csrf.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fflatpages%2Ftests%2Fcsrf.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fflatpages%2Ftests%2Fcsrf.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fflatpages%2Ftests%2Fcsrf.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -1,6 +1,7 @@\n import os\n from django.conf import settings\n from django.contrib.auth.models import User\n+from django.contrib.auth.tests.utils import skipIfCustomUser\n from django.test import TestCase, Client\n from django.test.utils import override_settings\n \n@@ -38,6 +39,7 @@ def test_view_non_existent_flatpage(self):\n         response = self.client.get('/flatpage_root/no_such_flatpage/')\n         self.assertEqual(response.status_code, 404)\n \n+    @skipIfCustomUser\n     def test_view_authenticated_flatpage(self):\n         \"A flatpage served through a view can require authentication\"\n         response = self.client.get('/flatpage_root/sekrit/')"
        },
        {
            "sha": "1ad8fa93b3fdaef48dd59a56bc61994bfbeab188",
            "filename": "django/contrib/flatpages/tests/middleware.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fflatpages%2Ftests%2Fmiddleware.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fflatpages%2Ftests%2Fmiddleware.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fflatpages%2Ftests%2Fmiddleware.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -1,6 +1,7 @@\n import os\n from django.conf import settings\n from django.contrib.auth.models import User\n+from django.contrib.auth.tests.utils import skipIfCustomUser\n from django.contrib.flatpages.models import FlatPage\n from django.test import TestCase\n from django.test.utils import override_settings\n@@ -36,6 +37,7 @@ def test_view_non_existent_flatpage(self):\n         response = self.client.get('/flatpage_root/no_such_flatpage/')\n         self.assertEqual(response.status_code, 404)\n \n+    @skipIfCustomUser\n     def test_view_authenticated_flatpage(self):\n         \"A flatpage served through a view can require authentication\"\n         response = self.client.get('/flatpage_root/sekrit/')\n@@ -57,6 +59,7 @@ def test_fallback_non_existent_flatpage(self):\n         response = self.client.get('/no_such_flatpage/')\n         self.assertEqual(response.status_code, 404)\n \n+    @skipIfCustomUser\n     def test_fallback_authenticated_flatpage(self):\n         \"A flatpage served by the middleware can require authentication\"\n         response = self.client.get('/sekrit/')"
        },
        {
            "sha": "1a6f3c29752b60d6334d84e9fb81869d73185a87",
            "filename": "django/contrib/flatpages/tests/templatetags.py",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fflatpages%2Ftests%2Ftemplatetags.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fflatpages%2Ftests%2Ftemplatetags.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fflatpages%2Ftests%2Ftemplatetags.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -1,6 +1,7 @@\n import os\n from django.conf import settings\n from django.contrib.auth.models import AnonymousUser, User\n+from django.contrib.auth.tests.utils import skipIfCustomUser\n from django.template import Template, Context, TemplateSyntaxError\n from django.test import TestCase\n from django.test.utils import override_settings\n@@ -24,9 +25,6 @@ class FlatpageTemplateTagTests(TestCase):\n     fixtures = ['sample_flatpages']\n     urls = 'django.contrib.flatpages.tests.urls'\n \n-    def setUp(self):\n-        self.me = User.objects.create_user('testuser', 'test@example.com', 's3krit')\n-\n     def test_get_flatpages_tag(self):\n         \"The flatpage template tag retrives unregistered prefixed flatpages by default\"\n         out = Template(\n@@ -51,16 +49,18 @@ def test_get_flatpages_tag_for_anon_user(self):\n             }))\n         self.assertEqual(out, \"A Flatpage,A Nested Flatpage,\")\n \n+    @skipIfCustomUser\n     def test_get_flatpages_tag_for_user(self):\n         \"The flatpage template tag retrives all flatpages for an authenticated user\"\n+        me = User.objects.create_user('testuser', 'test@example.com', 's3krit')\n         out = Template(\n                 \"{% load flatpages %}\"\n                 \"{% get_flatpages for me as flatpages %}\"\n                 \"{% for page in flatpages %}\"\n                 \"{{ page.title }},\"\n                 \"{% endfor %}\"\n             ).render(Context({\n-                'me': self.me\n+                'me': me\n             }))\n         self.assertEqual(out, \"A Flatpage,A Nested Flatpage,Sekrit Nested Flatpage,Sekrit Flatpage,\")\n \n@@ -88,16 +88,18 @@ def test_get_flatpages_with_prefix_for_anon_user(self):\n             }))\n         self.assertEqual(out, \"A Nested Flatpage,\")\n \n+    @skipIfCustomUser\n     def test_get_flatpages_with_prefix_for_user(self):\n         \"The flatpage template tag retrive prefixed flatpages for an authenticated user\"\n+        me = User.objects.create_user('testuser', 'test@example.com', 's3krit')\n         out = Template(\n                 \"{% load flatpages %}\"\n                 \"{% get_flatpages '/location/' for me as location_flatpages %}\"\n                 \"{% for page in location_flatpages %}\"\n                 \"{{ page.title }},\"\n                 \"{% endfor %}\"\n             ).render(Context({\n-                'me': self.me\n+                'me': me\n             }))\n         self.assertEqual(out, \"A Nested Flatpage,Sekrit Nested Flatpage,\")\n "
        },
        {
            "sha": "0448b212272c4feecbd3ef2dcaa46d8a2758f622",
            "filename": "django/contrib/flatpages/tests/views.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fflatpages%2Ftests%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fflatpages%2Ftests%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fflatpages%2Ftests%2Fviews.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -1,6 +1,7 @@\n import os\n from django.conf import settings\n from django.contrib.auth.models import User\n+from django.contrib.auth.tests.utils import skipIfCustomUser\n from django.contrib.flatpages.models import FlatPage\n from django.test import TestCase\n from django.test.utils import override_settings\n@@ -36,6 +37,7 @@ def test_view_non_existent_flatpage(self):\n         response = self.client.get('/flatpage_root/no_such_flatpage/')\n         self.assertEqual(response.status_code, 404)\n \n+    @skipIfCustomUser\n     def test_view_authenticated_flatpage(self):\n         \"A flatpage served through a view can require authentication\"\n         response = self.client.get('/flatpage_root/sekrit/')"
        },
        {
            "sha": "060e8260b566d0c5df4a65be3c638b3102fc33a5",
            "filename": "django/contrib/formtools/tests/wizard/cookiestorage.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fcookiestorage.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fcookiestorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fcookiestorage.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -5,10 +5,12 @@\n from django.core.exceptions import SuspiciousOperation\n from django.http import HttpResponse\n \n+from django.contrib.auth.tests.utils import skipIfCustomUser\n from django.contrib.formtools.wizard.storage.cookie import CookieStorage\n from django.contrib.formtools.tests.wizard.storage import get_request, TestStorage\n \n \n+@skipIfCustomUser\n class TestCookieStorage(TestStorage, TestCase):\n     def get_storage(self):\n         return CookieStorage"
        },
        {
            "sha": "f6e177e5a4a72a44104e7c8101305128f7341081",
            "filename": "django/contrib/formtools/tests/wizard/forms.py",
            "status": "modified",
            "additions": 26,
            "deletions": 11,
            "changes": 37,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fforms.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -2,6 +2,7 @@\n \n from django import forms, http\n from django.conf import settings\n+from django.db import models\n from django.test import TestCase\n from django.template.response import TemplateResponse\n from django.utils.importlib import import_module\n@@ -29,26 +30,40 @@ def get_request(*args, **kwargs):\n     request.session = engine.SessionStore(None)\n     return request\n \n+\n class Step1(forms.Form):\n     name = forms.CharField()\n \n+\n class Step2(forms.Form):\n     name = forms.CharField()\n \n+\n class Step3(forms.Form):\n     data = forms.CharField()\n \n+\n class CustomKwargsStep1(Step1):\n \n     def __init__(self, test=None, *args, **kwargs):\n         self.test = test\n         return super(CustomKwargsStep1, self).__init__(*args, **kwargs)\n \n-class UserForm(forms.ModelForm):\n+\n+class TestModel(models.Model):\n+    name = models.CharField(max_length=100)\n+\n     class Meta:\n-        model = User\n+        app_label = 'formtools'\n+\n+\n+class TestModelForm(forms.ModelForm):\n+    class Meta:\n+        model = TestModel\n+\n+\n+TestModelFormSet = forms.models.modelformset_factory(TestModel, form=TestModelForm, extra=2)\n \n-UserFormSet = forms.models.modelformset_factory(User, form=UserForm, extra=2)\n \n class TestWizard(WizardView):\n     storage_name = 'django.contrib.formtools.wizard.storage.session.SessionStorage'\n@@ -149,8 +164,8 @@ def test_form_initial(self):\n \n     def test_form_instance(self):\n         request = get_request()\n-        the_instance = User()\n-        testform = TestWizard.as_view([('start', UserForm), ('step2', Step2)],\n+        the_instance = TestModel()\n+        testform = TestWizard.as_view([('start', TestModelForm), ('step2', Step2)],\n             instance_dict={'start': the_instance})\n         response, instance = testform(request)\n \n@@ -163,12 +178,12 @@ def test_form_instance(self):\n \n     def test_formset_instance(self):\n         request = get_request()\n-        the_instance1, created = User.objects.get_or_create(\n-            username='testuser1')\n-        the_instance2, created = User.objects.get_or_create(\n-            username='testuser2')\n-        testform = TestWizard.as_view([('start', UserFormSet), ('step2', Step2)],\n-            instance_dict={'start': User.objects.filter(username='testuser1')})\n+        the_instance1, created = TestModel.objects.get_or_create(\n+            name='test object 1')\n+        the_instance2, created = TestModel.objects.get_or_create(\n+            name='test object 2')\n+        testform = TestWizard.as_view([('start', TestModelFormSet), ('step2', Step2)],\n+            instance_dict={'start': TestModel.objects.filter(name='test object 1')})\n         response, instance = testform(request)\n \n         self.assertEqual(list(instance.get_form_instance('start')), [the_instance1])"
        },
        {
            "sha": "824eb7e37e9f8d4e97b5498039cc488985855b00",
            "filename": "django/contrib/formtools/tests/wizard/namedwizardtests/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -5,6 +5,7 @@\n from django.test import TestCase\n \n from django.contrib.auth.models import User\n+from django.contrib.auth.tests.utils import skipIfCustomUser\n \n from django.contrib.formtools.wizard.views import (NamedUrlSessionWizardView,\n                                                    NamedUrlCookieWizardView)\n@@ -276,6 +277,7 @@ def test_form_reset(self):\n         self.assertEqual(response.context['wizard']['steps'].current, 'form1')\n \n \n+@skipIfCustomUser\n class NamedSessionWizardTests(NamedWizardTests, TestCase):\n     wizard_urlname = 'nwiz_session'\n     wizard_step_1_data = {\n@@ -307,6 +309,7 @@ class NamedSessionWizardTests(NamedWizardTests, TestCase):\n     )\n \n \n+@skipIfCustomUser\n class NamedCookieWizardTests(NamedWizardTests, TestCase):\n     wizard_urlname = 'nwiz_cookie'\n     wizard_step_1_data = {\n@@ -367,11 +370,13 @@ def dispatch(self, request, *args, **kwargs):\n         return response, self\n \n \n+@skipIfCustomUser\n class NamedSessionFormTests(NamedFormTests, TestCase):\n     formwizard_class = TestNamedUrlSessionWizardView\n     wizard_urlname = 'nwiz_session'\n \n \n+@skipIfCustomUser\n class NamedCookieFormTests(NamedFormTests, TestCase):\n     formwizard_class = TestNamedUrlCookieWizardView\n     wizard_urlname = 'nwiz_cookie'"
        },
        {
            "sha": "0bd9fd8ecd76d586eedc2a36a4094ac8ea700647",
            "filename": "django/contrib/formtools/tests/wizard/sessionstorage.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fsessionstorage.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fsessionstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fsessionstorage.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -1,9 +1,11 @@\n from django.test import TestCase\n \n+from django.contrib.auth.tests.utils import skipIfCustomUser\n from django.contrib.formtools.tests.wizard.storage import TestStorage\n from django.contrib.formtools.wizard.storage.session import SessionStorage\n \n \n+@skipIfCustomUser\n class TestSessionStorage(TestStorage, TestCase):\n     def get_storage(self):\n         return SessionStorage"
        },
        {
            "sha": "1ee5dbdc7875336c5be3ddb049cdbbfc5cccf683",
            "filename": "django/contrib/formtools/tests/wizard/wizardtests/tests.py",
            "status": "modified",
            "additions": 16,
            "deletions": 2,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -7,11 +7,19 @@\n from django.test.client import RequestFactory\n from django.conf import settings\n from django.contrib.auth.models import User\n+from django.contrib.auth.tests.utils import skipIfCustomUser\n from django.contrib.formtools.wizard.views import CookieWizardView\n-from django.contrib.formtools.tests.wizard.forms import UserForm, UserFormSet\n from django.utils._os import upath\n \n \n+class UserForm(forms.ModelForm):\n+    class Meta:\n+        model = User\n+\n+\n+UserFormSet = forms.models.modelformset_factory(User, form=UserForm, extra=2)\n+\n+\n class WizardTests(object):\n     urls = 'django.contrib.formtools.tests.wizard.wizardtests.urls'\n \n@@ -75,7 +83,7 @@ def test_template_context(self):\n \n         # ticket #19025: `form` should be included in context\n         form = response.context_data['wizard']['form']\n-        self.assertEqual(response.context_data['form'], form)            \n+        self.assertEqual(response.context_data['form'], form)\n \n     def test_form_finish(self):\n         response = self.client.get(self.wizard_url)\n@@ -196,6 +204,7 @@ def test_form_refresh(self):\n         self.assertEqual(response.status_code, 200)\n \n \n+@skipIfCustomUser\n class SessionWizardTests(WizardTests, TestCase):\n     wizard_url = '/wiz_session/'\n     wizard_step_1_data = {\n@@ -226,6 +235,8 @@ class SessionWizardTests(WizardTests, TestCase):\n         }\n     )\n \n+\n+@skipIfCustomUser\n class CookieWizardTests(WizardTests, TestCase):\n     wizard_url = '/wiz_cookie/'\n     wizard_step_1_data = {\n@@ -256,6 +267,8 @@ class CookieWizardTests(WizardTests, TestCase):\n         }\n     )\n \n+\n+@skipIfCustomUser\n class WizardTestKwargs(TestCase):\n     wizard_url = '/wiz_other_template/'\n     wizard_step_1_data = {\n@@ -347,6 +360,7 @@ def get_context_data(self, **kwargs):\n         self.assertEqual(response.context_data['another_key'], 'another_value')\n \n \n+@skipIfCustomUser\n class WizardFormKwargsOverrideTests(TestCase):\n     def setUp(self):\n         super(WizardFormKwargsOverrideTests, self).setUp()"
        },
        {
            "sha": "099dba72565383b73bec5d7382ee45ce784d4ed4",
            "filename": "django/contrib/sitemaps/tests/base.py",
            "status": "modified",
            "additions": 17,
            "deletions": 2,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fsitemaps%2Ftests%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fsitemaps%2Ftests%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsitemaps%2Ftests%2Fbase.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -1,9 +1,24 @@\n from django.contrib.auth.models import User\n from django.contrib.sites.models import Site\n from django.core.cache import cache\n+from django.db import models\n from django.test import TestCase\n \n \n+class TestModel(models.Model):\n+    \"A test model for \"\n+    name = models.CharField(max_length=100)\n+\n+    class Meta:\n+        app_label = 'sitemaps'\n+\n+    def __unicode__(self):\n+        return self.name\n+\n+    def get_absolute_url(self):\n+        return '/testmodel/%s/' % self.id\n+\n+\n class SitemapTestsBase(TestCase):\n     protocol = 'http'\n     domain = 'example.com' if Site._meta.installed else 'testserver'\n@@ -13,8 +28,8 @@ def setUp(self):\n         self.base_url = '%s://%s' % (self.protocol, self.domain)\n         self.old_Site_meta_installed = Site._meta.installed\n         cache.clear()\n-        # Create a user that will double as sitemap content\n-        User.objects.create_user('testuser', 'test@example.com', 's3krit')\n+        # Create an object for sitemap content.\n+        TestModel.objects.create(name='Test Object')\n \n     def tearDown(self):\n         Site._meta.installed = self.old_Site_meta_installed"
        },
        {
            "sha": "5b265736b314c07bfa273b32a7f56a24138f9b99",
            "filename": "django/contrib/sitemaps/tests/generic.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fsitemaps%2Ftests%2Fgeneric.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fsitemaps%2Ftests%2Fgeneric.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsitemaps%2Ftests%2Fgeneric.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -1,9 +1,9 @@\n from __future__ import unicode_literals\n \n-from django.contrib.auth.models import User\n from django.test.utils import override_settings\n \n-from .base import SitemapTestsBase\n+from .base import TestModel, SitemapTestsBase\n+\n \n @override_settings(ABSOLUTE_URL_OVERRIDES={})\n class GenericViewsSitemapTests(SitemapTestsBase):\n@@ -12,8 +12,8 @@ def test_generic_sitemap(self):\n         \"A minimal generic sitemap can be rendered\"\n         response = self.client.get('/generic/sitemap.xml')\n         expected = ''\n-        for username in User.objects.values_list(\"username\", flat=True):\n-            expected += \"<url><loc>%s/users/%s/</loc></url>\" % (self.base_url, username)\n+        for pk in TestModel.objects.values_list(\"id\", flat=True):\n+            expected += \"<url><loc>%s/testmodel/%s/</loc></url>\" % (self.base_url, pk)\n         expected_content = \"\"\"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n %s"
        },
        {
            "sha": "1a91d970f3ebe861f915b83c5576f335a272ca7b",
            "filename": "django/contrib/sitemaps/tests/http.py",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fsitemaps%2Ftests%2Fhttp.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fsitemaps%2Ftests%2Fhttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsitemaps%2Ftests%2Fhttp.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -4,7 +4,6 @@\n from datetime import date\n \n from django.conf import settings\n-from django.contrib.auth.models import User\n from django.contrib.sitemaps import Sitemap, GenericSitemap\n from django.contrib.sites.models import Site\n from django.core.exceptions import ImproperlyConfigured\n@@ -14,7 +13,7 @@\n from django.utils._os import upath\n from django.utils.translation import activate, deactivate\n \n-from .base import SitemapTestsBase\n+from .base import TestModel, SitemapTestsBase\n \n \n class HTTPSitemapTests(SitemapTestsBase):\n@@ -128,10 +127,10 @@ def test_sitemap_item(self):\n         Check to make sure that the raw item is included with each\n         Sitemap.get_url() url result.\n         \"\"\"\n-        user_sitemap = GenericSitemap({'queryset': User.objects.all()})\n-        def is_user(url):\n-            return isinstance(url['item'], User)\n-        item_in_url_info = all(map(is_user, user_sitemap.get_urls()))\n+        test_sitemap = GenericSitemap({'queryset': TestModel.objects.all()})\n+        def is_testmodel(url):\n+            return isinstance(url['item'], TestModel)\n+        item_in_url_info = all(map(is_testmodel, test_sitemap.get_urls()))\n         self.assertTrue(item_in_url_info)\n \n     def test_cached_sitemap_index(self):"
        },
        {
            "sha": "56103f4ec230533192f8a449503228f5e5729d33",
            "filename": "django/contrib/sitemaps/tests/urls/http.py",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fsitemaps%2Ftests%2Furls%2Fhttp.py",
            "raw_url": "https://github.com/django/django/raw/930af661abdb4eb7322f1ab06f21df9ed04af43d/django%2Fcontrib%2Fsitemaps%2Ftests%2Furls%2Fhttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsitemaps%2Ftests%2Furls%2Fhttp.py?ref=930af661abdb4eb7322f1ab06f21df9ed04af43d",
            "patch": "@@ -4,6 +4,9 @@\n from django.contrib.auth.models import User\n from django.views.decorators.cache import cache_page\n \n+from django.contrib.sitemaps.tests.base import TestModel\n+\n+\n class SimpleSitemap(Sitemap):\n     changefreq = \"never\"\n     priority = 0.5\n@@ -18,7 +21,7 @@ def items(self):\n }\n \n generic_sitemaps = {\n-    'generic': GenericSitemap({'queryset': User.objects.all()}),\n+    'generic': GenericSitemap({'queryset': TestModel.objects.all()}),\n }\n \n flatpage_sitemaps = {"
        }
    ],
    "stats": {
        "total": 126,
        "additions": 95,
        "deletions": 31
    }
}