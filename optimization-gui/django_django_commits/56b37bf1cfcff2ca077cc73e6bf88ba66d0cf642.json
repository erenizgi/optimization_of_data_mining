{
    "author": "aaugustin",
    "message": "Fixed #17499 -- Ensured assertFieldOutput works for fields that customize the \"required\" error message. Thanks dpifke for the report and patch, and claudep for the tests.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17345 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "56b37bf1cfcff2ca077cc73e6bf88ba66d0cf642",
    "files": [
        {
            "sha": "53ea02a4f09fe84bac615bf5586db5c796b78cad",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/56b37bf1cfcff2ca077cc73e6bf88ba66d0cf642/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/56b37bf1cfcff2ca077cc73e6bf88ba66d0cf642/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=56b37bf1cfcff2ca077cc73e6bf88ba66d0cf642",
            "patch": "@@ -31,7 +31,7 @@\n from django.test.utils import (get_warnings_state, restore_warnings_state,\n     override_settings)\n from django.utils import simplejson, unittest as ut2\n-from django.utils.encoding import smart_str\n+from django.utils.encoding import smart_str, force_unicode\n from django.views.static import serve\n \n __all__ = ('DocTestRunner', 'OutputChecker', 'TestCase', 'TransactionTestCase',\n@@ -335,7 +335,7 @@ def assertFieldOutput(self, fieldclass, valid, invalid, field_args=None,\n                 optional.clean(input)\n             self.assertEqual(context_manager.exception.messages, errors)\n         # test required inputs\n-        error_required = [u'This field is required.']\n+        error_required = [force_unicode(required.error_messages['required'])]\n         for e in EMPTY_VALUES:\n             with self.assertRaises(ValidationError) as context_manager:\n                 required.clean(e)"
        },
        {
            "sha": "eab6895f0dd92b68c5b646f667a6b74f04024c23",
            "filename": "tests/regressiontests/test_utils/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/56b37bf1cfcff2ca077cc73e6bf88ba66d0cf642/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/56b37bf1cfcff2ca077cc73e6bf88ba66d0cf642/tests%2Fregressiontests%2Ftest_utils%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_utils%2Ftests.py?ref=56b37bf1cfcff2ca077cc73e6bf88ba66d0cf642",
            "patch": "@@ -1,6 +1,6 @@\n from __future__ import with_statement, absolute_import\n \n-from django.forms import EmailField\n+from django.forms import EmailField, IntegerField\n from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature\n from django.utils.unittest import skip\n \n@@ -149,6 +149,12 @@ def test_assert_field_output(self):\n         self.assertRaises(AssertionError, self.assertFieldOutput, EmailField, {'a@a.com': 'Wrong output'}, {'aaa': error_invalid})\n         self.assertRaises(AssertionError, self.assertFieldOutput, EmailField, {'a@a.com': 'a@a.com'}, {'aaa': [u'Come on, gimme some well formatted data, dude.']})\n \n+    def test_custom_required_message(self):\n+        class MyCustomField(IntegerField):\n+            default_error_messages = {\n+                'required': u'This is really required.',\n+            }\n+        self.assertFieldOutput(MyCustomField, {}, {}, empty_value=None)\n \n __test__ = {\"API_TEST\": r\"\"\"\n # Some checks of the doctest output normalizer."
        }
    ],
    "stats": {
        "total": 12,
        "additions": 9,
        "deletions": 3
    }
}