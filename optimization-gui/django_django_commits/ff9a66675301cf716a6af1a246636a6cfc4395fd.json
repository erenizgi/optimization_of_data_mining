{
    "author": "ramiro",
    "message": "Removed deprecated admin contrib app AdminSite root_path attribute. Refs #15294, r11250, r16136.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16575 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ff9a66675301cf716a6af1a246636a6cfc4395fd",
    "files": [
        {
            "sha": "5b56402428afec100255d7828934f8faae34cafa",
            "filename": "django/contrib/admin/actions.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Factions.py",
            "raw_url": "https://github.com/django/django/raw/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Factions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Factions.py?ref=ff9a66675301cf716a6af1a246636a6cfc4395fd",
            "patch": "@@ -69,7 +69,6 @@ def delete_selected(modeladmin, request, queryset):\n         \"perms_lacking\": perms_needed,\n         \"protected\": protected,\n         \"opts\": opts,\n-        \"root_path\": modeladmin.admin_site.root_path,\n         \"app_label\": app_label,\n         'action_checkbox_name': helpers.ACTION_CHECKBOX_NAME,\n     }"
        },
        {
            "sha": "b0eb11335940f0faf2b515301676a07b6730980e",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=ff9a66675301cf716a6af1a246636a6cfc4395fd",
            "patch": "@@ -726,7 +726,6 @@ def render_change_form(self, request, context, add=False, change=False, form_url\n             'content_type_id': ContentType.objects.get_for_model(self.model).id,\n             'save_as': self.save_as,\n             'save_on_top': self.save_on_top,\n-            'root_path': self.admin_site.root_path,\n         })\n         if add and self.add_form_template is not None:\n             form_template = self.add_form_template\n@@ -962,7 +961,6 @@ def add_view(self, request, form_url='', extra_context=None):\n             'media': mark_safe(media),\n             'inline_admin_formsets': inline_admin_formsets,\n             'errors': helpers.AdminErrorList(form, formsets),\n-            'root_path': self.admin_site.root_path,\n             'app_label': opts.app_label,\n         }\n         context.update(extra_context or {})\n@@ -1053,7 +1051,6 @@ def change_view(self, request, object_id, extra_context=None):\n             'media': mark_safe(media),\n             'inline_admin_formsets': inline_admin_formsets,\n             'errors': helpers.AdminErrorList(form, formsets),\n-            'root_path': self.admin_site.root_path,\n             'app_label': opts.app_label,\n         }\n         context.update(extra_context or {})\n@@ -1195,7 +1192,6 @@ def changelist_view(self, request, extra_context=None):\n             'cl': cl,\n             'media': media,\n             'has_add_permission': self.has_add_permission(request),\n-            'root_path': self.admin_site.root_path,\n             'app_label': app_label,\n             'action_form': action_form,\n             'actions_on_top': self.actions_on_top,\n@@ -1260,7 +1256,6 @@ def delete_view(self, request, object_id, extra_context=None):\n             \"perms_lacking\": perms_needed,\n             \"protected\": protected,\n             \"opts\": opts,\n-            \"root_path\": self.admin_site.root_path,\n             \"app_label\": app_label,\n         }\n         context.update(extra_context or {})\n@@ -1288,7 +1283,6 @@ def history_view(self, request, object_id, extra_context=None):\n             'action_list': action_list,\n             'module_name': capfirst(force_unicode(opts.verbose_name_plural)),\n             'object': obj,\n-            'root_path': self.admin_site.root_path,\n             'app_label': app_label,\n         }\n         context.update(extra_context or {})"
        },
        {
            "sha": "1c6dba6b4dce4bf485e4081d6c757fb95a60a770",
            "filename": "django/contrib/admin/sites.py",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Fsites.py",
            "raw_url": "https://github.com/django/django/raw/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Fsites.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fsites.py?ref=ff9a66675301cf716a6af1a246636a6cfc4395fd",
            "patch": "@@ -41,7 +41,6 @@ class AdminSite(object):\n \n     def __init__(self, name=None, app_name='admin'):\n         self._registry = {} # model_class class -> admin_class instance\n-        self.root_path = None\n         if name is None:\n             self.name = 'admin'\n         else:\n@@ -254,10 +253,7 @@ def password_change(self, request):\n         Handles the \"change password\" task -- both form display and validation.\n         \"\"\"\n         from django.contrib.auth.views import password_change\n-        if self.root_path is not None:\n-            url = '%spassword_change/done/' % self.root_path\n-        else:\n-            url = reverse('admin:password_change_done', current_app=self.name)\n+        url = reverse('admin:password_change_done', current_app=self.name)\n         defaults = {\n             'current_app': self.name,\n             'post_change_redirect': url\n@@ -316,7 +312,6 @@ def login(self, request, extra_context=None):\n         from django.contrib.auth.views import login\n         context = {\n             'title': _('Log in'),\n-            'root_path': self.root_path,\n             'app_path': request.get_full_path(),\n             REDIRECT_FIELD_NAME: request.get_full_path(),\n         }\n@@ -373,7 +368,6 @@ def index(self, request, extra_context=None):\n         context = {\n             'title': _('Site administration'),\n             'app_list': app_list,\n-            'root_path': self.root_path,\n         }\n         context.update(extra_context or {})\n         return TemplateResponse(request, [\n@@ -416,7 +410,6 @@ def app_index(self, request, app_label, extra_context=None):\n         context = {\n             'title': _('%s administration') % capfirst(app_label),\n             'app_list': [app_dict],\n-            'root_path': self.root_path,\n         }\n         context.update(extra_context or {})\n "
        },
        {
            "sha": "928244053fdc887f32afd8a17bc0fe078c76f7bf",
            "filename": "django/contrib/admin/templates/admin/base.html",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fbase.html",
            "raw_url": "https://github.com/django/django/raw/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fbase.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Ftemplates%2Fadmin%2Fbase.html?ref=ff9a66675301cf716a6af1a246636a6cfc4395fd",
            "patch": "@@ -32,19 +32,9 @@\n                 {% if docsroot %}\n                     <a href=\"{{ docsroot }}\">{% trans 'Documentation' %}</a> /\n                 {% endif %}\n-                {% url 'admin:password_change' as password_change_url %}\n-                {% if password_change_url %}\n-                    <a href=\"{{ password_change_url }}\">\n-                {% else %}\n-                    <a href=\"{{ root_path }}password_change/\">\n-                {% endif %}\n+                <a href=\"{% url 'admin:password_change' %}\">\n                 {% trans 'Change password' %}</a> /\n-                {% url 'admin:logout' as logout_url %}\n-                {% if logout_url %}\n-                    <a href=\"{{ logout_url }}\">\n-                {% else %}\n-                    <a href=\"{{ root_path }}logout/\">\n-                {% endif %}\n+                <a href=\"{% url 'admin:logout' %}\">\n                 {% trans 'Log out' %}</a>\n             {% endblock %}\n         </div>"
        },
        {
            "sha": "713ce638314b2b123b78ca22c78f5e59dd283a0f",
            "filename": "django/contrib/admin/widgets.py",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fadmin%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fwidgets.py?ref=ff9a66675301cf716a6af1a246636a6cfc4395fd",
            "patch": "@@ -228,14 +228,10 @@ def _media(self):\n     def render(self, name, value, *args, **kwargs):\n         rel_to = self.rel.to\n         info = (rel_to._meta.app_label, rel_to._meta.object_name.lower())\n-        try:\n-            related_url = reverse('admin:%s_%s_add' % info, current_app=self.admin_site.name)\n-        except NoReverseMatch:\n-            info = (self.admin_site.root_path, rel_to._meta.app_label, rel_to._meta.object_name.lower())\n-            related_url = '%s%s/%s/add/' % info\n         self.widget.choices = self.choices\n         output = [self.widget.render(name, value, *args, **kwargs)]\n         if self.can_add_related:\n+            related_url = reverse('admin:%s_%s_add' % info, current_app=self.admin_site.name)\n             # TODO: \"id_\" is hard-coded here. This should instead use the correct\n             # API to determine the ID dynamically.\n             output.append(u'<a href=\"%s\" class=\"add-another\" id=\"add_id_%s\" onclick=\"return showAddAnotherPopup(this);\"> '"
        },
        {
            "sha": "5a8bdc22467783d60f85584336c2f6eb83deaf51",
            "filename": "django/contrib/auth/admin.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fauth%2Fadmin.py",
            "raw_url": "https://github.com/django/django/raw/ff9a66675301cf716a6af1a246636a6cfc4395fd/django%2Fcontrib%2Fauth%2Fadmin.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fadmin.py?ref=ff9a66675301cf716a6af1a246636a6cfc4395fd",
            "patch": "@@ -136,7 +136,6 @@ def user_change_password(self, request, id):\n             'original': user,\n             'save_as': False,\n             'show_save': True,\n-            'root_path': self.admin_site.root_path,\n         }\n         return TemplateResponse(request, [\n             self.change_user_password_template or"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 4,
        "deletions": 33
    }
}