{
    "author": "alex",
    "message": "Fixed #15889 -- when trying to access to access a serializer that doesn't exist, raise a new SerializerDoesNotExist exception.  Thanks to Mathieu Agopian for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16104 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "930371e91b03f91691fa5e2e4f428cb72469e191",
    "files": [
        {
            "sha": "a32e0d62cba96000356448c220599c4f12df6e38",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/930371e91b03f91691fa5e2e4f428cb72469e191/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/930371e91b03f91691fa5e2e4f428cb72469e191/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=930371e91b03f91691fa5e2e4f428cb72469e191",
            "patch": "@@ -35,6 +35,7 @@ answer newbie questions, and generally made Django that much better:\n \n     Gisle Aas <gisle@aas.no>\n     Chris Adams\n+    Mathieu Agopian <mathieu.agopian@gmail.com>\n     ajs <adi@sieker.info>\n     alang@bright-green.com\n     A S Alam <aalam@users.sf.net>"
        },
        {
            "sha": "09bcb651d5ac2ef1774ce38a667fda8d4507985d",
            "filename": "django/core/serializers/__init__.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/930371e91b03f91691fa5e2e4f428cb72469e191/django%2Fcore%2Fserializers%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/930371e91b03f91691fa5e2e4f428cb72469e191/django%2Fcore%2Fserializers%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2F__init__.py?ref=930371e91b03f91691fa5e2e4f428cb72469e191",
            "patch": "@@ -18,6 +18,7 @@\n \n from django.conf import settings\n from django.utils import importlib\n+from django.core.serializers.base import SerializerDoesNotExist\n \n # Built-in serializers\n BUILTIN_SERIALIZERS = {\n@@ -60,11 +61,15 @@ def unregister_serializer(format):\n     \"Unregister a given serializer. This is not a thread-safe operation.\"\n     if not _serializers:\n         _load_serializers()\n+    if format not in _serializers:\n+        raise SerializerDoesNotExist(format)\n     del _serializers[format]\n \n def get_serializer(format):\n     if not _serializers:\n         _load_serializers()\n+    if format not in _serializers:\n+        raise SerializerDoesNotExist(format)\n     return _serializers[format].Serializer\n \n def get_serializer_formats():\n@@ -80,6 +85,8 @@ def get_public_serializer_formats():\n def get_deserializer(format):\n     if not _serializers:\n         _load_serializers()\n+    if format not in _serializers:\n+        raise SerializerDoesNotExist(format)\n     return _serializers[format].Deserializer\n \n def serialize(format, queryset, **options):"
        },
        {
            "sha": "6afaf216a8a4919e5d57e75b1c1327d9f3c4a064",
            "filename": "django/core/serializers/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/930371e91b03f91691fa5e2e4f428cb72469e191/django%2Fcore%2Fserializers%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/930371e91b03f91691fa5e2e4f428cb72469e191/django%2Fcore%2Fserializers%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fbase.py?ref=930371e91b03f91691fa5e2e4f428cb72469e191",
            "patch": "@@ -8,6 +8,10 @@\n from django.utils.encoding import smart_str, smart_unicode\n from django.utils import datetime_safe\n \n+class SerializerDoesNotExist(KeyError):\n+    \"\"\"The requested serializer was not found.\"\"\"\n+    pass\n+\n class SerializationError(Exception):\n     \"\"\"Something bad happened during serialization.\"\"\"\n     pass"
        },
        {
            "sha": "f0f17b2ee2efa70323d1ceef3c5870f9e9211646",
            "filename": "docs/topics/serialization.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/930371e91b03f91691fa5e2e4f428cb72469e191/docs%2Ftopics%2Fserialization.txt",
            "raw_url": "https://github.com/django/django/raw/930371e91b03f91691fa5e2e4f428cb72469e191/docs%2Ftopics%2Fserialization.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fserialization.txt?ref=930371e91b03f91691fa5e2e4f428cb72469e191",
            "patch": "@@ -38,6 +38,12 @@ This is useful if you want to serialize data directly to a file-like object\n     out = open(\"file.xml\", \"w\")\n     xml_serializer.serialize(SomeModel.objects.all(), stream=out)\n \n+.. note::\n+\n+    Calling :func:`~django.core.serializers.get_serializer` with an unknown\n+    :ref:`format <serialization-formats>` will raise a\n+    :class:`~django.core.serializers.SerializerDoesNotExist` exception.\n+\n Subset of fields\n ~~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "97b2a792eb4bda459d418dc8a0656f5f13d25e0e",
            "filename": "tests/regressiontests/serializers_regress/tests.py",
            "status": "modified",
            "additions": 24,
            "deletions": 2,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/930371e91b03f91691fa5e2e4f428cb72469e191/tests%2Fregressiontests%2Fserializers_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/930371e91b03f91691fa5e2e4f428cb72469e191/tests%2Fregressiontests%2Fserializers_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fserializers_regress%2Ftests.py?ref=930371e91b03f91691fa5e2e4f428cb72469e191",
            "patch": "@@ -6,7 +6,7 @@\n the serializers. This includes all valid data values, plus\n forward, backwards and self references.\n \"\"\"\n-\n+from __future__ import with_statement\n \n import datetime\n import decimal\n@@ -17,6 +17,7 @@\n \n from django.conf import settings\n from django.core import serializers, management\n+from django.core.serializers import SerializerDoesNotExist\n from django.db import transaction, DEFAULT_DB_ALIAS, connection\n from django.test import TestCase\n from django.utils.functional import curry\n@@ -350,7 +351,28 @@ def inherited_compare(testcase, pk, klass, data):\n # Dynamically create serializer tests to ensure that all\n # registered serializers are automatically tested.\n class SerializerTests(TestCase):\n-    pass\n+    def test_get_unknown_serializer(self):\n+        \"\"\"\n+        #15889: get_serializer('nonsense') raises a SerializerDoesNotExist\n+        \"\"\"\n+        with self.assertRaises(SerializerDoesNotExist):\n+            serializers.get_serializer(\"nonsense\")\n+\n+        with self.assertRaises(KeyError):\n+            serializers.get_serializer(\"nonsense\")\n+\n+        # SerializerDoesNotExist is instantiated with the nonexistent format\n+        with self.assertRaises(SerializerDoesNotExist) as cm:\n+            serializers.get_serializer(\"nonsense\")\n+        self.assertEqual(cm.exception.args, (\"nonsense\",))\n+\n+    def test_unregister_unkown_serializer(self):\n+        with self.assertRaises(SerializerDoesNotExist):\n+            serializers.unregister_serializer(\"nonsense\")\n+\n+    def test_get_unkown_deserializer(self):\n+        with self.assertRaises(SerializerDoesNotExist):\n+            serializers.get_deserializer(\"nonsense\")\n \n def serializerTest(format, self):\n "
        }
    ],
    "stats": {
        "total": 44,
        "additions": 42,
        "deletions": 2
    }
}