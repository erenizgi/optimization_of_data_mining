{
    "author": "alex",
    "message": "Converted French localflavor doctests into unittests.  We have always been at war with doctests.  Thanks to Idan Gazit.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14939 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "6127cf13cd6d6e20172b105b231ab9561718f0ef",
    "files": [
        {
            "sha": "96045c32a9c4fe2df8e8335d8b309ef4ee327c34",
            "filename": "tests/regressiontests/forms/localflavor/fr.py",
            "status": "modified",
            "additions": 34,
            "deletions": 111,
            "changes": 145,
            "blob_url": "https://github.com/django/django/blob/6127cf13cd6d6e20172b105b231ab9561718f0ef/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Ffr.py",
            "raw_url": "https://github.com/django/django/raw/6127cf13cd6d6e20172b105b231ab9561718f0ef/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Ffr.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Ffr.py?ref=6127cf13cd6d6e20172b105b231ab9561718f0ef",
            "patch": "@@ -1,117 +1,40 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ FR form fields.\n+from django.contrib.localflavor.fr.forms import (FRZipCodeField,\n+        FRPhoneNumberField, FRDepartmentSelect)\n \n-tests = r\"\"\"\n-# FRZipCodeField #############################################################\n+from utils import LocalFlavorTestCase\n \n-FRZipCodeField validates that the data is a valid FR zipcode.\n->>> from django.contrib.localflavor.fr.forms import FRZipCodeField\n->>> f = FRZipCodeField()\n->>> f.clean('75001')\n-u'75001'\n->>> f.clean('93200')\n-u'93200'\n->>> f.clean('2A200')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXXX.']\n->>> f.clean('980001')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXXX.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n \n->>> f = FRZipCodeField(required=False)\n->>> f.clean('75001')\n-u'75001'\n->>> f.clean('93200')\n-u'93200'\n->>> f.clean('2A200')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXXX.']\n->>> f.clean('980001')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a zip code in the format XXXXX.']\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n+class FRLocalFlavorTests(LocalFlavorTestCase):\n+    def test_FRZipCodeField(self):\n+        error_format = [u'Enter a zip code in the format XXXXX.']\n+        valid = {\n+            '75001': '75001',\n+            '93200': '93200',\n+        }\n+        invalid = {\n+            '2A200': error_format,\n+            '980001': error_format,\n+        }\n+        self.assertFieldOutput(FRZipCodeField, valid, invalid)\n \n+    def test_FRPhoneNumberField(self):\n+        error_format = [u'Phone numbers must be in 0X XX XX XX XX format.']\n+        valid = {\n+            '01 55 44 58 64': '01 55 44 58 64',\n+            '0155445864': '01 55 44 58 64',\n+            '01 5544 5864': '01 55 44 58 64',\n+            '01 55.44.58.64': '01 55 44 58 64',\n+            '01.55.44.58.64': '01 55 44 58 64',\n+        }\n+        invalid = {\n+            '01,55,44,58,64': error_format,\n+            '555 015 544': error_format,\n+        }\n+        self.assertFieldOutput(FRPhoneNumberField, valid, invalid)\n \n-# FRPhoneNumberField ##########################################################\n-\n-FRPhoneNumberField validates that the data is a valid french phone number.\n-It's normalized to 0X XX XX XX XX format. Dots are valid too.\n->>> from django.contrib.localflavor.fr.forms import FRPhoneNumberField\n->>> f = FRPhoneNumberField()\n->>> f.clean('01 55 44 58 64')\n-u'01 55 44 58 64'\n->>> f.clean('0155445864')\n-u'01 55 44 58 64'\n->>> f.clean('01 5544 5864')\n-u'01 55 44 58 64'\n->>> f.clean('01 55.44.58.64')\n-u'01 55 44 58 64'\n->>> f.clean('01.55.44.58.64')\n-u'01 55 44 58 64'\n->>> f.clean('01,55,44,58,64')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must be in 0X XX XX XX XX format.']\n->>> f.clean('555 015 544')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must be in 0X XX XX XX XX format.']\n->>> f.clean(None)\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n->>> f.clean('')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'This field is required.']\n-\n->>> f = FRPhoneNumberField(required=False)\n->>> f.clean('01 55 44 58 64')\n-u'01 55 44 58 64'\n->>> f.clean('0155445864')\n-u'01 55 44 58 64'\n->>> f.clean('01 5544 5864')\n-u'01 55 44 58 64'\n->>> f.clean('01 55.44.58.64')\n-u'01 55 44 58 64'\n->>> f.clean('01.55.44.58.64')\n-u'01 55 44 58 64'\n->>> f.clean('01,55,44,58,64')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must be in 0X XX XX XX XX format.']\n->>> f.clean('555 015 544')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Phone numbers must be in 0X XX XX XX XX format.']\n->>> f.clean(None)\n-u''\n->>> f.clean('')\n-u''\n-\n-# FRDepartmentSelect ###############################################################\n-\n-FRDepartmentSelect is a Select widget that uses a list of french departments\n-including DOM TOM\n->>> from django.contrib.localflavor.fr.forms import FRDepartmentSelect\n->>> w = FRDepartmentSelect()\n->>> print w.render('dep', 'Paris')\n-<select name=\"dep\">\n+    def test_FRDepartmentSelect(self):\n+        f = FRDepartmentSelect()\n+        out = u'''<select name=\"dep\">\n <option value=\"01\">01 - Ain</option>\n <option value=\"02\">02 - Aisne</option>\n <option value=\"03\">03 - Allier</option>\n@@ -218,5 +141,5 @@\n <option value=\"986\">986 - Wallis et Futuna</option>\n <option value=\"987\">987 - Polynesie Francaise</option>\n <option value=\"988\">988 - Nouvelle-Caledonie</option>\n-</select>\n-\"\"\"\n+</select>'''\n+        self.assertEqual(f.render('dep', 'Paris'), out)"
        },
        {
            "sha": "921148c85448b5ac2908d46dfb48a40776b9f2b4",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/6127cf13cd6d6e20172b105b231ab9561718f0ef/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/6127cf13cd6d6e20172b105b231ab9561718f0ef/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=6127cf13cd6d6e20172b105b231ab9561718f0ef",
            "patch": "@@ -1,6 +1,5 @@\n # -*- coding: utf-8 -*-\n from localflavor.cz import tests as localflavor_cz_tests\n-from localflavor.fr import tests as localflavor_fr_tests\n from localflavor.generic import tests as localflavor_generic_tests\n from localflavor.id import tests as localflavor_id_tests\n from localflavor.ie import tests as localflavor_ie_tests\n@@ -30,13 +29,13 @@\n from localflavor.de import DELocalFlavorTests\n from localflavor.es import ESLocalFlavorTests\n from localflavor.fi import FILocalFlavorTests\n+from localflavor.fr import FRLocalFlavorTests\n from localflavor.il import ILLocalFlavorTests\n from localflavor.tr import TRLocalFlavorTests\n \n \n __test__ = {\n     'localflavor_cz_tests': localflavor_cz_tests,\n-    'localflavor_fr_tests': localflavor_fr_tests,\n     'localflavor_generic_tests': localflavor_generic_tests,\n     'localflavor_id_tests': localflavor_id_tests,\n     'localflavor_ie_tests': localflavor_ie_tests,"
        },
        {
            "sha": "99845d42be35e3f8ead275fa7ed9a9bb785897ac",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/6127cf13cd6d6e20172b105b231ab9561718f0ef/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/6127cf13cd6d6e20172b105b231ab9561718f0ef/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=6127cf13cd6d6e20172b105b231ab9561718f0ef",
            "patch": "@@ -24,6 +24,7 @@\n     DELocalFlavorTests,\n     ESLocalFlavorTests,\n     FILocalFlavorTests,\n+    FRLocalFlavorTests,\n     ILLocalFlavorTests,\n     TRLocalFlavorTests,\n )"
        }
    ],
    "stats": {
        "total": 149,
        "additions": 36,
        "deletions": 113
    }
}