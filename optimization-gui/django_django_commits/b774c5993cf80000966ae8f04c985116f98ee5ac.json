{
    "author": "claudep",
    "message": "Fixed #19172 -- Isolated poisoned_http_host tests from 500 handlers\n\nThanks bernardofontes for the report.",
    "sha": "b774c5993cf80000966ae8f04c985116f98ee5ac",
    "files": [
        {
            "sha": "b97d4a7cdf147048e8431996c8ca3474714572e3",
            "filename": "django/contrib/auth/tests/views.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/b774c5993cf80000966ae8f04c985116f98ee5ac/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/b774c5993cf80000966ae8f04c985116f98ee5ac/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py?ref=b774c5993cf80000966ae8f04c985116f98ee5ac",
            "patch": "@@ -115,6 +115,8 @@ def test_admin_reset(self):\n         self.assertTrue(\"http://adminsite.com\" in mail.outbox[0].body)\n         self.assertEqual(settings.DEFAULT_FROM_EMAIL, mail.outbox[0].from_email)\n \n+    # Skip any 500 handler action (like sending more mail...)\n+    @override_settings(DEBUG_PROPAGATE_EXCEPTIONS=True)\n     def test_poisoned_http_host(self):\n         \"Poisoned HTTP_HOST headers can't be used for reset emails\"\n         # This attack is based on the way browsers handle URLs. The colon\n@@ -131,6 +133,8 @@ def test_poisoned_http_host(self):\n             )\n         self.assertEqual(len(mail.outbox), 0)\n \n+    # Skip any 500 handler action (like sending more mail...)\n+    @override_settings(DEBUG_PROPAGATE_EXCEPTIONS=True)\n     def test_poisoned_http_host_admin_site(self):\n         \"Poisoned HTTP_HOST headers can't be used for reset emails on admin views\"\n         with self.assertRaises(SuspiciousOperation):"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}