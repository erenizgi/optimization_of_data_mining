{
    "author": "clelland",
    "message": "Use HTML parser to compare html snippets",
    "sha": "585aa11d233b7e3e40fe45fa69ef045d8f282345",
    "files": [
        {
            "sha": "3c868012fadd36b44dc56bec24cef734deaf402a",
            "filename": "tests/regressiontests/admin_inlines/tests.py",
            "status": "modified",
            "additions": 32,
            "deletions": 21,
            "changes": 53,
            "blob_url": "https://github.com/django/django/blob/585aa11d233b7e3e40fe45fa69ef045d8f282345/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/585aa11d233b7e3e40fe45fa69ef045d8f282345/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_inlines%2Ftests.py?ref=585aa11d233b7e3e40fe45fa69ef045d8f282345",
            "patch": "@@ -131,19 +131,17 @@ def test_non_related_name_inline(self):\n         response = self.client.get('/admin/admin_inlines/capofamiglia/add/')\n \n         self.assertContains(response,\n-                '<input type=\"hidden\" name=\"-1-0-id\" id=\"id_-1-0-id\" />')\n+                '<input type=\"hidden\" name=\"-1-0-id\" id=\"id_-1-0-id\" />', html=True)\n         self.assertContains(response,\n-                '<input type=\"hidden\" name=\"-1-0-capo_famiglia\" '\n-                'id=\"id_-1-0-capo_famiglia\" />')\n+                '<input type=\"hidden\" name=\"-1-0-capo_famiglia\" id=\"id_-1-0-capo_famiglia\" />', html=True)\n         self.assertContains(response,\n                 '<input id=\"id_-1-0-name\" type=\"text\" class=\"vTextField\" '\n                 'name=\"-1-0-name\" maxlength=\"100\" />', html=True)\n \n         self.assertContains(response,\n-                '<input type=\"hidden\" name=\"-2-0-id\" id=\"id_-2-0-id\" />')\n+                '<input type=\"hidden\" name=\"-2-0-id\" id=\"id_-2-0-id\" />', html=True)\n         self.assertContains(response,\n-                '<input type=\"hidden\" name=\"-2-0-capo_famiglia\" '\n-                'id=\"id_-2-0-capo_famiglia\" />')\n+                '<input type=\"hidden\" name=\"-2-0-capo_famiglia\" id=\"id_-2-0-capo_famiglia\" />', html=True)\n         self.assertContains(response,\n                 '<input id=\"id_-2-0-name\" type=\"text\" class=\"vTextField\" '\n                 'name=\"-2-0-name\" maxlength=\"100\" />', html=True)\n@@ -326,7 +324,8 @@ def test_inline_add_fk_add_perm(self):\n         # Add permission on inner2s, so we get the inline\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         self.assertContains(response, 'Add another Inner2')\n-        self.assertContains(response, 'value=\"3\" id=\"id_inner2_set-TOTAL_FORMS\"')\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-TOTAL_FORMS\" '\n+                            'value=\"3\" name=\"inner2_set-TOTAL_FORMS\" />', html=True)\n \n     def test_inline_change_m2m_add_perm(self):\n         permission = Permission.objects.get(codename='add_book', content_type=self.book_ct)\n@@ -345,8 +344,10 @@ def test_inline_change_m2m_change_perm(self):\n         # We have change perm on books, so we can add/change/delete inlines\n         self.assertContains(response, '<h2>Author-book relationships</h2>')\n         self.assertContains(response, 'Add another Author-Book Relationship')\n-        self.assertContains(response, 'value=\"4\" id=\"id_Author_books-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"Author_books-0-id\" value=\"%i\"' % self.author_book_auto_m2m_intermediate_id)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_Author_books-TOTAL_FORMS\" '\n+                            'value=\"4\" name=\"Author_books-TOTAL_FORMS\" />', html=True)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_Author_books-0-id\" '\n+                            'value=\"%i\" name=\"Author_books-0-id\" />' % self.author_book_auto_m2m_intermediate_id, html=True)\n         self.assertContains(response, 'id=\"id_Author_books-0-DELETE\"')\n \n     def test_inline_change_fk_add_perm(self):\n@@ -357,8 +358,10 @@ def test_inline_change_fk_add_perm(self):\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         self.assertContains(response, 'Add another Inner2')\n         # 3 extra forms only, not the existing instance form\n-        self.assertContains(response, 'value=\"3\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertNotContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-TOTAL_FORMS\" '\n+                                'value=\"3\" name=\"inner2_set-TOTAL_FORMS\" />', html=True)\n+        self.assertNotContains(response, '<input type=\"hidden\" id=\"id_inner2_set-0-id\" '\n+                            'value=\"%i\" name=\"inner2_set-0-id\" />' % self.inner2_id, html=True)\n \n     def test_inline_change_fk_change_perm(self):\n         permission = Permission.objects.get(codename='change_inner2', content_type=self.inner_ct)\n@@ -367,10 +370,13 @@ def test_inline_change_fk_change_perm(self):\n         # Change permission on inner2s, so we can change existing but not add new\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         # Just the one form for existing instances\n-        self.assertContains(response, 'value=\"1\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-TOTAL_FORMS\" '\n+                                'value=\"1\" name=\"inner2_set-TOTAL_FORMS\" />', html=True)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-0-id\" '\n+                            'value=\"%i\" name=\"inner2_set-0-id\" />' % self.inner2_id, html=True)\n         # max-num 0 means we can't add new ones\n-        self.assertContains(response, 'value=\"0\" id=\"id_inner2_set-MAX_NUM_FORMS\"')\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-MAX_NUM_FORMS\" '\n+                                'value=\"0\" name=\"inner2_set-MAX_NUM_FORMS\" />', html=True)\n \n     def test_inline_change_fk_add_change_perm(self):\n         permission = Permission.objects.get(codename='add_inner2', content_type=self.inner_ct)\n@@ -381,9 +387,10 @@ def test_inline_change_fk_add_change_perm(self):\n         # Add/change perm, so we can add new and change existing\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         # One form for existing instance and three extra for new\n-        self.assertContains(response, 'value=\"4\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n-\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-TOTAL_FORMS\" '\n+                                'value=\"4\" name=\"inner2_set-TOTAL_FORMS\" />', html=True)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-0-id\" '\n+                            'value=\"%i\" name=\"inner2_set-0-id\" />' % self.inner2_id, html=True)\n \n     def test_inline_change_fk_change_del_perm(self):\n         permission = Permission.objects.get(codename='change_inner2', content_type=self.inner_ct)\n@@ -394,8 +401,10 @@ def test_inline_change_fk_change_del_perm(self):\n         # Change/delete perm on inner2s, so we can change/delete existing\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         # One form for existing instance only, no new\n-        self.assertContains(response, 'value=\"1\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-TOTAL_FORMS\" '\n+                                'value=\"1\" name=\"inner2_set-TOTAL_FORMS\" />', html=True)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-0-id\" '\n+                            'value=\"%i\" name=\"inner2_set-0-id\" />' % self.inner2_id, html=True)\n         self.assertContains(response, 'id=\"id_inner2_set-0-DELETE\"')\n \n \n@@ -410,8 +419,10 @@ def test_inline_change_fk_all_perms(self):\n         # All perms on inner2s, so we can add/change/delete\n         self.assertContains(response, '<h2>Inner2s</h2>')\n         # One form for existing instance only, three for new\n-        self.assertContains(response, 'value=\"4\" id=\"id_inner2_set-TOTAL_FORMS\"')\n-        self.assertContains(response, '<input type=\"hidden\" name=\"inner2_set-0-id\" value=\"%i\"' % self.inner2_id)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-TOTAL_FORMS\" '\n+                                'value=\"4\" name=\"inner2_set-TOTAL_FORMS\" />', html=True)\n+        self.assertContains(response, '<input type=\"hidden\" id=\"id_inner2_set-0-id\" '\n+                            'value=\"%i\" name=\"inner2_set-0-id\" />' % self.inner2_id, html=True)\n         self.assertContains(response, 'id=\"id_inner2_set-0-DELETE\"')\n \n "
        }
    ],
    "stats": {
        "total": 53,
        "additions": 32,
        "deletions": 21
    }
}