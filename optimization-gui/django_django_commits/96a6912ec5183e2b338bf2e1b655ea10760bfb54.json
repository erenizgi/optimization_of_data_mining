{
    "author": "claudep",
    "message": "[py3] Fixed compilemessages tests",
    "sha": "96a6912ec5183e2b338bf2e1b655ea10760bfb54",
    "files": [
        {
            "sha": "b7392b9173302719925d41bd21534a1c1010333e",
            "filename": "django/core/management/commands/compilemessages.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/96a6912ec5183e2b338bf2e1b655ea10760bfb54/django%2Fcore%2Fmanagement%2Fcommands%2Fcompilemessages.py",
            "raw_url": "https://github.com/django/django/raw/96a6912ec5183e2b338bf2e1b655ea10760bfb54/django%2Fcore%2Fmanagement%2Fcommands%2Fcompilemessages.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fcompilemessages.py?ref=96a6912ec5183e2b338bf2e1b655ea10760bfb54",
            "patch": "@@ -1,3 +1,5 @@\n+from __future__ import unicode_literals\n+\n import codecs\n import os\n import sys\n@@ -7,7 +9,7 @@\n def has_bom(fn):\n     with open(fn, 'rb') as f:\n         sample = f.read(4)\n-    return sample[:3] == '\\xef\\xbb\\xbf' or \\\n+    return sample[:3] == b'\\xef\\xbb\\xbf' or \\\n             sample.startswith(codecs.BOM_UTF16_LE) or \\\n             sample.startswith(codecs.BOM_UTF16_BE)\n "
        },
        {
            "sha": "b6119cf43d4e58201306b6fa9788abe0da29556b",
            "filename": "tests/regressiontests/i18n/commands/compilation.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/96a6912ec5183e2b338bf2e1b655ea10760bfb54/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py",
            "raw_url": "https://github.com/django/django/raw/96a6912ec5183e2b338bf2e1b655ea10760bfb54/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fcompilation.py?ref=96a6912ec5183e2b338bf2e1b655ea10760bfb54",
            "patch": "@@ -1,10 +1,10 @@\n import os\n-from io import BytesIO\n \n from django.core.management import call_command, CommandError\n from django.test import TestCase\n from django.test.utils import override_settings\n from django.utils import translation\n+from django.utils.six import StringIO\n \n test_dir = os.path.abspath(os.path.dirname(__file__))\n \n@@ -26,7 +26,7 @@ def test_bom_rejection(self):\n         os.chdir(test_dir)\n         with self.assertRaisesRegexp(CommandError,\n                 \"file has a BOM \\(Byte Order Mark\\)\"):\n-            call_command('compilemessages', locale=self.LOCALE, stderr=BytesIO())\n+            call_command('compilemessages', locale=self.LOCALE, stderr=StringIO())\n         self.assertFalse(os.path.exists(self.MO_FILE))\n \n \n@@ -42,7 +42,7 @@ def setUp(self):\n \n     def test_percent_symbol_in_po_file(self):\n         os.chdir(test_dir)\n-        call_command('compilemessages', locale=self.LOCALE, stderr=BytesIO())\n+        call_command('compilemessages', locale=self.LOCALE, stderr=StringIO())\n         self.assertTrue(os.path.exists(self.MO_FILE))\n \n \n@@ -57,7 +57,7 @@ class PercentRenderingTests(MessageCompilationTests):\n     def test_percent_symbol_escaping(self):\n         from django.template import Template, Context\n         os.chdir(test_dir)\n-        call_command('compilemessages', locale=self.LOCALE, stderr=BytesIO())\n+        call_command('compilemessages', locale=self.LOCALE, stderr=StringIO())\n         with translation.override(self.LOCALE):\n             t = Template('{% load i18n %}{% trans \"Looks like a str fmt spec %% o but shouldn\\'t be interpreted as such\" %}')\n             rendered = t.render(Context({}))"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 7,
        "deletions": 5
    }
}