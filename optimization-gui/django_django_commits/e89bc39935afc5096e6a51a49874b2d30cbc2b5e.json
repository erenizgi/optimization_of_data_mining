{
    "author": "aaugustin",
    "message": "Reverted type check added in 62954ba04c.\n\nRefs #17040.",
    "sha": "e89bc39935afc5096e6a51a49874b2d30cbc2b5e",
    "files": [
        {
            "sha": "1fdcc3082e11c2fbf7347a9d5ff60c6fbfff5b13",
            "filename": "django/utils/crypto.py",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/e89bc39935afc5096e6a51a49874b2d30cbc2b5e/django%2Futils%2Fcrypto.py",
            "raw_url": "https://github.com/django/django/raw/e89bc39935afc5096e6a51a49874b2d30cbc2b5e/django%2Futils%2Fcrypto.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcrypto.py?ref=e89bc39935afc5096e6a51a49874b2d30cbc2b5e",
            "patch": "@@ -82,16 +82,14 @@ def get_random_string(length=12,\n \n def constant_time_compare(val1, val2):\n     \"\"\"\n-    Returns True if the two bytestrings are equal, False otherwise.\n+    Returns True if the two strings are equal, False otherwise.\n \n     The time taken is independent of the number of characters that match.\n     \"\"\"\n-    if not (isinstance(val1, bytes) and isinstance(val2, bytes)):\n-        raise TypeError(\"constant_time_compare only supports bytes\")\n     if len(val1) != len(val2):\n         return False\n     result = 0\n-    if six.PY3:\n+    if six.PY3 and isinstance(val1, bytes) and isinstance(val2, bytes):\n         for x, y in zip(val1, val2):\n             result |= x ^ y\n     else:"
        },
        {
            "sha": "4c6b722ca9ed3819c3b3de9b09a6040918f4d815",
            "filename": "tests/regressiontests/utils/crypto.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/e89bc39935afc5096e6a51a49874b2d30cbc2b5e/tests%2Fregressiontests%2Futils%2Fcrypto.py",
            "raw_url": "https://github.com/django/django/raw/e89bc39935afc5096e6a51a49874b2d30cbc2b5e/tests%2Fregressiontests%2Futils%2Fcrypto.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fcrypto.py?ref=e89bc39935afc5096e6a51a49874b2d30cbc2b5e",
            "patch": "@@ -15,8 +15,8 @@ def test_constant_time_compare(self):\n         # It's hard to test for constant time, just test the result.\n         self.assertTrue(constant_time_compare(b'spam', b'spam'))\n         self.assertFalse(constant_time_compare(b'spam', b'eggs'))\n-        with self.assertRaises(TypeError):\n-            constant_time_compare('spam', 'spam')\n+        self.assertTrue(constant_time_compare('spam', 'spam'))\n+        self.assertFalse(constant_time_compare('spam', 'eggs'))\n \n \n class TestUtilsCryptoPBKDF2(unittest.TestCase):"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 4,
        "deletions": 6
    }
}