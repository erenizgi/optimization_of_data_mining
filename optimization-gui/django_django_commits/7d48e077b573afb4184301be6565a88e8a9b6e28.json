{
    "author": "claudep",
    "message": "[py3] Fixed staticfiles tests",
    "sha": "7d48e077b573afb4184301be6565a88e8a9b6e28",
    "files": [
        {
            "sha": "1c841e988972cfecbc5383e9af5015d952848612",
            "filename": "django/contrib/staticfiles/storage.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/7d48e077b573afb4184301be6565a88e8a9b6e28/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "raw_url": "https://github.com/django/django/raw/7d48e077b573afb4184301be6565a88e8a9b6e28/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fstorage.py?ref=7d48e077b573afb4184301be6565a88e8a9b6e28",
            "patch": "@@ -51,8 +51,8 @@ class CachedFilesMixin(object):\n     default_template = \"\"\"url(\"%s\")\"\"\"\n     patterns = (\n         (\"*.css\", (\n-            br\"\"\"(url\\(['\"]{0,1}\\s*(.*?)[\"']{0,1}\\))\"\"\",\n-            (br\"\"\"(@import\\s*[\"']\\s*(.*?)[\"'])\"\"\", \"\"\"@import url(\"%s\")\"\"\"),\n+            r\"\"\"(url\\(['\"]{0,1}\\s*(.*?)[\"']{0,1}\\))\"\"\",\n+            (r\"\"\"(@import\\s*[\"']\\s*(.*?)[\"'])\"\"\", \"\"\"@import url(\"%s\")\"\"\"),\n         )),\n     )\n "
        },
        {
            "sha": "7b80f1349628fe62a84a48886fc5de2e351780bf",
            "filename": "django/utils/encoding.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/7d48e077b573afb4184301be6565a88e8a9b6e28/django%2Futils%2Fencoding.py",
            "raw_url": "https://github.com/django/django/raw/7d48e077b573afb4184301be6565a88e8a9b6e28/django%2Futils%2Fencoding.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fencoding.py?ref=7d48e077b573afb4184301be6565a88e8a9b6e28",
            "patch": "@@ -225,7 +225,7 @@ def filepath_to_uri(path):\n         return path\n     # I know about `os.sep` and `os.altsep` but I want to leave\n     # some flexibility for hardcoding separators.\n-    return quote(smart_bytes(path).replace(\"\\\\\", \"/\"), safe=b\"/~!*()'\")\n+    return quote(smart_bytes(path.replace(\"\\\\\", \"/\")), safe=b\"/~!*()'\")\n \n # The encoding of the default system locale but falls back to the\n # given fallback encoding if the encoding is unsupported by python or could"
        },
        {
            "sha": "515b7c3a53e7c10abd3b6fde8b48d5bbf654085c",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/7d48e077b573afb4184301be6565a88e8a9b6e28/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/7d48e077b573afb4184301be6565a88e8a9b6e28/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=7d48e077b573afb4184301be6565a88e8a9b6e28",
            "patch": "@@ -527,11 +527,11 @@ def test_cache_key_memcache_validation(self):\n         \"\"\"\n         Handle cache key creation correctly, see #17861.\n         \"\"\"\n-        name = b\"/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/\" + chr(22) + chr(180)\n+        name = \"/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/long filename/ with spaces Here and ?#%#$/other/stuff/some crazy/\" + \"\\x16\" + \"\\xb4\"\n         cache_key = storage.staticfiles_storage.cache_key(name)\n         cache_validator = BaseCache({})\n         cache_validator.validate_key(cache_key)\n-        self.assertEqual(cache_key, 'staticfiles:e95bbc36387084582df2a70750d7b351')\n+        self.assertEqual(cache_key, 'staticfiles:821ea71ef36f95b3922a77f7364670e7')\n \n \n # we set DEBUG to False here since the template tag wouldn't work otherwise\n@@ -569,8 +569,8 @@ def test_template_tag_simple_content(self):\n         self.assertEqual(relpath, \"cached/styles.deploy12345.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n             content = relfile.read()\n-            self.assertNotIn(\"cached/other.css\", content)\n-            self.assertIn(\"other.deploy12345.css\", content)\n+            self.assertNotIn(b\"cached/other.css\", content)\n+            self.assertIn(b\"other.deploy12345.css\", content)\n \n if sys.platform != 'win32':\n "
        }
    ],
    "stats": {
        "total": 14,
        "additions": 7,
        "deletions": 7
    }
}