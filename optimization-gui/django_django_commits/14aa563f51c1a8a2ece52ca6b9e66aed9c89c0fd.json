{
    "author": "aaugustin",
    "message": "Removed superfluous code now that connections use autocommit by default.",
    "sha": "14aa563f51c1a8a2ece52ca6b9e66aed9c89c0fd",
    "files": [
        {
            "sha": "c0d0a5958b74a35c318bbce03f3a132a854ab1bd",
            "filename": "django/db/backends/creation.py",
            "status": "modified",
            "additions": 1,
            "deletions": 14,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/14aa563f51c1a8a2ece52ca6b9e66aed9c89c0fd/django%2Fdb%2Fbackends%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/14aa563f51c1a8a2ece52ca6b9e66aed9c89c0fd/django%2Fdb%2Fbackends%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fcreation.py?ref=14aa563f51c1a8a2ece52ca6b9e66aed9c89c0fd",
            "patch": "@@ -383,10 +383,7 @@ def _create_test_db(self, verbosity, autoclobber):\n \n         qn = self.connection.ops.quote_name\n \n-        # Create the test database and connect to it. We need to autocommit\n-        # if the database supports it because PostgreSQL doesn't allow\n-        # CREATE/DROP DATABASE statements within transactions.\n-        self._prepare_for_test_db_ddl()\n+        # Create the test database and connect to it.\n         cursor = self.connection.cursor()\n         try:\n             cursor.execute(\n@@ -454,7 +451,6 @@ def _destroy_test_db(self, test_database_name, verbosity):\n         # to do so, because it's not allowed to delete a database while being\n         # connected to it.\n         cursor = self.connection.cursor()\n-        self._prepare_for_test_db_ddl()\n         # Wait to avoid \"database is being accessed by other users\" errors.\n         time.sleep(1)\n         cursor.execute(\"DROP DATABASE %s\"\n@@ -472,15 +468,6 @@ def set_autocommit(self):\n             \"BaseDatabaseWrapper.\", PendingDeprecationWarning, stacklevel=2)\n         return self.connection.set_autocommit()\n \n-    def _prepare_for_test_db_ddl(self):\n-        \"\"\"\n-        Internal implementation - Hook for tasks that should be performed\n-        before the ``CREATE DATABASE``/``DROP DATABASE`` clauses used by\n-        testing code to create/ destroy test databases. Needed e.g. in\n-        PostgreSQL to rollback and close any active transaction.\n-        \"\"\"\n-        pass\n-\n     def sql_table_creation_suffix(self):\n         \"\"\"\n         SQL to append to the end of the test table creation statements."
        },
        {
            "sha": "3ba21581032e8b6bc485cbffedf3e99d2aa2078a",
            "filename": "django/db/backends/postgresql_psycopg2/creation.py",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/14aa563f51c1a8a2ece52ca6b9e66aed9c89c0fd/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/14aa563f51c1a8a2ece52ca6b9e66aed9c89c0fd/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fcreation.py?ref=14aa563f51c1a8a2ece52ca6b9e66aed9c89c0fd",
            "patch": "@@ -77,11 +77,3 @@ def get_index_sql(index_name, opclass=''):\n                 output.append(get_index_sql('%s_%s_like' % (db_table, f.column),\n                                             ' text_pattern_ops'))\n         return output\n-\n-    def _prepare_for_test_db_ddl(self):\n-        \"\"\"Rollback and close the active transaction.\"\"\"\n-        # Make sure there is an open connection.\n-        self.connection.cursor()\n-        self.connection.connection.rollback()\n-        self.connection.connection.set_isolation_level(\n-                psycopg2.extensions.ISOLATION_LEVEL_AUTOCOMMIT)"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 1,
        "deletions": 22
    }
}