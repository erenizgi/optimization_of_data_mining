{
    "author": "claudep",
    "message": "[py3] Fixed contrib.auth tests",
    "sha": "34ac1457962165afbe8203742fdc5308e2979db6",
    "files": [
        {
            "sha": "7dcbfe47463a32be6d549b50d2205097b04a5a01",
            "filename": "django/contrib/auth/management/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/34ac1457962165afbe8203742fdc5308e2979db6/django%2Fcontrib%2Fauth%2Fmanagement%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/34ac1457962165afbe8203742fdc5308e2979db6/django%2Fcontrib%2Fauth%2Fmanagement%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fmanagement%2F__init__.py?ref=34ac1457962165afbe8203742fdc5308e2979db6",
            "patch": "@@ -108,7 +108,7 @@ def get_default_username(check_db=True):\n     default_username = get_system_username()\n     try:\n         default_username = unicodedata.normalize('NFKD', default_username)\\\n-            .encode('ascii', 'ignore').replace(' ', '').lower()\n+            .encode('ascii', 'ignore').decode('ascii').replace(' ', '').lower()\n     except UnicodeDecodeError:\n         return ''\n     if not RE_VALID_USERNAME.match(default_username):"
        },
        {
            "sha": "44117a4f846199cf187bd53026c6881fc18a093c",
            "filename": "django/contrib/auth/tests/tokens.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/34ac1457962165afbe8203742fdc5308e2979db6/django%2Fcontrib%2Fauth%2Ftests%2Ftokens.py",
            "raw_url": "https://github.com/django/django/raw/34ac1457962165afbe8203742fdc5308e2979db6/django%2Fcontrib%2Fauth%2Ftests%2Ftokens.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Ftokens.py?ref=34ac1457962165afbe8203742fdc5308e2979db6",
            "patch": "@@ -1,9 +1,11 @@\n+import sys\n from datetime import date, timedelta\n \n from django.conf import settings\n from django.contrib.auth.models import User\n from django.contrib.auth.tokens import PasswordResetTokenGenerator\n from django.test import TestCase\n+from django.utils import unittest\n \n \n class TokenGeneratorTest(TestCase):\n@@ -51,6 +53,7 @@ def _today(self):\n         p2 = Mocked(date.today() + timedelta(settings.PASSWORD_RESET_TIMEOUT_DAYS + 1))\n         self.assertFalse(p2.check_token(user, tk1))\n \n+    @unittest.skipIf(sys.version_info[:2] >= (3, 0), \"Unnecessary test with Python 3\")\n     def test_date_length(self):\n         \"\"\"\n         Make sure we don't allow overly long dates, causing a potential DoS."
        },
        {
            "sha": "c30d6ec6d091f9c61703fc636c8ef7a2648dd051",
            "filename": "django/contrib/auth/views.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/34ac1457962165afbe8203742fdc5308e2979db6/django%2Fcontrib%2Fauth%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/34ac1457962165afbe8203742fdc5308e2979db6/django%2Fcontrib%2Fauth%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fviews.py?ref=34ac1457962165afbe8203742fdc5308e2979db6",
            "patch": "@@ -200,7 +200,7 @@ def password_reset_confirm(request, uidb36=None, token=None,\n     try:\n         uid_int = base36_to_int(uidb36)\n         user = User.objects.get(id=uid_int)\n-    except (ValueError, User.DoesNotExist):\n+    except (ValueError, OverflowError, User.DoesNotExist):\n         user = None\n \n     if user is not None and token_generator.check_token(user, token):"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 5,
        "deletions": 2
    }
}