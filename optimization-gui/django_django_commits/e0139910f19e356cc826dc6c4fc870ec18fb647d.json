{
    "author": "jezdez",
    "message": "Fixed #15669 -- Included app label in admin validation messages. Thanks, lamby and Jure Cuhalev.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16462 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "e0139910f19e356cc826dc6c4fc870ec18fb647d",
    "files": [
        {
            "sha": "9a0c94812006e5a69cf67d56fd0021f47f535776",
            "filename": "django/contrib/admin/validation.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/e0139910f19e356cc826dc6c4fc870ec18fb647d/django%2Fcontrib%2Fadmin%2Fvalidation.py",
            "raw_url": "https://github.com/django/django/raw/e0139910f19e356cc826dc6c4fc870ec18fb647d/django%2Fcontrib%2Fadmin%2Fvalidation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fvalidation.py?ref=e0139910f19e356cc826dc6c4fc870ec18fb647d",
            "patch": "@@ -104,8 +104,8 @@ def validate(cls, model):\n                 field = opts.get_field_by_name(field_name)[0]\n             except models.FieldDoesNotExist:\n                 raise ImproperlyConfigured(\"'%s.list_editable[%d]' refers to a \"\n-                    \"field, '%s', not defined on %s.\"\n-                    % (cls.__name__, idx, field_name, model.__name__))\n+                    \"field, '%s', not defined on %s.%s.\"\n+                    % (cls.__name__, idx, field_name, model._meta.app_label, model.__name__))\n             if field_name not in cls.list_display:\n                 raise ImproperlyConfigured(\"'%s.list_editable[%d]' refers to \"\n                     \"'%s' which is not defined in 'list_display'.\"\n@@ -215,7 +215,7 @@ def validate_inline(cls, parent, parent_model):\n         if fk and fk.name in cls.exclude:\n             raise ImproperlyConfigured(\"%s cannot exclude the field \"\n                     \"'%s' - this is the foreign key to the parent model \"\n-                    \"%s.\" % (cls.__name__, fk.name, parent_model.__name__))\n+                    \"%s.%s.\" % (cls.__name__, fk.name, parent_model._meta.app_label, parent_model.__name__))\n \n     if hasattr(cls, \"readonly_fields\"):\n         check_readonly_fields(cls, cls.model, cls.model._meta)\n@@ -372,8 +372,8 @@ def get_field(cls, model, opts, label, field):\n     try:\n         return opts.get_field(field)\n     except models.FieldDoesNotExist:\n-        raise ImproperlyConfigured(\"'%s.%s' refers to field '%s' that is missing from model '%s'.\"\n-                % (cls.__name__, label, field, model.__name__))\n+        raise ImproperlyConfigured(\"'%s.%s' refers to field '%s' that is missing from model '%s.%s'.\"\n+                % (cls.__name__, label, field, model._meta.app_label, model.__name__))\n \n def check_formfield(cls, model, opts, label, field):\n     if getattr(cls.form, 'base_fields', None):\n@@ -398,8 +398,8 @@ def fetch_attr(cls, model, opts, label, field):\n     try:\n         return getattr(model, field)\n     except AttributeError:\n-        raise ImproperlyConfigured(\"'%s.%s' refers to '%s' that is neither a field, method or property of model '%s'.\"\n-            % (cls.__name__, label, field, model.__name__))\n+        raise ImproperlyConfigured(\"'%s.%s' refers to '%s' that is neither a field, method or property of model '%s.%s'.\"\n+            % (cls.__name__, label, field, model._meta.app_label, model.__name__))\n \n def check_readonly_fields(cls, model, opts):\n     check_isseq(cls, \"readonly_fields\", cls.readonly_fields)"
        },
        {
            "sha": "9e50a8b11232496bb54a8759b4091ab1b7f8867c",
            "filename": "tests/regressiontests/admin_validation/tests.py",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/e0139910f19e356cc826dc6c4fc870ec18fb647d/tests%2Fregressiontests%2Fadmin_validation%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e0139910f19e356cc826dc6c4fc870ec18fb647d/tests%2Fregressiontests%2Fadmin_validation%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_validation%2Ftests.py?ref=e0139910f19e356cc826dc6c4fc870ec18fb647d",
            "patch": "@@ -92,10 +92,22 @@ class AlbumAdmin(admin.ModelAdmin):\n             inlines = [SongInline]\n \n         self.assertRaisesMessage(ImproperlyConfigured,\n-            \"SongInline cannot exclude the field 'album' - this is the foreign key to the parent model Album.\",\n+            \"SongInline cannot exclude the field 'album' - this is the foreign key to the parent model admin_validation.Album.\",\n             validate,\n             AlbumAdmin, Album)\n \n+    def test_app_label_in_admin_validation(self):\n+        \"\"\"\n+        Regression test for #15669 - Include app label in admin validation messages\n+        \"\"\"\n+        class RawIdNonexistingAdmin(admin.ModelAdmin):\n+            raw_id_fields = ('nonexisting',)\n+\n+        self.assertRaisesMessage(ImproperlyConfigured,\n+            \"'RawIdNonexistingAdmin.raw_id_fields' refers to field 'nonexisting' that is missing from model 'admin_validation.Album'.\",\n+            validate,\n+            RawIdNonexistingAdmin, Album)\n+\n     def test_fk_exclusion(self):\n         \"\"\"\n         Regression test for #11709 - when testing for fk excluding (when exclude is"
        },
        {
            "sha": "27f9f2cb45e24e881b221a73e5f8940ce26633e2",
            "filename": "tests/regressiontests/modeladmin/tests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/e0139910f19e356cc826dc6c4fc870ec18fb647d/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e0139910f19e356cc826dc6c4fc870ec18fb647d/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodeladmin%2Ftests.py?ref=e0139910f19e356cc826dc6c4fc870ec18fb647d",
            "patch": "@@ -403,7 +403,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.raw_id_fields' refers to field 'non_existent_field' that is missing from model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.raw_id_fields' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -631,7 +631,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.filter_vertical' refers to field 'non_existent_field' that is missing from model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.filter_vertical' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -671,7 +671,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.filter_horizontal' refers to field 'non_existent_field' that is missing from model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.filter_horizontal' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -711,7 +711,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.radio_fields' refers to field 'non_existent_field' that is missing from model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.radio_fields' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -762,7 +762,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.prepopulated_fields' refers to field 'non_existent_field' that is missing from model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.prepopulated_fields' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -773,7 +773,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.prepopulated_fields\\['slug'\\]\\[0\\]' refers to field 'non_existent_field' that is missing from model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.prepopulated_fields\\['slug'\\]\\[0\\]' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -1010,7 +1010,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.date_hierarchy' refers to field 'non_existent_field' that is missing from model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.date_hierarchy' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -1050,7 +1050,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestModelAdmin.ordering\\[0\\]' refers to field 'non_existent_field' that is missing from model 'ValidationTestModel'.\",\n+            \"'ValidationTestModelAdmin.ordering\\[0\\]' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,\n@@ -1245,7 +1245,7 @@ class ValidationTestModelAdmin(ModelAdmin):\n \n         self.assertRaisesRegexp(\n             ImproperlyConfigured,\n-            \"'ValidationTestInline.fk_name' refers to field 'non_existent_field' that is missing from model 'ValidationTestInlineModel'.\",\n+            \"'ValidationTestInline.fk_name' refers to field 'non_existent_field' that is missing from model 'modeladmin.ValidationTestInlineModel'.\",\n             validate,\n             ValidationTestModelAdmin,\n             ValidationTestModel,"
        }
    ],
    "stats": {
        "total": 46,
        "additions": 29,
        "deletions": 17
    }
}