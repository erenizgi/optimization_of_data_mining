{
    "author": "freakboy3742",
    "message": "Fixed #15549 -- Removed dependency on specific primary keys. Thanks to bberes for the report.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15744 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "4b746a6a2421bd22c3135ac2947b5f7370d2dd87",
    "files": [
        {
            "sha": "e6c2633a08977460632897d886a20410b99bf6fc",
            "filename": "tests/regressiontests/model_formsets_regress/tests.py",
            "status": "modified",
            "additions": 15,
            "deletions": 11,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/4b746a6a2421bd22c3135ac2947b5f7370d2dd87/tests%2Fregressiontests%2Fmodel_formsets_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/4b746a6a2421bd22c3135ac2947b5f7370d2dd87/tests%2Fregressiontests%2Fmodel_formsets_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fmodel_formsets_regress%2Ftests.py?ref=4b746a6a2421bd22c3135ac2947b5f7370d2dd87",
            "patch": "@@ -337,14 +337,6 @@ def should_delete(self):\n             'form-3-serial': '5',\n             }\n \n-    bound_ids = {\n-            'form-INITIAL_FORMS': '4',\n-            'form-0-id': '1',\n-            'form-1-id': '2',\n-            'form-2-id': '3',\n-            'form-3-id': '4',\n-            }\n-\n     delete_all_ids = {\n             'form-0-DELETE': '1',\n             'form-1-DELETE': '1',\n@@ -365,7 +357,11 @@ def test_no_delete(self):\n \n         # pass standard data dict & see none updated\n         data = dict(self.data)\n-        data.update(self.bound_ids)\n+        data['form-INITIAL_FORMS'] = 4\n+        data.update(dict(\n+            ('form-%d-id' % i, user.id)\n+            for i,user in enumerate(User.objects.all())\n+        ))\n         formset = self.NormalFormset(data, queryset=User.objects.all())\n         self.assertTrue(formset.is_valid())\n         self.assertEqual(len(formset.save()), 0)\n@@ -378,7 +374,11 @@ def test_all_delete(self):\n \n         # create data dict with all fields marked for deletion\n         data = dict(self.data)\n-        data.update(self.bound_ids)\n+        data['form-INITIAL_FORMS'] = 4\n+        data.update(dict(\n+            ('form-%d-id' % i, user.id)\n+            for i,user in enumerate(User.objects.all())\n+        ))\n         data.update(self.delete_all_ids)\n         formset = self.NormalFormset(data, queryset=User.objects.all())\n         self.assertTrue(formset.is_valid())\n@@ -393,7 +393,11 @@ def test_custom_delete(self):\n         # Create formset with custom Delete function\n         # create data dict with all fields marked for deletion\n         data = dict(self.data)\n-        data.update(self.bound_ids)\n+        data['form-INITIAL_FORMS'] = 4\n+        data.update(dict(\n+            ('form-%d-id' % i, user.id)\n+            for i,user in enumerate(User.objects.all())\n+        ))\n         data.update(self.delete_all_ids)\n         formset = self.DeleteFormset(data, queryset=User.objects.all())\n "
        }
    ],
    "stats": {
        "total": 26,
        "additions": 15,
        "deletions": 11
    }
}