{
    "author": "idan",
    "message": "Fixed #11834 -- Improved technical 500 stacktrace display.\n\nThanks to buriy and Aleksandra for the implementation!\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16343 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "716601109a010f838e46abd1e971617581dbe9ba",
    "files": [
        {
            "sha": "7401a51da6d8eecc22f32393b9cfda5fd7595878",
            "filename": "django/views/debug.py",
            "status": "modified",
            "additions": 12,
            "deletions": 7,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/716601109a010f838e46abd1e971617581dbe9ba/django%2Fviews%2Fdebug.py",
            "raw_url": "https://github.com/django/django/raw/716601109a010f838e46abd1e971617581dbe9ba/django%2Fviews%2Fdebug.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdebug.py?ref=716601109a010f838e46abd1e971617581dbe9ba",
            "patch": "@@ -382,11 +382,12 @@ def get_traceback_frames(self):\n             function = tb.tb_frame.f_code.co_name\n             lineno = tb.tb_lineno - 1\n             loader = tb.tb_frame.f_globals.get('__loader__')\n-            module_name = tb.tb_frame.f_globals.get('__name__')\n+            module_name = tb.tb_frame.f_globals.get('__name__') or ''\n             pre_context_lineno, pre_context, context_line, post_context = self._get_lines_from_file(filename, lineno, 7, loader, module_name)\n             if pre_context_lineno is not None:\n                 frames.append({\n                     'tb': tb,\n+                    'type': module_name.startswith('django.') and 'django' or 'user',\n                     'filename': filename,\n                     'function': function,\n                     'lineno': lineno + 1,\n@@ -483,16 +484,20 @@ def empty_urlconf(request):\n     table td.code pre { overflow:hidden; }\n     table.source th { color:#666; }\n     table.source td { font-family:monospace; white-space:pre; border-bottom:1px solid #eee; }\n-    ul.traceback { list-style-type:none; }\n-    ul.traceback li.frame { padding-bottom:1em; }\n+    ul.traceback { list-style-type:none; color: #222; }\n+    ul.traceback li.frame { padding-bottom:1em; color:#666; }\n+    ul.traceback li.user { background-color:#e0e0e0; color:#000 }\n     div.context { padding:10px 0; overflow:hidden; }\n     div.context ol { padding-left:30px; margin:0 10px; list-style-position: inside; }\n-    div.context ol li { font-family:monospace; white-space:pre; color:#666; cursor:pointer; }\n+    div.context ol li { font-family:monospace; white-space:pre; color:#777; cursor:pointer; }\n     div.context ol li pre { display:inline; }\n-    div.context ol.context-line li { color:black; background-color:#ccc; }\n+    div.context ol.context-line li { color:#505050; background-color:#dfdfdf; }\n     div.context ol.context-line li span { position:absolute; right:32px; }\n+    .user div.context ol.context-line li { background-color:#bbb; color:#000; }\n+    .user div.context ol li { color:#666; }\n     div.commands { margin-left: 40px; }\n-    div.commands a { color:black; text-decoration:none; }\n+    div.commands a { color:#555; text-decoration:none; }\n+    .user div.commands a { color: black; }\n     #summary { background: #ffc; }\n     #summary h2 { font-weight: normal; color: #666; }\n     #explanation { background:#eee; }\n@@ -671,7 +676,7 @@ def empty_urlconf(request):\n   <div id=\"browserTraceback\">\n     <ul class=\"traceback\">\n       {% for frame in frames %}\n-        <li class=\"frame\">\n+        <li class=\"frame {{ frame.type }}\">\n           <code>{{ frame.filename|escape }}</code> in <code>{{ frame.function|escape }}</code>\n \n           {% if frame.context_line %}"
        },
        {
            "sha": "db62bedf2515abbc8f3139b4b0d76d00923fb0fd",
            "filename": "docs/releases/1.4.txt",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/716601109a010f838e46abd1e971617581dbe9ba/docs%2Freleases%2F1.4.txt",
            "raw_url": "https://github.com/django/django/raw/716601109a010f838e46abd1e971617581dbe9ba/docs%2Freleases%2F1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.4.txt?ref=716601109a010f838e46abd1e971617581dbe9ba",
            "patch": "@@ -136,6 +136,17 @@ You may override or customize the default filtering by writing a\n :ref:`Filtering error reports<filtering-error-reports>`.\n \n \n+Minor features\n+~~~~~~~~~~~~~~\n+\n+Django 1.4 also includes several smaller improvements worth noting:\n+\n+* A more usable stacktrace in the technical 500 page: frames in the stack\n+  trace which reference Django's code are dimmed out, while frames in user\n+  code are slightly emphasized. This change makes it easier to scan a stacktrace\n+  for issues in user code.\n+\n+\n .. _backwards-incompatible-changes-1.4:\n \n Backwards incompatible changes in 1.4"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 23,
        "deletions": 7
    }
}