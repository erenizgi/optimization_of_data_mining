{
    "author": "timgraham",
    "message": "Added WizardView.file_storage exception message and docs\n\nThanks Danilo Bargen for the patch.",
    "sha": "af7ea808d8540d1be87d89172f371ac928ff5c19",
    "files": [
        {
            "sha": "2e59679d094d0df806663761524a68bdbe7d7044",
            "filename": "django/contrib/formtools/wizard/storage/base.py",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/af7ea808d8540d1be87d89172f371ac928ff5c19/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/af7ea808d8540d1be87d89172f371ac928ff5c19/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Fwizard%2Fstorage%2Fbase.py?ref=af7ea808d8540d1be87d89172f371ac928ff5c19",
            "patch": "@@ -69,7 +69,9 @@ def get_step_files(self, step):\n         wizard_files = self.data[self.step_files_key].get(step, {})\n \n         if wizard_files and not self.file_storage:\n-            raise NoFileStorageConfigured\n+            raise NoFileStorageConfigured(\n+                    \"You need to define 'file_storage' in your \"\n+                    \"wizard view in order to handle file uploads.\")\n \n         files = {}\n         for field, field_dict in six.iteritems(wizard_files):\n@@ -81,7 +83,9 @@ def get_step_files(self, step):\n \n     def set_step_files(self, step, files):\n         if files and not self.file_storage:\n-            raise NoFileStorageConfigured\n+            raise NoFileStorageConfigured(\n+                    \"You need to define 'file_storage' in your \"\n+                    \"wizard view in order to handle file uploads.\")\n \n         if step not in self.data[self.step_files_key]:\n             self.data[self.step_files_key][step] = {}"
        },
        {
            "sha": "5b45267f36aed0d793db16eaec1fc382d3e717f5",
            "filename": "django/contrib/formtools/wizard/views.py",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/af7ea808d8540d1be87d89172f371ac928ff5c19/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/af7ea808d8540d1be87d89172f371ac928ff5c19/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Fwizard%2Fviews.py?ref=af7ea808d8540d1be87d89172f371ac928ff5c19",
            "patch": "@@ -174,7 +174,9 @@ def get_initkwargs(cls, form_list, initial_dict=None,\n             for field in six.itervalues(form.base_fields):\n                 if (isinstance(field, forms.FileField) and\n                         not hasattr(cls, 'file_storage')):\n-                    raise NoFileStorageConfigured\n+                    raise NoFileStorageConfigured(\n+                            \"You need to define 'file_storage' in your \"\n+                            \"wizard view in order to handle file uploads.\")\n \n         # build the kwargs for the wizardview instances\n         kwargs['form_list'] = init_form_list\n@@ -436,8 +438,8 @@ def get_form_step_files(self, form):\n     def get_all_cleaned_data(self):\n         \"\"\"\n         Returns a merged dictionary of all step cleaned_data dictionaries.\n-        If a step contains a `FormSet`, the key will be prefixed with formset\n-        and contain a list of the formset cleaned_data dictionaries.\n+        If a step contains a `FormSet`, the key will be prefixed with\n+        'formset-' and contain a list of the formset cleaned_data dictionaries.\n         \"\"\"\n         cleaned_data = {}\n         for form_key in self.get_form_list():\n@@ -458,8 +460,8 @@ def get_all_cleaned_data(self):\n     def get_cleaned_data_for_step(self, step):\n         \"\"\"\n         Returns the cleaned data for a given `step`. Before returning the\n-        cleaned data, the stored values are being revalidated through the\n-        form. If the data doesn't validate, None will be returned.\n+        cleaned data, the stored values are revalidated through the form.\n+        If the data doesn't validate, None will be returned.\n         \"\"\"\n         if step in self.form_list:\n             form_obj = self.get_form(step=step,"
        },
        {
            "sha": "3edc019d052082b0a358695907dcae54ae309b44",
            "filename": "docs/ref/contrib/formtools/form-wizard.txt",
            "status": "modified",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/django/django/blob/af7ea808d8540d1be87d89172f371ac928ff5c19/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "raw_url": "https://github.com/django/django/raw/af7ea808d8540d1be87d89172f371ac928ff5c19/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fformtools%2Fform-wizard.txt?ref=af7ea808d8540d1be87d89172f371ac928ff5c19",
            "patch": "@@ -493,6 +493,21 @@ Advanced ``WizardView`` methods\n             context = self.get_context_data(form=form, **kwargs)\n             return self.render_to_response(context)\n \n+.. method:: WizardView.get_cleaned_data_for_step(step)\n+\n+    This method returns the cleaned data for a given ``step``. Before returning\n+    the cleaned data, the stored values are revalidated through the form. If\n+    the data doesn't validate, ``None`` will be returned.\n+\n+.. method:: WizardView.get_all_cleaned_data()\n+\n+    This method returns a merged dictionary of all form steps' ``cleaned_data``\n+    dictionaries. If a step contains a ``FormSet``, the key will be prefixed\n+    with ``formset-`` and contain a list of the formset's ``cleaned_data``\n+    dictionaries. Note that if two or more steps have a field with the same\n+    name, the value for that field from the latest step will overwrite the\n+    value from any earlier steps.\n+\n Providing initial data for the forms\n ====================================\n \n@@ -534,6 +549,16 @@ This storage will temporarily store the uploaded files for the wizard. The\n :attr:`file_storage` attribute should be a\n :class:`~django.core.files.storage.Storage` subclass.\n \n+Django provides a built-in storage class (see :ref:`the built-in filesystem\n+storage class <builtin-fs-storage>`)::\n+\n+    from django.conf import settings\n+    from django.core.files.storage import FileSystemStorage\n+\n+    class CustomWizardView(WizardView):\n+        ...\n+        file_storage = FileSystemStorage(location=os.path.join(settings.MEDIA_ROOT, 'photos'))\n+\n .. warning::\n \n     Please remember to take care of removing old files as the"
        },
        {
            "sha": "66e104759ae9ed77a4560a3b9b2ff1ea4f541b48",
            "filename": "docs/topics/files.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/af7ea808d8540d1be87d89172f371ac928ff5c19/docs%2Ftopics%2Ffiles.txt",
            "raw_url": "https://github.com/django/django/raw/af7ea808d8540d1be87d89172f371ac928ff5c19/docs%2Ftopics%2Ffiles.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Ffiles.txt?ref=af7ea808d8540d1be87d89172f371ac928ff5c19",
            "patch": "@@ -139,6 +139,8 @@ useful -- you can use the global default storage system::\n \n See :doc:`/ref/files/storage` for the file storage API.\n \n+.. _builtin-fs-storage:\n+\n The built-in filesystem storage class\n -------------------------------------\n "
        }
    ],
    "stats": {
        "total": 47,
        "additions": 40,
        "deletions": 7
    }
}