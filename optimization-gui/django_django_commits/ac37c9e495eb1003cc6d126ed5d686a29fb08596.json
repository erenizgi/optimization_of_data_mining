{
    "author": "claudep",
    "message": "[py3] Encoded value before feeding it to hashlib.md5",
    "sha": "ac37c9e495eb1003cc6d126ed5d686a29fb08596",
    "files": [
        {
            "sha": "c54e8d280f9686edc4423b9f20853a871e6de11c",
            "filename": "django/core/cache/backends/filebased.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/ac37c9e495eb1003cc6d126ed5d686a29fb08596/django%2Fcore%2Fcache%2Fbackends%2Ffilebased.py",
            "raw_url": "https://github.com/django/django/raw/ac37c9e495eb1003cc6d126ed5d686a29fb08596/django%2Fcore%2Fcache%2Fbackends%2Ffilebased.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fcache%2Fbackends%2Ffilebased.py?ref=ac37c9e495eb1003cc6d126ed5d686a29fb08596",
            "patch": "@@ -10,6 +10,7 @@\n     import pickle\n \n from django.core.cache.backends.base import BaseCache\n+from django.utils.encoding import smart_bytes\n \n class FileBasedCache(BaseCache):\n     def __init__(self, dir, params):\n@@ -136,7 +137,7 @@ def _key_to_file(self, key):\n         Thus, a cache key of \"foo\" gets turnned into a file named\n         ``{cache-dir}ac/bd/18db4cc2f85cedef654fccc4a4d8``.\n         \"\"\"\n-        path = hashlib.md5(key).hexdigest()\n+        path = hashlib.md5(smart_bytes(key)).hexdigest()\n         path = os.path.join(path[:2], path[2:4], path[4:])\n         return os.path.join(self._dir, path)\n "
        },
        {
            "sha": "95b0fba07b26c0273c6c55779ea93df54122c3c9",
            "filename": "django/utils/cache.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ac37c9e495eb1003cc6d126ed5d686a29fb08596/django%2Futils%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/ac37c9e495eb1003cc6d126ed5d686a29fb08596/django%2Futils%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcache.py?ref=ac37c9e495eb1003cc6d126ed5d686a29fb08596",
            "patch": "@@ -23,7 +23,7 @@\n \n from django.conf import settings\n from django.core.cache import get_cache\n-from django.utils.encoding import iri_to_uri, force_text\n+from django.utils.encoding import iri_to_uri, force_text, smart_bytes\n from django.utils.http import http_date\n from django.utils.timezone import get_current_timezone_name\n from django.utils.translation import get_language\n@@ -180,14 +180,14 @@ def _generate_cache_key(request, method, headerlist, key_prefix):\n         value = request.META.get(header, None)\n         if value is not None:\n             ctx.update(value)\n-    path = hashlib.md5(iri_to_uri(request.get_full_path()))\n+    path = hashlib.md5(smart_bytes(iri_to_uri(request.get_full_path())))\n     cache_key = 'views.decorators.cache.cache_page.%s.%s.%s.%s' % (\n         key_prefix, method, path.hexdigest(), ctx.hexdigest())\n     return _i18n_cache_key_suffix(request, cache_key)\n \n def _generate_cache_header_key(key_prefix, request):\n     \"\"\"Returns a cache key for the header cache.\"\"\"\n-    path = hashlib.md5(iri_to_uri(request.get_full_path()))\n+    path = hashlib.md5(smart_bytes(iri_to_uri(request.get_full_path())))\n     cache_key = 'views.decorators.cache.cache_header.%s.%s' % (\n         key_prefix, path.hexdigest())\n     return _i18n_cache_key_suffix(request, cache_key)"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 5,
        "deletions": 4
    }
}