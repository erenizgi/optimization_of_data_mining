{
    "author": "ramiro",
    "message": "Patch by Claude for #16084.",
    "sha": "2babab0bb351ff7a13fd23795f5e926a9bf95d22",
    "files": [
        {
            "sha": "b086e5f2ddaaf9b3de3ecea24560077311c49e1f",
            "filename": "django/core/management/commands/makemessages.py",
            "status": "modified",
            "additions": 91,
            "deletions": 48,
            "changes": 139,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/django%2Fcore%2Fmanagement%2Fcommands%2Fmakemessages.py",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/django%2Fcore%2Fmanagement%2Fcommands%2Fmakemessages.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fmakemessages.py?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -19,25 +19,28 @@\n \n @total_ordering\n class TranslatableFile(object):\n-    def __init__(self, dirpath, file_name):\n+    def __init__(self, dirpath, file_name, locale_dir):\n         self.file = file_name\n         self.dirpath = dirpath\n+        self.locale_dir = locale_dir\n \n     def __repr__(self):\n         return \"<TranslatableFile: %s>\" % os.sep.join([self.dirpath, self.file])\n \n     def __eq__(self, other):\n-        return self.dirpath == other.dirpath and self.file == other.file\n+        return self.path == other.path\n \n     def __lt__(self, other):\n-        if self.dirpath == other.dirpath:\n-            return self.file < other.file\n-        return self.dirpath < other.dirpath\n+        return self.path < other.path\n \n-    def process(self, command, potfile, domain, keep_pot=False):\n+    @property\n+    def path(self):\n+        return os.path.join(self.dirpath, self.file)\n+\n+    def process(self, command, domain):\n         \"\"\"\n-        Extract translatable literals from self.file for :param domain:\n-        creating or updating the :param potfile: POT file.\n+        Extract translatable literals from self.file for :param domain:,\n+        creating or updating the POT file.\n \n         Uses the xgettext GNU gettext utility.\n         \"\"\"\n@@ -91,20 +94,21 @@ def process(self, command, potfile, domain, keep_pot=False):\n             if status != STATUS_OK:\n                 if is_templatized:\n                     os.unlink(work_file)\n-                if not keep_pot and os.path.exists(potfile):\n-                    os.unlink(potfile)\n                 raise CommandError(\n                     \"errors happened while running xgettext on %s\\n%s\" %\n                     (self.file, errors))\n             elif command.verbosity > 0:\n                 # Print warnings\n                 command.stdout.write(errors)\n         if msgs:\n+            # Write/append messages to pot file\n+            potfile = os.path.join(self.locale_dir, '%s.pot' % str(domain))\n             if is_templatized:\n                 old = '#: ' + work_file[2:]\n                 new = '#: ' + orig_file[2:]\n                 msgs = msgs.replace(old, new)\n             write_pot_file(potfile, msgs)\n+\n         if is_templatized:\n             os.unlink(work_file)\n \n@@ -232,21 +236,21 @@ def handle_noargs(self, *args, **options):\n             settings.configure(USE_I18N = True)\n \n         self.invoked_for_django = False\n+        self.locale_paths = []\n+        self.default_locale_path = None\n         if os.path.isdir(os.path.join('conf', 'locale')):\n-            localedir = os.path.abspath(os.path.join('conf', 'locale'))\n+            self.locale_paths = [os.path.abspath(os.path.join('conf', 'locale'))]\n+            self.default_locale_path = self.locale_paths[0]\n             self.invoked_for_django = True\n             # Ignoring all contrib apps\n             self.ignore_patterns += ['contrib/*']\n-        elif os.path.isdir('locale'):\n-            localedir = os.path.abspath('locale')\n         else:\n-            raise CommandError(\"This script should be run from the Django Git \"\n-                    \"tree or your project or app tree. If you did indeed run it \"\n-                    \"from the Git checkout or your project or application, \"\n-                    \"maybe you are just missing the conf/locale (in the django \"\n-                    \"tree) or locale (for project and application) directory? It \"\n-                    \"is not created automatically, you have to create it by hand \"\n-                    \"if you want to enable i18n for your project or application.\")\n+            self.locale_paths.extend(list(settings.LOCALE_PATHS))\n+            # Allow to run makemessages inside an app dir\n+            if os.path.isdir('locale'):\n+                self.locale_paths.append(os.path.abspath('locale'))\n+            if self.locale_paths:\n+                self.default_locale_path = self.locale_paths[0]\n \n         # We require gettext version 0.15 or newer.\n         output, errors, status = _popen('xgettext --version')\n@@ -261,24 +265,25 @@ def handle_noargs(self, *args, **options):\n                         \"gettext 0.15 or newer. You are using version %s, please \"\n                         \"upgrade your gettext toolset.\" % match.group())\n \n-        potfile = self.build_pot_file(localedir)\n+        try:\n+            potfiles = self.build_potfiles()\n \n-        # Build po files for each selected locale\n-        locales = []\n-        if locale is not None:\n-            locales += locale.split(',') if not isinstance(locale, list) else locale\n-        elif process_all:\n-            locale_dirs = filter(os.path.isdir, glob.glob('%s/*' % localedir))\n-            locales = [os.path.basename(l) for l in locale_dirs]\n+            # Build po files for each selected locale\n+            locales = []\n+            if locale is not None:\n+                locales = locale.split(',') if not isinstance(locale, list) else locale\n+            elif process_all:\n+                locale_dirs = filter(os.path.isdir, glob.glob('%s/*' % self.default_locale_path))\n+                locales = [os.path.basename(l) for l in locale_dirs]\n \n-        try:\n             for locale in locales:\n                 if self.verbosity > 0:\n                     self.stdout.write(\"processing locale %s\\n\" % locale)\n-                self.write_po_file(potfile, locale)\n+                for potfile in potfiles:\n+                    self.write_po_file(potfile, locale)\n         finally:\n-            if not self.keep_pot and os.path.exists(potfile):\n-                os.unlink(potfile)\n+            if not self.keep_pot:\n+                self.remove_potfiles()\n \n     def build_pot_file(self, localedir):\n         file_list = self.find_files(\".\")\n@@ -292,9 +297,41 @@ def build_pot_file(self, localedir):\n             f.process(self, potfile, self.domain, self.keep_pot)\n         return potfile\n \n+    def build_potfiles(self):\n+        \"\"\"Build pot files and apply msguniq to them\"\"\"\n+        file_list = self.find_files(\".\")\n+        self.remove_potfiles()\n+        for f in file_list:\n+            f.process(self, self.domain)\n+\n+        potfiles = []\n+        for path in self.locale_paths:\n+            potfile = os.path.join(path, '%s.pot' % str(self.domain))\n+            if not os.path.exists(potfile):\n+                continue\n+            msgs, errors, status = _popen('msguniq %s %s --to-code=utf-8 \"%s\"' %\n+                                    (self.wrap, self.location, potfile))\n+            if errors:\n+                if status != STATUS_OK:\n+                    raise CommandError(\n+                        \"errors happened while running msguniq\\n%s\" % errors)\n+                elif self.verbosity > 0:\n+                    self.stdout.write(errors)\n+            with open(potfile, 'w') as fp:\n+                fp.write(msgs)\n+            potfiles.append(potfile)\n+        return potfiles\n+\n+    def remove_potfiles(self):\n+        for path in self.locale_paths:\n+            pot_path = os.path.join(path, '%s.pot' % str(self.domain))\n+            if os.path.exists(pot_path):\n+                os.unlink(pot_path)\n+\n     def find_files(self, root):\n         \"\"\"\n-        Helper method to get all files in the given root.\n+        Helper function to get all files in the given root. Also check that there\n+        is a matching locale dir for each file.\n         \"\"\"\n \n         def is_ignored(path, ignore_patterns):\n@@ -315,38 +352,42 @@ def is_ignored(path, ignore_patterns):\n                     dirnames.remove(dirname)\n                     if self.verbosity > 1:\n                         self.stdout.write('ignoring directory %s\\n' % dirname)\n+                elif dirname == 'locale':\n+                    dirnames.remove(dirname)\n+                    self.locale_paths.insert(0, os.path.join(os.path.abspath(dirpath), dirname))\n             for filename in filenames:\n-                if is_ignored(os.path.normpath(os.path.join(dirpath, filename)), self.ignore_patterns):\n+                file_path = os.path.normpath(os.path.join(dirpath, filename))\n+                if is_ignored(file_path, self.ignore_patterns):\n                     if self.verbosity > 1:\n                         self.stdout.write('ignoring file %s in %s\\n' % (filename, dirpath))\n                 else:\n-                    all_files.append(TranslatableFile(dirpath, filename))\n+                    locale_dir = None\n+                    for path in self.locale_paths:\n+                        if os.path.abspath(dirpath).startswith(os.path.dirname(path)):\n+                            locale_dir = path\n+                            break\n+                    if not locale_dir:\n+                        locale_dir = self.default_locale_path\n+                    if not locale_dir:\n+                        raise CommandError(\n+                            \"Unable to find a locale path to store translations for file %s\" % file_path)\n+                    all_files.append(TranslatableFile(dirpath, filename, locale_dir))\n         return sorted(all_files)\n \n     def write_po_file(self, potfile, locale):\n         \"\"\"\n         Creates or updates the PO file for self.domain and :param locale:.\n         Uses contents of the existing :param potfile:.\n \n-        Uses mguniq, msgmerge, and msgattrib GNU gettext utilities.\n+        Uses msgmerge, and msgattrib GNU gettext utilities.\n         \"\"\"\n-        msgs, errors, status = _popen('msguniq %s %s --to-code=utf-8 \"%s\"' %\n-                                        (self.wrap, self.location, potfile))\n-        if errors:\n-            if status != STATUS_OK:\n-                raise CommandError(\n-                    \"errors happened while running msguniq\\n%s\" % errors)\n-            elif self.verbosity > 0:\n-                self.stdout.write(errors)\n \n         basedir = os.path.join(os.path.dirname(potfile), locale, 'LC_MESSAGES')\n         if not os.path.isdir(basedir):\n             os.makedirs(basedir)\n         pofile = os.path.join(basedir, '%s.po' % str(self.domain))\n \n         if os.path.exists(pofile):\n-            with open(potfile, 'w') as fp:\n-                fp.write(msgs)\n             msgs, errors, status = _popen('msgmerge %s %s -q \"%s\" \"%s\"' %\n                                             (self.wrap, self.location, pofile, potfile))\n             if errors:\n@@ -355,8 +396,10 @@ def write_po_file(self, potfile, locale):\n                         \"errors happened while running msgmerge\\n%s\" % errors)\n                 elif self.verbosity > 0:\n                     self.stdout.write(errors)\n-        elif not self.invoked_for_django:\n-            msgs = self.copy_plural_forms(msgs, locale)\n+        else:\n+            msgs = open(potfile, 'r').read()\n+            if not self.invoked_for_django:\n+                msgs = self.copy_plural_forms(msgs, locale)\n         msgs = msgs.replace(\n             \"#. #-#-#-#-#  %s.pot (PACKAGE VERSION)  #-#-#-#-#\\n\" % self.domain, \"\")\n         with open(pofile, 'w') as fp:"
        },
        {
            "sha": "c9c8d198693cba6f0096e631a547b656b16717ae",
            "filename": "docs/man/django-admin.1",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/docs%2Fman%2Fdjango-admin.1",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/docs%2Fman%2Fdjango-admin.1",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fman%2Fdjango-admin.1?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -193,7 +193,8 @@ Ignore files or directories matching this glob-style pattern. Use multiple\n times to ignore more (makemessages command).\n .TP\n .I \\-\\-no\\-default\\-ignore\n-Don't ignore the common private glob-style patterns 'CVS', '.*' and '*~' (makemessages command).\n+Don't ignore the common private glob-style patterns 'CVS', '.*', '*~' and '*.pyc'\n+(makemessages command).\n .TP\n .I \\-\\-no\\-wrap\n Don't break long message lines into several lines (makemessages command)."
        },
        {
            "sha": "f7b91bbdab6469f7e222a9412d443b2878e963fe",
            "filename": "docs/ref/django-admin.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/docs%2Fref%2Fdjango-admin.txt",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/docs%2Fref%2Fdjango-admin.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdjango-admin.txt?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -472,7 +472,7 @@ Example usage::\n Use the ``--ignore`` or ``-i`` option to ignore files or directories matching\n the given :mod:`glob`-style pattern. Use multiple times to ignore more.\n \n-These patterns are used by default: ``'CVS'``, ``'.*'``, ``'*~'``\n+These patterns are used by default: ``'CVS'``, ``'.*'``, ``'*~'``, ``'*.pyc'``\n \n Example usage::\n \n@@ -499,7 +499,7 @@ for technically skilled translators to understand each message's context.\n .. versionadded:: 1.6\n \n Use the ``--keep-pot`` option to prevent django from deleting the temporary\n-.pot file it generates before creating the .po file. This is useful for\n+.pot files it generates before creating the .po file. This is useful for\n debugging errors which may prevent the final language files from being created.\n \n runfcgi [options]"
        },
        {
            "sha": "8ef51e4052eee9aa9d74810fdb45a14f0b65bb7e",
            "filename": "docs/topics/i18n/translation.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 16,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/docs%2Ftopics%2Fi18n%2Ftranslation.txt",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/docs%2Ftopics%2Fi18n%2Ftranslation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Ftranslation.txt?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -1543,24 +1543,9 @@ All message file repositories are structured the same way. They are:\n * ``$PYTHONPATH/django/conf/locale/<language>/LC_MESSAGES/django.(po|mo)``\n \n To create message files, you use the :djadmin:`django-admin.py makemessages <makemessages>`\n-tool. You only need to be in the same directory where the ``locale/`` directory\n-is located. And you use :djadmin:`django-admin.py compilemessages <compilemessages>`\n+tool. And you use :djadmin:`django-admin.py compilemessages <compilemessages>`\n to produce the binary ``.mo`` files that are used by ``gettext``.\n \n You can also run :djadmin:`django-admin.py compilemessages\n --settings=path.to.settings <compilemessages>` to make the compiler process all\n the directories in your :setting:`LOCALE_PATHS` setting.\n-\n-Finally, you should give some thought to the structure of your translation\n-files. If your applications need to be delivered to other users and will be used\n-in other projects, you might want to use app-specific translations. But using\n-app-specific translations and project-specific translations could produce weird\n-problems with :djadmin:`makemessages`: it will traverse all directories below\n-the current path and so might put message IDs into a unified, common message\n-file for the current project that are already in application message files.\n-\n-The easiest way out is to store applications that are not part of the project\n-(and so carry their own translations) outside the project tree. That way,\n-:djadmin:`django-admin.py makemessages <makemessages>`, when ran on a project\n-level will only extract strings that are connected to your explicit project and\n-not strings that are distributed independently."
        },
        {
            "sha": "8b2941c4d4e9fddbdd659075408ae659c111301a",
            "filename": "tests/regressiontests/i18n/commands/extraction.py",
            "status": "modified",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -5,10 +5,13 @@\n import re\n import shutil\n \n+from django.conf import settings\n from django.core import management\n from django.test import SimpleTestCase\n+from django.test.utils import override_settings\n from django.utils.encoding import force_text\n from django.utils._os import upath\n+from django.utils import six\n from django.utils.six import StringIO\n \n \n@@ -352,3 +355,44 @@ def test_comma_separated_locales(self):\n         management.call_command('makemessages', locale='pt,de,ch', verbosity=0)\n         self.assertTrue(os.path.exists(self.PO_FILE_PT))\n         self.assertTrue(os.path.exists(self.PO_FILE_DE))\n+\n+\n+class CustomLayoutExtractionTests(ExtractorTests):\n+    def setUp(self):\n+        self._cwd = os.getcwd()\n+        self.test_dir = os.path.join(os.path.dirname(upath(__file__)), 'project_dir')\n+\n+    def test_no_locale_raises(self):\n+        os.chdir(self.test_dir)\n+        with six.assertRaisesRegex(self, management.CommandError,\n+                \"Unable to find a locale path to store translations for file\"):\n+            management.call_command('makemessages', locale=LOCALE, verbosity=0)\n+\n+    @override_settings(\n+        LOCALE_PATHS=(os.path.join(os.path.dirname(upath(__file__)), 'project_dir/project_locale'),)\n+    )\n+    def test_project_locale_paths(self):\n+        \"\"\"\n+        Test that:\n+          * translations for app containing locale folder are stored in that folder\n+          * translations outside of that app are in LOCALE_PATHS[0]\n+        \"\"\"\n+        os.chdir(self.test_dir)\n+        self.addCleanup(shutil.rmtree, os.path.join(settings.LOCALE_PATHS[0], LOCALE))\n+        self.addCleanup(shutil.rmtree, os.path.join(self.test_dir, 'app_with_locale/locale', LOCALE))\n+\n+        management.call_command('makemessages', locale=LOCALE, verbosity=0)\n+        project_de_locale = os.path.join(\n+            self.test_dir, 'project_locale/de/LC_MESSAGES/django.po',)\n+        app_de_locale = os.path.join(\n+            self.test_dir, 'app_with_locale/locale/de/LC_MESSAGES/django.po',)\n+        self.assertTrue(os.path.exists(project_de_locale))\n+        self.assertTrue(os.path.exists(app_de_locale))\n+\n+        with open(project_de_locale, 'r') as fp:\n+            po_contents = force_text(fp.read())\n+            self.assertMsgId('This app has no locale directory', po_contents)\n+            self.assertMsgId('This is a project-level string', po_contents)\n+        with open(app_de_locale, 'r') as fp:\n+            po_contents = force_text(fp.read())\n+            self.assertMsgId('This app has a locale directory', po_contents)"
        },
        {
            "sha": "9c6768e4abe70cfcffacdb27c9e118ffccea275d",
            "filename": "tests/regressiontests/i18n/commands/project_dir/__init__.py",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2F__init__.py?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -0,0 +1,3 @@\n+from django.utils.translation import ugettext as _\n+\n+string = _(\"This is a project-level string\")"
        },
        {
            "sha": "adcb2ef17316d9329ed2c597c84dae567a9724f2",
            "filename": "tests/regressiontests/i18n/commands/project_dir/app_no_locale/models.py",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2Fapp_no_locale%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2Fapp_no_locale%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2Fapp_no_locale%2Fmodels.py?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -0,0 +1,4 @@\n+from django.utils.translation import ugettext as _\n+\n+string = _(\"This app has no locale directory\")\n+"
        },
        {
            "sha": "44037157a029a6289dab2af212d6b6ad6bc13d1d",
            "filename": "tests/regressiontests/i18n/commands/project_dir/app_with_locale/models.py",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2Fapp_with_locale%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2Fapp_with_locale%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fproject_dir%2Fapp_with_locale%2Fmodels.py?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -0,0 +1,4 @@\n+from django.utils.translation import ugettext as _\n+\n+string = _(\"This app has a locale directory\")\n+"
        },
        {
            "sha": "9f6e73dcd28a56a13afde26bc565f83ff944431e",
            "filename": "tests/regressiontests/i18n/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/2babab0bb351ff7a13fd23795f5e926a9bf95d22/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Ftests.py?ref=2babab0bb351ff7a13fd23795f5e926a9bf95d22",
            "patch": "@@ -33,7 +33,7 @@\n         JavascriptExtractorTests, IgnoredExtractorTests, SymlinkExtractorTests,\n         CopyPluralFormsExtractorTests, NoWrapExtractorTests,\n         NoLocationExtractorTests, KeepPotFileExtractorTests,\n-        MultipleLocaleExtractionTests)\n+        MultipleLocaleExtractionTests, CustomLayoutExtractionTests)\n if can_run_compilation_tests:\n     from .commands.compilation import (PoFileTests, PoFileContentsTests,\n         PercentRenderingTests, MultipleLocaleCompilationTests)"
        }
    ],
    "stats": {
        "total": 220,
        "additions": 152,
        "deletions": 68
    }
}