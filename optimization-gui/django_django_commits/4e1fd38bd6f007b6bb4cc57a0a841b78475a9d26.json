{
    "author": "aaugustin",
    "message": "Fixed #18781 -- Reduced max session cookie size.",
    "sha": "4e1fd38bd6f007b6bb4cc57a0a841b78475a9d26",
    "files": [
        {
            "sha": "6b5b016234a6598f9e825007646dcfd88ca939d8",
            "filename": "django/contrib/messages/storage/cookie.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/4e1fd38bd6f007b6bb4cc57a0a841b78475a9d26/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py",
            "raw_url": "https://github.com/django/django/raw/4e1fd38bd6f007b6bb4cc57a0a841b78475a9d26/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py?ref=4e1fd38bd6f007b6bb4cc57a0a841b78475a9d26",
            "patch": "@@ -46,10 +46,10 @@ class CookieStorage(BaseStorage):\n     Stores messages in a cookie.\n     \"\"\"\n     cookie_name = 'messages'\n-    # We should be able to store 4K in a cookie, but Internet Explorer\n-    # imposes 4K as the *total* limit for a domain.  To allow other\n-    # cookies, we go for 3/4 of 4K.\n-    max_cookie_size = 3072\n+    # uwsgi's default configuration enforces a maximum size of 4kb for all the\n+    # HTTP headers. In order to leave some room for other cookies and headers,\n+    # restrict the session cookie to 1/2 of 4kb. See #18781.\n+    max_cookie_size = 2048\n     not_finished = '__messagesnotfinished__'\n \n     def _get(self, *args, **kwargs):"
        },
        {
            "sha": "b3ced12773b4ec03a3b7d0cf4bf93577c714daa8",
            "filename": "django/contrib/messages/tests/base.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/4e1fd38bd6f007b6bb4cc57a0a841b78475a9d26/django%2Fcontrib%2Fmessages%2Ftests%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/4e1fd38bd6f007b6bb4cc57a0a841b78475a9d26/django%2Fcontrib%2Fmessages%2Ftests%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmessages%2Ftests%2Fbase.py?ref=4e1fd38bd6f007b6bb4cc57a0a841b78475a9d26",
            "patch": "@@ -152,7 +152,7 @@ def test_full_request_response_cycle(self):\n         cycle.\n         \"\"\"\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show')\n         for level in ('debug', 'info', 'success', 'warning', 'error'):\n@@ -170,7 +170,7 @@ def test_full_request_response_cycle(self):\n     @override_settings(MESSAGE_LEVEL=constants.DEBUG)\n     def test_with_template_response(self):\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show_template_response')\n         for level in self.levels.keys():\n@@ -194,7 +194,7 @@ def test_multiple_posts(self):\n         before a GET.\n         \"\"\"\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show')\n         messages = []\n@@ -226,7 +226,7 @@ def test_middleware_disabled(self):\n         when one attempts to store a message.\n         \"\"\"\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show')\n         for level in ('debug', 'info', 'success', 'warning', 'error'):\n@@ -251,7 +251,7 @@ def test_middleware_disabled_fail_silently(self):\n         raised if 'fail_silently' = True\n         \"\"\"\n         data = {\n-            'messages': ['Test message %d' % x for x in range(10)],\n+            'messages': ['Test message %d' % x for x in range(5)],\n             'fail_silently': True,\n         }\n         show_url = reverse('django.contrib.messages.tests.urls.show')"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 9,
        "deletions": 9
    }
}