{
    "author": "adrianholovaty",
    "message": "Made a bunch of simplifications now that we don't support Python 2.4\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15933 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "0fdabe885baabae291da23570966a9e4a4e4df6d",
    "files": [
        {
            "sha": "dac4029904ad83b763734c07f4792b3c1bb3450c",
            "filename": "tests/regressiontests/decorators/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/0fdabe885baabae291da23570966a9e4a4e4df6d/tests%2Fregressiontests%2Fdecorators%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/0fdabe885baabae291da23570966a9e4a4e4df6d/tests%2Fregressiontests%2Fdecorators%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdecorators%2Ftests.py?ref=0fdabe885baabae291da23570966a9e4a4e4df6d",
            "patch": "@@ -1,8 +1,4 @@\n-from sys import version_info\n-try:\n-    from functools import wraps\n-except ImportError:\n-    from django.utils.functional import wraps  # Python 2.4 fallback.\n+from functools import wraps\n \n from django.contrib.auth.decorators import login_required, permission_required, user_passes_test\n from django.contrib.admin.views.decorators import staff_member_required"
        },
        {
            "sha": "46242d03591ff9914c93c900cf863ff77bcf5624",
            "filename": "tests/regressiontests/i18n/commands/extraction.py",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/0fdabe885baabae291da23570966a9e4a4e4df6d/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py",
            "raw_url": "https://github.com/django/django/raw/0fdabe885baabae291da23570966a9e4a4e4df6d/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py?ref=0fdabe885baabae291da23570966a9e4a4e4df6d",
            "patch": "@@ -75,11 +75,10 @@ def test_extraction_error(self):\n         os.chdir(self.test_dir)\n         shutil.copyfile('./templates/template_with_error.txt', './templates/template_with_error.html')\n         self.assertRaises(SyntaxError, management.call_command, 'makemessages', locale=LOCALE, verbosity=0)\n-        try: # TODO: Simplify this try/try block when we drop support for Python 2.4\n-            try:\n-                management.call_command('makemessages', locale=LOCALE, verbosity=0)\n-            except SyntaxError, e:\n-                self.assertEqual(str(e), 'Translation blocks must not include other block tags: blocktrans (file templates/template_with_error.html, line 3)')\n+        try:\n+            management.call_command('makemessages', locale=LOCALE, verbosity=0)\n+        except SyntaxError, e:\n+            self.assertEqual(str(e), 'Translation blocks must not include other block tags: blocktrans (file templates/template_with_error.html, line 3)')\n         finally:\n             os.remove('./templates/template_with_error.html')\n             os.remove('./templates/template_with_error.html.py') # Waiting for #8536 to be fixed"
        },
        {
            "sha": "c92823b9c799b988421c19478c353b487d1e45ad",
            "filename": "tests/regressiontests/i18n/tests.py",
            "status": "modified",
            "additions": 13,
            "deletions": 27,
            "changes": 40,
            "blob_url": "https://github.com/django/django/blob/0fdabe885baabae291da23570966a9e4a4e4df6d/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/0fdabe885baabae291da23570966a9e4a4e4df6d/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Ftests.py?ref=0fdabe885baabae291da23570966a9e4a4e4df6d",
            "patch": "@@ -590,19 +590,12 @@ def test_parse_literal_http_header(self):\n         r.META = {'HTTP_ACCEPT_LANGUAGE': 'es-ar,de'}\n         self.assertEqual('es-ar', g(r))\n \n-        # Python 2.3 and 2.4 return slightly different results for completely\n-        # bogus locales, so we omit this test for that anything below 2.4.\n-        # It's relatively harmless in any cases (GIGO). This also means this\n-        # won't be executed on Jython currently, but life's like that\n-        # sometimes. (On those platforms, passing in a truly bogus locale\n-        # will get you the default locale back.)\n-        if sys.version_info >= (2, 5):\n-            # This test assumes there won't be a Django translation to a US\n-            # variation of the Spanish language, a safe assumption. When the\n-            # user sets it as the preferred language, the main 'es'\n-            # translation should be selected instead.\n-            r.META = {'HTTP_ACCEPT_LANGUAGE': 'es-us'}\n-            self.assertEqual(g(r), 'es')\n+        # This test assumes there won't be a Django translation to a US\n+        # variation of the Spanish language, a safe assumption. When the\n+        # user sets it as the preferred language, the main 'es'\n+        # translation should be selected instead.\n+        r.META = {'HTTP_ACCEPT_LANGUAGE': 'es-us'}\n+        self.assertEqual(g(r), 'es')\n \n         # This tests the following scenario: there isn't a main language (zh)\n         # translation of Django but there is a translation to variation (zh_CN)\n@@ -631,20 +624,13 @@ def test_parse_language_cookie(self):\n         r.META = {'HTTP_ACCEPT_LANGUAGE': 'de'}\n         self.assertEqual('es', g(r))\n \n-        # Python 2.3 and 2.4 return slightly different results for completely\n-        # bogus locales, so we omit this test for that anything below 2.4.\n-        # It's relatively harmless in any cases (GIGO). This also means this\n-        # won't be executed on Jython currently, but life's like that\n-        # sometimes. (On those platforms, passing in a truly bogus locale\n-        # will get you the default locale back.)\n-        if sys.version_info >= (2, 5):\n-            # This test assumes there won't be a Django translation to a US\n-            # variation of the Spanish language, a safe assumption. When the\n-            # user sets it as the preferred language, the main 'es'\n-            # translation should be selected instead.\n-            r.COOKIES = {settings.LANGUAGE_COOKIE_NAME: 'es-us'}\n-            r.META = {}\n-            self.assertEqual(g(r), 'es')\n+        # This test assumes there won't be a Django translation to a US\n+        # variation of the Spanish language, a safe assumption. When the\n+        # user sets it as the preferred language, the main 'es'\n+        # translation should be selected instead.\n+        r.COOKIES = {settings.LANGUAGE_COOKIE_NAME: 'es-us'}\n+        r.META = {}\n+        self.assertEqual(g(r), 'es')\n \n         # This tests the following scenario: there isn't a main language (zh)\n         # translation of Django but there is a translation to variation (zh_CN)"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 18,
        "deletions": 37
    }
}