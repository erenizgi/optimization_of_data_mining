{
    "author": "andrewgodwin",
    "message": "Fixed #14888 -- Removing duplicated code in serialisers. Thanks to eric.fortin.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15163 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "614672d365d6761353dbd11a8967a254d97035b7",
    "files": [
        {
            "sha": "cdcc7fa36aef9673050786353bbac4d8872e36c0",
            "filename": "django/core/serializers/base.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/614672d365d6761353dbd11a8967a254d97035b7/django%2Fcore%2Fserializers%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/614672d365d6761353dbd11a8967a254d97035b7/django%2Fcore%2Fserializers%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fbase.py?ref=614672d365d6761353dbd11a8967a254d97035b7",
            "patch": "@@ -31,9 +31,9 @@ def serialize(self, queryset, **options):\n         \"\"\"\n         self.options = options\n \n-        self.stream = options.get(\"stream\", StringIO())\n-        self.selected_fields = options.get(\"fields\")\n-        self.use_natural_keys = options.get(\"use_natural_keys\", False)\n+        self.stream = options.pop(\"stream\", StringIO())\n+        self.selected_fields = options.pop(\"fields\", None)\n+        self.use_natural_keys = options.pop(\"use_natural_keys\", False)\n \n         self.start_serialization()\n         for obj in queryset:"
        },
        {
            "sha": "b8119f54d43fcc3b2fb85a59b2b5f94a1d34156f",
            "filename": "django/core/serializers/json.py",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/614672d365d6761353dbd11a8967a254d97035b7/django%2Fcore%2Fserializers%2Fjson.py",
            "raw_url": "https://github.com/django/django/raw/614672d365d6761353dbd11a8967a254d97035b7/django%2Fcore%2Fserializers%2Fjson.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fjson.py?ref=614672d365d6761353dbd11a8967a254d97035b7",
            "patch": "@@ -18,9 +18,6 @@ class Serializer(PythonSerializer):\n     internal_use_only = False\n \n     def end_serialization(self):\n-        self.options.pop('stream', None)\n-        self.options.pop('fields', None)\n-        self.options.pop('use_natural_keys', None)\n         simplejson.dump(self.objects, self.stream, cls=DjangoJSONEncoder, **self.options)\n \n     def getvalue(self):"
        },
        {
            "sha": "c443b63bc94fcb910da3f7096767b849eed7dfbc",
            "filename": "django/core/serializers/pyyaml.py",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/614672d365d6761353dbd11a8967a254d97035b7/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "raw_url": "https://github.com/django/django/raw/614672d365d6761353dbd11a8967a254d97035b7/django%2Fcore%2Fserializers%2Fpyyaml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fserializers%2Fpyyaml.py?ref=614672d365d6761353dbd11a8967a254d97035b7",
            "patch": "@@ -38,9 +38,6 @@ def handle_field(self, obj, field):\n             super(Serializer, self).handle_field(obj, field)\n \n     def end_serialization(self):\n-        self.options.pop('stream', None)\n-        self.options.pop('fields', None)\n-        self.options.pop('use_natural_keys', None)\n         yaml.dump(self.objects, self.stream, Dumper=DjangoSafeDumper, **self.options)\n \n     def getvalue(self):"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 3,
        "deletions": 9
    }
}