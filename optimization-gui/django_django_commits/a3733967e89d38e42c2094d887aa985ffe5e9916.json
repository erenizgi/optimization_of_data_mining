{
    "author": "jezdez",
    "message": "Fixed #15765 -- Stopped showing an odd error message when using the staticfiles enabled runserver management command and trying to serve files from STATIC_URL at the same time.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16503 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "a3733967e89d38e42c2094d887aa985ffe5e9916",
    "files": [
        {
            "sha": "962b835fef1640ce81e520e4c766c8dd05fca0ef",
            "filename": "django/contrib/staticfiles/handlers.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/a3733967e89d38e42c2094d887aa985ffe5e9916/django%2Fcontrib%2Fstaticfiles%2Fhandlers.py",
            "raw_url": "https://github.com/django/django/raw/a3733967e89d38e42c2094d887aa985ffe5e9916/django%2Fcontrib%2Fstaticfiles%2Fhandlers.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fhandlers.py?ref=a3733967e89d38e42c2094d887aa985ffe5e9916",
            "patch": "@@ -35,8 +35,7 @@ def _should_handle(self, path):\n         * the host is provided as part of the base_url\n         * the request's path isn't under the media path (or equal)\n         \"\"\"\n-        return (self.base_url[2] != path and\n-            path.startswith(self.base_url[2]) and not self.base_url[1])\n+        return path.startswith(self.base_url[2]) and not self.base_url[1]\n \n     def file_path(self, url):\n         \"\"\""
        },
        {
            "sha": "1a9c166ad7ce714b0c817a37b3f1526b50d78fc2",
            "filename": "django/contrib/staticfiles/views.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/a3733967e89d38e42c2094d887aa985ffe5e9916/django%2Fcontrib%2Fstaticfiles%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/a3733967e89d38e42c2094d887aa985ffe5e9916/django%2Fcontrib%2Fstaticfiles%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fviews.py?ref=a3733967e89d38e42c2094d887aa985ffe5e9916",
            "patch": "@@ -34,6 +34,8 @@ def serve(request, path, document_root=None, insecure=False, **kwargs):\n     normalized_path = posixpath.normpath(urllib.unquote(path)).lstrip('/')\n     absolute_path = finders.find(normalized_path)\n     if not absolute_path:\n+        if path.endswith('/') or path == '':\n+            raise Http404(\"Directory indexes are not allowed here.\")\n         raise Http404(\"'%s' could not be found\" % path)\n     document_root, path = os.path.split(absolute_path)\n     return static.serve(request, path, document_root=document_root, **kwargs)"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 3,
        "deletions": 2
    }
}