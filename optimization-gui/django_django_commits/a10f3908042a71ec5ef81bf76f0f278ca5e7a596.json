{
    "author": "charettes",
    "message": "Fixed #19044 -- Made `DeletionMixin` interpolate its `success_url`.\n\nThanks to nxvl and slurms for the initial patch, ptone for the review\nand timo for the documentation tweaks.",
    "sha": "a10f3908042a71ec5ef81bf76f0f278ca5e7a596",
    "files": [
        {
            "sha": "5b97fc81c91a9a63577ecd1c877ee6897fd2f05f",
            "filename": "django/views/generic/edit.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/django%2Fviews%2Fgeneric%2Fedit.py",
            "raw_url": "https://github.com/django/django/raw/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/django%2Fviews%2Fgeneric%2Fedit.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fedit.py?ref=a10f3908042a71ec5ef81bf76f0f278ca5e7a596",
            "patch": "@@ -242,16 +242,17 @@ def delete(self, request, *args, **kwargs):\n         redirects to the success URL.\n         \"\"\"\n         self.object = self.get_object()\n+        success_url = self.get_success_url()\n         self.object.delete()\n-        return HttpResponseRedirect(self.get_success_url())\n+        return HttpResponseRedirect(success_url)\n \n     # Add support for browsers which only accept GET and POST for now.\n     def post(self, *args, **kwargs):\n         return self.delete(*args, **kwargs)\n \n     def get_success_url(self):\n         if self.success_url:\n-            return self.success_url\n+            return self.success_url % self.object.__dict__\n         else:\n             raise ImproperlyConfigured(\n                 \"No URL to redirect to. Provide a success_url.\")"
        },
        {
            "sha": "844171c93a1faca0d340854e4760e249993a7706",
            "filename": "docs/ref/class-based-views/mixins-editing.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/docs%2Fref%2Fclass-based-views%2Fmixins-editing.txt",
            "raw_url": "https://github.com/django/django/raw/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/docs%2Fref%2Fclass-based-views%2Fmixins-editing.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views%2Fmixins-editing.txt?ref=a10f3908042a71ec5ef81bf76f0f278ca5e7a596",
            "patch": "@@ -201,6 +201,13 @@ ProcessFormView\n         The url to redirect to when the nominated object has been\n         successfully deleted.\n \n+        .. versionadded:: 1.6\n+\n+        ``success_url`` may contain dictionary string formatting, which\n+        will be interpolated against the object's field attributes. For\n+        example, you could use ``success_url=\"/parent/%(parent_id)s/\"`` to\n+        redirect to a URL composed out of the ``parent_id`` field on a model.\n+\n     .. method:: get_success_url(obj)\n \n         Returns the url to redirect to when the nominated object has been"
        },
        {
            "sha": "5d615177f40d939d12267562f5a1df039f18adf0",
            "filename": "docs/releases/1.6.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/docs%2Freleases%2F1.6.txt",
            "raw_url": "https://github.com/django/django/raw/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/docs%2Freleases%2F1.6.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.6.txt?ref=a10f3908042a71ec5ef81bf76f0f278ca5e7a596",
            "patch": "@@ -64,6 +64,10 @@ Minor features\n   :attr:`~django.core.management.BaseCommand.leave_locale_alone` internal\n   option. See :ref:`management-commands-and-locales` for more details.\n \n+* The :attr:`~django.views.generic.edit.DeletionMixin.success_url` of\n+  :class:`~django.views.generic.edit.DeletionMixin` is now interpolated with\n+  its ``object``\\'s ``__dict__``.\n+\n Backwards incompatible changes in 1.6\n =====================================\n "
        },
        {
            "sha": "3bacc31ee250c6aa3fa6b43046fda1d061622e91",
            "filename": "tests/regressiontests/generic_views/edit.py",
            "status": "modified",
            "additions": 13,
            "deletions": 6,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py",
            "raw_url": "https://github.com/django/django/raw/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fedit.py?ref=a10f3908042a71ec5ef81bf76f0f278ca5e7a596",
            "patch": "@@ -13,12 +13,12 @@\n \n \n class FormMixinTests(TestCase):\n-     def test_initial_data(self):\n-         \"\"\" Test instance independence of initial data dict (see #16138) \"\"\"\n-         initial_1 = FormMixin().get_initial()\n-         initial_1['foo'] = 'bar'\n-         initial_2 = FormMixin().get_initial()\n-         self.assertNotEqual(initial_1, initial_2)\n+    def test_initial_data(self):\n+        \"\"\" Test instance independence of initial data dict (see #16138) \"\"\"\n+        initial_1 = FormMixin().get_initial()\n+        initial_1['foo'] = 'bar'\n+        initial_2 = FormMixin().get_initial()\n+        self.assertNotEqual(initial_1, initial_2)\n \n \n class BasicFormTests(TestCase):\n@@ -283,6 +283,13 @@ def test_delete_with_redirect(self):\n         self.assertRedirects(res, 'http://testserver/edit/authors/create/')\n         self.assertQuerysetEqual(Author.objects.all(), [])\n \n+    def test_delete_with_interpolated_redirect(self):\n+        a = Author.objects.create(**{'name': 'Randall Munroe', 'slug': 'randall-munroe'})\n+        res = self.client.post('/edit/author/%d/delete/interpolate_redirect/' % a.pk)\n+        self.assertEqual(res.status_code, 302)\n+        self.assertRedirects(res, 'http://testserver/edit/authors/create/?deleted=%d' % a.pk)\n+        self.assertQuerysetEqual(Author.objects.all(), [])\n+\n     def test_delete_with_special_properties(self):\n         a = Author.objects.create(**{'name': 'Randall Munroe', 'slug': 'randall-munroe'})\n         res = self.client.get('/edit/author/%d/delete/special/' % a.pk)"
        },
        {
            "sha": "695b50279ae0fd44e72508b80faf435e069ba7da",
            "filename": "tests/regressiontests/generic_views/urls.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/a10f3908042a71ec5ef81bf76f0f278ca5e7a596/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Furls.py?ref=a10f3908042a71ec5ef81bf76f0f278ca5e7a596",
            "patch": "@@ -97,6 +97,8 @@\n         views.NaiveAuthorDelete.as_view()),\n     (r'^edit/author/(?P<pk>\\d+)/delete/redirect/$',\n         views.NaiveAuthorDelete.as_view(success_url='/edit/authors/create/')),\n+    (r'^edit/author/(?P<pk>\\d+)/delete/interpolate_redirect/$',\n+        views.NaiveAuthorDelete.as_view(success_url='/edit/authors/create/?deleted=%(id)s')),\n     (r'^edit/author/(?P<pk>\\d+)/delete/$',\n         views.AuthorDelete.as_view()),\n     (r'^edit/author/(?P<pk>\\d+)/delete/special/$',"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 29,
        "deletions": 8
    }
}