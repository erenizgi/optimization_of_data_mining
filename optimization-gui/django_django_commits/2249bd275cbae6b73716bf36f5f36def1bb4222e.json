{
    "author": "akaariai",
    "message": "Fixed Oracle failure for \"%\" in table name",
    "sha": "2249bd275cbae6b73716bf36f5f36def1bb4222e",
    "files": [
        {
            "sha": "aad52992ddf2bfc09a3986238437fcaea673aca8",
            "filename": "django/db/backends/oracle/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/2249bd275cbae6b73716bf36f5f36def1bb4222e/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/2249bd275cbae6b73716bf36f5f36def1bb4222e/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fbase.py?ref=2249bd275cbae6b73716bf36f5f36def1bb4222e",
            "patch": "@@ -256,6 +256,10 @@ def quote_name(self, name):\n         if not name.startswith('\"') and not name.endswith('\"'):\n             name = '\"%s\"' % util.truncate_name(name.upper(),\n                                                self.max_name_length())\n+        # Oracle puts the query text into a (query % args) construct, so % signs\n+        # in names need to be escaped. The '%%' will be collapsed back to '%' at\n+        # that stage so we aren't really making the name longer here.\n+        name = name.replace('%','%%')\n         return name.upper()\n \n     def random_function_sql(self):"
        },
        {
            "sha": "4766dcf44e31864171bbc0feab2a58e552e7bbee",
            "filename": "tests/regressiontests/backends/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/2249bd275cbae6b73716bf36f5f36def1bb4222e/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/2249bd275cbae6b73716bf36f5f36def1bb4222e/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbackends%2Ftests.py?ref=2249bd275cbae6b73716bf36f5f36def1bb4222e",
            "patch": "@@ -25,6 +25,14 @@\n \n class OracleChecks(unittest.TestCase):\n \n+    @unittest.skipUnless(connection.vendor == 'oracle',\n+                         \"No need to check Oracle quote_name semantics\")\n+    def test_quote_name(self):\n+        # Check that '%' chars are escaped for query execution.\n+        name = '\"SOME%NAME\"'\n+        quoted_name = connection.ops.quote_name(name)\n+        self.assertEquals(quoted_name % (), name)\n+\n     @unittest.skipUnless(connection.vendor == 'oracle',\n                          \"No need to check Oracle cursor semantics\")\n     def test_dbms_session(self):"
        },
        {
            "sha": "028d2633371c289bdabe9fd61f038db823ec6e28",
            "filename": "tests/regressiontests/inspectdb/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/2249bd275cbae6b73716bf36f5f36def1bb4222e/tests%2Fregressiontests%2Finspectdb%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/2249bd275cbae6b73716bf36f5f36def1bb4222e/tests%2Fregressiontests%2Finspectdb%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Finspectdb%2Ftests.py?ref=2249bd275cbae6b73716bf36f5f36def1bb4222e",
            "patch": "@@ -1,6 +1,7 @@\n from __future__ import unicode_literals\n \n from django.core.management import call_command\n+from django.db import connection\n from django.test import TestCase, skipUnlessDBFeature\n from django.utils.six import StringIO\n \n@@ -60,14 +61,16 @@ def test_digits_column_name_introspection(self):\n         self.assertIn(\"number_45extra = models.CharField\", output)\n \n     def test_special_column_name_introspection(self):\n-        \"\"\"Introspection of column names containing special characters,\n-           unsuitable for Python identifiers\n+        \"\"\"\n+        Introspection of column names containing special characters,\n+        unsuitable for Python identifiers\n         \"\"\"\n         out = StringIO()\n         call_command('inspectdb', stdout=out)\n         output = out.getvalue()\n+        base_name = 'Field' if connection.vendor != 'oracle' else 'field'\n         self.assertIn(\"field = models.IntegerField()\", output)\n-        self.assertIn(\"field_field = models.IntegerField(db_column='Field_')\", output)\n-        self.assertIn(\"field_field_0 = models.IntegerField(db_column='Field__')\", output)\n+        self.assertIn(\"field_field = models.IntegerField(db_column='%s_')\" % base_name, output)\n+        self.assertIn(\"field_field_0 = models.IntegerField(db_column='%s__')\" % base_name, output)\n         self.assertIn(\"field_field_1 = models.IntegerField(db_column='__field')\", output)\n         self.assertIn(\"prc_x = models.IntegerField(db_column='prc(%) x')\", output)"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 19,
        "deletions": 4
    }
}