{
    "author": "SmileyChris",
    "message": "Don't let ALLOWED_INCLUDE_ROOTS be accidentally set to a string rather than a tuple. Thanks to Florian Apolloner for pointing this out.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17571 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a",
    "files": [
        {
            "sha": "97f26e9aa3b84cc0f154089308f6fde78d6c3b55",
            "filename": "django/conf/__init__.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a/django%2Fconf%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a/django%2Fconf%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2F__init__.py?ref=3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a",
            "patch": "@@ -73,6 +73,9 @@ def __setattr__(self, name, value):\n         elif name == \"ADMIN_MEDIA_PREFIX\":\n             warnings.warn(\"The ADMIN_MEDIA_PREFIX setting has been removed; \"\n                           \"use STATIC_URL instead.\", DeprecationWarning)\n+        elif name == \"ALLOWED_INCLUDE_ROOTS\" and isinstance(value, basestring):\n+            raise ValueError(\"The ALLOWED_INCLUDE_ROOTS setting must be set \"\n+                \"to a tuple, not a string.\")\n         object.__setattr__(self, name, value)\n \n \n@@ -98,7 +101,8 @@ def __init__(self, settings_module):\n         for setting in dir(mod):\n             if setting == setting.upper():\n                 setting_value = getattr(mod, setting)\n-                if setting in tuple_settings and type(setting_value) == str:\n+                if setting in tuple_settings and \\\n+                        isinstance(setting_value, basestring):\n                     setting_value = (setting_value,) # In case the user forgot the comma.\n                 setattr(self, setting, setting_value)\n "
        },
        {
            "sha": "3f57fcead2b8711d224407e971bbead21136a1ff",
            "filename": "tests/regressiontests/settings_tests/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a/tests%2Fregressiontests%2Fsettings_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a/tests%2Fregressiontests%2Fsettings_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fsettings_tests%2Ftests.py?ref=3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a",
            "patch": "@@ -150,6 +150,13 @@ def test_settings_delete(self):\n     def test_settings_delete_wrapped(self):\n         self.assertRaises(TypeError, delattr, settings, '_wrapped')\n \n+    def test_allowed_include_roots_string(self):\n+        \"\"\"\n+        ALLOWED_INCLUDE_ROOTS is not allowed to be incorrectly set to a string\n+        rather than a tuple.\n+        \"\"\"\n+        self.assertRaises(ValueError, setattr, settings,\n+            'ALLOWED_INCLUDE_ROOTS', '/var/www/ssi/')\n \n \n class TrailingSlashURLTests(TestCase):"
        },
        {
            "sha": "f74aa757e6a1806a21b28f71a419eafb5a2cd572",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=3ac0961e1ec3f935474e3c1c3f16bee1cc5ae54a",
            "patch": "@@ -425,7 +425,9 @@ def test_templates(self):\n \n         #Set ALLOWED_INCLUDE_ROOTS so that ssi works.\n         old_allowed_include_roots = settings.ALLOWED_INCLUDE_ROOTS\n-        settings.ALLOWED_INCLUDE_ROOTS = os.path.dirname(os.path.abspath(__file__))\n+        settings.ALLOWED_INCLUDE_ROOTS = (\n+            os.path.dirname(os.path.abspath(__file__)),\n+        )\n \n         # Warm the URL reversing cache. This ensures we don't pay the cost\n         # warming the cache during one of the tests."
        }
    ],
    "stats": {
        "total": 17,
        "additions": 15,
        "deletions": 2
    }
}