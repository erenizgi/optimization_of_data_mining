{
    "author": "aaugustin",
    "message": "Added a test for DayArchiveView. Refs #17192.",
    "sha": "ab268e18486b244f6633f2e013c12b6664a3661a",
    "files": [
        {
            "sha": "59833a780c2c48eec5ae55bb6f4516aea1f246e2",
            "filename": "tests/regressiontests/generic_views/dates.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/ab268e18486b244f6633f2e013c12b6664a3661a/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/ab268e18486b244f6633f2e013c12b6664a3661a/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py?ref=ab268e18486b244f6633f2e013c12b6664a3661a",
            "patch": "@@ -446,6 +446,13 @@ def test_day_view_allow_future(self):\n         self.assertEqual(res.context['next_day'], future)\n         self.assertEqual(res.context['previous_day'], datetime.date(2006, 5, 1))\n \n+        # allow_future for yesterday, next_day is today (#17192)\n+        today = datetime.date.today()\n+        yesterday = today - datetime.timedelta(days=1)\n+        res = self.client.get('/dates/books/%s/allow_empty_and_future/'\n+                              % yesterday.strftime('%Y/%b/%d').lower())\n+        self.assertEqual(res.context['next_day'], today)\n+\n     def test_day_view_paginated(self):\n         res = self.client.get('/dates/books/2008/oct/1/')\n         self.assertEqual(res.status_code, 200)"
        },
        {
            "sha": "96d77e7ed1dc3a798a5b879e7b468f455c206cfc",
            "filename": "tests/regressiontests/generic_views/urls.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ab268e18486b244f6633f2e013c12b6664a3661a/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/ab268e18486b244f6633f2e013c12b6664a3661a/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Furls.py?ref=ab268e18486b244f6633f2e013c12b6664a3661a",
            "patch": "@@ -204,6 +204,8 @@\n         views.BookDayArchive.as_view(allow_empty=True)),\n     (r'^dates/books/(?P<year>\\d{4})/(?P<month>[a-z]{3})/(?P<day>\\d{1,2})/allow_future/$',\n         views.BookDayArchive.as_view(allow_future=True)),\n+    (r'^dates/books/(?P<year>\\d{4})/(?P<month>[a-z]{3})/(?P<day>\\d{1,2})/allow_empty_and_future/$',\n+        views.BookDayArchive.as_view(allow_empty=True, allow_future=True)),\n     (r'^dates/books/(?P<year>\\d{4})/(?P<month>[a-z]{3})/(?P<day>\\d{1,2})/paginated/$',\n         views.BookDayArchive.as_view(paginate_by=True)),\n     (r'^dates/books/(?P<year>\\d{4})/(?P<month>[a-z]{3})/no_day/$',"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 9,
        "deletions": 0
    }
}