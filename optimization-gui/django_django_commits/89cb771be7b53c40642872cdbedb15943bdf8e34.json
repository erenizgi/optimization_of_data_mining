{
    "author": "aaugustin",
    "message": "Fixed #19692 -- Completed deprecation of mimetype in favor of content_type.\n\nThanks Tim for the report and initial patch.",
    "sha": "89cb771be7b53c40642872cdbedb15943bdf8e34",
    "files": [
        {
            "sha": "c8d2f4dfa00dc0436981ef6b0a71a94adf909550",
            "filename": "django/contrib/sitemaps/views.py",
            "status": "modified",
            "additions": 21,
            "deletions": 5,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/django%2Fcontrib%2Fsitemaps%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/django%2Fcontrib%2Fsitemaps%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsitemaps%2Fviews.py?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -1,3 +1,5 @@\n+import warnings\n+\n from django.contrib.sites.models import get_current_site\n from django.core import urlresolvers\n from django.core.paginator import EmptyPage, PageNotAnInteger\n@@ -6,8 +8,15 @@\n from django.utils import six\n \n def index(request, sitemaps,\n-          template_name='sitemap_index.xml', mimetype='application/xml',\n-          sitemap_url_name='django.contrib.sitemaps.views.sitemap'):\n+          template_name='sitemap_index.xml', content_type='application/xml',\n+          sitemap_url_name='django.contrib.sitemaps.views.sitemap',\n+          mimetype=None):\n+\n+    if mimetype:\n+        warnings.warn(\"The mimetype keyword argument is deprecated, use \"\n+            \"content_type instead\", DeprecationWarning, stacklevel=2)\n+        content_type = mimetype\n+\n     req_protocol = 'https' if request.is_secure() else 'http'\n     req_site = get_current_site(request)\n \n@@ -24,10 +33,17 @@ def index(request, sitemaps,\n             sites.append('%s?p=%s' % (absolute_url, page))\n \n     return TemplateResponse(request, template_name, {'sitemaps': sites},\n-                            content_type=mimetype)\n+                            content_type=content_type)\n \n def sitemap(request, sitemaps, section=None,\n-            template_name='sitemap.xml', mimetype='application/xml'):\n+            template_name='sitemap.xml', content_type='application/xml',\n+            mimetype=None):\n+\n+    if mimetype:\n+        warnings.warn(\"The mimetype keyword argument is deprecated, use \"\n+            \"content_type instead\", DeprecationWarning, stacklevel=2)\n+        content_type = mimetype\n+\n     req_protocol = 'https' if request.is_secure() else 'http'\n     req_site = get_current_site(request)\n \n@@ -51,4 +67,4 @@ def sitemap(request, sitemaps, section=None,\n         except PageNotAnInteger:\n             raise Http404(\"No page '%s'\" % page)\n     return TemplateResponse(request, template_name, {'urlset': urls},\n-                            content_type=mimetype)\n+                            content_type=content_type)"
        },
        {
            "sha": "21bd7a06d27f11f03d12bb0ef188a0352a29409e",
            "filename": "django/shortcuts/__init__.py",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/django%2Fshortcuts%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/django%2Fshortcuts%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fshortcuts%2F__init__.py?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -3,6 +3,7 @@\n of MVC. In other words, these functions/classes introduce controlled coupling\n for convenience's sake.\n \"\"\"\n+import warnings\n \n from django.template import loader, RequestContext\n from django.http import HttpResponse, Http404\n@@ -17,7 +18,14 @@ def render_to_response(*args, **kwargs):\n     Returns a HttpResponse whose content is filled with the result of calling\n     django.template.loader.render_to_string() with the passed arguments.\n     \"\"\"\n-    httpresponse_kwargs = {'content_type': kwargs.pop('mimetype', None)}\n+    httpresponse_kwargs = {'content_type': kwargs.pop('content_type', None)}\n+\n+    mimetype = kwargs.pop('mimetype', None)\n+    if mimetype:\n+        warnings.warn(\"The mimetype keyword argument is deprecated, use \"\n+            \"content_type instead\", DeprecationWarning, stacklevel=2)\n+        httpresponse_kwargs['content_type'] = mimetype\n+\n     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)\n \n def render(request, *args, **kwargs):"
        },
        {
            "sha": "1f9efb5a4b065961634e32b0f1d9232941893cb6",
            "filename": "docs/howto/outputting-csv.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Fhowto%2Foutputting-csv.txt",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Fhowto%2Foutputting-csv.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Foutputting-csv.txt?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -20,7 +20,7 @@ Here's an example::\n \n     def some_view(request):\n         # Create the HttpResponse object with the appropriate CSV header.\n-        response = HttpResponse(mimetype='text/csv')\n+        response = HttpResponse(content_type='text/csv')\n         response['Content-Disposition'] = 'attachment; filename=\"somefilename.csv\"'\n \n         writer = csv.writer(response)\n@@ -92,7 +92,7 @@ Here's an example, which generates the same CSV file as above::\n \n     def some_view(request):\n         # Create the HttpResponse object with the appropriate CSV header.\n-        response = HttpResponse(mimetype='text/csv')\n+        response = HttpResponse(content_type='text/csv')\n         response['Content-Disposition'] = 'attachment; filename=\"somefilename.csv\"'\n \n         # The data is hard-coded here, but you could load it from a database or\n@@ -111,7 +111,7 @@ Here's an example, which generates the same CSV file as above::\n \n The only difference between this example and the previous example is that this\n one uses template loading instead of the CSV module. The rest of the code --\n-such as the ``mimetype='text/csv'`` -- is the same.\n+such as the ``content_type='text/csv'`` -- is the same.\n \n Then, create the template ``my_template_name.txt``, with this template code:\n "
        },
        {
            "sha": "d15f94f7f475f56b219ac68c70c97396fef8b74e",
            "filename": "docs/howto/outputting-pdf.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Fhowto%2Foutputting-pdf.txt",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Fhowto%2Foutputting-pdf.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fhowto%2Foutputting-pdf.txt?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -51,7 +51,7 @@ Here's a \"Hello World\" example::\n \n     def some_view(request):\n         # Create the HttpResponse object with the appropriate PDF headers.\n-        response = HttpResponse(mimetype='application/pdf')\n+        response = HttpResponse(content_type='application/pdf')\n         response['Content-Disposition'] = 'attachment; filename=\"somefilename.pdf\"'\n \n         # Create the PDF object, using the response object as its \"file.\"\n@@ -120,7 +120,7 @@ Here's the above \"Hello World\" example rewritten to use :mod:`io`::\n \n     def some_view(request):\n         # Create the HttpResponse object with the appropriate PDF headers.\n-        response = HttpResponse(mimetype='application/pdf')\n+        response = HttpResponse(content_type='application/pdf')\n         response['Content-Disposition'] = 'attachment; filename=\"somefilename.pdf\"'\n \n         buffer = BytesIO()"
        },
        {
            "sha": "da0d1e212c2bdd4e868416fb8f8636d2a12b6078",
            "filename": "docs/internals/deprecation.txt",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Finternals%2Fdeprecation.txt",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Finternals%2Fdeprecation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fdeprecation.txt?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -290,8 +290,14 @@ these changes.\n   specified as a plain string instead of a tuple will be removed and raise an\n   exception.\n \n-* The ``mimetype`` argument to :class:`~django.http.HttpResponse` ``__init__``\n-  will be removed (``content_type`` should be used instead).\n+* The ``mimetype`` argument to the ``__init__`` methods of\n+  :class:`~django.http.HttpResponse`,\n+  :class:`~django.template.response.SimpleTemplateResponse`, and\n+  :class:`~django.template.response.TemplateResponse`, will be removed.\n+  ``content_type`` should be used instead. This also applies to the\n+  :func:`~django.shortcuts.render_to_response` shortcut and\n+  the sitemamp views, :func:`~django.contrib.sitemaps.views.index` and\n+  :func:`~django.contrib.sitemaps.views.sitemap`.\n \n * When :class:`~django.http.HttpResponse` is instantiated with an iterator,\n   or when :attr:`~django.http.HttpResponse.content` is set to an iterator,"
        },
        {
            "sha": "0a302ecd1dd6c951263b5edae1993d1de74bbeff",
            "filename": "docs/ref/contrib/admin/actions.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Fref%2Fcontrib%2Fadmin%2Factions.txt",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Fref%2Fcontrib%2Fadmin%2Factions.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fadmin%2Factions.txt?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -223,7 +223,7 @@ objects as JSON::\n     from django.core import serializers\n \n     def export_as_json(modeladmin, request, queryset):\n-        response = HttpResponse(mimetype=\"text/javascript\")\n+        response = HttpResponse(content_type=\"application/json\")\n         serializers.serialize(\"json\", queryset, stream=response)\n         return response\n \n@@ -356,5 +356,3 @@ Conditionally enabling or disabling actions\n                     if 'delete_selected' in actions:\n                         del actions['delete_selected']\n                 return actions\n-\n-"
        },
        {
            "sha": "844b5fa46b9134ebfd5ba1d8bea1d3d4e4c3e23e",
            "filename": "docs/ref/template-response.txt",
            "status": "modified",
            "additions": 21,
            "deletions": 15,
            "changes": 36,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Fref%2Ftemplate-response.txt",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Fref%2Ftemplate-response.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Ftemplate-response.txt?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -56,11 +56,11 @@ Attributes\n Methods\n -------\n \n-.. method:: SimpleTemplateResponse.__init__(template, context=None, mimetype=None, status=None, content_type=None)\n+.. method:: SimpleTemplateResponse.__init__(template, context=None, content_type=None, status=None)\n \n     Instantiates a\n     :class:`~django.template.response.SimpleTemplateResponse` object\n-    with the given template, context, MIME type and HTTP status.\n+    with the given template, context, content type, and HTTP status.\n \n     ``template``\n         The full name of a template, or a sequence of template names.\n@@ -75,12 +75,15 @@ Methods\n         The HTTP Status code for the response.\n \n     ``content_type``\n-        An alias for ``mimetype``. Historically, this parameter was only called\n-        ``mimetype``, but since this is actually the value included in the HTTP\n-        ``Content-Type`` header, it can also include the character set encoding,\n-        which makes it more than just a MIME type specification. If ``mimetype``\n-        is specified (not ``None``), that value is used. Otherwise,\n-        ``content_type`` is used. If neither is given,\n+\n+        .. versionchanged:: 1.5\n+\n+        Historically, this parameter was only called ``mimetype`` (now\n+        deprecated), but since this is actually the value included in the HTTP\n+        ``Content-Type`` header, it can also include the character set\n+        encoding, which makes it more than just a MIME type specification. If\n+        ``mimetype`` is specified (not ``None``), that value is used.\n+        Otherwise, ``content_type`` is used. If neither is given,\n         :setting:`DEFAULT_CONTENT_TYPE` is used.\n \n \n@@ -144,7 +147,7 @@ TemplateResponse objects\n Methods\n -------\n \n-.. method:: TemplateResponse.__init__(request, template, context=None, mimetype=None, status=None, content_type=None, current_app=None)\n+.. method:: TemplateResponse.__init__(request, template, context=None, content_type=None, status=None, current_app=None)\n \n     Instantiates an ``TemplateResponse`` object with the given\n     template, context, MIME type and HTTP status.\n@@ -165,12 +168,15 @@ Methods\n         The HTTP Status code for the response.\n \n     ``content_type``\n-        An alias for ``mimetype``. Historically, this parameter was only called\n-        ``mimetype``, but since this is actually the value included in the HTTP\n-        ``Content-Type`` header, it can also include the character set encoding,\n-        which makes it more than just a MIME type specification. If ``mimetype``\n-        is specified (not ``None``), that value is used. Otherwise,\n-        ``content_type`` is used. If neither is given,\n+\n+        .. versionchanged:: 1.5\n+\n+        Historically, this parameter was only called ``mimetype`` (now\n+        deprecated), but since this is actually the value included in the HTTP\n+        ``Content-Type`` header, it can also include the character set\n+        encoding, which makes it more than just a MIME type specification. If\n+        ``mimetype`` is specified (not ``None``), that value is used.\n+        Otherwise, ``content_type`` is used. If neither is given,\n         :setting:`DEFAULT_CONTENT_TYPE` is used.\n \n     ``current_app``"
        },
        {
            "sha": "68860f123f8d888b1d84af210fff9520bfc85911",
            "filename": "docs/topics/http/shortcuts.txt",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Ftopics%2Fhttp%2Fshortcuts.txt",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/docs%2Ftopics%2Fhttp%2Fshortcuts.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fhttp%2Fshortcuts.txt?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -50,6 +50,9 @@ Optional arguments\n     The MIME type to use for the resulting document. Defaults to the value of\n     the :setting:`DEFAULT_CONTENT_TYPE` setting.\n \n+    .. versionchanged:: 1.5\n+        This parameter used to be called ``mimetype``.\n+\n ``status``\n     The status code for the response. Defaults to ``200``.\n \n@@ -87,7 +90,7 @@ This example is equivalent to::\n ``render_to_response``\n ======================\n \n-.. function:: render_to_response(template_name[, dictionary][, context_instance][, mimetype])\n+.. function:: render_to_response(template_name[, dictionary][, context_instance][, content_type])\n \n    Renders a given template with a given context dictionary and returns an\n    :class:`~django.http.HttpResponse` object with that rendered text.\n@@ -121,10 +124,14 @@ Optional arguments\n                                   my_data_dictionary,\n                                   context_instance=RequestContext(request))\n \n-``mimetype``\n+``content_type``\n     The MIME type to use for the resulting document. Defaults to the value of\n     the :setting:`DEFAULT_CONTENT_TYPE` setting.\n \n+    .. versionchanged:: 1.5\n+        This parameter used to be called ``mimetype``.\n+\n+\n Example\n -------\n \n@@ -148,7 +155,7 @@ This example is equivalent to::\n         t = loader.get_template('myapp/template.html')\n         c = Context({'foo': 'bar'})\n         return HttpResponse(t.render(c),\n-            mimetype=\"application/xhtml+xml\")\n+            content_type=\"application/xhtml+xml\")\n \n ``redirect``\n ============"
        },
        {
            "sha": "d50436279a7dab3e4b922180059d30737176eef5",
            "filename": "tests/regressiontests/views/generic_urls.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/tests%2Fregressiontests%2Fviews%2Fgeneric_urls.py",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/tests%2Fregressiontests%2Fviews%2Fgeneric_urls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Fgeneric_urls.py?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -47,7 +47,7 @@\n urlpatterns += patterns('regressiontests.views.views',\n     (r'^shortcuts/render_to_response/$', 'render_to_response_view'),\n     (r'^shortcuts/render_to_response/request_context/$', 'render_to_response_view_with_request_context'),\n-    (r'^shortcuts/render_to_response/mimetype/$', 'render_to_response_view_with_mimetype'),\n+    (r'^shortcuts/render_to_response/content_type/$', 'render_to_response_view_with_content_type'),\n     (r'^shortcuts/render/$', 'render_view'),\n     (r'^shortcuts/render/base_context/$', 'render_view_with_base_context'),\n     (r'^shortcuts/render/content_type/$', 'render_view_with_content_type'),"
        },
        {
            "sha": "3a5df6a9cbe572e929c465618593a867a7a69db5",
            "filename": "tests/regressiontests/views/tests/shortcuts.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Ftests%2Fshortcuts.py?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -21,8 +21,8 @@ def test_render_to_response_with_request_context(self):\n         self.assertEqual(response.content, b'FOO.BAR../path/to/static/media/\\n')\n         self.assertEqual(response['Content-Type'], 'text/html; charset=utf-8')\n \n-    def test_render_to_response_with_mimetype(self):\n-        response = self.client.get('/shortcuts/render_to_response/mimetype/')\n+    def test_render_to_response_with_content_type(self):\n+        response = self.client.get('/shortcuts/render_to_response/content_type/')\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.content, b'FOO.BAR..\\n')\n         self.assertEqual(response['Content-Type'], 'application/x-rendertest')"
        },
        {
            "sha": "50ad98ac2d9aef1659f0f18738a1f039d2e6810e",
            "filename": "tests/regressiontests/views/views.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/89cb771be7b53c40642872cdbedb15943bdf8e34/tests%2Fregressiontests%2Fviews%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/89cb771be7b53c40642872cdbedb15943bdf8e34/tests%2Fregressiontests%2Fviews%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fviews%2Fviews.py?ref=89cb771be7b53c40642872cdbedb15943bdf8e34",
            "patch": "@@ -68,11 +68,11 @@ def render_to_response_view_with_request_context(request):\n         'bar': 'BAR',\n     }, context_instance=RequestContext(request))\n \n-def render_to_response_view_with_mimetype(request):\n+def render_to_response_view_with_content_type(request):\n     return render_to_response('debug/render_test.html', {\n         'foo': 'FOO',\n         'bar': 'BAR',\n-    }, mimetype='application/x-rendertest')\n+    }, content_type='application/x-rendertest')\n \n def render_view(request):\n     return render(request, 'debug/render_test.html', {\n@@ -263,4 +263,4 @@ def method(self, request):\n             return technical_500_response(request, *exc_info)\n \n def sensitive_method_view(request):\n-    return Klass().method(request)\n\\ No newline at end of file\n+    return Klass().method(request)"
        }
    ],
    "stats": {
        "total": 121,
        "additions": 81,
        "deletions": 40
    }
}