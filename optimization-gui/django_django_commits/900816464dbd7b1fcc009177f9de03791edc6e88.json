{
    "author": "claudep",
    "message": "[py3] Re-decoded string after idna encoding",
    "sha": "900816464dbd7b1fcc009177f9de03791edc6e88",
    "files": [
        {
            "sha": "34c397506f128be3b57017053a3495af26012d1b",
            "filename": "django/core/validators.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/900816464dbd7b1fcc009177f9de03791edc6e88/django%2Fcore%2Fvalidators.py",
            "raw_url": "https://github.com/django/django/raw/900816464dbd7b1fcc009177f9de03791edc6e88/django%2Fcore%2Fvalidators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fvalidators.py?ref=900816464dbd7b1fcc009177f9de03791edc6e88",
            "patch": "@@ -57,7 +57,7 @@ def __call__(self, value):\n                 value = smart_text(value)\n                 scheme, netloc, path, query, fragment = urlsplit(value)\n                 try:\n-                    netloc = netloc.encode('idna') # IDN -> ACE\n+                    netloc = netloc.encode('idna').decode('ascii') # IDN -> ACE\n                 except UnicodeError: # invalid domain part\n                     raise e\n                 url = urlunsplit((scheme, netloc, path, query, fragment))\n@@ -84,7 +84,7 @@ def __call__(self, value):\n             if value and '@' in value:\n                 parts = value.split('@')\n                 try:\n-                    parts[-1] = parts[-1].encode('idna')\n+                    parts[-1] = parts[-1].encode('idna').decode('ascii')\n                 except UnicodeError:\n                     raise e\n                 super(EmailValidator, self).__call__('@'.join(parts))"
        },
        {
            "sha": "647982a15fc03258a0f6bd4a33e0f0e92fc7e3df",
            "filename": "django/utils/html.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/900816464dbd7b1fcc009177f9de03791edc6e88/django%2Futils%2Fhtml.py",
            "raw_url": "https://github.com/django/django/raw/900816464dbd7b1fcc009177f9de03791edc6e88/django%2Futils%2Fhtml.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhtml.py?ref=900816464dbd7b1fcc009177f9de03791edc6e88",
            "patch": "@@ -143,7 +143,7 @@ def smart_urlquote(url):\n     # Handle IDN before quoting.\n     scheme, netloc, path, query, fragment = urlsplit(url)\n     try:\n-        netloc = netloc.encode('idna') # IDN -> ACE\n+        netloc = netloc.encode('idna').decode('ascii') # IDN -> ACE\n     except UnicodeError: # invalid domain part\n         pass\n     else:\n@@ -206,7 +206,7 @@ def urlize(text, trim_url_limit=None, nofollow=False, autoescape=False):\n             elif not ':' in middle and simple_email_re.match(middle):\n                 local, domain = middle.rsplit('@', 1)\n                 try:\n-                    domain = domain.encode('idna')\n+                    domain = domain.encode('idna').decode('ascii')\n                 except UnicodeError:\n                     continue\n                 url = 'mailto:%s@%s' % (local, domain)"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}