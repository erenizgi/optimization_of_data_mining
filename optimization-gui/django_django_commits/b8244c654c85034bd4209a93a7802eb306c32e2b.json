{
    "author": "jphalip",
    "message": "Fixed #18881 -- Made the context option in {% trans %} and {% blocktrans %} accept literals wrapped in single quotes. Thanks to lanyjie for the report.",
    "sha": "b8244c654c85034bd4209a93a7802eb306c32e2b",
    "files": [
        {
            "sha": "6911c2c72344acf27d8e73c8c10f8e3ef58eb89d",
            "filename": "django/utils/translation/trans_real.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/b8244c654c85034bd4209a93a7802eb306c32e2b/django%2Futils%2Ftranslation%2Ftrans_real.py",
            "raw_url": "https://github.com/django/django/raw/b8244c654c85034bd4209a93a7802eb306c32e2b/django%2Futils%2Ftranslation%2Ftrans_real.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftranslation%2Ftrans_real.py?ref=b8244c654c85034bd4209a93a7802eb306c32e2b",
            "patch": "@@ -437,8 +437,8 @@ def blankout(src, char):\n     return dot_re.sub(char, src)\n \n context_re = re.compile(r\"\"\"^\\s+.*context\\s+((?:\"[^\"]*?\")|(?:'[^']*?'))\\s*\"\"\")\n-inline_re = re.compile(r\"\"\"^\\s*trans\\s+((?:\"[^\"]*?\")|(?:'[^']*?'))(\\s+.*context\\s+(?:\"[^\"]*?\")|(?:'[^']*?'))?\\s*\"\"\")\n-block_re = re.compile(r\"\"\"^\\s*blocktrans(\\s+.*context\\s+(?:\"[^\"]*?\")|(?:'[^']*?'))?(?:\\s+|$)\"\"\")\n+inline_re = re.compile(r\"\"\"^\\s*trans\\s+((?:\"[^\"]*?\")|(?:'[^']*?'))(\\s+.*context\\s+((?:\"[^\"]*?\")|(?:'[^']*?')))?\\s*\"\"\")\n+block_re = re.compile(r\"\"\"^\\s*blocktrans(\\s+.*context\\s+((?:\"[^\"]*?\")|(?:'[^']*?')))?(?:\\s+|$)\"\"\")\n endblock_re = re.compile(r\"\"\"^\\s*endblocktrans$\"\"\")\n plural_re = re.compile(r\"\"\"^\\s*plural$\"\"\")\n constant_re = re.compile(r\"\"\"_\\(((?:\".*?\")|(?:'.*?'))\\)\"\"\")"
        },
        {
            "sha": "ca2c3cc026ec1827b1da3b1410a8cd2d3adc6659",
            "filename": "tests/regressiontests/i18n/commands/extraction.py",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/b8244c654c85034bd4209a93a7802eb306c32e2b/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py",
            "raw_url": "https://github.com/django/django/raw/b8244c654c85034bd4209a93a7802eb306c32e2b/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Fextraction.py?ref=b8244c654c85034bd4209a93a7802eb306c32e2b",
            "patch": "@@ -156,6 +156,21 @@ def test_template_message_context_extractor(self):\n             self.assertTrue('msgctxt \"Special blocktrans context #4\"' in po_contents)\n             self.assertTrue(\"Translatable literal #8d\" in po_contents)\n \n+    def test_context_in_single_quotes(self):\n+        os.chdir(self.test_dir)\n+        management.call_command('makemessages', locale=LOCALE, verbosity=0)\n+        self.assertTrue(os.path.exists(self.PO_FILE))\n+        with open(self.PO_FILE, 'r') as fp:\n+            po_contents = fp.read()\n+            # {% trans %}\n+            self.assertTrue('msgctxt \"Context wrapped in double quotes\"' in po_contents)\n+            self.assertTrue('msgctxt \"Context wrapped in single quotes\"' in po_contents)\n+\n+            # {% blocktrans %}\n+            self.assertTrue('msgctxt \"Special blocktrans context wrapped in double quotes\"' in po_contents)\n+            self.assertTrue('msgctxt \"Special blocktrans context wrapped in single quotes\"' in po_contents)\n+\n+\n class JavascriptExtractorTests(ExtractorTests):\n \n     PO_FILE='locale/%s/LC_MESSAGES/djangojs.po' % LOCALE"
        },
        {
            "sha": "e7d7f3ca53b9ef429c53603800ca85c0eba54bc1",
            "filename": "tests/regressiontests/i18n/commands/templates/test.html",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/b8244c654c85034bd4209a93a7802eb306c32e2b/tests%2Fregressiontests%2Fi18n%2Fcommands%2Ftemplates%2Ftest.html",
            "raw_url": "https://github.com/django/django/raw/b8244c654c85034bd4209a93a7802eb306c32e2b/tests%2Fregressiontests%2Fi18n%2Fcommands%2Ftemplates%2Ftest.html",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Fcommands%2Ftemplates%2Ftest.html?ref=b8244c654c85034bd4209a93a7802eb306c32e2b",
            "patch": "@@ -77,3 +77,8 @@\n {% trans \"Shouldn't double escape this sequence %% either\" context \"ctx1\" %}\n {% trans \"Looks like a str fmt spec %s but shouldn't be interpreted as such\" %}\n {% trans \"Looks like a str fmt spec % o but shouldn't be interpreted as such\" %}\n+\n+{% trans \"Translatable literal with context wrapped in single quotes\" context 'Context wrapped in single quotes' as var %}\n+{% trans \"Translatable literal with context wrapped in double quotes\" context \"Context wrapped in double quotes\" as var %}\n+{% blocktrans context 'Special blocktrans context wrapped in single quotes' %}Translatable literal with context wrapped in single quotes{% endblocktrans %}\n+{% blocktrans context \"Special blocktrans context wrapped in double quotes\" %}Translatable literal with context wrapped in double quotes{% endblocktrans %}\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 22,
        "deletions": 2
    }
}