{
    "author": "timgraham",
    "message": "Fixed #16671 - Added a tutorial on reuseable apps\n\nThank-you Katie Miller and Ben Sturmfels for the initial draft,\nas well as Russ and Carl for the reviews.",
    "sha": "08cf54990ae112083b159aa4e263c1f64f396f39",
    "files": [
        {
            "sha": "6f9b410cca1d8624568f511f83ef938e049fa438",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/08cf54990ae112083b159aa4e263c1f64f396f39/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/08cf54990ae112083b159aa4e263c1f64f396f39/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=08cf54990ae112083b159aa4e263c1f64f396f39",
            "patch": "@@ -380,6 +380,7 @@ answer newbie questions, and generally made Django that much better:\n     Christian Metts\n     michal@plovarna.cz\n     Slawek Mikula <slawek dot mikula at gmail dot com>\n+    Katie Miller <katie@sub50.com>\n     Shawn Milochik <shawn@milochik.com>\n     mitakummaa@gmail.com\n     Taylor Mitchell <taylor.mitchell@gmail.com>\n@@ -510,6 +511,7 @@ answer newbie questions, and generally made Django that much better:\n     Johan C. Stöver <johan@nilling.nl>\n     Nowell Strite <http://nowell.strite.org/>\n     Thomas Stromberg <tstromberg@google.com>\n+    Ben Sturmfels <ben@sturm.com.au>\n     Travis Swicegood <travis@domain51.com>\n     Pascal Varet\n     SuperJared"
        },
        {
            "sha": "a6d9ed2b13e697d40660b6a811bfc67faf0d8e93",
            "filename": "docs/index.txt",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Findex.txt?ref=08cf54990ae112083b159aa4e263c1f64f396f39",
            "patch": "@@ -46,6 +46,9 @@ Are you new to Django or to programming? This is the place to start!\n   :doc:`Part 3 <intro/tutorial03>` |\n   :doc:`Part 4 <intro/tutorial04>`\n \n+* **Advanced Tutorials:**\n+  :doc:`How to write reusable apps <intro/reusable-apps>`\n+\n The model layer\n ===============\n "
        },
        {
            "sha": "afb1825b87820ff3f0d4042a614e19f2326092d5",
            "filename": "docs/intro/index.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/django/django/blob/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Fintro%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Fintro%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Findex.txt?ref=08cf54990ae112083b159aa4e263c1f64f396f39",
            "patch": "@@ -6,31 +6,32 @@ place: read this material to quickly get up and running.\n \n .. toctree::\n    :maxdepth: 1\n-    \n+\n    overview\n    install\n    tutorial01\n    tutorial02\n    tutorial03\n    tutorial04\n+   reusable-apps\n    whatsnext\n-   \n+\n .. seealso::\n \n     If you're new to Python_, you might want to start by getting an idea of what\n     the language is like. Django is 100% Python, so if you've got minimal\n     comfort with Python you'll probably get a lot more out of Django.\n-    \n+\n     If you're new to programming entirely, you might want to start with this\n     `list of Python resources for non-programmers`_\n-    \n+\n     If you already know a few other languages and want to get up to speed with\n     Python quickly, we recommend `Dive Into Python`_ (also available in a\n     `dead-tree version`_). If that's not quite your style, there are quite\n     a few other `books about Python`_.\n-    \n+\n     .. _python: http://python.org/\n     .. _list of Python resources for non-programmers: http://wiki.python.org/moin/BeginnersGuide/NonProgrammers\n     .. _dive into python: http://diveintopython.net/\n     .. _dead-tree version: http://www.amazon.com/exec/obidos/ASIN/1590593561/ref=nosim/jacobian20\n-    .. _books about Python: http://wiki.python.org/moin/PythonBooks\n\\ No newline at end of file\n+    .. _books about Python: http://wiki.python.org/moin/PythonBooks"
        },
        {
            "sha": "200051593c533b8678b9075fd309cadce4695d92",
            "filename": "docs/intro/reusable-apps.txt",
            "status": "added",
            "additions": 363,
            "deletions": 0,
            "changes": 363,
            "blob_url": "https://github.com/django/django/blob/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Fintro%2Freusable-apps.txt",
            "raw_url": "https://github.com/django/django/raw/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Fintro%2Freusable-apps.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Freusable-apps.txt?ref=08cf54990ae112083b159aa4e263c1f64f396f39",
            "patch": "@@ -0,0 +1,363 @@\n+=============================================\n+Advanced tutorial: How to write reusable apps\n+=============================================\n+\n+This advanced tutorial begins where :doc:`Tutorial 4 </intro/tutorial04>` left\n+off. We'll be turning our Web-poll into a standalone Python package you can\n+reuse in new projects and share with other people.\n+\n+If you haven't recently completed Tutorials 1–4, we encourage you to review\n+these so that your example project matches the one described below.\n+\n+Reusability matters\n+===================\n+\n+It's a lot of work to design, build, test and maintain a web application. Many\n+Python and Django projects share common problems. Wouldn't it be great if we\n+could save some of this repeated work?\n+\n+Reusability is the way of life in Python. `The Python Package Index (PyPI)\n+<http://guide.python-distribute.org/contributing.html#pypi-info>`_ has a vast\n+range of packages you can use in your own Python programs. Check out `Django\n+Packages <http://www.djangopackages.com>`_ for existing reusable apps you could\n+incorporate in your project. Django itself is also just a Python package. This\n+means that you can take existing Python packages or Django apps and compose\n+them into your own web project. You only need to write the parts that make\n+your project unique.\n+\n+Let's say you were starting a new project that needed a polls app like the one\n+we've been working on. How do you make this app reusable? Luckily, you're well\n+on the way already. In :doc:`Tutorial 3 </intro/tutorial03>`, we saw how we\n+could decouple polls from the project-level URLconf using an ``include``.\n+In this tutorial, we'll take further steps to make the app easy to use in new\n+projects and ready to publish for others to install and use.\n+\n+.. admonition:: Package? App?\n+\n+    A Python `package <http://docs.python.org/tutorial/modules.html#packages>`_\n+    provides a way of grouping related Python code for easy reuse. A package\n+    contains one or more files of Python code (also known as \"modules\").\n+\n+    A package can be imported with ``import foo.bar`` or ``from foo import\n+    bar``. For a directory (like ``polls``) to form a package, it must contain\n+    a special file ``__init__.py``, even if this file is empty.\n+\n+    A Django *app* is just a Python package that is specifically intended for\n+    use in a Django project. An app may also use common Django conventions,\n+    such as having a ``models.py`` file.\n+\n+    Later on we use the term *packaging* to describe the process of making a\n+    Python package easy for others to install. It can be a little confusing, we\n+    know.\n+\n+Completing your reusable app\n+============================\n+\n+After the previous tutorials, our project should look like this::\n+\n+    mysite/\n+        manage.py\n+        mysite/\n+            __init__.py\n+            settings.py\n+            urls.py\n+            wsgi.py\n+        polls/\n+            admin.py\n+            __init__.py\n+            models.py\n+            tests.py\n+            urls.py\n+            views.py\n+\n+You also have a directory somewhere called ``mytemplates`` which you created in\n+:doc:`Tutorial 2 </intro/tutorial02>`. You specified its location in the\n+TEMPLATE_DIRS setting. This directory should look like this::\n+\n+    mytemplates/\n+        admin/\n+            base_site.html\n+        polls/\n+            detail.html\n+            index.html\n+            results.html\n+\n+The polls app is already a Python package, thanks to the ``polls/__init__.py``\n+file. That's a great start, but we can't just pick up this package and drop it\n+into a new project. The polls templates are currently stored in the\n+project-wide ``mytemplates`` directory. To make the app self-contained, it\n+should also contain the necessary templates.\n+\n+Inside the ``polls`` app, create a new ``templates`` directory. Now move the\n+``polls`` template directory from ``mytemplates`` into the new\n+``templates``. Your project should now look like this::\n+\n+    mysite/\n+        manage.py\n+        mysite/\n+            __init__.py\n+            settings.py\n+            urls.py\n+            wsgi.py\n+        polls/\n+            admin.py\n+            __init__.py\n+            models.py\n+            templates/\n+                polls/\n+                    detail.html\n+                    index.html\n+                    results.html\n+            tests.py\n+            urls.py\n+            views.py\n+\n+Your project-wide templates directory should now look like this::\n+\n+    mytemplates/\n+        admin/\n+            base_site.html\n+\n+Looking good! Now would be a good time to confirm that your polls application\n+still works correctly.  How does Django know how to find the new location of\n+the polls templates even though we didn't modify :setting:`TEMPLATE_DIRS`?\n+Django has a :setting:`TEMPLATE_LOADERS` setting which contains a list\n+of callables that know how to import templates from various sources.  One of\n+the defaults is :class:`django.template.loaders.app_directories.Loader` which\n+looks for a \"templates\" subdirectory in each of the :setting:`INSTALLED_APPS`.\n+\n+The ``polls`` directory could now be copied into a new Django project and\n+immediately reused. It's not quite ready to be published though. For that, we\n+need to package the app to make it easy for others to install.\n+\n+.. admonition:: Why nested?\n+\n+   Why create a ``polls`` directory under ``templates`` when we're\n+   already inside the polls app? This directory is needed to avoid conflicts in\n+   Django's ``app_directories`` template loader.  For example, if two\n+   apps had a template called ``base.html``, without the extra directory it\n+   wouldn't be possible to distinguish between the two. It's a good convention\n+   to use the name of your app for this directory.\n+\n+.. _installing-reusable-apps-prerequisites:\n+\n+Installing some prerequisites\n+=============================\n+\n+The current state of Python packaging is a bit muddled with various tools. For\n+this tutorial, we're going to use distribute_ to build our package. It's a\n+community-maintained fork of the older ``setuptools`` project. We'll also be\n+using `pip`_ to uninstall it after we're finished. You should install these\n+two packages now. If you need help, you can refer to :ref:`how to install\n+Django with pip<installing-official-release>`. You can install ``distribute``\n+the same way.\n+\n+.. _distribute: http://pypi.python.org/pypi/distribute\n+.. _pip: http://pypi.python.org/pypi/pip\n+\n+Packaging your app\n+==================\n+\n+Python *packaging* refers to preparing your app in a specific format that can\n+be easily installed and used. Django itself is packaged very much like\n+this. For a small app like polls, this process isn't too difficult.\n+\n+1. First, create a parent directory for ``polls``, outside of your Django\n+   project. Call this directory ``django-polls``.\n+\n+.. admonition::  Choosing a name for your app\n+\n+   When choosing a name for your package, check resources like PyPI to avoid\n+   naming conflicts with existing packages. It's often useful to prepend\n+   ``django-`` to your module name when creating a package to distribute.\n+   This helps others looking for Django apps identify your app as Django\n+   specific.\n+\n+2. Move the ``polls`` directory into the ``django-polls`` directory.\n+\n+3. Create a file ``django-polls/README.txt`` with the following contents::\n+\n+    =====\n+    Polls\n+    =====\n+\n+    Polls is a simple Django app to conduct Web-based polls. For each\n+    question, visitors can choose between a fixed number of answers.\n+\n+    Detailed documentation is in the \"docs\" directory.\n+\n+    Quick start\n+    -----------\n+\n+    1. Add \"polls\" to your INSTALLED_APPS setting like this::\n+\n+          INSTALLED_APPS = (\n+              ...\n+              'polls',\n+          )\n+\n+    2. Include the polls URLconf in your project urls.py like this::\n+\n+          url(r'^polls/', include('polls.urls')),\n+\n+    3. Run `python manage.py syncdb` to create the polls models.\n+\n+    4. Start the development server and visit http://127.0.0.1:8000/admin/\n+      to create a poll (you'll need the Admin app enabled).\n+\n+    5. Visit http://127.0.0.1:8000/polls/ to participate in the poll.\n+\n+4. Create a ``django-polls/LICENSE`` file. Choosing a license is beyond the\n+scope of this tutorial, but suffice it to say that code released publicly\n+without a license is *useless*. Django and many Django-compatible apps are\n+distributed under the BSD license; however, you're free to pick your own\n+license. Just be aware that your licensing choice will affect who is able\n+to use your code.\n+\n+5. Next we'll create a ``setup.py`` file which provides details about how to\n+build and install the app.  A full explanation of this file is beyond the\n+scope of this tutorial, but the `distribute docs\n+<http://packages.python.org/distribute/setuptools.html>`_ have a good explanation.\n+Create a file ``django-polls/setup.py`` with the following contents::\n+\n+    import os\n+    from setuptools import setup\n+\n+    README = open(os.path.join(os.path.dirname(__file__), 'README.txt')).read()\n+\n+    # allow setup.py to be run from any path\n+    os.chdir(os.path.normpath(os.path.join(os.path.abspath(__file__), os.pardir)))\n+\n+    setup(\n+        name = 'django-polls',\n+        version = '0.1',\n+        packages = ['polls'],\n+        include_package_data = True,\n+        license = 'BSD License', # example license\n+        description = 'A simple Django app to conduct Web-based polls.',\n+        long_description = README,\n+        url = 'http://www.example.com/',\n+        author = 'Your Name',\n+        author_email = 'yourname@example.com',\n+        classifiers = [\n+            'Environment :: Web Environment',\n+            'Framework :: Django',\n+            'Intended Audience :: Developers',\n+            'License :: OSI Approved :: BSD License', # example license\n+            'Operating System :: OS Independent',\n+            'Programming Language :: Python',\n+            'Programming Language :: Python :: 2.6',\n+            'Programming Language :: Python :: 2.7',\n+            'Topic :: Internet :: WWW/HTTP',\n+            'Topic :: Internet :: WWW/HTTP :: Dynamic Content',\n+        ],\n+    )\n+\n+.. admonition:: I thought you said we were going to use ``distribute``?\n+\n+    Distribute is a drop-in replacement for ``setuptools``. Even though we\n+    appear to import from ``setuptools``, since we have ``distribute``\n+    installed, it will override the import.\n+\n+6. Only Python modules and packages are included in the package by default. To\n+   include additional files, we'll need to create a ``MANIFEST.in`` file. The\n+   distribute docs referred to in the previous step discuss this file in more\n+   details. To include the templates and our LICENSE file, create a file\n+   ``django-polls/MANIFEST.in`` with the following contents::\n+\n+    include LICENSE\n+    recursive-include polls/templates *\n+\n+7. It's optional, but recommended, to include detailed documentation with your\n+   app. Create an empty directory ``django-polls/docs`` for future\n+   documentation. Add an additional line to ``django-polls/MANIFEST.in``::\n+\n+    recursive-include docs *\n+\n+   Note that the ``docs`` directory won't be included in your package unless\n+   you add some files to it. Many Django apps also provide their documentation\n+   online through sites like `readthedocs.org <http://readthedocs.org>`_.\n+\n+8. Try building your package with ``python setup.py sdist`` (run from inside\n+   ``django-polls``). This creates a directory called ``dist`` and builds your\n+   new package, ``django-polls-0.1.tar.gz``.\n+\n+For more information on packaging, see `The Hitchhiker's Guide to Packaging\n+<http://guide.python-distribute.org/quickstart.html>`_.\n+\n+Using your own package\n+======================\n+\n+Since we moved the ``polls`` directory out of the project, it's no longer\n+working. We'll now fix this by installing our new ``django-polls`` package.\n+\n+.. admonition:: Installing as a system library\n+\n+   The following steps install ``django-polls`` as a system library. In\n+   general, it's best to avoid messing with your system libraries to avoid\n+   breaking things. For this simple example though, the risk is low and it will\n+   help with understanding packaging. We'll explain how to uninstall in\n+   step 4.\n+\n+   For experienced users, a neater way to manage your packages is to use\n+   \"virtualenv\" (see below).\n+\n+1. Inside ``django-polls/dist``, untar the new package\n+   ``django-polls-0.1.tar.gz`` (e.g. ``tar xzvf django-polls-0.1.tar.gz``). If\n+   you're using Windows, you can download the command-line tool bsdtar_ to do\n+   this, or you can use a GUI-based tool such as 7-zip_.\n+\n+2. Change into the directory created in step 1 (e.g. ``cd django-polls-0.1``).\n+\n+3. If you're using GNU/Linux, Mac OS X or some other flavor of Unix, enter the\n+   command ``sudo python setup.py install`` at the shell prompt.  If you're\n+   using Windows, start up a command shell with administrator privileges and\n+   run the command ``setup.py install``.\n+\n+   With luck, your Django project should now work correctly again. Run the\n+   server again to confirm this.\n+\n+4. To uninstall the package, use pip (you already :ref:`installed it\n+   <installing-reusable-apps-prerequisites>`, right?)::\n+\n+    sudo pip uninstall django-polls\n+\n+.. _bsdtar: http://gnuwin32.sourceforge.net/packages/bsdtar.htm\n+.. _7-zip: http://www.7-zip.org/\n+.. _pip: http://pypi.python.org/pypi/pip\n+\n+Publishing your app\n+===================\n+\n+Now that we've packaged and tested ``django-polls``, it's ready to share with\n+the world! If this wasn't just an example, you could now:\n+\n+* Email the package to a friend.\n+\n+* Upload the package on your Web site.\n+\n+* Post the package on a public repository, such as `The Python Package Index\n+  (PyPI) <http://guide.python-distribute.org/contributing.html#pypi-info>`_.\n+\n+For more information on PyPI, see the `Quickstart\n+<http://guide.python-distribute.org/quickstart.html#register-your-package-with-the-python-package-index-pypi>`_\n+section of The Hitchhiker's Guide to Packaging. One detail this guide mentions\n+is choosing the license under which your code is distributed.\n+\n+Installing Python packages with virtualenv\n+==========================================\n+\n+Earlier, we installed the polls app as a system library. This has some\n+disadvantages:\n+\n+* Modifying the system libraries can affect other Python software on your\n+  system.\n+\n+* You won't be able to run multiple versions of this package (or others with\n+  the same name).\n+\n+Typically, these situations only arise once you're maintaining several Django\n+projects. When they do, the best solution is to use `virtualenv\n+<http://www.virtualenv.org/>`_. This tool allows you to maintain multiple\n+isolated Python environments, each with its own copy of the libraries and\n+package namespace."
        },
        {
            "sha": "5adfc9a49084d5f822550379d23dafed34a7cbdd",
            "filename": "docs/intro/tutorial03.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Fintro%2Ftutorial03.txt",
            "raw_url": "https://github.com/django/django/raw/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Fintro%2Ftutorial03.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial03.txt?ref=08cf54990ae112083b159aa4e263c1f64f396f39",
            "patch": "@@ -315,6 +315,12 @@ Load the page in your Web browser, and you should see a bulleted-list\n containing the \"What's up\" poll from Tutorial 1. The link points to the poll's\n detail page.\n \n+.. admonition:: Organizing Templates\n+\n+    Rather than one big templates directory, you can also store templates\n+    within each app. We'll discuss this in more detail in the :doc:`reusable\n+    apps tutorial</intro/reusable-apps>`.\n+\n A shortcut: :func:`~django.shortcuts.render`\n --------------------------------------------\n "
        },
        {
            "sha": "dfee82705636a9ceaf1e718bdba07a2b6a9af1e7",
            "filename": "docs/intro/tutorial04.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Fintro%2Ftutorial04.txt",
            "raw_url": "https://github.com/django/django/raw/08cf54990ae112083b159aa4e263c1f64f396f39/docs%2Fintro%2Ftutorial04.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial04.txt?ref=08cf54990ae112083b159aa4e263c1f64f396f39",
            "patch": "@@ -278,5 +278,10 @@ For full details on generic views, see the :doc:`generic views documentation\n What's next?\n ============\n \n-The tutorial ends here for the time being. In the meantime, you might want to\n-check out some pointers on :doc:`where to go from here </intro/whatsnext>`.\n+The beginner tutorial ends here for the time being. In the meantime, you might\n+want to check out some pointers on :doc:`where to go from here\n+</intro/whatsnext>`.\n+\n+If you are familiar with Python packaging and interested in learning how to\n+turn polls into a \"reusable app\", check out :doc:`Advanced tutorial: How to\n+write reusable apps</intro/reusable-apps>`."
        }
    ],
    "stats": {
        "total": 396,
        "additions": 388,
        "deletions": 8
    }
}