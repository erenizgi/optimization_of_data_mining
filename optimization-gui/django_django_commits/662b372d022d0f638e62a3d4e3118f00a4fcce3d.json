{
    "author": "jezdez",
    "message": "Fixed #16264 -- Improved form widget documentation. Many thanks to Bas Peschier.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16408 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "662b372d022d0f638e62a3d4e3118f00a4fcce3d",
    "files": [
        {
            "sha": "66c05e508e04a3e19606dbf8b153f5dc9b591860",
            "filename": "docs/ref/forms/fields.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/662b372d022d0f638e62a3d4e3118f00a4fcce3d/docs%2Fref%2Fforms%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/662b372d022d0f638e62a3d4e3118f00a4fcce3d/docs%2Fref%2Fforms%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Ffields.txt?ref=662b372d022d0f638e62a3d4e3118f00a4fcce3d",
            "patch": "@@ -278,6 +278,7 @@ as the rendered output.\n See the :ref:`format localization <format-localization>` documentation for\n more information.\n \n+.. _built-in fields:\n \n Built-in ``Field`` classes\n --------------------------"
        },
        {
            "sha": "13c0c88b6b4bbc994ae65543969dabcfcdeb20b6",
            "filename": "docs/ref/forms/widgets.txt",
            "status": "modified",
            "additions": 256,
            "deletions": 98,
            "changes": 354,
            "blob_url": "https://github.com/django/django/blob/662b372d022d0f638e62a3d4e3118f00a4fcce3d/docs%2Fref%2Fforms%2Fwidgets.txt",
            "raw_url": "https://github.com/django/django/raw/662b372d022d0f638e62a3d4e3118f00a4fcce3d/docs%2Fref%2Fforms%2Fwidgets.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fforms%2Fwidgets.txt?ref=662b372d022d0f638e62a3d4e3118f00a4fcce3d",
            "patch": "@@ -11,9 +11,181 @@ A widget is Django's representation of a HTML input element. The widget\n handles the rendering of the HTML, and the extraction of data from a GET/POST\n dictionary that corresponds to the widget.\n \n+Specifying widgets\n+------------------\n+\n+Whenever you specify a field on a form, Django will use a default widget\n+that is appropriate to the type of data that is to be displayed. To find\n+which widget is used on which field, see the documentation about\n+:ref:`built-in fields`.\n+\n+However, if you want to use a different widget for a field, you can\n+just use the :attr:`~Field.widget` argument on the field definition. For\n+example:\n+\n+    .. code-block:: python\n+\n+        from django import forms\n+\n+        class CommentForm(forms.Form):\n+            name = forms.CharField()\n+            url = forms.URLField()\n+            comment = forms.CharField(widget=forms.Textarea)\n+\n+This would specify a form with a comment that uses a larger :class:`Textarea`\n+widget, rather than the default :class:`TextInput` widget.\n+\n+\n+Setting arguments for widgets\n+-----------------------------\n+\n+Many widgets have optional extra arguments; they can be set when defining the\n+widget on the field. In the following example, the\n+:attr:`~SelectDateWidget.years` attribute is set for a\n+:class:`~django.forms.widgets.extras.SelectDateWidget`:\n+\n+    .. code-block:: python\n+\n+        from django.forms.fields import DateField, ChoiceField, MultipleChoiceField\n+        from django.forms.widgets import RadioSelect, CheckboxSelectMultiple\n+        from django.forms.widgets.extras import SelectDateWidget\n+\n+        BIRTH_YEAR_CHOICES = ('1980', '1981', '1982')\n+        GENDER_CHOICES = (('m', 'Male'), ('f', 'Female'))\n+        FAVOURITE_COLORS_CHOICES = (('blue', 'Blue'),\n+                                    ('green', 'Green'),\n+                                    ('black', 'Black'))\n+\n+        class SimpleForm(forms.Form):\n+            birth_year = DateField(widget=SelectDateWidget(years=YEAR_CHOICES))\n+            gender = ChoiceField(widget=RadioSelect, choices=RADIO_CHOICES)\n+            favourite_colors = forms.MultipleChoiceField(required=False,\n+                widget=CheckboxSelectMultiple, choices=CHECKBOX_CHOICES)\n+\n+See the :ref:`built-in widgets` for more information about which widgets\n+are available and which arguments they accept.\n+\n+\n+Widgets inheriting from the Select widget\n+-----------------------------------------\n+\n+Widgets inheriting from the :class:`Select` widget deal with choices. They\n+present the user with a list of options to choose from. The different widgets\n+present this choice differently; the :class:`Select` widget itself uses a\n+``<select>`` HTML list representation, while :class:`RadioSelect` uses radio\n+buttons.\n+\n+:class:`Select` widgets are used by default on :class:`ChoiceField` fields. The\n+choices displayed on the widget are inherited from the :class:`ChoiceField` and\n+changing :attr:`ChoiceField.choices` will update :attr:`Select.choices`. For\n+example:\n+\n+    .. code-block:: python\n+\n+        >>> from django import forms\n+        >>> CHOICES = (('1', 'First',), ('2', 'Second',)))\n+        >>> choice_field = forms.ChoiceField(widget=forms.RadioSelect, choices=CHOICES)\n+        >>> choice_field.choices\n+        [('1', 'First'), ('2', 'Second')]\n+        >>> choice_field.widget.choices\n+        [('1', 'First'), ('2', 'Second')]\n+        >>> choice_field.widget.choices = ()\n+        >>> choice_field.choices = (('1', 'First and only',),)\n+        >>> choice_field.widget.choices\n+        [('1', 'First and only')]\n+\n+\n+Widgets which offer a :attr:`~Select.choices` attribute can however be used\n+with fields which are not based on choice -- such as a :class:`CharField` --\n+but it is recommended to use a :class:`ChoiceField`-based field when the\n+choices are inherent to the model and not just the representational widget.\n+\n+Customizing widget instances\n+----------------------------\n+\n+When Django renders a widget as HTML, it only renders the bare minimum\n+HTML - Django doesn't add a class definition, or any other widget-specific\n+attributes. This means that all :class:`TextInput` widgets will appear the same\n+on your Web page.\n+\n+If you want to make one widget look different to another, you need to\n+specify additional attributes for each widget. When you specify a\n+widget, you can provide a list of attributes that will be added to the\n+rendered HTML for the widget.\n+\n+For example, take the following simple form:\n+\n+    .. code-block:: python\n+\n+        from django import forms\n+\n+        class CommentForm(forms.Form):\n+            name = forms.CharField()\n+            url = forms.URLField()\n+            comment = forms.CharField()\n+\n+This form will include three default :class:`TextInput` widgets, with default\n+rendering -- no CSS class, no extra attributes. This means that the input boxes\n+provided for each widget will be rendered exactly the same:\n+\n+    .. code-block:: python\n+\n+        >>> f = CommentForm(auto_id=False)\n+        >>> f.as_table()\n+        <tr><th>Name:</th><td><input type=\"text\" name=\"name\" /></td></tr>\n+        <tr><th>Url:</th><td><input type=\"text\" name=\"url\"/></td></tr>\n+        <tr><th>Comment:</th><td><input type=\"text\" name=\"comment\" /></td></tr>\n+\n+\n+On a real Web page, you probably don't want every widget to look the same. You\n+might want a larger input element for the comment, and you might want the\n+'name' widget to have some special CSS class. To do this, you use the\n+:attr:`Widget.attrs` argument when creating the widget:\n+\n+For example:\n+\n+    .. code-block:: python\n+\n+        class CommentForm(forms.Form):\n+            name = forms.CharField(\n+                        widget=forms.TextInput(attrs={'class':'special'}))\n+            url = forms.URLField()\n+            comment = forms.CharField(\n+                       widget=forms.TextInput(attrs={'size':'40'}))\n+\n+Django will then include the extra attributes in the rendered output:\n+\n+    .. code-block:: python\n+\n+        >>> f = CommentForm(auto_id=False)\n+        >>> f.as_table()\n+        <tr><th>Name:</th><td><input type=\"text\" name=\"name\" class=\"special\"/></td></tr>\n+        <tr><th>Url:</th><td><input type=\"text\" name=\"url\"/></td></tr>\n+        <tr><th>Comment:</th><td><input type=\"text\" name=\"comment\" size=\"40\"/></td></tr>\n+\n+.. _built-in widgets:\n+\n+Built-in widgets\n+----------------\n+\n Django provides a representation of all the basic HTML widgets, plus some\n commonly used groups of widgets:\n \n+.. class:: Widget\n+\n+    This abstract class cannot be rendered, but provides the basic attribute :attr:`~Widget.attrs`.\n+\n+    .. attribute:: Widget.attrs\n+\n+        A dictionary containing HTML attributes to be set on the rendered widget.\n+\n+        .. code-block:: python\n+\n+            >>> name = forms.TextInput(attrs={'size': 10, 'title': 'Your name',})\n+            >>> name.render('name', 'A name')\n+            u'<input title=\"Your name\" type=\"text\" name=\"name\" value=\"A name\" size=\"10\" />'\n+\n+\n .. class:: TextInput\n \n     Text input: ``<input type='text' ...>``\n@@ -29,10 +201,10 @@ commonly used groups of widgets:\n         Determines whether the widget will have a value filled in when the\n         form is re-displayed after a validation error (default is ``False``).\n \n-.. versionchanged:: 1.3\n-    The default value for\n-    :attr:`~PasswordInput.render_value` was\n-    changed from ``True`` to ``False``\n+        .. versionchanged:: 1.3\n+            The default value for\n+            :attr:`~PasswordInput.render_value` was\n+            changed from ``True`` to ``False``\n \n .. class:: HiddenInput\n \n@@ -42,6 +214,15 @@ commonly used groups of widgets:\n \n     Multiple ``<input type='hidden' ...>`` widgets.\n \n+    A widget that handles multiple hidden widgets for fields that have a list\n+    of values.\n+\n+    .. attribute:: MultipleHiddenInput.choices\n+\n+        This attribute is optional when the field does not have a\n+        :attr:`~Field.choices` attribute. If it does, it will override anything\n+        you set here when the attribute is updated on the :class:`Field`.\n+\n .. class:: FileInput\n \n     File upload input: ``<input type='file' ...>``\n@@ -64,7 +245,9 @@ commonly used groups of widgets:\n \n         The format in which this field's initial value will be displayed.\n \n-    If no ``format`` argument is provided, the default format is ``'%Y-%m-%d'``.\n+    If no ``format`` argument is provided, the default format is the first\n+    format found in :setting:`DATE_INPUT_FORMATS` and respects\n+    :ref:`format-localization`.\n \n .. class:: DateTimeInput\n \n@@ -76,8 +259,9 @@ commonly used groups of widgets:\n \n         The format in which this field's initial value will be displayed.\n \n-    If no ``format`` argument is provided, the default format is ``'%Y-%m-%d\n-    %H:%M:%S'``.\n+    If no ``format`` argument is provided, the default format is the first\n+    format found in :setting:`DATETIME_INPUT_FORMATS` and respects\n+    :ref:`format-localization`.\n \n .. class:: TimeInput\n \n@@ -89,7 +273,9 @@ commonly used groups of widgets:\n \n         The format in which this field's initial value will be displayed.\n \n-    If no ``format`` argument is provided, the default format is ``'%H:%M:%S'``.\n+    If no ``format`` argument is provided, the default format is the first\n+    format found in :setting:`TIME_INPUT_FORMATS` and respects\n+    :ref:`format-localization`.\n \n .. class:: Textarea\n \n@@ -103,30 +289,31 @@ commonly used groups of widgets:\n \n     .. attribute:: CheckboxInput.check_test\n \n-        A callable that takes the value of the CheckBoxInput\n-        and returns ``True`` if the checkbox should be checked for\n-        that value.\n+        A callable that takes the value of the CheckBoxInput and returns\n+        ``True`` if the checkbox should be checked for that value.\n \n .. class:: Select\n \n     Select widget: ``<select><option ...>...</select>``\n \n-    Requires that your field provides :attr:`~Field.choices`.\n+    .. attribute:: Select.choices\n+\n+        This attribute is optional when the field does not have a\n+        :attr:`~Field.choices` attribute. If it does, it will override anything\n+        you set here when the attribute is updated on the :class:`Field`.\n \n .. class:: NullBooleanSelect\n \n     Select widget with options 'Unknown', 'Yes' and 'No'\n \n .. class:: SelectMultiple\n \n-    Select widget allowing multiple selection: ``<select\n-    multiple='multiple'>...</select>``\n-\n-    Requires that your field provides :attr:`~Field.choices`.\n+    Similar to :class:`Select`, but allows multiple selection:\n+    ``<select multiple='multiple'>...</select>``\n \n .. class:: RadioSelect\n \n-    A list of radio buttons:\n+    Similar to :class:`Select`, but rendered as a list of radio buttons:\n \n     .. code-block:: html\n \n@@ -135,11 +322,10 @@ commonly used groups of widgets:\n           ...\n         </ul>\n \n-    Requires that your field provides :attr:`~Field.choices`.\n-\n .. class:: CheckboxSelectMultiple\n \n-    A list of checkboxes:\n+    Similar to :class:`SelectMultiple`, but rendered as a list of check\n+    buttons:\n \n     .. code-block:: html\n \n@@ -150,111 +336,83 @@ commonly used groups of widgets:\n \n .. class:: MultiWidget\n \n-    Wrapper around multiple other widgets\n+    Wrapper around multiple other widgets. You'll probably want to use this\n+    class with :class:`MultiValueField`.\n \n-.. class:: SplitDateTimeWidget\n-\n-    Wrapper around two widgets: ``DateInput`` for the date, and ``TimeInput``\n-    for the time.\n+    Its ``render()`` method is different than other widgets', because it has to\n+    figure out how to split a single value for display in multiple widgets.\n \n-    Takes two optional arguments, ``date_format`` and ``time_format``, which\n-    work just like the ``format`` argument for ``DateInput`` and ``TimeInput``.\n+    Subclasses may implement ``format_output``, which takes the list of\n+    rendered widgets and returns a string of HTML that formats them any way\n+    you'd like.\n \n-.. currentmodule:: django.forms.extras.widgets\n+    The ``value`` argument used when rendering can be one of two things:\n \n-.. class:: SelectDateWidget\n+    * A ``list``.\n+    * A single value (e.g., a string) that is the \"compressed\" representation\n+      of a ``list`` of values.\n \n-    Wrapper around three select widgets: one each for month, day, and year.\n-    Note that this widget lives in a separate file from the standard widgets.\n-\n-    Takes one optional argument:\n-\n-    .. attribute:: List.years\n-\n-        An optional list/tuple of years to use in the \"year\" select box.\n-        The default is a list containing the current year and the next 9 years.\n+    In the second case -- i.e., if the value is *not* a list -- ``render()``\n+    will first decompress the value into a ``list`` before rendering it. It\n+    does so by calling the ``decompress()`` method, which\n+    :class:`MultiWidget`'s subclasses must implement. This method takes a\n+    single \"compressed\" value and returns a ``list``. An example of this is how\n+    :class:`SplitDateTimeWidget` turns a :class:`datetime` value into a list\n+    with date and time split into two seperate values:\n \n     .. code-block:: python\n \n-        from django.forms.extras.widgets import SelectDateWidget\n+        class SplitDateTimeWidget(MultiWidget):\n \n-        date = forms.DateField(widget=SelectDateWidget())\n+            # ...\n \n-Specifying widgets\n-------------------\n-.. currentmodule:: django.forms\n+            def decompress(self, value):\n+                if value:\n+                    return [value.date(), value.time().replace(microsecond=0)]\n+                return [None, None]\n \n-.. attribute:: Form.widget\n+    When ``render()`` executes its HTML rendering, each value in the list is\n+    rendered with the corresponding widget -- the first value is rendered in\n+    the first widget, the second value is rendered in the second widget, etc.\n \n-Whenever you specify a field on a form, Django will use a default widget\n-that is appropriate to the type of data that is to be displayed. To find\n-which widget is used on which field, see the documentation for the\n-built-in Field classes.\n+    :class:`MultiWidget` has one required argument:\n \n-However, if you want to use a different widget for a field, you can -\n-just use the 'widget' argument on the field definition. For example::\n+    .. attribute:: MultiWidget.widgets\n \n-    from django import forms\n+        An iterable containing the widgets needed.\n \n-    class CommentForm(forms.Form):\n-        name = forms.CharField()\n-        url = forms.URLField()\n-        comment = forms.CharField(widget=forms.Textarea)\n+.. class:: SplitDateTimeWidget\n \n-This would specify a form with a comment that uses a larger Textarea widget,\n-rather than the default TextInput widget.\n+    Wrapper (using :class:`MultiWidget`) around two widgets: :class:`DateInput`\n+    for the date, and :class:`TimeInput` for the time.\n \n-Customizing widget instances\n-----------------------------\n+    ``SplitDateTimeWidget`` has two optional attributes:\n \n-When Django renders a widget as HTML, it only renders the bare minimum\n-HTML - Django doesn't add a class definition, or any other widget-specific\n-attributes. This means that all 'TextInput' widgets will appear the same\n-on your Web page.\n+    .. attribute:: SplitDateTimeWidget.date_format\n \n-If you want to make one widget look different to another, you need to\n-specify additional attributes for each widget. When you specify a\n-widget, you can provide a list of attributes that will be added to the\n-rendered HTML for the widget.\n+        Similar to :attr:`DateInput.format`\n \n-For example, take the following simple form::\n+    .. attribute:: SplitDateTimeWidget.time_format\n \n-    class CommentForm(forms.Form):\n-        name = forms.CharField()\n-        url = forms.URLField()\n-        comment = forms.CharField()\n+        Similar to :attr:`TimeInput.format`\n \n-This form will include three default TextInput widgets, with default rendering -\n-no CSS class, no extra attributes. This means that the input boxes provided for\n-each widget will be rendered exactly the same::\n \n-    >>> f = CommentForm(auto_id=False)\n-    >>> f.as_table()\n-    <tr><th>Name:</th><td><input type=\"text\" name=\"name\" /></td></tr>\n-    <tr><th>Url:</th><td><input type=\"text\" name=\"url\"/></td></tr>\n-    <tr><th>Comment:</th><td><input type=\"text\" name=\"comment\" /></td></tr>\n+.. class:: SplitHiddenDateTimeWidget\n \n+    Similar to :class:`SplitDateTimeWidget`, but uses :class:`HiddenInput` for\n+    both date and time.\n \n-On a real Web page, you probably don't want every widget to look the same. You\n-might want a larger input element for the comment, and you might want the 'name'\n-widget to have some special CSS class. To do this, you use the ``attrs``\n-argument when creating the widget:\n+.. currentmodule:: django.forms.widgets.extras\n \n-.. attribute:: Widget.attrs\n+.. class:: SelectDateWidget\n \n-For example::\n+    Wrapper around three :class:`~django.forms.Select` widgets: one each for\n+    month, day, and year. Note that this widget lives in a separate file from\n+    the standard widgets.\n \n-    class CommentForm(forms.Form):\n-        name = forms.CharField(\n-                    widget=forms.TextInput(attrs={'class':'special'}))\n-        url = forms.URLField()\n-        comment = forms.CharField(\n-                   widget=forms.TextInput(attrs={'size':'40'}))\n+    Takes one optional argument:\n \n-Django will then include the extra attributes in the rendered output::\n+    .. attribute:: SelectDateWidget.years\n \n-    >>> f = CommentForm(auto_id=False)\n-    >>> f.as_table()\n-    <tr><th>Name:</th><td><input type=\"text\" name=\"name\" class=\"special\"/></td></tr>\n-    <tr><th>Url:</th><td><input type=\"text\" name=\"url\"/></td></tr>\n-    <tr><th>Comment:</th><td><input type=\"text\" name=\"comment\" size=\"40\"/></td></tr>\n+        An optional list/tuple of years to use in the \"year\" select box.\n+        The default is a list containing the current year and the next 9 years."
        }
    ],
    "stats": {
        "total": 355,
        "additions": 257,
        "deletions": 98
    }
}