{
    "author": "kmtracey",
    "message": "Decorated some tests that require tz support.\n\nThis allows the test suite to run without errors on Windows.",
    "sha": "be7f1099c61004bda8c491fc4e7aab9f8b2c8512",
    "files": [
        {
            "sha": "4621f0a60cdb71161c5316de97456d06c6698dee",
            "filename": "tests/modeltests/timezones/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/be7f1099c61004bda8c491fc4e7aab9f8b2c8512/tests%2Fmodeltests%2Ftimezones%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/be7f1099c61004bda8c491fc4e7aab9f8b2c8512/tests%2Fmodeltests%2Ftimezones%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Ftimezones%2Ftests.py?ref=be7f1099c61004bda8c491fc4e7aab9f8b2c8512",
            "patch": "@@ -467,6 +467,7 @@ def test_raw_sql(self):\n                 [event],\n                 transform=lambda d: d)\n \n+    @requires_tz_support\n     def test_filter_date_field_with_aware_datetime(self):\n         # Regression test for #17742\n         day = datetime.date(2011, 9, 1)"
        },
        {
            "sha": "d18d10e60379b95f204587db73f58c33736b751f",
            "filename": "tests/regressiontests/generic_views/dates.py",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/be7f1099c61004bda8c491fc4e7aab9f8b2c8512/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/be7f1099c61004bda8c491fc4e7aab9f8b2c8512/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Fdates.py?ref=be7f1099c61004bda8c491fc4e7aab9f8b2c8512",
            "patch": "@@ -1,14 +1,27 @@\n from __future__ import absolute_import\n \n+import time\n import datetime\n \n from django.core.exceptions import ImproperlyConfigured\n from django.test import TestCase\n from django.test.utils import override_settings\n from django.utils import timezone\n+from django.utils.unittest import skipUnless\n \n from .models import Book, BookSigning\n \n+TZ_SUPPORT = hasattr(time, 'tzset')\n+\n+# On OSes that don't provide tzset (Windows), we can't set the timezone\n+# in which the program runs. As a consequence, we must skip tests that\n+# don't enforce a specific timezone (with timezone.override or equivalent),\n+# or attempt to interpret naive datetimes in the default timezone.\n+\n+requires_tz_support = skipUnless(TZ_SUPPORT,\n+        \"This test relies on the ability to run a program in an arbitrary \"\n+        \"time zone, but your operating system isn't able to do that.\")\n+\n \n class ArchiveIndexViewTests(TestCase):\n     fixtures = ['generic-views-test-data.json']\n@@ -100,6 +113,7 @@ def test_datetime_archive_view(self):\n         res = self.client.get('/dates/booksignings/')\n         self.assertEqual(res.status_code, 200)\n \n+    @requires_tz_support\n     @override_settings(USE_TZ=True, TIME_ZONE='Africa/Nairobi')\n     def test_aware_datetime_archive_view(self):\n         BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0, tzinfo=timezone.utc))\n@@ -502,6 +516,7 @@ def test_datetime_day_view(self):\n         res = self.client.get('/dates/booksignings/2008/apr/2/')\n         self.assertEqual(res.status_code, 200)\n \n+    @requires_tz_support\n     @override_settings(USE_TZ=True, TIME_ZONE='Africa/Nairobi')\n     def test_aware_datetime_day_view(self):\n         bs = BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0, tzinfo=timezone.utc))\n@@ -578,6 +593,7 @@ def test_datetime_date_detail(self):\n         res = self.client.get('/dates/booksignings/2008/apr/2/%d/' % bs.pk)\n         self.assertEqual(res.status_code, 200)\n \n+    @requires_tz_support\n     @override_settings(USE_TZ=True, TIME_ZONE='Africa/Nairobi')\n     def test_aware_datetime_date_detail(self):\n         bs = BookSigning.objects.create(event_date=datetime.datetime(2008, 4, 2, 12, 0, tzinfo=timezone.utc))"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 17,
        "deletions": 0
    }
}