{
    "author": "jezdez",
    "message": "Fixed #16683 -- Skip the IPv6 runserver tests if the platform doesn't support it.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17183 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "154438e315077e5cb95a6f34730b0eaf645d3ef6",
    "files": [
        {
            "sha": "97abe60e7cb32436b34205c46b891d3643607f16",
            "filename": "tests/regressiontests/admin_scripts/tests.py",
            "status": "modified",
            "additions": 11,
            "deletions": 5,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/154438e315077e5cb95a6f34730b0eaf645d3ef6/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/154438e315077e5cb95a6f34730b0eaf645d3ef6/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py?ref=154438e315077e5cb95a6f34730b0eaf645d3ef6",
            "patch": "@@ -7,6 +7,7 @@\n \n import os\n import shutil\n+import socket\n import sys\n import re\n \n@@ -1056,10 +1057,13 @@ def test_app_with_import(self):\n         self.assertNoOutput(err)\n         self.assertOutput(out, '0 errors found')\n \n+\n class ManageRunserver(AdminScriptTestCase):\n     def setUp(self):\n         from django.core.management.commands.runserver import BaseRunserverCommand\n-        def monkey_run(*args, **options): return\n+\n+        def monkey_run(*args, **options):\n+            return\n \n         self.cmd = BaseRunserverCommand()\n         self.cmd.run = monkey_run\n@@ -1080,7 +1084,8 @@ def test_runserver_addrport(self):\n         self.cmd.handle(addrport=\"7000\")\n         self.assertServerSettings('127.0.0.1', '7000')\n \n-        # IPv6\n+    @unittest.skipUnless(socket.has_ipv6, 'markdown is installed')\n+    def test_runner_addrport_ipv6(self):\n         self.cmd.handle(addrport=\"\", use_ipv6=True)\n         self.assertServerSettings('::1', '8000', ipv6=True, raw_ipv6=True)\n \n@@ -1090,18 +1095,19 @@ def test_runserver_addrport(self):\n         self.cmd.handle(addrport=\"[2001:0db8:1234:5678::9]:7000\")\n         self.assertServerSettings('2001:0db8:1234:5678::9', '7000', ipv6=True, raw_ipv6=True)\n \n-        # Hostname\n+    def test_runner_hostname(self):\n         self.cmd.handle(addrport=\"localhost:8000\")\n         self.assertServerSettings('localhost', '8000')\n \n         self.cmd.handle(addrport=\"test.domain.local:7000\")\n         self.assertServerSettings('test.domain.local', '7000')\n \n+    @unittest.skipUnless(socket.has_ipv6, 'markdown is installed')\n+    def test_runner_hostname_ipv6(self):\n         self.cmd.handle(addrport=\"test.domain.local:7000\", use_ipv6=True)\n         self.assertServerSettings('test.domain.local', '7000', ipv6=True)\n \n-        # Potentially ambiguous\n-\n+    def test_runner_ambiguous(self):\n         # Only 4 characters, all of which could be in an ipv6 address\n         self.cmd.handle(addrport=\"beef:7654\")\n         self.assertServerSettings('beef', '7654')"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 11,
        "deletions": 5
    }
}