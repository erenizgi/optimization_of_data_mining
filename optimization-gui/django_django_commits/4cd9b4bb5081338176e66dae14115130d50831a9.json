{
    "author": "ramiro",
    "message": "Fixed #17327 (again) -- Moved createsuperuser tests added in r17665.\n\nIn their new location they won't cause multi-db-related errors when\nusers run contrib.auh tests together with their application tests.\n\nThanks brianriley for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17676 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "4cd9b4bb5081338176e66dae14115130d50831a9",
    "files": [
        {
            "sha": "cc619776a50006e1a0f6ab67d4fa8a72893a89fb",
            "filename": "django/contrib/auth/tests/__init__.py",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/4cd9b4bb5081338176e66dae14115130d50831a9/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/4cd9b4bb5081338176e66dae14115130d50831a9/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2F__init__.py?ref=4cd9b4bb5081338176e66dae14115130d50831a9",
            "patch": "@@ -12,8 +12,6 @@\n from django.contrib.auth.tests.management import (\n     GetDefaultUsernameTestCase,\n     ChangepasswordManagementCommandTestCase,\n-    MultiDBChangepasswordManagementCommandTestCase,\n-    MultiDBCreatesuperuserTestCase,\n )\n from django.contrib.auth.tests.models import (ProfileTestCase, NaturalKeysTestCase,\n     LoadDataWithoutNaturalKeysTestCase, LoadDataWithNaturalKeysTestCase,"
        },
        {
            "sha": "3708cc8bd08063edd084b0a50bab945457b9db85",
            "filename": "django/contrib/auth/tests/management.py",
            "status": "modified",
            "additions": 0,
            "deletions": 51,
            "changes": 51,
            "blob_url": "https://github.com/django/django/blob/4cd9b4bb5081338176e66dae14115130d50831a9/django%2Fcontrib%2Fauth%2Ftests%2Fmanagement.py",
            "raw_url": "https://github.com/django/django/raw/4cd9b4bb5081338176e66dae14115130d50831a9/django%2Fcontrib%2Fauth%2Ftests%2Fmanagement.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fmanagement.py?ref=4cd9b4bb5081338176e66dae14115130d50831a9",
            "patch": "@@ -2,7 +2,6 @@\n \n from django.contrib.auth import models, management\n from django.contrib.auth.management.commands import changepassword\n-from django.core.management import call_command\n from django.test import TestCase\n \n \n@@ -70,53 +69,3 @@ def test_that_max_tries_exits_1(self):\n             stdout=self.stdout,\n             stderr=self.stderr\n         )\n-\n-\n-class MultiDBChangepasswordManagementCommandTestCase(TestCase):\n-    multi_db = True\n-\n-    def setUp(self):\n-        self.user = models.User.objects.db_manager('other').create_user(username='joe', password='qwerty')\n-        self.stdout = StringIO()\n-\n-    def tearDown(self):\n-        self.stdout.close()\n-\n-    def test_that_changepassword_command_with_database_option_uses_given_db(self):\n-        \"\"\"\n-        Executing the changepassword management command with a database option\n-        should operate on the specified DB\n-        \"\"\"\n-        self.assertTrue(self.user.check_password('qwerty'))\n-        command = changepassword.Command()\n-        command._get_pass = lambda *args: 'not qwerty'\n-\n-        command.execute(\"joe\", database='other', stdout=self.stdout)\n-        command_output = self.stdout.getvalue().strip()\n-\n-        self.assertEquals(command_output, \"Changing password for user 'joe'\\nPassword changed successfully for user 'joe'\")\n-        self.assertTrue(models.User.objects.using('other').get(username=\"joe\").check_password(\"not qwerty\"))\n-\n-\n-class MultiDBCreatesuperuserTestCase(TestCase):\n-    multi_db = True\n-\n-    def test_createsuperuser_command_with_database_option(self):\n-        \" createsuperuser command should operate on specified DB\"\n-        new_io = StringIO()\n-\n-        call_command(\"createsuperuser\",\n-            interactive=False,\n-            username=\"joe\",\n-            email=\"joe@somewhere.org\",\n-            database='other',\n-            stdout=new_io\n-        )\n-        command_output = new_io.getvalue().strip()\n-\n-        self.assertEqual(command_output, 'Superuser created successfully.')\n-\n-        u = models.User.objects.using('other').get(username=\"joe\")\n-        self.assertEqual(u.email, 'joe@somewhere.org')\n-\n-        new_io.close()"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/regressiontests/createsuperuser/__init__.py",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/4cd9b4bb5081338176e66dae14115130d50831a9/tests%2Fregressiontests%2Fcreatesuperuser%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/4cd9b4bb5081338176e66dae14115130d50831a9/tests%2Fregressiontests%2Fcreatesuperuser%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcreatesuperuser%2F__init__.py?ref=4cd9b4bb5081338176e66dae14115130d50831a9"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/regressiontests/createsuperuser/models.py",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/4cd9b4bb5081338176e66dae14115130d50831a9/tests%2Fregressiontests%2Fcreatesuperuser%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/4cd9b4bb5081338176e66dae14115130d50831a9/tests%2Fregressiontests%2Fcreatesuperuser%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcreatesuperuser%2Fmodels.py?ref=4cd9b4bb5081338176e66dae14115130d50831a9"
        },
        {
            "sha": "4fdb5923ab75176ecc201e317a19fe49c6667c5c",
            "filename": "tests/regressiontests/createsuperuser/tests.py",
            "status": "added",
            "additions": 57,
            "deletions": 0,
            "changes": 57,
            "blob_url": "https://github.com/django/django/blob/4cd9b4bb5081338176e66dae14115130d50831a9/tests%2Fregressiontests%2Fcreatesuperuser%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/4cd9b4bb5081338176e66dae14115130d50831a9/tests%2Fregressiontests%2Fcreatesuperuser%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcreatesuperuser%2Ftests.py?ref=4cd9b4bb5081338176e66dae14115130d50831a9",
            "patch": "@@ -0,0 +1,57 @@\n+from StringIO import StringIO\n+\n+from django.contrib.auth import models\n+from django.contrib.auth.management.commands import changepassword\n+from django.core.management import call_command\n+from django.test import TestCase\n+\n+\n+class MultiDBChangepasswordManagementCommandTestCase(TestCase):\n+    multi_db = True\n+\n+    def setUp(self):\n+        self.user = models.User.objects.db_manager('other').create_user(username='joe', password='qwerty')\n+        self.stdout = StringIO()\n+\n+    def tearDown(self):\n+        self.stdout.close()\n+\n+    def test_that_changepassword_command_with_database_option_uses_given_db(self):\n+        \"\"\"\n+        Executing the changepassword management command with a database option\n+        should operate on the specified DB\n+        \"\"\"\n+        self.assertTrue(self.user.check_password('qwerty'))\n+        command = changepassword.Command()\n+        command._get_pass = lambda *args: 'not qwerty'\n+\n+        command.execute(\"joe\", database='other', stdout=self.stdout)\n+        command_output = self.stdout.getvalue().strip()\n+\n+        self.assertEquals(command_output, \"Changing password for user 'joe'\\nPassword changed successfully for user 'joe'\")\n+        self.assertTrue(models.User.objects.using('other').get(username=\"joe\").check_password(\"not qwerty\"))\n+\n+\n+class MultiDBCreatesuperuserTestCase(TestCase):\n+    multi_db = True\n+\n+    def test_createsuperuser_command_with_database_option(self):\n+        \" createsuperuser command should operate on specified DB\"\n+        new_io = StringIO()\n+\n+        call_command(\"createsuperuser\",\n+            interactive=False,\n+            username=\"joe\",\n+            email=\"joe@somewhere.org\",\n+            database='other',\n+            stdout=new_io\n+        )\n+        command_output = new_io.getvalue().strip()\n+\n+        self.assertEqual(command_output, 'Superuser created successfully.')\n+\n+        u = models.User.objects.using('other').get(username=\"joe\")\n+        self.assertEqual(u.email, 'joe@somewhere.org')\n+\n+        new_io.close()\n+"
        }
    ],
    "stats": {
        "total": 110,
        "additions": 57,
        "deletions": 53
    }
}