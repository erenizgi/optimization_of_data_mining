{
    "author": "jezdez",
    "message": "Fixed #17865 -- Strip whitespaces from the paths when using the CachedStaticFilesStorage backend.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17696 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "7487c74020f97829e466c7efbdf7bd9e5fa90b1b",
    "files": [
        {
            "sha": "67ce5dcceed7aabf3eb0ec2fa8ca5d8a2b4f3dc7",
            "filename": "django/contrib/staticfiles/storage.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/7487c74020f97829e466c7efbdf7bd9e5fa90b1b/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "raw_url": "https://github.com/django/django/raw/7487c74020f97829e466c7efbdf7bd9e5fa90b1b/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fstorage.py?ref=7487c74020f97829e466c7efbdf7bd9e5fa90b1b",
            "patch": "@@ -67,7 +67,7 @@ def __init__(self, *args, **kwargs):\n \n     def hashed_name(self, name, content=None):\n         parsed_name = urlsplit(unquote(name))\n-        clean_name = parsed_name.path\n+        clean_name = parsed_name.path.strip()\n         if content is None:\n             if not self.exists(clean_name):\n                 raise ValueError(\"The file '%s' could not be found with %r.\" %"
        },
        {
            "sha": "d6567b00dd693f9316753470ee524650b43913dd",
            "filename": "tests/regressiontests/staticfiles_tests/project/documents/cached/denorm.css",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/7487c74020f97829e466c7efbdf7bd9e5fa90b1b/tests%2Fregressiontests%2Fstaticfiles_tests%2Fproject%2Fdocuments%2Fcached%2Fdenorm.css",
            "raw_url": "https://github.com/django/django/raw/7487c74020f97829e466c7efbdf7bd9e5fa90b1b/tests%2Fregressiontests%2Fstaticfiles_tests%2Fproject%2Fdocuments%2Fcached%2Fdenorm.css",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Fproject%2Fdocuments%2Fcached%2Fdenorm.css?ref=7487c74020f97829e466c7efbdf7bd9e5fa90b1b",
            "patch": "@@ -1 +1,4 @@\n @import url(\"..//cached///styles.css\");\n+body {\n+    background: #d3d6d8 url(img/relative.png );\n+}"
        },
        {
            "sha": "38075643a04437c8a9b63497a53437b14c4a31c5",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/7487c74020f97829e466c7efbdf7bd9e5fa90b1b/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/7487c74020f97829e466c7efbdf7bd9e5fa90b1b/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=7487c74020f97829e466c7efbdf7bd9e5fa90b1b",
            "patch": "@@ -427,11 +427,13 @@ def test_template_tag_absolute(self):\n \n     def test_template_tag_denorm(self):\n         relpath = self.cached_file_path(\"cached/denorm.css\")\n-        self.assertEqual(relpath, \"cached/denorm.363de96e9b4b.css\")\n+        self.assertEqual(relpath, \"cached/denorm.c5bd139ad821.css\")\n         with storage.staticfiles_storage.open(relpath) as relfile:\n             content = relfile.read()\n             self.assertNotIn(\"..//cached///styles.css\", content)\n             self.assertIn(\"/static/cached/styles.93b1147e8552.css\", content)\n+            self.assertNotIn(\"url(img/relative.png )\", content)\n+            self.assertIn(\"/static/cached/img/relative.acae32e4532b.png\", content)\n \n     def test_template_tag_relative(self):\n         relpath = self.cached_file_path(\"cached/relative.css\")"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 7,
        "deletions": 2
    }
}