{
    "author": "akaariai",
    "message": "Fixed connection.queries encoding handling on Oracle\n\nIn addition, removed a possibly problematic .filter() call from\nbackends.test_query_encoding test. It is possible the .filter could\ncause collation problems on MySQL, and as it wasn't absolutely needed\nfor the test it seemed better to get rid of the call.\n\nRefs #18461.",
    "sha": "86c20e39eb9ea0bbd25889403d16d857748aff9b",
    "files": [
        {
            "sha": "64e038e1a6b832ca11fb1418087de573ec738061",
            "filename": "django/db/backends/oracle/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/86c20e39eb9ea0bbd25889403d16d857748aff9b/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/86c20e39eb9ea0bbd25889403d16d857748aff9b/django%2Fdb%2Fbackends%2Foracle%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Foracle%2Fbase.py?ref=86c20e39eb9ea0bbd25889403d16d857748aff9b",
            "patch": "@@ -212,7 +212,7 @@ def field_cast_sql(self, db_type):\n     def last_executed_query(self, cursor, sql, params):\n         # http://cx-oracle.sourceforge.net/html/cursor.html#Cursor.statement\n         # The DB API definition does not define this attribute.\n-        return cursor.statement\n+        return cursor.statement.decode(\"utf-8\")\n \n     def last_insert_id(self, cursor, table_name, pk_name):\n         sq_name = self._get_sequence_name(table_name)"
        },
        {
            "sha": "cf4242d62cb18cd9a76e1e3b6389eb1cf538078f",
            "filename": "tests/regressiontests/backends/tests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/86c20e39eb9ea0bbd25889403d16d857748aff9b/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/86c20e39eb9ea0bbd25889403d16d857748aff9b/tests%2Fregressiontests%2Fbackends%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fbackends%2Ftests.py?ref=86c20e39eb9ea0bbd25889403d16d857748aff9b",
            "patch": "@@ -154,7 +154,7 @@ def test_query_encoding(self):\n         \"\"\"\n         Test that last_executed_query() returns an Unicode string\n         \"\"\"\n-        tags = models.Tag.objects.filter(name=\"й\", object_id=12).extra(select={'föö':1})\n+        tags = models.Tag.objects.extra(select={'föö':1})\n         sql, params = tags.query.sql_with_params()\n         cursor = tags.query.get_compiler('default').execute_sql(None)\n         last_sql = cursor.db.ops.last_executed_query(cursor, sql, params)"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}