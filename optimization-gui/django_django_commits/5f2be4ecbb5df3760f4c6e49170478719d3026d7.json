{
    "author": "ramiro",
    "message": "Fixed #17056 -- Tweaked insert SQL clause generation so a corner case doesn't fail with Oracle.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16997 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "5f2be4ecbb5df3760f4c6e49170478719d3026d7",
    "files": [
        {
            "sha": "cebd77fdb662409a05d264a5063e4cbc60851787",
            "filename": "django/db/models/sql/compiler.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/5f2be4ecbb5df3760f4c6e49170478719d3026d7/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "raw_url": "https://github.com/django/django/raw/5f2be4ecbb5df3760f4c6e49170478719d3026d7/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fcompiler.py?ref=5f2be4ecbb5df3760f4c6e49170478719d3026d7",
            "patch": "@@ -824,7 +824,7 @@ def as_sql(self):\n                 for val in values\n             ]\n         if self.return_id and self.connection.features.can_return_id_from_insert:\n-            params = values[0]\n+            params = params[0]\n             col = \"%s.%s\" % (qn(opts.db_table), qn(opts.pk.column))\n             result.append(\"VALUES (%s)\" % \", \".join(placeholders[0]))\n             r_fmt, r_params = self.connection.ops.return_insert_id()"
        },
        {
            "sha": "6a541253269e13c286525f02882ba62ab5b74bad",
            "filename": "tests/regressiontests/queries/tests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/5f2be4ecbb5df3760f4c6e49170478719d3026d7/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/5f2be4ecbb5df3760f4c6e49170478719d3026d7/tests%2Fregressiontests%2Fqueries%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fqueries%2Ftests.py?ref=5f2be4ecbb5df3760f4c6e49170478719d3026d7",
            "patch": "@@ -1868,3 +1868,12 @@ def test_BA_BCA__BAB_BAC_BCA(self):\n         Q1 = Q(objecta__name='one', objectc__objecta__name='two')\n         Q2 = Q(objecta__objectc__name='ein', objectc__objecta__name='three', objecta__objectb__name='trois')\n         self.check_union(ObjectB, Q1, Q2)\n+\n+\n+class DefaultValuesInsertTest(TestCase):\n+    def test_no_extra_params(self):\n+        # Ticket #17056 -- affects Oracle\n+        try:\n+            DumbCategory.objects.create()\n+        except TypeError:\n+            self.fail(\"Creation of an instance of a model with only the PK field shouldn't error out after bulk insert refactoring (#17056)\")"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 10,
        "deletions": 1
    }
}