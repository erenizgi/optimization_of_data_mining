{
    "author": "SmileyChris",
    "message": "Make the email parameter of User.objects.create_user optional.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16472 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f54135fa4dc9fd45d86ea2944191d58e00725779",
    "files": [
        {
            "sha": "4656946a9a426453252d9000dbfc2e3d7a48486c",
            "filename": "django/contrib/auth/models.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/f54135fa4dc9fd45d86ea2944191d58e00725779/django%2Fcontrib%2Fauth%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/f54135fa4dc9fd45d86ea2944191d58e00725779/django%2Fcontrib%2Fauth%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fmodels.py?ref=f54135fa4dc9fd45d86ea2944191d58e00725779",
            "patch": "@@ -86,14 +86,15 @@ def __unicode__(self):\n         return self.name\n \n class UserManager(models.Manager):\n-    def create_user(self, username, email, password=None):\n+    def create_user(self, username, email=None, password=None):\n         \"\"\"\n         Creates and saves a User with the given username, email and password.\n         \"\"\"\n         now = datetime.datetime.now()\n \n         # Normalize the address by lowercasing the domain part of the email\n         # address.\n+        email = email or ''\n         try:\n             email_name, domain_part = email.strip().split('@', 1)\n         except ValueError:"
        },
        {
            "sha": "6d4f6664c410c839557fba4cb8fb4c630e312a2e",
            "filename": "django/contrib/auth/tests/basic.py",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/f54135fa4dc9fd45d86ea2944191d58e00725779/django%2Fcontrib%2Fauth%2Ftests%2Fbasic.py",
            "raw_url": "https://github.com/django/django/raw/f54135fa4dc9fd45d86ea2944191d58e00725779/django%2Fcontrib%2Fauth%2Ftests%2Fbasic.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fbasic.py?ref=f54135fa4dc9fd45d86ea2944191d58e00725779",
            "patch": "@@ -39,6 +39,17 @@ def test_user(self):\n         u2 = User.objects.create_user('testuser2', 'test2@example.com')\n         self.assertFalse(u.has_usable_password())\n \n+    def test_user_no_email(self):\n+        \"Check that users can be created without an email\"\n+        u = User.objects.create_user('testuser1')\n+        u.email = ''\n+\n+        u2 = User.objects.create_user('testuser2', email='')\n+        u2.email = ''\n+\n+        u3 = User.objects.create_user('testuser3', email=None)\n+        u3.email = ''\n+\n     def test_anonymous_user(self):\n         \"Check the properties of the anonymous user\"\n         a = AnonymousUser()"
        },
        {
            "sha": "a50e24c0dfd3e7317cdc0c3a1091ddf168b326e6",
            "filename": "docs/topics/auth.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/f54135fa4dc9fd45d86ea2944191d58e00725779/docs%2Ftopics%2Fauth.txt",
            "raw_url": "https://github.com/django/django/raw/f54135fa4dc9fd45d86ea2944191d58e00725779/docs%2Ftopics%2Fauth.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fauth.txt?ref=f54135fa4dc9fd45d86ea2944191d58e00725779",
            "patch": "@@ -277,7 +277,10 @@ Manager functions\n     The :class:`~django.contrib.auth.models.User` model has a custom manager\n     that has the following helper functions:\n \n-    .. method:: models.UserManager.create_user(username, email, password=None)\n+    .. method:: models.UserManager.create_user(username, email=None, password=None)\n+\n+        .. versionchanged:: 1.4\n+           The ``email`` parameter was made optional.\n \n         Creates, saves and returns a :class:`~django.contrib.auth.models.User`.\n "
        }
    ],
    "stats": {
        "total": 19,
        "additions": 17,
        "deletions": 2
    }
}