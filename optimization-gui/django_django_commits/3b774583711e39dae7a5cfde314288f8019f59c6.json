{
    "author": "jezdez",
    "message": "Fixed #5025 -- Add a \"truncatechars\" template filter. Many thanks to Chris Beaven.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16542 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "3b774583711e39dae7a5cfde314288f8019f59c6",
    "files": [
        {
            "sha": "d0269a95f2ddfff9ca8bbe2496390a494dfbe835",
            "filename": "django/contrib/admin/widgets.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/3b774583711e39dae7a5cfde314288f8019f59c6/django%2Fcontrib%2Fadmin%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/3b774583711e39dae7a5cfde314288f8019f59c6/django%2Fcontrib%2Fadmin%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fwidgets.py?ref=3b774583711e39dae7a5cfde314288f8019f59c6",
            "patch": "@@ -9,7 +9,7 @@\n from django.forms.util import flatatt\n from django.templatetags.static import static\n from django.utils.html import escape\n-from django.utils.text import truncate_words\n+from django.utils.text import Truncator\n from django.utils.translation import ugettext as _\n from django.utils.safestring import mark_safe\n from django.utils.encoding import force_unicode\n@@ -152,7 +152,7 @@ def label_for_value(self, value):\n         key = self.rel.get_related_field().name\n         try:\n             obj = self.rel.to._default_manager.using(self.db).get(**{key: value})\n-            return '&nbsp;<strong>%s</strong>' % escape(truncate_words(obj, 14))\n+            return '&nbsp;<strong>%s</strong>' % escape(Truncator(obj).words(14, truncate='...'))\n         except (ValueError, self.rel.to.DoesNotExist):\n             return ''\n "
        },
        {
            "sha": "d52f901be4ea01923aa44a1d7e240519b5a22031",
            "filename": "django/template/defaultfilters.py",
            "status": "modified",
            "additions": 17,
            "deletions": 3,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/3b774583711e39dae7a5cfde314288f8019f59c6/django%2Ftemplate%2Fdefaultfilters.py",
            "raw_url": "https://github.com/django/django/raw/3b774583711e39dae7a5cfde314288f8019f59c6/django%2Ftemplate%2Fdefaultfilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaultfilters.py?ref=3b774583711e39dae7a5cfde314288f8019f59c6",
            "patch": "@@ -15,7 +15,7 @@\n from django.utils.html import (conditional_escape, escapejs, fix_ampersands,\n     escape, urlize as urlize_impl, linebreaks, strip_tags)\n from django.utils.http import urlquote\n-from django.utils.text import truncate_words, truncate_html_words, wrap, phone2numeric\n+from django.utils.text import Truncator, wrap, phone2numeric\n from django.utils.safestring import mark_safe, SafeData, mark_for_escaping\n from django.utils.timesince import timesince, timeuntil\n from django.utils.translation import ugettext, ungettext\n@@ -244,6 +244,20 @@ def title(value):\n title.is_safe = True\n title = stringfilter(title)\n \n+def truncatechars(value, arg):\n+    \"\"\"\n+    Truncates a string after a certain number of characters.\n+\n+    Argument: Number of characters to truncate after.\n+    \"\"\"\n+    try:\n+        length = int(arg)\n+    except ValueError: # Invalid literal for int().\n+        return value # Fail silently.\n+    return Truncator(value).chars(value, length)\n+truncatechars.is_safe = True\n+truncatechars = stringfilter(truncatechars)\n+\n def truncatewords(value, arg):\n     \"\"\"\n     Truncates a string after a certain number of words.\n@@ -256,7 +270,7 @@ def truncatewords(value, arg):\n         length = int(arg)\n     except ValueError: # Invalid literal for int().\n         return value # Fail silently.\n-    return truncate_words(value, length)\n+    return Truncator(value).words(length, truncate=' ...')\n truncatewords.is_safe = True\n truncatewords = stringfilter(truncatewords)\n \n@@ -272,7 +286,7 @@ def truncatewords_html(value, arg):\n         length = int(arg)\n     except ValueError: # invalid literal for int()\n         return value # Fail silently.\n-    return truncate_html_words(value, length)\n+    return Truncator(value).words(length, html=True, truncate=' ...')\n truncatewords_html.is_safe = True\n truncatewords_html = stringfilter(truncatewords_html)\n "
        },
        {
            "sha": "14555ddd0e147edb13e36d77869f32b92ffee8e1",
            "filename": "django/utils/text.py",
            "status": "modified",
            "additions": 169,
            "deletions": 79,
            "changes": 248,
            "blob_url": "https://github.com/django/django/blob/3b774583711e39dae7a5cfde314288f8019f59c6/django%2Futils%2Ftext.py",
            "raw_url": "https://github.com/django/django/raw/3b774583711e39dae7a5cfde314288f8019f59c6/django%2Futils%2Ftext.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftext.py?ref=3b774583711e39dae7a5cfde314288f8019f59c6",
            "patch": "@@ -1,4 +1,6 @@\n import re\n+import unicodedata\n+import warnings\n from gzip import GzipFile\n from htmlentitydefs import name2codepoint\n \n@@ -8,14 +10,18 @@\n     from StringIO import StringIO\n \n from django.utils.encoding import force_unicode\n-from django.utils.functional import allow_lazy\n-from django.utils.translation import ugettext_lazy, ugettext as _\n-\n+from django.utils.functional import allow_lazy, SimpleLazyObject\n+from django.utils.translation import ugettext_lazy, ugettext as _, pgettext\n \n # Capitalizes the first letter of a string.\n capfirst = lambda x: x and force_unicode(x)[0].upper() + force_unicode(x)[1:]\n capfirst = allow_lazy(capfirst, unicode)\n \n+# Set up regular expressions\n+re_words = re.compile(r'&.*?;|<.*?>|(\\w[\\w-]*)', re.U)\n+re_tag = re.compile(r'<(/)?([^ ]+?)(?: (/)| .*?)?>')\n+\n+\n def wrap(text, width):\n     \"\"\"\n     A word-wrap function that preserves existing line breaks and most spaces in\n@@ -44,88 +50,172 @@ def _generator():\n     return u''.join(_generator())\n wrap = allow_lazy(wrap, unicode)\n \n-def truncate_words(s, num, end_text='...'):\n-    \"\"\"Truncates a string after a certain number of words. Takes an optional\n-    argument of what should be used to notify that the string has been\n-    truncated, defaulting to ellipsis (...)\n \n-    Newlines in the string will be stripped.\n+class Truncator(SimpleLazyObject):\n     \"\"\"\n-    s = force_unicode(s)\n-    length = int(num)\n-    words = s.split()\n-    if len(words) > length:\n-        words = words[:length]\n-        if not words[-1].endswith(end_text):\n-            words.append(end_text)\n-    return u' '.join(words)\n-truncate_words = allow_lazy(truncate_words, unicode)\n+    An object used to truncate text, either by characters or words.\n+    \"\"\"\n+    def __init__(self, text):\n+        super(Truncator, self).__init__(lambda: force_unicode(text))\n \n-def truncate_html_words(s, num, end_text='...'):\n-    \"\"\"Truncates HTML to a certain number of words (not counting tags and\n-    comments). Closes opened tags if they were correctly closed in the given\n-    html. Takes an optional argument of what should be used to notify that the\n-    string has been truncated, defaulting to ellipsis (...).\n+    def add_truncation_text(self, text, truncate=None):\n+        if truncate is None:\n+            truncate = pgettext(\n+                'String to return when truncating text',\n+                u'%(truncated_text)s...')\n+        truncate = force_unicode(truncate)\n+        if '%(truncated_text)s' in truncate:\n+            return truncate % {'truncated_text': text}\n+        # The truncation text didn't contain the %(truncated_text)s string\n+        # replacement argument so just append it to the text.\n+        if text.endswith(truncate):\n+            # But don't append the truncation text if the current text already\n+            # ends in this.\n+            return text\n+        return '%s%s' % (text, truncate)\n \n-    Newlines in the HTML are preserved.\n-    \"\"\"\n-    s = force_unicode(s)\n-    length = int(num)\n-    if length <= 0:\n-        return u''\n-    html4_singlets = ('br', 'col', 'link', 'base', 'img', 'param', 'area', 'hr', 'input')\n-    # Set up regular expressions\n-    re_words = re.compile(r'&.*?;|<.*?>|(\\w[\\w-]*)', re.U)\n-    re_tag = re.compile(r'<(/)?([^ ]+?)(?: (/)| .*?)?>')\n-    # Count non-HTML words and keep note of open tags\n-    pos = 0\n-    end_text_pos = 0\n-    words = 0\n-    open_tags = []\n-    while words <= length:\n-        m = re_words.search(s, pos)\n-        if not m:\n-            # Checked through whole string\n-            break\n-        pos = m.end(0)\n-        if m.group(1):\n-            # It's an actual non-HTML word\n-            words += 1\n-            if words == length:\n-                end_text_pos = pos\n-            continue\n-        # Check for tag\n-        tag = re_tag.match(m.group(0))\n-        if not tag or end_text_pos:\n-            # Don't worry about non tags or tags after our truncate point\n-            continue\n-        closing_tag, tagname, self_closing = tag.groups()\n-        tagname = tagname.lower()  # Element names are always case-insensitive\n-        if self_closing or tagname in html4_singlets:\n-            pass\n-        elif closing_tag:\n-            # Check for match in open tags list\n-            try:\n-                i = open_tags.index(tagname)\n-            except ValueError:\n+    def chars(self, num, truncate=None):\n+        \"\"\"\n+        Returns the text truncated to be no longer than the specified number\n+        of characters.\n+\n+        Takes an optional argument of what should be used to notify that the\n+        string has been truncated, defaulting to a translatable string of an\n+        ellipsis (...).\n+        \"\"\"\n+        length = int(num)\n+        text = unicodedata.normalize('NFC', self._wrapped)\n+\n+        # Calculate the length to truncate to (max length - end_text length)\n+        truncate_len = length\n+        for char in self.add_truncation_text('', truncate):\n+            if not unicodedata.combining(char):\n+                truncate_len -= 1\n+                if truncate_len == 0:\n+                    break\n+\n+        s_len = 0\n+        end_index = None\n+        for i, char in enumerate(text):\n+            if unicodedata.combining(char):\n+                # Don't consider combining characters\n+                # as adding to the string length\n+                continue\n+            s_len += 1\n+            if end_index is None and s_len > truncate_len:\n+                end_index = i\n+            if s_len > length:\n+                # Return the truncated string\n+                return self.add_truncation_text(text[:end_index or 0],\n+                                                truncate)\n+\n+        # Return the original string since no truncation was necessary\n+        return text\n+    chars = allow_lazy(chars)\n+\n+    def words(self, num, truncate=None, html=False):\n+        \"\"\"\n+        Truncates a string after a certain number of words. Takes an optional\n+        argument of what should be used to notify that the string has been\n+        truncated, defaulting to ellipsis (...).\n+        \"\"\"\n+        length = int(num)\n+        if html:\n+            return self._html_words(length, truncate)\n+        return self._text_words(length, truncate)\n+    words = allow_lazy(words)\n+\n+    def _text_words(self, length, truncate):\n+        \"\"\"\n+        Truncates a string after a certain number of words.\n+\n+        Newlines in the string will be stripped.\n+        \"\"\"\n+        words = self._wrapped.split()\n+        if len(words) > length:\n+            words = words[:length]\n+            return self.add_truncation_text(u' '.join(words), truncate)\n+        return u' '.join(words)\n+\n+    def _html_words(self, length, truncate):\n+        \"\"\"\n+        Truncates HTML to a certain number of words (not counting tags and\n+        comments). Closes opened tags if they were correctly closed in the\n+        given HTML.\n+\n+        Newlines in the HTML are preserved.\n+        \"\"\"\n+        if length <= 0:\n+            return u''\n+        html4_singlets = (\n+            'br', 'col', 'link', 'base', 'img',\n+            'param', 'area', 'hr', 'input'\n+        )\n+        # Count non-HTML words and keep note of open tags\n+        pos = 0\n+        end_text_pos = 0\n+        words = 0\n+        open_tags = []\n+        while words <= length:\n+            m = re_words.search(self._wrapped, pos)\n+            if not m:\n+                # Checked through whole string\n+                break\n+            pos = m.end(0)\n+            if m.group(1):\n+                # It's an actual non-HTML word\n+                words += 1\n+                if words == length:\n+                    end_text_pos = pos\n+                continue\n+            # Check for tag\n+            tag = re_tag.match(m.group(0))\n+            if not tag or end_text_pos:\n+                # Don't worry about non tags or tags after our truncate point\n+                continue\n+            closing_tag, tagname, self_closing = tag.groups()\n+            # Element names are always case-insensitive\n+            tagname = tagname.lower()\n+            if self_closing or tagname in html4_singlets:\n                 pass\n+            elif closing_tag:\n+                # Check for match in open tags list\n+                try:\n+                    i = open_tags.index(tagname)\n+                except ValueError:\n+                    pass\n+                else:\n+                    # SGML: An end tag closes, back to the matching start tag,\n+                    # all unclosed intervening start tags with omitted end tags\n+                    open_tags = open_tags[i + 1:]\n             else:\n-                # SGML: An end tag closes, back to the matching start tag, all unclosed intervening start tags with omitted end tags\n-                open_tags = open_tags[i+1:]\n-        else:\n-            # Add it to the start of the open tags list\n-            open_tags.insert(0, tagname)\n-    if words <= length:\n-        # Don't try to close tags if we don't need to truncate\n-        return s\n-    out = s[:end_text_pos]\n-    if end_text:\n-        out += ' ' + end_text\n-    # Close any tags still open\n-    for tag in open_tags:\n-        out += '</%s>' % tag\n-    # Return string\n-    return out\n+                # Add it to the start of the open tags list\n+                open_tags.insert(0, tagname)\n+        if words <= length:\n+            # Don't try to close tags if we don't need to truncate\n+            return self._wrapped\n+        out = self._wrapped[:end_text_pos]\n+        truncate_text = self.add_truncation_text('', truncate)\n+        if truncate_text:\n+            out += truncate_text\n+        # Close any tags still open\n+        for tag in open_tags:\n+            out += '</%s>' % tag\n+        # Return string\n+        return out\n+\n+def truncate_words(s, num, end_text='...'):\n+    warnings.warn('This function has been deprecated. Use the Truncator class '\n+        'in django.utils.text instead.', category=PendingDeprecationWarning)\n+    truncate = end_text and ' %s' % end_text or ''\n+    return Truncator(s).words(num, truncate=truncate)\n+truncate_words = allow_lazy(truncate_words, unicode)\n+\n+def truncate_html_words(s, num, end_text='...'):\n+    warnings.warn('This function has been deprecated. Use the Truncator class '\n+        'in django.utils.text instead.', category=PendingDeprecationWarning)\n+    truncate = end_text and ' %s' % end_text or ''\n+    return Truncator(s).words(num, truncate=truncate, html=True)\n truncate_html_words = allow_lazy(truncate_html_words, unicode)\n \n def get_valid_filename(s):"
        },
        {
            "sha": "3639cc2fd01bea7e8ba078c2ef1ee8addee6e026",
            "filename": "docs/internals/deprecation.txt",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/3b774583711e39dae7a5cfde314288f8019f59c6/docs%2Finternals%2Fdeprecation.txt",
            "raw_url": "https://github.com/django/django/raw/3b774583711e39dae7a5cfde314288f8019f59c6/docs%2Finternals%2Fdeprecation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fdeprecation.txt?ref=3b774583711e39dae7a5cfde314288f8019f59c6",
            "patch": "@@ -220,6 +220,12 @@ their deprecation, as per the :ref:`Django deprecation policy\n           was deprecated since Django 1.4 and will be removed in favor of the\n           generic static files handling.\n \n+        * The builin truncation functions\n+          :func:`django.utils.text.truncate_words` and\n+          :func:`django.utils.text.truncate_html_words`\n+          were deprecated since Django 1.4 and will be removed in favor\n+          of the ``django.utils.text.Truncator`` class.\n+\n     * 2.0\n         * ``django.views.defaults.shortcut()``. This function has been moved\n           to ``django.contrib.contenttypes.views.shortcut()`` as part of the"
        },
        {
            "sha": "5c08c66c21ac34ad9bf80a3707652659a81a56f6",
            "filename": "docs/ref/templates/builtins.txt",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/3b774583711e39dae7a5cfde314288f8019f59c6/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "raw_url": "https://github.com/django/django/raw/3b774583711e39dae7a5cfde314288f8019f59c6/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Ftemplates%2Fbuiltins.txt?ref=3b774583711e39dae7a5cfde314288f8019f59c6",
            "patch": "@@ -2055,6 +2055,24 @@ For example::\n \n If ``value`` is ``\"my first post\"``, the output will be ``\"My First Post\"``.\n \n+.. templatefilter:: truncatechars\n+\n+truncatechars\n+^^^^^^^^^^^^^\n+\n+.. versionadded:: 1.4\n+\n+Truncates a string if it is longer than the specified number of characters.\n+Truncated strings will end with a translatable ellipsis sequence (\"...\").\n+\n+**Argument:** Number of characters to truncate to\n+\n+For example::\n+\n+    {{ value|truncatechars:9 }}\n+\n+If ``value`` is ``\"Joel is a slug\"``, the output will be ``\"Joel i...\"``.\n+\n .. templatefilter:: truncatewords\n \n truncatewords"
        },
        {
            "sha": "43c9ae25c55dbb371677e72bb0ee5a0ebc5e97c1",
            "filename": "docs/releases/1.4.txt",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/3b774583711e39dae7a5cfde314288f8019f59c6/docs%2Freleases%2F1.4.txt",
            "raw_url": "https://github.com/django/django/raw/3b774583711e39dae7a5cfde314288f8019f59c6/docs%2Freleases%2F1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.4.txt?ref=3b774583711e39dae7a5cfde314288f8019f59c6",
            "patch": "@@ -145,6 +145,14 @@ A new helper function,\n ``template.Library`` to ease the creation of template tags that store some\n data in a specified context variable.\n \n+``truncatechars`` template filter\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Added a filter which truncates a string to be no longer than the specified\n+number of characters. Truncated strings end with a translatable ellipsis\n+sequence (\"...\"). See the :tfilter:`truncatechars docs <truncatechars>` for\n+more details.\n+\n CSRF improvements\n ~~~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "d4aa53fba93f3633b033ae4e3048f34285b092f3",
            "filename": "tests/regressiontests/utils/text.py",
            "status": "modified",
            "additions": 60,
            "deletions": 1,
            "changes": 61,
            "blob_url": "https://github.com/django/django/blob/3b774583711e39dae7a5cfde314288f8019f59c6/tests%2Fregressiontests%2Futils%2Ftext.py",
            "raw_url": "https://github.com/django/django/raw/3b774583711e39dae7a5cfde314288f8019f59c6/tests%2Fregressiontests%2Futils%2Ftext.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Ftext.py?ref=3b774583711e39dae7a5cfde314288f8019f59c6",
            "patch": "@@ -1,18 +1,77 @@\n+# -*- coding: utf-8 -*-\n import unittest\n \n from django.utils import text\n \n class TestUtilsText(unittest.TestCase):\n \n+    def test_truncate_chars(self):\n+        truncator = text.Truncator(\n+            u'The quick brown fox jumped over the lazy dog.'\n+        )\n+        self.assertEqual(u'The quick brown fox jumped over the lazy dog.',\n+            truncator.chars(100)),\n+        self.assertEqual(u'The quick brown fox ...',\n+            truncator.chars(23)),\n+        self.assertEqual(u'The quick brown fo.....',\n+            truncator.chars(23, '.....')),\n+\n+        # Ensure that we normalize our unicode data first\n+        nfc = text.Truncator(u'o\\xfco\\xfco\\xfco\\xfc')\n+        nfd = text.Truncator(u'ou\\u0308ou\\u0308ou\\u0308ou\\u0308')\n+        self.assertEqual(u'oüoüoüoü', nfc.chars(8))\n+        self.assertEqual(u'oüoüoüoü', nfd.chars(8))\n+        self.assertEqual(u'oü...', nfc.chars(5))\n+        self.assertEqual(u'oü...', nfd.chars(5))\n+\n+        # Ensure the final length is calculated correctly when there are\n+        # combining characters with no precomposed form, and that combining\n+        # characters are not split up.\n+        truncator = text.Truncator(u'-B\\u030AB\\u030A----8')\n+        self.assertEqual(u'-B\\u030A...', truncator.chars(5))\n+        self.assertEqual(u'-B\\u030AB\\u030A-...', truncator.chars(7))\n+        self.assertEqual(u'-B\\u030AB\\u030A----8', truncator.chars(8))\n+\n+        # Ensure the length of the end text is correctly calculated when it\n+        # contains combining characters with no precomposed form.\n+        truncator = text.Truncator(u'-----')\n+        self.assertEqual(u'---B\\u030A', truncator.chars(4, u'B\\u030A'))\n+        self.assertEqual(u'-----', truncator.chars(5, u'B\\u030A'))\n+\n+        # Make a best effort to shorten to the desired length, but requesting\n+        # a length shorter than the ellipsis shouldn't break\n+        self.assertEqual(u'...', text.Truncator(u'asdf').chars(1))\n+\n     def test_truncate_words(self):\n+        truncator = text.Truncator(u'The quick brown fox jumped over the lazy '\n+            'dog.')\n+        self.assertEqual(u'The quick brown fox jumped over the lazy dog.',\n+            truncator.words(10))\n+        self.assertEqual(u'The quick brown fox...', truncator.words(4))\n+        self.assertEqual(u'The quick brown fox[snip]',\n+            truncator.words(4, '[snip]'))\n+\n+    def test_truncate_html_words(self):\n+        truncator = text.Truncator('<p><strong><em>The quick brown fox jumped '\n+            'over the lazy dog.</em></strong></p>')\n+        self.assertEqual(u'<p><strong><em>The quick brown fox jumped over the '\n+            'lazy dog.</em></strong></p>', truncator.words(10, html=True))\n+        self.assertEqual(u'<p><strong><em>The quick brown fox...</em>'\n+            '</strong></p>', truncator.words(4, html=True))\n+        self.assertEqual(u'<p><strong><em>The quick brown fox....</em>'\n+            '</strong></p>', truncator.words(4, '....', html=True))\n+        self.assertEqual(u'<p><strong><em>The quick brown fox</em></strong>'\n+            '</p>', truncator.words(4, '', html=True))\n+\n+    def test_old_truncate_words(self):\n         self.assertEqual(u'The quick brown fox jumped over the lazy dog.',\n             text.truncate_words(u'The quick brown fox jumped over the lazy dog.', 10))\n         self.assertEqual(u'The quick brown fox ...',\n             text.truncate_words('The quick brown fox jumped over the lazy dog.', 4))\n         self.assertEqual(u'The quick brown fox ....',\n             text.truncate_words('The quick brown fox jumped over the lazy dog.', 4, '....'))\n \n-    def test_truncate_html_words(self):\n+    def test_old_truncate_html_words(self):\n         self.assertEqual(u'<p><strong><em>The quick brown fox jumped over the lazy dog.</em></strong></p>',\n             text.truncate_html_words('<p><strong><em>The quick brown fox jumped over the lazy dog.</em></strong></p>', 10))\n         self.assertEqual(u'<p><strong><em>The quick brown fox ...</em></strong></p>',"
        }
    ],
    "stats": {
        "total": 365,
        "additions": 280,
        "deletions": 85
    }
}