{
    "author": "honzakral",
    "message": "Changed FilePathField tests to use it's own directory with test files.\n\nIn previous version it used /django/forms/ which was fragile - for some\nusers .pyc files were not generated and this tests failed.",
    "sha": "a89034a2d8c0ca84184d260090d87645cfdc0e7d",
    "files": [
        {
            "sha": "4d442de382587ddbcca643400fb81fa9a4b88ba9",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 10,
            "deletions": 19,
            "changes": 29,
            "blob_url": "https://github.com/django/django/blob/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=a89034a2d8c0ca84184d260090d87645cfdc0e7d",
            "patch": "@@ -985,12 +985,11 @@ def test_filepathfield_4(self):\n             self.assertTrue(got[0].endswith(exp[0]))\n \n     def test_filepathfield_folders(self):\n-        path = forms.__file__\n-        path = os.path.dirname(path) + '/'\n+        path = os.path.dirname(__file__) + '/filepath_test_files/'\n         f = FilePathField(path=path, allow_folders=True, allow_files=False)\n         f.choices.sort()\n         expected = [\n-            ('/django/forms/extras', 'extras'),\n+            ('/tests/regressiontests/forms/tests/filepath_test_files/directory', 'directory'),\n         ]\n         for exp, got in zip(expected, fix_os_paths(f.choices)):\n             self.assertEqual(exp[1], got[1])\n@@ -999,23 +998,15 @@ def test_filepathfield_folders(self):\n         f = FilePathField(path=path, allow_folders=True, allow_files=True)\n         f.choices.sort()\n         expected = [\n-            ('/django/forms/__init__.py', '__init__.py'),\n-            ('/django/forms/__init__.pyc', '__init__.pyc'),\n-            ('/django/forms/extras', 'extras'),\n-            ('/django/forms/fields.py', 'fields.py'),\n-            ('/django/forms/fields.pyc', 'fields.pyc'),\n-            ('/django/forms/forms.py', 'forms.py'),\n-            ('/django/forms/forms.pyc', 'forms.pyc'),\n-            ('/django/forms/formsets.py', 'formsets.py'),\n-            ('/django/forms/formsets.pyc', 'formsets.pyc'),\n-            ('/django/forms/models.py', 'models.py'),\n-            ('/django/forms/models.pyc', 'models.pyc'),\n-            ('/django/forms/util.py', 'util.py'),\n-            ('/django/forms/util.pyc', 'util.pyc'),\n-            ('/django/forms/widgets.py', 'widgets.py'),\n-            ('/django/forms/widgets.pyc', 'widgets.pyc')\n+            ('/tests/regressiontests/forms/tests/filepath_test_files/.dot-file', '.dot-file'),\n+            ('/tests/regressiontests/forms/tests/filepath_test_files/directory', 'directory'),\n+            ('/tests/regressiontests/forms/tests/filepath_test_files/fake-image.jpg', 'fake-image.jpg'),\n+            ('/tests/regressiontests/forms/tests/filepath_test_files/real-text-file.txt', 'real-text-file.txt'),\n         ]\n-        for exp, got in zip(expected, fix_os_paths(f.choices)):\n+\n+        actual = fix_os_paths(f.choices)\n+        self.assertEqual(len(expected), len(actual))\n+        for exp, got in zip(expected, actual):\n             self.assertEqual(exp[1], got[1])\n             self.assertTrue(got[0].endswith(exp[0]))\n "
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/regressiontests/forms/tests/filepath_test_files/.dot-file",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2F.dot-file",
            "raw_url": "https://github.com/django/django/raw/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2F.dot-file",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2F.dot-file?ref=a89034a2d8c0ca84184d260090d87645cfdc0e7d"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/regressiontests/forms/tests/filepath_test_files/directory/.keep",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Fdirectory%2F.keep",
            "raw_url": "https://github.com/django/django/raw/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Fdirectory%2F.keep",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Fdirectory%2F.keep?ref=a89034a2d8c0ca84184d260090d87645cfdc0e7d"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/regressiontests/forms/tests/filepath_test_files/fake-image.jpg",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Ffake-image.jpg",
            "raw_url": "https://github.com/django/django/raw/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Ffake-image.jpg",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Ffake-image.jpg?ref=a89034a2d8c0ca84184d260090d87645cfdc0e7d"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/regressiontests/forms/tests/filepath_test_files/real-text-file.txt",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Freal-text-file.txt",
            "raw_url": "https://github.com/django/django/raw/a89034a2d8c0ca84184d260090d87645cfdc0e7d/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Freal-text-file.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffilepath_test_files%2Freal-text-file.txt?ref=a89034a2d8c0ca84184d260090d87645cfdc0e7d"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 10,
        "deletions": 19
    }
}