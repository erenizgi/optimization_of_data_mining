{
    "author": "carljm",
    "message": "Fix Python 3 test failure introduced in a78dd109.",
    "sha": "75ef980e20fc0441aedb0645aa471c9fe606e3b0",
    "files": [
        {
            "sha": "11518193e7cc8d70043a2a35fd26e22d971b6323",
            "filename": "django/contrib/auth/decorators.py",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/75ef980e20fc0441aedb0645aa471c9fe606e3b0/django%2Fcontrib%2Fauth%2Fdecorators.py",
            "raw_url": "https://github.com/django/django/raw/75ef980e20fc0441aedb0645aa471c9fe606e3b0/django%2Fcontrib%2Fauth%2Fdecorators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Fdecorators.py?ref=75ef980e20fc0441aedb0645aa471c9fe606e3b0",
            "patch": "@@ -24,7 +24,9 @@ def _wrapped_view(request, *args, **kwargs):\n             if test_func(request.user):\n                 return view_func(request, *args, **kwargs)\n             path = request.build_absolute_uri()\n-            resolved_login_url = resolve_url(login_url or settings.LOGIN_URL)\n+            # urlparse chokes on lazy objects in Python 3, force to str\n+            resolved_login_url = force_str(\n+                resolve_url(login_url or settings.LOGIN_URL))\n             # If the login url is the same scheme and net location then just\n             # use the path as the \"next\" url.\n             login_scheme, login_netloc = urlparse(resolved_login_url)[:2]\n@@ -33,7 +35,8 @@ def _wrapped_view(request, *args, **kwargs):\n                 (not login_netloc or login_netloc == current_netloc)):\n                 path = request.get_full_path()\n             from django.contrib.auth.views import redirect_to_login\n-            return redirect_to_login(path, login_url, redirect_field_name)\n+            return redirect_to_login(\n+                path, resolved_login_url, redirect_field_name)\n         return _wrapped_view\n     return decorator\n "
        }
    ],
    "stats": {
        "total": 7,
        "additions": 5,
        "deletions": 2
    }
}