{
    "author": "ubernostrum",
    "message": "Fixed #16293: Document a way to return dicts with column names from a DB cursor.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16808 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "23b7758f75a7a676613464cc3f00370979df1e45",
    "files": [
        {
            "sha": "9527860f784796149c5680e61d9c1626d319c09f",
            "filename": "docs/topics/db/sql.txt",
            "status": "modified",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/23b7758f75a7a676613464cc3f00370979df1e45/docs%2Ftopics%2Fdb%2Fsql.txt",
            "raw_url": "https://github.com/django/django/raw/23b7758f75a7a676613464cc3f00370979df1e45/docs%2Ftopics%2Fdb%2Fsql.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Fsql.txt?ref=23b7758f75a7a676613464cc3f00370979df1e45",
            "patch": "@@ -240,6 +240,30 @@ alias::\n     # Your code here...\n     transaction.commit_unless_managed(using='my_db_alias')\n \n+By default, the Python DB API will return results without their field\n+names, which means you end up with a ``list`` of values, rather than a\n+``dict``. At a small performance cost, you can return results as a\n+``dict`` by using something like this::\n+    \n+    def dictfetchall(cursor):\n+        \"Returns all rows from a cursor as a dict\"\n+        desc = cursor.description\n+        return [\n+            dict(zip([col[0] for col in desc], row))\n+            for row in cursor.fetchall()\n+        ]\n+\n+Here is an example of the difference between the two::\n+\n+    >>> cursor.execute(\"SELECT id, parent_id from test LIMIT 2\");\n+    >>> cursor.fetchall()\n+    ((54360982L, None), (54360880L, None))\n+    \n+    >>> cursor.execute(\"SELECT id, parent_id from test LIMIT 2\");\n+    >>> dictfetchall(cursor)\n+    [{'parent_id': None, 'id': 54360982L}, {'parent_id': None, 'id': 54360880L}]\n+\n+\n .. _transactions-and-raw-sql:\n \n Transactions and raw SQL"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 24,
        "deletions": 0
    }
}