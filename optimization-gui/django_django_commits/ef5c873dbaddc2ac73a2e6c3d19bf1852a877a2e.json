{
    "author": "jphalip",
    "message": "Fixed #6163 -- Made \"manage.py help runfcgi\" display proper default values for the runfcgi options. Thanks to ash and Claude Paroz.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17330 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ef5c873dbaddc2ac73a2e6c3d19bf1852a877a2e",
    "files": [
        {
            "sha": "17fd609fa7c8431e4d5f23b191f3804c49e28e93",
            "filename": "django/core/servers/fastcgi.py",
            "status": "modified",
            "additions": 31,
            "deletions": 29,
            "changes": 60,
            "blob_url": "https://github.com/django/django/blob/ef5c873dbaddc2ac73a2e6c3d19bf1852a877a2e/django%2Fcore%2Fservers%2Ffastcgi.py",
            "raw_url": "https://github.com/django/django/raw/ef5c873dbaddc2ac73a2e6c3d19bf1852a877a2e/django%2Fcore%2Fservers%2Ffastcgi.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fservers%2Ffastcgi.py?ref=ef5c873dbaddc2ac73a2e6c3d19bf1852a877a2e",
            "patch": "@@ -19,6 +19,25 @@\n __version__ = \"0.1\"\n __all__ = [\"runfastcgi\"]\n \n+FASTCGI_OPTIONS = {\n+    'protocol': 'fcgi',\n+    'host': None,\n+    'port': None,\n+    'socket': None,\n+    'method': 'fork',\n+    'daemonize': None,\n+    'workdir': '/',\n+    'pidfile': None,\n+    'maxspare': 5,\n+    'minspare': 2,\n+    'maxchildren': 50,\n+    'maxrequests': 0,\n+    'debug': None,\n+    'outlog': None,\n+    'errlog': None,\n+    'umask': None,\n+}\n+\n FASTCGI_HELP = r\"\"\"\n   Run this project as a fastcgi (or some other protocol supported\n   by flup) application. To do this, the flup package from\n@@ -27,19 +46,19 @@\n    runfcgi [options] [fcgi settings]\n \n Optional Fcgi settings: (setting=value)\n-  protocol=PROTOCOL    fcgi, scgi, ajp, ... (default fcgi)\n+  protocol=PROTOCOL    fcgi, scgi, ajp, ... (default %(protocol)s)\n   host=HOSTNAME        hostname to listen on.\n   port=PORTNUM         port to listen on.\n   socket=FILE          UNIX socket to listen on.\n-  method=IMPL          prefork or threaded (default prefork).\n+  method=IMPL          prefork or threaded (default %(method)s).\n   maxrequests=NUMBER   number of requests a child handles before it is\n                        killed and a new child is forked (0 = no limit).\n-  maxspare=NUMBER      max number of spare processes / threads.\n-  minspare=NUMBER      min number of spare processes / threads.\n-  maxchildren=NUMBER   hard limit number of processes / threads.\n+  maxspare=NUMBER      max number of spare processes / threads (default %(maxspare)s).\n+  minspare=NUMBER      min number of spare processes / threads (default %(minspare)s).\n+  maxchildren=NUMBER   hard limit number of processes / threads (default %(maxchildren)s).\n   daemonize=BOOL       whether to detach from terminal.\n   pidfile=FILE         write the spawned process-id to this file.\n-  workdir=DIRECTORY    change to this directory when daemonizing.\n+  workdir=DIRECTORY    change to this directory when daemonizing (default %(workdir)s).\n   debug=BOOL           set to true to enable flup tracebacks.\n   outlog=FILE          write stdout to this file.\n   errlog=FILE          write stderr to this file.\n@@ -60,26 +79,7 @@\n     $ manage.py runfcgi socket=/tmp/fcgi.sock method=prefork \\\n         daemonize=true pidfile=/var/run/django-fcgi.pid\n \n-\"\"\"\n-\n-FASTCGI_OPTIONS = {\n-    'protocol': 'fcgi',\n-    'host': None,\n-    'port': None,\n-    'socket': None,\n-    'method': 'fork',\n-    'daemonize': None,\n-    'workdir': '/',\n-    'pidfile': None,\n-    'maxspare': 5,\n-    'minspare': 2,\n-    'maxchildren': 50,\n-    'maxrequests': 0,\n-    'debug': None,\n-    'outlog': None,\n-    'errlog': None,\n-    'umask': None,\n-}\n+\"\"\" % FASTCGI_OPTIONS\n \n def fastcgi_help(message=None):\n     print FASTCGI_HELP\n@@ -127,14 +127,15 @@ def runfastcgi(argset=[], **kwargs):\n             'maxThreads': int(options[\"maxchildren\"]),\n         }\n     else:\n-        return fastcgi_help(\"ERROR: Implementation must be one of prefork or thread.\")\n+        return fastcgi_help(\"ERROR: Implementation must be one of prefork or \"\n+                            \"thread.\")\n \n     wsgi_opts['debug'] = options['debug'] is not None\n \n     try:\n         module = importlib.import_module('.%s' % flup_module, 'flup')\n         WSGIServer = module.WSGIServer\n-    except:\n+    except Exception:\n         print \"Can't import flup.\" + flup_module\n         return False\n \n@@ -159,7 +160,8 @@ def runfastcgi(argset=[], **kwargs):\n         elif options[\"daemonize\"].lower() in ('false', 'no', 'f'):\n             daemonize = False\n         else:\n-            return fastcgi_help(\"ERROR: Invalid option for daemonize parameter.\")\n+            return fastcgi_help(\"ERROR: Invalid option for daemonize \"\n+                                \"parameter.\")\n \n     daemon_kwargs = {}\n     if options['outlog']:"
        }
    ],
    "stats": {
        "total": 60,
        "additions": 31,
        "deletions": 29
    }
}