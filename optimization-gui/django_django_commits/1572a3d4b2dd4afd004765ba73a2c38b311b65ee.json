{
    "author": "jphalip",
    "message": "Fixed #10931 -- Made `Truncator` handle newlines properly. Thanks to gsong and Claude Paroz.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17329 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "1572a3d4b2dd4afd004765ba73a2c38b311b65ee",
    "files": [
        {
            "sha": "eaafb96d7cca196c147055bfb9140bcf98378f2c",
            "filename": "django/utils/text.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/1572a3d4b2dd4afd004765ba73a2c38b311b65ee/django%2Futils%2Ftext.py",
            "raw_url": "https://github.com/django/django/raw/1572a3d4b2dd4afd004765ba73a2c38b311b65ee/django%2Futils%2Ftext.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftext.py?ref=1572a3d4b2dd4afd004765ba73a2c38b311b65ee",
            "patch": "@@ -18,8 +18,8 @@\n capfirst = allow_lazy(capfirst, unicode)\n \n # Set up regular expressions\n-re_words = re.compile(r'&.*?;|<.*?>|(\\w[\\w-]*)', re.U)\n-re_tag = re.compile(r'<(/)?([^ ]+?)(?: (/)| .*?)?>')\n+re_words = re.compile(r'&.*?;|<.*?>|(\\w[\\w-]*)', re.U|re.S)\n+re_tag = re.compile(r'<(/)?([^ ]+?)(?: (/)| .*?)?>', re.S)\n \n \n def wrap(text, width):"
        },
        {
            "sha": "aae75339bce261cc0bfca33b7ae07a2d1b733fc5",
            "filename": "tests/regressiontests/utils/text.py",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/1572a3d4b2dd4afd004765ba73a2c38b311b65ee/tests%2Fregressiontests%2Futils%2Ftext.py",
            "raw_url": "https://github.com/django/django/raw/1572a3d4b2dd4afd004765ba73a2c38b311b65ee/tests%2Fregressiontests%2Futils%2Ftext.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Ftext.py?ref=1572a3d4b2dd4afd004765ba73a2c38b311b65ee",
            "patch": "@@ -62,6 +62,11 @@ def test_truncate_html_words(self):\n             '</strong></p>', truncator.words(4, '....', html=True))\n         self.assertEqual(u'<p><strong><em>The quick brown fox</em></strong>'\n             '</p>', truncator.words(4, '', html=True))\n+        # Test with new line inside tag\n+        truncator = text.Truncator('<p>The quick <a href=\"xyz.html\"\\n'\n+            'id=\"mylink\">brown fox</a> jumped over the lazy dog.</p>')\n+        self.assertEqual(u'<p>The quick <a href=\"xyz.html\"\\n'\n+            'id=\"mylink\">brown...</a></p>', truncator.words(3, '...', html=True))\n \n     def test_old_truncate_words(self):\n         self.assertEqual(u'The quick brown fox jumped over the lazy dog.',"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 7,
        "deletions": 2
    }
}