{
    "author": "aaugustin",
    "message": "Added basic tests for databrowse. Refs #5968.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17406 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "7ad7a8d2d32704872430a03885e1b763b2b667ad",
    "files": [
        {
            "sha": "2e283e09953847d13b457e584e5a0adb86e2ac39",
            "filename": "django/contrib/databrowse/models.py",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/7ad7a8d2d32704872430a03885e1b763b2b667ad/django%2Fcontrib%2Fdatabrowse%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/7ad7a8d2d32704872430a03885e1b763b2b667ad/django%2Fcontrib%2Fdatabrowse%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fdatabrowse%2Fmodels.py?ref=7ad7a8d2d32704872430a03885e1b763b2b667ad",
            "patch": "@@ -0,0 +1 @@\n+# Empty models.py to allow for specifying databrowse as a test label."
        },
        {
            "sha": "149383cf721634f1e461ae7b18a7350aebe51cf3",
            "filename": "django/contrib/databrowse/tests.py",
            "status": "added",
            "additions": 58,
            "deletions": 0,
            "changes": 58,
            "blob_url": "https://github.com/django/django/blob/7ad7a8d2d32704872430a03885e1b763b2b667ad/django%2Fcontrib%2Fdatabrowse%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/7ad7a8d2d32704872430a03885e1b763b2b667ad/django%2Fcontrib%2Fdatabrowse%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fdatabrowse%2Ftests.py?ref=7ad7a8d2d32704872430a03885e1b763b2b667ad",
            "patch": "@@ -0,0 +1,58 @@\n+from django.contrib import databrowse\n+from django.db import models\n+from django.test import TestCase\n+\n+\n+class SomeModel(models.Model):\n+    some_field = models.CharField(max_length=50)\n+\n+    def __unicode__(self):\n+        return self.some_field\n+\n+\n+class SomeOtherModel(models.Model):\n+    some_other_field = models.CharField(max_length=50)\n+\n+    def __unicode__(self):\n+        return self.some_other_field\n+\n+\n+class YetAnotherModel(models.Model):\n+    yet_another_field = models.CharField(max_length=50)\n+\n+    def __unicode__(self):\n+        return self.yet_another_field\n+\n+\n+class DatabrowseTests(TestCase):\n+\n+    def test_databrowse_register_unregister(self):\n+        databrowse.site.register(SomeModel)\n+        self.assertTrue(SomeModel in databrowse.site.registry)\n+        databrowse.site.register(SomeOtherModel, YetAnotherModel)\n+        self.assertTrue(SomeOtherModel in databrowse.site.registry)\n+        self.assertTrue(YetAnotherModel in databrowse.site.registry)\n+\n+        self.assertRaisesMessage(\n+            databrowse.sites.AlreadyRegistered,\n+            'The model SomeModel is already registered',\n+            databrowse.site.register, SomeModel, SomeOtherModel\n+        )\n+\n+        databrowse.site.unregister(SomeOtherModel)\n+        self.assertFalse(SomeOtherModel in databrowse.site.registry)\n+        databrowse.site.unregister(SomeModel, YetAnotherModel)\n+        self.assertFalse(SomeModel in databrowse.site.registry)\n+        self.assertFalse(YetAnotherModel in databrowse.site.registry)\n+\n+        self.assertRaisesMessage(\n+            databrowse.sites.NotRegistered,\n+            'The model SomeModel is not registered',\n+            databrowse.site.unregister, SomeModel, SomeOtherModel\n+        )\n+\n+        self.assertRaisesMessage(\n+            databrowse.sites.AlreadyRegistered,\n+            'The model SomeModel is already registered',\n+            databrowse.site.register, SomeModel, SomeModel\n+        )"
        }
    ],
    "stats": {
        "total": 59,
        "additions": 59,
        "deletions": 0
    }
}