{
    "author": "jezdez",
    "message": "Fixed #14184 -- Enabled running the validators in MultiValueFields. Thanks, paulcollins.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17430 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "9c045d00dc37f4eb082e022ac12b659345413d7e",
    "files": [
        {
            "sha": "96ecabfdc157df3966434501a738a0ec77197fe2",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/9c045d00dc37f4eb082e022ac12b659345413d7e/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/9c045d00dc37f4eb082e022ac12b659345413d7e/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=9c045d00dc37f4eb082e022ac12b659345413d7e",
            "patch": "@@ -908,6 +908,7 @@ def clean(self, value):\n \n         out = self.compress(clean_data)\n         self.validate(out)\n+        self.run_validators(out)\n         return out\n \n     def compress(self, data_list):"
        },
        {
            "sha": "3f529f23db36ede2a4989760f760d8928517296a",
            "filename": "tests/regressiontests/forms/tests/forms.py",
            "status": "modified",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/django/django/blob/9c045d00dc37f4eb082e022ac12b659345413d7e/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/9c045d00dc37f4eb082e022ac12b659345413d7e/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fforms.py?ref=9c045d00dc37f4eb082e022ac12b659345413d7e",
            "patch": "@@ -1778,3 +1778,32 @@ class EventForm(Form):\n \n         form = EventForm()\n         self.assertHTMLEqual(form.as_ul(), u'<input type=\"hidden\" name=\"happened_at_0\" id=\"id_happened_at_0\" /><input type=\"hidden\" name=\"happened_at_1\" id=\"id_happened_at_1\" />')\n+\n+    def test_multivalue_field_validation(self):\n+        def bad_names(value):\n+            if value == 'bad value':\n+                raise ValidationError('bad value not allowed')\n+\n+        class NameField(MultiValueField):\n+            def __init__(self, fields=(), *args, **kwargs):\n+                fields = (CharField(label='First name', max_length=10),\n+                          CharField(label='Last name', max_length=10))\n+                super(NameField, self).__init__(fields=fields, *args, **kwargs)\n+\n+            def compress(self, data_list):\n+                return ' '.join(data_list)\n+\n+        class NameForm(Form):\n+            name = NameField(validators=[bad_names])\n+\n+        form = NameForm(data={'name' : ['bad', 'value']})\n+        form.full_clean()\n+        self.assertFalse(form.is_valid())\n+        self.assertEqual(form.errors, {'name': [u'bad value not allowed']})\n+        form = NameForm(data={'name' : ['should be overly', 'long for the field names']})\n+        self.assertFalse(form.is_valid())\n+        self.assertEqual(form.errors, {'name': [u'Ensure this value has at most 10 characters (it has 16).',\n+                                                u'Ensure this value has at most 10 characters (it has 24).']})\n+        form = NameForm(data={'name' : ['fname', 'lname']})\n+        self.assertTrue(form.is_valid())\n+        self.assertEqual(form.cleaned_data, {'name' : 'fname lname'})"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 30,
        "deletions": 0
    }
}