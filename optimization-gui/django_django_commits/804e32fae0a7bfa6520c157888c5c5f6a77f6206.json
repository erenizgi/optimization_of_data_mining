{
    "author": "jphalip",
    "message": "Fixed #16949 -- Fixed a small typo in the GIS tutorial and also made some minor PEP8 fixes and added some code-block directives while I was at it. Thanks to jgomo3 for the report.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16911 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "804e32fae0a7bfa6520c157888c5c5f6a77f6206",
    "files": [
        {
            "sha": "a0f48fe04b4f0eb0d9b44d6c12b2b8c882bd1f67",
            "filename": "docs/ref/contrib/gis/tutorial.txt",
            "status": "modified",
            "additions": 82,
            "deletions": 46,
            "changes": 128,
            "blob_url": "https://github.com/django/django/blob/804e32fae0a7bfa6520c157888c5c5f6a77f6206/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt",
            "raw_url": "https://github.com/django/django/raw/804e32fae0a7bfa6520c157888c5c5f6a77f6206/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fgis%2Ftutorial.txt?ref=804e32fae0a7bfa6520c157888c5c5f6a77f6206",
            "patch": "@@ -7,7 +7,8 @@ Introduction\n \n GeoDjango is an add-on for Django that turns it into a world-class geographic\n Web framework.  GeoDjango strives to make it as simple as possible to create\n-geographic Web applications, like location-based services.  Some features include:\n+geographic Web applications, like location-based services.  Some features\n+include:\n \n * Django model fields for `OGC`_ geometries.\n * Extensions to Django's ORM for the querying and manipulation of spatial data.\n@@ -16,8 +17,8 @@ geographic Web applications, like location-based services.  Some features includ\n * Editing of geometry fields inside the admin.\n \n This tutorial assumes a familiarity with Django; thus, if you're brand new to\n-Django please read through the :doc:`regular tutorial </intro/tutorial01>` to introduce\n-yourself with basic Django concepts.\n+Django please read through the :doc:`regular tutorial </intro/tutorial01>` to\n+introduce yourself with basic Django concepts.\n \n .. note::\n \n@@ -52,15 +53,20 @@ Create a Spatial Database\n \n First, a spatial database needs to be created for our project.  If using\n PostgreSQL and PostGIS, then the following commands will\n-create the database from a :ref:`spatial database template <spatialdb_template>`::\n+create the database from a :ref:`spatial database template\n+<spatialdb_template>`:\n+\n+.. code-block:: bash\n \n     $ createdb -T template_postgis geodjango\n \n .. note::\n \n     This command must be issued by a database user that has permissions to\n     create a database.  Here is an example set of commands to create such\n-    a user::\n+    a user:\n+\n+    .. code-block:: bash\n \n         $ sudo su - postgres\n         $ createuser --createdb geo\n@@ -76,20 +82,25 @@ to create a :ref:`SpatiaLite database <create_spatialite_db>`.\n Create GeoDjango Project\n ------------------------\n \n-Use the ``django-admin.py`` script like normal to create a ``geodjango`` project::\n+Use the ``django-admin.py`` script like normal to create a ``geodjango``\n+project:\n+\n+.. code-block:: bash\n \n     $ django-admin.py startproject geodjango\n \n With the project initialized, now create a ``world`` Django application within\n-the ``geodjango`` project::\n+the ``geodjango`` project:\n+\n+.. code-block:: bash\n \n     $ cd geodjango\n     $ python manage.py startapp world\n \n Configure ``settings.py``\n -------------------------\n \n-The ``geodjango`` project settings are stored in the ``settings.py`` file.  Edit\n+The ``geodjango`` project settings are stored in the ``settings.py`` file. Edit\n the database connection settings appropriately::\n \n     DATABASES = {\n@@ -126,9 +137,11 @@ Geographic Data\n World Borders\n -------------\n \n-The world borders data is available in this `zip file`__.  Create a data directory\n-in the ``world`` application, download the world borders data, and unzip.\n-On GNU/Linux platforms the following commands should do it::\n+The world borders data is available in this `zip file`__.  Create a data\n+directory in the ``world`` application, download the world borders data, and\n+unzip. On GNU/Linux platforms the following commands should do it:\n+\n+.. code-block:: bash\n \n     $ mkdir world/data\n     $ cd world/data\n@@ -138,7 +151,8 @@ On GNU/Linux platforms the following commands should do it::\n \n The world borders ZIP file contains a set of data files collectively known as\n an `ESRI Shapefile`__, one of the most popular geospatial data formats.  When\n-unzipped the world borders data set includes files with the following extensions:\n+unzipped the world borders data set includes files with the following\n+extensions:\n \n * ``.shp``: Holds the vector data for the world borders geometries.\n * ``.shx``: Spatial index file for geometries stored in the ``.shp``.\n@@ -154,7 +168,9 @@ Use ``ogrinfo`` to examine spatial data\n ---------------------------------------\n \n The GDAL ``ogrinfo`` utility is excellent for examining metadata about\n-shapefiles (or other vector data sources)::\n+shapefiles (or other vector data sources):\n+\n+.. code-block:: bash\n \n     $ ogrinfo world/data/TM_WORLD_BORDERS-0.3.shp\n     INFO: Open of `world/data/TM_WORLD_BORDERS-0.3.shp'\n@@ -163,7 +179,9 @@ shapefiles (or other vector data sources)::\n \n Here ``ogrinfo`` is telling us that the shapefile has one layer, and that\n layer contains polygon data.  To find out more we'll specify the layer name\n-and use the ``-so`` option to get only important summary information::\n+and use the ``-so`` option to get only important summary information:\n+\n+.. code-block:: bash\n \n     $ ogrinfo -so world/data/TM_WORLD_BORDERS-0.3.shp TM_WORLD_BORDERS-0.3\n     INFO: Open of `world/data/TM_WORLD_BORDERS-0.3.shp'\n@@ -197,8 +215,8 @@ as well as detailed information for each attribute field.  For example,\n ``FIPS: String (2.0)`` indicates that there's a ``FIPS`` character field\n with a maximum length of 2; similarly, ``LON: Real (8.3)`` is a floating-point\n field that holds a maximum of 8 digits up to three decimal places.  Although\n-this information may be found right on the `world borders`_ Web site, this shows\n-you how to determine this information yourself when such metadata is not\n+this information may be found right on the `world borders`_ Web site, this\n+shows you how to determine this information yourself when such metadata is not\n provided.\n \n Geographic Models\n@@ -243,24 +261,27 @@ Two important things to note:\n    :class:`~django.contrib.gis.db.models.GeoManager`; this is *required*\n    to perform spatial queries.\n \n-When declaring a geometry field on your model the default spatial reference system\n-is WGS84 (meaning the `SRID`__ is 4326) -- in other words, the field coordinates are in\n-longitude/latitude pairs in units of degrees.  If you want the coordinate system to be\n-different, then SRID of the geometry field may be customized by setting the ``srid``\n-with an integer corresponding to the coordinate system of your choice.\n+When declaring a geometry field on your model the default spatial reference\n+system is WGS84 (meaning the `SRID`__ is 4326) -- in other words, the field\n+coordinates are in longitude/latitude pairs in units of degrees.  If you want\n+the coordinate system to be different, then SRID of the geometry field may be\n+customized by setting the ``srid`` with an integer corresponding to the\n+coordinate system of your choice.\n \n __ http://en.wikipedia.org/wiki/SRID\n \n Run ``syncdb``\n --------------\n \n-After you've defined your model, it needs to be synced with the spatial database.\n-First, let's look at the SQL that will generate the table for the ``WorldBorder``\n-model::\n+After you've defined your model, it needs to be synced with the spatial\n+database. First, let's look at the SQL that will generate the table for the\n+``WorldBorder`` model::\n \n     $ python manage.py sqlall world\n \n-This management command should produce the following output::\n+This management command should produce the following output:\n+\n+.. code-block:: sql\n \n     BEGIN;\n     CREATE TABLE \"world_worldborders\" (\n@@ -290,18 +311,19 @@ If satisfied, you may then create this table in the database by running the\n     Creating table world_worldborders\n     Installing custom SQL for world.WorldBorder model\n \n-The ``syncdb`` command may also prompt you to create an admin user; go ahead and\n-do so (not required now, may be done at any point in the future using the\n+The ``syncdb`` command may also prompt you to create an admin user; go ahead\n+and do so (not required now, may be done at any point in the future using the\n ``createsuperuser`` management command).\n \n Importing Spatial Data\n ======================\n \n This section will show you how to take the data from the world borders\n-shapefile and import it into GeoDjango models using the :ref:`ref-layermapping`.\n-There are many different different ways to import data in to a\n-spatial database -- besides the tools included within GeoDjango, you\n-may also use the following to populate your spatial database:\n+shapefile and import it into GeoDjango models using the\n+:ref:`ref-layermapping`.\n+There are many different ways to import data in to a spatial database --\n+besides the tools included within GeoDjango, you may also use the following to\n+populate your spatial database:\n \n * `ogr2ogr`_: Command-line utility, included with GDAL, that\n   supports loading a multitude of vector data formats into\n@@ -322,7 +344,9 @@ shapefile.  Included within GeoDjango is an interface to GDAL's powerful OGR\n library -- in other words, you'll be able explore all the vector data sources\n that OGR supports via a Pythonic API.\n \n-First, invoke the Django shell::\n+First, invoke the Django shell:\n+\n+.. code-block:: bash\n \n     $ python manage.py shell\n \n@@ -385,7 +409,8 @@ system associated with it -- if it does, the ``srs`` attribute will return a\n     '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs '\n \n Here we've noticed that the shapefile is in the popular WGS84 spatial reference\n-system -- in other words, the data uses units of degrees longitude and latitude.\n+system -- in other words, the data uses units of degrees longitude and\n+latitude.\n \n In addition, shapefiles also support attribute fields that may contain\n additional data.  Here are the fields on the World Borders layer:\n@@ -484,7 +509,9 @@ A few notes about what's going on:\n   the shapefile. This ensures that string values are read and saved correctly\n   from their original encoding system.\n \n-Afterwards, invoke the Django shell from the ``geodjango`` project directory::\n+Afterwards, invoke the Django shell from the ``geodjango`` project directory:\n+\n+.. code-block:: bash\n \n    $ python manage.py shell\n \n@@ -502,10 +529,12 @@ Try ``ogrinspect``\n Now that you've seen how to define geographic models and import data with the\n :ref:`ref-layermapping`, it's possible to further automate this process with\n use of the :djadmin:`ogrinspect` management command.  The :djadmin:`ogrinspect`\n-command  introspects a GDAL-supported vector data source (e.g., a shapefile) and\n-generates a model definition and ``LayerMapping`` dictionary automatically.\n+command  introspects a GDAL-supported vector data source (e.g., a shapefile)\n+and generates a model definition and ``LayerMapping`` dictionary automatically.\n+\n+The general usage of the command goes as follows:\n \n-The general usage of the command goes as follows::\n+.. code-block:: bash\n \n     $ python manage.py ogrinspect [options] <data_source> <model_name> [options]\n \n@@ -514,15 +543,18 @@ Where ``data_source`` is the path to the GDAL-supported data source and\n be used to further define how the model is generated.\n \n For example, the following command nearly reproduces the ``WorldBorder`` model\n-and mapping dictionary created above, automatically::\n+and mapping dictionary created above, automatically:\n+\n+.. code-block:: bash\n \n     $ python manage.py ogrinspect world/data/TM_WORLD_BORDERS-0.3.shp WorldBorder --srid=4326 --mapping --multi\n \n A few notes about the command-line options given above:\n \n * The ``--srid=4326`` option sets the SRID for the geographic field.\n * The ``--mapping`` option tells ``ogrinspect`` to also generate a\n-  mapping dictionary for use with :class:`~django.contrib.gis.utils.LayerMapping`.\n+  mapping dictionary for use with\n+  :class:`~django.contrib.gis.utils.LayerMapping`.\n * The ``--multi`` option is specified so that the geographic field is a\n   :class:`~django.contrib.gis.db.models.MultiPolygonField` instead of just a\n   :class:`~django.contrib.gis.db.models.PolygonField`.\n@@ -571,7 +603,9 @@ Spatial Lookups\n ---------------\n GeoDjango extends the Django ORM and allows the use of spatial lookups.\n Let's do an example where we find the ``WorldBorder`` model that contains\n-a point.  First, fire up the management shell::\n+a point.  First, fire up the management shell:\n+\n+.. code-block:: bash\n \n     $ python manage.py shell\n \n@@ -592,8 +626,8 @@ a ``contains`` lookup using the ``pnt_wkt`` as the parameter::\n \n Here we retrieved a ``GeoQuerySet`` that has only one model: the one\n for the United States (which is what we would expect).  Similarly,\n-a :ref:`GEOS geometry object <ref-geos>` may also be used -- here the ``intersects``\n-spatial lookup is combined with the ``get`` method to retrieve\n+a :ref:`GEOS geometry object <ref-geos>` may also be used -- here the\n+``intersects`` spatial lookup is combined with the ``get`` method to retrieve\n only the ``WorldBorder`` instance for San Marino instead of a queryset::\n \n     >>> from django.contrib.gis.geos import Point\n@@ -641,9 +675,9 @@ __ http://spatialreference.org/ref/epsg/32140/\n Lazy Geometries\n ---------------\n Geometries come to GeoDjango in a standardized textual representation.  Upon\n-access of the geometry field, GeoDjango creates a `GEOS geometry object <ref-geos>`,\n-exposing powerful functionality, such as serialization properties for\n-popular geospatial formats::\n+access of the geometry field, GeoDjango creates a `GEOS geometry object\n+<ref-geos>`, exposing powerful functionality, such as serialization properties\n+for popular geospatial formats::\n \n     >>> sm = WorldBorder.objects.get(name='San Marino')\n     >>> sm.mpoly\n@@ -706,7 +740,9 @@ as follows::\n         (r'^admin/', include(admin.site.urls)),\n     )\n \n-Start up the Django development server::\n+Start up the Django development server:\n+\n+.. code-block:: bash\n \n     $ python manage.py runserver\n "
        }
    ],
    "stats": {
        "total": 128,
        "additions": 82,
        "deletions": 46
    }
}