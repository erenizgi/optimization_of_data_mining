{
    "author": "aaugustin",
    "message": "Fixed #15124 -- Changed the default for BooleanField.\n\nThanks to the many contributors who updated and improved the patch over\nthe life of this ticket.",
    "sha": "e16c48e001ccd06830bb0bfd1d20e22ec30fce59",
    "files": [
        {
            "sha": "42bb3adf23b7a2cf36df6c63128413bc646d0cfe",
            "filename": "django/contrib/flatpages/models.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/django%2Fcontrib%2Fflatpages%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/django%2Fcontrib%2Fflatpages%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fflatpages%2Fmodels.py?ref=e16c48e001ccd06830bb0bfd1d20e22ec30fce59",
            "patch": "@@ -11,10 +11,12 @@ class FlatPage(models.Model):\n     url = models.CharField(_('URL'), max_length=100, db_index=True)\n     title = models.CharField(_('title'), max_length=200)\n     content = models.TextField(_('content'), blank=True)\n-    enable_comments = models.BooleanField(_('enable comments'))\n+    enable_comments = models.BooleanField(_('enable comments'), default=False)\n     template_name = models.CharField(_('template name'), max_length=70, blank=True,\n         help_text=_(\"Example: 'flatpages/contact_page.html'. If this isn't provided, the system will use 'flatpages/default.html'.\"))\n-    registration_required = models.BooleanField(_('registration required'), help_text=_(\"If this is checked, only logged-in users will be able to view the page.\"))\n+    registration_required = models.BooleanField(_('registration required'),\n+        help_text=_(\"If this is checked, only logged-in users will be able to view the page.\"),\n+        default=False)\n     sites = models.ManyToManyField(Site)\n \n     class Meta:"
        },
        {
            "sha": "142b33f6a7d0537cbd9efac62d974d588999871f",
            "filename": "django/db/models/fields/__init__.py",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2F__init__.py?ref=e16c48e001ccd06830bb0bfd1d20e22ec30fce59",
            "patch": "@@ -620,8 +620,6 @@ class BooleanField(Field):\n \n     def __init__(self, *args, **kwargs):\n         kwargs['blank'] = True\n-        if 'default' not in kwargs and not kwargs.get('null'):\n-            kwargs['default'] = False\n         Field.__init__(self, *args, **kwargs)\n \n     def get_internal_type(self):"
        },
        {
            "sha": "f22436e5fe0232b9d127329a7e0f9c9f810832dd",
            "filename": "docs/ref/models/fields.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/docs%2Fref%2Fmodels%2Ffields.txt",
            "raw_url": "https://github.com/django/django/raw/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/docs%2Fref%2Fmodels%2Ffields.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fmodels%2Ffields.txt?ref=e16c48e001ccd06830bb0bfd1d20e22ec30fce59",
            "patch": "@@ -377,6 +377,10 @@ The default form widget for this field is a\n If you need to accept :attr:`~Field.null` values then use\n :class:`NullBooleanField` instead.\n \n+.. versionchanged:: 1.6\n+    The default value of ``BooleanField`` was changed from ``False`` to\n+    ``None`` when :attr:`Field.default` isn't defined.\n+\n ``CharField``\n -------------\n "
        },
        {
            "sha": "f3d12cac3816e4f6d2f748fcf73eef98a8fcfa36",
            "filename": "docs/releases/1.6.txt",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/docs%2Freleases%2F1.6.txt",
            "raw_url": "https://github.com/django/django/raw/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/docs%2Freleases%2F1.6.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.6.txt?ref=e16c48e001ccd06830bb0bfd1d20e22ec30fce59",
            "patch": "@@ -292,6 +292,20 @@ should either restore Django's defaults at the end of each request, force an\n appropriate value at the beginning of each request, or disable persistent\n connections.\n \n+``BooleanField`` no longer defaults to ``False``\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+When a :class:`~django.db.models.BooleanField` doesn't have an explicit\n+:attr:`~django.db.models.Field.default`, the implicit default value is\n+``None``. In previous version of Django, it was ``False``, but that didn't\n+represent accurantely the lack of a value.\n+\n+Code that relies on the default value being ``False`` may raise an exception\n+when saving new model instances to the database, because ``None`` isn't an\n+acceptable value for a :class:`~django.db.models.BooleanField`. You should\n+either specify ``default=False`` explicitly on the field definition, or ensure\n+the field is set to ``True`` or ``False`` before saving the object.\n+\n Translations and comments in templates\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n "
        },
        {
            "sha": "d3b1e4b868d0dd1d77cd8a714f244567ff572d70",
            "filename": "tests/model_fields/tests.py",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/tests%2Fmodel_fields%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/tests%2Fmodel_fields%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodel_fields%2Ftests.py?ref=e16c48e001ccd06830bb0bfd1d20e22ec30fce59",
            "patch": "@@ -6,7 +6,7 @@\n from django import test\n from django import forms\n from django.core.exceptions import ValidationError\n-from django.db import models\n+from django.db import models, IntegrityError\n from django.db.models.fields.files import FieldFile\n from django.utils import six\n from django.utils import unittest\n@@ -265,6 +265,18 @@ def test_select_related(self):\n         self.assertEqual(mc.bf.bfield, False)\n         self.assertEqual(mc.nbf.nbfield, False)\n \n+    def test_null_default(self):\n+        \"\"\"\n+        Check that a BooleanField defaults to None -- which isn't\n+        a valid value (#15124).\n+        \"\"\"\n+        b = BooleanModel()\n+        self.assertIsNone(b.bfield)\n+        with self.assertRaises(IntegrityError):\n+            b.save()\n+        nb = NullBooleanModel()\n+        self.assertIsNone(nb.nbfield)\n+        nb.save()           # no error\n \n class ChoicesTests(test.TestCase):\n     def test_choices_and_field_display(self):"
        },
        {
            "sha": "c2c93374852c9e3625360980336b518312dffc45",
            "filename": "tests/model_inheritance_regress/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/tests%2Fmodel_inheritance_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e16c48e001ccd06830bb0bfd1d20e22ec30fce59/tests%2Fmodel_inheritance_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodel_inheritance_regress%2Ftests.py?ref=e16c48e001ccd06830bb0bfd1d20e22ec30fce59",
            "patch": "@@ -181,11 +181,11 @@ def test_issue_6755(self):\n         \"\"\"\n         Regression test for #6755\n         \"\"\"\n-        r = Restaurant(serves_pizza=False)\n+        r = Restaurant(serves_pizza=False, serves_hot_dogs=False)\n         r.save()\n         self.assertEqual(r.id, r.place_ptr_id)\n         orig_id = r.id\n-        r = Restaurant(place_ptr_id=orig_id, serves_pizza=True)\n+        r = Restaurant(place_ptr_id=orig_id, serves_pizza=True, serves_hot_dogs=False)\n         r.save()\n         self.assertEqual(r.id, orig_id)\n         self.assertEqual(r.id, r.place_ptr_id)"
        }
    ],
    "stats": {
        "total": 44,
        "additions": 37,
        "deletions": 7
    }
}