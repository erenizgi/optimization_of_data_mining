{
    "author": "aaugustin",
    "message": "Used the decorator syntax consistently for stringfilter. Fixed linebreaks that was decorated twice.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17050 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "69eadc7f15c6bd2b3631037f500bc6c77b381a38",
    "files": [
        {
            "sha": "31813e40cb036911d3c6f568f551061e79ac367f",
            "filename": "django/template/defaultfilters.py",
            "status": "modified",
            "additions": 27,
            "deletions": 28,
            "changes": 55,
            "blob_url": "https://github.com/django/django/blob/69eadc7f15c6bd2b3631037f500bc6c77b381a38/django%2Ftemplate%2Fdefaultfilters.py",
            "raw_url": "https://github.com/django/django/raw/69eadc7f15c6bd2b3631037f500bc6c77b381a38/django%2Ftemplate%2Fdefaultfilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaultfilters.py?ref=69eadc7f15c6bd2b3631037f500bc6c77b381a38",
            "patch": "@@ -53,6 +53,7 @@ def _dec(*args, **kwargs):\n # STRINGS         #\n ###################\n \n+@stringfilter\n def addslashes(value):\n     \"\"\"\n     Adds slashes before quotes. Useful for escaping strings in CSV, for\n@@ -61,13 +62,12 @@ def addslashes(value):\n     \"\"\"\n     return value.replace('\\\\', '\\\\\\\\').replace('\"', '\\\\\"').replace(\"'\", \"\\\\'\")\n addslashes.is_safe = True\n-addslashes = stringfilter(addslashes)\n \n+@stringfilter\n def capfirst(value):\n     \"\"\"Capitalizes the first character of the value.\"\"\"\n     return value and value[0].upper() + value[1:]\n-capfirst.is_safe=True\n-capfirst = stringfilter(capfirst)\n+capfirst.is_safe = True\n \n @register.filter(\"escapejs\")\n @stringfilter\n@@ -80,7 +80,7 @@ def escapejs_filter(value):\n def fix_ampersands_filter(value):\n     \"\"\"Replaces ampersands with ``&amp;`` entities.\"\"\"\n     return fix_ampersands(value)\n-fix_ampersands_filter.is_safe=True\n+fix_ampersands_filter.is_safe = True\n \n # Values for testing floatformat input against infinity and NaN representations,\n # which differ across platforms and Python versions.  Some (i.e. old Windows\n@@ -171,12 +171,13 @@ def floatformat(text, arg=-1):\n         return input_val\n floatformat.is_safe = True\n \n+@stringfilter\n def iriencode(value):\n     \"\"\"Escapes an IRI value for use in a URL.\"\"\"\n     return force_unicode(iri_to_uri(value))\n iriencode.is_safe = True\n-iriencode = stringfilter(iriencode)\n \n+@stringfilter\n def linenumbers(value, autoescape=None):\n     \"\"\"Displays text with line numbers.\"\"\"\n     lines = value.split(u'\\n')\n@@ -192,14 +193,14 @@ def linenumbers(value, autoescape=None):\n     return mark_safe(u'\\n'.join(lines))\n linenumbers.is_safe = True\n linenumbers.needs_autoescape = True\n-linenumbers = stringfilter(linenumbers)\n \n+@stringfilter\n def lower(value):\n     \"\"\"Converts a string into all lowercase.\"\"\"\n     return value.lower()\n lower.is_safe = True\n-lower = stringfilter(lower)\n \n+@stringfilter\n def make_list(value):\n     \"\"\"\n     Returns the value turned into a list.\n@@ -209,8 +210,8 @@ def make_list(value):\n     \"\"\"\n     return list(value)\n make_list.is_safe = False\n-make_list = stringfilter(make_list)\n \n+@stringfilter\n def slugify(value):\n     \"\"\"\n     Normalizes string, converts to lowercase, removes non-alpha characters,\n@@ -220,7 +221,6 @@ def slugify(value):\n     value = unicode(re.sub('[^\\w\\s-]', '', value).strip().lower())\n     return mark_safe(re.sub('[-\\s]+', '-', value))\n slugify.is_safe = True\n-slugify = stringfilter(slugify)\n \n def stringformat(value, arg):\n     \"\"\"\n@@ -238,13 +238,14 @@ def stringformat(value, arg):\n         return u\"\"\n stringformat.is_safe = True\n \n+@stringfilter\n def title(value):\n     \"\"\"Converts a string into titlecase.\"\"\"\n     t = re.sub(\"([a-z])'([A-Z])\", lambda m: m.group(0).lower(), value.title())\n     return re.sub(\"\\d([A-Z])\", lambda m: m.group(0).lower(), t)\n title.is_safe = True\n-title = stringfilter(title)\n \n+@stringfilter\n def truncatechars(value, arg):\n     \"\"\"\n     Truncates a string after a certain number of characters.\n@@ -257,8 +258,8 @@ def truncatechars(value, arg):\n         return value # Fail silently.\n     return Truncator(value).chars(length)\n truncatechars.is_safe = True\n-truncatechars = stringfilter(truncatechars)\n \n+@stringfilter\n def truncatewords(value, arg):\n     \"\"\"\n     Truncates a string after a certain number of words.\n@@ -273,8 +274,8 @@ def truncatewords(value, arg):\n         return value # Fail silently.\n     return Truncator(value).words(length, truncate=' ...')\n truncatewords.is_safe = True\n-truncatewords = stringfilter(truncatewords)\n \n+@stringfilter\n def truncatewords_html(value, arg):\n     \"\"\"\n     Truncates HTML after a certain number of words.\n@@ -289,14 +290,14 @@ def truncatewords_html(value, arg):\n         return value # Fail silently.\n     return Truncator(value).words(length, html=True, truncate=' ...')\n truncatewords_html.is_safe = True\n-truncatewords_html = stringfilter(truncatewords_html)\n \n+@stringfilter\n def upper(value):\n     \"\"\"Converts a string into all uppercase.\"\"\"\n     return value.upper()\n upper.is_safe = False\n-upper = stringfilter(upper)\n \n+@stringfilter\n def urlencode(value, safe=None):\n     \"\"\"\n     Escapes a value for use in a URL.\n@@ -311,7 +312,6 @@ def urlencode(value, safe=None):\n         kwargs['safe'] = safe\n     return urlquote(value, **kwargs)\n urlencode.is_safe = False\n-urlencode = stringfilter(urlencode)\n \n @register.filter\n @stringfilter\n@@ -321,6 +321,7 @@ def urlize(value, autoescape=None):\n urlize.is_safe = True\n urlize.needs_autoescape = True\n \n+@stringfilter\n def urlizetrunc(value, limit, autoescape=None):\n     \"\"\"\n     Converts URLs into clickable links, truncating URLs to the given character\n@@ -332,14 +333,14 @@ def urlizetrunc(value, limit, autoescape=None):\n                             autoescape=autoescape))\n urlizetrunc.is_safe = True\n urlizetrunc.needs_autoescape = True\n-urlizetrunc = stringfilter(urlizetrunc)\n \n+@stringfilter\n def wordcount(value):\n     \"\"\"Returns the number of words.\"\"\"\n     return len(value.split())\n wordcount.is_safe = False\n-wordcount = stringfilter(wordcount)\n \n+@stringfilter\n def wordwrap(value, arg):\n     \"\"\"\n     Wraps words at specified line length.\n@@ -348,8 +349,8 @@ def wordwrap(value, arg):\n     \"\"\"\n     return wrap(value, int(arg))\n wordwrap.is_safe = True\n-wordwrap = stringfilter(wordwrap)\n \n+@stringfilter\n def ljust(value, arg):\n     \"\"\"\n     Left-aligns the value in a field of a given width.\n@@ -358,8 +359,8 @@ def ljust(value, arg):\n     \"\"\"\n     return value.ljust(int(arg))\n ljust.is_safe = True\n-ljust = stringfilter(ljust)\n \n+@stringfilter\n def rjust(value, arg):\n     \"\"\"\n     Right-aligns the value in a field of a given width.\n@@ -368,14 +369,14 @@ def rjust(value, arg):\n     \"\"\"\n     return value.rjust(int(arg))\n rjust.is_safe = True\n-rjust = stringfilter(rjust)\n \n+@stringfilter\n def center(value, arg):\n     \"\"\"Centers the value in a field of a given width.\"\"\"\n     return value.center(int(arg))\n center.is_safe = True\n-center = stringfilter(center)\n \n+@stringfilter\n def cut(value, arg):\n     \"\"\"\n     Removes all values of arg from the given string.\n@@ -385,7 +386,6 @@ def cut(value, arg):\n     if safe and arg != ';':\n         return mark_safe(value)\n     return value\n-cut = stringfilter(cut)\n \n ###################\n # HTML STRINGS    #\n@@ -400,14 +400,14 @@ def escape_filter(value):\n     return mark_for_escaping(value)\n escape_filter.is_safe = True\n \n+@stringfilter\n def force_escape(value):\n     \"\"\"\n     Escapes a string's HTML. This returns a new string containing the escaped\n     characters (as opposed to \"escape\", which marks the content for later\n     possible escaping).\n     \"\"\"\n     return mark_safe(escape(value))\n-force_escape = stringfilter(force_escape)\n force_escape.is_safe = True\n \n @register.filter(\"linebreaks\")\n@@ -422,8 +422,8 @@ def linebreaks_filter(value, autoescape=None):\n     return mark_safe(linebreaks(value, autoescape))\n linebreaks_filter.is_safe = True\n linebreaks_filter.needs_autoescape = True\n-linebreaks = stringfilter(linebreaks)\n \n+@stringfilter\n def linebreaksbr(value, autoescape=None):\n     \"\"\"\n     Converts all newlines in a piece of plain text to HTML line breaks\n@@ -436,15 +436,14 @@ def linebreaksbr(value, autoescape=None):\n     return mark_safe(value.replace('\\n', '<br />'))\n linebreaksbr.is_safe = True\n linebreaksbr.needs_autoescape = True\n-linebreaksbr = stringfilter(linebreaksbr)\n \n+@stringfilter\n def safe(value):\n     \"\"\"\n     Marks the value as a string that should not be auto-escaped.\n     \"\"\"\n     return mark_safe(value)\n safe.is_safe = True\n-safe = stringfilter(safe)\n \n def safeseq(value):\n     \"\"\"\n@@ -455,6 +454,7 @@ def safeseq(value):\n     return [mark_safe(force_unicode(obj)) for obj in value]\n safeseq.is_safe = True\n \n+@stringfilter\n def removetags(value, tags):\n     \"\"\"Removes a space separated list of [X]HTML tags from the output.\"\"\"\n     tags = [re.escape(tag) for tag in tags.split()]\n@@ -465,13 +465,12 @@ def removetags(value, tags):\n     value = endtag_re.sub(u'', value)\n     return value\n removetags.is_safe = True\n-removetags = stringfilter(removetags)\n \n+@stringfilter\n def striptags(value):\n     \"\"\"Strips all [X]HTML tags.\"\"\"\n     return strip_tags(value)\n striptags.is_safe = True\n-striptags = stringfilter(striptags)\n \n ###################\n # LISTS           #"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 27,
        "deletions": 28
    }
}