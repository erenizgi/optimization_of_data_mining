{
    "author": "claudep",
    "message": "Moved some email validation tests to validators tests",
    "sha": "8cb9968a91cf533cb82e1e13948551e91b510878",
    "files": [
        {
            "sha": "5f93b1631b985eb5b3c935348ea1d2057dd3d14d",
            "filename": "tests/modeltests/validators/tests.py",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/8cb9968a91cf533cb82e1e13948551e91b510878/tests%2Fmodeltests%2Fvalidators%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/8cb9968a91cf533cb82e1e13948551e91b510878/tests%2Fmodeltests%2Fvalidators%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fvalidators%2Ftests.py?ref=8cb9968a91cf533cb82e1e13948551e91b510878",
            "patch": "@@ -26,13 +26,22 @@\n     (validate_email, 'email@here.com', None),\n     (validate_email, 'weirder-email@here.and.there.com', None),\n     (validate_email, 'email@[127.0.0.1]', None),\n+    (validate_email, 'example@valid-----hyphens.com', None),\n+    (validate_email, 'example@valid-with-hyphens.com', None),\n \n     (validate_email, None, ValidationError),\n     (validate_email, '', ValidationError),\n     (validate_email, 'abc', ValidationError),\n+    (validate_email, 'abc@', ValidationError),\n+    (validate_email, 'abc@bar', ValidationError),\n     (validate_email, 'a @x.cz', ValidationError),\n+    (validate_email, 'abc@.com', ValidationError),\n     (validate_email, 'something@@somewhere.com', ValidationError),\n     (validate_email, 'email@127.0.0.1', ValidationError),\n+    (validate_email, 'example@invalid-.com', ValidationError),\n+    (validate_email, 'example@-invalid.com', ValidationError),\n+    (validate_email, 'example@inv-.alid-.com', ValidationError),\n+    (validate_email, 'example@inv-.-alid.com', ValidationError),\n     # Quoted-string format (CR not allowed)\n     (validate_email, '\"\\\\\\011\"@here.com', None),\n     (validate_email, '\"\\\\\\012\"@here.com', ValidationError),"
        },
        {
            "sha": "12661d01f500a88e0ea9f673195df506f0d3212f",
            "filename": "tests/regressiontests/forms/tests/fields.py",
            "status": "modified",
            "additions": 5,
            "deletions": 14,
            "changes": 19,
            "blob_url": "https://github.com/django/django/blob/8cb9968a91cf533cb82e1e13948551e91b510878/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/8cb9968a91cf533cb82e1e13948551e91b510878/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Ffields.py?ref=8cb9968a91cf533cb82e1e13948551e91b510878",
            "patch": "@@ -501,23 +501,16 @@ def test_change_regex_after_init(self):\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid value.'\", f.clean, 'abcd')\n \n     # EmailField ##################################################################\n+    # See also modeltests/validators tests for validate_email specific tests\n \n     def test_emailfield_1(self):\n         f = EmailField()\n         self.assertRaisesMessage(ValidationError, \"'This field is required.'\", f.clean, '')\n         self.assertRaisesMessage(ValidationError, \"'This field is required.'\", f.clean, None)\n         self.assertEqual('person@example.com', f.clean('person@example.com'))\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'foo')\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'foo@')\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'foo@bar')\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'example@invalid-.com')\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'example@-invalid.com')\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'example@inv-.alid-.com')\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'example@inv-.-alid.com')\n-        self.assertEqual('example@valid-----hyphens.com', f.clean('example@valid-----hyphens.com'))\n-        self.assertEqual('example@valid-with-hyphens.com', f.clean('example@valid-with-hyphens.com'))\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'example@.com')\n-        self.assertEqual('local@domain.with.idn.xyz\\xe4\\xf6\\xfc\\xdfabc.part.com', f.clean('local@domain.with.idn.xyzäöüßabc.part.com'))\n+        self.assertEqual('local@domain.with.idn.xyz\\xe4\\xf6\\xfc\\xdfabc.part.com',\n+            f.clean('local@domain.with.idn.xyzäöüßabc.part.com'))\n \n     def test_email_regexp_for_performance(self):\n         f = EmailField()\n@@ -530,17 +523,15 @@ def test_email_regexp_for_performance(self):\n                 'viewx3dtextx26qx3d@yahoo.comx26latlngx3d15854521645943074058'\n             )\n \n-    def test_emailfield_2(self):\n+    def test_emailfield_not_required(self):\n         f = EmailField(required=False)\n         self.assertEqual('', f.clean(''))\n         self.assertEqual('', f.clean(None))\n         self.assertEqual('person@example.com', f.clean('person@example.com'))\n         self.assertEqual('example@example.com', f.clean('      example@example.com  \\t   \\t '))\n         self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'foo')\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'foo@')\n-        self.assertRaisesMessage(ValidationError, \"'Enter a valid email address.'\", f.clean, 'foo@bar')\n \n-    def test_emailfield_3(self):\n+    def test_emailfield_min_max_length(self):\n         f = EmailField(min_length=10, max_length=15)\n         self.assertRaisesMessage(ValidationError, \"'Ensure this value has at least 10 characters (it has 9).'\", f.clean, 'a@foo.com')\n         self.assertEqual('alf@foo.com', f.clean('alf@foo.com'))"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 14,
        "deletions": 14
    }
}