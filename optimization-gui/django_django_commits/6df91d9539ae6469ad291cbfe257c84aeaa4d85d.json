{
    "author": "carljm",
    "message": "Fixed #17086 -- Removed pollution of global template-builtins from markup and humanize tests.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17031 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "6df91d9539ae6469ad291cbfe257c84aeaa4d85d",
    "files": [
        {
            "sha": "d46cdb05e4352dc341203588e049993e853bf0c2",
            "filename": "django/contrib/humanize/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/6df91d9539ae6469ad291cbfe257c84aeaa4d85d/django%2Fcontrib%2Fhumanize%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/6df91d9539ae6469ad291cbfe257c84aeaa4d85d/django%2Fcontrib%2Fhumanize%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftests.py?ref=6df91d9539ae6469ad291cbfe257c84aeaa4d85d",
            "patch": "@@ -1,22 +1,20 @@\n from __future__ import with_statement\n from datetime import timedelta, date, datetime\n \n-from django.template import Template, Context, add_to_builtins, defaultfilters\n+from django.template import Template, Context, defaultfilters\n from django.test import TestCase\n from django.utils import translation, tzinfo\n from django.utils.translation import ugettext as _\n from django.utils.html import escape\n \n-add_to_builtins('django.contrib.humanize.templatetags.humanize')\n-\n \n class HumanizeTests(TestCase):\n \n     def humanize_tester(self, test_list, result_list, method):\n         # Using max below ensures we go through both lists\n         # However, if the lists are not equal length, this raises an exception\n         for test_content, result in zip(test_list, result_list):\n-            t = Template('{{ test_content|%s }}' % method)\n+            t = Template('{%% load humanize %%}{{ test_content|%s }}' % method)\n             rendered = t.render(Context(locals())).strip()\n             self.assertEqual(rendered, escape(result),\n                              msg=\"%s test failed, produced '%s', should've produced '%s'\" % (method, rendered, result))"
        },
        {
            "sha": "03a653c77a3ac2160d481ff7e9282578917010c6",
            "filename": "django/contrib/markup/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/6df91d9539ae6469ad291cbfe257c84aeaa4d85d/django%2Fcontrib%2Fmarkup%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/6df91d9539ae6469ad291cbfe257c84aeaa4d85d/django%2Fcontrib%2Fmarkup%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmarkup%2Ftests.py?ref=6df91d9539ae6469ad291cbfe257c84aeaa4d85d",
            "patch": "@@ -1,12 +1,10 @@\n # Quick tests for the markup templatetags (django.contrib.markup)\n import re\n \n-from django.template import Template, Context, add_to_builtins\n+from django.template import Template, Context\n from django.utils import unittest\n from django.utils.html import escape\n \n-add_to_builtins('django.contrib.markup.templatetags.markup')\n-\n try:\n     import textile\n except ImportError:\n@@ -41,34 +39,34 @@ class Templates(unittest.TestCase):\n \n     @unittest.skipUnless(textile, 'texttile not installed')\n     def test_textile(self):\n-        t = Template(\"{{ textile_content|textile }}\")\n+        t = Template(\"{% load markup %}{{ textile_content|textile }}\")\n         rendered = t.render(Context({'textile_content':self.textile_content})).strip()\n         self.assertEqual(rendered.replace('\\t', ''), \"\"\"<p>Paragraph 1</p>\n \n <p>Paragraph 2 with &#8220;quotes&#8221; and <code>code</code></p>\"\"\")\n \n     @unittest.skipIf(textile, 'texttile is installed')\n     def test_no_textile(self):\n-        t = Template(\"{{ textile_content|textile }}\")\n+        t = Template(\"{% load markup %}{{ textile_content|textile }}\")\n         rendered = t.render(Context({'textile_content':self.textile_content})).strip()\n         self.assertEqual(rendered, escape(self.textile_content))\n \n     @unittest.skipUnless(markdown, 'markdown not installed')\n     def test_markdown(self):\n-        t = Template(\"{{ markdown_content|markdown }}\")\n+        t = Template(\"{% load markup %}{{ markdown_content|markdown }}\")\n         rendered = t.render(Context({'markdown_content':self.markdown_content})).strip()\n         pattern = re.compile(\"\"\"<p>Paragraph 1\\s*</p>\\s*<h2>\\s*An h2</h2>\"\"\")\n         self.assertTrue(pattern.match(rendered))\n \n     @unittest.skipIf(markdown, 'markdown is installed')\n     def test_no_markdown(self):\n-        t = Template(\"{{ markdown_content|markdown }}\")\n+        t = Template(\"{% load markup %}{{ markdown_content|markdown }}\")\n         rendered = t.render(Context({'markdown_content':self.markdown_content})).strip()\n         self.assertEqual(rendered, self.markdown_content)\n \n     @unittest.skipUnless(docutils, 'docutils not installed')\n     def test_docutils(self):\n-        t = Template(\"{{ rest_content|restructuredtext }}\")\n+        t = Template(\"{% load markup %}{{ rest_content|restructuredtext }}\")\n         rendered = t.render(Context({'rest_content':self.rest_content})).strip()\n         # Different versions of docutils return slightly different HTML\n         try:\n@@ -82,7 +80,7 @@ def test_docutils(self):\n \n     @unittest.skipIf(docutils, 'docutils is installed')\n     def test_no_docutils(self):\n-        t = Template(\"{{ rest_content|restructuredtext }}\")\n+        t = Template(\"{% load markup %}{{ rest_content|restructuredtext }}\")\n         rendered = t.render(Context({'rest_content':self.rest_content})).strip()\n         self.assertEqual(rendered, self.rest_content)\n "
        }
    ],
    "stats": {
        "total": 22,
        "additions": 9,
        "deletions": 13
    }
}