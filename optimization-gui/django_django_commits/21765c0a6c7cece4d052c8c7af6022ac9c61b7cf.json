{
    "author": "aaugustin",
    "message": "Implemented PostgreSQL version as a cached property.",
    "sha": "21765c0a6c7cece4d052c8c7af6022ac9c61b7cf",
    "files": [
        {
            "sha": "831ad84843f4d1f2d124060d540f40a6608d1eed",
            "filename": "django/db/backends/postgresql_psycopg2/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/21765c0a6c7cece4d052c8c7af6022ac9c61b7cf/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/21765c0a6c7cece4d052c8c7af6022ac9c61b7cf/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py?ref=21765c0a6c7cece4d052c8c7af6022ac9c61b7cf",
            "patch": "@@ -14,6 +14,7 @@\n from django.db.backends.postgresql_psycopg2.version import get_version\n from django.db.backends.postgresql_psycopg2.introspection import DatabaseIntrospection\n from django.utils.encoding import force_str\n+from django.utils.functional import cached_property\n from django.utils.safestring import SafeText, SafeBytes\n from django.utils import six\n from django.utils.timezone import utc\n@@ -121,7 +122,6 @@ def __init__(self, *args, **kwargs):\n         self.creation = DatabaseCreation(self)\n         self.introspection = DatabaseIntrospection(self)\n         self.validation = BaseDatabaseValidation(self)\n-        self._pg_version = None\n \n     def check_constraints(self, table_names=None):\n         \"\"\"\n@@ -150,11 +150,9 @@ def close(self):\n             )\n             raise\n \n-    def _get_pg_version(self):\n-        if self._pg_version is None:\n-            self._pg_version = get_version(self.connection)\n-        return self._pg_version\n-    pg_version = property(_get_pg_version)\n+    @cached_property\n+    def pg_version(self):\n+        return get_version(self.connection)\n \n     def get_connection_params(self):\n         settings_dict = self.settings_dict\n@@ -202,7 +200,6 @@ def init_connection_state(self):\n                 self.connection.cursor().execute(\n                         self.ops.set_time_zone_sql(), [tz])\n         self.connection.set_isolation_level(self.isolation_level)\n-        self._get_pg_version()\n \n     def create_cursor(self):\n         cursor = self.connection.cursor()"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 4,
        "deletions": 7
    }
}