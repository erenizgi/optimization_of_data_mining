{
    "author": "alex",
    "message": "Ensured that about half of the files opened in the formtools tests were explicitly closed.",
    "sha": "64a3c7f9aeda347a72e3f1e8e88381b5b3d479d8",
    "files": [
        {
            "sha": "7529d89a2c418e77fdf96972e0f684c4b5400eba",
            "filename": "django/contrib/formtools/tests/wizard/namedwizardtests/tests.py",
            "status": "modified",
            "additions": 12,
            "deletions": 5,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/64a3c7f9aeda347a72e3f1e8e88381b5b3d479d8/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/64a3c7f9aeda347a72e3f1e8e88381b5b3d479d8/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fnamedwizardtests%2Ftests.py?ref=64a3c7f9aeda347a72e3f1e8e88381b5b3d479d8",
            "patch": "@@ -122,6 +122,7 @@ def test_form_finish(self):\n         self.assertEqual(response.context['wizard']['steps'].current, 'form2')\n \n         post_data = self.wizard_step_data[1]\n+        post_data['form2-file1'].close()\n         post_data['form2-file1'] = open(__file__, 'rb')\n         response = self.client.post(\n             reverse(self.wizard_urlname,\n@@ -149,7 +150,9 @@ def test_form_finish(self):\n         self.assertEqual(response.status_code, 200)\n \n         all_data = response.context['form_list']\n-        self.assertEqual(all_data[1]['file1'].read(), open(__file__, 'rb').read())\n+        with open(__file__, 'rb') as f:\n+            self.assertEqual(all_data[1]['file1'].read(), f.read())\n+        all_data[1]['file1'].close()\n         del all_data[1]['file1']\n         self.assertEqual(all_data, [\n             {'name': 'Pony', 'thirsty': True, 'user': self.testuser},\n@@ -182,9 +185,10 @@ def test_cleaned_data(self):\n         response = self.client.get(step2_url)\n         self.assertEqual(response.status_code, 200)\n         self.assertEqual(response.context['wizard']['steps'].current, 'form2')\n-        self.assertEqual(\n-            response.context['wizard']['form'].files['form2-file1'].read(),\n-            open(__file__, 'rb').read())\n+        with open(__file__, 'rb') as f:\n+            self.assertEqual(\n+                response.context['wizard']['form'].files['form2-file1'].read(),\n+                f.read())\n \n         response = self.client.post(\n             reverse(self.wizard_urlname,\n@@ -201,7 +205,9 @@ def test_cleaned_data(self):\n         self.assertEqual(response.status_code, 200)\n \n         all_data = response.context['all_cleaned_data']\n-        self.assertEqual(all_data['file1'].read(), open(__file__, 'rb').read())\n+        with open(__file__, 'rb') as f:\n+            self.assertEqual(all_data['file1'].read(), f.read())\n+        all_data['file1'].close()\n         del all_data['file1']\n         self.assertEqual(\n             all_data,\n@@ -225,6 +231,7 @@ def test_manipulated_data(self):\n         self.assertEqual(response.status_code, 200)\n \n         post_data = self.wizard_step_data[1]\n+        post_data['form2-file1'].close()\n         post_data['form2-file1'] = open(__file__, 'rb')\n         response = self.client.post(\n             reverse(self.wizard_urlname,"
        },
        {
            "sha": "586bd59341e6bbe2843f7a280bb8660e4a1dc639",
            "filename": "django/contrib/formtools/tests/wizard/wizardtests/tests.py",
            "status": "modified",
            "additions": 11,
            "deletions": 4,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/64a3c7f9aeda347a72e3f1e8e88381b5b3d479d8/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/64a3c7f9aeda347a72e3f1e8e88381b5b3d479d8/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fformtools%2Ftests%2Fwizard%2Fwizardtests%2Ftests.py?ref=64a3c7f9aeda347a72e3f1e8e88381b5b3d479d8",
            "patch": "@@ -95,7 +95,9 @@ def test_form_finish(self):\n         self.assertEqual(response.status_code, 200)\n \n         all_data = response.context['form_list']\n-        self.assertEqual(all_data[1]['file1'].read(), open(__file__, 'rb').read())\n+        with open(__file__, 'rb') as f:\n+            self.assertEqual(all_data[1]['file1'].read(), f.read())\n+        all_data[1]['file1'].close()\n         del all_data[1]['file1']\n         self.assertEqual(all_data, [\n             {'name': 'Pony', 'thirsty': True, 'user': self.testuser},\n@@ -112,8 +114,9 @@ def test_cleaned_data(self):\n         self.assertEqual(response.status_code, 200)\n \n         post_data = self.wizard_step_data[1]\n-        post_data['form2-file1'] = open(__file__, 'rb')\n-        response = self.client.post(self.wizard_url, post_data)\n+        with open(__file__, 'rb') as post_file:\n+            post_data['form2-file1'] = post_file\n+            response = self.client.post(self.wizard_url, post_data)\n         self.assertEqual(response.status_code, 200)\n \n         response = self.client.post(self.wizard_url, self.wizard_step_data[2])\n@@ -123,7 +126,9 @@ def test_cleaned_data(self):\n         self.assertEqual(response.status_code, 200)\n \n         all_data = response.context['all_cleaned_data']\n-        self.assertEqual(all_data['file1'].read(), open(__file__, 'rb').read())\n+        with open(__file__, 'rb') as f:\n+            self.assertEqual(all_data['file1'].read(), f.read())\n+        all_data['file1'].close()\n         del all_data['file1']\n         self.assertEqual(all_data, {\n             'name': 'Pony', 'thirsty': True, 'user': self.testuser,\n@@ -140,6 +145,7 @@ def test_manipulated_data(self):\n         self.assertEqual(response.status_code, 200)\n \n         post_data = self.wizard_step_data[1]\n+        post_data['form2-file1'].close()\n         post_data['form2-file1'] = open(__file__, 'rb')\n         response = self.client.post(self.wizard_url, post_data)\n         self.assertEqual(response.status_code, 200)\n@@ -167,6 +173,7 @@ def test_form_refresh(self):\n         self.assertEqual(response.context['wizard']['steps'].current, 'form2')\n \n         post_data = self.wizard_step_data[1]\n+        post_data['form2-file1'].close()\n         post_data['form2-file1'] = open(__file__, 'rb')\n         response = self.client.post(self.wizard_url, post_data)\n         self.assertEqual(response.status_code, 200)"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 23,
        "deletions": 9
    }
}