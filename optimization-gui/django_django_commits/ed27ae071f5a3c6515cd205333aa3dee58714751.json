{
    "author": "aaugustin",
    "message": "Fixed #17940 -- Enforced USE_TZ = False in contrib apps tests that use fixtures containing datetimes.\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17770 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ed27ae071f5a3c6515cd205333aa3dee58714751",
    "files": [
        {
            "sha": "dcd50fc6cca9607fefad5c601e1acd1a1dc588ab",
            "filename": "django/contrib/auth/tests/context_processors.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fcontext_processors.py",
            "raw_url": "https://github.com/django/django/raw/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fcontext_processors.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fcontext_processors.py?ref=ed27ae071f5a3c6515cd205333aa3dee58714751",
            "patch": "@@ -97,7 +97,8 @@ def test_user_attrs(self):\n         self.assertEqual(user, response.context['user'])\n \n AuthContextProcessorTests = override_settings(\n-    TEMPLATE_DIRS = (\n+    TEMPLATE_DIRS=(\n             os.path.join(os.path.dirname(__file__), 'templates'),\n-        )\n+        ),\n+    USE_TZ=False,                           # required for loading the fixture\n )(AuthContextProcessorTests)"
        },
        {
            "sha": "e4c8bf2586c19e35b06b7525356ad475fdb5c538",
            "filename": "django/contrib/auth/tests/forms.py",
            "status": "modified",
            "additions": 16,
            "deletions": 2,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fforms.py?ref=ed27ae071f5a3c6515cd205333aa3dee58714751",
            "patch": "@@ -1,10 +1,12 @@\n from __future__ import with_statement\n import os\n+from django.contrib.auth.models import User\n+from django.contrib.auth.forms import (UserCreationForm, AuthenticationForm,\n+    PasswordChangeForm, SetPasswordForm, UserChangeForm, PasswordResetForm)\n from django.core import mail\n from django.forms.fields import Field, EmailField\n-from django.contrib.auth.models import User\n-from django.contrib.auth.forms import UserCreationForm, AuthenticationForm,  PasswordChangeForm, SetPasswordForm, UserChangeForm, PasswordResetForm\n from django.test import TestCase\n+from django.test.utils import override_settings\n from django.utils.encoding import force_unicode\n from django.utils import translation\n \n@@ -74,6 +76,8 @@ def test_success(self):\n         u = form.save()\n         self.assertEqual(repr(u), '<User: jsmith@example.com>')\n \n+UserCreationFormTest = override_settings(USE_TZ=False)(UserCreationFormTest)\n+\n \n class AuthenticationFormTest(TestCase):\n \n@@ -125,6 +129,8 @@ def test_success(self):\n         self.assertTrue(form.is_valid())\n         self.assertEqual(form.non_field_errors(), [])\n \n+AuthenticationFormTest = override_settings(USE_TZ=False)(AuthenticationFormTest)\n+\n \n class SetPasswordFormTest(TestCase):\n \n@@ -151,6 +157,8 @@ def test_success(self):\n         form = SetPasswordForm(user, data)\n         self.assertTrue(form.is_valid())\n \n+SetPasswordFormTest = override_settings(USE_TZ=False)(SetPasswordFormTest)\n+\n \n class PasswordChangeFormTest(TestCase):\n \n@@ -198,6 +206,8 @@ def test_field_order(self):\n         self.assertEqual(PasswordChangeForm(user, {}).fields.keys(),\n                          ['old_password', 'new_password1', 'new_password2'])\n \n+PasswordChangeFormTest = override_settings(USE_TZ=False)(PasswordChangeFormTest)\n+\n \n class UserChangeFormTest(TestCase):\n \n@@ -226,6 +236,8 @@ class Meta(UserChangeForm.Meta):\n         # Just check we can create it\n         form = MyUserForm({})\n \n+UserChangeFormTest = override_settings(USE_TZ=False)(UserChangeFormTest)\n+\n \n class PasswordResetFormTest(TestCase):\n \n@@ -304,3 +316,5 @@ def test_unusable_password(self):\n         self.assertFalse(form.is_valid())\n         self.assertEqual(form[\"email\"].errors,\n                          [u\"The user account associated with this e-mail address cannot reset the password.\"])\n+\n+PasswordResetFormTest = override_settings(USE_TZ=False)(PasswordResetFormTest)"
        },
        {
            "sha": "243a39533dc5e765964da3e4fbbd750481c57c29",
            "filename": "django/contrib/auth/tests/models.py",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fmodels.py?ref=ed27ae071f5a3c6515cd205333aa3dee58714751",
            "patch": "@@ -1,6 +1,7 @@\n from django.conf import settings\n from django.test import TestCase\n-from django.contrib.auth.models import (Group, User,\n+from django.test.utils import override_settings\n+svn from django.contrib.auth.models import (Group, User,\n     SiteProfileNotAvailable, UserManager)\n \n \n@@ -37,6 +38,8 @@ def test_site_profile_not_available(self):\n         settings.AUTH_PROFILE_MODULE = 'foo.bar'\n         self.assertRaises(SiteProfileNotAvailable, user.get_profile)\n \n+ProfileTestCase = override_settings(USE_TZ=False)(ProfileTestCase)\n+\n \n class NaturalKeysTestCase(TestCase):\n     fixtures = ['authtestdata.json']\n@@ -50,6 +53,8 @@ def test_group_natural_key(self):\n         users_group = Group.objects.create(name='users')\n         self.assertEquals(Group.objects.get_by_natural_key('users'), users_group)\n \n+NaturalKeysTestCase = override_settings(USE_TZ=False)(NaturalKeysTestCase)\n+\n \n class LoadDataWithoutNaturalKeysTestCase(TestCase):\n     fixtures = ['regular.json']\n@@ -59,6 +64,8 @@ def test_user_is_created_and_added_to_group(self):\n         group = Group.objects.get(name='my_group')\n         self.assertEquals(group, user.groups.get())\n \n+LoadDataWithoutNaturalKeysTestCase = override_settings(USE_TZ=False)(LoadDataWithoutNaturalKeysTestCase)\n+\n \n class LoadDataWithNaturalKeysTestCase(TestCase):\n     fixtures = ['natural.json']\n@@ -68,6 +75,8 @@ def test_user_is_created_and_added_to_group(self):\n         group = Group.objects.get(name='my_group')\n         self.assertEquals(group, user.groups.get())\n \n+LoadDataWithNaturalKeysTestCase = override_settings(USE_TZ=False)(LoadDataWithNaturalKeysTestCase)\n+\n \n class UserManagerTestCase(TestCase):\n "
        },
        {
            "sha": "fc308c582ddcb5cbafb6d3f5f3165d32d1fa68fa",
            "filename": "django/contrib/auth/tests/signals.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fsignals.py",
            "raw_url": "https://github.com/django/django/raw/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fsignals.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fsignals.py?ref=ed27ae071f5a3c6515cd205333aa3dee58714751",
            "patch": "@@ -1,4 +1,5 @@\n from django.test import TestCase\n+from django.test.utils import override_settings\n from django.contrib.auth import signals\n \n \n@@ -45,3 +46,5 @@ def test_logout(self):\n         self.client.get('/logout/next_page/')\n         self.assertEqual(len(self.logged_out), 1)\n         self.assertEqual(self.logged_out[0].username, 'testclient')\n+\n+SignalTestCase = override_settings(USE_TZ=False)(SignalTestCase)"
        },
        {
            "sha": "72440864da542afa77f27359ba5778eafe361d98",
            "filename": "django/contrib/auth/tests/views.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/ed27ae071f5a3c6515cd205333aa3dee58714751/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fauth%2Ftests%2Fviews.py?ref=ed27ae071f5a3c6515cd205333aa3dee58714751",
            "patch": "@@ -12,6 +12,7 @@\n from django.utils.encoding import force_unicode\n from django.utils.html import escape\n from django.test import TestCase\n+from django.test.utils import override_settings\n \n from django.contrib.auth import SESSION_KEY, REDIRECT_FIELD_NAME\n from django.contrib.auth.forms import (AuthenticationForm, PasswordChangeForm,\n@@ -52,6 +53,8 @@ def login(self, password='password'):\n     def assertContainsEscaped(self, response, text, **kwargs):\n         return self.assertContains(response, escape(force_unicode(text)), **kwargs)\n \n+AuthViewsTestCase = override_settings(USE_TZ=False)(AuthViewsTestCase)\n+\n \n class AuthViewNamedURLTests(AuthViewsTestCase):\n     urls = 'django.contrib.auth.urls'"
        }
    ],
    "stats": {
        "total": 40,
        "additions": 35,
        "deletions": 5
    }
}