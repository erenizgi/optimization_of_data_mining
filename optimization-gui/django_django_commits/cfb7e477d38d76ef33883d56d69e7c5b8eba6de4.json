{
    "author": "adrianholovaty",
    "message": "Fixed #17218 -- Fixed bug with SelectFilter where the 'to' box had a height=0 when it was within a collapsed fieldset. Thanks jimallman\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17181 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "cfb7e477d38d76ef33883d56d69e7c5b8eba6de4",
    "files": [
        {
            "sha": "2746be6a041003a8ab26d2d573b7b4b65a065e44",
            "filename": "django/contrib/admin/static/admin/js/SelectFilter2.js",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/cfb7e477d38d76ef33883d56d69e7c5b8eba6de4/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2FSelectFilter2.js",
            "raw_url": "https://github.com/django/django/raw/cfb7e477d38d76ef33883d56d69e7c5b8eba6de4/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2FSelectFilter2.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2FSelectFilter2.js?ref=cfb7e477d38d76ef33883d56d69e7c5b8eba6de4",
            "patch": "@@ -97,7 +97,15 @@ window.SelectFilter = {\n \n         if (!is_stacked) {\n             // In horizontal mode, give the same height to the two boxes.\n-            $(to_box).height($(filter_p).outerHeight() + $(from_box).outerHeight());\n+            var j_from_box = $(from_box);\n+            var j_to_box = $(to_box);\n+            var resize_filters = function() { j_to_box.height($(filter_p).outerHeight() + j_from_box.outerHeight()); }\n+            if (j_from_box.outerHeight() > 0) {\n+                resize_filters(); // This fieldset is already open. Resize now.\n+            } else {\n+                // This fieldset is probably collapsed. Wait for its 'show' event.\n+                j_to_box.closest('fieldset').one('show.fieldset', resize_filters);\n+            }\n         }\n \n         // Initial icon refresh"
        },
        {
            "sha": "889e1a5dfc287937fde892408f961ed81da4b48c",
            "filename": "django/contrib/admin/static/admin/js/collapse.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/cfb7e477d38d76ef33883d56d69e7c5b8eba6de4/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fcollapse.js",
            "raw_url": "https://github.com/django/django/raw/cfb7e477d38d76ef33883d56d69e7c5b8eba6de4/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fcollapse.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fcollapse.js?ref=cfb7e477d38d76ef33883d56d69e7c5b8eba6de4",
            "patch": "@@ -12,11 +12,11 @@\n \t\t// Add toggle to anchor tag\n \t\t$(\"fieldset.collapse a.collapse-toggle\").toggle(\n \t\t\tfunction() { // Show\n-\t\t\t\t$(this).text(gettext(\"Hide\")).closest(\"fieldset\").removeClass(\"collapsed\");\n+\t\t\t\t$(this).text(gettext(\"Hide\")).closest(\"fieldset\").removeClass(\"collapsed\").trigger(\"show.fieldset\", [$(this).attr(\"id\")]);\n \t\t\t\treturn false;\n \t\t\t},\n \t\t\tfunction() { // Hide\n-\t\t\t\t$(this).text(gettext(\"Show\")).closest(\"fieldset\").addClass(\"collapsed\");\n+\t\t\t\t$(this).text(gettext(\"Show\")).closest(\"fieldset\").addClass(\"collapsed\").trigger(\"hide.fieldset\", [$(this).attr(\"id\")]);\n \t\t\t\treturn false;\n \t\t\t}\n \t\t);"
        },
        {
            "sha": "5e41b3c86cf54b65461c3780097a5d4dded78613",
            "filename": "django/contrib/admin/static/admin/js/collapse.min.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/cfb7e477d38d76ef33883d56d69e7c5b8eba6de4/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fcollapse.min.js",
            "raw_url": "https://github.com/django/django/raw/cfb7e477d38d76ef33883d56d69e7c5b8eba6de4/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fcollapse.min.js",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fstatic%2Fadmin%2Fjs%2Fcollapse.min.js?ref=cfb7e477d38d76ef33883d56d69e7c5b8eba6de4",
            "patch": "@@ -1,2 +1,2 @@\n-(function(a){a(document).ready(function(){a(\"fieldset.collapse\").each(function(c,b){if(a(b).find(\"div.errors\").length==0){a(b).addClass(\"collapsed\").find(\"h2\").first().append(' (<a id=\"fieldsetcollapser'+c+'\" class=\"collapse-toggle\" href=\"#\">'+gettext(\"Show\")+\"</a>)\")}});a(\"fieldset.collapse a.collapse-toggle\").toggle(function(){a(this).text(gettext(\"Hide\")).closest(\"fieldset\").removeClass(\"collapsed\");return false},function(){a(this).text(gettext(\"Show\")).closest(\"fieldset\").addClass(\"collapsed\");\n-return false})})})(django.jQuery);\n+(function(a){a(document).ready(function(){a(\"fieldset.collapse\").each(function(c,b){0==a(b).find(\"div.errors\").length&&a(b).addClass(\"collapsed\").find(\"h2\").first().append(' (<a id=\"fieldsetcollapser'+c+'\" class=\"collapse-toggle\" href=\"#\">'+gettext(\"Show\")+\"</a>)\")});a(\"fieldset.collapse a.collapse-toggle\").toggle(function(){a(this).text(gettext(\"Hide\")).closest(\"fieldset\").removeClass(\"collapsed\").trigger(\"show.fieldset\",[a(this).attr(\"id\")]);return!1},function(){a(this).text(gettext(\"Show\")).closest(\"fieldset\").addClass(\"collapsed\").trigger(\"hide.fieldset\",\n+[a(this).attr(\"id\")]);return!1})})})(django.jQuery);"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 13,
        "deletions": 5
    }
}