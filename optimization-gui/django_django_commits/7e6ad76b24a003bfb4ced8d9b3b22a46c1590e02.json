{
    "author": "hernantz",
    "message": "Fixed #19282 -- Restored ability to pass Decimals to intcomma filter",
    "sha": "7e6ad76b24a003bfb4ced8d9b3b22a46c1590e02",
    "files": [
        {
            "sha": "21f4c452fa3ee98e944e21f83b88d1a9f6f2bbb4",
            "filename": "django/contrib/humanize/templatetags/humanize.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/7e6ad76b24a003bfb4ced8d9b3b22a46c1590e02/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "raw_url": "https://github.com/django/django/raw/7e6ad76b24a003bfb4ced8d9b3b22a46c1590e02/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py?ref=7e6ad76b24a003bfb4ced8d9b3b22a46c1590e02",
            "patch": "@@ -1,6 +1,7 @@\n from __future__ import unicode_literals\n import re\n from datetime import date, datetime\n+from decimal import Decimal\n \n from django import template\n from django.conf import settings\n@@ -35,7 +36,7 @@ def intcomma(value, use_l10n=True):\n     \"\"\"\n     if settings.USE_L10N and use_l10n:\n         try:\n-            if not isinstance(value, float):\n+            if not isinstance(value, (float, Decimal)):\n                 value = int(value)\n         except (TypeError, ValueError):\n             return intcomma(value, False)"
        },
        {
            "sha": "505edf3709ef2b721c531f9241a9fd1217485be3",
            "filename": "django/contrib/humanize/tests.py",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/7e6ad76b24a003bfb4ced8d9b3b22a46c1590e02/django%2Fcontrib%2Fhumanize%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/7e6ad76b24a003bfb4ced8d9b3b22a46c1590e02/django%2Fcontrib%2Fhumanize%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftests.py?ref=7e6ad76b24a003bfb4ced8d9b3b22a46c1590e02",
            "patch": "@@ -1,5 +1,6 @@\n from __future__ import unicode_literals\n import datetime\n+from decimal import Decimal\n \n try:\n     import pytz\n@@ -58,20 +59,20 @@ def test_ordinal(self):\n \n     def test_intcomma(self):\n         test_list = (100, 1000, 10123, 10311, 1000000, 1234567.25,\n-                     '100', '1000', '10123', '10311', '1000000', '1234567.1234567',\n+                     '100', '1000', '10123', '10311', '1000000', '1234567.1234567', Decimal('1234567.1234567'),\n                      None)\n         result_list = ('100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.25',\n-                       '100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.1234567',\n+                       '100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.1234567', '1,234,567.1234567',\n                      None)\n \n         self.humanize_tester(test_list, result_list, 'intcomma')\n \n     def test_l10n_intcomma(self):\n         test_list = (100, 1000, 10123, 10311, 1000000, 1234567.25,\n-                     '100', '1000', '10123', '10311', '1000000', '1234567.1234567',\n+                     '100', '1000', '10123', '10311', '1000000', '1234567.1234567', Decimal('1234567.1234567'),\n                      None)\n         result_list = ('100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.25',\n-                       '100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.1234567',\n+                       '100', '1,000', '10,123', '10,311', '1,000,000', '1,234,567.1234567', '1,234,567.1234567',\n                      None)\n \n         with self.settings(USE_L10N=True, USE_THOUSAND_SEPARATOR=False):"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 7,
        "deletions": 5
    }
}