{
    "author": "adrianholovaty",
    "message": "Removed a bunch more Python 2.4 workarounds now that we don't support that version. Refs #15702 -- thanks to jonash for the patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15927 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
    "files": [
        {
            "sha": "705497520a870398925f96df3c333e44d628a8a3",
            "filename": "django/core/mail/backends/console.py",
            "status": "modified",
            "additions": 11,
            "deletions": 14,
            "changes": 25,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fcore%2Fmail%2Fbackends%2Fconsole.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fcore%2Fmail%2Fbackends%2Fconsole.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fbackends%2Fconsole.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -18,20 +18,17 @@ def send_messages(self, email_messages):\n             return\n         self._lock.acquire()\n         try:\n-            # The try-except is nested to allow for\n-            # Python 2.4 support (Refs #12147)\n-            try:\n-                stream_created = self.open()\n-                for message in email_messages:\n-                    self.stream.write('%s\\n' % message.message().as_string())\n-                    self.stream.write('-'*79)\n-                    self.stream.write('\\n')\n-                    self.stream.flush()  # flush after each message\n-                if stream_created:\n-                    self.close()\n-            except:\n-                if not self.fail_silently:\n-                    raise\n+            stream_created = self.open()\n+            for message in email_messages:\n+                self.stream.write('%s\\n' % message.message().as_string())\n+                self.stream.write('-'*79)\n+                self.stream.write('\\n')\n+                self.stream.flush()  # flush after each message\n+            if stream_created:\n+                self.close()\n+        except:\n+            if not self.fail_silently:\n+                raise\n         finally:\n             self._lock.release()\n         return len(email_messages)"
        },
        {
            "sha": "bed4966ef97926cce335d8b3725da5ac5474e6b0",
            "filename": "django/core/mail/message.py",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fcore%2Fmail%2Fmessage.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fcore%2Fmail%2Fmessage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmail%2Fmessage.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -3,10 +3,7 @@\n import random\n import time\n from email import Charset, Encoders\n-try:\n-    from email.generator import Generator\n-except ImportError:\n-    from email.Generator import Generator # TODO: Remove when remove Python 2.4 support\n+from email.generator import Generator\n from email.MIMEText import MIMEText\n from email.MIMEMultipart import MIMEMultipart\n from email.MIMEBase import MIMEBase"
        },
        {
            "sha": "bb4fa552ffedb3253d18738b0f15223ee4ede668",
            "filename": "django/core/management/validation.py",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fcore%2Fmanagement%2Fvalidation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fvalidation.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -4,11 +4,6 @@\n from django.core.management.color import color_style\n from django.utils.itercompat import is_iterable\n \n-try:\n-    any\n-except NameError:\n-    from django.utils.itercompat import any\n-\n class ModelErrorCollection:\n     def __init__(self, outfile=sys.stdout):\n         self.errors = []"
        },
        {
            "sha": "7446a7fa607393169e29888bd8cccf85e692c27e",
            "filename": "django/db/__init__.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2F__init__.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -3,7 +3,6 @@\n from django.core.exceptions import ImproperlyConfigured\n from django.db.utils import ConnectionHandler, ConnectionRouter, load_backend, DEFAULT_DB_ALIAS, \\\n                             DatabaseError, IntegrityError\n-from django.utils.functional import curry\n \n __all__ = ('backend', 'connection', 'connections', 'router', 'DatabaseError',\n     'IntegrityError', 'DEFAULT_DB_ALIAS')"
        },
        {
            "sha": "0766f8778772787fe32f6e371f30209b25c828d8",
            "filename": "django/db/backends/util.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fbackends%2Futil.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fbackends%2Futil.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Futil.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,8 +1,8 @@\n import datetime\n import decimal\n+import hashlib\n from time import time\n \n-from django.utils.hashcompat import md5_constructor\n from django.utils.log import getLogger\n \n \n@@ -130,9 +130,8 @@ def truncate_name(name, length=None, hash_len=4):\n     if length is None or len(name) <= length:\n         return name\n \n-    hash = md5_constructor(name).hexdigest()[:hash_len]\n-\n-    return '%s%s' % (name[:length-hash_len], hash)\n+    hsh = hashlib.md5(name).hexdigest()[:hash_len]\n+    return '%s%s' % (name[:length-hash_len], hsh)\n \n def format_number(value, max_digits, decimal_places):\n     \"\"\""
        },
        {
            "sha": "4aa6cfa741f4e840f3b2440417517e846e4f5700",
            "filename": "django/db/models/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fbase.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,5 +1,7 @@\n-import types\n+import copy\n import sys\n+import types\n+from functools import update_wrapper\n from itertools import izip\n \n import django.db.models.manager     # Imported to register signal handler.\n@@ -17,8 +19,7 @@\n from django.db.models import signals\n from django.db.models.loading import register_models, get_model\n from django.utils.translation import ugettext_lazy as _\n-import django.utils.copycompat as copy\n-from django.utils.functional import curry, update_wrapper\n+from django.utils.functional import curry\n from django.utils.encoding import smart_str, force_unicode\n from django.utils.text import get_text_list, capfirst\n from django.conf import settings"
        },
        {
            "sha": "a52fa24a01482ac1b154b069e8bc94f90a27545b",
            "filename": "django/db/models/deletion.py",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fdeletion.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fdeletion.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fdeletion.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,17 +1,16 @@\n+from functools import wraps\n from operator import attrgetter\n \n from django.db import connections, transaction, IntegrityError\n from django.db.models import signals, sql\n from django.db.models.sql.constants import GET_ITERATOR_CHUNK_SIZE\n from django.utils.datastructures import SortedDict\n-from django.utils.functional import wraps\n \n \n class ProtectedError(IntegrityError):\n     def __init__(self, msg, protected_objects):\n         self.protected_objects = protected_objects\n-        # TODO change this to use super() when we drop Python 2.4\n-        IntegrityError.__init__(self, msg, protected_objects)\n+        super(ProtectedError, self).__init__(msg, protected_objects)\n \n \n def CASCADE(collector, field, sub_objs, using):"
        },
        {
            "sha": "a71f4a33efeff3d5ba0a709272c03ef20ce6c651",
            "filename": "django/db/models/expressions.py",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fexpressions.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fexpressions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fexpressions.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,7 +1,5 @@\n import datetime\n-\n from django.utils import tree\n-from django.utils.copycompat import deepcopy\n \n class ExpressionNode(tree.Node):\n     \"\"\""
        },
        {
            "sha": "ccb57da69e3ebe397d69c42dfae4a82f5b667b83",
            "filename": "django/db/models/fields/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Ffields%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2F__init__.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,12 +1,11 @@\n+import copy\n import datetime\n import decimal\n import re\n import time\n import math\n from itertools import tee\n \n-import django.utils.copycompat as copy\n-\n from django.db import connection\n from django.db.models.fields.subclassing import LegacyConnection\n from django.db.models.query_utils import QueryWrapper"
        },
        {
            "sha": "50dc236902d6f0e614794fe886dbd5e83644e734",
            "filename": "django/db/models/fields/files.py",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Ffields%2Ffiles.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,8 +1,6 @@\n import datetime\n import os\n \n-import django.utils.copycompat as copy\n-\n from django.conf import settings\n from django.db.models.fields import Field\n from django.core.files.base import File, ContentFile"
        },
        {
            "sha": "9528d668121e50e6ad0a82b4be3edb9461e6f88b",
            "filename": "django/db/models/manager.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fmanager.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fmanager.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fmanager.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,4 +1,4 @@\n-from django.utils import copycompat as copy\n+import copy\n from django.conf import settings\n from django.db import router\n from django.db.models.query import QuerySet, EmptyQuerySet, insert_query, RawQuerySet"
        },
        {
            "sha": "6d8ab6f6d6607e1a1951a9c9f09728c382fd43e8",
            "filename": "django/db/models/options.py",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Foptions.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -11,11 +11,6 @@\n from django.utils.encoding import force_unicode, smart_str\n from django.utils.datastructures import SortedDict\n \n-try:\n-    all\n-except NameError:\n-    from django.utils.itercompat import all\n-\n # Calculate the verbose_name by converting from InitialCaps to \"lowercase with spaces\".\n get_verbose_name = lambda class_name: re.sub('(((?<=[a-z])[A-Z])|([A-Z](?![A-Z]|$)))', ' \\\\1', class_name).lower().strip()\n "
        },
        {
            "sha": "58f9313e3da6f660a85be82a426c4aeb5be51346",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -2,6 +2,7 @@\n The main QuerySet implementation. This provides the public API for the ORM.\n \"\"\"\n \n+import copy\n from itertools import izip\n \n from django.db import connections, router, transaction, IntegrityError\n@@ -11,7 +12,6 @@\n     deferred_class_factory, InvalidQuery)\n from django.db.models.deletion import Collector\n from django.db.models import signals, sql\n-from django.utils.copycompat import deepcopy\n \n # Used to control how many objects are worked with at once in some cases (e.g.\n # when deleting objects).\n@@ -51,7 +51,7 @@ def __deepcopy__(self, memo):\n             if k in ('_iter','_result_cache'):\n                 obj.__dict__[k] = None\n             else:\n-                obj.__dict__[k] = deepcopy(v, memo)\n+                obj.__dict__[k] = copy.deepcopy(v, memo)\n         return obj\n \n     def __getstate__(self):"
        },
        {
            "sha": "69b19f180618966d87c0dba3cd851272638e3e4f",
            "filename": "django/db/models/query_utils.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fquery_utils.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fquery_utils.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery_utils.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -7,7 +7,6 @@\n \"\"\"\n \n import weakref\n-from django.utils.copycompat import deepcopy\n \n from django.db.backends import util\n from django.utils import tree"
        },
        {
            "sha": "449c83b49530d2223f72c8c33730f4ec7843b8c8",
            "filename": "django/db/models/sql/query.py",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Fmodels%2Fsql%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fsql%2Fquery.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -7,7 +7,7 @@\n all about the internals of models in order to get the information it needs.\n \"\"\"\n \n-from django.utils.copycompat import deepcopy\n+import copy\n from django.utils.tree import Node\n from django.utils.datastructures import SortedDict\n from django.utils.encoding import force_unicode\n@@ -244,19 +244,19 @@ def clone(self, klass=None, memo=None, **kwargs):\n         obj.dupe_avoidance = self.dupe_avoidance.copy()\n         obj.select = self.select[:]\n         obj.tables = self.tables[:]\n-        obj.where = deepcopy(self.where, memo=memo)\n+        obj.where = copy.deepcopy(self.where, memo=memo)\n         obj.where_class = self.where_class\n         if self.group_by is None:\n             obj.group_by = None\n         else:\n             obj.group_by = self.group_by[:]\n-        obj.having = deepcopy(self.having, memo=memo)\n+        obj.having = copy.deepcopy(self.having, memo=memo)\n         obj.order_by = self.order_by[:]\n         obj.low_mark, obj.high_mark = self.low_mark, self.high_mark\n         obj.distinct = self.distinct\n         obj.select_related = self.select_related\n         obj.related_select_cols = []\n-        obj.aggregates = deepcopy(self.aggregates, memo=memo)\n+        obj.aggregates = copy.deepcopy(self.aggregates, memo=memo)\n         if self.aggregate_select_mask is None:\n             obj.aggregate_select_mask = None\n         else:\n@@ -279,7 +279,7 @@ def clone(self, klass=None, memo=None, **kwargs):\n             obj._extra_select_cache = self._extra_select_cache.copy()\n         obj.extra_tables = self.extra_tables\n         obj.extra_order_by = self.extra_order_by\n-        obj.deferred_loading = deepcopy(self.deferred_loading, memo=memo)\n+        obj.deferred_loading = copy.deepcopy(self.deferred_loading, memo=memo)\n         if self.filter_is_sticky and self.used_aliases:\n             obj.used_aliases = self.used_aliases.copy()\n         else:\n@@ -476,7 +476,7 @@ def combine(self, rhs, connector):\n         # Now relabel a copy of the rhs where-clause and add it to the current\n         # one.\n         if rhs.where:\n-            w = deepcopy(rhs.where)\n+            w = copy.deepcopy(rhs.where)\n             w.relabel_aliases(change_map)\n             if not self.where:\n                 # Since 'self' matches everything, add an explicit \"include\n@@ -497,7 +497,7 @@ def combine(self, rhs, connector):\n             if isinstance(col, (list, tuple)):\n                 self.select.append((change_map.get(col[0], col[0]), col[1]))\n             else:\n-                item = deepcopy(col)\n+                item = copy.deepcopy(col)\n                 item.relabel_aliases(change_map)\n                 self.select.append(item)\n         self.select_fields = rhs.select_fields[:]"
        },
        {
            "sha": "cf7350c02f2aee9a622f940e64f3cde8ec45e66c",
            "filename": "django/db/transaction.py",
            "status": "modified",
            "additions": 4,
            "deletions": 17,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Ftransaction.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdb%2Ftransaction.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Ftransaction.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -11,12 +11,9 @@\n Managed transactions don't do those commits, but will need some kind of manual\n or implicit commits or rollbacks.\n \"\"\"\n-import sys\n \n-try:\n-    from functools import wraps\n-except ImportError:\n-    from django.utils.functional import wraps  # Python 2.4 fallback.\n+import sys\n+from functools import wraps\n \n from django.conf import settings\n from django.db import connections, DEFAULT_DB_ALIAS\n@@ -209,18 +206,8 @@ def __exit__(self, exc_type, exc_value, traceback):\n     def __call__(self, func):\n         @wraps(func)\n         def inner(*args, **kwargs):\n-            # Once we drop support for Python 2.4 this block should become:\n-            # with self:\n-            #     func(*args, **kwargs)\n-            self.__enter__()\n-            try:\n-                res = func(*args, **kwargs)\n-            except:\n-                self.__exit__(*sys.exc_info())\n-                raise\n-            else:\n-                self.__exit__(None, None, None)\n-                return res\n+            with self:\n+                func(*args, **kwargs)\n         return inner\n \n def _transaction_func(entering, exiting, using):"
        },
        {
            "sha": "f446447b4648f18f626e9c0fb119e8e00c9e7646",
            "filename": "django/dispatch/saferef.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdispatch%2Fsaferef.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fdispatch%2Fsaferef.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdispatch%2Fsaferef.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -230,7 +230,7 @@ def __call__(self):\n         if target is not None:\n             function = self.weakFunc()\n             if function is not None:\n-                # Using curry() would be another option, but it erases the\n+                # Using partial() would be another option, but it erases the\n                 # \"signature\" of the function. That is, after a function is\n                 # curried, the inspect module can't be used to determine how\n                 # many arguments the function expects, nor what keyword"
        },
        {
            "sha": "d75e903f569d96f3ba3be8dae578ab0d6dbe21d8",
            "filename": "django/forms/extras/widgets.py",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fforms%2Fextras%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fforms%2Fextras%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fextras%2Fwidgets.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -68,11 +68,7 @@ def render(self, name, value, attrs=None):\n                 if settings.USE_L10N:\n                     try:\n                         input_format = get_format('DATE_INPUT_FORMATS')[0]\n-                        # Python 2.4 compatibility:\n-                        #     v = datetime.datetime.strptime(value, input_format)\n-                        # would be clearer, but datetime.strptime was added in\n-                        # Python 2.5\n-                        v = datetime.datetime(*(time.strptime(value, input_format)[0:6]))\n+                        v = datetime.datetime.strptime(value, input_format)\n                         year_val, month_val, day_val = v.year, v.month, v.day\n                     except ValueError:\n                         pass"
        },
        {
            "sha": "eebe0c44ffc4c86db0ac9fe744e3267bc92c349d",
            "filename": "django/forms/fields.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fforms%2Ffields.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fforms%2Ffields.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Ffields.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -2,6 +2,7 @@\n Field classes.\n \"\"\"\n \n+import copy\n import datetime\n import os\n import re\n@@ -16,7 +17,6 @@\n \n from django.core.exceptions import ValidationError\n from django.core import validators\n-import django.utils.copycompat as copy\n from django.utils import formats\n from django.utils.translation import ugettext_lazy as _\n from django.utils.encoding import smart_unicode, smart_str"
        },
        {
            "sha": "ad398c4cb7a21b4dde9b576d471698386e96bff4",
            "filename": "django/forms/forms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fforms%2Fforms.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fforms%2Fforms.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fforms.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -2,8 +2,8 @@\n Form classes\n \"\"\"\n \n+import copy\n from django.core.exceptions import ValidationError\n-from django.utils.copycompat import deepcopy\n from django.utils.datastructures import SortedDict\n from django.utils.html import conditional_escape\n from django.utils.encoding import StrAndUnicode, smart_unicode, force_unicode\n@@ -89,7 +89,7 @@ def __init__(self, data=None, files=None, auto_id='id_%s', prefix=None,\n         # alter self.fields, we create self.fields here by copying base_fields.\n         # Instances should always modify self.fields; they should not modify\n         # self.base_fields.\n-        self.fields = deepcopy(self.base_fields)\n+        self.fields = copy.deepcopy(self.base_fields)\n \n     def __unicode__(self):\n         return self.as_table()"
        },
        {
            "sha": "03152eaa24933248747480c6bb85934e758f41ee",
            "filename": "django/forms/widgets.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fforms%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fforms%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fwidgets.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,13 +1,14 @@\n \"\"\"\n HTML Widget classes\n \"\"\"\n+\n+import copy\n import datetime\n-from itertools import chain\n import time\n+from itertools import chain\n from urlparse import urljoin\n from util import flatatt\n \n-import django.utils.copycompat as copy\n from django.conf import settings\n from django.utils.datastructures import MultiValueDict, MergeDict\n from django.utils.html import escape, conditional_escape"
        },
        {
            "sha": "62e327d9267492b628e6ed42afd782dc3ce899ce",
            "filename": "django/http/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fhttp%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fhttp%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fhttp%2F__init__.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -364,7 +364,7 @@ def __copy__(self):\n         return result\n \n     def __deepcopy__(self, memo):\n-        import django.utils.copycompat as copy\n+        import copy\n         result = self.__class__('', mutable=True, encoding=self.encoding)\n         memo[id(self)] = result\n         for key, value in dict.items(self):"
        },
        {
            "sha": "eb145edf198706171eeeff254762b4620879050e",
            "filename": "django/middleware/common.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fmiddleware%2Fcommon.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fmiddleware%2Fcommon.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fmiddleware%2Fcommon.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,11 +1,11 @@\n+import hashlib\n import re\n \n from django.conf import settings\n from django import http\n from django.core.mail import mail_managers\n from django.utils.http import urlquote\n from django.core import urlresolvers\n-from django.utils.hashcompat import md5_constructor\n from django.utils.log import getLogger\n \n logger = getLogger('django.request')\n@@ -113,7 +113,7 @@ def process_response(self, request, response):\n             if response.has_header('ETag'):\n                 etag = response['ETag']\n             else:\n-                etag = '\"%s\"' % md5_constructor(response.content).hexdigest()\n+                etag = '\"%s\"' % hashlib.md5(response.content).hexdigest()\n             if response.status_code >= 200 and response.status_code < 300 and request.META.get('HTTP_IF_NONE_MATCH') == etag:\n                 cookies = response.cookies\n                 response = http.HttpResponseNotModified()"
        },
        {
            "sha": "3247358ed508786758ef2e20e0104b5855e4a7e7",
            "filename": "django/middleware/csrf.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fmiddleware%2Fcsrf.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fmiddleware%2Fcsrf.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fmiddleware%2Fcsrf.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -5,14 +5,14 @@\n against request forgeries from other sites.\n \"\"\"\n \n+import hashlib\n import itertools\n import re\n import random\n \n from django.conf import settings\n from django.core.urlresolvers import get_callable\n from django.utils.cache import patch_vary_headers\n-from django.utils.hashcompat import md5_constructor\n from django.utils.http import same_origin\n from django.utils.log import getLogger\n from django.utils.safestring import mark_safe\n@@ -47,12 +47,11 @@ def _get_failure_view():\n \n \n def _get_new_csrf_key():\n-    return md5_constructor(\"%s%s\"\n-                % (randrange(0, _MAX_CSRF_KEY), settings.SECRET_KEY)).hexdigest()\n+    return hashlib.md5(\"%s%s\" % (randrange(0, _MAX_CSRF_KEY), settings.SECRET_KEY)).hexdigest()\n \n \n def _make_legacy_session_token(session_id):\n-    return md5_constructor(settings.SECRET_KEY + session_id).hexdigest()\n+    return hashlib.md5(settings.SECRET_KEY + session_id).hexdigest()\n \n \n def get_token(request):"
        },
        {
            "sha": "b8d6c139de29fb7c196e99e3f104e6bddbcb505a",
            "filename": "django/template/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftemplate%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftemplate%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fbase.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,12 +1,13 @@\n import imp\n import re\n+from functools import partial\n from inspect import getargspec\n \n from django.conf import settings\n from django.template.context import Context, RequestContext, ContextPopException\n from django.utils.importlib import import_module\n from django.utils.itercompat import is_iterable\n-from django.utils.functional import curry, Promise\n+from django.utils.functional import Promise\n from django.utils.text import smart_split, unescape_string_literal, get_text_list\n from django.utils.encoding import smart_unicode, force_unicode, smart_str\n from django.utils.translation import ugettext_lazy\n@@ -884,7 +885,7 @@ def render(self, context):\n                         func_args = resolved_vars\n                     return func(*func_args)\n \n-            compile_func = curry(generic_tag_compiler, params, defaults, getattr(func, \"_decorated_function\", func).__name__, SimpleNode)\n+            compile_func = partial(generic_tag_compiler, params, defaults, getattr(func, \"_decorated_function\", func).__name__, SimpleNode)\n             compile_func.__doc__ = func.__doc__\n             self.tag(getattr(func, \"_decorated_function\", func).__name__, compile_func)\n             return func\n@@ -936,7 +937,7 @@ def render(self, context):\n                         new_context['csrf_token'] = csrf_token\n                     return self.nodelist.render(new_context)\n \n-            compile_func = curry(generic_tag_compiler, params, defaults, getattr(func, \"_decorated_function\", func).__name__, InclusionNode)\n+            compile_func = partial(generic_tag_compiler, params, defaults, getattr(func, \"_decorated_function\", func).__name__, InclusionNode)\n             compile_func.__doc__ = func.__doc__\n             self.tag(getattr(func, \"_decorated_function\", func).__name__, compile_func)\n             return func"
        },
        {
            "sha": "60fa59e04dda3aec234e49e95041f8bbcc21562c",
            "filename": "django/template/defaultfilters.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftemplate%2Fdefaultfilters.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftemplate%2Fdefaultfilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Fdefaultfilters.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,12 +1,9 @@\n \"\"\"Default variable filters.\"\"\"\n \n import re\n-from decimal import Decimal, InvalidOperation, ROUND_HALF_UP\n import random as random_module\n-try:\n-    from functools import wraps\n-except ImportError:\n-    from django.utils.functional import wraps  # Python 2.4 fallback.\n+from decimal import Decimal, InvalidOperation, ROUND_HALF_UP\n+from functools import wraps\n \n from django.template.base import Variable, Library\n from django.conf import settings"
        },
        {
            "sha": "5b351ad0aa23b75ce716f1f58ac7aaad5b4d7817",
            "filename": "django/template/loaders/cached.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftemplate%2Floaders%2Fcached.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftemplate%2Floaders%2Fcached.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplate%2Floaders%2Fcached.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -3,10 +3,10 @@\n to load templates from them in order, caching the result.\n \"\"\"\n \n+import hashlib\n from django.core.exceptions import ImproperlyConfigured\n from django.template.base import TemplateDoesNotExist\n from django.template.loader import BaseLoader, get_template_from_string, find_template_loader, make_origin\n-from django.utils.hashcompat import sha_constructor\n from django.utils.importlib import import_module\n \n class Loader(BaseLoader):\n@@ -38,7 +38,7 @@ def load_template(self, template_name, template_dirs=None):\n         key = template_name\n         if template_dirs:\n             # If template directories were specified, use a hash to differentiate\n-            key = '-'.join([template_name, sha_constructor('|'.join(template_dirs)).hexdigest()])\n+            key = '-'.join([template_name, hashlib.sha1('|'.join(template_dirs)).hexdigest()])\n \n         if key not in self.template_cache:\n             template, origin = self.find_template(template_name, template_dirs)"
        },
        {
            "sha": "0440d10cb8c5dae3add84156930e909f0ba36501",
            "filename": "django/templatetags/cache.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftemplatetags%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftemplatetags%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fcache.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,9 +1,9 @@\n+import hashlib\n from django.template import Library, Node, TemplateSyntaxError, Variable, VariableDoesNotExist\n from django.template import resolve_variable\n from django.core.cache import cache\n from django.utils.encoding import force_unicode\n from django.utils.http import urlquote\n-from django.utils.hashcompat import md5_constructor\n \n register = Library()\n \n@@ -24,7 +24,7 @@ def render(self, context):\n         except (ValueError, TypeError):\n             raise TemplateSyntaxError('\"cache\" tag got a non-integer timeout value: %r' % expire_time)\n         # Build a unicode key for this fragment and all vary-on's.\n-        args = md5_constructor(u':'.join([urlquote(resolve_variable(var, context)) for var in self.vary_on]))\n+        args = hashlib.md5(u':'.join([urlquote(resolve_variable(var, context)) for var in self.vary_on]))\n         cache_key = 'template.cache.%s.%s' % (self.fragment_name, args.hexdigest())\n         value = cache.get(cache_key)\n         if value is None:"
        },
        {
            "sha": "15147c51fa8e1fc7e4bd251a04bf8094a8b86f20",
            "filename": "django/test/client.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftest%2Fclient.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftest%2Fclient.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fclient.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,11 +1,11 @@\n import urllib\n-from urlparse import urlparse, urlunparse, urlsplit\n import sys\n import os\n import re\n import mimetypes\n import warnings\n from copy import copy\n+from urlparse import urlparse, urlunparse, urlsplit\n try:\n     from cStringIO import StringIO\n except ImportError:"
        },
        {
            "sha": "41b2a421ed33475e09a37e550daba07ee4abe2ac",
            "filename": "django/test/simple.py",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftest%2Fsimple.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftest%2Fsimple.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Fsimple.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -7,12 +7,6 @@\n from django.test.testcases import OutputChecker, DocTestRunner, TestCase\n from django.utils import unittest\n \n-try:\n-    all\n-except NameError:\n-    from django.utils.itercompat import all\n-\n-\n __all__ = ('DjangoTestRunner', 'DjangoTestSuiteRunner', 'run_tests')\n \n # The module name for tests outside models.py"
        },
        {
            "sha": "81e028c3dc60656d53b9ada8510b2d1a4f11b255",
            "filename": "django/test/testcases.py",
            "status": "modified",
            "additions": 3,
            "deletions": 12,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftest%2Ftestcases.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Ftest%2Ftestcases.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftest%2Ftestcases.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,5 +1,6 @@\n import re\n import sys\n+from functools import wraps\n from urlparse import urlsplit, urlunsplit\n from xml.dom.minidom import parseString, Node\n \n@@ -16,21 +17,13 @@\n from django.test.utils import get_warnings_state, restore_warnings_state\n from django.utils import simplejson, unittest as ut2\n from django.utils.encoding import smart_str\n-from django.utils.functional import wraps\n \n __all__ = ('DocTestRunner', 'OutputChecker', 'TestCase', 'TransactionTestCase',\n            'skipIfDBFeature', 'skipUnlessDBFeature')\n \n-\n-try:\n-    all\n-except NameError:\n-    from django.utils.itercompat import all\n-\n normalize_long_ints = lambda s: re.sub(r'(?<![\\w])(\\d+)L(?![\\w])', '\\\\1', s)\n normalize_decimals = lambda s: re.sub(r\"Decimal\\('(\\d+(\\.\\d*)?)'\\)\", lambda m: \"Decimal(\\\"%s\\\")\" % m.groups()[0], s)\n \n-\n def to_list(value):\n     \"\"\"\n     Puts value into a list if it's not already one.\n@@ -550,11 +543,9 @@ def assertNumQueries(self, num, func=None, *args, **kwargs):\n \n def connections_support_transactions():\n     \"\"\"\n-    Returns True if all connections support transactions.  This is messy\n-    because 2.4 doesn't support any or all.\n+    Returns True if all connections support transactions.\n     \"\"\"\n-    return all(conn.features.supports_transactions\n-        for conn in connections.all())\n+    return all(conn.features.supports_transactions for conn in connections.all())\n \n class TestCase(TransactionTestCase):\n     \"\"\""
        },
        {
            "sha": "bd23940180cc12ddcf8991363c355eb7c1ec0ea8",
            "filename": "django/utils/cache.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcache.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -17,14 +17,14 @@\n \"Accept-language\" header.\n \"\"\"\n \n+import hashlib\n import re\n import time\n \n from django.conf import settings\n from django.core.cache import get_cache\n from django.utils.encoding import smart_str, iri_to_uri\n from django.utils.http import http_date\n-from django.utils.hashcompat import md5_constructor\n from django.utils.translation import get_language\n from django.http import HttpRequest\n \n@@ -102,7 +102,7 @@ def patch_response_headers(response, cache_timeout=None):\n     if cache_timeout < 0:\n         cache_timeout = 0 # Can't have max-age negative\n     if settings.USE_ETAGS and not response.has_header('ETag'):\n-        response['ETag'] = '\"%s\"' % md5_constructor(response.content).hexdigest()\n+        response['ETag'] = '\"%s\"' % hashlib.md5(response.content).hexdigest()\n     if not response.has_header('Last-Modified'):\n         response['Last-Modified'] = http_date()\n     if not response.has_header('Expires'):\n@@ -155,19 +155,19 @@ def _i18n_cache_key_suffix(request, cache_key):\n \n def _generate_cache_key(request, method, headerlist, key_prefix):\n     \"\"\"Returns a cache key from the headers given in the header list.\"\"\"\n-    ctx = md5_constructor()\n+    ctx = hashlib.md5()\n     for header in headerlist:\n         value = request.META.get(header, None)\n         if value is not None:\n             ctx.update(value)\n-    path = md5_constructor(iri_to_uri(request.get_full_path()))\n+    path = hashlib.md5(iri_to_uri(request.get_full_path()))\n     cache_key = 'views.decorators.cache.cache_page.%s.%s.%s.%s' % (\n         key_prefix, request.method, path.hexdigest(), ctx.hexdigest())\n     return _i18n_cache_key_suffix(request, cache_key)\n \n def _generate_cache_header_key(key_prefix, request):\n     \"\"\"Returns a cache key for the header cache.\"\"\"\n-    path = md5_constructor(iri_to_uri(request.get_full_path()))\n+    path = hashlib.md5(iri_to_uri(request.get_full_path()))\n     cache_key = 'views.decorators.cache.cache_header.%s.%s' % (\n         key_prefix, path.hexdigest())\n     return _i18n_cache_key_suffix(request, cache_key)"
        },
        {
            "sha": "22b3cfbef7e94348f1e44643d3e504b1c3be6e88",
            "filename": "django/utils/copycompat.py",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/django/django/blob/a87be3554fc73a567b926ea51c13ea844b5113f8/django%2Futils%2Fcopycompat.py",
            "raw_url": "https://github.com/django/django/raw/a87be3554fc73a567b926ea51c13ea844b5113f8/django%2Futils%2Fcopycompat.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcopycompat.py?ref=a87be3554fc73a567b926ea51c13ea844b5113f8",
            "patch": "@@ -1,14 +0,0 @@\n-\"\"\"\n-Fixes Python 2.4's failure to deepcopy unbound functions.\n-\"\"\"\n-\n-import copy\n-import types\n-\n-# Monkeypatch copy's deepcopy registry to handle functions correctly.\n-if (hasattr(copy, '_deepcopy_dispatch') and types.FunctionType not in copy._deepcopy_dispatch):\n-    copy._deepcopy_dispatch[types.FunctionType] = copy._deepcopy_atomic\n-\n-# Pose as the copy module now.\n-del copy, types\n-from copy import *"
        },
        {
            "sha": "95af6808fa26813f5afa84542692de9477acdd99",
            "filename": "django/utils/crypto.py",
            "status": "modified",
            "additions": 4,
            "deletions": 8,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fcrypto.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fcrypto.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fcrypto.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,11 +1,10 @@\n \"\"\"\n Django's standard crypto functions and utilities.\n \"\"\"\n-import hmac\n \n+import hashlib\n+import hmac\n from django.conf import settings\n-from django.utils.hashcompat import sha_constructor, sha_hmac\n-\n \n def salted_hmac(key_salt, value, secret=None):\n     \"\"\"\n@@ -20,16 +19,13 @@ def salted_hmac(key_salt, value, secret=None):\n     # We need to generate a derived key from our base key.  We can do this by\n     # passing the key_salt and our base key through a pseudo-random function and\n     # SHA1 works nicely.\n-\n-    key = sha_constructor(key_salt + secret).digest()\n+    key = hashlib.sha1(key_salt + secret).digest()\n \n     # If len(key_salt + secret) > sha_constructor().block_size, the above\n     # line is redundant and could be replaced by key = key_salt + secret, since\n     # the hmac module does the same thing for keys longer than the block size.\n     # However, we need to ensure that we *always* do this.\n-\n-    return hmac.new(key, msg=value, digestmod=sha_hmac)\n-\n+    return hmac.new(key, msg=value, digestmod=hashlib.sha1)\n \n def constant_time_compare(val1, val2):\n     \"\"\""
        },
        {
            "sha": "ff281b032a0a27f2f9ecef52415aacdcb183efae",
            "filename": "django/utils/datastructures.py",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fdatastructures.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fdatastructures.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fdatastructures.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,8 +1,6 @@\n+import copy\n from types import GeneratorType\n \n-from django.utils.copycompat import copy, deepcopy\n-\n-\n class MergeDict(object):\n     \"\"\"\n     A simple class for creating new \"virtual\" dictionaries that actually look\n@@ -127,7 +125,7 @@ def __init__(self, data=None):\n                     seen.add(key)\n \n     def __deepcopy__(self, memo):\n-        return self.__class__([(key, deepcopy(value, memo))\n+        return self.__class__([(key, copy.deepcopy(value, memo))\n                                for key, value in self.iteritems()])\n \n     def __setitem__(self, key, value):\n@@ -269,7 +267,6 @@ def __copy__(self):\n         ])\n \n     def __deepcopy__(self, memo=None):\n-        import django.utils.copycompat as copy\n         if memo is None:\n             memo = {}\n         result = self.__class__()\n@@ -365,7 +362,7 @@ def itervalues(self):\n \n     def copy(self):\n         \"\"\"Returns a shallow copy of this object.\"\"\"\n-        return copy(self)\n+        return copy.copy(self)\n \n     def update(self, *args, **kwargs):\n         \"\"\""
        },
        {
            "sha": "6099f8826691b83cdcf222c1dd686cbd77427fc6",
            "filename": "django/utils/decorators.py",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fdecorators.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fdecorators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fdecorators.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,9 +1,6 @@\n \"Functions that help with dynamically creating decorators for views.\"\n \n-try:\n-    from functools import wraps, update_wrapper, WRAPPER_ASSIGNMENTS\n-except ImportError:\n-    from django.utils.functional import wraps, update_wrapper, WRAPPER_ASSIGNMENTS  # Python 2.4 fallback.\n+from functools import wraps, update_wrapper, WRAPPER_ASSIGNMENTS\n \n class classonlymethod(classmethod):\n     def __get__(self, instance, owner):"
        },
        {
            "sha": "5dc0a45e7a1399e13ccdd5a66229b245a54bcebf",
            "filename": "django/utils/functional.py",
            "status": "modified",
            "additions": 3,
            "deletions": 58,
            "changes": 61,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Ffunctional.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Ffunctional.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ffunctional.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -49,66 +49,13 @@\n # agrees to be bound by the terms and conditions of this License\n # Agreement.\n \n+from functools import wraps\n \n def curry(_curried_func, *args, **kwargs):\n     def _curried(*moreargs, **morekwargs):\n         return _curried_func(*(args+moreargs), **dict(kwargs, **morekwargs))\n     return _curried\n \n-### Begin from Python 2.5 functools.py ########################################\n-\n-# Summary of changes made to the Python 2.5 code below:\n-#   * swapped ``partial`` for ``curry`` to maintain backwards-compatibility\n-#     in Django.\n-\n-# Copyright (c) 2001, 2002, 2003, 2004, 2005, 2006, 2007 Python Software Foundation.\n-# All Rights Reserved.\n-\n-###############################################################################\n-\n-# update_wrapper() and wraps() are tools to help write\n-# wrapper functions that can handle naive introspection\n-\n-WRAPPER_ASSIGNMENTS = ('__module__', '__name__', '__doc__')\n-WRAPPER_UPDATES = ('__dict__',)\n-def update_wrapper(wrapper,\n-                   wrapped,\n-                   assigned = WRAPPER_ASSIGNMENTS,\n-                   updated = WRAPPER_UPDATES):\n-    \"\"\"Update a wrapper function to look like the wrapped function\n-\n-       wrapper is the function to be updated\n-       wrapped is the original function\n-       assigned is a tuple naming the attributes assigned directly\n-       from the wrapped function to the wrapper function (defaults to\n-       functools.WRAPPER_ASSIGNMENTS)\n-       updated is a tuple naming the attributes off the wrapper that\n-       are updated with the corresponding attribute from the wrapped\n-       function (defaults to functools.WRAPPER_UPDATES)\n-    \"\"\"\n-    for attr in assigned:\n-        setattr(wrapper, attr, getattr(wrapped, attr))\n-    for attr in updated:\n-        getattr(wrapper, attr).update(getattr(wrapped, attr))\n-    # Return the wrapper so this can be used as a decorator via curry()\n-    return wrapper\n-\n-def wraps(wrapped,\n-          assigned = WRAPPER_ASSIGNMENTS,\n-          updated = WRAPPER_UPDATES):\n-    \"\"\"Decorator factory to apply update_wrapper() to a wrapper function\n-\n-       Returns a decorator that invokes update_wrapper() with the decorated\n-       function as the wrapper argument and the arguments to wraps() as the\n-       remaining arguments. Default arguments are as for update_wrapper().\n-       This is a convenience function to simplify applying curry() to\n-       update_wrapper().\n-    \"\"\"\n-    return curry(update_wrapper, wrapped=wrapped,\n-                 assigned=assigned, updated=updated)\n-\n-### End from Python 2.5 functools.py ##########################################\n-\n def memoize(func, cache, num_args):\n     \"\"\"\n     Wrap a function so that results for any argument tuple are stored in\n@@ -343,10 +290,8 @@ def __deepcopy__(self, memo):\n             memo[id(self)] = result\n             return result\n         else:\n-            # Changed to use deepcopy from copycompat, instead of copy\n-            # For Python 2.4.\n-            from django.utils.copycompat import deepcopy\n-            return deepcopy(self._wrapped, memo)\n+            import copy\n+            return copy.deepcopy(self._wrapped, memo)\n \n     # Need to pretend to be the wrapped class, for the sake of objects that care\n     # about this (especially in equality tests)"
        },
        {
            "sha": "4d9b76f3a677b449e3ef49f2ed78475b614018bf",
            "filename": "django/utils/hashcompat.py",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/a87be3554fc73a567b926ea51c13ea844b5113f8/django%2Futils%2Fhashcompat.py",
            "raw_url": "https://github.com/django/django/raw/a87be3554fc73a567b926ea51c13ea844b5113f8/django%2Futils%2Fhashcompat.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fhashcompat.py?ref=a87be3554fc73a567b926ea51c13ea844b5113f8",
            "patch": "@@ -1,20 +0,0 @@\n-\"\"\"\n-The md5 and sha modules are deprecated since Python 2.5, replaced by the\n-hashlib module containing both hash algorithms. Here, we provide a common\n-interface to the md5 and sha constructors, depending on system version.\n-\"\"\"\n-\n-import sys\n-if sys.version_info >= (2, 5):\n-    import hashlib\n-    md5_constructor = hashlib.md5\n-    md5_hmac = md5_constructor\n-    sha_constructor = hashlib.sha1\n-    sha_hmac = sha_constructor\n-else:\n-    import md5\n-    md5_constructor = md5.new\n-    md5_hmac = md5\n-    import sha\n-    sha_constructor = sha.new\n-    sha_hmac = sha"
        },
        {
            "sha": "b302e22b2a45dfc911c0e9ef354427c577fd6a3a",
            "filename": "django/utils/itercompat.py",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fitercompat.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Fitercompat.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fitercompat.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -31,15 +31,3 @@ def is_iterable(x):\n         return False\n     else:\n         return True\n-\n-def all(iterable):\n-    for item in iterable:\n-        if not item:\n-            return False\n-    return True\n-\n-def any(iterable):\n-    for item in iterable:\n-        if item:\n-            return True\n-    return False"
        },
        {
            "sha": "e4aec73ee8783dd91965f49dda1a5c1c6c30b20c",
            "filename": "django/utils/log.py",
            "status": "modified",
            "additions": 4,
            "deletions": 33,
            "changes": 37,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Flog.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Flog.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Flog.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -18,27 +18,7 @@ def emit(self, record):\n except ImportError:\n     from django.utils.dictconfig import dictConfig\n \n-if sys.version_info < (2, 5):\n-    class LoggerCompat(object):\n-        def __init__(self, logger):\n-            self._logger = logger\n-\n-        def __getattr__(self, name):\n-            val = getattr(self._logger, name)\n-            if callable(val):\n-                def _wrapper(*args, **kwargs):\n-                    # Python 2.4 logging module doesn't support 'extra' parameter to\n-                    # methods of Logger\n-                    kwargs.pop('extra', None)\n-                    return val(*args, **kwargs)\n-                return _wrapper\n-            else:\n-                return val\n-\n-    def getLogger(name=None):\n-        return LoggerCompat(logging.getLogger(name=name))\n-else:\n-    getLogger = logging.getLogger\n+getLogger = logging.getLogger\n \n # Ensure the creation of the Django logger\n # with a null handler. This ensures we don't get any\n@@ -49,7 +29,7 @@ def getLogger(name=None):\n \n class AdminEmailHandler(logging.Handler):\n     def __init__(self, include_html=False):\n-        logging.Handler.__init__(self)        \n+        logging.Handler.__init__(self)\n         self.include_html = include_html\n \n     \"\"\"An exception log handler that e-mails log entries to site admins.\n@@ -63,15 +43,7 @@ def emit(self, record):\n         from django.views.debug import ExceptionReporter\n \n         try:\n-            if sys.version_info < (2,5):\n-                # A nasty workaround required because Python 2.4's logging\n-                # module doesn't support passing in extra context.\n-                # For this handler, the only extra data we need is the\n-                # request, and that's in the top stack frame.\n-                request = record.exc_info[2].tb_frame.f_locals['request']\n-            else:\n-                request = record.request\n-\n+            request = record.request\n             subject = '%s (%s IP): %s' % (\n                 record.levelname,\n                 (request.META.get('REMOTE_ADDR') in settings.INTERNAL_IPS and 'internal' or 'EXTERNAL'),\n@@ -97,5 +69,4 @@ def emit(self, record):\n         message = \"%s\\n\\n%s\" % (stack_trace, request_repr)\n         reporter = ExceptionReporter(request, is_email=True, *exc_info)\n         html_message = self.include_html and reporter.get_traceback_html() or None\n-        mail.mail_admins(subject, message, fail_silently=True,\n-                         html_message=html_message)\n+        mail.mail_admins(subject, message, fail_silently=True, html_message=html_message)"
        },
        {
            "sha": "36b5977942ca840e79d0622ed0a32aa443c28ea6",
            "filename": "django/utils/tree.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Ftree.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Futils%2Ftree.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftree.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -3,7 +3,7 @@\n ORM.\n \"\"\"\n \n-from django.utils.copycompat import deepcopy\n+import copy\n \n class Node(object):\n     \"\"\"\n@@ -58,8 +58,8 @@ def __deepcopy__(self, memodict):\n         \"\"\"\n         obj = Node(connector=self.connector, negated=self.negated)\n         obj.__class__ = self.__class__\n-        obj.children = deepcopy(self.children, memodict)\n-        obj.subtree_parents = deepcopy(self.subtree_parents, memodict)\n+        obj.children = copy.deepcopy(self.children, memodict)\n+        obj.subtree_parents = copy.deepcopy(self.subtree_parents, memodict)\n         return obj\n \n     def __len__(self):"
        },
        {
            "sha": "279649d35f520bad1d873c6f3d6621b07568abdd",
            "filename": "django/views/decorators/cache.py",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fdecorators%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fdecorators%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdecorators%2Fcache.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,8 +1,4 @@\n-try:\n-    from functools import wraps\n-except ImportError:\n-    from django.utils.functional import wraps  # Python 2.4 fallback.\n-\n+from functools import wraps\n from django.utils.decorators import decorator_from_middleware_with_args, available_attrs\n from django.utils.cache import patch_cache_control, add_never_cache_headers\n from django.middleware.cache import CacheMiddleware"
        },
        {
            "sha": "19fa4f721884a6c5c9830c26f62df08a096f6718",
            "filename": "django/views/decorators/csrf.py",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fdecorators%2Fcsrf.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fdecorators%2Fcsrf.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdecorators%2Fcsrf.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,10 +1,6 @@\n from django.middleware.csrf import CsrfViewMiddleware\n from django.utils.decorators import decorator_from_middleware, available_attrs\n-\n-try:\n-    from functools import wraps\n-except ImportError:\n-    from django.utils.functional import wraps  # Python 2.4 fallback.\n+from functools import wraps\n \n csrf_protect = decorator_from_middleware(CsrfViewMiddleware)\n csrf_protect.__name__ = \"csrf_protect\""
        },
        {
            "sha": "dc90cc348b3060a3abed6574621948276a535216",
            "filename": "django/views/decorators/http.py",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fdecorators%2Fhttp.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fdecorators%2Fhttp.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdecorators%2Fhttp.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -2,13 +2,9 @@\n Decorators for views based on HTTP headers.\n \"\"\"\n \n-try:\n-    from functools import wraps\n-except ImportError:\n-    from django.utils.functional import wraps  # Python 2.4 fallback.\n-\n from calendar import timegm\n from datetime import timedelta\n+from functools import wraps\n \n from django.utils.decorators import decorator_from_middleware, available_attrs\n from django.utils.http import http_date, parse_http_date_safe, parse_etags, quote_etag"
        },
        {
            "sha": "939b8c34132022d740bc566ccbaa8e7ba371b589",
            "filename": "django/views/decorators/vary.py",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fdecorators%2Fvary.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fdecorators%2Fvary.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fdecorators%2Fvary.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,8 +1,4 @@\n-try:\n-    from functools import wraps\n-except ImportError:\n-    from django.utils.functional import wraps  # Python 2.4 fallback.\n-\n+from functools import wraps\n from django.utils.cache import patch_vary_headers\n from django.utils.decorators import available_attrs\n "
        },
        {
            "sha": "f2c6d3f9f57ed9927247ed478f09eb4d03c39bf1",
            "filename": "django/views/generic/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fgeneric%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/django%2Fviews%2Fgeneric%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fbase.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,8 +1,8 @@\n+from functools import update_wrapper\n from django import http\n from django.core.exceptions import ImproperlyConfigured\n from django.template import RequestContext, loader\n from django.template.response import TemplateResponse\n-from django.utils.functional import update_wrapper\n from django.utils.log import getLogger\n from django.utils.decorators import classonlymethod\n "
        },
        {
            "sha": "2f46c0b1aa69495a639839838ebc3957239662e5",
            "filename": "tests/regressiontests/cache/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcache%2Ftests.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -3,6 +3,7 @@\n # Unit tests for cache framework\n # Uses whatever cache backend is set in the test settings file.\n \n+import hashlib\n import os\n import tempfile\n import time\n@@ -19,7 +20,6 @@\n from django.utils import translation\n from django.utils import unittest\n from django.utils.cache import patch_vary_headers, get_cache_key, learn_cache_key\n-from django.utils.hashcompat import md5_constructor\n from django.views.decorators.cache import cache_page\n \n from regressiontests.cache.models import Poll, expensive_calculation\n@@ -850,7 +850,7 @@ def test_hashing(self):\n         \"\"\"Test that keys are hashed into subdirectories correctly\"\"\"\n         self.cache.set(\"foo\", \"bar\")\n         key = self.cache.make_key(\"foo\")\n-        keyhash = md5_constructor(key).hexdigest()\n+        keyhash = hashlib.md5(key).hexdigest()\n         keypath = os.path.join(self.dirname, keyhash[:2], keyhash[2:4], keyhash[4:])\n         self.assertTrue(os.path.exists(keypath))\n \n@@ -860,7 +860,7 @@ def test_subdirectory_removal(self):\n         \"\"\"\n         self.cache.set(\"foo\", \"bar\")\n         key = self.cache.make_key(\"foo\")\n-        keyhash = md5_constructor(key).hexdigest()\n+        keyhash = hashlib.md5(key).hexdigest()\n         keypath = os.path.join(self.dirname, keyhash[:2], keyhash[2:4], keyhash[4:])\n         self.assertTrue(os.path.exists(keypath))\n "
        },
        {
            "sha": "956ca53bfd798b5373d416d969fb53aa5d670dcf",
            "filename": "tests/regressiontests/comment_tests/tests/comment_form_tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_form_tests.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_form_tests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcomment_tests%2Ftests%2Fcomment_form_tests.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,9 +1,9 @@\n+import hashlib\n import time\n \n from django.conf import settings\n from django.contrib.comments.forms import CommentForm\n from django.contrib.comments.models import Comment\n-from django.utils.hashcompat import sha_constructor\n \n from regressiontests.comment_tests.models import Article\n from regressiontests.comment_tests.tests import CommentTestCase\n@@ -57,7 +57,7 @@ def testDjango12Hash(self):\n \n         # The Django 1.2 method hard-coded here:\n         info = (content_type, object_pk, timestamp, settings.SECRET_KEY)\n-        security_hash = sha_constructor(\"\".join(info)).hexdigest()\n+        security_hash = hashlib.sha1(\"\".join(info)).hexdigest()\n \n         d['security_hash'] = security_hash\n         f = CommentForm(a, data=d)"
        },
        {
            "sha": "a16d8e24f5a15574905686e26e10de78a936ee28",
            "filename": "tests/regressiontests/dispatch/tests/test_dispatcher.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fdispatch%2Ftests%2Ftest_dispatcher.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -3,7 +3,6 @@\n \n from django.dispatch import Signal\n from django.utils import unittest\n-import django.utils.copycompat as copy\n \n if sys.platform.startswith('java'):\n     def garbage_collect():"
        },
        {
            "sha": "11218202f034182e4de220f12bade042781958ce",
            "filename": "tests/regressiontests/extra_regress/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fextra_regress%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fextra_regress%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fextra_regress%2Fmodels.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,7 +1,6 @@\n+import copy\n import datetime\n \n-import django.utils.copycompat as copy\n-\n from django.contrib.auth.models import User\n from django.db import models\n "
        },
        {
            "sha": "5da0a5fafc35067437f77076674447dd9d771f6d",
            "filename": "tests/regressiontests/file_uploads/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_uploads%2Ftests.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,5 +1,7 @@\n #! -*- coding: utf-8 -*-\n+\n import errno\n+import hashlib\n import os\n import shutil\n from StringIO import StringIO\n@@ -10,7 +12,6 @@\n from django.test import TestCase, client\n from django.utils import simplejson\n from django.utils import unittest\n-from django.utils.hashcompat import sha_constructor\n \n from models import FileModel, temp_storage, UPLOAD_TO\n import uploadhandler\n@@ -46,10 +47,10 @@ def test_large_upload(self):\n \n         for key in post_data.keys():\n             try:\n-                post_data[key + '_hash'] = sha_constructor(post_data[key].read()).hexdigest()\n+                post_data[key + '_hash'] = hashlib.sha1(post_data[key].read()).hexdigest()\n                 post_data[key].seek(0)\n             except AttributeError:\n-                post_data[key + '_hash'] = sha_constructor(post_data[key]).hexdigest()\n+                post_data[key + '_hash'] = hashlib.sha1(post_data[key]).hexdigest()\n \n         response = self.client.post('/file_uploads/verify/', post_data)\n "
        },
        {
            "sha": "0fd0b6502dc9924ea78719dbb1f8734949693ccb",
            "filename": "tests/regressiontests/file_uploads/views.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Ffile_uploads%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Ffile_uploads%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_uploads%2Fviews.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,10 +1,10 @@\n+import hashlib\n import os\n from django.core.files.uploadedfile import UploadedFile\n from django.http import HttpResponse, HttpResponseServerError\n from django.utils import simplejson\n from models import FileModel, UPLOAD_TO\n from uploadhandler import QuotaUploadHandler, ErroringUploadHandler\n-from django.utils.hashcompat import sha_constructor\n from tests import UNICODE_FILENAME\n \n def file_upload_view(request):\n@@ -37,9 +37,9 @@ def file_upload_view_verify(request):\n             continue\n         submitted_hash = form_data[key + '_hash']\n         if isinstance(value, UploadedFile):\n-            new_hash = sha_constructor(value.read()).hexdigest()\n+            new_hash = hashlib.sha1(value.read()).hexdigest()\n         else:\n-            new_hash = sha_constructor(value).hexdigest()\n+            new_hash = hashlib.sha1(value).hexdigest()\n         if new_hash != submitted_hash:\n             return HttpResponseServerError()\n "
        },
        {
            "sha": "0a8a87949ca1424124a1e73b7583a855f8bf7805",
            "filename": "tests/regressiontests/forms/tests/widgets.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fwidgets.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,13 +1,14 @@\n # -*- coding: utf-8 -*-\n+\n+import copy\n import datetime\n-from decimal import Decimal\n import re\n import time\n+from decimal import Decimal\n from django.conf import settings\n from django.core.files.uploadedfile import SimpleUploadedFile\n from django.forms import *\n from django.forms.widgets import RadioFieldRenderer\n-from django.utils import copycompat as copy\n from django.utils import formats\n from django.utils.safestring import mark_safe\n from django.utils.translation import activate, deactivate"
        },
        {
            "sha": "7481641fb5601d50e03f43efa1f4e9674d1e9020",
            "filename": "tests/regressiontests/introspection/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fintrospection%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Fintrospection%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fintrospection%2Ftests.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,7 +1,7 @@\n+from functools import update_wrapper\n from django.conf import settings\n from django.db import connection, DEFAULT_DB_ALIAS\n from django.test import TestCase, skipUnlessDBFeature\n-from django.utils import functional\n \n from models import Reporter, Article\n \n@@ -23,7 +23,7 @@ def _inner(*args, **kwargs):\n             return func(*args, **kwargs)\n         except NotImplementedError:\n             return None\n-    functional.update_wrapper(_inner, func)\n+    update_wrapper(_inner, func)\n     return _inner\n \n class IgnoreNotimplementedError(type):"
        },
        {
            "sha": "6ae652cdba6d19d6d3debc584c2f2ff4808600a6",
            "filename": "tests/regressiontests/utils/datastructures.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Futils%2Fdatastructures.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Futils%2Fdatastructures.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fdatastructures.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,10 +1,11 @@\n \"\"\"\n Tests for stuff in django.utils.datastructures.\n \"\"\"\n+\n+import copy\n import pickle\n import unittest\n \n-from django.utils.copycompat import copy\n from django.utils.datastructures import *\n \n "
        },
        {
            "sha": "e29729df60ae29684f20cea141fc9ea94350e0cc",
            "filename": "tests/regressiontests/utils/simplelazyobject.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Futils%2Fsimplelazyobject.py",
            "raw_url": "https://github.com/django/django/raw/13864703bc1d5dd4dac63c96c6a4b42a392bc57f/tests%2Fregressiontests%2Futils%2Fsimplelazyobject.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fsimplelazyobject.py?ref=13864703bc1d5dd4dac63c96c6a4b42a392bc57f",
            "patch": "@@ -1,6 +1,6 @@\n+import copy\n import unittest\n \n-import django.utils.copycompat as copy\n from django.utils.functional import SimpleLazyObject\n \n class _ComplexObject(object):"
        }
    ],
    "stats": {
        "total": 439,
        "additions": 113,
        "deletions": 326
    }
}