{
    "author": "jezdez",
    "message": "Fixed #4030 -- Added ability to translate language names. Thanks to Antti Kaihola and Ramiro Morales for the initial patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14894 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "9ab85e05e284ba407554a0b9658b156a32110b91",
    "files": [
        {
            "sha": "17c95519e1cc173b2617891eb8d86e6c7edc8a9d",
            "filename": "django/conf/locale/__init__.py",
            "status": "modified",
            "additions": 380,
            "deletions": 0,
            "changes": 380,
            "blob_url": "https://github.com/django/django/blob/9ab85e05e284ba407554a0b9658b156a32110b91/django%2Fconf%2Flocale%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9ab85e05e284ba407554a0b9658b156a32110b91/django%2Fconf%2Flocale%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Flocale%2F__init__.py?ref=9ab85e05e284ba407554a0b9658b156a32110b91",
            "patch": "@@ -0,0 +1,380 @@\n+LANG_INFO = {\n+    'ar': {\n+        'bidi': True,\n+        'code': 'ar',\n+        'name': 'Arabic',\n+        'name_local': u'\\u0627\\u0644\\u0639\\u0631\\u0628\\u064a\\u0651\\u0629',\n+    },\n+    'bg': {\n+        'bidi': False,\n+        'code': 'bg',\n+        'name': 'Bulgarian',\n+        'name_local': u'\\u0431\\u044a\\u043b\\u0433\\u0430\\u0440\\u0441\\u043a\\u0438',\n+    },\n+    'bn': {\n+        'bidi': False,\n+        'code': 'bn',\n+        'name': 'Bengali',\n+        'name_local': u'\\u09ac\\u09be\\u0982\\u09b2\\u09be',\n+    },\n+    'bs': {\n+        'bidi': False,\n+        'code': 'bs',\n+        'name': 'Bosnian',\n+        'name_local': u'bosanski',\n+    },\n+    'ca': {\n+        'bidi': False,\n+        'code': 'ca',\n+        'name': 'Catalan',\n+        'name_local': u'catal\\xe0',\n+    },\n+    'cs': {\n+        'bidi': False,\n+        'code': 'cs',\n+        'name': 'Czech',\n+        'name_local': u'\\u010desky',\n+    },\n+    'cy': {\n+        'bidi': False,\n+        'code': 'cy',\n+        'name': 'Welsh',\n+        'name_local': u'Cymraeg',\n+    },\n+    'da': {\n+        'bidi': False,\n+        'code': 'da',\n+        'name': 'Danish',\n+        'name_local': u'Dansk',\n+    },\n+    'de': {\n+        'bidi': False,\n+        'code': 'de',\n+        'name': 'German',\n+        'name_local': u'Deutsch',\n+    },\n+    'el': {\n+        'bidi': False,\n+        'code': 'el',\n+        'name': 'Greek',\n+        'name_local': u'\\u0395\\u03bb\\u03bb\\u03b7\\u03bd\\u03b9\\u03ba\\u03ac',\n+    },\n+    'en': {\n+        'bidi': False,\n+        'code': 'en',\n+        'name': 'English',\n+        'name_local': u'English',\n+    },\n+    'en-gb': {\n+        'bidi': False,\n+        'code': 'en-gb',\n+        'name': 'British English',\n+        'name_local': u'British English',\n+    },\n+    'es': {\n+        'bidi': False,\n+        'code': 'es',\n+        'name': 'Spanish',\n+        'name_local': u'espa\\xf1ol',\n+    },\n+    'es-ar': {\n+        'bidi': False,\n+        'code': 'es-ar',\n+        'name': 'Argentinian Spanish',\n+        'name_local': u'espa\\xf1ol de Argentina',\n+    },\n+    'et': {\n+        'bidi': False,\n+        'code': 'et',\n+        'name': 'Estonian',\n+        'name_local': u'eesti',\n+    },\n+    'eu': {\n+        'bidi': False,\n+        'code': 'eu',\n+        'name': 'Basque',\n+        'name_local': u'Basque',\n+    },\n+    'fa': {\n+        'bidi': True,\n+        'code': 'fa',\n+        'name': 'Persian',\n+        'name_local': u'\\u0641\\u0627\\u0631\\u0633\\u06cc',\n+    },\n+    'fi': {\n+        'bidi': False,\n+        'code': 'fi',\n+        'name': 'Finnish',\n+        'name_local': u'suomi',\n+    },\n+    'fr': {\n+        'bidi': False,\n+        'code': 'fr',\n+        'name': 'French',\n+        'name_local': u'Fran\\xe7ais',\n+    },\n+    'fy-nl': {\n+        'bidi': False,\n+        'code': 'fy-nl',\n+        'name': 'Frisian',\n+        'name_local': u'Frisian',\n+    },\n+    'ga': {\n+        'bidi': False,\n+        'code': 'ga',\n+        'name': 'Irish',\n+        'name_local': u'Gaeilge',\n+    },\n+    'gl': {\n+        'bidi': False,\n+        'code': 'gl',\n+        'name': 'Galician',\n+        'name_local': u'galego',\n+    },\n+    'he': {\n+        'bidi': True,\n+        'code': 'he',\n+        'name': 'Hebrew',\n+        'name_local': u'\\u05e2\\u05d1\\u05e8\\u05d9\\u05ea',\n+    },\n+    'hi': {\n+        'bidi': False,\n+        'code': 'hi',\n+        'name': 'Hindi',\n+        'name_local': u'Hindi',\n+    },\n+    'hr': {\n+        'bidi': False,\n+        'code': 'hr',\n+        'name': 'Croatian',\n+        'name_local': u'Hrvatski',\n+    },\n+    'hu': {\n+        'bidi': False,\n+        'code': 'hu',\n+        'name': 'Hungarian',\n+        'name_local': u'Magyar',\n+    },\n+    'id': {\n+        'bidi': False,\n+        'code': 'id',\n+        'name': 'Indonesian',\n+        'name_local': u'Bahasa Indonesia',\n+    },\n+    'is': {\n+        'bidi': False,\n+        'code': 'is',\n+        'name': 'Icelandic',\n+        'name_local': u'\\xcdslenska',\n+    },\n+    'it': {\n+        'bidi': False,\n+        'code': 'it',\n+        'name': 'Italian',\n+        'name_local': u'italiano',\n+    },\n+    'ja': {\n+        'bidi': False,\n+        'code': 'ja',\n+        'name': 'Japanese',\n+        'name_local': u'\\u65e5\\u672c\\u8a9e',\n+    },\n+    'ka': {\n+        'bidi': False,\n+        'code': 'ka',\n+        'name': 'Georgian',\n+        'name_local': u'\\u10e5\\u10d0\\u10e0\\u10d7\\u10e3\\u10da\\u10d8',\n+    },\n+    'km': {\n+        'bidi': False,\n+        'code': 'km',\n+        'name': 'Khmer',\n+        'name_local': u'Khmer',\n+    },\n+    'kn': {\n+        'bidi': False,\n+        'code': 'kn',\n+        'name': 'Kannada',\n+        'name_local': u'Kannada',\n+    },\n+    'ko': {\n+        'bidi': False,\n+        'code': 'ko',\n+        'name': 'Korean',\n+        'name_local': u'\\ud55c\\uad6d\\uc5b4',\n+    },\n+    'lt': {\n+        'bidi': False,\n+        'code': 'lt',\n+        'name': 'Lithuanian',\n+        'name_local': u'Lithuanian',\n+    },\n+    'lv': {\n+        'bidi': False,\n+        'code': 'lv',\n+        'name': 'Latvian',\n+        'name_local': u'latvie\\u0161u',\n+    },\n+    'mk': {\n+        'bidi': False,\n+        'code': 'mk',\n+        'name': 'Macedonian',\n+        'name_local': u'\\u041c\\u0430\\u043a\\u0435\\u0434\\u043e\\u043d\\u0441\\u043a\\u0438',\n+    },\n+    'ml': {\n+        'bidi': False,\n+        'code': 'ml',\n+        'name': 'Malayalam',\n+        'name_local': u'Malayalam',\n+    },\n+    'mn': {\n+        'bidi': False,\n+        'code': 'mn',\n+        'name': 'Mongolian',\n+        'name_local': u'Mongolian',\n+    },\n+    'nb': {\n+        'bidi': False,\n+        'code': 'nb',\n+        'name': 'Norwegian Bokmal',\n+        'name_local': u'Norsk (bokm\\xe5l)',\n+    },\n+    'nl': {\n+        'bidi': False,\n+        'code': 'nl',\n+        'name': 'Dutch',\n+        'name_local': u'Nederlands',\n+    },\n+    'nn': {\n+        'bidi': False,\n+        'code': 'nn',\n+        'name': 'Norwegian Nynorsk',\n+        'name_local': u'Norsk (nynorsk)',\n+    },\n+    'no': {\n+        'bidi': False,\n+        'code': 'no',\n+        'name': 'Norwegian',\n+        'name_local': u'Norsk',\n+    },\n+    'pa': {\n+        'bidi': False,\n+        'code': 'pa',\n+        'name': 'Punjabi',\n+        'name_local': u'Punjabi',\n+    },\n+    'pl': {\n+        'bidi': False,\n+        'code': 'pl',\n+        'name': 'Polish',\n+        'name_local': u'polski',\n+    },\n+    'pt': {\n+        'bidi': False,\n+        'code': 'pt',\n+        'name': 'Portuguese',\n+        'name_local': u'Portugu\\xeas',\n+    },\n+    'pt-br': {\n+        'bidi': False,\n+        'code': 'pt-br',\n+        'name': 'Brazilian Portuguese',\n+        'name_local': u'Portugu\\xeas Brasileiro',\n+    },\n+    'ro': {\n+        'bidi': False,\n+        'code': 'ro',\n+        'name': 'Romanian',\n+        'name_local': u'Rom\\xe2n\\u0103',\n+    },\n+    'ru': {\n+        'bidi': False,\n+        'code': 'ru',\n+        'name': 'Russian',\n+        'name_local': u'\\u0420\\u0443\\u0441\\u0441\\u043a\\u0438\\u0439',\n+    },\n+    'sk': {\n+        'bidi': False,\n+        'code': 'sk',\n+        'name': 'Slovak',\n+        'name_local': u'slovensk\\xfd',\n+    },\n+    'sl': {\n+        'bidi': False,\n+        'code': 'sl',\n+        'name': 'Slovenian',\n+        'name_local': u'Sloven\\u0161\\u010dina',\n+    },\n+    'sq': {\n+        'bidi': False,\n+        'code': 'sq',\n+        'name': 'Albanian',\n+        'name_local': u'Albanian',\n+    },\n+    'sr': {\n+        'bidi': False,\n+        'code': 'sr',\n+        'name': 'Serbian',\n+        'name_local': u'\\u0441\\u0440\\u043f\\u0441\\u043a\\u0438',\n+    },\n+    'sr-latn': {\n+        'bidi': False,\n+        'code': 'sr-latn',\n+        'name': 'Serbian Latin',\n+        'name_local': u'srpski (latinica)',\n+    },\n+    'sv': {\n+        'bidi': False,\n+        'code': 'sv',\n+        'name': 'Swedish',\n+        'name_local': u'Svenska',\n+    },\n+    'ta': {\n+        'bidi': False,\n+        'code': 'ta',\n+        'name': 'Tamil',\n+        'name_local': u'\\u0ba4\\u0bae\\u0bbf\\u0bb4\\u0bcd',\n+    },\n+    'te': {\n+        'bidi': False,\n+        'code': 'te',\n+        'name': 'Telugu',\n+        'name_local': u'\\u0c24\\u0c46\\u0c32\\u0c41\\u0c17\\u0c41',\n+    },\n+    'th': {\n+        'bidi': False,\n+        'code': 'th',\n+        'name': 'Thai',\n+        'name_local': u'Thai',\n+    },\n+    'tr': {\n+        'bidi': False,\n+        'code': 'tr',\n+        'name': 'Turkish',\n+        'name_local': u'T\\xfcrk\\xe7e',\n+    },\n+    'uk': {\n+        'bidi': False,\n+        'code': 'uk',\n+        'name': 'Ukrainian',\n+        'name_local': u'\\u0423\\u043a\\u0440\\u0430\\u0457\\u043d\\u0441\\u044c\\u043a\\u0430',\n+    },\n+    'vi': {\n+        'bidi': False,\n+        'code': 'vi',\n+        'name': 'Vietnamese',\n+        'name_local': u'Vietnamese',\n+    },\n+    'zh-cn': {\n+        'bidi': False,\n+        'code': 'zh-cn',\n+        'name': 'Simplified Chinese',\n+        'name_local': u'\\u7b80\\u4f53\\u4e2d\\u6587',\n+    },\n+    'zh-tw': {\n+        'bidi': False,\n+        'code': 'zh-tw',\n+        'name': 'Traditional Chinese',\n+        'name_local': u'\\u7e41\\u9ad4\\u4e2d\\u6587',\n+    }\n+}"
        },
        {
            "sha": "8bc02357fcccb6d394e7be41af2edb36872b1187",
            "filename": "django/templatetags/i18n.py",
            "status": "modified",
            "additions": 83,
            "deletions": 0,
            "changes": 83,
            "blob_url": "https://github.com/django/django/blob/9ab85e05e284ba407554a0b9658b156a32110b91/django%2Ftemplatetags%2Fi18n.py",
            "raw_url": "https://github.com/django/django/raw/9ab85e05e284ba407554a0b9658b156a32110b91/django%2Ftemplatetags%2Fi18n.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Ftemplatetags%2Fi18n.py?ref=9ab85e05e284ba407554a0b9658b156a32110b91",
            "patch": "@@ -18,6 +18,34 @@ def render(self, context):\n         context[self.variable] = [(k, translation.ugettext(v)) for k, v in settings.LANGUAGES]\n         return ''\n \n+class GetLanguageInfoNode(Node):\n+    def __init__(self, lang_code, variable):\n+        self.lang_code = Variable(lang_code)\n+        self.variable = variable\n+\n+    def render(self, context):\n+        lang_code = self.lang_code.resolve(context)\n+        context[self.variable] = translation.get_language_info(lang_code)\n+        return ''\n+\n+class GetLanguageInfoListNode(Node):\n+    def __init__(self, languages, variable):\n+        self.languages = Variable(languages)\n+        self.variable = variable\n+\n+    def get_language_info(self, language):\n+        # ``language`` is either a language code string or a sequence\n+        # with the language code as its first item\n+        if len(language[0]) > 1:\n+            return translation.get_language_info(language[0])\n+        else:\n+            return translation.get_language_info(str(language))\n+\n+    def render(self, context):\n+        langs = self.languages.resolve(context)\n+        context[self.variable] = [self.get_language_info(lang) for lang in langs]\n+        return ''\n+\n class GetCurrentLanguageNode(Node):\n     def __init__(self, variable):\n         self.variable = variable\n@@ -109,6 +137,55 @@ def do_get_available_languages(parser, token):\n         raise TemplateSyntaxError(\"'get_available_languages' requires 'as variable' (got %r)\" % args)\n     return GetAvailableLanguagesNode(args[2])\n \n+def do_get_language_info(parser, token):\n+    \"\"\"\n+    This will store the language information dictionary for the given language\n+    code in a context variable.\n+\n+    Usage::\n+\n+        {% get_language_info for LANGUAGE_CODE as l %}\n+        {{ l.code }}\n+        {{ l.name }}\n+        {{ l.name_local }}\n+        {{ l.bidi|yesno:\"bi-directional,uni-directional\" }}\n+    \"\"\"\n+    args = token.contents.split()\n+    if len(args) != 5 or args[1] != 'for' or args[3] != 'as':\n+        raise TemplateSyntaxError(\"'%s' requires 'for string as variable' (got %r)\" % (args[0], args[1:]))\n+    return GetLanguageInfoNode(args[2], args[4])\n+\n+def do_get_language_info_list(parser, token):\n+    \"\"\"\n+    This will store a list of language information dictionaries for the given\n+    language codes in a context variable. The language codes can be specified\n+    either as a list of strings or a settings.LANGUAGES style tuple (or any\n+    sequence of sequences whose first items are language codes).\n+\n+    Usage::\n+\n+        {% get_language_info_list for LANGUAGES as langs %}\n+        {% for l in langs %}\n+          {{ l.code }}\n+          {{ l.name }}\n+          {{ l.name_local }}\n+          {{ l.bidi|yesno:\"bi-directional,uni-directional\" }}\n+        {% endfor %}\n+    \"\"\"\n+    args = token.contents.split()\n+    if len(args) != 5 or args[1] != 'for' or args[3] != 'as':\n+        raise TemplateSyntaxError(\"'%s' requires 'for sequence as variable' (got %r)\" % (args[0], args[1:]))\n+    return GetLanguageInfoListNode(args[2], args[4])\n+\n+def language_name(lang_code):\n+    return translation.get_language_info(lang_code)['name']\n+\n+def language_name_local(lang_code):\n+    return translation.get_language_info(lang_code)['name_local']\n+\n+def language_bidi(lang_code):\n+    return translation.get_language_info(lang_code)['bidi']\n+\n def do_get_current_language(parser, token):\n     \"\"\"\n     This will store the current language in the context.\n@@ -269,7 +346,13 @@ def top(self):\n             counter)\n \n register.tag('get_available_languages', do_get_available_languages)\n+register.tag('get_language_info', do_get_language_info)\n+register.tag('get_language_info_list', do_get_language_info_list)\n register.tag('get_current_language', do_get_current_language)\n register.tag('get_current_language_bidi', do_get_current_language_bidi)\n register.tag('trans', do_translate)\n register.tag('blocktrans', do_block_translate)\n+\n+register.filter(language_name)\n+register.filter(language_name_local)\n+register.filter(language_bidi)"
        },
        {
            "sha": "aaae284e5a03bfc702a47e386ff3fd079885a546",
            "filename": "django/utils/translation/__init__.py",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/django/django/blob/9ab85e05e284ba407554a0b9658b156a32110b91/django%2Futils%2Ftranslation%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/9ab85e05e284ba407554a0b9658b156a32110b91/django%2Futils%2Ftranslation%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftranslation%2F__init__.py?ref=9ab85e05e284ba407554a0b9658b156a32110b91",
            "patch": "@@ -11,7 +11,7 @@\n         'get_partial_date_formats', 'check_for_language', 'to_locale',\n         'get_language_from_request', 'templatize', 'ugettext', 'ugettext_lazy',\n         'ungettext', 'ungettext_lazy', 'pgettext', 'pgettext_lazy',\n-        'npgettext', 'npgettext_lazy', 'deactivate_all']\n+        'npgettext', 'npgettext_lazy', 'deactivate_all', 'get_language_info']\n \n # Here be dragons, so a short explanation of the logic won't hurt:\n # We are trying to solve two problems: (1) access settings, in particular\n@@ -117,3 +117,10 @@ def _string_concat(*strings):\n     \"\"\"\n     return u''.join([force_unicode(s) for s in strings])\n string_concat = lazy(_string_concat, unicode)\n+\n+def get_language_info(lang_code):\n+    from django.conf.locale import LANG_INFO\n+    try:\n+        return LANG_INFO[lang_code]\n+    except KeyError:\n+        raise KeyError(\"Unknown language code %r.\" % lang_code)"
        },
        {
            "sha": "c2bd6eb309faa6af350dd3016ee9483767c066bc",
            "filename": "docs/topics/i18n/internationalization.txt",
            "status": "modified",
            "additions": 71,
            "deletions": 5,
            "changes": 76,
            "blob_url": "https://github.com/django/django/blob/9ab85e05e284ba407554a0b9658b156a32110b91/docs%2Ftopics%2Fi18n%2Finternationalization.txt",
            "raw_url": "https://github.com/django/django/raw/9ab85e05e284ba407554a0b9658b156a32110b91/docs%2Ftopics%2Fi18n%2Finternationalization.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fi18n%2Finternationalization.txt?ref=9ab85e05e284ba407554a0b9658b156a32110b91",
            "patch": "@@ -274,7 +274,7 @@ The result of a ``ugettext_lazy()`` call can be used wherever you would use a\n unicode string (an object with type ``unicode``) in Python. If you try to use\n it where a bytestring (a ``str`` object) is expected, things will not work as\n expected, since a ``ugettext_lazy()`` object doesn't know how to convert\n-itself to a bytestring.  You can't use a unicode string inside a bytestring,\n+itself to a bytestring. You can't use a unicode string inside a bytestring,\n either, so this is consistent with normal Python behavior. For example::\n \n     # This is fine: putting a unicode proxy into a unicode string.\n@@ -379,6 +379,26 @@ Using this decorator means you can write your function and assume that the\n input is a proper string, then add support for lazy translation objects at the\n end.\n \n+.. versionadded:: 1.3\n+\n+Localized names of languages\n+============================\n+\n+The ``get_language_info()`` function provides detailed information about\n+languages::\n+\n+    >>> from django.utils.translation import get_language_info\n+    >>> li = get_language_info('de')\n+    >>> print li['name'], li['name_local'], li['bidi']\n+    German Deutsch False\n+\n+The ``name`` and ``name_local`` attributes of the dictionary contain the name of\n+the language in English and in the language itself, respectively.  The ``bidi``\n+attribute is True only for bi-directional languages.\n+\n+The source of the language information is the ``django.conf.locale`` module.\n+Similar access to this information is available for template code. See below.\n+\n .. _specifying-translation-strings-in-template-code:\n \n Specifying translation strings: In template code\n@@ -518,6 +538,49 @@ string, so they don't need to be aware of translations.\n     translator might translate the string ``\"yes,no\"`` as ``\"ja,nein\"``\n     (keeping the comma intact).\n \n+.. versionadded:: 1.3\n+\n+You can also retrieve information about any of the available languages using\n+provided template tags and filters. To get information about a single language,\n+use the ``{% get_language_info %}`` tag::\n+\n+    {% get_language_info for LANGUAGE_CODE as lang %}\n+    {% get_language_info for \"pl\" as lang %}\n+\n+You can then access the information::\n+\n+    Language code: {{ lang.code }}<br />\n+    Name of language: {{ lang.name_local }}<br />\n+    Name in English: {{ lang.name }}<br />\n+    Bi-directional: {{ lang.bidi }}\n+\n+You can also use the ``{% get_language_info_list %}`` template tag to retrieve\n+information for a list of languages (e.g. active languages as specified in\n+:setting:`LANGUAGES`). See :ref:`the section about the set_language redirect\n+view <set_language-redirect-view>` for an example of how to display a language\n+selector using ``{% get_language_info_list %}``.\n+\n+In addition to :setting:`LANGUAGES` style nested tuples,\n+``{% get_language_info_list %}`` supports simple lists of language codes.\n+If you do this in your view:\n+\n+.. code-block:: python\n+\n+    return render_to_response('mytemplate.html', {\n+        'available_languages': ['en', 'es', 'fr'],\n+    }, RequestContext(request))\n+\n+you can iterate over those languages in the template::\n+\n+  {% get_language_info_list for available_languages as langs %}\n+  {% for lang in langs %} ... {% endfor %}\n+\n+There are also simple filters available for convenience:\n+\n+    * ``{{ LANGUAGE_CODE|language_name }}`` (\"German\")\n+    * ``{{ LANGUAGE_CODE|language_name_local }}`` (\"Deutsch\")\n+    * ``{{ LANGUAGE_CODE|bidi }}`` (False)\n+\n .. _Django templates: ../templates_python/\n \n Specifying translation strings: In JavaScript code\n@@ -579,7 +642,7 @@ With this, you specify the packages as a list of package names delimited by '+'\n signs in the URL. This is especially useful if your pages use code from\n different apps and this changes often and you don't want to pull in one big\n catalog file. As a security measure, these values can only be either\n-``django.conf`` or any package from the ``INSTALLED_APPS`` setting.\n+``django.conf`` or any package from the :setting:`INSTALLED_APPS` setting.\n \n Using the JavaScript translation catalog\n ----------------------------------------\n@@ -636,6 +699,8 @@ This isn't as fast as string interpolation in Python, so keep it to those\n cases where you really need it (for example, in conjunction with ``ngettext``\n to produce proper pluralizations).\n \n+.. _set_language-redirect-view:\n+\n The ``set_language`` redirect view\n ==================================\n \n@@ -654,7 +719,7 @@ The view expects to be called via the ``POST`` method, with a ``language``\n parameter set in request. If session support is enabled, the view\n saves the language choice in the user's session. Otherwise, it saves the\n language choice in a cookie that is by default named ``django_language``.\n-(The name can be changed through the ``LANGUAGE_COOKIE_NAME`` setting.)\n+(The name can be changed through the :setting:`LANGUAGE_COOKIE_NAME` setting.)\n \n After setting the language choice, Django redirects the user, following this\n algorithm:\n@@ -673,8 +738,9 @@ Here's example HTML template code:\n     {% csrf_token %}\n     <input name=\"next\" type=\"hidden\" value=\"/next/page/\" />\n     <select name=\"language\">\n-    {% for lang in LANGUAGES %}\n-    <option value=\"{{ lang.0 }}\">{{ lang.1 }}</option>\n+    {% get_language_info_list for LANGUAGES as languages %}\n+    {% for language in languages %}\n+    <option value=\"{{ language.code }}\">{{ language.name_local }} ({{ language.code }})</option>\n     {% endfor %}\n     </select>\n     <input type=\"submit\" value=\"Go\" />"
        },
        {
            "sha": "5823408bcea6d634fc9a1c1ed94fe3a9067d831e",
            "filename": "tests/regressiontests/i18n/tests.py",
            "status": "modified",
            "additions": 14,
            "deletions": 3,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/9ab85e05e284ba407554a0b9658b156a32110b91/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9ab85e05e284ba407554a0b9658b156a32110b91/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Ftests.py?ref=9ab85e05e284ba407554a0b9658b156a32110b91",
            "patch": "@@ -7,12 +7,14 @@\n \n from django.conf import settings\n from django.template import Template, Context\n-from django.test import TestCase\n from django.utils.formats import get_format, date_format, time_format, localize, localize_input, iter_format_modules\n+from django.utils.importlib import import_module\n from django.utils.numberformat import format as nformat\n from django.utils.safestring import mark_safe, SafeString, SafeUnicode\n-from django.utils.translation import ugettext, ugettext_lazy, activate, deactivate, gettext_lazy, pgettext, npgettext, to_locale\n-from django.utils.importlib import import_module\n+from django.utils.translation import (ugettext, ugettext_lazy, activate,\n+        deactivate, gettext_lazy, pgettext, npgettext, to_locale,\n+        get_language_info)\n+from django.utils.unittest import TestCase\n \n \n from forms import I18nForm, SelectDateForm, SelectDateWidget, CompanyForm\n@@ -709,3 +711,12 @@ def test_safestr(self):\n         c.save()\n         c.name = SafeString(u'Iñtërnâtiônàlizætiøn1'.encode('utf-8'))\n         c.save()\n+\n+\n+class TestLanguageInfo(TestCase):\n+    def test_localized_language_info(self):\n+        li = get_language_info('de')\n+        self.assertEqual(li['code'], 'de')\n+        self.assertEqual(li['name_local'], u'Deutsch')\n+        self.assertEqual(li['name'], 'German')\n+        self.assertEqual(li['bidi'], False)"
        },
        {
            "sha": "475f92327d126c0ce31fd5b91b29a9d733d211f3",
            "filename": "tests/regressiontests/templates/tests.py",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/9ab85e05e284ba407554a0b9658b156a32110b91/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/9ab85e05e284ba407554a0b9658b156a32110b91/tests%2Fregressiontests%2Ftemplates%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ftests.py?ref=9ab85e05e284ba407554a0b9658b156a32110b91",
            "patch": "@@ -1150,6 +1150,14 @@ def get_template_tests(self):\n             # translation of singular form in russian (#14126)\n             'i18n27': ('{% load i18n %}{% blocktrans count number as counter %}1 result{% plural %}{{ counter }} results{% endblocktrans %}', {'number': 1, 'LANGUAGE_CODE': 'ru'}, u'1 \\u0440\\u0435\\u0437\\u0443\\u043b\\u044c\\u0442\\u0430\\u0442'),\n \n+            # retrieving language information\n+            'i18n28': ('{% load i18n %}{% get_language_info for \"de\" as l %}{{ l.code }}: {{ l.name }}/{{ l.name_local }} bidi={{ l.bidi }}', {}, 'de: German/Deutsch bidi=False'),\n+            'i18n29': ('{% load i18n %}{% get_language_info for LANGUAGE_CODE as l %}{{ l.code }}: {{ l.name }}/{{ l.name_local }} bidi={{ l.bidi }}', {'LANGUAGE_CODE': 'fi'}, 'fi: Finnish/suomi bidi=False'),\n+            'i18n30': ('{% load i18n %}{% get_language_info_list for langcodes as langs %}{% for l in langs %}{{ l.code }}: {{ l.name }}/{{ l.name_local }} bidi={{ l.bidi }}; {% endfor %}', {'langcodes': ['it', 'no']}, u'it: Italian/italiano bidi=False; no: Norwegian/Norsk bidi=False; '),\n+            'i18n31': ('{% load i18n %}{% get_language_info_list for langcodes as langs %}{% for l in langs %}{{ l.code }}: {{ l.name }}/{{ l.name_local }} bidi={{ l.bidi }}; {% endfor %}', {'langcodes': (('sl', 'Slovenian'), ('fa', 'Persian'))}, u'sl: Slovenian/Sloven\\u0161\\u010dina bidi=False; fa: Persian/\\u0641\\u0627\\u0631\\u0633\\u06cc bidi=True; '),\n+            'i18n32': ('{% load i18n %}{{ \"hu\"|language_name }} {{ \"hu\"|language_name_local }} {{ \"hu\"|language_bidi }}', {}, u'Hungarian Magyar False'),\n+            'i18n33': ('{% load i18n %}{{ langcode|language_name }} {{ langcode|language_name_local }} {{ langcode|language_bidi }}', {'langcode': 'nl'}, u'Dutch Nederlands False'),\n+\n             ### HANDLING OF TEMPLATE_STRING_IF_INVALID ###################################\n \n             'invalidstr01': ('{{ var|default:\"Foo\" }}', {}, ('Foo','INVALID')),"
        }
    ],
    "stats": {
        "total": 573,
        "additions": 564,
        "deletions": 9
    }
}