{
    "author": "claudep",
    "message": "Run memcache tests if any cache is configured",
    "sha": "27192564c3193a54165752e8803b4d7b635f9022",
    "files": [
        {
            "sha": "19ab65b666f71594ee86d63c5f5736327e3d3fc8",
            "filename": "tests/regressiontests/cache/tests.py",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/27192564c3193a54165752e8803b4d7b635f9022/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/27192564c3193a54165752e8803b4d7b635f9022/tests%2Fregressiontests%2Fcache%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fcache%2Ftests.py?ref=27192564c3193a54165752e8803b4d7b635f9022",
            "patch": "@@ -932,16 +932,20 @@ def test_incr_decr_timeout(self):\n \n # memcached backend isn't guaranteed to be available.\n # To check the memcached backend, the test settings file will\n-# need to contain a cache backend setting that points at\n+# need to contain at least one cache backend setting that points at\n # your memcache server.\n @unittest.skipUnless(\n-    settings.CACHES[DEFAULT_CACHE_ALIAS]['BACKEND'].startswith('django.core.cache.backends.memcached.'),\n+    any(cache['BACKEND'].startswith('django.core.cache.backends.memcached.')\n+        for cache in settings.CACHES.values()),\n     \"memcached not available\")\n class MemcachedCacheTests(unittest.TestCase, BaseCacheTests):\n     backend_name = 'django.core.cache.backends.memcached.MemcachedCache'\n \n     def setUp(self):\n-        name = settings.CACHES[DEFAULT_CACHE_ALIAS]['LOCATION']\n+        for cache in settings.CACHES.values():\n+            if cache['BACKEND'].startswith('django.core.cache.backends.memcached.'):\n+                name = cache['LOCATION']\n+                break\n         self.cache = get_cache(self.backend_name, LOCATION=name)\n         self.prefix_cache = get_cache(self.backend_name, LOCATION=name, KEY_PREFIX='cacheprefix')\n         self.v2_cache = get_cache(self.backend_name, LOCATION=name, VERSION=2)"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 7,
        "deletions": 3
    }
}