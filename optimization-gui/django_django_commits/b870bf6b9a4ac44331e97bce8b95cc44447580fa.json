{
    "author": "ramiro",
    "message": "Fixed #16255 -- Raised minimum PostgreSQL version supported to 8.2.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16423 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "b870bf6b9a4ac44331e97bce8b95cc44447580fa",
    "files": [
        {
            "sha": "4f6bcbf97369789a7e67fbeb0ec663e1f7b42ccc",
            "filename": "django/db/backends/postgresql_psycopg2/base.py",
            "status": "modified",
            "additions": 4,
            "deletions": 13,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/b870bf6b9a4ac44331e97bce8b95cc44447580fa/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/b870bf6b9a4ac44331e97bce8b95cc44447580fa/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py?ref=b870bf6b9a4ac44331e97bce8b95cc44447580fa",
            "patch": "@@ -141,20 +141,11 @@ def _cursor(self):\n                 cursor.execute(\"SET TIME ZONE %s\", [settings_dict['TIME_ZONE']])\n             if not hasattr(self, '_version'):\n                 self.__class__._version = get_version(cursor)\n-            if self._version[0:2] < (8, 0):\n-                # No savepoint support for earlier version of PostgreSQL.\n-                self.features.uses_savepoints = False\n             if self.features.uses_autocommit:\n-                if self._version[0:2] < (8, 2):\n-                    # FIXME: Needs extra code to do reliable model insert\n-                    # handling, so we forbid it for now.\n-                    from django.core.exceptions import ImproperlyConfigured\n-                    raise ImproperlyConfigured(\"You cannot use autocommit=True with PostgreSQL prior to 8.2 at the moment.\")\n-                else:\n-                    # FIXME: Eventually we're enable this by default for\n-                    # versions that support it, but, right now, that's hard to\n-                    # do without breaking other things (#10509).\n-                    self.features.can_return_id_from_insert = True\n+                # FIXME: Eventually we'll enable this by default for\n+                # versions that support it, but, right now, that's hard to\n+                # do without breaking other things (#10509).\n+                self.features.can_return_id_from_insert = True\n         return CursorWrapper(cursor)\n \n     def _enter_transaction_management(self, managed):"
        },
        {
            "sha": "ecd0dde1c62e1e95af8d5483f49f83365a19cf36",
            "filename": "django/db/backends/postgresql_psycopg2/operations.py",
            "status": "modified",
            "additions": 7,
            "deletions": 24,
            "changes": 31,
            "blob_url": "https://github.com/django/django/blob/b870bf6b9a4ac44331e97bce8b95cc44447580fa/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Foperations.py",
            "raw_url": "https://github.com/django/django/raw/b870bf6b9a4ac44331e97bce8b95cc44447580fa/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Foperations.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Foperations.py?ref=b870bf6b9a4ac44331e97bce8b95cc44447580fa",
            "patch": "@@ -84,23 +84,13 @@ def quote_name(self, name):\n \n     def sql_flush(self, style, tables, sequences):\n         if tables:\n-            if self.postgres_version[0:2] >= (8,1):\n-                # Postgres 8.1+ can do 'TRUNCATE x, y, z...;'. In fact, it *has to*\n-                # in order to be able to truncate tables referenced by a foreign\n-                # key in any other table. The result is a single SQL TRUNCATE\n-                # statement.\n-                sql = ['%s %s;' % \\\n-                    (style.SQL_KEYWORD('TRUNCATE'),\n-                     style.SQL_FIELD(', '.join([self.quote_name(table) for table in tables]))\n-                )]\n-            else:\n-                # Older versions of Postgres can't do TRUNCATE in a single call, so\n-                # they must use a simple delete.\n-                sql = ['%s %s %s;' % \\\n-                        (style.SQL_KEYWORD('DELETE'),\n-                         style.SQL_KEYWORD('FROM'),\n-                         style.SQL_FIELD(self.quote_name(table))\n-                         ) for table in tables]\n+            # Perform a single SQL 'TRUNCATE x, y, z...;' statement.  It allows\n+            # us to truncate tables referenced by a foreign key in any other\n+            # table.\n+            sql = ['%s %s;' % \\\n+                (style.SQL_KEYWORD('TRUNCATE'),\n+                    style.SQL_FIELD(', '.join([self.quote_name(table) for table in tables]))\n+            )]\n \n             # 'ALTER SEQUENCE sequence_name RESTART WITH 1;'... style SQL statements\n             # to reset sequence indices\n@@ -171,17 +161,10 @@ def prep_for_iexact_query(self, x):\n     def check_aggregate_support(self, aggregate):\n         \"\"\"Check that the backend fully supports the provided aggregate.\n \n-        The population and sample statistics (STDDEV_POP, STDDEV_SAMP,\n-        VAR_POP, VAR_SAMP) were first implemented in Postgres 8.2.\n-\n         The implementation of population statistics (STDDEV_POP and VAR_POP)\n         under Postgres 8.2 - 8.2.4 is known to be faulty. Raise\n         NotImplementedError if this is the database in use.\n         \"\"\"\n-        if aggregate.sql_function in ('STDDEV_POP', 'STDDEV_SAMP', 'VAR_POP', 'VAR_SAMP'):\n-            if self.postgres_version[0:2] < (8,2):\n-                raise NotImplementedError('PostgreSQL does not support %s prior to version 8.2. Please upgrade your version of PostgreSQL.' % aggregate.sql_function)\n-\n         if aggregate.sql_function in ('STDDEV_POP', 'VAR_POP'):\n             if self.postgres_version[0:2] == (8,2):\n                 if self.postgres_version[2] is None or self.postgres_version[2] <= 4:"
        },
        {
            "sha": "2f55b9c8c66b40e41c0a068f3d506af36146fdd9",
            "filename": "docs/ref/databases.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 14,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/b870bf6b9a4ac44331e97bce8b95cc44447580fa/docs%2Fref%2Fdatabases.txt",
            "raw_url": "https://github.com/django/django/raw/b870bf6b9a4ac44331e97bce8b95cc44447580fa/docs%2Fref%2Fdatabases.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdatabases.txt?ref=b870bf6b9a4ac44331e97bce8b95cc44447580fa",
            "patch": "@@ -16,21 +16,9 @@ documentation or reference manuals.\n PostgreSQL notes\n ================\n \n-.. versionchanged:: 1.3\n+.. versionchanged:: 1.4\n \n-Django supports PostgreSQL 8.0 and higher. If you want to use\n-:ref:`database-level autocommit <postgresql-autocommit-mode>`, a\n-minimum version of PostgreSQL 8.2 is required.\n-\n-.. admonition:: Improvements in recent PostgreSQL versions\n-\n-    PostgreSQL 8.0 and 8.1 `will soon reach end-of-life`_; there have\n-    also been a number of significant performance improvements added\n-    in recent PostgreSQL versions. Although PostgreSQL 8.0 is the minimum\n-    supported version, you would be well advised to use a more recent\n-    version if at all possible.\n-\n-.. _will soon reach end-of-life: http://wiki.postgresql.org/wiki/PostgreSQL_Release_Support_Policy\n+Django supports PostgreSQL 8.2 and higher.\n \n PostgreSQL 8.2 to 8.2.4\n -----------------------"
        },
        {
            "sha": "7cc3fb1bc2dbc62a2ac30357f25dd896a7b38e22",
            "filename": "docs/releases/1.4.txt",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/b870bf6b9a4ac44331e97bce8b95cc44447580fa/docs%2Freleases%2F1.4.txt",
            "raw_url": "https://github.com/django/django/raw/b870bf6b9a4ac44331e97bce8b95cc44447580fa/docs%2Freleases%2F1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.4.txt?ref=b870bf6b9a4ac44331e97bce8b95cc44447580fa",
            "patch": "@@ -376,3 +376,14 @@ Old styles of calling ``cache_page`` decorator\n Some legacy ways of calling :func:`~django.views.decorators.cache.cache_page`\n have been deprecated, please see the docs for the correct way to use this\n decorator.\n+\n+Support for PostgreSQL versions older than 8.2\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Django 1.3 dropped support for PostgreSQL versions older than 8.0 and the\n+relevant documents suggested to use a recent version because of performance\n+reasons but more importantly because end of the upstream support periods for\n+releases 8.0 and 8.1 was near (November 2010.)\n+\n+Django 1.4 takes that policy further and sets 8.2 as the minimum PostgreSQL\n+version it officially supports."
        }
    ],
    "stats": {
        "total": 75,
        "additions": 24,
        "deletions": 51
    }
}