{
    "author": "jezdez",
    "message": "Set STATIC_ROOT in test runner settings to make sure the admin tests pass. Thanks to Julien Phalip for the report.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16597 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "4a993fab18892596242a0b22c8fbd6c3ae2dde57",
    "files": [
        {
            "sha": "6d4f282a96dd8c36e61c23e6e5505c4ffd6afa25",
            "filename": "tests/runtests.py",
            "status": "modified",
            "additions": 14,
            "deletions": 4,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/4a993fab18892596242a0b22c8fbd6c3ae2dde57/tests%2Fruntests.py",
            "raw_url": "https://github.com/django/django/raw/4a993fab18892596242a0b22c8fbd6c3ae2dde57/tests%2Fruntests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fruntests.py?ref=4a993fab18892596242a0b22c8fbd6c3ae2dde57",
            "patch": "@@ -1,5 +1,9 @@\n #!/usr/bin/env python\n-import os, subprocess, sys\n+import os\n+import shutil\n+import subprocess\n+import sys\n+import tempfile\n \n import django.contrib as contrib\n from django.utils import unittest\n@@ -10,9 +14,11 @@\n \n TEST_TEMPLATE_DIR = 'templates'\n \n+RUNTESTS_DIR = os.path.dirname(__file__)\n CONTRIB_DIR = os.path.dirname(contrib.__file__)\n-MODEL_TEST_DIR = os.path.join(os.path.dirname(__file__), MODEL_TESTS_DIR_NAME)\n-REGRESSION_TEST_DIR = os.path.join(os.path.dirname(__file__), REGRESSION_TESTS_DIR_NAME)\n+MODEL_TEST_DIR = os.path.join(RUNTESTS_DIR, MODEL_TESTS_DIR_NAME)\n+REGRESSION_TEST_DIR = os.path.join(RUNTESTS_DIR, REGRESSION_TESTS_DIR_NAME)\n+TEMP_DIR = tempfile.mkdtemp(prefix='django_')\n \n REGRESSION_SUBDIRS_TO_SKIP = ['locale']\n \n@@ -107,13 +113,15 @@ def setup(verbosity, test_labels):\n         'LANGUAGE_CODE': settings.LANGUAGE_CODE,\n         'MIDDLEWARE_CLASSES': settings.MIDDLEWARE_CLASSES,\n         'STATIC_URL': settings.STATIC_URL,\n+        'STATIC_ROOT': settings.STATIC_ROOT,\n     }\n \n     # Redirect some settings for the duration of these tests.\n     settings.INSTALLED_APPS = ALWAYS_INSTALLED_APPS\n     settings.ROOT_URLCONF = 'urls'\n     settings.STATIC_URL = '/static/'\n-    settings.TEMPLATE_DIRS = (os.path.join(os.path.dirname(__file__), TEST_TEMPLATE_DIR),)\n+    settings.STATIC_ROOT = os.path.join(TEMP_DIR, 'static')\n+    settings.TEMPLATE_DIRS = (os.path.join(RUNTESTS_DIR, TEST_TEMPLATE_DIR),)\n     settings.USE_I18N = True\n     settings.LANGUAGE_CODE = 'en'\n     settings.LOGIN_URL = '/accounts/login/'\n@@ -162,6 +170,8 @@ def setup(verbosity, test_labels):\n \n def teardown(state):\n     from django.conf import settings\n+    # Removing the temporary TEMP_DIR\n+    shutil.rmtree(TEMP_DIR)\n     # Restore the old settings.\n     for key, value in state.items():\n         setattr(settings, key, value)"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 14,
        "deletions": 4
    }
}