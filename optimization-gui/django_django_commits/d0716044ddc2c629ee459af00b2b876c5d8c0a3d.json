{
    "author": "ramiro",
    "message": "Changed a bit the strategy used to test staticfiles finders so they can cope with even more differences in case of paths under Windows. Refs #14961\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16285 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "d0716044ddc2c629ee459af00b2b876c5d8c0a3d",
    "files": [
        {
            "sha": "8ecae8b92c3805ef570c95f530f93e93ea743b93",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 12,
            "deletions": 4,
            "changes": 16,
            "blob_url": "https://github.com/django/django/blob/d0716044ddc2c629ee459af00b2b876c5d8c0a3d/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/d0716044ddc2c629ee459af00b2b876c5d8c0a3d/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=d0716044ddc2c629ee459af00b2b876c5d8c0a3d",
            "patch": "@@ -17,7 +17,7 @@\n from django.utils._os import rmtree_errorhandler\n \n \n-TEST_ROOT = os.path.normcase(os.path.dirname(__file__))\n+TEST_ROOT = os.path.dirname(__file__)\n \n \n class StaticFilesTestCase(TestCase):\n@@ -352,15 +352,23 @@ def test_serve_admin_media(self):\n \n class FinderTestCase(object):\n     \"\"\"\n-    Base finder test mixin\n+    Base finder test mixin.\n+\n+    On Windows, sometimes the case of the path we ask the finders for and the\n+    path(s) they find can differ. Compare them using os.path.normcase() to\n+    avoid false negatives.\n     \"\"\"\n     def test_find_first(self):\n         src, dst = self.find_first\n-        self.assertEqual(self.finder.find(src), dst)\n+        found = self.finder.find(src)\n+        self.assertEqual(os.path.normcase(found), os.path.normcase(dst))\n \n     def test_find_all(self):\n         src, dst = self.find_all\n-        self.assertEqual(self.finder.find(src, all=True), dst)\n+        found = self.finder.find(src, all=True)\n+        found = [os.path.normcase(f) for f in found]\n+        dst = [os.path.normcase(d) for d in dst]\n+        self.assertEqual(found, dst)\n \n \n class TestFileSystemFinder(StaticFilesTestCase, FinderTestCase):"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 12,
        "deletions": 4
    }
}