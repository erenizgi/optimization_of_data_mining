{
    "author": "jezdez",
    "message": "Fixed #17555 -- Added support for a missing trailing slash when redirecting based on the browser language. Thanks, neaf.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17443 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ef4d84d11ab9357d9c6e35b2a3a0a9d4fb310075",
    "files": [
        {
            "sha": "419b3809e7ba946e360c5b4b7e6e407611256029",
            "filename": "django/utils/translation/trans_real.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ef4d84d11ab9357d9c6e35b2a3a0a9d4fb310075/django%2Futils%2Ftranslation%2Ftrans_real.py",
            "raw_url": "https://github.com/django/django/raw/ef4d84d11ab9357d9c6e35b2a3a0a9d4fb310075/django%2Futils%2Ftranslation%2Ftrans_real.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Ftranslation%2Ftrans_real.py?ref=ef4d84d11ab9357d9c6e35b2a3a0a9d4fb310075",
            "patch": "@@ -38,7 +38,7 @@\n         (?:\\s*,\\s*|$)                                 # Multiple accepts per header.\n         ''', re.VERBOSE)\n \n-language_code_prefix_re = re.compile(r'^/([\\w-]+)/')\n+language_code_prefix_re = re.compile(r'^/([\\w-]+)(/|$)')\n \n def to_locale(language, to_lower=False):\n     \"\"\""
        },
        {
            "sha": "27b25468d467cba367f2cacaecb1fbc60e46eede",
            "filename": "tests/regressiontests/i18n/tests.py",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/ef4d84d11ab9357d9c6e35b2a3a0a9d4fb310075/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ef4d84d11ab9357d9c6e35b2a3a0a9d4fb310075/tests%2Fregressiontests%2Fi18n%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fi18n%2Ftests.py?ref=ef4d84d11ab9357d9c6e35b2a3a0a9d4fb310075",
            "patch": "@@ -793,6 +793,18 @@ def test_parse_language_cookie(self):\n         r.META = {'HTTP_ACCEPT_LANGUAGE': 'de'}\n         self.assertEqual(g(r), 'zh-cn')\n \n+    def test_get_language_from_path(self):\n+        from django.utils.translation.trans_real import get_language_from_path as g\n+        self.assertEqual(g('/pl/'), 'pl')\n+        self.assertEqual(g('/pl'), 'pl')\n+        self.assertEqual(g('/xyz/'), None)\n+\n+    def test_get_language_from_path(self):\n+        from django.utils.translation.trans_null import get_language_from_path as g\n+        self.assertEqual(g('/pl/'), None)\n+        self.assertEqual(g('/pl'), None)\n+        self.assertEqual(g('/xyz/'), None)\n+\n     def test_percent_in_translatable_block(self):\n         extended_locale_paths = settings.LOCALE_PATHS + (\n             os.path.join(here, 'other', 'locale'),"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 13,
        "deletions": 1
    }
}