{
    "author": "spookylukey",
    "message": "Removed example CSRF jQuery code from release notes, replacing with link to improved code in the CSRF docs\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15628 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "37343bac8a62aa31431e343f25f957a5392863fb",
    "files": [
        {
            "sha": "c28bd0319f9697fa4d44bcb161ce95b6ad7ceb4c",
            "filename": "docs/ref/contrib/csrf.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/37343bac8a62aa31431e343f25f957a5392863fb/docs%2Fref%2Fcontrib%2Fcsrf.txt",
            "raw_url": "https://github.com/django/django/raw/37343bac8a62aa31431e343f25f957a5392863fb/docs%2Fref%2Fcontrib%2Fcsrf.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fcsrf.txt?ref=37343bac8a62aa31431e343f25f957a5392863fb",
            "patch": "@@ -81,6 +81,8 @@ The utility script ``extras/csrf_migration_helper.py`` can help to automate the\n finding of code and templates that may need to be upgraded.  It contains full\n help on how to use it.\n \n+.. _csrf-ajax:\n+\n AJAX\n ----\n "
        },
        {
            "sha": "e561201c185c34543460c83d456807d440be84c5",
            "filename": "docs/releases/1.1.4.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 14,
            "changes": 18,
            "blob_url": "https://github.com/django/django/blob/37343bac8a62aa31431e343f25f957a5392863fb/docs%2Freleases%2F1.1.4.txt",
            "raw_url": "https://github.com/django/django/raw/37343bac8a62aa31431e343f25f957a5392863fb/docs%2Freleases%2F1.1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.1.4.txt?ref=37343bac8a62aa31431e343f25f957a5392863fb",
            "patch": "@@ -62,17 +62,7 @@ header X-CSRFTOKEN, as well as in the form submission itself, for ease\n of use with popular JavaScript toolkits which allow insertion of\n custom headers into all AJAX requests.\n \n-The following example using the jQuery JavaScript toolkit demonstrates\n-this; the call to jQuery's ajaxSetup will cause all AJAX requests to\n-send back the CSRF token in the custom X-CSRFTOKEN header::\n-\n-    $.ajaxSetup({\n-        beforeSend: function(xhr, settings) {\n-            if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {\n-                // Only send the token to relative URLs i.e. locally.\n-                xhr.setRequestHeader(\"X-CSRFToken\",\n-                                     $(\"#csrfmiddlewaretoken\").val());\n-            }\n-        }\n-    });\n-\n+Please see the :ref:`CSRF docs for example jQuery code <csrf-ajax>`\n+that demonstrates this technique, ensuring that you are looking at the\n+documentation for your version of Django, as the exact code necessary\n+is different for some older versions of Django."
        },
        {
            "sha": "8427534301f69da8ba12f642334619a8a40c0b4d",
            "filename": "docs/releases/1.2.5.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 28,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/37343bac8a62aa31431e343f25f957a5392863fb/docs%2Freleases%2F1.2.5.txt",
            "raw_url": "https://github.com/django/django/raw/37343bac8a62aa31431e343f25f957a5392863fb/docs%2Freleases%2F1.2.5.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.2.5.txt?ref=37343bac8a62aa31431e343f25f957a5392863fb",
            "patch": "@@ -62,34 +62,10 @@ header X-CSRFTOKEN, as well as in the form submission itself, for ease\n of use with popular JavaScript toolkits which allow insertion of\n custom headers into all AJAX requests.\n \n-The following example using the jQuery JavaScript toolkit demonstrates\n-this; the call to jQuery's ajaxSetup will cause all AJAX requests to\n-send back the CSRF token in the custom X-CSRFTOKEN header::\n-\n-    $.ajaxSetup({\n-        beforeSend: function(xhr, settings) {\n-            function getCookie(name) {\n-                var cookieValue = null;\n-                if (document.cookie && document.cookie != '') {\n-                    var cookies = document.cookie.split(';');\n-                    for (var i = 0; i < cookies.length; i++) {\n-                        var cookie = jQuery.trim(cookies[i]);\n-                        // Does this cookie string begin with the name we want?\n-                        if (cookie.substring(0, name.length + 1) == (name + '=')) {\n-                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n-                            break;\n-                        }\n-                    }\n-                }\n-                return cookieValue;\n-            }\n-            if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {\n-                // Only send the token to relative URLs i.e. locally.\n-                xhr.setRequestHeader(\"X-CSRFToken\", getCookie('csrftoken'));\n-            }\n-        }\n-    });\n-\n+Please see the :ref:`CSRF docs for example jQuery code <csrf-ajax>`\n+that demonstrates this technique, ensuring that you are looking at the\n+documentation for your version of Django, as the exact code necessary\n+is different for some older versions of Django.\n \n FileField no longer deletes files\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "sha": "887943aec80297f2f8151f9be16d7cd3331f2c3c",
            "filename": "docs/releases/1.3.txt",
            "status": "modified",
            "additions": 4,
            "deletions": 28,
            "changes": 32,
            "blob_url": "https://github.com/django/django/blob/37343bac8a62aa31431e343f25f957a5392863fb/docs%2Freleases%2F1.3.txt",
            "raw_url": "https://github.com/django/django/raw/37343bac8a62aa31431e343f25f957a5392863fb/docs%2Freleases%2F1.3.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.3.txt?ref=37343bac8a62aa31431e343f25f957a5392863fb",
            "patch": "@@ -305,34 +305,10 @@ header X-CSRFTOKEN, as well as in the form submission itself, for ease\n of use with popular JavaScript toolkits which allow insertion of\n custom headers into all AJAX requests.\n \n-The following example using the jQuery JavaScript toolkit demonstrates\n-this; the call to jQuery's ajaxSetup will cause all AJAX requests to\n-send back the CSRF token in the custom X-CSRFTOKEN header::\n-\n-    $.ajaxSetup({\n-        beforeSend: function(xhr, settings) {\n-            function getCookie(name) {\n-                var cookieValue = null;\n-                if (document.cookie && document.cookie != '') {\n-                    var cookies = document.cookie.split(';');\n-                    for (var i = 0; i < cookies.length; i++) {\n-                        var cookie = jQuery.trim(cookies[i]);\n-                        // Does this cookie string begin with the name we want?\n-                        if (cookie.substring(0, name.length + 1) == (name + '=')) {\n-                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n-                            break;\n-                        }\n-                    }\n-                }\n-                return cookieValue;\n-            }\n-            if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {\n-                // Only send the token to relative URLs i.e. locally.\n-                xhr.setRequestHeader(\"X-CSRFToken\", getCookie('csrftoken'));\n-            }\n-        }\n-    });\n-\n+Please see the :ref:`CSRF docs for example jQuery code <csrf-ajax>`\n+that demonstrates this technique, ensuring that you are looking at the\n+documentation for your version of Django, as the exact code necessary\n+is different for some older versions of Django.\n \n Restricted filters in admin interface\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
        }
    ],
    "stats": {
        "total": 84,
        "additions": 14,
        "deletions": 70
    }
}