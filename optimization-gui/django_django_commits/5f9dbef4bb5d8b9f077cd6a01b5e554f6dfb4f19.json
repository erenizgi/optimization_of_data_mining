{
    "author": "adrianholovaty",
    "message": "Fixed #17335 -- Added supports_select_related hook for django-nonrel. Thanks, jonash\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17170 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "5f9dbef4bb5d8b9f077cd6a01b5e554f6dfb4f19",
    "files": [
        {
            "sha": "f2bde840d7e5b42905b382d34723df42e4fcb907",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/5f9dbef4bb5d8b9f077cd6a01b5e554f6dfb4f19/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/5f9dbef4bb5d8b9f077cd6a01b5e554f6dfb4f19/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=5f9dbef4bb5d8b9f077cd6a01b5e554f6dfb4f19",
            "patch": "@@ -313,6 +313,8 @@ class BaseDatabaseFeatures(object):\n     has_select_for_update = False\n     has_select_for_update_nowait = False\n \n+    supports_select_related = True\n+\n     # Does the default test database allow multiple connections?\n     # Usually an indication that the test database is in-memory\n     test_db_allows_multiple_connections = True"
        },
        {
            "sha": "1b8636276aca83f626a82343671931b38994130f",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/5f9dbef4bb5d8b9f077cd6a01b5e554f6dfb4f19/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/5f9dbef4bb5d8b9f077cd6a01b5e554f6dfb4f19/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=5f9dbef4bb5d8b9f077cd6a01b5e554f6dfb4f19",
            "patch": "@@ -232,7 +232,9 @@ def iterator(self):\n         An iterator over the results from applying this QuerySet to the\n         database.\n         \"\"\"\n-        fill_cache = self.query.select_related\n+        fill_cache = False\n+        if connections[self.db].features.supports_select_related:\n+            fill_cache = self.query.select_related\n         if isinstance(fill_cache, dict):\n             requested = fill_cache\n         else:"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}