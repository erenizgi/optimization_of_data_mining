{
    "author": "freakboy3742",
    "message": "Fixed #16490 -- Skipped a test failure that only occurs under Python 2.6.1 (it's the old iteration-eats-exceptions problem).\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16784 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "161c6328a0811280926a16275be5ef4164f5866f",
    "files": [
        {
            "sha": "f8b7bba0cbe8635ef2378427485654388eaac347",
            "filename": "tests/modeltests/select_for_update/tests.py",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/161c6328a0811280926a16275be5ef4164f5866f/tests%2Fmodeltests%2Fselect_for_update%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/161c6328a0811280926a16275be5ef4164f5866f/tests%2Fmodeltests%2Fselect_for_update%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fselect_for_update%2Ftests.py?ref=161c6328a0811280926a16275be5ef4164f5866f",
            "patch": "@@ -101,10 +101,11 @@ def test_for_update_sql_generated_nowait(self):\n     # are swallowed (Python issue 1242657), so these cases return an empty\n     # list, rather than raising an exception. Not a lot we can do about that,\n     # unfortunately, due to the way Python handles list() calls internally.\n-    # Thus, we skip this test for Python 2.6.\n+    # Python 2.6.1 is the \"in the wild\" version affected by this, so we skip\n+    # the test for that version.\n     @requires_threading\n     @skipUnlessDBFeature('has_select_for_update_nowait')\n-    @unittest.skipIf(sys.version_info[:2] == (2, 6), \"Python version is 2.6\")\n+    @unittest.skipIf(sys.version_info[:3] == (2, 6, 1), \"Python version is 2.6.1\")\n     def test_nowait_raises_error_on_block(self):\n         \"\"\"\n         If nowait is specified, we expect an error to be raised rather\n@@ -124,8 +125,15 @@ def test_nowait_raises_error_on_block(self):\n         self.end_blocking_transaction()\n         self.check_exc(status[-1])\n \n+    # In Python 2.6 beta and some final releases, exceptions raised in __len__\n+    # are swallowed (Python issue 1242657), so these cases return an empty\n+    # list, rather than raising an exception. Not a lot we can do about that,\n+    # unfortunately, due to the way Python handles list() calls internally.\n+    # Python 2.6.1 is the \"in the wild\" version affected by this, so we skip\n+    # the test for that version.\n     @skipIfDBFeature('has_select_for_update_nowait')\n     @skipUnlessDBFeature('has_select_for_update')\n+    @unittest.skipIf(sys.version_info[:3] == (2, 6, 1), \"Python version is 2.6.1\")\n     def test_unsupported_nowait_raises_error(self):\n         \"\"\"\n         If a SELECT...FOR UPDATE NOWAIT is run on a database backend"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 10,
        "deletions": 2
    }
}