{
    "author": "freakboy3742",
    "message": "Fixed #16681 -- Refactored the invalid_models unit test so that it can be invoked manually. Thanks to Anthony Briggs for the report and patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16661 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5",
    "files": [
        {
            "sha": "74399f840f665e0ddc365707da749b96e9eedfec",
            "filename": "AUTHORS",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/AUTHORS",
            "raw_url": "https://github.com/django/django/raw/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/AUTHORS",
            "contents_url": "https://api.github.com/repos/django/django/contents/AUTHORS?ref=1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5",
            "patch": "@@ -96,6 +96,7 @@ answer newbie questions, and generally made Django that much better:\n     Sean Brant\n     Andrew Brehaut <http://brehaut.net/blog>\n     David Brenneman <http://davidbrenneman.com>\n+    Anthony Briggs <anthony.briggs@gmail.com>\n     Orne Brocaar <http://brocaar.com/>\n     brut.alll@gmail.com\n     bthomas"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/modeltests/invalid_models/invalid_models/__init__.py",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2F__init__.py?ref=1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5"
        },
        {
            "sha": "45f302413dda9a10646828bcec251addc07a146f",
            "filename": "tests/modeltests/invalid_models/invalid_models/models.py",
            "status": "added",
            "additions": 330,
            "deletions": 0,
            "changes": 330,
            "blob_url": "https://github.com/django/django/blob/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Finvalid_models%2Finvalid_models%2Fmodels.py?ref=1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5",
            "patch": "@@ -0,0 +1,330 @@\n+\"\"\"\n+26. Invalid models\n+\n+This example exists purely to point out errors in models.\n+\"\"\"\n+\n+from django.db import models\n+\n+class FieldErrors(models.Model):\n+    charfield = models.CharField()\n+    charfield2 = models.CharField(max_length=-1)\n+    charfield3 = models.CharField(max_length=\"bad\")\n+    decimalfield = models.DecimalField()\n+    decimalfield2 = models.DecimalField(max_digits=-1, decimal_places=-1)\n+    decimalfield3 = models.DecimalField(max_digits=\"bad\", decimal_places=\"bad\")\n+    decimalfield4 = models.DecimalField(max_digits=9, decimal_places=10)\n+    decimalfield5 = models.DecimalField(max_digits=10, decimal_places=10)\n+    filefield = models.FileField()\n+    choices = models.CharField(max_length=10, choices='bad')\n+    choices2 = models.CharField(max_length=10, choices=[(1,2,3),(1,2,3)])\n+    index = models.CharField(max_length=10, db_index='bad')\n+    field_ = models.CharField(max_length=10)\n+    nullbool = models.BooleanField(null=True)\n+\n+class Target(models.Model):\n+    tgt_safe = models.CharField(max_length=10)\n+    clash1 = models.CharField(max_length=10)\n+    clash2 = models.CharField(max_length=10)\n+\n+    clash1_set = models.CharField(max_length=10)\n+\n+class Clash1(models.Model):\n+    src_safe = models.CharField(max_length=10)\n+\n+    foreign = models.ForeignKey(Target)\n+    m2m = models.ManyToManyField(Target)\n+\n+class Clash2(models.Model):\n+    src_safe = models.CharField(max_length=10)\n+\n+    foreign_1 = models.ForeignKey(Target, related_name='id')\n+    foreign_2 = models.ForeignKey(Target, related_name='src_safe')\n+\n+    m2m_1 = models.ManyToManyField(Target, related_name='id')\n+    m2m_2 = models.ManyToManyField(Target, related_name='src_safe')\n+\n+class Target2(models.Model):\n+    clash3 = models.CharField(max_length=10)\n+    foreign_tgt = models.ForeignKey(Target)\n+    clashforeign_set = models.ForeignKey(Target)\n+\n+    m2m_tgt = models.ManyToManyField(Target)\n+    clashm2m_set = models.ManyToManyField(Target)\n+\n+class Clash3(models.Model):\n+    src_safe = models.CharField(max_length=10)\n+\n+    foreign_1 = models.ForeignKey(Target2, related_name='foreign_tgt')\n+    foreign_2 = models.ForeignKey(Target2, related_name='m2m_tgt')\n+\n+    m2m_1 = models.ManyToManyField(Target2, related_name='foreign_tgt')\n+    m2m_2 = models.ManyToManyField(Target2, related_name='m2m_tgt')\n+\n+class ClashForeign(models.Model):\n+    foreign = models.ForeignKey(Target2)\n+\n+class ClashM2M(models.Model):\n+    m2m = models.ManyToManyField(Target2)\n+\n+class SelfClashForeign(models.Model):\n+    src_safe = models.CharField(max_length=10)\n+    selfclashforeign = models.CharField(max_length=10)\n+\n+    selfclashforeign_set = models.ForeignKey(\"SelfClashForeign\")\n+    foreign_1 = models.ForeignKey(\"SelfClashForeign\", related_name='id')\n+    foreign_2 = models.ForeignKey(\"SelfClashForeign\", related_name='src_safe')\n+\n+class ValidM2M(models.Model):\n+    src_safe = models.CharField(max_length=10)\n+    validm2m = models.CharField(max_length=10)\n+\n+    # M2M fields are symmetrical by default. Symmetrical M2M fields\n+    # on self don't require a related accessor, so many potential\n+    # clashes are avoided.\n+    validm2m_set = models.ManyToManyField(\"self\")\n+\n+    m2m_1 = models.ManyToManyField(\"self\", related_name='id')\n+    m2m_2 = models.ManyToManyField(\"self\", related_name='src_safe')\n+\n+    m2m_3 = models.ManyToManyField('self')\n+    m2m_4 = models.ManyToManyField('self')\n+\n+class SelfClashM2M(models.Model):\n+    src_safe = models.CharField(max_length=10)\n+    selfclashm2m = models.CharField(max_length=10)\n+\n+    # Non-symmetrical M2M fields _do_ have related accessors, so\n+    # there is potential for clashes.\n+    selfclashm2m_set = models.ManyToManyField(\"self\", symmetrical=False)\n+\n+    m2m_1 = models.ManyToManyField(\"self\", related_name='id', symmetrical=False)\n+    m2m_2 = models.ManyToManyField(\"self\", related_name='src_safe', symmetrical=False)\n+\n+    m2m_3 = models.ManyToManyField('self', symmetrical=False)\n+    m2m_4 = models.ManyToManyField('self', symmetrical=False)\n+\n+class Model(models.Model):\n+    \"But it's valid to call a model Model.\"\n+    year = models.PositiveIntegerField() #1960\n+    make = models.CharField(max_length=10) #Aston Martin\n+    name = models.CharField(max_length=10) #DB 4 GT\n+\n+class Car(models.Model):\n+    colour = models.CharField(max_length=5)\n+    model = models.ForeignKey(Model)\n+\n+class MissingRelations(models.Model):\n+    rel1 = models.ForeignKey(\"Rel1\")\n+    rel2 = models.ManyToManyField(\"Rel2\")\n+\n+class MissingManualM2MModel(models.Model):\n+    name = models.CharField(max_length=5)\n+    missing_m2m = models.ManyToManyField(Model, through=\"MissingM2MModel\")\n+\n+class Person(models.Model):\n+    name = models.CharField(max_length=5)\n+\n+class Group(models.Model):\n+    name = models.CharField(max_length=5)\n+    primary = models.ManyToManyField(Person, through=\"Membership\", related_name=\"primary\")\n+    secondary = models.ManyToManyField(Person, through=\"Membership\", related_name=\"secondary\")\n+    tertiary = models.ManyToManyField(Person, through=\"RelationshipDoubleFK\", related_name=\"tertiary\")\n+\n+class GroupTwo(models.Model):\n+    name = models.CharField(max_length=5)\n+    primary = models.ManyToManyField(Person, through=\"Membership\")\n+    secondary = models.ManyToManyField(Group, through=\"MembershipMissingFK\")\n+\n+class Membership(models.Model):\n+    person = models.ForeignKey(Person)\n+    group = models.ForeignKey(Group)\n+    not_default_or_null = models.CharField(max_length=5)\n+\n+class MembershipMissingFK(models.Model):\n+    person = models.ForeignKey(Person)\n+\n+class PersonSelfRefM2M(models.Model):\n+    name = models.CharField(max_length=5)\n+    friends = models.ManyToManyField('self', through=\"Relationship\")\n+    too_many_friends = models.ManyToManyField('self', through=\"RelationshipTripleFK\")\n+\n+class PersonSelfRefM2MExplicit(models.Model):\n+    name = models.CharField(max_length=5)\n+    friends = models.ManyToManyField('self', through=\"ExplicitRelationship\", symmetrical=True)\n+\n+class Relationship(models.Model):\n+    first = models.ForeignKey(PersonSelfRefM2M, related_name=\"rel_from_set\")\n+    second = models.ForeignKey(PersonSelfRefM2M, related_name=\"rel_to_set\")\n+    date_added = models.DateTimeField()\n+\n+class ExplicitRelationship(models.Model):\n+    first = models.ForeignKey(PersonSelfRefM2MExplicit, related_name=\"rel_from_set\")\n+    second = models.ForeignKey(PersonSelfRefM2MExplicit, related_name=\"rel_to_set\")\n+    date_added = models.DateTimeField()\n+\n+class RelationshipTripleFK(models.Model):\n+    first = models.ForeignKey(PersonSelfRefM2M, related_name=\"rel_from_set_2\")\n+    second = models.ForeignKey(PersonSelfRefM2M, related_name=\"rel_to_set_2\")\n+    third = models.ForeignKey(PersonSelfRefM2M, related_name=\"too_many_by_far\")\n+    date_added = models.DateTimeField()\n+\n+class RelationshipDoubleFK(models.Model):\n+    first = models.ForeignKey(Person, related_name=\"first_related_name\")\n+    second = models.ForeignKey(Person, related_name=\"second_related_name\")\n+    third = models.ForeignKey(Group, related_name=\"rel_to_set\")\n+    date_added = models.DateTimeField()\n+\n+class AbstractModel(models.Model):\n+    name = models.CharField(max_length=10)\n+    class Meta:\n+        abstract = True\n+\n+class AbstractRelationModel(models.Model):\n+    fk1 = models.ForeignKey('AbstractModel')\n+    fk2 = models.ManyToManyField('AbstractModel')\n+\n+class UniqueM2M(models.Model):\n+    \"\"\" Model to test for unique ManyToManyFields, which are invalid. \"\"\"\n+    unique_people = models.ManyToManyField(Person, unique=True)\n+\n+class NonUniqueFKTarget1(models.Model):\n+    \"\"\" Model to test for non-unique FK target in yet-to-be-defined model: expect an error \"\"\"\n+    tgt = models.ForeignKey('FKTarget', to_field='bad')\n+\n+class UniqueFKTarget1(models.Model):\n+    \"\"\" Model to test for unique FK target in yet-to-be-defined model: expect no error \"\"\"\n+    tgt = models.ForeignKey('FKTarget', to_field='good')\n+\n+class FKTarget(models.Model):\n+    bad = models.IntegerField()\n+    good = models.IntegerField(unique=True)\n+\n+class NonUniqueFKTarget2(models.Model):\n+    \"\"\" Model to test for non-unique FK target in previously seen model: expect an error \"\"\"\n+    tgt = models.ForeignKey(FKTarget, to_field='bad')\n+\n+class UniqueFKTarget2(models.Model):\n+    \"\"\" Model to test for unique FK target in previously seen model: expect no error \"\"\"\n+    tgt = models.ForeignKey(FKTarget, to_field='good')\n+\n+class NonExistingOrderingWithSingleUnderscore(models.Model):\n+    class Meta:\n+        ordering = (\"does_not_exist\",)\n+\n+class InvalidSetNull(models.Model):\n+    fk = models.ForeignKey('self', on_delete=models.SET_NULL)\n+\n+class InvalidSetDefault(models.Model):\n+    fk = models.ForeignKey('self', on_delete=models.SET_DEFAULT)\n+\n+model_errors = \"\"\"invalid_models.fielderrors: \"charfield\": CharFields require a \"max_length\" attribute that is a positive integer.\n+invalid_models.fielderrors: \"charfield2\": CharFields require a \"max_length\" attribute that is a positive integer.\n+invalid_models.fielderrors: \"charfield3\": CharFields require a \"max_length\" attribute that is a positive integer.\n+invalid_models.fielderrors: \"decimalfield\": DecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\n+invalid_models.fielderrors: \"decimalfield\": DecimalFields require a \"max_digits\" attribute that is a positive integer.\n+invalid_models.fielderrors: \"decimalfield2\": DecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\n+invalid_models.fielderrors: \"decimalfield2\": DecimalFields require a \"max_digits\" attribute that is a positive integer.\n+invalid_models.fielderrors: \"decimalfield3\": DecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\n+invalid_models.fielderrors: \"decimalfield3\": DecimalFields require a \"max_digits\" attribute that is a positive integer.\n+invalid_models.fielderrors: \"decimalfield4\": DecimalFields require a \"max_digits\" attribute value that is greater than the value of the \"decimal_places\" attribute.\n+invalid_models.fielderrors: \"decimalfield5\": DecimalFields require a \"max_digits\" attribute value that is greater than the value of the \"decimal_places\" attribute.\n+invalid_models.fielderrors: \"filefield\": FileFields require an \"upload_to\" attribute.\n+invalid_models.fielderrors: \"choices\": \"choices\" should be iterable (e.g., a tuple or list).\n+invalid_models.fielderrors: \"choices2\": \"choices\" should be a sequence of two-tuples.\n+invalid_models.fielderrors: \"choices2\": \"choices\" should be a sequence of two-tuples.\n+invalid_models.fielderrors: \"index\": \"db_index\" should be either None, True or False.\n+invalid_models.fielderrors: \"field_\": Field names cannot end with underscores, because this would lead to ambiguous queryset filters.\n+invalid_models.fielderrors: \"nullbool\": BooleanFields do not accept null values. Use a NullBooleanField instead.\n+invalid_models.clash1: Accessor for field 'foreign' clashes with field 'Target.clash1_set'. Add a related_name argument to the definition for 'foreign'.\n+invalid_models.clash1: Accessor for field 'foreign' clashes with related m2m field 'Target.clash1_set'. Add a related_name argument to the definition for 'foreign'.\n+invalid_models.clash1: Reverse query name for field 'foreign' clashes with field 'Target.clash1'. Add a related_name argument to the definition for 'foreign'.\n+invalid_models.clash1: Accessor for m2m field 'm2m' clashes with field 'Target.clash1_set'. Add a related_name argument to the definition for 'm2m'.\n+invalid_models.clash1: Accessor for m2m field 'm2m' clashes with related field 'Target.clash1_set'. Add a related_name argument to the definition for 'm2m'.\n+invalid_models.clash1: Reverse query name for m2m field 'm2m' clashes with field 'Target.clash1'. Add a related_name argument to the definition for 'm2m'.\n+invalid_models.clash2: Accessor for field 'foreign_1' clashes with field 'Target.id'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.clash2: Accessor for field 'foreign_1' clashes with related m2m field 'Target.id'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.clash2: Reverse query name for field 'foreign_1' clashes with field 'Target.id'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.clash2: Reverse query name for field 'foreign_1' clashes with related m2m field 'Target.id'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.clash2: Accessor for field 'foreign_2' clashes with related m2m field 'Target.src_safe'. Add a related_name argument to the definition for 'foreign_2'.\n+invalid_models.clash2: Reverse query name for field 'foreign_2' clashes with related m2m field 'Target.src_safe'. Add a related_name argument to the definition for 'foreign_2'.\n+invalid_models.clash2: Accessor for m2m field 'm2m_1' clashes with field 'Target.id'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.clash2: Accessor for m2m field 'm2m_1' clashes with related field 'Target.id'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.clash2: Reverse query name for m2m field 'm2m_1' clashes with field 'Target.id'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.clash2: Reverse query name for m2m field 'm2m_1' clashes with related field 'Target.id'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.clash2: Accessor for m2m field 'm2m_2' clashes with related field 'Target.src_safe'. Add a related_name argument to the definition for 'm2m_2'.\n+invalid_models.clash2: Reverse query name for m2m field 'm2m_2' clashes with related field 'Target.src_safe'. Add a related_name argument to the definition for 'm2m_2'.\n+invalid_models.clash3: Accessor for field 'foreign_1' clashes with field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.clash3: Accessor for field 'foreign_1' clashes with related m2m field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.clash3: Reverse query name for field 'foreign_1' clashes with field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.clash3: Reverse query name for field 'foreign_1' clashes with related m2m field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.clash3: Accessor for field 'foreign_2' clashes with m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'foreign_2'.\n+invalid_models.clash3: Accessor for field 'foreign_2' clashes with related m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'foreign_2'.\n+invalid_models.clash3: Reverse query name for field 'foreign_2' clashes with m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'foreign_2'.\n+invalid_models.clash3: Reverse query name for field 'foreign_2' clashes with related m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'foreign_2'.\n+invalid_models.clash3: Accessor for m2m field 'm2m_1' clashes with field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.clash3: Accessor for m2m field 'm2m_1' clashes with related field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.clash3: Reverse query name for m2m field 'm2m_1' clashes with field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.clash3: Reverse query name for m2m field 'm2m_1' clashes with related field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.clash3: Accessor for m2m field 'm2m_2' clashes with m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'm2m_2'.\n+invalid_models.clash3: Accessor for m2m field 'm2m_2' clashes with related field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'm2m_2'.\n+invalid_models.clash3: Reverse query name for m2m field 'm2m_2' clashes with m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'm2m_2'.\n+invalid_models.clash3: Reverse query name for m2m field 'm2m_2' clashes with related field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'm2m_2'.\n+invalid_models.clashforeign: Accessor for field 'foreign' clashes with field 'Target2.clashforeign_set'. Add a related_name argument to the definition for 'foreign'.\n+invalid_models.clashm2m: Accessor for m2m field 'm2m' clashes with m2m field 'Target2.clashm2m_set'. Add a related_name argument to the definition for 'm2m'.\n+invalid_models.target2: Accessor for field 'foreign_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'foreign_tgt'.\n+invalid_models.target2: Accessor for field 'foreign_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'foreign_tgt'.\n+invalid_models.target2: Accessor for field 'foreign_tgt' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'foreign_tgt'.\n+invalid_models.target2: Accessor for field 'clashforeign_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashforeign_set'.\n+invalid_models.target2: Accessor for field 'clashforeign_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashforeign_set'.\n+invalid_models.target2: Accessor for field 'clashforeign_set' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'clashforeign_set'.\n+invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n+invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n+invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n+invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n+invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n+invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n+invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n+invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n+invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n+invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n+invalid_models.selfclashforeign: Accessor for field 'selfclashforeign_set' clashes with field 'SelfClashForeign.selfclashforeign_set'. Add a related_name argument to the definition for 'selfclashforeign_set'.\n+invalid_models.selfclashforeign: Reverse query name for field 'selfclashforeign_set' clashes with field 'SelfClashForeign.selfclashforeign'. Add a related_name argument to the definition for 'selfclashforeign_set'.\n+invalid_models.selfclashforeign: Accessor for field 'foreign_1' clashes with field 'SelfClashForeign.id'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.selfclashforeign: Reverse query name for field 'foreign_1' clashes with field 'SelfClashForeign.id'. Add a related_name argument to the definition for 'foreign_1'.\n+invalid_models.selfclashforeign: Accessor for field 'foreign_2' clashes with field 'SelfClashForeign.src_safe'. Add a related_name argument to the definition for 'foreign_2'.\n+invalid_models.selfclashforeign: Reverse query name for field 'foreign_2' clashes with field 'SelfClashForeign.src_safe'. Add a related_name argument to the definition for 'foreign_2'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'selfclashm2m_set' clashes with m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'selfclashm2m_set'.\n+invalid_models.selfclashm2m: Reverse query name for m2m field 'selfclashm2m_set' clashes with field 'SelfClashM2M.selfclashm2m'. Add a related_name argument to the definition for 'selfclashm2m_set'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'selfclashm2m_set' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'selfclashm2m_set'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'm2m_1' clashes with field 'SelfClashM2M.id'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'm2m_2' clashes with field 'SelfClashM2M.src_safe'. Add a related_name argument to the definition for 'm2m_2'.\n+invalid_models.selfclashm2m: Reverse query name for m2m field 'm2m_1' clashes with field 'SelfClashM2M.id'. Add a related_name argument to the definition for 'm2m_1'.\n+invalid_models.selfclashm2m: Reverse query name for m2m field 'm2m_2' clashes with field 'SelfClashM2M.src_safe'. Add a related_name argument to the definition for 'm2m_2'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'm2m_3' clashes with m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_3'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'm2m_3' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_3'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'm2m_3' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_3'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'm2m_4' clashes with m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_4'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'm2m_4' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_4'.\n+invalid_models.selfclashm2m: Accessor for m2m field 'm2m_4' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_4'.\n+invalid_models.selfclashm2m: Reverse query name for m2m field 'm2m_3' clashes with field 'SelfClashM2M.selfclashm2m'. Add a related_name argument to the definition for 'm2m_3'.\n+invalid_models.selfclashm2m: Reverse query name for m2m field 'm2m_4' clashes with field 'SelfClashM2M.selfclashm2m'. Add a related_name argument to the definition for 'm2m_4'.\n+invalid_models.missingrelations: 'rel1' has a relation with model Rel1, which has either not been installed or is abstract.\n+invalid_models.missingrelations: 'rel2' has an m2m relation with model Rel2, which has either not been installed or is abstract.\n+invalid_models.grouptwo: 'primary' is a manually-defined m2m relation through model Membership, which does not have foreign keys to Person and GroupTwo\n+invalid_models.grouptwo: 'secondary' is a manually-defined m2m relation through model MembershipMissingFK, which does not have foreign keys to Group and GroupTwo\n+invalid_models.missingmanualm2mmodel: 'missing_m2m' specifies an m2m relation through model MissingM2MModel, which has not been installed\n+invalid_models.group: The model Group has two manually-defined m2m relations through the model Membership, which is not permitted. Please consider using an extra field on your intermediary model instead.\n+invalid_models.group: Intermediary model RelationshipDoubleFK has more than one foreign key to Person, which is ambiguous and is not permitted.\n+invalid_models.personselfrefm2m: Many-to-many fields with intermediate tables cannot be symmetrical.\n+invalid_models.personselfrefm2m: Intermediary model RelationshipTripleFK has more than two foreign keys to PersonSelfRefM2M, which is ambiguous and is not permitted.\n+invalid_models.personselfrefm2mexplicit: Many-to-many fields with intermediate tables cannot be symmetrical.\n+invalid_models.abstractrelationmodel: 'fk1' has a relation with model AbstractModel, which has either not been installed or is abstract.\n+invalid_models.abstractrelationmodel: 'fk2' has an m2m relation with model AbstractModel, which has either not been installed or is abstract.\n+invalid_models.uniquem2m: ManyToManyFields cannot be unique.  Remove the unique argument on 'unique_people'.\n+invalid_models.nonuniquefktarget1: Field 'bad' under model 'FKTarget' must have a unique=True constraint.\n+invalid_models.nonuniquefktarget2: Field 'bad' under model 'FKTarget' must have a unique=True constraint.\n+invalid_models.nonexistingorderingwithsingleunderscore: \"ordering\" refers to \"does_not_exist\", a field that doesn't exist.\n+invalid_models.invalidsetnull: 'fk' specifies on_delete=SET_NULL, but cannot be null.\n+invalid_models.invalidsetdefault: 'fk' specifies on_delete=SET_DEFAULT, but has no default value.\n+\"\"\""
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tests/modeltests/invalid_models/models.py",
            "status": "modified",
            "additions": 0,
            "deletions": 330,
            "changes": 330,
            "blob_url": "https://github.com/django/django/blob/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fmodeltests%2Finvalid_models%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fmodeltests%2Finvalid_models%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Finvalid_models%2Fmodels.py?ref=1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5",
            "patch": "@@ -1,330 +0,0 @@\n-\"\"\"\n-26. Invalid models\n-\n-This example exists purely to point out errors in models.\n-\"\"\"\n-\n-from django.db import models\n-\n-class FieldErrors(models.Model):\n-    charfield = models.CharField()\n-    charfield2 = models.CharField(max_length=-1)\n-    charfield3 = models.CharField(max_length=\"bad\")\n-    decimalfield = models.DecimalField()\n-    decimalfield2 = models.DecimalField(max_digits=-1, decimal_places=-1)\n-    decimalfield3 = models.DecimalField(max_digits=\"bad\", decimal_places=\"bad\")\n-    decimalfield4 = models.DecimalField(max_digits=9, decimal_places=10)\n-    decimalfield5 = models.DecimalField(max_digits=10, decimal_places=10)\n-    filefield = models.FileField()\n-    choices = models.CharField(max_length=10, choices='bad')\n-    choices2 = models.CharField(max_length=10, choices=[(1,2,3),(1,2,3)])\n-    index = models.CharField(max_length=10, db_index='bad')\n-    field_ = models.CharField(max_length=10)\n-    nullbool = models.BooleanField(null=True)\n-\n-class Target(models.Model):\n-    tgt_safe = models.CharField(max_length=10)\n-    clash1 = models.CharField(max_length=10)\n-    clash2 = models.CharField(max_length=10)\n-\n-    clash1_set = models.CharField(max_length=10)\n-\n-class Clash1(models.Model):\n-    src_safe = models.CharField(max_length=10)\n-\n-    foreign = models.ForeignKey(Target)\n-    m2m = models.ManyToManyField(Target)\n-\n-class Clash2(models.Model):\n-    src_safe = models.CharField(max_length=10)\n-\n-    foreign_1 = models.ForeignKey(Target, related_name='id')\n-    foreign_2 = models.ForeignKey(Target, related_name='src_safe')\n-\n-    m2m_1 = models.ManyToManyField(Target, related_name='id')\n-    m2m_2 = models.ManyToManyField(Target, related_name='src_safe')\n-\n-class Target2(models.Model):\n-    clash3 = models.CharField(max_length=10)\n-    foreign_tgt = models.ForeignKey(Target)\n-    clashforeign_set = models.ForeignKey(Target)\n-\n-    m2m_tgt = models.ManyToManyField(Target)\n-    clashm2m_set = models.ManyToManyField(Target)\n-\n-class Clash3(models.Model):\n-    src_safe = models.CharField(max_length=10)\n-\n-    foreign_1 = models.ForeignKey(Target2, related_name='foreign_tgt')\n-    foreign_2 = models.ForeignKey(Target2, related_name='m2m_tgt')\n-\n-    m2m_1 = models.ManyToManyField(Target2, related_name='foreign_tgt')\n-    m2m_2 = models.ManyToManyField(Target2, related_name='m2m_tgt')\n-\n-class ClashForeign(models.Model):\n-    foreign = models.ForeignKey(Target2)\n-\n-class ClashM2M(models.Model):\n-    m2m = models.ManyToManyField(Target2)\n-\n-class SelfClashForeign(models.Model):\n-    src_safe = models.CharField(max_length=10)\n-    selfclashforeign = models.CharField(max_length=10)\n-\n-    selfclashforeign_set = models.ForeignKey(\"SelfClashForeign\")\n-    foreign_1 = models.ForeignKey(\"SelfClashForeign\", related_name='id')\n-    foreign_2 = models.ForeignKey(\"SelfClashForeign\", related_name='src_safe')\n-\n-class ValidM2M(models.Model):\n-    src_safe = models.CharField(max_length=10)\n-    validm2m = models.CharField(max_length=10)\n-\n-    # M2M fields are symmetrical by default. Symmetrical M2M fields\n-    # on self don't require a related accessor, so many potential\n-    # clashes are avoided.\n-    validm2m_set = models.ManyToManyField(\"self\")\n-\n-    m2m_1 = models.ManyToManyField(\"self\", related_name='id')\n-    m2m_2 = models.ManyToManyField(\"self\", related_name='src_safe')\n-\n-    m2m_3 = models.ManyToManyField('self')\n-    m2m_4 = models.ManyToManyField('self')\n-\n-class SelfClashM2M(models.Model):\n-    src_safe = models.CharField(max_length=10)\n-    selfclashm2m = models.CharField(max_length=10)\n-\n-    # Non-symmetrical M2M fields _do_ have related accessors, so\n-    # there is potential for clashes.\n-    selfclashm2m_set = models.ManyToManyField(\"self\", symmetrical=False)\n-\n-    m2m_1 = models.ManyToManyField(\"self\", related_name='id', symmetrical=False)\n-    m2m_2 = models.ManyToManyField(\"self\", related_name='src_safe', symmetrical=False)\n-\n-    m2m_3 = models.ManyToManyField('self', symmetrical=False)\n-    m2m_4 = models.ManyToManyField('self', symmetrical=False)\n-\n-class Model(models.Model):\n-    \"But it's valid to call a model Model.\"\n-    year = models.PositiveIntegerField() #1960\n-    make = models.CharField(max_length=10) #Aston Martin\n-    name = models.CharField(max_length=10) #DB 4 GT\n-\n-class Car(models.Model):\n-    colour = models.CharField(max_length=5)\n-    model = models.ForeignKey(Model)\n-\n-class MissingRelations(models.Model):\n-    rel1 = models.ForeignKey(\"Rel1\")\n-    rel2 = models.ManyToManyField(\"Rel2\")\n-\n-class MissingManualM2MModel(models.Model):\n-    name = models.CharField(max_length=5)\n-    missing_m2m = models.ManyToManyField(Model, through=\"MissingM2MModel\")\n-\n-class Person(models.Model):\n-    name = models.CharField(max_length=5)\n-\n-class Group(models.Model):\n-    name = models.CharField(max_length=5)\n-    primary = models.ManyToManyField(Person, through=\"Membership\", related_name=\"primary\")\n-    secondary = models.ManyToManyField(Person, through=\"Membership\", related_name=\"secondary\")\n-    tertiary = models.ManyToManyField(Person, through=\"RelationshipDoubleFK\", related_name=\"tertiary\")\n-\n-class GroupTwo(models.Model):\n-    name = models.CharField(max_length=5)\n-    primary = models.ManyToManyField(Person, through=\"Membership\")\n-    secondary = models.ManyToManyField(Group, through=\"MembershipMissingFK\")\n-\n-class Membership(models.Model):\n-    person = models.ForeignKey(Person)\n-    group = models.ForeignKey(Group)\n-    not_default_or_null = models.CharField(max_length=5)\n-\n-class MembershipMissingFK(models.Model):\n-    person = models.ForeignKey(Person)\n-\n-class PersonSelfRefM2M(models.Model):\n-    name = models.CharField(max_length=5)\n-    friends = models.ManyToManyField('self', through=\"Relationship\")\n-    too_many_friends = models.ManyToManyField('self', through=\"RelationshipTripleFK\")\n-\n-class PersonSelfRefM2MExplicit(models.Model):\n-    name = models.CharField(max_length=5)\n-    friends = models.ManyToManyField('self', through=\"ExplicitRelationship\", symmetrical=True)\n-\n-class Relationship(models.Model):\n-    first = models.ForeignKey(PersonSelfRefM2M, related_name=\"rel_from_set\")\n-    second = models.ForeignKey(PersonSelfRefM2M, related_name=\"rel_to_set\")\n-    date_added = models.DateTimeField()\n-\n-class ExplicitRelationship(models.Model):\n-    first = models.ForeignKey(PersonSelfRefM2MExplicit, related_name=\"rel_from_set\")\n-    second = models.ForeignKey(PersonSelfRefM2MExplicit, related_name=\"rel_to_set\")\n-    date_added = models.DateTimeField()\n-\n-class RelationshipTripleFK(models.Model):\n-    first = models.ForeignKey(PersonSelfRefM2M, related_name=\"rel_from_set_2\")\n-    second = models.ForeignKey(PersonSelfRefM2M, related_name=\"rel_to_set_2\")\n-    third = models.ForeignKey(PersonSelfRefM2M, related_name=\"too_many_by_far\")\n-    date_added = models.DateTimeField()\n-\n-class RelationshipDoubleFK(models.Model):\n-    first = models.ForeignKey(Person, related_name=\"first_related_name\")\n-    second = models.ForeignKey(Person, related_name=\"second_related_name\")\n-    third = models.ForeignKey(Group, related_name=\"rel_to_set\")\n-    date_added = models.DateTimeField()\n-\n-class AbstractModel(models.Model):\n-    name = models.CharField(max_length=10)\n-    class Meta:\n-        abstract = True\n-\n-class AbstractRelationModel(models.Model):\n-    fk1 = models.ForeignKey('AbstractModel')\n-    fk2 = models.ManyToManyField('AbstractModel')\n-\n-class UniqueM2M(models.Model):\n-    \"\"\" Model to test for unique ManyToManyFields, which are invalid. \"\"\"\n-    unique_people = models.ManyToManyField(Person, unique=True)\n-\n-class NonUniqueFKTarget1(models.Model):\n-    \"\"\" Model to test for non-unique FK target in yet-to-be-defined model: expect an error \"\"\"\n-    tgt = models.ForeignKey('FKTarget', to_field='bad')\n-\n-class UniqueFKTarget1(models.Model):\n-    \"\"\" Model to test for unique FK target in yet-to-be-defined model: expect no error \"\"\"\n-    tgt = models.ForeignKey('FKTarget', to_field='good')\n-\n-class FKTarget(models.Model):\n-    bad = models.IntegerField()\n-    good = models.IntegerField(unique=True)\n-\n-class NonUniqueFKTarget2(models.Model):\n-    \"\"\" Model to test for non-unique FK target in previously seen model: expect an error \"\"\"\n-    tgt = models.ForeignKey(FKTarget, to_field='bad')\n-\n-class UniqueFKTarget2(models.Model):\n-    \"\"\" Model to test for unique FK target in previously seen model: expect no error \"\"\"\n-    tgt = models.ForeignKey(FKTarget, to_field='good')\n-\n-class NonExistingOrderingWithSingleUnderscore(models.Model):\n-    class Meta:\n-        ordering = (\"does_not_exist\",)\n-\n-class InvalidSetNull(models.Model):\n-    fk = models.ForeignKey('self', on_delete=models.SET_NULL)\n-\n-class InvalidSetDefault(models.Model):\n-    fk = models.ForeignKey('self', on_delete=models.SET_DEFAULT)\n-\n-model_errors = \"\"\"invalid_models.fielderrors: \"charfield\": CharFields require a \"max_length\" attribute that is a positive integer.\n-invalid_models.fielderrors: \"charfield2\": CharFields require a \"max_length\" attribute that is a positive integer.\n-invalid_models.fielderrors: \"charfield3\": CharFields require a \"max_length\" attribute that is a positive integer.\n-invalid_models.fielderrors: \"decimalfield\": DecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\n-invalid_models.fielderrors: \"decimalfield\": DecimalFields require a \"max_digits\" attribute that is a positive integer.\n-invalid_models.fielderrors: \"decimalfield2\": DecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\n-invalid_models.fielderrors: \"decimalfield2\": DecimalFields require a \"max_digits\" attribute that is a positive integer.\n-invalid_models.fielderrors: \"decimalfield3\": DecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\n-invalid_models.fielderrors: \"decimalfield3\": DecimalFields require a \"max_digits\" attribute that is a positive integer.\n-invalid_models.fielderrors: \"decimalfield4\": DecimalFields require a \"max_digits\" attribute value that is greater than the value of the \"decimal_places\" attribute.\n-invalid_models.fielderrors: \"decimalfield5\": DecimalFields require a \"max_digits\" attribute value that is greater than the value of the \"decimal_places\" attribute.\n-invalid_models.fielderrors: \"filefield\": FileFields require an \"upload_to\" attribute.\n-invalid_models.fielderrors: \"choices\": \"choices\" should be iterable (e.g., a tuple or list).\n-invalid_models.fielderrors: \"choices2\": \"choices\" should be a sequence of two-tuples.\n-invalid_models.fielderrors: \"choices2\": \"choices\" should be a sequence of two-tuples.\n-invalid_models.fielderrors: \"index\": \"db_index\" should be either None, True or False.\n-invalid_models.fielderrors: \"field_\": Field names cannot end with underscores, because this would lead to ambiguous queryset filters.\n-invalid_models.fielderrors: \"nullbool\": BooleanFields do not accept null values. Use a NullBooleanField instead.\n-invalid_models.clash1: Accessor for field 'foreign' clashes with field 'Target.clash1_set'. Add a related_name argument to the definition for 'foreign'.\n-invalid_models.clash1: Accessor for field 'foreign' clashes with related m2m field 'Target.clash1_set'. Add a related_name argument to the definition for 'foreign'.\n-invalid_models.clash1: Reverse query name for field 'foreign' clashes with field 'Target.clash1'. Add a related_name argument to the definition for 'foreign'.\n-invalid_models.clash1: Accessor for m2m field 'm2m' clashes with field 'Target.clash1_set'. Add a related_name argument to the definition for 'm2m'.\n-invalid_models.clash1: Accessor for m2m field 'm2m' clashes with related field 'Target.clash1_set'. Add a related_name argument to the definition for 'm2m'.\n-invalid_models.clash1: Reverse query name for m2m field 'm2m' clashes with field 'Target.clash1'. Add a related_name argument to the definition for 'm2m'.\n-invalid_models.clash2: Accessor for field 'foreign_1' clashes with field 'Target.id'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.clash2: Accessor for field 'foreign_1' clashes with related m2m field 'Target.id'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.clash2: Reverse query name for field 'foreign_1' clashes with field 'Target.id'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.clash2: Reverse query name for field 'foreign_1' clashes with related m2m field 'Target.id'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.clash2: Accessor for field 'foreign_2' clashes with related m2m field 'Target.src_safe'. Add a related_name argument to the definition for 'foreign_2'.\n-invalid_models.clash2: Reverse query name for field 'foreign_2' clashes with related m2m field 'Target.src_safe'. Add a related_name argument to the definition for 'foreign_2'.\n-invalid_models.clash2: Accessor for m2m field 'm2m_1' clashes with field 'Target.id'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.clash2: Accessor for m2m field 'm2m_1' clashes with related field 'Target.id'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.clash2: Reverse query name for m2m field 'm2m_1' clashes with field 'Target.id'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.clash2: Reverse query name for m2m field 'm2m_1' clashes with related field 'Target.id'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.clash2: Accessor for m2m field 'm2m_2' clashes with related field 'Target.src_safe'. Add a related_name argument to the definition for 'm2m_2'.\n-invalid_models.clash2: Reverse query name for m2m field 'm2m_2' clashes with related field 'Target.src_safe'. Add a related_name argument to the definition for 'm2m_2'.\n-invalid_models.clash3: Accessor for field 'foreign_1' clashes with field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.clash3: Accessor for field 'foreign_1' clashes with related m2m field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.clash3: Reverse query name for field 'foreign_1' clashes with field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.clash3: Reverse query name for field 'foreign_1' clashes with related m2m field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.clash3: Accessor for field 'foreign_2' clashes with m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'foreign_2'.\n-invalid_models.clash3: Accessor for field 'foreign_2' clashes with related m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'foreign_2'.\n-invalid_models.clash3: Reverse query name for field 'foreign_2' clashes with m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'foreign_2'.\n-invalid_models.clash3: Reverse query name for field 'foreign_2' clashes with related m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'foreign_2'.\n-invalid_models.clash3: Accessor for m2m field 'm2m_1' clashes with field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.clash3: Accessor for m2m field 'm2m_1' clashes with related field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.clash3: Reverse query name for m2m field 'm2m_1' clashes with field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.clash3: Reverse query name for m2m field 'm2m_1' clashes with related field 'Target2.foreign_tgt'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.clash3: Accessor for m2m field 'm2m_2' clashes with m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'm2m_2'.\n-invalid_models.clash3: Accessor for m2m field 'm2m_2' clashes with related field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'm2m_2'.\n-invalid_models.clash3: Reverse query name for m2m field 'm2m_2' clashes with m2m field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'm2m_2'.\n-invalid_models.clash3: Reverse query name for m2m field 'm2m_2' clashes with related field 'Target2.m2m_tgt'. Add a related_name argument to the definition for 'm2m_2'.\n-invalid_models.clashforeign: Accessor for field 'foreign' clashes with field 'Target2.clashforeign_set'. Add a related_name argument to the definition for 'foreign'.\n-invalid_models.clashm2m: Accessor for m2m field 'm2m' clashes with m2m field 'Target2.clashm2m_set'. Add a related_name argument to the definition for 'm2m'.\n-invalid_models.target2: Accessor for field 'foreign_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'foreign_tgt'.\n-invalid_models.target2: Accessor for field 'foreign_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'foreign_tgt'.\n-invalid_models.target2: Accessor for field 'foreign_tgt' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'foreign_tgt'.\n-invalid_models.target2: Accessor for field 'clashforeign_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashforeign_set'.\n-invalid_models.target2: Accessor for field 'clashforeign_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashforeign_set'.\n-invalid_models.target2: Accessor for field 'clashforeign_set' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'clashforeign_set'.\n-invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n-invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n-invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n-invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n-invalid_models.target2: Accessor for m2m field 'm2m_tgt' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'm2m_tgt'.\n-invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n-invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n-invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n-invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n-invalid_models.target2: Accessor for m2m field 'clashm2m_set' clashes with related m2m field 'Target.target2_set'. Add a related_name argument to the definition for 'clashm2m_set'.\n-invalid_models.selfclashforeign: Accessor for field 'selfclashforeign_set' clashes with field 'SelfClashForeign.selfclashforeign_set'. Add a related_name argument to the definition for 'selfclashforeign_set'.\n-invalid_models.selfclashforeign: Reverse query name for field 'selfclashforeign_set' clashes with field 'SelfClashForeign.selfclashforeign'. Add a related_name argument to the definition for 'selfclashforeign_set'.\n-invalid_models.selfclashforeign: Accessor for field 'foreign_1' clashes with field 'SelfClashForeign.id'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.selfclashforeign: Reverse query name for field 'foreign_1' clashes with field 'SelfClashForeign.id'. Add a related_name argument to the definition for 'foreign_1'.\n-invalid_models.selfclashforeign: Accessor for field 'foreign_2' clashes with field 'SelfClashForeign.src_safe'. Add a related_name argument to the definition for 'foreign_2'.\n-invalid_models.selfclashforeign: Reverse query name for field 'foreign_2' clashes with field 'SelfClashForeign.src_safe'. Add a related_name argument to the definition for 'foreign_2'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'selfclashm2m_set' clashes with m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'selfclashm2m_set'.\n-invalid_models.selfclashm2m: Reverse query name for m2m field 'selfclashm2m_set' clashes with field 'SelfClashM2M.selfclashm2m'. Add a related_name argument to the definition for 'selfclashm2m_set'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'selfclashm2m_set' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'selfclashm2m_set'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'm2m_1' clashes with field 'SelfClashM2M.id'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'm2m_2' clashes with field 'SelfClashM2M.src_safe'. Add a related_name argument to the definition for 'm2m_2'.\n-invalid_models.selfclashm2m: Reverse query name for m2m field 'm2m_1' clashes with field 'SelfClashM2M.id'. Add a related_name argument to the definition for 'm2m_1'.\n-invalid_models.selfclashm2m: Reverse query name for m2m field 'm2m_2' clashes with field 'SelfClashM2M.src_safe'. Add a related_name argument to the definition for 'm2m_2'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'm2m_3' clashes with m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_3'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'm2m_3' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_3'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'm2m_3' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_3'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'm2m_4' clashes with m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_4'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'm2m_4' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_4'.\n-invalid_models.selfclashm2m: Accessor for m2m field 'm2m_4' clashes with related m2m field 'SelfClashM2M.selfclashm2m_set'. Add a related_name argument to the definition for 'm2m_4'.\n-invalid_models.selfclashm2m: Reverse query name for m2m field 'm2m_3' clashes with field 'SelfClashM2M.selfclashm2m'. Add a related_name argument to the definition for 'm2m_3'.\n-invalid_models.selfclashm2m: Reverse query name for m2m field 'm2m_4' clashes with field 'SelfClashM2M.selfclashm2m'. Add a related_name argument to the definition for 'm2m_4'.\n-invalid_models.missingrelations: 'rel1' has a relation with model Rel1, which has either not been installed or is abstract.\n-invalid_models.missingrelations: 'rel2' has an m2m relation with model Rel2, which has either not been installed or is abstract.\n-invalid_models.grouptwo: 'primary' is a manually-defined m2m relation through model Membership, which does not have foreign keys to Person and GroupTwo\n-invalid_models.grouptwo: 'secondary' is a manually-defined m2m relation through model MembershipMissingFK, which does not have foreign keys to Group and GroupTwo\n-invalid_models.missingmanualm2mmodel: 'missing_m2m' specifies an m2m relation through model MissingM2MModel, which has not been installed\n-invalid_models.group: The model Group has two manually-defined m2m relations through the model Membership, which is not permitted. Please consider using an extra field on your intermediary model instead.\n-invalid_models.group: Intermediary model RelationshipDoubleFK has more than one foreign key to Person, which is ambiguous and is not permitted.\n-invalid_models.personselfrefm2m: Many-to-many fields with intermediate tables cannot be symmetrical.\n-invalid_models.personselfrefm2m: Intermediary model RelationshipTripleFK has more than two foreign keys to PersonSelfRefM2M, which is ambiguous and is not permitted.\n-invalid_models.personselfrefm2mexplicit: Many-to-many fields with intermediate tables cannot be symmetrical.\n-invalid_models.abstractrelationmodel: 'fk1' has a relation with model AbstractModel, which has either not been installed or is abstract.\n-invalid_models.abstractrelationmodel: 'fk2' has an m2m relation with model AbstractModel, which has either not been installed or is abstract.\n-invalid_models.uniquem2m: ManyToManyFields cannot be unique.  Remove the unique argument on 'unique_people'.\n-invalid_models.nonuniquefktarget1: Field 'bad' under model 'FKTarget' must have a unique=True constraint.\n-invalid_models.nonuniquefktarget2: Field 'bad' under model 'FKTarget' must have a unique=True constraint.\n-invalid_models.nonexistingorderingwithsingleunderscore: \"ordering\" refers to \"does_not_exist\", a field that doesn't exist.\n-invalid_models.invalidsetnull: 'fk' specifies on_delete=SET_NULL, but cannot be null.\n-invalid_models.invalidsetdefault: 'fk' specifies on_delete=SET_DEFAULT, but has no default value.\n-\"\"\""
        },
        {
            "sha": "1aaa36bc8c7bc3a6bfe237558eeeca78781eca49",
            "filename": "tests/modeltests/invalid_models/tests.py",
            "status": "added",
            "additions": 37,
            "deletions": 0,
            "changes": 37,
            "blob_url": "https://github.com/django/django/blob/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fmodeltests%2Finvalid_models%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fmodeltests%2Finvalid_models%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Finvalid_models%2Ftests.py?ref=1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5",
            "patch": "@@ -0,0 +1,37 @@\n+import sys\n+\n+from django.utils import unittest\n+\n+\n+class InvalidModelTestCase(unittest.TestCase):\n+    \"\"\"Import an appliation with invalid models and test the exceptions.\"\"\"\n+\n+    def test_invalid_models(self):\n+        from django.core.management.validation import get_validation_errors\n+        from django.db.models.loading import load_app\n+        from cStringIO import StringIO\n+\n+        try:\n+            module = load_app(\"modeltests.invalid_models.invalid_models\")\n+        except Exception, e:\n+            self.fail('Unable to load invalid model module')\n+\n+        # Make sure sys.stdout is not a tty so that we get errors without\n+        # coloring attached (makes matching the results easier). We restore\n+        # sys.stderr afterwards.\n+        orig_stdout = sys.stdout\n+        s = StringIO()\n+        sys.stdout = s\n+        count = get_validation_errors(s, module)\n+        sys.stdout = orig_stdout\n+        s.seek(0)\n+        error_log = s.read()\n+        actual = error_log.split('\\n')\n+        expected = module.model_errors.split('\\n')\n+\n+        unexpected = [err for err in actual if err not in expected]\n+        missing = [err for err in expected if err not in actual]\n+        self.assertFalse(unexpected, \"Unexpected Errors: \" + '\\n'.join(unexpected))\n+        self.assertFalse(missing, \"Missing Errors: \" + '\\n'.join(missing))\n+\n+"
        },
        {
            "sha": "d74973bc32db8315992d568bac9ce9d3b7cd4ad1",
            "filename": "tests/runtests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 60,
            "changes": 64,
            "blob_url": "https://github.com/django/django/blob/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fruntests.py",
            "raw_url": "https://github.com/django/django/raw/1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5/tests%2Fruntests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fruntests.py?ref=1e72b1c5c11d1d2dc3ce3660a1eb6b775dcca5a5",
            "patch": "@@ -6,7 +6,6 @@\n import tempfile\n \n import django.contrib as contrib\n-from django.utils import unittest\n \n CONTRIB_DIR_NAME = 'django.contrib'\n MODEL_TESTS_DIR_NAME = 'modeltests'\n@@ -50,57 +49,14 @@ def get_test_modules():\n     modules = []\n     for loc, dirpath in (MODEL_TESTS_DIR_NAME, MODEL_TEST_DIR), (REGRESSION_TESTS_DIR_NAME, REGRESSION_TEST_DIR), (CONTRIB_DIR_NAME, CONTRIB_DIR):\n         for f in os.listdir(dirpath):\n-            if f.startswith('__init__') or f.startswith('.') or \\\n-               f.startswith('sql') or f.startswith('invalid') or \\\n-               os.path.basename(f) in REGRESSION_SUBDIRS_TO_SKIP:\n+            if (f.startswith('__init__') or\n+                f.startswith('.') or\n+                f.startswith('sql') or\n+                os.path.basename(f) in REGRESSION_SUBDIRS_TO_SKIP):\n                 continue\n             modules.append((loc, f))\n     return modules\n \n-def get_invalid_modules():\n-    modules = []\n-    for loc, dirpath in (MODEL_TESTS_DIR_NAME, MODEL_TEST_DIR), (REGRESSION_TESTS_DIR_NAME, REGRESSION_TEST_DIR), (CONTRIB_DIR_NAME, CONTRIB_DIR):\n-        for f in os.listdir(dirpath):\n-            if f.startswith('__init__') or f.startswith('.') or f.startswith('sql'):\n-                continue\n-            if f.startswith('invalid'):\n-                modules.append((loc, f))\n-    return modules\n-\n-class InvalidModelTestCase(unittest.TestCase):\n-    def __init__(self, module_label):\n-        unittest.TestCase.__init__(self)\n-        self.module_label = module_label\n-\n-    def runTest(self):\n-        from django.core.management.validation import get_validation_errors\n-        from django.db.models.loading import load_app\n-        from cStringIO import StringIO\n-\n-        try:\n-            module = load_app(self.module_label)\n-        except Exception, e:\n-            self.fail('Unable to load invalid model module')\n-\n-        # Make sure sys.stdout is not a tty so that we get errors without\n-        # coloring attached (makes matching the results easier). We restore\n-        # sys.stderr afterwards.\n-        orig_stdout = sys.stdout\n-        s = StringIO()\n-        sys.stdout = s\n-        count = get_validation_errors(s, module)\n-        sys.stdout = orig_stdout\n-        s.seek(0)\n-        error_log = s.read()\n-        actual = error_log.split('\\n')\n-        expected = module.model_errors.split('\\n')\n-\n-        unexpected = [err for err in actual if err not in expected]\n-        missing = [err for err in expected if err not in actual]\n-\n-        self.assertTrue(not unexpected, \"Unexpected Errors: \" + '\\n'.join(unexpected))\n-        self.assertTrue(not missing, \"Missing Errors: \" + '\\n'.join(missing))\n-\n def setup(verbosity, test_labels):\n     from django.conf import settings\n     state = {\n@@ -178,19 +134,7 @@ def teardown(state):\n def django_tests(verbosity, interactive, failfast, test_labels):\n     from django.conf import settings\n     state = setup(verbosity, test_labels)\n-\n-    # Add tests for invalid models apps.\n     extra_tests = []\n-    for module_dir, module_name in get_invalid_modules():\n-        module_label = '.'.join([module_dir, module_name])\n-        if not test_labels or module_name in test_labels:\n-            extra_tests.append(InvalidModelTestCase(module_label))\n-            try:\n-                # Invalid models are not working apps, so we cannot pass them into\n-                # the test runner with the other test_labels\n-                test_labels.remove(module_name)\n-            except ValueError:\n-                pass\n \n     # If GeoDjango is used, add it's tests that aren't a part of\n     # an application (e.g., GEOS, GDAL, Distance objects)."
        }
    ],
    "stats": {
        "total": 762,
        "additions": 372,
        "deletions": 390
    }
}