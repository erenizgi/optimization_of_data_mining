{
    "author": "jezdez",
    "message": "Fixed #16404 -- Fixed a regression in the localization changes in the humanize app made in r16168. Thanks, grepsd@gmail.com.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16726 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "944ef3bb60eae989aa7d536e509f9cc80be0adcb",
    "files": [
        {
            "sha": "8e25554aeaba6d1807f78f12d8a1d32ec2455a77",
            "filename": "django/contrib/humanize/templatetags/humanize.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/944ef3bb60eae989aa7d536e509f9cc80be0adcb/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "raw_url": "https://github.com/django/django/raw/944ef3bb60eae989aa7d536e509f9cc80be0adcb/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fhumanize%2Ftemplatetags%2Fhumanize.py?ref=944ef3bb60eae989aa7d536e509f9cc80be0adcb",
            "patch": "@@ -41,7 +41,7 @@ def intcomma(value, use_l10n=True):\n         except (TypeError, ValueError):\n             return intcomma(value, False)\n         else:\n-            return number_format(value)\n+            return number_format(value, force_grouping=True)\n     orig = force_unicode(value)\n     new = re.sub(\"^(-?\\d+)(\\d{3})\", '\\g<1>,\\g<2>', orig)\n     if orig == new:"
        },
        {
            "sha": "2d8a813825d47667ecca72d16ebc31f23d427b2e",
            "filename": "django/utils/formats.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/944ef3bb60eae989aa7d536e509f9cc80be0adcb/django%2Futils%2Fformats.py",
            "raw_url": "https://github.com/django/django/raw/944ef3bb60eae989aa7d536e509f9cc80be0adcb/django%2Futils%2Fformats.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fformats.py?ref=944ef3bb60eae989aa7d536e509f9cc80be0adcb",
            "patch": "@@ -103,7 +103,7 @@ def time_format(value, format=None, use_l10n=None):\n     \"\"\"\n     return dateformat.time_format(value, get_format(format or 'TIME_FORMAT', use_l10n=use_l10n))\n \n-def number_format(value, decimal_pos=None, use_l10n=None):\n+def number_format(value, decimal_pos=None, use_l10n=None, force_grouping=False):\n     \"\"\"\n     Formats a numeric value using localization settings\n \n@@ -120,6 +120,7 @@ def number_format(value, decimal_pos=None, use_l10n=None):\n         decimal_pos,\n         get_format('NUMBER_GROUPING', lang, use_l10n=use_l10n),\n         get_format('THOUSAND_SEPARATOR', lang, use_l10n=use_l10n),\n+        force_grouping=force_grouping\n     )\n \n def localize(value, use_l10n=None):"
        },
        {
            "sha": "c6528c01677727e6540296a61a850e46b4186fcb",
            "filename": "django/utils/numberformat.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/944ef3bb60eae989aa7d536e509f9cc80be0adcb/django%2Futils%2Fnumberformat.py",
            "raw_url": "https://github.com/django/django/raw/944ef3bb60eae989aa7d536e509f9cc80be0adcb/django%2Futils%2Fnumberformat.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fnumberformat.py?ref=944ef3bb60eae989aa7d536e509f9cc80be0adcb",
            "patch": "@@ -2,7 +2,7 @@\n from django.utils.safestring import mark_safe\n \n \n-def format(number, decimal_sep, decimal_pos=None, grouping=0, thousand_sep=''):\n+def format(number, decimal_sep, decimal_pos=None, grouping=0, thousand_sep='', force_grouping=False):\n     \"\"\"\n     Gets a number (as a number or string), and returns it as a string,\n     using formats definied as arguments:\n@@ -13,7 +13,7 @@ def format(number, decimal_sep, decimal_pos=None, grouping=0, thousand_sep=''):\n     * thousand_sep: Thousand separator symbol (for example \",\")\n \n     \"\"\"\n-    use_grouping = settings.USE_L10N and \\\n+    use_grouping = force_grouping or settings.USE_L10N and \\\n         settings.USE_THOUSAND_SEPARATOR and grouping\n     # Make the common case fast:\n     if isinstance(number, int) and not use_grouping and not decimal_pos:"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 5,
        "deletions": 4
    }
}