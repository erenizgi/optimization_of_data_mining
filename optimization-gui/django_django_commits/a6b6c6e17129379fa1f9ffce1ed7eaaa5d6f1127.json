{
    "author": "jezdez",
    "message": "Fixed #16416 -- Added two new date formatting options for timezones and ISO week numbers. Thanks, poirier.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17473 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127",
    "files": [
        {
            "sha": "81c2d87f91f07229d3f9b37379e561ed7585b47c",
            "filename": "django/utils/dateformat.py",
            "status": "modified",
            "additions": 16,
            "deletions": 1,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127/django%2Futils%2Fdateformat.py",
            "raw_url": "https://github.com/django/django/raw/a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127/django%2Futils%2Fdateformat.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fdateformat.py?ref=a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127",
            "patch": "@@ -22,7 +22,7 @@\n from django.utils.encoding import force_unicode\n from django.utils.timezone import is_aware, is_naive\n \n-re_formatchars = re.compile(r'(?<!\\\\)([aAbBcdDEfFgGhHiIjlLmMnNOPrsStTUuwWyYzZ])')\n+re_formatchars = re.compile(r'(?<!\\\\)([aAbBcdDeEfFgGhHiIjlLmMnNoOPrsStTUuwWyYzZ])')\n re_escaped = re.compile(r'\\\\(.)')\n \n class Formatter(object):\n@@ -144,6 +144,17 @@ def D(self):\n         \"Day of the week, textual, 3 letters; e.g. 'Fri'\"\n         return WEEKDAYS_ABBR[self.data.weekday()]\n \n+    def e(self):\n+        \"Timezone name if available\"\n+        try:\n+            if self.data.tzinfo:\n+                # Have to use tzinfo.tzname and not datetime.tzname\n+                # because datatime.tzname does not expect Unicode\n+                return self.data.tzinfo.tzname(self.data) or \"\"\n+        except NotImplementedError:\n+            pass\n+        return \"\"\n+\n     def E(self):\n         \"Alternative month names as required by some locales. Proprietary extension.\"\n         return MONTHS_ALT[self.data.month]\n@@ -187,6 +198,10 @@ def N(self):\n         \"Month abbreviation in Associated Press style. Proprietary extension.\"\n         return MONTHS_AP[self.data.month]\n \n+    def o(self):\n+        \"ISO 8601 year number matching the ISO week number (W)\"\n+        return self.data.isocalendar()[0]\n+\n     def O(self):\n         \"Difference to Greenwich time in hours; e.g. '+0200', '-0430'\"\n         seconds = self.Z()"
        },
        {
            "sha": "0bc293dcd9a95b2d6f7c227ab7a200ae46e92018",
            "filename": "docs/ref/templates/builtins.txt",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "raw_url": "https://github.com/django/django/raw/a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127/docs%2Fref%2Ftemplates%2Fbuiltins.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Ftemplates%2Fbuiltins.txt?ref=a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127",
            "patch": "@@ -1276,8 +1276,8 @@ date\n \n Formats a date according to the given format.\n \n-Uses the same format as PHP's ``date()`` function (http://php.net/date)\n-with some custom extensions.\n+Uses a similar format as PHP's ``date()`` function (http://php.net/date)\n+with some differences.\n \n Available format strings:\n \n@@ -1299,6 +1299,9 @@ c                 ISO 8601 format. (Note: unlike others     ``2008-01-02T10:30:0\n d                 Day of the month, 2 digits with           ``'01'`` to ``'31'``\n                   leading zeros.\n D                 Day of the week, textual, 3 letters.      ``'Fri'``\n+e                 Timezone name. Could be in any format,\n+                  or might return an empty string,          ``''``, ``'GMT'``, ``'-500'``, ``'US/Eastern'``, etc.\n+                  depending on the datetime.\n E                 Month, locale specific alternative\n                   representation usually used for long\n                   date representation.                      ``'listopada'`` (for Polish locale, as opposed to ``'Listopad'``)\n@@ -1323,6 +1326,9 @@ M                 Month, textual, 3 letters.                ``'Jan'``\n n                 Month without leading zeros.              ``'1'`` to ``'12'``\n N                 Month abbreviation in Associated Press    ``'Jan.'``, ``'Feb.'``, ``'March'``, ``'May'``\n                   style. Proprietary extension.\n+o                 ISO-8601 week-numbering year,             ``'1999'``\n+                  corresponding to\n+                  the ISO-8601 week number (W)\n O                 Difference to Greenwich time in hours.    ``'+0200'``\n P                 Time, in 12-hour hours, minutes and       ``'1 a.m.'``, ``'1:30 p.m.'``, ``'midnight'``, ``'noon'``, ``'12:30 p.m.'``\n                   'a.m.'/'p.m.', with minutes left off"
        },
        {
            "sha": "41f8e43c9e2933d5e9966176a75fa556d3f101ef",
            "filename": "tests/regressiontests/templates/filters.py",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127/tests%2Fregressiontests%2Ftemplates%2Ffilters.py",
            "raw_url": "https://github.com/django/django/raw/a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127/tests%2Fregressiontests%2Ftemplates%2Ffilters.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftemplates%2Ffilters.py?ref=a6b6c6e17129379fa1f9ffce1ed7eaaa5d6f1127",
            "patch": "@@ -345,6 +345,12 @@ def get_filter_tests():\n         'date02': (r'{{ d|date }}', {'d': datetime(2008, 1, 1)}, 'Jan. 1, 2008'),\n         #Ticket 9520: Make sure |date doesn't blow up on non-dates\n         'date03': (r'{{ d|date:\"m\" }}', {'d': 'fail_string'}, ''),\n+        # ISO date formats\n+        'date04': (r'{{ d|date:\"o\" }}', {'d': datetime(2008, 12, 29)}, '2009'),\n+        'date05': (r'{{ d|date:\"o\" }}', {'d': datetime(2010, 1, 3)}, '2009'),\n+        # Timezone name\n+        'date06': (r'{{ d|date:\"e\" }}', {'d': datetime(2009, 3, 12, tzinfo=FixedOffset(30))}, '+0030'),\n+        'date07': (r'{{ d|date:\"e\" }}', {'d': datetime(2009, 3, 12)}, ''),\n \n          # Tests for #11687 and #16676\n          'add01': (r'{{ i|add:\"5\" }}', {'i': 2000}, '2005'),"
        }
    ],
    "stats": {
        "total": 33,
        "additions": 30,
        "deletions": 3
    }
}