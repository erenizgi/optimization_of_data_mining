{
    "author": "alex",
    "message": "Final explicit closing for staticfiles, they now pass on python3 with -Wall and there are no warnings about unclosed files",
    "sha": "d674bd603ee39721a6b22d8e28a16f46502dff35",
    "files": [
        {
            "sha": "4be7540c6eabee1e7095edc58831264b95f194a5",
            "filename": "django/contrib/staticfiles/storage.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/d674bd603ee39721a6b22d8e28a16f46502dff35/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "raw_url": "https://github.com/django/django/raw/d674bd603ee39721a6b22d8e28a16f46502dff35/django%2Fcontrib%2Fstaticfiles%2Fstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fstaticfiles%2Fstorage.py?ref=d674bd603ee39721a6b22d8e28a16f46502dff35",
            "patch": "@@ -87,6 +87,7 @@ def file_hash(self, name, content=None):\n     def hashed_name(self, name, content=None):\n         parsed_name = urlsplit(unquote(name))\n         clean_name = parsed_name.path.strip()\n+        opened = False\n         if content is None:\n             if not self.exists(clean_name):\n                 raise ValueError(\"The file '%s' could not be found with %r.\" %\n@@ -96,9 +97,14 @@ def hashed_name(self, name, content=None):\n             except IOError:\n                 # Handle directory paths and fragments\n                 return name\n+            opened = True\n+        try:\n+            file_hash = self.file_hash(clean_name, content)\n+        finally:\n+            if opened:\n+                content.close()\n         path, filename = os.path.split(clean_name)\n         root, ext = os.path.splitext(filename)\n-        file_hash = self.file_hash(clean_name, content)\n         if file_hash is not None:\n             file_hash = \".%s\" % file_hash\n         hashed_name = os.path.join(path, \"%s%s%s\" %"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 7,
        "deletions": 1
    }
}