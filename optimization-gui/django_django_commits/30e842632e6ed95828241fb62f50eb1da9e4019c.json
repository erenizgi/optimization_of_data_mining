{
    "author": "jezdez",
    "message": "Fixed #9588 -- Allow passing kwargs to `GenericInlineModelAdmin.get_formset` just like the InlineModelAdmin. Thanks, prestontimmons.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16419 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "30e842632e6ed95828241fb62f50eb1da9e4019c",
    "files": [
        {
            "sha": "389692d5b3e743aaff318694acbc87790917c054",
            "filename": "django/contrib/contenttypes/generic.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/30e842632e6ed95828241fb62f50eb1da9e4019c/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py",
            "raw_url": "https://github.com/django/django/raw/30e842632e6ed95828241fb62f50eb1da9e4019c/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fcontenttypes%2Fgeneric.py?ref=30e842632e6ed95828241fb62f50eb1da9e4019c",
            "patch": "@@ -396,7 +396,7 @@ class GenericInlineModelAdmin(InlineModelAdmin):\n     ct_fk_field = \"object_id\"\n     formset = BaseGenericInlineFormSet\n \n-    def get_formset(self, request, obj=None):\n+    def get_formset(self, request, obj=None, **kwargs):\n         if self.declared_fieldsets:\n             fields = flatten_fieldsets(self.declared_fieldsets)\n         else:\n@@ -420,6 +420,7 @@ def get_formset(self, request, obj=None):\n             \"max_num\": self.max_num,\n             \"exclude\": exclude\n         }\n+        defaults.update(kwargs)\n         return generic_inlineformset_factory(self.model, **defaults)\n \n class GenericStackedInline(GenericInlineModelAdmin):"
        },
        {
            "sha": "00badc92283d3ccff006f8d532a4d7ae9bc4ac51",
            "filename": "tests/regressiontests/generic_inline_admin/tests.py",
            "status": "modified",
            "additions": 18,
            "deletions": 2,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/30e842632e6ed95828241fb62f50eb1da9e4019c/tests%2Fregressiontests%2Fgeneric_inline_admin%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/30e842632e6ed95828241fb62f50eb1da9e4019c/tests%2Fregressiontests%2Fgeneric_inline_admin%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_inline_admin%2Ftests.py?ref=30e842632e6ed95828241fb62f50eb1da9e4019c",
            "patch": "@@ -1,12 +1,13 @@\n # coding: utf-8\n \n from django.conf import settings\n+from django.contrib.admin.sites import AdminSite\n from django.contrib.contenttypes.generic import generic_inlineformset_factory\n from django.test import TestCase\n \n # local test models\n-from models import Episode, EpisodeExtra, EpisodeMaxNum, EpisodeExclude, \\\n-                   Media, EpisodePermanent, MediaPermanentInline, Category\n+from models import (Episode, EpisodeExtra, EpisodeMaxNum, EpisodeExclude,\n+    Media, MediaInline, EpisodePermanent, MediaPermanentInline, Category)\n \n \n class GenericAdminViewTest(TestCase):\n@@ -214,3 +215,18 @@ def test_no_deletion(self):\n         fake_request = object()\n         formset = inline.get_formset(fake_request)\n         self.assertFalse(formset.can_delete)\n+\n+class GenericInlineModelAdminTest(TestCase):\n+\n+    def test_get_formset_kwargs(self):\n+        media_inline = MediaInline(Media, AdminSite())\n+\n+        # Create a formset with default arguments\n+        formset = media_inline.get_formset(None)\n+        self.assertEqual(formset.max_num, None)\n+        self.assertEqual(formset.can_order, False)\n+\n+        # Create a formset with custom keyword arguments\n+        formset = media_inline.get_formset(None, max_num=100, can_order=True)\n+        self.assertEqual(formset.max_num, 100)\n+        self.assertEqual(formset.can_order, True)"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 20,
        "deletions": 3
    }
}