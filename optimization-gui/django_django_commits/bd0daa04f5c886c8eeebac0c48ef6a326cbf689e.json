{
    "author": "jezdez",
    "message": "Fixed staticfiles test that was broken on Windows due to the result of the stdout not being correctly handled as Unicode.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15879 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "bd0daa04f5c886c8eeebac0c48ef6a326cbf689e",
    "files": [
        {
            "sha": "b8a7aa6d339acf529bf73041285156249df00063",
            "filename": "tests/regressiontests/staticfiles_tests/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/bd0daa04f5c886c8eeebac0c48ef6a326cbf689e/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/bd0daa04f5c886c8eeebac0c48ef6a326cbf689e/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fstaticfiles_tests%2Ftests.py?ref=bd0daa04f5c886c8eeebac0c48ef6a326cbf689e",
            "patch": "@@ -66,10 +66,10 @@ def setUp(self):\n         # To make sure SVN doesn't hangs itself with the non-ASCII characters\n         # during checkout, we actually create one file dynamically.\n         self._nonascii_filepath = os.path.join(\n-            TEST_ROOT, 'apps', 'test', 'static', 'test', u'fişier.txt')\n+            TEST_ROOT, 'apps', 'test', 'static', 'test', u'fi\\u015fier.txt')\n         f = codecs.open(self._nonascii_filepath, 'w', 'utf-8')\n         try:\n-            f.write(u\"fişier in the app dir\")\n+            f.write(u\"fi\\u015fier in the app dir\")\n         finally:\n             f.close()\n \n@@ -183,7 +183,8 @@ def _get_file(self, filepath):\n             call_command('findstatic', filepath, all=False, verbosity='0')\n             sys.stdout.seek(0)\n             lines = [l.strip() for l in sys.stdout.readlines()]\n-            contents = codecs.open(lines[1].strip(), \"r\", \"utf-8\").read()\n+            contents = codecs.open(\n+                smart_unicode(lines[1].strip()), \"r\", \"utf-8\").read()\n         finally:\n             sys.stdout = _stdout\n         return contents"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}