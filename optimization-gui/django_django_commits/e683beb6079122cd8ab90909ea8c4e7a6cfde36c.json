{
    "author": "spookylukey",
    "message": "Changed utils/decorators.py tests to use RequestFactory\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16272 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "e683beb6079122cd8ab90909ea8c4e7a6cfde36c",
    "files": [
        {
            "sha": "db32418de7a978473aa571c2ad02acdd905cedec",
            "filename": "tests/regressiontests/utils/decorators.py",
            "status": "modified",
            "additions": 23,
            "deletions": 3,
            "changes": 26,
            "blob_url": "https://github.com/django/django/blob/e683beb6079122cd8ab90909ea8c4e7a6cfde36c/tests%2Fregressiontests%2Futils%2Fdecorators.py",
            "raw_url": "https://github.com/django/django/raw/e683beb6079122cd8ab90909ea8c4e7a6cfde36c/tests%2Fregressiontests%2Futils%2Fdecorators.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fdecorators.py?ref=e683beb6079122cd8ab90909ea8c4e7a6cfde36c",
            "patch": "@@ -1,19 +1,39 @@\n-from django.test import TestCase\n+from django.http import HttpResponse\n+from django.middleware.doc import XViewMiddleware\n+from django.test import TestCase, RequestFactory\n+from django.utils.decorators import decorator_from_middleware\n+\n+\n+xview_dec = decorator_from_middleware(XViewMiddleware)\n+\n+\n+@xview_dec\n+def xview(request):\n+    return HttpResponse()\n+\n+\n+class ClassXView(object):\n+    def __call__(self, request):\n+        return HttpResponse()\n+\n+class_xview = xview_dec(ClassXView())\n+\n \n class DecoratorFromMiddlewareTests(TestCase):\n     \"\"\"\n     Tests for view decorators created using\n     ``django.utils.decorators.decorator_from_middleware``.\n     \"\"\"\n+    rf = RequestFactory()\n \n     def test_process_view_middleware(self):\n         \"\"\"\n         Test a middleware that implements process_view.\n         \"\"\"\n-        self.client.get('/utils/xview/')\n+        xview(self.rf.get('/'))\n \n     def test_callable_process_view_middleware(self):\n         \"\"\"\n         Test a middleware that implements process_view, operating on a callable class.\n         \"\"\"\n-        self.client.get('/utils/class_xview/')\n+        class_xview(self.rf.get('/'))"
        },
        {
            "sha": "ba09d14b3d62b93e999c31e858bd1df7e7b51c04",
            "filename": "tests/regressiontests/utils/urls.py",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/55c2c302c1693b00de99235622c2a415d96d7f95/tests%2Fregressiontests%2Futils%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/55c2c302c1693b00de99235622c2a415d96d7f95/tests%2Fregressiontests%2Futils%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Furls.py?ref=55c2c302c1693b00de99235622c2a415d96d7f95",
            "patch": "@@ -1,8 +0,0 @@\n-from django.conf.urls.defaults import *\n-\n-import views\n-\n-urlpatterns = patterns('',\n-    (r'^xview/$', views.xview),\n-    (r'^class_xview/$', views.class_xview),\n-)"
        },
        {
            "sha": "ef97c6502df99f3a96bfc568456497cb33ee6fe4",
            "filename": "tests/regressiontests/utils/views.py",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/55c2c302c1693b00de99235622c2a415d96d7f95/tests%2Fregressiontests%2Futils%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/55c2c302c1693b00de99235622c2a415d96d7f95/tests%2Fregressiontests%2Futils%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fviews.py?ref=55c2c302c1693b00de99235622c2a415d96d7f95",
            "patch": "@@ -1,17 +0,0 @@\n-from django.http import HttpResponse\n-from django.utils.decorators import decorator_from_middleware\n-from django.middleware.doc import XViewMiddleware\n-\n-\n-xview_dec = decorator_from_middleware(XViewMiddleware)\n-\n-def xview(request):\n-    return HttpResponse()\n-xview = xview_dec(xview)\n-\n-\n-class ClassXView(object):\n-    def __call__(self, request):\n-        return HttpResponse()\n-\n-class_xview = xview_dec(ClassXView())"
        },
        {
            "sha": "b3f719d840b1ba7aa6024d2d0e2e35beead81c36",
            "filename": "tests/urls.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/e683beb6079122cd8ab90909ea8c4e7a6cfde36c/tests%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/e683beb6079122cd8ab90909ea8c4e7a6cfde36c/tests%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Furls.py?ref=e683beb6079122cd8ab90909ea8c4e7a6cfde36c",
            "patch": "@@ -29,5 +29,4 @@\n     # admin widget tests\n     (r'widget_admin/', include('regressiontests.admin_widgets.urls')),\n \n-    (r'^utils/', include('regressiontests.utils.urls')),\n )"
        }
    ],
    "stats": {
        "total": 52,
        "additions": 23,
        "deletions": 29
    }
}