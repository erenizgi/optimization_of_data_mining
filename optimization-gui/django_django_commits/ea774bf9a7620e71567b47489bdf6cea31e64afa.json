{
    "author": "andrewgodwin",
    "message": "Fix wrong attribute name in [15156]. Thanks to Alex Gaynor for spotting this.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15169 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ea774bf9a7620e71567b47489bdf6cea31e64afa",
    "files": [
        {
            "sha": "477f04a964b5a98806ca3aa19d69d36ded2fbd3e",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/ea774bf9a7620e71567b47489bdf6cea31e64afa/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/ea774bf9a7620e71567b47489bdf6cea31e64afa/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=ea774bf9a7620e71567b47489bdf6cea31e64afa",
            "patch": "@@ -371,8 +371,8 @@ def get_or_create(self, **kwargs):\n         defaults = kwargs.pop('defaults', {})\n         lookup = kwargs.copy()\n         for f in self.model._meta.fields:\n-            if f.column in lookup:\n-                lookup[f.name] = lookup.pop(f.column)\n+            if f.attname in lookup:\n+                lookup[f.name] = lookup.pop(f.attname)\n         try:\n             self._for_write = True\n             return self.get(**lookup), False"
        },
        {
            "sha": "637bbf62aff454f85bd39ce400a25c9f0fa2a5cf",
            "filename": "tests/regressiontests/get_or_create_regress/models.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ea774bf9a7620e71567b47489bdf6cea31e64afa/tests%2Fregressiontests%2Fget_or_create_regress%2Fmodels.py",
            "raw_url": "https://github.com/django/django/raw/ea774bf9a7620e71567b47489bdf6cea31e64afa/tests%2Fregressiontests%2Fget_or_create_regress%2Fmodels.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fget_or_create_regress%2Fmodels.py?ref=ea774bf9a7620e71567b47489bdf6cea31e64afa",
            "patch": "@@ -10,4 +10,4 @@ class Author(models.Model):\n class Book(models.Model):\n     name = models.CharField(max_length=100)\n     authors = models.ManyToManyField(Author, related_name='books')\n-    publisher = models.ForeignKey(Publisher, related_name='books')\n+    publisher = models.ForeignKey(Publisher, related_name='books', db_column=\"publisher_id_column\")"
        },
        {
            "sha": "103e254d4c7018e71d8f329abeb0560ae5a9a618",
            "filename": "tests/regressiontests/get_or_create_regress/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ea774bf9a7620e71567b47489bdf6cea31e64afa/tests%2Fregressiontests%2Fget_or_create_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/ea774bf9a7620e71567b47489bdf6cea31e64afa/tests%2Fregressiontests%2Fget_or_create_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fget_or_create_regress%2Ftests.py?ref=ea774bf9a7620e71567b47489bdf6cea31e64afa",
            "patch": "@@ -55,8 +55,10 @@ def test_related(self):\n         # Use the publisher's primary key value instead of a model instance.\n         _, created = ed.books.get_or_create(name='The Great Book of Ed', publisher_id=p.id)\n         self.assertTrue(created)\n+\n         # Try get_or_create again, this time nothing should be created.\n         _, created = ed.books.get_or_create(name='The Great Book of Ed', publisher_id=p.id)\n         self.assertFalse(created)\n+\n         # The publisher should have three books.\n         self.assertEqual(p.books.count(), 3)"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 5,
        "deletions": 3
    }
}