{
    "author": "freakboy3742",
    "message": "Fixed #15287 -- Added translation markers to user-facing error messages in class-based generic views. Thanks to szczav for the report and draft patch.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15533 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18",
    "files": [
        {
            "sha": "dc1f6e336fd5d0c836a14f1be954b0cfa3574eee",
            "filename": "django/views/generic/dates.py",
            "status": "modified",
            "additions": 20,
            "deletions": 11,
            "changes": 31,
            "blob_url": "https://github.com/django/django/blob/72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18/django%2Fviews%2Fgeneric%2Fdates.py",
            "raw_url": "https://github.com/django/django/raw/72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18/django%2Fviews%2Fgeneric%2Fdates.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fdates.py?ref=72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18",
            "patch": "@@ -3,11 +3,12 @@\n from django.db import models\n from django.core.exceptions import ImproperlyConfigured\n from django.http import Http404\n+from django.utils.encoding import force_unicode\n+from django.utils.translation import ugettext as _\n from django.views.generic.base import View\n from django.views.generic.detail import BaseDetailView, SingleObjectTemplateResponseMixin\n from django.views.generic.list import MultipleObjectMixin, MultipleObjectTemplateResponseMixin\n \n-\n class YearMixin(object):\n     year_format = '%Y'\n     year = None\n@@ -29,7 +30,7 @@ def get_year(self):\n                 try:\n                     year = self.request.GET['year']\n                 except KeyError:\n-                    raise Http404(\"No year specified\")\n+                    raise Http404(_(u\"No year specified\"))\n         return year\n \n \n@@ -54,7 +55,7 @@ def get_month(self):\n                 try:\n                     month = self.request.GET['month']\n                 except KeyError:\n-                    raise Http404(\"No month specified\")\n+                    raise Http404(_(u\"No month specified\"))\n         return month\n \n     def get_next_month(self, date):\n@@ -95,7 +96,7 @@ def get_day(self):\n                 try:\n                     day = self.request.GET['day']\n                 except KeyError:\n-                    raise Http404(\"No day specified\")\n+                    raise Http404(_(u\"No day specified\"))\n         return day\n \n     def get_next_day(self, date):\n@@ -134,7 +135,7 @@ def get_week(self):\n                 try:\n                     week = self.request.GET['week']\n                 except KeyError:\n-                    raise Http404(\"No week specified\")\n+                    raise Http404(_(u\"No week specified\"))\n         return week\n \n \n@@ -194,7 +195,9 @@ def get_dated_queryset(self, **lookup):\n             qs = qs.filter(**{'%s__lte' % date_field: datetime.datetime.now()})\n \n         if not allow_empty and not qs:\n-            raise Http404(u\"No %s available\" % unicode(qs.model._meta.verbose_name_plural))\n+            raise Http404(_(u\"No %(verbose_name_plural)s available\") % {\n+                    'verbose_name_plural': force_unicode(qs.model._meta.verbose_name_plural)\n+            })\n \n         return qs\n \n@@ -208,7 +211,9 @@ def get_date_list(self, queryset, date_type):\n \n         date_list = queryset.dates(date_field, date_type)[::-1]\n         if date_list is not None and not date_list and not allow_empty:\n-            raise Http404(u\"No %s available\" % unicode(qs.model._meta.verbose_name_plural))\n+            raise Http404(_(u\"No %(verbose_name_plural)s available\") % {\n+                    'verbose_name_plural': force_unicode(qs.model._meta.verbose_name_plural)\n+            })\n \n         return date_list\n \n@@ -458,9 +463,10 @@ def get_object(self, queryset=None):\n         qs = self.get_queryset()\n \n         if not self.get_allow_future() and date > datetime.date.today():\n-            raise Http404(\"Future %s not available because %s.allow_future is False.\" % (\n-                qs.model._meta.verbose_name_plural, self.__class__.__name__)\n-            )\n+            raise Http404(_(u\"Future %(verbose_name_plural)s not available because %(class_name)s.allow_future is False.\") % {\n+                'verbose_name_plural': qs.model._meta.verbose_name_plural,\n+                'class_name': self.__class__.__name__,\n+            })\n \n         # Filter down a queryset from self.queryset using the date from the\n         # URL. This'll get passed as the queryset to DetailView.get_object,\n@@ -491,7 +497,10 @@ def _date_from_string(year, year_format, month, month_format, day='', day_format\n     try:\n         return datetime.date(*time.strptime(datestr, format)[:3])\n     except ValueError:\n-        raise Http404(u\"Invalid date string '%s' given format '%s'\" % (datestr, format))\n+        raise Http404(_(u\"Invalid date string '%(datestr)s' given format '%(format)s'\") % {\n+            'datestr': datestr,\n+            'format': format,\n+        })\n \n \n def _month_bounds(date):"
        },
        {
            "sha": "0495db0da3fcc4b63dc752df914fd29a06bb19bf",
            "filename": "django/views/generic/detail.py",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18/django%2Fviews%2Fgeneric%2Fdetail.py",
            "raw_url": "https://github.com/django/django/raw/72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18/django%2Fviews%2Fgeneric%2Fdetail.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Fdetail.py?ref=72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18",
            "patch": "@@ -3,6 +3,7 @@\n from django.core.exceptions import ImproperlyConfigured, ObjectDoesNotExist\n from django.http import Http404\n from django.utils.encoding import smart_str\n+from django.utils.translation import ugettext as _\n from django.views.generic.base import TemplateResponseMixin, View\n \n \n@@ -47,8 +48,8 @@ def get_object(self, queryset=None):\n         try:\n             obj = queryset.get()\n         except ObjectDoesNotExist:\n-            raise Http404(u\"No %s found matching the query\" %\n-                          (queryset.model._meta.verbose_name))\n+            raise Http404(_(u\"No %(verbose_name)s found matching the query\") %\n+                          {'verbose_name': queryset.model._meta.verbose_name})\n         return obj\n \n     def get_queryset(self):"
        },
        {
            "sha": "c50c0554fb655f52cbb3bf9cd1a5c1e7ce6ab1ca",
            "filename": "django/views/generic/list.py",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18/django%2Fviews%2Fgeneric%2Flist.py",
            "raw_url": "https://github.com/django/django/raw/72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18/django%2Fviews%2Fgeneric%2Flist.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Flist.py?ref=72e4a6865d36f8885e7a35ca8de8fe6d1ec3ff18",
            "patch": "@@ -4,6 +4,7 @@\n from django.core.exceptions import ImproperlyConfigured\n from django.http import Http404\n from django.utils.encoding import smart_str\n+from django.utils.translation import ugettext as _\n from django.views.generic.base import TemplateResponseMixin, View\n \n \n@@ -43,12 +44,14 @@ def paginate_queryset(self, queryset, page_size):\n             if page == 'last':\n                 page_number = paginator.num_pages\n             else:\n-                raise Http404(\"Page is not 'last', nor can it be converted to an int.\")\n+                raise Http404(_(u\"Page is not 'last', nor can it be converted to an int.\"))\n         try:\n             page = paginator.page(page_number)\n             return (paginator, page, page.object_list, True)\n         except InvalidPage:\n-            raise Http404(u'Invalid page (%s)' % page_number)\n+            raise Http404(_(u'Invalid page (%(page_number)s)') % {\n+                                'page_number': page_number\n+            })\n \n     def get_paginate_by(self, queryset):\n         \"\"\"\n@@ -113,8 +116,8 @@ def get(self, request, *args, **kwargs):\n         self.object_list = self.get_queryset()\n         allow_empty = self.get_allow_empty()\n         if not allow_empty and len(self.object_list) == 0:\n-            raise Http404(u\"Empty list and '%s.allow_empty' is False.\"\n-                          % self.__class__.__name__)\n+            raise Http404(_(u\"Empty list and '%(class_name)s.allow_empty' is False.\")\n+                          % {'class_name': self.__class__.__name__})\n         context = self.get_context_data(object_list=self.object_list)\n         return self.render_to_response(context)\n "
        }
    ],
    "stats": {
        "total": 47,
        "additions": 30,
        "deletions": 17
    }
}