{
    "author": "jezdez",
    "message": "Rectified bugs that were accidentally committed in r14997. Thanks for the heads-up, Alex Gaynor.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15011 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "af5ad1116cacda13f48403c5c13af55d94b36a90",
    "files": [
        {
            "sha": "5a35e4fbf5e72c61787ba870f882a9fb59890d98",
            "filename": "django/contrib/admin/options.py",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/af5ad1116cacda13f48403c5c13af55d94b36a90/django%2Fcontrib%2Fadmin%2Foptions.py",
            "raw_url": "https://github.com/django/django/raw/af5ad1116cacda13f48403c5c13af55d94b36a90/django%2Fcontrib%2Fadmin%2Foptions.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Foptions.py?ref=af5ad1116cacda13f48403c5c13af55d94b36a90",
            "patch": "@@ -422,6 +422,9 @@ def get_formsets(self, request, obj=None):\n         for inline in self.inline_instances:\n             yield inline.get_formset(request, obj)\n \n+    def get_paginator(self, request, queryset, per_page, orphans=0, allow_empty_first_page=True):\n+        return self.paginator(queryset, per_page, orphans, allow_empty_first_page)\n+\n     def log_addition(self, request, object):\n         \"\"\"\n         Log that an object has been successfully added.\n@@ -979,7 +982,7 @@ def changelist_view(self, request, extra_context=None):\n         try:\n             cl = ChangeList(request, self.model, list_display, self.list_display_links,\n                 self.list_filter, self.date_hierarchy, self.search_fields,\n-                self.list_select_related, self.list_per_page, self.list_editable, self.paginator, self)\n+                self.list_select_related, self.list_per_page, self.list_editable, self)\n         except IncorrectLookupParameters:\n             # Wacky lookup parameters were given, so redirect to the main\n             # changelist page, without parameters, and pass an 'invalid=1'"
        },
        {
            "sha": "448c6377f3eafbfc4c8e1ee53ef91c68e5249cf5",
            "filename": "django/contrib/admin/views/main.py",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/af5ad1116cacda13f48403c5c13af55d94b36a90/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py",
            "raw_url": "https://github.com/django/django/raw/af5ad1116cacda13f48403c5c13af55d94b36a90/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fadmin%2Fviews%2Fmain.py?ref=af5ad1116cacda13f48403c5c13af55d94b36a90",
            "patch": "@@ -26,7 +26,7 @@\n EMPTY_CHANGELIST_VALUE = '(None)'\n \n class ChangeList(object):\n-    def __init__(self, request, model, list_display, list_display_links, list_filter, date_hierarchy, search_fields, list_select_related, list_per_page, list_editable, paginator, model_admin):\n+    def __init__(self, request, model, list_display, list_display_links, list_filter, date_hierarchy, search_fields, list_select_related, list_per_page, list_editable, model_admin):\n         self.model = model\n         self.opts = model._meta\n         self.lookup_opts = self.opts\n@@ -40,7 +40,6 @@ def __init__(self, request, model, list_display, list_display_links, list_filter\n         self.list_per_page = list_per_page\n         self.list_editable = list_editable\n         self.model_admin = model_admin\n-        self.paginator = paginator\n \n         # Get search parameters from the query string.\n         try:\n@@ -95,7 +94,7 @@ def get_query_string(self, new_params=None, remove=None):\n         return '?%s' % urlencode(p)\n \n     def get_results(self, request):\n-        paginator = self.get_paginator(self.query_set, self.list_per_page)\n+        paginator = self.model_admin.get_paginator(request, self.query_set, self.list_per_page)\n         # Get the number of objects, with admin filters applied.\n         result_count = paginator.count\n \n@@ -245,6 +244,3 @@ def construct_search(field_name):\n \n     def url_for_result(self, result):\n         return \"%s/\" % quote(getattr(result, self.pk_attname))\n-\n-    def get_paginator(self, queryset, per_page, orphans=0, allow_empty_first_page=True):\n-        return self.paginator(queryset, per_page, orphans, allow_empty_first_page)"
        },
        {
            "sha": "d79a9f8a7d00dbb2e33fc55332c79be87fbda880",
            "filename": "docs/ref/contrib/admin/index.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/af5ad1116cacda13f48403c5c13af55d94b36a90/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "raw_url": "https://github.com/django/django/raw/af5ad1116cacda13f48403c5c13af55d94b36a90/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fadmin%2Findex.txt?ref=af5ad1116cacda13f48403c5c13af55d94b36a90",
            "patch": "@@ -524,7 +524,7 @@ subclass::\n     :class:`django.core.paginator.Paginator` is used. If the custom paginator\n     class doesn't have the same constructor interface as\n     :class:`django.core.paginator.Paginator`, you will also need to\n-    provide an implementation for :meth:`MultipleObjectMixin.get_paginator`.\n+    provide an implementation for :meth:`ModelAdmin.get_paginator`.\n \n .. attribute:: ModelAdmin.prepopulated_fields\n "
        },
        {
            "sha": "fca1b9e57c96e81ef341b864b23df77847bbca67",
            "filename": "tests/regressiontests/admin_changelist/tests.py",
            "status": "modified",
            "additions": 6,
            "deletions": 14,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/af5ad1116cacda13f48403c5c13af55d94b36a90/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/af5ad1116cacda13f48403c5c13af55d94b36a90/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_changelist%2Ftests.py?ref=af5ad1116cacda13f48403c5c13af55d94b36a90",
            "patch": "@@ -17,8 +17,7 @@ def test_select_related_preserved(self):\n         m = ChildAdmin(Child, admin.site)\n         cl = ChangeList(MockRequest(), Child, m.list_display, m.list_display_links,\n                 m.list_filter, m.date_hierarchy, m.search_fields,\n-                m.list_select_related, m.list_per_page, m.list_editable,\n-                m.paginator, m)\n+                m.list_select_related, m.list_per_page, m.list_editable, m)\n         self.assertEqual(cl.query_set.query.select_related, {'parent': {'name': {}}})\n \n     def test_result_list_html(self):\n@@ -32,8 +31,7 @@ def test_result_list_html(self):\n         m = ChildAdmin(Child, admin.site)\n         cl = ChangeList(request, Child, m.list_display, m.list_display_links,\n                 m.list_filter, m.date_hierarchy, m.search_fields,\n-                m.list_select_related, m.list_per_page, m.list_editable,\n-                m.paginator, m)\n+                m.list_select_related, m.list_per_page, m.list_editable, m)\n         cl.formset = None\n         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')\n         context = Context({'cl': cl})\n@@ -62,8 +60,7 @@ def test_result_list_editable_html(self):\n         m.list_editable = ['name']\n         cl = ChangeList(request, Child, m.list_display, m.list_display_links,\n                 m.list_filter, m.date_hierarchy, m.search_fields,\n-                m.list_select_related, m.list_per_page, m.list_editable,\n-                m.paginator, m)\n+                m.list_select_related, m.list_per_page, m.list_editable, m)\n         FormSet = m.get_changelist_formset(request)\n         cl.formset = FormSet(queryset=cl.result_list)\n         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')\n@@ -97,8 +94,7 @@ def test_result_list_editable(self):\n         self.assertRaises(IncorrectLookupParameters, lambda: \\\n             ChangeList(request, Child, m.list_display, m.list_display_links,\n                     m.list_filter, m.date_hierarchy, m.search_fields,\n-                    m.list_select_related, m.list_per_page, m.list_editable,\n-                    m.paginator, m))\n+                    m.list_select_related, m.list_per_page, m.list_editable, m))\n \n     def test_custom_paginator(self):\n         new_parent = Parent.objects.create(name='parent')\n@@ -114,8 +110,7 @@ def test_custom_paginator(self):\n \n         cl = ChangeList(request, Child, m.list_display, m.list_display_links,\n                 m.list_filter, m.date_hierarchy, m.search_fields,\n-                m.list_select_related, m.list_per_page, m.list_editable,\n-                m.paginator, m)\n+                m.list_select_related, m.list_per_page, m.list_editable, m)\n \n         cl.get_results(request)\n         self.assertIsInstance(cl.paginator, CustomPaginator)\n@@ -133,8 +128,5 @@ class MockRequest(object):\n \n class CustomPaginator(Paginator):\n     def __init__(self, queryset, page_size, orphans=0, allow_empty_first_page=True):\n-        super(CustomPaginator, self).__init__(\n-            queryset,\n-            5,\n-            orphans=2,\n+        super(CustomPaginator, self).__init__(queryset, 5, orphans=2,\n             allow_empty_first_page=allow_empty_first_page)"
        }
    ],
    "stats": {
        "total": 35,
        "additions": 13,
        "deletions": 22
    }
}