{
    "author": "aaugustin",
    "message": "Fixed #17810 (again). Catch session key errors.\n\nThe previous commit didn't work with PyLibMC.\nThis solution appears to be the best compromise\nat this point in the 1.4 release cycle.\n\n\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@17797 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f356a2e52fd0c36045b960412196552944a57888",
    "files": [
        {
            "sha": "467d5f12656114e1fc0b691c1a7db5309f4599e9",
            "filename": "django/contrib/sessions/backends/cache.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/f356a2e52fd0c36045b960412196552944a57888/django%2Fcontrib%2Fsessions%2Fbackends%2Fcache.py",
            "raw_url": "https://github.com/django/django/raw/f356a2e52fd0c36045b960412196552944a57888/django%2Fcontrib%2Fsessions%2Fbackends%2Fcache.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsessions%2Fbackends%2Fcache.py?ref=f356a2e52fd0c36045b960412196552944a57888",
            "patch": "@@ -19,10 +19,9 @@ def cache_key(self):\n     def load(self):\n         try:\n             session_data = self._cache.get(self.cache_key, None)\n-        except Exception, e:\n-            e_type = str(type(e))\n-            if e_type != \"<class 'memcache.MemcachedKeyLengthError'>\":\n-                raise e\n+        except Exception:\n+            # Some backends (e.g. memcache) raise an exception on invalid\n+            # cache keys. If this happens, reset the session. See #17810.\n             session_data = None\n         if session_data is not None:\n             return session_data"
        },
        {
            "sha": "ff6076df7763a1ca9699496a8af42541ad733156",
            "filename": "django/contrib/sessions/backends/cached_db.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/f356a2e52fd0c36045b960412196552944a57888/django%2Fcontrib%2Fsessions%2Fbackends%2Fcached_db.py",
            "raw_url": "https://github.com/django/django/raw/f356a2e52fd0c36045b960412196552944a57888/django%2Fcontrib%2Fsessions%2Fbackends%2Fcached_db.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsessions%2Fbackends%2Fcached_db.py?ref=f356a2e52fd0c36045b960412196552944a57888",
            "patch": "@@ -24,10 +24,9 @@ def cache_key(self):\n     def load(self):\n         try:\n             data = cache.get(self.cache_key, None)\n-        except Exception, e:\n-            e_type = str(type(e))\n-            if e_type != \"<class 'memcache.MemcachedKeyLengthError'>\":\n-                raise e\n+        except Exception:\n+            # Some backends (e.g. memcache) raise an exception on invalid\n+            # cache keys. If this happens, reset the session. See #17810.\n             data = None\n         if data is None:\n             data = super(SessionStore, self).load()"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 6,
        "deletions": 8
    }
}