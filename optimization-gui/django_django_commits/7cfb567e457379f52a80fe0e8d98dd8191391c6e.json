{
    "author": "akaariai",
    "message": "Another regression fix for select_related handling\n\nThis time gis compiler.get_default_columns() wasn't up to date. Thanks\nto CI another regression fixed.\n\nRefs #13781",
    "sha": "7cfb567e457379f52a80fe0e8d98dd8191391c6e",
    "files": [
        {
            "sha": "81a9941c9e9a02e4cd3a1e6088386e8b51b27fd0",
            "filename": "django/contrib/gis/db/models/sql/compiler.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/7cfb567e457379f52a80fe0e8d98dd8191391c6e/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "raw_url": "https://github.com/django/django/raw/7cfb567e457379f52a80fe0e8d98dd8191391c6e/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fcompiler.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fgis%2Fdb%2Fmodels%2Fsql%2Fcompiler.py?ref=7cfb567e457379f52a80fe0e8d98dd8191391c6e",
            "patch": "@@ -101,7 +101,7 @@ def get_columns(self, with_aliases=False):\n         return result\n \n     def get_default_columns(self, with_aliases=False, col_aliases=None,\n-            start_alias=None, opts=None, as_pairs=False, local_only=False):\n+            start_alias=None, opts=None, as_pairs=False, from_parent=None):\n         \"\"\"\n         Computes the default columns for selecting every field in the base\n         model. Will sometimes be called to pull in related models (e.g. via\n@@ -127,7 +127,7 @@ def get_default_columns(self, with_aliases=False, col_aliases=None,\n         if start_alias:\n             seen = {None: start_alias}\n         for field, model in opts.get_fields_with_model():\n-            if local_only and model is not None:\n+            if from_parent and model is not None and issubclass(from_parent, model):\n                 continue\n             if start_alias:\n                 try:"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}