{
    "author": "SmileyChris",
    "message": "Fixes #14873 -- A paginated ListView with a List instead of queryset produces an error.\n\nAdditional minor change in functionality: the page is now not considered paginated if the objects do not span multiple pages according to the paginator. This will only affect views with a custom paginator method which uses orphans.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14864 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ff8711a825ea9bbe98e873d7aa28ce5135528fec",
    "files": [
        {
            "sha": "22135720ed552f2cee99d954487ffc0b9ef9d72f",
            "filename": "django/views/generic/list.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/ff8711a825ea9bbe98e873d7aa28ce5135528fec/django%2Fviews%2Fgeneric%2Flist.py",
            "raw_url": "https://github.com/django/django/raw/ff8711a825ea9bbe98e873d7aa28ce5135528fec/django%2Fviews%2Fgeneric%2Flist.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fviews%2Fgeneric%2Flist.py?ref=ff8711a825ea9bbe98e873d7aa28ce5135528fec",
            "patch": "@@ -32,9 +32,9 @@ def paginate_queryset(self, queryset, page_size):\n         \"\"\"\n         Paginate the queryset, if needed.\n         \"\"\"\n-        if queryset.count() > page_size:\n-            paginator = self.get_paginator(queryset, page_size, allow_empty_first_page=self.get_allow_empty())\n-            page = self.kwargs.get('page', None) or self.request.GET.get('page', 1)\n+        paginator = self.get_paginator(queryset, page_size, allow_empty_first_page=self.get_allow_empty())\n+        if paginator.num_pages > 1:\n+            page = self.kwargs.get('page') or self.request.GET.get('page') or 1\n             try:\n                 page_number = int(page)\n             except ValueError:"
        },
        {
            "sha": "4b51469ced044c370dfe9256d75b5fc921125f3c",
            "filename": "docs/ref/class-based-views.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/ff8711a825ea9bbe98e873d7aa28ce5135528fec/docs%2Fref%2Fclass-based-views.txt",
            "raw_url": "https://github.com/django/django/raw/ff8711a825ea9bbe98e873d7aa28ce5135528fec/docs%2Fref%2Fclass-based-views.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fclass-based-views.txt?ref=ff8711a825ea9bbe98e873d7aa28ce5135528fec",
            "patch": "@@ -344,22 +344,22 @@ MultipleObjectMixin\n \n     **Context**\n \n-        * ``object_list``: The list of object that this view is displaying. If\n+        * ``object_list``: The list of objects that this view is displaying. If\n           ``context_object_name`` is specified, that variable will also be set\n           in the context, with the same value as ``object_list``.\n \n         * ``is_paginated``: A boolean representing whether the results are\n           paginated. Specifically, this is set to ``False`` if no page size has\n-          been specified, or if the number of available objects is less than or\n-          equal to ``paginate_by``.\n+          been specified, or if the available objects do not span multiple\n+          pages.\n \n         * ``paginator``: An instance of\n           :class:`django.core.paginator.Paginator`. If the page is not\n-          paginated, this context variable will be ``None``\n+          paginated, this context variable will be ``None``.\n \n         * ``page_obj``: An instance of\n           :class:`django.core.paginator.Page`. If the page is not paginated,\n-          this context variable will be ``None``\n+          this context variable will be ``None``.\n \n MultipleObjectTemplateResponseMixin\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "sha": "6ed28170a7e65fecd1fcc13335771c3402425d6b",
            "filename": "tests/regressiontests/generic_views/list.py",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/django/django/blob/ff8711a825ea9bbe98e873d7aa28ce5135528fec/tests%2Fregressiontests%2Fgeneric_views%2Flist.py",
            "raw_url": "https://github.com/django/django/raw/ff8711a825ea9bbe98e873d7aa28ce5135528fec/tests%2Fregressiontests%2Fgeneric_views%2Flist.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Flist.py?ref=ff8711a825ea9bbe98e873d7aa28ce5135528fec",
            "patch": "@@ -90,7 +90,7 @@ def test_paginated_custom_paginator_class(self):\n         self._make_authors(7)\n         res = self.client.get('/list/authors/paginated/custom_class/')\n         self.assertEqual(res.status_code, 200)\n-        self.assertIsInstance(res.context['paginator'], CustomPaginator)\n+        self.assertIsNone(res.context['paginator'])\n         # Custom pagination allows for 2 orphans on a page size of 5\n         self.assertEqual(len(res.context['object_list']), 7)\n \n@@ -101,6 +101,11 @@ def test_paginated_custom_paginator_constructor(self):\n         # Custom pagination allows for 2 orphans on a page size of 5\n         self.assertEqual(len(res.context['object_list']), 7)\n \n+    def test_paginated_non_queryset(self):\n+        res = self.client.get('/list/dict/paginated/')\n+        self.assertEqual(res.status_code, 200)\n+        self.assertEqual(len(res.context['object_list']), 1)\n+\n     def test_allow_empty_false(self):\n         res = self.client.get('/list/authors/notempty/')\n         self.assertEqual(res.status_code, 200)"
        },
        {
            "sha": "037da42d9a2d0b1032ea6b159b765448679b677c",
            "filename": "tests/regressiontests/generic_views/urls.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/ff8711a825ea9bbe98e873d7aa28ce5135528fec/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/ff8711a825ea9bbe98e873d7aa28ce5135528fec/tests%2Fregressiontests%2Fgeneric_views%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fgeneric_views%2Furls.py?ref=ff8711a825ea9bbe98e873d7aa28ce5135528fec",
            "patch": "@@ -98,6 +98,8 @@\n     # ListView\n     (r'^list/dict/$',\n         views.DictList.as_view()),\n+    (r'^list/dict/paginated/$',\n+        views.DictList.as_view(paginate_by=1)),\n     url(r'^list/authors/$',\n         views.AuthorList.as_view(),\n         name=\"authors_list\"),"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 16,
        "deletions": 9
    }
}