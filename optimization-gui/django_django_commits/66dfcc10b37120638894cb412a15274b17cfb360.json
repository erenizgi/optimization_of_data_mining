{
    "author": "foonicorn",
    "message": "Fixed #18574 -- Make BaseFormSet.is_valid call its underlying forms' is_valid\n\nThanks Simon Charette for the report and the initial patch.",
    "sha": "66dfcc10b37120638894cb412a15274b17cfb360",
    "files": [
        {
            "sha": "3893cc54ba53562466bd335ab311bcd7137fb4b7",
            "filename": "django/forms/formsets.py",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/66dfcc10b37120638894cb412a15274b17cfb360/django%2Fforms%2Fformsets.py",
            "raw_url": "https://github.com/django/django/raw/66dfcc10b37120638894cb412a15274b17cfb360/django%2Fforms%2Fformsets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fforms%2Fformsets.py?ref=66dfcc10b37120638894cb412a15274b17cfb360",
            "patch": "@@ -267,7 +267,7 @@ def _should_delete_form(self, form):\n \n     def is_valid(self):\n         \"\"\"\n-        Returns True if form.errors is empty for every form in self.forms.\n+        Returns True if every form in self.forms is valid.\n         \"\"\"\n         if not self.is_bound:\n             return False\n@@ -282,8 +282,7 @@ def is_valid(self):\n                     # This form is going to be deleted so any of its errors\n                     # should not cause the entire formset to be invalid.\n                     continue\n-            if bool(self.errors[i]):\n-                forms_valid = False\n+            forms_valid &= form.is_valid()\n         return forms_valid and not bool(self.non_form_errors())\n \n     def full_clean(self):"
        },
        {
            "sha": "bf893c4c1d69654c9747998d2c943bf7409f3ce4",
            "filename": "tests/regressiontests/forms/tests/formsets.py",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/django/django/blob/66dfcc10b37120638894cb412a15274b17cfb360/tests%2Fregressiontests%2Fforms%2Ftests%2Fformsets.py",
            "raw_url": "https://github.com/django/django/raw/66dfcc10b37120638894cb412a15274b17cfb360/tests%2Fregressiontests%2Fforms%2Ftests%2Fformsets.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2Fformsets.py?ref=66dfcc10b37120638894cb412a15274b17cfb360",
            "patch": "@@ -856,6 +856,27 @@ class CustomErrorList(ErrorList):\n         formset = FavoriteDrinksFormSet(error_class=CustomErrorList)\n         self.assertEqual(formset.forms[0].error_class, CustomErrorList)\n \n+    def test_formset_calls_forms_is_valid(self):\n+        # Regression tests for #18574 -- make sure formsets call\n+        # is_valid() on each form.\n+\n+        class AnotherChoice(Choice):\n+            def is_valid(self):\n+                self.is_valid_called = True\n+                return super(AnotherChoice, self).is_valid()\n+\n+        AnotherChoiceFormSet = formset_factory(AnotherChoice)\n+        data = {\n+            'choices-TOTAL_FORMS': '1',  # number of forms rendered\n+            'choices-INITIAL_FORMS': '0',  # number of forms with initial data\n+            'choices-MAX_NUM_FORMS': '0',  # max number of forms\n+            'choices-0-choice': 'Calexico',\n+            'choices-0-votes': '100',\n+        }\n+        formset = AnotherChoiceFormSet(data, auto_id=False, prefix='choices')\n+        self.assertTrue(formset.is_valid())\n+        self.assertTrue(all([form.is_valid_called for form in formset.forms]))\n+\n \n data = {\n     'choices-TOTAL_FORMS': '1', # the number of forms rendered"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 23,
        "deletions": 3
    }
}