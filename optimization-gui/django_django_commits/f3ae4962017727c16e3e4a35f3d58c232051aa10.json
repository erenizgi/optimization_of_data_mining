{
    "author": "jezdez",
    "message": "Fixed #16833 -- Removed undocumented `mixin` parameter from the `Storage.open()` method as this was an undocumented and obscure feature. Thanks to Marty and Russell for sanity-checking.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16824 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f3ae4962017727c16e3e4a35f3d58c232051aa10",
    "files": [
        {
            "sha": "73126a3cb90bf1d5b782eeb724122f5b3fc136b1",
            "filename": "django/core/files/storage.py",
            "status": "modified",
            "additions": 3,
            "deletions": 8,
            "changes": 11,
            "blob_url": "https://github.com/django/django/blob/f3ae4962017727c16e3e4a35f3d58c232051aa10/django%2Fcore%2Ffiles%2Fstorage.py",
            "raw_url": "https://github.com/django/django/raw/f3ae4962017727c16e3e4a35f3d58c232051aa10/django%2Fcore%2Ffiles%2Fstorage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Ffiles%2Fstorage.py?ref=f3ae4962017727c16e3e4a35f3d58c232051aa10",
            "patch": "@@ -25,16 +25,11 @@ class Storage(object):\n     # The following methods represent a public interface to private methods.\n     # These shouldn't be overridden by subclasses unless absolutely necessary.\n \n-    def open(self, name, mode='rb', mixin=None):\n+    def open(self, name, mode='rb'):\n         \"\"\"\n-        Retrieves the specified file from storage, using the optional mixin\n-        class to customize what features are available on the File returned.\n+        Retrieves the specified file from storage.\n         \"\"\"\n-        file = self._open(name, mode)\n-        if mixin:\n-            # Add the mixin as a parent class of the File returned from storage.\n-            file.__class__ = type(mixin.__name__, (mixin, file.__class__), {})\n-        return file\n+        return self._open(name, mode)\n \n     def save(self, name, content):\n         \"\"\""
        },
        {
            "sha": "90c5e24e9d252af54f2ed99802ff54d6d53720f5",
            "filename": "docs/releases/1.4.txt",
            "status": "modified",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/django/django/blob/f3ae4962017727c16e3e4a35f3d58c232051aa10/docs%2Freleases%2F1.4.txt",
            "raw_url": "https://github.com/django/django/raw/f3ae4962017727c16e3e4a35f3d58c232051aa10/docs%2Freleases%2F1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.4.txt?ref=f3ae4962017727c16e3e4a35f3d58c232051aa10",
            "patch": "@@ -527,6 +527,30 @@ This functionality has been removed due to intractable performance and\n security issues. Any existing usage of ``verify_exists`` should be\n removed.\n \n+``django.core.files.storage.Storage.open``\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+The ``open`` method of the base Storage class took an obscure parameter\n+``mixin`` which allowed to dynamically change the base classes of the\n+returned file object. In the rare case you relied on the `mixin` parameter,\n+you can easily achieve the same by overriding the `open` method, e.g.::\n+\n+    from django.core.files import File\n+    from django.core.files.storage import FileSystemStorage\n+\n+    class Spam(File):\n+        \"\"\"\n+        Spam, spam, spam, spam and spam.\n+        \"\"\"\n+        def ham(self):\n+            return 'eggs'\n+\n+    class SpamStorage(FileSystemStorage):\n+        \"\"\"\n+        A custom file storage backend.\n+        \"\"\"\n+        def open(self, name, mode='rb'):\n+            return Spam(open(self.path(name), mode))\n \n .. _deprecated-features-1.4:\n "
        },
        {
            "sha": "f00d502931dc7e2bfb158198b1aa6591465dd802",
            "filename": "tests/regressiontests/file_storage/tests.py",
            "status": "modified",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/django/django/blob/f3ae4962017727c16e3e4a35f3d58c232051aa10/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/f3ae4962017727c16e3e4a35f3d58c232051aa10/tests%2Fregressiontests%2Ffile_storage%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ffile_storage%2Ftests.py?ref=f3ae4962017727c16e3e4a35f3d58c232051aa10",
            "patch": "@@ -231,26 +231,6 @@ def test_file_url(self):\n         self.storage.base_url = None\n         self.assertRaises(ValueError, self.storage.url, 'test.file')\n \n-    def test_file_with_mixin(self):\n-        \"\"\"\n-        File storage can get a mixin to extend the functionality of the\n-        returned file.\n-        \"\"\"\n-        self.assertFalse(self.storage.exists('test.file'))\n-\n-        class TestFileMixin(object):\n-            mixed_in = True\n-\n-        f = ContentFile('custom contents')\n-        f_name = self.storage.save('test.file', f)\n-\n-        self.assertTrue(isinstance(\n-            self.storage.open('test.file', mixin=TestFileMixin),\n-            TestFileMixin\n-        ))\n-\n-        self.storage.delete('test.file')\n-\n     def test_listdir(self):\n         \"\"\"\n         File storage returns a tuple containing directories and files."
        }
    ],
    "stats": {
        "total": 55,
        "additions": 27,
        "deletions": 28
    }
}