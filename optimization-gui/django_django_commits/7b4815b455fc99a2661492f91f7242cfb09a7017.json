{
    "author": "aaugustin",
    "message": "Expressed the dirty flag handling logic in terms of autocommit.",
    "sha": "7b4815b455fc99a2661492f91f7242cfb09a7017",
    "files": [
        {
            "sha": "d372384fc5d21e93e9368945e1f3e850e6d276c3",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/7b4815b455fc99a2661492f91f7242cfb09a7017/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/7b4815b455fc99a2661492f91f7242cfb09a7017/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=7b4815b455fc99a2661492f91f7242cfb09a7017",
            "patch": "@@ -311,7 +311,8 @@ def set_dirty(self):\n         to decide in a managed block of code to decide whether there are open\n         changes waiting for commit.\n         \"\"\"\n-        self._dirty = True\n+        if not self.autocommit:\n+            self._dirty = True\n \n     def set_clean(self):\n         \"\"\""
        },
        {
            "sha": "cc1d1ae567326523b01028c12ed22738c7cb8413",
            "filename": "django/db/backends/postgresql_psycopg2/base.py",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/7b4815b455fc99a2661492f91f7242cfb09a7017/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/7b4815b455fc99a2661492f91f7242cfb09a7017/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fpostgresql_psycopg2%2Fbase.py?ref=7b4815b455fc99a2661492f91f7242cfb09a7017",
            "patch": "@@ -202,10 +202,6 @@ def _set_autocommit(self, autocommit):\n                 level = self.isolation_level\n             self.connection.set_isolation_level(level)\n \n-    def set_dirty(self):\n-        if self.transaction_state and self.transaction_state[-1]:\n-            super(DatabaseWrapper, self).set_dirty()\n-\n     def check_constraints(self, table_names=None):\n         \"\"\"\n         To check constraints, we set constraints to immediate. Then, when, we're done we must ensure they"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 2,
        "deletions": 5
    }
}