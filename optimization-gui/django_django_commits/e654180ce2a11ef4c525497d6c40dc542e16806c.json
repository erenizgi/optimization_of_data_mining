{
    "author": "aaugustin",
    "message": "Improved the API of set_autocommit.",
    "sha": "e654180ce2a11ef4c525497d6c40dc542e16806c",
    "files": [
        {
            "sha": "09a33eebae905f67c9f426add2adfcfc1a2a8a2c",
            "filename": "django/db/backends/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/e654180ce2a11ef4c525497d6c40dc542e16806c/django%2Fdb%2Fbackends%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/e654180ce2a11ef4c525497d6c40dc542e16806c/django%2Fdb%2Fbackends%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2F__init__.py?ref=e654180ce2a11ef4c525497d6c40dc542e16806c",
            "patch": "@@ -108,7 +108,7 @@ def connect(self):\n         self.connection = self.get_new_connection(conn_params)\n         self.init_connection_state()\n         if self.settings_dict['AUTOCOMMIT']:\n-            self.set_autocommit()\n+            self.set_autocommit(True)\n         connection_created.send(sender=self.__class__, connection=self)\n \n     def ensure_connection(self):\n@@ -314,7 +314,7 @@ def leave_transaction_management(self):\n         if managed == self.autocommit:\n             self.set_autocommit(not managed)\n \n-    def set_autocommit(self, autocommit=True):\n+    def set_autocommit(self, autocommit):\n         \"\"\"\n         Enable or disable autocommit.\n         \"\"\""
        },
        {
            "sha": "38c284d6d3cd1533b5826f008d14fba9c923a08f",
            "filename": "django/db/backends/creation.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e654180ce2a11ef4c525497d6c40dc542e16806c/django%2Fdb%2Fbackends%2Fcreation.py",
            "raw_url": "https://github.com/django/django/raw/e654180ce2a11ef4c525497d6c40dc542e16806c/django%2Fdb%2Fbackends%2Fcreation.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fbackends%2Fcreation.py?ref=e654180ce2a11ef4c525497d6c40dc542e16806c",
            "patch": "@@ -466,7 +466,7 @@ def set_autocommit(self):\n         warnings.warn(\n             \"set_autocommit was moved from BaseDatabaseCreation to \"\n             \"BaseDatabaseWrapper.\", PendingDeprecationWarning, stacklevel=2)\n-        return self.connection.set_autocommit()\n+        return self.connection.set_autocommit(True)\n \n     def sql_table_creation_suffix(self):\n         \"\"\""
        },
        {
            "sha": "3a4c3f2b8dd1317cfd84841bd5c2aa1ed06cd019",
            "filename": "django/db/transaction.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e654180ce2a11ef4c525497d6c40dc542e16806c/django%2Fdb%2Ftransaction.py",
            "raw_url": "https://github.com/django/django/raw/e654180ce2a11ef4c525497d6c40dc542e16806c/django%2Fdb%2Ftransaction.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Ftransaction.py?ref=e654180ce2a11ef4c525497d6c40dc542e16806c",
            "patch": "@@ -124,7 +124,7 @@ def get_autocommit(using=None):\n     \"\"\"\n     return get_connection(using).autocommit\n \n-def set_autocommit(using=None, autocommit=True):\n+def set_autocommit(autocommit, using=None):\n     \"\"\"\n     Set the autocommit status of the connection.\n     \"\"\""
        },
        {
            "sha": "b8017e8bfab725610ab4e563bc4f4cc653f25dde",
            "filename": "docs/topics/db/transactions.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/e654180ce2a11ef4c525497d6c40dc542e16806c/docs%2Ftopics%2Fdb%2Ftransactions.txt",
            "raw_url": "https://github.com/django/django/raw/e654180ce2a11ef4c525497d6c40dc542e16806c/docs%2Ftopics%2Fdb%2Ftransactions.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Ftopics%2Fdb%2Ftransactions.txt?ref=e654180ce2a11ef4c525497d6c40dc542e16806c",
            "patch": "@@ -255,7 +255,7 @@ database connection, if you need to.\n \n .. function:: get_autocommit(using=None)\n \n-.. function:: set_autocommit(using=None, autocommit=True)\n+.. function:: set_autocommit(autocommit, using=None)\n \n These functions take a ``using`` argument which should be the name of a\n database. If it isn't provided, Django uses the ``\"default\"`` database.\n@@ -600,11 +600,11 @@ To disable autocommit temporarily, instead of::\n \n you should now use::\n \n-    transaction.set_autocommit(autocommit=False)\n+    transaction.set_autocommit(False)\n     try:\n         # do stuff\n     finally:\n-        transaction.set_autocommit(autocommit=True)\n+        transaction.set_autocommit(True)\n \n To enable autocommit temporarily, instead of::\n \n@@ -613,11 +613,11 @@ To enable autocommit temporarily, instead of::\n \n you should now use::\n \n-    transaction.set_autocommit(autocommit=True)\n+    transaction.set_autocommit(True)\n     try:\n         # do stuff\n     finally:\n-        transaction.set_autocommit(autocommit=False)\n+        transaction.set_autocommit(False)\n \n Disabling transaction management\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "sha": "c7f09013d4c4c462e548294be76f8a87837d96bb",
            "filename": "tests/backends/tests.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/django/django/blob/e654180ce2a11ef4c525497d6c40dc542e16806c/tests%2Fbackends%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e654180ce2a11ef4c525497d6c40dc542e16806c/tests%2Fbackends%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fbackends%2Ftests.py?ref=e654180ce2a11ef4c525497d6c40dc542e16806c",
            "patch": "@@ -522,7 +522,7 @@ def test_disable_constraint_checks_manually(self):\n         \"\"\"\n         When constraint checks are disabled, should be able to write bad data without IntegrityErrors.\n         \"\"\"\n-        transaction.set_autocommit(autocommit=False)\n+        transaction.set_autocommit(False)\n         try:\n             # Create an Article.\n             models.Article.objects.create(headline=\"Test article\", pub_date=datetime.datetime(2010, 9, 4), reporter=self.r)\n@@ -538,13 +538,13 @@ def test_disable_constraint_checks_manually(self):\n             finally:\n                 transaction.rollback()\n         finally:\n-            transaction.set_autocommit(autocommit=True)\n+            transaction.set_autocommit(True)\n \n     def test_disable_constraint_checks_context_manager(self):\n         \"\"\"\n         When constraint checks are disabled (using context manager), should be able to write bad data without IntegrityErrors.\n         \"\"\"\n-        transaction.set_autocommit(autocommit=False)\n+        transaction.set_autocommit(False)\n         try:\n             # Create an Article.\n             models.Article.objects.create(headline=\"Test article\", pub_date=datetime.datetime(2010, 9, 4), reporter=self.r)\n@@ -559,14 +559,14 @@ def test_disable_constraint_checks_context_manager(self):\n             finally:\n                 transaction.rollback()\n         finally:\n-            transaction.set_autocommit(autocommit=True)\n+            transaction.set_autocommit(True)\n \n     def test_check_constraints(self):\n         \"\"\"\n         Constraint checks should raise an IntegrityError when bad data is in the DB.\n         \"\"\"\n         try:\n-            transaction.set_autocommit(autocommit=False)\n+            transaction.set_autocommit(False)\n             # Create an Article.\n             models.Article.objects.create(headline=\"Test article\", pub_date=datetime.datetime(2010, 9, 4), reporter=self.r)\n             # Retrive it from the DB\n@@ -580,7 +580,7 @@ def test_check_constraints(self):\n             finally:\n                 transaction.rollback()\n         finally:\n-            transaction.set_autocommit(autocommit=True)\n+            transaction.set_autocommit(True)\n \n \n class ThreadTests(TestCase):"
        },
        {
            "sha": "c250f647ce8a43f293a94e7d8ed232730945d5db",
            "filename": "tests/fixtures_model_package/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/e654180ce2a11ef4c525497d6c40dc542e16806c/tests%2Ffixtures_model_package%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e654180ce2a11ef4c525497d6c40dc542e16806c/tests%2Ffixtures_model_package%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Ffixtures_model_package%2Ftests.py?ref=e654180ce2a11ef4c525497d6c40dc542e16806c",
            "patch": "@@ -25,7 +25,7 @@ def testClassFixtures(self):\n \n class TestNoInitialDataLoading(TransactionTestCase):\n     def test_syncdb(self):\n-        transaction.set_autocommit(autocommit=False)\n+        transaction.set_autocommit(False)\n         try:\n             Book.objects.all().delete()\n \n@@ -37,7 +37,7 @@ def test_syncdb(self):\n             self.assertQuerysetEqual(Book.objects.all(), [])\n             transaction.rollback()\n         finally:\n-            transaction.set_autocommit(autocommit=True)\n+            transaction.set_autocommit(True)\n \n \n     def test_flush(self):\n@@ -49,7 +49,7 @@ def test_flush(self):\n             lambda a: a.name\n         )\n \n-        transaction.set_autocommit(autocommit=False)\n+        transaction.set_autocommit(False)\n         try:\n             management.call_command(\n                 'flush',\n@@ -61,7 +61,7 @@ def test_flush(self):\n             self.assertQuerysetEqual(Book.objects.all(), [])\n             transaction.rollback()\n         finally:\n-            transaction.set_autocommit(autocommit=True)\n+            transaction.set_autocommit(True)\n \n \n class FixtureTestCase(TestCase):"
        },
        {
            "sha": "c76056b93a19870e7dbd7f6d9acfe0f5cd794110",
            "filename": "tests/fixtures_regress/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/e654180ce2a11ef4c525497d6c40dc542e16806c/tests%2Ffixtures_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e654180ce2a11ef4c525497d6c40dc542e16806c/tests%2Ffixtures_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Ffixtures_regress%2Ftests.py?ref=e654180ce2a11ef4c525497d6c40dc542e16806c",
            "patch": "@@ -684,8 +684,8 @@ def ticket_11101(self):\n     @skipUnlessDBFeature('supports_transactions')\n     def test_ticket_11101(self):\n         \"\"\"Test that fixtures can be rolled back (ticket #11101).\"\"\"\n-        transaction.set_autocommit(autocommit=False)\n+        transaction.set_autocommit(False)\n         try:\n             self.ticket_11101()\n         finally:\n-            transaction.set_autocommit(autocommit=True)\n+            transaction.set_autocommit(True)"
        },
        {
            "sha": "e5a608e5834104365b6848f28fda245cc344915b",
            "filename": "tests/transactions/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/e654180ce2a11ef4c525497d6c40dc542e16806c/tests%2Ftransactions%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e654180ce2a11ef4c525497d6c40dc542e16806c/tests%2Ftransactions%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Ftransactions%2Ftests.py?ref=e654180ce2a11ef4c525497d6c40dc542e16806c",
            "patch": "@@ -269,19 +269,19 @@ def test_merged_outer_rollback_after_inner_failure_and_inner_success(self):\n class AtomicErrorsTests(TransactionTestCase):\n \n     def test_atomic_requires_autocommit(self):\n-        transaction.set_autocommit(autocommit=False)\n+        transaction.set_autocommit(False)\n         try:\n             with self.assertRaises(transaction.TransactionManagementError):\n                 with transaction.atomic():\n                     pass\n         finally:\n-            transaction.set_autocommit(autocommit=True)\n+            transaction.set_autocommit(True)\n \n     def test_atomic_prevents_disabling_autocommit(self):\n         autocommit = transaction.get_autocommit()\n         with transaction.atomic():\n             with self.assertRaises(transaction.TransactionManagementError):\n-                transaction.set_autocommit(autocommit=not autocommit)\n+                transaction.set_autocommit(not autocommit)\n         # Make sure autocommit wasn't changed.\n         self.assertEqual(connection.autocommit, autocommit)\n "
        }
    ],
    "stats": {
        "total": 48,
        "additions": 24,
        "deletions": 24
    }
}