{
    "author": "jezdez",
    "message": "Fixed #6580 -- Added `default` parameter to `MultiValueDict.getlist` method (the base class for `QueryDict`). Many thanks to mk and andrewebdev.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16260 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "fc8116cc4f5f27911c7685649ebac0a96fb39a49",
    "files": [
        {
            "sha": "b0b449c76d6c546de04d81a616141f414ddba7a1",
            "filename": "django/utils/datastructures.py",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/fc8116cc4f5f27911c7685649ebac0a96fb39a49/django%2Futils%2Fdatastructures.py",
            "raw_url": "https://github.com/django/django/raw/fc8116cc4f5f27911c7685649ebac0a96fb39a49/django%2Futils%2Fdatastructures.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Futils%2Fdatastructures.py?ref=fc8116cc4f5f27911c7685649ebac0a96fb39a49",
            "patch": "@@ -228,6 +228,10 @@ class MultiValueDict(dict):\n     'Simon'\n     >>> d.getlist('name')\n     ['Adrian', 'Simon']\n+    >>> d.getlist('doesnotexist')\n+    []\n+    >>> d.getlist('doesnotexist', ['Adrian', 'Simon'])\n+    ['Adrian', 'Simon']\n     >>> d.get('lastname', 'nonexistent')\n     'nonexistent'\n     >>> d.setlist('lastname', ['Holovaty', 'Willison'])\n@@ -300,14 +304,16 @@ def get(self, key, default=None):\n             return default\n         return val\n \n-    def getlist(self, key):\n+    def getlist(self, key, default=None):\n         \"\"\"\n         Returns the list of values for the passed key. If key doesn't exist,\n-        then an empty list is returned.\n+        then a default value is returned.\n         \"\"\"\n         try:\n             return super(MultiValueDict, self).__getitem__(key)\n         except KeyError:\n+            if default is not None:\n+                return default\n             return []\n \n     def setlist(self, key, list_):"
        },
        {
            "sha": "72872d5b4055950a917f3726661909ea737d3b7c",
            "filename": "docs/ref/request-response.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/fc8116cc4f5f27911c7685649ebac0a96fb39a49/docs%2Fref%2Frequest-response.txt",
            "raw_url": "https://github.com/django/django/raw/fc8116cc4f5f27911c7685649ebac0a96fb39a49/docs%2Fref%2Frequest-response.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Frequest-response.txt?ref=fc8116cc4f5f27911c7685649ebac0a96fb39a49",
            "patch": "@@ -448,11 +448,15 @@ In addition, ``QueryDict`` has the following methods:\n     standard library. The copy will be mutable -- that is, you can change its\n     values.\n \n-.. method:: QueryDict.getlist(key)\n+.. method:: QueryDict.getlist(key, default)\n \n     Returns the data with the requested key, as a Python list. Returns an\n-    empty list if the key doesn't exist. It's guaranteed to return a list of\n-    some sort.\n+    empty list if the key doesn't exist and no default value was provided.\n+    It's guaranteed to return a list of some sort unless the default value\n+    was no list.\n+\n+    .. versionchanged:: 1.4\n+        The ``default`` parameter was added.\n \n .. method:: QueryDict.setlist(key, list_)\n "
        },
        {
            "sha": "2f1a47a656ec976ca1113cfc3742fcfd2429ba53",
            "filename": "tests/regressiontests/utils/datastructures.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/fc8116cc4f5f27911c7685649ebac0a96fb39a49/tests%2Fregressiontests%2Futils%2Fdatastructures.py",
            "raw_url": "https://github.com/django/django/raw/fc8116cc4f5f27911c7685649ebac0a96fb39a49/tests%2Fregressiontests%2Futils%2Fdatastructures.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Futils%2Fdatastructures.py?ref=fc8116cc4f5f27911c7685649ebac0a96fb39a49",
            "patch": "@@ -206,6 +206,8 @@ def test_multivaluedict(self):\n         self.assertEqual(d.get('lastname'), None)\n         self.assertEqual(d.get('lastname', 'nonexistent'), 'nonexistent')\n         self.assertEqual(d.getlist('lastname'), [])\n+        self.assertEqual(d.getlist('doesnotexist', ['Adrian', 'Simon']),\n+                         ['Adrian', 'Simon'])\n \n         d.setlist('lastname', ['Holovaty', 'Willison'])\n         self.assertEqual(d.getlist('lastname'), ['Holovaty', 'Willison'])"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 17,
        "deletions": 5
    }
}