{
    "author": "adrianholovaty",
    "message": "Fixed #15618 -- CookieStorage storage in messages framework now honors SESSION_COOKIE_DOMAIN. Thanks for the report and patch, lamby\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@15848 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "ccc972e750b9a3d6cfda1e20b2fbe066bf337427",
    "files": [
        {
            "sha": "2cc6fa67162376aade8ee8edac9e54e6cf05ccaf",
            "filename": "django/contrib/messages/storage/cookie.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/ccc972e750b9a3d6cfda1e20b2fbe066bf337427/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py",
            "raw_url": "https://github.com/django/django/raw/ccc972e750b9a3d6cfda1e20b2fbe066bf337427/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fmessages%2Fstorage%2Fcookie.py?ref=ccc972e750b9a3d6cfda1e20b2fbe066bf337427",
            "patch": "@@ -72,7 +72,8 @@ def _update_cookie(self, encoded_data, response):\n         store, or deletes the cookie.\n         \"\"\"\n         if encoded_data:\n-            response.set_cookie(self.cookie_name, encoded_data)\n+            response.set_cookie(self.cookie_name, encoded_data,\n+                domain=settings.SESSION_COOKIE_DOMAIN)\n         else:\n             response.delete_cookie(self.cookie_name)\n "
        },
        {
            "sha": "838f492fd13131312356151d90ec6a796a7c07c9",
            "filename": "docs/ref/contrib/messages.txt",
            "status": "modified",
            "additions": 22,
            "deletions": 12,
            "changes": 34,
            "blob_url": "https://github.com/django/django/blob/ccc972e750b9a3d6cfda1e20b2fbe066bf337427/docs%2Fref%2Fcontrib%2Fmessages.txt",
            "raw_url": "https://github.com/django/django/raw/ccc972e750b9a3d6cfda1e20b2fbe066bf337427/docs%2Fref%2Fcontrib%2Fmessages.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fcontrib%2Fmessages.txt?ref=ccc972e750b9a3d6cfda1e20b2fbe066bf337427",
            "patch": "@@ -40,7 +40,7 @@ To enable message functionality, do the following:\n \n The default ``settings.py`` created by ``django-admin.py startproject`` has\n ``MessageMiddleware`` activated and the ``django.contrib.messages`` app\n-installed.  Also, the default value for :setting:`TEMPLATE_CONTEXT_PROCESSORS`\n+installed. Also, the default value for :setting:`TEMPLATE_CONTEXT_PROCESSORS`\n contains ``'django.contrib.messages.context_processors.messages'``.\n \n If you don't want to use messages, you can remove the\n@@ -81,7 +81,7 @@ Four storage classes are included:\n     SessionStorage for the messages that could not fit in a single cookie.\n \n     Since it is uses SessionStorage, it also requires Django's\n-    ``contrib.session`` application.\n+    ``contrib.sessions`` application.\n \n ``'django.contrib.messages.storage.user_messages.LegacyFallbackStorage'``\n     This is the default temporary storage class.\n@@ -103,22 +103,22 @@ LegacyFallbackStorage\n \n The ``LegacyFallbackStorage`` is a temporary tool to facilitate the transition\n from the deprecated ``user.message_set`` API and will be removed in Django 1.4\n-according to Django's standard deprecation policy.  For more information, see\n+according to Django's standard deprecation policy. For more information, see\n the full :doc:`release process documentation </internals/release-process>`.\n \n In addition to the functionality in the ``FallbackStorage``, it adds a custom,\n read-only storage class that retrieves messages from the user ``Message``\n model. Any messages that were stored in the ``Message`` model (e.g., by code\n that has not yet been updated to use the messages framework) will be retrieved\n-first, followed by those stored in a cookie and in the session, if any.  Since\n+first, followed by those stored in a cookie and in the session, if any. Since\n messages stored in the ``Message`` model do not have a concept of levels, they\n will be assigned the ``INFO`` level by default.\n \n Message levels\n --------------\n \n The messages framework is based on a configurable level architecture similar\n-to that of the Python logging module.  Message levels allow you to group\n+to that of the Python logging module. Message levels allow you to group\n messages by type so they can be filtered or displayed differently in views and\n templates.\n \n@@ -146,8 +146,8 @@ Message tags\n \n Message tags are a string representation of the message level plus any\n extra tags that were added directly in the view (see\n-`Adding extra message tags`_ below for more details).  Tags are stored in a\n-string and are separated by spaces.  Typically, message tags\n+`Adding extra message tags`_ below for more details). Tags are stored in a\n+string and are separated by spaces. Typically, message tags\n are used as CSS classes to customize message style based on message type. By\n default, each level has a single tag that's a lowercase version of its own\n constant:\n@@ -222,7 +222,7 @@ level constants and use them to create more customized user feedback, e.g.::\n         messages.add_message(request, CRITICAL, 'A serious error occurred.')\n \n When creating custom message levels you should be careful to avoid overloading\n-existing levels.  The values for the built-in levels are:\n+existing levels. The values for the built-in levels are:\n \n .. _message-level-constants:\n \n@@ -304,7 +304,7 @@ message framework is disabled.\n .. note::\n    Setting ``fail_silently=True`` only hides the ``MessageFailure`` that would\n    otherwise occur when the messages framework disabled and one attempts to\n-   use one of the ``add_message`` family of methods.  It does not hide failures\n+   use one of the ``add_message`` family of methods. It does not hide failures\n    that may occur for other reasons.\n \n Expiration of messages\n@@ -326,15 +326,15 @@ Behavior of parallel requests\n \n Due to the way cookies (and hence sessions) work, **the behavior of any\n backends that make use of cookies or sessions is undefined when the same\n-client makes multiple requests that set or get messages in parallel**.  For\n+client makes multiple requests that set or get messages in parallel**. For\n example, if a client initiates a request that creates a message in one window\n (or tab) and then another that fetches any uniterated messages in another\n window, before the first window redirects, the message may appear in the\n second window instead of the first window where it may be expected.\n \n In short, when multiple simultaneous requests from the same client are\n involved, messages are not guaranteed to be delivered to the same window that\n-created them nor, in some cases, at all.  Note that this is typically not a\n+created them nor, in some cases, at all. Note that this is typically not a\n problem in most applications and will become a non-issue in HTML5, where each\n window/tab will have its own browsing context.\n \n@@ -349,7 +349,7 @@ MESSAGE_LEVEL\n \n Default: ``messages.INFO``\n \n-This sets the minimum message that will be saved in the message storage.  See\n+This sets the minimum message that will be saved in the message storage. See\n `Message levels`_ above for more details.\n \n .. admonition:: Important\n@@ -408,4 +408,14 @@ to override. See `Displaying messages`_ above for more details.\n    according to the values in the above :ref:`constants table\n    <message-level-constants>`.\n \n+SESSION_COOKIE_DOMAIN\n+---------------------\n+\n+Default: ``None``\n+\n+The storage backends that use cookies -- ``CookieStorage`` and\n+``FallbackStorage`` -- use the value of ``SESSION_COOKIE_DOMAIN`` in\n+setting their cookies. See the :doc:`settings documentation </ref/settings>`\n+for more information on how this works and why you might need to set it.\n+\n .. _Django settings: ../settings/"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 24,
        "deletions": 13
    }
}