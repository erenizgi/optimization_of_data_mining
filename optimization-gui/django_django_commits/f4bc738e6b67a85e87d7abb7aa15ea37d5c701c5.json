{
    "author": "alex",
    "message": "Converted Uruguayan localflavor doctests into unittests.  We have alwyas been at war with doctests.  Thanks to Idan Gazit.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@14955 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5",
    "files": [
        {
            "sha": "2b9e134362d2f1216eb1e0a0598a324e2a741913",
            "filename": "tests/regressiontests/forms/localflavor/uy.py",
            "status": "modified",
            "additions": 48,
            "deletions": 42,
            "changes": 90,
            "blob_url": "https://github.com/django/django/blob/f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fuy.py",
            "raw_url": "https://github.com/django/django/raw/f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fuy.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavor%2Fuy.py?ref=f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5",
            "patch": "@@ -1,46 +1,52 @@\n-# -*- coding: utf-8 -*-\n-# Tests for the contrib/localflavor/ UY form fields.\n+from django.contrib.localflavor.uy.forms import UYDepartamentSelect, UYCIField\n+from django.contrib.localflavor.uy.util import get_validation_digit\n \n-tests = r\"\"\"\n-# UYDepartamentSelect #########################################################\n+from utils import LocalFlavorTestCase\n \n->>> from django.contrib.localflavor.uy.forms import UYDepartamentSelect\n->>> f = UYDepartamentSelect()\n->>> f.render('departamentos', 'S')\n-u'<select name=\"departamentos\">\\n<option value=\"G\">Artigas</option>\\n<option value=\"A\">Canelones</option>\\n<option value=\"E\">Cerro Largo</option>\\n<option value=\"L\">Colonia</option>\\n<option value=\"Q\">Durazno</option>\\n<option value=\"N\">Flores</option>\\n<option value=\"O\">Florida</option>\\n<option value=\"P\">Lavalleja</option>\\n<option value=\"B\">Maldonado</option>\\n<option value=\"S\" selected=\"selected\">Montevideo</option>\\n<option value=\"I\">Paysand\\xfa</option>\\n<option value=\"J\">R\\xedo Negro</option>\\n<option value=\"F\">Rivera</option>\\n<option value=\"C\">Rocha</option>\\n<option value=\"H\">Salto</option>\\n<option value=\"M\">San Jos\\xe9</option>\\n<option value=\"K\">Soriano</option>\\n<option value=\"R\">Tacuaremb\\xf3</option>\\n<option value=\"D\">Treinta y Tres</option>\\n</select>'\n \n-# UYCIField ###################################################################\n+class UYLocalFlavorTests(LocalFlavorTestCase):\n+    def test_UYDepartmentSelect(self):\n+        f = UYDepartamentSelect()\n+        out = u'''<select name=\"departamentos\">\n+<option value=\"G\">Artigas</option>\n+<option value=\"A\">Canelones</option>\n+<option value=\"E\">Cerro Largo</option>\n+<option value=\"L\">Colonia</option>\n+<option value=\"Q\">Durazno</option>\n+<option value=\"N\">Flores</option>\n+<option value=\"O\">Florida</option>\n+<option value=\"P\">Lavalleja</option>\n+<option value=\"B\">Maldonado</option>\n+<option value=\"S\" selected=\"selected\">Montevideo</option>\n+<option value=\"I\">Paysand\\xfa</option>\n+<option value=\"J\">R\\xedo Negro</option>\n+<option value=\"F\">Rivera</option>\n+<option value=\"C\">Rocha</option>\n+<option value=\"H\">Salto</option>\n+<option value=\"M\">San Jos\\xe9</option>\n+<option value=\"K\">Soriano</option>\n+<option value=\"R\">Tacuaremb\\xf3</option>\n+<option value=\"D\">Treinta y Tres</option>\n+</select>'''\n+        self.assertEqual(f.render('departamentos', 'S'), out)\n+    \n+    def test_UYCIField(self):\n+        error_format = [u'Enter a valid CI number in X.XXX.XXX-X,XXXXXXX-X or XXXXXXXX format.']\n+        error_invalid = [u'Enter a valid CI number.']\n+        valid = {\n+            '4098053': '4098053',\n+            '409805-3': '409805-3',\n+            '409.805-3': '409.805-3',\n+            '10054112': '10054112',\n+            '1005411-2': '1005411-2',\n+            '1.005.411-2': '1.005.411-2',\n+        }\n+        invalid = {\n+            'foo': [u'Enter a valid CI number in X.XXX.XXX-X,XXXXXXX-X or XXXXXXXX format.'],\n+            '409805-2': [u'Enter a valid CI number.'],\n+            '1.005.411-5': [u'Enter a valid CI number.'],\n+        }\n+        self.assertFieldOutput(UYCIField, valid, invalid)\n+        self.assertEqual(get_validation_digit(409805), 3)\n+        self.assertEqual(get_validation_digit(1005411), 2)\n \n->>> from django.contrib.localflavor.uy.util import get_validation_digit\n->>> get_validation_digit(409805) == 3\n-True\n->>> get_validation_digit(1005411) == 2\n-True\n-\n->>> from django.contrib.localflavor.uy.forms import UYCIField\n->>> f = UYCIField()\n->>> f.clean('4098053')\n-u'4098053'\n->>> f.clean('409805-3')\n-u'409805-3'\n->>> f.clean('409.805-3')\n-u'409.805-3'\n->>> f.clean('10054112')\n-u'10054112'\n->>> f.clean('1005411-2')\n-u'1005411-2'\n->>> f.clean('1.005.411-2')\n-u'1.005.411-2'\n->>> f.clean('foo')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CI number in X.XXX.XXX-X,XXXXXXX-X or XXXXXXXX format.']\n->>> f.clean('409805-2')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CI number.']\n->>> f.clean('1.005.411-5')\n-Traceback (most recent call last):\n-...\n-ValidationError: [u'Enter a valid CI number.']\n-\"\"\""
        },
        {
            "sha": "10ddf9abc56917577b08892adabe6fa184383a12",
            "filename": "tests/regressiontests/forms/localflavortests.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "raw_url": "https://github.com/django/django/raw/f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Flocalflavortests.py?ref=f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5",
            "patch": "@@ -1,7 +1,6 @@\n # -*- coding: utf-8 -*-\n from localflavor.cz import tests as localflavor_cz_tests\n from localflavor.se import tests as localflavor_se_tests\n-from localflavor.uy import tests as localflavor_uy_tests\n from localflavor.za import tests as localflavor_za_tests\n \n from localflavor.ar import ARLocalFlavorTests\n@@ -32,11 +31,11 @@\n from localflavor.tr import TRLocalFlavorTests\n from localflavor.uk import UKLocalFlavorTests\n from localflavor.us import USLocalFlavorTests\n+from localflavor.uy import UYLocalFlavorTests\n \n \n __test__ = {\n     'localflavor_cz_tests': localflavor_cz_tests,\n     'localflavor_se_tests': localflavor_se_tests,\n-    'localflavor_uy_tests': localflavor_uy_tests,\n     'localflavor_za_tests': localflavor_za_tests,\n }"
        },
        {
            "sha": "2cc725b4e0eb7ed796800521fe11d1d8d5447cf4",
            "filename": "tests/regressiontests/forms/tests/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fforms%2Ftests%2F__init__.py?ref=f4bc738e6b67a85e87d7abb7aa15ea37d5c701c5",
            "patch": "@@ -41,4 +41,5 @@\n     TRLocalFlavorTests,\n     UKLocalFlavorTests,\n     USLocalFlavorTests,\n+    UYLocalFlavorTests,\n )"
        }
    ],
    "stats": {
        "total": 94,
        "additions": 50,
        "deletions": 44
    }
}