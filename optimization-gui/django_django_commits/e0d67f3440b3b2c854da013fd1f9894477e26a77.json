{
    "author": "claudep",
    "message": "[py3] Fixed test_client_regress tests",
    "sha": "e0d67f3440b3b2c854da013fd1f9894477e26a77",
    "files": [
        {
            "sha": "2fb7991b4981955b2eac4af54f627b231061d1c0",
            "filename": "django/contrib/sessions/backends/base.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/django/django/blob/e0d67f3440b3b2c854da013fd1f9894477e26a77/django%2Fcontrib%2Fsessions%2Fbackends%2Fbase.py",
            "raw_url": "https://github.com/django/django/raw/e0d67f3440b3b2c854da013fd1f9894477e26a77/django%2Fcontrib%2Fsessions%2Fbackends%2Fbase.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcontrib%2Fsessions%2Fbackends%2Fbase.py?ref=e0d67f3440b3b2c854da013fd1f9894477e26a77",
            "patch": "@@ -81,7 +81,7 @@ def encode(self, session_dict):\n         \"Returns the given session dictionary pickled and encoded as a string.\"\n         pickled = pickle.dumps(session_dict, pickle.HIGHEST_PROTOCOL)\n         hash = self._hash(pickled)\n-        return base64.b64encode(hash.encode() + b\":\" + pickled)\n+        return base64.b64encode(hash.encode() + b\":\" + pickled).decode('ascii')\n \n     def decode(self, session_data):\n         encoded_data = base64.b64decode(smart_bytes(session_data))"
        },
        {
            "sha": "d80293b35805ff9844adcac592a6ff23c0a73fc6",
            "filename": "tests/regressiontests/test_client_regress/tests.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/e0d67f3440b3b2c854da013fd1f9894477e26a77/tests%2Fregressiontests%2Ftest_client_regress%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/e0d67f3440b3b2c854da013fd1f9894477e26a77/tests%2Fregressiontests%2Ftest_client_regress%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_client_regress%2Ftests.py?ref=e0d67f3440b3b2c854da013fd1f9894477e26a77",
            "patch": "@@ -858,7 +858,7 @@ def test_simple_unicode_payload(self):\n         json = '{\"english\": \"mountain pass\"}'\n         response = self.client.post(\"/test_client_regress/parse_unicode_json/\", json,\n                                     content_type=\"application/json\")\n-        self.assertEqual(response.content, json)\n+        self.assertEqual(response.content, json.encode())\n \n     def test_unicode_payload_utf8(self):\n         \"A non-ASCII unicode data encoded as UTF-8 can be POSTed\"\n@@ -888,7 +888,7 @@ class DummyFile(object):\n     def __init__(self, filename):\n         self.name = filename\n     def read(self):\n-        return 'TEST_FILE_CONTENT'\n+        return b'TEST_FILE_CONTENT'\n \n class UploadedFileEncodingTest(TestCase):\n     def test_file_encoding(self):"
        },
        {
            "sha": "9b0654806b8cc71d5a37ac2c772c9982b17c5d0d",
            "filename": "tests/regressiontests/test_client_regress/views.py",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/e0d67f3440b3b2c854da013fd1f9894477e26a77/tests%2Fregressiontests%2Ftest_client_regress%2Fviews.py",
            "raw_url": "https://github.com/django/django/raw/e0d67f3440b3b2c854da013fd1f9894477e26a77/tests%2Fregressiontests%2Ftest_client_regress%2Fviews.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_client_regress%2Fviews.py?ref=e0d67f3440b3b2c854da013fd1f9894477e26a77",
            "patch": "@@ -80,9 +80,7 @@ def return_json_file(request):\n \n     # This just checks that the uploaded data is JSON\n     obj_dict = json.loads(request.body.decode(charset))\n-    obj_json = json.dumps(obj_dict, encoding=charset,\n-                                cls=DjangoJSONEncoder,\n-                                ensure_ascii=False)\n+    obj_json = json.dumps(obj_dict, cls=DjangoJSONEncoder, ensure_ascii=False)\n     response = HttpResponse(obj_json.encode(charset), status=200,\n                             content_type='application/json; charset=%s' % charset)\n     response['Content-Disposition'] = 'attachment; filename=testfile.json'"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 4,
        "deletions": 6
    }
}