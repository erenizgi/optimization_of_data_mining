{
    "author": "jezdez",
    "message": "Fixed #11283 -- Made sure that latest() clears previously specified ordering in a QuerySet. Thanks to benmoran, punteney, mk and and Julien Phalip.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16067 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "a845eba8dded42a58d5b42bcb087b3f4bc65a26e",
    "files": [
        {
            "sha": "09d960b3ecac7892f3e972e0f925222a0af2c106",
            "filename": "django/db/models/query.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/django/django/blob/a845eba8dded42a58d5b42bcb087b3f4bc65a26e/django%2Fdb%2Fmodels%2Fquery.py",
            "raw_url": "https://github.com/django/django/raw/a845eba8dded42a58d5b42bcb087b3f4bc65a26e/django%2Fdb%2Fmodels%2Fquery.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fdb%2Fmodels%2Fquery.py?ref=a845eba8dded42a58d5b42bcb087b3f4bc65a26e",
            "patch": "@@ -403,6 +403,7 @@ def latest(self, field_name=None):\n                 \"Cannot change a query once a slice has been taken.\"\n         obj = self._clone()\n         obj.query.set_limits(high=1)\n+        obj.query.clear_ordering()\n         obj.query.add_ordering('-%s' % latest_by)\n         return obj.get()\n "
        },
        {
            "sha": "97cd22bf912cdac851eea0d8ed14f9c0ad4a4d3d",
            "filename": "tests/modeltests/get_latest/tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/django/django/blob/a845eba8dded42a58d5b42bcb087b3f4bc65a26e/tests%2Fmodeltests%2Fget_latest%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/a845eba8dded42a58d5b42bcb087b3f4bc65a26e/tests%2Fmodeltests%2Fget_latest%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fmodeltests%2Fget_latest%2Ftests.py?ref=a845eba8dded42a58d5b42bcb087b3f4bc65a26e",
            "patch": "@@ -43,6 +43,9 @@ def test_latest(self):\n             a3,\n         )\n \n+        # Ensure that latest() overrides any other ordering specified on the query. Refs #11283.\n+        self.assertEqual(Article.objects.order_by('id').latest(), a4)\n+\n     def test_latest_manual(self):\n         # You can still use latest() with a model that doesn't have\n         # \"get_latest_by\" set -- just pass in the field name manually."
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}