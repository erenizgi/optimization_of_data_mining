{
    "author": "timgraham",
    "message": "Fixed #19706 - Tweaks to the tutorial.\n\nThanks Daniele Procida.",
    "sha": "aa85ccf8ce11c4b8374c74fd9dfe72647be49ada",
    "files": [
        {
            "sha": "dcccd583c09710739038f7e31f8761458c2b57d9",
            "filename": "docs/intro/reusable-apps.txt",
            "status": "modified",
            "additions": 11,
            "deletions": 61,
            "changes": 72,
            "blob_url": "https://github.com/django/django/blob/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Freusable-apps.txt",
            "raw_url": "https://github.com/django/django/raw/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Freusable-apps.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Freusable-apps.txt?ref=aa85ccf8ce11c4b8374c74fd9dfe72647be49ada",
            "patch": "@@ -50,8 +50,8 @@ projects and ready to publish for others to install and use.\n     Python package easy for others to install. It can be a little confusing, we\n     know.\n \n-Completing your reusable app\n-============================\n+Your project and your reusable app\n+==================================\n \n After the previous tutorials, our project should look like this::\n \n@@ -67,78 +67,28 @@ After the previous tutorials, our project should look like this::\n             admin.py\n             models.py\n             tests.py\n-            urls.py\n-            views.py\n-\n-You also have a directory somewhere called ``mytemplates`` which you created in\n-:doc:`Tutorial 2 </intro/tutorial02>`. You specified its location in the\n-TEMPLATE_DIRS setting. This directory should look like this::\n-\n-    mytemplates/\n-        admin/\n-            base_site.html\n-        polls/\n-            detail.html\n-            index.html\n-            results.html\n-\n-The polls app is already a Python package, thanks to the ``polls/__init__.py``\n-file. That's a great start, but we can't just pick up this package and drop it\n-into a new project. The polls templates are currently stored in the\n-project-wide ``mytemplates`` directory. To make the app self-contained, it\n-should also contain the necessary templates.\n-\n-Inside the ``polls`` app, create a new ``templates`` directory. Now move the\n-``polls`` template directory from ``mytemplates`` into the new\n-``templates``. Your project should now look like this::\n-\n-    mysite/\n-        manage.py\n-        mysite/\n-            __init__.py\n-            settings.py\n-            urls.py\n-            wsgi.py\n-        polls/\n-            admin.py\n-            __init__.py\n-            models.py\n             templates/\n                 polls/\n                     detail.html\n                     index.html\n                     results.html\n-            tests.py\n             urls.py\n             views.py\n+        mytemplates/\n+            admin/\n+                base_site.html\n \n-Your project-wide templates directory should now look like this::\n-\n-    mytemplates/\n-        admin/\n-            base_site.html\n-\n-Looking good! Now would be a good time to confirm that your polls application\n-still works correctly.  How does Django know how to find the new location of\n-the polls templates even though we didn't modify :setting:`TEMPLATE_DIRS`?\n-Django has a :setting:`TEMPLATE_LOADERS` setting which contains a list\n-of callables that know how to import templates from various sources.  One of\n-the defaults is :class:`django.template.loaders.app_directories.Loader` which\n-looks for a \"templates\" subdirectory in each of the :setting:`INSTALLED_APPS`.\n+You created ``mysite/mytemplates`` in :doc:`Tutorial 2 </intro/tutorial02>`,\n+and ``polls/templates`` in :doc:`Tutorial 3 </intro/tutorial03>`. Now perhaps\n+it is clearer why we chose to have separate template directories for the\n+project and application: everything that is part of the polls application is in\n+``polls``. It makes the application self-contained and easier to drop into a\n+new project.\n \n The ``polls`` directory could now be copied into a new Django project and\n immediately reused. It's not quite ready to be published though. For that, we\n need to package the app to make it easy for others to install.\n \n-.. admonition:: Why nested?\n-\n-   Why create a ``polls`` directory under ``templates`` when we're\n-   already inside the polls app? This directory is needed to avoid conflicts in\n-   Django's ``app_directories`` template loader.  For example, if two\n-   apps had a template called ``base.html``, without the extra directory it\n-   wouldn't be possible to distinguish between the two. It's a good convention\n-   to use the name of your app for this directory.\n-\n .. _installing-reusable-apps-prerequisites:\n \n Installing some prerequisites"
        },
        {
            "sha": "9b0c820380bc09b7d08a9ec08d3f22f45b1cd702",
            "filename": "docs/intro/tutorial01.txt",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/django/django/blob/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Ftutorial01.txt",
            "raw_url": "https://github.com/django/django/raw/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Ftutorial01.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial01.txt?ref=aa85ccf8ce11c4b8374c74fd9dfe72647be49ada",
            "patch": "@@ -146,7 +146,7 @@ purely in Python. We've included this with Django so you can develop things\n rapidly, without having to deal with configuring a production server -- such as\n Apache -- until you're ready for production.\n \n-Now's a good time to note: DON'T use this server in anything resembling a\n+Now's a good time to note: **Don't** use this server in anything resembling a\n production environment. It's intended only for use while developing. (We're in\n the business of making Web frameworks, not Web servers.)\n \n@@ -354,7 +354,7 @@ These concepts are represented by simple Python classes. Edit the\n     class Choice(models.Model):\n         poll = models.ForeignKey(Poll)\n         choice_text = models.CharField(max_length=200)\n-        votes = models.IntegerField()\n+        votes = models.IntegerField(default=0)\n \n The code is straightforward. Each model is represented by a class that\n subclasses :class:`django.db.models.Model`. Each model has a number of class\n@@ -377,11 +377,15 @@ example, we've only defined a human-readable name for ``Poll.pub_date``. For all\n other fields in this model, the field's machine-readable name will suffice as\n its human-readable name.\n \n-Some :class:`~django.db.models.Field` classes have required elements.\n+Some :class:`~django.db.models.Field` classes have required arguments.\n :class:`~django.db.models.CharField`, for example, requires that you give it a\n :attr:`~django.db.models.CharField.max_length`. That's used not only in the\n database schema, but in validation, as we'll soon see.\n \n+A :class:`~django.db.models.Field` can also have various optional arguments; in\n+this case, we've set the :attr:`~django.db.models.Field.default` value of\n+``votes`` to 0.\n+\n Finally, note a relationship is defined, using\n :class:`~django.db.models.ForeignKey`. That tells Django each ``Choice`` is related\n to a single ``Poll``. Django supports all the common database relationships:"
        },
        {
            "sha": "966921f8a5cf08ae74325ddfd1561748867548ed",
            "filename": "docs/intro/tutorial02.txt",
            "status": "modified",
            "additions": 20,
            "deletions": 2,
            "changes": 22,
            "blob_url": "https://github.com/django/django/blob/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Ftutorial02.txt",
            "raw_url": "https://github.com/django/django/raw/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Ftutorial02.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial02.txt?ref=aa85ccf8ce11c4b8374c74fd9dfe72647be49ada",
            "patch": "@@ -399,6 +399,11 @@ That's easy to change, though, using Django's template system. The Django admin\n is powered by Django itself, and its interfaces use Django's own template\n system.\n \n+.. _ref-customizing-your-projects-templates:\n+\n+Customizing your *project's* templates\n+--------------------------------------\n+\n Create a ``mytemplates`` directory in your project directory. Templates can\n live anywhere on your filesystem that Django can access. (Django runs as\n whatever user your server runs.) However, keeping your templates within the\n@@ -446,11 +451,24 @@ override a template, just do the same thing you did with ``base_site.html`` --\n copy it from the default directory into your custom directory, and make\n changes.\n \n+Customizing your *application's* templates\n+------------------------------------------\n+\n Astute readers will ask: But if :setting:`TEMPLATE_DIRS` was empty by default,\n how was Django finding the default admin templates? The answer is that, by\n default, Django automatically looks for a ``templates/`` subdirectory within\n-each app package, for use as a fallback. See the :ref:`template loader\n-documentation <template-loaders>` for full information.\n+each application package, for use as a fallback (don't forget that\n+``django.contrib.admin`` is an application).\n+\n+Our poll application is not very complex and doesn't need custom admin\n+templates. But if it grew more sophisticated and required modification of\n+Django's standard admin templates for some of its functionality, it would be\n+more sensible to modify the *application's* templates, rather than those in the\n+*project*. That way, you could include the polls application in any new project\n+and be assured that it would find the custom templates it needed.\n+\n+See the :ref:`template loader documentation <template-loaders>` for more\n+information about how Django finds its templates.\n \n Customize the admin index page\n =============================="
        },
        {
            "sha": "abc61a23baaa8c2cca398a09c3dcead25a46c122",
            "filename": "docs/intro/tutorial03.txt",
            "status": "modified",
            "additions": 67,
            "deletions": 28,
            "changes": 95,
            "blob_url": "https://github.com/django/django/blob/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Ftutorial03.txt",
            "raw_url": "https://github.com/django/django/raw/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Ftutorial03.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial03.txt?ref=aa85ccf8ce11c4b8374c74fd9dfe72647be49ada",
            "patch": "@@ -39,7 +39,24 @@ In our poll application, we'll have the following four views:\n * Vote action -- handles voting for a particular choice in a particular\n   poll.\n \n-In Django, each view is represented by a simple Python function.\n+In Django, web pages and other content are delivered by views. Each view is\n+represented by a simple Python function (or method, in the case of class-based\n+views). Django will choose a view by examining the URL that's requested (to be\n+precise, the part of the URL after the domain name).\n+\n+Now in your time on the web you may have come across such beauties as\n+\"ME2/Sites/dirmod.asp?sid=&type=gen&mod=Core+Pages&gid=A6CD4967199A42D9B65B1B\".\n+You will be pleased to know that Django allows us much more elegant\n+*URL patterns* than that.\n+\n+A URL pattern is simply the general form of a URL - for example:\n+``/newsarchive/<year>/<month>/``.\n+\n+To get from a URL to a view, Django uses what are known as 'URLconfs'. A\n+URLconf maps URL patterns (described as regular expressions) to views.\n+\n+This tutorial provides basic instruction in the use of URLconfs, and you can\n+refer to :mod:`django.core.urlresolvers` for more information.\n \n Write your first view\n =====================\n@@ -52,19 +69,8 @@ and put the following Python code in it::\n     def index(request):\n         return HttpResponse(\"Hello, world. You're at the poll index.\")\n \n-This is the simplest view possible in Django. Now we have a problem, how does\n-this view get called? For that we need to map it to a URL, in Django this is\n-done in a configuration file called a URLconf.\n-\n-.. admonition:: What is a URLconf?\n-\n-    In Django, web pages and other content are delivered by views and\n-    determining which view is called is done by Python modules informally\n-    titled 'URLconfs'. These modules are pure Python code and are a simple\n-    mapping between URL patterns (as simple regular expressions) to Python\n-    callback functions (your views). This tutorial provides basic instruction\n-    in their use, and you can refer to :mod:`django.core.urlresolvers` for\n-    more information.\n+This is the simplest view possible in Django. To call the view, we need to map\n+it to a URL - and for this we need a URLconf.\n \n To create a URLconf in the polls directory, create a file called ``urls.py``.\n Your app directory should now look like::\n@@ -274,10 +280,48 @@ commas, according to publication date::\n \n There's a problem here, though: the page's design is hard-coded in the view. If\n you want to change the way the page looks, you'll have to edit this Python code.\n-So let's use Django's template system to separate the design from Python.\n+So let's use Django's template system to separate the design from Python by\n+creating a template that the view can use.\n+\n+First, create a directory called ``templates`` in your ``polls`` directory.\n+Django will look for templates in there.\n+\n+Django's :setting:`TEMPLATE_LOADERS` setting contains a list of callables that\n+know how to import templates from various sources. One of the defaults is\n+:class:`django.template.loaders.app_directories.Loader` which looks for a\n+\"templates\" subdirectory in each of the :setting:`INSTALLED_APPS` - this is how\n+Django knows to find the polls templates even though we didn't modify\n+:setting:`TEMPLATE_DIRS`, as we did in :ref:`Tutorial 2\n+<ref-customizing-your-projects-templates>`.\n+\n+.. admonition:: Organizing templates\n+\n+    We *could* have all our templates together, in one big templates directory,\n+    and it would work perfectly well. However, this template belongs to the\n+    polls application, so unlike the admin template we created in the previous\n+    tutorial, we'll put this one in the application's template directory\n+    (``polls/templates``) rather than the project's (``mytemplates``). We'll\n+    discuss in more detail in the :doc:`reusable apps tutorial\n+    </intro/reusable-apps>` *why* we do this.\n+\n+Within the ``templates`` directory you have just created, create another\n+directory called ``polls``, and within that create a file called\n+``index.html``. In other words, your template should be at\n+``polls/templates/polls/index.html``. Because of how the ``app_directories``\n+template loader works as described above, you can refer to this template within\n+Django simply as ``polls/index.html``.\n+\n+.. admonition:: Template namespacing\n+\n+    Now we *might* be able to get away with putting our templates directly in\n+    ``polls/templates`` (rather than creating another ``polls`` subdirectory),\n+    but it would actually be a bad idea. Django will choose the first template\n+    it finds whose name matches, and if you had a template with the same name\n+    in a *different* application, Django would be unable to distinguish between\n+    them. We need to be able to point Django at the right one, and the easiest\n+    way to ensure this is by *namespacing* them. That is, by putting those\n+    templates inside *another* directory named for the application itself.\n \n-First, create a directory ``polls`` in your template directory you specified\n-in :setting:`TEMPLATE_DIRS`. Within that, create a file called ``index.html``.\n Put the following code in that template:\n \n .. code-block:: html+django\n@@ -311,15 +355,9 @@ That code loads the template called  ``polls/index.html`` and passes it a\n context. The context is a dictionary mapping template variable names to Python\n objects.\n \n-Load the page in your Web browser, and you should see a bulleted-list\n-containing the \"What's up\" poll from Tutorial 1. The link points to the poll's\n-detail page.\n-\n-.. admonition:: Organizing Templates\n-\n-    Rather than one big templates directory, you can also store templates\n-    within each app. We'll discuss this in more detail in the :doc:`reusable\n-    apps tutorial</intro/reusable-apps>`.\n+Load the page by pointing your browser at \"/polls/\", and you should see a\n+bulleted-list containing the \"What's up\" poll from Tutorial 1. The link points\n+to the poll's detail page.\n \n A shortcut: :func:`~django.shortcuts.render`\n --------------------------------------------\n@@ -536,8 +574,9 @@ view, and so might an app on the same project that is for a blog. How does one\n make it so that Django knows which app view to create for a url when using the\n ``{% url %}`` template tag?\n \n-The answer is to add namespaces to your root URLconf. In the\n-``mysite/urls.py`` file, go ahead and change it to include namespacing::\n+The answer is to add namespaces to your root URLconf. In the ``mysite/urls.py``\n+file (the project's ``urls.py``, not the application's), go ahead and change\n+it to include namespacing::\n \n     from django.conf.urls import patterns, include, url\n "
        },
        {
            "sha": "87d8e584ad7828b5ffd961d2100d2ad338b9a327",
            "filename": "docs/intro/tutorial04.txt",
            "status": "modified",
            "additions": 11,
            "deletions": 4,
            "changes": 15,
            "blob_url": "https://github.com/django/django/blob/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Ftutorial04.txt",
            "raw_url": "https://github.com/django/django/raw/aa85ccf8ce11c4b8374c74fd9dfe72647be49ada/docs%2Fintro%2Ftutorial04.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial04.txt?ref=aa85ccf8ce11c4b8374c74fd9dfe72647be49ada",
            "patch": "@@ -33,7 +33,7 @@ A quick rundown:\n   ``value`` of each radio button is the associated poll choice's ID. The\n   ``name`` of each radio button is ``\"choice\"``. That means, when somebody\n   selects one of the radio buttons and submits the form, it'll send the\n-  POST data ``choice=3``. This is HTML Forms 101.\n+  POST data ``choice=3``. This is the basic concept of HTML forms.\n \n * We set the form's ``action`` to ``{% url 'polls:vote' poll.id %}``, and we\n   set ``method=\"post\"``. Using ``method=\"post\"`` (as opposed to\n@@ -199,6 +199,9 @@ Read on for details.\n \n     You should know basic math before you start using a calculator.\n \n+Amend URLconf\n+-------------\n+\n First, open the ``polls/urls.py`` URLconf and change it like so::\n \n     from django.conf.urls import patterns, url\n@@ -225,6 +228,9 @@ First, open the ``polls/urls.py`` URLconf and change it like so::\n         url(r'^(?P<poll_id>\\d+)/vote/$', 'polls.views.vote', name='vote'),\n     )\n \n+Amend views\n+-----------\n+\n We're using two generic views here:\n :class:`~django.views.generic.list.ListView` and\n :class:`~django.views.generic.detail.DetailView`. Respectively, those\n@@ -267,9 +273,10 @@ As an alternative approach, you could change your templates to match\n the new default context variables -- but it's a lot easier to just\n tell Django to use the variable you want.\n \n-You can now delete the ``index()``, ``detail()`` and ``results()``\n-views from ``polls/views.py``. We don't need them anymore -- they have\n-been replaced by generic views.\n+You can now delete the ``index()``, ``detail()`` and ``results()`` views from\n+``polls/views.py``. We don't need them anymore -- they have been replaced by\n+generic views. You can also delete the import for ``HttpResponse``, which is no\n+longer required.\n \n Run the server, and use your new polling app based on generic views.\n "
        }
    ],
    "stats": {
        "total": 214,
        "additions": 116,
        "deletions": 98
    }
}