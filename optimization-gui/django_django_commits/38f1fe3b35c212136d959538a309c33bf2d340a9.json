{
    "author": "carljm",
    "message": "Fixed #15372 -- Switched to a startproject default layout that allows us to avoid sys.path hacks.\n\ngit-svn-id: http://code.djangoproject.com/svn/django/trunk@16964 bcc190cf-cafb-0310-a4f2-bffc1f526a37",
    "sha": "38f1fe3b35c212136d959538a309c33bf2d340a9",
    "files": [
        {
            "sha": "2568a324b1a6446f7b4f55497135f6dfea37bbf0",
            "filename": "django/conf/project_template/manage.py",
            "status": "modified",
            "additions": 6,
            "deletions": 11,
            "changes": 17,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fconf%2Fproject_template%2Fmanage.py",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fconf%2Fproject_template%2Fmanage.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Fproject_template%2Fmanage.py?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -1,14 +1,9 @@\n #!/usr/bin/env python\n-from django.core.management import execute_manager\n-import imp\n-try:\n-    imp.find_module('settings') # Assumed to be in the same directory.\n-except ImportError:\n-    import sys\n-    sys.stderr.write(\"Error: Can't find the file 'settings.py' in the directory containing %r. It appears you've customized things.\\nYou'll have to run django-admin.py, passing it your settings module.\\n\" % __file__)\n-    sys.exit(1)\n-\n-import settings\n+import os, sys\n \n if __name__ == \"__main__\":\n-    execute_manager(settings)\n+    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"{{ project_name }}.settings\")\n+\n+    from django.core.management import execute_from_command_line\n+\n+    execute_from_command_line(sys.argv)"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "django/conf/project_template/project_name/__init__.py",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fconf%2Fproject_template%2Fproject_name%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fconf%2Fproject_template%2Fproject_name%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Fproject_template%2Fproject_name%2F__init__.py?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "previous_filename": "django/conf/project_template/__init__.py"
        },
        {
            "sha": "b92c1163c39b928c1bcba665a2e147603d1591e2",
            "filename": "django/conf/project_template/project_name/settings.py",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fconf%2Fproject_template%2Fproject_name%2Fsettings.py",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fconf%2Fproject_template%2Fproject_name%2Fsettings.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Fproject_template%2Fproject_name%2Fsettings.py?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "previous_filename": "django/conf/project_template/settings.py"
        },
        {
            "sha": "eb471d54a89d4f92fdd61cf9f98181553b1c4875",
            "filename": "django/conf/project_template/project_name/urls.py",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fconf%2Fproject_template%2Fproject_name%2Furls.py",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fconf%2Fproject_template%2Fproject_name%2Furls.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fconf%2Fproject_template%2Fproject_name%2Furls.py?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "previous_filename": "django/conf/project_template/urls.py"
        },
        {
            "sha": "6edb0ba399823ed673b3e652f68af14002971e21",
            "filename": "django/core/management/__init__.py",
            "status": "modified",
            "additions": 15,
            "deletions": 19,
            "changes": 34,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fcore%2Fmanagement%2F__init__.py",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fcore%2Fmanagement%2F__init__.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2F__init__.py?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -2,6 +2,7 @@\n import sys\n from optparse import OptionParser, NO_DEFAULT\n import imp\n+import warnings\n \n import django\n from django.core.management.base import BaseCommand, CommandError, handle_default_options\n@@ -102,14 +103,6 @@ def get_commands():\n         except (AttributeError, EnvironmentError, ImportError):\n             apps = []\n \n-        # Find the project directory\n-        try:\n-            from django.conf import settings\n-            module = import_module(settings.SETTINGS_MODULE)\n-            project_directory = setup_environ(module, settings.SETTINGS_MODULE)\n-        except (AttributeError, EnvironmentError, ImportError, KeyError):\n-            project_directory = None\n-\n         # Find and load the management module for each installed app.\n         for app_name in apps:\n             try:\n@@ -119,17 +112,6 @@ def get_commands():\n             except ImportError:\n                 pass # No management module - ignore this app\n \n-        if project_directory:\n-            # Remove the \"startproject\" command from self.commands, because\n-            # that's a django-admin.py command, not a manage.py command.\n-            del _commands['startproject']\n-\n-            # Override the startapp command so that it always uses the\n-            # project_directory, not the current working directory\n-            # (which is default).\n-            from django.core.management.commands.startapp import ProjectCommand\n-            _commands['startapp'] = ProjectCommand(project_directory)\n-\n     return _commands\n \n def call_command(name, *args, **options):\n@@ -388,6 +370,13 @@ def setup_environ(settings_mod, original_settings_path=None):\n     The \"original_settings_path\" parameter is optional, but recommended, since\n     trying to work out the original path from the module can be problematic.\n     \"\"\"\n+    warnings.warn(\n+        \"The 'setup_environ' function is deprecated, \"\n+        \"you likely need to update your 'manage.py'; \"\n+        \"please see the Django 1.4 release notes \"\n+        \"(https://docs.djangoproject.com/en/dev/releases/1.4/).\",\n+        PendingDeprecationWarning)\n+\n     # Add this project to sys.path so that it's importable in the conventional\n     # way. For example, if this file (manage.py) lives in a directory\n     # \"myproject\", this code would add \"/path/to/myproject\" to sys.path.\n@@ -437,6 +426,13 @@ def execute_manager(settings_mod, argv=None):\n     Like execute_from_command_line(), but for use by manage.py, a\n     project-specific django-admin.py utility.\n     \"\"\"\n+    warnings.warn(\n+        \"The 'execute_manager' function is deprecated, \"\n+        \"you likely need to update your 'manage.py'; \"\n+        \"please see the Django 1.4 release notes \"\n+        \"(https://docs.djangoproject.com/en/dev/releases/1.4/).\",\n+        PendingDeprecationWarning)\n+\n     setup_environ(settings_mod)\n     utility = ManagementUtility(argv)\n     utility.execute()"
        },
        {
            "sha": "ce4d32bae87e0d8910411fe6da6098eae5eed6d6",
            "filename": "django/core/management/commands/startproject.py",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fcore%2Fmanagement%2Fcommands%2Fstartproject.py",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/django%2Fcore%2Fmanagement%2Fcommands%2Fstartproject.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/django%2Fcore%2Fmanagement%2Fcommands%2Fstartproject.py?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -15,8 +15,6 @@ class Command(LabelCommand):\n     can_import_settings = False\n \n     def handle_label(self, project_name, **options):\n-        # Determine the project_name a bit naively -- by looking at the name of\n-        # the parent directory.\n         directory = os.getcwd()\n \n         # Check that the project_name cannot be imported.\n@@ -30,7 +28,7 @@ def handle_label(self, project_name, **options):\n         copy_helper(self.style, 'project', project_name, directory)\n \n         # Create a random SECRET_KEY hash, and put it in the main settings.\n-        main_settings_file = os.path.join(directory, project_name, 'settings.py')\n+        main_settings_file = os.path.join(directory, project_name, project_name, 'settings.py')\n         settings_contents = open(main_settings_file, 'r').read()\n         fp = open(main_settings_file, 'w')\n         secret_key = ''.join([choice('abcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*(-_=+)') for i in range(50)])"
        },
        {
            "sha": "b438fd614ea8930461aa5169d2b7ad7a2aadb002",
            "filename": "docs/internals/deprecation.txt",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/docs%2Finternals%2Fdeprecation.txt",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/docs%2Finternals%2Fdeprecation.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Finternals%2Fdeprecation.txt?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -246,6 +246,11 @@ these changes.\n \n     * The Databrowse contrib module will be removed.\n \n+    * The functions :func:`~django.core.management.setup_environ` and\n+      :func:`~django.core.management.execute_manager` will be removed from\n+      :mod:`django.core.management`. This also means that the old (pre-1.4)\n+      style of :file:`manage.py` file will no longer work.\n+\n 2.0\n ---\n "
        },
        {
            "sha": "97743dce4ab17265f022c08bca080f9b6b08944d",
            "filename": "docs/intro/tutorial01.txt",
            "status": "modified",
            "additions": 47,
            "deletions": 40,
            "changes": 87,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/docs%2Fintro%2Ftutorial01.txt",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/docs%2Fintro%2Ftutorial01.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fintro%2Ftutorial01.txt?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -90,41 +90,58 @@ within your Python installation. Consider symlinking to :doc:`django-admin.py\n Let's look at what :djadmin:`startproject` created::\n \n     mysite/\n-        __init__.py\n         manage.py\n-        settings.py\n-        urls.py\n+        mysite/\n+            __init__.py\n+            settings.py\n+            urls.py\n+\n+.. admonition:: Doesn't match what you see?\n+\n+    The default project layout recently changed. If you're seeing a \"flat\"\n+    layout (with no inner :file:`mysite/` directory), you're probably using\n+    a version of Django that doesn't match this tutorial version.  You'll\n+    want to either switch to the older tutorial or the newer Django version.\n \n These files are:\n \n-    * :file:`__init__.py`: An empty file that tells Python that this directory\n-      should be considered a Python package. (Read `more about packages`_ in the\n-      official Python docs if you're a Python beginner.)\n+* The outer :file:`mysite/` directory is just a container for your\n+  project. Its name doesn't matter to Django; you can rename it to anything\n+  you like.\n+\n+* :file:`manage.py`: A command-line utility that lets you interact with this\n+  Django project in various ways. You can read all the details about\n+  :file:`manage.py` in :doc:`/ref/django-admin`.\n \n-    * :file:`manage.py`: A command-line utility that lets you interact with this\n-      Django project in various ways. You can read all the details about\n-      :file:`manage.py` in :doc:`/ref/django-admin`.\n+* The inner :file:`mysite/` directory is the actual Python package for your\n+  project. Its name is the Python package name you'll need to use to import\n+  anything inside it (e.g. ``import mysite.settings``).\n \n-    * :file:`settings.py`: Settings/configuration for this Django project.\n-      :doc:`/topics/settings` will tell you all about how settings work.\n+* :file:`mysite/__init__.py`: An empty file that tells Python that this\n+  directory should be considered a Python package. (Read `more about\n+  packages`_ in the official Python docs if you're a Python beginner.)\n \n-    * :file:`urls.py`: The URL declarations for this Django project; a \"table of\n-      contents\" of your Django-powered site. You can read more about URLs in\n-      :doc:`/topics/http/urls`.\n+* :file:`mysite/settings.py`: Settings/configuration for this Django\n+  project.  :doc:`/topics/settings` will tell you all about how settings\n+  work.\n+\n+* :file:`mysite/urls.py`: The URL declarations for this Django project; a\n+  \"table of contents\" of your Django-powered site. You can read more about\n+  URLs in :doc:`/topics/http/urls`.\n \n .. _more about packages: http://docs.python.org/tutorial/modules.html#packages\n \n The development server\n ----------------------\n \n-Let's verify this worked. Change into the :file:`mysite` directory, if you\n-haven't already, and run the command ``python manage.py runserver``. You'll see\n-the following output on the command line::\n+Let's verify this worked. Change into the outer :file:`mysite` directory, if\n+you haven't already, and run the command ``python manage.py runserver``. You'll\n+see the following output on the command line::\n \n     Validating models...\n     0 errors found.\n \n-    Django version 1.0, using settings 'mysite.settings'\n+    Django version 1.4, using settings 'mysite.settings'\n     Development server is running at http://127.0.0.1:8000/\n     Quit the server with CONTROL-C.\n \n@@ -168,7 +185,7 @@ It worked!\n Database setup\n --------------\n \n-Now, edit :file:`settings.py`. It's a normal Python module with\n+Now, edit :file:`mysite/settings.py`. It's a normal Python module with\n module-level variables representing Django settings. Change the\n following keys in the :setting:`DATABASES` ``'default'`` item to match\n your databases connection settings.\n@@ -286,10 +303,11 @@ so you can focus on writing code rather than creating directories.\n     multiple apps. An app can be in multiple projects.\n \n Your apps can live anywhere on your `Python path`_. In this tutorial, we'll\n-create our poll app in the :file:`mysite` directory for simplicity.\n+create our poll app right next to your :file:`manage.py` file so that it can be\n+imported as its own top-level module, rather than a submodule of ``mysite``.\n \n-To create your app, make sure you're in the :file:`mysite` directory and type\n-this command:\n+To create your app, make sure you're in the same directory as :file:`manage.py`\n+and type this command:\n \n .. code-block:: bash\n \n@@ -499,27 +517,16 @@ API Django gives you. To invoke the Python shell, use this command:\n \n     python manage.py shell\n \n-We're using this instead of simply typing \"python\", because ``manage.py`` sets\n-up the project's environment for you. \"Setting up the environment\" involves two\n-things:\n-\n-    * Putting ``polls`` on ``sys.path``. For flexibility, several pieces of\n-      Django refer to projects in Python dotted-path notation (e.g.\n-      ``'polls.models'``). In order for this to work, the ``polls``\n-      package has to be on ``sys.path``.\n-\n-      We've already seen one example of this: the :setting:`INSTALLED_APPS`\n-      setting is a list of packages in dotted-path notation.\n-\n-    * Setting the ``DJANGO_SETTINGS_MODULE`` environment variable, which gives\n-      Django the path to your ``settings.py`` file.\n+We're using this instead of simply typing \"python\", because :file:`manage.py`\n+sets the ``DJANGO_SETTINGS_MODULE`` environment variable, which gives Django\n+the Python import path to your :file:`settings.py` file.\n \n .. admonition:: Bypassing manage.py\n \n-    If you'd rather not use ``manage.py``, no problem. Just make sure ``mysite``\n-    and ``polls`` are at the root level on the Python path (i.e., ``import mysite``\n-    and ``import polls`` work) and set the ``DJANGO_SETTINGS_MODULE`` environment\n-    variable to ``mysite.settings``.\n+    If you'd rather not use :file:`manage.py`, no problem. Just set the\n+    ``DJANGO_SETTINGS_MODULE`` environment variable to ``mysite.settings`` and\n+    run ``python`` from the same directory :file:`manage.py` is in (or ensure\n+    that directory is on the Python path, so that ``import mysite`` works).\n \n     For more information on all of this, see the :doc:`django-admin.py\n     documentation </ref/django-admin>`."
        },
        {
            "sha": "88c2569607dc1c5cddfbea7728c8e38706e303b0",
            "filename": "docs/ref/django-admin.txt",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/docs%2Fref%2Fdjango-admin.txt",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/docs%2Fref%2Fdjango-admin.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Fref%2Fdjango-admin.txt?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -907,12 +907,6 @@ startproject <projectname>\n Creates a Django project directory structure for the given project name in the\n current directory.\n \n-This command is disabled when the ``--settings`` option to\n-``django-admin.py`` is used, or when the environment variable\n-``DJANGO_SETTINGS_MODULE`` has been set. To re-enable it in these\n-situations, either omit the ``--settings`` option or unset\n-``DJANGO_SETTINGS_MODULE``.\n-\n syncdb\n ------\n "
        },
        {
            "sha": "7ad403cfac675e2aeb0836ff8e17d4647acb634a",
            "filename": "docs/releases/1.4.txt",
            "status": "modified",
            "additions": 90,
            "deletions": 0,
            "changes": 90,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/docs%2Freleases%2F1.4.txt",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/docs%2Freleases%2F1.4.txt",
            "contents_url": "https://api.github.com/repos/django/django/contents/docs%2Freleases%2F1.4.txt?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -328,6 +328,73 @@ a :class:`~django.forms.fields.GenericIPAddressField` form field and\n the validators :data:`~django.core.validators.validate_ipv46_address` and\n :data:`~django.core.validators.validate_ipv6_address`\n \n+Updated default project layout and ``manage.py``\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Django 1.4 ships with an updated default project layout and ``manage.py`` file\n+for the :djadmin:`startproject` management command. These fix some issues with\n+the previous ``manage.py`` handling of Python import paths that caused double\n+imports, trouble moving from development to deployment, and other\n+difficult-to-debug path issues.\n+\n+The previous ``manage.py`` calls functions that are now deprecated, and thus\n+projects upgrading to Django 1.4 should update their ``manage.py``. (The\n+old-style ``manage.py`` will continue to work as before until Django 1.6; in\n+1.5 it will raise ``DeprecationWarning``).\n+\n+The new recommended ``manage.py`` file should look like this::\n+\n+    #!/usr/bin/env python\n+    import os, sys\n+\n+    if __name__ == \"__main__\":\n+        os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"{{ project_name }}.settings\")\n+\n+        from django.core.management import execute_from_command_line\n+\n+        execute_from_command_line(sys.argv)\n+\n+``{{ project_name }}`` should be replaced with the Python package name of the\n+actual project.\n+\n+If settings, URLconf, and apps within the project are imported or referenced\n+using the project-name prefix (e.g. ``myproject.settings``, ``ROOT_URLCONF =\n+``myproject.urls``, etc), the new ``manage.py`` will need to be moved one\n+directory up, so it is outside the project package rather than adjacent to\n+``settings.py`` and ``urls.py``.\n+\n+For instance, with the following layout::\n+\n+    manage.py\n+    mysite/\n+        __init__.py\n+        settings.py\n+        urls.py\n+        myapp/\n+            __init__.py\n+            models.py\n+\n+You could import ``mysite.settings``, ``mysite.urls``, and ``mysite.myapp``,\n+but not ``settings``, ``urls``, or ``myapp`` as top-level modules.\n+\n+Anything imported as a top-level module can be placed adjacent to the new\n+``manage.py``. For instance, to decouple \"myapp\" from the project module and\n+import it as just ``myapp``, place it outside the ``mysite/`` directory::\n+\n+    manage.py\n+    myapp/\n+        __init__.py\n+        models.py\n+    mysite/\n+        __init__.py\n+        settings.py\n+        urls.py\n+\n+If the same code is imported inconsistently (some places with the project\n+prefix, some places without it), the imports will need to be cleaned up when\n+switching to the new ``manage.py``.\n+\n+\n Minor features\n ~~~~~~~~~~~~~~\n \n@@ -729,3 +796,26 @@ The code that powers Databrowse is licensed under the same terms as Django\n itself, and so is available to be adopted by an individual or group as\n a third-party project.\n \n+``django.core.management.setup_environ``\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+This function temporarily modified ``sys.path`` in order to make the parent\n+\"project\" directory importable under the old flat :djadmin:`startproject`\n+layout. This function is now deprecated, as its path workarounds are no longer\n+needed with the new ``manage.py`` and default project layout.\n+\n+This function was never documented or public API, but was widely recommended\n+for use in setting up a \"Django environment\" for a user script. These uses\n+should be replaced by setting the ``DJANGO_SETTINGS_MODULE`` environment\n+variable or using :func:`django.conf.settings.configure`.\n+\n+``django.core.management.execute_manager``\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+This function was previously used by ``manage.py`` to execute a management\n+command. It is identical to\n+``django.core.management.execute_from_command_line``, except that it first\n+calls ``setup_environ``, which is now deprecated. ``execute_manager`` is also\n+deprecated; ``execute_from_command_line`` can be used instead. (Neither of\n+these functions is documented public API, but a deprecation path is needed due\n+to use in existing ``manage.py`` files.)"
        },
        {
            "sha": "8580e36d1a0fa349d424277182818e743ce6722b",
            "filename": "tests/regressiontests/admin_scripts/tests.py",
            "status": "modified",
            "additions": 69,
            "deletions": 60,
            "changes": 129,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Fadmin_scripts%2Ftests.py?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -3,6 +3,8 @@\n advertised - especially with regards to the handling of the DJANGO_SETTINGS_MODULE\n and default settings.py files.\n \"\"\"\n+from __future__ import with_statement\n+\n import os\n import shutil\n import sys\n@@ -35,7 +37,7 @@ def write_settings(self, filename, apps=None, is_dir=False, sdict=None):\n                 settings_file.write(\"%s = %s\\n\" % (s, o))\n \n         if apps is None:\n-            apps = ['django.contrib.auth', 'django.contrib.contenttypes', 'admin_scripts']\n+            apps = ['django.contrib.auth', 'django.contrib.contenttypes', 'regressiontests.admin_scripts']\n \n         settings_file.write(\"INSTALLED_APPS = %s\\n\" % apps)\n \n@@ -100,7 +102,7 @@ def run_test(self, script, args, settings_file=None, apps=None):\n             os.environ['DJANGO_SETTINGS_MODULE'] = settings_file\n         elif 'DJANGO_SETTINGS_MODULE' in os.environ:\n             del os.environ['DJANGO_SETTINGS_MODULE']\n-        python_path = [test_dir, base_dir]\n+        python_path = [project_dir, base_dir]\n         python_path.extend(ext_backend_base_dirs)\n         os.environ[python_path_var_name] = os.pathsep.join(python_path)\n \n@@ -148,6 +150,13 @@ def run_manage(self, args, settings_file=None):\n         test_manage_py = os.path.join(test_dir, 'manage.py')\n         shutil.copyfile(template_manage_py, test_manage_py)\n \n+        with open(test_manage_py, 'r') as fp:\n+            manage_py_contents = fp.read()\n+        manage_py_contents = manage_py_contents.replace(\n+            \"{{ project_name }}\", \"regressiontests\")\n+        with open(test_manage_py, 'w') as fp:\n+            fp.write(manage_py_contents)\n+\n         stdout, stderr = self.run_test('./manage.py', args, settings_file)\n \n         # Cleanup - remove the generated manage.py script\n@@ -224,15 +233,15 @@ def test_builtin_command(self):\n \n     def test_builtin_with_settings(self):\n         \"default: django-admin builtin commands succeed if settings are provided as argument\"\n-        args = ['sqlall','--settings=settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.settings', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n     def test_builtin_with_environment(self):\n         \"default: django-admin builtin commands succeed if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_django_admin(args,'settings')\n+        out, err = self.run_django_admin(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n@@ -259,15 +268,15 @@ def test_custom_command(self):\n \n     def test_custom_command_with_settings(self):\n         \"default: django-admin can execute user commands if settings are provided as argument\"\n-        args = ['noargs_command', '--settings=settings']\n+        args = ['noargs_command', '--settings=regressiontests.settings']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n     def test_custom_command_with_environment(self):\n         \"default: django-admin can execute user commands if settings are provided in environment\"\n         args = ['noargs_command']\n-        out, err = self.run_django_admin(args,'settings')\n+        out, err = self.run_django_admin(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n@@ -290,15 +299,15 @@ def test_builtin_command(self):\n \n     def test_builtin_with_settings(self):\n         \"fulldefault: django-admin builtin commands succeed if a settings file is provided\"\n-        args = ['sqlall','--settings=settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.settings', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n     def test_builtin_with_environment(self):\n         \"fulldefault: django-admin builtin commands succeed if the environment contains settings\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_django_admin(args,'settings')\n+        out, err = self.run_django_admin(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n@@ -325,15 +334,15 @@ def test_custom_command(self):\n \n     def test_custom_command_with_settings(self):\n         \"fulldefault: django-admin can execute user commands if settings are provided as argument\"\n-        args = ['noargs_command', '--settings=settings']\n+        args = ['noargs_command', '--settings=regressiontests.settings']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n     def test_custom_command_with_environment(self):\n         \"fulldefault: django-admin can execute user commands if settings are provided in environment\"\n         args = ['noargs_command']\n-        out, err = self.run_django_admin(args,'settings')\n+        out, err = self.run_django_admin(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n@@ -356,15 +365,15 @@ def test_builtin_command(self):\n \n     def test_builtin_with_settings(self):\n         \"minimal: django-admin builtin commands fail if settings are provided as argument\"\n-        args = ['sqlall','--settings=settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.settings', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n         self.assertOutput(err, 'App with label admin_scripts could not be found')\n \n     def test_builtin_with_environment(self):\n         \"minimal: django-admin builtin commands fail if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_django_admin(args,'settings')\n+        out, err = self.run_django_admin(args,'regressiontests.settings')\n         self.assertNoOutput(out)\n         self.assertOutput(err, 'App with label admin_scripts could not be found')\n \n@@ -391,15 +400,15 @@ def test_custom_command(self):\n \n     def test_custom_command_with_settings(self):\n         \"minimal: django-admin can't execute user commands, even if settings are provided as argument\"\n-        args = ['noargs_command', '--settings=settings']\n+        args = ['noargs_command', '--settings=regressiontests.settings']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(out)\n         self.assertOutput(err, \"Unknown command: 'noargs_command'\")\n \n     def test_custom_command_with_environment(self):\n         \"minimal: django-admin can't execute user commands, even if settings are provided in environment\"\n         args = ['noargs_command']\n-        out, err = self.run_django_admin(args,'settings')\n+        out, err = self.run_django_admin(args,'regressiontests.settings')\n         self.assertNoOutput(out)\n         self.assertOutput(err, \"Unknown command: 'noargs_command'\")\n \n@@ -422,15 +431,15 @@ def test_builtin_command(self):\n \n     def test_builtin_with_settings(self):\n         \"alternate: django-admin builtin commands succeed if settings are provided as argument\"\n-        args = ['sqlall','--settings=alternate_settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.alternate_settings', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n     def test_builtin_with_environment(self):\n         \"alternate: django-admin builtin commands succeed if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_django_admin(args,'alternate_settings')\n+        out, err = self.run_django_admin(args,'regressiontests.alternate_settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n@@ -457,15 +466,15 @@ def test_custom_command(self):\n \n     def test_custom_command_with_settings(self):\n         \"alternate: django-admin can execute user commands if settings are provided as argument\"\n-        args = ['noargs_command', '--settings=alternate_settings']\n+        args = ['noargs_command', '--settings=regressiontests.alternate_settings']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n     def test_custom_command_with_environment(self):\n         \"alternate: django-admin can execute user commands if settings are provided in environment\"\n         args = ['noargs_command']\n-        out, err = self.run_django_admin(args,'alternate_settings')\n+        out, err = self.run_django_admin(args,'regressiontests.alternate_settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n@@ -493,15 +502,15 @@ def test_builtin_command(self):\n \n     def test_builtin_with_settings(self):\n         \"alternate: django-admin builtin commands succeed if settings are provided as argument\"\n-        args = ['sqlall','--settings=alternate_settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.alternate_settings', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n     def test_builtin_with_environment(self):\n         \"alternate: django-admin builtin commands succeed if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_django_admin(args,'alternate_settings')\n+        out, err = self.run_django_admin(args,'regressiontests.alternate_settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n@@ -526,16 +535,16 @@ def test_custom_command(self):\n         self.assertOutput(err, \"Unknown command: 'noargs_command'\")\n \n     def test_custom_command_with_settings(self):\n-        \"alternate: django-admin can't execute user commands, even if settings are provided as argument\"\n-        args = ['noargs_command', '--settings=alternate_settings']\n+        \"alternate: django-admin can execute user commands if settings are provided as argument\"\n+        args = ['noargs_command', '--settings=regressiontests.alternate_settings']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n     def test_custom_command_with_environment(self):\n-        \"alternate: django-admin can't execute user commands, even if settings are provided in environment\"\n+        \"alternate: django-admin can execute user commands if settings are provided in environment\"\n         args = ['noargs_command']\n-        out, err = self.run_django_admin(args,'alternate_settings')\n+        out, err = self.run_django_admin(args,'regressiontests.alternate_settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n@@ -557,7 +566,7 @@ def test_setup_environ(self):\n         test_dir = os.path.dirname(os.path.dirname(__file__))\n         args = ['startapp','settings_test']\n         app_path = os.path.join(test_dir, 'settings_test')\n-        out, err = self.run_django_admin(args,'settings')\n+        out, err = self.run_django_admin(args,'regressiontests.settings')\n         self.addCleanup(shutil.rmtree, app_path)\n         self.assertNoOutput(err)\n         self.assertTrue(os.path.exists(app_path))\n@@ -591,15 +600,15 @@ def test_custom_command(self):\n \n     def test_builtin_with_settings(self):\n         \"directory: django-admin builtin commands succeed if settings are provided as argument\"\n-        args = ['sqlall','--settings=settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.settings', 'admin_scripts']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n     def test_builtin_with_environment(self):\n         \"directory: django-admin builtin commands succeed if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_django_admin(args,'settings')\n+        out, err = self.run_django_admin(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n@@ -618,21 +627,21 @@ def test_builtin_command(self):\n         args = ['sqlall','admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(err, \"Could not import settings 'regressiontests.settings'\")\n \n     def test_builtin_with_bad_settings(self):\n         \"no settings: manage.py builtin commands fail if settings file (from argument) doesn't exist\"\n         args = ['sqlall','--settings=bad_settings', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(err, \"Could not import settings 'bad_settings'\")\n \n     def test_builtin_with_bad_environment(self):\n         \"no settings: manage.py builtin commands fail if settings file (from environment) doesn't exist\"\n         args = ['sqlall','admin_scripts']\n         out, err = self.run_manage(args,'bad_settings')\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(err, \"Could not import settings 'bad_settings'\")\n \n \n class ManageDefaultSettings(AdminScriptTestCase):\n@@ -654,15 +663,15 @@ def test_builtin_command(self):\n \n     def test_builtin_with_settings(self):\n         \"default: manage.py builtin commands succeed if settings are provided as argument\"\n-        args = ['sqlall','--settings=settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.settings', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n     def test_builtin_with_environment(self):\n         \"default: manage.py builtin commands succeed if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_manage(args,'settings')\n+        out, err = self.run_manage(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n@@ -689,15 +698,15 @@ def test_custom_command(self):\n \n     def test_custom_command_with_settings(self):\n         \"default: manage.py can execute user commands when settings are provided as argument\"\n-        args = ['noargs_command', '--settings=settings']\n+        args = ['noargs_command', '--settings=regressiontests.settings']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n     def test_custom_command_with_environment(self):\n         \"default: manage.py can execute user commands when settings are provided in environment\"\n         args = ['noargs_command']\n-        out, err = self.run_manage(args,'settings')\n+        out, err = self.run_manage(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n@@ -721,15 +730,15 @@ def test_builtin_command(self):\n \n     def test_builtin_with_settings(self):\n         \"fulldefault: manage.py builtin commands succeed if settings are provided as argument\"\n-        args = ['sqlall','--settings=settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.settings', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n     def test_builtin_with_environment(self):\n         \"fulldefault: manage.py builtin commands succeed if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_manage(args,'settings')\n+        out, err = self.run_manage(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'CREATE TABLE')\n \n@@ -756,15 +765,15 @@ def test_custom_command(self):\n \n     def test_custom_command_with_settings(self):\n         \"fulldefault: manage.py can execute user commands when settings are provided as argument\"\n-        args = ['noargs_command', '--settings=settings']\n+        args = ['noargs_command', '--settings=regressiontests.settings']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n     def test_custom_command_with_environment(self):\n         \"fulldefault: manage.py can execute user commands when settings are provided in environment\"\n         args = ['noargs_command']\n-        out, err = self.run_manage(args,'settings')\n+        out, err = self.run_manage(args,'regressiontests.settings')\n         self.assertNoOutput(err)\n         self.assertOutput(out, \"EXECUTE:NoArgsCommand\")\n \n@@ -787,15 +796,15 @@ def test_builtin_command(self):\n \n     def test_builtin_with_settings(self):\n         \"minimal: manage.py builtin commands fail if settings are provided as argument\"\n-        args = ['sqlall','--settings=settings', 'admin_scripts']\n+        args = ['sqlall','--settings=regressiontests.settings', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n         self.assertOutput(err, 'App with label admin_scripts could not be found')\n \n     def test_builtin_with_environment(self):\n         \"minimal: manage.py builtin commands fail if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n-        out, err = self.run_manage(args,'settings')\n+        out, err = self.run_manage(args,'regressiontests.settings')\n         self.assertNoOutput(out)\n         self.assertOutput(err, 'App with label admin_scripts could not be found')\n \n@@ -822,15 +831,15 @@ def test_custom_command(self):\n \n     def test_custom_command_with_settings(self):\n         \"minimal: manage.py can't execute user commands, even if settings are provided as argument\"\n-        args = ['noargs_command', '--settings=settings']\n+        args = ['noargs_command', '--settings=regressiontests.settings']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n         self.assertOutput(err, \"Unknown command: 'noargs_command'\")\n \n     def test_custom_command_with_environment(self):\n         \"minimal: manage.py can't execute user commands, even if settings are provided in environment\"\n         args = ['noargs_command']\n-        out, err = self.run_manage(args,'settings')\n+        out, err = self.run_manage(args,'regressiontests.settings')\n         self.assertNoOutput(out)\n         self.assertOutput(err, \"Unknown command: 'noargs_command'\")\n \n@@ -849,56 +858,56 @@ def test_builtin_command(self):\n         args = ['sqlall','admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(err, \"Could not import settings 'regressiontests.settings'\")\n \n     def test_builtin_with_settings(self):\n-        \"alternate: manage.py builtin commands fail if settings are provided as argument but no defaults\"\n+        \"alternate: manage.py builtin commands work with settings provided as argument\"\n         args = ['sqlall','--settings=alternate_settings', 'admin_scripts']\n         out, err = self.run_manage(args)\n-        self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(out, 'CREATE TABLE \"admin_scripts_article\"')\n+        self.assertNoOutput(err)\n \n     def test_builtin_with_environment(self):\n-        \"alternate: manage.py builtin commands fail if settings are provided in the environment but no defaults\"\n+        \"alternate: manage.py builtin commands work if settings are provided in the environment\"\n         args = ['sqlall','admin_scripts']\n         out, err = self.run_manage(args,'alternate_settings')\n-        self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(out, 'CREATE TABLE \"admin_scripts_article\"')\n+        self.assertNoOutput(err)\n \n     def test_builtin_with_bad_settings(self):\n         \"alternate: manage.py builtin commands fail if settings file (from argument) doesn't exist\"\n         args = ['sqlall','--settings=bad_settings', 'admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(err, \"Could not import settings 'bad_settings'\")\n \n     def test_builtin_with_bad_environment(self):\n         \"alternate: manage.py builtin commands fail if settings file (from environment) doesn't exist\"\n         args = ['sqlall','admin_scripts']\n         out, err = self.run_manage(args,'bad_settings')\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(err, \"Could not import settings 'bad_settings'\")\n \n     def test_custom_command(self):\n-        \"alternate: manage.py can't execute user commands\"\n+        \"alternate: manage.py can't execute user commands without settings\"\n         args = ['noargs_command']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(err, \"Unknown command: 'noargs_command'\")\n \n     def test_custom_command_with_settings(self):\n-        \"alternate: manage.py can't execute user commands, even if settings are provided as argument\"\n+        \"alternate: manage.py can execute user commands if settings are provided as argument\"\n         args = ['noargs_command', '--settings=alternate_settings']\n         out, err = self.run_manage(args)\n-        self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(out, \"EXECUTE:NoArgsCommand options=[('pythonpath', None), ('settings', 'alternate_settings'), ('traceback', None), ('verbosity', '1')]\")\n+        self.assertNoOutput(err)\n \n     def test_custom_command_with_environment(self):\n-        \"alternate: manage.py can't execute user commands, even if settings are provided in environment\"\n+        \"alternate: manage.py can execute user commands if settings are provided in environment\"\n         args = ['noargs_command']\n         out, err = self.run_manage(args,'alternate_settings')\n-        self.assertNoOutput(out)\n-        self.assertOutput(err, \"Can't find the file 'settings.py' in the directory containing './manage.py'\")\n+        self.assertOutput(out, \"EXECUTE:NoArgsCommand options=[('pythonpath', None), ('settings', None), ('traceback', None), ('verbosity', '1')]\")\n+        self.assertNoOutput(err)\n \n \n class ManageMultipleSettings(AdminScriptTestCase):\n@@ -999,7 +1008,7 @@ def test_builtin_command(self):\n         args = ['sqlall','admin_scripts']\n         out, err = self.run_manage(args)\n         self.assertNoOutput(out)\n-        self.assertOutput(err, \"ImportError: No module named foo42bar\")\n+        self.assertOutput(err, \"No module named foo42bar\")\n \n class ManageValidate(AdminScriptTestCase):\n     def tearDown(self):"
        },
        {
            "sha": "d2f064e7a0c9cd21a25a0026192877eeed4e48be",
            "filename": "tests/regressiontests/test_runner/tests.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/django/django/blob/38f1fe3b35c212136d959538a309c33bf2d340a9/tests%2Fregressiontests%2Ftest_runner%2Ftests.py",
            "raw_url": "https://github.com/django/django/raw/38f1fe3b35c212136d959538a309c33bf2d340a9/tests%2Fregressiontests%2Ftest_runner%2Ftests.py",
            "contents_url": "https://api.github.com/repos/django/django/contents/tests%2Fregressiontests%2Ftest_runner%2Ftests.py?ref=38f1fe3b35c212136d959538a309c33bf2d340a9",
            "patch": "@@ -188,25 +188,25 @@ def tearDown(self):\n         self.remove_settings('settings.py')\n \n     def test_default_options(self):\n-        args = ['test', '--settings=settings']\n+        args = ['test', '--settings=regressiontests.settings']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, '1:2:3')\n \n     def test_default_and_given_options(self):\n-        args = ['test', '--settings=settings', '--option_b=foo']\n+        args = ['test', '--settings=regressiontests.settings', '--option_b=foo']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, '1:foo:3')\n \n     def test_option_name_and_value_separated(self):\n-        args = ['test', '--settings=settings', '--option_b', 'foo']\n+        args = ['test', '--settings=regressiontests.settings', '--option_b', 'foo']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, '1:foo:3')\n \n     def test_all_options_given(self):\n-        args = ['test', '--settings=settings', '--option_a=bar', '--option_b=foo', '--option_c=31337']\n+        args = ['test', '--settings=regressiontests.settings', '--option_a=bar', '--option_b=foo', '--option_c=31337']\n         out, err = self.run_django_admin(args)\n         self.assertNoOutput(err)\n         self.assertOutput(out, 'bar:foo:31337')"
        }
    ],
    "stats": {
        "total": 380,
        "additions": 237,
        "deletions": 143
    }
}