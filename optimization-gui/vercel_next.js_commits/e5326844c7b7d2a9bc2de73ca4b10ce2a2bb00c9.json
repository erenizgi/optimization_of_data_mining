{
    "author": "mischnic",
    "message": "Turbopack: remove a few clones (#82435)\n\nShowed up in an ast-grep search for `&$$$.clone()`",
    "sha": "e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9",
    "files": [
        {
            "sha": "febde475e26bfb86f5aa116a9284d3a91f4da22e",
            "filename": "crates/napi/src/react_compiler.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/crates%2Fnapi%2Fsrc%2Freact_compiler.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/crates%2Fnapi%2Fsrc%2Freact_compiler.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Freact_compiler.rs?ref=e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9",
            "patch": "@@ -23,7 +23,7 @@ impl Task for CheckTask {\n         GLOBALS.set(&Default::default(), || {\n             //\n             let cm = Arc::new(SourceMap::default());\n-            let Ok(fm) = cm.load_file(&self.filename.clone()) else {\n+            let Ok(fm) = cm.load_file(&self.filename) else {\n                 return Ok(false);\n             };\n             let mut errors = vec![];"
        },
        {
            "sha": "4d2b36f4945334d695933fb9a8b6e3116417bb39",
            "filename": "turbopack/crates/turbopack-core/src/resolve/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs?ref=e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9",
            "patch": "@@ -1392,7 +1392,7 @@ async fn find_package(\n                     for name in names.iter() {\n                         let fs_path = lookup_path.join(name)?;\n                         if let Some(fs_path) = dir_exists(fs_path, &mut affecting_sources).await? {\n-                            let fs_path = fs_path.join(&package_name.clone())?;\n+                            let fs_path = fs_path.join(&package_name)?;\n                             if let Some(fs_path) =\n                                 dir_exists(fs_path.clone(), &mut affecting_sources).await?\n                             {\n@@ -1431,7 +1431,7 @@ async fn find_package(\n                     if excluded_extensions.contains(extension) {\n                         continue;\n                     }\n-                    let package_file = package_dir.append(&extension.clone())?;\n+                    let package_file = package_dir.append(extension)?;\n                     if let Some(package_file) = exists(package_file, &mut affecting_sources).await?\n                     {\n                         packages.push(FindPackageItem::PackageFile(package_file));"
        },
        {
            "sha": "b8a0557778b36240696afa4b2816db0cccd86fd3",
            "filename": "turbopack/crates/turbopack-core/src/resolve/pattern.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fpattern.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fpattern.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fpattern.rs?ref=e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9",
            "patch": "@@ -1631,7 +1631,7 @@ pub async fn read_matches(\n                                     prefix.pop();\n                                 }\n                                 if let Some(pos) = pat.match_position(&prefix) {\n-                                    let fs_path = lookup_dir.join(&key.clone())?;\n+                                    let fs_path = lookup_dir.join(key)?;\n                                     if let LinkContent::Link { link_type, .. } =\n                                         &*fs_path.read_link().await?\n                                     {\n@@ -1653,7 +1653,7 @@ pub async fn read_matches(\n                                 }\n                                 prefix.push('/');\n                                 if let Some(pos) = pat.match_position(&prefix) {\n-                                    let fs_path = lookup_dir.join(&key.clone())?;\n+                                    let fs_path = lookup_dir.join(key)?;\n                                     if let LinkContent::Link { link_type, .. } =\n                                         &*fs_path.read_link().await?\n                                         && link_type.contains(LinkType::DIRECTORY)\n@@ -1665,7 +1665,7 @@ pub async fn read_matches(\n                                     }\n                                 }\n                                 if let Some(pos) = pat.could_match_position(&prefix) {\n-                                    let fs_path = lookup_dir.join(&key.clone())?;\n+                                    let fs_path = lookup_dir.join(key)?;\n                                     if let LinkContent::Link { link_type, .. } =\n                                         &*fs_path.read_link().await?\n                                         && link_type.contains(LinkType::DIRECTORY)"
        },
        {
            "sha": "cdaf75f2936a019416a4b1da6e781ee6b25def41",
            "filename": "turbopack/crates/turbopack-node/src/render/node_api_source.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fnode_api_source.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fnode_api_source.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fnode_api_source.rs?ref=e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9",
            "patch": "@@ -127,7 +127,7 @@ impl GetContentSourceContent for NodeApiContentSource {\n         Ok(ContentSourceContent::HttpProxy(render_proxy_operation(\n             self.cwd.clone(),\n             self.env,\n-            self.server_root.join(&path.clone())?,\n+            self.server_root.join(&path)?,\n             ResolvedVc::upcast(entry.module),\n             entry.runtime_entries,\n             entry.chunking_context,"
        },
        {
            "sha": "426ba0d9bccf4e304af9958cf8932b38f6062671",
            "filename": "turbopack/crates/turbopack-tests/tests/execution.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs?ref=e5326844c7b7d2a9bc2de73ca4b10ce2a2bb00c9",
            "patch": "@@ -291,8 +291,8 @@ async fn prepare_test(resource: RcStr) -> Result<Vc<PreparedTest>> {\n         resource_path.display()\n     ))?;\n     let relative_path: RcStr = sys_to_unix(relative_path.to_str().unwrap()).into();\n-    let path = root_fs.root().await?.join(&relative_path.clone())?;\n-    let project_path = project_root.join(&relative_path.clone())?;\n+    let path = root_fs.root().await?.join(&relative_path)?;\n+    let project_path = project_root.join(&relative_path)?;\n     let tests_path = project_fs\n         .root()\n         .await?"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 9,
        "deletions": 9
    }
}