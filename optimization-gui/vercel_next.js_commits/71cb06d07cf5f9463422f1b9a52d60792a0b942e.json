{
    "author": "eps1lon",
    "message": "[dev-overlay] Discriminate stack frame settled typed (#76517)",
    "sha": "71cb06d07cf5f9463422f1b9a52d60792a0b942e",
    "files": [
        {
            "sha": "008dc893ea91531b64d1826e3748a8f47facf8db",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/call-stack-frame/call-stack-frame.stories.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/71cb06d07cf5f9463422f1b9a52d60792a0b942e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fcall-stack-frame%2Fcall-stack-frame.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/71cb06d07cf5f9463422f1b9a52d60792a0b942e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fcall-stack-frame%2Fcall-stack-frame.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fcall-stack-frame%2Fcall-stack-frame.stories.tsx?ref=71cb06d07cf5f9463422f1b9a52d60792a0b942e",
            "patch": "@@ -32,7 +32,7 @@ const frame = {\n     lineNumber: 10,\n     column: 5,\n   },\n-  error: false,\n+  error: false as const,\n   reason: null,\n   external: false,\n   ignored: false,"
        },
        {
            "sha": "1c18530ed4dcc9d40fe9358c9ff452b8777d3b10",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/call-stack/call-stack.stories.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/71cb06d07cf5f9463422f1b9a52d60792a0b942e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/71cb06d07cf5f9463422f1b9a52d60792a0b942e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.stories.tsx?ref=71cb06d07cf5f9463422f1b9a52d60792a0b942e",
            "patch": "@@ -33,7 +33,7 @@ const frame = {\n     column: 5,\n   },\n   originalCodeFrame: 'export default function MyComponent() {',\n-  error: false,\n+  error: false as const,\n   reason: null,\n   external: false,\n   ignored: false,"
        },
        {
            "sha": "35f03d320a649ee381ea71440b4e0834f52d9945",
            "filename": "packages/next/src/client/components/react-dev-overlay/utils/stack-frame.ts",
            "status": "modified",
            "additions": 30,
            "deletions": 15,
            "changes": 45,
            "blob_url": "https://github.com/vercel/next.js/blob/71cb06d07cf5f9463422f1b9a52d60792a0b942e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Futils%2Fstack-frame.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/71cb06d07cf5f9463422f1b9a52d60792a0b942e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Futils%2Fstack-frame.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Futils%2Fstack-frame.ts?ref=71cb06d07cf5f9463422f1b9a52d60792a0b942e",
            "patch": "@@ -8,21 +8,34 @@ import {\n   isWebpackInternalResource,\n   formatFrameSourceFile,\n } from './webpack-module-path'\n-export interface OriginalStackFrame extends OriginalStackFrameResponse {\n-  error: boolean\n-  reason: string | null\n+\n+export interface ResolvedOriginalStackFrame extends OriginalStackFrameResponse {\n+  error: false\n+  reason: null\n   external: boolean\n   ignored: boolean\n   sourceStackFrame: StackFrame\n }\n \n+export interface RejectedOriginalStackFrame extends OriginalStackFrameResponse {\n+  error: true\n+  reason: string\n+  external: boolean\n+  ignored: boolean\n+  sourceStackFrame: StackFrame\n+}\n+\n+export type OriginalStackFrame =\n+  | ResolvedOriginalStackFrame\n+  | RejectedOriginalStackFrame\n+\n function getOriginalStackFrame(\n   source: StackFrame,\n   response: OriginalStackFrameResponseResult\n ): Promise<OriginalStackFrame> {\n-  async function _getOriginalStackFrame(): Promise<OriginalStackFrame> {\n+  async function _getOriginalStackFrame(): Promise<ResolvedOriginalStackFrame> {\n     if (response.status === 'rejected') {\n-      return Promise.reject(new Error(response.reason))\n+      throw new Error(response.reason)\n     }\n \n     const body: OriginalStackFrameResponse = response.value\n@@ -53,16 +66,18 @@ function getOriginalStackFrame(\n     })\n   }\n \n-  return _getOriginalStackFrame().catch((err: Error) => ({\n-    error: true,\n-    reason: err?.message ?? err?.toString() ?? 'Unknown Error',\n-    external: false,\n-    sourceStackFrame: source,\n-    originalStackFrame: null,\n-    originalCodeFrame: null,\n-    sourcePackage: null,\n-    ignored: false,\n-  }))\n+  return _getOriginalStackFrame().catch(\n+    (err: Error): RejectedOriginalStackFrame => ({\n+      error: true,\n+      reason: err?.message ?? err?.toString() ?? 'Unknown Error',\n+      external: false,\n+      sourceStackFrame: source,\n+      originalStackFrame: null,\n+      originalCodeFrame: null,\n+      sourcePackage: null,\n+      ignored: false,\n+    })\n+  )\n }\n \n export async function getOriginalStackFrames("
        }
    ],
    "stats": {
        "total": 49,
        "additions": 32,
        "deletions": 17
    }
}