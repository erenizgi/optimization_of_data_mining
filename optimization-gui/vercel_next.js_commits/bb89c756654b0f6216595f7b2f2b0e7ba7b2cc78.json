{
    "author": "timneutkens",
    "message": "Remove experimental appDocumentPreloading (#82895)\n\n## What?\n\nThis functionality has been succeeded by\nexperimental.preloadEntriesOnStart which is enabled by default.\n`preloadEntriesOnStart` can likely also be removed as an option given\nthat it's `true` since 16 months ago. But that's for another PR.",
    "sha": "bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78",
    "files": [
        {
            "sha": "2022163ca7710375e0d109775b6dcd752ddebc9e",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78",
            "patch": "@@ -333,7 +333,6 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n         adapterPath: z.string().optional(),\n         useSkewCookie: z.boolean().optional(),\n         after: z.boolean().optional(),\n-        appDocumentPreloading: z.boolean().optional(),\n         appNavFailHandling: z.boolean().optional(),\n         preloadEntriesOnStart: z.boolean().optional(),\n         allowedRevalidateHeaderKeys: z.array(z.string()).optional(),"
        },
        {
            "sha": "5b9b36b7daca89ff2a0c56363ca3493082666062",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78",
            "patch": "@@ -455,7 +455,6 @@ export interface ExperimentalConfig {\n   clientSegmentCache?: boolean | 'client-only'\n   clientParamParsing?: boolean\n   dynamicOnHover?: boolean\n-  appDocumentPreloading?: boolean\n   preloadEntriesOnStart?: boolean\n   clientRouterFilter?: boolean\n   clientRouterFilterRedirects?: boolean\n@@ -1541,7 +1540,6 @@ export const defaultConfig = Object.freeze({\n     clientSegmentCache: false,\n     clientParamParsing: false,\n     dynamicOnHover: false,\n-    appDocumentPreloading: undefined,\n     preloadEntriesOnStart: true,\n     clientRouterFilter: true,\n     clientRouterFilterRedirects: false,"
        },
        {
            "sha": "ec01518e09f59c763bbb2f010610ad60cf7391d4",
            "filename": "packages/next/src/server/next-server.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 26,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts?ref=bb89c756654b0f6216595f7b2f2b0e7ba7b2cc78",
            "patch": "@@ -292,32 +292,6 @@ export default class NextNodeServer extends BaseServer<\n       this.imageResponseCache = new ResponseCache(this.minimalMode)\n     }\n \n-    const { appDocumentPreloading } = this.nextConfig.experimental\n-    const isDefaultEnabled = typeof appDocumentPreloading === 'undefined'\n-\n-    if (\n-      !options.dev &&\n-      (appDocumentPreloading === true ||\n-        !(this.minimalMode && isDefaultEnabled))\n-    ) {\n-      // pre-warm _document and _app as these will be\n-      // needed for most requests\n-      loadComponents({\n-        distDir: this.distDir,\n-        page: '/_document',\n-        isAppPath: false,\n-        isDev: this.isDev,\n-        sriEnabled: this.sriEnabled,\n-      }).catch(() => {})\n-      loadComponents({\n-        distDir: this.distDir,\n-        page: '/_app',\n-        isAppPath: false,\n-        isDev: this.isDev,\n-        sriEnabled: this.sriEnabled,\n-      }).catch(() => {})\n-    }\n-\n     if (\n       !options.dev &&\n       !this.minimalMode &&"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 0,
        "deletions": 29
    }
}