{
    "author": "icyJoseph",
    "message": "chore: Use same function references in useReportWebVitals examples (#79963)\n\nCloses: https://linear.app/vercel/issue/DOC-4726/docs-usereportwebvitals\nFIxes: #79940\n\n---------\n\nCo-authored-by: Lee Robinson <lee@leerob.com>",
    "sha": "7a57ca7b617eb316082fac20f893c96688cb985a",
    "files": [
        {
            "sha": "e7dc02ceb6e34a8ce79cf03a92271b6aa4812841",
            "filename": "docs/01-app/05-api-reference/04-functions/use-report-web-vitals.mdx",
            "status": "modified",
            "additions": 74,
            "deletions": 56,
            "changes": 130,
            "blob_url": "https://github.com/vercel/next.js/blob/7a57ca7b617eb316082fac20f893c96688cb985a/docs%2F01-app%2F05-api-reference%2F04-functions%2Fuse-report-web-vitals.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/7a57ca7b617eb316082fac20f893c96688cb985a/docs%2F01-app%2F05-api-reference%2F04-functions%2Fuse-report-web-vitals.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Fuse-report-web-vitals.mdx?ref=7a57ca7b617eb316082fac20f893c96688cb985a",
            "patch": "@@ -7,15 +7,19 @@ description: API Reference for the useReportWebVitals function.\n \n The `useReportWebVitals` hook allows you to report [Core Web Vitals](https://web.dev/vitals/), and can be used in combination with your analytics service.\n \n+New functions passed to `useReportWebVitals` are called with the available metrics up to that point. To prevent reporting duplicated data, ensure that the callback function reference does not change (as shown in the code examples below).\n+\n <PagesOnly>\n \n ```jsx filename=\"pages/_app.js\"\n import { useReportWebVitals } from 'next/web-vitals'\n \n+const logWebVitals = (metric) => {\n+  console.log(metric)\n+}\n+\n function MyApp({ Component, pageProps }) {\n-  useReportWebVitals((metric) => {\n-    console.log(metric)\n-  })\n+  useReportWebVitals(logWebVitals)\n \n   return <Component {...pageProps} />\n }\n@@ -30,10 +34,12 @@ function MyApp({ Component, pageProps }) {\n \n import { useReportWebVitals } from 'next/web-vitals'\n \n+const logWebVitals = (metric) => {\n+  console.log(metric)\n+}\n+\n export function WebVitals() {\n-  useReportWebVitals((metric) => {\n-    console.log(metric)\n-  })\n+  useReportWebVitals(logWebVitals)\n \n   return null\n }\n@@ -89,18 +95,20 @@ You can handle all the results of these metrics using the `name` property.\n ```jsx filename=\"pages/_app.js\"\n import { useReportWebVitals } from 'next/web-vitals'\n \n-function MyApp({ Component, pageProps }) {\n-  useReportWebVitals((metric) => {\n-    switch (metric.name) {\n-      case 'FCP': {\n-        // handle FCP results\n-      }\n-      case 'LCP': {\n-        // handle LCP results\n-      }\n-      // ...\n+const handleWebVitals = (metric) => {\n+  switch (metric.name) {\n+    case 'FCP': {\n+      // handle FCP results\n     }\n-  })\n+    case 'LCP': {\n+      // handle LCP results\n+    }\n+    // ...\n+  }\n+}\n+\n+function MyApp({ Component, pageProps }) {\n+  useReportWebVitals(handleWebVitals)\n \n   return <Component {...pageProps} />\n }\n@@ -115,18 +123,22 @@ function MyApp({ Component, pageProps }) {\n \n import { useReportWebVitals } from 'next/web-vitals'\n \n-export function WebVitals() {\n-  useReportWebVitals((metric) => {\n-    switch (metric.name) {\n-      case 'FCP': {\n-        // handle FCP results\n-      }\n-      case 'LCP': {\n-        // handle LCP results\n-      }\n-      // ...\n+type ReportWebVitalsCallback = Parameters<typeof useReportWebVitals>[0]\n+\n+const handleWebVitals: ReportWebVitalsCallback = (metric) => {\n+  switch (metric.name) {\n+    case 'FCP': {\n+      // handle FCP results\n+    }\n+    case 'LCP': {\n+      // handle LCP results\n     }\n-  })\n+    // ...\n+  }\n+}\n+\n+export function WebVitals() {\n+  useReportWebVitals(handleWebVitals)\n }\n ```\n \n@@ -135,18 +147,20 @@ export function WebVitals() {\n \n import { useReportWebVitals } from 'next/web-vitals'\n \n-export function WebVitals() {\n-  useReportWebVitals((metric) => {\n-    switch (metric.name) {\n-      case 'FCP': {\n-        // handle FCP results\n-      }\n-      case 'LCP': {\n-        // handle LCP results\n-      }\n-      // ...\n+const handleWebVitals = (metric) => {\n+  switch (metric.name) {\n+    case 'FCP': {\n+      // handle FCP results\n     }\n-  })\n+    case 'LCP': {\n+      // handle LCP results\n+    }\n+    // ...\n+  }\n+}\n+\n+export function WebVitals() {\n+  useReportWebVitals(handleWebVitals)\n }\n ```\n \n@@ -169,22 +183,24 @@ You can handle all the results of these metrics separately:\n ```jsx filename=\"pages/_app.js\"\n import { useReportWebVitals } from 'next/web-vitals'\n \n+function handleCustomMetrics(metrics) {\n+  switch (metric.name) {\n+    case 'Next.js-hydration':\n+      // handle hydration results\n+      break\n+    case 'Next.js-route-change-to-render':\n+      // handle route-change to render results\n+      break\n+    case 'Next.js-render':\n+      // handle render results\n+      break\n+    default:\n+      break\n+  }\n+}\n+\n function MyApp({ Component, pageProps }) {\n-  useReportWebVitals((metric) => {\n-    switch (metric.name) {\n-      case 'Next.js-hydration':\n-        // handle hydration results\n-        break\n-      case 'Next.js-route-change-to-render':\n-        // handle route-change to render results\n-        break\n-      case 'Next.js-render':\n-        // handle render results\n-        break\n-      default:\n-        break\n-    }\n-  })\n+  useReportWebVitals(handleCustomMetrics)\n \n   return <Component {...pageProps} />\n }\n@@ -200,7 +216,7 @@ You can send results to any endpoint to measure and track\n real user performance on your site. For example:\n \n ```js\n-useReportWebVitals((metric) => {\n+function postWebVitals(metrics) {\n   const body = JSON.stringify(metric)\n   const url = 'https://example.com/analytics'\n \n@@ -210,7 +226,9 @@ useReportWebVitals((metric) => {\n   } else {\n     fetch(url, { body, method: 'POST', keepalive: true })\n   }\n-})\n+}\n+\n+useReportWebVitals(postWebVitals)\n ```\n \n > **Good to know**: If you use [Google Analytics](https://analytics.google.com/analytics/web/), using the"
        }
    ],
    "stats": {
        "total": 130,
        "additions": 74,
        "deletions": 56
    }
}