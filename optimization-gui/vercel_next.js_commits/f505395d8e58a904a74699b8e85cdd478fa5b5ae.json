{
    "author": "ztanner",
    "message": "[app i18n]: warn about i18n configuration deprecation in app router (#76346)\n\nThe `i18n` configuration was supported in app router to assist with\nincremental migration, but it's only meant to be used for pages router.\nThere are some bugs that can pop up when attempting to use it with app\nrouter.\n\nDisabling `i18n` configuration entirely for any app router paths will be\nhandled in a separate PR: the goal for this PR is to signal that it's\nunsupported in app router.",
    "sha": "f505395d8e58a904a74699b8e85cdd478fa5b5ae",
    "files": [
        {
            "sha": "3671f4dbf3d72699be3d279ef890d6e485338525",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/f505395d8e58a904a74699b8e85cdd478fa5b5ae/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f505395d8e58a904a74699b8e85cdd478fa5b5ae/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=f505395d8e58a904a74699b8e85cdd478fa5b5ae",
            "patch": "@@ -28,6 +28,7 @@ import { transpileConfig } from '../build/next-config-ts/transpile-config'\n import { dset } from '../shared/lib/dset'\n import { normalizeZodErrors } from '../shared/lib/zod'\n import { HTML_LIMITED_BOT_UA_RE_STRING } from '../shared/lib/router/utils/is-bot'\n+import { findDir } from '../lib/find-pages-dir'\n \n export { normalizeConfig } from './config-shared'\n export type { DomainLocale, NextConfig } from './config-shared'\n@@ -679,6 +680,17 @@ function assignDefaults(\n   setHttpClientAndAgentOptions(result || defaultConfig)\n \n   if (result.i18n) {\n+    const hasAppDir = Boolean(findDir(dir, 'app'))\n+\n+    if (hasAppDir) {\n+      warnOptionHasBeenDeprecated(\n+        result,\n+        'i18n',\n+        `i18n configuration in ${configFileName} is unsupported in App Router.\\nLearn more about internationalization in App Router: https://nextjs.org/docs/app/building-your-application/routing/internationalization`,\n+        silent\n+      )\n+    }\n+\n     const { i18n } = result\n     const i18nType = typeof i18n\n "
        },
        {
            "sha": "ca281e3f294611430ddd1efca382a794c4567ae0",
            "filename": "test/e2e/app-dir/i18n-hybrid/i18n-hybrid.test.js",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/f505395d8e58a904a74699b8e85cdd478fa5b5ae/test%2Fe2e%2Fapp-dir%2Fi18n-hybrid%2Fi18n-hybrid.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/f505395d8e58a904a74699b8e85cdd478fa5b5ae/test%2Fe2e%2Fapp-dir%2Fi18n-hybrid%2Fi18n-hybrid.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fi18n-hybrid%2Fi18n-hybrid.test.js?ref=f505395d8e58a904a74699b8e85cdd478fa5b5ae",
            "patch": "@@ -52,6 +52,12 @@ describe('i18n-hybrid', () => {\n     files: __dirname,\n   })\n \n+  it('should warn about i18n in app dir', async () => {\n+    expect(next.cliOutput).toContain(\n+      'i18n configuration in next.config.js is unsupported in App Router.'\n+    )\n+  })\n+\n   it.each(urls.filter((url) => !url.expected))(\n     'does not resolve $pathname',\n     async (url) => {"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 18,
        "deletions": 0
    }
}