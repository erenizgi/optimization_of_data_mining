{
    "author": "mischnic",
    "message": "Turbopack: don't ignore TS parse errors (#84597)\n\n`no_early_errors: true` was causing parse errors to be discarded.\r\nFor example with https://github.com/swc-project/swc/issues/11142 where there was a parse error (though it was a bug in this case), that left a `Invalid` AST node in the output, which only broke minification/SSG later on in the build (and potentially would have resulted in some error at runtime, if that specific chunk was never executed during SSG).",
    "sha": "b0780f2ae236901bb57cae0b4cf4b48c01792845",
    "files": [
        {
            "sha": "63f84923e6dd2ea12c5b18a761f0446f4284c374",
            "filename": ".prettierignore",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/.prettierignore",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/.prettierignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.prettierignore?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -65,6 +65,7 @@ test/development/mcp-server/fixtures/default-template/app/build-error/page.tsx\n /turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/error/input/broken.js\n /turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/invalid-export-parse-error/input/invalid-export/broken.js\n /turbopack/crates/turbopack-tests/tests/execution/turbopack/**/not-compiled.js\n+/turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts\n /turbopack/crates/turbopack-tests/tests/snapshot/import-meta/cjs/input/mod.cjs\n /turbopack/crates/turbopack-tests/tests/snapshot/source_maps/*\n /turbopack/crates/turbopack-tests/tests/**/output*"
        },
        {
            "sha": "f8f41f8213ef51b7669b2347f50bd408a70c96ae",
            "filename": "turbopack/crates/turbopack-ecmascript/src/parse.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -348,18 +348,16 @@ async fn parse_file_content(\n                             Syntax::Typescript(TsSyntax {\n                                 decorators: true,\n                                 dts: false,\n-                                no_early_errors: true,\n                                 tsx,\n-                                disallow_ambiguous_jsx_like: false,\n+                                ..Default::default()\n                             })\n                         }\n                         EcmascriptModuleAssetType::TypescriptDeclaration => {\n                             Syntax::Typescript(TsSyntax {\n                                 decorators: true,\n                                 dts: true,\n-                                no_early_errors: true,\n                                 tsx: false,\n-                                disallow_ambiguous_jsx_like: false,\n+                                ..Default::default()\n                             })\n                         }\n                     },"
        },
        {
            "sha": "c831e88670f32e93192915c4d059301f7635c29f",
            "filename": "turbopack/crates/turbopack-swc-ast-explorer/src/main.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-swc-ast-explorer%2Fsrc%2Fmain.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-swc-ast-explorer%2Fsrc%2Fmain.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-swc-ast-explorer%2Fsrc%2Fmain.rs?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -35,10 +35,7 @@ fn main() -> Result<()> {\n     let target = EsVersion::latest();\n     let syntax = Syntax::Typescript(TsSyntax {\n         tsx: true,\n-        decorators: false,\n-        dts: false,\n-        no_early_errors: true,\n-        disallow_ambiguous_jsx_like: false,\n+        ..Default::default()\n     });\n \n     let compiler = Compiler::new(sm.clone());"
        },
        {
            "sha": "99df68b7c873f41a19079bcdaf7ab039dc871ee9",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/index.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Finput%2Findex.js?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -0,0 +1 @@\n+import './other.ts'"
        },
        {
            "sha": "0355db0dc9d9da8d6daf853f369db8ff6dcf2943",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Finput%2Fother.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Finput%2Fother.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Finput%2Fother.ts?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -0,0 +1,5 @@\n+function x() {\n+  ;[1, 2] = [1, 2]\n+}\n+\n+console.log(x());"
        },
        {
            "sha": "4a1eb2cb8fb770b6326e1a3d1da7e1e30f356db2",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/issues/Parsing ecmascript source code failed-ae2e69.txt",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Fissues%2FParsing%20ecmascript%20source%20code%20failed-ae2e69.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Fissues%2FParsing%20ecmascript%20source%20code%20failed-ae2e69.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Fissues%2FParsing%20ecmascript%20source%20code%20failed-ae2e69.txt?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -0,0 +1,16 @@\n+error - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts:2:7  Parsing ecmascript source code failed\n+       1 | function x() {\n+         +        v\n+       2 +   ;[1, 2] = [1, 2]\n+         +        ^\n+       3 | }\n+       4 | \n+       5 | console.log(x());\n+       6 | \n+  \n+  Cannot assign to this\n+  \n+  Import trace:\n+    test:\n+      ./turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts\n+      ./turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/index.js\n\\ No newline at end of file"
        },
        {
            "sha": "cde2732b6c0f455a8db9a2266b8af4e6733ff16f",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/issues/Parsing ecmascript source code failed-d7f72a.txt",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Fissues%2FParsing%20ecmascript%20source%20code%20failed-d7f72a.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Fissues%2FParsing%20ecmascript%20source%20code%20failed-d7f72a.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Fissues%2FParsing%20ecmascript%20source%20code%20failed-d7f72a.txt?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -0,0 +1,16 @@\n+error - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts:2:4  Parsing ecmascript source code failed\n+       1 | function x() {\n+         +     v\n+       2 +   ;[1, 2] = [1, 2]\n+         +     ^\n+       3 | }\n+       4 | \n+       5 | console.log(x());\n+       6 | \n+  \n+  Cannot assign to this\n+  \n+  Import trace:\n+    test:\n+      ./turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts\n+      ./turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/index.js\n\\ No newline at end of file"
        },
        {
            "sha": "90ecfc4be82fcaf137b0c4a3fc8202f2fb1e8c83",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/output/aaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -0,0 +1,17 @@\n+(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([\"output/aaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js\",\n+\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts [test] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n+\n+const e = new Error(\"Could not parse module '[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts'\\n\\nCannot assign to this\");\n+e.code = 'MODULE_UNPARSABLE';\n+throw e;\n+}),\n+\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/index.js [test] (ecmascript)\", ((__turbopack_context__) => {\n+\"use strict\";\n+\n+__turbopack_context__.s([]);\n+var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$basic$2f$ts$2d$parse$2d$error$2f$input$2f$other$2e$ts__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/other.ts [test] (ecmascript)\");\n+;\n+}),\n+]);\n+\n+//# sourceMappingURL=aaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js.map\n\\ No newline at end of file"
        },
        {
            "sha": "7989f488393e9e90df0d336573d76fcf3c6d839d",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/output/aaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js.map",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js.map?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -0,0 +1,6 @@\n+{\n+  \"version\": 3,\n+  \"sources\": [],\n+  \"sections\": [\n+    {\"offset\": {\"line\": 10, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/index.js\"],\"sourcesContent\":[\"import './other.ts'\\n\"],\"names\":[],\"mappings\":\";AAAA\"}}]\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "c15d7ec00382d3604310ddb8b53cbdb90d9e1942",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/output/aaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js.map",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js.map?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"version\": 3,\n+  \"sources\": [],\n+  \"sections\": []\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "f03816081c2bace706e18e426b7007d783ef97fc",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/output/ba425_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Fba425_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b0780f2ae236901bb57cae0b4cf4b48c01792845/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Fba425_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fts-parse-error%2Foutput%2Fba425_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js?ref=b0780f2ae236901bb57cae0b4cf4b48c01792845",
            "patch": "@@ -0,0 +1,5 @@\n+(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([\n+    \"output/ba425_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_index_15722878.js\",\n+    {\"otherChunks\":[\"output/aaf3a_crates_turbopack-tests_tests_snapshot_basic_ts-parse-error_input_0fc6be51._.js\"],\"runtimeModuleIds\":[\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/ts-parse-error/input/index.js [test] (ecmascript)\"]}\n+]);\n+// Dummy runtime\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 83,
        "additions": 75,
        "deletions": 8
    }
}