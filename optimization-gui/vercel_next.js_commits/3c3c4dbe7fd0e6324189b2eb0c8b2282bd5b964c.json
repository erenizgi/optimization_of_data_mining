{
    "author": "lukesandberg",
    "message": "[turbopack] Change execution and snapshot tests to check for the existence of files rather than directories (#83189)\n\nThis fixes an annoying devex issue when switching branches",
    "sha": "3c3c4dbe7fd0e6324189b2eb0c8b2282bd5b964c",
    "files": [
        {
            "sha": "76a41003b8a2d8181b4ae33a49ec7fef91d963f7",
            "filename": "turbopack/crates/turbopack-tests/tests/execution.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/3c3c4dbe7fd0e6324189b2eb0c8b2282bd5b964c/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3c3c4dbe7fd0e6324189b2eb0c8b2282bd5b964c/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs?ref=3c3c4dbe7fd0e6324189b2eb0c8b2282bd5b964c",
            "patch": "@@ -102,8 +102,12 @@ fn register() {\n //\n // \"Skip\" directories named `__skipped__`, which include test directories to\n // skip.\n-#[testing::fixture(\"tests/execution/*/*/*\", exclude(\"node_modules|__skipped__\"))]\n+#[testing::fixture(\n+    \"tests/execution/*/*/*/input/index.js\",\n+    exclude(\"node_modules|__skipped__\")\n+)]\n fn test(resource: PathBuf) {\n+    let resource = resource.parent().unwrap().parent().unwrap().to_path_buf();\n     let messages = get_messages(run(resource, IssueSnapshotMode::Snapshots).unwrap());\n     if !messages.is_empty() {\n         panic!(\n@@ -113,10 +117,10 @@ fn test(resource: PathBuf) {\n     }\n }\n \n-#[testing::fixture(\"tests/execution/*/*/__skipped__/*/input\")]\n+#[testing::fixture(\"tests/execution/*/*/__skipped__/*/input/index.js\")]\n #[should_panic]\n fn test_skipped_fails(resource: PathBuf) {\n-    let resource = resource.parent().unwrap().to_path_buf();\n+    let resource = resource.parent().unwrap().parent().unwrap().to_path_buf();\n \n     let JsResult {\n         // Ignore uncaught exceptions for skipped tests."
        },
        {
            "sha": "6834ec38cd6033c7d11a02eb06bde1050487d367",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3c3c4dbe7fd0e6324189b2eb0c8b2282bd5b964c/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3c3c4dbe7fd0e6324189b2eb0c8b2282bd5b964c/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs?ref=3c3c4dbe7fd0e6324189b2eb0c8b2282bd5b964c",
            "patch": "@@ -168,8 +168,9 @@ fn is_empty_dir_tree(dir_entries: impl IntoIterator<Item = io::Result<fs::DirEnt\n     true\n }\n \n-#[testing::fixture(\"tests/snapshot/*/*/\", exclude(\"node_modules\"))]\n+#[testing::fixture(\"tests/snapshot/*/*/input/index.js\", exclude(\"node_modules\"))]\n fn test(resource: PathBuf) {\n+    let resource = resource.parent().unwrap().parent().unwrap().to_path_buf();\n     let resource = canonicalize(resource).unwrap();\n \n     let mut has_output_dir = false;"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 9,
        "deletions": 4
    }
}