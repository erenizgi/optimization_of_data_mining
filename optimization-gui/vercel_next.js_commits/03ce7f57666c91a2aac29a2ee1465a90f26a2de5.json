{
    "author": "mischnic",
    "message": "Turbopack: `charset=utf-8` in data-url source maps (#77112)\n\nPreviously, inline `sourceMappingURL` comments with `data:application/json;charset=utf-8;base64,....` were just ignored, only `data:application/json;base64,....` worked\n\nIs there an easy way to test this?",
    "sha": "03ce7f57666c91a2aac29a2ee1465a90f26a2de5",
    "files": [
        {
            "sha": "92f2c605e53634849fde650a444c2b1fcba8ad14",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/03ce7f57666c91a2aac29a2ee1465a90f26a2de5/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/03ce7f57666c91a2aac29a2ee1465a90f26a2de5/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=03ce7f57666c91a2aac29a2ee1465a90f26a2de5",
            "patch": "@@ -693,6 +693,10 @@ pub(crate) async fn analyse_ecmascript_module_internal(\n \n             let mut source_map_from_comment = false;\n             if let Some((_, path)) = paths_by_pos.into_iter().max_by_key(|&(pos, _)| pos) {\n+                lazy_static! {\n+                    static ref JSON_DATA_URL_BASE64: Regex =\n+                        Regex::new(r\"^data:application\\/json;(?:charset=utf-8;)?base64\").unwrap();\n+                }\n                 let origin_path = origin.origin_path();\n                 if path.ends_with(\".map\") {\n                     let source_map_origin = origin_path.parent().join(path.into());\n@@ -703,7 +707,7 @@ pub(crate) async fn analyse_ecmascript_module_internal(\n                     let source_map = reference.generate_source_map();\n                     analysis.set_source_map(source_map.to_resolved().await?);\n                     source_map_from_comment = true;\n-                } else if path.starts_with(\"data:application/json;base64,\") {\n+                } else if JSON_DATA_URL_BASE64.is_match(path) {\n                     let source_map = maybe_decode_data_url(path.into());\n                     let source_map =\n                         resolve_source_map_sources(source_map.as_ref(), origin_path).await?;"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}