{
    "author": "bgw",
    "message": "Turbopack: Expose an environment variable for exposing the `detail` field of issues (#86518)\n\nWe have a `detail` field on Turbopack issues, but there was no way to actually read that value from Next.js.\n\nThis adds a hacky environment variable, which is better than nothing.\n\n![Screenshot 2025-11-25 at 3.32.04â€¯PM.png](https://app.graphite.com/user-attachments/assets/aef1b6c2-062f-47c1-98ee-91be68d6cfc7.png)",
    "sha": "46c63c010ef8510bf4784614cf6770c910b2a584",
    "files": [
        {
            "sha": "d8c299c0b824801883feadc2528498b32353b9a8",
            "filename": "packages/next/src/shared/lib/turbopack/utils.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/46c63c010ef8510bf4784614cf6770c910b2a584/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/46c63c010ef8510bf4784614cf6770c910b2a584/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Futils.ts?ref=46c63c010ef8510bf4784614cf6770c910b2a584",
            "patch": "@@ -17,6 +17,8 @@ export type IssuesMap = Map<IssueKey, Issue>\n export type EntryIssuesMap = Map<EntryKey, IssuesMap>\n export type TopLevelIssuesMap = IssuesMap\n \n+const VERBOSE_ISSUES = !!process.env.NEXT_TURBOPACK_VERBOSE_ISSUES\n+\n /**\n  * An error generated from emitted Turbopack issues. This can include build\n  * errors caused by issues with user code.\n@@ -91,7 +93,7 @@ export function processIssues(\n }\n \n export function formatIssue(issue: Issue) {\n-  const { filePath, title, description, source, importTraces } = issue\n+  const { filePath, title, description, detail, source, importTraces } = issue\n   let { documentationLink } = issue\n   const formattedTitle = renderStyledStringToErrorAnsi(title).replace(\n     /\\n/g,\n@@ -166,10 +168,10 @@ export function formatIssue(issue: Issue) {\n     }\n   }\n \n-  // TODO: make it possible to enable this for debugging, but not in tests.\n-  // if (detail) {\n-  //   message += renderStyledStringToErrorAnsi(detail) + '\\n\\n'\n-  // }\n+  // TODO: make it easier to enable this for debugging\n+  if (VERBOSE_ISSUES && detail) {\n+    message += renderStyledStringToErrorAnsi(detail) + '\\n\\n'\n+  }\n \n   if (importTraces?.length) {\n     // This is the same logic as in turbopack/crates/turbopack-cli-utils/src/issue.rs"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 7,
        "deletions": 5
    }
}