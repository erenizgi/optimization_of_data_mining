{
    "author": "eps1lon",
    "message": "[test] Repro for dropped `ignoreList` by Turbopack in browser sourcemaps (#78822)",
    "sha": "00e2e0ab133b8c9244c2280ed4c9314bb51e8fc8",
    "files": [
        {
            "sha": "f2d00d8eb2fae665d94fe75c33681f61e651a4c6",
            "filename": "test/e2e/app-dir/server-source-maps/fixtures/default/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/00e2e0ab133b8c9244c2280ed4c9314bb51e8fc8/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/00e2e0ab133b8c9244c2280ed4c9314bb51e8fc8/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fpackage.json?ref=00e2e0ab133b8c9244c2280ed4c9314bb51e8fc8",
            "patch": "@@ -1,6 +1,6 @@\n {\n   \"dependencies\": {\n-    \"internal-pkg\": \"file:./internal-pkg\",\n+    \"internal-pkg\": \"link:./internal-pkg\",\n     \"external-pkg\": \"file:./external-pkg\"\n   }\n }"
        },
        {
            "sha": "c45453a1464b732478ad07a88495868a7031eaa7",
            "filename": "test/e2e/app-dir/server-source-maps/server-source-maps.test.ts",
            "status": "modified",
            "additions": 54,
            "deletions": 2,
            "changes": 56,
            "blob_url": "https://github.com/vercel/next.js/blob/00e2e0ab133b8c9244c2280ed4c9314bb51e8fc8/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Fserver-source-maps.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/00e2e0ab133b8c9244c2280ed4c9314bb51e8fc8/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Fserver-source-maps.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Fserver-source-maps.test.ts?ref=00e2e0ab133b8c9244c2280ed4c9314bb51e8fc8",
            "patch": "@@ -89,7 +89,7 @@ describe('app-dir - server source maps', () => {\n \n   it('stack frames are ignore-listed in ssr', async () => {\n     const outputIndex = next.cliOutput.length\n-    await next.render('/ssr-error-log-ignore-listed')\n+    const browser = await next.browser('/ssr-error-log-ignore-listed')\n \n     if (isNextDev) {\n       await retry(() => {\n@@ -115,7 +115,7 @@ describe('app-dir - server source maps', () => {\n           : '\\nError: Boom' +\n               '\\n    at logError (app/ssr-error-log-ignore-listed/page.js:9:16)' +\n               '\\n    at runWithInternalIgnored (app/ssr-error-log-ignore-listed/page.js:19:12)' +\n-              // TODO(veil): Webpacks's sourcemap loader drops `ignoreList`\n+              // TODO(veil-NDX-910): Webpacks's sourcemap loader drops `ignoreList`\n               // TODO(veil): Webpack's sourcemap loader creates an incorrect `sources` entry.\n               // Can be worked around by using `./sourcemapped.ts` instead of `sourcemapped.ts`.\n               '\\n    at runInternalIgnored (webpack-internal:/(ssr)/internal-pkg/ignored.ts:6:9)' +\n@@ -133,6 +133,58 @@ describe('app-dir - server source maps', () => {\n               '\\n   7 |' +\n               '\\n'\n       )\n+      if (isTurbopack) {\n+        // TODO(veil): Turbopack errors because it thinks the sources are not part of the project.\n+        // TODO(veil-NDX-910): Turbopack's sourcemap loader drops `ignoreList` in browser sourcemaps.\n+        await expect(browser).toDisplayCollapsedRedbox(`\n+         {\n+           \"description\": \"Boom\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Console Error\",\n+           \"source\": \"app/ssr-error-log-ignore-listed/page.js (9:17) @ logError\n+         >  9 |   const error = new Error('Boom')\n+              |                 ^\",\n+           \"stack\": [\n+             \"logError app/ssr-error-log-ignore-listed/page.js (9:17)\",\n+             \"runWithInternalIgnored app/ssr-error-log-ignore-listed/page.js (19:13)\",\n+             \"<FIXME-file-protocol>\",\n+             \"runWithExternalSourceMapped app/ssr-error-log-ignore-listed/page.js (18:28)\",\n+             \"<FIXME-file-protocol>\",\n+             \"runWithExternal app/ssr-error-log-ignore-listed/page.js (17:31)\",\n+             \"runWithInternalSourceMapped app/ssr-error-log-ignore-listed/page.js (16:17)\",\n+             \"<FIXME-file-protocol>\",\n+             \"runWithInternal app/ssr-error-log-ignore-listed/page.js (15:27)\",\n+             \"runInternal internal-pkg/index.js (2:10)\",\n+             \"Page app/ssr-error-log-ignore-listed/page.js (14:13)\",\n+           ],\n+         }\n+        `)\n+      } else {\n+        // TODO(veil-NDX-910): Webpacks's sourcemap loader drops `ignoreList`\n+        // TODO(veil): Webpack's sourcemap loader creates an incorrect `sources` entry.\n+        await expect(browser).toDisplayCollapsedRedbox(`\n+         {\n+           \"description\": \"Boom\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Console Error\",\n+           \"source\": \"app/ssr-error-log-ignore-listed/page.js (9:17) @ logError\n+         >  9 |   const error = new Error('Boom')\n+              |                 ^\",\n+           \"stack\": [\n+             \"logError app/ssr-error-log-ignore-listed/page.js (9:17)\",\n+             \"runWithInternalIgnored app/ssr-error-log-ignore-listed/page.js (19:13)\",\n+             \"runInternalIgnored ignored.ts (6:10)\",\n+             \"runWithExternalSourceMapped app/ssr-error-log-ignore-listed/page.js (18:29)\",\n+             \"runWithExternal app/ssr-error-log-ignore-listed/page.js (17:32)\",\n+             \"runWithInternalSourceMapped app/ssr-error-log-ignore-listed/page.js (16:18)\",\n+             \"runInternalSourceMapped sourcemapped.ts (5:10)\",\n+             \"runWithInternal app/ssr-error-log-ignore-listed/page.js (15:28)\",\n+             \"runInternal internal-pkg/index.js (2:10)\",\n+             \"Page app/ssr-error-log-ignore-listed/page.js (14:14)\",\n+           ],\n+         }\n+        `)\n+      }\n     } else {\n       // TODO: Test `next build` with `--enable-source-maps`.\n     }"
        }
    ],
    "stats": {
        "total": 58,
        "additions": 55,
        "deletions": 3
    }
}