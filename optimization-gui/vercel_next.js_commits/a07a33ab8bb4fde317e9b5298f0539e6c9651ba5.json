{
    "author": "ztanner",
    "message": "[ci]: remove PPR-specific CI jobs (#84439)\n\n`experimental.ppr` is being superseded by `experimental.cacheComponents`\nand will not exist in the form that is currently being tested in CI.\n\nThis frees up these CI resources until we delete the standalone PPR\nflag. `cacheComponents` is tested via the experimental runners.",
    "sha": "a07a33ab8bb4fde317e9b5298f0539e6c9651ba5",
    "files": [
        {
            "sha": "792cf636cf23f7daed7b148379a5b9cb8400ccaa",
            "filename": ".github/workflows/build_and_test.yml",
            "status": "modified",
            "additions": 0,
            "deletions": 72,
            "changes": 72,
            "blob_url": "https://github.com/vercel/next.js/blob/a07a33ab8bb4fde317e9b5298f0539e6c9651ba5/.github%2Fworkflows%2Fbuild_and_test.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/a07a33ab8bb4fde317e9b5298f0539e6c9651ba5/.github%2Fworkflows%2Fbuild_and_test.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_test.yml?ref=a07a33ab8bb4fde317e9b5298f0539e6c9651ba5",
            "patch": "@@ -919,75 +919,6 @@ jobs:\n       stepName: 'test-firefox-safari'\n     secrets: inherit\n \n-  # TODO: remove these jobs once PPR is the default\n-  # Manifest generated via: https://gist.github.com/wyattjoh/2ceaebd82a5bcff4819600fd60126431\n-  test-ppr-integration:\n-    name: test ppr integration\n-    needs: ['optimize-ci', 'changes', 'build-native', 'build-next']\n-    if: ${{ needs.optimize-ci.outputs.skip == 'false' && needs.changes.outputs.docs-only == 'false' }}\n-\n-    uses: ./.github/workflows/build_reusable.yml\n-    with:\n-      nodeVersion: 20.9.0\n-      afterBuild: |\n-        export __NEXT_EXPERIMENTAL_PPR=true\n-        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\"\n-        export IS_WEBPACK_TEST=1\n-\n-        node run-tests.js \\\n-          --timings \\\n-          --type integration\n-      stepName: 'test-ppr-integration'\n-    secrets: inherit\n-\n-  test-ppr-dev:\n-    name: test ppr dev\n-    needs: ['optimize-ci', 'changes', 'build-native', 'build-next']\n-    if: ${{ needs.optimize-ci.outputs.skip == 'false' && needs.changes.outputs.docs-only == 'false' }}\n-\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        group: [1/6, 2/6, 3/6, 4/6, 5/6, 6/6]\n-    uses: ./.github/workflows/build_reusable.yml\n-    with:\n-      afterBuild: |\n-        export __NEXT_EXPERIMENTAL_PPR=true\n-        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\"\n-        export NEXT_TEST_MODE=dev\n-        export IS_WEBPACK_TEST=1\n-\n-        node run-tests.js \\\n-          --timings \\\n-          -g ${{ matrix.group }} \\\n-          --type development\n-      stepName: 'test-ppr-dev-${{ matrix.group }}'\n-    secrets: inherit\n-\n-  test-ppr-prod:\n-    name: test ppr prod\n-    needs: ['optimize-ci', 'changes', 'build-native', 'build-next']\n-    if: ${{ needs.optimize-ci.outputs.skip == 'false' && needs.changes.outputs.docs-only == 'false' }}\n-\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        group: [1/7, 2/7, 3/7, 4/7, 5/7, 6/7, 7/7]\n-    uses: ./.github/workflows/build_reusable.yml\n-    with:\n-      afterBuild: |\n-        export __NEXT_EXPERIMENTAL_PPR=true\n-        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\"\n-        export NEXT_TEST_MODE=start\n-        export IS_WEBPACK_TEST=1\n-\n-        node run-tests.js \\\n-          --timings \\\n-          -g ${{ matrix.group }} \\\n-          --type production\n-      stepName: 'test-ppr-prod-${{ matrix.group }}'\n-    secrets: inherit\n-\n   # TODO: Disable these when no more experiments are tested\n   # Manifest generated via: https://gist.github.com/wyattjoh/2ceaebd82a5bcff4819600fd60126431\n   test-experimental-integration:\n@@ -1076,9 +1007,6 @@ jobs:\n         'test-prod',\n         'test-integration',\n         'test-firefox-safari',\n-        'test-ppr-dev',\n-        'test-ppr-prod',\n-        'test-ppr-integration',\n         'test-experimental-dev',\n         'test-experimental-prod',\n         'test-experimental-integration',"
        },
        {
            "sha": "75dcd7cb66f743598a5b78ad0fefc54fb67a916f",
            "filename": "test/ppr-tests-manifest.json",
            "status": "removed",
            "additions": 0,
            "deletions": 182,
            "changes": 182,
            "blob_url": "https://github.com/vercel/next.js/blob/9ba29b4125bf368f92d36b34a5a34aa8dce0a8ce/test%2Fppr-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9ba29b4125bf368f92d36b34a5a34aa8dce0a8ce/test%2Fppr-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fppr-tests-manifest.json?ref=9ba29b4125bf368f92d36b34a5a34aa8dce0a8ce",
            "patch": "@@ -1,182 +0,0 @@\n-{\n-  \"version\": 2,\n-  \"suites\": {\n-    \"test/production/app-dir/fetch-cache/fetch-cache.test.ts\": {\n-      \"passed\": [],\n-      \"failed\": [\n-        \"fetch-cache should have correct fetchUrl field for fetches and unstable_cache\",\n-        \"fetch-cache should not retry for failed fetch-cache GET\",\n-        \"fetch-cache should retry 3 times when revalidate times out\",\n-        \"fetch-cache should update cache TTL even if cache data does not change\"\n-      ],\n-      \"pending\": [],\n-      \"flakey\": [],\n-      \"runtimeError\": false\n-    },\n-    \"test/e2e/app-dir/app-static/app-static.test.ts\": {\n-      \"failed\": [\n-        \"app-dir static/dynamic handling usePathname should have values from canonical url on rewrite\",\n-        \"app-dir static/dynamic handling should have correct prerender-manifest entries\",\n-        \"app-dir static/dynamic handling should output HTML/RSC files for static paths\",\n-        \"app-dir static/dynamic handling should output debug info for static bailouts\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/headers-static-bailout/headers-static-bailout.test.ts\": {\n-      \"failed\": [\n-        \"headers-static-bailout it provides a helpful link in case static generation bailout is uncaught\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/error-boundary-navigation/override-node-env.test.ts\": {\n-      \"failed\": [\n-        \"app dir - not found navigation - with overridden node env should be able to navigate to other page from root not-found page\"\n-      ]\n-    },\n-    \"test/e2e/on-request-error/isr/isr.test.ts\": {\n-      \"failed\": [\n-        \"on-request-error - isr app router ISR should capture correct reason for stale errored page\",\n-        \"on-request-error - isr app router ISR should capture correct reason for on-demand revalidated page\",\n-        \"on-request-error - isr app router ISR should capture revalidate from server action\"\n-      ]\n-    },\n-    \"test/e2e/opentelemetry/opentelemetry.test.ts\": {\n-      \"failed\": [\n-        \"opentelemetry root context app router should handle RSC with fetch\",\n-        \"opentelemetry incoming context propagation app router should handle RSC with fetch\",\n-        \"opentelemetry incoming context propagation app router should handle route handlers in app router\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/rsc-basic/rsc-basic.test.ts\": {\n-      \"failed\": [\n-        \"app dir - rsc basics should render initial styles of css-in-js in edge SSR correctly\",\n-        \"app dir - rsc basics should render initial styles of css-in-js in nodejs SSR correctly\",\n-        \"app dir - rsc basics should render server components correctly\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/navigation/navigation.test.ts\": {\n-      \"failed\": [\n-        \"app dir - navigation redirect status code should respond with 308 status code if permanent flag is set\",\n-        \"app dir - navigation redirect status code should respond with 307 status code in client component\",\n-        \"app dir - navigation redirect status code should respond with 307 status code in server component\",\n-        \"app dir - navigation bots should block rendering for bots and return 404 status\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/app-static/app-static-custom-handler.test.ts\": {\n-      \"failed\": [\n-        \"app-dir static/dynamic handling should output debug info for static bailouts\",\n-        \"app-dir static/dynamic handling should have correct prerender-manifest entries\",\n-        \"app-dir static/dynamic handling should output HTML/RSC files for static paths\"\n-      ]\n-    },\n-    \"test/production/app-dir/unexpected-error/unexpected-error.test.ts\": {\n-      \"failed\": [\n-        \"unexpected-error should set response status to 500 for unexpected errors in ssr app route\",\n-        \"unexpected-error should set response status to 500 for unexpected errors in isr app route\"\n-      ]\n-    },\n-    \"test/e2e/next-form/default/app-dir.test.ts\": {\n-      \"failed\": [\n-        \"next-form - app dir should soft-navigate on submit and show the prefetched loading state\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/parallel-routes-revalidation/parallel-routes-revalidation.test.ts\": {\n-      \"failed\": [\n-        \"parallel-routes-revalidation router.refresh (dynamic) - searchParams: false should correctly refresh data for previously intercepted modal and active page slot\",\n-        \"parallel-routes-revalidation router.refresh (dynamic) - searchParams: false should correctly refresh data for the intercepted route and previously active page slot\",\n-        \"parallel-routes-revalidation router.refresh (dynamic) - searchParams: true should correctly refresh data for previously intercepted modal and active page slot\",\n-        \"parallel-routes-revalidation router.refresh (dynamic) - searchParams: true should correctly refresh data for the intercepted route and previously active page slot\",\n-        \"parallel-routes-revalidation router.refresh (regular) - searchParams: false should correctly refresh data for previously intercepted modal and active page slot\",\n-        \"parallel-routes-revalidation router.refresh (regular) - searchParams: false should correctly refresh data for the intercepted route and previously active page slot\",\n-        \"parallel-routes-revalidation router.refresh (regular) - searchParams: true should correctly refresh data for previously intercepted modal and active page slot\",\n-        \"parallel-routes-revalidation router.refresh (regular) - searchParams: true should correctly refresh data for the intercepted route and previously active page slot\",\n-        \"parallel-routes-revalidation server action revalidation should not trigger a refresh for the page that is being redirected to\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/router-autoscroll/router-autoscroll.test.ts\": {\n-      \"failed\": [\n-        \"router autoscrolling on navigation bugs Should apply scroll when loading.js is used\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/actions/app-action-node-middleware.test.ts\": {\n-      \"failed\": [\n-        \"app-dir action handling fetch actions should invalidate client cache when path is revalidated\",\n-        \"app-dir action handling fetch actions should store revalidation data in the prefetch cache\",\n-        \"app-dir action handling should only submit action once when resubmitting an action after navigation\",\n-        \"app-dir action handling should reset the form state when the action redirects to itself\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/searchparams-reuse-loading/searchparams-reuse-loading.test.ts\": {\n-      \"failed\": [\n-        \"searchparams-reuse-loading should re-use loading from \\\"full\\\" prefetch for param-full URL when navigating to param-full route\",\n-        \"searchparams-reuse-loading should re-use loading from \\\"full\\\" prefetch for param-full URL when navigating to param-less route\",\n-        \"searchparams-reuse-loading should re-use loading from \\\"full\\\" prefetch for param-less URL when navigating to param-full route\"\n-      ]\n-    },\n-    \"test/production/app-dir/browser-chunks/browser-chunks.test.ts\": {\n-      \"failed\": [\n-        \"browser-chunks must not bundle any server modules into browser chunks\"\n-      ]\n-    },\n-    \"test/e2e/next-form/default/next-form-prefetch.test.ts\": {\n-      \"failed\": [\n-        \"app dir - form prefetching should not prefetch when prefetch is set to false`\",\n-        \"app dir - form prefetching should prefetch a loading state for the form's target\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/actions/app-action.test.ts\": {\n-      \"failed\": [\n-        \"app-dir action handling fetch actions should store revalidation data in the prefetch cache\",\n-        \"app-dir action handling should only submit action once when resubmitting an action after navigation\",\n-        \"app-dir action handling should reset the form state when the action redirects to itself\"\n-      ]\n-    },\n-    \"test/e2e/app-dir/parallel-routes-and-interception/parallel-routes-and-interception.test.ts\": {\n-      \"failed\": [\n-        \"parallel-routes-and-interception route intercepting should support intercepting local dynamic sibling routes\",\n-        \"parallel-routes-and-interception parallel routes should handle a loading state\"\n-      ]\n-    }\n-  },\n-  \"rules\": {\n-    \"include\": [\n-      \"test/e2e/**/*.test.{t,j}s{,x}\",\n-      \"test/integration/app-*/**/*.test.{t,j}s{,x}\",\n-      \"test/production/app-*/**/*.test.{t,j}s{,x}\",\n-      \"test/development/app-*/**/*.test.{t,j}s{,x}\",\n-      \"test/development/acceptance-app/**/*.test.{t,j}s{,x}\"\n-    ],\n-    \"exclude\": [\n-      \"test/development/app-dir/cache-components-*/**/*\",\n-      \"test/e2e/app-dir/app-client-cache/client-cache.defaults.test.ts\",\n-      \"test/e2e/app-dir/app-client-cache/client-cache.experimental.test.ts\",\n-      \"test/e2e/app-dir/app-client-cache/client-cache.original.test.ts\",\n-      \"test/e2e/app-dir/app-prefetch*/**/*\",\n-      \"test/e2e/app-dir/cache-components-*/**/*\",\n-      \"test/e2e/app-dir/cache-components/**/*\",\n-      \"test/e2e/app-dir/fallback-shells/**/*\",\n-      \"test/e2e/app-dir/front-redirect-issue/front-redirect-issue.test.ts\",\n-      \"test/e2e/app-dir/next-font/**/*\",\n-      \"test/e2e/app-dir/ppr-*/**/*\",\n-      \"test/e2e/app-dir/ppr/**/*\",\n-      \"test/e2e/app-dir/react-max-headers-length/react-max-headers-length.test.ts\",\n-      \"test/e2e/app-dir/searchparams-static-bailout/searchparams-static-bailout.test.ts\",\n-      \"test/e2e/app-dir/segment-cache/basic/segment-cache-basic.test.ts\",\n-      \"test/e2e/app-dir/segment-cache/export/segment-cache-output-export.test.ts\",\n-      \"test/e2e/app-dir/segment-cache/incremental-opt-in/segment-cache-incremental-opt-in.test.ts\",\n-      \"test/e2e/app-dir/segment-cache/memory-pressure/segment-cache-memory-pressure.test.ts\",\n-      \"test/e2e/app-dir/segment-cache/prefetch-scheduling/prefetch-scheduling.test.ts\",\n-      \"test/e2e/app-dir/segment-cache/revalidation/segment-cache-revalidation.test.ts\",\n-      \"test/e2e/app-dir/segment-cache/staleness/segment-cache-stale-time.test.ts\",\n-      \"test/e2e/app-dir/static-shell-debugging/static-shell-debugging.test.ts\",\n-      \"test/e2e/app-dir/use-cache-close-over-function/**/*\",\n-      \"test/e2e/app-dir/use-cache-custom-handler/**/*\",\n-      \"test/e2e/app-dir/use-cache-hanging-inputs/**/*\",\n-      \"test/e2e/app-dir/use-cache-metadata-route-handler/**/*\",\n-      \"test/e2e/app-dir/use-cache-route-handler-only/**/*\",\n-      \"test/e2e/app-dir/use-cache-with-server-function-props/use-cache-with-server-function-props.test.ts\",\n-      \"test/integration/app-dir-export/**/*\",\n-      \"test/production/app-dir/build-output-tree-view/build-output-tree-view.test.ts\",\n-      \"test/production/app-dir/global-default-cache-handler/global-default-cache-handler.test.ts\",\n-      \"test/production/app-dir/resume-data-cache/resume-data-cache.test.ts\"\n-    ]\n-  }\n-}"
        }
    ],
    "stats": {
        "total": 254,
        "additions": 0,
        "deletions": 254
    }
}