{
    "author": "devjiwonchoi",
    "message": "[dev-tools] add restart dev server button on dev-tools indicator preferences (#80072)\n\nAdd options from https://github.com/vercel/next.js/pull/80060 to the\npreferences tab as well for DX.\n\n**Restart Dev Server**\n\n\nhttps://github.com/user-attachments/assets/689441b4-46aa-418a-80e4-66ce495695cb\n\n**Reset Bundler Cache**\n\n\nhttps://github.com/user-attachments/assets/911224c6-b923-48ac-844d-52132b05ef3f\n\nCloses NEXT-4478\n\n---------\n\nCo-authored-by: Benjamin Woodruff <benjamin.woodruff@vercel.com>\nCo-authored-by: Sebastian \"Sebbie\" Silbermann <sebastian.silbermann@vercel.com>",
    "sha": "cdb6d257bfad7d3d4cef99a666047bf82893d272",
    "files": [
        {
            "sha": "c367b92bae800d006f841fb59753b48bdb873bbe",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/user-preferences.tsx",
            "status": "modified",
            "additions": 61,
            "deletions": 0,
            "changes": 61,
            "blob_url": "https://github.com/vercel/next.js/blob/cdb6d257bfad7d3d4cef99a666047bf82893d272/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/cdb6d257bfad7d3d4cef99a666047bf82893d272/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx?ref=cdb6d257bfad7d3d4cef99a666047bf82893d272",
            "patch": "@@ -66,6 +66,21 @@ export function UserPreferences({\n     setScale(value)\n   }\n \n+  function handleRestartDevServer() {\n+    let endpoint = '/__nextjs_restart_dev'\n+\n+    if (process.env.__NEXT_TURBOPACK_PERSISTENT_CACHE) {\n+      endpoint = '/__nextjs_restart_dev?invalidatePersistentCache'\n+    }\n+\n+    fetch(endpoint, {\n+      method: 'POST',\n+    }).then(() => {\n+      // TODO: poll server status and reload when the server is back up.\n+      // https://github.com/vercel/next.js/pull/80005\n+    })\n+  }\n+\n   return (\n     <DevToolsInfo title=\"Preferences\" {...props}>\n       <div className=\"preferences-container\">\n@@ -165,6 +180,52 @@ export function UserPreferences({\n           </div>\n         </div>\n       </div>\n+      <h1 className=\"dev-tools-info-title\">Development Server</h1>\n+      <div className=\"preferences-container\">\n+        <div className=\"preference-section\">\n+          <div className=\"preference-header\">\n+            <label id=\"restart-dev-server\">Restart Dev Server</label>\n+            <p className=\"preference-description\">\n+              Restart the dev server to rebuild your application.\n+            </p>\n+          </div>\n+          <div className=\"preference-control\">\n+            <button\n+              aria-describedby=\"restart-dev-server\"\n+              name=\"restart-dev-server\"\n+              data-restart-dev-server\n+              className=\"action-button\"\n+              onClick={handleRestartDevServer}\n+            >\n+              <span>Restart</span>\n+            </button>\n+          </div>\n+        </div>\n+      </div>\n+      {process.env.__NEXT_TURBOPACK_PERSISTENT_CACHE ? (\n+        <div className=\"preferences-container\">\n+          <div className=\"preference-section\">\n+            <div className=\"preference-header\">\n+              <label id=\"reset-bundler-cache\">Reset Bundler Cache</label>\n+              <p className=\"preference-description\">\n+                Reset the bundler cache to rebuild your application without\n+                cache.\n+              </p>\n+            </div>\n+            <div className=\"preference-control\">\n+              <button\n+                aria-describedby=\"reset-bundler-cache\"\n+                name=\"reset-bundler-cache\"\n+                data-reset-bundler-cache\n+                className=\"action-button\"\n+                onClick={handleRestartDevServer}\n+              >\n+                <span>Reset Cache</span>\n+              </button>\n+            </div>\n+          </div>\n+        </div>\n+      ) : null}\n     </DevToolsInfo>\n   )\n }"
        }
    ],
    "stats": {
        "total": 61,
        "additions": 61,
        "deletions": 0
    }
}