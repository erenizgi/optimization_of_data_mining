{
    "author": "lukesandberg",
    "message": "[turbopack] Remove a debug assertions in client references endpoint (#82725)\n\nRemove a debug assertion code in the `GlobalBuildInformation` implementation that was validating client references for endpoints.  This was inserted as a sanity check that two traversals were doing the same thing, but this is overkill and can be trigged accidentally by an eventual consistency condition.  Just drop them.\n\nIf an application is edited during this computation it is possible that the module graph that GlobalBuildInformation has access to is different than the set of references that `find_server_entries` will identified, this transient condition could trigger the panic.",
    "sha": "508b1a46a813a0469519b235f283af637ee1a4d5",
    "files": [
        {
            "sha": "d1f5fd864123a6cc482d1e3c70beeaab93261f82",
            "filename": "crates/next-api/src/module_graph.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 21,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/508b1a46a813a0469519b235f283af637ee1a4d5/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/508b1a46a813a0469519b235f283af637ee1a4d5/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs?ref=508b1a46a813a0469519b235f283af637ee1a4d5",
            "patch": "@@ -730,27 +730,7 @@ impl GlobalBuildInformation {\n             let result = if let [graph] = &self.client_references[..] {\n                 // Just a single graph, no need to merge results  This also naturally aggregates\n                 // server components and server utilities in the correct order\n-                let result = graph.get_client_references_for_endpoint(entry);\n-                #[cfg(debug_assertions)]\n-                {\n-                    let result = result.await?;\n-                    if has_layout_segments {\n-                        use rustc_hash::FxHashSet;\n-\n-                        let ServerEntries {\n-                            server_utils,\n-                            server_component_entries,\n-                        } = &*find_server_entries(entry, include_traced).await?;\n-                        // order of server utils doesn't matter, so just ensure that they match\n-                        assert_eq!(\n-                            FxHashSet::from_iter(result.server_utils.iter()),\n-                            FxHashSet::from_iter(server_utils.iter())\n-                        );\n-                        // The order of server_components does matter, enforce it is identical\n-                        assert_eq!(&result.server_component_entries, server_component_entries);\n-                    }\n-                }\n-                result\n+                graph.get_client_references_for_endpoint(entry)\n             } else {\n                 let results = self\n                     .client_references"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 1,
        "deletions": 21
    }
}