{
    "author": "kdy1",
    "message": "perf: Do not run react compiler needlessly (#75676)\n\n### What?\n\n - Do not run react compiler for files in `node_modules`.\n - When the react compiler is not enabled, just disable Babel.\n\n### Why?\n\nWe were stripping TypeScript and JSX using Babel when the React Compiler was enabled. We don't have to, and we should not.",
    "sha": "c9ef4bd3ad4d88f5f28d2800948597752b9f9f25",
    "files": [
        {
            "sha": "c4a8566ac5da96bbb342a9141d2bb6bf8e0bc2e8",
            "filename": "packages/next/src/build/babel/loader/get-config.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/c9ef4bd3ad4d88f5f28d2800948597752b9f9f25/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Floader%2Fget-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c9ef4bd3ad4d88f5f28d2800948597752b9f9f25/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Floader%2Fget-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Floader%2Fget-config.ts?ref=c9ef4bd3ad4d88f5f28d2800948597752b9f9f25",
            "patch": "@@ -273,6 +273,10 @@ function getFreshConfig(\n       return false\n     }\n \n+    if (/[/\\\\]node_modules[/\\\\]/.test(filename)) {\n+      return false\n+    }\n+\n     if (\n       loaderOptions.reactCompilerExclude &&\n       loaderOptions.reactCompilerExclude(filename)\n@@ -325,6 +329,10 @@ function getFreshConfig(\n   }\n \n   if (loaderOptions.transformMode === 'standalone') {\n+    if (!reactCompilerPluginsIfEnabled.length) {\n+      return null\n+    }\n+\n     options.plugins = [jsx, ...reactCompilerPluginsIfEnabled]\n     options.presets = [\n       [\n@@ -458,6 +466,9 @@ export default function getConfig(\n   const cacheKey = getCacheKey(cacheCharacteristics)\n   if (configCache.has(cacheKey)) {\n     const cachedConfig = configCache.get(cacheKey)\n+    if (!cachedConfig) {\n+      return null\n+    }\n \n     return {\n       ...cachedConfig,"
        },
        {
            "sha": "f76debc32b2965670ee71df8f069ba5cf4f5da61",
            "filename": "packages/next/src/build/babel/loader/transform.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/c9ef4bd3ad4d88f5f28d2800948597752b9f9f25/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Floader%2Ftransform.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c9ef4bd3ad4d88f5f28d2800948597752b9f9f25/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Floader%2Ftransform.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Floader%2Ftransform.ts?ref=c9ef4bd3ad4d88f5f28d2800948597752b9f9f25",
            "patch": "@@ -86,6 +86,9 @@ export default function transform(\n     target,\n     filename,\n   })\n+  if (!babelConfig) {\n+    return { code: source, map: inputSourceMap }\n+  }\n   getConfigSpan.stop()\n \n   const normalizeSpan = parentSpan.traceChild('babel-turbo-normalize-file')"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 14,
        "deletions": 0
    }
}