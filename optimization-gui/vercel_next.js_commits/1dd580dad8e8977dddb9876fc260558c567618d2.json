{
    "author": "KaziMahbuburRahman",
    "message": "docs: add example for enabling both AVIF and WebP image formats for better image optimization (#86191)\n\n## Title\ndocs: add example for enabling both AVIF and WebP image formats\n\n## Description\n\n### What?\nThis PR enhances the image component documentation by adding examples\nshowing how to enable both AVIF and WebP image formats together in\n`next.config.js`. It also updates the `image-component` example to\ndemonstrate this configuration.\n\n### Why?\nCurrently, the documentation only shows examples for:\n- WebP only (default): `formats: ['image/webp']`\n- AVIF only: `formats: ['image/avif']`\n\nHowever, many developers want to enable both formats together to:\n- Prefer AVIF for browsers that support it (better compression, ~20%\nsmaller files)\n- Fall back to WebP for broader browser compatibility\n- Maximize image optimization across different browsers\n\nThis configuration is a best practice but wasn't clearly documented with\nan example.\n\n### How?\n- Added example configuration `formats: ['image/avif', 'image/webp']` to\nApp Router image component documentation\n- Added the same example to Pages Router (legacy) image component\ndocumentation for consistency\n- Updated `examples/image-component/next.config.js` to demonstrate the\nconfiguration\n- Added clarification that the order matters - Next.js uses the first\nformat in the array that the browser supports\n\n### Changes Made\n- `docs/01-app/03-api-reference/02-components/image.mdx` - Added AVIF +\nWebP example\n- `docs/02-pages/04-api-reference/01-components/image-legacy.mdx` -\nAdded AVIF + WebP example\n- `examples/image-component/next.config.js` - Added formats\nconfiguration\n\n### Testing\n- [x] Documentation changes only - no code changes\n- [x] Verified examples are syntactically correct\n- [x] Checked that formatting follows Next.js documentation guidelines\n\n### Checklist\n- [x] Run `pnpm prettier-fix` to fix formatting issues (if applicable)\n- [x] Documentation follows the docs guidelines\n- [x] Changes are clear and helpful for developers\n\n---------\n\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "1dd580dad8e8977dddb9876fc260558c567618d2",
    "files": [
        {
            "sha": "bc0e096b2cdab361747cd02008af5fe1488ec317",
            "filename": "docs/01-app/03-api-reference/02-components/image.mdx",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/1dd580dad8e8977dddb9876fc260558c567618d2/docs%2F01-app%2F03-api-reference%2F02-components%2Fimage.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/1dd580dad8e8977dddb9876fc260558c567618d2/docs%2F01-app%2F03-api-reference%2F02-components%2Fimage.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F02-components%2Fimage.mdx?ref=1dd580dad8e8977dddb9876fc260558c567618d2",
            "patch": "@@ -752,10 +752,21 @@ module.exports = {\n }\n ```\n \n+You can also enable both AVIF and WebP formats together. AVIF will be preferred for browsers that support it, with WebP as a fallback:\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  images: {\n+    formats: ['image/avif', 'image/webp'],\n+  },\n+}\n+```\n+\n > **Good to know**:\n >\n > - We still recommend using WebP for most use cases.\n > - AVIF generally takes 50% longer to encode but it compresses 20% smaller compared to WebP. This means that the first time an image is requested, it will typically be slower, but subsequent requests that are cached will be faster.\n+> - When using multiple formats, Next.js will cache each format separately. This means increased storage requirements compared to using a single format, as both AVIF and WebP versions of images will be stored for different browser support.\n > - If you self-host with a Proxy/CDN in front of Next.js, you must configure the Proxy to forward the `Accept` header.\n \n #### `minimumCacheTTL`"
        },
        {
            "sha": "c1b754af5216d6950843a667c4b0d1f20ddcbad3",
            "filename": "docs/02-pages/04-api-reference/01-components/image-legacy.mdx",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/1dd580dad8e8977dddb9876fc260558c567618d2/docs%2F02-pages%2F04-api-reference%2F01-components%2Fimage-legacy.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/1dd580dad8e8977dddb9876fc260558c567618d2/docs%2F02-pages%2F04-api-reference%2F01-components%2Fimage-legacy.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F02-pages%2F04-api-reference%2F01-components%2Fimage-legacy.mdx?ref=1dd580dad8e8977dddb9876fc260558c567618d2",
            "patch": "@@ -528,10 +528,21 @@ module.exports = {\n }\n ```\n \n+You can also enable both AVIF and WebP formats together. AVIF will be preferred for browsers that support it, with WebP as a fallback:\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  images: {\n+    formats: ['image/avif', 'image/webp'],\n+  },\n+}\n+```\n+\n > **Good to know**:\n >\n > - We still recommend using WebP for most use cases.\n > - AVIF generally takes 50% longer to encode but it compresses 20% smaller compared to WebP. This means that the first time an image is requested, it will typically be slower and then subsequent requests that are cached will be faster.\n+> - When using multiple formats, Next.js will cache each format separately. This means increased storage requirements compared to using a single format, as both AVIF and WebP versions of images will be stored for different browser support.\n > - If you self-host with a Proxy/CDN in front of Next.js, you must configure the Proxy to forward the `Accept` header.\n \n ## Caching Behavior"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 22,
        "deletions": 0
    }
}