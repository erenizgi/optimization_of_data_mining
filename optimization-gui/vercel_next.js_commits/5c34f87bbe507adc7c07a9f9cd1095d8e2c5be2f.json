{
    "author": "samcx",
    "message": "chore: update formatted duration string magnitude for millisconds <-> microseconds (#85136)\n\n## Why?\n\nThis PR refines the duration formatting logic in the build process:\n\n1. Changed the millisecond threshold from 1ms to 2ms for better\nreadability\n2. Fixed comparison operators from `>` to `>=` to ensure consistent\nbehavior at threshold boundaries\n3. Updated documentation to reflect the new 2ms threshold\n\nThese changes ensure durations are displayed with appropriate units and\nprecision across all time ranges.",
    "sha": "5c34f87bbe507adc7c07a9f9cd1095d8e2c5be2f",
    "files": [
        {
            "sha": "d1667ba5f91d1d086b14976a9777ffc36c758dcb",
            "filename": "packages/next/src/build/duration-to-string.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/5c34f87bbe507adc7c07a9f9cd1095d8e2c5be2f/packages%2Fnext%2Fsrc%2Fbuild%2Fduration-to-string.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5c34f87bbe507adc7c07a9f9cd1095d8e2c5be2f/packages%2Fnext%2Fsrc%2Fbuild%2Fduration-to-string.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fduration-to-string.ts?ref=5c34f87bbe507adc7c07a9f9cd1095d8e2c5be2f",
            "patch": "@@ -13,7 +13,7 @@ const NANOSECONDS_IN_MINUTE = 60_000_000_000 // 60 * 1_000_000_000\n const MINUTES_THRESHOLD_NANOSECONDS = 120_000_000_000 // 2 minutes in nanoseconds\n const SECONDS_THRESHOLD_HIGH_NANOSECONDS = 40_000_000_000 // 40 seconds in nanoseconds\n const SECONDS_THRESHOLD_LOW_NANOSECONDS = 2_000_000_000 // 2 seconds in nanoseconds\n-const MILLISECONDS_THRESHOLD_NANOSECONDS = 1_000_000 // 1 millisecond in nanoseconds\n+const MILLISECONDS_THRESHOLD_NANOSECONDS = 2_000_000 // 2 milliseconds in nanoseconds\n \n /**\n  * Converts a duration in seconds to a human-readable string format.\n@@ -45,21 +45,21 @@ export function durationToString(compilerDuration: number) {\n  * - >= 2 minutes: show in minutes with 1 decimal place (e.g., \"2.5min\")\n  * - >= 40 seconds: show in whole seconds (e.g., \"45s\")\n  * - >= 2 seconds: show in seconds with 1 decimal place (e.g., \"3.2s\")\n- * - >= 1 millisecond: show in whole milliseconds (e.g., \"250ms\")\n- * - < 1 millisecond: show in whole microseconds (e.g., \"500µs\")\n+ * - >= 2 milliseconds: show in whole milliseconds (e.g., \"250ms\")\n+ * - < 2 milliseconds: show in whole microseconds (e.g., \"500µs\")\n  *\n  * @param durationBigInt - Duration in nanoseconds as a BigInt\n  * @returns Formatted duration string with appropriate unit and precision\n  */\n function durationToStringWithNanoseconds(durationBigInt: bigint): string {\n   const duration = Number(durationBigInt)\n-  if (duration > MINUTES_THRESHOLD_NANOSECONDS) {\n+  if (duration >= MINUTES_THRESHOLD_NANOSECONDS) {\n     return `${(duration / NANOSECONDS_IN_MINUTE).toFixed(1)}min`\n-  } else if (duration > SECONDS_THRESHOLD_HIGH_NANOSECONDS) {\n+  } else if (duration >= SECONDS_THRESHOLD_HIGH_NANOSECONDS) {\n     return `${(duration / NANOSECONDS_PER_SECOND).toFixed(0)}s`\n-  } else if (duration > SECONDS_THRESHOLD_LOW_NANOSECONDS) {\n+  } else if (duration >= SECONDS_THRESHOLD_LOW_NANOSECONDS) {\n     return `${(duration / NANOSECONDS_PER_SECOND).toFixed(1)}s`\n-  } else if (duration > MILLISECONDS_THRESHOLD_NANOSECONDS) {\n+  } else if (duration >= MILLISECONDS_THRESHOLD_NANOSECONDS) {\n     return `${(duration / NANOSECONDS_PER_MILLISECOND).toFixed(0)}ms`\n   } else {\n     return `${(duration / NANOSECONDS_PER_MICROSECOND).toFixed(0)}µs`"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 7,
        "deletions": 7
    }
}