{
    "author": "unstubbable",
    "message": "Allow server functions to be used as client component props in `'use cache'` (#81431)\n\nWhen passing server actions or nested `'use cache'` functions inside of\ncached components as props to client components, we need to make sure\nthat those are registered as server references, even when restoring the\nparent component from the cache, e.g. during the resume of a partially\nstatic shell. Otherwise, React would throw a runtime error while trying\nto serialize the props.\n\n<details>\n<summary>Example</summary>\n\n```tsx\nimport { connection } from 'next/server'\nimport { Suspense } from 'react'\n\nexport default function Page() {\n  return (\n    <div>\n      <Suspense fallback={<h1>Loading...</h1>}>\n        <Dynamic />\n      </Suspense>\n      <CachedForm />\n    </div>\n  )\n}\n\nconst Dynamic = async () => {\n  await connection()\n  return <h1>Dynamic</h1>\n}\n\nasync function CachedForm() {\n  'use cache'\n\n  return (\n    <form\n      action={async () => {\n        'use server'\n        console.log('Hello, World!')\n      }}\n    >\n      <button>Submit</button>\n    </form>\n  )\n}\n```\n</details>\n\nPreviously, for inline server functions, the Next.js compiler placed the\n`registerServerReference` calls where the server function was originally\ndeclared. When the enclosing function was restored from a cache, this\ncall was skipped and the reference was not registered, leading to the\nserialization error. To fix it, we can hoist the\n`registerServerReference` call into the module scope, where the\nreference itself also has been hoisted to. For simplicity, we're doing\nthis now generally, regardless of whether the server function is inline\nor top-level.\n\nNote: Since `registerServerReference` uses `Object.defineProperties` to\nmutate the given reference, we don't need to assign the result to\nanything. We already did this for exported functions of a module with a\ntop-level `'use server'` directive.\n\ncloses NAR-167",
    "sha": "4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
    "files": [
        {
            "sha": "baf839630c2923734428d017f64cc5bf2e29fc49",
            "filename": "crates/next-custom-transforms/src/transforms/server_actions.rs",
            "status": "modified",
            "additions": 108,
            "deletions": 132,
            "changes": 240,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -352,12 +352,6 @@ impl<C: Comments> ServerActions<C> {\n         id\n     }\n \n-    fn gen_ref_ident(&mut self) -> Atom {\n-        let id: Atom = format!(\"$$RSC_SERVER_REF_{0}\", self.reference_index).into();\n-        self.reference_index += 1;\n-        id\n-    }\n-\n     fn create_bound_action_args_array_pat(&mut self, arg_len: usize) -> Pat {\n         Pat::Array(ArrayPat {\n             span: DUMMY_SP,\n@@ -467,16 +461,6 @@ impl<C: Comments> ServerActions<C> {\n         self.export_actions\n             .push((action_name.clone(), action_id.clone()));\n \n-        let register_action_expr = bind_args_to_ref_expr(\n-            annotate_ident_as_server_reference(action_ident.clone(), action_id.clone(), arrow.span),\n-            ids_from_closure\n-                .iter()\n-                .cloned()\n-                .map(|id| Some(id.as_arg()))\n-                .collect(),\n-            action_id.clone(),\n-        );\n-\n         if let BlockStmtOrExpr::BlockStmt(block) = &mut *arrow.body {\n             block.visit_mut_with(&mut ClosureReplacer {\n                 used_ids: &ids_from_closure,\n@@ -503,7 +487,7 @@ impl<C: Comments> ServerActions<C> {\n                             span: DUMMY_SP,\n                             callee: quote_ident!(\"decryptActionBoundArgs\").as_callee(),\n                             args: vec![\n-                                action_id.as_arg(),\n+                                action_id.clone().as_arg(),\n                                 quote_ident!(\"$$ACTION_CLOSURE_BOUND\").as_arg(),\n                             ],\n                             ..Default::default()\n@@ -575,7 +559,29 @@ impl<C: Comments> ServerActions<C> {\n                 .into(),\n             })));\n \n-        Box::new(register_action_expr.clone())\n+        self.hoisted_extra_items\n+            .push(ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n+                span: DUMMY_SP,\n+                expr: Box::new(annotate_ident_as_server_reference(\n+                    action_ident.clone(),\n+                    action_id.clone(),\n+                    arrow.span,\n+                )),\n+            })));\n+\n+        if ids_from_closure.is_empty() {\n+            Box::new(action_ident.clone().into())\n+        } else {\n+            Box::new(bind_args_to_ident(\n+                action_ident.clone(),\n+                ids_from_closure\n+                    .iter()\n+                    .cloned()\n+                    .map(|id| Some(id.as_arg()))\n+                    .collect(),\n+                action_id.clone(),\n+            ))\n+        }\n     }\n \n     fn maybe_hoist_and_create_proxy_for_server_action_function(\n@@ -609,20 +615,6 @@ impl<C: Comments> ServerActions<C> {\n         self.export_actions\n             .push((action_name.clone(), action_id.clone()));\n \n-        let register_action_expr = bind_args_to_ref_expr(\n-            annotate_ident_as_server_reference(\n-                action_ident.clone(),\n-                action_id.clone(),\n-                function.span,\n-            ),\n-            ids_from_closure\n-                .iter()\n-                .cloned()\n-                .map(|id| Some(id.as_arg()))\n-                .collect(),\n-            action_id.clone(),\n-        );\n-\n         function.body.visit_mut_with(&mut ClosureReplacer {\n             used_ids: &ids_from_closure,\n             private_ctxt: self.private_ctxt,\n@@ -646,7 +638,7 @@ impl<C: Comments> ServerActions<C> {\n                             span: DUMMY_SP,\n                             callee: quote_ident!(\"decryptActionBoundArgs\").as_callee(),\n                             args: vec![\n-                                action_id.as_arg(),\n+                                action_id.clone().as_arg(),\n                                 quote_ident!(\"$$ACTION_CLOSURE_BOUND\").as_arg(),\n                             ],\n                             ..Default::default()\n@@ -695,7 +687,29 @@ impl<C: Comments> ServerActions<C> {\n                 .into(),\n             })));\n \n-        Box::new(register_action_expr)\n+        self.hoisted_extra_items\n+            .push(ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n+                span: DUMMY_SP,\n+                expr: Box::new(annotate_ident_as_server_reference(\n+                    action_ident.clone(),\n+                    action_id.clone(),\n+                    function.span,\n+                )),\n+            })));\n+\n+        if ids_from_closure.is_empty() {\n+            Box::new(action_ident.clone().into())\n+        } else {\n+            Box::new(bind_args_to_ident(\n+                action_ident.clone(),\n+                ids_from_closure\n+                    .iter()\n+                    .cloned()\n+                    .map(|id| Some(id.as_arg()))\n+                    .collect(),\n+                action_id.clone(),\n+            ))\n+        }\n     }\n \n     fn maybe_hoist_and_create_proxy_for_cache_arrow_expr(\n@@ -783,6 +797,16 @@ impl<C: Comments> ServerActions<C> {\n                 .into(),\n             })));\n \n+        self.hoisted_extra_items\n+            .push(ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n+                span: DUMMY_SP,\n+                expr: Box::new(annotate_ident_as_server_reference(\n+                    cache_ident.clone(),\n+                    reference_id.clone(),\n+                    arrow.span,\n+                )),\n+            })));\n+\n         if let Some(Ident { sym, .. }) = &self.arrow_or_fn_expr_ident {\n             assign_name_to_ident(&cache_ident, sym.as_str(), &mut self.hoisted_extra_items);\n         }\n@@ -793,41 +817,14 @@ impl<C: Comments> ServerActions<C> {\n             .map(|id| Some(id.as_arg()))\n             .collect();\n \n-        let register_action_expr = annotate_ident_as_server_reference(\n-            cache_ident.clone(),\n-            reference_id.clone(),\n-            arrow.span,\n-        );\n-\n-        // If there're any bound args from the closure, we need to hoist the\n-        // register action expression to the top-level, and return the bind\n-        // expression inline.\n-        if !bound_args.is_empty() {\n-            let ref_ident = private_ident!(self.gen_ref_ident());\n-\n-            let ref_decl = VarDecl {\n-                span: DUMMY_SP,\n-                kind: VarDeclKind::Var,\n-                decls: vec![VarDeclarator {\n-                    span: DUMMY_SP,\n-                    name: Pat::Ident(ref_ident.clone().into()),\n-                    init: Some(Box::new(register_action_expr.clone())),\n-                    definite: false,\n-                }],\n-                ..Default::default()\n-            };\n-\n-            // Hoist the register action expression to the top-level.\n-            self.extra_items\n-                .push(ModuleItem::Stmt(Stmt::Decl(Decl::Var(Box::new(ref_decl)))));\n-\n-            Box::new(bind_args_to_ref_expr(\n-                Expr::Ident(ref_ident.clone()),\n+        if bound_args.is_empty() {\n+            Box::new(cache_ident.clone().into())\n+        } else {\n+            Box::new(bind_args_to_ident(\n+                cache_ident.clone(),\n                 bound_args,\n                 reference_id.clone(),\n             ))\n-        } else {\n-            Box::new(register_action_expr)\n         }\n     }\n \n@@ -864,12 +861,6 @@ impl<C: Comments> ServerActions<C> {\n         self.export_actions\n             .push((cache_name.clone(), reference_id.clone()));\n \n-        let register_action_expr = annotate_ident_as_server_reference(\n-            cache_ident.clone(),\n-            reference_id.clone(),\n-            function.span,\n-        );\n-\n         function.body.visit_mut_with(&mut ClosureReplacer {\n             used_ids: &ids_from_closure,\n             private_ctxt: self.private_ctxt,\n@@ -904,6 +895,16 @@ impl<C: Comments> ServerActions<C> {\n                 .into(),\n             })));\n \n+        self.hoisted_extra_items\n+            .push(ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n+                span: DUMMY_SP,\n+                expr: Box::new(annotate_ident_as_server_reference(\n+                    cache_ident.clone(),\n+                    reference_id.clone(),\n+                    function.span,\n+                )),\n+            })));\n+\n         if let Some(Ident { sym, .. }) = fn_name {\n             assign_name_to_ident(&cache_ident, sym.as_str(), &mut self.hoisted_extra_items);\n         } else if self.in_default_export_decl {\n@@ -916,35 +917,14 @@ impl<C: Comments> ServerActions<C> {\n             .map(|id| Some(id.as_arg()))\n             .collect();\n \n-        // If there're any bound args from the closure, we need to hoist the\n-        // register action expression to the top-level, and return the bind\n-        // expression inline.\n-        if !bound_args.is_empty() {\n-            let ref_ident = private_ident!(self.gen_ref_ident());\n-\n-            let ref_decl = VarDecl {\n-                span: DUMMY_SP,\n-                kind: VarDeclKind::Var,\n-                decls: vec![VarDeclarator {\n-                    span: DUMMY_SP,\n-                    name: Pat::Ident(ref_ident.clone().into()),\n-                    init: Some(Box::new(register_action_expr.clone())),\n-                    definite: false,\n-                }],\n-                ..Default::default()\n-            };\n-\n-            // Hoist the register action expression to the top-level.\n-            self.extra_items\n-                .push(ModuleItem::Stmt(Stmt::Decl(Decl::Var(Box::new(ref_decl)))));\n-\n-            Box::new(bind_args_to_ref_expr(\n-                Expr::Ident(ref_ident.clone()),\n+        if bound_args.is_empty() {\n+            Box::new(cache_ident.clone().into())\n+        } else {\n+            Box::new(bind_args_to_ident(\n+                cache_ident.clone(),\n                 bound_args,\n                 reference_id.clone(),\n             ))\n-        } else {\n-            Box::new(register_action_expr)\n         }\n     }\n }\n@@ -2465,42 +2445,38 @@ fn annotate_ident_as_server_reference(ident: Ident, action_id: Atom, original_sp\n     })\n }\n \n-fn bind_args_to_ref_expr(expr: Expr, bound: Vec<Option<ExprOrSpread>>, action_id: Atom) -> Expr {\n-    if bound.is_empty() {\n-        expr\n-    } else {\n-        // expr.bind(null, [encryptActionBoundArgs(\"id\", arg1, arg2, ...)])\n-        Expr::Call(CallExpr {\n+fn bind_args_to_ident(ident: Ident, bound: Vec<Option<ExprOrSpread>>, action_id: Atom) -> Expr {\n+    // ident.bind(null, [encryptActionBoundArgs(\"id\", arg1, arg2, ...)])\n+    Expr::Call(CallExpr {\n+        span: DUMMY_SP,\n+        callee: Expr::Member(MemberExpr {\n             span: DUMMY_SP,\n-            callee: Expr::Member(MemberExpr {\n-                span: DUMMY_SP,\n-                obj: Box::new(expr),\n-                prop: MemberProp::Ident(quote_ident!(\"bind\")),\n-            })\n-            .as_callee(),\n-            args: vec![\n-                ExprOrSpread {\n-                    spread: None,\n-                    expr: Box::new(Expr::Lit(Lit::Null(Null { span: DUMMY_SP }))),\n-                },\n-                ExprOrSpread {\n-                    spread: None,\n-                    expr: Box::new(Expr::Call(CallExpr {\n-                        span: DUMMY_SP,\n-                        callee: quote_ident!(\"encryptActionBoundArgs\").as_callee(),\n-                        args: std::iter::once(ExprOrSpread {\n-                            spread: None,\n-                            expr: Box::new(action_id.into()),\n-                        })\n-                        .chain(bound.into_iter().flatten())\n-                        .collect(),\n-                        ..Default::default()\n-                    })),\n-                },\n-            ],\n-            ..Default::default()\n+            obj: Box::new(ident.into()),\n+            prop: MemberProp::Ident(quote_ident!(\"bind\")),\n         })\n-    }\n+        .as_callee(),\n+        args: vec![\n+            ExprOrSpread {\n+                spread: None,\n+                expr: Box::new(Expr::Lit(Lit::Null(Null { span: DUMMY_SP }))),\n+            },\n+            ExprOrSpread {\n+                spread: None,\n+                expr: Box::new(Expr::Call(CallExpr {\n+                    span: DUMMY_SP,\n+                    callee: quote_ident!(\"encryptActionBoundArgs\").as_callee(),\n+                    args: std::iter::once(ExprOrSpread {\n+                        spread: None,\n+                        expr: Box::new(action_id.into()),\n+                    })\n+                    .chain(bound.into_iter().flatten())\n+                    .collect(),\n+                    ..Default::default()\n+                })),\n+            },\n+        ],\n+        ..Default::default()\n+    })\n }\n \n // Detects if two strings are similar (but not the same)."
        },
        {
            "sha": "13f6ad1f1a4011e3b136e2f0256b1de833c983ab",
            "filename": "crates/next-custom-transforms/tests/errors/server-actions/server-graph/8/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fserver-actions%2Fserver-graph%2F8%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fserver-actions%2Fserver-graph%2F8%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fserver-actions%2Fserver-graph%2F8%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -3,7 +3,8 @@ import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc\n export const $$RSC_SERVER_ACTION_0 = async function foo() {\n     'use strict';\n };\n-const foo = registerServerReference($$RSC_SERVER_ACTION_0, \"006a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+registerServerReference($$RSC_SERVER_ACTION_0, \"006a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+const foo = $$RSC_SERVER_ACTION_0;\n const bar = async ()=>{\n     const x = 1;\n     // prettier-ignore"
        },
        {
            "sha": "6fd4ffd10ac180b8348dfd8a1a3c9fee684de7bc",
            "filename": "crates/next-custom-transforms/tests/fixture/next-font-with-directive/use-cache/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fnext-font-with-directive%2Fuse-cache%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fnext-font-with-directive%2Fuse-cache%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fnext-font-with-directive%2Fuse-cache%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -6,8 +6,9 @@ import inter from '@next/font/google/target.css?{\"path\":\"app/test.tsx\",\"import\":\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"c0dd5bb6fef67f5ab84327f5164ac2c3111a159337\", 0, async function Cached({ children }) {\n     return <div className={inter.className}>{children}</div>;\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"c0dd5bb6fef67f5ab84327f5164ac2c3111a159337\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"Cached\",\n     writable: false\n });\n-export var Cached = registerServerReference($$RSC_SERVER_CACHE_0, \"c0dd5bb6fef67f5ab84327f5164ac2c3111a159337\", null);\n+export var Cached = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "1432f4825f90bc6db754438856fc36eb9a249166",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/1/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F1%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F1%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F1%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,20 +7,22 @@ export const $$RSC_SERVER_ACTION_0 = async function deleteItem($$ACTION_CLOSURE_\n     await deleteFromDb($$ACTION_ARG_0);\n     await deleteFromDb($$ACTION_ARG_1);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function Item({ id1, id2 }) {\n-    var deleteItem = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, id2));\n+    var deleteItem = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, id2));\n     return <Button action={deleteItem}>Delete</Button>;\n }\n export const $$RSC_SERVER_ACTION_1 = async function action($$ACTION_CLOSURE_BOUND) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     console.log($$ACTION_ARG_0);\n     console.log($$ACTION_ARG_1);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export default function Home() {\n     const info = {\n         name: 'John',\n         test: 'test'\n     };\n-    const action = registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", info.name, info.test));\n+    const action = $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", info.name, info.test));\n     return null;\n }"
        },
        {
            "sha": "afe737df3456e0a84f5450e881247005c4261c04",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/16/output.js",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F16%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F16%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F16%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -9,17 +9,19 @@ export const $$RSC_SERVER_ACTION_0 = async function deleteItem($$ACTION_CLOSURE_\n     await deleteFromDb(v1);\n     await deleteFromDb($$ACTION_ARG_1);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function Item({ id1, id2 }) {\n     const v2 = id2;\n-    const deleteItem = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, v2));\n+    const deleteItem = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, v2));\n     return <Button action={deleteItem}>Delete</Button>;\n }\n export const $$RSC_SERVER_ACTION_1 = async function g($$ACTION_CLOSURE_BOUND, y, ...z) {\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"7f90b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     return $$ACTION_ARG_0 + y + z[0];\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"7f90b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n let f = (x)=>{\n-    var g = registerServerReference($$RSC_SERVER_ACTION_1, \"7f90b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"7f90b5db271335765a4b0eab01f044b381b5ebd5cd\", x));\n+    var g = $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"7f90b5db271335765a4b0eab01f044b381b5ebd5cd\", x));\n };\n export const $$RSC_SERVER_ACTION_2 = async function f($$ACTION_CLOSURE_BOUND, y, ...z) {\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"7f1c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", $$ACTION_CLOSURE_BOUND);\n@@ -29,6 +31,7 @@ export const $$RSC_SERVER_ACTION_2 = async function f($$ACTION_CLOSURE_BOUND, y,\n     // @ts-ignore: incompatible argument types\n     z[0];\n };\n+registerServerReference($$RSC_SERVER_ACTION_2, \"7f1c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n const g = (x)=>{\n-    f = registerServerReference($$RSC_SERVER_ACTION_2, \"7f1c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null).bind(null, encryptActionBoundArgs(\"7f1c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", x));\n+    f = $$RSC_SERVER_ACTION_2.bind(null, encryptActionBoundArgs(\"7f1c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", x));\n };"
        },
        {
            "sha": "2f097649c261f4b828fdef3e6243fbb8cf0f4083",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/18/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F18%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F18%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F18%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -9,19 +9,21 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     await deleteFromDb(v1);\n     await deleteFromDb($$ACTION_ARG_1);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export const $$RSC_SERVER_ACTION_1 = async function action($$ACTION_CLOSURE_BOUND) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     await deleteFromDb($$ACTION_ARG_0);\n     await deleteFromDb(v1);\n     await deleteFromDb($$ACTION_ARG_1);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export function Item({ id1, id2 }) {\n     const v2 = id2;\n     return <>\n-      <Button action={registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, v2))}>\n+      <Button action={$$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, v2))}>\n         Delete\n       </Button>\n-      <Button action={registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", id1, v2))}>\n+      <Button action={$$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", id1, v2))}>\n         Delete\n       </Button>\n     </>;"
        },
        {
            "sha": "790dab5a61566cf33d15831a46878ae146d9cc13",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/19/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F19%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F19%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F19%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -5,9 +5,10 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_CLOSURE_BOUND);\n     return $$ACTION_ARG_0 * value2;\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function Item({ value }) {\n     return <>\n-      <Button action={registerServerReference($$RSC_SERVER_ACTION_0, \"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", value))}>\n+      <Button action={$$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", value))}>\n         Multiple\n       </Button>\n     </>;"
        },
        {
            "sha": "2df4727280818a1af790a7a2ce89e169f436d9b2",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/2/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F2%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F2%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F2%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -5,10 +5,12 @@ import { Button } from 'components';\n export const $$RSC_SERVER_ACTION_0 = async function myAction(a, b, c) {\n     console.log('a');\n };\n-var myAction = registerServerReference($$RSC_SERVER_ACTION_0, \"706a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+registerServerReference($$RSC_SERVER_ACTION_0, \"706a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+var myAction = $$RSC_SERVER_ACTION_0;\n export default function Page() {\n     return <Button action={myAction}>Delete</Button>;\n }\n export const $$RSC_SERVER_ACTION_1 = async function() {};\n+registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n // TODO: should use `action` as function name?\n-export const action = validator(registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null));\n+export const action = validator($$RSC_SERVER_ACTION_1);"
        },
        {
            "sha": "9e9d48e65a27ce1037600db94f663d5797839d33",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/21/output.js",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F21%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F21%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F21%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,12 +7,15 @@ export const $$RSC_SERVER_ACTION_0 = async function($$ACTION_CLOSURE_BOUND, z) {\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_CLOSURE_BOUND);\n     return x + $$ACTION_ARG_0 + z;\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export default function Page() {\n     const y = 1;\n     return <Button // TODO: should use `action` as function name?\n-    action={validator(registerServerReference($$RSC_SERVER_ACTION_0, \"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", y)))}/>;\n+    action={validator($$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", y)))}/>;\n }\n export const $$RSC_SERVER_ACTION_1 = async function() {};\n-validator(registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null));\n+registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+validator($$RSC_SERVER_ACTION_1);\n export const $$RSC_SERVER_ACTION_2 = async function() {};\n-another(validator(registerServerReference($$RSC_SERVER_ACTION_2, \"001c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null)));\n+registerServerReference($$RSC_SERVER_ACTION_2, \"001c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n+another(validator($$RSC_SERVER_ACTION_2));"
        },
        {
            "sha": "7572fe19191a8bc58778205af02f568933ec3fa2",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/23/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F23%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F23%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F23%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,13 +4,15 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_CLOSURE_BOUND);\n     console.log(a, b, $$ACTION_ARG_0, c, d);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export const $$RSC_SERVER_ACTION_1 = async function action2($$ACTION_CLOSURE_BOUND, a, b, c, d) {\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"7c90b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     console.log(a, b, $$ACTION_ARG_0, c, d);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"7c90b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export default function Page({ foo, x, y }) {\n-    var action = registerServerReference($$RSC_SERVER_ACTION_0, \"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", x));\n+    var action = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", x));\n     action.bind(null, foo[0], foo[1], foo.x, foo[y]);\n-    const action2 = registerServerReference($$RSC_SERVER_ACTION_1, \"7c90b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"7c90b5db271335765a4b0eab01f044b381b5ebd5cd\", x));\n+    const action2 = $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"7c90b5db271335765a4b0eab01f044b381b5ebd5cd\", x));\n     action2.bind(null, foo[0], foo[1], foo.x, foo[y]);\n }"
        },
        {
            "sha": "69b16d7ed34481ae371f70e7e14ea37adf06289a",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/24/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F24%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F24%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F24%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,6 +4,7 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_CLOSURE_BOUND);\n     console.log(a, b, $$ACTION_ARG_0, d);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export default function Page({ foo, x, y }) {\n-    var action = registerServerReference($$RSC_SERVER_ACTION_0, \"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", foo));\n+    var action = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"7c6a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", foo));\n }"
        },
        {
            "sha": "b9fb1b6f15941943bb81e7539aaf1afc475fee63",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/25/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F25%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F25%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F25%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,13 +7,14 @@ export const $$RSC_SERVER_ACTION_0 = async function deleteItem($$ACTION_CLOSURE_\n     await deleteFromDb($$ACTION_ARG_0);\n     await deleteFromDb($$ACTION_ARG_1);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function Item({ id1, id2 }) {\n     id1++;\n     return (()=>{\n         id1++;\n         return <Button action={deleteItem}>Delete</Button>;\n     })();\n-    var deleteItem = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, id2));\n+    var deleteItem = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, id2));\n }\n export const // FIXME: invalid transformation of hoisted functions (https://github.com/vercel/next.js/issues/57392)\n // (remove output.js from `tsconfig.json#exclude` to see the error)\n@@ -22,6 +23,7 @@ $$RSC_SERVER_ACTION_1 = async function deleteItem($$ACTION_CLOSURE_BOUND) {\n     await deleteFromDb($$ACTION_ARG_0);\n     await deleteFromDb($$ACTION_ARG_1);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n // In this example, if Button immediately executes the action, different ids should\n // be passed.\n export function Item2({ id1, id2 }) {\n@@ -31,5 +33,5 @@ export function Item2({ id1, id2 }) {\n     id1++;\n     temp.push(<Button action={deleteItem}>Delete</Button>);\n     return temp;\n-    var deleteItem = registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", id1, id2));\n+    var deleteItem = $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", id1, id2));\n }"
        },
        {
            "sha": "22e34cd54bcb790042ae4215acca0e8cc99816ad",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/26/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F26%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F26%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F26%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,5 +4,6 @@ const noop = (action)=>action;\n export const $$RSC_SERVER_ACTION_0 = async function(data) {\n     console.log(data);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n // TODO: should use `log` as function name?\n-export const log = noop(registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null));\n+export const log = noop($$RSC_SERVER_ACTION_0);"
        },
        {
            "sha": "c45fafdd50528d5588ab4d94e3d207b9a37482cf",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/27/output.js",
            "status": "modified",
            "additions": 10,
            "deletions": 5,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F27%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F27%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F27%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -6,21 +6,26 @@ import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc\n export const $$RSC_SERVER_ACTION_0 = async function foo() {\n     console.log(1);\n };\n-var foo = registerServerReference($$RSC_SERVER_ACTION_0, \"006a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+registerServerReference($$RSC_SERVER_ACTION_0, \"006a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+var foo = $$RSC_SERVER_ACTION_0;\n export { foo };\n export const $$RSC_SERVER_ACTION_1 = async function bar() {\n     console.log(2);\n };\n-export var bar = registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+export var bar = $$RSC_SERVER_ACTION_1;\n export const $$RSC_SERVER_ACTION_2 = async function baz() {\n     console.log(3);\n };\n-export default registerServerReference($$RSC_SERVER_ACTION_2, \"001c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n+registerServerReference($$RSC_SERVER_ACTION_2, \"001c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n+export default $$RSC_SERVER_ACTION_2;\n export const $$RSC_SERVER_ACTION_3 = async function qux() {\n     console.log(4);\n };\n-export const qux = registerServerReference($$RSC_SERVER_ACTION_3, \"009ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n+registerServerReference($$RSC_SERVER_ACTION_3, \"009ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n+export const qux = $$RSC_SERVER_ACTION_3;\n export const $$RSC_SERVER_ACTION_4 = async function quuux() {\n     console.log(5);\n };\n-export const quux = registerServerReference($$RSC_SERVER_ACTION_4, \"00a9b2939c1f39073a6bed227fd20233064c8b7869\", null);\n+registerServerReference($$RSC_SERVER_ACTION_4, \"00a9b2939c1f39073a6bed227fd20233064c8b7869\", null);\n+export const quux = $$RSC_SERVER_ACTION_4;"
        },
        {
            "sha": "fc419fbf7d9cd0a147f8bd378a37910947052191",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/28/output.js",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F28%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F28%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F28%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,11 +7,13 @@ $$RSC_SERVER_ACTION_0 = async function action2($$ACTION_CLOSURE_BOUND, e) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2, $$ACTION_ARG_3] = await decryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_CLOSURE_BOUND);\n     console.log(a, $$ACTION_ARG_0, $$ACTION_ARG_1, e, $$ACTION_ARG_2, $$ACTION_ARG_3);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export const $$RSC_SERVER_ACTION_1 = async function action3($$ACTION_CLOSURE_BOUND, e) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2] = await decryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     $$ACTION_ARG_0(e);\n     console.log(a, $$ACTION_ARG_1, $$ACTION_ARG_2, e);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export const $$RSC_SERVER_ACTION_2 = async function action1($$ACTION_CLOSURE_BOUND, d) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2] = await decryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", $$ACTION_CLOSURE_BOUND);\n     let f;\n@@ -20,12 +22,13 @@ export const $$RSC_SERVER_ACTION_2 = async function action1($$ACTION_CLOSURE_BOU\n         window\n     });\n     console.log(a, $$ACTION_ARG_0, action2);\n-    var action2 = registerServerReference($$RSC_SERVER_ACTION_0, \"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_ARG_1, d, f, $$ACTION_ARG_2));\n+    var action2 = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_ARG_1, d, f, $$ACTION_ARG_2));\n     return [\n         action2,\n-        registerServerReference($$RSC_SERVER_ACTION_1, \"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", action2, $$ACTION_ARG_1, d))\n+        $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", action2, $$ACTION_ARG_1, d))\n     ];\n };\n+registerServerReference($$RSC_SERVER_ACTION_2, \"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n function Comp(b, c, ...g) {\n-    return registerServerReference($$RSC_SERVER_ACTION_2, \"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null).bind(null, encryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", b, c, g));\n+    return $$RSC_SERVER_ACTION_2.bind(null, encryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", b, c, g));\n }"
        },
        {
            "sha": "1b77b56e114ec299a6f7ae2d342fbffa0f9df101",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/30/output.js",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F30%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F30%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F30%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,11 +7,13 @@ $$RSC_SERVER_ACTION_0 = async function action2($$ACTION_CLOSURE_BOUND, e) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2, $$ACTION_ARG_3] = await decryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_CLOSURE_BOUND);\n     console.log(a, $$ACTION_ARG_0, $$ACTION_ARG_1, e, $$ACTION_ARG_2, $$ACTION_ARG_3);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export const $$RSC_SERVER_ACTION_1 = async function action3($$ACTION_CLOSURE_BOUND, e) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2] = await decryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     $$ACTION_ARG_0(e);\n     console.log(a, $$ACTION_ARG_1, $$ACTION_ARG_2, e);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export const $$RSC_SERVER_ACTION_2 = async function action1($$ACTION_CLOSURE_BOUND, d) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2] = await decryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", $$ACTION_CLOSURE_BOUND);\n     let f;\n@@ -20,14 +22,15 @@ export const $$RSC_SERVER_ACTION_2 = async function action1($$ACTION_CLOSURE_BOU\n         window\n     });\n     console.log(a, $$ACTION_ARG_0, action2);\n-    var action2 = registerServerReference($$RSC_SERVER_ACTION_0, \"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_ARG_1, d, f, $$ACTION_ARG_2));\n+    var action2 = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"606a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_ARG_1, d, f, $$ACTION_ARG_2));\n     return [\n         action2,\n-        registerServerReference($$RSC_SERVER_ACTION_1, \"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", action2, $$ACTION_ARG_1, d))\n+        $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", action2, $$ACTION_ARG_1, d))\n     ];\n };\n+registerServerReference($$RSC_SERVER_ACTION_2, \"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n export async function action0(b, c, ...g) {\n-    return registerServerReference($$RSC_SERVER_ACTION_2, \"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null).bind(null, encryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", b, c, g));\n+    return $$RSC_SERVER_ACTION_2.bind(null, encryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", b, c, g));\n }\n import { ensureServerEntryExports } from \"private-next-rsc-action-validate\";\n ensureServerEntryExports(["
        },
        {
            "sha": "03156e0ca76e139316611745d36b87c47cb3c45e",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/32/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F32%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F32%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F32%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -5,6 +5,7 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     console.log($$ACTION_ARG_0.at(1), $$ACTION_ARG_1, $$ACTION_ARG_1.current);\n     console.log($$ACTION_ARG_2.push.call($$ACTION_ARG_2, 5));\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function Component() {\n     const data = [\n         1,\n@@ -21,6 +22,6 @@ export function Component() {\n             current: 1\n         }\n     };\n-    var action = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", data, baz.value, foo));\n+    var action = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", data, baz.value, foo));\n     return <form action={action}/>;\n }"
        },
        {
            "sha": "3c6c43a7775b7a7b968a3a0bbe237a4c984b415b",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/33/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F33%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F33%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F33%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -5,11 +5,12 @@ const v = 'world';\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function fn() {\n     return 'hello, ' + v;\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"fn\",\n     writable: false\n });\n-var fn = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+var fn = $$RSC_SERVER_CACHE_0;\n export async function Component() {\n     const data = await fn();\n     return <div>{data}</div>;"
        },
        {
            "sha": "7d387cf83de751e04c61c24ddc974481fe03b4bb",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/34/output.js",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F34%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F34%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F34%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,39 +4,43 @@ import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function() {\n     return 'foo';\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"foo\",\n     writable: false\n });\n-const foo = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+const foo = $$RSC_SERVER_CACHE_0;\n export { bar };\n export var $$RSC_SERVER_CACHE_1 = $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function bar() {\n     return 'bar';\n });\n+registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n     value: \"bar\",\n     writable: false\n });\n-var bar = registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n+var bar = $$RSC_SERVER_CACHE_1;\n // Should not be wrapped in $$cache__.\n const qux = async function qux() {\n     return 'qux';\n };\n export var $$RSC_SERVER_CACHE_2 = $$cache__(\"default\", \"8069348c79fce073bae2f70f139565a2fda1c74c74\", 0, async function baz() {\n     return qux() + 'baz';\n });\n+registerServerReference($$RSC_SERVER_CACHE_2, \"8069348c79fce073bae2f70f139565a2fda1c74c74\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_2, \"name\", {\n     value: \"baz\",\n     writable: false\n });\n-const baz = registerServerReference($$RSC_SERVER_CACHE_2, \"8069348c79fce073bae2f70f139565a2fda1c74c74\", null);\n+const baz = $$RSC_SERVER_CACHE_2;\n export var $$RSC_SERVER_CACHE_3 = $$cache__(\"default\", \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", 0, async function() {\n     return 'quux';\n });\n+registerServerReference($$RSC_SERVER_CACHE_3, \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_3, \"name\", {\n     value: \"quux\",\n     writable: false\n });\n-const quux = registerServerReference($$RSC_SERVER_CACHE_3, \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", null);\n+const quux = $$RSC_SERVER_CACHE_3;\n export { foo, baz };\n export default quux;"
        },
        {
            "sha": "23c08a193de83bedd91f9ad3b38828cef5c3f541",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/35/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F35%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F35%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F35%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,8 +4,9 @@ import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function() {\n     return 'data';\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"my_fn\",\n     writable: false\n });\n-export const my_fn = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+export const my_fn = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "0640df39823e7b65c982adf21a383d0887109cdc",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/36/output.js",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F36%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F36%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F36%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,32 +4,36 @@ import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function foo() {\n     return 'data A';\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"foo\",\n     writable: false\n });\n-export var foo = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+export var foo = $$RSC_SERVER_CACHE_0;\n export var $$RSC_SERVER_CACHE_1 = $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function bar() {\n     return 'data B';\n });\n+registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n     value: \"bar\",\n     writable: false\n });\n-export var bar = registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n+export var bar = $$RSC_SERVER_CACHE_1;\n export var $$RSC_SERVER_CACHE_2 = $$cache__(\"default\", \"c069348c79fce073bae2f70f139565a2fda1c74c74\", 0, async function Cached({ children }) {\n     return children;\n });\n+registerServerReference($$RSC_SERVER_CACHE_2, \"c069348c79fce073bae2f70f139565a2fda1c74c74\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_2, \"name\", {\n     value: \"Cached\",\n     writable: false\n });\n-export default registerServerReference($$RSC_SERVER_CACHE_2, \"c069348c79fce073bae2f70f139565a2fda1c74c74\", null);\n+export default $$RSC_SERVER_CACHE_2;\n export var $$RSC_SERVER_CACHE_3 = $$cache__(\"default\", \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", 0, async function baz() {\n     return 'data C';\n });\n+registerServerReference($$RSC_SERVER_CACHE_3, \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_3, \"name\", {\n     value: \"baz\",\n     writable: false\n });\n-export const baz = registerServerReference($$RSC_SERVER_CACHE_3, \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", null);\n+export const baz = $$RSC_SERVER_CACHE_3;"
        },
        {
            "sha": "30e6223c88ba2bf7090726860a8b8ff8cf2a2a2f",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/37/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F37%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F37%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F37%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,11 +4,12 @@ import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function fn() {\n     return 'foo';\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"fn\",\n     writable: false\n });\n-var fn = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+var fn = $$RSC_SERVER_CACHE_0;\n async function Component() {\n     const data = await fn();\n     return <div>{data}</div>;"
        },
        {
            "sha": "e0de6fb1bda5ae5c116985d88bdf597697afa5c4",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/38/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F38%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F38%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F38%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,8 +4,9 @@ import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"x\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function foo() {\n     return 'data';\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"foo\",\n     writable: false\n });\n-export var foo = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+export var foo = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "3eb7a294011018a9ba69d5a544e643b98508b2a9",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/39/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F39%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F39%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F39%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,15 +7,15 @@ export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"c03128060c414d59f8552e47\n         foo: $$ACTION_ARG_1\n     };\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"fn\",\n     writable: false\n });\n async function Component({ foo }) {\n     const a = 123;\n-    var fn = $$RSC_SERVER_REF_1.bind(null, encryptActionBoundArgs(\"c03128060c414d59f8552e4788b846c0d2b7f74743\", a, foo));\n+    var fn = $$RSC_SERVER_CACHE_0.bind(null, encryptActionBoundArgs(\"c03128060c414d59f8552e4788b846c0d2b7f74743\", a, foo));\n     const data = await fn();\n     // @ts-expect-error: data is not a valid react child\n     return <div>{data}</div>;\n }\n-var $$RSC_SERVER_REF_1 = registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);"
        },
        {
            "sha": "ac98b3b46abe2a541bba66fba1baddc7096fd268",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/4/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F4%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F4%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F4%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -5,8 +5,9 @@ export async function b() {}\n export async function c() {}\n function d() {}\n export const $$RSC_SERVER_ACTION_0 = async function e() {};\n+registerServerReference($$RSC_SERVER_ACTION_0, \"006a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n function Foo() {\n-    var e = registerServerReference($$RSC_SERVER_ACTION_0, \"006a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+    var e = $$RSC_SERVER_ACTION_0;\n }\n import { ensureServerEntryExports } from \"private-next-rsc-action-validate\";\n ensureServerEntryExports(["
        },
        {
            "sha": "8f6dc9e32f95fd55e37dd00ba55793d35825093c",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/40/output.js",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F40%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F40%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F40%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -1,4 +1,4 @@\n-/* __next_internal_action_entry_do_not_use__ {\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\":\"$$RSC_SERVER_ACTION_2\",\"e03128060c414d59f8552e4788b846c0d2b7f74743\":\"$$RSC_SERVER_CACHE_0\"} */ import { registerServerReference } from \"private-next-rsc-server-reference\";\n+/* __next_internal_action_entry_do_not_use__ {\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\":\"$$RSC_SERVER_ACTION_1\",\"e03128060c414d59f8552e4788b846c0d2b7f74743\":\"$$RSC_SERVER_CACHE_0\"} */ import { registerServerReference } from \"private-next-rsc-server-reference\";\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { Form } from 'components';\n@@ -11,21 +11,22 @@ export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"e03128060c414d59f8552e47\n         }\n     ];\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"cache\",\n     writable: false\n });\n-export const $$RSC_SERVER_ACTION_2 = async function action($$ACTION_CLOSURE_BOUND, c) {\n-    var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", $$ACTION_CLOSURE_BOUND);\n+export const $$RSC_SERVER_ACTION_1 = async function action($$ACTION_CLOSURE_BOUND, c) {\n+    var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     const d = $$ACTION_ARG_0 + $$ACTION_ARG_1 + c;\n-    var cache = $$RSC_SERVER_REF_1.bind(null, encryptActionBoundArgs(\"e03128060c414d59f8552e4788b846c0d2b7f74743\", d, $$ACTION_ARG_0));\n+    var cache = $$RSC_SERVER_CACHE_0.bind(null, encryptActionBoundArgs(\"e03128060c414d59f8552e4788b846c0d2b7f74743\", d, $$ACTION_ARG_0));\n     return cache(d);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n async function Component({ a }) {\n     const b = 1;\n-    var action = registerServerReference($$RSC_SERVER_ACTION_2, \"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null).bind(null, encryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", a, b));\n+    var action = $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", a, b));\n     return <Form action={action}>\n       <button>Submit</button>\n     </Form>;\n }\n-var $$RSC_SERVER_REF_1 = registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);"
        },
        {
            "sha": "e52be8748e992b0b41bd066cc8eede58479f0a04",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/41/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F41%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F41%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F41%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -8,15 +8,17 @@ export const $$RSC_SERVER_ACTION_0 = async function fn($$ACTION_CLOSURE_BOUND) {\n         foo: $$ACTION_ARG_1\n     };\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export var $$RSC_SERVER_CACHE_1 = $$cache__(\"default\", \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function Component({ foo }) {\n     const a = 123;\n-    var fn = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", a, foo));\n+    var fn = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", a, foo));\n     const data = await fn();\n     // @ts-expect-error: data is not a valid react child\n     return <div>{data}</div>;\n });\n+registerServerReference($$RSC_SERVER_CACHE_1, \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n     value: \"Component\",\n     writable: false\n });\n-export var Component = registerServerReference($$RSC_SERVER_CACHE_1, \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n+export var Component = $$RSC_SERVER_CACHE_1;"
        },
        {
            "sha": "b22cae0e87eac2d938ef741cc3358ae622938050",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/42/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F42%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F42%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F42%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,15 +7,15 @@ export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"c03128060c414d59f8552e47\n         foo: $$ACTION_ARG_1\n     };\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"fn\",\n     writable: false\n });\n async function Component({ foo }) {\n     const a = 123;\n-    const fn = $$RSC_SERVER_REF_1.bind(null, encryptActionBoundArgs(\"c03128060c414d59f8552e4788b846c0d2b7f74743\", a, foo));\n+    const fn = $$RSC_SERVER_CACHE_0.bind(null, encryptActionBoundArgs(\"c03128060c414d59f8552e4788b846c0d2b7f74743\", a, foo));\n     const data = await fn();\n     // @ts-expect-error: data is not a valid react child\n     return <div>{data}</div>;\n }\n-var $$RSC_SERVER_REF_1 = registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);"
        },
        {
            "sha": "44e8130c1e01a1f8a4955780cfa51667fbb01b4a",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/43/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F43%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F43%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F43%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,16 +7,18 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_CLOSURE_BOUND);\n     console.log(secret, $$ACTION_ARG_0);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export var $$RSC_SERVER_CACHE_1 = $$cache__(\"default\", \"e0951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function getCachedRandom(x, children) {\n     return {\n         x,\n         y: Math.random(),\n-        z: <Button action={registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", x))}/>,\n+        z: <Button action={$$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", x))}/>,\n         r: children\n     };\n });\n+registerServerReference($$RSC_SERVER_CACHE_1, \"e0951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n     value: \"getCachedRandom\",\n     writable: false\n });\n-var getCachedRandom = registerServerReference($$RSC_SERVER_CACHE_1, \"e0951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n+var getCachedRandom = $$RSC_SERVER_CACHE_1;"
        },
        {
            "sha": "aabd797615d605a251543c08dc39aad345e27e4f",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/44/output.js",
            "status": "modified",
            "additions": 10,
            "deletions": 5,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F44%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F44%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F44%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,26 +4,31 @@ import { Form } from 'components';\n export const $$RSC_SERVER_ACTION_0 = async function foo() {\n     return 'declarator arrow function expression';\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"006a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export const $$RSC_SERVER_ACTION_1 = async function bar() {\n     return 'function declaration';\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export const $$RSC_SERVER_ACTION_2 = async function action() {\n     return 'arrow function expression';\n };\n+registerServerReference($$RSC_SERVER_ACTION_2, \"001c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n export const $$RSC_SERVER_ACTION_3 = async function action() {\n     return 'anonymous function expression';\n };\n+registerServerReference($$RSC_SERVER_ACTION_3, \"009ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n export const $$RSC_SERVER_ACTION_4 = async function baz() {\n     return 'named function expression';\n };\n+registerServerReference($$RSC_SERVER_ACTION_4, \"00a9b2939c1f39073a6bed227fd20233064c8b7869\", null);\n export default function Page() {\n-    const foo = registerServerReference($$RSC_SERVER_ACTION_0, \"006a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n-    var bar = registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+    const foo = $$RSC_SERVER_ACTION_0;\n+    var bar = $$RSC_SERVER_ACTION_1;\n     return <>\n       <Form action={foo}/>\n       <Form action={bar}/>\n-      <Form action={registerServerReference($$RSC_SERVER_ACTION_2, \"001c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null)}/>\n-      <Form action={registerServerReference($$RSC_SERVER_ACTION_3, \"009ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null)}/>\n-      <Form action={registerServerReference($$RSC_SERVER_ACTION_4, \"00a9b2939c1f39073a6bed227fd20233064c8b7869\", null)}/>\n+      <Form action={$$RSC_SERVER_ACTION_2}/>\n+      <Form action={$$RSC_SERVER_ACTION_3}/>\n+      <Form action={$$RSC_SERVER_ACTION_4}/>\n     </>;\n }"
        },
        {
            "sha": "cbb932e159d762b8ac733e35af9aa64ec81ef56e",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/45/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F45%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F45%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F45%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -10,8 +10,9 @@ function Foo() {\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function bar() {\n     return <Foo/>;\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"bar\",\n     writable: false\n });\n-export var bar = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+export var bar = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "a2cbfb91ff400acee8dfe970474ad49680268d9f",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/46/output.js",
            "status": "modified",
            "additions": 12,
            "deletions": 6,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F46%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F46%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F46%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -9,19 +9,21 @@ export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"e03128060c414d59f8552e47\n         b\n     ];\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"f1\",\n     writable: false\n });\n-var f1 = registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+var f1 = $$RSC_SERVER_CACHE_0;\n export const // Should be 0 110000 0, which is \"60\" in hex.\n $$RSC_SERVER_ACTION_1 = async function f2(a, b) {\n     return [\n         a,\n         b\n     ];\n };\n-var f2 = registerServerReference($$RSC_SERVER_ACTION_1, \"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+registerServerReference($$RSC_SERVER_ACTION_1, \"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+var f2 = $$RSC_SERVER_ACTION_1;\n export var // Should be 1 111111 1, which is \"ff\" in hex.\n $$RSC_SERVER_CACHE_2 = $$cache__(\"default\", \"ff69348c79fce073bae2f70f139565a2fda1c74c74\", 0, async function f3(a, b, ...rest) {\n     return [\n@@ -30,11 +32,12 @@ $$RSC_SERVER_CACHE_2 = $$cache__(\"default\", \"ff69348c79fce073bae2f70f139565a2fda\n         rest\n     ];\n });\n+registerServerReference($$RSC_SERVER_CACHE_2, \"ff69348c79fce073bae2f70f139565a2fda1c74c74\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_2, \"name\", {\n     value: \"f3\",\n     writable: false\n });\n-var f3 = registerServerReference($$RSC_SERVER_CACHE_2, \"ff69348c79fce073bae2f70f139565a2fda1c74c74\", null);\n+var f3 = $$RSC_SERVER_CACHE_2;\n export const // Should be 0 111110 0, which is \"7c\" in hex.\n $$RSC_SERVER_ACTION_3 = async function f4(a, b, c, d, e) {\n     return [\n@@ -45,7 +48,8 @@ $$RSC_SERVER_ACTION_3 = async function f4(a, b, c, d, e) {\n         e\n     ];\n };\n-var f4 = registerServerReference($$RSC_SERVER_ACTION_3, \"7c9ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n+registerServerReference($$RSC_SERVER_ACTION_3, \"7c9ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n+var f4 = $$RSC_SERVER_ACTION_3;\n export const // Should be 0 111111 0, which is \"7e\" in hex.\n $$RSC_SERVER_ACTION_4 = async function f5(a, b, c, d, e, f) {\n     return [\n@@ -57,7 +61,8 @@ $$RSC_SERVER_ACTION_4 = async function f5(a, b, c, d, e, f) {\n         f\n     ];\n };\n-var f5 = registerServerReference($$RSC_SERVER_ACTION_4, \"7ea9b2939c1f39073a6bed227fd20233064c8b7869\", null);\n+registerServerReference($$RSC_SERVER_ACTION_4, \"7ea9b2939c1f39073a6bed227fd20233064c8b7869\", null);\n+var f5 = $$RSC_SERVER_ACTION_4;\n export var // Should be 1 111111 1, which is \"ff\" in hex.\n $$RSC_SERVER_CACHE_5 = $$cache__(\"default\", \"ff471a5eb0be1c31686dd4ba938a80328b80b1615d\", 0, async function f6(a, b, c, d, e, f, g) {\n     return [\n@@ -70,8 +75,9 @@ $$RSC_SERVER_CACHE_5 = $$cache__(\"default\", \"ff471a5eb0be1c31686dd4ba938a80328b8\n         g\n     ];\n });\n+registerServerReference($$RSC_SERVER_CACHE_5, \"ff471a5eb0be1c31686dd4ba938a80328b80b1615d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_5, \"name\", {\n     value: \"f6\",\n     writable: false\n });\n-var f6 = registerServerReference($$RSC_SERVER_CACHE_5, \"ff471a5eb0be1c31686dd4ba938a80328b80b1615d\", null);\n+var f6 = $$RSC_SERVER_CACHE_5;"
        },
        {
            "sha": "22e663569ab716fddfc5f01e2f3c1e7777b85cad",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/47/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F47%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F47%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F47%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,7 +4,8 @@ import { redirect } from 'navigation';\n export const $$RSC_SERVER_ACTION_0 = async function action(formData) {\n     redirect('/header?name=' + formData.get('name') + '&hidden-info=' + formData.get('hidden-info'));\n };\n-var action = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+var action = $$RSC_SERVER_ACTION_0;\n export default function Form() {\n     return <form action={action}>\n       <input type=\"text\" name=\"hidden-info\" defaultValue=\"hi\" hidden/>"
        },
        {
            "sha": "1e7e81e2fba76fa5422e649a1223073df5919334",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/48/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F48%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F48%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F48%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -30,12 +30,13 @@ export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"e03128060c414d59f8552e47\n       {b}\n     </div>;\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"cache\",\n     writable: false\n });\n // Should be 1 110000 0, which is \"e0\" in hex.\n-export var cache = registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+export var cache = $$RSC_SERVER_CACHE_0;\n import { ensureServerEntryExports } from \"private-next-rsc-action-validate\";\n ensureServerEntryExports([\n     action,"
        },
        {
            "sha": "311af2319d637a6ed0d3c506c04aa4e7bdcdf99a",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/49/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F49%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F49%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F49%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -8,4 +8,5 @@ export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"f03128060c414d59f8552e47\n       {c}\n     </div>;\n });\n-export default registerServerReference($$RSC_SERVER_CACHE_0, \"f03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+registerServerReference($$RSC_SERVER_CACHE_0, \"f03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+export default $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "44acd5e91e0c62604689c5dd2df9fa3c3f08311f",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/5/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F5%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F5%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F5%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -13,8 +13,9 @@ export const $$RSC_SERVER_ACTION_0 = async function deleteItem($$ACTION_CLOSURE_\n     });\n     await deleteFromDb($$ACTION_ARG_3);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function Item({ id1, id2, id3, id4 }) {\n     const v2 = id2;\n-    var deleteItem = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, v2, id3, id4.x));\n+    var deleteItem = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", id1, v2, id3, id4.x));\n     return <Button action={deleteItem}>Delete</Button>;\n }"
        },
        {
            "sha": "9b6edcdc48fc76caeb15f9c19f27700421d670ed",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/50/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F50%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F50%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F50%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -8,8 +8,9 @@ export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"f03128060c414d59f8552e47\n       {c}\n     </div>;\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"f03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"default\",\n     writable: false\n });\n-export default registerServerReference($$RSC_SERVER_CACHE_0, \"f03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+export default $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "6553c6b963c3063f88447c431ca353bcb2596e86",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/51/output.js",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F51%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F51%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F51%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,7 +7,8 @@ export const $$RSC_SERVER_ACTION_1 = async function $$RSC_SERVER_ACTION_0(a, b,\n       {c}\n     </div>;\n };\n-export default registerServerReference($$RSC_SERVER_ACTION_1, \"7090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+registerServerReference($$RSC_SERVER_ACTION_1, \"7090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+export default $$RSC_SERVER_ACTION_1;\n Object[\"defineProperty\"]($$RSC_SERVER_ACTION_0, \"name\", {\n     value: \"default\",\n     writable: false\n@@ -18,11 +19,13 @@ export const $$RSC_SERVER_ACTION_2 = async function foo(a, b) {\n       {b}\n     </div>;\n };\n-export var foo = registerServerReference($$RSC_SERVER_ACTION_2, \"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n+registerServerReference($$RSC_SERVER_ACTION_2, \"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n+export var foo = $$RSC_SERVER_ACTION_2;\n export const $$RSC_SERVER_ACTION_3 = async function bar(a, b) {\n     return <div>\n       {a}\n       {b}\n     </div>;\n };\n-export const bar = registerServerReference($$RSC_SERVER_ACTION_3, \"609ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n+registerServerReference($$RSC_SERVER_ACTION_3, \"609ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n+export const bar = $$RSC_SERVER_ACTION_3;"
        },
        {
            "sha": "f56368a4d010f14ef3af12926466dadb259926e1",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/52/output.js",
            "status": "modified",
            "additions": 12,
            "deletions": 10,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F52%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F52%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F52%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -1,40 +1,42 @@\n-/* __next_internal_action_entry_do_not_use__ {\"409651a98a9dccd7ffbe72ff5cf0f38546ca1252ab\":\"$$RSC_SERVER_ACTION_5\",\"60a9b2939c1f39073a6bed227fd20233064c8b7869\":\"$$RSC_SERVER_ACTION_4\",\"c069348c79fce073bae2f70f139565a2fda1c74c74\":\"$$RSC_SERVER_CACHE_2\",\"e03128060c414d59f8552e4788b846c0d2b7f74743\":\"$$RSC_SERVER_CACHE_0\"} */ import { registerServerReference } from \"private-next-rsc-server-reference\";\n+/* __next_internal_action_entry_do_not_use__ {\"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\":\"$$RSC_SERVER_ACTION_3\",\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\":\"$$RSC_SERVER_ACTION_2\",\"c0951c375b4a6a6e89d67b743ec5808127cfde405d\":\"$$RSC_SERVER_CACHE_1\",\"e03128060c414d59f8552e4788b846c0d2b7f74743\":\"$$RSC_SERVER_CACHE_0\"} */ import { registerServerReference } from \"private-next-rsc-server-reference\";\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { Client } from 'components';\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 2, async function([$$ACTION_ARG_0, $$ACTION_ARG_1], c) {\n     return $$ACTION_ARG_0 + $$ACTION_ARG_1 + c;\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"fn1\",\n     writable: false\n });\n-export var $$RSC_SERVER_CACHE_2 = $$cache__(\"default\", \"c069348c79fce073bae2f70f139565a2fda1c74c74\", 2, async function // Should be 1 100000 0, which is \"c0\" in hex (counts as one param,\n+export var $$RSC_SERVER_CACHE_1 = $$cache__(\"default\", \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", 2, async function // Should be 1 100000 0, which is \"c0\" in hex (counts as one param,\n // because of the encrypted bound args param)\n fn2([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n     return $$ACTION_ARG_0 + $$ACTION_ARG_1;\n });\n-Object[\"defineProperty\"]($$RSC_SERVER_CACHE_2, \"name\", {\n+registerServerReference($$RSC_SERVER_CACHE_1, \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n+Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n     value: \"fn2\",\n     writable: false\n });\n-export const $$RSC_SERVER_ACTION_4 = async function // Should be 0 110000 0, which is \"60\" in hex (counts as two params,\n+export const $$RSC_SERVER_ACTION_2 = async function // Should be 0 110000 0, which is \"60\" in hex (counts as two params,\n // because of the encrypted bound args param)\n fn3($$ACTION_CLOSURE_BOUND, c) {\n-    var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"60a9b2939c1f39073a6bed227fd20233064c8b7869\", $$ACTION_CLOSURE_BOUND);\n+    var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", $$ACTION_CLOSURE_BOUND);\n     return $$ACTION_ARG_0 + $$ACTION_ARG_1 + c;\n };\n-export const $$RSC_SERVER_ACTION_5 = async function // Should be 0 100000 0, which is \"40\" in hex (counts as one param,\n+registerServerReference($$RSC_SERVER_ACTION_2, \"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n+export const $$RSC_SERVER_ACTION_3 = async function // Should be 0 100000 0, which is \"40\" in hex (counts as one param,\n // because of the encrypted bound args param)\n fn4($$ACTION_CLOSURE_BOUND) {\n-    var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"409651a98a9dccd7ffbe72ff5cf0f38546ca1252ab\", $$ACTION_CLOSURE_BOUND);\n+    var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", $$ACTION_CLOSURE_BOUND);\n     return $$ACTION_ARG_0 + $$ACTION_ARG_1;\n };\n+registerServerReference($$RSC_SERVER_ACTION_3, \"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n export async function Component(a) {\n     const b = 1;\n     return <Client // Should be 1 110000 0, which is \"e0\" in hex (counts as two params,\n     // because of the encrypted bound args param)\n-    fn1={$$RSC_SERVER_REF_1.bind(null, encryptActionBoundArgs(\"e03128060c414d59f8552e4788b846c0d2b7f74743\", a, b))} fn2={$$RSC_SERVER_REF_3.bind(null, encryptActionBoundArgs(\"c069348c79fce073bae2f70f139565a2fda1c74c74\", a, b))} fn3={registerServerReference($$RSC_SERVER_ACTION_4, \"60a9b2939c1f39073a6bed227fd20233064c8b7869\", null).bind(null, encryptActionBoundArgs(\"60a9b2939c1f39073a6bed227fd20233064c8b7869\", a, b))} fn4={registerServerReference($$RSC_SERVER_ACTION_5, \"409651a98a9dccd7ffbe72ff5cf0f38546ca1252ab\", null).bind(null, encryptActionBoundArgs(\"409651a98a9dccd7ffbe72ff5cf0f38546ca1252ab\", a, b))}/>;\n+    fn1={$$RSC_SERVER_CACHE_0.bind(null, encryptActionBoundArgs(\"e03128060c414d59f8552e4788b846c0d2b7f74743\", a, b))} fn2={$$RSC_SERVER_CACHE_1.bind(null, encryptActionBoundArgs(\"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", a, b))} fn3={$$RSC_SERVER_ACTION_2.bind(null, encryptActionBoundArgs(\"601c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", a, b))} fn4={$$RSC_SERVER_ACTION_3.bind(null, encryptActionBoundArgs(\"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", a, b))}/>;\n }\n-var $$RSC_SERVER_REF_1 = registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n-var $$RSC_SERVER_REF_3 = registerServerReference($$RSC_SERVER_CACHE_2, \"c069348c79fce073bae2f70f139565a2fda1c74c74\", null);"
        },
        {
            "sha": "762ae07c98091def824d5e1793179ef598cefd3d",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/53/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F53%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F53%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F53%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -2,12 +2,14 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function foo() {});\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"foo\",\n     writable: false\n });\n export const $$RSC_SERVER_ACTION_1 = async function bar() {};\n+registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export const obj = {\n-    foo: registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null),\n-    bar: registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null)\n+    foo: $$RSC_SERVER_CACHE_0,\n+    bar: $$RSC_SERVER_ACTION_1\n };"
        },
        {
            "sha": "aa133634af12754636148a6b9bfded92dff76e44",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/54/output.js",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F54%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F54%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F54%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -1,22 +1,23 @@\n-/* __next_internal_action_entry_do_not_use__ {\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\":\"$$RSC_SERVER_ACTION_2\",\"c03128060c414d59f8552e4788b846c0d2b7f74743\":\"$$RSC_SERVER_CACHE_0\"} */ import { registerServerReference } from \"private-next-rsc-server-reference\";\n+/* __next_internal_action_entry_do_not_use__ {\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\":\"$$RSC_SERVER_ACTION_1\",\"c03128060c414d59f8552e4788b846c0d2b7f74743\":\"$$RSC_SERVER_CACHE_0\"} */ import { registerServerReference } from \"private-next-rsc-server-reference\";\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 2, async function foo([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n     return $$ACTION_ARG_0 * $$ACTION_ARG_1;\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"foo\",\n     writable: false\n });\n-export const $$RSC_SERVER_ACTION_2 = async function bar($$ACTION_CLOSURE_BOUND) {\n-    var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", $$ACTION_CLOSURE_BOUND);\n+export const $$RSC_SERVER_ACTION_1 = async function bar($$ACTION_CLOSURE_BOUND) {\n+    var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     console.log($$ACTION_ARG_0);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n function createObj(n) {\n     const m = n + 1;\n     return {\n-        foo: $$RSC_SERVER_REF_1.bind(null, encryptActionBoundArgs(\"c03128060c414d59f8552e4788b846c0d2b7f74743\", n, m)),\n-        bar: registerServerReference($$RSC_SERVER_ACTION_2, \"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null).bind(null, encryptActionBoundArgs(\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", m))\n+        foo: $$RSC_SERVER_CACHE_0.bind(null, encryptActionBoundArgs(\"c03128060c414d59f8552e4788b846c0d2b7f74743\", n, m)),\n+        bar: $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", m))\n     };\n }\n-var $$RSC_SERVER_REF_1 = registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);"
        },
        {
            "sha": "107d3770ea1cea4dbf6ef3efa5cf60f19d4ac047",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/55/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F55%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F55%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F55%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,12 +4,13 @@ import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function fetch1() {\n     return fetch('https://example.com').then((res)=>res.json());\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"fetch\",\n     writable: false\n });\n export const api = {\n     product: {\n-        fetch: registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null)\n+        fetch: $$RSC_SERVER_CACHE_0\n     }\n };"
        },
        {
            "sha": "b8e0d92c673a27719714ca2bdf083e1f47797084",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/57/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F57%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F57%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F57%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,14 +4,16 @@ import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function foo() {\n     return fetch('https://example.com').then((res)=>res.json());\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"foo\",\n     writable: false\n });\n export const $$RSC_SERVER_ACTION_1 = async function bar() {\n     console.log(42);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export class MyClass {\n-    static foo = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n-    static bar = registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n+    static foo = $$RSC_SERVER_CACHE_0;\n+    static bar = $$RSC_SERVER_ACTION_1;\n }"
        },
        {
            "sha": "972e6edc908a02a5f9f67eaadd5cf8ba01c1d469",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/58/output.js",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F58%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F58%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F58%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -1,23 +1,24 @@\n-/* __next_internal_action_entry_do_not_use__ {\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\":\"$$RSC_SERVER_ACTION_2\",\"c03128060c414d59f8552e4788b846c0d2b7f74743\":\"$$RSC_SERVER_CACHE_0\"} */ import { registerServerReference } from \"private-next-rsc-server-reference\";\n+/* __next_internal_action_entry_do_not_use__ {\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\":\"$$RSC_SERVER_ACTION_1\",\"c03128060c414d59f8552e4788b846c0d2b7f74743\":\"$$RSC_SERVER_CACHE_0\"} */ import { registerServerReference } from \"private-next-rsc-server-reference\";\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 1, async function([$$ACTION_ARG_0]) {\n     return $$ACTION_ARG_0();\n });\n+registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n function createCachedFn(start) {\n     function fn() {\n         return start + Math.random();\n     }\n-    return $$RSC_SERVER_REF_1.bind(null, encryptActionBoundArgs(\"c03128060c414d59f8552e4788b846c0d2b7f74743\", fn));\n+    return $$RSC_SERVER_CACHE_0.bind(null, encryptActionBoundArgs(\"c03128060c414d59f8552e4788b846c0d2b7f74743\", fn));\n }\n-var $$RSC_SERVER_REF_1 = registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n-export const $$RSC_SERVER_ACTION_2 = async function($$ACTION_CLOSURE_BOUND) {\n-    var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", $$ACTION_CLOSURE_BOUND);\n+export const $$RSC_SERVER_ACTION_1 = async function($$ACTION_CLOSURE_BOUND) {\n+    var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     console.log($$ACTION_ARG_0());\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n function createServerAction(start) {\n     function fn() {\n         return start + Math.random();\n     }\n-    return registerServerReference($$RSC_SERVER_ACTION_2, \"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null).bind(null, encryptActionBoundArgs(\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", fn));\n+    return $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", fn));\n }"
        },
        {
            "sha": "d288b240ba654e5da4e0cd7ba1c8c0a7506e83bd",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/6/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F6%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F6%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F6%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -25,13 +25,14 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     g19, // @ts-expect-error: deliberately undefined variable\n     g20, globalThis);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function y(p, [p1, { p2 }], ...p3) {\n     /** @type {any} */ const f2 = 1;\n     const f11 = 1;\n     const f19 = 1;\n     if (true) {\n         const f8 = 1;\n     }\n-    var action = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", f2, f11, p, p1, p2, p3));\n+    var action = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", f2, f11, p, p1, p2, p3));\n     return <Button action={action}>Delete</Button>;\n }"
        },
        {
            "sha": "32cc70a4fc2fff15eb75faa0dd05f2ee0482f886",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/60/output.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F60%2Foutput.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F60%2Foutput.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F60%2Foutput.ts?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -12,8 +12,9 @@ export enum E {\n export default interface D {\n }\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function Page() {});\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"Page\",\n     writable: false\n });\n-export var Page = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+export var Page = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "c5fc27a9b4e7e69d45cd5fc626f31c4684e2b0af",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/61/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F61%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F61%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F61%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -4,8 +4,9 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", $$ACTION_CLOSURE_BOUND);\n     console.log($$ACTION_ARG_0.find((x)=>x === $$ACTION_ARG_1));\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function ComponentA({ list, y }) {\n-    return <form action={registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", list, y))}>\n+    return <form action={$$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", list, y))}>\n       <button>submit</button>\n     </form>;\n }\n@@ -15,8 +16,9 @@ export const $$RSC_SERVER_ACTION_1 = async function action($$ACTION_CLOSURE_BOUN\n         return x === $$ACTION_ARG_1;\n     }));\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export function ComponentB({ list, y }) {\n-    return <form action={registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", list, y))}>\n+    return <form action={$$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", list, y))}>\n       <button>submit</button>\n     </form>;\n }"
        },
        {
            "sha": "6225342e6156801ededf52016ffffbae3cf298cc",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/7/output.js",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F7%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F7%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F7%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -7,34 +7,38 @@ export const $$RSC_SERVER_ACTION_0 = async function deleteItem1($$ACTION_CLOSURE\n     await deleteFromDb($$ACTION_ARG_0.id, $$ACTION_ARG_0?.foo, $$ACTION_ARG_0.bar.baz, $$ACTION_ARG_0[// @ts-expect-error: deliberate useless comma\n     $$ACTION_ARG_1, $$ACTION_ARG_2]);\n };\n+registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n export function Item1(product, foo, bar) {\n-    const a = registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null).bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", product, foo, bar));\n+    const a = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", product, foo, bar));\n     return <Button action={a}>Delete</Button>;\n }\n export const $$RSC_SERVER_ACTION_1 = async function deleteItem2($$ACTION_CLOSURE_BOUND) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2] = await decryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);\n     await deleteFromDb($$ACTION_ARG_0.id, $$ACTION_ARG_0?.foo, $$ACTION_ARG_0.bar.baz, $$ACTION_ARG_0[// @ts-expect-error: deliberate useless comma\n     $$ACTION_ARG_1, $$ACTION_ARG_2]);\n };\n+registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export function Item2(product, foo, bar) {\n-    var deleteItem2 = registerServerReference($$RSC_SERVER_ACTION_1, \"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", null).bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", product, foo, bar));\n+    var deleteItem2 = $$RSC_SERVER_ACTION_1.bind(null, encryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", product, foo, bar));\n     return <Button action={deleteItem2}>Delete</Button>;\n }\n export const $$RSC_SERVER_ACTION_2 = async function deleteItem3($$ACTION_CLOSURE_BOUND) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2] = await decryptActionBoundArgs(\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", $$ACTION_CLOSURE_BOUND);\n     await deleteFromDb($$ACTION_ARG_0.id, $$ACTION_ARG_0?.foo, $$ACTION_ARG_0.bar.baz, $$ACTION_ARG_0[// @ts-expect-error: deliberate useless comma\n     $$ACTION_ARG_1, $$ACTION_ARG_2]);\n };\n+registerServerReference($$RSC_SERVER_ACTION_2, \"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null);\n export function Item3(product, foo, bar) {\n-    const deleteItem3 = registerServerReference($$RSC_SERVER_ACTION_2, \"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", null).bind(null, encryptActionBoundArgs(\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", product, foo, bar));\n+    const deleteItem3 = $$RSC_SERVER_ACTION_2.bind(null, encryptActionBoundArgs(\"401c36b06e398c97abe5d5d7ae8c672bfddf4e1b91\", product, foo, bar));\n     return <Button action={deleteItem3}>Delete</Button>;\n }\n export const $$RSC_SERVER_ACTION_3 = async function deleteItem4($$ACTION_CLOSURE_BOUND) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1, $$ACTION_ARG_2] = await decryptActionBoundArgs(\"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", $$ACTION_CLOSURE_BOUND);\n     await deleteFromDb($$ACTION_ARG_0.id, $$ACTION_ARG_0?.foo, $$ACTION_ARG_0.bar.baz, $$ACTION_ARG_0[// @ts-expect-error: deliberate useless comma\n     $$ACTION_ARG_1, $$ACTION_ARG_2]);\n };\n+registerServerReference($$RSC_SERVER_ACTION_3, \"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null);\n export function Item4(product, foo, bar) {\n-    const deleteItem4 = registerServerReference($$RSC_SERVER_ACTION_3, \"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", null).bind(null, encryptActionBoundArgs(\"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", product, foo, bar));\n+    const deleteItem4 = $$RSC_SERVER_ACTION_3.bind(null, encryptActionBoundArgs(\"409ed0cc47abc4e1c64320cf42b74ae60b58c40f00\", product, foo, bar));\n     return <Button action={deleteItem4}>Delete</Button>;\n }"
        },
        {
            "sha": "e85774dcd15311df39d9eefe19e1eb65b8163d34",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/8/output.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F8%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F8%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F8%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -6,7 +6,8 @@ export const $$RSC_SERVER_ACTION_0 = async function myAction(a, b, c) {\n     'use strict';\n     console.log('a');\n };\n-var myAction = registerServerReference($$RSC_SERVER_ACTION_0, \"706a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+registerServerReference($$RSC_SERVER_ACTION_0, \"706a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+var myAction = $$RSC_SERVER_ACTION_0;\n export default function Page() {\n     return <Button action={myAction}>Delete</Button>;\n }"
        },
        {
            "sha": "c12c9472a9d1dd1edf529aca7362f1826eb2fc5b",
            "filename": "crates/next-custom-transforms/tests/fixture/source-maps/server-graph/use-cache/1/output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -2,16 +2,18 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n export var $$RSC_SERVER_CACHE_0 = $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function() {});\n+registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n     value: \"foo\",\n     writable: false\n });\n-const foo = registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n+const foo = $$RSC_SERVER_CACHE_0;\n export var $$RSC_SERVER_CACHE_1 = $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function bar() {\n     return foo();\n });\n+registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n     value: \"bar\",\n     writable: false\n });\n-export var bar = registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n+export var bar = $$RSC_SERVER_CACHE_1;"
        },
        {
            "sha": "9c3bbcec03d87335e8ddd7931172492535a1ad7a",
            "filename": "crates/next-custom-transforms/tests/fixture/source-maps/server-graph/use-cache/1/output.map",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.map",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.map?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -1 +1 @@\n-{\"version\":3,\"sources\":[\"input.js\"],\"sourcesContent\":[\"'use cache'\\n\\nconst foo = async () => {\\n  'use cache'\\n}\\n\\nexport async function bar() {\\n  return foo()\\n}\\n\"],\"names\":[],\"mappings\":\";;;WAEY,+GAEZ;;;;;AAFA,MAAM,MAAM;WAIL,6FAAA,eAAe;IACpB,OAAO;AACT;;;;;AAFA,WAAsB,MAAf\"}\n+{\"version\":3,\"sources\":[\"input.js\"],\"sourcesContent\":[\"'use cache'\\n\\nconst foo = async () => {\\n  'use cache'\\n}\\n\\nexport async function bar() {\\n  return foo()\\n}\\n\"],\"names\":[],\"mappings\":\";;;WAEY,+GAEZ;AAFY;;;;;AAAZ,MAAM;WAIC,6FAAA,eAAe;IACpB,OAAO;AACT;;;;;;AAFA,WAAsB\"}"
        },
        {
            "sha": "c684c430e068a8e2177302350ad6b2414e277d5f",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/app/layout.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Flayout.tsx?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -0,0 +1,20 @@\n+import Link from 'next/link'\n+import { ReactNode } from 'react'\n+\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <nav>\n+          <p>\n+            <Link href=\"/server-action\">Server Action</Link>\n+          </p>\n+          <p>\n+            <Link href=\"/nested-cache\">Nested Cache</Link>\n+          </p>\n+        </nav>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "12ea4522925a3c2ae3e86b517eecb60d60e542f9",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/app/nested-cache/form.tsx",
            "status": "added",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fnested-cache%2Fform.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fnested-cache%2Fform.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fnested-cache%2Fform.tsx?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -0,0 +1,29 @@\n+'use client'\n+\n+import { useActionState } from 'react'\n+\n+export function Form({\n+  getDate,\n+  getRandom,\n+}: {\n+  getDate: () => Promise<string>\n+  getRandom: () => Promise<number>\n+}) {\n+  const [date, formAction, isDatePending] = useActionState(getDate, null)\n+\n+  const [random, buttonAction, isRandomPending] = useActionState(\n+    getRandom,\n+    null\n+  )\n+\n+  return (\n+    <form action={formAction}>\n+      <button id=\"submit-button-date\">Get Date</button>{' '}\n+      <button id=\"submit-button-random\" formAction={buttonAction}>\n+        Get Random\n+      </button>\n+      <p id=\"date\">{isDatePending ? 'loading...' : date}</p>\n+      <p id=\"random\">{isRandomPending ? 'loading...' : random}</p>\n+    </form>\n+  )\n+}"
        },
        {
            "sha": "5846cb99a21dcc7872cb0b822ec49f6f46b60d7a",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/app/nested-cache/page.tsx",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fnested-cache%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fnested-cache%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fnested-cache%2Fpage.tsx?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -0,0 +1,36 @@\n+import { connection } from 'next/server'\n+import { Suspense } from 'react'\n+import { Form } from './form'\n+\n+export default function Page() {\n+  return (\n+    <div>\n+      <Suspense fallback={<h1>Loading...</h1>}>\n+        <Dynamic />\n+      </Suspense>\n+      <CachedForm />\n+    </div>\n+  )\n+}\n+\n+async function CachedForm() {\n+  'use cache'\n+\n+  return (\n+    <Form\n+      getDate={async () => {\n+        'use cache'\n+        return new Date().toISOString()\n+      }}\n+      getRandom={async function getRandom() {\n+        'use cache'\n+        return Math.random()\n+      }}\n+    />\n+  )\n+}\n+\n+const Dynamic = async () => {\n+  await connection()\n+  return <h1>Dynamic</h1>\n+}"
        },
        {
            "sha": "c17431379f962fe20c05804b55df0aadc97b97d5",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fpage.tsx?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return null\n+}"
        },
        {
            "sha": "ff270a9f83eca7547cfda4aea1a26a323d4d51d6",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/app/server-action/form.tsx",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fserver-action%2Fform.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fserver-action%2Fform.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fserver-action%2Fform.tsx?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -0,0 +1,25 @@\n+'use client'\n+\n+import { useActionState } from 'react'\n+\n+export function Form({\n+  sayHi,\n+  sayHello,\n+}: {\n+  sayHi: () => Promise<string>\n+  sayHello: () => Promise<string>\n+}) {\n+  const [hi, hiAction, isHiPending] = useActionState(sayHi, null)\n+  const [hello, helloAction, isHelloPending] = useActionState(sayHello, null)\n+\n+  return (\n+    <form action={hiAction}>\n+      <button id=\"submit-button-hi\">Say Hi</button>{' '}\n+      <button id=\"submit-button-hello\" formAction={helloAction}>\n+        Say Hello\n+      </button>\n+      <p id=\"hi\">{isHiPending ? 'loading...' : hi}</p>\n+      <p id=\"hello\">{isHelloPending ? 'loading...' : hello}</p>\n+    </form>\n+  )\n+}"
        },
        {
            "sha": "5ab4d75a59397342e10a2c60e38d87b438970ee4",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/app/server-action/page.tsx",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fserver-action%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fserver-action%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fapp%2Fserver-action%2Fpage.tsx?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -0,0 +1,36 @@\n+import { connection } from 'next/server'\n+import { Suspense } from 'react'\n+import { Form } from './form'\n+\n+export default function Page() {\n+  return (\n+    <div>\n+      <Suspense fallback={<h1>Loading...</h1>}>\n+        <Dynamic />\n+      </Suspense>\n+      <CachedForm subject=\"World\" />\n+    </div>\n+  )\n+}\n+\n+async function CachedForm({ subject }: { subject: string }) {\n+  'use cache'\n+\n+  return (\n+    <Form\n+      sayHi={async function hi() {\n+        'use server'\n+        return `Hi, ${subject}!`\n+      }}\n+      sayHello={async () => {\n+        'use server'\n+        return `Hello, ${subject}!`\n+      }}\n+    />\n+  )\n+}\n+\n+const Dynamic = async () => {\n+  await connection()\n+  return <h1>Dynamic</h1>\n+}"
        },
        {
            "sha": "bea0706290af6bfcb4d7dfbd29c8f6acfbc78477",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/next.config.js",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fnext.config.js?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -0,0 +1,11 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+const nextConfig = {\n+  experimental: {\n+    ppr: true,\n+    useCache: true,\n+  },\n+}\n+\n+module.exports = nextConfig"
        },
        {
            "sha": "b2c84924a828d4ba5f0fb1c6181bb08b11b092c1",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/use-cache-with-server-function-props.test.ts",
            "status": "added",
            "additions": 39,
            "deletions": 0,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fuse-cache-with-server-function-props.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fuse-cache-with-server-function-props.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fuse-cache-with-server-function-props.test.ts?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -0,0 +1,39 @@\n+import { nextTestSetup } from 'e2e-utils'\n+import { retry } from 'next-test-utils'\n+\n+const isoDateRegExp = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/\n+const randomRegExp = /^\\d+\\.\\d+$/\n+\n+describe('use-cache-with-server-function-props', () => {\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should be able to use inline server actions as props', async () => {\n+    const browser = await next.browser('/server-action')\n+\n+    await browser.elementById('submit-button-hi').click()\n+    await retry(async () => {\n+      expect(await browser.elementById('hi').text()).toMatch('Hi, World!')\n+    })\n+\n+    await browser.elementById('submit-button-hello').click()\n+    await retry(async () => {\n+      expect(await browser.elementById('hello').text()).toMatch('Hello, World!')\n+    })\n+  })\n+\n+  it('should be able to use nested cache functions as props', async () => {\n+    const browser = await next.browser('/nested-cache')\n+\n+    await browser.elementById('submit-button-date').click()\n+    await retry(async () => {\n+      expect(await browser.elementById('date').text()).toMatch(isoDateRegExp)\n+    })\n+\n+    await browser.elementById('submit-button-random').click()\n+    await retry(async () => {\n+      expect(await browser.elementById('random').text()).toMatch(randomRegExp)\n+    })\n+  })\n+})"
        },
        {
            "sha": "2561d9ef55be0e44338e6c60df6cdd3151869336",
            "filename": "test/ppr-tests-manifest.json",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fppr-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d/test%2Fppr-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fppr-tests-manifest.json?ref=4d3a02d86f7163cc6a7a7b3a6366c11e12d6c78d",
            "patch": "@@ -172,6 +172,7 @@\n       \"test/e2e/app-dir/use-cache-hanging-inputs/**/*\",\n       \"test/e2e/app-dir/use-cache-metadata-route-handler/**/*\",\n       \"test/e2e/app-dir/use-cache-route-handler-only/**/*\",\n+      \"test/e2e/app-dir/use-cache-with-server-function-props/use-cache-with-server-function-props.test.ts\",\n       \"test/integration/app-dir-export/**/*\",\n       \"test/production/app-dir/build-output-tree-view/build-output-tree-view.test.ts\",\n       \"test/production/app-dir/global-default-cache-handler/global-default-cache-handler.test.ts\""
        }
    ],
    "stats": {
        "total": 769,
        "additions": 518,
        "deletions": 251
    }
}