{
    "author": "lukesandberg",
    "message": "[turbopack] Add execution tests to demonstrate a bug (#80918)\n\n## Add tests for top level `this` behavior in CJS and ESM modules\n\n### What?\nAdded two test cases to verify the behavior of `this` in CommonJS and ESM modules:\n- CJS test verifies that `this` should be equal to `exports`\n- ESM test verifies that `this` should be equal to `globalThis` WHICH IS A BUG, it should be `undefined`",
    "sha": "a5d0ad141150348422140b747d39a4045cada878",
    "files": [
        {
            "sha": "2c61e1eb997b62b74acf8032c2c964306583b557",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/cjs-this/input/index.js",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/a5d0ad141150348422140b747d39a4045cada878/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fcjs-this%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a5d0ad141150348422140b747d39a4045cada878/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fcjs-this%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fcjs-this%2Finput%2Findex.js?ref=a5d0ad141150348422140b747d39a4045cada878",
            "patch": "@@ -0,0 +1,8 @@\n+const t = this\n+\n+it('`this` in cjs should be exports', () => {\n+  expect(t).toBe(exports)\n+})\n+\n+// Use a dummy assignment to ensure we are parsed as a cjs module\n+exports.something = 'something'"
        },
        {
            "sha": "67a22271738aa10b84bc5ae56131ebfb3ccb7f11",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/esm-this/input/index.js",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a5d0ad141150348422140b747d39a4045cada878/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fesm-this%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a5d0ad141150348422140b747d39a4045cada878/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fesm-this%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fesm-this%2Finput%2Findex.js?ref=a5d0ad141150348422140b747d39a4045cada878",
            "patch": "@@ -0,0 +1,9 @@\n+const t = this\n+\n+it('`this` in esm should be undefined', () => {\n+  // TODO: This is WRONG, it should be undefined\n+  expect(t).toBe(globalThis)\n+})\n+\n+// Use a dummy export to ensure this is parsed as an esm module\n+export const foo = t"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 17,
        "deletions": 0
    }
}