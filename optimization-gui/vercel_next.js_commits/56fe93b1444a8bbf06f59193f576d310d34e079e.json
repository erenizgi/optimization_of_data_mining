{
    "author": "ztanner",
    "message": "[dev-overlay]: add preference panel (#76522)\n\nAdds user preferences for:\n\n- Toggling theme (localstorage)\n- Position (localstorage)\n- Hiding the overlay (existing dev session heuristic)\n\n\n\nhttps://github.com/user-attachments/assets/0f08ce66-4107-4751-80d3-a42d3315966a\n\n\n![CleanShot 2025-02-25 at 17 59\n11@2x](https://github.com/user-attachments/assets/e65fdfb0-23b3-4c47-b8af-f55dd60e7b95)\n\n![CleanShot 2025-02-25 at 17 59\n15@2x](https://github.com/user-attachments/assets/86d33590-18f7-44f6-acd2-9639c098476a)",
    "sha": "56fe93b1444a8bbf06f59193f576d310d34e079e",
    "files": [
        {
            "sha": "e024aed8077b74b371a4c11715a9d21e5bdd431c",
            "filename": "packages/next/src/client/components/react-dev-overlay/shared.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fshared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fshared.ts?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -38,6 +38,9 @@ export const ACTION_UNHANDLED_REJECTION = 'unhandled-rejection'\n export const ACTION_DEBUG_INFO = 'debug-info'\n export const ACTION_DEV_INDICATOR = 'dev-indicator'\n \n+export const STORAGE_KEY_THEME = '__nextjs-dev-tools-theme'\n+export const STORAGE_KEY_POSITION = '__nextjs-dev-tools-position'\n+\n interface StaticIndicatorAction {\n   type: typeof ACTION_STATIC_INDICATOR\n   staticIndicator: boolean"
        },
        {
            "sha": "5f5c740dfa8e1a4ce01718a52a54e8c50619ce9c",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-indicator.stories.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 7,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -9,13 +9,7 @@ const meta: Meta<typeof DevToolsIndicator> = {\n   parameters: {\n     layout: 'centered',\n   },\n-  argTypes: {\n-    position: {\n-      control: 'select',\n-      options: ['top-left', 'top-right', 'bottom-left', 'bottom-right'],\n-      defaultValue: 'bottom-left',\n-    },\n-  },\n+  argTypes: {},\n   decorators: [\n     withShadowPortal,\n     // Test for high z-index"
        },
        {
            "sha": "2377115aed80577cfeeb05e856985386279bd03c",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-indicator.tsx",
            "status": "modified",
            "additions": 61,
            "deletions": 15,
            "changes": 76,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -1,5 +1,5 @@\n import type { Dispatch, SetStateAction } from 'react'\n-import type { OverlayState } from '../../../../shared'\n+import { STORAGE_KEY_POSITION, type OverlayState } from '../../../../shared'\n \n import { useState, useEffect, useRef, createContext, useContext } from 'react'\n import { Toast } from '../../toast'\n@@ -9,7 +9,8 @@ import { useIsDevRendering } from '../../../../utils/dev-indicator/dev-render-in\n import { useDelayedRender } from '../../../hooks/use-delayed-render'\n import { TurbopackInfo } from './dev-tools-info/turbopack-info'\n import { RouteInfo } from './dev-tools-info/route-info'\n-import { StopIcon } from '../../../icons/stop-icon'\n+import GearIcon from '../../../icons/gear-icon'\n+import { UserPreferences } from './dev-tools-info/user-preferences'\n \n // TODO: add E2E tests to cover different scenarios\n \n@@ -18,23 +19,20 @@ const INDICATOR_POSITION =\n     .__NEXT_DEV_INDICATOR_POSITION as typeof window.__NEXT_DEV_INDICATOR_POSITION) ||\n   'bottom-left'\n \n-type DevToolsIndicatorPosition = typeof INDICATOR_POSITION\n+export type DevToolsIndicatorPosition = typeof INDICATOR_POSITION\n \n export function DevToolsIndicator({\n   state,\n   errorCount,\n   isBuildError,\n   setIsErrorOverlayOpen,\n-  position = INDICATOR_POSITION,\n }: {\n   state: OverlayState\n   errorCount: number\n   isBuildError: boolean\n   setIsErrorOverlayOpen: (\n     isErrorOverlayOpen: boolean | ((prev: boolean) => boolean)\n   ) => void\n-  // Technically this prop isn't needed, but useful for testing.\n-  position?: DevToolsIndicatorPosition\n }) {\n   const [isDevToolsIndicatorVisible, setIsDevToolsIndicatorVisible] =\n     useState(true)\n@@ -53,7 +51,6 @@ export function DevToolsIndicator({\n       }}\n       setIsErrorOverlayOpen={setIsErrorOverlayOpen}\n       isTurbopack={!!process.env.TURBOPACK}\n-      position={position}\n       disabled={state.disableDevIndicator || !isDevToolsIndicatorVisible}\n       isBuildError={isBuildError}\n     />\n@@ -73,13 +70,25 @@ interface C {\n \n const Context = createContext({} as C)\n \n+function getInitialPosition() {\n+  if (\n+    typeof localStorage !== 'undefined' &&\n+    localStorage.getItem(STORAGE_KEY_POSITION)\n+  ) {\n+    return localStorage.getItem(\n+      STORAGE_KEY_POSITION\n+    ) as DevToolsIndicatorPosition\n+  }\n+\n+  return INDICATOR_POSITION\n+}\n+\n function DevToolsPopover({\n   routerType,\n   disabled,\n   issueCount,\n   isStaticRoute,\n   isTurbopack,\n-  position,\n   isBuildError,\n   hide,\n   setIsErrorOverlayOpen,\n@@ -90,7 +99,6 @@ function DevToolsPopover({\n   isStaticRoute: boolean\n   semver: string | undefined\n   isTurbopack: boolean\n-  position: DevToolsIndicatorPosition\n   isBuildError: boolean\n   hide: () => void\n   setIsErrorOverlayOpen: (\n@@ -103,10 +111,14 @@ function DevToolsPopover({\n   const triggerTurbopackRef = useRef<HTMLButtonElement | null>(null)\n   const routeInfoRef = useRef<HTMLElement>(null)\n   const triggerRouteInfoRef = useRef<HTMLButtonElement | null>(null)\n+  const preferencesRef = useRef<HTMLElement>(null)\n+  const triggerPreferencesRef = useRef<HTMLButtonElement | null>(null)\n   const [isMenuOpen, setIsMenuOpen] = useState(false)\n   const [isTurbopackInfoOpen, setIsTurbopackInfoOpen] = useState(false)\n   const [isRouteInfoOpen, setIsRouteInfoOpen] = useState(false)\n+  const [isPreferencesOpen, setIsPreferencesOpen] = useState(false)\n   const [selectedIndex, setSelectedIndex] = useState(-1)\n+  const [position, setPosition] = useState(getInitialPosition())\n \n   // This hook lets us do an exit animation before unmounting the component\n   const { mounted: menuMounted, rendered: menuRendered } = useDelayedRender(\n@@ -128,6 +140,11 @@ function DevToolsPopover({\n       enterDelay: 0,\n       exitDelay: ANIMATE_OUT_DURATION_MS,\n     })\n+  const { mounted: preferencesMounted, rendered: preferencesRendered } =\n+    useDelayedRender(isPreferencesOpen, {\n+      enterDelay: 0,\n+      exitDelay: ANIMATE_OUT_DURATION_MS,\n+    })\n \n   // Features to make the menu accessible\n   useFocusTrap(menuRef, triggerRef, isMenuOpen)\n@@ -146,7 +163,13 @@ function DevToolsPopover({\n     isRouteInfoOpen,\n     closeRouteInfo\n   )\n-\n+  useFocusTrap(preferencesRef, triggerPreferencesRef, isPreferencesOpen)\n+  useClickOutside(\n+    preferencesRef,\n+    triggerPreferencesRef,\n+    isPreferencesOpen,\n+    closePreferences\n+  )\n   function select(index: number | 'first' | 'last') {\n     if (index === 'first') {\n       const all = menuRef.current?.querySelectorAll('[role=\"menuitem\"]')\n@@ -254,6 +277,15 @@ function DevToolsPopover({\n     setIsRouteInfoOpen(false)\n   }\n \n+  function closePreferences() {\n+    setIsPreferencesOpen(false)\n+  }\n+\n+  function handleHideDevtools() {\n+    closePreferences()\n+    hide()\n+  }\n+\n   const [vertical, horizontal] = position.split('-', 2)\n \n   return (\n@@ -316,6 +348,21 @@ function DevToolsPopover({\n         />\n       )}\n \n+      {preferencesMounted && (\n+        <UserPreferences\n+          ref={preferencesRef}\n+          isOpen={isPreferencesOpen}\n+          hide={handleHideDevtools}\n+          setPosition={setPosition}\n+          position={position}\n+          style={{\n+            [vertical]: 'calc(100% + 8px)',\n+            [horizontal]: 0,\n+          }}\n+          data-rendered={preferencesRendered}\n+        />\n+      )}\n+\n       {menuMounted && (\n         <div\n           ref={menuRef}\n@@ -381,11 +428,10 @@ function DevToolsPopover({\n \n             <div className=\"dev-tools-indicator-footer\">\n               <MenuItem\n-                data-hide-dev-tools\n-                title=\"Hide Dev Tools for the current server session or a day.\"\n-                label=\"Hide for Dev Session\"\n-                value={<StopIcon />}\n-                onClick={hide}\n+                data-preferences\n+                label=\"Preferences\"\n+                value={<GearIcon />}\n+                onClick={() => setIsPreferencesOpen(true)}\n                 index={isTurbopack ? 2 : 3}\n               />\n             </div>"
        },
        {
            "sha": "1ca9324de045f5aa333ba466b768c4c5b0e317fe",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/dev-tools-info.tsx",
            "status": "modified",
            "additions": 31,
            "deletions": 25,
            "changes": 56,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -8,34 +8,40 @@ export function DevToolsInfo({\n }: {\n   title: string\n   children: React.ReactNode\n-  learnMoreLink: string\n-  setIsOpen: (isOpen: boolean) => void\n-  setPreviousOpen: (isOpen: boolean) => void\n+  learnMoreLink?: string\n+  setIsOpen?: (isOpen: boolean) => void\n+  setPreviousOpen?: (isOpen: boolean) => void\n }) {\n+  const hasActionButtons = Boolean(\n+    learnMoreLink && setIsOpen && setPreviousOpen\n+  )\n+\n   return (\n     <div data-info-popover {...props}>\n       <div className=\"dev-tools-info-container\">\n         <h1 className=\"dev-tools-info-title\">{title}</h1>\n         {children}\n-        <div className=\"dev-tools-info-button-container\">\n-          <button\n-            className=\"dev-tools-info-close-button\"\n-            onClick={() => {\n-              setIsOpen(false)\n-              setPreviousOpen(true)\n-            }}\n-          >\n-            Close\n-          </button>\n-          <a\n-            className=\"dev-tools-info-learn-more-button\"\n-            href={learnMoreLink}\n-            target=\"_blank\"\n-            rel=\"noreferrer noopener\"\n-          >\n-            Learn More\n-          </a>\n-        </div>\n+        {hasActionButtons && (\n+          <div className=\"dev-tools-info-button-container\">\n+            <button\n+              className=\"dev-tools-info-close-button\"\n+              onClick={() => {\n+                setIsOpen?.(false)\n+                setPreviousOpen?.(true)\n+              }}\n+            >\n+              Close\n+            </button>\n+            <a\n+              className=\"dev-tools-info-learn-more-button\"\n+              href={learnMoreLink}\n+              target=\"_blank\"\n+              rel=\"noreferrer noopener\"\n+            >\n+              Learn More\n+            </a>\n+          </div>\n+        )}\n       </div>\n     </div>\n   )\n@@ -69,14 +75,14 @@ export const DEV_TOOLS_INFO_STYLES = `\n   }\n \n   .dev-tools-info-container {\n-    padding: 6px;\n+    padding: 12px;\n   }\n \n   .dev-tools-info-title {\n     padding: 8px 6px;\n     color: var(--color-gray-1000);\n-    font-size: var(--size-14);\n-    font-weight: 500;\n+    font-size: var(--size-16);\n+    font-weight: 600;\n     line-height: var(--size-20);\n     margin: 0;\n   }"
        },
        {
            "sha": "37afeca8d5eb9f0a60c491531cf3592d2a8eebeb",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/route-info.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Froute-info.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Froute-info.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Froute-info.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -146,7 +146,4 @@ export function RouteInfo({\n   )\n }\n \n-export const DEV_TOOLS_INFO_ROUTE_INFO_STYLES = `\n-  .dev-tools-info-link {\n-  }\n-`\n+export const DEV_TOOLS_INFO_ROUTE_INFO_STYLES = ``"
        },
        {
            "sha": "44519b6ec93deef446201e267f2d8be7b1955ed2",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/user-preferences.tsx",
            "status": "added",
            "additions": 263,
            "deletions": 0,
            "changes": 263,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -0,0 +1,263 @@\n+import { useState } from 'react'\n+import { DevToolsInfo } from './dev-tools-info'\n+import { css } from '../../../../../utils/css'\n+import type { DevToolsIndicatorPosition } from '../dev-tools-indicator'\n+import EyeIcon from '../../../../icons/eye-icon'\n+import { STORAGE_KEY_POSITION, STORAGE_KEY_THEME } from '../../../../../shared'\n+import LightIcon from '../../../../icons/light-icon'\n+import DarkIcon from '../../../../icons/dark-icon'\n+\n+function getInitialPreference() {\n+  if (typeof localStorage === 'undefined') {\n+    return 'system'\n+  }\n+\n+  const theme = localStorage.getItem(STORAGE_KEY_THEME)\n+  return theme === 'dark' || theme === 'light' ? theme : 'system'\n+}\n+\n+export function UserPreferences({\n+  isOpen,\n+  setPosition,\n+  position,\n+  hide,\n+  ...props\n+}: {\n+  isOpen: boolean\n+  setPosition: (position: DevToolsIndicatorPosition) => void\n+  position: DevToolsIndicatorPosition\n+  hide: () => void\n+  style?: React.CSSProperties\n+  ref?: React.RefObject<HTMLElement | null>\n+}) {\n+  // derive initial theme from system preference\n+  const [theme, setTheme] = useState(getInitialPreference())\n+\n+  const handleThemeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n+    const portal = document.querySelector('nextjs-portal')\n+    if (!portal) return\n+\n+    setTheme(e.target.value)\n+\n+    if (e.target.value === 'system') {\n+      portal.classList.remove('dark')\n+      portal.classList.remove('light')\n+      localStorage.removeItem(STORAGE_KEY_THEME)\n+      return\n+    }\n+\n+    if (e.target.value === 'dark') {\n+      portal.classList.add('dark')\n+      portal.classList.remove('light')\n+      localStorage.setItem(STORAGE_KEY_THEME, 'dark')\n+    } else {\n+      portal.classList.remove('dark')\n+      portal.classList.add('light')\n+      localStorage.setItem(STORAGE_KEY_THEME, 'light')\n+    }\n+  }\n+\n+  function handlePositionChange(e: React.ChangeEvent<HTMLSelectElement>) {\n+    setPosition(e.target.value as DevToolsIndicatorPosition)\n+    localStorage.setItem(STORAGE_KEY_POSITION, e.target.value)\n+  }\n+\n+  return (\n+    <DevToolsInfo title=\"Preferences\" {...props}>\n+      <div className=\"preferences-container\">\n+        <div className=\"preference-section\">\n+          <div className=\"preference-header\">\n+            <h2>Theme</h2>\n+            <p className=\"preference-description\">\n+              Select your theme preference.\n+            </p>\n+          </div>\n+          <div className=\"preference-control-select\">\n+            <div className=\"preference-icon\">\n+              <ThemeIcon theme={theme as 'dark' | 'light' | 'system'} />\n+            </div>\n+            <select\n+              className=\"select-button\"\n+              value={theme}\n+              onChange={handleThemeChange}\n+            >\n+              <option value=\"system\">System</option>\n+              <option value=\"light\">Light</option>\n+              <option value=\"dark\">Dark</option>\n+            </select>\n+          </div>\n+        </div>\n+\n+        <div className=\"preference-section\">\n+          <div className=\"preference-header\">\n+            <h2>Position</h2>\n+            <p className=\"preference-description\">\n+              Adjust the placement of your dev tools.\n+            </p>\n+          </div>\n+          <div className=\"preference-control-select\">\n+            <select\n+              className=\"select-button\"\n+              value={position}\n+              onChange={handlePositionChange}\n+            >\n+              <option value=\"bottom-left\">Bottom Left</option>\n+              <option value=\"bottom-right\">Bottom Right</option>\n+              <option value=\"top-left\">Top Left</option>\n+              <option value=\"top-right\">Top Right</option>\n+            </select>\n+          </div>\n+        </div>\n+\n+        <div className=\"preference-section\">\n+          <div className=\"preference-header\">\n+            <h2>Hide Dev Tools for this session</h2>\n+            <p className=\"preference-description\">\n+              Hide Dev Tools until you restart your dev server, or 1 day.\n+            </p>\n+          </div>\n+          <div className=\"preference-control\">\n+            <button\n+              data-hide-dev-tools\n+              className=\"action-button\"\n+              onClick={hide}\n+            >\n+              <div className=\"preference-icon\">\n+                <EyeIcon />\n+              </div>\n+              <span>Hide</span>\n+            </button>\n+          </div>\n+        </div>\n+\n+        <div className=\"preference-section\">\n+          <div className=\"preference-header\">\n+            <h2>Disable Dev Tools for this project</h2>\n+            <p className=\"preference-description\">\n+              To disable this UI completely, set{' '}\n+              <code className=\"dev-tools-info-code\">devIndicators: false</code>{' '}\n+              in your <code className=\"dev-tools-info-code\">next.config</code>{' '}\n+              file.\n+            </p>\n+          </div>\n+        </div>\n+      </div>\n+    </DevToolsInfo>\n+  )\n+}\n+\n+function ThemeIcon({ theme }: { theme: 'dark' | 'light' | 'system' }) {\n+  const activeTheme =\n+    theme === 'system'\n+      ? window.matchMedia('(prefers-color-scheme: dark)').matches\n+        ? 'dark'\n+        : 'light'\n+      : theme\n+\n+  return activeTheme === 'dark' ? <DarkIcon /> : <LightIcon />\n+}\n+\n+export const DEV_TOOLS_INFO_USER_PREFERENCES_STYLES = css`\n+  .preferences-container {\n+    padding: 8px 6px;\n+    width: 100%;\n+  }\n+\n+  @media (min-width: 576px) {\n+    .preferences-container {\n+      width: 480px;\n+    }\n+  }\n+\n+  .preference-section:first-child {\n+    padding-top: 0;\n+  }\n+\n+  .preference-section {\n+    padding: 12px 0;\n+    border-bottom: 1px solid var(--color-gray-400);\n+    display: flex;\n+    justify-content: space-between;\n+    align-items: center;\n+    gap: 24px;\n+  }\n+\n+  .preference-section:last-child {\n+    border-bottom: none;\n+  }\n+\n+  .preference-header {\n+    margin-bottom: 0;\n+    flex: 1;\n+  }\n+\n+  .preference-header h2 {\n+    font-size: var(--size-14);\n+    font-weight: 500;\n+    color: var(--color-gray-1000);\n+    margin: 0;\n+  }\n+\n+  .preference-description {\n+    color: var(--color-gray-900);\n+    font-size: var(--size-14);\n+    margin: 0;\n+  }\n+\n+  .preference-icon {\n+    display: flex;\n+    align-items: center;\n+    width: 16px;\n+    height: 16px;\n+  }\n+\n+  .select-button,\n+  .action-button {\n+    display: flex;\n+    align-items: center;\n+    gap: 8px;\n+    background: var(--color-background-100);\n+    border: 1px solid var(--color-gray-400);\n+    border-radius: var(--rounded-lg);\n+    font-weight: 400;\n+    font-size: var(--size-14);\n+    color: var(--color-gray-1000);\n+    padding: 6px 8px;\n+\n+    &:hover {\n+      background: var(--color-gray-100);\n+    }\n+  }\n+\n+  .preference-control-select {\n+    padding: 6px 8px;\n+    display: flex;\n+    align-items: center;\n+    gap: 8px;\n+    border-radius: var(--rounded-lg);\n+    border: 1px solid var(--color-gray-400);\n+\n+    &:hover {\n+      background: var(--color-gray-100);\n+    }\n+\n+    &:focus-within {\n+      outline: 5px auto -webkit-focus-ring-color;\n+    }\n+  }\n+\n+  .preference-control-select select {\n+    font-size: var(--size-14);\n+    font-weight: 400;\n+    border: none;\n+    padding: 0 6px 0 0;\n+    border-radius: 0;\n+    outline: none;\n+  }\n+\n+  :global(.icon) {\n+    width: 18px;\n+    height: 18px;\n+    color: #666;\n+  }\n+`"
        },
        {
            "sha": "c38fb42f0a7ec6a491282fbf9d245b3dc1a387ab",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/shadow-portal.tsx",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fshadow-portal.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fshadow-portal.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fshadow-portal.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -1,5 +1,6 @@\n import * as React from 'react'\n import { createPortal } from 'react-dom'\n+import { STORAGE_KEY_THEME } from '../../shared'\n \n export function ShadowPortal({ children }: { children: React.ReactNode }) {\n   let portalNode = React.useRef<HTMLElement | null>(null)\n@@ -9,6 +10,18 @@ export function ShadowPortal({ children }: { children: React.ReactNode }) {\n   React.useLayoutEffect(() => {\n     const ownerDocument = document\n     portalNode.current = ownerDocument.createElement('nextjs-portal')\n+    // load default color preference from localstorage\n+    if (typeof localStorage !== 'undefined') {\n+      const theme = localStorage.getItem(STORAGE_KEY_THEME)\n+      if (theme === 'dark') {\n+        portalNode.current.classList.add('dark')\n+        portalNode.current.classList.remove('light')\n+      } else if (theme === 'light') {\n+        portalNode.current.classList.remove('dark')\n+        portalNode.current.classList.add('light')\n+      }\n+    }\n+\n     shadowNode.current = portalNode.current.attachShadow({ mode: 'open' })\n     ownerDocument.body.appendChild(portalNode.current)\n     forceUpdate({})"
        },
        {
            "sha": "efdfabe32e9b482b5517545adb246762d776bad0",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/icons/dark-icon.tsx",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fdark-icon.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fdark-icon.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fdark-icon.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -0,0 +1,18 @@\n+export default function DarkIcon() {\n+  return (\n+    <svg\n+      data-testid=\"geist-icon\"\n+      height=\"16\"\n+      strokeLinejoin=\"round\"\n+      viewBox=\"0 0 16 16\"\n+      width=\"16\"\n+    >\n+      <path\n+        fillRule=\"evenodd\"\n+        clipRule=\"evenodd\"\n+        d=\"M1.5 8.00005C1.5 5.53089 2.99198 3.40932 5.12349 2.48889C4.88136 3.19858 4.75 3.95936 4.75 4.7501C4.75 8.61609 7.88401 11.7501 11.75 11.7501C11.8995 11.7501 12.048 11.7454 12.1953 11.7361C11.0955 13.1164 9.40047 14.0001 7.5 14.0001C4.18629 14.0001 1.5 11.3138 1.5 8.00005ZM6.41706 0.577759C2.78784 1.1031 0 4.22536 0 8.00005C0 12.1422 3.35786 15.5001 7.5 15.5001C10.5798 15.5001 13.2244 13.6438 14.3792 10.9921L13.4588 9.9797C12.9218 10.155 12.3478 10.2501 11.75 10.2501C8.71243 10.2501 6.25 7.78767 6.25 4.7501C6.25 3.63431 6.58146 2.59823 7.15111 1.73217L6.41706 0.577759ZM13.25 1V1.75V2.75L14.25 2.75H15V4.25H14.25H13.25V5.25V6H11.75V5.25V4.25H10.75L10 4.25V2.75H10.75L11.75 2.75V1.75V1H13.25Z\"\n+        fill=\"currentColor\"\n+      ></path>\n+    </svg>\n+  )\n+}"
        },
        {
            "sha": "ca30908fe77cb186578130d67d82f6911c7b2b88",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/icons/eye-icon.tsx",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Feye-icon.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Feye-icon.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Feye-icon.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -0,0 +1,12 @@\n+export default function EyeIcon() {\n+  return (\n+    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\">\n+      <path\n+        fill=\"currentColor\"\n+        fillRule=\"evenodd\"\n+        d=\"m.191 2.063.56.498 13.5 12 .561.498.997-1.121-.56-.498-1.81-1.608 2.88-3.342v-.98l-3.204-3.72C10.645.923 6.365.686 3.594 3.08L1.748 1.44 1.188.94.19 2.063ZM14.761 8l-2.442 2.836-1.65-1.466a3.001 3.001 0 0 0-4.342-3.86l-1.6-1.422a5.253 5.253 0 0 1 7.251.682L14.76 8ZM7.526 6.576l1.942 1.727a1.499 1.499 0 0 0-1.942-1.727Zm-7.845.935 1.722-2 1.137.979L1.24 8l2.782 3.23A5.25 5.25 0 0 0 9.9 12.703l.54 1.4a6.751 6.751 0 0 1-7.555-1.892L-.318 8.49v-.98Z\"\n+        clipRule=\"evenodd\"\n+      />\n+    </svg>\n+  )\n+}"
        },
        {
            "sha": "a4905843640afee722f2e6b6bad9bd96da6da449",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/icons/gear-icon.tsx",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fgear-icon.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fgear-icon.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fgear-icon.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -0,0 +1,18 @@\n+export default function GearIcon() {\n+  return (\n+    <svg\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+      width=\"16\"\n+      height=\"16\"\n+      viewBox=\"0 0 20 20\"\n+      fill=\"none\"\n+    >\n+      <path\n+        fill=\"currentColor\"\n+        fillRule=\"evenodd\"\n+        d=\"m9.7 3.736.045-.236h.51l.044.236a2.024 2.024 0 0 0 1.334 1.536c.19.066.375.143.554.23.618.301 1.398.29 2.03-.143l.199-.136.36.361-.135.199a2.024 2.024 0 0 0-.143 2.03c.087.179.164.364.23.554.224.65.783 1.192 1.536 1.334l.236.044v.51l-.236.044a2.024 2.024 0 0 0-1.536 1.334 4.95 4.95 0 0 1-.23.554 2.024 2.024 0 0 0 .143 2.03l.136.199-.361.36-.199-.135a2.024 2.024 0 0 0-2.03-.143c-.179.087-.364.164-.554.23a2.024 2.024 0 0 0-1.334 1.536l-.044.236h-.51l-.044-.236a2.024 2.024 0 0 0-1.334-1.536 4.952 4.952 0 0 1-.554-.23 2.024 2.024 0 0 0-2.03.143l-.199.136-.36-.361.135-.199a2.024 2.024 0 0 0 .143-2.03 4.958 4.958 0 0 1-.23-.554 2.024 2.024 0 0 0-1.536-1.334l-.236-.044v-.51l.236-.044a2.024 2.024 0 0 0 1.536-1.334 4.96 4.96 0 0 1 .23-.554 2.024 2.024 0 0 0-.143-2.03l-.136-.199.361-.36.199.135a2.024 2.024 0 0 0 2.03.143c.179-.087.364-.164.554-.23a2.024 2.024 0 0 0 1.334-1.536ZM8.5 2h3l.274 1.46c.034.185.17.333.348.394.248.086.49.186.722.3.17.082.37.074.526-.033l1.226-.839 2.122 2.122-.84 1.226a.524.524 0 0 0-.032.526c.114.233.214.474.3.722.061.177.21.314.394.348L18 8.5v3l-1.46.274a.524.524 0 0 0-.394.348 6.47 6.47 0 0 1-.3.722.524.524 0 0 0 .033.526l.839 1.226-2.122 2.122-1.226-.84a.524.524 0 0 0-.526-.032 6.477 6.477 0 0 1-.722.3.524.524 0 0 0-.348.394L11.5 18h-3l-.274-1.46a.524.524 0 0 0-.348-.394 6.477 6.477 0 0 1-.722-.3.524.524 0 0 0-.526.033l-1.226.839-2.122-2.122.84-1.226a.524.524 0 0 0 .032-.526 6.453 6.453 0 0 1-.3-.722.524.524 0 0 0-.394-.348L2 11.5v-3l1.46-.274a.524.524 0 0 0 .394-.348c.086-.248.186-.49.3-.722a.524.524 0 0 0-.033-.526l-.839-1.226 2.122-2.122 1.226.84a.524.524 0 0 0 .526.032 6.46 6.46 0 0 1 .722-.3.524.524 0 0 0 .348-.394L8.5 2Zm3 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n+        clipRule=\"evenodd\"\n+      />\n+    </svg>\n+  )\n+}"
        },
        {
            "sha": "ba9c7f99861be35eab4f05b3752ceb27d4d0b8fb",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/icons/light-icon.tsx",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Flight-icon.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Flight-icon.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Flight-icon.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -0,0 +1,25 @@\n+export default function LightIcon() {\n+  return (\n+    <svg\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+      width=\"20\"\n+      height=\"16\"\n+      viewBox=\"0 0 16 16\"\n+      fill=\"none\"\n+    >\n+      <g clipPath=\"url(#a)\">\n+        <path\n+          fill=\"currentColor\"\n+          fillRule=\"evenodd\"\n+          d=\"M8.75.75V0h-1.5v2h1.5V.75ZM3.26 4.32l-.53-.53-.354-.353-.53-.53 1.06-1.061.53.53.354.354.53.53-1.06 1.06Zm8.42-1.06.53-.53.353-.354.53-.53 1.061 1.06-.53.53-.354.354-.53.53-1.06-1.06ZM8 11.25a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm0 1.5a4.75 4.75 0 1 0 0-9.5 4.75 4.75 0 0 0 0 9.5Zm6-5.5h2v1.5h-2v-1.5Zm-13.25 0H0v1.5h2v-1.5H.75Zm1.62 5.32-.53.53 1.06 1.06.53-.53.354-.353.53-.53-1.06-1.061-.53.53-.354.354Zm10.2 1.06.53.53 1.06-1.06-.53-.53-.354-.354-.53-.53-1.06 1.06.53.53.353.354ZM8.75 14v2h-1.5v-2h1.5Z\"\n+          clipRule=\"evenodd\"\n+        />\n+      </g>\n+      <defs>\n+        <clipPath id=\"a\">\n+          <path fill=\"currentColor\" d=\"M0 0h16v16H0z\" />\n+        </clipPath>\n+      </defs>\n+    </svg>\n+  )\n+}"
        },
        {
            "sha": "b5f95c817581c56720236da6270756e8a5b23ef9",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/styles/base.tsx",
            "status": "modified",
            "additions": 15,
            "deletions": 7,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fbase.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fbase.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fbase.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -1,5 +1,14 @@\n import { css } from '../../utils/css'\n \n+const darkTheme = css`\n+  --color-font: white;\n+  --color-backdrop: rgba(0, 0, 0, 0.8);\n+  --color-border-shadow: rgba(255, 255, 255, 0.145);\n+\n+  --color-title-color: #fafafa;\n+  --color-stack-notes: #a9a9a9;\n+`\n+\n export function Base() {\n   return (\n     <style>\n@@ -114,14 +123,13 @@ export function Base() {\n           }\n         }\n \n-        @media (prefers-color-scheme: dark) {\n-          :host {\n-            --color-font: white;\n-            --color-backdrop: rgb(0, 0, 0, 0.8);\n-            --color-border-shadow: rgba(255, 255, 255, 0.145);\n+        :host(.dark) {\n+          ${darkTheme}\n+        }\n \n-            --color-title-color: #fafafa;\n-            --color-stack-notes: #a9a9a9;\n+        @media (prefers-color-scheme: dark) {\n+          :host(:not(.light)) {\n+            ${darkTheme}\n           }\n         }\n "
        },
        {
            "sha": "2d8da90868711ec55b03c42760688ab55b76b9ce",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/styles/colors.tsx",
            "status": "modified",
            "additions": 103,
            "deletions": 95,
            "changes": 198,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcolors.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcolors.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcolors.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -1,5 +1,102 @@\n import { css } from '../../utils/css'\n \n+const darkTheme = css`\n+  /* Background Dark */\n+  --color-background-100: #0a0a0a;\n+  --color-background-200: #000000;\n+\n+  /* Syntax Dark */\n+  --color-syntax-comment: #a0a0a0;\n+  --color-syntax-constant: #ededed;\n+  --color-syntax-function: #52a9ff;\n+  --color-syntax-keyword: #f76191;\n+  --color-syntax-link: #0ac5b2;\n+  --color-syntax-parameter: #f1a10d;\n+  --color-syntax-punctuation: #ededed;\n+  --color-syntax-string: #0ac5b2;\n+  --color-syntax-string-expression: #0ac5b2;\n+\n+  /* Gray Scale Dark */\n+  --color-gray-100: #1a1a1a;\n+  --color-gray-200: #1f1f1f;\n+  --color-gray-300: #292929;\n+  --color-gray-400: #2e2e2e;\n+  --color-gray-500: #454545;\n+  --color-gray-600: #878787;\n+  --color-gray-700: #8f8f8f;\n+  --color-gray-800: #7d7d7d;\n+  --color-gray-900: #a0a0a0;\n+  --color-gray-1000: #ededed;\n+\n+  /* Gray Alpha Scale Dark */\n+  --color-gray-alpha-100: rgba(255, 255, 255, 0.066);\n+  --color-gray-alpha-200: rgba(255, 255, 255, 0.087);\n+  --color-gray-alpha-300: rgba(255, 255, 255, 0.125);\n+  --color-gray-alpha-400: rgba(255, 255, 255, 0.145);\n+  --color-gray-alpha-500: rgba(255, 255, 255, 0.239);\n+  --color-gray-alpha-600: rgba(255, 255, 255, 0.506);\n+  --color-gray-alpha-700: rgba(255, 255, 255, 0.54);\n+  --color-gray-alpha-800: rgba(255, 255, 255, 0.47);\n+  --color-gray-alpha-900: rgba(255, 255, 255, 0.61);\n+  --color-gray-alpha-1000: rgba(255, 255, 255, 0.923);\n+\n+  /* Blue Scale Dark */\n+  --color-blue-100: #0f1b2d;\n+  --color-blue-200: #10243e;\n+  --color-blue-300: #0f3058;\n+  --color-blue-400: #0d3868;\n+  --color-blue-500: #0a4481;\n+  --color-blue-600: #0091ff;\n+  --color-blue-700: #0070f3;\n+  --color-blue-800: #0060d1;\n+  --color-blue-900: #52a9ff;\n+  --color-blue-1000: #eaf6ff;\n+\n+  /* Red Scale Dark */\n+  --color-red-100: #2a1314;\n+  --color-red-200: #3d1719;\n+  --color-red-300: #551a1e;\n+  --color-red-400: #671e22;\n+  --color-red-500: #822025;\n+  --color-red-600: #e5484d;\n+  --color-red-700: #e5484d;\n+  --color-red-800: #da3036;\n+  --color-red-900: #ff6369;\n+  --color-red-1000: #ffecee;\n+\n+  /* Amber Scale Dark */\n+  --color-amber-100: #271700;\n+  --color-amber-200: #341c00;\n+  --color-amber-300: #4a2900;\n+  --color-amber-400: #573300;\n+  --color-amber-500: #693f05;\n+  --color-amber-600: #e79c13;\n+  --color-amber-700: #ffb224;\n+  --color-amber-800: #ff990a;\n+  --color-amber-900: #f1a10d;\n+  --color-amber-1000: #fef3dd;\n+\n+  /* Green Scale Dark */\n+  --color-green-100: #0b2211;\n+  --color-green-200: #0f2c17;\n+  --color-green-300: #11351b;\n+  --color-green-400: #0c461b;\n+  --color-green-500: #126427;\n+  --color-green-600: #1a9338;\n+  --color-green-700: #46a758;\n+  --color-green-800: #388e4a;\n+  --color-green-900: #63c174;\n+  --color-green-1000: #e5fbeb;\n+\n+  /* Turbopack Dark - Temporary */\n+  --color-turbopack-text-red: #ff6d92;\n+  --color-turbopack-text-blue: #45b2ff;\n+  --color-turbopack-border-red: #6e293b;\n+  --color-turbopack-border-blue: #284f80;\n+  --color-turbopack-background-red: #250d12;\n+  --color-turbopack-background-blue: #0a1723;\n+`\n+\n // TODO: Replace the existing colors in Base.tsx.\n export function Colors() {\n   return (\n@@ -141,102 +238,13 @@ export function Colors() {\n           --color-turbopack-background-blue: #f6fbff;\n         }\n \n+        :host(.dark) {\n+          ${darkTheme}\n+        }\n+\n         @media (prefers-color-scheme: dark) {\n-          :host {\n-            /* Background Dark */\n-            --color-background-100: #0a0a0a;\n-            --color-background-200: #000000;\n-\n-            /* Syntax Dark */\n-            --color-syntax-comment: #a0a0a0;\n-            --color-syntax-constant: #ededed;\n-            --color-syntax-function: #52a9ff;\n-            --color-syntax-keyword: #f76191;\n-            --color-syntax-link: #0ac5b2;\n-            --color-syntax-parameter: #f1a10d;\n-            --color-syntax-punctuation: #ededed;\n-            --color-syntax-string: #0ac5b2;\n-            --color-syntax-string-expression: #0ac5b2;\n-\n-            /* Gray Scale Dark */\n-            --color-gray-100: #1a1a1a;\n-            --color-gray-200: #1f1f1f;\n-            --color-gray-300: #292929;\n-            --color-gray-400: #2e2e2e;\n-            --color-gray-500: #454545;\n-            --color-gray-600: #878787;\n-            --color-gray-700: #8f8f8f;\n-            --color-gray-800: #7d7d7d;\n-            --color-gray-900: #a0a0a0;\n-            --color-gray-1000: #ededed;\n-\n-            /* Gray Alpha Scale Dark */\n-            --color-gray-alpha-100: rgba(255, 255, 255, 0.066);\n-            --color-gray-alpha-200: rgba(255, 255, 255, 0.087);\n-            --color-gray-alpha-300: rgba(255, 255, 255, 0.125);\n-            --color-gray-alpha-400: rgba(255, 255, 255, 0.145);\n-            --color-gray-alpha-500: rgba(255, 255, 255, 0.239);\n-            --color-gray-alpha-600: rgba(255, 255, 255, 0.506);\n-            --color-gray-alpha-700: rgba(255, 255, 255, 0.54);\n-            --color-gray-alpha-800: rgba(255, 255, 255, 0.47);\n-            --color-gray-alpha-900: rgba(255, 255, 255, 0.61);\n-            --color-gray-alpha-1000: rgba(255, 255, 255, 0.923);\n-\n-            /* Blue Scale Dark */\n-            --color-blue-100: #0f1b2d;\n-            --color-blue-200: #10243e;\n-            --color-blue-300: #0f3058;\n-            --color-blue-400: #0d3868;\n-            --color-blue-500: #0a4481;\n-            --color-blue-600: #0091ff;\n-            --color-blue-700: #0070f3;\n-            --color-blue-800: #0060d1;\n-            --color-blue-900: #52a9ff;\n-            --color-blue-1000: #eaf6ff;\n-\n-            /* Red Scale Dark */\n-            --color-red-100: #2a1314;\n-            --color-red-200: #3d1719;\n-            --color-red-300: #551a1e;\n-            --color-red-400: #671e22;\n-            --color-red-500: #822025;\n-            --color-red-600: #e5484d;\n-            --color-red-700: #e5484d;\n-            --color-red-800: #da3036;\n-            --color-red-900: #ff6369;\n-            --color-red-1000: #ffecee;\n-\n-            /* Amber Scale Dark */\n-            --color-amber-100: #271700;\n-            --color-amber-200: #341c00;\n-            --color-amber-300: #4a2900;\n-            --color-amber-400: #573300;\n-            --color-amber-500: #693f05;\n-            --color-amber-600: #e79c13;\n-            --color-amber-700: #ffb224;\n-            --color-amber-800: #ff990a;\n-            --color-amber-900: #f1a10d;\n-            --color-amber-1000: #fef3dd;\n-\n-            /* Green Scale Dark */\n-            --color-green-100: #0b2211;\n-            --color-green-200: #0f2c17;\n-            --color-green-300: #11351b;\n-            --color-green-400: #0c461b;\n-            --color-green-500: #126427;\n-            --color-green-600: #1a9338;\n-            --color-green-700: #46a758;\n-            --color-green-800: #388e4a;\n-            --color-green-900: #63c174;\n-            --color-green-1000: #e5fbeb;\n-\n-            /* Turbopack Dark - Temporary */\n-            --color-turbopack-text-red: #ff6d92;\n-            --color-turbopack-text-blue: #45b2ff;\n-            --color-turbopack-border-red: #6e293b;\n-            --color-turbopack-border-blue: #284f80;\n-            --color-turbopack-background-red: #250d12;\n-            --color-turbopack-background-blue: #0a1723;\n+          :host(:not(.light)) {\n+            ${darkTheme}\n           }\n         }\n       `}"
        },
        {
            "sha": "53ef7dce011e85bff728bfc3c46e84aee95cf6e4",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/styles/component-styles.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcomponent-styles.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcomponent-styles.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcomponent-styles.tsx?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -20,6 +20,7 @@ import { ENVIRONMENT_NAME_LABEL_STYLES } from '../components/errors/environment-\n import { DEV_TOOLS_INFO_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n import { DEV_TOOLS_INFO_TURBOPACK_INFO_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/turbopack-info'\n import { DEV_TOOLS_INFO_ROUTE_INFO_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/route-info'\n+import { DEV_TOOLS_INFO_USER_PREFERENCES_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/user-preferences'\n \n export function ComponentStyles() {\n   return (\n@@ -46,6 +47,7 @@ export function ComponentStyles() {\n         ${DEV_TOOLS_INFO_STYLES}\n         ${DEV_TOOLS_INFO_TURBOPACK_INFO_STYLES}\n         ${DEV_TOOLS_INFO_ROUTE_INFO_STYLES}\n+        ${DEV_TOOLS_INFO_USER_PREFERENCES_STYLES}\n       `}\n     </style>\n   )"
        },
        {
            "sha": "5700b5a5c75407208d94b4e2c1c1c9f8af7b0a14",
            "filename": "test/development/app-dir/dev-indicator/hide-button.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fhide-button.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fhide-button.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fhide-button.test.ts?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -20,6 +20,7 @@ describe('dev indicator - Hide DevTools Button', () => {\n     const browser = await next.browser('/')\n \n     await openDevToolsIndicatorPopover(browser)\n+    await browser.elementByCss('[data-preferences]').click()\n     await browser.elementByCss('[data-hide-dev-tools]').click()\n \n     await assertNoDevToolsIndicator(browser)\n@@ -36,6 +37,7 @@ describe('dev indicator - Hide DevTools Button', () => {\n     const browser = await next.browser('/')\n \n     await openDevToolsIndicatorPopover(browser)\n+    await browser.elementByCss('[data-preferences]').click()\n     await browser.elementByCss('[data-hide-dev-tools]').click()\n \n     await assertNoDevToolsIndicator(browser)\n@@ -51,6 +53,7 @@ describe('dev indicator - Hide DevTools Button', () => {\n     const browser = await next.browser('/')\n \n     await openDevToolsIndicatorPopover(browser)\n+    await browser.elementByCss('[data-preferences]').click()\n     await browser.elementByCss('[data-hide-dev-tools]').click()\n \n     await assertNoDevToolsIndicator(browser)"
        },
        {
            "sha": "8f0afbe7c0d7aca6c831e0bb93e0015d1cc81458",
            "filename": "test/development/client-dev-overlay/index.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/56fe93b1444a8bbf06f59193f576d310d34e079e/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/56fe93b1444a8bbf06f59193f576d310d34e079e/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts?ref=56fe93b1444a8bbf06f59193f576d310d34e079e",
            "patch": "@@ -37,6 +37,7 @@ describe('client-dev-overlay', () => {\n     popover: '[data-nextjs-dev-tools-button]',\n     indicator: '[data-next-badge-root]',\n     minimizeButton: 'body',\n+    preferencesButton: '[data-preferences]',\n     hideButton: '[data-hide-dev-tools]',\n   }\n   function getToast() {\n@@ -51,6 +52,9 @@ describe('client-dev-overlay', () => {\n   function getHideButton() {\n     return browser.elementByCss(selectors.hideButton)\n   }\n+  function getPreferencesButton() {\n+    return browser.elementByCss(selectors.preferencesButton)\n+  }\n \n   it('should be able to fullscreen the minimized overlay', async () => {\n     await getMinimizeButton().click()\n@@ -73,6 +77,7 @@ describe('client-dev-overlay', () => {\n   it('should keep the error indicator visible when there are errors', async () => {\n     await getMinimizeButton().click()\n     await getPopover().click()\n+    await getPreferencesButton().click()\n     await getHideButton().click()\n \n     await retry(async () => {\n@@ -92,6 +97,7 @@ describe('client-dev-overlay', () => {\n \n       await getMinimizeButton().click()\n       await getPopover().click()\n+      await getPreferencesButton().click()\n       await getHideButton().click()\n \n       await retry(async () => {"
        }
    ],
    "stats": {
        "total": 728,
        "additions": 575,
        "deletions": 153
    }
}