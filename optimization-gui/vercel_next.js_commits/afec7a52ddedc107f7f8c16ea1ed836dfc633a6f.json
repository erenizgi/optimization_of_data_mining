{
    "author": "sokra",
    "message": "Turbopack: remove Asset supertrait from Module trait. Modules don't have content (#86339)\n\nTurbopack: remove Asset supertrait from Module trait. Modules don't have content\n\nremove unneeded Asset implementation\n\n<!-- Thanks for opening a PR! Your contribution is much appreciated.\nTo make sure your PR is handled as smoothly as possible we request that you follow the checklist sections below.\nChoose the right checklist for the change(s) that you're making:\n\n## For Contributors\n\n### Improving Documentation\n\n- Run `pnpm prettier-fix` to fix formatting issues before opening the PR.\n- Read the Docs Contribution Guide to ensure your contribution follows the docs guidelines: https://nextjs.org/docs/community/contribution-guide\n\n### Fixing a bug\n\n- Related issues linked using `fixes #number`\n- Tests added. See: https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\n\n### Adding a feature\n\n- Implements an existing feature request or RFC. Make sure the feature request has been accepted for implementation before opening a PR. (A discussion must be opened, see https://github.com/vercel/next.js/discussions/new?category=ideas)\n- Related issues/discussions are linked using `fixes #number`\n- e2e tests added (https://github.com/vercel/next.js/blob/canary/contributing/core/testing.md#writing-tests-for-nextjs)\n- Documentation added\n- Telemetry added. In case of a feature if it's used or not.\n- Errors have a helpful link attached, see https://github.com/vercel/next.js/blob/canary/contributing.md\n\n\n## For Maintainers\n\n- Minimal description (aim for explaining to someone not on the team to understand the PR)\n- When linking to a Slack thread, you might want to share details of the conclusion\n- Link both the Linear (Fixes NEXT-xxx) and the GitHub issues\n- Add review comments if necessary to explain to the reviewer the logic behind a change\n\n### What?\n\n### Why?\n\n### How?\n\nCloses NEXT-\nFixes #\n\n-->",
    "sha": "afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
    "files": [
        {
            "sha": "d11af6d6b69e138c8836cc440c36d95b283bc0fb",
            "filename": "crates/next-core/src/next_client_reference/ecmascript_client_reference/ecmascript_client_reference_module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 14,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -4,9 +4,9 @@ use anyhow::{Context, Result, bail};\n use indoc::writedoc;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{IntoTraitRef, ResolvedVc, ValueToString, Vc};\n-use turbo_tasks_fs::{File, FileContent};\n+use turbo_tasks_fs::File;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n+    asset::AssetContent,\n     chunk::{\n         AsyncModuleInfo, ChunkGroupType, ChunkItem, ChunkType, ChunkableModule,\n         ChunkableModuleReference, ChunkingContext, ChunkingType, ChunkingTypeOption,\n@@ -243,18 +243,6 @@ impl Module for EcmascriptClientReferenceModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for EcmascriptClientReferenceModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        AssetContent::File(\n-            FileContent::Content(\"// This is a proxy module for Next.js client references.\".into())\n-                .resolved_cell(),\n-        )\n-        .cell()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for EcmascriptClientReferenceModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "2c308f2d14889c053b9a4734d293e8e2d7978e93",
            "filename": "crates/next-core/src/next_dynamic/dynamic_module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -4,9 +4,7 @@ use anyhow::Result;\n use indoc::formatdoc;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n-use turbo_tasks_fs::FileContent;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     ident::AssetIdent,\n     module::Module,\n@@ -73,18 +71,6 @@ impl Module for NextDynamicEntryModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for NextDynamicEntryModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        AssetContent::File(\n-            FileContent::Content(\"// This is a marker module for Next.js dynamic.\".into())\n-                .resolved_cell(),\n-        )\n-        .cell()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for NextDynamicEntryModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "e622d0892ae3b4b6a80381b37c0eb21e161a0aab",
            "filename": "crates/next-core/src/next_server_component/server_component_module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 16,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -4,9 +4,8 @@ use anyhow::Result;\n use indoc::formatdoc;\n use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n-use turbo_tasks_fs::{FileContent, FileSystemPath};\n+use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     ident::AssetIdent,\n     module::Module,\n@@ -69,20 +68,6 @@ impl Module for NextServerComponentModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for NextServerComponentModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        AssetContent::File(\n-            FileContent::Content(\n-                \"// This is a marker module for Next.js server components.\".into(),\n-            )\n-            .resolved_cell(),\n-        )\n-        .cell()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for NextServerComponentModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "1f06944be8f0fbb39d62cc198e88e5e6f4c9d0a6",
            "filename": "crates/next-core/src/next_server_utility/server_utility_module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 14,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -4,9 +4,8 @@ use anyhow::Result;\n use indoc::formatdoc;\n use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n-use turbo_tasks_fs::{FileContent, FileSystemPath};\n+use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     ident::AssetIdent,\n     module::Module,\n@@ -69,18 +68,6 @@ impl Module for NextServerUtilityModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for NextServerUtilityModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        AssetContent::File(\n-            FileContent::Content(\"// This is a marker module for Next.js server utilities.\".into())\n-                .resolved_cell(),\n-        )\n-        .cell()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for NextServerUtilityModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "8a4b93a30d8cd702839dd9f282af024e33fb9cba",
            "filename": "crates/next-core/src/next_shared/transforms/swc_ecma_transform_plugins.rs",
            "status": "modified",
            "additions": 12,
            "deletions": 2,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fswc_ecma_transform_plugins.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fswc_ecma_transform_plugins.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fswc_ecma_transform_plugins.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -36,11 +36,12 @@ pub async fn get_swc_ecma_transform_rule_impl(\n     enable_mdx_rs: bool,\n ) -> Result<Option<ModuleRule>> {\n     use anyhow::bail;\n-    use turbo_tasks::TryFlatJoinIterExt;\n+    use turbo_tasks::{TryFlatJoinIterExt, ValueToString};\n     use turbo_tasks_fs::FileContent;\n     use turbopack::{resolve_options, resolve_options_context::ResolveOptionsContext};\n     use turbopack_core::{\n         asset::Asset,\n+        module::Module,\n         reference_type::{CommonJsReferenceSubType, ReferenceType},\n         resolve::{handle_resolve_error, parse::Request, resolve},\n     };\n@@ -99,7 +100,16 @@ pub async fn get_swc_ecma_transform_rule_impl(\n                     return Ok(None);\n                 };\n \n-                let content = &*plugin_module.content().file_content().await?;\n+                let Some(plugin_source) = &*plugin_module.source().await? else {\n+                    use anyhow::bail;\n+\n+                    bail!(\n+                        \"Expected source for plugin module: {}\",\n+                        plugin_module.ident().to_string().await?\n+                    );\n+                };\n+\n+                let content = &*plugin_source.content().file_content().await?;\n                 let FileContent::Content(file) = content else {\n                     bail!(\"Expected file content for plugin module\");\n                 };"
        },
        {
            "sha": "143de297b614456ba3616aea171ca38b83f50e55",
            "filename": "crates/next-core/src/raw_ecmascript_module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -10,7 +10,7 @@ use turbo_tasks::{FxIndexMap, FxIndexSet, ResolvedVc, TryJoinIterExt, ValueToStr\n use turbo_tasks_fs::{FileContent, glob::Glob, rope::Rope};\n use turbopack::{ModuleAssetContext, module_options::CustomModuleType};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n+    asset::Asset,\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     code_builder::CodeBuilder,\n     compile_time_info::{\n@@ -107,14 +107,6 @@ impl Module for RawEcmascriptModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for RawEcmascriptModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for RawEcmascriptModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "c7cfc7f6873aa5e4006c7860515614ee51efa6c4",
            "filename": "turbopack/crates/turbopack-core/src/changed.rs",
            "status": "modified",
            "additions": 16,
            "deletions": 3,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchanged.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchanged.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchanged.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -1,6 +1,6 @@\n-use anyhow::Result;\n+use anyhow::{Result, bail};\n use turbo_tasks::{\n-    Completion, Completions, ResolvedVc, TryJoinIterExt, Vc,\n+    Completion, Completions, ResolvedVc, TryJoinIterExt, ValueToString, Vc,\n     graph::{AdjacencyMap, GraphTraversal},\n };\n \n@@ -33,7 +33,7 @@ pub async fn any_content_changed_of_module(\n         .completed()?\n         .into_inner()\n         .into_postorder_topological()\n-        .map(|m| content_changed(*ResolvedVc::upcast(m)))\n+        .map(|m| source_changed(*m))\n         .map(|v| v.to_resolved())\n         .try_join()\n         .await?;\n@@ -85,3 +85,16 @@ pub async fn content_changed(asset: Vc<Box<dyn Asset>>) -> Result<Vc<Completion>\n     asset.content().file_content().await?;\n     Ok(Completion::new())\n }\n+\n+/// Returns a completion that changes when the content of the given asset\n+/// changes.\n+#[turbo_tasks::function]\n+pub async fn source_changed(asset: Vc<Box<dyn Module>>) -> Result<Vc<Completion>> {\n+    if let Some(source) = *asset.source().await? {\n+        // Reading the file content is enough to add as dependency\n+        source.content().file_content().await?;\n+    } else {\n+        bail!(\"Module {} has no source\", asset.ident().to_string().await?)\n+    }\n+    Ok(Completion::new())\n+}"
        },
        {
            "sha": "5b3cd3290e2dbac7b2882e6ddf664151e2ea99ea",
            "filename": "turbopack/crates/turbopack-core/src/chunk/evaluate.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fevaluate.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fevaluate.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fevaluate.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use turbo_tasks::{ResolvedVc, Upcast, ValueToString, Vc};\n \n use super::ChunkableModule;\n use crate::{\n-    asset::Asset,\n     context::AssetContext,\n     module::Module,\n     reference_type::{EntryReferenceSubType, ReferenceType},\n@@ -15,7 +14,7 @@ use crate::{\n /// The chunking context implementation will resolve the dynamic entry to a\n /// well-known value or trait object.\n #[turbo_tasks::value_trait]\n-pub trait EvaluatableAsset: Asset + Module + ChunkableModule {}\n+pub trait EvaluatableAsset: Module + ChunkableModule {}\n \n pub trait EvaluatableAssetExt {\n     fn to_evaluatable("
        },
        {
            "sha": "55af21221e55b39e12fb26841b8387fd33bda128",
            "filename": "turbopack/crates/turbopack-core/src/chunk/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmod.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -90,7 +90,7 @@ pub struct ModuleIds(Vec<ResolvedVc<ModuleId>>);\n \n /// A [Module] that can be converted into a [Chunk].\n #[turbo_tasks::value_trait]\n-pub trait ChunkableModule: Module + Asset {\n+pub trait ChunkableModule: Module {\n     #[turbo_tasks::function]\n     fn as_chunk_item(\n         self: Vc<Self>,\n@@ -115,7 +115,7 @@ impl ChunkableModules {\n // with other module types (as a MergeableModule cannot prevent itself from being merged with other\n // module types)\n #[turbo_tasks::value_trait]\n-pub trait MergeableModule: Module + Asset {\n+pub trait MergeableModule: Module {\n     /// Even though MergeableModule is implemented, this allows a dynamic condition to determine\n     /// mergeability\n     #[turbo_tasks::function]"
        },
        {
            "sha": "de76e6426ac9aadeef95cc5e9347cf7938f60c6b",
            "filename": "turbopack/crates/turbopack-core/src/introspect/module.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -33,8 +33,12 @@ impl Introspectable for IntrospectableModule {\n     }\n \n     #[turbo_tasks::function]\n-    fn details(&self) -> Vc<RcStr> {\n-        content_to_details(self.0.content())\n+    async fn details(&self) -> Result<Vc<RcStr>> {\n+        if let Some(source) = *self.0.source().await? {\n+            Ok(content_to_details(source.content()))\n+        } else {\n+            Ok(Vc::cell(\"No source\".into()))\n+        }\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "9e104a923bcbe16f47c3d4bae80a03c12bfd52d8",
            "filename": "turbopack/crates/turbopack-core/src/module.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -2,7 +2,7 @@ use turbo_rcstr::RcStr;\n use turbo_tasks::{ResolvedVc, TaskInput, ValueToString, Vc};\n use turbo_tasks_fs::glob::Glob;\n \n-use crate::{asset::Asset, ident::AssetIdent, reference::ModuleReferences, source::OptionSource};\n+use crate::{ident::AssetIdent, reference::ModuleReferences, source::OptionSource};\n \n #[derive(Clone, Copy, Debug, TaskInput, Hash)]\n #[turbo_tasks::value(shared)]\n@@ -14,7 +14,7 @@ pub enum StyleType {\n /// A module. This usually represents parsed source code, which has references\n /// to other modules.\n #[turbo_tasks::value_trait]\n-pub trait Module: Asset {\n+pub trait Module {\n     /// The identifier of the [Module]. It's expected to be unique and capture\n     /// all properties of the [Module].\n     #[turbo_tasks::function]\n@@ -55,7 +55,7 @@ pub trait Module: Asset {\n }\n \n #[turbo_tasks::value_trait]\n-pub trait StyleModule: Module + Asset {\n+pub trait StyleModule: Module {\n     /// The style type of the module.\n     #[turbo_tasks::function]\n     fn style_type(&self) -> Vc<StyleType>;"
        },
        {
            "sha": "675264a58e9008f674e764a1ce6f32d920fd1d4a",
            "filename": "turbopack/crates/turbopack-core/src/node_addon_module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fnode_addon_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fnode_addon_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fnode_addon_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -7,7 +7,6 @@ use turbo_tasks::{FxIndexSet, ResolvedVc, TryJoinIterExt, Vc};\n use turbo_tasks_fs::{FileSystemEntryType, FileSystemPath};\n \n use crate::{\n-    asset::{Asset, AssetContent},\n     file_source::FileSource,\n     ident::AssetIdent,\n     module::Module,\n@@ -102,14 +101,6 @@ impl Module for NodeAddonModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for NodeAddonModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::function]\n async fn dir_references(package_dir: FileSystemPath) -> Result<Vc<ModuleReferences>> {\n     let matches = read_matches("
        },
        {
            "sha": "4bc4627092a12de90c8631ce025c0178b509e2eb",
            "filename": "turbopack/crates/turbopack-core/src/raw_module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fraw_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fraw_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fraw_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -1,7 +1,6 @@\n use turbo_tasks::{ResolvedVc, Vc};\n \n use crate::{\n-    asset::{Asset, AssetContent},\n     ident::AssetIdent,\n     module::Module,\n     source::{OptionSource, Source},\n@@ -27,14 +26,6 @@ impl Module for RawModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for RawModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl RawModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "8f2d38f3efca1ad84e9256f3ec03ede4fbcbec39",
            "filename": "turbopack/crates/turbopack-core/src/rebase.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 4,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Frebase.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Frebase.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Frebase.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -1,7 +1,7 @@\n use std::hash::Hash;\n \n-use anyhow::Result;\n-use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n+use anyhow::{Result, bail};\n+use turbo_tasks::{ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n use crate::{\n@@ -74,7 +74,14 @@ impl OutputAsset for RebasedAsset {\n #[turbo_tasks::value_impl]\n impl Asset for RebasedAsset {\n     #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.module.content()\n+    async fn content(&self) -> Result<Vc<AssetContent>> {\n+        if let Some(source) = *self.module.source().await? {\n+            Ok(source.content())\n+        } else {\n+            bail!(\n+                \"Module {} has no source\",\n+                self.module.ident().to_string().await?\n+            )\n+        }\n     }\n }"
        },
        {
            "sha": "1202526eccc406f709d96b00368f868eb6a2be58",
            "filename": "turbopack/crates/turbopack-core/src/traced_asset.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 4,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftraced_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftraced_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftraced_asset.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -1,5 +1,5 @@\n-use anyhow::Result;\n-use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n+use anyhow::{Result, bail};\n+use turbo_tasks::{ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n use crate::{\n@@ -54,7 +54,14 @@ impl OutputAsset for TracedAsset {\n #[turbo_tasks::value_impl]\n impl Asset for TracedAsset {\n     #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.module.content()\n+    async fn content(&self) -> Result<Vc<AssetContent>> {\n+        if let Some(source) = *self.module.source().await? {\n+            Ok(source.content())\n+        } else {\n+            bail!(\n+                \"Module {} has no source\",\n+                self.module.ident().to_string().await?,\n+            )\n+        }\n     }\n }"
        },
        {
            "sha": "368e76d82c02aae85ab26644d8688084e9fd321f",
            "filename": "turbopack/crates/turbopack-css/src/asset.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fasset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fasset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fasset.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{IntoTraitRef, ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, MinifyType},\n     context::AssetContext,\n     environment::Environment,\n@@ -166,14 +165,6 @@ impl StyleModule for CssModuleAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for CssModuleAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for CssModuleAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "7621c0b41e6479a8a2392afefc06570aa3c0bd4c",
            "filename": "turbopack/crates/turbopack-css/src/chunk/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -437,7 +437,7 @@ impl GenerateSourceMap for CssChunk {\n \n // TODO: remove\n #[turbo_tasks::value_trait]\n-pub trait CssChunkPlaceable: ChunkableModule + Module + Asset {}\n+pub trait CssChunkPlaceable: ChunkableModule + Module {}\n \n #[derive(Clone, Debug)]\n #[turbo_tasks::value(shared)]"
        },
        {
            "sha": "6859bf617ae9164768de550c58f80d3ee2c887b5",
            "filename": "turbopack/crates/turbopack-css/src/embed.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fembed.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fembed.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fembed.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -1,8 +1,8 @@\n use turbo_tasks::Vc;\n-use turbopack_core::{asset::Asset, chunk::ChunkingContext, module::Module, output::OutputAsset};\n+use turbopack_core::{chunk::ChunkingContext, module::Module, output::OutputAsset};\n \n #[turbo_tasks::value_trait]\n-pub trait CssEmbed: Module + Asset {\n+pub trait CssEmbed: Module {\n     #[turbo_tasks::function]\n     fn embedded_asset(\n         self: Vc<Self>,"
        },
        {
            "sha": "93e1aad721267f8b1c5af5286f3baae050d7a0a8",
            "filename": "turbopack/crates/turbopack-css/src/module_asset.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -8,7 +8,6 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, IntoTraitRef, ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{FileSystemPath, rope::Rope};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     context::{AssetContext, ProcessResult},\n     ident::AssetIdent,\n@@ -113,14 +112,6 @@ impl Module for ModuleCssAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for ModuleCssAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n /// A CSS class that is exported from a CSS module.\n ///\n /// See [`ModuleCssClasses`] for more information."
        },
        {
            "sha": "ae3d3ddd2aaa3c88da6b637c5b209b08581c8eaf",
            "filename": "turbopack/crates/turbopack-ecmascript/src/async_chunk/module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkableModule, ChunkingContext, availability_info::AvailabilityInfo},\n     ident::AssetIdent,\n     module::Module,\n@@ -76,14 +75,6 @@ impl Module for AsyncLoaderModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for AsyncLoaderModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        panic!(\"content() should not be called\");\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for AsyncLoaderModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "37b9a7feb6268d13d5e0f691566c38b8f183324d",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/placeable.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -24,7 +24,7 @@ use crate::references::{\n };\n \n #[turbo_tasks::value_trait]\n-pub trait EcmascriptChunkPlaceable: ChunkableModule + Module + Asset {\n+pub trait EcmascriptChunkPlaceable: ChunkableModule + Module {\n     #[turbo_tasks::function]\n     fn get_exports(self: Vc<Self>) -> Vc<EcmascriptExports>;\n     #[turbo_tasks::function]"
        },
        {
            "sha": "478c9f2e825c4c0a489e9e43703c534efe5c22a6",
            "filename": "turbopack/crates/turbopack-ecmascript/src/inlined_bytes_module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -5,7 +5,7 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{FileContent, glob::Glob, rope::RopeBuilder};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n+    asset::Asset,\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     ident::AssetIdent,\n     module::Module,\n@@ -59,14 +59,6 @@ impl Module for InlinedBytesJsModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for InlinedBytesJsModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for InlinedBytesJsModule {\n     #[turbo_tasks::function]\n@@ -128,7 +120,7 @@ impl ChunkItem for InlinedBytesJsChunkItem {\n impl EcmascriptChunkItem for InlinedBytesJsChunkItem {\n     #[turbo_tasks::function]\n     async fn content(&self) -> Result<Vc<EcmascriptChunkItemContent>> {\n-        let content = self.module.content().file_content().await?;\n+        let content = self.module.await?.source.content().file_content().await?;\n         match &*content {\n             FileContent::Content(data) => {\n                 let mut inner_code = RopeBuilder::default();"
        },
        {
            "sha": "71f6e874f50e59352b07215af0a8de3a78249b49",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 10,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -90,7 +90,6 @@ use turbo_tasks::{\n };\n use turbo_tasks_fs::{FileJsonContent, FileSystemPath, glob::Glob, rope::Rope};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkItem, ChunkType, ChunkableModule, ChunkingContext, EvaluatableAsset,\n         MergeableModule, MergeableModuleExposure, MergeableModules, MergeableModulesExposed,\n@@ -403,7 +402,7 @@ pub trait EcmascriptParsable {\n }\n \n #[turbo_tasks::value_trait]\n-pub trait EcmascriptAnalyzable: Module + Asset {\n+pub trait EcmascriptAnalyzable: Module {\n     #[turbo_tasks::function]\n     fn analyze(self: Vc<Self>) -> Vc<AnalyzeEcmascriptModuleResult>;\n \n@@ -774,14 +773,6 @@ impl Module for EcmascriptModuleAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for EcmascriptModuleAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for EcmascriptModuleAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "36067a4f46b5367a30f6e606ea159c8f3976d2ac",
            "filename": "turbopack/crates/turbopack-ecmascript/src/manifest/chunk_asset.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{\n         ChunkableModule, ChunkingContext, ChunkingContextExt, availability_info::AvailabilityInfo,\n     },\n@@ -162,14 +161,6 @@ impl Module for ManifestAsyncModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for ManifestAsyncModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        panic!(\"content() should not be called\");\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for ManifestAsyncModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "5b72454979e79c36694dff6f04c0d83b4d787d37",
            "filename": "turbopack/crates/turbopack-ecmascript/src/merged_module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -1,7 +1,6 @@\n use anyhow::{Context, Result};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkItem, ChunkType, ChunkableModule, ChunkingContext,\n         MergeableModuleExposure, MergeableModules, MergeableModulesExposed,\n@@ -60,14 +59,6 @@ impl MergedEcmascriptModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for MergedEcmascriptModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        panic!(\"content() should not be called\");\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl Module for MergedEcmascriptModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "12eb45f2e30e6899831fe30ee487f331a9842752",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/external_module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 20,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -4,9 +4,8 @@ use anyhow::Result;\n use serde::{Deserialize, Serialize};\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{NonLocalValue, ResolvedVc, TaskInput, TryJoinIterExt, Vc, trace::TraceRawVcs};\n-use turbo_tasks_fs::{FileContent, FileSystem, VirtualFileSystem, glob::Glob, rope::RopeBuilder};\n+use turbo_tasks_fs::{FileSystem, VirtualFileSystem, glob::Glob, rope::RopeBuilder};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{AsyncModuleInfo, ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     ident::{AssetIdent, Layer},\n     module::Module,\n@@ -313,15 +312,6 @@ impl Module for CachedExternalModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for CachedExternalModule {\n-    #[turbo_tasks::function]\n-    fn content(self: Vc<Self>) -> Vc<AssetContent> {\n-        // should be `NotFound` as this function gets called to detect source changes\n-        AssetContent::file(FileContent::NotFound.cell())\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for CachedExternalModule {\n     #[turbo_tasks::function]\n@@ -445,14 +435,6 @@ impl ModuleWithoutSelfAsync {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for ModuleWithoutSelfAsync {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.module.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl Module for ModuleWithoutSelfAsync {\n     #[turbo_tasks::function]\n@@ -462,7 +444,7 @@ impl Module for ModuleWithoutSelfAsync {\n \n     #[turbo_tasks::function]\n     fn source(&self) -> Vc<turbopack_core::source::OptionSource> {\n-        Vc::cell(None)\n+        self.module.source()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "a01febe9287b41591392be29830a5af2082d7849",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/require_context.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -21,7 +21,6 @@ use turbo_tasks::{\n };\n use turbo_tasks_fs::{DirectoryContent, DirectoryEntry, FileSystemPath, glob::Glob};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{\n         ChunkItem, ChunkType, ChunkableModule, ChunkableModuleReference, ChunkingContext,\n         MinifyType, ModuleChunkItemIdExt,\n@@ -436,14 +435,6 @@ impl Module for RequireContextAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for RequireContextAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        unimplemented!()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for RequireContextAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "48de2d0b226f044de167ffb5c62cf3dff005200a",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/facade/module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 12,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -2,9 +2,8 @@ use std::collections::BTreeMap;\n \n use anyhow::{Result, bail};\n use turbo_tasks::{ResolvedVc, Vc};\n-use turbo_tasks_fs::{File, FileContent, glob::Glob};\n+use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkableModule, ChunkingContext, EvaluatableAsset, MergeableModule,\n         MergeableModules, MergeableModulesExposed,\n@@ -198,16 +197,6 @@ impl Module for EcmascriptModuleFacadeModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for EcmascriptModuleFacadeModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        let f = File::from(\"\");\n-\n-        AssetContent::file(FileContent::Content(f).cell())\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl EcmascriptAnalyzable for EcmascriptModuleFacadeModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "c2aed17e09a820708947242007a55bb5e8a190d4",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/locals/module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -4,7 +4,6 @@ use anyhow::{Result, bail};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkableModule, ChunkingContext, MergeableModule, MergeableModules,\n         MergeableModulesExposed,\n@@ -79,14 +78,6 @@ impl Module for EcmascriptModuleLocalsModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for EcmascriptModuleLocalsModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.module.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl EcmascriptAnalyzable for EcmascriptModuleLocalsModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "8cac080b3cb35f137422aec21442979ad8aca43b",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/asset.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{AsyncModuleInfo, ChunkableModule, ChunkingContext, EvaluatableAsset},\n     context::AssetContext,\n     ident::AssetIdent,\n@@ -366,14 +365,6 @@ impl Module for EcmascriptModulePartAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for EcmascriptModulePartAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.full_module.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl EcmascriptChunkPlaceable for EcmascriptModulePartAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "ab60a72a44e7800954bf3a7b9e5baeac1e8fe867",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/side_effect_module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 17,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -1,9 +1,8 @@\n use anyhow::Result;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n-use turbo_tasks_fs::{FileContent, glob::Glob};\n+use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkableModule, ChunkingContext, EvaluatableAsset},\n     ident::AssetIdent,\n     module::Module,\n@@ -119,21 +118,6 @@ impl Module for SideEffectsModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for SideEffectsModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        AssetContent::File(\n-            FileContent::Content(\n-                \"// This is a proxy module for reexportings a module with additional side effects.\"\n-                    .into(),\n-            )\n-            .resolved_cell(),\n-        )\n-        .cell()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl EcmascriptChunkPlaceable for SideEffectsModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "c086ef4aa6c5f1b6df1335cceb36da0a9c2d4827",
            "filename": "turbopack/crates/turbopack-ecmascript/src/typescript/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -4,7 +4,7 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::DirectoryContent;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n+    asset::Asset,\n     ident::AssetIdent,\n     module::Module,\n     raw_module::RawModule,\n@@ -180,14 +180,6 @@ impl Module for TsConfigModuleAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for TsConfigModuleAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value]\n #[derive(Hash, Debug)]\n pub struct CompilerReference {"
        },
        {
            "sha": "ccc4326bf455e4ee644efe0ea3246a0fde3e80a5",
            "filename": "turbopack/crates/turbopack-ecmascript/src/webpack/mod.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use swc_core::ecma::ast::Lit;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     file_source::FileSource,\n     ident::AssetIdent,\n     module::Module,\n@@ -66,14 +65,6 @@ impl Module for WebpackModuleAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for WebpackModuleAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value(shared)]\n pub struct WebpackChunkAssetReference {\n     #[turbo_tasks(trace_ignore)]"
        },
        {
            "sha": "00bf4ad2ed2a227cecafb9a9e29117a7dad6994a",
            "filename": "turbopack/crates/turbopack-ecmascript/src/worker_chunk/module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{\n         ChunkGroupType, ChunkableModule, ChunkableModuleReference, ChunkingContext, ChunkingType,\n         ChunkingTypeOption,\n@@ -67,14 +66,6 @@ impl Module for WorkerLoaderModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for WorkerLoaderModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        panic!(\"content() should not be called\");\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for WorkerLoaderModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "d2539c0f44de4ff146c6b4f2c6c651b3de1f3adb",
            "filename": "turbopack/crates/turbopack-json/src/lib.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -16,7 +16,7 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{FileContent, FileJsonContent, glob::Glob};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n+    asset::Asset,\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     code_builder::CodeBuilder,\n     ident::AssetIdent,\n@@ -67,14 +67,6 @@ impl Module for JsonModuleAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for JsonModuleAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for JsonModuleAsset {\n     #[turbo_tasks::function]\n@@ -138,7 +130,7 @@ impl EcmascriptChunkItem for JsonChunkItem {\n     async fn content(&self) -> Result<Vc<EcmascriptChunkItemContent>> {\n         // We parse to JSON and then stringify again to ensure that the\n         // JSON is valid.\n-        let content = self.module.content().file_content();\n+        let content = self.module.await?.source.content().file_content();\n         let data = content.parse_json().await?;\n         match &*data {\n             FileJsonContent::Content(data) => {"
        },
        {
            "sha": "e0cf1294e1cd73c9ddb1686cc2164db61803e114",
            "filename": "turbopack/crates/turbopack-static/src/css.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 14,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -2,12 +2,7 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n-    chunk::ChunkingContext,\n-    ident::AssetIdent,\n-    module::Module,\n-    output::OutputAsset,\n-    source::Source,\n+    chunk::ChunkingContext, ident::AssetIdent, module::Module, output::OutputAsset, source::Source,\n };\n use turbopack_css::embed::CssEmbed;\n \n@@ -61,14 +56,6 @@ impl Module for StaticUrlCssModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for StaticUrlCssModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl CssEmbed for StaticUrlCssModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "07ccd5ff46f06987c848335b5cefe30ae9207ff1",
            "filename": "turbopack/crates/turbopack-static/src/ecma.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     ident::AssetIdent,\n     module::Module,\n@@ -73,14 +72,6 @@ impl Module for StaticUrlJsModule {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for StaticUrlJsModule {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for StaticUrlJsModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "0e554fbb12d6703b055e75ce84890aa7faab07de",
            "filename": "turbopack/crates/turbopack-wasm/src/module_asset.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -3,7 +3,6 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{IntoTraitRef, ResolvedVc, Vc, fxindexmap};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkItem, ChunkType, ChunkableModule, ChunkingContext,\n         chunk_group::references_to_output_assets,\n@@ -146,14 +145,6 @@ impl Module for WebAssemblyModuleAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for WebAssemblyModuleAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for WebAssemblyModuleAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "7bcf8c56e5440c5897ba5a4ddc4c11f55fec4b98",
            "filename": "turbopack/crates/turbopack-wasm/src/raw.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fraw.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/afec7a52ddedc107f7f8c16ea1ed836dfc633a6f/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fraw.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fraw.rs?ref=afec7a52ddedc107f7f8c16ea1ed836dfc633a6f",
            "patch": "@@ -2,7 +2,6 @@ use anyhow::{Result, bail};\n use turbo_rcstr::rcstr;\n use turbo_tasks::{IntoTraitRef, ResolvedVc, Vc};\n use turbopack_core::{\n-    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     context::AssetContext,\n     ident::AssetIdent,\n@@ -66,14 +65,6 @@ impl Module for RawWebAssemblyModuleAsset {\n     }\n }\n \n-#[turbo_tasks::value_impl]\n-impl Asset for RawWebAssemblyModuleAsset {\n-    #[turbo_tasks::function]\n-    fn content(&self) -> Vc<AssetContent> {\n-        self.source.content()\n-    }\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkableModule for RawWebAssemblyModuleAsset {\n     #[turbo_tasks::function]"
        }
    ],
    "stats": {
        "total": 412,
        "additions": 82,
        "deletions": 330
    }
}