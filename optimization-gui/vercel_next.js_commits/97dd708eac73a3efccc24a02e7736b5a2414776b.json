{
    "author": "sokra",
    "message": "Turbopack: mark more modules as side effect free (#86136)\n\n### What?\n\nThese modules can be always side effect free.",
    "sha": "97dd708eac73a3efccc24a02e7736b5a2414776b",
    "files": [
        {
            "sha": "09941275e6f80520e73f7d9a80acbf8b0e06d288",
            "filename": "turbopack/crates/turbopack-ecmascript/src/async_chunk/module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs?ref=97dd708eac73a3efccc24a02e7736b5a2414776b",
            "patch": "@@ -1,6 +1,7 @@\n use anyhow::Result;\n use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n+use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n     asset::{Asset, AssetContent},\n     chunk::{ChunkableModule, ChunkingContext, availability_info::AvailabilityInfo},\n@@ -60,6 +61,14 @@ impl Module for AsyncLoaderModule {\n             .await?,\n         )]))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "9b1d517998fc883ffd4fdc798f12d3d061a0d5e1",
            "filename": "turbopack/crates/turbopack-ecmascript/src/manifest/chunk_asset.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs?ref=97dd708eac73a3efccc24a02e7736b5a2414776b",
            "patch": "@@ -1,6 +1,7 @@\n use anyhow::Result;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n+use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n     asset::{Asset, AssetContent},\n     chunk::{\n@@ -146,6 +147,14 @@ impl Module for ManifestAsyncModule {\n                 .await?,\n         ))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "7156e2eb32b57e8c11a228853fb2ed3b1940b519",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/require_context.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs?ref=97dd708eac73a3efccc24a02e7736b5a2414776b",
            "patch": "@@ -19,7 +19,7 @@ use turbo_tasks::{\n     FxIndexMap, NonLocalValue, ResolvedVc, ValueToString, Vc, debug::ValueDebugFormat,\n     trace::TraceRawVcs,\n };\n-use turbo_tasks_fs::{DirectoryContent, DirectoryEntry, FileSystemPath};\n+use turbo_tasks_fs::{DirectoryContent, DirectoryEntry, FileSystemPath, glob::Glob};\n use turbopack_core::{\n     asset::{Asset, AssetContent},\n     chunk::{\n@@ -421,6 +421,14 @@ impl Module for RequireContextAsset {\n                 .collect(),\n         ))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "aa52ee45dfe4b818c906155539f5743b58f69307",
            "filename": "turbopack/crates/turbopack-ecmascript/src/worker_chunk/module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs?ref=97dd708eac73a3efccc24a02e7736b5a2414776b",
            "patch": "@@ -1,6 +1,7 @@\n use anyhow::Result;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n+use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n     asset::{Asset, AssetContent},\n     chunk::{\n@@ -51,6 +52,14 @@ impl Module for WorkerLoaderModule {\n                 .await?,\n         )]))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "d44adc0e6959bbe7d7f92525c6c9569530c93bfe",
            "filename": "turbopack/crates/turbopack-static/src/css.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs?ref=97dd708eac73a3efccc24a02e7736b5a2414776b",
            "patch": "@@ -1,5 +1,6 @@\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n+use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n     asset::{Asset, AssetContent},\n     chunk::ChunkingContext,\n@@ -45,6 +46,14 @@ impl Module for StaticUrlCssModule {\n         }\n         ident\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "3f76811d617018d2c16bbab862d1f88825efefcc",
            "filename": "turbopack/crates/turbopack-static/src/ecma.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/97dd708eac73a3efccc24a02e7736b5a2414776b/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs?ref=97dd708eac73a3efccc24a02e7736b5a2414776b",
            "patch": "@@ -1,6 +1,7 @@\n use anyhow::Result;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n+use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n     asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n@@ -57,6 +58,14 @@ impl Module for StaticUrlJsModule {\n         }\n         ident\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 54,
        "deletions": 1
    }
}