{
    "author": "ztanner",
    "message": "[Turbopack] dedupe build errors (#85062)\n\nWhen we run the RSC validation transform, we might take multiple passes\non the same file if the edge runtime is used: once at the RSC layer,\nanother in the edge RSC layer. This means we'll have reported the error\ntwice for the same file. This dedupes errors by tracking the seen,\nformatted errors and not re-showing them if they've already been\ntracked.",
    "sha": "df102ae33ed4839f140ddbdc2df6aaa9eda24735",
    "files": [
        {
            "sha": "720ef925396a0e7e86d84a589ea8aa9e302ee9de",
            "filename": "packages/next/src/build/utils.ts",
            "status": "modified",
            "additions": 24,
            "deletions": 4,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "patch": "@@ -200,21 +200,41 @@ export function printBuildErrors(\n   // Issues that are warnings but should not affect the running of the build\n   const topLevelWarnings = []\n \n+  // Track seen formatted error messages to avoid duplicates\n+  const seenFatalIssues = new Set<string>()\n+  const seenErrors = new Set<string>()\n+  const seenWarnings = new Set<string>()\n+\n   for (const issue of entrypoints.issues) {\n     // We only want to completely shut down the server\n     if (issue.severity === 'fatal' || issue.severity === 'bug') {\n-      topLevelFatalIssues.push(formatIssue(issue))\n+      const formatted = formatIssue(issue)\n+      if (!seenFatalIssues.has(formatted)) {\n+        seenFatalIssues.add(formatted)\n+        topLevelFatalIssues.push(formatted)\n+      }\n     } else if (isRelevantWarning(issue)) {\n-      topLevelWarnings.push(formatIssue(issue))\n+      const formatted = formatIssue(issue)\n+      if (!seenWarnings.has(formatted)) {\n+        seenWarnings.add(formatted)\n+        topLevelWarnings.push(formatted)\n+      }\n     } else if (issue.severity === 'error') {\n+      const formatted = formatIssue(issue)\n       if (isDev) {\n         // We want to treat errors as recoverable in development\n         // so that we can show the errors in the site and allow users\n         // to respond to the errors when necessary. In production builds\n         // though we want to error out and stop the build process.\n-        topLevelErrors.push(formatIssue(issue))\n+        if (!seenErrors.has(formatted)) {\n+          seenErrors.add(formatted)\n+          topLevelErrors.push(formatted)\n+        }\n       } else {\n-        topLevelFatalIssues.push(formatIssue(issue))\n+        if (!seenFatalIssues.has(formatted)) {\n+          seenFatalIssues.add(formatted)\n+          topLevelFatalIssues.push(formatted)\n+        }\n       }\n     }\n   }"
        },
        {
            "sha": "a62a89b4fb50020fb8736dd64fb4e28a369966a0",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/cache-components-edge-deduplication.test.ts",
            "status": "added",
            "additions": 77,
            "deletions": 0,
            "changes": 77,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-edge-deduplication.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-edge-deduplication.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-edge-deduplication.test.ts?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "patch": "@@ -0,0 +1,77 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+// Only Turbopack runs the transform on the layout once in edge and non-edge contexts\n+// so we only test this on Turbopack\n+import {\n+  assertHasRedbox,\n+  getRedboxDescription,\n+  getRedboxSource,\n+} from 'next-test-utils'\n+;(process.env.IS_TURBOPACK_TEST ? describe : describe.skip)(\n+  'cache-components-edge-deduplication',\n+  () => {\n+    const { next, skipped, isNextDev } = nextTestSetup({\n+      files: __dirname + '/fixtures/edge-deduplication',\n+      skipStart: true,\n+      skipDeployment: true,\n+    })\n+\n+    if (skipped) {\n+      return\n+    }\n+\n+    it('should not duplicate errors when layout is compiled for both edge and non-edge contexts', async () => {\n+      try {\n+        await next.start()\n+      } catch {\n+        // we expect the build to fail\n+      }\n+\n+      if (isNextDev) {\n+        const browser = await next.browser('/edge-with-layout/edge')\n+        assertHasRedbox(browser)\n+        const redbox = {\n+          description: await getRedboxDescription(browser),\n+          source: await getRedboxSource(browser),\n+        }\n+        expect(redbox.description).toMatchInlineSnapshot(\n+          `\"Ecmascript file had an error\"`\n+        )\n+        expect(redbox.source).toMatchInlineSnapshot(`\n+         \"./app/edge-with-layout/edge/page.tsx (1:14)\n+         Ecmascript file had an error\n+         > 1 | export const runtime = 'edge'\n+             |              ^^^^^^^\n+           2 |\n+           3 | export default function Page() {\n+           4 |   return <div>Test page under app/</div>\n+\n+         Route segment config \"runtime\" is not compatible with \\`nextConfig.cacheComponents\\`. Please remove it.\"\n+        `)\n+        // Count occurrences of the layout error at the specific location\n+        const layoutErrorMatches = next.cliOutput.match(\n+          /\\.\\/app\\/edge-with-layout\\/layout\\.tsx:1:14/g\n+        )\n+        // We don't show an error stack, just the individual error messages at each location\n+        expect(layoutErrorMatches?.length).toBe(1)\n+      } else {\n+        // Check that both the layout and edge page errors appear\n+        expect(next.cliOutput).toContain('./app/edge-with-layout/layout.tsx')\n+        expect(next.cliOutput).toContain('./app/edge-with-layout/edge/page.tsx')\n+        expect(next.cliOutput).toContain(\n+          '\"dynamic\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n+        )\n+        expect(next.cliOutput).toContain(\n+          '\"runtime\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n+        )\n+        // Count occurrences of the layout error at the specific location\n+        const layoutErrorMatches = next.cliOutput.match(\n+          /\\.\\/app\\/layout\\.tsx:1:14/g\n+        )\n+\n+        // Should appear exactly twice: once in the formatted error message, once in the stack trace\n+        expect(layoutErrorMatches?.length).toBe(2)\n+      }\n+    })\n+  }\n+)"
        },
        {
            "sha": "2188e7f9646d5109e0a198dea1e4c0b98ef2bb9f",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/cache-components-segment-configs.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "patch": "@@ -8,7 +8,7 @@ import {\n \n describe('cache-components-segment-configs', () => {\n   const { next, skipped, isNextDev, isTurbopack } = nextTestSetup({\n-    files: __dirname,\n+    files: __dirname + '/fixtures/default',\n     skipStart: true,\n     skipDeployment: true,\n   })"
        },
        {
            "sha": "fc72c63b684251b2d968795c166ede9341aedc29",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/dynamic-params/[slug]/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic-params%2F%5Bslug%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic-params%2F%5Bslug%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic-params%2F%5Bslug%5D%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/dynamic-params/[slug]/page.tsx"
        },
        {
            "sha": "ca860ef7aa415e2e48cb7d217f2efe6ea282631f",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/dynamic/nested/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic%2Fnested%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic%2Fnested%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic%2Fnested%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/dynamic/nested/page.tsx"
        },
        {
            "sha": "ca860ef7aa415e2e48cb7d217f2efe6ea282631f",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/dynamic/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fdynamic%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/dynamic/page.tsx"
        },
        {
            "sha": "3ede1de25fc47fd376f292339b9d358bc9d58f7b",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/fetch-cache/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Ffetch-cache%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Ffetch-cache%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Ffetch-cache%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/fetch-cache/page.tsx"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Flayout.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/layout.tsx"
        },
        {
            "sha": "b3d4c9a504047bb11c54e5fdfb527cd4129d10c9",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/multiple/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fmultiple%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fmultiple%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fmultiple%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/multiple/page.tsx"
        },
        {
            "sha": "0bd21c5bac776b2207e1e01878c12fde935a2dde",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/page.tsx"
        },
        {
            "sha": "833c8f8a9db3e231b94ddabd5908382a91f8dd76",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/revalidate/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Frevalidate%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Frevalidate%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Frevalidate%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/revalidate/page.tsx"
        },
        {
            "sha": "b35e0e7a683831bdab7954034564b3a338e76a52",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/app/runtime/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fruntime%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fruntime%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fapp%2Fruntime%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/app/runtime/page.tsx"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/default/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fdefault%2Fnext.config.js?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "previous_filename": "test/e2e/app-dir/cache-components-segment-configs/next.config.js"
        },
        {
            "sha": "dbee80d8b986ce693a427e2827e5cb189142e3c2",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/edge-deduplication/app/edge-with-layout/edge/page.tsx",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fedge-with-layout%2Fedge%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fedge-with-layout%2Fedge%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fedge-with-layout%2Fedge%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "patch": "@@ -0,0 +1,5 @@\n+export const runtime = 'edge'\n+\n+export default function Page() {\n+  return <div>Test page under app/</div>\n+}"
        },
        {
            "sha": "95192bf538e1099b6cc5d2d562fab06a66eadbe8",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/edge-deduplication/app/edge-with-layout/layout.tsx",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fedge-with-layout%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fedge-with-layout%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fedge-with-layout%2Flayout.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "patch": "@@ -0,0 +1,5 @@\n+export const dynamic = 'force-dynamic'\n+\n+export default function Layout({ children }: { children: React.ReactNode }) {\n+  return <div>{children}</div>\n+}"
        },
        {
            "sha": "361402314b2f83ad12e825b344c76d74300e439b",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/edge-deduplication/app/layout.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Flayout.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "patch": "@@ -0,0 +1,11 @@\n+export const dynamic = 'force-dynamic'\n+\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "0ea792fc5ececc5f328d5f2acacf3acfcb454d53",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/edge-deduplication/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fapp%2Fpage.tsx?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <div>Home</div>\n+}"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/fixtures/edge-deduplication/next.config.js",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/df102ae33ed4839f140ddbdc2df6aaa9eda24735/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Ffixtures%2Fedge-deduplication%2Fnext.config.js?ref=df102ae33ed4839f140ddbdc2df6aaa9eda24735",
            "patch": "@@ -0,0 +1,8 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+const nextConfig = {\n+  cacheComponents: true,\n+}\n+\n+module.exports = nextConfig"
        }
    ],
    "stats": {
        "total": 139,
        "additions": 134,
        "deletions": 5
    }
}