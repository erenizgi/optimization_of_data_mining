{
    "author": "kdy1",
    "message": "build(turbopack): Update `swc_core` to `v27.0.1` (#80338)\n\n### What?\n\nChangeLog: https://github.com/swc-project/swc/compare/swc_core%40v26.4.4...swc_core%40v27.0.1\n\nChangeLog for plugins: https://github.com/swc-project/plugins/pull/466\n\n### Why?\n\nApply `swc_sourcemap` performance optimization.",
    "sha": "60fb2f1c0ca381df16c56856257b3e20c21af0e0",
    "files": [
        {
            "sha": "77173ed590f365d694ba144f6e2d3e2911c674a6",
            "filename": "Cargo.lock",
            "status": "modified",
            "additions": 193,
            "deletions": 280,
            "changes": 473,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/Cargo.lock",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/Cargo.lock",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.lock?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -574,9 +574,9 @@ dependencies = [\n \n [[package]]\n name = \"binding_macros\"\n-version = \"25.0.0\"\n+version = \"26.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"c23c0cf9351aa158baee33c9dea1870a0f21393375cf00b2a6170ad7f477aa1b\"\n+checksum = \"428642de120b71cd9c9d0668e81791d4c8b646b28ce9e093cb8ba42d868aa2ef\"\n dependencies = [\n  \"anyhow\",\n  \"console_error_panic_hook\",\n@@ -792,13 +792,24 @@ checksum = \"1fd0f2584146f6f2ef48085050886acf353beff7305ebd1ae69500e27c67f64b\"\n \n [[package]]\n name = \"bytes\"\n-version = \"1.9.0\"\n+version = \"1.10.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"325918d6fe32f23b19878fe4b34794ae41fc19ddbe53b10571a4874d44ffd39b\"\n+checksum = \"d71b6127be86fdcfddb610f7182ac57211d4b18a3e9c82eb2d17662f2227ad6a\"\n dependencies = [\n  \"serde\",\n ]\n \n+[[package]]\n+name = \"bytes-str\"\n+version = \"0.2.6\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"95ea3da8de225a11bcd5cee66b00eddcc7fd03e55bbe839fa4735d3281afb758\"\n+dependencies = [\n+ \"bytes\",\n+ \"rkyv 0.8.9\",\n+ \"serde\",\n+]\n+\n [[package]]\n name = \"bytesize\"\n version = \"1.3.0\"\n@@ -1782,17 +1793,6 @@ dependencies = [\n  \"serde\",\n ]\n \n-[[package]]\n-name = \"derivative\"\n-version = \"2.2.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"fcc3dd5e9e9c0b295d6e1e4d811fb6f157d5ffd784b8d202fc62eac8035a770b\"\n-dependencies = [\n- \"proc-macro2\",\n- \"quote\",\n- \"syn 1.0.109\",\n-]\n-\n [[package]]\n name = \"derive_builder\"\n version = \"0.12.0\"\n@@ -2693,7 +2693,7 @@ dependencies = [\n  \"httpdate\",\n  \"itoa\",\n  \"pin-project-lite\",\n- \"socket2 0.5.10\",\n+ \"socket2 0.4.9\",\n  \"tokio\",\n  \"tower-service\",\n  \"tracing\",\n@@ -3807,8 +3807,7 @@ dependencies = [\n [[package]]\n name = \"mdxjs\"\n version = \"1.0.3\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"93e707fe5e7f461e42315261846790d0a515285907ef533dc89408d5d79e395c\"\n+source = \"git+https://github.com/kdy1/mdxjs-rs.git?branch=swc-core-27#c6a48c2da7e179ab9ae1b73b253872b7f73ef798\"\n dependencies = [\n  \"markdown\",\n  \"rustc-hash 2.1.1\",\n@@ -3992,9 +3991,9 @@ dependencies = [\n \n [[package]]\n name = \"modularize_imports\"\n-version = \"0.86.0\"\n+version = \"0.87.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"bba76aa13e6547ba9d916c24db54e054dc12de089b77d5c93ba76a8402071c94\"\n+checksum = \"5b5d502101ea991433e6f07335b74c9c078c449b1e6af339b030961ba548e3ea\"\n dependencies = [\n  \"convert_case\",\n  \"handlebars\",\n@@ -4262,6 +4261,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"anyhow\",\n  \"base64 0.21.4\",\n+ \"bytes-str\",\n  \"chrono\",\n  \"easy-error\",\n  \"either\",\n@@ -5573,9 +5573,9 @@ dependencies = [\n \n [[package]]\n name = \"react_remove_properties\"\n-version = \"0.40.0\"\n+version = \"0.41.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ba0afc9ca3b8533c7f16fc01430d22c30d3ad730718bd83a8f84084132a5e6c7\"\n+checksum = \"5407a65d708c543413bb4787ecb62abd7b030fb7e14f75d788824f922056b321\"\n dependencies = [\n  \"serde\",\n  \"swc_atoms\",\n@@ -5701,9 +5701,9 @@ checksum = \"c707298afce11da2efef2f600116fa93ffa7a032b5d7b628aa17711ec81383ca\"\n \n [[package]]\n name = \"remove_console\"\n-version = \"0.41.0\"\n+version = \"0.42.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"6fefe25b383a78fa2299d9c32eb231b49c054e119add0c0eba650024c0e09097\"\n+checksum = \"6c59e5ebabb4efaefc920224dd6b90f30ba7ddc47e1a37034298500c1c6ef01c\"\n dependencies = [\n  \"serde\",\n  \"swc_atoms\",\n@@ -6680,23 +6680,6 @@ dependencies = [\n  \"windows-sys 0.52.0\",\n ]\n \n-[[package]]\n-name = \"sourcemap\"\n-version = \"9.2.2\"\n-source = \"git+https://github.com/kdy1/rust-sourcemap?branch=main#27e1bf8b92498425fbc6e2f31d2f755b6ae94f19\"\n-dependencies = [\n- \"base64-simd 0.8.0\",\n- \"bitvec\",\n- \"data-encoding\",\n- \"debugid\",\n- \"if_chain\",\n- \"rustc-hash 2.1.1\",\n- \"serde\",\n- \"serde_json\",\n- \"unicode-id-start\",\n- \"url\",\n-]\n-\n [[package]]\n name = \"spin\"\n version = \"0.5.2\"\n@@ -6807,9 +6790,9 @@ checksum = \"7da8b5736845d9f2fcb837ea5d9e2628564b3b043a70948a3f0b778838c5fb4f\"\n \n [[package]]\n name = \"styled_components\"\n-version = \"0.114.0\"\n+version = \"0.115.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1c4c07c72c3ac59d20689b5acf92b2c5fef06592c38a57bd547f69fb2722dbb6\"\n+checksum = \"3b7fa6ebd2ac0e1f61f0bf96b93d1a0408ddc8f351181ba9003763005a42f72e\"\n dependencies = [\n  \"Inflector\",\n  \"once_cell\",\n@@ -6826,9 +6809,9 @@ dependencies = [\n \n [[package]]\n name = \"styled_jsx\"\n-version = \"0.90.3\"\n+version = \"0.91.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"49ff886a0a4e71062203c04c3a0a053db7751dce0074e922571b07f2721b7d65\"\n+checksum = \"4eeb6bc4423bb2f48d3aad71b09e37ac704fa509b9ddb36540ca321cfb8e91da\"\n dependencies = [\n  \"anyhow\",\n  \"lightningcss\",\n@@ -6869,12 +6852,13 @@ checksum = \"804f44ed3c63152de6a9f90acbea1a110441de43006ea51bcce8f436196a288b\"\n \n [[package]]\n name = \"swc\"\n-version = \"25.0.0\"\n+version = \"26.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"707e7a089761c5f4661765cc38b689d795d67bb0810782cdece3997cd03a6e94\"\n+checksum = \"4c8c9c0708a941ebe3aa08a2070510cbf557ae2358776ae1daa9431c8ddc49e7\"\n dependencies = [\n  \"anyhow\",\n  \"base64 0.22.1\",\n+ \"bytes-str\",\n  \"dashmap 5.5.3\",\n  \"either\",\n  \"indexmap 2.7.1\",\n@@ -6891,7 +6875,6 @@ dependencies = [\n  \"rustc-hash 2.1.1\",\n  \"serde\",\n  \"serde_json\",\n- \"sourcemap\",\n  \"swc_atoms\",\n  \"swc_common\",\n  \"swc_compiler_base\",\n@@ -6914,6 +6897,7 @@ dependencies = [\n  \"swc_node_comments\",\n  \"swc_plugin_proxy\",\n  \"swc_plugin_runner\",\n+ \"swc_sourcemap\",\n  \"swc_timer\",\n  \"swc_transform_common\",\n  \"swc_typescript\",\n@@ -6980,14 +6964,15 @@ dependencies = [\n \n [[package]]\n name = \"swc_common\"\n-version = \"11.1.3\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"44c332906667b0fa98622f19a19e43afa5aa63b652813f80645dd0f33eca1fbb\"\n+checksum = \"84c376d04a9e50083b31962550590199c78a1c0f6b88e48ea9f46c95623074dc\"\n dependencies = [\n  \"anyhow\",\n  \"ast_node\",\n  \"better_scoped_tls\",\n  \"bytecheck 0.8.0\",\n+ \"bytes-str\",\n  \"cfg-if\",\n  \"either\",\n  \"from_variant\",\n@@ -7001,10 +6986,10 @@ dependencies = [\n  \"serde\",\n  \"shrink-to-fit\",\n  \"siphasher\",\n- \"sourcemap\",\n  \"swc_allocator\",\n  \"swc_atoms\",\n  \"swc_eq_ignore_macros\",\n+ \"swc_sourcemap\",\n  \"swc_visit\",\n  \"termcolor\",\n  \"tracing\",\n@@ -7014,20 +6999,20 @@ dependencies = [\n \n [[package]]\n name = \"swc_compiler_base\"\n-version = \"22.0.0\"\n+version = \"23.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3aef98ee955eac3339cb3a8152c64746196bd14919b41afdf2cc410c06e6cfee\"\n+checksum = \"e894a7fc45d1a34a8634e9a7e1a28d349e1f2525dec6ae7014835b279ddfb458\"\n dependencies = [\n  \"anyhow\",\n  \"base64 0.22.1\",\n+ \"bytes-str\",\n  \"napi\",\n  \"napi-derive\",\n  \"once_cell\",\n  \"pathdiff\",\n  \"rustc-hash 2.1.1\",\n  \"serde\",\n  \"serde_json\",\n- \"sourcemap\",\n  \"swc_allocator\",\n  \"swc_atoms\",\n  \"swc_common\",\n@@ -7037,26 +7022,29 @@ dependencies = [\n  \"swc_ecma_minifier\",\n  \"swc_ecma_parser\",\n  \"swc_ecma_visit\",\n+ \"swc_sourcemap\",\n  \"swc_timer\",\n ]\n \n [[package]]\n name = \"swc_config\"\n-version = \"3.0.0\"\n+version = \"3.1.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"a01bfcbbdea182bdda93713aeecd997749ae324686bf7944f54d128e56be4ea9\"\n+checksum = \"03d5e0421bd73cbf44f676a461fca3d6aae167e934e36d4671e41e1548e7482d\"\n dependencies = [\n  \"anyhow\",\n+ \"bytes-str\",\n  \"dashmap 5.5.3\",\n  \"globset\",\n  \"indexmap 2.7.1\",\n  \"once_cell\",\n  \"regex\",\n+ \"regress\",\n  \"rustc-hash 2.1.1\",\n  \"serde\",\n  \"serde_json\",\n- \"sourcemap\",\n  \"swc_config_macro\",\n+ \"swc_sourcemap\",\n ]\n \n [[package]]\n@@ -7073,9 +7061,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_core\"\n-version = \"26.4.4\"\n+version = \"27.0.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"d6d1783e7597476b56a78ecf32de11269455e0263b1f93729be2fdbd8eeb799a\"\n+checksum = \"44216725e29a980e3081bb4afea465f486121af281114f6218d448aba9fc81f3\"\n dependencies = [\n  \"binding_macros\",\n  \"par-core\",\n@@ -7109,9 +7097,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_css_ast\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"a434516e60c9ceebcd288c5b22f6d6d4051403e11691a97a2c6729b74d8a9aba\"\n+checksum = \"fc33cccf3606257d7335c5c52ad23abf925ab9838c01223af633a880343d0475\"\n dependencies = [\n  \"is-macro\",\n  \"string_enum\",\n@@ -7121,9 +7109,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_css_codegen\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"838abcc39836584f28b413370575636286ea36cbaa00b748f787a3a68868e0c8\"\n+checksum = \"bbe1c5d929928ae9c6a877097d48b93edd96482ce35a9b0b3c32f90742e35d38\"\n dependencies = [\n  \"auto_impl\",\n  \"bitflags 2.9.0\",\n@@ -7150,9 +7138,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_css_compat\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ba75455f1f1e3539cf6baa999b2338b1366849ad50fd6a8f6db129109bec4eb9\"\n+checksum = \"b910de10d2c49df32e8a67b1239e6c3070a001022ea66cc0533a13dd1d2d86e5\"\n dependencies = [\n  \"bitflags 2.9.0\",\n  \"once_cell\",\n@@ -7167,9 +7155,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_css_minifier\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"10f809a4dff6a164664ff1553ec7ef891a69241c26a9ec788f0e59053542c9fc\"\n+checksum = \"17aa01534ea1bcbf978861c2fb9a3c48a67a7c83cf5806cace3ebc104b895ac8\"\n dependencies = [\n  \"rustc-hash 2.1.1\",\n  \"serde\",\n@@ -7182,9 +7170,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_css_parser\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"76c5f791bcaedb06018e1f6a5c6f8a45e03149be6cc72f291dae8782d90a3654\"\n+checksum = \"4a2424ac3ab0672426f77dec5ff28d261085ee107383fd4ee2b15382ec9035b9\"\n dependencies = [\n  \"lexical\",\n  \"serde\",\n@@ -7195,9 +7183,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_css_prefixer\"\n-version = \"13.0.0\"\n+version = \"14.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3dae7345db04cfe794e26a86e64aa82d9decad0fc9bc9897a7b7243355aa7b43\"\n+checksum = \"ebe227d2f4bda0f68a6b543c31165b6e79bba814aeee958e2f35c05321c4a80d\"\n dependencies = [\n  \"once_cell\",\n  \"preset_env_base\",\n@@ -7213,9 +7201,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_css_utils\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"c62b1d0dc15f9f09405f90f76cfb89900a5eaeb53486e91cdad1e8df25a1ee3d\"\n+checksum = \"f8d9b54060c4732665f352d8b1d12bf2109e32c8032a8775113c0b0762282617\"\n dependencies = [\n  \"once_cell\",\n  \"rustc-hash 2.1.1\",\n@@ -7229,9 +7217,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_css_visit\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"acf01ce7c4f3d05f82ee58692daaa0df8bee5c8115842df36780bc3ce74faa41\"\n+checksum = \"22b4a22843a1625c65e6d56fd5ba70bea30b1045eb66b5fe0faddbf76b2ad8e1\"\n dependencies = [\n  \"serde\",\n  \"swc_atoms\",\n@@ -7242,9 +7230,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_ast\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"d2313360a518a37c4b9ee50030d189222927a3af902903cc70c50f6929e402dc\"\n+checksum = \"82007a7a4fb30198baf82f79244aca929d9845e16fcf897179773e4ebfed20f5\"\n dependencies = [\n  \"bitflags 2.9.0\",\n  \"bytecheck 0.8.0\",\n@@ -7267,9 +7255,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_codegen\"\n-version = \"13.2.0\"\n+version = \"14.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"005b9e6e4cdd15c4c437d6662e4fc6dc93f60bd1c5159a1afcf6cd9eea6fb24f\"\n+checksum = \"af054998dc8a578e8232b94ef046fe06f470b6d8f7f3cbe5c37e7f71dd0e48db\"\n dependencies = [\n  \"ascii\",\n  \"compact_str\",\n@@ -7280,12 +7268,12 @@ dependencies = [\n  \"rustc-hash 2.1.1\",\n  \"ryu-js\",\n  \"serde\",\n- \"sourcemap\",\n  \"swc_allocator\",\n  \"swc_atoms\",\n  \"swc_common\",\n  \"swc_ecma_ast\",\n  \"swc_ecma_codegen_macros\",\n+ \"swc_sourcemap\",\n  \"tracing\",\n ]\n \n@@ -7303,9 +7291,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_bugfixes\"\n-version = \"16.0.0\"\n+version = \"17.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"842e35f35bb7732f35b885c906e93183817d76e167234ab45948bf7cfc856804\"\n+checksum = \"37da3383099064199bb6709c55dea03ac588a664e499cb21d946fdcd5f6b7f1b\"\n dependencies = [\n  \"rustc-hash 2.1.1\",\n  \"swc_atoms\",\n@@ -7321,9 +7309,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_common\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ed5d027ec8260c28031723a13d30f12793f0f1cdb1f64133c4da32891e5058e8\"\n+checksum = \"b81039144af2228328d4a7ce4b172ae50c87eb05bd0a65d844d58d48c396bac9\"\n dependencies = [\n  \"swc_common\",\n  \"swc_ecma_ast\",\n@@ -7334,9 +7322,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es2015\"\n-version = \"16.0.0\"\n+version = \"17.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"073fd6f4f2fe6e5929056fab53d1ce188818b81b7008904bc7f932efa3348717\"\n+checksum = \"164dc5c628d19234ffdb5c34ec59662003c6ada0a2f3c34b1b0e878b39e0f6ca\"\n dependencies = [\n  \"arrayvec 0.7.4\",\n  \"indexmap 2.7.1\",\n@@ -7361,9 +7349,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es2016\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"6f53fcada063eba1c278e829a8b9ec024408c5bad526171b0cb96c77bf9c533b\"\n+checksum = \"0d40a75e491688dc3037475189603fd65eca68f956f3435e0e0b50c97f172464\"\n dependencies = [\n  \"swc_atoms\",\n  \"swc_common\",\n@@ -7378,9 +7366,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es2017\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"5d9a8e0589b8933b4e2de95a787b33e6ef91371c5a85f9d73c5870ac546fc6b7\"\n+checksum = \"d1e9f0b36adf031db2e07dd40f1b94a5d54697c93cdaa60668ce4ef118ce24a0\"\n dependencies = [\n  \"serde\",\n  \"swc_atoms\",\n@@ -7396,9 +7384,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es2018\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"eb69df2828e6d00ca815d66fd1e609e64683abf705dcc46b195fbc7353cabe89\"\n+checksum = \"d30812107d9cd982e83522823bd2dc0cb87fca07f7d8aed26ecfbcf145dffeae\"\n dependencies = [\n  \"serde\",\n  \"swc_atoms\",\n@@ -7415,9 +7403,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es2019\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"a71abfad6a3a6093098f46e68e026d132ca15906fed912b0912f561a1cbd67f5\"\n+checksum = \"97404a23c1a6157f5770b8f33a06d776cd83265bd45c3278e0e3d8b43fd332ff\"\n dependencies = [\n  \"swc_atoms\",\n  \"swc_common\",\n@@ -7431,9 +7419,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es2020\"\n-version = \"16.0.0\"\n+version = \"17.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"73b226871c16b8f4e3914c1dff2e8c93626fbc6a6bfeb3fb598f941d04890e20\"\n+checksum = \"9256d30f822964b8169f0e58546bf906dbe6140fde3caa326fa84cfec6659fb0\"\n dependencies = [\n  \"serde\",\n  \"swc_atoms\",\n@@ -7449,9 +7437,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es2021\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"2f79df9e55b7c3fd29e4116fc6ef1e0155c86fe64fa6a91d357469501d574ef2\"\n+checksum = \"a7ec5141e881b26bebbd195d34b625db449686f2f7cf7e6a736bad1769381400\"\n dependencies = [\n  \"swc_atoms\",\n  \"swc_common\",\n@@ -7465,9 +7453,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es2022\"\n-version = \"16.0.0\"\n+version = \"17.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"6a7749e111ac8251708d6067dc20d0a9399dd7d8e3cd75a18d309830575064d1\"\n+checksum = \"03aa525d5d4722c192f5342dec43c2dce5a4e637c0d5cffbd2b33596a7865f94\"\n dependencies = [\n  \"rustc-hash 2.1.1\",\n  \"swc_atoms\",\n@@ -7485,9 +7473,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_compat_es3\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ecfb2f4d16cd2459bdae7a12a0c3258bb53d63d97c0bbff50dade9c3f324c634\"\n+checksum = \"01d2190dd56a39e728382af9e3ce4c0e60820efeadef2e8d9f42ec1add4a2149\"\n dependencies = [\n  \"swc_common\",\n  \"swc_ecma_ast\",\n@@ -7500,9 +7488,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_ext_transforms\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1db3a2e81be5e12bf58f53a9217791e695bb79e43e6e9e0b63be602c048f0451\"\n+checksum = \"eb2f24d080ca4d51b723ffb591c8277ae9078ac3562b0f73f8ab11eea50a999a\"\n dependencies = [\n  \"phf\",\n  \"swc_atoms\",\n@@ -7514,9 +7502,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_lexer\"\n-version = \"14.0.5\"\n+version = \"15.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"bb339d30ba6ee93da5d5638982faaa79586cd429fe331648abf42afa0eb0a7b5\"\n+checksum = \"52114e9b522b43636f0034f1f6e63460777bde4c3a77c830c9b5724c2afcc4fc\"\n dependencies = [\n  \"arrayvec 0.7.4\",\n  \"bitflags 2.9.0\",\n@@ -7539,9 +7527,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_lints\"\n-version = \"16.0.0\"\n+version = \"17.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"daf720184ed1f84a61a34df1c9d73be0931a8184a7ed6af67ad8f5f1bbec3881\"\n+checksum = \"c0e4b66b379dc57b4c706176e89f399aded91a984dd92f358f488d457047358a\"\n dependencies = [\n  \"auto_impl\",\n  \"dashmap 5.5.3\",\n@@ -7560,9 +7548,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_loader\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"209c6a8a5ca19c9b24daf598debb4f2fa57bf21a3bd76046d9791b7f2a0b0c93\"\n+checksum = \"1c97b4a6f7b88d1d62d7021f8adec2c49c0b31b5091463d6cb7f7e4829eb5588\"\n dependencies = [\n  \"anyhow\",\n  \"dashmap 5.5.3\",\n@@ -7582,9 +7570,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_minifier\"\n-version = \"20.0.5\"\n+version = \"21.0.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"cf26b860e6a0e23807c70b03175d0e09082cfe256130c4759fdf9372020d3a3f\"\n+checksum = \"ce347368c82be500ee926b3eba18064f74769a277d3146a441c97f9a76a31e1c\"\n dependencies = [\n  \"arrayvec 0.7.4\",\n  \"bitflags 2.9.0\",\n@@ -7620,9 +7608,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_parser\"\n-version = \"14.0.2\"\n+version = \"15.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"60e07e6ecd47f748988902976d09c4022b1147772f88ad8a95852a20722ac7dc\"\n+checksum = \"27e4002a6385182fa389f10832e3d3aa1a7cd6d865e9492fb8d4b5c399bbdb6b\"\n dependencies = [\n  \"arrayvec 0.7.4\",\n  \"bitflags 2.9.0\",\n@@ -7646,9 +7634,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_preset_env\"\n-version = \"20.0.0\"\n+version = \"21.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"e8f94ea6dfa4daf55a08e210cbc213b5758b6bc92a929a3af75f478c8b0253cf\"\n+checksum = \"76d2118d089d339631ea9e74f4b9f88cc680616e816f25a547491a1716540b23\"\n dependencies = [\n  \"anyhow\",\n  \"dashmap 5.5.3\",\n@@ -7671,9 +7659,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_quote_macros\"\n-version = \"14.0.0\"\n+version = \"15.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3f755b824a30c6b70dba267077f4e2471d2a6e440623dc8e399ff27f59759a5a\"\n+checksum = \"cb0deea6caa7b27df94acf607380a12320e33681f4d734a60498600b5e74bbc2\"\n dependencies = [\n  \"anyhow\",\n  \"proc-macro2\",\n@@ -7689,9 +7677,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_testing\"\n-version = \"12.0.0\"\n+version = \"13.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"bfca232a0a2e743c963185665bc6fb6f92b1422449aba17ccd836ff4aa02858d\"\n+checksum = \"07366b063e9ae158868ff28a867ff6e295dc373bc2eb3b704070041baf968f0a\"\n dependencies = [\n  \"anyhow\",\n  \"hex\",\n@@ -7702,9 +7690,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms\"\n-version = \"19.0.0\"\n+version = \"20.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"82f91c0e075315f1e745f65888e135ff05e3d16b6c6393c70dc9fb2c944b40fe\"\n+checksum = \"73c066ef35c6d5f4f7629f9cfc9b2ac6680ed78c8fc6955722a64e1f5340beac\"\n dependencies = [\n  \"par-core\",\n  \"swc_atoms\",\n@@ -7723,9 +7711,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms_base\"\n-version = \"15.1.1\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"49c0a76bff24b9fa13d5451e7a664d18158849c45434d863e0553e29fb31170b\"\n+checksum = \"47c511aff4fabb634c1799a6d6fa2a5057a4f0f482e097e31aeb43939b0ad601\"\n dependencies = [\n  \"better_scoped_tls\",\n  \"bitflags 2.9.0\",\n@@ -7748,9 +7736,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms_classes\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1c30a47eb83be77705a16103918db015a409a45e158a490697d8419a6f92151a\"\n+checksum = \"479b773f8a6c3d21224e3e28eadcc7f021f7d0a521f5b8730a936d74e36f2c86\"\n dependencies = [\n  \"swc_atoms\",\n  \"swc_common\",\n@@ -7762,9 +7750,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms_compat\"\n-version = \"17.0.0\"\n+version = \"18.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"4ab71af00c78903335fc2ac0ad4308e6729b6be60e47393a36357fb20ffbb612\"\n+checksum = \"450b7c2646111adbd8d65220df230325c40ba8551e974ee8d5a7d0c17feba19d\"\n dependencies = [\n  \"arrayvec 0.7.4\",\n  \"indexmap 2.7.1\",\n@@ -7812,9 +7800,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms_module\"\n-version = \"17.0.0\"\n+version = \"18.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"bc169d2f3e52ab9619aff70b97b6f9db7b96feec8112454df3dd7d134f34078a\"\n+checksum = \"d7ca0784c98ec4f5dfd73da4619f3afda483f5146de04f589c5f97c4c2e1450b\"\n dependencies = [\n  \"Inflector\",\n  \"anyhow\",\n@@ -7840,10 +7828,11 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms_optimization\"\n-version = \"16.0.0\"\n+version = \"17.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1e184bf675c5c9111e1b155e49fc267bc2971b732ac22d80887cc46973a782b7\"\n+checksum = \"3487748f5df174d85d5456b500c1185dc4e1857dd344e3d0190412148dfae44f\"\n dependencies = [\n+ \"bytes-str\",\n  \"dashmap 5.5.3\",\n  \"indexmap 2.7.1\",\n  \"once_cell\",\n@@ -7865,9 +7854,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms_proposal\"\n-version = \"15.0.0\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"f21a20e2231143fe4aacecf2f1957c80bca8096ebe52f27e6e5624a49a2a385d\"\n+checksum = \"926eb7fb2b45f13e0313a0a48e54c1f3a7b650769f1c7e4420e25822cd65afa8\"\n dependencies = [\n  \"either\",\n  \"rustc-hash 2.1.1\",\n@@ -7885,11 +7874,12 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms_react\"\n-version = \"17.0.0\"\n+version = \"18.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"a3f141582d19aa9679ecfc811bc72cb8ef24290bc1e53ba208445ff5d5745f2b\"\n+checksum = \"827698a1088586bc6d67e1a239b3dca02ec4183fec1fc3bd1e0dc1f4b29c2151\"\n dependencies = [\n  \"base64 0.22.1\",\n+ \"bytes-str\",\n  \"dashmap 5.5.3\",\n  \"indexmap 2.7.1\",\n  \"once_cell\",\n@@ -7912,9 +7902,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_transforms_testing\"\n-version = \"18.0.0\"\n+version = \"19.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"297e4f7638cfc0d6088ad637ec717b9ffbf7555a913963344cd1f3ce2864a660\"\n+checksum = \"1e2f31fd1f0f220445f432038fc9592c8df3bb5e9e63f921e38de1077dc942e1\"\n dependencies = [\n  \"ansi_term\",\n  \"anyhow\",\n@@ -7923,7 +7913,6 @@ dependencies = [\n  \"serde\",\n  \"serde_json\",\n  \"sha2\",\n- \"sourcemap\",\n  \"swc_allocator\",\n  \"swc_common\",\n  \"swc_ecma_ast\",\n@@ -7933,16 +7922,18 @@ dependencies = [\n  \"swc_ecma_transforms_base\",\n  \"swc_ecma_utils\",\n  \"swc_ecma_visit\",\n+ \"swc_sourcemap\",\n  \"tempfile\",\n  \"testing\",\n ]\n \n [[package]]\n name = \"swc_ecma_transforms_typescript\"\n-version = \"17.0.0\"\n+version = \"18.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"5af18b9b3f38cf775b9dcf46f0fdbde542d6559e5759799263ef0f76563fcd9b\"\n+checksum = \"0eb967a6b448b2874dccd9290cccb948dff5ce82f3144cb8b6886a431e67b54d\"\n dependencies = [\n+ \"bytes-str\",\n  \"once_cell\",\n  \"rustc-hash 2.1.1\",\n  \"ryu-js\",\n@@ -7958,9 +7949,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_usage_analyzer\"\n-version = \"16.0.1\"\n+version = \"17.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"f4061a34574b9431c94c21519948ad4421d7b28479a1a78bb94b878c67d9fac9\"\n+checksum = \"bee2056c43b70955843e8f029c94037f0d509e9019e08cb6609f08ffa66b3a9c\"\n dependencies = [\n  \"bitflags 2.9.0\",\n  \"indexmap 2.7.1\",\n@@ -7976,9 +7967,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_utils\"\n-version = \"15.0.2\"\n+version = \"16.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"7d2c29dbfc54e02c14975aff9d2c75ae6fff0808d860d9971a493d37870e282f\"\n+checksum = \"5a8afc858d9cd7aa2b480d55174ff9c7ee02de003ac5f9e140398206af566b0f\"\n dependencies = [\n  \"indexmap 2.7.1\",\n  \"num_cpus\",\n@@ -7998,9 +7989,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_visit\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"8227d1d2d76a9ccfd190ec06bb4a4720bf3edb9f954c69816b2bca5f5aa43887\"\n+checksum = \"0698960f28169c5eaa01127273aca31999bbbb6b1d3f2576ee5400daaa295d0a\"\n dependencies = [\n  \"new_debug_unreachable\",\n  \"num-bigint\",\n@@ -8014,25 +8005,26 @@ dependencies = [\n \n [[package]]\n name = \"swc_emotion\"\n-version = \"0.90.0\"\n+version = \"0.91.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"f04683db00e12df8b824066ab8c62867827e9436514a88bade6e624f871791f0\"\n+checksum = \"e16df4dfcc99ecd295ebf32d227823de1e3701a3a98cbe927b81f115990eafcd\"\n dependencies = [\n  \"base64 0.22.1\",\n  \"byteorder\",\n+ \"bytes-str\",\n  \"once_cell\",\n  \"radix_fmt\",\n  \"regex\",\n  \"rustc-hash 2.1.1\",\n  \"serde\",\n- \"sourcemap\",\n  \"swc_atoms\",\n  \"swc_common\",\n  \"swc_ecma_ast\",\n  \"swc_ecma_codegen\",\n  \"swc_ecma_transforms\",\n  \"swc_ecma_utils\",\n  \"swc_ecma_visit\",\n+ \"swc_sourcemap\",\n  \"swc_trace_macro\",\n  \"tracing\",\n ]\n@@ -8050,9 +8042,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_error_reporters\"\n-version = \"13.0.0\"\n+version = \"14.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"572075b92eef780f9a13b99abcb4fbf8e6272abeed27b361632b5e3a2e8de70d\"\n+checksum = \"863dea960d5c8646125462d5b283b03a8b709879729c6713c14e413b0c7a3f8f\"\n dependencies = [\n  \"anyhow\",\n  \"miette\",\n@@ -8077,9 +8069,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_node_comments\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"c75011be56778fa9d67fce20853b9a00f46484bfaef230e8098c08ad9caf8dc7\"\n+checksum = \"f210c157f234d00c17611071ac46d3789f2038342400a9f1b2676e9330984390\"\n dependencies = [\n  \"dashmap 5.5.3\",\n  \"rustc-hash 2.1.1\",\n@@ -8114,9 +8106,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_plugin_proxy\"\n-version = \"11.0.0\"\n+version = \"12.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ab1281343dca1fe02aa027e2dfdf77067e62506e77b651e3e9c1a4e3fa8bccf6\"\n+checksum = \"e55c2e46b9cc32e206a6f041621468717bbc5748d3321f2e99648340843d16ce\"\n dependencies = [\n  \"better_scoped_tls\",\n  \"bytecheck 0.8.0\",\n@@ -8131,9 +8123,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_plugin_runner\"\n-version = \"13.0.0\"\n+version = \"14.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"4802311e7168c171b047c28335603e8969e62ba4d75c0c607b53e77fbcb1a9aa\"\n+checksum = \"fc5321d6729321f0bf313339be866bcfc66ca9360ddbad32fcf2d6a278746bd3\"\n dependencies = [\n  \"anyhow\",\n  \"enumset\",\n@@ -8151,7 +8143,7 @@ dependencies = [\n  \"tokio\",\n  \"tracing\",\n  \"vergen\",\n- \"virtual-fs 0.19.0\",\n+ \"virtual-fs\",\n  \"wasmer\",\n  \"wasmer-cache\",\n  \"wasmer-compiler-cranelift\",\n@@ -8160,9 +8152,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_relay\"\n-version = \"0.60.0\"\n+version = \"0.61.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"72fc243dfd853923676b3886c11b3e97b496fc580efd5e6d536539b7a8199a40\"\n+checksum = \"7fcdc424ca40e762f557fcfc3f8aad33572f2fe74d9e597c8869e5ea4be2abc3\"\n dependencies = [\n  \"once_cell\",\n  \"regex\",\n@@ -8176,6 +8168,25 @@ dependencies = [\n  \"tracing\",\n ]\n \n+[[package]]\n+name = \"swc_sourcemap\"\n+version = \"9.3.1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"604e837ad12213d381dea886a184e06b4e09fd502e5d1a4db9d4b7341eb85105\"\n+dependencies = [\n+ \"base64-simd 0.8.0\",\n+ \"bitvec\",\n+ \"bytes-str\",\n+ \"data-encoding\",\n+ \"debugid\",\n+ \"if_chain\",\n+ \"rustc-hash 2.1.1\",\n+ \"serde\",\n+ \"serde_json\",\n+ \"unicode-id-start\",\n+ \"url\",\n+]\n+\n [[package]]\n name = \"swc_timer\"\n version = \"1.0.0\"\n@@ -8198,9 +8209,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_transform_common\"\n-version = \"5.0.0\"\n+version = \"6.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3be97f7341c59045d8ecbd5579acad8063e545d10304db086846b9dcf985c56e\"\n+checksum = \"51d2564e80c5c664914f327640288f5637b0f0acf6a340b92e0082655e558f51\"\n dependencies = [\n  \"better_scoped_tls\",\n  \"once_cell\",\n@@ -8212,9 +8223,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_typescript\"\n-version = \"14.0.3\"\n+version = \"15.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"520693e220391e003179bed5d1c8e183e7673fb67a446eac8ad650493c279619\"\n+checksum = \"2715faf3905cba3600b600b49e1c2a194c110cc331255f8bacb6a7fd81fb7787\"\n dependencies = [\n  \"bitflags 2.9.0\",\n  \"petgraph 0.7.1\",\n@@ -8405,9 +8416,9 @@ dependencies = [\n \n [[package]]\n name = \"testing\"\n-version = \"12.0.0\"\n+version = \"13.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"4afa5efbee09e27d4fa6f7d3278e351ab1feaf8d253eea84bc69975fb6da418e\"\n+checksum = \"6995a7c9eaf999e15d3c367e6d8443323c35965a424beb224cdb98dd6a35af83\"\n dependencies = [\n  \"ansi_term\",\n  \"cargo_metadata 0.18.1\",\n@@ -9057,6 +9068,7 @@ version = \"0.1.0\"\n name = \"turbo-rcstr\"\n version = \"0.1.0\"\n dependencies = [\n+ \"bytes-str\",\n  \"codspeed-criterion-compat\",\n  \"napi\",\n  \"new_debug_unreachable\",\n@@ -9495,6 +9507,7 @@ dependencies = [\n  \"async-trait\",\n  \"auto-hash-map\",\n  \"browserslist-rs\",\n+ \"bytes-str\",\n  \"const_format\",\n  \"data-encoding\",\n  \"either\",\n@@ -9513,8 +9526,8 @@ dependencies = [\n  \"serde_bytes\",\n  \"serde_json\",\n  \"smallvec\",\n- \"sourcemap\",\n  \"swc_core\",\n+ \"swc_sourcemap\",\n  \"tokio\",\n  \"tracing\",\n  \"turbo-prehash\",\n@@ -9607,6 +9620,7 @@ dependencies = [\n  \"anyhow\",\n  \"async-trait\",\n  \"bitvec\",\n+ \"bytes-str\",\n  \"codspeed-criterion-compat\",\n  \"data-encoding\",\n  \"either\",\n@@ -9623,9 +9637,9 @@ dependencies = [\n  \"serde\",\n  \"serde_json\",\n  \"smallvec\",\n- \"sourcemap\",\n  \"strsim 0.11.1\",\n  \"swc_core\",\n+ \"swc_sourcemap\",\n  \"tokio\",\n  \"tracing\",\n  \"turbo-esregex\",\n@@ -10253,31 +10267,6 @@ version = \"0.9.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"0b928f33d975fc6ad9f86c8f283853ad26bdd5b10b7f1542aa2fa15e2289105a\"\n \n-[[package]]\n-name = \"virtual-fs\"\n-version = \"0.19.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"14d2456ec960b74e5b0423159c70dd9796da1445de462013fe03eefd2545b631\"\n-dependencies = [\n- \"async-trait\",\n- \"bytes\",\n- \"dashmap 6.1.0\",\n- \"derivative\",\n- \"dunce\",\n- \"futures\",\n- \"getrandom 0.2.15\",\n- \"indexmap 1.9.3\",\n- \"lazy_static\",\n- \"pin-project-lite\",\n- \"replace_with\",\n- \"shared-buffer\",\n- \"slab\",\n- \"thiserror 1.0.69\",\n- \"tokio\",\n- \"tracing\",\n- \"wasmer-package 0.2.0\",\n-]\n-\n [[package]]\n name = \"virtual-fs\"\n version = \"0.600.0\"\n@@ -10303,8 +10292,8 @@ dependencies = [\n  \"thiserror 1.0.69\",\n  \"tokio\",\n  \"tracing\",\n- \"wasmer-package 0.600.0\",\n- \"webc 9.0.0\",\n+ \"wasmer-package\",\n+ \"webc\",\n ]\n \n [[package]]\n@@ -10701,28 +10690,6 @@ dependencies = [\n  \"wasmer-types\",\n ]\n \n-[[package]]\n-name = \"wasmer-config\"\n-version = \"0.10.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"666d97272c1042e20957be5f7e4a42f28ae5367c32a79ae953339335a55512e3\"\n-dependencies = [\n- \"anyhow\",\n- \"bytesize\",\n- \"ciborium\",\n- \"derive_builder 0.12.0\",\n- \"hex\",\n- \"indexmap 2.7.1\",\n- \"schemars\",\n- \"semver\",\n- \"serde\",\n- \"serde_json\",\n- \"serde_yml\",\n- \"thiserror 1.0.69\",\n- \"toml 0.8.19\",\n- \"url\",\n-]\n-\n [[package]]\n name = \"wasmer-config\"\n version = \"0.600.0\"\n@@ -10779,39 +10746,13 @@ dependencies = [\n  \"shared-buffer\",\n  \"thiserror 1.0.69\",\n  \"tracing\",\n- \"virtual-fs 0.600.0\",\n+ \"virtual-fs\",\n  \"virtual-net\",\n  \"wasmer\",\n- \"wasmer-config 0.600.0\",\n+ \"wasmer-config\",\n  \"wasmer-wasix-types\",\n ]\n \n-[[package]]\n-name = \"wasmer-package\"\n-version = \"0.2.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"98d05a5cd47f324ed784481d79351e12a02ad3289148dfa72432aa5d394634b8\"\n-dependencies = [\n- \"anyhow\",\n- \"bytes\",\n- \"cfg-if\",\n- \"ciborium\",\n- \"flate2\",\n- \"insta\",\n- \"semver\",\n- \"serde\",\n- \"serde_json\",\n- \"sha2\",\n- \"shared-buffer\",\n- \"tar\",\n- \"tempfile\",\n- \"thiserror 1.0.69\",\n- \"toml 0.8.19\",\n- \"url\",\n- \"wasmer-config 0.10.0\",\n- \"webc 7.0.0-rc.2\",\n-]\n-\n [[package]]\n name = \"wasmer-package\"\n version = \"0.600.0\"\n@@ -10835,9 +10776,9 @@ dependencies = [\n  \"thiserror 1.0.69\",\n  \"toml 0.8.19\",\n  \"url\",\n- \"wasmer-config 0.600.0\",\n+ \"wasmer-config\",\n  \"wasmer-types\",\n- \"webc 9.0.0\",\n+ \"webc\",\n ]\n \n [[package]]\n@@ -10942,20 +10883,20 @@ dependencies = [\n  \"tracing\",\n  \"url\",\n  \"urlencoding\",\n- \"virtual-fs 0.600.0\",\n+ \"virtual-fs\",\n  \"virtual-mio\",\n  \"virtual-net\",\n  \"waker-fn\",\n  \"wasm-bindgen\",\n  \"wasm-bindgen-futures\",\n  \"wasmer\",\n- \"wasmer-config 0.600.0\",\n+ \"wasmer-config\",\n  \"wasmer-journal\",\n- \"wasmer-package 0.600.0\",\n+ \"wasmer-package\",\n  \"wasmer-types\",\n  \"wasmer-wasix-types\",\n  \"web-sys\",\n- \"webc 9.0.0\",\n+ \"webc\",\n  \"weezl\",\n  \"windows-sys 0.59.0\",\n  \"xxhash-rust\",\n@@ -11063,34 +11004,6 @@ dependencies = [\n  \"web-sys\",\n ]\n \n-[[package]]\n-name = \"webc\"\n-version = \"7.0.0-rc.2\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"e6893cbe58d5b97a0daa2dd77055d621db1c8b94fe0f2bbd719c8de747226ea6\"\n-dependencies = [\n- \"anyhow\",\n- \"base64 0.22.1\",\n- \"bytes\",\n- \"cfg-if\",\n- \"ciborium\",\n- \"document-features\",\n- \"ignore\",\n- \"indexmap 1.9.3\",\n- \"leb128\",\n- \"lexical-sort\",\n- \"libc\",\n- \"once_cell\",\n- \"path-clean 1.0.1\",\n- \"rand 0.8.5\",\n- \"serde\",\n- \"serde_json\",\n- \"sha2\",\n- \"shared-buffer\",\n- \"thiserror 1.0.69\",\n- \"url\",\n-]\n-\n [[package]]\n name = \"webc\"\n version = \"9.0.0\""
        },
        {
            "sha": "04ce1f6565c5d26584bcc8d230e3eccc43db5df5",
            "filename": "Cargo.toml",
            "status": "modified",
            "additions": 11,
            "deletions": 10,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/Cargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/Cargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.toml?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -162,7 +162,7 @@ opt-level = \"s\"\n [profile.release.package.zstd-sys]\n opt-level = 3\n \n-[profile.release.package.sourcemap]\n+[profile.release.package.swc_sourcemap]\n opt-level = 3\n \n [profile.release.package.turbopack-wasm]\n@@ -292,21 +292,21 @@ turbopack-trace-utils = { path = \"turbopack/crates/turbopack-trace-utils\" }\n turbopack-wasm = { path = \"turbopack/crates/turbopack-wasm\" }\n \n # SWC crates\n-swc_core = { version = \"26.4.4\", features = [\n+swc_core = { version = \"27.0.1\", features = [\n   \"ecma_loader_lru\",\n   \"ecma_loader_parking_lot\",\n   \"parallel_rayon\",\n ] }\n-testing = { version = \"12.0.0\" }\n+testing = { version = \"13.0.0\" }\n \n # Keep consistent with preset_env_base through swc_core\n browserslist-rs = { version = \"0.18.0\" }\n mdxjs = \"1.0.3\"\n-modularize_imports = { version = \"0.86.0\" }\n-styled_components = { version = \"0.114.0\" }\n-styled_jsx = { version = \"0.90.3\" }\n-swc_emotion = { version = \"0.90.0\" }\n-swc_relay = { version = \"0.60.0\" }\n+modularize_imports = { version = \"0.87.0\" }\n+styled_components = { version = \"0.115.0\" }\n+styled_jsx = { version = \"0.91.1\" }\n+swc_emotion = { version = \"0.91.0\" }\n+swc_relay = { version = \"0.61.0\" }\n \n # General Deps\n chromiumoxide = { version = \"0.5.4\", features = [\n@@ -328,6 +328,7 @@ async-compression = { version = \"0.3.13\", default-features = false, features = [\n async-trait = \"0.1.64\"\n bitfield = \"0.18.0\"\n bytes = \"1.1.0\"\n+bytes-str = \"0.2.6\"\n chrono = \"0.4.23\"\n clap = { version = \"4.5.2\", features = [\"derive\"] }\n concurrent-queue = \"2.5.0\"\n@@ -402,7 +403,7 @@ smallvec = { version = \"1.13.1\", features = [\n   \"union\",\n   \"const_new\",\n ] }\n-sourcemap = \"9.2.2\"\n+swc_sourcemap = \"9.2.2\"\n strsim = \"0.11.1\"\n shrink-to-fit = \"0.2.10\"\n syn = \"2.0.100\"\n@@ -422,4 +423,4 @@ vergen-gitcl = { version = \"1.0.8\", features = [\"cargo\"] }\n webbrowser = \"0.8.7\"\n \n [patch.crates-io]\n-sourcemap = { git = \"https://github.com/kdy1/rust-sourcemap\", branch = \"main\" }\n+mdxjs = { git = \"https://github.com/kdy1/mdxjs-rs.git\", branch = \"swc-core-27\" }"
        },
        {
            "sha": "a7569c41430ad37d8bba149a420c492f6a431323",
            "filename": "crates/next-core/Cargo.toml",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fnext-core%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fnext-core%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2FCargo.toml?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -32,8 +32,8 @@ lazy_static = { workspace = true }\n thiserror = { workspace = true }\n tracing = { workspace = true }\n rustc-hash = { workspace = true }\n-react_remove_properties = \"0.40.0\"\n-remove_console = \"0.41.0\"\n+react_remove_properties = \"0.41.0\"\n+remove_console = \"0.42.0\"\n itertools = { workspace = true }\n percent-encoding = \"2.3.1\"\n serde_path_to_error = { workspace = true }"
        },
        {
            "sha": "3d6917412f3fb91e00f2b7836e3413a9a2c245f2",
            "filename": "crates/next-custom-transforms/Cargo.toml",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fnext-custom-transforms%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fnext-custom-transforms%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2FCargo.toml?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -22,6 +22,7 @@ workspace = true\n \n [dependencies]\n base64 = \"0.21.0\"\n+bytes-str = { workspace = true }\n chrono = \"0.4\"\n easy-error = \"1.0.0\"\n either = \"1\"\n@@ -67,8 +68,8 @@ turbopack-ecmascript-plugins = { workspace = true, optional = true }\n turbo-rcstr = { workspace = true }\n urlencoding = { workspace = true }\n \n-react_remove_properties = \"0.40.0\"\n-remove_console = \"0.41.0\"\n+react_remove_properties = \"0.41.0\"\n+remove_console = \"0.42.0\"\n preset_env_base = \"3.0.1\"\n \n [dev-dependencies]"
        },
        {
            "sha": "0227d439e4ff5bb2b16a1d8064b13c1b7851eaf2",
            "filename": "crates/next-custom-transforms/src/react_compiler.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -138,7 +138,8 @@ mod tests {\n \n     fn assert_required(code: &str, required: bool) {\n         run_test2(false, |cm, _| {\n-            let fm = cm.new_source_file(FileName::Custom(\"test.tsx\".into()).into(), code.into());\n+            let fm =\n+                cm.new_source_file(FileName::Custom(\"test.tsx\".into()).into(), code.to_string());\n \n             let program = parse_file_as_program(\n                 &fm,"
        },
        {
            "sha": "dafe895d727d1f4edd7fb0e5fba6f7d566525048",
            "filename": "crates/next-custom-transforms/tests/fixture.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fnext-custom-transforms%2Ftests%2Ffixture.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fnext-custom-transforms%2Ftests%2Ffixture.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -2,9 +2,9 @@ use std::{\n     env::current_dir,\n     iter::FromIterator,\n     path::{Path, PathBuf},\n-    sync::Arc,\n };\n \n+use bytes_str::BytesStr;\n use next_custom_transforms::transforms::{\n     amp_attributes::amp_attributes,\n     cjs_optimizer::cjs_optimizer,\n@@ -366,8 +366,8 @@ fn next_ssg_fixture(input: PathBuf) {\n                     next: false.into(),\n                     runtime: None,\n                     import_source: Some(\"\".into()),\n-                    pragma: Some(Arc::new(\"__jsx\".into())),\n-                    pragma_frag: Some(Arc::new(\"__jsxFrag\".into())),\n+                    pragma: Some(BytesStr::from_str_slice(\"__jsx\")),\n+                    pragma_frag: Some(BytesStr::from_str_slice(\"__jsxFrag\")),\n                     throw_if_namespace: false.into(),\n                     development: false.into(),\n                     refresh: Default::default(),\n@@ -802,8 +802,8 @@ fn run_stip_page_exports_test(input: &Path, output: &Path, mode: ExportFilter) {\n                     next: false.into(),\n                     runtime: None,\n                     import_source: Some(\"\".into()),\n-                    pragma: Some(Arc::new(\"__jsx\".into())),\n-                    pragma_frag: Some(Arc::new(\"__jsxFrag\".into())),\n+                    pragma: Some(BytesStr::from_str_slice(\"__jsx\")),\n+                    pragma_frag: Some(BytesStr::from_str_slice(\"__jsxFrag\")),\n                     throw_if_namespace: false.into(),\n                     development: false.into(),\n                     ..Default::default()"
        },
        {
            "sha": "5e3ee0ee21558df4f33928e36a08573fd81b2b57",
            "filename": "crates/wasm/src/lib.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fwasm%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/crates%2Fwasm%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fwasm%2Fsrc%2Flib.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -40,7 +40,7 @@ pub fn minify_sync(s: JsString, opts: JsValue) -> Result<JsValue, JsValue> {\n         },\n         |handler| {\n             GLOBALS.set(&Default::default(), || {\n-                let fm = c.cm.new_source_file(FileName::Anon.into(), s.into());\n+                let fm = c.cm.new_source_file(FileName::Anon.into(), String::from(s));\n                 let program = c\n                     .minify(fm, handler, &opts, Default::default())\n                     .context(\"failed to minify file\")?;\n@@ -89,7 +89,7 @@ pub fn transform_sync(s: JsValue, opts: JsValue) -> Result<JsValue, JsValue> {\n                             } else {\n                                 FileName::Real(opts.swc.filename.clone().into()).into()\n                             },\n-                            s.into(),\n+                            String::from(s),\n                         );\n                         let cm = c.cm.clone();\n                         let file = fm.clone();\n@@ -154,7 +154,7 @@ pub fn parse_sync(s: JsString, opts: JsValue) -> Result<JsValue, JsValue> {\n         |handler| {\n             c.run(|| {\n                 GLOBALS.set(&Default::default(), || {\n-                    let fm = c.cm.new_source_file(FileName::Anon.into(), s.into());\n+                    let fm = c.cm.new_source_file(FileName::Anon.into(), String::from(s));\n \n                     let cmts = c.comments().clone();\n                     let comments = if opts.comments {"
        },
        {
            "sha": "3ab1b82b70aa505d55b21132fbe58a5512337641",
            "filename": "turbopack/crates/turbo-rcstr/Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbo-rcstr%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbo-rcstr%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-rcstr%2FCargo.toml?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -16,6 +16,7 @@ serde = { workspace = true }\n new_debug_unreachable = \"1.0.6\"\n shrink-to-fit = { workspace = true }\n rustc-hash = { workspace = true }\n+bytes-str = { workspace = true }\n \n [target.'cfg(not(target_family = \"wasm\"))'.dependencies]\n napi = { workspace = true, optional = true }"
        },
        {
            "sha": "e4be84916fc1c74db756d301d91e093824432209",
            "filename": "turbopack/crates/turbo-rcstr/src/lib.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -9,6 +9,7 @@ use std::{\n     path::{Path, PathBuf},\n };\n \n+use bytes_str::BytesStr;\n use debug_unreachable::debug_unreachable;\n use serde::{Deserialize, Deserializer, Serialize, Serializer};\n use shrink_to_fit::ShrinkToFit;\n@@ -160,6 +161,16 @@ impl Borrow<str> for RcStr {\n     }\n }\n \n+impl From<BytesStr> for RcStr {\n+    fn from(s: BytesStr) -> Self {\n+        let bytes: Vec<u8> = s.into_bytes().into();\n+        RcStr::from(unsafe {\n+            // Safety: BytesStr are valid utf-8\n+            String::from_utf8_unchecked(bytes)\n+        })\n+    }\n+}\n+\n impl From<Arc<String>> for RcStr {\n     fn from(s: Arc<String>) -> Self {\n         match Arc::try_unwrap(s) {"
        },
        {
            "sha": "a6590fb103790a96907242d2409a1fe20d3af886",
            "filename": "turbopack/crates/turbopack-core/Cargo.toml",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-core%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-core%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2FCargo.toml?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -34,7 +34,7 @@ serde = { workspace = true, features = [\"rc\"] }\n serde_bytes = { workspace = true }\n serde_json = { workspace = true, features = [\"preserve_order\"] }\n smallvec = { workspace = true }\n-sourcemap = { workspace = true }\n+swc_sourcemap = { workspace = true }\n swc_core = { workspace = true, features = [\"ecma_preset_env\", \"common\"] }\n tracing = { workspace = true }\n turbo-prehash = { workspace = true }\n@@ -44,6 +44,7 @@ turbo-tasks-env = { workspace = true }\n turbo-tasks-fs = { workspace = true }\n turbo-tasks-hash = { workspace = true }\n urlencoding = { workspace = true }\n+bytes-str = { workspace = true }\n \n [build-dependencies]\n turbo-tasks-build = { workspace = true }"
        },
        {
            "sha": "91905f70625f1781e5e76ab982e0f888f55712b9",
            "filename": "turbopack/crates/turbopack-core/src/source_map/mod.rs",
            "status": "modified",
            "additions": 28,
            "deletions": 22,
            "changes": 50,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fmod.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -1,11 +1,12 @@\n use std::{borrow::Cow, io::Write, ops::Deref, sync::Arc};\n \n use anyhow::Result;\n+use bytes_str::BytesStr;\n use once_cell::sync::Lazy;\n use ref_cast::RefCast;\n use regex::Regex;\n use serde::{Deserialize, Deserializer, Serialize, Serializer};\n-use sourcemap::{DecodedMap, SourceMap as RegularMap, SourceMapBuilder, SourceMapIndex};\n+use swc_sourcemap::{DecodedMap, SourceMap as RegularMap, SourceMapBuilder, SourceMapIndex};\n use turbo_rcstr::RcStr;\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::{\n@@ -148,18 +149,20 @@ impl Token {\n     }\n }\n \n-impl From<sourcemap::Token<'_>> for Token {\n-    fn from(t: sourcemap::Token) -> Self {\n+impl From<swc_sourcemap::Token<'_>> for Token {\n+    fn from(t: swc_sourcemap::Token) -> Self {\n         if t.has_source() {\n             Token::Original(OriginalToken {\n                 generated_line: t.get_dst_line(),\n                 generated_column: t.get_dst_col(),\n                 original_file: RcStr::from(\n-                    t.get_source().expect(\"already checked token has source\"),\n+                    t.get_source()\n+                        .expect(\"already checked token has source\")\n+                        .clone(),\n                 ),\n                 original_line: t.get_src_line(),\n                 original_column: t.get_src_col(),\n-                name: t.get_name().map(RcStr::from),\n+                name: t.get_name().cloned().map(RcStr::from),\n             })\n         } else {\n             Token::Synthetic(SyntheticToken {\n@@ -171,12 +174,12 @@ impl From<sourcemap::Token<'_>> for Token {\n     }\n }\n \n-impl TryInto<sourcemap::RawToken> for Token {\n+impl TryInto<swc_sourcemap::RawToken> for Token {\n     type Error = std::num::ParseIntError;\n \n-    fn try_into(self) -> Result<sourcemap::RawToken, Self::Error> {\n+    fn try_into(self) -> Result<swc_sourcemap::RawToken, Self::Error> {\n         Ok(match self {\n-            Self::Original(t) => sourcemap::RawToken {\n+            Self::Original(t) => swc_sourcemap::RawToken {\n                 dst_col: t.generated_column,\n                 dst_line: t.generated_line,\n                 name_id: match t.name {\n@@ -188,7 +191,7 @@ impl TryInto<sourcemap::RawToken> for Token {\n                 src_id: t.original_file.parse()?,\n                 is_range: false,\n             },\n-            Self::Synthetic(t) => sourcemap::RawToken {\n+            Self::Synthetic(t) => swc_sourcemap::RawToken {\n                 dst_col: t.generated_column,\n                 dst_line: t.generated_line,\n                 name_id: SOURCEMAP_CRATE_NONE_U32,\n@@ -273,13 +276,13 @@ impl SourceMap {\n                     .sections\n                     .iter()\n                     .map(|s| {\n-                        sourcemap::SourceMapSection::new(\n+                        swc_sourcemap::SourceMapSection::new(\n                             (s.offset.line, s.offset.column),\n                             None,\n                             Some(s.map.0.clone()),\n                         )\n                     })\n-                    .collect::<Vec<sourcemap::SourceMapSection>>();\n+                    .collect::<Vec<swc_sourcemap::SourceMapSection>>();\n                 Arc::new(CrateMapWrapper(DecodedMap::Index(SourceMapIndex::new(\n                     None, sections,\n                 ))))\n@@ -406,10 +409,10 @@ impl SourceMap {\n \n     pub async fn with_resolved_sources(&self, origin: Vc<FileSystemPath>) -> Result<Self> {\n         async fn resolve_source(\n-            source_request: Arc<str>,\n-            source_content: Option<Arc<str>>,\n+            source_request: BytesStr,\n+            source_content: Option<BytesStr>,\n             origin: Vc<FileSystemPath>,\n-        ) -> Result<(Arc<str>, Arc<str>)> {\n+        ) -> Result<(BytesStr, BytesStr)> {\n             Ok(\n                 if let Some(path) = *origin.parent().try_join((&*source_request).into()).await? {\n                     let path_str = path.to_string().await?;\n@@ -448,14 +451,14 @@ impl SourceMap {\n             origin: Vc<FileSystemPath>,\n         ) -> Result<RegularMap> {\n             let map = &map.0;\n-            let file = map.get_file().map(Arc::<str>::from);\n+            let file = map.get_file().cloned();\n             let tokens = map.tokens().map(|t| t.get_raw_token()).collect();\n-            let names = map.names().map(Arc::<str>::from).collect();\n+            let names = map.names().cloned().collect();\n             let count = map.get_source_count() as usize;\n-            let sources = map.sources().map(Arc::<str>::from).collect::<Vec<_>>();\n+            let sources = map.sources().cloned().collect::<Vec<_>>();\n             let source_contents = map\n                 .source_contents()\n-                .map(|s| s.map(Arc::<str>::from))\n+                .map(|s| s.cloned())\n                 .collect::<Vec<_>>();\n             let mut new_sources = Vec::with_capacity(count);\n             let mut new_source_contents = Vec::with_capacity(count);\n@@ -482,7 +485,7 @@ impl SourceMap {\n                 }\n                 DecodedMap::Index(map) => {\n                     let count = map.get_section_count() as usize;\n-                    let file = map.get_file().map(ToString::to_string);\n+                    let file = map.get_file().cloned();\n                     let sections = map\n                         .sections()\n                         .filter_map(|section| {\n@@ -503,7 +506,7 @@ impl SourceMap {\n                         .await?;\n                     let mut new_sections = Vec::with_capacity(count);\n                     for (offset, map) in sections {\n-                        new_sections.push(sourcemap::SourceMapSection::new(\n+                        new_sections.push(swc_sourcemap::SourceMapSection::new(\n                             offset,\n                             // Urls are deprecated and we don't accept them\n                             None,\n@@ -573,7 +576,7 @@ impl SourceMap {\n                     && let DecodedMap::Regular(map) = &map.map.0\n                     && map.get_source_count() == 1\n                 {\n-                    let source = map.sources().next().unwrap();\n+                    let source = map.sources().next().unwrap().clone();\n                     *guessed_original_file = Some(RcStr::from(source));\n                 }\n \n@@ -588,7 +591,10 @@ impl SourceMap {\n                         let content = map.get_source_contents(src_id);\n \n                         let (name, content) = name.zip(content)?;\n-                        Some(sourcemap_content_source(name.into(), content.into()))\n+                        Some(sourcemap_content_source(\n+                            name.clone().into(),\n+                            content.clone().into(),\n+                        ))\n                     });\n                 }\n "
        },
        {
            "sha": "018a5e02fe5c548519232f9088240cdbdf1141e7",
            "filename": "turbopack/crates/turbopack-core/src/source_map/utils.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Futils.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Futils.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Futils.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -12,7 +12,7 @@ use turbo_tasks_fs::{\n \n use crate::SOURCE_URL_PROTOCOL;\n \n-pub fn add_default_ignore_list(map: &mut sourcemap::SourceMap) {\n+pub fn add_default_ignore_list(map: &mut swc_sourcemap::SourceMap) {\n     let mut ignored_ids = HashSet::new();\n \n     for (source_id, source) in map.sources().enumerate() {"
        },
        {
            "sha": "32e502cbce340469ed572c552e45b360d7c9e2be",
            "filename": "turbopack/crates/turbopack-css/src/process.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -588,11 +588,11 @@ fn generate_css_source_map(source_map: &parcel_sourcemap::SourceMap) -> Result<R\n     let mut builder = SourceMapBuilder::new(None);\n \n     for src in source_map.get_sources() {\n-        builder.add_source(&format!(\"{SOURCE_URL_PROTOCOL}///{src}\"));\n+        builder.add_source(format!(\"{SOURCE_URL_PROTOCOL}///{src}\").into());\n     }\n \n     for (idx, content) in source_map.get_sources_content().iter().enumerate() {\n-        builder.set_source_contents(idx as _, Some(content));\n+        builder.set_source_contents(idx as _, Some(content.clone().into()));\n     }\n \n     for m in source_map.get_mappings() {"
        },
        {
            "sha": "46a091bb42ae040046938cc61ee5446898bcce7d",
            "filename": "turbopack/crates/turbopack-ecmascript/Cargo.toml",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-ecmascript%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-ecmascript%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2FCargo.toml?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -15,6 +15,7 @@ workspace = true\n [dependencies]\n anyhow = { workspace = true }\n async-trait = { workspace = true }\n+bytes-str = { workspace = true }\n data-encoding = { workspace = true }\n either = { workspace = true }\n indexmap = { workspace = true }\n@@ -29,7 +30,7 @@ regex = { workspace = true }\n rustc-hash = { workspace = true }\n serde = { workspace = true }\n serde_json = { workspace = true, features = [\"raw_value\"] }\n-sourcemap = { workspace = true }\n+swc_sourcemap = { workspace = true }\n smallvec = { workspace = true }\n strsim = { workspace = true }\n tokio = { workspace = true }"
        },
        {
            "sha": "b6ea157b027f39b5dcca0faa5bae8b0b987e3be5",
            "filename": "turbopack/crates/turbopack-ecmascript/src/parse.rs",
            "status": "modified",
            "additions": 45,
            "deletions": 38,
            "changes": 83,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -1,6 +1,7 @@\n use std::{future::Future, sync::Arc};\n \n use anyhow::{Context, Result, anyhow};\n+use bytes_str::BytesStr;\n use rustc_hash::FxHashSet;\n use swc_core::{\n     base::SwcComments,\n@@ -107,7 +108,7 @@ pub fn generate_js_source_map(\n ) -> Result<Rope> {\n     let original_source_map = original_source_map.map(|x| x.to_bytes());\n     let input_map = if let Some(original_source_map) = &original_source_map {\n-        Some(sourcemap::lazy::decode(original_source_map)?.into_source_map()?)\n+        Some(swc_sourcemap::lazy::decode(original_source_map)?.into_source_map()?)\n     } else {\n         None\n     };\n@@ -224,52 +225,58 @@ async fn parse_internal(\n     Ok(match &*content {\n         AssetContent::File(file) => match &*file.await? {\n             FileContent::NotFound => ParseResult::NotFound.cell(),\n-            FileContent::Content(file) => match file.content().to_str() {\n-                Ok(string) => {\n-                    let transforms = &*transforms.await?;\n-                    match parse_file_content(\n-                        string.into_owned(),\n-                        fs_path_vc,\n-                        fs_path,\n-                        ident,\n-                        source.ident().await?.query.clone(),\n-                        file_path_hash,\n-                        source,\n-                        ty,\n-                        transforms,\n-                    )\n-                    .await\n-                    {\n-                        Ok(result) => result,\n-                        Err(e) => {\n-                            return Err(e).context(anyhow!(\n-                                \"Transforming and/or parsing of {} failed\",\n-                                source.ident().to_string().await?\n-                            ));\n+            FileContent::Content(file) => {\n+                match BytesStr::from_utf8(file.content().clone().into_bytes()) {\n+                    Ok(string) => {\n+                        let transforms = &*transforms.await?;\n+                        match parse_file_content(\n+                            string,\n+                            fs_path_vc,\n+                            fs_path,\n+                            ident,\n+                            source.ident().await?.query.clone(),\n+                            file_path_hash,\n+                            source,\n+                            ty,\n+                            transforms,\n+                        )\n+                        .await\n+                        {\n+                            Ok(result) => result,\n+                            Err(e) => {\n+                                return Err(e).context(anyhow!(\n+                                    \"Transforming and/or parsing of {} failed\",\n+                                    source.ident().to_string().await?\n+                                ));\n+                            }\n                         }\n                     }\n-                }\n-                Err(error) => {\n-                    let error: RcStr = PrettyPrintError(&error).to_string().into();\n-                    ReadSourceIssue {\n-                        source,\n-                        error: error.clone(),\n-                    }\n-                    .resolved_cell()\n-                    .emit();\n-                    ParseResult::Unparseable {\n-                        messages: Some(vec![error]),\n+                    Err(error) => {\n+                        let error: RcStr = PrettyPrintError(\n+                            &anyhow::anyhow!(error).context(\"failed to convert rope into string\"),\n+                        )\n+                        .to_string()\n+                        .into();\n+                        ReadSourceIssue {\n+                            source,\n+                            error: error.clone(),\n+                        }\n+                        .resolved_cell()\n+                        .emit();\n+                        ParseResult::Unparseable {\n+                            messages: Some(vec![error]),\n+                        }\n+                        .cell()\n                     }\n-                    .cell()\n                 }\n-            },\n+            }\n         },\n         AssetContent::Redirect { .. } => ParseResult::Unparseable { messages: None }.cell(),\n     })\n }\n \n async fn parse_file_content(\n-    string: String,\n+    string: BytesStr,\n     fs_path_vc: Vc<FileSystemPath>,\n     fs_path: &FileSystemPath,\n     ident: &str,\n@@ -450,7 +457,7 @@ async fn parse_file_content(\n                     None\n                 };\n                 let messages =\n-                    Some(messages.unwrap_or_else(|| vec![String::clone(&fm.src).into()]));\n+                    Some(messages.unwrap_or_else(|| vec![fm.src.clone().into()]));\n                 return Ok(ParseResult::Unparseable { messages });\n             }\n "
        },
        {
            "sha": "e744ea44fdc85677032907eb678310b1b1000a9f",
            "filename": "turbopack/crates/turbopack-ecmascript/src/path_visitor.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fpath_visitor.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/60fb2f1c0ca381df16c56856257b3e20c21af0e0/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fpath_visitor.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fpath_visitor.rs?ref=60fb2f1c0ca381df16c56856257b3e20c21af0e0",
            "patch": "@@ -225,7 +225,7 @@ mod tests {\n     #[test]\n     fn path_visitor() {\n         run_test(false, |cm, _handler| {\n-            let fm = cm.new_source_file(FileName::Anon.into(), \"('foo', 'bar', ['baz']);\".into());\n+            let fm = cm.new_source_file(FileName::Anon.into(), \"('foo', 'bar', ['baz']);\");\n \n             let m = parse(&fm);\n "
        }
    ],
    "stats": {
        "total": 681,
        "additions": 312,
        "deletions": 369
    }
}