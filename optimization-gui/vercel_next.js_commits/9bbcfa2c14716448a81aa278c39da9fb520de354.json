{
    "author": "nextjs-bot",
    "message": "Upgrade React from `5d87cd22-20250704` to `a7a11657-20250708` (#81428)\n\nCo-authored-by: Sebastian Sebbie Silbermann <sebastian.silbermann@vercel.com>",
    "sha": "9bbcfa2c14716448a81aa278c39da9fb520de354",
    "files": [
        {
            "sha": "c3a51eac7f186e7b8f0d42ad28930c025ae896ce",
            "filename": "package.json",
            "status": "modified",
            "additions": 15,
            "deletions": 15,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/package.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/package.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/package.json?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -233,16 +233,16 @@\n     \"pretty-ms\": \"7.0.0\",\n     \"random-seed\": \"0.3.0\",\n     \"react\": \"19.0.0\",\n-    \"react-builtin\": \"npm:react@19.2.0-canary-5d87cd22-20250704\",\n+    \"react-builtin\": \"npm:react@19.2.0-canary-a7a11657-20250708\",\n     \"react-dom\": \"19.0.0\",\n-    \"react-dom-builtin\": \"npm:react-dom@19.2.0-canary-5d87cd22-20250704\",\n-    \"react-dom-experimental-builtin\": \"npm:react-dom@0.0.0-experimental-5d87cd22-20250704\",\n-    \"react-experimental-builtin\": \"npm:react@0.0.0-experimental-5d87cd22-20250704\",\n-    \"react-is-builtin\": \"npm:react-is@19.2.0-canary-5d87cd22-20250704\",\n-    \"react-server-dom-turbopack\": \"19.2.0-canary-5d87cd22-20250704\",\n-    \"react-server-dom-turbopack-experimental\": \"npm:react-server-dom-turbopack@0.0.0-experimental-5d87cd22-20250704\",\n-    \"react-server-dom-webpack\": \"19.2.0-canary-5d87cd22-20250704\",\n-    \"react-server-dom-webpack-experimental\": \"npm:react-server-dom-webpack@0.0.0-experimental-5d87cd22-20250704\",\n+    \"react-dom-builtin\": \"npm:react-dom@19.2.0-canary-a7a11657-20250708\",\n+    \"react-dom-experimental-builtin\": \"npm:react-dom@0.0.0-experimental-a7a11657-20250708\",\n+    \"react-experimental-builtin\": \"npm:react@0.0.0-experimental-a7a11657-20250708\",\n+    \"react-is-builtin\": \"npm:react-is@19.2.0-canary-a7a11657-20250708\",\n+    \"react-server-dom-turbopack\": \"19.2.0-canary-a7a11657-20250708\",\n+    \"react-server-dom-turbopack-experimental\": \"npm:react-server-dom-turbopack@0.0.0-experimental-a7a11657-20250708\",\n+    \"react-server-dom-webpack\": \"19.2.0-canary-a7a11657-20250708\",\n+    \"react-server-dom-webpack-experimental\": \"npm:react-server-dom-webpack@0.0.0-experimental-a7a11657-20250708\",\n     \"react-ssr-prepass\": \"1.0.8\",\n     \"react-virtualized\": \"9.22.3\",\n     \"relay-compiler\": \"13.0.2\",\n@@ -252,8 +252,8 @@\n     \"resolve-from\": \"5.0.0\",\n     \"sass\": \"1.54.0\",\n     \"satori\": \"0.12.2\",\n-    \"scheduler-builtin\": \"npm:scheduler@0.27.0-canary-5d87cd22-20250704\",\n-    \"scheduler-experimental-builtin\": \"npm:scheduler@0.0.0-experimental-5d87cd22-20250704\",\n+    \"scheduler-builtin\": \"npm:scheduler@0.27.0-canary-a7a11657-20250708\",\n+    \"scheduler-experimental-builtin\": \"npm:scheduler@0.0.0-experimental-a7a11657-20250708\",\n     \"seedrandom\": \"3.0.5\",\n     \"semver\": \"7.3.7\",\n     \"serve-handler\": \"6.1.6\",\n@@ -297,10 +297,10 @@\n       \"@types/react-dom\": \"19.1.2\",\n       \"@types/retry\": \"0.12.0\",\n       \"jest-snapshot\": \"30.0.0-alpha.6\",\n-      \"react\": \"19.2.0-canary-5d87cd22-20250704\",\n-      \"react-dom\": \"19.2.0-canary-5d87cd22-20250704\",\n-      \"react-is\": \"19.2.0-canary-5d87cd22-20250704\",\n-      \"scheduler\": \"0.27.0-canary-5d87cd22-20250704\"\n+      \"react\": \"19.2.0-canary-a7a11657-20250708\",\n+      \"react-dom\": \"19.2.0-canary-a7a11657-20250708\",\n+      \"react-is\": \"19.2.0-canary-a7a11657-20250708\",\n+      \"scheduler\": \"0.27.0-canary-a7a11657-20250708\"\n     },\n     \"patchedDependencies\": {\n       \"webpack-sources@3.2.3\": \"patches/webpack-sources@3.2.3.patch\","
        },
        {
            "sha": "f4a933faf8552076fac3f682211999acc8fc3544",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-client.development.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -841,7 +841,7 @@\n       \"function\" === typeof fn && componentFrameCache.set(fn, sampleLines);\n       return sampleLines;\n     }\n-    function describeFiber(fiber) {\n+    function describeFiber(fiber, childFiber) {\n       switch (fiber.tag) {\n         case 26:\n         case 27:\n@@ -850,7 +850,9 @@\n         case 16:\n           return describeBuiltInComponentFrame(\"Lazy\");\n         case 13:\n-          return describeBuiltInComponentFrame(\"Suspense\");\n+          return fiber.child !== childFiber && null !== childFiber\n+            ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+            : describeBuiltInComponentFrame(\"Suspense\");\n         case 19:\n           return describeBuiltInComponentFrame(\"SuspenseList\");\n         case 0:\n@@ -870,9 +872,10 @@\n     }\n     function getStackByFiberInDevAndProd(workInProgress) {\n       try {\n-        var info = \"\";\n+        var info = \"\",\n+          previous = null;\n         do {\n-          info += describeFiber(workInProgress);\n+          info += describeFiber(workInProgress, previous);\n           var debugInfo = workInProgress._debugInfo;\n           if (debugInfo)\n             for (var i = debugInfo.length - 1; 0 <= i; i--) {\n@@ -900,6 +903,7 @@\n                 info = JSCompiler_temp_const + JSCompiler_inline_result;\n               }\n             }\n+          previous = workInProgress;\n           workInProgress = workInProgress.return;\n         } while (workInProgress);\n         return info;\n@@ -31105,11 +31109,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -31146,10 +31150,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-experimental-5d87cd22-20250704\",\n+          version: \"19.2.0-experimental-a7a11657-20250708\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-experimental-5d87cd22-20250704\"\n+          reconcilerVersion: \"19.2.0-experimental-a7a11657-20250708\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -31295,7 +31299,7 @@\n       listenToAllSupportedEvents(container);\n       return new ReactDOMHydrationRoot(initialChildren);\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "330683d1e3912a0a8f423b818b6dba8a1aa629b5",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-client.production.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -578,7 +578,7 @@ function describeNativeComponentFrame(fn, construct) {\n     ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n     : \"\";\n }\n-function describeFiber(fiber) {\n+function describeFiber(fiber, childFiber) {\n   switch (fiber.tag) {\n     case 26:\n     case 27:\n@@ -587,7 +587,9 @@ function describeFiber(fiber) {\n     case 16:\n       return describeBuiltInComponentFrame(\"Lazy\");\n     case 13:\n-      return describeBuiltInComponentFrame(\"Suspense\");\n+      return fiber.child !== childFiber && null !== childFiber\n+        ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+        : describeBuiltInComponentFrame(\"Suspense\");\n     case 19:\n       return describeBuiltInComponentFrame(\"SuspenseList\");\n     case 0:\n@@ -607,9 +609,11 @@ function describeFiber(fiber) {\n }\n function getStackByFiberInDevAndProd(workInProgress) {\n   try {\n-    var info = \"\";\n+    var info = \"\",\n+      previous = null;\n     do\n-      (info += describeFiber(workInProgress)),\n+      (info += describeFiber(workInProgress, previous)),\n+        (previous = workInProgress),\n         (workInProgress = workInProgress.return);\n     while (workInProgress);\n     return info;\n@@ -19253,14 +19257,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_2169 = React.version;\n if (\n-  \"19.2.0-experimental-5d87cd22-20250704\" !==\n+  \"19.2.0-experimental-a7a11657-20250708\" !==\n   isomorphicReactPackageVersion$jscomp$inline_2169\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_2169,\n-      \"19.2.0-experimental-5d87cd22-20250704\"\n+      \"19.2.0-experimental-a7a11657-20250708\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -19282,10 +19286,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_2854 = {\n   bundleType: 0,\n-  version: \"19.2.0-experimental-5d87cd22-20250704\",\n+  version: \"19.2.0-experimental-a7a11657-20250708\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-experimental-5d87cd22-20250704\"\n+  reconcilerVersion: \"19.2.0-experimental-a7a11657-20250708\"\n };\n if (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n   var hook$jscomp$inline_2855 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n@@ -19392,4 +19396,4 @@ exports.hydrateRoot = function (container, initialChildren, options) {\n   listenToAllSupportedEvents(container);\n   return new ReactDOMHydrationRoot(initialChildren);\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "f0b7548a913754a86e77423a9259faceadfcfea4",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-profiling.development.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -849,7 +849,7 @@\n       \"function\" === typeof fn && componentFrameCache.set(fn, sampleLines);\n       return sampleLines;\n     }\n-    function describeFiber(fiber) {\n+    function describeFiber(fiber, childFiber) {\n       switch (fiber.tag) {\n         case 26:\n         case 27:\n@@ -858,7 +858,9 @@\n         case 16:\n           return describeBuiltInComponentFrame(\"Lazy\");\n         case 13:\n-          return describeBuiltInComponentFrame(\"Suspense\");\n+          return fiber.child !== childFiber && null !== childFiber\n+            ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+            : describeBuiltInComponentFrame(\"Suspense\");\n         case 19:\n           return describeBuiltInComponentFrame(\"SuspenseList\");\n         case 0:\n@@ -878,9 +880,10 @@\n     }\n     function getStackByFiberInDevAndProd(workInProgress) {\n       try {\n-        var info = \"\";\n+        var info = \"\",\n+          previous = null;\n         do {\n-          info += describeFiber(workInProgress);\n+          info += describeFiber(workInProgress, previous);\n           var debugInfo = workInProgress._debugInfo;\n           if (debugInfo)\n             for (var i = debugInfo.length - 1; 0 <= i; i--) {\n@@ -908,6 +911,7 @@\n                 info = JSCompiler_temp_const + JSCompiler_inline_result;\n               }\n             }\n+          previous = workInProgress;\n           workInProgress = workInProgress.return;\n         } while (workInProgress);\n         return info;\n@@ -31157,11 +31161,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -31198,10 +31202,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-experimental-5d87cd22-20250704\",\n+          version: \"19.2.0-experimental-a7a11657-20250708\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-experimental-5d87cd22-20250704\"\n+          reconcilerVersion: \"19.2.0-experimental-a7a11657-20250708\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -31677,7 +31681,7 @@\n     exports.useFormStatus = function () {\n       return resolveDispatcher().useHostTransitionStatus();\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "a1ea5357371a5af4f3caf127091ff1fd7529e4c9",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-profiling.profiling.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.profiling.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.profiling.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.profiling.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -642,7 +642,7 @@ function describeNativeComponentFrame(fn, construct) {\n     ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n     : \"\";\n }\n-function describeFiber(fiber) {\n+function describeFiber(fiber, childFiber) {\n   switch (fiber.tag) {\n     case 26:\n     case 27:\n@@ -651,7 +651,9 @@ function describeFiber(fiber) {\n     case 16:\n       return describeBuiltInComponentFrame(\"Lazy\");\n     case 13:\n-      return describeBuiltInComponentFrame(\"Suspense\");\n+      return fiber.child !== childFiber && null !== childFiber\n+        ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+        : describeBuiltInComponentFrame(\"Suspense\");\n     case 19:\n       return describeBuiltInComponentFrame(\"SuspenseList\");\n     case 0:\n@@ -671,9 +673,11 @@ function describeFiber(fiber) {\n }\n function getStackByFiberInDevAndProd(workInProgress) {\n   try {\n-    var info = \"\";\n+    var info = \"\",\n+      previous = null;\n     do\n-      (info += describeFiber(workInProgress)),\n+      (info += describeFiber(workInProgress, previous)),\n+        (previous = workInProgress),\n         (workInProgress = workInProgress.return);\n     while (workInProgress);\n     return info;\n@@ -20935,14 +20939,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_2391 = React.version;\n if (\n-  \"19.2.0-experimental-5d87cd22-20250704\" !==\n+  \"19.2.0-experimental-a7a11657-20250708\" !==\n   isomorphicReactPackageVersion$jscomp$inline_2391\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_2391,\n-      \"19.2.0-experimental-5d87cd22-20250704\"\n+      \"19.2.0-experimental-a7a11657-20250708\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -20964,10 +20968,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_3078 = {\n   bundleType: 0,\n-  version: \"19.2.0-experimental-5d87cd22-20250704\",\n+  version: \"19.2.0-experimental-a7a11657-20250708\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-experimental-5d87cd22-20250704\"\n+  reconcilerVersion: \"19.2.0-experimental-a7a11657-20250708\"\n };\n if (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n   var hook$jscomp$inline_3079 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n@@ -21234,7 +21238,7 @@ exports.useFormState = function (action, initialState, permalink) {\n exports.useFormStatus = function () {\n   return ReactSharedInternals.H.useHostTransitionStatus();\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n   \"function\" ===\n     typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "2482b95332ee598f78898c952b5f17902e96ab33",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server-legacy.browser.development.js",
            "status": "modified",
            "additions": 46,
            "deletions": 30,
            "changes": 76,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4955,14 +4955,16 @@\n           if (\"number\" === typeof info.time) break;\n           if (null != info.awaited) {\n             var bestStack = null == info.debugStack ? info.awaited : info;\n-            void 0 !== bestStack.debugStack &&\n-              ((task.componentStack = {\n+            if (void 0 !== bestStack.debugStack) {\n+              task.componentStack = {\n                 parent: task.componentStack,\n                 type: info,\n                 owner: bestStack.owner,\n                 stack: bestStack.debugStack\n-              }),\n-              (task.debugTask = bestStack.debugTask));\n+              };\n+              task.debugTask = bestStack.debugTask;\n+              break;\n+            }\n           }\n         }\n     }\n@@ -5006,6 +5008,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -5835,27 +5849,20 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                pushSegmentFinale(\n+                  preambleSegment.chunks,\n+                  request.renderState,\n+                  preambleSegment.lastPushedText,\n+                  preambleSegment.textEmbedded\n+                ),\n+                (preambleSegment.status = COMPLETED);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -6134,7 +6141,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -6157,6 +6165,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$1\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -6197,7 +6209,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6308,7 +6320,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6628,7 +6642,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -10486,5 +10502,5 @@\n         'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server'\n       );\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "ecad99947ea0073ff50ecef3e34de8a624647d13",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server-legacy.browser.production.js",
            "status": "modified",
            "additions": 35,
            "deletions": 24,
            "changes": 59,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4135,6 +4135,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4580,25 +4587,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           !1\n         );\n         segment.preambleChildren.push(preambleSegment);\n-        var preambleTask = createRenderTask(\n-          request,\n-          null,\n-          children$43,\n-          -1,\n-          task.blockedBoundary,\n-          preambleSegment,\n-          task.blockedPreamble,\n-          task.hoistableState,\n-          request.abortableTasks,\n-          task.keyPath,\n-          task.formatContext,\n-          task.context,\n-          task.treeContext,\n-          task.row,\n-          task.componentStack\n-        );\n-        pushComponentStack(preambleTask);\n-        request.pingedTasks.push(preambleTask);\n+        task.blockedSegment = preambleSegment;\n+        try {\n+          (preambleSegment.status = 6),\n+            renderNode(request, task, children$43, -1),\n+            pushSegmentFinale(\n+              preambleSegment.chunks,\n+              request.renderState,\n+              preambleSegment.lastPushedText,\n+              preambleSegment.textEmbedded\n+            ),\n+            (preambleSegment.status = 1);\n+        } finally {\n+          task.blockedSegment = segment;\n+        }\n       } else renderNode(request, task, children$43, -1);\n       task.formatContext = prevContext$44;\n       task.keyPath = prevKeyPath$45;\n@@ -4861,7 +4863,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            var fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n+            var suspenseComponentStack = task.componentStack,\n+              fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n               fallbackReplayNode = [\n                 fallbackKeyPath[1],\n                 fallbackKeyPath[2],\n@@ -4880,6 +4883,10 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               request.resumableState,\n               prevContext$jscomp$1\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                suspenseComponentStack\n+              );\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -4919,7 +4926,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              suspenseComponentStack\n             );\n             pushComponentStack(suspendedPrimaryTask);\n             request.pingedTasks.push(suspendedPrimaryTask);\n@@ -5006,7 +5013,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(suspendedFallbackTask);\n             request.pingedTasks.push(suspendedFallbackTask);\n@@ -5302,7 +5311,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(task);\n                       request.pingedTasks.push(task);\n@@ -7107,4 +7118,4 @@ exports.renderToString = function (children, options) {\n     'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server'\n   );\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "f49fe65128fd1371124e0a0663db1d625cf9d5ad",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server-legacy.node.development.js",
            "status": "modified",
            "additions": 46,
            "deletions": 30,
            "changes": 76,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4955,14 +4955,16 @@\n           if (\"number\" === typeof info.time) break;\n           if (null != info.awaited) {\n             var bestStack = null == info.debugStack ? info.awaited : info;\n-            void 0 !== bestStack.debugStack &&\n-              ((task.componentStack = {\n+            if (void 0 !== bestStack.debugStack) {\n+              task.componentStack = {\n                 parent: task.componentStack,\n                 type: info,\n                 owner: bestStack.owner,\n                 stack: bestStack.debugStack\n-              }),\n-              (task.debugTask = bestStack.debugTask));\n+              };\n+              task.debugTask = bestStack.debugTask;\n+              break;\n+            }\n           }\n         }\n     }\n@@ -5006,6 +5008,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -5835,27 +5849,20 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                pushSegmentFinale(\n+                  preambleSegment.chunks,\n+                  request.renderState,\n+                  preambleSegment.lastPushedText,\n+                  preambleSegment.textEmbedded\n+                ),\n+                (preambleSegment.status = COMPLETED);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -6134,7 +6141,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -6157,6 +6165,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$1\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -6197,7 +6209,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6308,7 +6320,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6628,7 +6642,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -10486,5 +10502,5 @@\n         'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToPipeableStream\" which supports Suspense on the server'\n       );\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "4019936e5dd6f0ee589059c18e9d2a15e450c99b",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server-legacy.node.production.js",
            "status": "modified",
            "additions": 35,
            "deletions": 24,
            "changes": 59,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4186,6 +4186,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4631,25 +4638,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           !1\n         );\n         segment.preambleChildren.push(preambleSegment);\n-        var preambleTask = createRenderTask(\n-          request,\n-          null,\n-          children$43,\n-          -1,\n-          task.blockedBoundary,\n-          preambleSegment,\n-          task.blockedPreamble,\n-          task.hoistableState,\n-          request.abortableTasks,\n-          task.keyPath,\n-          task.formatContext,\n-          task.context,\n-          task.treeContext,\n-          task.row,\n-          task.componentStack\n-        );\n-        pushComponentStack(preambleTask);\n-        request.pingedTasks.push(preambleTask);\n+        task.blockedSegment = preambleSegment;\n+        try {\n+          (preambleSegment.status = 6),\n+            renderNode(request, task, children$43, -1),\n+            pushSegmentFinale(\n+              preambleSegment.chunks,\n+              request.renderState,\n+              preambleSegment.lastPushedText,\n+              preambleSegment.textEmbedded\n+            ),\n+            (preambleSegment.status = 1);\n+        } finally {\n+          task.blockedSegment = segment;\n+        }\n       } else renderNode(request, task, children$43, -1);\n       task.formatContext = prevContext$44;\n       task.keyPath = prevKeyPath$45;\n@@ -4912,7 +4914,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            var fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n+            var suspenseComponentStack = task.componentStack,\n+              fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n               fallbackReplayNode = [\n                 fallbackKeyPath[1],\n                 fallbackKeyPath[2],\n@@ -4931,6 +4934,10 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               request.resumableState,\n               prevContext$jscomp$1\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                suspenseComponentStack\n+              );\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -4970,7 +4977,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              suspenseComponentStack\n             );\n             pushComponentStack(suspendedPrimaryTask);\n             request.pingedTasks.push(suspendedPrimaryTask);\n@@ -5057,7 +5064,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(suspendedFallbackTask);\n             request.pingedTasks.push(suspendedFallbackTask);\n@@ -5363,7 +5372,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(task);\n                       request.pingedTasks.push(task);\n@@ -7210,4 +7221,4 @@ exports.renderToString = function (children, options) {\n     'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToPipeableStream\" which supports Suspense on the server'\n   );\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "6b40b0cb4d71198ff4e376602365dc710a7bc78e",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.browser.development.js",
            "status": "modified",
            "additions": 46,
            "deletions": 32,
            "changes": 78,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -5329,14 +5329,16 @@\n           if (\"number\" === typeof info.time) break;\n           if (null != info.awaited) {\n             var bestStack = null == info.debugStack ? info.awaited : info;\n-            void 0 !== bestStack.debugStack &&\n-              ((task.componentStack = {\n+            if (void 0 !== bestStack.debugStack) {\n+              task.componentStack = {\n                 parent: task.componentStack,\n                 type: info,\n                 owner: bestStack.owner,\n                 stack: bestStack.debugStack\n-              }),\n-              (task.debugTask = bestStack.debugTask));\n+              };\n+              task.debugTask = bestStack.debugTask;\n+              break;\n+            }\n           }\n         }\n     }\n@@ -5380,6 +5382,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -6208,27 +6222,18 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                preambleSegment.lastPushedText &&\n+                  preambleSegment.textEmbedded &&\n+                  preambleSegment.chunks.push(textSeparator),\n+                (preambleSegment.status = COMPLETED),\n+                finishedSegment(request, task.blockedBoundary, preambleSegment);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -6563,7 +6568,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -6586,6 +6592,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$1\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -6624,7 +6634,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6733,7 +6743,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -7063,7 +7075,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -9477,11 +9491,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     var React = require(\"next/dist/compiled/react-experimental\"),\n@@ -11300,5 +11314,5 @@\n         startWork(request);\n       });\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "acdde504aca54a33836fc7f6a97b5fd58b5d264f",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.browser.production.js",
            "status": "modified",
            "additions": 35,
            "deletions": 26,
            "changes": 61,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4742,6 +4742,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -5185,25 +5192,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           !1\n         );\n         segment.preambleChildren.push(preambleSegment);\n-        var preambleTask = createRenderTask(\n-          request,\n-          null,\n-          children$44,\n-          -1,\n-          task.blockedBoundary,\n-          preambleSegment,\n-          task.blockedPreamble,\n-          task.hoistableState,\n-          request.abortableTasks,\n-          task.keyPath,\n-          task.formatContext,\n-          task.context,\n-          task.treeContext,\n-          task.row,\n-          task.componentStack\n-        );\n-        pushComponentStack(preambleTask);\n-        request.pingedTasks.push(preambleTask);\n+        task.blockedSegment = preambleSegment;\n+        try {\n+          (preambleSegment.status = 6),\n+            renderNode(request, task, children$44, -1),\n+            preambleSegment.lastPushedText &&\n+              preambleSegment.textEmbedded &&\n+              preambleSegment.chunks.push(textSeparator),\n+            (preambleSegment.status = 1),\n+            finishedSegment(request, task.blockedBoundary, preambleSegment);\n+        } finally {\n+          task.blockedSegment = segment;\n+        }\n       } else renderNode(request, task, children$44, -1);\n       task.formatContext = prevContext$45;\n       task.keyPath = prevKeyPath$46;\n@@ -5523,7 +5523,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            var fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n+            var suspenseComponentStack = task.componentStack,\n+              fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n               fallbackReplayNode = [\n                 fallbackKeyPath[1],\n                 fallbackKeyPath[2],\n@@ -5542,6 +5543,10 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               request.resumableState,\n               prevContext$jscomp$1\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                suspenseComponentStack\n+              );\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -5579,7 +5584,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              suspenseComponentStack\n             );\n             pushComponentStack(suspendedPrimaryTask);\n             request.pingedTasks.push(suspendedPrimaryTask);\n@@ -5664,7 +5669,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(suspendedFallbackTask);\n             request.pingedTasks.push(suspendedFallbackTask);\n@@ -5970,7 +5977,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(task);\n                       request.pingedTasks.push(task);\n@@ -7772,12 +7781,12 @@ function getPostponedState(request) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n     throw Error(\n       formatProdErrorMessage(\n         527,\n         isomorphicReactPackageVersion,\n-        \"19.2.0-experimental-5d87cd22-20250704\"\n+        \"19.2.0-experimental-a7a11657-20250708\"\n       )\n     );\n }\n@@ -8032,4 +8041,4 @@ exports.resumeAndPrerender = function (children, postponedState, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "999d45ef8c1d158d342b6ddbbbe801905a02ac8c",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.bun.production.js",
            "status": "modified",
            "additions": 41,
            "deletions": 29,
            "changes": 70,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.bun.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.bun.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.bun.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4219,6 +4219,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4665,25 +4672,21 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           !1\n         );\n         segment.preambleChildren.push(preambleSegment);\n-        var preambleTask = createRenderTask(\n-          request,\n-          null,\n-          children$43,\n-          -1,\n-          task.blockedBoundary,\n-          preambleSegment,\n-          task.blockedPreamble,\n-          task.hoistableState,\n-          request.abortableTasks,\n-          task.keyPath,\n-          task.formatContext,\n-          task.context,\n-          task.treeContext,\n-          task.row,\n-          task.componentStack\n-        );\n-        pushComponentStack(preambleTask);\n-        request.pingedTasks.push(preambleTask);\n+        task.blockedSegment = preambleSegment;\n+        try {\n+          (preambleSegment.status = 6),\n+            renderNode(request, task, children$43, -1),\n+            pushSegmentFinale(\n+              preambleSegment.chunks,\n+              request.renderState,\n+              preambleSegment.lastPushedText,\n+              preambleSegment.textEmbedded\n+            ),\n+            (preambleSegment.status = 1),\n+            finishedSegment(request, task.blockedBoundary, preambleSegment);\n+        } finally {\n+          task.blockedSegment = segment;\n+        }\n       } else renderNode(request, task, children$43, -1);\n       task.formatContext = prevContext$44;\n       task.keyPath = prevKeyPath$45;\n@@ -5003,7 +5006,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            var fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n+            var suspenseComponentStack = task.componentStack,\n+              fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n               fallbackReplayNode = [\n                 fallbackKeyPath[1],\n                 fallbackKeyPath[2],\n@@ -5022,6 +5026,10 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               request.resumableState,\n               prevContext$jscomp$1\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                suspenseComponentStack\n+              );\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -5062,7 +5070,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              suspenseComponentStack\n             );\n             pushComponentStack(suspendedPrimaryTask);\n             request.pingedTasks.push(suspendedPrimaryTask);\n@@ -5150,7 +5158,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(suspendedFallbackTask);\n             request.pingedTasks.push(suspendedFallbackTask);\n@@ -5466,7 +5476,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(task);\n                       request.pingedTasks.push(task);\n@@ -7255,15 +7267,15 @@ function addToReplayParent(node, parentKeyPath, trackedPostpones) {\n     parentNode[2].push(node);\n   }\n }\n-var isomorphicReactPackageVersion$jscomp$inline_868 = React.version;\n+var isomorphicReactPackageVersion$jscomp$inline_869 = React.version;\n if (\n-  \"19.2.0-experimental-5d87cd22-20250704\" !==\n-  isomorphicReactPackageVersion$jscomp$inline_868\n+  \"19.2.0-experimental-a7a11657-20250708\" !==\n+  isomorphicReactPackageVersion$jscomp$inline_869\n )\n   throw Error(\n     'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n-      (isomorphicReactPackageVersion$jscomp$inline_868 +\n-        \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+      (isomorphicReactPackageVersion$jscomp$inline_869 +\n+        \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n   );\n exports.renderToReadableStream = function (children, options) {\n   return new Promise(function (resolve, reject) {\n@@ -7354,4 +7366,4 @@ exports.renderToReadableStream = function (children, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "ea937f39411fc88d0d36ae5f3a9307dde0a0a283",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.edge.development.js",
            "status": "modified",
            "additions": 46,
            "deletions": 32,
            "changes": 78,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -5345,14 +5345,16 @@\n           if (\"number\" === typeof info.time) break;\n           if (null != info.awaited) {\n             var bestStack = null == info.debugStack ? info.awaited : info;\n-            void 0 !== bestStack.debugStack &&\n-              ((task.componentStack = {\n+            if (void 0 !== bestStack.debugStack) {\n+              task.componentStack = {\n                 parent: task.componentStack,\n                 type: info,\n                 owner: bestStack.owner,\n                 stack: bestStack.debugStack\n-              }),\n-              (task.debugTask = bestStack.debugTask));\n+              };\n+              task.debugTask = bestStack.debugTask;\n+              break;\n+            }\n           }\n         }\n     }\n@@ -5396,6 +5398,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -6224,27 +6238,18 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                preambleSegment.lastPushedText &&\n+                  preambleSegment.textEmbedded &&\n+                  preambleSegment.chunks.push(textSeparator),\n+                (preambleSegment.status = COMPLETED),\n+                finishedSegment(request, task.blockedBoundary, preambleSegment);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -6579,7 +6584,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -6602,6 +6608,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$1\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -6640,7 +6650,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6749,7 +6759,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -7079,7 +7091,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -9506,11 +9520,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     var React = require(\"next/dist/compiled/react-experimental\"),\n@@ -11325,5 +11339,5 @@\n         startWork(request);\n       });\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "6e3d480af74846f9faf915b0f1dd66592833883e",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.edge.production.js",
            "status": "modified",
            "additions": 35,
            "deletions": 26,
            "changes": 61,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4802,6 +4802,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -5245,25 +5252,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           !1\n         );\n         segment.preambleChildren.push(preambleSegment);\n-        var preambleTask = createRenderTask(\n-          request,\n-          null,\n-          children$44,\n-          -1,\n-          task.blockedBoundary,\n-          preambleSegment,\n-          task.blockedPreamble,\n-          task.hoistableState,\n-          request.abortableTasks,\n-          task.keyPath,\n-          task.formatContext,\n-          task.context,\n-          task.treeContext,\n-          task.row,\n-          task.componentStack\n-        );\n-        pushComponentStack(preambleTask);\n-        request.pingedTasks.push(preambleTask);\n+        task.blockedSegment = preambleSegment;\n+        try {\n+          (preambleSegment.status = 6),\n+            renderNode(request, task, children$44, -1),\n+            preambleSegment.lastPushedText &&\n+              preambleSegment.textEmbedded &&\n+              preambleSegment.chunks.push(textSeparator),\n+            (preambleSegment.status = 1),\n+            finishedSegment(request, task.blockedBoundary, preambleSegment);\n+        } finally {\n+          task.blockedSegment = segment;\n+        }\n       } else renderNode(request, task, children$44, -1);\n       task.formatContext = prevContext$45;\n       task.keyPath = prevKeyPath$46;\n@@ -5583,7 +5583,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            var fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n+            var suspenseComponentStack = task.componentStack,\n+              fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n               fallbackReplayNode = [\n                 fallbackKeyPath[1],\n                 fallbackKeyPath[2],\n@@ -5602,6 +5603,10 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               request.resumableState,\n               prevContext$jscomp$1\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                suspenseComponentStack\n+              );\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -5639,7 +5644,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              suspenseComponentStack\n             );\n             pushComponentStack(suspendedPrimaryTask);\n             request.pingedTasks.push(suspendedPrimaryTask);\n@@ -5724,7 +5729,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(suspendedFallbackTask);\n             request.pingedTasks.push(suspendedFallbackTask);\n@@ -6040,7 +6047,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(task);\n                       request.pingedTasks.push(task);\n@@ -7890,11 +7899,11 @@ function getPostponedState(request) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n     throw Error(\n       'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n         (isomorphicReactPackageVersion +\n-          \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+          \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n     );\n }\n ensureCorrectIsomorphicReactVersion();\n@@ -8148,4 +8157,4 @@ exports.resumeAndPrerender = function (children, postponedState, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "3812d7d65fc5a473ed78ac83a345f1c68185cf32",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.node.development.js",
            "status": "modified",
            "additions": 46,
            "deletions": 32,
            "changes": 78,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -5231,14 +5231,16 @@\n           if (\"number\" === typeof info.time) break;\n           if (null != info.awaited) {\n             var bestStack = null == info.debugStack ? info.awaited : info;\n-            void 0 !== bestStack.debugStack &&\n-              ((task.componentStack = {\n+            if (void 0 !== bestStack.debugStack) {\n+              task.componentStack = {\n                 parent: task.componentStack,\n                 type: info,\n                 owner: bestStack.owner,\n                 stack: bestStack.debugStack\n-              }),\n-              (task.debugTask = bestStack.debugTask));\n+              };\n+              task.debugTask = bestStack.debugTask;\n+              break;\n+            }\n           }\n         }\n     }\n@@ -5282,6 +5284,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -6109,27 +6123,18 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                preambleSegment.lastPushedText &&\n+                  preambleSegment.textEmbedded &&\n+                  preambleSegment.chunks.push(textSeparator),\n+                (preambleSegment.status = COMPLETED),\n+                finishedSegment(request, task.blockedBoundary, preambleSegment);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -6464,7 +6469,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -6487,6 +6493,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$1\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -6525,7 +6535,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6634,7 +6644,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6964,7 +6976,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -9367,11 +9381,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     function createDrainHandler(destination, request) {\n@@ -11496,5 +11510,5 @@\n         }\n       };\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "2d04ee8e27594c63628cdfef8d55f19eb13a71d4",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.node.production.js",
            "status": "modified",
            "additions": 35,
            "deletions": 26,
            "changes": 61,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4687,6 +4687,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -5130,25 +5137,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           !1\n         );\n         segment.preambleChildren.push(preambleSegment);\n-        var preambleTask = createRenderTask(\n-          request,\n-          null,\n-          children$44,\n-          -1,\n-          task.blockedBoundary,\n-          preambleSegment,\n-          task.blockedPreamble,\n-          task.hoistableState,\n-          request.abortableTasks,\n-          task.keyPath,\n-          task.formatContext,\n-          task.context,\n-          task.treeContext,\n-          task.row,\n-          task.componentStack\n-        );\n-        pushComponentStack(preambleTask);\n-        request.pingedTasks.push(preambleTask);\n+        task.blockedSegment = preambleSegment;\n+        try {\n+          (preambleSegment.status = 6),\n+            renderNode(request, task, children$44, -1),\n+            preambleSegment.lastPushedText &&\n+              preambleSegment.textEmbedded &&\n+              preambleSegment.chunks.push(textSeparator),\n+            (preambleSegment.status = 1),\n+            finishedSegment(request, task.blockedBoundary, preambleSegment);\n+        } finally {\n+          task.blockedSegment = segment;\n+        }\n       } else renderNode(request, task, children$44, -1);\n       task.formatContext = prevContext$45;\n       task.keyPath = prevKeyPath$46;\n@@ -5468,7 +5468,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            var fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n+            var suspenseComponentStack = task.componentStack,\n+              fallbackKeyPath = [keyPath[0], \"Suspense Fallback\", keyPath[2]],\n               fallbackReplayNode = [\n                 fallbackKeyPath[1],\n                 fallbackKeyPath[2],\n@@ -5487,6 +5488,10 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               request.resumableState,\n               prevContext$jscomp$1\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                suspenseComponentStack\n+              );\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -5524,7 +5529,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              suspenseComponentStack\n             );\n             pushComponentStack(suspendedPrimaryTask);\n             request.pingedTasks.push(suspendedPrimaryTask);\n@@ -5609,7 +5614,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(suspendedFallbackTask);\n             request.pingedTasks.push(suspendedFallbackTask);\n@@ -5925,7 +5932,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(task);\n                       request.pingedTasks.push(task);\n@@ -7770,11 +7779,11 @@ function getPostponedState(request) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n     throw Error(\n       'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n         (isomorphicReactPackageVersion +\n-          \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+          \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n     );\n }\n ensureCorrectIsomorphicReactVersion();\n@@ -8332,4 +8341,4 @@ exports.resumeToPipeableStream = function (children, postponedState, options) {\n     }\n   };\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "e4613812a21d3a2224d607acfe2c4658fecc141a",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-unstable_testing.development.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -841,7 +841,7 @@\n       \"function\" === typeof fn && componentFrameCache.set(fn, sampleLines);\n       return sampleLines;\n     }\n-    function describeFiber(fiber) {\n+    function describeFiber(fiber, childFiber) {\n       switch (fiber.tag) {\n         case 26:\n         case 27:\n@@ -850,7 +850,9 @@\n         case 16:\n           return describeBuiltInComponentFrame(\"Lazy\");\n         case 13:\n-          return describeBuiltInComponentFrame(\"Suspense\");\n+          return fiber.child !== childFiber && null !== childFiber\n+            ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+            : describeBuiltInComponentFrame(\"Suspense\");\n         case 19:\n           return describeBuiltInComponentFrame(\"SuspenseList\");\n         case 0:\n@@ -870,9 +872,10 @@\n     }\n     function getStackByFiberInDevAndProd(workInProgress) {\n       try {\n-        var info = \"\";\n+        var info = \"\",\n+          previous = null;\n         do {\n-          info += describeFiber(workInProgress);\n+          info += describeFiber(workInProgress, previous);\n           var debugInfo = workInProgress._debugInfo;\n           if (debugInfo)\n             for (var i = debugInfo.length - 1; 0 <= i; i--) {\n@@ -900,6 +903,7 @@\n                 info = JSCompiler_temp_const + JSCompiler_inline_result;\n               }\n             }\n+          previous = workInProgress;\n           workInProgress = workInProgress.return;\n         } while (workInProgress);\n         return info;\n@@ -31426,11 +31430,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -31467,10 +31471,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-experimental-5d87cd22-20250704\",\n+          version: \"19.2.0-experimental-a7a11657-20250708\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-experimental-5d87cd22-20250704\"\n+          reconcilerVersion: \"19.2.0-experimental-a7a11657-20250708\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -31782,5 +31786,5 @@\n         }\n       };\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "e6f1811c38d92db82043db48c7ff20976e03ab95",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-unstable_testing.production.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -578,7 +578,7 @@ function describeNativeComponentFrame(fn, construct) {\n     ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n     : \"\";\n }\n-function describeFiber(fiber) {\n+function describeFiber(fiber, childFiber) {\n   switch (fiber.tag) {\n     case 26:\n     case 27:\n@@ -587,7 +587,9 @@ function describeFiber(fiber) {\n     case 16:\n       return describeBuiltInComponentFrame(\"Lazy\");\n     case 13:\n-      return describeBuiltInComponentFrame(\"Suspense\");\n+      return fiber.child !== childFiber && null !== childFiber\n+        ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+        : describeBuiltInComponentFrame(\"Suspense\");\n     case 19:\n       return describeBuiltInComponentFrame(\"SuspenseList\");\n     case 0:\n@@ -607,9 +609,11 @@ function describeFiber(fiber) {\n }\n function getStackByFiberInDevAndProd(workInProgress) {\n   try {\n-    var info = \"\";\n+    var info = \"\",\n+      previous = null;\n     do\n-      (info += describeFiber(workInProgress)),\n+      (info += describeFiber(workInProgress, previous)),\n+        (previous = workInProgress),\n         (workInProgress = workInProgress.return);\n     while (workInProgress);\n     return info;\n@@ -19569,14 +19573,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_2198 = React.version;\n if (\n-  \"19.2.0-experimental-5d87cd22-20250704\" !==\n+  \"19.2.0-experimental-a7a11657-20250708\" !==\n   isomorphicReactPackageVersion$jscomp$inline_2198\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_2198,\n-      \"19.2.0-experimental-5d87cd22-20250704\"\n+      \"19.2.0-experimental-a7a11657-20250708\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -19598,10 +19602,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_2888 = {\n   bundleType: 0,\n-  version: \"19.2.0-experimental-5d87cd22-20250704\",\n+  version: \"19.2.0-experimental-a7a11657-20250708\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-experimental-5d87cd22-20250704\"\n+  reconcilerVersion: \"19.2.0-experimental-a7a11657-20250708\"\n };\n if (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n   var hook$jscomp$inline_2889 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n@@ -19859,4 +19863,4 @@ exports.observeVisibleRects = function (\n     }\n   };\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "41bf10834ae697c9437220ee6b8b3067e4b260f6",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -416,7 +416,7 @@\n     exports.useFormStatus = function () {\n       return resolveDispatcher().useHostTransitionStatus();\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "84bcd6729fdd180e03e58366131a2402105b3251",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -207,4 +207,4 @@ exports.useFormState = function (action, initialState, permalink) {\n exports.useFormStatus = function () {\n   return ReactSharedInternals.H.useHostTransitionStatus();\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "1ab411e7d05b91a3838672f2b37d89aa4d50e1cf",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom.react-server.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -336,5 +336,5 @@\n             }))\n           : Internals.d.m(href));\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "a31221f5184a300954d422fcbc52d11f433a342b",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom.react-server.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -149,4 +149,4 @@ exports.preloadModule = function (href, options) {\n       });\n     } else Internals.d.m(href);\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "cb24d2c70bb4876cf0f3bcd5c70d5ca33f4b9bea",
            "filename": "packages/next/src/compiled/react-dom-experimental/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fpackage.json?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -72,10 +72,10 @@\n     \"./package.json\": \"./package.json\"\n   },\n   \"dependencies\": {\n-    \"scheduler\": \"0.0.0-experimental-5d87cd22-20250704\"\n+    \"scheduler\": \"0.0.0-experimental-a7a11657-20250708\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"0.0.0-experimental-5d87cd22-20250704\"\n+    \"react\": \"0.0.0-experimental-a7a11657-20250708\"\n   },\n   \"browser\": {\n     \"./server.js\": \"./server.browser.js\","
        },
        {
            "sha": "d2060e427bf64e9ea0bc9f34bfbf5ddeec62f0df",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-client.development.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -725,7 +725,7 @@\n       \"function\" === typeof fn && componentFrameCache.set(fn, sampleLines);\n       return sampleLines;\n     }\n-    function describeFiber(fiber) {\n+    function describeFiber(fiber, childFiber) {\n       switch (fiber.tag) {\n         case 26:\n         case 27:\n@@ -734,7 +734,9 @@\n         case 16:\n           return describeBuiltInComponentFrame(\"Lazy\");\n         case 13:\n-          return describeBuiltInComponentFrame(\"Suspense\");\n+          return fiber.child !== childFiber && null !== childFiber\n+            ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+            : describeBuiltInComponentFrame(\"Suspense\");\n         case 19:\n           return describeBuiltInComponentFrame(\"SuspenseList\");\n         case 0:\n@@ -752,9 +754,10 @@\n     }\n     function getStackByFiberInDevAndProd(workInProgress) {\n       try {\n-        var info = \"\";\n+        var info = \"\",\n+          previous = null;\n         do {\n-          info += describeFiber(workInProgress);\n+          info += describeFiber(workInProgress, previous);\n           var debugInfo = workInProgress._debugInfo;\n           if (debugInfo)\n             for (var i = debugInfo.length - 1; 0 <= i; i--) {\n@@ -782,6 +785,7 @@\n                 info = JSCompiler_temp_const + JSCompiler_inline_result;\n               }\n             }\n+          previous = workInProgress;\n           workInProgress = workInProgress.return;\n         } while (workInProgress);\n         return info;\n@@ -25503,11 +25507,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -25544,10 +25548,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-canary-5d87cd22-20250704\",\n+          version: \"19.2.0-canary-a7a11657-20250708\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-canary-5d87cd22-20250704\"\n+          reconcilerVersion: \"19.2.0-canary-a7a11657-20250708\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -25685,7 +25689,7 @@\n       listenToAllSupportedEvents(container);\n       return new ReactDOMHydrationRoot(initialChildren);\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "bd5cfc14d417a50666f52a6464f87b820e2cbb83",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-client.production.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -468,7 +468,7 @@ function describeNativeComponentFrame(fn, construct) {\n     ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n     : \"\";\n }\n-function describeFiber(fiber) {\n+function describeFiber(fiber, childFiber) {\n   switch (fiber.tag) {\n     case 26:\n     case 27:\n@@ -477,7 +477,9 @@ function describeFiber(fiber) {\n     case 16:\n       return describeBuiltInComponentFrame(\"Lazy\");\n     case 13:\n-      return describeBuiltInComponentFrame(\"Suspense\");\n+      return fiber.child !== childFiber && null !== childFiber\n+        ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+        : describeBuiltInComponentFrame(\"Suspense\");\n     case 19:\n       return describeBuiltInComponentFrame(\"SuspenseList\");\n     case 0:\n@@ -495,9 +497,11 @@ function describeFiber(fiber) {\n }\n function getStackByFiberInDevAndProd(workInProgress) {\n   try {\n-    var info = \"\";\n+    var info = \"\",\n+      previous = null;\n     do\n-      (info += describeFiber(workInProgress)),\n+      (info += describeFiber(workInProgress, previous)),\n+        (previous = workInProgress),\n         (workInProgress = workInProgress.return);\n     while (workInProgress);\n     return info;\n@@ -15712,14 +15716,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_1838 = React.version;\n if (\n-  \"19.2.0-canary-5d87cd22-20250704\" !==\n+  \"19.2.0-canary-a7a11657-20250708\" !==\n   isomorphicReactPackageVersion$jscomp$inline_1838\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_1838,\n-      \"19.2.0-canary-5d87cd22-20250704\"\n+      \"19.2.0-canary-a7a11657-20250708\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -15741,10 +15745,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_2331 = {\n   bundleType: 0,\n-  version: \"19.2.0-canary-5d87cd22-20250704\",\n+  version: \"19.2.0-canary-a7a11657-20250708\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-canary-5d87cd22-20250704\"\n+  reconcilerVersion: \"19.2.0-canary-a7a11657-20250708\"\n };\n if (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n   var hook$jscomp$inline_2332 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n@@ -15842,4 +15846,4 @@ exports.hydrateRoot = function (container, initialChildren, options) {\n   listenToAllSupportedEvents(container);\n   return new ReactDOMHydrationRoot(initialChildren);\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "64807eca3ecef3c5e7c6b4e90c48635cd7fa253c",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-profiling.development.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -733,7 +733,7 @@\n       \"function\" === typeof fn && componentFrameCache.set(fn, sampleLines);\n       return sampleLines;\n     }\n-    function describeFiber(fiber) {\n+    function describeFiber(fiber, childFiber) {\n       switch (fiber.tag) {\n         case 26:\n         case 27:\n@@ -742,7 +742,9 @@\n         case 16:\n           return describeBuiltInComponentFrame(\"Lazy\");\n         case 13:\n-          return describeBuiltInComponentFrame(\"Suspense\");\n+          return fiber.child !== childFiber && null !== childFiber\n+            ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+            : describeBuiltInComponentFrame(\"Suspense\");\n         case 19:\n           return describeBuiltInComponentFrame(\"SuspenseList\");\n         case 0:\n@@ -760,9 +762,10 @@\n     }\n     function getStackByFiberInDevAndProd(workInProgress) {\n       try {\n-        var info = \"\";\n+        var info = \"\",\n+          previous = null;\n         do {\n-          info += describeFiber(workInProgress);\n+          info += describeFiber(workInProgress, previous);\n           var debugInfo = workInProgress._debugInfo;\n           if (debugInfo)\n             for (var i = debugInfo.length - 1; 0 <= i; i--) {\n@@ -790,6 +793,7 @@\n                 info = JSCompiler_temp_const + JSCompiler_inline_result;\n               }\n             }\n+          previous = workInProgress;\n           workInProgress = workInProgress.return;\n         } while (workInProgress);\n         return info;\n@@ -25555,11 +25559,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -25596,10 +25600,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-canary-5d87cd22-20250704\",\n+          version: \"19.2.0-canary-a7a11657-20250708\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-canary-5d87cd22-20250704\"\n+          reconcilerVersion: \"19.2.0-canary-a7a11657-20250708\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -26067,7 +26071,7 @@\n     exports.useFormStatus = function () {\n       return resolveDispatcher().useHostTransitionStatus();\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "345808f0e05ff82d29a9c101d1253e3e201ba909",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-profiling.profiling.js",
            "status": "modified",
            "additions": 13,
            "deletions": 9,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.profiling.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.profiling.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.profiling.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -472,7 +472,7 @@ function describeNativeComponentFrame(fn, construct) {\n     ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n     : \"\";\n }\n-function describeFiber(fiber) {\n+function describeFiber(fiber, childFiber) {\n   switch (fiber.tag) {\n     case 26:\n     case 27:\n@@ -481,7 +481,9 @@ function describeFiber(fiber) {\n     case 16:\n       return describeBuiltInComponentFrame(\"Lazy\");\n     case 13:\n-      return describeBuiltInComponentFrame(\"Suspense\");\n+      return fiber.child !== childFiber && null !== childFiber\n+        ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n+        : describeBuiltInComponentFrame(\"Suspense\");\n     case 19:\n       return describeBuiltInComponentFrame(\"SuspenseList\");\n     case 0:\n@@ -499,9 +501,11 @@ function describeFiber(fiber) {\n }\n function getStackByFiberInDevAndProd(workInProgress) {\n   try {\n-    var info = \"\";\n+    var info = \"\",\n+      previous = null;\n     do\n-      (info += describeFiber(workInProgress)),\n+      (info += describeFiber(workInProgress, previous)),\n+        (previous = workInProgress),\n         (workInProgress = workInProgress.return);\n     while (workInProgress);\n     return info;\n@@ -16413,14 +16417,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_1942 = React.version;\n if (\n-  \"19.2.0-canary-5d87cd22-20250704\" !==\n+  \"19.2.0-canary-a7a11657-20250708\" !==\n   isomorphicReactPackageVersion$jscomp$inline_1942\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_1942,\n-      \"19.2.0-canary-5d87cd22-20250704\"\n+      \"19.2.0-canary-a7a11657-20250708\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -16442,10 +16446,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_1949 = {\n   bundleType: 0,\n-  version: \"19.2.0-canary-5d87cd22-20250704\",\n+  version: \"19.2.0-canary-a7a11657-20250708\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-canary-5d87cd22-20250704\",\n+  reconcilerVersion: \"19.2.0-canary-a7a11657-20250708\",\n   getLaneLabelMap: function () {\n     for (\n       var map = new Map(), lane = 1, index$281 = 0;\n@@ -16718,7 +16722,7 @@ exports.useFormState = function (action, initialState, permalink) {\n exports.useFormStatus = function () {\n   return ReactSharedInternals.H.useHostTransitionStatus();\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";\n \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n   \"function\" ===\n     typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "97cfb299c5f4f8104c47d3da9cf4000679afe43c",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server-legacy.browser.development.js",
            "status": "modified",
            "additions": 40,
            "deletions": 26,
            "changes": 66,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4727,6 +4727,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -5550,27 +5562,20 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                pushSegmentFinale(\n+                  preambleSegment.chunks,\n+                  request.renderState,\n+                  preambleSegment.lastPushedText,\n+                  preambleSegment.textEmbedded\n+                ),\n+                (preambleSegment.status = COMPLETED);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -5783,7 +5788,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -5806,6 +5812,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$0\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -5846,7 +5856,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -5944,7 +5954,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6260,7 +6272,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -9687,5 +9701,5 @@\n         'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server'\n       );\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "8c840098e3b259bc38d8f913d2774370882efcf1",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server-legacy.browser.production.js",
            "status": "modified",
            "additions": 55,
            "deletions": 44,
            "changes": 99,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -3901,6 +3901,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4280,7 +4287,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n         (task.formatContext = defaultProps),\n         (task.keyPath = initialState);\n     else {\n-      ref = pushStartInstance(\n+      initialState = pushStartInstance(\n         newProps.chunks,\n         type,\n         props,\n@@ -4293,42 +4300,39 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       );\n       newProps.lastPushedText = !1;\n       defaultProps = task.formatContext;\n-      initialState = task.keyPath;\n+      ref = task.keyPath;\n       task.keyPath = keyPath;\n-      3 ===\n-      (task.formatContext = getChildFormatContext(defaultProps, type, props))\n-        .insertionMode\n-        ? ((keyPath = createPendingSegment(\n-            request,\n-            0,\n-            null,\n-            task.formatContext,\n-            !1,\n-            !1\n-          )),\n-          newProps.preambleChildren.push(keyPath),\n-          (keyPath = createRenderTask(\n-            request,\n-            null,\n-            ref,\n-            -1,\n-            task.blockedBoundary,\n-            keyPath,\n-            task.blockedPreamble,\n-            task.hoistableState,\n-            request.abortableTasks,\n-            task.keyPath,\n-            task.formatContext,\n-            task.context,\n-            task.treeContext,\n-            task.row,\n-            task.componentStack\n-          )),\n-          pushComponentStack(keyPath),\n-          request.pingedTasks.push(keyPath))\n-        : renderNode(request, task, ref, -1);\n+      if (\n+        3 ===\n+        (task.formatContext = getChildFormatContext(defaultProps, type, props))\n+          .insertionMode\n+      ) {\n+        keyPath = createPendingSegment(\n+          request,\n+          0,\n+          null,\n+          task.formatContext,\n+          !1,\n+          !1\n+        );\n+        newProps.preambleChildren.push(keyPath);\n+        task.blockedSegment = keyPath;\n+        try {\n+          (keyPath.status = 6),\n+            renderNode(request, task, initialState, -1),\n+            pushSegmentFinale(\n+              keyPath.chunks,\n+              request.renderState,\n+              keyPath.lastPushedText,\n+              keyPath.textEmbedded\n+            ),\n+            (keyPath.status = 1);\n+        } finally {\n+          task.blockedSegment = newProps;\n+        }\n+      } else renderNode(request, task, initialState, -1);\n       task.formatContext = defaultProps;\n-      task.keyPath = initialState;\n+      task.keyPath = ref;\n       a: {\n         task = newProps.chunks;\n         request = request.resumableState;\n@@ -4509,17 +4513,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            newProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n-            defaultProps = [newProps[1], newProps[2], [], null];\n-            request.trackedPostpones.workingMap.set(newProps, defaultProps);\n-            newBoundary.trackedFallbackNode = defaultProps;\n+            newProps = task.componentStack;\n+            defaultProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n+            initialState = [defaultProps[1], defaultProps[2], [], null];\n+            request.trackedPostpones.workingMap.set(defaultProps, initialState);\n+            newBoundary.trackedFallbackNode = initialState;\n             task.blockedSegment = boundarySegment;\n             task.blockedPreamble = newBoundary.fallbackPreamble;\n-            task.keyPath = newProps;\n+            task.keyPath = defaultProps;\n             task.formatContext = getSuspenseFallbackFormatContext(\n               request.resumableState,\n               ref\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(newProps);\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -4559,7 +4566,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              newProps\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -4643,7 +4650,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -4935,7 +4944,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(childNodes);\n                       request.pingedTasks.push(childNodes);\n@@ -6456,4 +6467,4 @@ exports.renderToString = function (children, options) {\n     'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server'\n   );\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "5e1c7be9e2a12b42d9f1dd616ba9c3110e01e599",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server-legacy.node.development.js",
            "status": "modified",
            "additions": 40,
            "deletions": 26,
            "changes": 66,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4727,6 +4727,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -5550,27 +5562,20 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                pushSegmentFinale(\n+                  preambleSegment.chunks,\n+                  request.renderState,\n+                  preambleSegment.lastPushedText,\n+                  preambleSegment.textEmbedded\n+                ),\n+                (preambleSegment.status = COMPLETED);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -5783,7 +5788,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -5806,6 +5812,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$0\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -5846,7 +5856,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -5944,7 +5954,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6260,7 +6272,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -9687,5 +9701,5 @@\n         'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToPipeableStream\" which supports Suspense on the server'\n       );\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "98bce734fedf630d8c21c298a7218f05e7950367",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server-legacy.node.production.js",
            "status": "modified",
            "additions": 55,
            "deletions": 44,
            "changes": 99,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -3948,6 +3948,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4327,7 +4334,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n         (task.formatContext = defaultProps),\n         (task.keyPath = initialState);\n     else {\n-      ref = pushStartInstance(\n+      initialState = pushStartInstance(\n         newProps.chunks,\n         type,\n         props,\n@@ -4340,42 +4347,39 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       );\n       newProps.lastPushedText = !1;\n       defaultProps = task.formatContext;\n-      initialState = task.keyPath;\n+      ref = task.keyPath;\n       task.keyPath = keyPath;\n-      3 ===\n-      (task.formatContext = getChildFormatContext(defaultProps, type, props))\n-        .insertionMode\n-        ? ((keyPath = createPendingSegment(\n-            request,\n-            0,\n-            null,\n-            task.formatContext,\n-            !1,\n-            !1\n-          )),\n-          newProps.preambleChildren.push(keyPath),\n-          (keyPath = createRenderTask(\n-            request,\n-            null,\n-            ref,\n-            -1,\n-            task.blockedBoundary,\n-            keyPath,\n-            task.blockedPreamble,\n-            task.hoistableState,\n-            request.abortableTasks,\n-            task.keyPath,\n-            task.formatContext,\n-            task.context,\n-            task.treeContext,\n-            task.row,\n-            task.componentStack\n-          )),\n-          pushComponentStack(keyPath),\n-          request.pingedTasks.push(keyPath))\n-        : renderNode(request, task, ref, -1);\n+      if (\n+        3 ===\n+        (task.formatContext = getChildFormatContext(defaultProps, type, props))\n+          .insertionMode\n+      ) {\n+        keyPath = createPendingSegment(\n+          request,\n+          0,\n+          null,\n+          task.formatContext,\n+          !1,\n+          !1\n+        );\n+        newProps.preambleChildren.push(keyPath);\n+        task.blockedSegment = keyPath;\n+        try {\n+          (keyPath.status = 6),\n+            renderNode(request, task, initialState, -1),\n+            pushSegmentFinale(\n+              keyPath.chunks,\n+              request.renderState,\n+              keyPath.lastPushedText,\n+              keyPath.textEmbedded\n+            ),\n+            (keyPath.status = 1);\n+        } finally {\n+          task.blockedSegment = newProps;\n+        }\n+      } else renderNode(request, task, initialState, -1);\n       task.formatContext = defaultProps;\n-      task.keyPath = initialState;\n+      task.keyPath = ref;\n       a: {\n         task = newProps.chunks;\n         request = request.resumableState;\n@@ -4556,17 +4560,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            newProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n-            defaultProps = [newProps[1], newProps[2], [], null];\n-            request.trackedPostpones.workingMap.set(newProps, defaultProps);\n-            newBoundary.trackedFallbackNode = defaultProps;\n+            newProps = task.componentStack;\n+            defaultProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n+            initialState = [defaultProps[1], defaultProps[2], [], null];\n+            request.trackedPostpones.workingMap.set(defaultProps, initialState);\n+            newBoundary.trackedFallbackNode = initialState;\n             task.blockedSegment = boundarySegment;\n             task.blockedPreamble = newBoundary.fallbackPreamble;\n-            task.keyPath = newProps;\n+            task.keyPath = defaultProps;\n             task.formatContext = getSuspenseFallbackFormatContext(\n               request.resumableState,\n               ref\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(newProps);\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -4606,7 +4613,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              newProps\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -4690,7 +4697,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -4992,7 +5001,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(childNodes);\n                       request.pingedTasks.push(childNodes);\n@@ -6539,4 +6550,4 @@ exports.renderToString = function (children, options) {\n     'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToPipeableStream\" which supports Suspense on the server'\n   );\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "9c9e95b327a74ae0717071208fd42f0de54cb071",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.browser.development.js",
            "status": "modified",
            "additions": 40,
            "deletions": 28,
            "changes": 68,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4930,6 +4930,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -5752,27 +5764,18 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                preambleSegment.lastPushedText &&\n+                  preambleSegment.textEmbedded &&\n+                  preambleSegment.chunks.push(textSeparator),\n+                (preambleSegment.status = COMPLETED),\n+                finishedSegment(request, task.blockedBoundary, preambleSegment);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -5992,7 +5995,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -6015,6 +6019,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$0\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -6053,7 +6061,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6149,7 +6157,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6475,7 +6485,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -8436,11 +8448,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     var React = require(\"next/dist/compiled/react\"),\n@@ -10130,5 +10142,5 @@\n         startWork(request);\n       });\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "000b66b2ade5a0f0d4ea97408de1ddf60e7dc622",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.browser.production.js",
            "status": "modified",
            "additions": 55,
            "deletions": 46,
            "changes": 101,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4333,6 +4333,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4710,7 +4717,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n         (task.formatContext = defaultProps),\n         (task.keyPath = initialState);\n     else {\n-      ref = pushStartInstance(\n+      initialState = pushStartInstance(\n         newProps.chunks,\n         type,\n         props,\n@@ -4723,42 +4730,37 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       );\n       newProps.lastPushedText = !1;\n       defaultProps = task.formatContext;\n-      initialState = task.keyPath;\n+      ref = task.keyPath;\n       task.keyPath = keyPath;\n-      3 ===\n-      (task.formatContext = getChildFormatContext(defaultProps, type, props))\n-        .insertionMode\n-        ? ((keyPath = createPendingSegment(\n-            request,\n-            0,\n-            null,\n-            task.formatContext,\n-            !1,\n-            !1\n-          )),\n-          newProps.preambleChildren.push(keyPath),\n-          (keyPath = createRenderTask(\n-            request,\n-            null,\n-            ref,\n-            -1,\n-            task.blockedBoundary,\n-            keyPath,\n-            task.blockedPreamble,\n-            task.hoistableState,\n-            request.abortableTasks,\n-            task.keyPath,\n-            task.formatContext,\n-            task.context,\n-            task.treeContext,\n-            task.row,\n-            task.componentStack\n-          )),\n-          pushComponentStack(keyPath),\n-          request.pingedTasks.push(keyPath))\n-        : renderNode(request, task, ref, -1);\n+      if (\n+        3 ===\n+        (task.formatContext = getChildFormatContext(defaultProps, type, props))\n+          .insertionMode\n+      ) {\n+        keyPath = createPendingSegment(\n+          request,\n+          0,\n+          null,\n+          task.formatContext,\n+          !1,\n+          !1\n+        );\n+        newProps.preambleChildren.push(keyPath);\n+        task.blockedSegment = keyPath;\n+        try {\n+          (keyPath.status = 6),\n+            renderNode(request, task, initialState, -1),\n+            keyPath.lastPushedText &&\n+              keyPath.textEmbedded &&\n+              keyPath.chunks.push(textSeparator),\n+            (keyPath.status = 1),\n+            finishedSegment(request, task.blockedBoundary, keyPath);\n+        } finally {\n+          task.blockedSegment = newProps;\n+        }\n+      } else renderNode(request, task, initialState, -1);\n       task.formatContext = defaultProps;\n-      task.keyPath = initialState;\n+      task.keyPath = ref;\n       a: {\n         task = newProps.chunks;\n         request = request.resumableState;\n@@ -4946,17 +4948,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            newProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n-            defaultProps = [newProps[1], newProps[2], [], null];\n-            request.trackedPostpones.workingMap.set(newProps, defaultProps);\n-            newBoundary.trackedFallbackNode = defaultProps;\n+            newProps = task.componentStack;\n+            defaultProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n+            initialState = [defaultProps[1], defaultProps[2], [], null];\n+            request.trackedPostpones.workingMap.set(defaultProps, initialState);\n+            newBoundary.trackedFallbackNode = initialState;\n             task.blockedSegment = boundarySegment;\n             task.blockedPreamble = newBoundary.fallbackPreamble;\n-            task.keyPath = newProps;\n+            task.keyPath = defaultProps;\n             task.formatContext = getSuspenseFallbackFormatContext(\n               request.resumableState,\n               ref\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(newProps);\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -4994,7 +4999,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              newProps\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -5076,7 +5081,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -5379,7 +5386,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(childNodes);\n                       request.pingedTasks.push(childNodes);\n@@ -6842,12 +6851,12 @@ function addToReplayParent(node, parentKeyPath, trackedPostpones) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-canary-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-canary-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n     throw Error(\n       formatProdErrorMessage(\n         527,\n         isomorphicReactPackageVersion,\n-        \"19.2.0-canary-5d87cd22-20250704\"\n+        \"19.2.0-canary-a7a11657-20250708\"\n       )\n     );\n }\n@@ -6994,4 +7003,4 @@ exports.renderToReadableStream = function (children, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "48cb9f1641e04a8392be6139de6e0c72a70feddf",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.bun.production.js",
            "status": "modified",
            "additions": 61,
            "deletions": 49,
            "changes": 110,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.bun.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.bun.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.bun.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -3943,6 +3943,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4323,7 +4330,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n         (task.formatContext = defaultProps),\n         (task.keyPath = initialState);\n     else {\n-      ref = pushStartInstance(\n+      initialState = pushStartInstance(\n         newProps.chunks,\n         type,\n         props,\n@@ -4336,42 +4343,40 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       );\n       newProps.lastPushedText = !1;\n       defaultProps = task.formatContext;\n-      initialState = task.keyPath;\n+      ref = task.keyPath;\n       task.keyPath = keyPath;\n-      3 ===\n-      (task.formatContext = getChildFormatContext(defaultProps, type, props))\n-        .insertionMode\n-        ? ((keyPath = createPendingSegment(\n-            request,\n-            0,\n-            null,\n-            task.formatContext,\n-            !1,\n-            !1\n-          )),\n-          newProps.preambleChildren.push(keyPath),\n-          (keyPath = createRenderTask(\n-            request,\n-            null,\n-            ref,\n-            -1,\n-            task.blockedBoundary,\n-            keyPath,\n-            task.blockedPreamble,\n-            task.hoistableState,\n-            request.abortableTasks,\n-            task.keyPath,\n-            task.formatContext,\n-            task.context,\n-            task.treeContext,\n-            task.row,\n-            task.componentStack\n-          )),\n-          pushComponentStack(keyPath),\n-          request.pingedTasks.push(keyPath))\n-        : renderNode(request, task, ref, -1);\n+      if (\n+        3 ===\n+        (task.formatContext = getChildFormatContext(defaultProps, type, props))\n+          .insertionMode\n+      ) {\n+        keyPath = createPendingSegment(\n+          request,\n+          0,\n+          null,\n+          task.formatContext,\n+          !1,\n+          !1\n+        );\n+        newProps.preambleChildren.push(keyPath);\n+        task.blockedSegment = keyPath;\n+        try {\n+          (keyPath.status = 6),\n+            renderNode(request, task, initialState, -1),\n+            pushSegmentFinale(\n+              keyPath.chunks,\n+              request.renderState,\n+              keyPath.lastPushedText,\n+              keyPath.textEmbedded\n+            ),\n+            (keyPath.status = 1),\n+            finishedSegment(request, task.blockedBoundary, keyPath);\n+        } finally {\n+          task.blockedSegment = newProps;\n+        }\n+      } else renderNode(request, task, initialState, -1);\n       task.formatContext = defaultProps;\n-      task.keyPath = initialState;\n+      task.keyPath = ref;\n       a: {\n         task = newProps.chunks;\n         request = request.resumableState;\n@@ -4559,17 +4564,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            newProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n-            defaultProps = [newProps[1], newProps[2], [], null];\n-            request.trackedPostpones.workingMap.set(newProps, defaultProps);\n-            newBoundary.trackedFallbackNode = defaultProps;\n+            newProps = task.componentStack;\n+            defaultProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n+            initialState = [defaultProps[1], defaultProps[2], [], null];\n+            request.trackedPostpones.workingMap.set(defaultProps, initialState);\n+            newBoundary.trackedFallbackNode = initialState;\n             task.blockedSegment = boundarySegment;\n             task.blockedPreamble = newBoundary.fallbackPreamble;\n-            task.keyPath = newProps;\n+            task.keyPath = defaultProps;\n             task.formatContext = getSuspenseFallbackFormatContext(\n               request.resumableState,\n               ref\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(newProps);\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -4610,7 +4618,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              newProps\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -4695,7 +4703,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -5008,7 +5018,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(childNodes);\n                       request.pingedTasks.push(childNodes);\n@@ -6485,15 +6497,15 @@ function addToReplayParent(node, parentKeyPath, trackedPostpones) {\n     parentNode[2].push(node);\n   }\n }\n-var isomorphicReactPackageVersion$jscomp$inline_815 = React.version;\n+var isomorphicReactPackageVersion$jscomp$inline_816 = React.version;\n if (\n-  \"19.2.0-canary-5d87cd22-20250704\" !==\n-  isomorphicReactPackageVersion$jscomp$inline_815\n+  \"19.2.0-canary-a7a11657-20250708\" !==\n+  isomorphicReactPackageVersion$jscomp$inline_816\n )\n   throw Error(\n     'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n-      (isomorphicReactPackageVersion$jscomp$inline_815 +\n-        \"\\n  - react-dom:  19.2.0-canary-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+      (isomorphicReactPackageVersion$jscomp$inline_816 +\n+        \"\\n  - react-dom:  19.2.0-canary-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n   );\n exports.renderToReadableStream = function (children, options) {\n   return new Promise(function (resolve, reject) {\n@@ -6584,4 +6596,4 @@ exports.renderToReadableStream = function (children, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "ed09817b9da60952f78eb1c2f17dbda6e4cb83a9",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.edge.development.js",
            "status": "modified",
            "additions": 40,
            "deletions": 28,
            "changes": 68,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4940,6 +4940,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -5762,27 +5774,18 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                preambleSegment.lastPushedText &&\n+                  preambleSegment.textEmbedded &&\n+                  preambleSegment.chunks.push(textSeparator),\n+                (preambleSegment.status = COMPLETED),\n+                finishedSegment(request, task.blockedBoundary, preambleSegment);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -6002,7 +6005,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -6025,6 +6029,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$0\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -6063,7 +6071,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6159,7 +6167,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6485,7 +6495,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -8459,11 +8471,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     var React = require(\"next/dist/compiled/react\"),\n@@ -10149,5 +10161,5 @@\n         startWork(request);\n       });\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "b91299e5329afe5a6dcb6c91b0e17e457be99b55",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.edge.production.js",
            "status": "modified",
            "additions": 55,
            "deletions": 46,
            "changes": 101,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4385,6 +4385,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4762,7 +4769,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n         (task.formatContext = defaultProps),\n         (task.keyPath = initialState);\n     else {\n-      ref = pushStartInstance(\n+      initialState = pushStartInstance(\n         newProps.chunks,\n         type,\n         props,\n@@ -4775,42 +4782,37 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       );\n       newProps.lastPushedText = !1;\n       defaultProps = task.formatContext;\n-      initialState = task.keyPath;\n+      ref = task.keyPath;\n       task.keyPath = keyPath;\n-      3 ===\n-      (task.formatContext = getChildFormatContext(defaultProps, type, props))\n-        .insertionMode\n-        ? ((keyPath = createPendingSegment(\n-            request,\n-            0,\n-            null,\n-            task.formatContext,\n-            !1,\n-            !1\n-          )),\n-          newProps.preambleChildren.push(keyPath),\n-          (keyPath = createRenderTask(\n-            request,\n-            null,\n-            ref,\n-            -1,\n-            task.blockedBoundary,\n-            keyPath,\n-            task.blockedPreamble,\n-            task.hoistableState,\n-            request.abortableTasks,\n-            task.keyPath,\n-            task.formatContext,\n-            task.context,\n-            task.treeContext,\n-            task.row,\n-            task.componentStack\n-          )),\n-          pushComponentStack(keyPath),\n-          request.pingedTasks.push(keyPath))\n-        : renderNode(request, task, ref, -1);\n+      if (\n+        3 ===\n+        (task.formatContext = getChildFormatContext(defaultProps, type, props))\n+          .insertionMode\n+      ) {\n+        keyPath = createPendingSegment(\n+          request,\n+          0,\n+          null,\n+          task.formatContext,\n+          !1,\n+          !1\n+        );\n+        newProps.preambleChildren.push(keyPath);\n+        task.blockedSegment = keyPath;\n+        try {\n+          (keyPath.status = 6),\n+            renderNode(request, task, initialState, -1),\n+            keyPath.lastPushedText &&\n+              keyPath.textEmbedded &&\n+              keyPath.chunks.push(textSeparator),\n+            (keyPath.status = 1),\n+            finishedSegment(request, task.blockedBoundary, keyPath);\n+        } finally {\n+          task.blockedSegment = newProps;\n+        }\n+      } else renderNode(request, task, initialState, -1);\n       task.formatContext = defaultProps;\n-      task.keyPath = initialState;\n+      task.keyPath = ref;\n       a: {\n         task = newProps.chunks;\n         request = request.resumableState;\n@@ -4998,17 +5000,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            newProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n-            defaultProps = [newProps[1], newProps[2], [], null];\n-            request.trackedPostpones.workingMap.set(newProps, defaultProps);\n-            newBoundary.trackedFallbackNode = defaultProps;\n+            newProps = task.componentStack;\n+            defaultProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n+            initialState = [defaultProps[1], defaultProps[2], [], null];\n+            request.trackedPostpones.workingMap.set(defaultProps, initialState);\n+            newBoundary.trackedFallbackNode = initialState;\n             task.blockedSegment = boundarySegment;\n             task.blockedPreamble = newBoundary.fallbackPreamble;\n-            task.keyPath = newProps;\n+            task.keyPath = defaultProps;\n             task.formatContext = getSuspenseFallbackFormatContext(\n               request.resumableState,\n               ref\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(newProps);\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -5046,7 +5051,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              newProps\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -5128,7 +5133,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -5441,7 +5448,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(childNodes);\n                       request.pingedTasks.push(childNodes);\n@@ -6940,11 +6949,11 @@ function addToReplayParent(node, parentKeyPath, trackedPostpones) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-canary-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-canary-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n     throw Error(\n       'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n         (isomorphicReactPackageVersion +\n-          \"\\n  - react-dom:  19.2.0-canary-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+          \"\\n  - react-dom:  19.2.0-canary-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n     );\n }\n ensureCorrectIsomorphicReactVersion();\n@@ -7090,4 +7099,4 @@ exports.renderToReadableStream = function (children, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "bfe4aec47d0618abcfe4a54a07c7cf020f9cd462",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.node.development.js",
            "status": "modified",
            "additions": 40,
            "deletions": 28,
            "changes": 68,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4840,6 +4840,18 @@\n               pushServerComponentStack(task, node._debugInfo);\n         }\n     }\n+    function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+      componentStack\n+    ) {\n+      return null === componentStack\n+        ? null\n+        : {\n+            parent: componentStack.parent,\n+            type: \"Suspense Fallback\",\n+            owner: componentStack.owner,\n+            stack: componentStack.stack\n+          };\n+    }\n     function getThrownInfo(node$jscomp$0) {\n       var errorInfo = {};\n       node$jscomp$0 &&\n@@ -5661,27 +5673,18 @@\n               !1\n             );\n             segment.preambleChildren.push(preambleSegment);\n-            var preambleTask = createRenderTask(\n-              request,\n-              null,\n-              _children,\n-              -1,\n-              task.blockedBoundary,\n-              preambleSegment,\n-              task.blockedPreamble,\n-              task.hoistableState,\n-              request.abortableTasks,\n-              task.keyPath,\n-              task.formatContext,\n-              task.context,\n-              task.treeContext,\n-              task.row,\n-              task.componentStack,\n-              emptyContextObject,\n-              task.debugTask\n-            );\n-            pushComponentStack(preambleTask);\n-            request.pingedTasks.push(preambleTask);\n+            task.blockedSegment = preambleSegment;\n+            try {\n+              (preambleSegment.status = 6),\n+                renderNode(request, task, _children, -1),\n+                preambleSegment.lastPushedText &&\n+                  preambleSegment.textEmbedded &&\n+                  preambleSegment.chunks.push(textSeparator),\n+                (preambleSegment.status = COMPLETED),\n+                finishedSegment(request, task.blockedBoundary, preambleSegment);\n+            } finally {\n+              task.blockedSegment = segment;\n+            }\n           } else renderNode(request, task, _children, -1);\n           task.formatContext = _prevContext2;\n           task.keyPath = _prevKeyPath3;\n@@ -5901,7 +5904,8 @@\n               );\n               contentRootSegment.parentFlushed = !0;\n               if (null !== request.trackedPostpones) {\n-                var fallbackKeyPath = [\n+                var suspenseComponentStack = task.componentStack,\n+                  fallbackKeyPath = [\n                     keyPath[0],\n                     \"Suspense Fallback\",\n                     keyPath[2]\n@@ -5924,6 +5928,10 @@\n                   request.resumableState,\n                   prevContext$jscomp$0\n                 );\n+                task.componentStack =\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    suspenseComponentStack\n+                  );\n                 boundarySegment.status = 6;\n                 try {\n                   renderNode(request, task, fallback, -1),\n@@ -5962,7 +5970,7 @@\n                   task.context,\n                   task.treeContext,\n                   null,\n-                  task.componentStack,\n+                  suspenseComponentStack,\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6058,7 +6066,9 @@\n                   task.context,\n                   task.treeContext,\n                   task.row,\n-                  task.componentStack,\n+                  replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                    task.componentStack\n+                  ),\n                   emptyContextObject,\n                   task.debugTask\n                 );\n@@ -6384,7 +6394,9 @@\n                 task.context,\n                 task.treeContext,\n                 task.row,\n-                task.componentStack,\n+                replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                  task.componentStack\n+                ),\n                 emptyContextObject,\n                 task.debugTask\n               );\n@@ -8334,11 +8346,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     function createDrainHandler(destination, request) {\n@@ -10209,5 +10221,5 @@\n         startWork(request);\n       });\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "2c4f9695c942799e13fa57da4a792d080f30a527",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.node.production.js",
            "status": "modified",
            "additions": 55,
            "deletions": 46,
            "changes": 101,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -4285,6 +4285,13 @@ function pushComponentStack(task) {\n         task.componentStack = { parent: task.componentStack, type: node.type };\n     }\n }\n+function replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+  componentStack\n+) {\n+  return null === componentStack\n+    ? null\n+    : { parent: componentStack.parent, type: \"Suspense Fallback\" };\n+}\n function getThrownInfo(node$jscomp$0) {\n   var errorInfo = {};\n   node$jscomp$0 &&\n@@ -4662,7 +4669,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n         (task.formatContext = defaultProps),\n         (task.keyPath = initialState);\n     else {\n-      ref = pushStartInstance(\n+      initialState = pushStartInstance(\n         newProps.chunks,\n         type,\n         props,\n@@ -4675,42 +4682,37 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       );\n       newProps.lastPushedText = !1;\n       defaultProps = task.formatContext;\n-      initialState = task.keyPath;\n+      ref = task.keyPath;\n       task.keyPath = keyPath;\n-      3 ===\n-      (task.formatContext = getChildFormatContext(defaultProps, type, props))\n-        .insertionMode\n-        ? ((keyPath = createPendingSegment(\n-            request,\n-            0,\n-            null,\n-            task.formatContext,\n-            !1,\n-            !1\n-          )),\n-          newProps.preambleChildren.push(keyPath),\n-          (keyPath = createRenderTask(\n-            request,\n-            null,\n-            ref,\n-            -1,\n-            task.blockedBoundary,\n-            keyPath,\n-            task.blockedPreamble,\n-            task.hoistableState,\n-            request.abortableTasks,\n-            task.keyPath,\n-            task.formatContext,\n-            task.context,\n-            task.treeContext,\n-            task.row,\n-            task.componentStack\n-          )),\n-          pushComponentStack(keyPath),\n-          request.pingedTasks.push(keyPath))\n-        : renderNode(request, task, ref, -1);\n+      if (\n+        3 ===\n+        (task.formatContext = getChildFormatContext(defaultProps, type, props))\n+          .insertionMode\n+      ) {\n+        keyPath = createPendingSegment(\n+          request,\n+          0,\n+          null,\n+          task.formatContext,\n+          !1,\n+          !1\n+        );\n+        newProps.preambleChildren.push(keyPath);\n+        task.blockedSegment = keyPath;\n+        try {\n+          (keyPath.status = 6),\n+            renderNode(request, task, initialState, -1),\n+            keyPath.lastPushedText &&\n+              keyPath.textEmbedded &&\n+              keyPath.chunks.push(textSeparator),\n+            (keyPath.status = 1),\n+            finishedSegment(request, task.blockedBoundary, keyPath);\n+        } finally {\n+          task.blockedSegment = newProps;\n+        }\n+      } else renderNode(request, task, initialState, -1);\n       task.formatContext = defaultProps;\n-      task.keyPath = initialState;\n+      task.keyPath = ref;\n       a: {\n         task = newProps.chunks;\n         request = request.resumableState;\n@@ -4898,17 +4900,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           );\n           contentRootSegment.parentFlushed = !0;\n           if (null !== request.trackedPostpones) {\n-            newProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n-            defaultProps = [newProps[1], newProps[2], [], null];\n-            request.trackedPostpones.workingMap.set(newProps, defaultProps);\n-            newBoundary.trackedFallbackNode = defaultProps;\n+            newProps = task.componentStack;\n+            defaultProps = [keyPath[0], \"Suspense Fallback\", keyPath[2]];\n+            initialState = [defaultProps[1], defaultProps[2], [], null];\n+            request.trackedPostpones.workingMap.set(defaultProps, initialState);\n+            newBoundary.trackedFallbackNode = initialState;\n             task.blockedSegment = boundarySegment;\n             task.blockedPreamble = newBoundary.fallbackPreamble;\n-            task.keyPath = newProps;\n+            task.keyPath = defaultProps;\n             task.formatContext = getSuspenseFallbackFormatContext(\n               request.resumableState,\n               ref\n             );\n+            task.componentStack =\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(newProps);\n             boundarySegment.status = 6;\n             try {\n               renderNode(request, task, fallback, -1),\n@@ -4946,7 +4951,7 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               null,\n-              task.componentStack\n+              newProps\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -5028,7 +5033,9 @@ function renderElement(request, task, keyPath, type, props, ref) {\n               task.context,\n               task.treeContext,\n               task.row,\n-              task.componentStack\n+              replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                task.componentStack\n+              )\n             );\n             pushComponentStack(task);\n             request.pingedTasks.push(task);\n@@ -5341,7 +5348,9 @@ function retryNode(request, task) {\n                         task.context,\n                         task.treeContext,\n                         task.row,\n-                        task.componentStack\n+                        replaceSuspenseComponentStackWithSuspenseFallbackStack(\n+                          task.componentStack\n+                        )\n                       );\n                       pushComponentStack(childNodes);\n                       request.pingedTasks.push(childNodes);\n@@ -6832,11 +6841,11 @@ function addToReplayParent(node, parentKeyPath, trackedPostpones) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-canary-5d87cd22-20250704\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-canary-a7a11657-20250708\" !== isomorphicReactPackageVersion)\n     throw Error(\n       'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n         (isomorphicReactPackageVersion +\n-          \"\\n  - react-dom:  19.2.0-canary-5d87cd22-20250704\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+          \"\\n  - react-dom:  19.2.0-canary-a7a11657-20250708\\nLearn more: https://react.dev/warnings/version-mismatch\")\n     );\n }\n ensureCorrectIsomorphicReactVersion();\n@@ -7174,4 +7183,4 @@ exports.renderToReadableStream = function (children, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "eafe555fa01c3d60b561cd4ae5feeb08e689907e",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -416,7 +416,7 @@\n     exports.useFormStatus = function () {\n       return resolveDispatcher().useHostTransitionStatus();\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "6a1580080c16088977f885271e49d152e8851fd8",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -207,4 +207,4 @@ exports.useFormState = function (action, initialState, permalink) {\n exports.useFormStatus = function () {\n   return ReactSharedInternals.H.useHostTransitionStatus();\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "62d4c7349962b71ff6f4c9988ba1c6872dc75b13",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom.react-server.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -336,5 +336,5 @@\n             }))\n           : Internals.d.m(href));\n     };\n-    exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-canary-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "54881d0c8f2a4c11783c964c90c00b50d1385e04",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom.react-server.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -149,4 +149,4 @@ exports.preloadModule = function (href, options) {\n       });\n     } else Internals.d.m(href);\n };\n-exports.version = \"19.2.0-canary-5d87cd22-20250704\";\n+exports.version = \"19.2.0-canary-a7a11657-20250708\";"
        },
        {
            "sha": "9194df46b904c026bcd4be48052e1ed8e8d1812b",
            "filename": "packages/next/src/compiled/react-dom/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fpackage.json?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -67,10 +67,10 @@\n     \"./package.json\": \"./package.json\"\n   },\n   \"dependencies\": {\n-    \"scheduler\": \"0.27.0-canary-5d87cd22-20250704\"\n+    \"scheduler\": \"0.27.0-canary-a7a11657-20250708\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"19.2.0-canary-5d87cd22-20250704\"\n+    \"react\": \"19.2.0-canary-a7a11657-20250708\"\n   },\n   \"browser\": {\n     \"./server.js\": \"./server.browser.js\","
        },
        {
            "sha": "6e40b35d01b800993ad7f9d79297c18eb3ea2a0d",
            "filename": "packages/next/src/compiled/react-experimental/cjs/react.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -1328,7 +1328,7 @@\n     exports.useTransition = function () {\n       return resolveDispatcher().useTransition();\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "bd0fde66666a164359eb758a15fc586c6c7f6c9f",
            "filename": "packages/next/src/compiled/react-experimental/cjs/react.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -605,4 +605,4 @@ exports.useSyncExternalStore = function (\n exports.useTransition = function () {\n   return ReactSharedInternals.H.useTransition();\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "1b35ebec29f7eccdc43642a2921e237d61ef0366",
            "filename": "packages/next/src/compiled/react-experimental/cjs/react.react-server.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -996,5 +996,5 @@\n     exports.useMemo = function (create, deps) {\n       return resolveDispatcher().useMemo(create, deps);\n     };\n-    exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+    exports.version = \"19.2.0-experimental-a7a11657-20250708\";\n   })();"
        },
        {
            "sha": "815826cf13bb0c921f9b31c45fa02d514cbf6903",
            "filename": "packages/next/src/compiled/react-experimental/cjs/react.react-server.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -572,4 +572,4 @@ exports.useId = function () {\n exports.useMemo = function (create, deps) {\n   return ReactSharedInternals.H.useMemo(create, deps);\n };\n-exports.version = \"19.2.0-experimental-5d87cd22-20250704\";\n+exports.version = \"19.2.0-experimental-a7a11657-20250708\";"
        },
        {
            "sha": "e5c6e86af54b6afb9f16d68250cff0fd784049e2",
            "filename": "packages/next/src/compiled/react-is/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-is%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-is%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-is%2Fpackage.json?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -1,6 +1,6 @@\n {\n   \"name\": \"react-is\",\n-  \"version\": \"19.2.0-canary-5d87cd22-20250704\",\n+  \"version\": \"19.2.0-canary-a7a11657-20250708\",\n   \"description\": \"Brand checking of React Elements.\",\n   \"main\": \"index.js\",\n   \"sideEffects\": false,"
        },
        {
            "sha": "f14ce4faa8ea3978a9655e3d3aac4d3b4ca8d233",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-client.browser.development.js",
            "status": "modified",
            "additions": 310,
            "deletions": 239,
            "changes": 549,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -759,7 +759,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1362,6 +1362,17 @@\n       this._children = [];\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1381,9 +1392,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function createErrorChunk(response, error) {\n       return new ReactPromise(\"rejected\", null, error);\n     }\n@@ -1462,15 +1491,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1493,6 +1521,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1503,15 +1532,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1556,24 +1586,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n-      response._replayConsole &&\n-        (markAllTracksInOrder(),\n-        flushComponentPerformance(\n-          response,\n-          getChunk(response, 0),\n-          0,\n-          -Infinity,\n-          -Infinity\n-        ));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1649,7 +1674,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? createErrorChunk(response, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1735,31 +1760,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -1806,17 +1831,18 @@\n           response._debugFindSourceMapURL\n         );\n       var serverReference = resolveServerReference(\n-        response._serverReferenceConfig,\n-        metaData.id\n-      );\n-      if ((response = preloadModule(serverReference)))\n-        metaData.bound && (response = Promise.all([response, metaData.bound]));\n-      else if (metaData.bound) response = Promise.resolve(metaData.bound);\n+          response._serverReferenceConfig,\n+          metaData.id\n+        ),\n+        promise = preloadModule(serverReference);\n+      if (promise)\n+        metaData.bound && (promise = Promise.all([promise, metaData.bound]));\n+      else if (metaData.bound) promise = Promise.resolve(metaData.bound);\n       else\n         return (\n-          (response = requireModule(serverReference)),\n-          registerBoundServerReference(response, metaData.id, metaData.bound),\n-          response\n+          (promise = requireModule(serverReference)),\n+          registerBoundServerReference(promise, metaData.id, metaData.bound),\n+          promise\n         );\n       if (initializingHandler) {\n         var handler = initializingHandler;\n@@ -1829,7 +1855,7 @@\n           deps: 1,\n           errored: !1\n         };\n-      response.then(\n+      promise.then(\n         function () {\n           var resolvedValue = requireModule(serverReference);\n           if (metaData.bound) {\n@@ -1892,7 +1918,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -2042,6 +2068,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -2087,15 +2130,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -2107,47 +2148,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -2167,10 +2202,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -2216,23 +2251,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2272,6 +2311,9 @@\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n       this._timeOrigin = 0;\n+      this._pendingInitialRender = null;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2288,18 +2330,23 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       replayConsole && markAllTracksInOrder();\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2309,18 +2356,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2330,39 +2379,41 @@\n         response._bundlerConfig,\n         model\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2399,19 +2450,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2464,7 +2515,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2537,11 +2588,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2584,7 +2635,7 @@\n       reason.$$typeof = REACT_POSTPONE_TYPE;\n       stack = response._chunks;\n       (env = stack.get(id))\n-        ? triggerErrorOnChunk(env, reason)\n+        ? triggerErrorOnChunk(response, env, reason)\n         : stack.set(id, createErrorChunk(response, reason));\n     }\n     function resolveHint(response, code, model) {\n@@ -3059,9 +3110,8 @@\n         previousResult.track = trackIdx$jscomp$6;\n         return previousResult;\n       }\n-      var children = root._children;\n-      \"resolved_model\" === root.status && initializeModelChunk(root);\n-      var debugInfo = root._debugInfo;\n+      var children = root._children,\n+        debugInfo = root._debugInfo;\n       if (debugInfo) {\n         for (var startTime$jscomp$0 = 0, i = 0; i < debugInfo.length; i++) {\n           var info = debugInfo[i];\n@@ -3521,6 +3571,20 @@\n       result.endTime = childrenEndTime;\n       return result;\n     }\n+    function flushInitialRenderPerformance(response) {\n+      if (response._replayConsole) {\n+        var rootChunk = getChunk(response, 0);\n+        isArrayImpl(rootChunk._children) &&\n+          (markAllTracksInOrder(),\n+          flushComponentPerformance(\n+            response,\n+            rootChunk,\n+            0,\n+            -Infinity,\n+            -Infinity\n+          ));\n+      }\n+    }\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -3591,7 +3655,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, createErrorChunk(response, tag));\n           break;\n         case 84:\n@@ -3755,96 +3819,99 @@\n         options ? !1 !== options.replayConsoleLogs : !0,\n         options && options.environmentName ? options.environmentName : void 0,\n         debugChannel\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n         var value = _ref.value;\n         if (_ref.done) reportGlobalError(response, Error(\"Connection closed.\"));\n         else {\n-          var i = 0,\n-            rowState = response._rowState;\n-          _ref = response._rowID;\n-          for (\n-            var rowTag = response._rowTag,\n-              rowLength = response._rowLength,\n-              buffer = response._buffer,\n-              chunkLength = value.length;\n-            i < chunkLength;\n+          if (void 0 !== response.weak.deref()) {\n+            _ref = unwrapWeakResponse(response);\n+            for (\n+              var i = 0,\n+                rowState = _ref._rowState,\n+                rowID = _ref._rowID,\n+                rowTag = _ref._rowTag,\n+                rowLength = _ref._rowLength,\n+                buffer = _ref._buffer,\n+                chunkLength = value.length;\n+              i < chunkLength;\n \n-          ) {\n-            var lastIdx = -1;\n-            switch (rowState) {\n-              case 0:\n-                lastIdx = value[i++];\n-                58 === lastIdx\n-                  ? (rowState = 1)\n-                  : (_ref =\n-                      (_ref << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 1:\n-                rowState = value[i];\n-                84 === rowState ||\n-                65 === rowState ||\n-                79 === rowState ||\n-                111 === rowState ||\n-                85 === rowState ||\n-                83 === rowState ||\n-                115 === rowState ||\n-                76 === rowState ||\n-                108 === rowState ||\n-                71 === rowState ||\n-                103 === rowState ||\n-                77 === rowState ||\n-                109 === rowState ||\n-                86 === rowState\n-                  ? ((rowTag = rowState), (rowState = 2), i++)\n-                  : (64 < rowState && 91 > rowState) ||\n-                      35 === rowState ||\n-                      114 === rowState ||\n-                      120 === rowState\n-                    ? ((rowTag = rowState), (rowState = 3), i++)\n-                    : ((rowTag = 0), (rowState = 3));\n-                continue;\n-              case 2:\n-                lastIdx = value[i++];\n-                44 === lastIdx\n-                  ? (rowState = 4)\n-                  : (rowLength =\n-                      (rowLength << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 3:\n-                lastIdx = value.indexOf(10, i);\n+            ) {\n+              var lastIdx = -1;\n+              switch (rowState) {\n+                case 0:\n+                  lastIdx = value[i++];\n+                  58 === lastIdx\n+                    ? (rowState = 1)\n+                    : (rowID =\n+                        (rowID << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 1:\n+                  rowState = value[i];\n+                  84 === rowState ||\n+                  65 === rowState ||\n+                  79 === rowState ||\n+                  111 === rowState ||\n+                  85 === rowState ||\n+                  83 === rowState ||\n+                  115 === rowState ||\n+                  76 === rowState ||\n+                  108 === rowState ||\n+                  71 === rowState ||\n+                  103 === rowState ||\n+                  77 === rowState ||\n+                  109 === rowState ||\n+                  86 === rowState\n+                    ? ((rowTag = rowState), (rowState = 2), i++)\n+                    : (64 < rowState && 91 > rowState) ||\n+                        35 === rowState ||\n+                        114 === rowState ||\n+                        120 === rowState\n+                      ? ((rowTag = rowState), (rowState = 3), i++)\n+                      : ((rowTag = 0), (rowState = 3));\n+                  continue;\n+                case 2:\n+                  lastIdx = value[i++];\n+                  44 === lastIdx\n+                    ? (rowState = 4)\n+                    : (rowLength =\n+                        (rowLength << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 3:\n+                  lastIdx = value.indexOf(10, i);\n+                  break;\n+                case 4:\n+                  (lastIdx = i + rowLength),\n+                    lastIdx > value.length && (lastIdx = -1);\n+              }\n+              var offset = value.byteOffset + i;\n+              if (-1 < lastIdx)\n+                (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n+                  processFullBinaryRow(_ref, rowID, rowTag, buffer, rowLength),\n+                  (i = lastIdx),\n+                  3 === rowState && i++,\n+                  (rowLength = rowID = rowTag = rowState = 0),\n+                  (buffer.length = 0);\n+              else {\n+                value = new Uint8Array(\n+                  value.buffer,\n+                  offset,\n+                  value.byteLength - i\n+                );\n+                buffer.push(value);\n+                rowLength -= value.byteLength;\n                 break;\n-              case 4:\n-                (lastIdx = i + rowLength),\n-                  lastIdx > value.length && (lastIdx = -1);\n-            }\n-            var offset = value.byteOffset + i;\n-            if (-1 < lastIdx)\n-              (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n-                processFullBinaryRow(response, _ref, rowTag, buffer, rowLength),\n-                (i = lastIdx),\n-                3 === rowState && i++,\n-                (rowLength = _ref = rowTag = rowState = 0),\n-                (buffer.length = 0);\n-            else {\n-              value = new Uint8Array(\n-                value.buffer,\n-                offset,\n-                value.byteLength - i\n-              );\n-              buffer.push(value);\n-              rowLength -= value.byteLength;\n-              break;\n+              }\n             }\n+            _ref._rowState = rowState;\n+            _ref._rowID = rowID;\n+            _ref._rowTag = rowTag;\n+            _ref._rowLength = rowLength;\n           }\n-          response._rowState = rowState;\n-          response._rowID = _ref;\n-          response._rowTag = rowTag;\n-          response._rowLength = rowLength;\n           return reader.read().then(progress).catch(error);\n         }\n       }\n@@ -3950,7 +4017,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       initializingChunk = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n@@ -4062,10 +4133,10 @@\n       return hook.checkDCE ? !0 : !1;\n     })({\n       bundleType: 1,\n-      version: \"19.2.0-experimental-5d87cd22-20250704\",\n+      version: \"19.2.0-experimental-a7a11657-20250708\",\n       rendererPackageName: \"react-server-dom-turbopack\",\n       currentDispatcherRef: ReactSharedInternals,\n-      reconcilerVersion: \"19.2.0-experimental-5d87cd22-20250704\",\n+      reconcilerVersion: \"19.2.0-experimental-a7a11657-20250708\",\n       getCurrentComponentInfo: function () {\n         return currentOwnerInDEV;\n       }\n@@ -4080,12 +4151,12 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (\n       id,"
        },
        {
            "sha": "5bb209a744e166694db99f49a3b0f1dec54ef53a",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-client.browser.production.js",
            "status": "modified",
            "additions": 47,
            "deletions": 46,
            "changes": 93,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -647,15 +647,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -684,15 +682,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -736,11 +734,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -831,14 +830,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -879,17 +879,18 @@ function loadServerReference(response, metaData, parentObject, key) {\n   if (!response._serverReferenceConfig)\n     return createBoundServerReference(metaData, response._callServer);\n   var serverReference = resolveServerReference(\n-    response._serverReferenceConfig,\n-    metaData.id\n-  );\n-  if ((response = preloadModule(serverReference)))\n-    metaData.bound && (response = Promise.all([response, metaData.bound]));\n-  else if (metaData.bound) response = Promise.resolve(metaData.bound);\n+      response._serverReferenceConfig,\n+      metaData.id\n+    ),\n+    promise = preloadModule(serverReference);\n+  if (promise)\n+    metaData.bound && (promise = Promise.all([promise, metaData.bound]));\n+  else if (metaData.bound) promise = Promise.resolve(metaData.bound);\n   else\n     return (\n-      (response = requireModule(serverReference)),\n-      registerBoundServerReference(response, metaData.id, metaData.bound),\n-      response\n+      (promise = requireModule(serverReference)),\n+      registerBoundServerReference(promise, metaData.id, metaData.bound),\n+      promise\n     );\n   if (initializingHandler) {\n     var handler = initializingHandler;\n@@ -902,7 +903,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n       deps: 1,\n       errored: !1\n     };\n-  response.then(\n+  promise.then(\n     function () {\n       var resolvedValue = requireModule(serverReference);\n       if (metaData.bound) {\n@@ -940,7 +941,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1210,24 +1211,24 @@ function resolveModule(response, id, model) {\n     chunk = chunks.get(id);\n   model = JSON.parse(model, response._fromJSON);\n   var clientReference = resolveClientReference(response._bundlerConfig, model);\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1417,7 +1418,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1569,7 +1570,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.digest = tag.digest;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     case 84:\n@@ -1610,7 +1611,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.stack = \"Error: \" + buffer.message;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     default:"
        },
        {
            "sha": "2e820090a17bfa8db8d60fe4d9b33ecb3c4adc22",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-client.edge.development.js",
            "status": "modified",
            "additions": 297,
            "deletions": 227,
            "changes": 524,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -879,7 +879,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1574,6 +1574,17 @@\n       this._children = [];\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1593,9 +1604,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function createErrorChunk(response, error) {\n       return new ReactPromise(\"rejected\", null, error);\n     }\n@@ -1674,15 +1703,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1705,6 +1733,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1715,15 +1744,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1768,24 +1798,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n-      response._replayConsole &&\n-        (markAllTracksInOrder(),\n-        flushComponentPerformance(\n-          response,\n-          getChunk(response, 0),\n-          0,\n-          -Infinity,\n-          -Infinity\n-        ));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1861,7 +1886,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? createErrorChunk(response, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1947,31 +1972,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -2111,7 +2136,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -2261,6 +2286,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -2306,15 +2348,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -2326,47 +2366,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -2386,10 +2420,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -2435,23 +2469,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2491,6 +2529,9 @@\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n       this._timeOrigin = 0;\n+      this._pendingInitialRender = null;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2507,18 +2548,23 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       replayConsole && markAllTracksInOrder();\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2528,18 +2574,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2554,39 +2602,41 @@\n         model[1],\n         response._nonce\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2623,19 +2673,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2688,7 +2738,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2761,11 +2811,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2808,7 +2858,7 @@\n       reason.$$typeof = REACT_POSTPONE_TYPE;\n       stack = response._chunks;\n       (env = stack.get(id))\n-        ? triggerErrorOnChunk(env, reason)\n+        ? triggerErrorOnChunk(response, env, reason)\n         : stack.set(id, createErrorChunk(response, reason));\n     }\n     function resolveHint(response, code, model) {\n@@ -3283,9 +3333,8 @@\n         previousResult.track = trackIdx$jscomp$6;\n         return previousResult;\n       }\n-      var children = root._children;\n-      \"resolved_model\" === root.status && initializeModelChunk(root);\n-      var debugInfo = root._debugInfo;\n+      var children = root._children,\n+        debugInfo = root._debugInfo;\n       if (debugInfo) {\n         for (var startTime$jscomp$0 = 0, i = 0; i < debugInfo.length; i++) {\n           var info = debugInfo[i];\n@@ -3745,6 +3794,20 @@\n       result.endTime = childrenEndTime;\n       return result;\n     }\n+    function flushInitialRenderPerformance(response) {\n+      if (response._replayConsole) {\n+        var rootChunk = getChunk(response, 0);\n+        isArrayImpl(rootChunk._children) &&\n+          (markAllTracksInOrder(),\n+          flushComponentPerformance(\n+            response,\n+            rootChunk,\n+            0,\n+            -Infinity,\n+            -Infinity\n+          ));\n+      }\n+    }\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -3815,7 +3878,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, createErrorChunk(response, tag));\n           break;\n         case 84:\n@@ -3967,96 +4030,99 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n         var value = _ref.value;\n         if (_ref.done) reportGlobalError(response, Error(\"Connection closed.\"));\n         else {\n-          var i = 0,\n-            rowState = response._rowState;\n-          _ref = response._rowID;\n-          for (\n-            var rowTag = response._rowTag,\n-              rowLength = response._rowLength,\n-              buffer = response._buffer,\n-              chunkLength = value.length;\n-            i < chunkLength;\n+          if (void 0 !== response.weak.deref()) {\n+            _ref = unwrapWeakResponse(response);\n+            for (\n+              var i = 0,\n+                rowState = _ref._rowState,\n+                rowID = _ref._rowID,\n+                rowTag = _ref._rowTag,\n+                rowLength = _ref._rowLength,\n+                buffer = _ref._buffer,\n+                chunkLength = value.length;\n+              i < chunkLength;\n \n-          ) {\n-            var lastIdx = -1;\n-            switch (rowState) {\n-              case 0:\n-                lastIdx = value[i++];\n-                58 === lastIdx\n-                  ? (rowState = 1)\n-                  : (_ref =\n-                      (_ref << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 1:\n-                rowState = value[i];\n-                84 === rowState ||\n-                65 === rowState ||\n-                79 === rowState ||\n-                111 === rowState ||\n-                85 === rowState ||\n-                83 === rowState ||\n-                115 === rowState ||\n-                76 === rowState ||\n-                108 === rowState ||\n-                71 === rowState ||\n-                103 === rowState ||\n-                77 === rowState ||\n-                109 === rowState ||\n-                86 === rowState\n-                  ? ((rowTag = rowState), (rowState = 2), i++)\n-                  : (64 < rowState && 91 > rowState) ||\n-                      35 === rowState ||\n-                      114 === rowState ||\n-                      120 === rowState\n-                    ? ((rowTag = rowState), (rowState = 3), i++)\n-                    : ((rowTag = 0), (rowState = 3));\n-                continue;\n-              case 2:\n-                lastIdx = value[i++];\n-                44 === lastIdx\n-                  ? (rowState = 4)\n-                  : (rowLength =\n-                      (rowLength << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 3:\n-                lastIdx = value.indexOf(10, i);\n+            ) {\n+              var lastIdx = -1;\n+              switch (rowState) {\n+                case 0:\n+                  lastIdx = value[i++];\n+                  58 === lastIdx\n+                    ? (rowState = 1)\n+                    : (rowID =\n+                        (rowID << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 1:\n+                  rowState = value[i];\n+                  84 === rowState ||\n+                  65 === rowState ||\n+                  79 === rowState ||\n+                  111 === rowState ||\n+                  85 === rowState ||\n+                  83 === rowState ||\n+                  115 === rowState ||\n+                  76 === rowState ||\n+                  108 === rowState ||\n+                  71 === rowState ||\n+                  103 === rowState ||\n+                  77 === rowState ||\n+                  109 === rowState ||\n+                  86 === rowState\n+                    ? ((rowTag = rowState), (rowState = 2), i++)\n+                    : (64 < rowState && 91 > rowState) ||\n+                        35 === rowState ||\n+                        114 === rowState ||\n+                        120 === rowState\n+                      ? ((rowTag = rowState), (rowState = 3), i++)\n+                      : ((rowTag = 0), (rowState = 3));\n+                  continue;\n+                case 2:\n+                  lastIdx = value[i++];\n+                  44 === lastIdx\n+                    ? (rowState = 4)\n+                    : (rowLength =\n+                        (rowLength << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 3:\n+                  lastIdx = value.indexOf(10, i);\n+                  break;\n+                case 4:\n+                  (lastIdx = i + rowLength),\n+                    lastIdx > value.length && (lastIdx = -1);\n+              }\n+              var offset = value.byteOffset + i;\n+              if (-1 < lastIdx)\n+                (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n+                  processFullBinaryRow(_ref, rowID, rowTag, buffer, rowLength),\n+                  (i = lastIdx),\n+                  3 === rowState && i++,\n+                  (rowLength = rowID = rowTag = rowState = 0),\n+                  (buffer.length = 0);\n+              else {\n+                value = new Uint8Array(\n+                  value.buffer,\n+                  offset,\n+                  value.byteLength - i\n+                );\n+                buffer.push(value);\n+                rowLength -= value.byteLength;\n                 break;\n-              case 4:\n-                (lastIdx = i + rowLength),\n-                  lastIdx > value.length && (lastIdx = -1);\n-            }\n-            var offset = value.byteOffset + i;\n-            if (-1 < lastIdx)\n-              (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n-                processFullBinaryRow(response, _ref, rowTag, buffer, rowLength),\n-                (i = lastIdx),\n-                3 === rowState && i++,\n-                (rowLength = _ref = rowTag = rowState = 0),\n-                (buffer.length = 0);\n-            else {\n-              value = new Uint8Array(\n-                value.buffer,\n-                offset,\n-                value.byteLength - i\n-              );\n-              buffer.push(value);\n-              rowLength -= value.byteLength;\n-              break;\n+              }\n             }\n+            _ref._rowState = rowState;\n+            _ref._rowID = rowID;\n+            _ref._rowTag = rowTag;\n+            _ref._rowLength = rowLength;\n           }\n-          response._rowState = rowState;\n-          response._rowID = _ref;\n-          response._rowTag = rowTag;\n-          response._rowLength = rowLength;\n           return reader.read().then(progress).catch(error);\n         }\n       }\n@@ -4165,7 +4231,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       initializingChunk = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n@@ -4275,12 +4345,12 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (id) {\n       return createServerReference$1(id, noServerCall);"
        },
        {
            "sha": "0cf71382fe948ea227508e4f3c99a03f23a95aa5",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-client.edge.production.js",
            "status": "modified",
            "additions": 36,
            "deletions": 36,
            "changes": 72,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -817,15 +817,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -854,15 +852,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -906,11 +904,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -1001,14 +1000,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -1125,7 +1125,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1400,24 +1400,24 @@ function resolveModule(response, id, model) {\n     model[1],\n     response._nonce\n   );\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1607,7 +1607,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1759,7 +1759,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.digest = tag.digest;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     case 84:\n@@ -1800,7 +1800,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.stack = \"Error: \" + buffer.message;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     default:"
        },
        {
            "sha": "5a293de6b2d8c5eebd6122282e1442c8934ad791",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-client.node.development.js",
            "status": "modified",
            "additions": 304,
            "deletions": 226,
            "changes": 530,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -879,7 +879,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1574,6 +1574,17 @@\n       this._children = [];\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1593,9 +1604,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function createErrorChunk(response, error) {\n       return new ReactPromise(\"rejected\", null, error);\n     }\n@@ -1674,15 +1703,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1705,6 +1733,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1715,15 +1744,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1768,24 +1798,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n-      response._replayConsole &&\n-        (markAllTracksInOrder(),\n-        flushComponentPerformance(\n-          response,\n-          getChunk(response, 0),\n-          0,\n-          -Infinity,\n-          -Infinity\n-        ));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1861,7 +1886,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? createErrorChunk(response, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1947,31 +1972,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -2111,7 +2136,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -2261,6 +2286,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -2306,15 +2348,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -2326,47 +2366,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -2386,10 +2420,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -2435,23 +2469,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2491,6 +2529,9 @@\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n       this._timeOrigin = 0;\n+      this._pendingInitialRender = null;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2507,18 +2548,23 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       replayConsole && markAllTracksInOrder();\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2528,18 +2574,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2554,39 +2602,41 @@\n         model[1],\n         response._nonce\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2623,19 +2673,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2688,7 +2738,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2761,11 +2811,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2808,7 +2858,7 @@\n       reason.$$typeof = REACT_POSTPONE_TYPE;\n       stack = response._chunks;\n       (env = stack.get(id))\n-        ? triggerErrorOnChunk(env, reason)\n+        ? triggerErrorOnChunk(response, env, reason)\n         : stack.set(id, createErrorChunk(response, reason));\n     }\n     function resolveHint(response, code, model) {\n@@ -3283,9 +3333,8 @@\n         previousResult.track = trackIdx$jscomp$6;\n         return previousResult;\n       }\n-      var children = root._children;\n-      \"resolved_model\" === root.status && initializeModelChunk(root);\n-      var debugInfo = root._debugInfo;\n+      var children = root._children,\n+        debugInfo = root._debugInfo;\n       if (debugInfo) {\n         for (var startTime$jscomp$0 = 0, i = 0; i < debugInfo.length; i++) {\n           var info = debugInfo[i];\n@@ -3745,6 +3794,20 @@\n       result.endTime = childrenEndTime;\n       return result;\n     }\n+    function flushInitialRenderPerformance(response) {\n+      if (response._replayConsole) {\n+        var rootChunk = getChunk(response, 0);\n+        isArrayImpl(rootChunk._children) &&\n+          (markAllTracksInOrder(),\n+          flushComponentPerformance(\n+            response,\n+            rootChunk,\n+            0,\n+            -Infinity,\n+            -Infinity\n+          ));\n+      }\n+    }\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -3815,7 +3878,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, createErrorChunk(response, tag));\n           break;\n         case 84:\n@@ -3867,84 +3930,95 @@\n             : resolveModel(response, id, row);\n       }\n     }\n-    function processBinaryChunk(response, chunk) {\n-      for (\n-        var i = 0,\n-          rowState = response._rowState,\n-          rowID = response._rowID,\n-          rowTag = response._rowTag,\n-          rowLength = response._rowLength,\n-          buffer = response._buffer,\n-          chunkLength = chunk.length;\n-        i < chunkLength;\n+    function processBinaryChunk(weakResponse, chunk) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        weakResponse = unwrapWeakResponse(weakResponse);\n+        for (\n+          var i = 0,\n+            rowState = weakResponse._rowState,\n+            rowID = weakResponse._rowID,\n+            rowTag = weakResponse._rowTag,\n+            rowLength = weakResponse._rowLength,\n+            buffer = weakResponse._buffer,\n+            chunkLength = chunk.length;\n+          i < chunkLength;\n \n-      ) {\n-        var lastIdx = -1;\n-        switch (rowState) {\n-          case 0:\n-            lastIdx = chunk[i++];\n-            58 === lastIdx\n-              ? (rowState = 1)\n-              : (rowID =\n-                  (rowID << 4) | (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-            continue;\n-          case 1:\n-            rowState = chunk[i];\n-            84 === rowState ||\n-            65 === rowState ||\n-            79 === rowState ||\n-            111 === rowState ||\n-            85 === rowState ||\n-            83 === rowState ||\n-            115 === rowState ||\n-            76 === rowState ||\n-            108 === rowState ||\n-            71 === rowState ||\n-            103 === rowState ||\n-            77 === rowState ||\n-            109 === rowState ||\n-            86 === rowState\n-              ? ((rowTag = rowState), (rowState = 2), i++)\n-              : (64 < rowState && 91 > rowState) ||\n-                  35 === rowState ||\n-                  114 === rowState ||\n-                  120 === rowState\n-                ? ((rowTag = rowState), (rowState = 3), i++)\n-                : ((rowTag = 0), (rowState = 3));\n-            continue;\n-          case 2:\n-            lastIdx = chunk[i++];\n-            44 === lastIdx\n-              ? (rowState = 4)\n-              : (rowLength =\n-                  (rowLength << 4) |\n-                  (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-            continue;\n-          case 3:\n-            lastIdx = chunk.indexOf(10, i);\n+        ) {\n+          var lastIdx = -1;\n+          switch (rowState) {\n+            case 0:\n+              lastIdx = chunk[i++];\n+              58 === lastIdx\n+                ? (rowState = 1)\n+                : (rowID =\n+                    (rowID << 4) |\n+                    (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+              continue;\n+            case 1:\n+              rowState = chunk[i];\n+              84 === rowState ||\n+              65 === rowState ||\n+              79 === rowState ||\n+              111 === rowState ||\n+              85 === rowState ||\n+              83 === rowState ||\n+              115 === rowState ||\n+              76 === rowState ||\n+              108 === rowState ||\n+              71 === rowState ||\n+              103 === rowState ||\n+              77 === rowState ||\n+              109 === rowState ||\n+              86 === rowState\n+                ? ((rowTag = rowState), (rowState = 2), i++)\n+                : (64 < rowState && 91 > rowState) ||\n+                    35 === rowState ||\n+                    114 === rowState ||\n+                    120 === rowState\n+                  ? ((rowTag = rowState), (rowState = 3), i++)\n+                  : ((rowTag = 0), (rowState = 3));\n+              continue;\n+            case 2:\n+              lastIdx = chunk[i++];\n+              44 === lastIdx\n+                ? (rowState = 4)\n+                : (rowLength =\n+                    (rowLength << 4) |\n+                    (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+              continue;\n+            case 3:\n+              lastIdx = chunk.indexOf(10, i);\n+              break;\n+            case 4:\n+              (lastIdx = i + rowLength),\n+                lastIdx > chunk.length && (lastIdx = -1);\n+          }\n+          var offset = chunk.byteOffset + i;\n+          if (-1 < lastIdx)\n+            (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n+              processFullBinaryRow(\n+                weakResponse,\n+                rowID,\n+                rowTag,\n+                buffer,\n+                rowLength\n+              ),\n+              (i = lastIdx),\n+              3 === rowState && i++,\n+              (rowLength = rowID = rowTag = rowState = 0),\n+              (buffer.length = 0);\n+          else {\n+            chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);\n+            buffer.push(chunk);\n+            rowLength -= chunk.byteLength;\n             break;\n-          case 4:\n-            (lastIdx = i + rowLength), lastIdx > chunk.length && (lastIdx = -1);\n-        }\n-        var offset = chunk.byteOffset + i;\n-        if (-1 < lastIdx)\n-          (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n-            processFullBinaryRow(response, rowID, rowTag, buffer, rowLength),\n-            (i = lastIdx),\n-            3 === rowState && i++,\n-            (rowLength = rowID = rowTag = rowState = 0),\n-            (buffer.length = 0);\n-        else {\n-          chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);\n-          buffer.push(chunk);\n-          rowLength -= chunk.byteLength;\n-          break;\n+          }\n         }\n+        weakResponse._rowState = rowState;\n+        weakResponse._rowID = rowID;\n+        weakResponse._rowTag = rowTag;\n+        weakResponse._rowLength = rowLength;\n       }\n-      response._rowState = rowState;\n-      response._rowID = rowID;\n-      response._rowTag = rowTag;\n-      response._rowLength = rowLength;\n     }\n     function createFromJSONCallback(response) {\n       return function (key, value) {\n@@ -4026,8 +4100,8 @@\n         return value;\n       };\n     }\n-    function close(response) {\n-      reportGlobalError(response, Error(\"Connection closed.\"));\n+    function close(weakResponse) {\n+      reportGlobalError(weakResponse, Error(\"Connection closed.\"));\n     }\n     function noServerCall$1() {\n       throw Error(\n@@ -4049,7 +4123,7 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n@@ -4172,7 +4246,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       initializingChunk = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n@@ -4282,7 +4360,7 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromNodeStream = function (\n       stream,\n@@ -4301,7 +4379,7 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n       stream.on(\"data\", function (chunk) {\n         processBinaryChunk(response, chunk);\n       });\n@@ -4311,12 +4389,12 @@\n       stream.on(\"end\", function () {\n         return close(response);\n       });\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (id) {\n       return createServerReference$1(id, noServerCall$1);"
        },
        {
            "sha": "c928126104f5d7d22a47161c9b38e45ae9f1d146",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-client.node.production.js",
            "status": "modified",
            "additions": 49,
            "deletions": 49,
            "changes": 98,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -818,15 +818,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -855,15 +853,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -907,11 +905,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -1002,14 +1001,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -1126,7 +1126,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1401,24 +1401,24 @@ function resolveModule(response, id, model) {\n     model[1],\n     response._nonce\n   );\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1608,7 +1608,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1760,7 +1760,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.digest = tag.digest;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     case 84:\n@@ -1801,7 +1801,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.stack = \"Error: \" + buffer.message;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     default:\n@@ -1811,14 +1811,14 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n           : tag.set(id, new ReactPromise(\"resolved_model\", buffer, response));\n   }\n }\n-function processBinaryChunk(response, chunk) {\n+function processBinaryChunk(weakResponse, chunk) {\n   for (\n     var i = 0,\n-      rowState = response._rowState,\n-      rowID = response._rowID,\n-      rowTag = response._rowTag,\n-      rowLength = response._rowLength,\n-      buffer = response._buffer,\n+      rowState = weakResponse._rowState,\n+      rowID = weakResponse._rowID,\n+      rowTag = weakResponse._rowTag,\n+      rowLength = weakResponse._rowLength,\n+      buffer = weakResponse._buffer,\n       chunkLength = chunk.length;\n     i < chunkLength;\n \n@@ -1872,7 +1872,7 @@ function processBinaryChunk(response, chunk) {\n     var offset = chunk.byteOffset + i;\n     if (-1 < lastIdx)\n       (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n-        processFullBinaryRow(response, rowID, rowTag, buffer, rowLength),\n+        processFullBinaryRow(weakResponse, rowID, rowTag, buffer, rowLength),\n         (i = lastIdx),\n         3 === rowState && i++,\n         (rowLength = rowID = rowTag = rowState = 0),\n@@ -1884,10 +1884,10 @@ function processBinaryChunk(response, chunk) {\n       break;\n     }\n   }\n-  response._rowState = rowState;\n-  response._rowID = rowID;\n-  response._rowTag = rowTag;\n-  response._rowLength = rowLength;\n+  weakResponse._rowState = rowState;\n+  weakResponse._rowID = rowID;\n+  weakResponse._rowTag = rowTag;\n+  weakResponse._rowLength = rowLength;\n }\n function createFromJSONCallback(response) {\n   return function (key, value) {\n@@ -1924,8 +1924,8 @@ function createFromJSONCallback(response) {\n     return value;\n   };\n }\n-function close(response) {\n-  reportGlobalError(response, Error(\"Connection closed.\"));\n+function close(weakResponse) {\n+  reportGlobalError(weakResponse, Error(\"Connection closed.\"));\n }\n function noServerCall$1() {\n   throw Error("
        },
        {
            "sha": "a6f1b6016218c85212deeba55aef89250e797875",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-server.browser.development.js",
            "status": "modified",
            "additions": 164,
            "deletions": 131,
            "changes": 295,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -652,9 +652,9 @@\n             suffixIdx = url.lastIndexOf(\"?\");\n           -1 < envIdx &&\n             -1 < suffixIdx &&\n-            (url = url.slice(envIdx + 1, suffixIdx));\n+            (url = decodeURI(url.slice(envIdx + 1, suffixIdx)));\n         }\n-        request(url, functionName) &&\n+        request(url, functionName, callsite[2], callsite[3]) &&\n           ((callsite = callsite.slice(0)),\n           (callsite[1] = url),\n           filteredStack.push(callsite));\n@@ -677,7 +677,7 @@\n               request,\n               parseStackTrace(Error(\"react-stack-top-frame\"), 1)\n             );\n-            request.pendingChunks++;\n+            request.pendingDebugChunks++;\n             var owner = resolveOwner(),\n               args = Array.from(arguments);\n             a: {\n@@ -708,9 +708,13 @@\n             null != owner && outlineComponentInfo(request, owner);\n             format = [methodName, stack, owner, env];\n             format.push.apply(format, args);\n-            args = serializeDebugModel(request, 500, format);\n+            args = serializeDebugModel(\n+              request,\n+              (null === request.deferredDebugObjects ? 500 : 10) + stack.length,\n+              format\n+            );\n             \"[\" !== args[0] &&\n-              (args = serializeDebugModel(request, 500, [\n+              (args = serializeDebugModel(request, 10 + stack.length, [\n                 methodName,\n                 stack,\n                 owner,\n@@ -858,6 +862,7 @@\n         void 0 === onPostpone ? defaultPostponeHandler : onPostpone;\n       this.onAllReady = onAllReady;\n       this.onFatalError = onFatalError;\n+      this.pendingDebugChunks = 0;\n       this.completedDebugChunks = [];\n       this.environmentName =\n         void 0 === environmentName\n@@ -880,6 +885,7 @@\n         : null;\n       type = this.timeOrigin = performance.now();\n       emitTimeOriginChunk(this, type + performance.timeOrigin);\n+      this.abortTime = -0;\n       model = createTask(\n         this,\n         model,\n@@ -953,7 +959,7 @@\n       return currentRequest ? currentRequest : null;\n     }\n     function serializeDebugThenable(request, counter, thenable) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var id = request.nextChunkId++,\n         ref = \"$@\" + id.toString(16);\n       request.writtenDebugObjects.set(thenable, ref);\n@@ -964,15 +970,7 @@\n             ref\n           );\n         case \"rejected\":\n-          return (\n-            (thenable = thenable.reason),\n-            \"object\" === typeof thenable &&\n-            null !== thenable &&\n-            thenable.$$typeof === REACT_POSTPONE_TYPE\n-              ? emitPostponeChunk(request, id, thenable)\n-              : emitErrorChunk(request, id, \"\", thenable, !0),\n-            ref\n-          );\n+          return emitErrorChunk(request, id, \"\", thenable.reason, !0), ref;\n       }\n       if (request.status === ABORTING)\n         return emitDebugHaltChunk(request, id), ref;\n@@ -991,11 +989,7 @@\n             ((cancelled = !0),\n             request.status === ABORTING\n               ? emitDebugHaltChunk(request, id)\n-              : \"object\" === typeof reason &&\n-                  null !== reason &&\n-                  reason.$$typeof === REACT_POSTPONE_TYPE\n-                ? emitPostponeChunk(request, id, reason)\n-                : emitErrorChunk(request, id, \"\", reason, !0),\n+              : emitErrorChunk(request, id, \"\", reason, !0),\n             enqueueFlush(request));\n         }\n       );\n@@ -1051,8 +1045,10 @@\n             return (\n               request.abortableTasks.delete(newTask),\n               21 === request.type\n-                ? haltTask(newTask, request)\n-                : abortTask(newTask, request, request.fatalError),\n+                ? (haltTask(newTask), finishHaltedTask(newTask, request))\n+                : ((task = request.fatalError),\n+                  abortTask(newTask),\n+                  finishAbortedTask(newTask, request, task)),\n               newTask.id\n             );\n           \"string\" !== typeof thenable.status &&\n@@ -1125,8 +1121,7 @@\n           signal.removeEventListener(\"abort\", abortStream);\n           signal = signal.reason;\n           21 === request.type\n-            ? (haltTask(streamTask, request),\n-              request.abortableTasks.delete(streamTask))\n+            ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n             : (erroredTask(request, streamTask, signal), enqueueFlush(request));\n           reader.cancel(signal).then(error, error);\n         }\n@@ -1213,8 +1208,7 @@\n           signal.removeEventListener(\"abort\", abortIterable);\n           var reason = signal.reason;\n           21 === request.type\n-            ? (haltTask(streamTask, request),\n-              request.abortableTasks.delete(streamTask))\n+            ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n             : (erroredTask(request, streamTask, signal.reason),\n               enqueueFlush(request));\n           \"function\" === typeof iterator.throw &&\n@@ -1386,7 +1380,7 @@\n           var componentDebugID = task.id;\n           componentDebugInfo = Component.displayName || Component.name || \"\";\n           var componentEnv = (0, request.environmentName)();\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           componentDebugInfo = {\n             name: componentDebugInfo,\n             env: componentEnv,\n@@ -1772,7 +1766,7 @@\n     function serializeDeferredObject(request, value) {\n       var deferredDebugObjects = request.deferredDebugObjects;\n       return null !== deferredDebugObjects\n-        ? (request.pendingChunks++,\n+        ? (request.pendingDebugChunks++,\n           (request = request.nextChunkId++),\n           deferredDebugObjects.existing.set(value, request),\n           deferredDebugObjects.retained.set(request, value),\n@@ -1852,15 +1846,15 @@\n           request.bundlerConfig,\n           clientReference\n         );\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         var importId = request.nextChunkId++;\n         emitImportChunk(request, importId, clientReferenceMetadata, !0);\n         return parent[0] === REACT_ELEMENT_TYPE && \"1\" === parentPropertyName\n           ? serializeLazyID(importId)\n           : serializeByValueID(importId);\n       } catch (x) {\n         return (\n-          request.pendingChunks++,\n+          request.pendingDebugChunks++,\n           (parent = request.nextChunkId++),\n           (parentPropertyName = logRecoverableError(request, x, null)),\n           emitErrorChunk(request, parent, parentPropertyName, x, !0),\n@@ -1939,7 +1933,7 @@\n       return serializeByValueID(bufferId);\n     }\n     function serializeDebugTypedArray(request, tag, typedArray) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var bufferId = request.nextChunkId++;\n       emitTypedArrayChunk(request, bufferId, tag, typedArray, !0);\n       return serializeByValueID(bufferId);\n@@ -1965,8 +1959,9 @@\n         reader.cancel(reason).then(noop, noop);\n       }\n       var model = [blob.type],\n-        reader = blob.stream().getReader(),\n-        id = request.nextChunkId++;\n+        reader = blob.stream().getReader();\n+      request.pendingDebugChunks++;\n+      var id = request.nextChunkId++;\n       reader.read().then(progress).catch(error);\n       return \"$B\" + id.toString(16);\n     }\n@@ -2000,7 +1995,7 @@\n           signal.removeEventListener(\"abort\", abortBlob);\n           signal = signal.reason;\n           21 === request.type\n-            ? haltTask(newTask, request)\n+            ? haltTask(newTask)\n             : (erroredTask(request, newTask, signal), enqueueFlush(request));\n           reader.cancel(signal).then(error, error);\n         }\n@@ -2612,7 +2607,7 @@\n         );\n         void 0 !== tainted && throwTaintViolation(tainted.message);\n       }\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       tainted = new Uint8Array(\n         typedArray.buffer,\n         typedArray.byteOffset,\n@@ -2631,7 +2626,7 @@\n         throw Error(\n           \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n         );\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       text = stringToChunk(text);\n       var binaryLength = text.byteLength;\n       id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n@@ -2870,7 +2865,7 @@\n           if (0 >= counter.objectLimit)\n             return serializeDeferredObject(request, value);\n           counter.objectLimit--;\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           counter = request.nextChunkId++;\n           emitTextChunk(request, counter, value, !0);\n           return serializeByValueID(counter);\n@@ -2898,7 +2893,7 @@\n         ref = counter.get(value);\n         if (void 0 !== ref) return ref;\n         key = \"$E(\" + (Function.prototype.toString.call(value) + \")\");\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         ref = request.nextChunkId++;\n         key = encodeReferenceChunk(request, ref, key);\n         request.completedDebugChunks.push(key);\n@@ -2991,12 +2986,12 @@\n     }\n     function outlineDebugModel(request, counter, model) {\n       var id = request.nextChunkId++;\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       emitOutlinedDebugModelChunk(request, id, counter, model);\n       return id;\n     }\n     function emitTimeOriginChunk(request, timeOrigin) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       timeOrigin = stringToChunk(\":N\" + timeOrigin + \"\\n\");\n       request.completedDebugChunks.push(timeOrigin);\n     }\n@@ -3007,15 +3002,15 @@\n           markOperationEndTime(request$jscomp$1, task, info.time);\n         else if (\"string\" === typeof info.name)\n           outlineComponentInfo(request$jscomp$1, info),\n-            request$jscomp$1.pendingChunks++,\n+            request$jscomp$1.pendingDebugChunks++,\n             emitDebugChunk(request$jscomp$1, id, info);\n         else if (info.awaited) {\n           var ioInfo = info.awaited;\n           if (!(ioInfo.end <= request$jscomp$1.timeOrigin)) {\n             var request = request$jscomp$1,\n               ioInfo$jscomp$0 = ioInfo;\n             if (!request.writtenObjects.has(ioInfo$jscomp$0)) {\n-              request.pendingChunks++;\n+              request.pendingDebugChunks++;\n               var id$jscomp$0 = request.nextChunkId++,\n                 owner = ioInfo$jscomp$0.owner;\n               null != owner && outlineComponentInfo(request, owner);\n@@ -3038,10 +3033,10 @@\n                 start: ioInfo$jscomp$0.start - request$jscomp$0.timeOrigin,\n                 end: ioInfo$jscomp$0.end - request$jscomp$0.timeOrigin\n               };\n-              void 0 !== value && (debugIOInfo.value = value);\n               null != env && (debugIOInfo.env = env);\n               null != debugStack && (debugIOInfo.stack = debugStack);\n               null != owner && (debugIOInfo.owner = owner);\n+              void 0 !== value && (debugIOInfo.value = value);\n               value = serializeDebugModel(\n                 request$jscomp$0,\n                 objectLimit,\n@@ -3066,11 +3061,11 @@\n             null != info.env && (ioInfo.env = info.env);\n             null != info.owner && (ioInfo.owner = info.owner);\n             null != request && (ioInfo.stack = request);\n-            request$jscomp$1.pendingChunks++;\n+            request$jscomp$1.pendingDebugChunks++;\n             emitDebugChunk(request$jscomp$1, id, ioInfo);\n           }\n         } else\n-          request$jscomp$1.pendingChunks++,\n+          request$jscomp$1.pendingDebugChunks++,\n             emitDebugChunk(request$jscomp$1, id, info);\n       }\n     }\n@@ -3084,31 +3079,20 @@\n     }\n     function forwardDebugInfoFromAbortedTask(request, task) {\n       var model = task.model;\n-      if (\"object\" === typeof model && null !== model) {\n-        var debugInfo;\n-        (debugInfo = model._debugInfo) &&\n-          forwardDebugInfo(request, task, debugInfo);\n-        if (\n-          \"function\" !== typeof model.then &&\n-          model.$$typeof === REACT_LAZY_TYPE\n-        ) {\n-          request = model._payload;\n-          model = model._init;\n-          try {\n-            model(request);\n-          } catch (x) {}\n-        }\n-      }\n+      \"object\" === typeof model &&\n+        null !== model &&\n+        (model = model._debugInfo) &&\n+        forwardDebugInfo(request, task, model);\n     }\n     function emitTimingChunk(request, id, timestamp) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       timestamp -= request.timeOrigin;\n       id = id.toString(16) + ':D{\"time\":' + timestamp + \"}\\n\";\n       id = stringToChunk(id);\n       request.completedDebugChunks.push(id);\n     }\n     function markOperationEndTime(request, task, timestamp) {\n-      request.status !== ABORTING &&\n+      (request.status === ABORTING && timestamp > request.abortTime) ||\n         (timestamp > task.time\n           ? (emitTimingChunk(request, task.id, timestamp),\n             (task.time = timestamp))\n@@ -3199,7 +3183,7 @@\n           task.implicitSlot = !1;\n           var currentEnv = (0, request.environmentName)();\n           currentEnv !== task.environmentName &&\n-            (request.pendingChunks++,\n+            (request.pendingDebugChunks++,\n             emitDebugChunk(request, task.id, { env: currentEnv }));\n           task.timed && markOperationEndTime(request, task, performance.now());\n           if (\"object\" === typeof resolvedModel && null !== resolvedModel)\n@@ -3217,11 +3201,17 @@\n           callOnAllReadyIfReady(request);\n         } catch (thrownValue) {\n           if (request.status === ABORTING)\n-            request.abortableTasks.delete(task),\n+            if (\n+              (request.abortableTasks.delete(task),\n               (task.status = 0),\n-              21 === request.type\n-                ? haltTask(task, request)\n-                : abortTask(task, request, request.fatalError);\n+              21 === request.type)\n+            )\n+              haltTask(task), finishHaltedTask(task, request);\n+            else {\n+              var errorId = request.fatalError;\n+              abortTask(task);\n+              finishAbortedTask(task, request, errorId);\n+            }\n           else {\n             var x =\n               thrownValue === SuspenseException\n@@ -3275,19 +3265,23 @@\n           (currentRequest = prevRequest);\n       }\n     }\n-    function abortTask(task, request, errorId) {\n-      5 !== task.status &&\n-        ((task.status = 3),\n-        forwardDebugInfoFromAbortedTask(request, task),\n-        task.timed && markOperationEndTime(request, task, performance.now()),\n+    function abortTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishAbortedTask(task, request, errorId) {\n+      3 === task.status &&\n+        (forwardDebugInfoFromAbortedTask(request, task),\n+        task.timed && markOperationEndTime(request, task, request.abortTime),\n         (errorId = serializeByValueID(errorId)),\n         (task = encodeReferenceChunk(request, task.id, errorId)),\n         request.completedErrorChunks.push(task));\n     }\n-    function haltTask(task, request) {\n-      5 !== task.status &&\n-        ((task.status = 3),\n-        forwardDebugInfoFromAbortedTask(request, task),\n+    function haltTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishHaltedTask(task, request) {\n+      3 === task.status &&\n+        (forwardDebugInfoFromAbortedTask(request, task),\n         request.pendingChunks--);\n     }\n     function flushCompletedChunks(request, destination) {\n@@ -3319,7 +3313,7 @@\n         var debugChunks = request.completedDebugChunks;\n         for (i = 0; i < debugChunks.length; i++)\n           if (\n-            (request.pendingChunks--,\n+            (request.pendingDebugChunks--,\n             !writeChunkAndReturn(destination, debugChunks[i]))\n           ) {\n             request.destination = null;\n@@ -3360,6 +3354,7 @@\n             (writtenBytes = 0));\n       }\n       0 === request.pendingChunks &&\n+        0 === request.pendingDebugChunks &&\n         (cleanupTaintQueue(request),\n         request.status < ABORTING &&\n           request.cacheController.abort(\n@@ -3408,62 +3403,98 @@\n         }\n       }\n     }\n-    function abort(request, reason) {\n+    function finishHalt(request, abortedTasks) {\n       try {\n-        11 >= request.status &&\n-          ((request.status = ABORTING),\n-          request.cacheController.abort(reason),\n-          callOnAllReadyIfReady(request));\n-        var abortableTasks = request.abortableTasks;\n-        if (0 < abortableTasks.size) {\n-          if (21 === request.type)\n-            abortableTasks.forEach(function (task) {\n-              return haltTask(task, request);\n-            });\n-          else if (\n-            \"object\" === typeof reason &&\n-            null !== reason &&\n-            reason.$$typeof === REACT_POSTPONE_TYPE\n-          ) {\n-            logPostpone(request, reason.message, null);\n-            var errorId = request.nextChunkId++;\n-            request.fatalError = errorId;\n-            request.pendingChunks++;\n-            emitPostponeChunk(request, errorId, reason);\n-            abortableTasks.forEach(function (task) {\n-              return abortTask(task, request, errorId);\n-            });\n-          } else {\n-            var error =\n-                void 0 === reason\n-                  ? Error(\n-                      \"The render was aborted by the server without a reason.\"\n-                    )\n-                  : \"object\" === typeof reason &&\n-                      null !== reason &&\n-                      \"function\" === typeof reason.then\n+        abortedTasks.forEach(function (task) {\n+          return finishHaltedTask(task, request);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n+      }\n+    }\n+    function finishAbort(request, abortedTasks, errorId) {\n+      try {\n+        abortedTasks.forEach(function (task) {\n+          return finishAbortedTask(task, request, errorId);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n+      }\n+    }\n+    function abort(request, reason) {\n+      if (!(11 < request.status))\n+        try {\n+          request.status = ABORTING;\n+          request.abortTime = performance.now();\n+          request.cacheController.abort(reason);\n+          var abortableTasks = request.abortableTasks;\n+          if (0 < abortableTasks.size)\n+            if (21 === request.type)\n+              abortableTasks.forEach(function (task) {\n+                return haltTask(task, request);\n+              }),\n+                scheduleWork(function () {\n+                  return finishHalt(request, abortableTasks);\n+                });\n+            else if (\n+              \"object\" === typeof reason &&\n+              null !== reason &&\n+              reason.$$typeof === REACT_POSTPONE_TYPE\n+            ) {\n+              logPostpone(request, reason.message, null);\n+              var errorId = request.nextChunkId++;\n+              request.fatalError = errorId;\n+              request.pendingChunks++;\n+              emitPostponeChunk(request, errorId, reason);\n+              abortableTasks.forEach(function (task) {\n+                return abortTask(task, request, errorId);\n+              });\n+              scheduleWork(function () {\n+                return finishAbort(request, abortableTasks, errorId);\n+              });\n+            } else {\n+              var error =\n+                  void 0 === reason\n                     ? Error(\n-                        \"The render was aborted by the server with a promise.\"\n+                        \"The render was aborted by the server without a reason.\"\n                       )\n-                    : reason,\n-              digest = logRecoverableError(request, error, null),\n-              _errorId2 = request.nextChunkId++;\n-            request.fatalError = _errorId2;\n-            request.pendingChunks++;\n-            emitErrorChunk(request, _errorId2, digest, error, !1);\n-            abortableTasks.forEach(function (task) {\n-              return abortTask(task, request, _errorId2);\n-            });\n+                    : \"object\" === typeof reason &&\n+                        null !== reason &&\n+                        \"function\" === typeof reason.then\n+                      ? Error(\n+                          \"The render was aborted by the server with a promise.\"\n+                        )\n+                      : reason,\n+                digest = logRecoverableError(request, error, null),\n+                _errorId2 = request.nextChunkId++;\n+              request.fatalError = _errorId2;\n+              request.pendingChunks++;\n+              emitErrorChunk(request, _errorId2, digest, error, !1);\n+              abortableTasks.forEach(function (task) {\n+                return abortTask(task, request, _errorId2);\n+              });\n+              scheduleWork(function () {\n+                return finishAbort(request, abortableTasks, _errorId2);\n+              });\n+            }\n+          else {\n+            var onAllReady = request.onAllReady;\n+            onAllReady();\n+            null !== request.destination &&\n+              flushCompletedChunks(request, request.destination);\n           }\n-          abortableTasks.clear();\n-          callOnAllReadyIfReady(request);\n+        } catch (error$2) {\n+          logRecoverableError(request, error$2, null),\n+            fatalError(request, error$2);\n         }\n-        null !== request.destination &&\n-          flushCompletedChunks(request, request.destination);\n-      } catch (error$2) {\n-        logRecoverableError(request, error$2, null),\n-          fatalError(request, error$2);\n-      }\n     }\n     function fromHex(str) {\n       return parseInt(str, 16);\n@@ -3475,7 +3506,7 @@\n           \"resolveDebugMessage/closeDebugChannel should not be called for a Request that wasn't kept alive. This is a bug in React.\"\n         );\n       deferredDebugObjects.retained.forEach(function (value, id) {\n-        request.pendingChunks--;\n+        request.pendingDebugChunks--;\n         deferredDebugObjects.retained.delete(id);\n         deferredDebugObjects.existing.delete(value);\n       });\n@@ -4252,7 +4283,7 @@\n                 var id = message[command],\n                   retainedValue = deferredDebugObjects.retained.get(id);\n                 void 0 !== retainedValue &&\n-                  (request.pendingChunks--,\n+                  (request.pendingDebugChunks--,\n                   deferredDebugObjects.retained.delete(id),\n                   deferredDebugObjects.existing.delete(retainedValue),\n                   enqueueFlush(request));\n@@ -4263,7 +4294,9 @@\n                 (id = message[command]),\n                   (retainedValue = deferredDebugObjects.retained.get(id)),\n                   void 0 !== retainedValue &&\n-                    (emitOutlinedDebugModelChunk(\n+                    (deferredDebugObjects.retained.delete(id),\n+                    deferredDebugObjects.existing.delete(retainedValue),\n+                    emitOutlinedDebugModelChunk(\n                       request,\n                       id,\n                       { objectLimit: 10 },"
        },
        {
            "sha": "2a22499141d0189ed65eab8b0303eed5282b2fbb",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-server.browser.production.js",
            "status": "modified",
            "additions": 139,
            "deletions": 90,
            "changes": 229,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -819,8 +819,11 @@ function serializeThenable(request, task, thenable) {\n         return (\n           request.abortableTasks.delete(newTask),\n           21 === request.type\n-            ? haltTask(newTask, request)\n-            : abortTask(newTask, request, request.fatalError),\n+            ? (haltTask(newTask),\n+              3 === newTask.status && request.pendingChunks--)\n+            : ((task = request.fatalError),\n+              abortTask(newTask),\n+              finishAbortedTask(newTask, request, task)),\n           newTask.id\n         );\n       \"string\" !== typeof thenable.status &&\n@@ -887,8 +890,7 @@ function serializeReadableStream(request, task, stream) {\n       signal.removeEventListener(\"abort\", abortStream);\n       signal = signal.reason;\n       21 === request.type\n-        ? (haltTask(streamTask, request),\n-          request.abortableTasks.delete(streamTask))\n+        ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n         : (erroredTask(request, streamTask, signal), enqueueFlush(request));\n       reader.cancel(signal).then(error, error);\n     }\n@@ -970,8 +972,7 @@ function serializeAsyncIterable(request, task, iterable, iterator) {\n       signal.removeEventListener(\"abort\", abortIterable);\n       var reason = signal.reason;\n       21 === request.type\n-        ? (haltTask(streamTask, request),\n-          request.abortableTasks.delete(streamTask))\n+        ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n         : (erroredTask(request, streamTask, signal.reason),\n           enqueueFlush(request));\n       \"function\" === typeof iterator.throw &&\n@@ -1346,7 +1347,7 @@ function outlineModel(request, value) {\n function serializeTypedArray(request, tag, typedArray) {\n   request.pendingChunks++;\n   var bufferId = request.nextChunkId++;\n-  emitTypedArrayChunk(request, bufferId, tag, typedArray);\n+  emitTypedArrayChunk(request, bufferId, tag, typedArray, !1);\n   return serializeByValueID(bufferId);\n }\n function serializeBlob(request, blob) {\n@@ -1373,7 +1374,7 @@ function serializeBlob(request, blob) {\n       signal.removeEventListener(\"abort\", abortBlob);\n       signal = signal.reason;\n       21 === request.type\n-        ? haltTask(newTask, request)\n+        ? haltTask(newTask)\n         : (erroredTask(request, newTask, signal), enqueueFlush(request));\n       reader.cancel(signal).then(error, error);\n     }\n@@ -1598,7 +1599,7 @@ function renderModelDestructive(\n       return (\n         request.pendingChunks++,\n         (task = request.nextChunkId++),\n-        emitTextChunk(request, task, value),\n+        emitTextChunk(request, task, value, !1),\n         serializeByValueID(task)\n       );\n     value = \"$\" === value[0] ? \"$\" + value : value;\n@@ -1755,7 +1756,7 @@ function emitModelChunk(request, id, json) {\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id);\n }\n-function emitTypedArrayChunk(request, id, tag, typedArray) {\n+function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n   if (TaintRegistryByteLengths.has(typedArray.byteLength)) {\n     var tainted = TaintRegistryValues.get(\n       String.fromCharCode.apply(\n@@ -1769,27 +1770,27 @@ function emitTypedArrayChunk(request, id, tag, typedArray) {\n     );\n     void 0 !== tainted && throwTaintViolation(tainted.message);\n   }\n-  request.pendingChunks++;\n-  tainted = new Uint8Array(\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n+  debug = new Uint8Array(\n     typedArray.buffer,\n     typedArray.byteOffset,\n     typedArray.byteLength\n   );\n-  typedArray = 2048 < typedArray.byteLength ? tainted.slice() : tainted;\n-  tainted = typedArray.byteLength;\n-  id = id.toString(16) + \":\" + tag + tainted.toString(16) + \",\";\n+  typedArray = 2048 < typedArray.byteLength ? debug.slice() : debug;\n+  debug = typedArray.byteLength;\n+  id = id.toString(16) + \":\" + tag + debug.toString(16) + \",\";\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id, typedArray);\n }\n-function emitTextChunk(request, id, text) {\n+function emitTextChunk(request, id, text, debug) {\n   if (null === byteLengthOfChunk)\n     throw Error(\n       \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n     );\n-  request.pendingChunks++;\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n   text = stringToChunk(text);\n-  var binaryLength = text.byteLength;\n-  id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n+  debug = text.byteLength;\n+  id = id.toString(16) + \":T\" + debug.toString(16) + \",\";\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id, text);\n }\n@@ -1798,33 +1799,33 @@ function emitChunk(request, task, value) {\n   \"string\" === typeof value && null !== byteLengthOfChunk\n     ? ((task = TaintRegistryValues.get(value)),\n       void 0 !== task && throwTaintViolation(task.message),\n-      emitTextChunk(request, id, value))\n+      emitTextChunk(request, id, value, !1))\n     : value instanceof ArrayBuffer\n-      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value))\n+      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value), !1)\n       : value instanceof Int8Array\n-        ? emitTypedArrayChunk(request, id, \"O\", value)\n+        ? emitTypedArrayChunk(request, id, \"O\", value, !1)\n         : value instanceof Uint8Array\n-          ? emitTypedArrayChunk(request, id, \"o\", value)\n+          ? emitTypedArrayChunk(request, id, \"o\", value, !1)\n           : value instanceof Uint8ClampedArray\n-            ? emitTypedArrayChunk(request, id, \"U\", value)\n+            ? emitTypedArrayChunk(request, id, \"U\", value, !1)\n             : value instanceof Int16Array\n-              ? emitTypedArrayChunk(request, id, \"S\", value)\n+              ? emitTypedArrayChunk(request, id, \"S\", value, !1)\n               : value instanceof Uint16Array\n-                ? emitTypedArrayChunk(request, id, \"s\", value)\n+                ? emitTypedArrayChunk(request, id, \"s\", value, !1)\n                 : value instanceof Int32Array\n-                  ? emitTypedArrayChunk(request, id, \"L\", value)\n+                  ? emitTypedArrayChunk(request, id, \"L\", value, !1)\n                   : value instanceof Uint32Array\n-                    ? emitTypedArrayChunk(request, id, \"l\", value)\n+                    ? emitTypedArrayChunk(request, id, \"l\", value, !1)\n                     : value instanceof Float32Array\n-                      ? emitTypedArrayChunk(request, id, \"G\", value)\n+                      ? emitTypedArrayChunk(request, id, \"G\", value, !1)\n                       : value instanceof Float64Array\n-                        ? emitTypedArrayChunk(request, id, \"g\", value)\n+                        ? emitTypedArrayChunk(request, id, \"g\", value, !1)\n                         : value instanceof BigInt64Array\n-                          ? emitTypedArrayChunk(request, id, \"M\", value)\n+                          ? emitTypedArrayChunk(request, id, \"M\", value, !1)\n                           : value instanceof BigUint64Array\n-                            ? emitTypedArrayChunk(request, id, \"m\", value)\n+                            ? emitTypedArrayChunk(request, id, \"m\", value, !1)\n                             : value instanceof DataView\n-                              ? emitTypedArrayChunk(request, id, \"V\", value)\n+                              ? emitTypedArrayChunk(request, id, \"V\", value, !1)\n                               : ((value = stringify(value, task.toJSON)),\n                                 emitModelChunk(request, task.id, value));\n }\n@@ -1869,11 +1870,17 @@ function retryTask(request, task) {\n       callOnAllReadyIfReady(request);\n     } catch (thrownValue) {\n       if (12 === request.status)\n-        request.abortableTasks.delete(task),\n+        if (\n+          (request.abortableTasks.delete(task),\n           (task.status = 0),\n-          21 === request.type\n-            ? haltTask(task, request)\n-            : abortTask(task, request, request.fatalError);\n+          21 === request.type)\n+        )\n+          haltTask(task), 3 === task.status && request.pendingChunks--;\n+        else {\n+          var errorId = request.fatalError;\n+          abortTask(task);\n+          finishAbortedTask(task, request, errorId);\n+        }\n       else {\n         var x =\n           thrownValue === SuspenseException\n@@ -1923,15 +1930,17 @@ function performWork(request) {\n       (currentRequest = prevRequest);\n   }\n }\n-function abortTask(task, request, errorId) {\n-  5 !== task.status &&\n-    ((task.status = 3),\n-    (errorId = serializeByValueID(errorId)),\n+function abortTask(task) {\n+  0 === task.status && (task.status = 3);\n+}\n+function finishAbortedTask(task, request, errorId) {\n+  3 === task.status &&\n+    ((errorId = serializeByValueID(errorId)),\n     (task = encodeReferenceChunk(request, task.id, errorId)),\n     request.completedErrorChunks.push(task));\n }\n-function haltTask(task, request) {\n-  5 !== task.status && ((task.status = 3), request.pendingChunks--);\n+function haltTask(task) {\n+  0 === task.status && (task.status = 3);\n }\n function flushCompletedChunks(request, destination) {\n   currentView = new Uint8Array(2048);\n@@ -2016,58 +2025,98 @@ function startFlowing(request, destination) {\n     }\n   }\n }\n-function abort(request, reason) {\n+function finishHalt(request, abortedTasks) {\n   try {\n-    11 >= request.status &&\n-      ((request.status = 12),\n-      request.cacheController.abort(reason),\n-      callOnAllReadyIfReady(request));\n-    var abortableTasks = request.abortableTasks;\n-    if (0 < abortableTasks.size) {\n-      if (21 === request.type)\n-        abortableTasks.forEach(function (task) {\n-          return haltTask(task, request);\n-        });\n-      else if (\n-        \"object\" === typeof reason &&\n-        null !== reason &&\n-        reason.$$typeof === REACT_POSTPONE_TYPE\n-      ) {\n-        logPostpone(request, reason.message, null);\n-        var errorId = request.nextChunkId++;\n-        request.fatalError = errorId;\n-        request.pendingChunks++;\n-        emitPostponeChunk(request, errorId, reason);\n-        abortableTasks.forEach(function (task) {\n-          return abortTask(task, request, errorId);\n-        });\n-      } else {\n-        var error =\n-            void 0 === reason\n-              ? Error(\"The render was aborted by the server without a reason.\")\n-              : \"object\" === typeof reason &&\n-                  null !== reason &&\n-                  \"function\" === typeof reason.then\n-                ? Error(\"The render was aborted by the server with a promise.\")\n-                : reason,\n-          digest = logRecoverableError(request, error, null),\n-          errorId$27 = request.nextChunkId++;\n-        request.fatalError = errorId$27;\n-        request.pendingChunks++;\n-        emitErrorChunk(request, errorId$27, digest, error, !1);\n-        abortableTasks.forEach(function (task) {\n-          return abortTask(task, request, errorId$27);\n-        });\n-      }\n-      abortableTasks.clear();\n-      callOnAllReadyIfReady(request);\n-    }\n+    abortedTasks.forEach(function (task) {\n+      3 === task.status && request.pendingChunks--;\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n     null !== request.destination &&\n       flushCompletedChunks(request, request.destination);\n-  } catch (error$28) {\n-    logRecoverableError(request, error$28, null), fatalError(request, error$28);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n   }\n }\n+function finishAbort(request, abortedTasks, errorId) {\n+  try {\n+    abortedTasks.forEach(function (task) {\n+      return finishAbortedTask(task, request, errorId);\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n+    null !== request.destination &&\n+      flushCompletedChunks(request, request.destination);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n+  }\n+}\n+function abort(request, reason) {\n+  if (!(11 < request.status))\n+    try {\n+      request.status = 12;\n+      request.cacheController.abort(reason);\n+      var abortableTasks = request.abortableTasks;\n+      if (0 < abortableTasks.size)\n+        if (21 === request.type)\n+          abortableTasks.forEach(function (task) {\n+            return haltTask(task, request);\n+          }),\n+            scheduleWork(function () {\n+              return finishHalt(request, abortableTasks);\n+            });\n+        else if (\n+          \"object\" === typeof reason &&\n+          null !== reason &&\n+          reason.$$typeof === REACT_POSTPONE_TYPE\n+        ) {\n+          logPostpone(request, reason.message, null);\n+          var errorId = request.nextChunkId++;\n+          request.fatalError = errorId;\n+          request.pendingChunks++;\n+          emitPostponeChunk(request, errorId, reason);\n+          abortableTasks.forEach(function (task) {\n+            return abortTask(task, request, errorId);\n+          });\n+          scheduleWork(function () {\n+            return finishAbort(request, abortableTasks, errorId);\n+          });\n+        } else {\n+          var error =\n+              void 0 === reason\n+                ? Error(\n+                    \"The render was aborted by the server without a reason.\"\n+                  )\n+                : \"object\" === typeof reason &&\n+                    null !== reason &&\n+                    \"function\" === typeof reason.then\n+                  ? Error(\n+                      \"The render was aborted by the server with a promise.\"\n+                    )\n+                  : reason,\n+            digest = logRecoverableError(request, error, null),\n+            errorId$27 = request.nextChunkId++;\n+          request.fatalError = errorId$27;\n+          request.pendingChunks++;\n+          emitErrorChunk(request, errorId$27, digest, error, !1);\n+          abortableTasks.forEach(function (task) {\n+            return abortTask(task, request, errorId$27);\n+          });\n+          scheduleWork(function () {\n+            return finishAbort(request, abortableTasks, errorId$27);\n+          });\n+        }\n+      else {\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      }\n+    } catch (error$28) {\n+      logRecoverableError(request, error$28, null),\n+        fatalError(request, error$28);\n+    }\n+}\n function resolveServerReference(bundlerConfig, id) {\n   var name = \"\",\n     resolvedModuleData = bundlerConfig[id];"
        },
        {
            "sha": "9b9ed03039f10f2aa73e5a58f9d96659b61f470e",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-server.edge.development.js",
            "status": "modified",
            "additions": 164,
            "deletions": 131,
            "changes": 295,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -659,9 +659,9 @@\n             suffixIdx = url.lastIndexOf(\"?\");\n           -1 < envIdx &&\n             -1 < suffixIdx &&\n-            (url = url.slice(envIdx + 1, suffixIdx));\n+            (url = decodeURI(url.slice(envIdx + 1, suffixIdx)));\n         }\n-        request(url, functionName) &&\n+        request(url, functionName, callsite[2], callsite[3]) &&\n           ((callsite = callsite.slice(0)),\n           (callsite[1] = url),\n           filteredStack.push(callsite));\n@@ -684,7 +684,7 @@\n               request,\n               parseStackTrace(Error(\"react-stack-top-frame\"), 1)\n             );\n-            request.pendingChunks++;\n+            request.pendingDebugChunks++;\n             var owner = resolveOwner(),\n               args = Array.from(arguments);\n             a: {\n@@ -715,9 +715,13 @@\n             null != owner && outlineComponentInfo(request, owner);\n             format = [methodName, stack, owner, env];\n             format.push.apply(format, args);\n-            args = serializeDebugModel(request, 500, format);\n+            args = serializeDebugModel(\n+              request,\n+              (null === request.deferredDebugObjects ? 500 : 10) + stack.length,\n+              format\n+            );\n             \"[\" !== args[0] &&\n-              (args = serializeDebugModel(request, 500, [\n+              (args = serializeDebugModel(request, 10 + stack.length, [\n                 methodName,\n                 stack,\n                 owner,\n@@ -865,6 +869,7 @@\n         void 0 === onPostpone ? defaultPostponeHandler : onPostpone;\n       this.onAllReady = onAllReady;\n       this.onFatalError = onFatalError;\n+      this.pendingDebugChunks = 0;\n       this.completedDebugChunks = [];\n       this.environmentName =\n         void 0 === environmentName\n@@ -887,6 +892,7 @@\n         : null;\n       type = this.timeOrigin = performance.now();\n       emitTimeOriginChunk(this, type + performance.timeOrigin);\n+      this.abortTime = -0;\n       model = createTask(\n         this,\n         model,\n@@ -965,7 +971,7 @@\n       return null;\n     }\n     function serializeDebugThenable(request, counter, thenable) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var id = request.nextChunkId++,\n         ref = \"$@\" + id.toString(16);\n       request.writtenDebugObjects.set(thenable, ref);\n@@ -976,15 +982,7 @@\n             ref\n           );\n         case \"rejected\":\n-          return (\n-            (thenable = thenable.reason),\n-            \"object\" === typeof thenable &&\n-            null !== thenable &&\n-            thenable.$$typeof === REACT_POSTPONE_TYPE\n-              ? emitPostponeChunk(request, id, thenable)\n-              : emitErrorChunk(request, id, \"\", thenable, !0),\n-            ref\n-          );\n+          return emitErrorChunk(request, id, \"\", thenable.reason, !0), ref;\n       }\n       if (request.status === ABORTING)\n         return emitDebugHaltChunk(request, id), ref;\n@@ -1003,11 +1001,7 @@\n             ((cancelled = !0),\n             request.status === ABORTING\n               ? emitDebugHaltChunk(request, id)\n-              : \"object\" === typeof reason &&\n-                  null !== reason &&\n-                  reason.$$typeof === REACT_POSTPONE_TYPE\n-                ? emitPostponeChunk(request, id, reason)\n-                : emitErrorChunk(request, id, \"\", reason, !0),\n+              : emitErrorChunk(request, id, \"\", reason, !0),\n             enqueueFlush(request));\n         }\n       );\n@@ -1063,8 +1057,10 @@\n             return (\n               request.abortableTasks.delete(newTask),\n               21 === request.type\n-                ? haltTask(newTask, request)\n-                : abortTask(newTask, request, request.fatalError),\n+                ? (haltTask(newTask), finishHaltedTask(newTask, request))\n+                : ((task = request.fatalError),\n+                  abortTask(newTask),\n+                  finishAbortedTask(newTask, request, task)),\n               newTask.id\n             );\n           \"string\" !== typeof thenable.status &&\n@@ -1137,8 +1133,7 @@\n           signal.removeEventListener(\"abort\", abortStream);\n           signal = signal.reason;\n           21 === request.type\n-            ? (haltTask(streamTask, request),\n-              request.abortableTasks.delete(streamTask))\n+            ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n             : (erroredTask(request, streamTask, signal), enqueueFlush(request));\n           reader.cancel(signal).then(error, error);\n         }\n@@ -1225,8 +1220,7 @@\n           signal.removeEventListener(\"abort\", abortIterable);\n           var reason = signal.reason;\n           21 === request.type\n-            ? (haltTask(streamTask, request),\n-              request.abortableTasks.delete(streamTask))\n+            ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n             : (erroredTask(request, streamTask, signal.reason),\n               enqueueFlush(request));\n           \"function\" === typeof iterator.throw &&\n@@ -1398,7 +1392,7 @@\n           var componentDebugID = task.id;\n           componentDebugInfo = Component.displayName || Component.name || \"\";\n           var componentEnv = (0, request.environmentName)();\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           componentDebugInfo = {\n             name: componentDebugInfo,\n             env: componentEnv,\n@@ -1832,7 +1826,7 @@\n     function serializeDeferredObject(request, value) {\n       var deferredDebugObjects = request.deferredDebugObjects;\n       return null !== deferredDebugObjects\n-        ? (request.pendingChunks++,\n+        ? (request.pendingDebugChunks++,\n           (request = request.nextChunkId++),\n           deferredDebugObjects.existing.set(value, request),\n           deferredDebugObjects.retained.set(request, value),\n@@ -1912,15 +1906,15 @@\n           request.bundlerConfig,\n           clientReference\n         );\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         var importId = request.nextChunkId++;\n         emitImportChunk(request, importId, clientReferenceMetadata, !0);\n         return parent[0] === REACT_ELEMENT_TYPE && \"1\" === parentPropertyName\n           ? serializeLazyID(importId)\n           : serializeByValueID(importId);\n       } catch (x) {\n         return (\n-          request.pendingChunks++,\n+          request.pendingDebugChunks++,\n           (parent = request.nextChunkId++),\n           (parentPropertyName = logRecoverableError(request, x, null)),\n           emitErrorChunk(request, parent, parentPropertyName, x, !0),\n@@ -1999,7 +1993,7 @@\n       return serializeByValueID(bufferId);\n     }\n     function serializeDebugTypedArray(request, tag, typedArray) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var bufferId = request.nextChunkId++;\n       emitTypedArrayChunk(request, bufferId, tag, typedArray, !0);\n       return serializeByValueID(bufferId);\n@@ -2025,8 +2019,9 @@\n         reader.cancel(reason).then(noop, noop);\n       }\n       var model = [blob.type],\n-        reader = blob.stream().getReader(),\n-        id = request.nextChunkId++;\n+        reader = blob.stream().getReader();\n+      request.pendingDebugChunks++;\n+      var id = request.nextChunkId++;\n       reader.read().then(progress).catch(error);\n       return \"$B\" + id.toString(16);\n     }\n@@ -2060,7 +2055,7 @@\n           signal.removeEventListener(\"abort\", abortBlob);\n           signal = signal.reason;\n           21 === request.type\n-            ? haltTask(newTask, request)\n+            ? haltTask(newTask)\n             : (erroredTask(request, newTask, signal), enqueueFlush(request));\n           reader.cancel(signal).then(error, error);\n         }\n@@ -2694,7 +2689,7 @@\n         );\n         void 0 !== tainted && throwTaintViolation(tainted.message);\n       }\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       tainted = new Uint8Array(\n         typedArray.buffer,\n         typedArray.byteOffset,\n@@ -2713,7 +2708,7 @@\n         throw Error(\n           \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n         );\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       text = stringToChunk(text);\n       var binaryLength = text.byteLength;\n       id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n@@ -2952,7 +2947,7 @@\n           if (0 >= counter.objectLimit)\n             return serializeDeferredObject(request, value);\n           counter.objectLimit--;\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           counter = request.nextChunkId++;\n           emitTextChunk(request, counter, value, !0);\n           return serializeByValueID(counter);\n@@ -2980,7 +2975,7 @@\n         ref = counter.get(value);\n         if (void 0 !== ref) return ref;\n         key = \"$E(\" + (Function.prototype.toString.call(value) + \")\");\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         ref = request.nextChunkId++;\n         key = encodeReferenceChunk(request, ref, key);\n         request.completedDebugChunks.push(key);\n@@ -3073,12 +3068,12 @@\n     }\n     function outlineDebugModel(request, counter, model) {\n       var id = request.nextChunkId++;\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       emitOutlinedDebugModelChunk(request, id, counter, model);\n       return id;\n     }\n     function emitTimeOriginChunk(request, timeOrigin) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       timeOrigin = stringToChunk(\":N\" + timeOrigin + \"\\n\");\n       request.completedDebugChunks.push(timeOrigin);\n     }\n@@ -3089,15 +3084,15 @@\n           markOperationEndTime(request$jscomp$1, task, info.time);\n         else if (\"string\" === typeof info.name)\n           outlineComponentInfo(request$jscomp$1, info),\n-            request$jscomp$1.pendingChunks++,\n+            request$jscomp$1.pendingDebugChunks++,\n             emitDebugChunk(request$jscomp$1, id, info);\n         else if (info.awaited) {\n           var ioInfo = info.awaited;\n           if (!(ioInfo.end <= request$jscomp$1.timeOrigin)) {\n             var request = request$jscomp$1,\n               ioInfo$jscomp$0 = ioInfo;\n             if (!request.writtenObjects.has(ioInfo$jscomp$0)) {\n-              request.pendingChunks++;\n+              request.pendingDebugChunks++;\n               var id$jscomp$0 = request.nextChunkId++,\n                 owner = ioInfo$jscomp$0.owner;\n               null != owner && outlineComponentInfo(request, owner);\n@@ -3120,10 +3115,10 @@\n                 start: ioInfo$jscomp$0.start - request$jscomp$0.timeOrigin,\n                 end: ioInfo$jscomp$0.end - request$jscomp$0.timeOrigin\n               };\n-              void 0 !== value && (debugIOInfo.value = value);\n               null != env && (debugIOInfo.env = env);\n               null != debugStack && (debugIOInfo.stack = debugStack);\n               null != owner && (debugIOInfo.owner = owner);\n+              void 0 !== value && (debugIOInfo.value = value);\n               value = serializeDebugModel(\n                 request$jscomp$0,\n                 objectLimit,\n@@ -3148,11 +3143,11 @@\n             null != info.env && (ioInfo.env = info.env);\n             null != info.owner && (ioInfo.owner = info.owner);\n             null != request && (ioInfo.stack = request);\n-            request$jscomp$1.pendingChunks++;\n+            request$jscomp$1.pendingDebugChunks++;\n             emitDebugChunk(request$jscomp$1, id, ioInfo);\n           }\n         } else\n-          request$jscomp$1.pendingChunks++,\n+          request$jscomp$1.pendingDebugChunks++,\n             emitDebugChunk(request$jscomp$1, id, info);\n       }\n     }\n@@ -3166,31 +3161,20 @@\n     }\n     function forwardDebugInfoFromAbortedTask(request, task) {\n       var model = task.model;\n-      if (\"object\" === typeof model && null !== model) {\n-        var debugInfo;\n-        (debugInfo = model._debugInfo) &&\n-          forwardDebugInfo(request, task, debugInfo);\n-        if (\n-          \"function\" !== typeof model.then &&\n-          model.$$typeof === REACT_LAZY_TYPE\n-        ) {\n-          request = model._payload;\n-          model = model._init;\n-          try {\n-            model(request);\n-          } catch (x) {}\n-        }\n-      }\n+      \"object\" === typeof model &&\n+        null !== model &&\n+        (model = model._debugInfo) &&\n+        forwardDebugInfo(request, task, model);\n     }\n     function emitTimingChunk(request, id, timestamp) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       timestamp -= request.timeOrigin;\n       id = id.toString(16) + ':D{\"time\":' + timestamp + \"}\\n\";\n       id = stringToChunk(id);\n       request.completedDebugChunks.push(id);\n     }\n     function markOperationEndTime(request, task, timestamp) {\n-      request.status !== ABORTING &&\n+      (request.status === ABORTING && timestamp > request.abortTime) ||\n         (timestamp > task.time\n           ? (emitTimingChunk(request, task.id, timestamp),\n             (task.time = timestamp))\n@@ -3281,7 +3265,7 @@\n           task.implicitSlot = !1;\n           var currentEnv = (0, request.environmentName)();\n           currentEnv !== task.environmentName &&\n-            (request.pendingChunks++,\n+            (request.pendingDebugChunks++,\n             emitDebugChunk(request, task.id, { env: currentEnv }));\n           task.timed && markOperationEndTime(request, task, performance.now());\n           if (\"object\" === typeof resolvedModel && null !== resolvedModel)\n@@ -3299,11 +3283,17 @@\n           callOnAllReadyIfReady(request);\n         } catch (thrownValue) {\n           if (request.status === ABORTING)\n-            request.abortableTasks.delete(task),\n+            if (\n+              (request.abortableTasks.delete(task),\n               (task.status = 0),\n-              21 === request.type\n-                ? haltTask(task, request)\n-                : abortTask(task, request, request.fatalError);\n+              21 === request.type)\n+            )\n+              haltTask(task), finishHaltedTask(task, request);\n+            else {\n+              var errorId = request.fatalError;\n+              abortTask(task);\n+              finishAbortedTask(task, request, errorId);\n+            }\n           else {\n             var x =\n               thrownValue === SuspenseException\n@@ -3357,19 +3347,23 @@\n           (currentRequest = prevRequest);\n       }\n     }\n-    function abortTask(task, request, errorId) {\n-      5 !== task.status &&\n-        ((task.status = 3),\n-        forwardDebugInfoFromAbortedTask(request, task),\n-        task.timed && markOperationEndTime(request, task, performance.now()),\n+    function abortTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishAbortedTask(task, request, errorId) {\n+      3 === task.status &&\n+        (forwardDebugInfoFromAbortedTask(request, task),\n+        task.timed && markOperationEndTime(request, task, request.abortTime),\n         (errorId = serializeByValueID(errorId)),\n         (task = encodeReferenceChunk(request, task.id, errorId)),\n         request.completedErrorChunks.push(task));\n     }\n-    function haltTask(task, request) {\n-      5 !== task.status &&\n-        ((task.status = 3),\n-        forwardDebugInfoFromAbortedTask(request, task),\n+    function haltTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishHaltedTask(task, request) {\n+      3 === task.status &&\n+        (forwardDebugInfoFromAbortedTask(request, task),\n         request.pendingChunks--);\n     }\n     function flushCompletedChunks(request, destination) {\n@@ -3401,7 +3395,7 @@\n         var debugChunks = request.completedDebugChunks;\n         for (i = 0; i < debugChunks.length; i++)\n           if (\n-            (request.pendingChunks--,\n+            (request.pendingDebugChunks--,\n             !writeChunkAndReturn(destination, debugChunks[i]))\n           ) {\n             request.destination = null;\n@@ -3442,6 +3436,7 @@\n             (writtenBytes = 0));\n       }\n       0 === request.pendingChunks &&\n+        0 === request.pendingDebugChunks &&\n         (cleanupTaintQueue(request),\n         request.status < ABORTING &&\n           request.cacheController.abort(\n@@ -3494,62 +3489,98 @@\n         }\n       }\n     }\n-    function abort(request, reason) {\n+    function finishHalt(request, abortedTasks) {\n       try {\n-        11 >= request.status &&\n-          ((request.status = ABORTING),\n-          request.cacheController.abort(reason),\n-          callOnAllReadyIfReady(request));\n-        var abortableTasks = request.abortableTasks;\n-        if (0 < abortableTasks.size) {\n-          if (21 === request.type)\n-            abortableTasks.forEach(function (task) {\n-              return haltTask(task, request);\n-            });\n-          else if (\n-            \"object\" === typeof reason &&\n-            null !== reason &&\n-            reason.$$typeof === REACT_POSTPONE_TYPE\n-          ) {\n-            logPostpone(request, reason.message, null);\n-            var errorId = request.nextChunkId++;\n-            request.fatalError = errorId;\n-            request.pendingChunks++;\n-            emitPostponeChunk(request, errorId, reason);\n-            abortableTasks.forEach(function (task) {\n-              return abortTask(task, request, errorId);\n-            });\n-          } else {\n-            var error =\n-                void 0 === reason\n-                  ? Error(\n-                      \"The render was aborted by the server without a reason.\"\n-                    )\n-                  : \"object\" === typeof reason &&\n-                      null !== reason &&\n-                      \"function\" === typeof reason.then\n+        abortedTasks.forEach(function (task) {\n+          return finishHaltedTask(task, request);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n+      }\n+    }\n+    function finishAbort(request, abortedTasks, errorId) {\n+      try {\n+        abortedTasks.forEach(function (task) {\n+          return finishAbortedTask(task, request, errorId);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n+      }\n+    }\n+    function abort(request, reason) {\n+      if (!(11 < request.status))\n+        try {\n+          request.status = ABORTING;\n+          request.abortTime = performance.now();\n+          request.cacheController.abort(reason);\n+          var abortableTasks = request.abortableTasks;\n+          if (0 < abortableTasks.size)\n+            if (21 === request.type)\n+              abortableTasks.forEach(function (task) {\n+                return haltTask(task, request);\n+              }),\n+                setTimeout(function () {\n+                  return finishHalt(request, abortableTasks);\n+                }, 0);\n+            else if (\n+              \"object\" === typeof reason &&\n+              null !== reason &&\n+              reason.$$typeof === REACT_POSTPONE_TYPE\n+            ) {\n+              logPostpone(request, reason.message, null);\n+              var errorId = request.nextChunkId++;\n+              request.fatalError = errorId;\n+              request.pendingChunks++;\n+              emitPostponeChunk(request, errorId, reason);\n+              abortableTasks.forEach(function (task) {\n+                return abortTask(task, request, errorId);\n+              });\n+              setTimeout(function () {\n+                return finishAbort(request, abortableTasks, errorId);\n+              }, 0);\n+            } else {\n+              var error =\n+                  void 0 === reason\n                     ? Error(\n-                        \"The render was aborted by the server with a promise.\"\n+                        \"The render was aborted by the server without a reason.\"\n                       )\n-                    : reason,\n-              digest = logRecoverableError(request, error, null),\n-              _errorId2 = request.nextChunkId++;\n-            request.fatalError = _errorId2;\n-            request.pendingChunks++;\n-            emitErrorChunk(request, _errorId2, digest, error, !1);\n-            abortableTasks.forEach(function (task) {\n-              return abortTask(task, request, _errorId2);\n-            });\n+                    : \"object\" === typeof reason &&\n+                        null !== reason &&\n+                        \"function\" === typeof reason.then\n+                      ? Error(\n+                          \"The render was aborted by the server with a promise.\"\n+                        )\n+                      : reason,\n+                digest = logRecoverableError(request, error, null),\n+                _errorId2 = request.nextChunkId++;\n+              request.fatalError = _errorId2;\n+              request.pendingChunks++;\n+              emitErrorChunk(request, _errorId2, digest, error, !1);\n+              abortableTasks.forEach(function (task) {\n+                return abortTask(task, request, _errorId2);\n+              });\n+              setTimeout(function () {\n+                return finishAbort(request, abortableTasks, _errorId2);\n+              }, 0);\n+            }\n+          else {\n+            var onAllReady = request.onAllReady;\n+            onAllReady();\n+            null !== request.destination &&\n+              flushCompletedChunks(request, request.destination);\n           }\n-          abortableTasks.clear();\n-          callOnAllReadyIfReady(request);\n+        } catch (error$2) {\n+          logRecoverableError(request, error$2, null),\n+            fatalError(request, error$2);\n         }\n-        null !== request.destination &&\n-          flushCompletedChunks(request, request.destination);\n-      } catch (error$2) {\n-        logRecoverableError(request, error$2, null),\n-          fatalError(request, error$2);\n-      }\n     }\n     function fromHex(str) {\n       return parseInt(str, 16);\n@@ -3561,7 +3592,7 @@\n           \"resolveDebugMessage/closeDebugChannel should not be called for a Request that wasn't kept alive. This is a bug in React.\"\n         );\n       deferredDebugObjects.retained.forEach(function (value, id) {\n-        request.pendingChunks--;\n+        request.pendingDebugChunks--;\n         deferredDebugObjects.retained.delete(id);\n         deferredDebugObjects.existing.delete(value);\n       });\n@@ -4338,7 +4369,7 @@\n                 var id = message[command],\n                   retainedValue = deferredDebugObjects.retained.get(id);\n                 void 0 !== retainedValue &&\n-                  (request.pendingChunks--,\n+                  (request.pendingDebugChunks--,\n                   deferredDebugObjects.retained.delete(id),\n                   deferredDebugObjects.existing.delete(retainedValue),\n                   enqueueFlush(request));\n@@ -4349,7 +4380,9 @@\n                 (id = message[command]),\n                   (retainedValue = deferredDebugObjects.retained.get(id)),\n                   void 0 !== retainedValue &&\n-                    (emitOutlinedDebugModelChunk(\n+                    (deferredDebugObjects.retained.delete(id),\n+                    deferredDebugObjects.existing.delete(retainedValue),\n+                    emitOutlinedDebugModelChunk(\n                       request,\n                       id,\n                       { objectLimit: 10 },"
        },
        {
            "sha": "e8c46fca3c739f0e42e1f01d8176b64d8abb2c4a",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-server.edge.production.js",
            "status": "modified",
            "additions": 139,
            "deletions": 90,
            "changes": 229,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -818,8 +818,11 @@ function serializeThenable(request, task, thenable) {\n         return (\n           request.abortableTasks.delete(newTask),\n           21 === request.type\n-            ? haltTask(newTask, request)\n-            : abortTask(newTask, request, request.fatalError),\n+            ? (haltTask(newTask),\n+              3 === newTask.status && request.pendingChunks--)\n+            : ((task = request.fatalError),\n+              abortTask(newTask),\n+              finishAbortedTask(newTask, request, task)),\n           newTask.id\n         );\n       \"string\" !== typeof thenable.status &&\n@@ -886,8 +889,7 @@ function serializeReadableStream(request, task, stream) {\n       signal.removeEventListener(\"abort\", abortStream);\n       signal = signal.reason;\n       21 === request.type\n-        ? (haltTask(streamTask, request),\n-          request.abortableTasks.delete(streamTask))\n+        ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n         : (erroredTask(request, streamTask, signal), enqueueFlush(request));\n       reader.cancel(signal).then(error, error);\n     }\n@@ -969,8 +971,7 @@ function serializeAsyncIterable(request, task, iterable, iterator) {\n       signal.removeEventListener(\"abort\", abortIterable);\n       var reason = signal.reason;\n       21 === request.type\n-        ? (haltTask(streamTask, request),\n-          request.abortableTasks.delete(streamTask))\n+        ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n         : (erroredTask(request, streamTask, signal.reason),\n           enqueueFlush(request));\n       \"function\" === typeof iterator.throw &&\n@@ -1345,7 +1346,7 @@ function outlineModel(request, value) {\n function serializeTypedArray(request, tag, typedArray) {\n   request.pendingChunks++;\n   var bufferId = request.nextChunkId++;\n-  emitTypedArrayChunk(request, bufferId, tag, typedArray);\n+  emitTypedArrayChunk(request, bufferId, tag, typedArray, !1);\n   return serializeByValueID(bufferId);\n }\n function serializeBlob(request, blob) {\n@@ -1372,7 +1373,7 @@ function serializeBlob(request, blob) {\n       signal.removeEventListener(\"abort\", abortBlob);\n       signal = signal.reason;\n       21 === request.type\n-        ? haltTask(newTask, request)\n+        ? haltTask(newTask)\n         : (erroredTask(request, newTask, signal), enqueueFlush(request));\n       reader.cancel(signal).then(error, error);\n     }\n@@ -1597,7 +1598,7 @@ function renderModelDestructive(\n       return (\n         request.pendingChunks++,\n         (task = request.nextChunkId++),\n-        emitTextChunk(request, task, value),\n+        emitTextChunk(request, task, value, !1),\n         serializeByValueID(task)\n       );\n     value = \"$\" === value[0] ? \"$\" + value : value;\n@@ -1758,7 +1759,7 @@ function emitModelChunk(request, id, json) {\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id);\n }\n-function emitTypedArrayChunk(request, id, tag, typedArray) {\n+function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n   if (TaintRegistryByteLengths.has(typedArray.byteLength)) {\n     var tainted = TaintRegistryValues.get(\n       String.fromCharCode.apply(\n@@ -1772,27 +1773,27 @@ function emitTypedArrayChunk(request, id, tag, typedArray) {\n     );\n     void 0 !== tainted && throwTaintViolation(tainted.message);\n   }\n-  request.pendingChunks++;\n-  tainted = new Uint8Array(\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n+  debug = new Uint8Array(\n     typedArray.buffer,\n     typedArray.byteOffset,\n     typedArray.byteLength\n   );\n-  typedArray = 2048 < typedArray.byteLength ? tainted.slice() : tainted;\n-  tainted = typedArray.byteLength;\n-  id = id.toString(16) + \":\" + tag + tainted.toString(16) + \",\";\n+  typedArray = 2048 < typedArray.byteLength ? debug.slice() : debug;\n+  debug = typedArray.byteLength;\n+  id = id.toString(16) + \":\" + tag + debug.toString(16) + \",\";\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id, typedArray);\n }\n-function emitTextChunk(request, id, text) {\n+function emitTextChunk(request, id, text, debug) {\n   if (null === byteLengthOfChunk)\n     throw Error(\n       \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n     );\n-  request.pendingChunks++;\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n   text = stringToChunk(text);\n-  var binaryLength = text.byteLength;\n-  id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n+  debug = text.byteLength;\n+  id = id.toString(16) + \":T\" + debug.toString(16) + \",\";\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id, text);\n }\n@@ -1801,33 +1802,33 @@ function emitChunk(request, task, value) {\n   \"string\" === typeof value && null !== byteLengthOfChunk\n     ? ((task = TaintRegistryValues.get(value)),\n       void 0 !== task && throwTaintViolation(task.message),\n-      emitTextChunk(request, id, value))\n+      emitTextChunk(request, id, value, !1))\n     : value instanceof ArrayBuffer\n-      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value))\n+      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value), !1)\n       : value instanceof Int8Array\n-        ? emitTypedArrayChunk(request, id, \"O\", value)\n+        ? emitTypedArrayChunk(request, id, \"O\", value, !1)\n         : value instanceof Uint8Array\n-          ? emitTypedArrayChunk(request, id, \"o\", value)\n+          ? emitTypedArrayChunk(request, id, \"o\", value, !1)\n           : value instanceof Uint8ClampedArray\n-            ? emitTypedArrayChunk(request, id, \"U\", value)\n+            ? emitTypedArrayChunk(request, id, \"U\", value, !1)\n             : value instanceof Int16Array\n-              ? emitTypedArrayChunk(request, id, \"S\", value)\n+              ? emitTypedArrayChunk(request, id, \"S\", value, !1)\n               : value instanceof Uint16Array\n-                ? emitTypedArrayChunk(request, id, \"s\", value)\n+                ? emitTypedArrayChunk(request, id, \"s\", value, !1)\n                 : value instanceof Int32Array\n-                  ? emitTypedArrayChunk(request, id, \"L\", value)\n+                  ? emitTypedArrayChunk(request, id, \"L\", value, !1)\n                   : value instanceof Uint32Array\n-                    ? emitTypedArrayChunk(request, id, \"l\", value)\n+                    ? emitTypedArrayChunk(request, id, \"l\", value, !1)\n                     : value instanceof Float32Array\n-                      ? emitTypedArrayChunk(request, id, \"G\", value)\n+                      ? emitTypedArrayChunk(request, id, \"G\", value, !1)\n                       : value instanceof Float64Array\n-                        ? emitTypedArrayChunk(request, id, \"g\", value)\n+                        ? emitTypedArrayChunk(request, id, \"g\", value, !1)\n                         : value instanceof BigInt64Array\n-                          ? emitTypedArrayChunk(request, id, \"M\", value)\n+                          ? emitTypedArrayChunk(request, id, \"M\", value, !1)\n                           : value instanceof BigUint64Array\n-                            ? emitTypedArrayChunk(request, id, \"m\", value)\n+                            ? emitTypedArrayChunk(request, id, \"m\", value, !1)\n                             : value instanceof DataView\n-                              ? emitTypedArrayChunk(request, id, \"V\", value)\n+                              ? emitTypedArrayChunk(request, id, \"V\", value, !1)\n                               : ((value = stringify(value, task.toJSON)),\n                                 emitModelChunk(request, task.id, value));\n }\n@@ -1872,11 +1873,17 @@ function retryTask(request, task) {\n       callOnAllReadyIfReady(request);\n     } catch (thrownValue) {\n       if (12 === request.status)\n-        request.abortableTasks.delete(task),\n+        if (\n+          (request.abortableTasks.delete(task),\n           (task.status = 0),\n-          21 === request.type\n-            ? haltTask(task, request)\n-            : abortTask(task, request, request.fatalError);\n+          21 === request.type)\n+        )\n+          haltTask(task), 3 === task.status && request.pendingChunks--;\n+        else {\n+          var errorId = request.fatalError;\n+          abortTask(task);\n+          finishAbortedTask(task, request, errorId);\n+        }\n       else {\n         var x =\n           thrownValue === SuspenseException\n@@ -1926,15 +1933,17 @@ function performWork(request) {\n       (currentRequest = prevRequest);\n   }\n }\n-function abortTask(task, request, errorId) {\n-  5 !== task.status &&\n-    ((task.status = 3),\n-    (errorId = serializeByValueID(errorId)),\n+function abortTask(task) {\n+  0 === task.status && (task.status = 3);\n+}\n+function finishAbortedTask(task, request, errorId) {\n+  3 === task.status &&\n+    ((errorId = serializeByValueID(errorId)),\n     (task = encodeReferenceChunk(request, task.id, errorId)),\n     request.completedErrorChunks.push(task));\n }\n-function haltTask(task, request) {\n-  5 !== task.status && ((task.status = 3), request.pendingChunks--);\n+function haltTask(task) {\n+  0 === task.status && (task.status = 3);\n }\n function flushCompletedChunks(request, destination) {\n   currentView = new Uint8Array(2048);\n@@ -2023,58 +2032,98 @@ function startFlowing(request, destination) {\n     }\n   }\n }\n-function abort(request, reason) {\n+function finishHalt(request, abortedTasks) {\n   try {\n-    11 >= request.status &&\n-      ((request.status = 12),\n-      request.cacheController.abort(reason),\n-      callOnAllReadyIfReady(request));\n-    var abortableTasks = request.abortableTasks;\n-    if (0 < abortableTasks.size) {\n-      if (21 === request.type)\n-        abortableTasks.forEach(function (task) {\n-          return haltTask(task, request);\n-        });\n-      else if (\n-        \"object\" === typeof reason &&\n-        null !== reason &&\n-        reason.$$typeof === REACT_POSTPONE_TYPE\n-      ) {\n-        logPostpone(request, reason.message, null);\n-        var errorId = request.nextChunkId++;\n-        request.fatalError = errorId;\n-        request.pendingChunks++;\n-        emitPostponeChunk(request, errorId, reason);\n-        abortableTasks.forEach(function (task) {\n-          return abortTask(task, request, errorId);\n-        });\n-      } else {\n-        var error =\n-            void 0 === reason\n-              ? Error(\"The render was aborted by the server without a reason.\")\n-              : \"object\" === typeof reason &&\n-                  null !== reason &&\n-                  \"function\" === typeof reason.then\n-                ? Error(\"The render was aborted by the server with a promise.\")\n-                : reason,\n-          digest = logRecoverableError(request, error, null),\n-          errorId$27 = request.nextChunkId++;\n-        request.fatalError = errorId$27;\n-        request.pendingChunks++;\n-        emitErrorChunk(request, errorId$27, digest, error, !1);\n-        abortableTasks.forEach(function (task) {\n-          return abortTask(task, request, errorId$27);\n-        });\n-      }\n-      abortableTasks.clear();\n-      callOnAllReadyIfReady(request);\n-    }\n+    abortedTasks.forEach(function (task) {\n+      3 === task.status && request.pendingChunks--;\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n     null !== request.destination &&\n       flushCompletedChunks(request, request.destination);\n-  } catch (error$28) {\n-    logRecoverableError(request, error$28, null), fatalError(request, error$28);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n   }\n }\n+function finishAbort(request, abortedTasks, errorId) {\n+  try {\n+    abortedTasks.forEach(function (task) {\n+      return finishAbortedTask(task, request, errorId);\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n+    null !== request.destination &&\n+      flushCompletedChunks(request, request.destination);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n+  }\n+}\n+function abort(request, reason) {\n+  if (!(11 < request.status))\n+    try {\n+      request.status = 12;\n+      request.cacheController.abort(reason);\n+      var abortableTasks = request.abortableTasks;\n+      if (0 < abortableTasks.size)\n+        if (21 === request.type)\n+          abortableTasks.forEach(function (task) {\n+            return haltTask(task, request);\n+          }),\n+            setTimeout(function () {\n+              return finishHalt(request, abortableTasks);\n+            }, 0);\n+        else if (\n+          \"object\" === typeof reason &&\n+          null !== reason &&\n+          reason.$$typeof === REACT_POSTPONE_TYPE\n+        ) {\n+          logPostpone(request, reason.message, null);\n+          var errorId = request.nextChunkId++;\n+          request.fatalError = errorId;\n+          request.pendingChunks++;\n+          emitPostponeChunk(request, errorId, reason);\n+          abortableTasks.forEach(function (task) {\n+            return abortTask(task, request, errorId);\n+          });\n+          setTimeout(function () {\n+            return finishAbort(request, abortableTasks, errorId);\n+          }, 0);\n+        } else {\n+          var error =\n+              void 0 === reason\n+                ? Error(\n+                    \"The render was aborted by the server without a reason.\"\n+                  )\n+                : \"object\" === typeof reason &&\n+                    null !== reason &&\n+                    \"function\" === typeof reason.then\n+                  ? Error(\n+                      \"The render was aborted by the server with a promise.\"\n+                    )\n+                  : reason,\n+            digest = logRecoverableError(request, error, null),\n+            errorId$27 = request.nextChunkId++;\n+          request.fatalError = errorId$27;\n+          request.pendingChunks++;\n+          emitErrorChunk(request, errorId$27, digest, error, !1);\n+          abortableTasks.forEach(function (task) {\n+            return abortTask(task, request, errorId$27);\n+          });\n+          setTimeout(function () {\n+            return finishAbort(request, abortableTasks, errorId$27);\n+          }, 0);\n+        }\n+      else {\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      }\n+    } catch (error$28) {\n+      logRecoverableError(request, error$28, null),\n+        fatalError(request, error$28);\n+    }\n+}\n function resolveServerReference(bundlerConfig, id) {\n   var name = \"\",\n     resolvedModuleData = bundlerConfig[id];"
        },
        {
            "sha": "dfddd06ce1ada9d86e928b06c73afbec285a26b7",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-server.node.development.js",
            "status": "modified",
            "additions": 355,
            "deletions": 249,
            "changes": 604,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -690,7 +690,7 @@\n         var envIdx = url.indexOf(\"/\", 12),\n           suffixIdx = url.lastIndexOf(\"?\");\n         if (-1 < envIdx && -1 < suffixIdx)\n-          return url.slice(envIdx + 1, suffixIdx);\n+          return decodeURI(url.slice(envIdx + 1, suffixIdx));\n       }\n       return url;\n     }\n@@ -700,13 +700,39 @@\n         var callsite = stack[i],\n           functionName = callsite[0],\n           url = devirtualizeURL(callsite[1]);\n-        request(url, functionName) &&\n+        request(url, functionName, callsite[2], callsite[3]) &&\n           ((callsite = callsite.slice(0)),\n           (callsite[1] = url),\n           filteredStack.push(callsite));\n       }\n       return filteredStack;\n     }\n+    function hasUnfilteredFrame(request, stack) {\n+      request = request.filterStackFrame;\n+      for (var i = 0; i < stack.length; i++) {\n+        var callsite = stack[i],\n+          functionName = callsite[0],\n+          url = devirtualizeURL(callsite[1]);\n+        if (request(url, functionName, callsite[2], callsite[3])) return !0;\n+      }\n+      return !1;\n+    }\n+    function isAwaitInUserspace(request, stack) {\n+      for (\n+        var firstFrame = 0;\n+        stack.length > firstFrame && \"Promise.then\" === stack[firstFrame][0];\n+\n+      )\n+        firstFrame++;\n+      if (stack.length > firstFrame) {\n+        request = request.filterStackFrame;\n+        stack = stack[firstFrame];\n+        firstFrame = stack[0];\n+        var url = devirtualizeURL(stack[1]);\n+        return request(url, firstFrame, stack[2], stack[3]);\n+      }\n+      return !1;\n+    }\n     function patchConsole(consoleInst, methodName) {\n       var descriptor = Object.getOwnPropertyDescriptor(consoleInst, methodName);\n       if (\n@@ -723,7 +749,7 @@\n               request,\n               parseStackTrace(Error(\"react-stack-top-frame\"), 1)\n             );\n-            request.pendingChunks++;\n+            request.pendingDebugChunks++;\n             var owner = resolveOwner(),\n               args = Array.from(arguments);\n             a: {\n@@ -754,9 +780,13 @@\n             null != owner && outlineComponentInfo(request, owner);\n             format = [methodName, stack, owner, env];\n             format.push.apply(format, args);\n-            args = serializeDebugModel(request, 500, format);\n+            args = serializeDebugModel(\n+              request,\n+              (null === request.deferredDebugObjects ? 500 : 10) + stack.length,\n+              format\n+            );\n             \"[\" !== args[0] &&\n-              (args = serializeDebugModel(request, 500, [\n+              (args = serializeDebugModel(request, 10 + stack.length, [\n                 methodName,\n                 stack,\n                 owner,\n@@ -903,6 +933,7 @@\n         void 0 === onPostpone ? defaultPostponeHandler : onPostpone;\n       this.onAllReady = onAllReady;\n       this.onFatalError = onFatalError;\n+      this.pendingDebugChunks = 0;\n       this.completedDebugChunks = [];\n       this.environmentName =\n         void 0 === environmentName\n@@ -925,6 +956,7 @@\n         : null;\n       type = this.timeOrigin = performance.now();\n       emitTimeOriginChunk(this, type + performance.timeOrigin);\n+      this.abortTime = -0;\n       model = createTask(\n         this,\n         model,\n@@ -1000,7 +1032,7 @@\n       return store ? store : null;\n     }\n     function serializeDebugThenable(request, counter, thenable) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var id = request.nextChunkId++,\n         ref = \"$@\" + id.toString(16);\n       request.writtenDebugObjects.set(thenable, ref);\n@@ -1011,15 +1043,7 @@\n             ref\n           );\n         case \"rejected\":\n-          return (\n-            (thenable = thenable.reason),\n-            \"object\" === typeof thenable &&\n-            null !== thenable &&\n-            thenable.$$typeof === REACT_POSTPONE_TYPE\n-              ? emitPostponeChunk(request, id, thenable)\n-              : emitErrorChunk(request, id, \"\", thenable, !0),\n-            ref\n-          );\n+          return emitErrorChunk(request, id, \"\", thenable.reason, !0), ref;\n       }\n       if (request.status === ABORTING)\n         return emitDebugHaltChunk(request, id), ref;\n@@ -1038,11 +1062,7 @@\n             ((cancelled = !0),\n             request.status === ABORTING\n               ? emitDebugHaltChunk(request, id)\n-              : \"object\" === typeof reason &&\n-                  null !== reason &&\n-                  reason.$$typeof === REACT_POSTPONE_TYPE\n-                ? emitPostponeChunk(request, id, reason)\n-                : emitErrorChunk(request, id, \"\", reason, !0),\n+              : emitErrorChunk(request, id, \"\", reason, !0),\n             enqueueFlush(request));\n         }\n       );\n@@ -1098,8 +1118,10 @@\n             return (\n               request.abortableTasks.delete(newTask),\n               21 === request.type\n-                ? haltTask(newTask, request)\n-                : abortTask(newTask, request, request.fatalError),\n+                ? (haltTask(newTask), finishHaltedTask(newTask, request))\n+                : ((task = request.fatalError),\n+                  abortTask(newTask),\n+                  finishAbortedTask(newTask, request, task)),\n               newTask.id\n             );\n           \"string\" !== typeof thenable.status &&\n@@ -1172,8 +1194,7 @@\n           signal.removeEventListener(\"abort\", abortStream);\n           signal = signal.reason;\n           21 === request.type\n-            ? (haltTask(streamTask, request),\n-              request.abortableTasks.delete(streamTask))\n+            ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n             : (erroredTask(request, streamTask, signal), enqueueFlush(request));\n           reader.cancel(signal).then(error, error);\n         }\n@@ -1260,8 +1281,7 @@\n           signal.removeEventListener(\"abort\", abortIterable);\n           var reason = signal.reason;\n           21 === request.type\n-            ? (haltTask(streamTask, request),\n-              request.abortableTasks.delete(streamTask))\n+            ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n             : (erroredTask(request, streamTask, signal.reason),\n               enqueueFlush(request));\n           \"function\" === typeof iterator.throw &&\n@@ -1432,7 +1452,7 @@\n           var componentDebugID = task.id;\n           componentDebugInfo = Component.displayName || Component.name || \"\";\n           var componentEnv = (0, request.environmentName)();\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           componentDebugInfo = {\n             name: componentDebugInfo,\n             env: componentEnv,\n@@ -1755,83 +1775,91 @@\n     function visitAsyncNode(request, task, node, visited, cutOff) {\n       if (visited.has(node)) return null;\n       visited.add(node);\n-      null !== node.previous &&\n+      var previousIONode = null;\n+      if (\n+        null !== node.previous &&\n         node.end > request.timeOrigin &&\n-        visitAsyncNode(request, task, node.previous, visited, cutOff);\n+        ((previousIONode = visitAsyncNode(\n+          request,\n+          task,\n+          node.previous,\n+          visited,\n+          cutOff\n+        )),\n+        void 0 === previousIONode)\n+      )\n+        return;\n       switch (node.tag) {\n         case 0:\n           return node;\n         case 3:\n-          return null;\n+          return previousIONode;\n         case 1:\n-          if (node.end <= request.timeOrigin) return null;\n-          var awaited = node.awaited,\n-            match = null;\n-          null !== awaited &&\n-            ((awaited = visitAsyncNode(\n-              request,\n-              task,\n-              awaited,\n-              visited,\n-              cutOff\n-            )),\n-            null !== awaited &&\n-              (match =\n-                1 === awaited.tag\n-                  ? awaited\n-                  : 0 === filterStackTrace(request, node.stack).length\n-                    ? awaited\n-                    : node));\n+          if (node.end <= request.timeOrigin) return previousIONode;\n+          var awaited = node.awaited;\n+          if (null !== awaited) {\n+            cutOff = visitAsyncNode(request, task, awaited, visited, cutOff);\n+            if (void 0 === cutOff) break;\n+            null !== cutOff\n+              ? (previousIONode =\n+                  1 === cutOff.tag\n+                    ? cutOff\n+                    : null !== node.stack &&\n+                        hasUnfilteredFrame(request, node.stack)\n+                      ? node\n+                      : cutOff)\n+              : request.status === ABORTING &&\n+                node.start < request.abortTime &&\n+                node.end > request.abortTime &&\n+                null !== node.stack &&\n+                hasUnfilteredFrame(request, node.stack) &&\n+                (previousIONode = node);\n+          }\n           node = node.promise.deref();\n           void 0 !== node &&\n             ((node = node._debugInfo),\n             null == node ||\n               visited.has(node) ||\n               (visited.add(node), forwardDebugInfo(request, task, node)));\n-          return match;\n+          return previousIONode;\n         case 4:\n-          return null;\n+          return previousIONode;\n         case 2:\n-          var _awaited = node.awaited;\n-          match = null;\n-          if (\n-            null !== _awaited &&\n-            ((awaited = visitAsyncNode(\n+          awaited = node.awaited;\n+          if (null !== awaited) {\n+            var _ioNode = visitAsyncNode(\n               request,\n               task,\n-              _awaited,\n+              awaited,\n               visited,\n               cutOff\n-            )),\n-            null !== awaited)\n-          ) {\n-            var startTime = node.start,\n-              endTime = node.end;\n-            if (endTime <= request.timeOrigin) return null;\n-            if (startTime < cutOff) match = awaited;\n-            else {\n-              cutOff = !1;\n-              var fullStack = node.stack;\n-              if (0 < fullStack.length) {\n-                cutOff = request.filterStackFrame;\n-                var callsite = fullStack[0];\n-                fullStack = callsite[0];\n-                callsite = devirtualizeURL(callsite[1]);\n-                cutOff = cutOff(callsite, fullStack);\n-              }\n-              cutOff\n-                ? (serializeIONode(request, awaited, _awaited.promise),\n-                  (_awaited = (0, request.environmentName)()),\n-                  advanceTaskTime(request, task, startTime),\n-                  request.pendingChunks++,\n-                  emitDebugChunk(request, task.id, {\n-                    awaited: awaited,\n-                    env: _awaited,\n-                    owner: node.owner,\n-                    stack: filterStackTrace(request, node.stack)\n-                  }),\n-                  markOperationEndTime(request, task, endTime))\n-                : (match = awaited);\n+            );\n+            if (void 0 === _ioNode) break;\n+            if (null !== _ioNode) {\n+              var startTime = node.start,\n+                endTime = node.end;\n+              if (endTime <= request.timeOrigin) return null;\n+              startTime < cutOff\n+                ? (previousIONode = _ioNode)\n+                : null !== node.stack && isAwaitInUserspace(request, node.stack)\n+                  ? (request.status === ABORTING &&\n+                      startTime > request.abortTime) ||\n+                    (serializeIONode(request, _ioNode, awaited.promise),\n+                    (cutOff = (0, request.environmentName)()),\n+                    advanceTaskTime(request, task, startTime),\n+                    request.pendingDebugChunks++,\n+                    emitDebugChunk(request, task.id, {\n+                      awaited: _ioNode,\n+                      env: cutOff,\n+                      owner: node.owner,\n+                      stack:\n+                        null === node.stack\n+                          ? null\n+                          : filterStackTrace(request, node.stack)\n+                    }),\n+                    markOperationEndTime(request, task, endTime),\n+                    request.status === ABORTING && (previousIONode = void 0))\n+                  : (previousIONode = _ioNode);\n             }\n           }\n           node = node.promise.deref();\n@@ -1840,7 +1868,7 @@\n             null == node ||\n               visited.has(node) ||\n               (visited.add(node), forwardDebugInfo(request, task, node)));\n-          return match;\n+          return previousIONode;\n         default:\n           throw Error(\"Unknown AsyncSequence tag. This is a bug in React.\");\n       }\n@@ -1856,9 +1884,10 @@\n       var visited = new Set();\n       alreadyForwardedDebugInfo && visited.add(alreadyForwardedDebugInfo);\n       node = visitAsyncNode(request, task, node, visited, task.time);\n-      null !== node &&\n+      void 0 !== node &&\n+        null !== node &&\n         (serializeIONode(request, node, node.promise),\n-        request.pendingChunks++,\n+        request.pendingDebugChunks++,\n         (alreadyForwardedDebugInfo = (0, request.environmentName)()),\n         (alreadyForwardedDebugInfo = {\n           awaited: node,\n@@ -1961,7 +1990,7 @@\n     function serializeDeferredObject(request, value) {\n       var deferredDebugObjects = request.deferredDebugObjects;\n       return null !== deferredDebugObjects\n-        ? (request.pendingChunks++,\n+        ? (request.pendingDebugChunks++,\n           (request = request.nextChunkId++),\n           deferredDebugObjects.existing.set(value, request),\n           deferredDebugObjects.retained.set(request, value),\n@@ -2040,15 +2069,15 @@\n           request.bundlerConfig,\n           clientReference\n         );\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         var importId = request.nextChunkId++;\n         emitImportChunk(request, importId, clientReferenceMetadata, !0);\n         return parent[0] === REACT_ELEMENT_TYPE && \"1\" === parentPropertyName\n           ? serializeLazyID(importId)\n           : serializeByValueID(importId);\n       } catch (x) {\n         return (\n-          request.pendingChunks++,\n+          request.pendingDebugChunks++,\n           (parent = request.nextChunkId++),\n           (parentPropertyName = logRecoverableError(request, x, null)),\n           emitErrorChunk(request, parent, parentPropertyName, x, !0),\n@@ -2127,7 +2156,7 @@\n       return serializeByValueID(bufferId);\n     }\n     function serializeDebugTypedArray(request, tag, typedArray) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var bufferId = request.nextChunkId++;\n       emitTypedArrayChunk(request, bufferId, tag, typedArray, !0);\n       return serializeByValueID(bufferId);\n@@ -2153,8 +2182,9 @@\n         reader.cancel(reason).then(noop, noop);\n       }\n       var model = [blob.type],\n-        reader = blob.stream().getReader(),\n-        id = request.nextChunkId++;\n+        reader = blob.stream().getReader();\n+      request.pendingDebugChunks++;\n+      var id = request.nextChunkId++;\n       reader.read().then(progress).catch(error);\n       return \"$B\" + id.toString(16);\n     }\n@@ -2188,7 +2218,7 @@\n           signal.removeEventListener(\"abort\", abortBlob);\n           signal = signal.reason;\n           21 === request.type\n-            ? haltTask(newTask, request)\n+            ? haltTask(newTask)\n             : (erroredTask(request, newTask, signal), enqueueFlush(request));\n           reader.cancel(signal).then(error, error);\n         }\n@@ -2807,10 +2837,10 @@\n         start: start - request.timeOrigin,\n         end: end - request.timeOrigin\n       };\n-      void 0 !== value && (name.value = value);\n       null != env && (name.env = env);\n       null != stack && (name.stack = stack);\n       null != owner && (name.owner = owner);\n+      void 0 !== value && (name.value = value);\n       value = serializeDebugModel(request, objectLimit, name);\n       id = id.toString(16) + \":J\" + value + \"\\n\";\n       request.completedDebugChunks.push(id);\n@@ -2832,19 +2862,22 @@\n             i++\n           ) {\n             var callsite = name[i],\n-              functionName = callsite[0];\n-            callsite = devirtualizeURL(callsite[1]);\n-            if (filterStackFrame(callsite, functionName)) {\n-              if (\"\" === bestMatch) {\n-                name = functionName;\n-                break a;\n-              }\n-              name = bestMatch;\n-              break a;\n-            } else\n+              functionName = callsite[0],\n+              url = devirtualizeURL(callsite[1]),\n+              lineNumber = callsite[2];\n+            callsite = callsite[3];\n+            if (\n               \"new Promise\" !== functionName &&\n-                \"node:internal/async_hooks\" !== callsite &&\n-                (bestMatch = functionName);\n+              \"node:internal/async_hooks\" !== url\n+            )\n+              if (filterStackFrame(url, functionName, lineNumber, callsite)) {\n+                if (\"\" === bestMatch) {\n+                  name = functionName;\n+                  break a;\n+                }\n+                name = bestMatch;\n+                break a;\n+              } else bestMatch = functionName;\n           }\n           name = \"\";\n         }\n@@ -2857,8 +2890,8 @@\n       filterStackFrame = void 0;\n       null !== promiseRef && (filterStackFrame = promiseRef.deref());\n       promiseRef = (0, request.environmentName)();\n-      i = 3 === ioNode.tag ? performance.now() : ioNode.end;\n-      request.pendingChunks++;\n+      i = 3 === ioNode.tag ? request.abortTime : ioNode.end;\n+      request.pendingDebugChunks++;\n       functionName = request.nextChunkId++;\n       emitIOInfoChunk(\n         request,\n@@ -2889,7 +2922,7 @@\n         );\n         void 0 !== tainted && throwTaintViolation(tainted.message);\n       }\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       typedArray = new Uint8Array(\n         typedArray.buffer,\n         typedArray.byteOffset,\n@@ -2906,7 +2939,7 @@\n         throw Error(\n           \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n         );\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       var binaryLength = byteLengthOfChunk(text);\n       id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n       debug\n@@ -3143,7 +3176,7 @@\n           if (0 >= counter.objectLimit)\n             return serializeDeferredObject(request, value);\n           counter.objectLimit--;\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           counter = request.nextChunkId++;\n           emitTextChunk(request, counter, value, !0);\n           return serializeByValueID(counter);\n@@ -3171,7 +3204,7 @@\n         ref = counter.get(value);\n         if (void 0 !== ref) return ref;\n         key = \"$E(\" + (Function.prototype.toString.call(value) + \")\");\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         ref = request.nextChunkId++;\n         key = encodeReferenceChunk(request, ref, key);\n         request.completedDebugChunks.push(key);\n@@ -3263,12 +3296,12 @@\n     }\n     function outlineDebugModel(request, counter, model) {\n       var id = request.nextChunkId++;\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       emitOutlinedDebugModelChunk(request, id, counter, model);\n       return id;\n     }\n     function emitTimeOriginChunk(request, timeOrigin) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       request.completedDebugChunks.push(\":N\" + timeOrigin + \"\\n\");\n     }\n     function forwardDebugInfo(request$jscomp$0, task, debugInfo) {\n@@ -3278,15 +3311,15 @@\n           markOperationEndTime(request$jscomp$0, task, info.time);\n         else if (\"string\" === typeof info.name)\n           outlineComponentInfo(request$jscomp$0, info),\n-            request$jscomp$0.pendingChunks++,\n+            request$jscomp$0.pendingDebugChunks++,\n             emitDebugChunk(request$jscomp$0, id, info);\n         else if (info.awaited) {\n           var ioInfo = info.awaited;\n           if (!(ioInfo.end <= request$jscomp$0.timeOrigin)) {\n             var request = request$jscomp$0,\n               ioInfo$jscomp$0 = ioInfo;\n             if (!request.writtenObjects.has(ioInfo$jscomp$0)) {\n-              request.pendingChunks++;\n+              request.pendingDebugChunks++;\n               var id$jscomp$0 = request.nextChunkId++,\n                 owner = ioInfo$jscomp$0.owner;\n               null != owner && outlineComponentInfo(request, owner);\n@@ -3325,11 +3358,11 @@\n             null != info.env && (ioInfo.env = info.env);\n             null != info.owner && (ioInfo.owner = info.owner);\n             null != debugStack && (ioInfo.stack = debugStack);\n-            request$jscomp$0.pendingChunks++;\n+            request$jscomp$0.pendingDebugChunks++;\n             emitDebugChunk(request$jscomp$0, id, ioInfo);\n           }\n         } else\n-          request$jscomp$0.pendingChunks++,\n+          request$jscomp$0.pendingDebugChunks++,\n             emitDebugChunk(request$jscomp$0, id, info);\n       }\n     }\n@@ -3362,42 +3395,34 @@\n         (debugInfo = model._debugInfo) &&\n           forwardDebugInfo(request, task, debugInfo);\n         var thenable = null;\n-        if (\"function\" === typeof model.then) thenable = model;\n-        else if (model.$$typeof === REACT_LAZY_TYPE) {\n-          var payload = model._payload;\n-          model = model._init;\n-          try {\n-            model(payload);\n-          } catch (x) {\n-            \"object\" === typeof x &&\n-              null !== x &&\n-              \"function\" === typeof x.then &&\n-              (thenable = x);\n-          }\n-        }\n+        \"function\" === typeof model.then\n+          ? (thenable = model)\n+          : model.$$typeof === REACT_LAZY_TYPE &&\n+            ((model = model._payload),\n+            \"function\" === typeof model.then && (thenable = model));\n         if (\n           null !== thenable &&\n-          ((payload = getAsyncSequenceFromPromise(thenable)), null !== payload)\n+          ((model = getAsyncSequenceFromPromise(thenable)), null !== model)\n         ) {\n           for (\n-            thenable = payload;\n+            thenable = model;\n             4 === thenable.tag && null !== thenable.awaited;\n \n           )\n             thenable = thenable.awaited;\n           3 === thenable.tag\n             ? (serializeIONode(request, thenable, null),\n-              request.pendingChunks++,\n+              request.pendingDebugChunks++,\n               (debugInfo = (0, request.environmentName)()),\n               (debugInfo = { awaited: thenable, env: debugInfo }),\n               advanceTaskTime(request, task, task.time),\n               emitDebugChunk(request, task.id, debugInfo))\n-            : emitAsyncSequence(request, task, payload, debugInfo, null, null);\n+            : emitAsyncSequence(request, task, model, debugInfo, null, null);\n         }\n       }\n     }\n     function emitTimingChunk(request, id, timestamp) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       timestamp -= request.timeOrigin;\n       id = id.toString(16) + ':D{\"time\":' + timestamp + \"}\\n\";\n       request.completedDebugChunks.push(id);\n@@ -3410,7 +3435,7 @@\n       task.timed = !0;\n     }\n     function markOperationEndTime(request, task, timestamp) {\n-      request.status !== ABORTING &&\n+      (request.status === ABORTING && timestamp > request.abortTime) ||\n         (timestamp > task.time\n           ? (emitTimingChunk(request, task.id, timestamp),\n             (task.time = timestamp))\n@@ -3506,7 +3531,7 @@\n           task.implicitSlot = !1;\n           var currentEnv = (0, request.environmentName)();\n           currentEnv !== task.environmentName &&\n-            (request.pendingChunks++,\n+            (request.pendingDebugChunks++,\n             emitDebugChunk(request, task.id, { env: currentEnv }));\n           task.timed && markOperationEndTime(request, task, performance.now());\n           if (\"object\" === typeof resolvedModel && null !== resolvedModel)\n@@ -3525,11 +3550,17 @@\n           callOnAllReadyIfReady(request);\n         } catch (thrownValue) {\n           if (request.status === ABORTING)\n-            request.abortableTasks.delete(task),\n+            if (\n+              (request.abortableTasks.delete(task),\n               (task.status = 0),\n-              21 === request.type\n-                ? haltTask(task, request)\n-                : abortTask(task, request, request.fatalError);\n+              21 === request.type)\n+            )\n+              haltTask(task), finishHaltedTask(task, request);\n+            else {\n+              var errorId = request.fatalError;\n+              abortTask(task);\n+              finishAbortedTask(task, request, errorId);\n+            }\n           else {\n             var x =\n               thrownValue === SuspenseException\n@@ -3584,19 +3615,23 @@\n           (currentRequest = prevRequest);\n       }\n     }\n-    function abortTask(task, request, errorId) {\n-      5 !== task.status &&\n-        ((task.status = 3),\n-        forwardDebugInfoFromAbortedTask(request, task),\n-        task.timed && markOperationEndTime(request, task, performance.now()),\n+    function abortTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishAbortedTask(task, request, errorId) {\n+      3 === task.status &&\n+        (forwardDebugInfoFromAbortedTask(request, task),\n+        task.timed && markOperationEndTime(request, task, request.abortTime),\n         (errorId = serializeByValueID(errorId)),\n         (task = encodeReferenceChunk(request, task.id, errorId)),\n         request.completedErrorChunks.push(task));\n     }\n-    function haltTask(task, request) {\n-      5 !== task.status &&\n-        ((task.status = 3),\n-        forwardDebugInfoFromAbortedTask(request, task),\n+    function haltTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishHaltedTask(task, request) {\n+      3 === task.status &&\n+        (forwardDebugInfoFromAbortedTask(request, task),\n         request.pendingChunks--);\n     }\n     function flushCompletedChunks(request, destination) {\n@@ -3629,7 +3664,7 @@\n         var debugChunks = request.completedDebugChunks;\n         for (i = 0; i < debugChunks.length; i++)\n           if (\n-            (request.pendingChunks--,\n+            (request.pendingDebugChunks--,\n             !writeChunkAndReturn(destination, debugChunks[i]))\n           ) {\n             request.destination = null;\n@@ -3670,6 +3705,7 @@\n       }\n       \"function\" === typeof destination.flush && destination.flush();\n       0 === request.pendingChunks &&\n+        0 === request.pendingDebugChunks &&\n         (cleanupTaintQueue(request),\n         request.status < ABORTING &&\n           request.cacheController.abort(\n@@ -3717,62 +3753,98 @@\n         }\n       }\n     }\n-    function abort(request, reason) {\n+    function finishHalt(request, abortedTasks) {\n       try {\n-        11 >= request.status &&\n-          ((request.status = ABORTING),\n-          request.cacheController.abort(reason),\n-          callOnAllReadyIfReady(request));\n-        var abortableTasks = request.abortableTasks;\n-        if (0 < abortableTasks.size) {\n-          if (21 === request.type)\n-            abortableTasks.forEach(function (task) {\n-              return haltTask(task, request);\n-            });\n-          else if (\n-            \"object\" === typeof reason &&\n-            null !== reason &&\n-            reason.$$typeof === REACT_POSTPONE_TYPE\n-          ) {\n-            logPostpone(request, reason.message, null);\n-            var errorId = request.nextChunkId++;\n-            request.fatalError = errorId;\n-            request.pendingChunks++;\n-            emitPostponeChunk(request, errorId, reason);\n-            abortableTasks.forEach(function (task) {\n-              return abortTask(task, request, errorId);\n-            });\n-          } else {\n-            var error =\n-                void 0 === reason\n-                  ? Error(\n-                      \"The render was aborted by the server without a reason.\"\n-                    )\n-                  : \"object\" === typeof reason &&\n-                      null !== reason &&\n-                      \"function\" === typeof reason.then\n+        abortedTasks.forEach(function (task) {\n+          return finishHaltedTask(task, request);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n+      }\n+    }\n+    function finishAbort(request, abortedTasks, errorId) {\n+      try {\n+        abortedTasks.forEach(function (task) {\n+          return finishAbortedTask(task, request, errorId);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n+      }\n+    }\n+    function abort(request, reason) {\n+      if (!(11 < request.status))\n+        try {\n+          request.status = ABORTING;\n+          request.abortTime = performance.now();\n+          request.cacheController.abort(reason);\n+          var abortableTasks = request.abortableTasks;\n+          if (0 < abortableTasks.size)\n+            if (21 === request.type)\n+              abortableTasks.forEach(function (task) {\n+                return haltTask(task, request);\n+              }),\n+                setImmediate(function () {\n+                  return finishHalt(request, abortableTasks);\n+                });\n+            else if (\n+              \"object\" === typeof reason &&\n+              null !== reason &&\n+              reason.$$typeof === REACT_POSTPONE_TYPE\n+            ) {\n+              logPostpone(request, reason.message, null);\n+              var errorId = request.nextChunkId++;\n+              request.fatalError = errorId;\n+              request.pendingChunks++;\n+              emitPostponeChunk(request, errorId, reason);\n+              abortableTasks.forEach(function (task) {\n+                return abortTask(task, request, errorId);\n+              });\n+              setImmediate(function () {\n+                return finishAbort(request, abortableTasks, errorId);\n+              });\n+            } else {\n+              var error =\n+                  void 0 === reason\n                     ? Error(\n-                        \"The render was aborted by the server with a promise.\"\n+                        \"The render was aborted by the server without a reason.\"\n                       )\n-                    : reason,\n-              digest = logRecoverableError(request, error, null),\n-              _errorId2 = request.nextChunkId++;\n-            request.fatalError = _errorId2;\n-            request.pendingChunks++;\n-            emitErrorChunk(request, _errorId2, digest, error, !1);\n-            abortableTasks.forEach(function (task) {\n-              return abortTask(task, request, _errorId2);\n-            });\n+                    : \"object\" === typeof reason &&\n+                        null !== reason &&\n+                        \"function\" === typeof reason.then\n+                      ? Error(\n+                          \"The render was aborted by the server with a promise.\"\n+                        )\n+                      : reason,\n+                digest = logRecoverableError(request, error, null),\n+                _errorId2 = request.nextChunkId++;\n+              request.fatalError = _errorId2;\n+              request.pendingChunks++;\n+              emitErrorChunk(request, _errorId2, digest, error, !1);\n+              abortableTasks.forEach(function (task) {\n+                return abortTask(task, request, _errorId2);\n+              });\n+              setImmediate(function () {\n+                return finishAbort(request, abortableTasks, _errorId2);\n+              });\n+            }\n+          else {\n+            var onAllReady = request.onAllReady;\n+            onAllReady();\n+            null !== request.destination &&\n+              flushCompletedChunks(request, request.destination);\n           }\n-          abortableTasks.clear();\n-          callOnAllReadyIfReady(request);\n+        } catch (error$2) {\n+          logRecoverableError(request, error$2, null),\n+            fatalError(request, error$2);\n         }\n-        null !== request.destination &&\n-          flushCompletedChunks(request, request.destination);\n-      } catch (error$2) {\n-        logRecoverableError(request, error$2, null),\n-          fatalError(request, error$2);\n-      }\n     }\n     function fromHex(str) {\n       return parseInt(str, 16);\n@@ -3791,7 +3863,7 @@\n             var id = message[command],\n               retainedValue = deferredDebugObjects.retained.get(id);\n             void 0 !== retainedValue &&\n-              (request.pendingChunks--,\n+              (request.pendingDebugChunks--,\n               deferredDebugObjects.retained.delete(id),\n               deferredDebugObjects.existing.delete(retainedValue),\n               enqueueFlush(request));\n@@ -3802,7 +3874,9 @@\n             (id = message[command]),\n               (retainedValue = deferredDebugObjects.retained.get(id)),\n               void 0 !== retainedValue &&\n-                (emitOutlinedDebugModelChunk(\n+                (deferredDebugObjects.retained.delete(id),\n+                deferredDebugObjects.existing.delete(retainedValue),\n+                emitOutlinedDebugModelChunk(\n                   request,\n                   id,\n                   { objectLimit: 10 },\n@@ -3823,7 +3897,7 @@\n           \"resolveDebugMessage/closeDebugChannel should not be called for a Request that wasn't kept alive. This is a bug in React.\"\n         );\n       deferredDebugObjects.retained.forEach(function (value, id) {\n-        request.pendingChunks--;\n+        request.pendingDebugChunks--;\n         deferredDebugObjects.retained.delete(id);\n         deferredDebugObjects.existing.delete(value);\n       });\n@@ -4925,6 +4999,7 @@\n       awaitedPromise = new WeakMap(),\n       previousPromise = new WeakMap(),\n       lastRanAwait = null,\n+      emptyStack = [],\n       framesToSkip = 0,\n       collectedStackTrace = null,\n       identifierRegExp = /^[a-zA-Z_$][0-9a-zA-Z_$]*$/,\n@@ -5146,61 +5221,76 @@\n                   null !== triggerAsyncId.promise &&\n                   ((type = triggerAsyncId.promise.deref()),\n                   void 0 !== type && previousPromise.set(resource, type));\n-                resource = {\n+                type = null;\n+                if (\n+                  null === trigger.stack ||\n+                  (2 !== trigger.tag && 4 !== trigger.tag)\n+                ) {\n+                  var request = resolveRequest();\n+                  null !== request &&\n+                    ((type = parseStackTrace(Error(), 5)),\n+                    isAwaitInUserspace(request, type) || (type = null));\n+                } else type = emptyStack;\n+                trigger = {\n                   tag: 4,\n                   owner: resolveOwner(),\n-                  stack: parseStackTrace(Error(), 5),\n+                  stack: type,\n                   start: performance.now(),\n                   end: -1.1,\n                   promise: new WeakRef(resource),\n                   awaited: trigger,\n                   previous: void 0 === triggerAsyncId ? null : triggerAsyncId\n                 };\n               } else\n-                resource = {\n-                  tag: 3,\n-                  owner: resolveOwner(),\n-                  stack: parseStackTrace(Error(), 5),\n-                  start: performance.now(),\n-                  end: -1.1,\n-                  promise: new WeakRef(resource),\n-                  awaited: void 0 === trigger ? null : trigger,\n-                  previous: null\n-                };\n+                (triggerAsyncId = resolveOwner()),\n+                  (trigger = {\n+                    tag: 3,\n+                    owner: triggerAsyncId,\n+                    stack:\n+                      null === triggerAsyncId\n+                        ? null\n+                        : parseStackTrace(Error(), 5),\n+                    start: performance.now(),\n+                    end: -1.1,\n+                    promise: new WeakRef(resource),\n+                    awaited: void 0 === trigger ? null : trigger,\n+                    previous: null\n+                  });\n             else if (\n               \"Microtask\" !== type &&\n               \"TickObject\" !== type &&\n               \"Immediate\" !== type\n             )\n-              resource =\n-                void 0 === trigger\n-                  ? {\n+              if (void 0 === trigger)\n+                (trigger = resolveOwner()),\n+                  (trigger = {\n+                    tag: 0,\n+                    owner: trigger,\n+                    stack:\n+                      null === trigger ? parseStackTrace(Error(), 3) : null,\n+                    start: performance.now(),\n+                    end: -1.1,\n+                    promise: null,\n+                    awaited: null,\n+                    previous: null\n+                  });\n+              else {\n+                if (2 === trigger.tag || 4 === trigger.tag)\n+                  (resource = resolveOwner()),\n+                    (trigger = {\n                       tag: 0,\n-                      owner: resolveOwner(),\n-                      stack: parseStackTrace(Error(), 3),\n+                      owner: resource,\n+                      stack:\n+                        null === resource ? parseStackTrace(Error(), 3) : null,\n                       start: performance.now(),\n                       end: -1.1,\n                       promise: null,\n                       awaited: null,\n-                      previous: null\n-                    }\n-                  : 2 === trigger.tag || 4 === trigger.tag\n-                    ? {\n-                        tag: 0,\n-                        owner: resolveOwner(),\n-                        stack: parseStackTrace(Error(), 3),\n-                        start: performance.now(),\n-                        end: -1.1,\n-                        promise: null,\n-                        awaited: null,\n-                        previous: trigger\n-                      }\n-                    : trigger;\n-            else {\n-              if (void 0 === trigger) return;\n-              resource = trigger;\n-            }\n-            pendingOperations.set(asyncId, resource);\n+                      previous: trigger\n+                    });\n+              }\n+            else if (void 0 === trigger) return;\n+            pendingOperations.set(asyncId, trigger);\n           },\n           before: function (asyncId) {\n             asyncId = pendingOperations.get(asyncId);\n@@ -5249,7 +5339,23 @@\n               var currentAsyncId = async_hooks.executionAsyncId();\n               asyncId !== currentAsyncId &&\n                 ((asyncId = pendingOperations.get(currentAsyncId)),\n-                (node.awaited = void 0 === asyncId ? null : asyncId));\n+                1 === node.tag\n+                  ? (node.awaited = void 0 === asyncId ? null : asyncId)\n+                  : void 0 !== asyncId &&\n+                    ((currentAsyncId = {\n+                      tag: 2,\n+                      owner: node.owner,\n+                      stack: node.stack,\n+                      start: node.start,\n+                      end: node.end,\n+                      promise: node.promise,\n+                      awaited: node.awaited,\n+                      previous: node.previous\n+                    }),\n+                    (node.start = node.end),\n+                    (node.end = performance.now()),\n+                    (node.previous = currentAsyncId),\n+                    (node.awaited = asyncId)));\n             }\n           },\n           destroy: function (asyncId) {\n@@ -5441,12 +5547,12 @@\n             \"React doesn't accept base64 encoded file uploads because we don't expect form data passed from a browser to ever encode data that way. If that's the wrong assumption, we can easily fix it.\"\n           );\n         pendingFiles++;\n-        var JSCompiler_object_inline_chunks_221 = [];\n+        var JSCompiler_object_inline_chunks_230 = [];\n         value.on(\"data\", function (chunk) {\n-          JSCompiler_object_inline_chunks_221.push(chunk);\n+          JSCompiler_object_inline_chunks_230.push(chunk);\n         });\n         value.on(\"end\", function () {\n-          var blob = new Blob(JSCompiler_object_inline_chunks_221, {\n+          var blob = new Blob(JSCompiler_object_inline_chunks_230, {\n             type: mimeType\n           });\n           response._formData.append(name, blob, filename);"
        },
        {
            "sha": "e31b5df811664ea53bdc381555c32554464b11a2",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-server.node.production.js",
            "status": "modified",
            "additions": 140,
            "deletions": 91,
            "changes": 231,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-server.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -841,8 +841,11 @@ function serializeThenable(request, task, thenable) {\n         return (\n           request.abortableTasks.delete(newTask),\n           21 === request.type\n-            ? haltTask(newTask, request)\n-            : abortTask(newTask, request, request.fatalError),\n+            ? (haltTask(newTask),\n+              3 === newTask.status && request.pendingChunks--)\n+            : ((task = request.fatalError),\n+              abortTask(newTask),\n+              finishAbortedTask(newTask, request, task)),\n           newTask.id\n         );\n       \"string\" !== typeof thenable.status &&\n@@ -909,8 +912,7 @@ function serializeReadableStream(request, task, stream) {\n       signal.removeEventListener(\"abort\", abortStream);\n       signal = signal.reason;\n       21 === request.type\n-        ? (haltTask(streamTask, request),\n-          request.abortableTasks.delete(streamTask))\n+        ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n         : (erroredTask(request, streamTask, signal), enqueueFlush(request));\n       reader.cancel(signal).then(error, error);\n     }\n@@ -992,8 +994,7 @@ function serializeAsyncIterable(request, task, iterable, iterator) {\n       signal.removeEventListener(\"abort\", abortIterable);\n       var reason = signal.reason;\n       21 === request.type\n-        ? (haltTask(streamTask, request),\n-          request.abortableTasks.delete(streamTask))\n+        ? (haltTask(streamTask), request.abortableTasks.delete(streamTask))\n         : (erroredTask(request, streamTask, signal.reason),\n           enqueueFlush(request));\n       \"function\" === typeof iterator.throw &&\n@@ -1365,7 +1366,7 @@ function outlineModel(request, value) {\n function serializeTypedArray(request, tag, typedArray) {\n   request.pendingChunks++;\n   var bufferId = request.nextChunkId++;\n-  emitTypedArrayChunk(request, bufferId, tag, typedArray);\n+  emitTypedArrayChunk(request, bufferId, tag, typedArray, !1);\n   return serializeByValueID(bufferId);\n }\n function serializeBlob(request, blob) {\n@@ -1392,7 +1393,7 @@ function serializeBlob(request, blob) {\n       signal.removeEventListener(\"abort\", abortBlob);\n       signal = signal.reason;\n       21 === request.type\n-        ? haltTask(newTask, request)\n+        ? haltTask(newTask)\n         : (erroredTask(request, newTask, signal), enqueueFlush(request));\n       reader.cancel(signal).then(error, error);\n     }\n@@ -1617,7 +1618,7 @@ function renderModelDestructive(\n       return (\n         request.pendingChunks++,\n         (task = request.nextChunkId++),\n-        emitTextChunk(request, task, value),\n+        emitTextChunk(request, task, value, !1),\n         serializeByValueID(task)\n       );\n     value = \"$\" === value[0] ? \"$\" + value : value;\n@@ -1765,7 +1766,7 @@ function emitErrorChunk(request, id, digest) {\n   id = id.toString(16) + \":E\" + stringify(digest) + \"\\n\";\n   request.completedErrorChunks.push(id);\n }\n-function emitTypedArrayChunk(request, id, tag, typedArray) {\n+function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n   if (TaintRegistryByteLengths.has(typedArray.byteLength)) {\n     var tainted = TaintRegistryValues.get(\n       String.fromCharCode.apply(\n@@ -1779,58 +1780,58 @@ function emitTypedArrayChunk(request, id, tag, typedArray) {\n     );\n     void 0 !== tainted && throwTaintViolation(tainted.message);\n   }\n-  request.pendingChunks++;\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n   typedArray = new Uint8Array(\n     typedArray.buffer,\n     typedArray.byteOffset,\n     typedArray.byteLength\n   );\n-  tainted = typedArray.byteLength;\n-  id = id.toString(16) + \":\" + tag + tainted.toString(16) + \",\";\n+  debug = typedArray.byteLength;\n+  id = id.toString(16) + \":\" + tag + debug.toString(16) + \",\";\n   request.completedRegularChunks.push(id, typedArray);\n }\n-function emitTextChunk(request, id, text) {\n+function emitTextChunk(request, id, text, debug) {\n   if (null === byteLengthOfChunk)\n     throw Error(\n       \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n     );\n-  request.pendingChunks++;\n-  var binaryLength = byteLengthOfChunk(text);\n-  id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n+  debug = byteLengthOfChunk(text);\n+  id = id.toString(16) + \":T\" + debug.toString(16) + \",\";\n   request.completedRegularChunks.push(id, text);\n }\n function emitChunk(request, task, value) {\n   var id = task.id;\n   \"string\" === typeof value && null !== byteLengthOfChunk\n     ? ((task = TaintRegistryValues.get(value)),\n       void 0 !== task && throwTaintViolation(task.message),\n-      emitTextChunk(request, id, value))\n+      emitTextChunk(request, id, value, !1))\n     : value instanceof ArrayBuffer\n-      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value))\n+      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value), !1)\n       : value instanceof Int8Array\n-        ? emitTypedArrayChunk(request, id, \"O\", value)\n+        ? emitTypedArrayChunk(request, id, \"O\", value, !1)\n         : value instanceof Uint8Array\n-          ? emitTypedArrayChunk(request, id, \"o\", value)\n+          ? emitTypedArrayChunk(request, id, \"o\", value, !1)\n           : value instanceof Uint8ClampedArray\n-            ? emitTypedArrayChunk(request, id, \"U\", value)\n+            ? emitTypedArrayChunk(request, id, \"U\", value, !1)\n             : value instanceof Int16Array\n-              ? emitTypedArrayChunk(request, id, \"S\", value)\n+              ? emitTypedArrayChunk(request, id, \"S\", value, !1)\n               : value instanceof Uint16Array\n-                ? emitTypedArrayChunk(request, id, \"s\", value)\n+                ? emitTypedArrayChunk(request, id, \"s\", value, !1)\n                 : value instanceof Int32Array\n-                  ? emitTypedArrayChunk(request, id, \"L\", value)\n+                  ? emitTypedArrayChunk(request, id, \"L\", value, !1)\n                   : value instanceof Uint32Array\n-                    ? emitTypedArrayChunk(request, id, \"l\", value)\n+                    ? emitTypedArrayChunk(request, id, \"l\", value, !1)\n                     : value instanceof Float32Array\n-                      ? emitTypedArrayChunk(request, id, \"G\", value)\n+                      ? emitTypedArrayChunk(request, id, \"G\", value, !1)\n                       : value instanceof Float64Array\n-                        ? emitTypedArrayChunk(request, id, \"g\", value)\n+                        ? emitTypedArrayChunk(request, id, \"g\", value, !1)\n                         : value instanceof BigInt64Array\n-                          ? emitTypedArrayChunk(request, id, \"M\", value)\n+                          ? emitTypedArrayChunk(request, id, \"M\", value, !1)\n                           : value instanceof BigUint64Array\n-                            ? emitTypedArrayChunk(request, id, \"m\", value)\n+                            ? emitTypedArrayChunk(request, id, \"m\", value, !1)\n                             : value instanceof DataView\n-                              ? emitTypedArrayChunk(request, id, \"V\", value)\n+                              ? emitTypedArrayChunk(request, id, \"V\", value, !1)\n                               : ((value = stringify(value, task.toJSON)),\n                                 (task =\n                                   task.id.toString(16) + \":\" + value + \"\\n\"),\n@@ -1878,11 +1879,17 @@ function retryTask(request, task) {\n       callOnAllReadyIfReady(request);\n     } catch (thrownValue) {\n       if (12 === request.status)\n-        request.abortableTasks.delete(task),\n+        if (\n+          (request.abortableTasks.delete(task),\n           (task.status = 0),\n-          21 === request.type\n-            ? haltTask(task, request)\n-            : abortTask(task, request, request.fatalError);\n+          21 === request.type)\n+        )\n+          haltTask(task), 3 === task.status && request.pendingChunks--;\n+        else {\n+          var errorId = request.fatalError;\n+          abortTask(task);\n+          finishAbortedTask(task, request, errorId);\n+        }\n       else {\n         var x =\n           thrownValue === SuspenseException\n@@ -1932,15 +1939,17 @@ function performWork(request) {\n       (currentRequest = prevRequest);\n   }\n }\n-function abortTask(task, request, errorId) {\n-  5 !== task.status &&\n-    ((task.status = 3),\n-    (errorId = serializeByValueID(errorId)),\n+function abortTask(task) {\n+  0 === task.status && (task.status = 3);\n+}\n+function finishAbortedTask(task, request, errorId) {\n+  3 === task.status &&\n+    ((errorId = serializeByValueID(errorId)),\n     (task = encodeReferenceChunk(request, task.id, errorId)),\n     request.completedErrorChunks.push(task));\n }\n-function haltTask(task, request) {\n-  5 !== task.status && ((task.status = 3), request.pendingChunks--);\n+function haltTask(task) {\n+  0 === task.status && (task.status = 3);\n }\n function flushCompletedChunks(request, destination) {\n   currentView = new Uint8Array(2048);\n@@ -2049,58 +2058,98 @@ function startFlowing(request, destination) {\n     }\n   }\n }\n-function abort(request, reason) {\n+function finishHalt(request, abortedTasks) {\n   try {\n-    11 >= request.status &&\n-      ((request.status = 12),\n-      request.cacheController.abort(reason),\n-      callOnAllReadyIfReady(request));\n-    var abortableTasks = request.abortableTasks;\n-    if (0 < abortableTasks.size) {\n-      if (21 === request.type)\n-        abortableTasks.forEach(function (task) {\n-          return haltTask(task, request);\n-        });\n-      else if (\n-        \"object\" === typeof reason &&\n-        null !== reason &&\n-        reason.$$typeof === REACT_POSTPONE_TYPE\n-      ) {\n-        logPostpone(request, reason.message, null);\n-        var errorId = request.nextChunkId++;\n-        request.fatalError = errorId;\n-        request.pendingChunks++;\n-        emitPostponeChunk(request, errorId, reason);\n-        abortableTasks.forEach(function (task) {\n-          return abortTask(task, request, errorId);\n-        });\n-      } else {\n-        var error =\n-            void 0 === reason\n-              ? Error(\"The render was aborted by the server without a reason.\")\n-              : \"object\" === typeof reason &&\n-                  null !== reason &&\n-                  \"function\" === typeof reason.then\n-                ? Error(\"The render was aborted by the server with a promise.\")\n-                : reason,\n-          digest = logRecoverableError(request, error, null),\n-          errorId$27 = request.nextChunkId++;\n-        request.fatalError = errorId$27;\n-        request.pendingChunks++;\n-        emitErrorChunk(request, errorId$27, digest, error, !1);\n-        abortableTasks.forEach(function (task) {\n-          return abortTask(task, request, errorId$27);\n-        });\n-      }\n-      abortableTasks.clear();\n-      callOnAllReadyIfReady(request);\n-    }\n+    abortedTasks.forEach(function (task) {\n+      3 === task.status && request.pendingChunks--;\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n     null !== request.destination &&\n       flushCompletedChunks(request, request.destination);\n-  } catch (error$28) {\n-    logRecoverableError(request, error$28, null), fatalError(request, error$28);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n   }\n }\n+function finishAbort(request, abortedTasks, errorId) {\n+  try {\n+    abortedTasks.forEach(function (task) {\n+      return finishAbortedTask(task, request, errorId);\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n+    null !== request.destination &&\n+      flushCompletedChunks(request, request.destination);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n+  }\n+}\n+function abort(request, reason) {\n+  if (!(11 < request.status))\n+    try {\n+      request.status = 12;\n+      request.cacheController.abort(reason);\n+      var abortableTasks = request.abortableTasks;\n+      if (0 < abortableTasks.size)\n+        if (21 === request.type)\n+          abortableTasks.forEach(function (task) {\n+            return haltTask(task, request);\n+          }),\n+            setImmediate(function () {\n+              return finishHalt(request, abortableTasks);\n+            });\n+        else if (\n+          \"object\" === typeof reason &&\n+          null !== reason &&\n+          reason.$$typeof === REACT_POSTPONE_TYPE\n+        ) {\n+          logPostpone(request, reason.message, null);\n+          var errorId = request.nextChunkId++;\n+          request.fatalError = errorId;\n+          request.pendingChunks++;\n+          emitPostponeChunk(request, errorId, reason);\n+          abortableTasks.forEach(function (task) {\n+            return abortTask(task, request, errorId);\n+          });\n+          setImmediate(function () {\n+            return finishAbort(request, abortableTasks, errorId);\n+          });\n+        } else {\n+          var error =\n+              void 0 === reason\n+                ? Error(\n+                    \"The render was aborted by the server without a reason.\"\n+                  )\n+                : \"object\" === typeof reason &&\n+                    null !== reason &&\n+                    \"function\" === typeof reason.then\n+                  ? Error(\n+                      \"The render was aborted by the server with a promise.\"\n+                    )\n+                  : reason,\n+            digest = logRecoverableError(request, error, null),\n+            errorId$27 = request.nextChunkId++;\n+          request.fatalError = errorId$27;\n+          request.pendingChunks++;\n+          emitErrorChunk(request, errorId$27, digest, error, !1);\n+          abortableTasks.forEach(function (task) {\n+            return abortTask(task, request, errorId$27);\n+          });\n+          setImmediate(function () {\n+            return finishAbort(request, abortableTasks, errorId$27);\n+          });\n+        }\n+      else {\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      }\n+    } catch (error$28) {\n+      logRecoverableError(request, error$28, null),\n+        fatalError(request, error$28);\n+    }\n+}\n function resolveServerReference(bundlerConfig, id) {\n   var name = \"\",\n     resolvedModuleData = bundlerConfig[id];\n@@ -2976,12 +3025,12 @@ exports.decodeReplyFromBusboy = function (busboyStream, turbopackMap, options) {\n         \"React doesn't accept base64 encoded file uploads because we don't expect form data passed from a browser to ever encode data that way. If that's the wrong assumption, we can easily fix it.\"\n       );\n     pendingFiles++;\n-    var JSCompiler_object_inline_chunks_255 = [];\n+    var JSCompiler_object_inline_chunks_263 = [];\n     value.on(\"data\", function (chunk) {\n-      JSCompiler_object_inline_chunks_255.push(chunk);\n+      JSCompiler_object_inline_chunks_263.push(chunk);\n     });\n     value.on(\"end\", function () {\n-      var blob = new Blob(JSCompiler_object_inline_chunks_255, {\n+      var blob = new Blob(JSCompiler_object_inline_chunks_263, {\n         type: mimeType\n       });\n       response._formData.append(name, blob, filename);"
        },
        {
            "sha": "5db18561af8e05d7c8e9aa6e4652e741f4444107",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fpackage.json?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -48,7 +48,7 @@\n     \"neo-async\": \"^2.6.1\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"0.0.0-experimental-5d87cd22-20250704\",\n-    \"react-dom\": \"0.0.0-experimental-5d87cd22-20250704\"\n+    \"react\": \"0.0.0-experimental-a7a11657-20250708\",\n+    \"react-dom\": \"0.0.0-experimental-a7a11657-20250708\"\n   }\n }\n\\ No newline at end of file"
        },
        {
            "sha": "9162d2ed2a7bfeff3606919f01091857da813df6",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-client.browser.development.js",
            "status": "modified",
            "additions": 293,
            "deletions": 226,
            "changes": 519,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -757,7 +757,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -911,6 +911,17 @@\n       this.reason = reason;\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -930,9 +941,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function wakeChunk(listeners, value) {\n       for (var i = 0; i < listeners.length; i++) {\n         var listener = listeners[i];\n@@ -1008,15 +1037,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1039,6 +1067,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1049,15 +1078,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1100,15 +1130,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1184,7 +1218,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? new ReactPromise(\"rejected\", null, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1270,31 +1304,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -1341,17 +1375,18 @@\n           response._debugFindSourceMapURL\n         );\n       var serverReference = resolveServerReference(\n-        response._serverReferenceConfig,\n-        metaData.id\n-      );\n-      if ((response = preloadModule(serverReference)))\n-        metaData.bound && (response = Promise.all([response, metaData.bound]));\n-      else if (metaData.bound) response = Promise.resolve(metaData.bound);\n+          response._serverReferenceConfig,\n+          metaData.id\n+        ),\n+        promise = preloadModule(serverReference);\n+      if (promise)\n+        metaData.bound && (promise = Promise.all([promise, metaData.bound]));\n+      else if (metaData.bound) promise = Promise.resolve(metaData.bound);\n       else\n         return (\n-          (response = requireModule(serverReference)),\n-          registerBoundServerReference(response, metaData.id, metaData.bound),\n-          response\n+          (promise = requireModule(serverReference)),\n+          registerBoundServerReference(promise, metaData.id, metaData.bound),\n+          promise\n         );\n       if (initializingHandler) {\n         var handler = initializingHandler;\n@@ -1364,7 +1399,7 @@\n           deps: 1,\n           errored: !1\n         };\n-      response.then(\n+      promise.then(\n         function () {\n           var resolvedValue = requireModule(serverReference);\n           if (metaData.bound) {\n@@ -1427,7 +1462,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -1574,6 +1609,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -1612,15 +1664,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -1632,47 +1682,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -1692,10 +1736,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -1741,23 +1785,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -1796,6 +1844,8 @@\n       this._closed = !1;\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -1812,17 +1862,22 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -1832,18 +1887,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -1853,39 +1910,41 @@\n         response._bundlerConfig,\n         model\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -1922,19 +1981,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -1987,7 +2046,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2060,11 +2119,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2469,6 +2528,7 @@\n       );\n       resolveBuffer(response, id, constructor);\n     }\n+    function flushInitialRenderPerformance() {}\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -2539,7 +2599,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, new ReactPromise(\"rejected\", null, tag));\n           break;\n         case 84:\n@@ -2695,96 +2755,99 @@\n         options ? !1 !== options.replayConsoleLogs : !0,\n         options && options.environmentName ? options.environmentName : void 0,\n         debugChannel\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n         var value = _ref.value;\n         if (_ref.done) reportGlobalError(response, Error(\"Connection closed.\"));\n         else {\n-          var i = 0,\n-            rowState = response._rowState;\n-          _ref = response._rowID;\n-          for (\n-            var rowTag = response._rowTag,\n-              rowLength = response._rowLength,\n-              buffer = response._buffer,\n-              chunkLength = value.length;\n-            i < chunkLength;\n+          if (void 0 !== response.weak.deref()) {\n+            _ref = unwrapWeakResponse(response);\n+            for (\n+              var i = 0,\n+                rowState = _ref._rowState,\n+                rowID = _ref._rowID,\n+                rowTag = _ref._rowTag,\n+                rowLength = _ref._rowLength,\n+                buffer = _ref._buffer,\n+                chunkLength = value.length;\n+              i < chunkLength;\n \n-          ) {\n-            var lastIdx = -1;\n-            switch (rowState) {\n-              case 0:\n-                lastIdx = value[i++];\n-                58 === lastIdx\n-                  ? (rowState = 1)\n-                  : (_ref =\n-                      (_ref << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 1:\n-                rowState = value[i];\n-                84 === rowState ||\n-                65 === rowState ||\n-                79 === rowState ||\n-                111 === rowState ||\n-                85 === rowState ||\n-                83 === rowState ||\n-                115 === rowState ||\n-                76 === rowState ||\n-                108 === rowState ||\n-                71 === rowState ||\n-                103 === rowState ||\n-                77 === rowState ||\n-                109 === rowState ||\n-                86 === rowState\n-                  ? ((rowTag = rowState), (rowState = 2), i++)\n-                  : (64 < rowState && 91 > rowState) ||\n-                      35 === rowState ||\n-                      114 === rowState ||\n-                      120 === rowState\n-                    ? ((rowTag = rowState), (rowState = 3), i++)\n-                    : ((rowTag = 0), (rowState = 3));\n-                continue;\n-              case 2:\n-                lastIdx = value[i++];\n-                44 === lastIdx\n-                  ? (rowState = 4)\n-                  : (rowLength =\n-                      (rowLength << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 3:\n-                lastIdx = value.indexOf(10, i);\n+            ) {\n+              var lastIdx = -1;\n+              switch (rowState) {\n+                case 0:\n+                  lastIdx = value[i++];\n+                  58 === lastIdx\n+                    ? (rowState = 1)\n+                    : (rowID =\n+                        (rowID << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 1:\n+                  rowState = value[i];\n+                  84 === rowState ||\n+                  65 === rowState ||\n+                  79 === rowState ||\n+                  111 === rowState ||\n+                  85 === rowState ||\n+                  83 === rowState ||\n+                  115 === rowState ||\n+                  76 === rowState ||\n+                  108 === rowState ||\n+                  71 === rowState ||\n+                  103 === rowState ||\n+                  77 === rowState ||\n+                  109 === rowState ||\n+                  86 === rowState\n+                    ? ((rowTag = rowState), (rowState = 2), i++)\n+                    : (64 < rowState && 91 > rowState) ||\n+                        35 === rowState ||\n+                        114 === rowState ||\n+                        120 === rowState\n+                      ? ((rowTag = rowState), (rowState = 3), i++)\n+                      : ((rowTag = 0), (rowState = 3));\n+                  continue;\n+                case 2:\n+                  lastIdx = value[i++];\n+                  44 === lastIdx\n+                    ? (rowState = 4)\n+                    : (rowLength =\n+                        (rowLength << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 3:\n+                  lastIdx = value.indexOf(10, i);\n+                  break;\n+                case 4:\n+                  (lastIdx = i + rowLength),\n+                    lastIdx > value.length && (lastIdx = -1);\n+              }\n+              var offset = value.byteOffset + i;\n+              if (-1 < lastIdx)\n+                (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n+                  processFullBinaryRow(_ref, rowID, rowTag, buffer, rowLength),\n+                  (i = lastIdx),\n+                  3 === rowState && i++,\n+                  (rowLength = rowID = rowTag = rowState = 0),\n+                  (buffer.length = 0);\n+              else {\n+                value = new Uint8Array(\n+                  value.buffer,\n+                  offset,\n+                  value.byteLength - i\n+                );\n+                buffer.push(value);\n+                rowLength -= value.byteLength;\n                 break;\n-              case 4:\n-                (lastIdx = i + rowLength),\n-                  lastIdx > value.length && (lastIdx = -1);\n-            }\n-            var offset = value.byteOffset + i;\n-            if (-1 < lastIdx)\n-              (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n-                processFullBinaryRow(response, _ref, rowTag, buffer, rowLength),\n-                (i = lastIdx),\n-                3 === rowState && i++,\n-                (rowLength = _ref = rowTag = rowState = 0),\n-                (buffer.length = 0);\n-            else {\n-              value = new Uint8Array(\n-                value.buffer,\n-                offset,\n-                value.byteLength - i\n-              );\n-              buffer.push(value);\n-              rowLength -= value.byteLength;\n-              break;\n+              }\n             }\n+            _ref._rowState = rowState;\n+            _ref._rowID = rowID;\n+            _ref._rowTag = rowTag;\n+            _ref._rowLength = rowLength;\n           }\n-          response._rowState = rowState;\n-          response._rowID = _ref;\n-          response._rowTag = rowTag;\n-          response._rowLength = rowLength;\n           return reader.read().then(progress).catch(error);\n         }\n       }\n@@ -2864,7 +2927,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n       fakeFunctionIdx = 0,\n@@ -2975,10 +3042,10 @@\n       return hook.checkDCE ? !0 : !1;\n     })({\n       bundleType: 1,\n-      version: \"19.2.0-canary-5d87cd22-20250704\",\n+      version: \"19.2.0-canary-a7a11657-20250708\",\n       rendererPackageName: \"react-server-dom-turbopack\",\n       currentDispatcherRef: ReactSharedInternals,\n-      reconcilerVersion: \"19.2.0-canary-5d87cd22-20250704\",\n+      reconcilerVersion: \"19.2.0-canary-a7a11657-20250708\",\n       getCurrentComponentInfo: function () {\n         return currentOwnerInDEV;\n       }\n@@ -2993,12 +3060,12 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (\n       id,"
        },
        {
            "sha": "7e134695d42e5060612cb1acb7dff56aae3d05ee",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-client.browser.production.js",
            "status": "modified",
            "additions": 52,
            "deletions": 51,
            "changes": 103,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -643,15 +643,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -680,15 +678,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -732,11 +730,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -827,14 +826,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -875,17 +875,18 @@ function loadServerReference(response, metaData, parentObject, key) {\n   if (!response._serverReferenceConfig)\n     return createBoundServerReference(metaData, response._callServer);\n   var serverReference = resolveServerReference(\n-    response._serverReferenceConfig,\n-    metaData.id\n-  );\n-  if ((response = preloadModule(serverReference)))\n-    metaData.bound && (response = Promise.all([response, metaData.bound]));\n-  else if (metaData.bound) response = Promise.resolve(metaData.bound);\n+      response._serverReferenceConfig,\n+      metaData.id\n+    ),\n+    promise = preloadModule(serverReference);\n+  if (promise)\n+    metaData.bound && (promise = Promise.all([promise, metaData.bound]));\n+  else if (metaData.bound) promise = Promise.resolve(metaData.bound);\n   else\n     return (\n-      (response = requireModule(serverReference)),\n-      registerBoundServerReference(response, metaData.id, metaData.bound),\n-      response\n+      (promise = requireModule(serverReference)),\n+      registerBoundServerReference(promise, metaData.id, metaData.bound),\n+      promise\n     );\n   if (initializingHandler) {\n     var handler = initializingHandler;\n@@ -898,7 +899,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n       deps: 1,\n       errored: !1\n     };\n-  response.then(\n+  promise.then(\n     function () {\n       var resolvedValue = requireModule(serverReference);\n       if (metaData.bound) {\n@@ -936,7 +937,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1206,24 +1207,24 @@ function resolveModule(response, id, model) {\n     chunk = chunks.get(id);\n   model = JSON.parse(model, response._fromJSON);\n   var clientReference = resolveClientReference(response._bundlerConfig, model);\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1413,7 +1414,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1563,10 +1564,10 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       tag = JSON.parse(buffer);\n       buffer = resolveErrorProd();\n       buffer.digest = tag.digest;\n-      response = response._chunks;\n-      (tag = response.get(id))\n-        ? triggerErrorOnChunk(tag, buffer)\n-        : response.set(id, new ReactPromise(\"rejected\", null, buffer));\n+      tag = response._chunks;\n+      (chunk = tag.get(id))\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n+        : tag.set(id, new ReactPromise(\"rejected\", null, buffer));\n       break;\n     case 84:\n       response = response._chunks;\n@@ -1594,9 +1595,9 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       startAsyncIterable(response, id, !0);\n       break;\n     case 67:\n-      (id = response._chunks.get(id)) &&\n-        \"fulfilled\" === id.status &&\n-        id.reason.close(\"\" === buffer ? '\"$undefined\"' : buffer);\n+      (response = response._chunks.get(id)) &&\n+        \"fulfilled\" === response.status &&\n+        response.reason.close(\"\" === buffer ? '\"$undefined\"' : buffer);\n       break;\n     default:\n       (tag = response._chunks),"
        },
        {
            "sha": "29e82cbe5dc57e94677b2b14fb5efb14e8b6d2a0",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-client.edge.development.js",
            "status": "modified",
            "additions": 280,
            "deletions": 214,
            "changes": 494,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -877,7 +877,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1123,6 +1123,17 @@\n       this.reason = reason;\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1142,9 +1153,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function wakeChunk(listeners, value) {\n       for (var i = 0; i < listeners.length; i++) {\n         var listener = listeners[i];\n@@ -1220,15 +1249,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1251,6 +1279,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1261,15 +1290,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1312,15 +1342,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1396,7 +1430,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? new ReactPromise(\"rejected\", null, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1482,31 +1516,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -1646,7 +1680,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -1793,6 +1827,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -1831,15 +1882,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -1851,47 +1900,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -1911,10 +1954,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -1960,23 +2003,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2015,6 +2062,8 @@\n       this._closed = !1;\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2031,17 +2080,22 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2051,18 +2105,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2077,39 +2133,41 @@\n         model[1],\n         response._nonce\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2146,19 +2204,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2211,7 +2269,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2284,11 +2342,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2693,6 +2751,7 @@\n       );\n       resolveBuffer(response, id, constructor);\n     }\n+    function flushInitialRenderPerformance() {}\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -2763,7 +2822,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, new ReactPromise(\"rejected\", null, tag));\n           break;\n         case 84:\n@@ -2907,96 +2966,99 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n         var value = _ref.value;\n         if (_ref.done) reportGlobalError(response, Error(\"Connection closed.\"));\n         else {\n-          var i = 0,\n-            rowState = response._rowState;\n-          _ref = response._rowID;\n-          for (\n-            var rowTag = response._rowTag,\n-              rowLength = response._rowLength,\n-              buffer = response._buffer,\n-              chunkLength = value.length;\n-            i < chunkLength;\n+          if (void 0 !== response.weak.deref()) {\n+            _ref = unwrapWeakResponse(response);\n+            for (\n+              var i = 0,\n+                rowState = _ref._rowState,\n+                rowID = _ref._rowID,\n+                rowTag = _ref._rowTag,\n+                rowLength = _ref._rowLength,\n+                buffer = _ref._buffer,\n+                chunkLength = value.length;\n+              i < chunkLength;\n \n-          ) {\n-            var lastIdx = -1;\n-            switch (rowState) {\n-              case 0:\n-                lastIdx = value[i++];\n-                58 === lastIdx\n-                  ? (rowState = 1)\n-                  : (_ref =\n-                      (_ref << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 1:\n-                rowState = value[i];\n-                84 === rowState ||\n-                65 === rowState ||\n-                79 === rowState ||\n-                111 === rowState ||\n-                85 === rowState ||\n-                83 === rowState ||\n-                115 === rowState ||\n-                76 === rowState ||\n-                108 === rowState ||\n-                71 === rowState ||\n-                103 === rowState ||\n-                77 === rowState ||\n-                109 === rowState ||\n-                86 === rowState\n-                  ? ((rowTag = rowState), (rowState = 2), i++)\n-                  : (64 < rowState && 91 > rowState) ||\n-                      35 === rowState ||\n-                      114 === rowState ||\n-                      120 === rowState\n-                    ? ((rowTag = rowState), (rowState = 3), i++)\n-                    : ((rowTag = 0), (rowState = 3));\n-                continue;\n-              case 2:\n-                lastIdx = value[i++];\n-                44 === lastIdx\n-                  ? (rowState = 4)\n-                  : (rowLength =\n-                      (rowLength << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 3:\n-                lastIdx = value.indexOf(10, i);\n+            ) {\n+              var lastIdx = -1;\n+              switch (rowState) {\n+                case 0:\n+                  lastIdx = value[i++];\n+                  58 === lastIdx\n+                    ? (rowState = 1)\n+                    : (rowID =\n+                        (rowID << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 1:\n+                  rowState = value[i];\n+                  84 === rowState ||\n+                  65 === rowState ||\n+                  79 === rowState ||\n+                  111 === rowState ||\n+                  85 === rowState ||\n+                  83 === rowState ||\n+                  115 === rowState ||\n+                  76 === rowState ||\n+                  108 === rowState ||\n+                  71 === rowState ||\n+                  103 === rowState ||\n+                  77 === rowState ||\n+                  109 === rowState ||\n+                  86 === rowState\n+                    ? ((rowTag = rowState), (rowState = 2), i++)\n+                    : (64 < rowState && 91 > rowState) ||\n+                        35 === rowState ||\n+                        114 === rowState ||\n+                        120 === rowState\n+                      ? ((rowTag = rowState), (rowState = 3), i++)\n+                      : ((rowTag = 0), (rowState = 3));\n+                  continue;\n+                case 2:\n+                  lastIdx = value[i++];\n+                  44 === lastIdx\n+                    ? (rowState = 4)\n+                    : (rowLength =\n+                        (rowLength << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 3:\n+                  lastIdx = value.indexOf(10, i);\n+                  break;\n+                case 4:\n+                  (lastIdx = i + rowLength),\n+                    lastIdx > value.length && (lastIdx = -1);\n+              }\n+              var offset = value.byteOffset + i;\n+              if (-1 < lastIdx)\n+                (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n+                  processFullBinaryRow(_ref, rowID, rowTag, buffer, rowLength),\n+                  (i = lastIdx),\n+                  3 === rowState && i++,\n+                  (rowLength = rowID = rowTag = rowState = 0),\n+                  (buffer.length = 0);\n+              else {\n+                value = new Uint8Array(\n+                  value.buffer,\n+                  offset,\n+                  value.byteLength - i\n+                );\n+                buffer.push(value);\n+                rowLength -= value.byteLength;\n                 break;\n-              case 4:\n-                (lastIdx = i + rowLength),\n-                  lastIdx > value.length && (lastIdx = -1);\n-            }\n-            var offset = value.byteOffset + i;\n-            if (-1 < lastIdx)\n-              (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n-                processFullBinaryRow(response, _ref, rowTag, buffer, rowLength),\n-                (i = lastIdx),\n-                3 === rowState && i++,\n-                (rowLength = _ref = rowTag = rowState = 0),\n-                (buffer.length = 0);\n-            else {\n-              value = new Uint8Array(\n-                value.buffer,\n-                offset,\n-                value.byteLength - i\n-              );\n-              buffer.push(value);\n-              rowLength -= value.byteLength;\n-              break;\n+              }\n             }\n+            _ref._rowState = rowState;\n+            _ref._rowID = rowID;\n+            _ref._rowTag = rowTag;\n+            _ref._rowLength = rowLength;\n           }\n-          response._rowState = rowState;\n-          response._rowID = _ref;\n-          response._rowTag = rowTag;\n-          response._rowLength = rowLength;\n           return reader.read().then(progress).catch(error);\n         }\n       }\n@@ -3079,7 +3141,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n       fakeFunctionIdx = 0,\n@@ -3188,12 +3254,12 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (id) {\n       return createServerReference$1(id, noServerCall);"
        },
        {
            "sha": "53001149054a2e56578232b9dbbb43b33fff6528",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-client.edge.production.js",
            "status": "modified",
            "additions": 41,
            "deletions": 41,
            "changes": 82,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -813,15 +813,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -850,15 +848,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -902,11 +900,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -997,14 +996,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -1121,7 +1121,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1396,24 +1396,24 @@ function resolveModule(response, id, model) {\n     model[1],\n     response._nonce\n   );\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1603,7 +1603,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1753,10 +1753,10 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       tag = JSON.parse(buffer);\n       buffer = resolveErrorProd();\n       buffer.digest = tag.digest;\n-      response = response._chunks;\n-      (tag = response.get(id))\n-        ? triggerErrorOnChunk(tag, buffer)\n-        : response.set(id, new ReactPromise(\"rejected\", null, buffer));\n+      tag = response._chunks;\n+      (chunk = tag.get(id))\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n+        : tag.set(id, new ReactPromise(\"rejected\", null, buffer));\n       break;\n     case 84:\n       response = response._chunks;\n@@ -1784,9 +1784,9 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       startAsyncIterable(response, id, !0);\n       break;\n     case 67:\n-      (id = response._chunks.get(id)) &&\n-        \"fulfilled\" === id.status &&\n-        id.reason.close(\"\" === buffer ? '\"$undefined\"' : buffer);\n+      (response = response._chunks.get(id)) &&\n+        \"fulfilled\" === response.status &&\n+        response.reason.close(\"\" === buffer ? '\"$undefined\"' : buffer);\n       break;\n     default:\n       (tag = response._chunks),"
        },
        {
            "sha": "867f0783af4b8f13bc4d92bfc10370e7e345e91b",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-client.node.development.js",
            "status": "modified",
            "additions": 287,
            "deletions": 213,
            "changes": 500,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -877,7 +877,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1123,6 +1123,17 @@\n       this.reason = reason;\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1142,9 +1153,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function wakeChunk(listeners, value) {\n       for (var i = 0; i < listeners.length; i++) {\n         var listener = listeners[i];\n@@ -1220,15 +1249,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1251,6 +1279,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1261,15 +1290,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1312,15 +1342,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1396,7 +1430,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? new ReactPromise(\"rejected\", null, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1482,31 +1516,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -1646,7 +1680,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -1793,6 +1827,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -1831,15 +1882,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -1851,47 +1900,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -1911,10 +1954,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -1960,23 +2003,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2015,6 +2062,8 @@\n       this._closed = !1;\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2031,17 +2080,22 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2051,18 +2105,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2077,39 +2133,41 @@\n         model[1],\n         response._nonce\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2146,19 +2204,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2211,7 +2269,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2284,11 +2342,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2693,6 +2751,7 @@\n       );\n       resolveBuffer(response, id, constructor);\n     }\n+    function flushInitialRenderPerformance() {}\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -2763,7 +2822,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, new ReactPromise(\"rejected\", null, tag));\n           break;\n         case 84:\n@@ -2807,84 +2866,95 @@\n             : resolveModel(response, id, row);\n       }\n     }\n-    function processBinaryChunk(response, chunk) {\n-      for (\n-        var i = 0,\n-          rowState = response._rowState,\n-          rowID = response._rowID,\n-          rowTag = response._rowTag,\n-          rowLength = response._rowLength,\n-          buffer = response._buffer,\n-          chunkLength = chunk.length;\n-        i < chunkLength;\n+    function processBinaryChunk(weakResponse, chunk) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        weakResponse = unwrapWeakResponse(weakResponse);\n+        for (\n+          var i = 0,\n+            rowState = weakResponse._rowState,\n+            rowID = weakResponse._rowID,\n+            rowTag = weakResponse._rowTag,\n+            rowLength = weakResponse._rowLength,\n+            buffer = weakResponse._buffer,\n+            chunkLength = chunk.length;\n+          i < chunkLength;\n \n-      ) {\n-        var lastIdx = -1;\n-        switch (rowState) {\n-          case 0:\n-            lastIdx = chunk[i++];\n-            58 === lastIdx\n-              ? (rowState = 1)\n-              : (rowID =\n-                  (rowID << 4) | (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-            continue;\n-          case 1:\n-            rowState = chunk[i];\n-            84 === rowState ||\n-            65 === rowState ||\n-            79 === rowState ||\n-            111 === rowState ||\n-            85 === rowState ||\n-            83 === rowState ||\n-            115 === rowState ||\n-            76 === rowState ||\n-            108 === rowState ||\n-            71 === rowState ||\n-            103 === rowState ||\n-            77 === rowState ||\n-            109 === rowState ||\n-            86 === rowState\n-              ? ((rowTag = rowState), (rowState = 2), i++)\n-              : (64 < rowState && 91 > rowState) ||\n-                  35 === rowState ||\n-                  114 === rowState ||\n-                  120 === rowState\n-                ? ((rowTag = rowState), (rowState = 3), i++)\n-                : ((rowTag = 0), (rowState = 3));\n-            continue;\n-          case 2:\n-            lastIdx = chunk[i++];\n-            44 === lastIdx\n-              ? (rowState = 4)\n-              : (rowLength =\n-                  (rowLength << 4) |\n-                  (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-            continue;\n-          case 3:\n-            lastIdx = chunk.indexOf(10, i);\n+        ) {\n+          var lastIdx = -1;\n+          switch (rowState) {\n+            case 0:\n+              lastIdx = chunk[i++];\n+              58 === lastIdx\n+                ? (rowState = 1)\n+                : (rowID =\n+                    (rowID << 4) |\n+                    (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+              continue;\n+            case 1:\n+              rowState = chunk[i];\n+              84 === rowState ||\n+              65 === rowState ||\n+              79 === rowState ||\n+              111 === rowState ||\n+              85 === rowState ||\n+              83 === rowState ||\n+              115 === rowState ||\n+              76 === rowState ||\n+              108 === rowState ||\n+              71 === rowState ||\n+              103 === rowState ||\n+              77 === rowState ||\n+              109 === rowState ||\n+              86 === rowState\n+                ? ((rowTag = rowState), (rowState = 2), i++)\n+                : (64 < rowState && 91 > rowState) ||\n+                    35 === rowState ||\n+                    114 === rowState ||\n+                    120 === rowState\n+                  ? ((rowTag = rowState), (rowState = 3), i++)\n+                  : ((rowTag = 0), (rowState = 3));\n+              continue;\n+            case 2:\n+              lastIdx = chunk[i++];\n+              44 === lastIdx\n+                ? (rowState = 4)\n+                : (rowLength =\n+                    (rowLength << 4) |\n+                    (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+              continue;\n+            case 3:\n+              lastIdx = chunk.indexOf(10, i);\n+              break;\n+            case 4:\n+              (lastIdx = i + rowLength),\n+                lastIdx > chunk.length && (lastIdx = -1);\n+          }\n+          var offset = chunk.byteOffset + i;\n+          if (-1 < lastIdx)\n+            (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n+              processFullBinaryRow(\n+                weakResponse,\n+                rowID,\n+                rowTag,\n+                buffer,\n+                rowLength\n+              ),\n+              (i = lastIdx),\n+              3 === rowState && i++,\n+              (rowLength = rowID = rowTag = rowState = 0),\n+              (buffer.length = 0);\n+          else {\n+            chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);\n+            buffer.push(chunk);\n+            rowLength -= chunk.byteLength;\n             break;\n-          case 4:\n-            (lastIdx = i + rowLength), lastIdx > chunk.length && (lastIdx = -1);\n-        }\n-        var offset = chunk.byteOffset + i;\n-        if (-1 < lastIdx)\n-          (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n-            processFullBinaryRow(response, rowID, rowTag, buffer, rowLength),\n-            (i = lastIdx),\n-            3 === rowState && i++,\n-            (rowLength = rowID = rowTag = rowState = 0),\n-            (buffer.length = 0);\n-        else {\n-          chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);\n-          buffer.push(chunk);\n-          rowLength -= chunk.byteLength;\n-          break;\n+          }\n         }\n+        weakResponse._rowState = rowState;\n+        weakResponse._rowID = rowID;\n+        weakResponse._rowTag = rowTag;\n+        weakResponse._rowLength = rowLength;\n       }\n-      response._rowState = rowState;\n-      response._rowID = rowID;\n-      response._rowTag = rowTag;\n-      response._rowLength = rowLength;\n     }\n     function createFromJSONCallback(response) {\n       return function (key, value) {\n@@ -2966,8 +3036,8 @@\n         return value;\n       };\n     }\n-    function close(response) {\n-      reportGlobalError(response, Error(\"Connection closed.\"));\n+    function close(weakResponse) {\n+      reportGlobalError(weakResponse, Error(\"Connection closed.\"));\n     }\n     function noServerCall$1() {\n       throw Error(\n@@ -2989,7 +3059,7 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n@@ -3086,7 +3156,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n       fakeFunctionIdx = 0,\n@@ -3195,7 +3269,7 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromNodeStream = function (\n       stream,\n@@ -3214,7 +3288,7 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n       stream.on(\"data\", function (chunk) {\n         processBinaryChunk(response, chunk);\n       });\n@@ -3224,12 +3298,12 @@\n       stream.on(\"end\", function () {\n         return close(response);\n       });\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (id) {\n       return createServerReference$1(id, noServerCall$1);"
        },
        {
            "sha": "ee3176823052e825f429a2e9dde891a2e9432403",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-client.node.production.js",
            "status": "modified",
            "additions": 54,
            "deletions": 54,
            "changes": 108,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -814,15 +814,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -851,15 +849,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -903,11 +901,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -998,14 +997,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -1122,7 +1122,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1397,24 +1397,24 @@ function resolveModule(response, id, model) {\n     model[1],\n     response._nonce\n   );\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1604,7 +1604,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1754,10 +1754,10 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       tag = JSON.parse(buffer);\n       buffer = resolveErrorProd();\n       buffer.digest = tag.digest;\n-      response = response._chunks;\n-      (tag = response.get(id))\n-        ? triggerErrorOnChunk(tag, buffer)\n-        : response.set(id, new ReactPromise(\"rejected\", null, buffer));\n+      tag = response._chunks;\n+      (chunk = tag.get(id))\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n+        : tag.set(id, new ReactPromise(\"rejected\", null, buffer));\n       break;\n     case 84:\n       response = response._chunks;\n@@ -1785,9 +1785,9 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       startAsyncIterable(response, id, !0);\n       break;\n     case 67:\n-      (id = response._chunks.get(id)) &&\n-        \"fulfilled\" === id.status &&\n-        id.reason.close(\"\" === buffer ? '\"$undefined\"' : buffer);\n+      (response = response._chunks.get(id)) &&\n+        \"fulfilled\" === response.status &&\n+        response.reason.close(\"\" === buffer ? '\"$undefined\"' : buffer);\n       break;\n     default:\n       (tag = response._chunks),\n@@ -1796,14 +1796,14 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n           : tag.set(id, new ReactPromise(\"resolved_model\", buffer, response));\n   }\n }\n-function processBinaryChunk(response, chunk) {\n+function processBinaryChunk(weakResponse, chunk) {\n   for (\n     var i = 0,\n-      rowState = response._rowState,\n-      rowID = response._rowID,\n-      rowTag = response._rowTag,\n-      rowLength = response._rowLength,\n-      buffer = response._buffer,\n+      rowState = weakResponse._rowState,\n+      rowID = weakResponse._rowID,\n+      rowTag = weakResponse._rowTag,\n+      rowLength = weakResponse._rowLength,\n+      buffer = weakResponse._buffer,\n       chunkLength = chunk.length;\n     i < chunkLength;\n \n@@ -1857,7 +1857,7 @@ function processBinaryChunk(response, chunk) {\n     var offset = chunk.byteOffset + i;\n     if (-1 < lastIdx)\n       (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n-        processFullBinaryRow(response, rowID, rowTag, buffer, rowLength),\n+        processFullBinaryRow(weakResponse, rowID, rowTag, buffer, rowLength),\n         (i = lastIdx),\n         3 === rowState && i++,\n         (rowLength = rowID = rowTag = rowState = 0),\n@@ -1869,10 +1869,10 @@ function processBinaryChunk(response, chunk) {\n       break;\n     }\n   }\n-  response._rowState = rowState;\n-  response._rowID = rowID;\n-  response._rowTag = rowTag;\n-  response._rowLength = rowLength;\n+  weakResponse._rowState = rowState;\n+  weakResponse._rowID = rowID;\n+  weakResponse._rowTag = rowTag;\n+  weakResponse._rowLength = rowLength;\n }\n function createFromJSONCallback(response) {\n   return function (key, value) {\n@@ -1909,8 +1909,8 @@ function createFromJSONCallback(response) {\n     return value;\n   };\n }\n-function close(response) {\n-  reportGlobalError(response, Error(\"Connection closed.\"));\n+function close(weakResponse) {\n+  reportGlobalError(weakResponse, Error(\"Connection closed.\"));\n }\n function noServerCall$1() {\n   throw Error("
        },
        {
            "sha": "4b8ad3b37f697dae71431d0ccc4473af9ed09ad1",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-server.browser.development.js",
            "status": "modified",
            "additions": 101,
            "deletions": 70,
            "changes": 171,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -649,9 +649,9 @@\n             suffixIdx = url.lastIndexOf(\"?\");\n           -1 < envIdx &&\n             -1 < suffixIdx &&\n-            (url = url.slice(envIdx + 1, suffixIdx));\n+            (url = decodeURI(url.slice(envIdx + 1, suffixIdx)));\n         }\n-        request(url, functionName) &&\n+        request(url, functionName, callsite[2], callsite[3]) &&\n           ((callsite = callsite.slice(0)),\n           (callsite[1] = url),\n           filteredStack.push(callsite));\n@@ -674,7 +674,7 @@\n               request,\n               parseStackTrace(Error(\"react-stack-top-frame\"), 1)\n             );\n-            request.pendingChunks++;\n+            request.pendingDebugChunks++;\n             var owner = resolveOwner(),\n               args = Array.from(arguments);\n             a: {\n@@ -705,9 +705,13 @@\n             null != owner && outlineComponentInfo(request, owner);\n             format = [methodName, stack, owner, env];\n             format.push.apply(format, args);\n-            args = serializeDebugModel(request, 500, format);\n+            args = serializeDebugModel(\n+              request,\n+              (null === request.deferredDebugObjects ? 500 : 10) + stack.length,\n+              format\n+            );\n             \"[\" !== args[0] &&\n-              (args = serializeDebugModel(request, 500, [\n+              (args = serializeDebugModel(request, 10 + stack.length, [\n                 methodName,\n                 stack,\n                 owner,\n@@ -837,6 +841,7 @@\n         void 0 === onPostpone ? defaultPostponeHandler : onPostpone;\n       this.onAllReady = onAllReady;\n       this.onFatalError = onFatalError;\n+      this.pendingDebugChunks = 0;\n       this.completedDebugChunks = [];\n       this.environmentName =\n         void 0 === environmentName\n@@ -920,7 +925,7 @@\n       return currentRequest ? currentRequest : null;\n     }\n     function serializeDebugThenable(request, counter, thenable) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var id = request.nextChunkId++,\n         ref = \"$@\" + id.toString(16);\n       request.writtenDebugObjects.set(thenable, ref);\n@@ -993,7 +998,9 @@\n           if (request.status === ABORTING)\n             return (\n               request.abortableTasks.delete(newTask),\n-              abortTask(newTask, request, request.fatalError),\n+              (task = request.fatalError),\n+              abortTask(newTask),\n+              finishAbortedTask(newTask, request, task),\n               newTask.id\n             );\n           \"string\" !== typeof thenable.status &&\n@@ -1320,7 +1327,7 @@\n           var componentDebugID = task.id;\n           componentDebugInfo = Component.displayName || Component.name || \"\";\n           var componentEnv = (0, request.environmentName)();\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           componentDebugInfo = {\n             name: componentDebugInfo,\n             env: componentEnv,\n@@ -1694,7 +1701,7 @@\n     function serializeDeferredObject(request, value) {\n       var deferredDebugObjects = request.deferredDebugObjects;\n       return null !== deferredDebugObjects\n-        ? (request.pendingChunks++,\n+        ? (request.pendingDebugChunks++,\n           (request = request.nextChunkId++),\n           deferredDebugObjects.existing.set(value, request),\n           deferredDebugObjects.retained.set(request, value),\n@@ -1774,15 +1781,15 @@\n           request.bundlerConfig,\n           clientReference\n         );\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         var importId = request.nextChunkId++;\n         emitImportChunk(request, importId, clientReferenceMetadata, !0);\n         return parent[0] === REACT_ELEMENT_TYPE && \"1\" === parentPropertyName\n           ? serializeLazyID(importId)\n           : serializeByValueID(importId);\n       } catch (x) {\n         return (\n-          request.pendingChunks++,\n+          request.pendingDebugChunks++,\n           (parent = request.nextChunkId++),\n           (parentPropertyName = logRecoverableError(request, x, null)),\n           emitErrorChunk(request, parent, parentPropertyName, x, !0),\n@@ -1861,7 +1868,7 @@\n       return serializeByValueID(bufferId);\n     }\n     function serializeDebugTypedArray(request, tag, typedArray) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var bufferId = request.nextChunkId++;\n       emitTypedArrayChunk(request, bufferId, tag, typedArray, !0);\n       return serializeByValueID(bufferId);\n@@ -1887,8 +1894,9 @@\n         reader.cancel(reason).then(noop, noop);\n       }\n       var model = [blob.type],\n-        reader = blob.stream().getReader(),\n-        id = request.nextChunkId++;\n+        reader = blob.stream().getReader();\n+      request.pendingDebugChunks++;\n+      var id = request.nextChunkId++;\n       reader.read().then(progress).catch(error);\n       return \"$B\" + id.toString(16);\n     }\n@@ -2464,7 +2472,7 @@\n       }\n     }\n     function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       var buffer = new Uint8Array(\n         typedArray.buffer,\n         typedArray.byteOffset,\n@@ -2483,7 +2491,7 @@\n         throw Error(\n           \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n         );\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       text = stringToChunk(text);\n       var binaryLength = text.byteLength;\n       id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n@@ -2722,7 +2730,7 @@\n           if (0 >= counter.objectLimit)\n             return serializeDeferredObject(request, value);\n           counter.objectLimit--;\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           counter = request.nextChunkId++;\n           emitTextChunk(request, counter, value, !0);\n           return serializeByValueID(counter);\n@@ -2750,7 +2758,7 @@\n         ref = counter.get(value);\n         if (void 0 !== ref) return ref;\n         key = \"$E(\" + (Function.prototype.toString.call(value) + \")\");\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         ref = request.nextChunkId++;\n         key = encodeReferenceChunk(request, ref, key);\n         request.completedDebugChunks.push(key);\n@@ -2843,7 +2851,7 @@\n     }\n     function outlineDebugModel(request, counter, model) {\n       var id = request.nextChunkId++;\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       emitOutlinedDebugModelChunk(request, id, counter, model);\n       return id;\n     }\n@@ -2854,15 +2862,15 @@\n         if (\"number\" !== typeof info.time)\n           if (\"string\" === typeof info.name)\n             outlineComponentInfo(request$jscomp$1, info),\n-              request$jscomp$1.pendingChunks++,\n+              request$jscomp$1.pendingDebugChunks++,\n               emitDebugChunk(request$jscomp$1, task, info);\n           else if (info.awaited) {\n             var ioInfo = info.awaited;\n             if (!(ioInfo.end <= request$jscomp$1.timeOrigin)) {\n               var request = request$jscomp$1,\n                 ioInfo$jscomp$0 = ioInfo;\n               if (!request.writtenObjects.has(ioInfo$jscomp$0)) {\n-                request.pendingChunks++;\n+                request.pendingDebugChunks++;\n                 var id = request.nextChunkId++,\n                   owner = ioInfo$jscomp$0.owner;\n                 null != owner && outlineComponentInfo(request, owner);\n@@ -2885,10 +2893,10 @@\n                   start: ioInfo$jscomp$0.start - request$jscomp$0.timeOrigin,\n                   end: ioInfo$jscomp$0.end - request$jscomp$0.timeOrigin\n                 };\n-                void 0 !== value && (debugIOInfo.value = value);\n                 null != env && (debugIOInfo.env = env);\n                 null != debugStack && (debugIOInfo.stack = debugStack);\n                 null != owner && (debugIOInfo.owner = owner);\n+                void 0 !== value && (debugIOInfo.value = value);\n                 value = serializeDebugModel(\n                   request$jscomp$0,\n                   objectLimit,\n@@ -2913,11 +2921,11 @@\n               null != info.env && (ioInfo.env = info.env);\n               null != info.owner && (ioInfo.owner = info.owner);\n               null != request && (ioInfo.stack = request);\n-              request$jscomp$1.pendingChunks++;\n+              request$jscomp$1.pendingDebugChunks++;\n               emitDebugChunk(request$jscomp$1, task, ioInfo);\n             }\n           } else\n-            request$jscomp$1.pendingChunks++,\n+            request$jscomp$1.pendingDebugChunks++,\n               emitDebugChunk(request$jscomp$1, task, info);\n       }\n     }\n@@ -3002,7 +3010,7 @@\n           task.implicitSlot = !1;\n           var currentEnv = (0, request.environmentName)();\n           currentEnv !== task.environmentName &&\n-            (request.pendingChunks++,\n+            (request.pendingDebugChunks++,\n             emitDebugChunk(request, task.id, { env: currentEnv }));\n           if (\"object\" === typeof resolvedModel && null !== resolvedModel)\n             request.writtenObjects.set(\n@@ -3018,11 +3026,13 @@\n           request.abortableTasks.delete(task);\n           callOnAllReadyIfReady(request);\n         } catch (thrownValue) {\n-          if (request.status === ABORTING)\n-            request.abortableTasks.delete(task),\n-              (task.status = 0),\n-              abortTask(task, request, request.fatalError);\n-          else {\n+          if (request.status === ABORTING) {\n+            request.abortableTasks.delete(task);\n+            task.status = 0;\n+            var errorId = request.fatalError;\n+            abortTask(task);\n+            finishAbortedTask(task, request, errorId);\n+          } else {\n             var x =\n               thrownValue === SuspenseException\n                 ? getSuspendedThenable()\n@@ -3075,9 +3085,11 @@\n           (currentRequest = prevRequest);\n       }\n     }\n-    function abortTask(task, request, errorId) {\n-      if (5 !== task.status) {\n-        task.status = 3;\n+    function abortTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishAbortedTask(task, request, errorId) {\n+      if (3 === task.status) {\n         var model = task.model;\n         \"object\" === typeof model &&\n           null !== model &&\n@@ -3117,7 +3129,7 @@\n         var debugChunks = request.completedDebugChunks;\n         for (i = 0; i < debugChunks.length; i++)\n           if (\n-            (request.pendingChunks--,\n+            (request.pendingDebugChunks--,\n             !writeChunkAndReturn(destination, debugChunks[i]))\n           ) {\n             request.destination = null;\n@@ -3158,6 +3170,7 @@\n             (writtenBytes = 0));\n       }\n       0 === request.pendingChunks &&\n+        0 === request.pendingDebugChunks &&\n         (request.status < ABORTING &&\n           request.cacheController.abort(\n             Error(\n@@ -3205,44 +3218,60 @@\n         }\n       }\n     }\n-    function abort(request, reason) {\n+    function finishAbort(request, abortedTasks, errorId) {\n       try {\n-        11 >= request.status &&\n-          ((request.status = ABORTING),\n-          request.cacheController.abort(reason),\n-          callOnAllReadyIfReady(request));\n-        var abortableTasks = request.abortableTasks;\n-        if (0 < abortableTasks.size) {\n-          var error =\n-              void 0 === reason\n-                ? Error(\n-                    \"The render was aborted by the server without a reason.\"\n-                  )\n-                : \"object\" === typeof reason &&\n-                    null !== reason &&\n-                    \"function\" === typeof reason.then\n-                  ? Error(\n-                      \"The render was aborted by the server with a promise.\"\n-                    )\n-                  : reason,\n-            digest = logRecoverableError(request, error, null),\n-            _errorId2 = request.nextChunkId++;\n-          request.fatalError = _errorId2;\n-          request.pendingChunks++;\n-          emitErrorChunk(request, _errorId2, digest, error, !1);\n-          abortableTasks.forEach(function (task) {\n-            return abortTask(task, request, _errorId2);\n-          });\n-          abortableTasks.clear();\n-          callOnAllReadyIfReady(request);\n-        }\n+        abortedTasks.forEach(function (task) {\n+          return finishAbortedTask(task, request, errorId);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n         null !== request.destination &&\n           flushCompletedChunks(request, request.destination);\n-      } catch (error$2) {\n-        logRecoverableError(request, error$2, null),\n-          fatalError(request, error$2);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n       }\n     }\n+    function abort(request, reason) {\n+      if (!(11 < request.status))\n+        try {\n+          request.status = ABORTING;\n+          request.cacheController.abort(reason);\n+          var abortableTasks = request.abortableTasks;\n+          if (0 < abortableTasks.size) {\n+            var error =\n+                void 0 === reason\n+                  ? Error(\n+                      \"The render was aborted by the server without a reason.\"\n+                    )\n+                  : \"object\" === typeof reason &&\n+                      null !== reason &&\n+                      \"function\" === typeof reason.then\n+                    ? Error(\n+                        \"The render was aborted by the server with a promise.\"\n+                      )\n+                    : reason,\n+              digest = logRecoverableError(request, error, null),\n+              _errorId2 = request.nextChunkId++;\n+            request.fatalError = _errorId2;\n+            request.pendingChunks++;\n+            emitErrorChunk(request, _errorId2, digest, error, !1);\n+            abortableTasks.forEach(function (task) {\n+              return abortTask(task, request, _errorId2);\n+            });\n+            scheduleWork(function () {\n+              return finishAbort(request, abortableTasks, _errorId2);\n+            });\n+          } else {\n+            var onAllReady = request.onAllReady;\n+            onAllReady();\n+            null !== request.destination &&\n+              flushCompletedChunks(request, request.destination);\n+          }\n+        } catch (error$2) {\n+          logRecoverableError(request, error$2, null),\n+            fatalError(request, error$2);\n+        }\n+    }\n     function fromHex(str) {\n       return parseInt(str, 16);\n     }\n@@ -3253,7 +3282,7 @@\n           \"resolveDebugMessage/closeDebugChannel should not be called for a Request that wasn't kept alive. This is a bug in React.\"\n         );\n       deferredDebugObjects.retained.forEach(function (value, id) {\n-        request.pendingChunks--;\n+        request.pendingDebugChunks--;\n         deferredDebugObjects.retained.delete(id);\n         deferredDebugObjects.existing.delete(value);\n       });\n@@ -4030,7 +4059,7 @@\n                 var id = message[command],\n                   retainedValue = deferredDebugObjects.retained.get(id);\n                 void 0 !== retainedValue &&\n-                  (request.pendingChunks--,\n+                  (request.pendingDebugChunks--,\n                   deferredDebugObjects.retained.delete(id),\n                   deferredDebugObjects.existing.delete(retainedValue),\n                   enqueueFlush(request));\n@@ -4041,7 +4070,9 @@\n                 (id = message[command]),\n                   (retainedValue = deferredDebugObjects.retained.get(id)),\n                   void 0 !== retainedValue &&\n-                    (emitOutlinedDebugModelChunk(\n+                    (deferredDebugObjects.retained.delete(id),\n+                    deferredDebugObjects.existing.delete(retainedValue),\n+                    emitOutlinedDebugModelChunk(\n                       request,\n                       id,\n                       { objectLimit: 10 },"
        },
        {
            "sha": "f588808d29c2cde93b70cbc98b52491ae2528831",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-server.browser.production.js",
            "status": "modified",
            "additions": 87,
            "deletions": 64,
            "changes": 151,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -790,7 +790,9 @@ function serializeThenable(request, task, thenable) {\n       if (12 === request.status)\n         return (\n           request.abortableTasks.delete(newTask),\n-          abortTask(newTask, request, request.fatalError),\n+          (task = request.fatalError),\n+          abortTask(newTask),\n+          finishAbortedTask(newTask, request, task),\n           newTask.id\n         );\n       \"string\" !== typeof thenable.status &&\n@@ -1297,7 +1299,7 @@ function outlineModel(request, value) {\n function serializeTypedArray(request, tag, typedArray) {\n   request.pendingChunks++;\n   var bufferId = request.nextChunkId++;\n-  emitTypedArrayChunk(request, bufferId, tag, typedArray);\n+  emitTypedArrayChunk(request, bufferId, tag, typedArray, !1);\n   return serializeByValueID(bufferId);\n }\n function serializeBlob(request, blob) {\n@@ -1544,7 +1546,7 @@ function renderModelDestructive(\n       return (\n         request.pendingChunks++,\n         (task = request.nextChunkId++),\n-        emitTextChunk(request, task, value),\n+        emitTextChunk(request, task, value, !1),\n         serializeByValueID(task)\n       );\n     request = \"$\" === value[0] ? \"$\" + value : value;\n@@ -1678,61 +1680,61 @@ function emitModelChunk(request, id, json) {\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id);\n }\n-function emitTypedArrayChunk(request, id, tag, typedArray) {\n-  request.pendingChunks++;\n-  var buffer = new Uint8Array(\n+function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n+  debug = new Uint8Array(\n     typedArray.buffer,\n     typedArray.byteOffset,\n     typedArray.byteLength\n   );\n-  typedArray = 2048 < typedArray.byteLength ? buffer.slice() : buffer;\n-  buffer = typedArray.byteLength;\n-  id = id.toString(16) + \":\" + tag + buffer.toString(16) + \",\";\n+  typedArray = 2048 < typedArray.byteLength ? debug.slice() : debug;\n+  debug = typedArray.byteLength;\n+  id = id.toString(16) + \":\" + tag + debug.toString(16) + \",\";\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id, typedArray);\n }\n-function emitTextChunk(request, id, text) {\n+function emitTextChunk(request, id, text, debug) {\n   if (null === byteLengthOfChunk)\n     throw Error(\n       \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n     );\n-  request.pendingChunks++;\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n   text = stringToChunk(text);\n-  var binaryLength = text.byteLength;\n-  id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n+  debug = text.byteLength;\n+  id = id.toString(16) + \":T\" + debug.toString(16) + \",\";\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id, text);\n }\n function emitChunk(request, task, value) {\n   var id = task.id;\n   \"string\" === typeof value && null !== byteLengthOfChunk\n-    ? emitTextChunk(request, id, value)\n+    ? emitTextChunk(request, id, value, !1)\n     : value instanceof ArrayBuffer\n-      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value))\n+      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value), !1)\n       : value instanceof Int8Array\n-        ? emitTypedArrayChunk(request, id, \"O\", value)\n+        ? emitTypedArrayChunk(request, id, \"O\", value, !1)\n         : value instanceof Uint8Array\n-          ? emitTypedArrayChunk(request, id, \"o\", value)\n+          ? emitTypedArrayChunk(request, id, \"o\", value, !1)\n           : value instanceof Uint8ClampedArray\n-            ? emitTypedArrayChunk(request, id, \"U\", value)\n+            ? emitTypedArrayChunk(request, id, \"U\", value, !1)\n             : value instanceof Int16Array\n-              ? emitTypedArrayChunk(request, id, \"S\", value)\n+              ? emitTypedArrayChunk(request, id, \"S\", value, !1)\n               : value instanceof Uint16Array\n-                ? emitTypedArrayChunk(request, id, \"s\", value)\n+                ? emitTypedArrayChunk(request, id, \"s\", value, !1)\n                 : value instanceof Int32Array\n-                  ? emitTypedArrayChunk(request, id, \"L\", value)\n+                  ? emitTypedArrayChunk(request, id, \"L\", value, !1)\n                   : value instanceof Uint32Array\n-                    ? emitTypedArrayChunk(request, id, \"l\", value)\n+                    ? emitTypedArrayChunk(request, id, \"l\", value, !1)\n                     : value instanceof Float32Array\n-                      ? emitTypedArrayChunk(request, id, \"G\", value)\n+                      ? emitTypedArrayChunk(request, id, \"G\", value, !1)\n                       : value instanceof Float64Array\n-                        ? emitTypedArrayChunk(request, id, \"g\", value)\n+                        ? emitTypedArrayChunk(request, id, \"g\", value, !1)\n                         : value instanceof BigInt64Array\n-                          ? emitTypedArrayChunk(request, id, \"M\", value)\n+                          ? emitTypedArrayChunk(request, id, \"M\", value, !1)\n                           : value instanceof BigUint64Array\n-                            ? emitTypedArrayChunk(request, id, \"m\", value)\n+                            ? emitTypedArrayChunk(request, id, \"m\", value, !1)\n                             : value instanceof DataView\n-                              ? emitTypedArrayChunk(request, id, \"V\", value)\n+                              ? emitTypedArrayChunk(request, id, \"V\", value, !1)\n                               : ((value = stringify(value, task.toJSON)),\n                                 emitModelChunk(request, task.id, value));\n }\n@@ -1771,11 +1773,13 @@ function retryTask(request, task) {\n       request.abortableTasks.delete(task);\n       callOnAllReadyIfReady(request);\n     } catch (thrownValue) {\n-      if (12 === request.status)\n-        request.abortableTasks.delete(task),\n-          (task.status = 0),\n-          abortTask(task, request, request.fatalError);\n-      else {\n+      if (12 === request.status) {\n+        request.abortableTasks.delete(task);\n+        task.status = 0;\n+        var errorId = request.fatalError;\n+        abortTask(task);\n+        finishAbortedTask(task, request, errorId);\n+      } else {\n         var x =\n           thrownValue === SuspenseException\n             ? getSuspendedThenable()\n@@ -1824,10 +1828,12 @@ function performWork(request) {\n       (currentRequest = prevRequest);\n   }\n }\n-function abortTask(task, request, errorId) {\n-  5 !== task.status &&\n-    ((task.status = 3),\n-    (errorId = serializeByValueID(errorId)),\n+function abortTask(task) {\n+  0 === task.status && (task.status = 3);\n+}\n+function finishAbortedTask(task, request, errorId) {\n+  3 === task.status &&\n+    ((errorId = serializeByValueID(errorId)),\n     (task = encodeReferenceChunk(request, task.id, errorId)),\n     request.completedErrorChunks.push(task));\n }\n@@ -1913,39 +1919,56 @@ function startFlowing(request, destination) {\n     }\n   }\n }\n-function abort(request, reason) {\n+function finishAbort(request, abortedTasks, errorId) {\n   try {\n-    11 >= request.status &&\n-      ((request.status = 12),\n-      request.cacheController.abort(reason),\n-      callOnAllReadyIfReady(request));\n-    var abortableTasks = request.abortableTasks;\n-    if (0 < abortableTasks.size) {\n-      var error =\n-          void 0 === reason\n-            ? Error(\"The render was aborted by the server without a reason.\")\n-            : \"object\" === typeof reason &&\n-                null !== reason &&\n-                \"function\" === typeof reason.then\n-              ? Error(\"The render was aborted by the server with a promise.\")\n-              : reason,\n-        digest = logRecoverableError(request, error, null),\n-        errorId = request.nextChunkId++;\n-      request.fatalError = errorId;\n-      request.pendingChunks++;\n-      emitErrorChunk(request, errorId, digest, error, !1);\n-      abortableTasks.forEach(function (task) {\n-        return abortTask(task, request, errorId);\n-      });\n-      abortableTasks.clear();\n-      callOnAllReadyIfReady(request);\n-    }\n+    abortedTasks.forEach(function (task) {\n+      return finishAbortedTask(task, request, errorId);\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n     null !== request.destination &&\n       flushCompletedChunks(request, request.destination);\n-  } catch (error$24) {\n-    logRecoverableError(request, error$24, null), fatalError(request, error$24);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n   }\n }\n+function abort(request, reason) {\n+  if (!(11 < request.status))\n+    try {\n+      request.status = 12;\n+      request.cacheController.abort(reason);\n+      var abortableTasks = request.abortableTasks;\n+      if (0 < abortableTasks.size) {\n+        var error =\n+            void 0 === reason\n+              ? Error(\"The render was aborted by the server without a reason.\")\n+              : \"object\" === typeof reason &&\n+                  null !== reason &&\n+                  \"function\" === typeof reason.then\n+                ? Error(\"The render was aborted by the server with a promise.\")\n+                : reason,\n+          digest = logRecoverableError(request, error, null),\n+          errorId = request.nextChunkId++;\n+        request.fatalError = errorId;\n+        request.pendingChunks++;\n+        emitErrorChunk(request, errorId, digest, error, !1);\n+        abortableTasks.forEach(function (task) {\n+          return abortTask(task, request, errorId);\n+        });\n+        scheduleWork(function () {\n+          return finishAbort(request, abortableTasks, errorId);\n+        });\n+      } else {\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      }\n+    } catch (error$24) {\n+      logRecoverableError(request, error$24, null),\n+        fatalError(request, error$24);\n+    }\n+}\n function resolveServerReference(bundlerConfig, id) {\n   var name = \"\",\n     resolvedModuleData = bundlerConfig[id];"
        },
        {
            "sha": "412a9aa1e0163c971437e5ea6b3a05e7d04119dc",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-server.edge.development.js",
            "status": "modified",
            "additions": 101,
            "deletions": 70,
            "changes": 171,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -656,9 +656,9 @@\n             suffixIdx = url.lastIndexOf(\"?\");\n           -1 < envIdx &&\n             -1 < suffixIdx &&\n-            (url = url.slice(envIdx + 1, suffixIdx));\n+            (url = decodeURI(url.slice(envIdx + 1, suffixIdx)));\n         }\n-        request(url, functionName) &&\n+        request(url, functionName, callsite[2], callsite[3]) &&\n           ((callsite = callsite.slice(0)),\n           (callsite[1] = url),\n           filteredStack.push(callsite));\n@@ -681,7 +681,7 @@\n               request,\n               parseStackTrace(Error(\"react-stack-top-frame\"), 1)\n             );\n-            request.pendingChunks++;\n+            request.pendingDebugChunks++;\n             var owner = resolveOwner(),\n               args = Array.from(arguments);\n             a: {\n@@ -712,9 +712,13 @@\n             null != owner && outlineComponentInfo(request, owner);\n             format = [methodName, stack, owner, env];\n             format.push.apply(format, args);\n-            args = serializeDebugModel(request, 500, format);\n+            args = serializeDebugModel(\n+              request,\n+              (null === request.deferredDebugObjects ? 500 : 10) + stack.length,\n+              format\n+            );\n             \"[\" !== args[0] &&\n-              (args = serializeDebugModel(request, 500, [\n+              (args = serializeDebugModel(request, 10 + stack.length, [\n                 methodName,\n                 stack,\n                 owner,\n@@ -844,6 +848,7 @@\n         void 0 === onPostpone ? defaultPostponeHandler : onPostpone;\n       this.onAllReady = onAllReady;\n       this.onFatalError = onFatalError;\n+      this.pendingDebugChunks = 0;\n       this.completedDebugChunks = [];\n       this.environmentName =\n         void 0 === environmentName\n@@ -932,7 +937,7 @@\n       return null;\n     }\n     function serializeDebugThenable(request, counter, thenable) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var id = request.nextChunkId++,\n         ref = \"$@\" + id.toString(16);\n       request.writtenDebugObjects.set(thenable, ref);\n@@ -1005,7 +1010,9 @@\n           if (request.status === ABORTING)\n             return (\n               request.abortableTasks.delete(newTask),\n-              abortTask(newTask, request, request.fatalError),\n+              (task = request.fatalError),\n+              abortTask(newTask),\n+              finishAbortedTask(newTask, request, task),\n               newTask.id\n             );\n           \"string\" !== typeof thenable.status &&\n@@ -1332,7 +1339,7 @@\n           var componentDebugID = task.id;\n           componentDebugInfo = Component.displayName || Component.name || \"\";\n           var componentEnv = (0, request.environmentName)();\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           componentDebugInfo = {\n             name: componentDebugInfo,\n             env: componentEnv,\n@@ -1754,7 +1761,7 @@\n     function serializeDeferredObject(request, value) {\n       var deferredDebugObjects = request.deferredDebugObjects;\n       return null !== deferredDebugObjects\n-        ? (request.pendingChunks++,\n+        ? (request.pendingDebugChunks++,\n           (request = request.nextChunkId++),\n           deferredDebugObjects.existing.set(value, request),\n           deferredDebugObjects.retained.set(request, value),\n@@ -1834,15 +1841,15 @@\n           request.bundlerConfig,\n           clientReference\n         );\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         var importId = request.nextChunkId++;\n         emitImportChunk(request, importId, clientReferenceMetadata, !0);\n         return parent[0] === REACT_ELEMENT_TYPE && \"1\" === parentPropertyName\n           ? serializeLazyID(importId)\n           : serializeByValueID(importId);\n       } catch (x) {\n         return (\n-          request.pendingChunks++,\n+          request.pendingDebugChunks++,\n           (parent = request.nextChunkId++),\n           (parentPropertyName = logRecoverableError(request, x, null)),\n           emitErrorChunk(request, parent, parentPropertyName, x, !0),\n@@ -1921,7 +1928,7 @@\n       return serializeByValueID(bufferId);\n     }\n     function serializeDebugTypedArray(request, tag, typedArray) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var bufferId = request.nextChunkId++;\n       emitTypedArrayChunk(request, bufferId, tag, typedArray, !0);\n       return serializeByValueID(bufferId);\n@@ -1947,8 +1954,9 @@\n         reader.cancel(reason).then(noop, noop);\n       }\n       var model = [blob.type],\n-        reader = blob.stream().getReader(),\n-        id = request.nextChunkId++;\n+        reader = blob.stream().getReader();\n+      request.pendingDebugChunks++;\n+      var id = request.nextChunkId++;\n       reader.read().then(progress).catch(error);\n       return \"$B\" + id.toString(16);\n     }\n@@ -2535,7 +2543,7 @@\n       }\n     }\n     function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       var buffer = new Uint8Array(\n         typedArray.buffer,\n         typedArray.byteOffset,\n@@ -2554,7 +2562,7 @@\n         throw Error(\n           \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n         );\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       text = stringToChunk(text);\n       var binaryLength = text.byteLength;\n       id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n@@ -2793,7 +2801,7 @@\n           if (0 >= counter.objectLimit)\n             return serializeDeferredObject(request, value);\n           counter.objectLimit--;\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           counter = request.nextChunkId++;\n           emitTextChunk(request, counter, value, !0);\n           return serializeByValueID(counter);\n@@ -2821,7 +2829,7 @@\n         ref = counter.get(value);\n         if (void 0 !== ref) return ref;\n         key = \"$E(\" + (Function.prototype.toString.call(value) + \")\");\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         ref = request.nextChunkId++;\n         key = encodeReferenceChunk(request, ref, key);\n         request.completedDebugChunks.push(key);\n@@ -2914,7 +2922,7 @@\n     }\n     function outlineDebugModel(request, counter, model) {\n       var id = request.nextChunkId++;\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       emitOutlinedDebugModelChunk(request, id, counter, model);\n       return id;\n     }\n@@ -2925,15 +2933,15 @@\n         if (\"number\" !== typeof info.time)\n           if (\"string\" === typeof info.name)\n             outlineComponentInfo(request$jscomp$1, info),\n-              request$jscomp$1.pendingChunks++,\n+              request$jscomp$1.pendingDebugChunks++,\n               emitDebugChunk(request$jscomp$1, task, info);\n           else if (info.awaited) {\n             var ioInfo = info.awaited;\n             if (!(ioInfo.end <= request$jscomp$1.timeOrigin)) {\n               var request = request$jscomp$1,\n                 ioInfo$jscomp$0 = ioInfo;\n               if (!request.writtenObjects.has(ioInfo$jscomp$0)) {\n-                request.pendingChunks++;\n+                request.pendingDebugChunks++;\n                 var id = request.nextChunkId++,\n                   owner = ioInfo$jscomp$0.owner;\n                 null != owner && outlineComponentInfo(request, owner);\n@@ -2956,10 +2964,10 @@\n                   start: ioInfo$jscomp$0.start - request$jscomp$0.timeOrigin,\n                   end: ioInfo$jscomp$0.end - request$jscomp$0.timeOrigin\n                 };\n-                void 0 !== value && (debugIOInfo.value = value);\n                 null != env && (debugIOInfo.env = env);\n                 null != debugStack && (debugIOInfo.stack = debugStack);\n                 null != owner && (debugIOInfo.owner = owner);\n+                void 0 !== value && (debugIOInfo.value = value);\n                 value = serializeDebugModel(\n                   request$jscomp$0,\n                   objectLimit,\n@@ -2984,11 +2992,11 @@\n               null != info.env && (ioInfo.env = info.env);\n               null != info.owner && (ioInfo.owner = info.owner);\n               null != request && (ioInfo.stack = request);\n-              request$jscomp$1.pendingChunks++;\n+              request$jscomp$1.pendingDebugChunks++;\n               emitDebugChunk(request$jscomp$1, task, ioInfo);\n             }\n           } else\n-            request$jscomp$1.pendingChunks++,\n+            request$jscomp$1.pendingDebugChunks++,\n               emitDebugChunk(request$jscomp$1, task, info);\n       }\n     }\n@@ -3073,7 +3081,7 @@\n           task.implicitSlot = !1;\n           var currentEnv = (0, request.environmentName)();\n           currentEnv !== task.environmentName &&\n-            (request.pendingChunks++,\n+            (request.pendingDebugChunks++,\n             emitDebugChunk(request, task.id, { env: currentEnv }));\n           if (\"object\" === typeof resolvedModel && null !== resolvedModel)\n             request.writtenObjects.set(\n@@ -3089,11 +3097,13 @@\n           request.abortableTasks.delete(task);\n           callOnAllReadyIfReady(request);\n         } catch (thrownValue) {\n-          if (request.status === ABORTING)\n-            request.abortableTasks.delete(task),\n-              (task.status = 0),\n-              abortTask(task, request, request.fatalError);\n-          else {\n+          if (request.status === ABORTING) {\n+            request.abortableTasks.delete(task);\n+            task.status = 0;\n+            var errorId = request.fatalError;\n+            abortTask(task);\n+            finishAbortedTask(task, request, errorId);\n+          } else {\n             var x =\n               thrownValue === SuspenseException\n                 ? getSuspendedThenable()\n@@ -3146,9 +3156,11 @@\n           (currentRequest = prevRequest);\n       }\n     }\n-    function abortTask(task, request, errorId) {\n-      if (5 !== task.status) {\n-        task.status = 3;\n+    function abortTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishAbortedTask(task, request, errorId) {\n+      if (3 === task.status) {\n         var model = task.model;\n         \"object\" === typeof model &&\n           null !== model &&\n@@ -3188,7 +3200,7 @@\n         var debugChunks = request.completedDebugChunks;\n         for (i = 0; i < debugChunks.length; i++)\n           if (\n-            (request.pendingChunks--,\n+            (request.pendingDebugChunks--,\n             !writeChunkAndReturn(destination, debugChunks[i]))\n           ) {\n             request.destination = null;\n@@ -3229,6 +3241,7 @@\n             (writtenBytes = 0));\n       }\n       0 === request.pendingChunks &&\n+        0 === request.pendingDebugChunks &&\n         (request.status < ABORTING &&\n           request.cacheController.abort(\n             Error(\n@@ -3280,44 +3293,60 @@\n         }\n       }\n     }\n-    function abort(request, reason) {\n+    function finishAbort(request, abortedTasks, errorId) {\n       try {\n-        11 >= request.status &&\n-          ((request.status = ABORTING),\n-          request.cacheController.abort(reason),\n-          callOnAllReadyIfReady(request));\n-        var abortableTasks = request.abortableTasks;\n-        if (0 < abortableTasks.size) {\n-          var error =\n-              void 0 === reason\n-                ? Error(\n-                    \"The render was aborted by the server without a reason.\"\n-                  )\n-                : \"object\" === typeof reason &&\n-                    null !== reason &&\n-                    \"function\" === typeof reason.then\n-                  ? Error(\n-                      \"The render was aborted by the server with a promise.\"\n-                    )\n-                  : reason,\n-            digest = logRecoverableError(request, error, null),\n-            _errorId2 = request.nextChunkId++;\n-          request.fatalError = _errorId2;\n-          request.pendingChunks++;\n-          emitErrorChunk(request, _errorId2, digest, error, !1);\n-          abortableTasks.forEach(function (task) {\n-            return abortTask(task, request, _errorId2);\n-          });\n-          abortableTasks.clear();\n-          callOnAllReadyIfReady(request);\n-        }\n+        abortedTasks.forEach(function (task) {\n+          return finishAbortedTask(task, request, errorId);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n         null !== request.destination &&\n           flushCompletedChunks(request, request.destination);\n-      } catch (error$2) {\n-        logRecoverableError(request, error$2, null),\n-          fatalError(request, error$2);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n       }\n     }\n+    function abort(request, reason) {\n+      if (!(11 < request.status))\n+        try {\n+          request.status = ABORTING;\n+          request.cacheController.abort(reason);\n+          var abortableTasks = request.abortableTasks;\n+          if (0 < abortableTasks.size) {\n+            var error =\n+                void 0 === reason\n+                  ? Error(\n+                      \"The render was aborted by the server without a reason.\"\n+                    )\n+                  : \"object\" === typeof reason &&\n+                      null !== reason &&\n+                      \"function\" === typeof reason.then\n+                    ? Error(\n+                        \"The render was aborted by the server with a promise.\"\n+                      )\n+                    : reason,\n+              digest = logRecoverableError(request, error, null),\n+              _errorId2 = request.nextChunkId++;\n+            request.fatalError = _errorId2;\n+            request.pendingChunks++;\n+            emitErrorChunk(request, _errorId2, digest, error, !1);\n+            abortableTasks.forEach(function (task) {\n+              return abortTask(task, request, _errorId2);\n+            });\n+            setTimeout(function () {\n+              return finishAbort(request, abortableTasks, _errorId2);\n+            }, 0);\n+          } else {\n+            var onAllReady = request.onAllReady;\n+            onAllReady();\n+            null !== request.destination &&\n+              flushCompletedChunks(request, request.destination);\n+          }\n+        } catch (error$2) {\n+          logRecoverableError(request, error$2, null),\n+            fatalError(request, error$2);\n+        }\n+    }\n     function fromHex(str) {\n       return parseInt(str, 16);\n     }\n@@ -3328,7 +3357,7 @@\n           \"resolveDebugMessage/closeDebugChannel should not be called for a Request that wasn't kept alive. This is a bug in React.\"\n         );\n       deferredDebugObjects.retained.forEach(function (value, id) {\n-        request.pendingChunks--;\n+        request.pendingDebugChunks--;\n         deferredDebugObjects.retained.delete(id);\n         deferredDebugObjects.existing.delete(value);\n       });\n@@ -4105,7 +4134,7 @@\n                 var id = message[command],\n                   retainedValue = deferredDebugObjects.retained.get(id);\n                 void 0 !== retainedValue &&\n-                  (request.pendingChunks--,\n+                  (request.pendingDebugChunks--,\n                   deferredDebugObjects.retained.delete(id),\n                   deferredDebugObjects.existing.delete(retainedValue),\n                   enqueueFlush(request));\n@@ -4116,7 +4145,9 @@\n                 (id = message[command]),\n                   (retainedValue = deferredDebugObjects.retained.get(id)),\n                   void 0 !== retainedValue &&\n-                    (emitOutlinedDebugModelChunk(\n+                    (deferredDebugObjects.retained.delete(id),\n+                    deferredDebugObjects.existing.delete(retainedValue),\n+                    emitOutlinedDebugModelChunk(\n                       request,\n                       id,\n                       { objectLimit: 10 },"
        },
        {
            "sha": "cdaf11d4fe8f95edc0c410b1508e7fdf09d90ab9",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-server.edge.production.js",
            "status": "modified",
            "additions": 87,
            "deletions": 64,
            "changes": 151,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -789,7 +789,9 @@ function serializeThenable(request, task, thenable) {\n       if (12 === request.status)\n         return (\n           request.abortableTasks.delete(newTask),\n-          abortTask(newTask, request, request.fatalError),\n+          (task = request.fatalError),\n+          abortTask(newTask),\n+          finishAbortedTask(newTask, request, task),\n           newTask.id\n         );\n       \"string\" !== typeof thenable.status &&\n@@ -1296,7 +1298,7 @@ function outlineModel(request, value) {\n function serializeTypedArray(request, tag, typedArray) {\n   request.pendingChunks++;\n   var bufferId = request.nextChunkId++;\n-  emitTypedArrayChunk(request, bufferId, tag, typedArray);\n+  emitTypedArrayChunk(request, bufferId, tag, typedArray, !1);\n   return serializeByValueID(bufferId);\n }\n function serializeBlob(request, blob) {\n@@ -1543,7 +1545,7 @@ function renderModelDestructive(\n       return (\n         request.pendingChunks++,\n         (task = request.nextChunkId++),\n-        emitTextChunk(request, task, value),\n+        emitTextChunk(request, task, value, !1),\n         serializeByValueID(task)\n       );\n     request = \"$\" === value[0] ? \"$\" + value : value;\n@@ -1679,61 +1681,61 @@ function emitModelChunk(request, id, json) {\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id);\n }\n-function emitTypedArrayChunk(request, id, tag, typedArray) {\n-  request.pendingChunks++;\n-  var buffer = new Uint8Array(\n+function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n+  debug = new Uint8Array(\n     typedArray.buffer,\n     typedArray.byteOffset,\n     typedArray.byteLength\n   );\n-  typedArray = 2048 < typedArray.byteLength ? buffer.slice() : buffer;\n-  buffer = typedArray.byteLength;\n-  id = id.toString(16) + \":\" + tag + buffer.toString(16) + \",\";\n+  typedArray = 2048 < typedArray.byteLength ? debug.slice() : debug;\n+  debug = typedArray.byteLength;\n+  id = id.toString(16) + \":\" + tag + debug.toString(16) + \",\";\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id, typedArray);\n }\n-function emitTextChunk(request, id, text) {\n+function emitTextChunk(request, id, text, debug) {\n   if (null === byteLengthOfChunk)\n     throw Error(\n       \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n     );\n-  request.pendingChunks++;\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n   text = stringToChunk(text);\n-  var binaryLength = text.byteLength;\n-  id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n+  debug = text.byteLength;\n+  id = id.toString(16) + \":T\" + debug.toString(16) + \",\";\n   id = stringToChunk(id);\n   request.completedRegularChunks.push(id, text);\n }\n function emitChunk(request, task, value) {\n   var id = task.id;\n   \"string\" === typeof value && null !== byteLengthOfChunk\n-    ? emitTextChunk(request, id, value)\n+    ? emitTextChunk(request, id, value, !1)\n     : value instanceof ArrayBuffer\n-      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value))\n+      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value), !1)\n       : value instanceof Int8Array\n-        ? emitTypedArrayChunk(request, id, \"O\", value)\n+        ? emitTypedArrayChunk(request, id, \"O\", value, !1)\n         : value instanceof Uint8Array\n-          ? emitTypedArrayChunk(request, id, \"o\", value)\n+          ? emitTypedArrayChunk(request, id, \"o\", value, !1)\n           : value instanceof Uint8ClampedArray\n-            ? emitTypedArrayChunk(request, id, \"U\", value)\n+            ? emitTypedArrayChunk(request, id, \"U\", value, !1)\n             : value instanceof Int16Array\n-              ? emitTypedArrayChunk(request, id, \"S\", value)\n+              ? emitTypedArrayChunk(request, id, \"S\", value, !1)\n               : value instanceof Uint16Array\n-                ? emitTypedArrayChunk(request, id, \"s\", value)\n+                ? emitTypedArrayChunk(request, id, \"s\", value, !1)\n                 : value instanceof Int32Array\n-                  ? emitTypedArrayChunk(request, id, \"L\", value)\n+                  ? emitTypedArrayChunk(request, id, \"L\", value, !1)\n                   : value instanceof Uint32Array\n-                    ? emitTypedArrayChunk(request, id, \"l\", value)\n+                    ? emitTypedArrayChunk(request, id, \"l\", value, !1)\n                     : value instanceof Float32Array\n-                      ? emitTypedArrayChunk(request, id, \"G\", value)\n+                      ? emitTypedArrayChunk(request, id, \"G\", value, !1)\n                       : value instanceof Float64Array\n-                        ? emitTypedArrayChunk(request, id, \"g\", value)\n+                        ? emitTypedArrayChunk(request, id, \"g\", value, !1)\n                         : value instanceof BigInt64Array\n-                          ? emitTypedArrayChunk(request, id, \"M\", value)\n+                          ? emitTypedArrayChunk(request, id, \"M\", value, !1)\n                           : value instanceof BigUint64Array\n-                            ? emitTypedArrayChunk(request, id, \"m\", value)\n+                            ? emitTypedArrayChunk(request, id, \"m\", value, !1)\n                             : value instanceof DataView\n-                              ? emitTypedArrayChunk(request, id, \"V\", value)\n+                              ? emitTypedArrayChunk(request, id, \"V\", value, !1)\n                               : ((value = stringify(value, task.toJSON)),\n                                 emitModelChunk(request, task.id, value));\n }\n@@ -1772,11 +1774,13 @@ function retryTask(request, task) {\n       request.abortableTasks.delete(task);\n       callOnAllReadyIfReady(request);\n     } catch (thrownValue) {\n-      if (12 === request.status)\n-        request.abortableTasks.delete(task),\n-          (task.status = 0),\n-          abortTask(task, request, request.fatalError);\n-      else {\n+      if (12 === request.status) {\n+        request.abortableTasks.delete(task);\n+        task.status = 0;\n+        var errorId = request.fatalError;\n+        abortTask(task);\n+        finishAbortedTask(task, request, errorId);\n+      } else {\n         var x =\n           thrownValue === SuspenseException\n             ? getSuspendedThenable()\n@@ -1825,10 +1829,12 @@ function performWork(request) {\n       (currentRequest = prevRequest);\n   }\n }\n-function abortTask(task, request, errorId) {\n-  5 !== task.status &&\n-    ((task.status = 3),\n-    (errorId = serializeByValueID(errorId)),\n+function abortTask(task) {\n+  0 === task.status && (task.status = 3);\n+}\n+function finishAbortedTask(task, request, errorId) {\n+  3 === task.status &&\n+    ((errorId = serializeByValueID(errorId)),\n     (task = encodeReferenceChunk(request, task.id, errorId)),\n     request.completedErrorChunks.push(task));\n }\n@@ -1918,39 +1924,56 @@ function startFlowing(request, destination) {\n     }\n   }\n }\n-function abort(request, reason) {\n+function finishAbort(request, abortedTasks, errorId) {\n   try {\n-    11 >= request.status &&\n-      ((request.status = 12),\n-      request.cacheController.abort(reason),\n-      callOnAllReadyIfReady(request));\n-    var abortableTasks = request.abortableTasks;\n-    if (0 < abortableTasks.size) {\n-      var error =\n-          void 0 === reason\n-            ? Error(\"The render was aborted by the server without a reason.\")\n-            : \"object\" === typeof reason &&\n-                null !== reason &&\n-                \"function\" === typeof reason.then\n-              ? Error(\"The render was aborted by the server with a promise.\")\n-              : reason,\n-        digest = logRecoverableError(request, error, null),\n-        errorId = request.nextChunkId++;\n-      request.fatalError = errorId;\n-      request.pendingChunks++;\n-      emitErrorChunk(request, errorId, digest, error, !1);\n-      abortableTasks.forEach(function (task) {\n-        return abortTask(task, request, errorId);\n-      });\n-      abortableTasks.clear();\n-      callOnAllReadyIfReady(request);\n-    }\n+    abortedTasks.forEach(function (task) {\n+      return finishAbortedTask(task, request, errorId);\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n     null !== request.destination &&\n       flushCompletedChunks(request, request.destination);\n-  } catch (error$24) {\n-    logRecoverableError(request, error$24, null), fatalError(request, error$24);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n   }\n }\n+function abort(request, reason) {\n+  if (!(11 < request.status))\n+    try {\n+      request.status = 12;\n+      request.cacheController.abort(reason);\n+      var abortableTasks = request.abortableTasks;\n+      if (0 < abortableTasks.size) {\n+        var error =\n+            void 0 === reason\n+              ? Error(\"The render was aborted by the server without a reason.\")\n+              : \"object\" === typeof reason &&\n+                  null !== reason &&\n+                  \"function\" === typeof reason.then\n+                ? Error(\"The render was aborted by the server with a promise.\")\n+                : reason,\n+          digest = logRecoverableError(request, error, null),\n+          errorId = request.nextChunkId++;\n+        request.fatalError = errorId;\n+        request.pendingChunks++;\n+        emitErrorChunk(request, errorId, digest, error, !1);\n+        abortableTasks.forEach(function (task) {\n+          return abortTask(task, request, errorId);\n+        });\n+        setTimeout(function () {\n+          return finishAbort(request, abortableTasks, errorId);\n+        }, 0);\n+      } else {\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      }\n+    } catch (error$24) {\n+      logRecoverableError(request, error$24, null),\n+        fatalError(request, error$24);\n+    }\n+}\n function resolveServerReference(bundlerConfig, id) {\n   var name = \"\",\n     resolvedModuleData = bundlerConfig[id];"
        },
        {
            "sha": "c4fce5c83c662585e247572e7952b70ce59e10c3",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-server.node.development.js",
            "status": "modified",
            "additions": 104,
            "deletions": 73,
            "changes": 177,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -680,9 +680,9 @@\n             suffixIdx = url.lastIndexOf(\"?\");\n           -1 < envIdx &&\n             -1 < suffixIdx &&\n-            (url = url.slice(envIdx + 1, suffixIdx));\n+            (url = decodeURI(url.slice(envIdx + 1, suffixIdx)));\n         }\n-        request(url, functionName) &&\n+        request(url, functionName, callsite[2], callsite[3]) &&\n           ((callsite = callsite.slice(0)),\n           (callsite[1] = url),\n           filteredStack.push(callsite));\n@@ -705,7 +705,7 @@\n               request,\n               parseStackTrace(Error(\"react-stack-top-frame\"), 1)\n             );\n-            request.pendingChunks++;\n+            request.pendingDebugChunks++;\n             var owner = resolveOwner(),\n               args = Array.from(arguments);\n             a: {\n@@ -736,9 +736,13 @@\n             null != owner && outlineComponentInfo(request, owner);\n             format = [methodName, stack, owner, env];\n             format.push.apply(format, args);\n-            args = serializeDebugModel(request, 500, format);\n+            args = serializeDebugModel(\n+              request,\n+              (null === request.deferredDebugObjects ? 500 : 10) + stack.length,\n+              format\n+            );\n             \"[\" !== args[0] &&\n-              (args = serializeDebugModel(request, 500, [\n+              (args = serializeDebugModel(request, 10 + stack.length, [\n                 methodName,\n                 stack,\n                 owner,\n@@ -867,6 +871,7 @@\n         void 0 === onPostpone ? defaultPostponeHandler : onPostpone;\n       this.onAllReady = onAllReady;\n       this.onFatalError = onFatalError;\n+      this.pendingDebugChunks = 0;\n       this.completedDebugChunks = [];\n       this.environmentName =\n         void 0 === environmentName\n@@ -952,7 +957,7 @@\n       return store ? store : null;\n     }\n     function serializeDebugThenable(request, counter, thenable) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var id = request.nextChunkId++,\n         ref = \"$@\" + id.toString(16);\n       request.writtenDebugObjects.set(thenable, ref);\n@@ -1025,7 +1030,9 @@\n           if (request.status === ABORTING)\n             return (\n               request.abortableTasks.delete(newTask),\n-              abortTask(newTask, request, request.fatalError),\n+              (task = request.fatalError),\n+              abortTask(newTask),\n+              finishAbortedTask(newTask, request, task),\n               newTask.id\n             );\n           \"string\" !== typeof thenable.status &&\n@@ -1351,7 +1358,7 @@\n           var componentDebugID = task.id;\n           componentDebugInfo = Component.displayName || Component.name || \"\";\n           var componentEnv = (0, request.environmentName)();\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           componentDebugInfo = {\n             name: componentDebugInfo,\n             env: componentEnv,\n@@ -1751,7 +1758,7 @@\n     function serializeDeferredObject(request, value) {\n       var deferredDebugObjects = request.deferredDebugObjects;\n       return null !== deferredDebugObjects\n-        ? (request.pendingChunks++,\n+        ? (request.pendingDebugChunks++,\n           (request = request.nextChunkId++),\n           deferredDebugObjects.existing.set(value, request),\n           deferredDebugObjects.retained.set(request, value),\n@@ -1830,15 +1837,15 @@\n           request.bundlerConfig,\n           clientReference\n         );\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         var importId = request.nextChunkId++;\n         emitImportChunk(request, importId, clientReferenceMetadata, !0);\n         return parent[0] === REACT_ELEMENT_TYPE && \"1\" === parentPropertyName\n           ? serializeLazyID(importId)\n           : serializeByValueID(importId);\n       } catch (x) {\n         return (\n-          request.pendingChunks++,\n+          request.pendingDebugChunks++,\n           (parent = request.nextChunkId++),\n           (parentPropertyName = logRecoverableError(request, x, null)),\n           emitErrorChunk(request, parent, parentPropertyName, x, !0),\n@@ -1917,7 +1924,7 @@\n       return serializeByValueID(bufferId);\n     }\n     function serializeDebugTypedArray(request, tag, typedArray) {\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       var bufferId = request.nextChunkId++;\n       emitTypedArrayChunk(request, bufferId, tag, typedArray, !0);\n       return serializeByValueID(bufferId);\n@@ -1943,8 +1950,9 @@\n         reader.cancel(reason).then(noop, noop);\n       }\n       var model = [blob.type],\n-        reader = blob.stream().getReader(),\n-        id = request.nextChunkId++;\n+        reader = blob.stream().getReader();\n+      request.pendingDebugChunks++;\n+      var id = request.nextChunkId++;\n       reader.read().then(progress).catch(error);\n       return \"$B\" + id.toString(16);\n     }\n@@ -2517,7 +2525,7 @@\n       }\n     }\n     function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       typedArray = new Uint8Array(\n         typedArray.buffer,\n         typedArray.byteOffset,\n@@ -2534,7 +2542,7 @@\n         throw Error(\n           \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n         );\n-      request.pendingChunks++;\n+      debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n       var binaryLength = byteLengthOfChunk(text);\n       id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n       debug\n@@ -2771,7 +2779,7 @@\n           if (0 >= counter.objectLimit)\n             return serializeDeferredObject(request, value);\n           counter.objectLimit--;\n-          request.pendingChunks++;\n+          request.pendingDebugChunks++;\n           counter = request.nextChunkId++;\n           emitTextChunk(request, counter, value, !0);\n           return serializeByValueID(counter);\n@@ -2799,7 +2807,7 @@\n         ref = counter.get(value);\n         if (void 0 !== ref) return ref;\n         key = \"$E(\" + (Function.prototype.toString.call(value) + \")\");\n-        request.pendingChunks++;\n+        request.pendingDebugChunks++;\n         ref = request.nextChunkId++;\n         key = encodeReferenceChunk(request, ref, key);\n         request.completedDebugChunks.push(key);\n@@ -2891,7 +2899,7 @@\n     }\n     function outlineDebugModel(request, counter, model) {\n       var id = request.nextChunkId++;\n-      request.pendingChunks++;\n+      request.pendingDebugChunks++;\n       emitOutlinedDebugModelChunk(request, id, counter, model);\n       return id;\n     }\n@@ -2902,15 +2910,15 @@\n         if (\"number\" !== typeof info.time)\n           if (\"string\" === typeof info.name)\n             outlineComponentInfo(request$jscomp$1, info),\n-              request$jscomp$1.pendingChunks++,\n+              request$jscomp$1.pendingDebugChunks++,\n               emitDebugChunk(request$jscomp$1, task, info);\n           else if (info.awaited) {\n             var ioInfo = info.awaited;\n             if (!(ioInfo.end <= request$jscomp$1.timeOrigin)) {\n               var request = request$jscomp$1,\n                 ioInfo$jscomp$0 = ioInfo;\n               if (!request.writtenObjects.has(ioInfo$jscomp$0)) {\n-                request.pendingChunks++;\n+                request.pendingDebugChunks++;\n                 var id = request.nextChunkId++,\n                   owner = ioInfo$jscomp$0.owner;\n                 null != owner && outlineComponentInfo(request, owner);\n@@ -2933,10 +2941,10 @@\n                   start: ioInfo$jscomp$0.start - request$jscomp$0.timeOrigin,\n                   end: ioInfo$jscomp$0.end - request$jscomp$0.timeOrigin\n                 };\n-                void 0 !== value && (debugIOInfo.value = value);\n                 null != env && (debugIOInfo.env = env);\n                 null != debugStack && (debugIOInfo.stack = debugStack);\n                 null != owner && (debugIOInfo.owner = owner);\n+                void 0 !== value && (debugIOInfo.value = value);\n                 value = serializeDebugModel(\n                   request$jscomp$0,\n                   objectLimit,\n@@ -2960,11 +2968,11 @@\n               null != info.env && (ioInfo.env = info.env);\n               null != info.owner && (ioInfo.owner = info.owner);\n               null != request && (ioInfo.stack = request);\n-              request$jscomp$1.pendingChunks++;\n+              request$jscomp$1.pendingDebugChunks++;\n               emitDebugChunk(request$jscomp$1, task, ioInfo);\n             }\n           } else\n-            request$jscomp$1.pendingChunks++,\n+            request$jscomp$1.pendingDebugChunks++,\n               emitDebugChunk(request$jscomp$1, task, info);\n       }\n     }\n@@ -3054,7 +3062,7 @@\n           task.implicitSlot = !1;\n           var currentEnv = (0, request.environmentName)();\n           currentEnv !== task.environmentName &&\n-            (request.pendingChunks++,\n+            (request.pendingDebugChunks++,\n             emitDebugChunk(request, task.id, { env: currentEnv }));\n           if (\"object\" === typeof resolvedModel && null !== resolvedModel)\n             request.writtenObjects.set(\n@@ -3071,11 +3079,13 @@\n           request.abortableTasks.delete(task);\n           callOnAllReadyIfReady(request);\n         } catch (thrownValue) {\n-          if (request.status === ABORTING)\n-            request.abortableTasks.delete(task),\n-              (task.status = 0),\n-              abortTask(task, request, request.fatalError);\n-          else {\n+          if (request.status === ABORTING) {\n+            request.abortableTasks.delete(task);\n+            task.status = 0;\n+            var errorId = request.fatalError;\n+            abortTask(task);\n+            finishAbortedTask(task, request, errorId);\n+          } else {\n             var x =\n               thrownValue === SuspenseException\n                 ? getSuspendedThenable()\n@@ -3128,9 +3138,11 @@\n           (currentRequest = prevRequest);\n       }\n     }\n-    function abortTask(task, request, errorId) {\n-      if (5 !== task.status) {\n-        task.status = 3;\n+    function abortTask(task) {\n+      0 === task.status && (task.status = 3);\n+    }\n+    function finishAbortedTask(task, request, errorId) {\n+      if (3 === task.status) {\n         var model = task.model;\n         \"object\" === typeof model &&\n           null !== model &&\n@@ -3171,7 +3183,7 @@\n         var debugChunks = request.completedDebugChunks;\n         for (i = 0; i < debugChunks.length; i++)\n           if (\n-            (request.pendingChunks--,\n+            (request.pendingDebugChunks--,\n             !writeChunkAndReturn(destination, debugChunks[i]))\n           ) {\n             request.destination = null;\n@@ -3212,6 +3224,7 @@\n       }\n       \"function\" === typeof destination.flush && destination.flush();\n       0 === request.pendingChunks &&\n+        0 === request.pendingDebugChunks &&\n         (request.status < ABORTING &&\n           request.cacheController.abort(\n             Error(\n@@ -3258,44 +3271,60 @@\n         }\n       }\n     }\n-    function abort(request, reason) {\n+    function finishAbort(request, abortedTasks, errorId) {\n       try {\n-        11 >= request.status &&\n-          ((request.status = ABORTING),\n-          request.cacheController.abort(reason),\n-          callOnAllReadyIfReady(request));\n-        var abortableTasks = request.abortableTasks;\n-        if (0 < abortableTasks.size) {\n-          var error =\n-              void 0 === reason\n-                ? Error(\n-                    \"The render was aborted by the server without a reason.\"\n-                  )\n-                : \"object\" === typeof reason &&\n-                    null !== reason &&\n-                    \"function\" === typeof reason.then\n-                  ? Error(\n-                      \"The render was aborted by the server with a promise.\"\n-                    )\n-                  : reason,\n-            digest = logRecoverableError(request, error, null),\n-            _errorId2 = request.nextChunkId++;\n-          request.fatalError = _errorId2;\n-          request.pendingChunks++;\n-          emitErrorChunk(request, _errorId2, digest, error, !1);\n-          abortableTasks.forEach(function (task) {\n-            return abortTask(task, request, _errorId2);\n-          });\n-          abortableTasks.clear();\n-          callOnAllReadyIfReady(request);\n-        }\n+        abortedTasks.forEach(function (task) {\n+          return finishAbortedTask(task, request, errorId);\n+        });\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n         null !== request.destination &&\n           flushCompletedChunks(request, request.destination);\n-      } catch (error$2) {\n-        logRecoverableError(request, error$2, null),\n-          fatalError(request, error$2);\n+      } catch (error) {\n+        logRecoverableError(request, error, null), fatalError(request, error);\n       }\n     }\n+    function abort(request, reason) {\n+      if (!(11 < request.status))\n+        try {\n+          request.status = ABORTING;\n+          request.cacheController.abort(reason);\n+          var abortableTasks = request.abortableTasks;\n+          if (0 < abortableTasks.size) {\n+            var error =\n+                void 0 === reason\n+                  ? Error(\n+                      \"The render was aborted by the server without a reason.\"\n+                    )\n+                  : \"object\" === typeof reason &&\n+                      null !== reason &&\n+                      \"function\" === typeof reason.then\n+                    ? Error(\n+                        \"The render was aborted by the server with a promise.\"\n+                      )\n+                    : reason,\n+              digest = logRecoverableError(request, error, null),\n+              _errorId2 = request.nextChunkId++;\n+            request.fatalError = _errorId2;\n+            request.pendingChunks++;\n+            emitErrorChunk(request, _errorId2, digest, error, !1);\n+            abortableTasks.forEach(function (task) {\n+              return abortTask(task, request, _errorId2);\n+            });\n+            setImmediate(function () {\n+              return finishAbort(request, abortableTasks, _errorId2);\n+            });\n+          } else {\n+            var onAllReady = request.onAllReady;\n+            onAllReady();\n+            null !== request.destination &&\n+              flushCompletedChunks(request, request.destination);\n+          }\n+        } catch (error$2) {\n+          logRecoverableError(request, error$2, null),\n+            fatalError(request, error$2);\n+        }\n+    }\n     function fromHex(str) {\n       return parseInt(str, 16);\n     }\n@@ -3313,7 +3342,7 @@\n             var id = message[command],\n               retainedValue = deferredDebugObjects.retained.get(id);\n             void 0 !== retainedValue &&\n-              (request.pendingChunks--,\n+              (request.pendingDebugChunks--,\n               deferredDebugObjects.retained.delete(id),\n               deferredDebugObjects.existing.delete(retainedValue),\n               enqueueFlush(request));\n@@ -3324,7 +3353,9 @@\n             (id = message[command]),\n               (retainedValue = deferredDebugObjects.retained.get(id)),\n               void 0 !== retainedValue &&\n-                (emitOutlinedDebugModelChunk(\n+                (deferredDebugObjects.retained.delete(id),\n+                deferredDebugObjects.existing.delete(retainedValue),\n+                emitOutlinedDebugModelChunk(\n                   request,\n                   id,\n                   { objectLimit: 10 },\n@@ -3345,7 +3376,7 @@\n           \"resolveDebugMessage/closeDebugChannel should not be called for a Request that wasn't kept alive. This is a bug in React.\"\n         );\n       deferredDebugObjects.retained.forEach(function (value, id) {\n-        request.pendingChunks--;\n+        request.pendingDebugChunks--;\n         deferredDebugObjects.retained.delete(id);\n         deferredDebugObjects.existing.delete(value);\n       });\n@@ -4818,12 +4849,12 @@\n             \"React doesn't accept base64 encoded file uploads because we don't expect form data passed from a browser to ever encode data that way. If that's the wrong assumption, we can easily fix it.\"\n           );\n         pendingFiles++;\n-        var JSCompiler_object_inline_chunks_207 = [];\n+        var JSCompiler_object_inline_chunks_214 = [];\n         value.on(\"data\", function (chunk) {\n-          JSCompiler_object_inline_chunks_207.push(chunk);\n+          JSCompiler_object_inline_chunks_214.push(chunk);\n         });\n         value.on(\"end\", function () {\n-          var blob = new Blob(JSCompiler_object_inline_chunks_207, {\n+          var blob = new Blob(JSCompiler_object_inline_chunks_214, {\n             type: mimeType\n           });\n           response._formData.append(name, blob, filename);"
        },
        {
            "sha": "090630eb04a5dc762387f9e3b309c8abacb62653",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-server.node.production.js",
            "status": "modified",
            "additions": 88,
            "deletions": 65,
            "changes": 153,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-server.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -812,7 +812,9 @@ function serializeThenable(request, task, thenable) {\n       if (12 === request.status)\n         return (\n           request.abortableTasks.delete(newTask),\n-          abortTask(newTask, request, request.fatalError),\n+          (task = request.fatalError),\n+          abortTask(newTask),\n+          finishAbortedTask(newTask, request, task),\n           newTask.id\n         );\n       \"string\" !== typeof thenable.status &&\n@@ -1316,7 +1318,7 @@ function outlineModel(request, value) {\n function serializeTypedArray(request, tag, typedArray) {\n   request.pendingChunks++;\n   var bufferId = request.nextChunkId++;\n-  emitTypedArrayChunk(request, bufferId, tag, typedArray);\n+  emitTypedArrayChunk(request, bufferId, tag, typedArray, !1);\n   return serializeByValueID(bufferId);\n }\n function serializeBlob(request, blob) {\n@@ -1563,7 +1565,7 @@ function renderModelDestructive(\n       return (\n         request.pendingChunks++,\n         (task = request.nextChunkId++),\n-        emitTextChunk(request, task, value),\n+        emitTextChunk(request, task, value, !1),\n         serializeByValueID(task)\n       );\n     request = \"$\" === value[0] ? \"$\" + value : value;\n@@ -1690,57 +1692,57 @@ function emitErrorChunk(request, id, digest) {\n   id = id.toString(16) + \":E\" + stringify(digest) + \"\\n\";\n   request.completedErrorChunks.push(id);\n }\n-function emitTypedArrayChunk(request, id, tag, typedArray) {\n-  request.pendingChunks++;\n+function emitTypedArrayChunk(request, id, tag, typedArray, debug) {\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n   typedArray = new Uint8Array(\n     typedArray.buffer,\n     typedArray.byteOffset,\n     typedArray.byteLength\n   );\n-  var binaryLength = typedArray.byteLength;\n-  id = id.toString(16) + \":\" + tag + binaryLength.toString(16) + \",\";\n+  debug = typedArray.byteLength;\n+  id = id.toString(16) + \":\" + tag + debug.toString(16) + \",\";\n   request.completedRegularChunks.push(id, typedArray);\n }\n-function emitTextChunk(request, id, text) {\n+function emitTextChunk(request, id, text, debug) {\n   if (null === byteLengthOfChunk)\n     throw Error(\n       \"Existence of byteLengthOfChunk should have already been checked. This is a bug in React.\"\n     );\n-  request.pendingChunks++;\n-  var binaryLength = byteLengthOfChunk(text);\n-  id = id.toString(16) + \":T\" + binaryLength.toString(16) + \",\";\n+  debug ? request.pendingDebugChunks++ : request.pendingChunks++;\n+  debug = byteLengthOfChunk(text);\n+  id = id.toString(16) + \":T\" + debug.toString(16) + \",\";\n   request.completedRegularChunks.push(id, text);\n }\n function emitChunk(request, task, value) {\n   var id = task.id;\n   \"string\" === typeof value && null !== byteLengthOfChunk\n-    ? emitTextChunk(request, id, value)\n+    ? emitTextChunk(request, id, value, !1)\n     : value instanceof ArrayBuffer\n-      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value))\n+      ? emitTypedArrayChunk(request, id, \"A\", new Uint8Array(value), !1)\n       : value instanceof Int8Array\n-        ? emitTypedArrayChunk(request, id, \"O\", value)\n+        ? emitTypedArrayChunk(request, id, \"O\", value, !1)\n         : value instanceof Uint8Array\n-          ? emitTypedArrayChunk(request, id, \"o\", value)\n+          ? emitTypedArrayChunk(request, id, \"o\", value, !1)\n           : value instanceof Uint8ClampedArray\n-            ? emitTypedArrayChunk(request, id, \"U\", value)\n+            ? emitTypedArrayChunk(request, id, \"U\", value, !1)\n             : value instanceof Int16Array\n-              ? emitTypedArrayChunk(request, id, \"S\", value)\n+              ? emitTypedArrayChunk(request, id, \"S\", value, !1)\n               : value instanceof Uint16Array\n-                ? emitTypedArrayChunk(request, id, \"s\", value)\n+                ? emitTypedArrayChunk(request, id, \"s\", value, !1)\n                 : value instanceof Int32Array\n-                  ? emitTypedArrayChunk(request, id, \"L\", value)\n+                  ? emitTypedArrayChunk(request, id, \"L\", value, !1)\n                   : value instanceof Uint32Array\n-                    ? emitTypedArrayChunk(request, id, \"l\", value)\n+                    ? emitTypedArrayChunk(request, id, \"l\", value, !1)\n                     : value instanceof Float32Array\n-                      ? emitTypedArrayChunk(request, id, \"G\", value)\n+                      ? emitTypedArrayChunk(request, id, \"G\", value, !1)\n                       : value instanceof Float64Array\n-                        ? emitTypedArrayChunk(request, id, \"g\", value)\n+                        ? emitTypedArrayChunk(request, id, \"g\", value, !1)\n                         : value instanceof BigInt64Array\n-                          ? emitTypedArrayChunk(request, id, \"M\", value)\n+                          ? emitTypedArrayChunk(request, id, \"M\", value, !1)\n                           : value instanceof BigUint64Array\n-                            ? emitTypedArrayChunk(request, id, \"m\", value)\n+                            ? emitTypedArrayChunk(request, id, \"m\", value, !1)\n                             : value instanceof DataView\n-                              ? emitTypedArrayChunk(request, id, \"V\", value)\n+                              ? emitTypedArrayChunk(request, id, \"V\", value, !1)\n                               : ((value = stringify(value, task.toJSON)),\n                                 (task =\n                                   task.id.toString(16) + \":\" + value + \"\\n\"),\n@@ -1782,11 +1784,13 @@ function retryTask(request, task) {\n       request.abortableTasks.delete(task);\n       callOnAllReadyIfReady(request);\n     } catch (thrownValue) {\n-      if (12 === request.status)\n-        request.abortableTasks.delete(task),\n-          (task.status = 0),\n-          abortTask(task, request, request.fatalError);\n-      else {\n+      if (12 === request.status) {\n+        request.abortableTasks.delete(task);\n+        task.status = 0;\n+        var errorId = request.fatalError;\n+        abortTask(task);\n+        finishAbortedTask(task, request, errorId);\n+      } else {\n         var x =\n           thrownValue === SuspenseException\n             ? getSuspendedThenable()\n@@ -1835,10 +1839,12 @@ function performWork(request) {\n       (currentRequest = prevRequest);\n   }\n }\n-function abortTask(task, request, errorId) {\n-  5 !== task.status &&\n-    ((task.status = 3),\n-    (errorId = serializeByValueID(errorId)),\n+function abortTask(task) {\n+  0 === task.status && (task.status = 3);\n+}\n+function finishAbortedTask(task, request, errorId) {\n+  3 === task.status &&\n+    ((errorId = serializeByValueID(errorId)),\n     (task = encodeReferenceChunk(request, task.id, errorId)),\n     request.completedErrorChunks.push(task));\n }\n@@ -1948,39 +1954,56 @@ function startFlowing(request, destination) {\n     }\n   }\n }\n-function abort(request, reason) {\n+function finishAbort(request, abortedTasks, errorId) {\n   try {\n-    11 >= request.status &&\n-      ((request.status = 12),\n-      request.cacheController.abort(reason),\n-      callOnAllReadyIfReady(request));\n-    var abortableTasks = request.abortableTasks;\n-    if (0 < abortableTasks.size) {\n-      var error =\n-          void 0 === reason\n-            ? Error(\"The render was aborted by the server without a reason.\")\n-            : \"object\" === typeof reason &&\n-                null !== reason &&\n-                \"function\" === typeof reason.then\n-              ? Error(\"The render was aborted by the server with a promise.\")\n-              : reason,\n-        digest = logRecoverableError(request, error, null),\n-        errorId = request.nextChunkId++;\n-      request.fatalError = errorId;\n-      request.pendingChunks++;\n-      emitErrorChunk(request, errorId, digest, error, !1);\n-      abortableTasks.forEach(function (task) {\n-        return abortTask(task, request, errorId);\n-      });\n-      abortableTasks.clear();\n-      callOnAllReadyIfReady(request);\n-    }\n+    abortedTasks.forEach(function (task) {\n+      return finishAbortedTask(task, request, errorId);\n+    });\n+    var onAllReady = request.onAllReady;\n+    onAllReady();\n     null !== request.destination &&\n       flushCompletedChunks(request, request.destination);\n-  } catch (error$24) {\n-    logRecoverableError(request, error$24, null), fatalError(request, error$24);\n+  } catch (error) {\n+    logRecoverableError(request, error, null), fatalError(request, error);\n   }\n }\n+function abort(request, reason) {\n+  if (!(11 < request.status))\n+    try {\n+      request.status = 12;\n+      request.cacheController.abort(reason);\n+      var abortableTasks = request.abortableTasks;\n+      if (0 < abortableTasks.size) {\n+        var error =\n+            void 0 === reason\n+              ? Error(\"The render was aborted by the server without a reason.\")\n+              : \"object\" === typeof reason &&\n+                  null !== reason &&\n+                  \"function\" === typeof reason.then\n+                ? Error(\"The render was aborted by the server with a promise.\")\n+                : reason,\n+          digest = logRecoverableError(request, error, null),\n+          errorId = request.nextChunkId++;\n+        request.fatalError = errorId;\n+        request.pendingChunks++;\n+        emitErrorChunk(request, errorId, digest, error, !1);\n+        abortableTasks.forEach(function (task) {\n+          return abortTask(task, request, errorId);\n+        });\n+        setImmediate(function () {\n+          return finishAbort(request, abortableTasks, errorId);\n+        });\n+      } else {\n+        var onAllReady = request.onAllReady;\n+        onAllReady();\n+        null !== request.destination &&\n+          flushCompletedChunks(request, request.destination);\n+      }\n+    } catch (error$24) {\n+      logRecoverableError(request, error$24, null),\n+        fatalError(request, error$24);\n+    }\n+}\n function resolveServerReference(bundlerConfig, id) {\n   var name = \"\",\n     resolvedModuleData = bundlerConfig[id];\n@@ -2856,12 +2879,12 @@ exports.decodeReplyFromBusboy = function (busboyStream, turbopackMap, options) {\n         \"React doesn't accept base64 encoded file uploads because we don't expect form data passed from a browser to ever encode data that way. If that's the wrong assumption, we can easily fix it.\"\n       );\n     pendingFiles++;\n-    var JSCompiler_object_inline_chunks_245 = [];\n+    var JSCompiler_object_inline_chunks_253 = [];\n     value.on(\"data\", function (chunk) {\n-      JSCompiler_object_inline_chunks_245.push(chunk);\n+      JSCompiler_object_inline_chunks_253.push(chunk);\n     });\n     value.on(\"end\", function () {\n-      var blob = new Blob(JSCompiler_object_inline_chunks_245, {\n+      var blob = new Blob(JSCompiler_object_inline_chunks_253, {\n         type: mimeType\n       });\n       response._formData.append(name, blob, filename);"
        },
        {
            "sha": "43f9a203dc246245f598769c229bea7e8962eb77",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fpackage.json?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -48,7 +48,7 @@\n     \"neo-async\": \"^2.6.1\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"19.2.0-canary-5d87cd22-20250704\",\n-    \"react-dom\": \"19.2.0-canary-5d87cd22-20250704\"\n+    \"react\": \"19.2.0-canary-a7a11657-20250708\",\n+    \"react-dom\": \"19.2.0-canary-a7a11657-20250708\"\n   }\n }\n\\ No newline at end of file"
        },
        {
            "sha": "40e52e10e79a4ba59c54f783da727e1df284411a",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.browser.development.js",
            "status": "modified",
            "additions": 310,
            "deletions": 239,
            "changes": 549,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -766,7 +766,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1369,6 +1369,17 @@\n       this._children = [];\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1388,9 +1399,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function createErrorChunk(response, error) {\n       return new ReactPromise(\"rejected\", null, error);\n     }\n@@ -1469,15 +1498,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1500,6 +1528,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1510,15 +1539,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1563,24 +1593,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n-      response._replayConsole &&\n-        (markAllTracksInOrder(),\n-        flushComponentPerformance(\n-          response,\n-          getChunk(response, 0),\n-          0,\n-          -Infinity,\n-          -Infinity\n-        ));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1656,7 +1681,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? createErrorChunk(response, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1742,31 +1767,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -1813,17 +1838,18 @@\n           response._debugFindSourceMapURL\n         );\n       var serverReference = resolveServerReference(\n-        response._serverReferenceConfig,\n-        metaData.id\n-      );\n-      if ((response = preloadModule(serverReference)))\n-        metaData.bound && (response = Promise.all([response, metaData.bound]));\n-      else if (metaData.bound) response = Promise.resolve(metaData.bound);\n+          response._serverReferenceConfig,\n+          metaData.id\n+        ),\n+        promise = preloadModule(serverReference);\n+      if (promise)\n+        metaData.bound && (promise = Promise.all([promise, metaData.bound]));\n+      else if (metaData.bound) promise = Promise.resolve(metaData.bound);\n       else\n         return (\n-          (response = requireModule(serverReference)),\n-          registerBoundServerReference(response, metaData.id, metaData.bound),\n-          response\n+          (promise = requireModule(serverReference)),\n+          registerBoundServerReference(promise, metaData.id, metaData.bound),\n+          promise\n         );\n       if (initializingHandler) {\n         var handler = initializingHandler;\n@@ -1836,7 +1862,7 @@\n           deps: 1,\n           errored: !1\n         };\n-      response.then(\n+      promise.then(\n         function () {\n           var resolvedValue = requireModule(serverReference);\n           if (metaData.bound) {\n@@ -1899,7 +1925,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -2049,6 +2075,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -2094,15 +2137,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -2114,47 +2155,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -2174,10 +2209,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -2223,23 +2258,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2279,6 +2318,9 @@\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n       this._timeOrigin = 0;\n+      this._pendingInitialRender = null;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2295,18 +2337,23 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       replayConsole && markAllTracksInOrder();\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2316,18 +2363,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2337,39 +2386,41 @@\n         response._bundlerConfig,\n         model\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2406,19 +2457,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2471,7 +2522,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2544,11 +2595,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2591,7 +2642,7 @@\n       reason.$$typeof = REACT_POSTPONE_TYPE;\n       stack = response._chunks;\n       (env = stack.get(id))\n-        ? triggerErrorOnChunk(env, reason)\n+        ? triggerErrorOnChunk(response, env, reason)\n         : stack.set(id, createErrorChunk(response, reason));\n     }\n     function resolveHint(response, code, model) {\n@@ -3066,9 +3117,8 @@\n         previousResult.track = trackIdx$jscomp$6;\n         return previousResult;\n       }\n-      var children = root._children;\n-      \"resolved_model\" === root.status && initializeModelChunk(root);\n-      var debugInfo = root._debugInfo;\n+      var children = root._children,\n+        debugInfo = root._debugInfo;\n       if (debugInfo) {\n         for (var startTime$jscomp$0 = 0, i = 0; i < debugInfo.length; i++) {\n           var info = debugInfo[i];\n@@ -3528,6 +3578,20 @@\n       result.endTime = childrenEndTime;\n       return result;\n     }\n+    function flushInitialRenderPerformance(response) {\n+      if (response._replayConsole) {\n+        var rootChunk = getChunk(response, 0);\n+        isArrayImpl(rootChunk._children) &&\n+          (markAllTracksInOrder(),\n+          flushComponentPerformance(\n+            response,\n+            rootChunk,\n+            0,\n+            -Infinity,\n+            -Infinity\n+          ));\n+      }\n+    }\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -3598,7 +3662,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, createErrorChunk(response, tag));\n           break;\n         case 84:\n@@ -3762,96 +3826,99 @@\n         options ? !1 !== options.replayConsoleLogs : !0,\n         options && options.environmentName ? options.environmentName : void 0,\n         debugChannel\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n         var value = _ref.value;\n         if (_ref.done) reportGlobalError(response, Error(\"Connection closed.\"));\n         else {\n-          var i = 0,\n-            rowState = response._rowState;\n-          _ref = response._rowID;\n-          for (\n-            var rowTag = response._rowTag,\n-              rowLength = response._rowLength,\n-              buffer = response._buffer,\n-              chunkLength = value.length;\n-            i < chunkLength;\n+          if (void 0 !== response.weak.deref()) {\n+            _ref = unwrapWeakResponse(response);\n+            for (\n+              var i = 0,\n+                rowState = _ref._rowState,\n+                rowID = _ref._rowID,\n+                rowTag = _ref._rowTag,\n+                rowLength = _ref._rowLength,\n+                buffer = _ref._buffer,\n+                chunkLength = value.length;\n+              i < chunkLength;\n \n-          ) {\n-            var lastIdx = -1;\n-            switch (rowState) {\n-              case 0:\n-                lastIdx = value[i++];\n-                58 === lastIdx\n-                  ? (rowState = 1)\n-                  : (_ref =\n-                      (_ref << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 1:\n-                rowState = value[i];\n-                84 === rowState ||\n-                65 === rowState ||\n-                79 === rowState ||\n-                111 === rowState ||\n-                85 === rowState ||\n-                83 === rowState ||\n-                115 === rowState ||\n-                76 === rowState ||\n-                108 === rowState ||\n-                71 === rowState ||\n-                103 === rowState ||\n-                77 === rowState ||\n-                109 === rowState ||\n-                86 === rowState\n-                  ? ((rowTag = rowState), (rowState = 2), i++)\n-                  : (64 < rowState && 91 > rowState) ||\n-                      35 === rowState ||\n-                      114 === rowState ||\n-                      120 === rowState\n-                    ? ((rowTag = rowState), (rowState = 3), i++)\n-                    : ((rowTag = 0), (rowState = 3));\n-                continue;\n-              case 2:\n-                lastIdx = value[i++];\n-                44 === lastIdx\n-                  ? (rowState = 4)\n-                  : (rowLength =\n-                      (rowLength << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 3:\n-                lastIdx = value.indexOf(10, i);\n+            ) {\n+              var lastIdx = -1;\n+              switch (rowState) {\n+                case 0:\n+                  lastIdx = value[i++];\n+                  58 === lastIdx\n+                    ? (rowState = 1)\n+                    : (rowID =\n+                        (rowID << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 1:\n+                  rowState = value[i];\n+                  84 === rowState ||\n+                  65 === rowState ||\n+                  79 === rowState ||\n+                  111 === rowState ||\n+                  85 === rowState ||\n+                  83 === rowState ||\n+                  115 === rowState ||\n+                  76 === rowState ||\n+                  108 === rowState ||\n+                  71 === rowState ||\n+                  103 === rowState ||\n+                  77 === rowState ||\n+                  109 === rowState ||\n+                  86 === rowState\n+                    ? ((rowTag = rowState), (rowState = 2), i++)\n+                    : (64 < rowState && 91 > rowState) ||\n+                        35 === rowState ||\n+                        114 === rowState ||\n+                        120 === rowState\n+                      ? ((rowTag = rowState), (rowState = 3), i++)\n+                      : ((rowTag = 0), (rowState = 3));\n+                  continue;\n+                case 2:\n+                  lastIdx = value[i++];\n+                  44 === lastIdx\n+                    ? (rowState = 4)\n+                    : (rowLength =\n+                        (rowLength << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 3:\n+                  lastIdx = value.indexOf(10, i);\n+                  break;\n+                case 4:\n+                  (lastIdx = i + rowLength),\n+                    lastIdx > value.length && (lastIdx = -1);\n+              }\n+              var offset = value.byteOffset + i;\n+              if (-1 < lastIdx)\n+                (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n+                  processFullBinaryRow(_ref, rowID, rowTag, buffer, rowLength),\n+                  (i = lastIdx),\n+                  3 === rowState && i++,\n+                  (rowLength = rowID = rowTag = rowState = 0),\n+                  (buffer.length = 0);\n+              else {\n+                value = new Uint8Array(\n+                  value.buffer,\n+                  offset,\n+                  value.byteLength - i\n+                );\n+                buffer.push(value);\n+                rowLength -= value.byteLength;\n                 break;\n-              case 4:\n-                (lastIdx = i + rowLength),\n-                  lastIdx > value.length && (lastIdx = -1);\n-            }\n-            var offset = value.byteOffset + i;\n-            if (-1 < lastIdx)\n-              (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n-                processFullBinaryRow(response, _ref, rowTag, buffer, rowLength),\n-                (i = lastIdx),\n-                3 === rowState && i++,\n-                (rowLength = _ref = rowTag = rowState = 0),\n-                (buffer.length = 0);\n-            else {\n-              value = new Uint8Array(\n-                value.buffer,\n-                offset,\n-                value.byteLength - i\n-              );\n-              buffer.push(value);\n-              rowLength -= value.byteLength;\n-              break;\n+              }\n             }\n+            _ref._rowState = rowState;\n+            _ref._rowID = rowID;\n+            _ref._rowTag = rowTag;\n+            _ref._rowLength = rowLength;\n           }\n-          response._rowState = rowState;\n-          response._rowID = _ref;\n-          response._rowTag = rowTag;\n-          response._rowLength = rowLength;\n           return reader.read().then(progress).catch(error);\n         }\n       }\n@@ -3965,7 +4032,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       initializingChunk = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n@@ -4077,10 +4148,10 @@\n       return hook.checkDCE ? !0 : !1;\n     })({\n       bundleType: 1,\n-      version: \"19.2.0-experimental-5d87cd22-20250704\",\n+      version: \"19.2.0-experimental-a7a11657-20250708\",\n       rendererPackageName: \"react-server-dom-webpack\",\n       currentDispatcherRef: ReactSharedInternals,\n-      reconcilerVersion: \"19.2.0-experimental-5d87cd22-20250704\",\n+      reconcilerVersion: \"19.2.0-experimental-a7a11657-20250708\",\n       getCurrentComponentInfo: function () {\n         return currentOwnerInDEV;\n       }\n@@ -4095,12 +4166,12 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (\n       id,"
        },
        {
            "sha": "794a22ebbeb96557f9796fc68a3b85105266fe85",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.browser.production.js",
            "status": "modified",
            "additions": 47,
            "deletions": 46,
            "changes": 93,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -659,15 +659,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -696,15 +694,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -748,11 +746,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -843,14 +842,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -891,17 +891,18 @@ function loadServerReference(response, metaData, parentObject, key) {\n   if (!response._serverReferenceConfig)\n     return createBoundServerReference(metaData, response._callServer);\n   var serverReference = resolveServerReference(\n-    response._serverReferenceConfig,\n-    metaData.id\n-  );\n-  if ((response = preloadModule(serverReference)))\n-    metaData.bound && (response = Promise.all([response, metaData.bound]));\n-  else if (metaData.bound) response = Promise.resolve(metaData.bound);\n+      response._serverReferenceConfig,\n+      metaData.id\n+    ),\n+    promise = preloadModule(serverReference);\n+  if (promise)\n+    metaData.bound && (promise = Promise.all([promise, metaData.bound]));\n+  else if (metaData.bound) promise = Promise.resolve(metaData.bound);\n   else\n     return (\n-      (response = requireModule(serverReference)),\n-      registerBoundServerReference(response, metaData.id, metaData.bound),\n-      response\n+      (promise = requireModule(serverReference)),\n+      registerBoundServerReference(promise, metaData.id, metaData.bound),\n+      promise\n     );\n   if (initializingHandler) {\n     var handler = initializingHandler;\n@@ -914,7 +915,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n       deps: 1,\n       errored: !1\n     };\n-  response.then(\n+  promise.then(\n     function () {\n       var resolvedValue = requireModule(serverReference);\n       if (metaData.bound) {\n@@ -952,7 +953,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1222,24 +1223,24 @@ function resolveModule(response, id, model) {\n     chunk = chunks.get(id);\n   model = JSON.parse(model, response._fromJSON);\n   var clientReference = resolveClientReference(response._bundlerConfig, model);\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1429,7 +1430,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1581,7 +1582,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.digest = tag.digest;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     case 84:\n@@ -1622,7 +1623,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.stack = \"Error: \" + buffer.message;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     default:"
        },
        {
            "sha": "230e22106dafd7d349644913b672433319d7fcd4",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.edge.development.js",
            "status": "modified",
            "additions": 297,
            "deletions": 227,
            "changes": 524,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -882,7 +882,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1577,6 +1577,17 @@\n       this._children = [];\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1596,9 +1607,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function createErrorChunk(response, error) {\n       return new ReactPromise(\"rejected\", null, error);\n     }\n@@ -1677,15 +1706,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1708,6 +1736,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1718,15 +1747,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1771,24 +1801,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n-      response._replayConsole &&\n-        (markAllTracksInOrder(),\n-        flushComponentPerformance(\n-          response,\n-          getChunk(response, 0),\n-          0,\n-          -Infinity,\n-          -Infinity\n-        ));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1864,7 +1889,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? createErrorChunk(response, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1950,31 +1975,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -2114,7 +2139,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -2264,6 +2289,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -2309,15 +2351,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -2329,47 +2369,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -2389,10 +2423,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -2438,23 +2472,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2494,6 +2532,9 @@\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n       this._timeOrigin = 0;\n+      this._pendingInitialRender = null;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2510,18 +2551,23 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       replayConsole && markAllTracksInOrder();\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2531,18 +2577,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2557,39 +2605,41 @@\n         model[1],\n         response._nonce\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2626,19 +2676,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2691,7 +2741,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2764,11 +2814,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2811,7 +2861,7 @@\n       reason.$$typeof = REACT_POSTPONE_TYPE;\n       stack = response._chunks;\n       (env = stack.get(id))\n-        ? triggerErrorOnChunk(env, reason)\n+        ? triggerErrorOnChunk(response, env, reason)\n         : stack.set(id, createErrorChunk(response, reason));\n     }\n     function resolveHint(response, code, model) {\n@@ -3286,9 +3336,8 @@\n         previousResult.track = trackIdx$jscomp$6;\n         return previousResult;\n       }\n-      var children = root._children;\n-      \"resolved_model\" === root.status && initializeModelChunk(root);\n-      var debugInfo = root._debugInfo;\n+      var children = root._children,\n+        debugInfo = root._debugInfo;\n       if (debugInfo) {\n         for (var startTime$jscomp$0 = 0, i = 0; i < debugInfo.length; i++) {\n           var info = debugInfo[i];\n@@ -3748,6 +3797,20 @@\n       result.endTime = childrenEndTime;\n       return result;\n     }\n+    function flushInitialRenderPerformance(response) {\n+      if (response._replayConsole) {\n+        var rootChunk = getChunk(response, 0);\n+        isArrayImpl(rootChunk._children) &&\n+          (markAllTracksInOrder(),\n+          flushComponentPerformance(\n+            response,\n+            rootChunk,\n+            0,\n+            -Infinity,\n+            -Infinity\n+          ));\n+      }\n+    }\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -3818,7 +3881,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, createErrorChunk(response, tag));\n           break;\n         case 84:\n@@ -3970,96 +4033,99 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n         var value = _ref.value;\n         if (_ref.done) reportGlobalError(response, Error(\"Connection closed.\"));\n         else {\n-          var i = 0,\n-            rowState = response._rowState;\n-          _ref = response._rowID;\n-          for (\n-            var rowTag = response._rowTag,\n-              rowLength = response._rowLength,\n-              buffer = response._buffer,\n-              chunkLength = value.length;\n-            i < chunkLength;\n+          if (void 0 !== response.weak.deref()) {\n+            _ref = unwrapWeakResponse(response);\n+            for (\n+              var i = 0,\n+                rowState = _ref._rowState,\n+                rowID = _ref._rowID,\n+                rowTag = _ref._rowTag,\n+                rowLength = _ref._rowLength,\n+                buffer = _ref._buffer,\n+                chunkLength = value.length;\n+              i < chunkLength;\n \n-          ) {\n-            var lastIdx = -1;\n-            switch (rowState) {\n-              case 0:\n-                lastIdx = value[i++];\n-                58 === lastIdx\n-                  ? (rowState = 1)\n-                  : (_ref =\n-                      (_ref << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 1:\n-                rowState = value[i];\n-                84 === rowState ||\n-                65 === rowState ||\n-                79 === rowState ||\n-                111 === rowState ||\n-                85 === rowState ||\n-                83 === rowState ||\n-                115 === rowState ||\n-                76 === rowState ||\n-                108 === rowState ||\n-                71 === rowState ||\n-                103 === rowState ||\n-                77 === rowState ||\n-                109 === rowState ||\n-                86 === rowState\n-                  ? ((rowTag = rowState), (rowState = 2), i++)\n-                  : (64 < rowState && 91 > rowState) ||\n-                      35 === rowState ||\n-                      114 === rowState ||\n-                      120 === rowState\n-                    ? ((rowTag = rowState), (rowState = 3), i++)\n-                    : ((rowTag = 0), (rowState = 3));\n-                continue;\n-              case 2:\n-                lastIdx = value[i++];\n-                44 === lastIdx\n-                  ? (rowState = 4)\n-                  : (rowLength =\n-                      (rowLength << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 3:\n-                lastIdx = value.indexOf(10, i);\n+            ) {\n+              var lastIdx = -1;\n+              switch (rowState) {\n+                case 0:\n+                  lastIdx = value[i++];\n+                  58 === lastIdx\n+                    ? (rowState = 1)\n+                    : (rowID =\n+                        (rowID << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 1:\n+                  rowState = value[i];\n+                  84 === rowState ||\n+                  65 === rowState ||\n+                  79 === rowState ||\n+                  111 === rowState ||\n+                  85 === rowState ||\n+                  83 === rowState ||\n+                  115 === rowState ||\n+                  76 === rowState ||\n+                  108 === rowState ||\n+                  71 === rowState ||\n+                  103 === rowState ||\n+                  77 === rowState ||\n+                  109 === rowState ||\n+                  86 === rowState\n+                    ? ((rowTag = rowState), (rowState = 2), i++)\n+                    : (64 < rowState && 91 > rowState) ||\n+                        35 === rowState ||\n+                        114 === rowState ||\n+                        120 === rowState\n+                      ? ((rowTag = rowState), (rowState = 3), i++)\n+                      : ((rowTag = 0), (rowState = 3));\n+                  continue;\n+                case 2:\n+                  lastIdx = value[i++];\n+                  44 === lastIdx\n+                    ? (rowState = 4)\n+                    : (rowLength =\n+                        (rowLength << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 3:\n+                  lastIdx = value.indexOf(10, i);\n+                  break;\n+                case 4:\n+                  (lastIdx = i + rowLength),\n+                    lastIdx > value.length && (lastIdx = -1);\n+              }\n+              var offset = value.byteOffset + i;\n+              if (-1 < lastIdx)\n+                (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n+                  processFullBinaryRow(_ref, rowID, rowTag, buffer, rowLength),\n+                  (i = lastIdx),\n+                  3 === rowState && i++,\n+                  (rowLength = rowID = rowTag = rowState = 0),\n+                  (buffer.length = 0);\n+              else {\n+                value = new Uint8Array(\n+                  value.buffer,\n+                  offset,\n+                  value.byteLength - i\n+                );\n+                buffer.push(value);\n+                rowLength -= value.byteLength;\n                 break;\n-              case 4:\n-                (lastIdx = i + rowLength),\n-                  lastIdx > value.length && (lastIdx = -1);\n-            }\n-            var offset = value.byteOffset + i;\n-            if (-1 < lastIdx)\n-              (rowLength = new Uint8Array(value.buffer, offset, lastIdx - i)),\n-                processFullBinaryRow(response, _ref, rowTag, buffer, rowLength),\n-                (i = lastIdx),\n-                3 === rowState && i++,\n-                (rowLength = _ref = rowTag = rowState = 0),\n-                (buffer.length = 0);\n-            else {\n-              value = new Uint8Array(\n-                value.buffer,\n-                offset,\n-                value.byteLength - i\n-              );\n-              buffer.push(value);\n-              rowLength -= value.byteLength;\n-              break;\n+              }\n             }\n+            _ref._rowState = rowState;\n+            _ref._rowID = rowID;\n+            _ref._rowTag = rowTag;\n+            _ref._rowLength = rowLength;\n           }\n-          response._rowState = rowState;\n-          response._rowID = _ref;\n-          response._rowTag = rowTag;\n-          response._rowLength = rowLength;\n           return reader.read().then(progress).catch(error);\n         }\n       }\n@@ -4168,7 +4234,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       initializingChunk = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n@@ -4278,12 +4348,12 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (id) {\n       return createServerReference$1(id, noServerCall);"
        },
        {
            "sha": "c41d69a662451291e48a4ddcfe29185fc57ec678",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.edge.production.js",
            "status": "modified",
            "additions": 36,
            "deletions": 36,
            "changes": 72,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -820,15 +820,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -857,15 +855,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -909,11 +907,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -1004,14 +1003,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -1128,7 +1128,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1403,24 +1403,24 @@ function resolveModule(response, id, model) {\n     model[1],\n     response._nonce\n   );\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1610,7 +1610,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1762,7 +1762,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.digest = tag.digest;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     case 84:\n@@ -1803,7 +1803,7 @@ function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       buffer.stack = \"Error: \" + buffer.message;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, buffer)\n+        ? triggerErrorOnChunk(response, chunk, buffer)\n         : tag.set(id, createErrorChunk(response, buffer));\n       break;\n     default:"
        },
        {
            "sha": "065c0c75cdf586f084250a31bf5ceea79f1fbc8f",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.node.development.js",
            "status": "modified",
            "additions": 389,
            "deletions": 308,
            "changes": 697,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -882,7 +882,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1577,6 +1577,17 @@\n       this._children = [];\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1596,9 +1607,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function createErrorChunk(response, error) {\n       return new ReactPromise(\"rejected\", null, error);\n     }\n@@ -1677,15 +1706,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1708,6 +1736,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1718,15 +1747,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1771,24 +1801,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n-      response._replayConsole &&\n-        (markAllTracksInOrder(),\n-        flushComponentPerformance(\n-          response,\n-          getChunk(response, 0),\n-          0,\n-          -Infinity,\n-          -Infinity\n-        ));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1864,7 +1889,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? createErrorChunk(response, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1950,31 +1975,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -2114,7 +2139,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -2264,6 +2289,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -2309,15 +2351,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -2329,47 +2369,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -2389,10 +2423,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -2438,23 +2472,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2494,6 +2532,9 @@\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n       this._timeOrigin = 0;\n+      this._pendingInitialRender = null;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2510,18 +2551,23 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       replayConsole && markAllTracksInOrder();\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2531,18 +2577,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2557,39 +2605,41 @@\n         model[1],\n         response._nonce\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2626,19 +2676,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2691,7 +2741,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2764,11 +2814,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2811,7 +2861,7 @@\n       reason.$$typeof = REACT_POSTPONE_TYPE;\n       stack = response._chunks;\n       (env = stack.get(id))\n-        ? triggerErrorOnChunk(env, reason)\n+        ? triggerErrorOnChunk(response, env, reason)\n         : stack.set(id, createErrorChunk(response, reason));\n     }\n     function resolveHint(response, code, model) {\n@@ -3286,9 +3336,8 @@\n         previousResult.track = trackIdx$jscomp$6;\n         return previousResult;\n       }\n-      var children = root._children;\n-      \"resolved_model\" === root.status && initializeModelChunk(root);\n-      var debugInfo = root._debugInfo;\n+      var children = root._children,\n+        debugInfo = root._debugInfo;\n       if (debugInfo) {\n         for (var startTime$jscomp$0 = 0, i = 0; i < debugInfo.length; i++) {\n           var info = debugInfo[i];\n@@ -3748,6 +3797,20 @@\n       result.endTime = childrenEndTime;\n       return result;\n     }\n+    function flushInitialRenderPerformance(response) {\n+      if (response._replayConsole) {\n+        var rootChunk = getChunk(response, 0);\n+        isArrayImpl(rootChunk._children) &&\n+          (markAllTracksInOrder(),\n+          flushComponentPerformance(\n+            response,\n+            rootChunk,\n+            0,\n+            -Infinity,\n+            -Infinity\n+          ));\n+      }\n+    }\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -3818,7 +3881,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, createErrorChunk(response, tag));\n           break;\n         case 84:\n@@ -3870,84 +3933,95 @@\n             : resolveModel(response, id, row);\n       }\n     }\n-    function processBinaryChunk(response, chunk) {\n-      for (\n-        var i = 0,\n-          rowState = response._rowState,\n-          rowID = response._rowID,\n-          rowTag = response._rowTag,\n-          rowLength = response._rowLength,\n-          buffer = response._buffer,\n-          chunkLength = chunk.length;\n-        i < chunkLength;\n+    function processBinaryChunk(weakResponse, chunk) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        weakResponse = unwrapWeakResponse(weakResponse);\n+        for (\n+          var i = 0,\n+            rowState = weakResponse._rowState,\n+            rowID = weakResponse._rowID,\n+            rowTag = weakResponse._rowTag,\n+            rowLength = weakResponse._rowLength,\n+            buffer = weakResponse._buffer,\n+            chunkLength = chunk.length;\n+          i < chunkLength;\n \n-      ) {\n-        var lastIdx = -1;\n-        switch (rowState) {\n-          case 0:\n-            lastIdx = chunk[i++];\n-            58 === lastIdx\n-              ? (rowState = 1)\n-              : (rowID =\n-                  (rowID << 4) | (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-            continue;\n-          case 1:\n-            rowState = chunk[i];\n-            84 === rowState ||\n-            65 === rowState ||\n-            79 === rowState ||\n-            111 === rowState ||\n-            85 === rowState ||\n-            83 === rowState ||\n-            115 === rowState ||\n-            76 === rowState ||\n-            108 === rowState ||\n-            71 === rowState ||\n-            103 === rowState ||\n-            77 === rowState ||\n-            109 === rowState ||\n-            86 === rowState\n-              ? ((rowTag = rowState), (rowState = 2), i++)\n-              : (64 < rowState && 91 > rowState) ||\n-                  35 === rowState ||\n-                  114 === rowState ||\n-                  120 === rowState\n-                ? ((rowTag = rowState), (rowState = 3), i++)\n-                : ((rowTag = 0), (rowState = 3));\n-            continue;\n-          case 2:\n-            lastIdx = chunk[i++];\n-            44 === lastIdx\n-              ? (rowState = 4)\n-              : (rowLength =\n-                  (rowLength << 4) |\n-                  (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-            continue;\n-          case 3:\n-            lastIdx = chunk.indexOf(10, i);\n+        ) {\n+          var lastIdx = -1;\n+          switch (rowState) {\n+            case 0:\n+              lastIdx = chunk[i++];\n+              58 === lastIdx\n+                ? (rowState = 1)\n+                : (rowID =\n+                    (rowID << 4) |\n+                    (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+              continue;\n+            case 1:\n+              rowState = chunk[i];\n+              84 === rowState ||\n+              65 === rowState ||\n+              79 === rowState ||\n+              111 === rowState ||\n+              85 === rowState ||\n+              83 === rowState ||\n+              115 === rowState ||\n+              76 === rowState ||\n+              108 === rowState ||\n+              71 === rowState ||\n+              103 === rowState ||\n+              77 === rowState ||\n+              109 === rowState ||\n+              86 === rowState\n+                ? ((rowTag = rowState), (rowState = 2), i++)\n+                : (64 < rowState && 91 > rowState) ||\n+                    35 === rowState ||\n+                    114 === rowState ||\n+                    120 === rowState\n+                  ? ((rowTag = rowState), (rowState = 3), i++)\n+                  : ((rowTag = 0), (rowState = 3));\n+              continue;\n+            case 2:\n+              lastIdx = chunk[i++];\n+              44 === lastIdx\n+                ? (rowState = 4)\n+                : (rowLength =\n+                    (rowLength << 4) |\n+                    (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+              continue;\n+            case 3:\n+              lastIdx = chunk.indexOf(10, i);\n+              break;\n+            case 4:\n+              (lastIdx = i + rowLength),\n+                lastIdx > chunk.length && (lastIdx = -1);\n+          }\n+          var offset = chunk.byteOffset + i;\n+          if (-1 < lastIdx)\n+            (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n+              processFullBinaryRow(\n+                weakResponse,\n+                rowID,\n+                rowTag,\n+                buffer,\n+                rowLength\n+              ),\n+              (i = lastIdx),\n+              3 === rowState && i++,\n+              (rowLength = rowID = rowTag = rowState = 0),\n+              (buffer.length = 0);\n+          else {\n+            chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);\n+            buffer.push(chunk);\n+            rowLength -= chunk.byteLength;\n             break;\n-          case 4:\n-            (lastIdx = i + rowLength), lastIdx > chunk.length && (lastIdx = -1);\n-        }\n-        var offset = chunk.byteOffset + i;\n-        if (-1 < lastIdx)\n-          (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n-            processFullBinaryRow(response, rowID, rowTag, buffer, rowLength),\n-            (i = lastIdx),\n-            3 === rowState && i++,\n-            (rowLength = rowID = rowTag = rowState = 0),\n-            (buffer.length = 0);\n-        else {\n-          chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);\n-          buffer.push(chunk);\n-          rowLength -= chunk.byteLength;\n-          break;\n+          }\n         }\n+        weakResponse._rowState = rowState;\n+        weakResponse._rowID = rowID;\n+        weakResponse._rowTag = rowTag;\n+        weakResponse._rowLength = rowLength;\n       }\n-      response._rowState = rowState;\n-      response._rowID = rowID;\n-      response._rowTag = rowTag;\n-      response._rowLength = rowLength;\n     }\n     function createFromJSONCallback(response) {\n       return function (key, value) {\n@@ -4029,8 +4103,8 @@\n         return value;\n       };\n     }\n-    function close(response) {\n-      reportGlobalError(response, Error(\"Connection closed.\"));\n+    function close(weakResponse) {\n+      reportGlobalError(weakResponse, Error(\"Connection closed.\"));\n     }\n     function noServerCall$1() {\n       throw Error(\n@@ -4052,7 +4126,7 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n@@ -4175,7 +4249,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       initializingChunk = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n@@ -4285,14 +4363,14 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromNodeStream = function (\n       stream,\n       serverConsumerManifest,\n       options\n     ) {\n-      var response = new ResponseInstance(\n+      var response$jscomp$0 = new ResponseInstance(\n         serverConsumerManifest.moduleMap,\n         serverConsumerManifest.serverModuleMap,\n         serverConsumerManifest.moduleLoading,\n@@ -4304,109 +4382,112 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n       stream.on(\"data\", function (chunk) {\n         if (\"string\" === typeof chunk) {\n-          for (\n-            var i = 0,\n-              rowState = response._rowState,\n-              rowID = response._rowID,\n-              rowTag = response._rowTag,\n-              rowLength = response._rowLength,\n-              buffer = response._buffer,\n-              chunkLength = chunk.length;\n-            i < chunkLength;\n+          if (void 0 !== response$jscomp$0.weak.deref()) {\n+            for (\n+              var response = unwrapWeakResponse(response$jscomp$0),\n+                i = 0,\n+                rowState = response._rowState,\n+                rowID = response._rowID,\n+                rowTag = response._rowTag,\n+                rowLength = response._rowLength,\n+                buffer = response._buffer,\n+                chunkLength = chunk.length;\n+              i < chunkLength;\n \n-          ) {\n-            var lastIdx = -1;\n-            switch (rowState) {\n-              case 0:\n-                lastIdx = chunk.charCodeAt(i++);\n-                58 === lastIdx\n-                  ? (rowState = 1)\n-                  : (rowID =\n-                      (rowID << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 1:\n-                rowState = chunk.charCodeAt(i);\n-                84 === rowState ||\n-                65 === rowState ||\n-                79 === rowState ||\n-                111 === rowState ||\n-                85 === rowState ||\n-                83 === rowState ||\n-                115 === rowState ||\n-                76 === rowState ||\n-                108 === rowState ||\n-                71 === rowState ||\n-                103 === rowState ||\n-                77 === rowState ||\n-                109 === rowState ||\n-                86 === rowState\n-                  ? ((rowTag = rowState), (rowState = 2), i++)\n-                  : (64 < rowState && 91 > rowState) ||\n-                      114 === rowState ||\n-                      120 === rowState\n-                    ? ((rowTag = rowState), (rowState = 3), i++)\n-                    : ((rowTag = 0), (rowState = 3));\n-                continue;\n-              case 2:\n-                lastIdx = chunk.charCodeAt(i++);\n-                44 === lastIdx\n-                  ? (rowState = 4)\n-                  : (rowLength =\n-                      (rowLength << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 3:\n-                lastIdx = chunk.indexOf(\"\\n\", i);\n-                break;\n-              case 4:\n-                if (84 !== rowTag)\n-                  throw Error(\n-                    \"Binary RSC chunks cannot be encoded as strings. This is a bug in the wiring of the React streams.\"\n-                  );\n-                if (rowLength < chunk.length || chunk.length > 3 * rowLength)\n+            ) {\n+              var lastIdx = -1;\n+              switch (rowState) {\n+                case 0:\n+                  lastIdx = chunk.charCodeAt(i++);\n+                  58 === lastIdx\n+                    ? (rowState = 1)\n+                    : (rowID =\n+                        (rowID << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 1:\n+                  rowState = chunk.charCodeAt(i);\n+                  84 === rowState ||\n+                  65 === rowState ||\n+                  79 === rowState ||\n+                  111 === rowState ||\n+                  85 === rowState ||\n+                  83 === rowState ||\n+                  115 === rowState ||\n+                  76 === rowState ||\n+                  108 === rowState ||\n+                  71 === rowState ||\n+                  103 === rowState ||\n+                  77 === rowState ||\n+                  109 === rowState ||\n+                  86 === rowState\n+                    ? ((rowTag = rowState), (rowState = 2), i++)\n+                    : (64 < rowState && 91 > rowState) ||\n+                        114 === rowState ||\n+                        120 === rowState\n+                      ? ((rowTag = rowState), (rowState = 3), i++)\n+                      : ((rowTag = 0), (rowState = 3));\n+                  continue;\n+                case 2:\n+                  lastIdx = chunk.charCodeAt(i++);\n+                  44 === lastIdx\n+                    ? (rowState = 4)\n+                    : (rowLength =\n+                        (rowLength << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 3:\n+                  lastIdx = chunk.indexOf(\"\\n\", i);\n+                  break;\n+                case 4:\n+                  if (84 !== rowTag)\n+                    throw Error(\n+                      \"Binary RSC chunks cannot be encoded as strings. This is a bug in the wiring of the React streams.\"\n+                    );\n+                  if (rowLength < chunk.length || chunk.length > 3 * rowLength)\n+                    throw Error(\n+                      \"String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.\"\n+                    );\n+                  lastIdx = chunk.length;\n+              }\n+              if (-1 < lastIdx) {\n+                if (0 < buffer.length)\n                   throw Error(\n                     \"String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.\"\n                   );\n-                lastIdx = chunk.length;\n-            }\n-            if (-1 < lastIdx) {\n-              if (0 < buffer.length)\n+                i = chunk.slice(i, lastIdx);\n+                processFullStringRow(response, rowID, rowTag, i);\n+                i = lastIdx;\n+                3 === rowState && i++;\n+                rowLength = rowID = rowTag = rowState = 0;\n+                buffer.length = 0;\n+              } else if (chunk.length !== i)\n                 throw Error(\n                   \"String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.\"\n                 );\n-              i = chunk.slice(i, lastIdx);\n-              processFullStringRow(response, rowID, rowTag, i);\n-              i = lastIdx;\n-              3 === rowState && i++;\n-              rowLength = rowID = rowTag = rowState = 0;\n-              buffer.length = 0;\n-            } else if (chunk.length !== i)\n-              throw Error(\n-                \"String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.\"\n-              );\n+            }\n+            response._rowState = rowState;\n+            response._rowID = rowID;\n+            response._rowTag = rowTag;\n+            response._rowLength = rowLength;\n           }\n-          response._rowState = rowState;\n-          response._rowID = rowID;\n-          response._rowTag = rowTag;\n-          response._rowLength = rowLength;\n-        } else processBinaryChunk(response, chunk);\n+        } else processBinaryChunk(response$jscomp$0, chunk);\n       });\n       stream.on(\"error\", function (error) {\n-        reportGlobalError(response, error);\n+        reportGlobalError(response$jscomp$0, error);\n       });\n       stream.on(\"end\", function () {\n-        return close(response);\n+        return close(response$jscomp$0);\n       });\n-      return getChunk(response, 0);\n+      return getRoot(response$jscomp$0);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (id) {\n       return createServerReference$1(id, noServerCall$1);"
        },
        {
            "sha": "bcd33d814cc02c3a2f50d94228251ed1e417fc96",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.node.production.js",
            "status": "modified",
            "additions": 49,
            "deletions": 49,
            "changes": 98,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -821,15 +821,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -858,15 +856,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -910,11 +908,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -1005,14 +1004,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -1129,7 +1129,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1404,24 +1404,24 @@ function resolveModule(response, id, model) {\n     model[1],\n     response._nonce\n   );\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1611,7 +1611,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1765,7 +1765,7 @@ function processFullStringRow(response, id, tag, row) {\n       tag = response._chunks;\n       var chunk = tag.get(id);\n       chunk\n-        ? triggerErrorOnChunk(chunk, row)\n+        ? triggerErrorOnChunk(response, chunk, row)\n         : tag.set(id, createErrorChunk(response, row));\n       break;\n     case 84:\n@@ -1806,7 +1806,7 @@ function processFullStringRow(response, id, tag, row) {\n       row.stack = \"Error: \" + row.message;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, row)\n+        ? triggerErrorOnChunk(response, chunk, row)\n         : tag.set(id, createErrorChunk(response, row));\n       break;\n     default:\n@@ -1816,14 +1816,14 @@ function processFullStringRow(response, id, tag, row) {\n           : tag.set(id, new ReactPromise(\"resolved_model\", row, response));\n   }\n }\n-function processBinaryChunk(response, chunk) {\n+function processBinaryChunk(weakResponse, chunk) {\n   for (\n     var i = 0,\n-      rowState = response._rowState,\n-      rowID = response._rowID,\n-      rowTag = response._rowTag,\n-      rowLength = response._rowLength,\n-      buffer = response._buffer,\n+      rowState = weakResponse._rowState,\n+      rowID = weakResponse._rowID,\n+      rowTag = weakResponse._rowTag,\n+      rowLength = weakResponse._rowLength,\n+      buffer = weakResponse._buffer,\n       chunkLength = chunk.length;\n     i < chunkLength;\n \n@@ -1877,7 +1877,7 @@ function processBinaryChunk(response, chunk) {\n     var offset = chunk.byteOffset + i;\n     if (-1 < lastIdx)\n       (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n-        processFullBinaryRow(response, rowID, rowTag, buffer, rowLength),\n+        processFullBinaryRow(weakResponse, rowID, rowTag, buffer, rowLength),\n         (i = lastIdx),\n         3 === rowState && i++,\n         (rowLength = rowID = rowTag = rowState = 0),\n@@ -1889,10 +1889,10 @@ function processBinaryChunk(response, chunk) {\n       break;\n     }\n   }\n-  response._rowState = rowState;\n-  response._rowID = rowID;\n-  response._rowTag = rowTag;\n-  response._rowLength = rowLength;\n+  weakResponse._rowState = rowState;\n+  weakResponse._rowID = rowID;\n+  weakResponse._rowTag = rowTag;\n+  weakResponse._rowLength = rowLength;\n }\n function createFromJSONCallback(response) {\n   return function (key, value) {\n@@ -1929,8 +1929,8 @@ function createFromJSONCallback(response) {\n     return value;\n   };\n }\n-function close(response) {\n-  reportGlobalError(response, Error(\"Connection closed.\"));\n+function close(weakResponse) {\n+  reportGlobalError(weakResponse, Error(\"Connection closed.\"));\n }\n function noServerCall$1() {\n   throw Error("
        },
        {
            "sha": "e2bdfb5078b59ed6e278c59ed8cd011046508d60",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.node.unbundled.development.js",
            "status": "modified",
            "additions": 389,
            "deletions": 308,
            "changes": 697,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -844,7 +844,7 @@\n             \"\\n//# sourceURL=rsc://React/\" +\n             encodeURIComponent(environmentName) +\n             \"/\" +\n-            filename +\n+            encodeURI(filename) +\n             \"?s\" +\n             fakeServerFunctionIdx++),\n           (col += \"\\n//# sourceMappingURL=\" + sourceMap))\n@@ -1539,6 +1539,17 @@\n       this._children = [];\n       this._debugInfo = null;\n     }\n+    function unwrapWeakResponse(weakResponse) {\n+      weakResponse = weakResponse.weak.deref();\n+      if (void 0 === weakResponse)\n+        throw Error(\n+          \"We did not expect to receive new data after GC:ing the response.\"\n+        );\n+      return weakResponse;\n+    }\n+    function cleanupDebugChannel(debugChannel) {\n+      debugChannel(\"\");\n+    }\n     function readChunk(chunk) {\n       switch (chunk.status) {\n         case \"resolved_model\":\n@@ -1558,9 +1569,27 @@\n           throw chunk.reason;\n       }\n     }\n-    function createPendingChunk() {\n+    function getRoot(weakResponse) {\n+      weakResponse = unwrapWeakResponse(weakResponse);\n+      return getChunk(weakResponse, 0);\n+    }\n+    function createPendingChunk(response) {\n+      0 === response._pendingChunks++ &&\n+        ((response._weakResponse.response = response),\n+        null !== response._pendingInitialRender &&\n+          (clearTimeout(response._pendingInitialRender),\n+          (response._pendingInitialRender = null)));\n       return new ReactPromise(\"pending\", null, null);\n     }\n+    function releasePendingChunk(response, chunk) {\n+      \"pending\" === chunk.status &&\n+        0 === --response._pendingChunks &&\n+        ((response._weakResponse.response = null),\n+        (response._pendingInitialRender = setTimeout(\n+          flushInitialRenderPerformance.bind(null, response),\n+          100\n+        )));\n+    }\n     function createErrorChunk(response, error) {\n       return new ReactPromise(\"rejected\", null, error);\n     }\n@@ -1639,15 +1668,14 @@\n           rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n       }\n     }\n-    function triggerErrorOnChunk(chunk, error) {\n-      if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-        chunk.reason.error(error);\n-      else {\n-        var listeners = chunk.reason;\n-        chunk.status = \"rejected\";\n-        chunk.reason = error;\n-        null !== listeners && rejectChunk(listeners, error);\n-      }\n+    function triggerErrorOnChunk(response, chunk, error) {\n+      \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+        ? chunk.reason.error(error)\n+        : (releasePendingChunk(response, chunk),\n+          (response = chunk.reason),\n+          (chunk.status = \"rejected\"),\n+          (chunk.reason = error),\n+          null !== response && rejectChunk(response, error));\n     }\n     function createResolvedIteratorResultChunk(response, value, done) {\n       return new ReactPromise(\n@@ -1670,6 +1698,7 @@\n     function resolveModelChunk(response, chunk, value) {\n       if (\"pending\" !== chunk.status) chunk.reason.enqueueModel(value);\n       else {\n+        releasePendingChunk(response, chunk);\n         var resolveListeners = chunk.value,\n           rejectListeners = chunk.reason;\n         chunk.status = \"resolved_model\";\n@@ -1680,15 +1709,16 @@\n           wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n       }\n     }\n-    function resolveModuleChunk(chunk, value) {\n+    function resolveModuleChunk(response, chunk, value) {\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-        var resolveListeners = chunk.value,\n-          rejectListeners = chunk.reason;\n+        releasePendingChunk(response, chunk);\n+        response = chunk.value;\n+        var rejectListeners = chunk.reason;\n         chunk.status = \"resolved_module\";\n         chunk.value = value;\n-        null !== resolveListeners &&\n+        null !== response &&\n           (initializeModuleChunk(chunk),\n-          wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+          wakeChunkIfInitialized(chunk, response, rejectListeners));\n       }\n     }\n     function initializeModelChunk(chunk) {\n@@ -1733,24 +1763,19 @@\n         (chunk.status = \"rejected\"), (chunk.reason = error);\n       }\n     }\n-    function reportGlobalError(response, error) {\n-      response._closed = !0;\n-      response._closedReason = error;\n-      response._chunks.forEach(function (chunk) {\n-        \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n-      });\n-      var debugChannel = response._debugChannel;\n-      void 0 !== debugChannel &&\n-        (debugChannel(\"\"), (response._debugChannel = void 0));\n-      response._replayConsole &&\n-        (markAllTracksInOrder(),\n-        flushComponentPerformance(\n-          response,\n-          getChunk(response, 0),\n-          0,\n-          -Infinity,\n-          -Infinity\n-        ));\n+    function reportGlobalError(weakResponse, error) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        var response = unwrapWeakResponse(weakResponse);\n+        response._closed = !0;\n+        response._closedReason = error;\n+        response._chunks.forEach(function (chunk) {\n+          \"pending\" === chunk.status &&\n+            triggerErrorOnChunk(response, chunk, error);\n+        });\n+        weakResponse = response._debugChannel;\n+        void 0 !== weakResponse &&\n+          (weakResponse(\"\"), (response._debugChannel = void 0));\n+      }\n     }\n     function nullRefGetter() {\n       return null;\n@@ -1826,7 +1851,7 @@\n       chunk ||\n         ((chunk = response._closed\n           ? createErrorChunk(response, response._closedReason)\n-          : createPendingChunk()),\n+          : createPendingChunk(response)),\n         chunks.set(id, chunk));\n       return chunk;\n     }\n@@ -1912,31 +1937,31 @@\n     }\n     function rejectReference(reference, error) {\n       var handler = reference.handler;\n-      if (\n-        !handler.errored &&\n-        ((reference = handler.value),\n-        (handler.errored = !0),\n-        (handler.value = error),\n-        (handler = handler.chunk),\n-        null !== handler && \"blocked\" === handler.status)\n-      ) {\n-        if (\n-          \"object\" === typeof reference &&\n-          null !== reference &&\n-          reference.$$typeof === REACT_ELEMENT_TYPE\n-        ) {\n-          var erroredComponent = {\n-            name: getComponentNameFromType(reference.type) || \"\",\n-            owner: reference._owner\n-          };\n-          erroredComponent.debugStack = reference._debugStack;\n-          supportsCreateTask &&\n-            (erroredComponent.debugTask = reference._debugTask);\n-          (handler._debugInfo || (handler._debugInfo = [])).push(\n-            erroredComponent\n-          );\n+      reference = reference.response;\n+      if (!handler.errored) {\n+        var blockedValue = handler.value;\n+        handler.errored = !0;\n+        handler.value = error;\n+        handler = handler.chunk;\n+        if (null !== handler && \"blocked\" === handler.status) {\n+          if (\n+            \"object\" === typeof blockedValue &&\n+            null !== blockedValue &&\n+            blockedValue.$$typeof === REACT_ELEMENT_TYPE\n+          ) {\n+            var erroredComponent = {\n+              name: getComponentNameFromType(blockedValue.type) || \"\",\n+              owner: blockedValue._owner\n+            };\n+            erroredComponent.debugStack = blockedValue._debugStack;\n+            supportsCreateTask &&\n+              (erroredComponent.debugTask = blockedValue._debugTask);\n+            (handler._debugInfo || (handler._debugInfo = [])).push(\n+              erroredComponent\n+            );\n+          }\n+          triggerErrorOnChunk(reference, handler, error);\n         }\n-        triggerErrorOnChunk(handler, error);\n       }\n     }\n     function waitForReference(\n@@ -2076,7 +2101,7 @@\n                   erroredComponent\n                 );\n               }\n-              triggerErrorOnChunk(chunk, error);\n+              triggerErrorOnChunk(response, chunk, error);\n             }\n           }\n         }\n@@ -2226,6 +2251,23 @@\n     function applyConstructor(response, model, parentObject) {\n       Object.setPrototypeOf(parentObject, model.prototype);\n     }\n+    function defineLazyGetter(response, chunk, parentObject, key) {\n+      Object.defineProperty(parentObject, key, {\n+        get: function () {\n+          \"resolved_model\" === chunk.status && initializeModelChunk(chunk);\n+          switch (chunk.status) {\n+            case \"fulfilled\":\n+              return chunk.value;\n+            case \"rejected\":\n+              throw chunk.reason;\n+          }\n+          return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+        },\n+        enumerable: !0,\n+        configurable: !1\n+      });\n+      return null;\n+    }\n     function extractIterator(response, model) {\n       return model[Symbol.iterator]();\n     }\n@@ -2271,15 +2313,13 @@\n           case \"S\":\n             return Symbol.for(value.slice(2));\n           case \"F\":\n-            return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                loadServerReference\n-              )\n+            var ref = value.slice(2);\n+            return getOutlinedModel(\n+              response,\n+              ref,\n+              parentObject,\n+              key,\n+              loadServerReference\n             );\n           case \"T\":\n             parentObject = \"$\" + value.slice(2);\n@@ -2291,47 +2331,41 @@\n             return response.get(parentObject);\n           case \"Q\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createMap)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createMap)\n             );\n           case \"W\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createSet)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createSet)\n             );\n           case \"B\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(response, value, parentObject, key, createBlob)\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createBlob)\n             );\n           case \"K\":\n             return (\n-              (value = value.slice(2)),\n-              getOutlinedModel(\n-                response,\n-                value,\n-                parentObject,\n-                key,\n-                createFormData\n-              )\n+              (ref = value.slice(2)),\n+              getOutlinedModel(response, ref, parentObject, key, createFormData)\n             );\n           case \"Z\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 resolveErrorDev\n               )\n             );\n           case \"i\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 extractIterator\n@@ -2351,10 +2385,10 @@\n             return BigInt(value.slice(2));\n           case \"P\":\n             return (\n-              (value = value.slice(2)),\n+              (ref = value.slice(2)),\n               getOutlinedModel(\n                 response,\n-                value,\n+                ref,\n                 parentObject,\n                 key,\n                 applyConstructor\n@@ -2400,23 +2434,27 @@\n               return function () {};\n             }\n           case \"Y\":\n-            return (\n-              2 < value.length &&\n-                (response = response._debugChannel) &&\n-                ((value = value.slice(2)), response(\"R:\" + value)),\n-              Object.defineProperty(parentObject, key, {\n-                get: function () {\n-                  return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n-                },\n-                enumerable: !0,\n-                configurable: !1\n-              }),\n-              null\n-            );\n+            if (2 < value.length && (ref = response._debugChannel)) {\n+              value = value.slice(2);\n+              var _id2 = parseInt(value, 16);\n+              response._chunks.has(_id2) || ref(\"Q:\" + value);\n+              ref = getChunk(response, _id2);\n+              return \"fulfilled\" === ref.status\n+                ? ref.value\n+                : defineLazyGetter(response, ref, parentObject, key);\n+            }\n+            Object.defineProperty(parentObject, key, {\n+              get: function () {\n+                return \"This object has been omitted by React in the console log to avoid sending too much data from the server. Try logging smaller or more specific objects.\";\n+              },\n+              enumerable: !0,\n+              configurable: !1\n+            });\n+            return null;\n           default:\n             return (\n-              (value = value.slice(1)),\n-              getOutlinedModel(response, value, parentObject, key, createModel)\n+              (ref = value.slice(1)),\n+              getOutlinedModel(response, ref, parentObject, key, createModel)\n             );\n         }\n       }\n@@ -2456,6 +2494,9 @@\n       this._closedReason = null;\n       this._tempRefs = temporaryReferences;\n       this._timeOrigin = 0;\n+      this._pendingInitialRender = null;\n+      this._pendingChunks = 0;\n+      this._weakResponse = { weak: new WeakRef(this), response: this };\n       this._debugRootOwner = bundlerConfig =\n         void 0 === ReactSharedInteralsServer ||\n         null === ReactSharedInteralsServer.A\n@@ -2472,18 +2513,23 @@\n       this._debugChannel = debugChannel;\n       this._replayConsole = replayConsole;\n       this._rootEnvironmentName = environmentName;\n+      debugChannel &&\n+        (null === debugChannelRegistry\n+          ? (debugChannel(\"\"), (this._debugChannel = void 0))\n+          : debugChannelRegistry.register(this, debugChannel));\n       replayConsole && markAllTracksInOrder();\n       this._fromJSON = createFromJSONCallback(this);\n     }\n     function resolveDebugHalt(response, id) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n-      chunk || response.set(id, (chunk = createPendingChunk()));\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk || chunks.set(id, (chunk = createPendingChunk(response)));\n       if (\"pending\" === chunk.status || \"blocked\" === chunk.status)\n-        (id = chunk),\n-          (id.status = \"halted\"),\n-          (id.value = null),\n-          (id.reason = null);\n+        releasePendingChunk(response, chunk),\n+          (response = chunk),\n+          (response.status = \"halted\"),\n+          (response.value = null),\n+          (response.reason = null);\n     }\n     function resolveModel(response, id, model) {\n       var chunks = response._chunks,\n@@ -2493,18 +2539,20 @@\n         : chunks.set(id, new ReactPromise(\"resolved_model\", model, response));\n     }\n     function resolveText(response, id, text) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(text)\n-        : response.set(id, new ReactPromise(\"fulfilled\", text, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", text, null)));\n     }\n     function resolveBuffer(response, id, buffer) {\n-      response = response._chunks;\n-      var chunk = response.get(id);\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n       chunk && \"pending\" !== chunk.status\n         ? chunk.reason.enqueueValue(buffer)\n-        : response.set(id, new ReactPromise(\"fulfilled\", buffer, null));\n+        : (chunk && releasePendingChunk(response, chunk),\n+          chunks.set(id, new ReactPromise(\"fulfilled\", buffer, null)));\n     }\n     function resolveModule(response, id, model) {\n       var chunks = response._chunks,\n@@ -2519,39 +2567,41 @@\n         model[1],\n         response._nonce\n       );\n-      if ((response = preloadModule(clientReference))) {\n+      if ((model = preloadModule(clientReference))) {\n         if (chunk) {\n+          releasePendingChunk(response, chunk);\n           var blockedChunk = chunk;\n           blockedChunk.status = \"blocked\";\n         } else\n           (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n             chunks.set(id, blockedChunk);\n-        response.then(\n+        model.then(\n           function () {\n-            return resolveModuleChunk(blockedChunk, clientReference);\n+            return resolveModuleChunk(response, blockedChunk, clientReference);\n           },\n           function (error) {\n-            return triggerErrorOnChunk(blockedChunk, error);\n+            return triggerErrorOnChunk(response, blockedChunk, error);\n           }\n         );\n       } else\n         chunk\n-          ? resolveModuleChunk(chunk, clientReference)\n+          ? resolveModuleChunk(response, chunk, clientReference)\n           : chunks.set(\n               id,\n               new ReactPromise(\"resolved_module\", clientReference, null)\n             );\n     }\n     function resolveStream(response, id, stream, controller) {\n-      var chunks = response._chunks;\n-      response = chunks.get(id);\n-      response\n-        ? \"pending\" === response.status &&\n-          ((id = response.value),\n-          (response.status = \"fulfilled\"),\n-          (response.value = stream),\n-          (response.reason = controller),\n-          null !== id && wakeChunk(id, response.value))\n+      var chunks = response._chunks,\n+        chunk = chunks.get(id);\n+      chunk\n+        ? \"pending\" === chunk.status &&\n+          (releasePendingChunk(response, chunk),\n+          (response = chunk.value),\n+          (chunk.status = \"fulfilled\"),\n+          (chunk.value = stream),\n+          (chunk.reason = controller),\n+          null !== response && wakeChunk(response, chunk.value))\n         : chunks.set(id, new ReactPromise(\"fulfilled\", stream, controller));\n     }\n     function startReadableStream(response, id, type) {\n@@ -2588,19 +2638,19 @@\n                 (previousBlockedChunk = chunk));\n           } else {\n             chunk = previousBlockedChunk;\n-            var _chunk2 = createPendingChunk();\n-            _chunk2.then(\n+            var _chunk3 = createPendingChunk(response);\n+            _chunk3.then(\n               function (v) {\n                 return controller.enqueue(v);\n               },\n               function (e) {\n                 return controller.error(e);\n               }\n             );\n-            previousBlockedChunk = _chunk2;\n+            previousBlockedChunk = _chunk3;\n             chunk.then(function () {\n-              previousBlockedChunk === _chunk2 && (previousBlockedChunk = null);\n-              resolveModelChunk(response, _chunk2, json);\n+              previousBlockedChunk === _chunk3 && (previousBlockedChunk = null);\n+              resolveModelChunk(response, _chunk3, json);\n             });\n           }\n         },\n@@ -2653,7 +2703,7 @@\n                 { done: !0, value: void 0 },\n                 null\n               );\n-            buffer[nextReadIndex] = createPendingChunk();\n+            buffer[nextReadIndex] = createPendingChunk(response);\n           }\n           return buffer[nextReadIndex++];\n         });\n@@ -2726,11 +2776,11 @@\n             closed = !0;\n             for (\n               nextWriteIndex === buffer.length &&\n-              (buffer[nextWriteIndex] = createPendingChunk());\n+              (buffer[nextWriteIndex] = createPendingChunk(response));\n               nextWriteIndex < buffer.length;\n \n             )\n-              triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+              triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n           }\n         }\n       );\n@@ -2773,7 +2823,7 @@\n       reason.$$typeof = REACT_POSTPONE_TYPE;\n       stack = response._chunks;\n       (env = stack.get(id))\n-        ? triggerErrorOnChunk(env, reason)\n+        ? triggerErrorOnChunk(response, env, reason)\n         : stack.set(id, createErrorChunk(response, reason));\n     }\n     function resolveHint(response, code, model) {\n@@ -3248,9 +3298,8 @@\n         previousResult.track = trackIdx$jscomp$6;\n         return previousResult;\n       }\n-      var children = root._children;\n-      \"resolved_model\" === root.status && initializeModelChunk(root);\n-      var debugInfo = root._debugInfo;\n+      var children = root._children,\n+        debugInfo = root._debugInfo;\n       if (debugInfo) {\n         for (var startTime$jscomp$0 = 0, i = 0; i < debugInfo.length; i++) {\n           var info = debugInfo[i];\n@@ -3710,6 +3759,20 @@\n       result.endTime = childrenEndTime;\n       return result;\n     }\n+    function flushInitialRenderPerformance(response) {\n+      if (response._replayConsole) {\n+        var rootChunk = getChunk(response, 0);\n+        isArrayImpl(rootChunk._children) &&\n+          (markAllTracksInOrder(),\n+          flushComponentPerformance(\n+            response,\n+            rootChunk,\n+            0,\n+            -Infinity,\n+            -Infinity\n+          ));\n+      }\n+    }\n     function processFullBinaryRow(response, id, tag, buffer, chunk) {\n       switch (tag) {\n         case 65:\n@@ -3780,7 +3843,7 @@\n           row = response._chunks;\n           var chunk = row.get(id);\n           chunk\n-            ? triggerErrorOnChunk(chunk, tag)\n+            ? triggerErrorOnChunk(response, chunk, tag)\n             : row.set(id, createErrorChunk(response, tag));\n           break;\n         case 84:\n@@ -3832,84 +3895,95 @@\n             : resolveModel(response, id, row);\n       }\n     }\n-    function processBinaryChunk(response, chunk) {\n-      for (\n-        var i = 0,\n-          rowState = response._rowState,\n-          rowID = response._rowID,\n-          rowTag = response._rowTag,\n-          rowLength = response._rowLength,\n-          buffer = response._buffer,\n-          chunkLength = chunk.length;\n-        i < chunkLength;\n+    function processBinaryChunk(weakResponse, chunk) {\n+      if (void 0 !== weakResponse.weak.deref()) {\n+        weakResponse = unwrapWeakResponse(weakResponse);\n+        for (\n+          var i = 0,\n+            rowState = weakResponse._rowState,\n+            rowID = weakResponse._rowID,\n+            rowTag = weakResponse._rowTag,\n+            rowLength = weakResponse._rowLength,\n+            buffer = weakResponse._buffer,\n+            chunkLength = chunk.length;\n+          i < chunkLength;\n \n-      ) {\n-        var lastIdx = -1;\n-        switch (rowState) {\n-          case 0:\n-            lastIdx = chunk[i++];\n-            58 === lastIdx\n-              ? (rowState = 1)\n-              : (rowID =\n-                  (rowID << 4) | (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-            continue;\n-          case 1:\n-            rowState = chunk[i];\n-            84 === rowState ||\n-            65 === rowState ||\n-            79 === rowState ||\n-            111 === rowState ||\n-            85 === rowState ||\n-            83 === rowState ||\n-            115 === rowState ||\n-            76 === rowState ||\n-            108 === rowState ||\n-            71 === rowState ||\n-            103 === rowState ||\n-            77 === rowState ||\n-            109 === rowState ||\n-            86 === rowState\n-              ? ((rowTag = rowState), (rowState = 2), i++)\n-              : (64 < rowState && 91 > rowState) ||\n-                  35 === rowState ||\n-                  114 === rowState ||\n-                  120 === rowState\n-                ? ((rowTag = rowState), (rowState = 3), i++)\n-                : ((rowTag = 0), (rowState = 3));\n-            continue;\n-          case 2:\n-            lastIdx = chunk[i++];\n-            44 === lastIdx\n-              ? (rowState = 4)\n-              : (rowLength =\n-                  (rowLength << 4) |\n-                  (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-            continue;\n-          case 3:\n-            lastIdx = chunk.indexOf(10, i);\n+        ) {\n+          var lastIdx = -1;\n+          switch (rowState) {\n+            case 0:\n+              lastIdx = chunk[i++];\n+              58 === lastIdx\n+                ? (rowState = 1)\n+                : (rowID =\n+                    (rowID << 4) |\n+                    (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+              continue;\n+            case 1:\n+              rowState = chunk[i];\n+              84 === rowState ||\n+              65 === rowState ||\n+              79 === rowState ||\n+              111 === rowState ||\n+              85 === rowState ||\n+              83 === rowState ||\n+              115 === rowState ||\n+              76 === rowState ||\n+              108 === rowState ||\n+              71 === rowState ||\n+              103 === rowState ||\n+              77 === rowState ||\n+              109 === rowState ||\n+              86 === rowState\n+                ? ((rowTag = rowState), (rowState = 2), i++)\n+                : (64 < rowState && 91 > rowState) ||\n+                    35 === rowState ||\n+                    114 === rowState ||\n+                    120 === rowState\n+                  ? ((rowTag = rowState), (rowState = 3), i++)\n+                  : ((rowTag = 0), (rowState = 3));\n+              continue;\n+            case 2:\n+              lastIdx = chunk[i++];\n+              44 === lastIdx\n+                ? (rowState = 4)\n+                : (rowLength =\n+                    (rowLength << 4) |\n+                    (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+              continue;\n+            case 3:\n+              lastIdx = chunk.indexOf(10, i);\n+              break;\n+            case 4:\n+              (lastIdx = i + rowLength),\n+                lastIdx > chunk.length && (lastIdx = -1);\n+          }\n+          var offset = chunk.byteOffset + i;\n+          if (-1 < lastIdx)\n+            (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n+              processFullBinaryRow(\n+                weakResponse,\n+                rowID,\n+                rowTag,\n+                buffer,\n+                rowLength\n+              ),\n+              (i = lastIdx),\n+              3 === rowState && i++,\n+              (rowLength = rowID = rowTag = rowState = 0),\n+              (buffer.length = 0);\n+          else {\n+            chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);\n+            buffer.push(chunk);\n+            rowLength -= chunk.byteLength;\n             break;\n-          case 4:\n-            (lastIdx = i + rowLength), lastIdx > chunk.length && (lastIdx = -1);\n-        }\n-        var offset = chunk.byteOffset + i;\n-        if (-1 < lastIdx)\n-          (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n-            processFullBinaryRow(response, rowID, rowTag, buffer, rowLength),\n-            (i = lastIdx),\n-            3 === rowState && i++,\n-            (rowLength = rowID = rowTag = rowState = 0),\n-            (buffer.length = 0);\n-        else {\n-          chunk = new Uint8Array(chunk.buffer, offset, chunk.byteLength - i);\n-          buffer.push(chunk);\n-          rowLength -= chunk.byteLength;\n-          break;\n+          }\n         }\n+        weakResponse._rowState = rowState;\n+        weakResponse._rowID = rowID;\n+        weakResponse._rowTag = rowTag;\n+        weakResponse._rowLength = rowLength;\n       }\n-      response._rowState = rowState;\n-      response._rowID = rowID;\n-      response._rowTag = rowTag;\n-      response._rowLength = rowLength;\n     }\n     function createFromJSONCallback(response) {\n       return function (key, value) {\n@@ -3991,8 +4065,8 @@\n         return value;\n       };\n     }\n-    function close(response) {\n-      reportGlobalError(response, Error(\"Connection closed.\"));\n+    function close(weakResponse) {\n+      reportGlobalError(weakResponse, Error(\"Connection closed.\"));\n     }\n     function noServerCall$1() {\n       throw Error(\n@@ -4014,7 +4088,7 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n     }\n     function startReadingFromStream(response, stream) {\n       function progress(_ref) {\n@@ -4137,7 +4211,11 @@\n           \"function\" === typeof reject && reject(this.reason);\n       }\n     };\n-    var initializingHandler = null,\n+    var debugChannelRegistry =\n+        \"function\" === typeof FinalizationRegistry\n+          ? new FinalizationRegistry(cleanupDebugChannel)\n+          : null,\n+      initializingHandler = null,\n       initializingChunk = null,\n       supportsCreateTask = !!console.createTask,\n       fakeFunctionCache = new Map(),\n@@ -4247,14 +4325,14 @@\n           reportGlobalError(response, e);\n         }\n       );\n-      return getChunk(response, 0);\n+      return getRoot(response);\n     };\n     exports.createFromNodeStream = function (\n       stream,\n       serverConsumerManifest,\n       options\n     ) {\n-      var response = new ResponseInstance(\n+      var response$jscomp$0 = new ResponseInstance(\n         serverConsumerManifest.moduleMap,\n         serverConsumerManifest.serverModuleMap,\n         serverConsumerManifest.moduleLoading,\n@@ -4266,109 +4344,112 @@\n         options ? !0 === options.replayConsoleLogs : !1,\n         options && options.environmentName ? options.environmentName : void 0,\n         void 0\n-      );\n+      )._weakResponse;\n       stream.on(\"data\", function (chunk) {\n         if (\"string\" === typeof chunk) {\n-          for (\n-            var i = 0,\n-              rowState = response._rowState,\n-              rowID = response._rowID,\n-              rowTag = response._rowTag,\n-              rowLength = response._rowLength,\n-              buffer = response._buffer,\n-              chunkLength = chunk.length;\n-            i < chunkLength;\n+          if (void 0 !== response$jscomp$0.weak.deref()) {\n+            for (\n+              var response = unwrapWeakResponse(response$jscomp$0),\n+                i = 0,\n+                rowState = response._rowState,\n+                rowID = response._rowID,\n+                rowTag = response._rowTag,\n+                rowLength = response._rowLength,\n+                buffer = response._buffer,\n+                chunkLength = chunk.length;\n+              i < chunkLength;\n \n-          ) {\n-            var lastIdx = -1;\n-            switch (rowState) {\n-              case 0:\n-                lastIdx = chunk.charCodeAt(i++);\n-                58 === lastIdx\n-                  ? (rowState = 1)\n-                  : (rowID =\n-                      (rowID << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 1:\n-                rowState = chunk.charCodeAt(i);\n-                84 === rowState ||\n-                65 === rowState ||\n-                79 === rowState ||\n-                111 === rowState ||\n-                85 === rowState ||\n-                83 === rowState ||\n-                115 === rowState ||\n-                76 === rowState ||\n-                108 === rowState ||\n-                71 === rowState ||\n-                103 === rowState ||\n-                77 === rowState ||\n-                109 === rowState ||\n-                86 === rowState\n-                  ? ((rowTag = rowState), (rowState = 2), i++)\n-                  : (64 < rowState && 91 > rowState) ||\n-                      114 === rowState ||\n-                      120 === rowState\n-                    ? ((rowTag = rowState), (rowState = 3), i++)\n-                    : ((rowTag = 0), (rowState = 3));\n-                continue;\n-              case 2:\n-                lastIdx = chunk.charCodeAt(i++);\n-                44 === lastIdx\n-                  ? (rowState = 4)\n-                  : (rowLength =\n-                      (rowLength << 4) |\n-                      (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n-                continue;\n-              case 3:\n-                lastIdx = chunk.indexOf(\"\\n\", i);\n-                break;\n-              case 4:\n-                if (84 !== rowTag)\n-                  throw Error(\n-                    \"Binary RSC chunks cannot be encoded as strings. This is a bug in the wiring of the React streams.\"\n-                  );\n-                if (rowLength < chunk.length || chunk.length > 3 * rowLength)\n+            ) {\n+              var lastIdx = -1;\n+              switch (rowState) {\n+                case 0:\n+                  lastIdx = chunk.charCodeAt(i++);\n+                  58 === lastIdx\n+                    ? (rowState = 1)\n+                    : (rowID =\n+                        (rowID << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 1:\n+                  rowState = chunk.charCodeAt(i);\n+                  84 === rowState ||\n+                  65 === rowState ||\n+                  79 === rowState ||\n+                  111 === rowState ||\n+                  85 === rowState ||\n+                  83 === rowState ||\n+                  115 === rowState ||\n+                  76 === rowState ||\n+                  108 === rowState ||\n+                  71 === rowState ||\n+                  103 === rowState ||\n+                  77 === rowState ||\n+                  109 === rowState ||\n+                  86 === rowState\n+                    ? ((rowTag = rowState), (rowState = 2), i++)\n+                    : (64 < rowState && 91 > rowState) ||\n+                        114 === rowState ||\n+                        120 === rowState\n+                      ? ((rowTag = rowState), (rowState = 3), i++)\n+                      : ((rowTag = 0), (rowState = 3));\n+                  continue;\n+                case 2:\n+                  lastIdx = chunk.charCodeAt(i++);\n+                  44 === lastIdx\n+                    ? (rowState = 4)\n+                    : (rowLength =\n+                        (rowLength << 4) |\n+                        (96 < lastIdx ? lastIdx - 87 : lastIdx - 48));\n+                  continue;\n+                case 3:\n+                  lastIdx = chunk.indexOf(\"\\n\", i);\n+                  break;\n+                case 4:\n+                  if (84 !== rowTag)\n+                    throw Error(\n+                      \"Binary RSC chunks cannot be encoded as strings. This is a bug in the wiring of the React streams.\"\n+                    );\n+                  if (rowLength < chunk.length || chunk.length > 3 * rowLength)\n+                    throw Error(\n+                      \"String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.\"\n+                    );\n+                  lastIdx = chunk.length;\n+              }\n+              if (-1 < lastIdx) {\n+                if (0 < buffer.length)\n                   throw Error(\n                     \"String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.\"\n                   );\n-                lastIdx = chunk.length;\n-            }\n-            if (-1 < lastIdx) {\n-              if (0 < buffer.length)\n+                i = chunk.slice(i, lastIdx);\n+                processFullStringRow(response, rowID, rowTag, i);\n+                i = lastIdx;\n+                3 === rowState && i++;\n+                rowLength = rowID = rowTag = rowState = 0;\n+                buffer.length = 0;\n+              } else if (chunk.length !== i)\n                 throw Error(\n                   \"String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.\"\n                 );\n-              i = chunk.slice(i, lastIdx);\n-              processFullStringRow(response, rowID, rowTag, i);\n-              i = lastIdx;\n-              3 === rowState && i++;\n-              rowLength = rowID = rowTag = rowState = 0;\n-              buffer.length = 0;\n-            } else if (chunk.length !== i)\n-              throw Error(\n-                \"String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.\"\n-              );\n+            }\n+            response._rowState = rowState;\n+            response._rowID = rowID;\n+            response._rowTag = rowTag;\n+            response._rowLength = rowLength;\n           }\n-          response._rowState = rowState;\n-          response._rowID = rowID;\n-          response._rowTag = rowTag;\n-          response._rowLength = rowLength;\n-        } else processBinaryChunk(response, chunk);\n+        } else processBinaryChunk(response$jscomp$0, chunk);\n       });\n       stream.on(\"error\", function (error) {\n-        reportGlobalError(response, error);\n+        reportGlobalError(response$jscomp$0, error);\n       });\n       stream.on(\"end\", function () {\n-        return close(response);\n+        return close(response$jscomp$0);\n       });\n-      return getChunk(response, 0);\n+      return getRoot(response$jscomp$0);\n     };\n     exports.createFromReadableStream = function (stream, options) {\n       options = createResponseFromOptions(options);\n       startReadingFromStream(options, stream);\n-      return getChunk(options, 0);\n+      return getRoot(options);\n     };\n     exports.createServerReference = function (id) {\n       return createServerReference$1(id, noServerCall$1);"
        },
        {
            "sha": "1549691d8567ab322dba4ede6d70c5640204acf4",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.node.unbundled.production.js",
            "status": "modified",
            "additions": 49,
            "deletions": 49,
            "changes": 98,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354",
            "patch": "@@ -786,15 +786,13 @@ function wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners) {\n       rejectListeners && rejectChunk(rejectListeners, chunk.reason);\n   }\n }\n-function triggerErrorOnChunk(chunk, error) {\n-  if (\"pending\" !== chunk.status && \"blocked\" !== chunk.status)\n-    chunk.reason.error(error);\n-  else {\n-    var listeners = chunk.reason;\n-    chunk.status = \"rejected\";\n-    chunk.reason = error;\n-    null !== listeners && rejectChunk(listeners, error);\n-  }\n+function triggerErrorOnChunk(response, chunk, error) {\n+  \"pending\" !== chunk.status && \"blocked\" !== chunk.status\n+    ? chunk.reason.error(error)\n+    : ((response = chunk.reason),\n+      (chunk.status = \"rejected\"),\n+      (chunk.reason = error),\n+      null !== response && rejectChunk(response, error));\n }\n function createResolvedIteratorResultChunk(response, value, done) {\n   return new ReactPromise(\n@@ -823,15 +821,15 @@ function resolveModelChunk(response, chunk, value) {\n       wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n   }\n }\n-function resolveModuleChunk(chunk, value) {\n+function resolveModuleChunk(response, chunk, value) {\n   if (\"pending\" === chunk.status || \"blocked\" === chunk.status) {\n-    var resolveListeners = chunk.value,\n-      rejectListeners = chunk.reason;\n+    response = chunk.value;\n+    var rejectListeners = chunk.reason;\n     chunk.status = \"resolved_module\";\n     chunk.value = value;\n-    null !== resolveListeners &&\n+    null !== response &&\n       (initializeModuleChunk(chunk),\n-      wakeChunkIfInitialized(chunk, resolveListeners, rejectListeners));\n+      wakeChunkIfInitialized(chunk, response, rejectListeners));\n   }\n }\n var initializingHandler = null;\n@@ -875,11 +873,12 @@ function initializeModuleChunk(chunk) {\n     (chunk.status = \"rejected\"), (chunk.reason = error);\n   }\n }\n-function reportGlobalError(response, error) {\n-  response._closed = !0;\n-  response._closedReason = error;\n-  response._chunks.forEach(function (chunk) {\n-    \"pending\" === chunk.status && triggerErrorOnChunk(chunk, error);\n+function reportGlobalError(weakResponse, error) {\n+  weakResponse._closed = !0;\n+  weakResponse._closedReason = error;\n+  weakResponse._chunks.forEach(function (chunk) {\n+    \"pending\" === chunk.status &&\n+      triggerErrorOnChunk(weakResponse, chunk, error);\n   });\n }\n function createLazyChunkWrapper(chunk) {\n@@ -970,14 +969,15 @@ function fulfillReference(reference, value) {\n       null !== parentObject && wakeChunk(parentObject, handler.value)));\n }\n function rejectReference(reference, error) {\n-  reference = reference.handler;\n-  reference.errored ||\n-    ((reference.errored = !0),\n-    (reference.value = error),\n-    (reference = reference.chunk),\n-    null !== reference &&\n-      \"blocked\" === reference.status &&\n-      triggerErrorOnChunk(reference, error));\n+  var handler = reference.handler;\n+  reference = reference.response;\n+  handler.errored ||\n+    ((handler.errored = !0),\n+    (handler.value = error),\n+    (handler = handler.chunk),\n+    null !== handler &&\n+      \"blocked\" === handler.status &&\n+      triggerErrorOnChunk(reference, handler, error));\n }\n function waitForReference(\n   referencedChunk,\n@@ -1094,7 +1094,7 @@ function loadServerReference(response, metaData, parentObject, key) {\n         var chunk = handler.chunk;\n         null !== chunk &&\n           \"blocked\" === chunk.status &&\n-          triggerErrorOnChunk(chunk, error);\n+          triggerErrorOnChunk(response, chunk, error);\n       }\n     }\n   );\n@@ -1369,24 +1369,24 @@ function resolveModule(response, id, model) {\n     model[1],\n     response._nonce\n   );\n-  if ((response = preloadModule(clientReference))) {\n+  if ((model = preloadModule(clientReference))) {\n     if (chunk) {\n       var blockedChunk = chunk;\n       blockedChunk.status = \"blocked\";\n     } else\n       (blockedChunk = new ReactPromise(\"blocked\", null, null)),\n         chunks.set(id, blockedChunk);\n-    response.then(\n+    model.then(\n       function () {\n-        return resolveModuleChunk(blockedChunk, clientReference);\n+        return resolveModuleChunk(response, blockedChunk, clientReference);\n       },\n       function (error) {\n-        return triggerErrorOnChunk(blockedChunk, error);\n+        return triggerErrorOnChunk(response, blockedChunk, error);\n       }\n     );\n   } else\n     chunk\n-      ? resolveModuleChunk(chunk, clientReference)\n+      ? resolveModuleChunk(response, chunk, clientReference)\n       : chunks.set(\n           id,\n           new ReactPromise(\"resolved_module\", clientReference, null)\n@@ -1576,7 +1576,7 @@ function startAsyncIterable(response, id, iterator) {\n           nextWriteIndex < buffer.length;\n \n         )\n-          triggerErrorOnChunk(buffer[nextWriteIndex++], error);\n+          triggerErrorOnChunk(response, buffer[nextWriteIndex++], error);\n       }\n     }\n   );\n@@ -1730,7 +1730,7 @@ function processFullStringRow(response, id, tag, row) {\n       tag = response._chunks;\n       var chunk = tag.get(id);\n       chunk\n-        ? triggerErrorOnChunk(chunk, row)\n+        ? triggerErrorOnChunk(response, chunk, row)\n         : tag.set(id, createErrorChunk(response, row));\n       break;\n     case 84:\n@@ -1771,7 +1771,7 @@ function processFullStringRow(response, id, tag, row) {\n       row.stack = \"Error: \" + row.message;\n       tag = response._chunks;\n       (chunk = tag.get(id))\n-        ? triggerErrorOnChunk(chunk, row)\n+        ? triggerErrorOnChunk(response, chunk, row)\n         : tag.set(id, createErrorChunk(response, row));\n       break;\n     default:\n@@ -1781,14 +1781,14 @@ function processFullStringRow(response, id, tag, row) {\n           : tag.set(id, new ReactPromise(\"resolved_model\", row, response));\n   }\n }\n-function processBinaryChunk(response, chunk) {\n+function processBinaryChunk(weakResponse, chunk) {\n   for (\n     var i = 0,\n-      rowState = response._rowState,\n-      rowID = response._rowID,\n-      rowTag = response._rowTag,\n-      rowLength = response._rowLength,\n-      buffer = response._buffer,\n+      rowState = weakResponse._rowState,\n+      rowID = weakResponse._rowID,\n+      rowTag = weakResponse._rowTag,\n+      rowLength = weakResponse._rowLength,\n+      buffer = weakResponse._buffer,\n       chunkLength = chunk.length;\n     i < chunkLength;\n \n@@ -1842,7 +1842,7 @@ function processBinaryChunk(response, chunk) {\n     var offset = chunk.byteOffset + i;\n     if (-1 < lastIdx)\n       (rowLength = new Uint8Array(chunk.buffer, offset, lastIdx - i)),\n-        processFullBinaryRow(response, rowID, rowTag, buffer, rowLength),\n+        processFullBinaryRow(weakResponse, rowID, rowTag, buffer, rowLength),\n         (i = lastIdx),\n         3 === rowState && i++,\n         (rowLength = rowID = rowTag = rowState = 0),\n@@ -1854,10 +1854,10 @@ function processBinaryChunk(response, chunk) {\n       break;\n     }\n   }\n-  response._rowState = rowState;\n-  response._rowID = rowID;\n-  response._rowTag = rowTag;\n-  response._rowLength = rowLength;\n+  weakResponse._rowState = rowState;\n+  weakResponse._rowID = rowID;\n+  weakResponse._rowTag = rowTag;\n+  weakResponse._rowLength = rowLength;\n }\n function createFromJSONCallback(response) {\n   return function (key, value) {\n@@ -1894,8 +1894,8 @@ function createFromJSONCallback(response) {\n     return value;\n   };\n }\n-function close(response) {\n-  reportGlobalError(response, Error(\"Connection closed.\"));\n+function close(weakResponse) {\n+  reportGlobalError(weakResponse, Error(\"Connection closed.\"));\n }\n function noServerCall$1() {\n   throw Error("
        },
        {
            "sha": "99173eccd75d9b19f31759b8221a375ed9517a67",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-server.browser.development.js",
            "status": "modified",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "80baa43e289c8460d52fea03d335f5a1cef71f06",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-server.browser.production.js",
            "status": "modified",
            "additions": 139,
            "deletions": 90,
            "changes": 229,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "025faa765fcd30284bf47ba85a2e617f33eb226d",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-server.edge.development.js",
            "status": "modified",
            "additions": 164,
            "deletions": 131,
            "changes": 295,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "7197da06009e5f30b140e7ffea08d5ec09eed7ac",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-server.edge.production.js",
            "status": "modified",
            "additions": 139,
            "deletions": 90,
            "changes": 229,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "81d1f429384a8219ff7ef8a944a746db17b39f0d",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-server.node.development.js",
            "status": "modified",
            "additions": 355,
            "deletions": 249,
            "changes": 604,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "3c2a3dccdcf39d0abab2735084202a903f53dc2f",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-server.node.production.js",
            "status": "modified",
            "additions": 140,
            "deletions": 91,
            "changes": 231,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "4bda0670ef8c58765bdb9ee4cf98d81e2450421b",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-server.node.unbundled.development.js",
            "status": "modified",
            "additions": 355,
            "deletions": 249,
            "changes": 604,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "cce2a21d74344d9a6c9a4d777acafe9fd624553e",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-server.node.unbundled.production.js",
            "status": "modified",
            "additions": 140,
            "deletions": 91,
            "changes": 231,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "44b5e0dfbdfd5d059ca98e89be6b5e06bbcfbe22",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fpackage.json?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "371ce46862e9bbfc7ac53f8a993a5a745a968dad",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.browser.development.js",
            "status": "modified",
            "additions": 293,
            "deletions": 226,
            "changes": 519,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "e6e6c372a0687181b945899adfd02925d04890d5",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.browser.production.js",
            "status": "modified",
            "additions": 52,
            "deletions": 51,
            "changes": 103,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "feef0603671f201f5bfe2d66bd3b79176450cae9",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.edge.development.js",
            "status": "modified",
            "additions": 280,
            "deletions": 214,
            "changes": 494,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "05f1360b97fd6820f798d6e72e02c160d24a977e",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.edge.production.js",
            "status": "modified",
            "additions": 41,
            "deletions": 41,
            "changes": 82,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "d8c9f59f4d79bdc8d4dfa8bd9d6bbe8b80c0c9c5",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.node.development.js",
            "status": "modified",
            "additions": 372,
            "deletions": 295,
            "changes": 667,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "1cb286911a00c315b2463dc22c9112a5d925c0d3",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.node.production.js",
            "status": "modified",
            "additions": 59,
            "deletions": 59,
            "changes": 118,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "31a18779cd3f145cf0cf851ae95169ecb2b56679",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.node.unbundled.development.js",
            "status": "modified",
            "additions": 372,
            "deletions": 295,
            "changes": 667,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "d69fb30f2a09fb8c2bae3fe585a12a1e2dd92a58",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.node.unbundled.production.js",
            "status": "modified",
            "additions": 59,
            "deletions": 59,
            "changes": 118,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.node.unbundled.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "ac19719c4837f7e866395f5508bca0fb2de2e597",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-server.browser.development.js",
            "status": "modified",
            "additions": 101,
            "deletions": 70,
            "changes": 171,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.browser.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "89599515bf7dca8ca8d720ca6cab2b1b7a3f1ab5",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-server.browser.production.js",
            "status": "modified",
            "additions": 87,
            "deletions": 64,
            "changes": 151,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.browser.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "2e9e9c3acd9224869e908b1ca865bd510ca0676b",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-server.edge.development.js",
            "status": "modified",
            "additions": 101,
            "deletions": 70,
            "changes": 171,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.edge.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "722543c30f1f97b4a79056cd2d0264ea10c7f6a6",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-server.edge.production.js",
            "status": "modified",
            "additions": 87,
            "deletions": 64,
            "changes": 151,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.edge.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "471463a0aa0cfb2bea7600e52626f512fbc38f4d",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-server.node.development.js",
            "status": "modified",
            "additions": 104,
            "deletions": 73,
            "changes": 177,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "b4c903487ee92784ae1d4eea72e5f2ab47c42ea5",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-server.node.production.js",
            "status": "modified",
            "additions": 88,
            "deletions": 65,
            "changes": 153,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "9bbbd5df2af3423f672389029894857aad67f403",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-server.node.unbundled.development.js",
            "status": "modified",
            "additions": 104,
            "deletions": 73,
            "changes": 177,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "9aa5560c07c625afb734952059cc02509a5cc4be",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-server.node.unbundled.production.js",
            "status": "modified",
            "additions": 88,
            "deletions": 65,
            "changes": 153,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-server.node.unbundled.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "b6c4795d965301df626a97383cc95d96ac91b7d7",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fpackage.json?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "1cb9b9e8fd6d0ff71e2684f3fd66eb7678ebf889",
            "filename": "packages/next/src/compiled/react/cjs/react.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "770ce4c138de74a601b292b24f09a5d7cc03667e",
            "filename": "packages/next/src/compiled/react/cjs/react.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "101dee430d631326f87c8ca4a0a141bf3ccdc825",
            "filename": "packages/next/src/compiled/react/cjs/react.react-server.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.development.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "c428b9bacc909bf79d5ca49ea7219ab9708bdc6a",
            "filename": "packages/next/src/compiled/react/cjs/react.react-server.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.production.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "0504a9a7beeaf5e7c31a427aecf5b6a22bc5113f",
            "filename": "packages/next/src/compiled/unistore/unistore.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Funistore%2Funistore.js",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/packages%2Fnext%2Fsrc%2Fcompiled%2Funistore%2Funistore.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Funistore%2Funistore.js?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "87854091099d0498f8f7c93b136e4676bc664f89",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 239,
            "deletions": 239,
            "changes": 478,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/pnpm-lock.yaml",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/pnpm-lock.yaml?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "a4950b23658a6ee4b778b5e6488f9ff772fac84d",
            "filename": "test/development/app-dir/react-performance-track/react-performance-track.test.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 3,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/test%2Fdevelopment%2Fapp-dir%2Freact-performance-track%2Freact-performance-track.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/test%2Fdevelopment%2Fapp-dir%2Freact-performance-track%2Freact-performance-track.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Freact-performance-track%2Freact-performance-track.test.ts?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "f139f67c64e9d9ac258ab4a891a686c59387e99d",
            "filename": "test/e2e/app-dir/dynamic-data/dynamic-data.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/test%2Fe2e%2Fapp-dir%2Fdynamic-data%2Fdynamic-data.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/test%2Fe2e%2Fapp-dir%2Fdynamic-data%2Fdynamic-data.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-data%2Fdynamic-data.test.ts?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        },
        {
            "sha": "b136df23b4e63217c94adfe2d9d1893d906e4243",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.test.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/9bbcfa2c14716448a81aa278c39da9fb520de354/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9bbcfa2c14716448a81aa278c39da9fb520de354/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts?ref=9bbcfa2c14716448a81aa278c39da9fb520de354"
        }
    ],
    "stats": {
        "total": 18680,
        "additions": 10590,
        "deletions": 8090
    }
}