{
    "author": "bgub",
    "message": "fix: avoid importing types that will be unused (#82856)\n\nSee\nhttps://github.com/vercel/next.js/discussions/77721#discussioncomment-14167630",
    "sha": "ae9261fba1112e8fa84d2bc57fc4d2aff625e46f",
    "files": [
        {
            "sha": "ba4bea640ea80f22c20cd0abc3c7c48374042f19",
            "filename": "packages/next/src/server/lib/router-utils/typegen.ts",
            "status": "modified",
            "additions": 24,
            "deletions": 3,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/ae9261fba1112e8fa84d2bc57fc4d2aff625e46f/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ae9261fba1112e8fa84d2bc57fc4d2aff625e46f/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts?ref=ae9261fba1112e8fa84d2bc57fc4d2aff625e46f",
            "patch": "@@ -538,7 +538,23 @@ export function generateValidatorFile(\n   }\n \n   // Build import statement based on what's actually needed\n-  const routeImports = ['AppRoutes', 'LayoutRoutes', 'ParamMap']\n+  const routeImports = []\n+\n+  // Only import AppRoutes if there are app pages\n+  if (appPageValidations) {\n+    routeImports.push('AppRoutes')\n+  }\n+\n+  // Only import LayoutRoutes if there are layouts\n+  if (layoutValidations) {\n+    routeImports.push('LayoutRoutes')\n+  }\n+\n+  // Only import ParamMap if there are routes that use it\n+  if (appPageValidations || layoutValidations || appRouteHandlerValidations) {\n+    routeImports.push('ParamMap')\n+  }\n+\n   if (hasAppRouteHandlers) {\n     routeImports.push('AppRouteHandlerRoutes')\n   }\n@@ -552,13 +568,18 @@ export function generateValidatorFile(\n     ? \"import type { NextRequest } from 'next/server.js'\\n\"\n     : ''\n \n+  // Only import metadata types if there are App Router pages or layouts that might use them\n+  const metadataImport =\n+    appPageValidations || layoutValidations\n+      ? 'import type { ResolvingMetadata, ResolvingViewport } from \"next/dist/lib/metadata/types/metadata-interface.js\"\\n'\n+      : ''\n+\n   return `// This file is generated automatically by Next.js\n // Do not edit this file manually\n // This file validates that all pages and layouts export the correct types\n \n ${routeImportStatement}\n-import type { ResolvingMetadata, ResolvingViewport } from \"next/dist/lib/metadata/types/metadata-interface.js\"\n-${nextRequestImport}\n+${metadataImport}${nextRequestImport}\n ${typeDefinitions}\n ${appPageValidations}\n "
        }
    ],
    "stats": {
        "total": 27,
        "additions": 24,
        "deletions": 3
    }
}