{
    "author": "mischnic",
    "message": "Turbopack: fix search_index merging in trace server (#78625)\n\nFix a regression in https://github.com/vercel/next.js/pull/78357\nBug found by @sokra as well: https://github.com/vercel/next.js/pull/78357#discussion_r2063544480",
    "sha": "a359330b71633a3bfdd12cf25cb97e0212d78929",
    "files": [
        {
            "sha": "11a361bb51cde572ee0974394c73b437971d021e",
            "filename": "turbopack/crates/turbopack-trace-server/src/span_ref.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a359330b71633a3bfdd12cf25cb97e0212d78929/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_ref.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a359330b71633a3bfdd12cf25cb97e0212d78929/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_ref.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_ref.rs?ref=a359330b71633a3bfdd12cf25cb97e0212d78929",
            "patch": "@@ -498,7 +498,9 @@ impl<'a> SpanRef<'a> {\n                                 add_span_to_map(&mut map, span);\n                             }\n                             SpanOrMap::Map(other_map) => {\n-                                map.extend(other_map);\n+                                for (name, value) in other_map {\n+                                    map.entry(name).or_default().extend(value);\n+                                }\n                             }\n                         }\n                         SpanOrMap::Map(map)"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}