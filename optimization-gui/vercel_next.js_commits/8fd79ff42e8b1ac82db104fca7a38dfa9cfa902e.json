{
    "author": "huozhi",
    "message": "Rename CLAUDE.md to AGENTS.md with symlink (#88105)",
    "sha": "8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e",
    "files": [
        {
            "sha": "f57d1811b6289ba8aa851dc2f0983d8ba7eb4a71",
            "filename": ".alexignore",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e/.alexignore",
            "raw_url": "https://github.com/vercel/next.js/raw/8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e/.alexignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.alexignore?ref=8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e",
            "patch": "@@ -2,4 +2,5 @@ CODE_OF_CONDUCT.md\n examples/\n **/*/LICENSE.md\n .claude/\n+AGENTS.md\n CLAUDE.md"
        },
        {
            "sha": "582ac551676d234bee8b8fc51d04e41099398e44",
            "filename": "AGENTS.md",
            "status": "added",
            "additions": 205,
            "deletions": 0,
            "changes": 205,
            "blob_url": "https://github.com/vercel/next.js/blob/8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e/AGENTS.md",
            "raw_url": "https://github.com/vercel/next.js/raw/8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e/AGENTS.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/AGENTS.md?ref=8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e",
            "patch": "@@ -0,0 +1,205 @@\n+# Next.js Development Guide\n+\n+## Git Workflow\n+\n+**Use Graphite for all git operations** instead of raw git commands:\n+\n+- `gt create <branch-name> -m \"message\"` - Create a new branch with commit\n+- `gt modify -a --no-edit` - Stage all and amend current branch's commit\n+- `gt checkout <branch>` - Switch branches (use instead of `git checkout`)\n+- `gt sync` - Sync and restack all branches\n+- `gt submit --no-edit` - Push and create/update PRs (use `--no-edit` to avoid interactive prompts)\n+- `gt log short` - View stack status\n+\n+**Note**: `gt submit` runs in interactive mode by default and won't push in automated contexts. Always use `gt submit --no-edit` or `gt submit -q` when running from Claude.\n+\n+**Graphite Stack Safety Rules:**\n+\n+- Graphite force-pushes everything - old commits only recoverable via reflog\n+- Never have uncommitted changes when switching branches - they get lost during restack\n+- Never use `git stash` with Graphite - causes conflicts when `gt modify` restacks\n+- Never use `git checkout HEAD -- <file>` after editing - silently restores unfixed version\n+- Always use `gt checkout` (not `git checkout`) to switch branches\n+- `gt modify --no-edit` with unstaged/untracked files stages ALL changes\n+- `gt sync` pulls FROM remote, doesn't push TO remote\n+- `gt modify` restacks children locally but doesn't push them\n+- Always verify with `git status -sb` after stack operations\n+- When resuming from summarized conversation, never trust cached IDs - re-fetch from git/GitHub API\n+\n+**Safe multi-branch fix workflow:**\n+\n+```bash\n+gt checkout parent-branch\n+# make edits\n+gt modify -a --no-edit        # Stage all, amend, restack children\n+git show HEAD -- <files>      # VERIFY fix is in commit\n+gt submit --no-edit           # Push immediately\n+\n+gt checkout child-branch      # Already restacked from gt modify\n+# make edits\n+gt modify -a --no-edit\n+git show HEAD -- <files>      # VERIFY\n+gt submit --no-edit\n+```\n+\n+## Build Commands\n+\n+```bash\n+# Build the Next.js package (dev server only - faster)\n+pnpm --filter=next build:dev-server\n+\n+# Build everything\n+pnpm build\n+\n+# Run specific task\n+pnpm --filter=next taskfile <task>\n+```\n+\n+## Fast Local Development\n+\n+For iterative development, use watch mode + fast test execution:\n+\n+**1. Start watch build in background:**\n+\n+```bash\n+# Runs taskr in watch mode - auto-rebuilds on file changes\n+# Use Bash(run_in_background=true) to keep working while it runs\n+pnpm --filter=next dev\n+```\n+\n+**2. Run tests fast (no isolation, no packing):**\n+\n+```bash\n+# NEXT_SKIP_ISOLATE=1 - skip packing Next.js for each test (much faster)\n+# testonly - runs with --runInBand (no worker isolation overhead)\n+NEXT_SKIP_ISOLATE=1 NEXT_TEST_MODE=dev pnpm testonly test/path/to/test.ts\n+```\n+\n+**3. When done, kill the background watch process.**\n+\n+Only use full `pnpm --filter=next build` for one-off builds (after branch switch, before CI push).\n+\n+**Always rebuild after switching branches:**\n+\n+```bash\n+gt checkout <branch>\n+pnpm build   # Required before running tests (Turborepo dedupes if unchanged)\n+```\n+\n+## Testing\n+\n+```bash\n+# Run specific test file (development mode with Turbopack)\n+pnpm test-dev-turbo test/path/to/test.test.ts\n+\n+# Run tests matching pattern\n+pnpm test-dev-turbo -t \"pattern\"\n+\n+# Run development tests\n+pnpm test-dev-turbo test/development/\n+```\n+\n+**Test commands by mode:**\n+\n+- `pnpm test-dev-turbo` - Development mode with Turbopack (default)\n+- `pnpm test-dev-webpack` - Development mode with Webpack\n+- `pnpm test-start-turbo` - Production build+start with Turbopack\n+- `pnpm test-start-webpack` - Production build+start with Webpack\n+\n+**Other test commands:**\n+\n+- `pnpm test-unit` - Run unit tests only (fast, no browser)\n+- `pnpm testonly <path>` - Run tests without rebuilding (faster iteration)\n+- `pnpm new-test` - Generate a new test file from template\n+\n+## Linting and Types\n+\n+```bash\n+pnpm lint              # Full lint (types, prettier, eslint, ast-grep)\n+pnpm lint-fix          # Auto-fix lint issues\n+pnpm prettier-fix      # Fix formatting only\n+pnpm types             # TypeScript type checking\n+```\n+\n+## Investigating CI Test Failures\n+\n+**Use `/ci-failures` for automated analysis** - analyzes failing jobs in parallel and groups by test file.\n+\n+**CI Analysis Tips:**\n+\n+- Don't spawn too many parallel agents hitting GitHub API (causes rate limits)\n+- Prioritize blocking jobs first: lint, types, then test jobs\n+- Use `gh api` for logs (works on in-progress runs), not `gh run view --log`\n+\n+**Quick triage:**\n+\n+```bash\n+# List failed jobs for a PR\n+gh pr checks <pr-number> | grep fail\n+\n+# Get failed job names\n+gh run view <run-id> --json jobs --jq '.jobs[] | select(.conclusion == \"failure\") | .name'\n+\n+# Search job logs for errors (completed runs only - use gh api for in-progress)\n+gh run view <run-id> --job <job-id> --log 2>&1 | grep -E \"FAIL|Error|error:\" | head -30\n+```\n+\n+**Common failure patterns:**\n+\n+- `rust check / build` → Run `cargo fmt -- --check` locally, fix with `cargo fmt`\n+- `lint / build` → Run `pnpm prettier --write <file>` for prettier errors\n+- Test failures → Run the specific test locally with `pnpm test-dev-turbo <test-path>`\n+\n+**Run tests in the right mode:**\n+\n+```bash\n+# Dev mode (Turbopack)\n+pnpm test-dev-turbo test/path/to/test.ts\n+\n+# Prod mode\n+pnpm test-start-turbo test/path/to/test.ts\n+```\n+\n+## Key Directories\n+\n+- `packages/next/src/` - Main Next.js source code\n+  - `server/` - Server runtime (dev server, router, rendering)\n+  - `client/` - Client-side code\n+  - `build/` - Build tooling (webpack, turbopack configs)\n+  - `cli/` - CLI entry points\n+- `packages/next/dist/` - Compiled output\n+- `turbopack/` - Turbopack bundler (Rust)\n+- `test/` - Test suites\n+  - `development/` - Dev server tests\n+  - `production/` - Production build tests\n+  - `e2e/` - End-to-end tests\n+\n+## Development Tips\n+\n+- The dev server entry point is `packages/next/src/cli/next-dev.ts`\n+- Router server: `packages/next/src/server/lib/router-server.ts`\n+- Use `DEBUG=next:*` for debug logging\n+- Use `NEXT_TELEMETRY_DISABLED=1` when testing locally\n+\n+## Commit and PR Style\n+\n+- Do NOT add \"Generated with Claude Code\" or co-author footers to commits or PRs\n+- Keep commit messages concise and descriptive\n+- PR descriptions should focus on what changed and why\n+\n+## Development Anti-Patterns\n+\n+### Test Gotchas\n+\n+- Mode-specific tests need `skipStart: true` + manual `next.start()` in `beforeAll` after mode check\n+- Don't rely on exact log messages - filter by content patterns, find sequences not positions\n+\n+### Rust/Cargo\n+\n+- cargo fmt uses ASCII order (uppercase before lowercase) - just run `cargo fmt`\n+\n+### Node.js Source Maps\n+\n+- `findSourceMap()` needs `--enable-source-maps` flag or returns undefined\n+- Source map paths vary (webpack: `./src/`, tsc: `src/`) - try multiple formats\n+- `process.cwd()` in stack trace formatting produces different paths in tests vs production"
        },
        {
            "sha": "582ac551676d234bee8b8fc51d04e41099398e44",
            "filename": "CLAUDE.md",
            "status": "removed",
            "additions": 0,
            "deletions": 205,
            "changes": 205,
            "blob_url": "https://github.com/vercel/next.js/blob/42493fb3a408a6d74596977a2bb01469a437d0f4/CLAUDE.md",
            "raw_url": "https://github.com/vercel/next.js/raw/42493fb3a408a6d74596977a2bb01469a437d0f4/CLAUDE.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/CLAUDE.md?ref=42493fb3a408a6d74596977a2bb01469a437d0f4",
            "patch": "@@ -1,205 +0,0 @@\n-# Next.js Development Guide\n-\n-## Git Workflow\n-\n-**Use Graphite for all git operations** instead of raw git commands:\n-\n-- `gt create <branch-name> -m \"message\"` - Create a new branch with commit\n-- `gt modify -a --no-edit` - Stage all and amend current branch's commit\n-- `gt checkout <branch>` - Switch branches (use instead of `git checkout`)\n-- `gt sync` - Sync and restack all branches\n-- `gt submit --no-edit` - Push and create/update PRs (use `--no-edit` to avoid interactive prompts)\n-- `gt log short` - View stack status\n-\n-**Note**: `gt submit` runs in interactive mode by default and won't push in automated contexts. Always use `gt submit --no-edit` or `gt submit -q` when running from Claude.\n-\n-**Graphite Stack Safety Rules:**\n-\n-- Graphite force-pushes everything - old commits only recoverable via reflog\n-- Never have uncommitted changes when switching branches - they get lost during restack\n-- Never use `git stash` with Graphite - causes conflicts when `gt modify` restacks\n-- Never use `git checkout HEAD -- <file>` after editing - silently restores unfixed version\n-- Always use `gt checkout` (not `git checkout`) to switch branches\n-- `gt modify --no-edit` with unstaged/untracked files stages ALL changes\n-- `gt sync` pulls FROM remote, doesn't push TO remote\n-- `gt modify` restacks children locally but doesn't push them\n-- Always verify with `git status -sb` after stack operations\n-- When resuming from summarized conversation, never trust cached IDs - re-fetch from git/GitHub API\n-\n-**Safe multi-branch fix workflow:**\n-\n-```bash\n-gt checkout parent-branch\n-# make edits\n-gt modify -a --no-edit        # Stage all, amend, restack children\n-git show HEAD -- <files>      # VERIFY fix is in commit\n-gt submit --no-edit           # Push immediately\n-\n-gt checkout child-branch      # Already restacked from gt modify\n-# make edits\n-gt modify -a --no-edit\n-git show HEAD -- <files>      # VERIFY\n-gt submit --no-edit\n-```\n-\n-## Build Commands\n-\n-```bash\n-# Build the Next.js package (dev server only - faster)\n-pnpm --filter=next build:dev-server\n-\n-# Build everything\n-pnpm build\n-\n-# Run specific task\n-pnpm --filter=next taskfile <task>\n-```\n-\n-## Fast Local Development\n-\n-For iterative development, use watch mode + fast test execution:\n-\n-**1. Start watch build in background:**\n-\n-```bash\n-# Runs taskr in watch mode - auto-rebuilds on file changes\n-# Use Bash(run_in_background=true) to keep working while it runs\n-pnpm --filter=next dev\n-```\n-\n-**2. Run tests fast (no isolation, no packing):**\n-\n-```bash\n-# NEXT_SKIP_ISOLATE=1 - skip packing Next.js for each test (much faster)\n-# testonly - runs with --runInBand (no worker isolation overhead)\n-NEXT_SKIP_ISOLATE=1 NEXT_TEST_MODE=dev pnpm testonly test/path/to/test.ts\n-```\n-\n-**3. When done, kill the background watch process.**\n-\n-Only use full `pnpm --filter=next build` for one-off builds (after branch switch, before CI push).\n-\n-**Always rebuild after switching branches:**\n-\n-```bash\n-gt checkout <branch>\n-pnpm build   # Required before running tests (Turborepo dedupes if unchanged)\n-```\n-\n-## Testing\n-\n-```bash\n-# Run specific test file (development mode with Turbopack)\n-pnpm test-dev-turbo test/path/to/test.test.ts\n-\n-# Run tests matching pattern\n-pnpm test-dev-turbo -t \"pattern\"\n-\n-# Run development tests\n-pnpm test-dev-turbo test/development/\n-```\n-\n-**Test commands by mode:**\n-\n-- `pnpm test-dev-turbo` - Development mode with Turbopack (default)\n-- `pnpm test-dev-webpack` - Development mode with Webpack\n-- `pnpm test-start-turbo` - Production build+start with Turbopack\n-- `pnpm test-start-webpack` - Production build+start with Webpack\n-\n-**Other test commands:**\n-\n-- `pnpm test-unit` - Run unit tests only (fast, no browser)\n-- `pnpm testonly <path>` - Run tests without rebuilding (faster iteration)\n-- `pnpm new-test` - Generate a new test file from template\n-\n-## Linting and Types\n-\n-```bash\n-pnpm lint              # Full lint (types, prettier, eslint, ast-grep)\n-pnpm lint-fix          # Auto-fix lint issues\n-pnpm prettier-fix      # Fix formatting only\n-pnpm types             # TypeScript type checking\n-```\n-\n-## Investigating CI Test Failures\n-\n-**Use `/ci-failures` for automated analysis** - analyzes failing jobs in parallel and groups by test file.\n-\n-**CI Analysis Tips:**\n-\n-- Don't spawn too many parallel agents hitting GitHub API (causes rate limits)\n-- Prioritize blocking jobs first: lint, types, then test jobs\n-- Use `gh api` for logs (works on in-progress runs), not `gh run view --log`\n-\n-**Quick triage:**\n-\n-```bash\n-# List failed jobs for a PR\n-gh pr checks <pr-number> | grep fail\n-\n-# Get failed job names\n-gh run view <run-id> --json jobs --jq '.jobs[] | select(.conclusion == \"failure\") | .name'\n-\n-# Search job logs for errors (completed runs only - use gh api for in-progress)\n-gh run view <run-id> --job <job-id> --log 2>&1 | grep -E \"FAIL|Error|error:\" | head -30\n-```\n-\n-**Common failure patterns:**\n-\n-- `rust check / build` → Run `cargo fmt -- --check` locally, fix with `cargo fmt`\n-- `lint / build` → Run `pnpm prettier --write <file>` for prettier errors\n-- Test failures → Run the specific test locally with `pnpm test-dev-turbo <test-path>`\n-\n-**Run tests in the right mode:**\n-\n-```bash\n-# Dev mode (Turbopack)\n-pnpm test-dev-turbo test/path/to/test.ts\n-\n-# Prod mode\n-pnpm test-start-turbo test/path/to/test.ts\n-```\n-\n-## Key Directories\n-\n-- `packages/next/src/` - Main Next.js source code\n-  - `server/` - Server runtime (dev server, router, rendering)\n-  - `client/` - Client-side code\n-  - `build/` - Build tooling (webpack, turbopack configs)\n-  - `cli/` - CLI entry points\n-- `packages/next/dist/` - Compiled output\n-- `turbopack/` - Turbopack bundler (Rust)\n-- `test/` - Test suites\n-  - `development/` - Dev server tests\n-  - `production/` - Production build tests\n-  - `e2e/` - End-to-end tests\n-\n-## Development Tips\n-\n-- The dev server entry point is `packages/next/src/cli/next-dev.ts`\n-- Router server: `packages/next/src/server/lib/router-server.ts`\n-- Use `DEBUG=next:*` for debug logging\n-- Use `NEXT_TELEMETRY_DISABLED=1` when testing locally\n-\n-## Commit and PR Style\n-\n-- Do NOT add \"Generated with Claude Code\" or co-author footers to commits or PRs\n-- Keep commit messages concise and descriptive\n-- PR descriptions should focus on what changed and why\n-\n-## Development Anti-Patterns\n-\n-### Test Gotchas\n-\n-- Mode-specific tests need `skipStart: true` + manual `next.start()` in `beforeAll` after mode check\n-- Don't rely on exact log messages - filter by content patterns, find sequences not positions\n-\n-### Rust/Cargo\n-\n-- cargo fmt uses ASCII order (uppercase before lowercase) - just run `cargo fmt`\n-\n-### Node.js Source Maps\n-\n-- `findSourceMap()` needs `--enable-source-maps` flag or returns undefined\n-- Source map paths vary (webpack: `./src/`, tsc: `src/`) - try multiple formats\n-- `process.cwd()` in stack trace formatting produces different paths in tests vs production"
        },
        {
            "sha": "47dc3e3d863cfb5727b87d785d09abf9743c0a72",
            "filename": "CLAUDE.md",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e/CLAUDE.md",
            "raw_url": "https://github.com/vercel/next.js/raw/8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e/CLAUDE.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/CLAUDE.md?ref=8fd79ff42e8b1ac82db104fca7a38dfa9cfa902e",
            "patch": "@@ -0,0 +1 @@\n+AGENTS.md\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 412,
        "additions": 207,
        "deletions": 205
    }
}