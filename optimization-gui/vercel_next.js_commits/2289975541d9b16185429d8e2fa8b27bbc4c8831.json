{
    "author": "lukesandberg",
    "message": "[turbopack] Adopt rcstr! more consistently (#80552)\n\nReplace construction of `RcStr` instances on constant strings with the `rcstr!` macro which can shift construction costs to compile time and eliminate reference counting.\n\nPerformance impacts from all the dropped ref counts are minor but do exist\n\n![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/AwJ29EfoPcPdLSwCZxAz/e82b0e64-5803-4883-a89f-3090f1e937ce.png)\n\nThere is also a small progression in max heap which makes sense, laying out the static rcstrs should be a somewhat easier job compared to mimalloc.",
    "sha": "2289975541d9b16185429d8e2fa8b27bbc4c8831",
    "files": [
        {
            "sha": "4eec0e1fe5ddd1a232b8aae7cb5f88000c929bd7",
            "filename": "crates/next-api/benches/hmr.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-api%2Fbenches%2Fhmr.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-api%2Fbenches%2Fhmr.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fbenches%2Fhmr.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -17,7 +17,7 @@ use next_api::{\n use serde_json::json;\n use tempfile::TempDir;\n use tokio::runtime::Runtime;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     TransientInstance, TurboTasks, TurboTasksApi, Vc, backend::Backend, trace::TraceRawVcs,\n };\n@@ -182,7 +182,7 @@ impl HmrBenchmark {\n         let test_app = create_test_app(module_count)?;\n \n         let project_container = {\n-            let container = ProjectContainer::new(RcStr::from(\"hmr-benchmark\"), true)\n+            let container = ProjectContainer::new(rcstr!(\"hmr-benchmark\"), true)\n                 .to_resolved()\n                 .await?;\n \n@@ -193,7 +193,7 @@ impl HmrBenchmark {\n                 root_path: RcStr::from(root_path),\n                 project_path: RcStr::from(project_path.clone()),\n                 next_config: load_next_config(),\n-                js_config: RcStr::from(\"{}\"),\n+                js_config: rcstr!(\"{}\"),\n                 env: vec![],\n                 define_env: DefineEnv {\n                     client: vec![],\n@@ -205,14 +205,14 @@ impl HmrBenchmark {\n                     poll_interval: None,\n                 },\n                 dev: true,\n-                encryption_key: RcStr::from(\"test-key\"),\n-                build_id: RcStr::from(\"development\"),\n+                encryption_key: rcstr!(\"test-key\"),\n+                build_id: rcstr!(\"development\"),\n                 preview_props: DraftModeOptions {\n-                    preview_mode_id: RcStr::from(\"development\"),\n-                    preview_mode_encryption_key: RcStr::from(\"test-key\"),\n-                    preview_mode_signing_key: RcStr::from(\"test-key\"),\n+                    preview_mode_id: rcstr!(\"development\"),\n+                    preview_mode_encryption_key: rcstr!(\"test-key\"),\n+                    preview_mode_signing_key: rcstr!(\"test-key\"),\n                 },\n-                browserslist_query: RcStr::from(\"last 2 versions\"),\n+                browserslist_query: rcstr!(\"last 2 versions\"),\n                 no_mangling: false,\n                 current_node_js_version: RcStr::from(\"18.0.0\"),\n             };"
        },
        {
            "sha": "826f53b3a17477158f79c676d344dde9c7647cbc",
            "filename": "crates/next-api/src/module_graph.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -12,7 +12,7 @@ use next_core::{\n };\n use rustc_hash::{FxHashMap, FxHashSet};\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     CollectiblesSource, FxIndexMap, ReadRef, ResolvedVc, TryFlatJoinIterExt, TryJoinIterExt,\n     ValueToString, Vc,\n@@ -440,15 +440,16 @@ impl Issue for CssGlobalImportIssue {\n     #[turbo_tasks::function]\n     async fn title(&self) -> Vc<StyledString> {\n         StyledString::Stack(vec![\n-            StyledString::Text(\"Failed to compile\".into()),\n-            StyledString::Text(\n+            StyledString::Text(rcstr!(\"Failed to compile\")),\n+            StyledString::Text(rcstr!(\n                 \"Global CSS cannot be imported from files other than your Custom <App>. Due to \\\n                  the Global nature of stylesheets, and to avoid conflicts, Please move all \\\n                  first-party global CSS imports to pages/_app.js. Or convert the import to \\\n                  Component-Level CSS (CSS Modules).\"\n-                    .into(),\n-            ),\n-            StyledString::Text(\"Read more: https://nextjs.org/docs/messages/css-global\".into()),\n+            )),\n+            StyledString::Text(rcstr!(\n+                \"Read more: https://nextjs.org/docs/messages/css-global\"\n+            )),\n         ])\n         .cell()\n     }"
        },
        {
            "sha": "c67645950787deb46500d3ba1e0e4622d8802e9e",
            "filename": "crates/next-api/src/server_actions.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-api%2Fsrc%2Fserver_actions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-api%2Fsrc%2Fserver_actions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fserver_actions.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -8,7 +8,7 @@ use next_core::{\n     util::NextRuntime,\n };\n use swc_core::{\n-    atoms::Atom,\n+    atoms::{Atom, atom},\n     common::comments::Comments,\n     ecma::{\n         ast::{\n@@ -321,7 +321,7 @@ fn all_export_names(program: &Program) -> Vec<Atom> {\n                     ModuleItem::ModuleDecl(\n                         ModuleDecl::ExportDefaultExpr(..) | ModuleDecl::ExportDefaultDecl(..),\n                     ) => {\n-                        exports.push(\"default\".into());\n+                        exports.push(atom!(\"default\"));\n                     }\n                     ModuleItem::ModuleDecl(ModuleDecl::ExportDecl(decl)) => match &decl.decl {\n                         Decl::Class(c) => {\n@@ -354,7 +354,7 @@ fn all_export_names(program: &Program) -> Vec<Atom> {\n                                     );\n                                 }\n                                 ExportSpecifier::Default(_) => {\n-                                    exports.push(\"default\".into());\n+                                    exports.push(atom!(\"default\"));\n                                 }\n                                 ExportSpecifier::Namespace(e) => {\n                                     exports.push(e.name.atom().clone());"
        },
        {
            "sha": "874fd829e84e15c7442b294101df52d80a400c30",
            "filename": "crates/next-api/src/webpack_stats.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-api%2Fsrc%2Fwebpack_stats.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-api%2Fsrc%2Fwebpack_stats.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fwebpack_stats.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -2,7 +2,7 @@ use anyhow::Result;\n use rustc_hash::FxHashSet;\n use serde::Serialize;\n use tracing::{Level, instrument};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, FxIndexSet, ResolvedVc, TryJoinIterExt, ValueToString, Vc, fxindexmap,\n };\n@@ -94,7 +94,7 @@ where\n     };\n \n     for asset in entry_assets {\n-        let path = RcStr::from(normalize_client_path(&asset.path().await?.path));\n+        let path = normalize_client_path(&asset.path().await?.path);\n \n         let Some(asset_len) = *asset.size_bytes().await? else {\n             continue;\n@@ -108,7 +108,7 @@ where\n                 parents: if let Some(parents) = asset_parents.get(&asset) {\n                     parents\n                         .iter()\n-                        .map(async |c| Ok(normalize_client_path(&c.path().await?.path).into()))\n+                        .map(async |c| Ok(normalize_client_path(&c.path().await?.path)))\n                         .try_join()\n                         .await?\n                 } else {\n@@ -117,7 +117,7 @@ where\n                 children: if let Some(children) = asset_children.get(&asset) {\n                     children\n                         .iter()\n-                        .map(async |c| Ok(normalize_client_path(&c.path().await?.path).into()))\n+                        .map(async |c| Ok(normalize_client_path(&c.path().await?.path)))\n                         .try_join()\n                         .await?\n                 } else {\n@@ -132,7 +132,7 @@ where\n         }\n \n         assets.push(WebpackStatsAsset {\n-            ty: \"asset\".into(),\n+            ty: rcstr!(\"asset\"),\n             name: path.clone(),\n             chunk_names: vec![path],\n             size: asset_len,\n@@ -191,7 +191,7 @@ where\n     })\n }\n \n-fn normalize_client_path(path: &str) -> String {\n+fn normalize_client_path(path: &str) -> RcStr {\n     let next_re = regex::Regex::new(r\"^_next/\").unwrap();\n     next_re.replace(path, \".next/\").into()\n }"
        },
        {
            "sha": "32a4d09bd196c48b4fc6dee8353ea5cd26113caa",
            "filename": "crates/next-build-test/src/lib.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-build-test%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-build-test%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-build-test%2Fsrc%2Flib.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -11,7 +11,7 @@ use next_api::{\n     project::{ProjectContainer, ProjectOptions},\n     route::{Endpoint, EndpointOutputPaths, Route, endpoint_write_to_disk},\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ReadConsistency, ResolvedVc, TransientInstance, TurboTasks, Vc, get_effects};\n use turbo_tasks_backend::{NoopBackingStorage, TurboTasksBackend};\n use turbo_tasks_malloc::TurboMalloc;\n@@ -41,7 +41,7 @@ pub async fn main_inner(\n \n     let project = tt\n         .run_once(async {\n-            let project = ProjectContainer::new(\"next-build-test\".into(), options.dev);\n+            let project = ProjectContainer::new(rcstr!(\"next-build-test\"), options.dev);\n             let project = project.to_resolved().await?;\n             project.initialize(options).await?;\n             Ok(project)"
        },
        {
            "sha": "e25414254228a4f3f919340adc757cdc3ba0a7ad",
            "filename": "crates/next-build-test/src/main.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-build-test%2Fsrc%2Fmain.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-build-test%2Fsrc%2Fmain.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-build-test%2Fsrc%2Fmain.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -12,6 +12,7 @@ use next_core::tracing_presets::{\n     TRACING_NEXT_TURBOPACK_TARGETS,\n };\n use tracing_subscriber::{Registry, layer::SubscriberExt, util::SubscriberInitExt};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::TurboTasks;\n use turbo_tasks_backend::{BackendOptions, TurboTasksBackend, noop_backing_storage};\n use turbo_tasks_malloc::TurboMalloc;\n@@ -159,30 +160,30 @@ fn main() {\n             let canonical_path = std::fs::canonicalize(absolute_dir).unwrap();\n \n             let options = ProjectOptions {\n-                build_id: \"test\".into(),\n+                build_id: rcstr!(\"test\"),\n                 define_env: DefineEnv {\n                     client: vec![],\n                     edge: vec![],\n                     nodejs: vec![],\n                 },\n                 dev: true,\n-                encryption_key: \"deadbeef\".into(),\n+                encryption_key: rcstr!(\"deadbeef\"),\n                 env: vec![],\n                 js_config: include_str!(\"../jsConfig.json\").into(),\n                 next_config: include_str!(\"../nextConfig.json\").into(),\n                 preview_props: next_api::project::DraftModeOptions {\n-                    preview_mode_encryption_key: \"deadbeef\".into(),\n-                    preview_mode_id: \"test\".into(),\n-                    preview_mode_signing_key: \"deadbeef\".into(),\n+                    preview_mode_encryption_key: rcstr!(\"deadbeef\"),\n+                    preview_mode_id: rcstr!(\"test\"),\n+                    preview_mode_signing_key: rcstr!(\"deadbeef\"),\n                 },\n                 project_path: canonical_path.to_string_lossy().into(),\n-                root_path: \"/\".into(),\n+                root_path: rcstr!(\"/\"),\n                 watch: Default::default(),\n                 browserslist_query: \"last 1 Chrome versions, last 1 Firefox versions, last 1 \\\n                                      Safari versions, last 1 Edge versions\"\n                     .into(),\n                 no_mangling: false,\n-                current_node_js_version: \"18.0.0\".into(),\n+                current_node_js_version: rcstr!(\"18.0.0\"),\n             };\n \n             let json = serde_json::to_string_pretty(&options).unwrap();"
        },
        {
            "sha": "6134147fa7ec21e6f40332d9929baf05d52ef7c1",
            "filename": "crates/next-core/src/bootstrap.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fbootstrap.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fbootstrap.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fbootstrap.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::{Context, Result, bail};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{FxIndexMap, ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{File, FileSystemPath};\n use turbopack_core::{\n@@ -92,8 +93,8 @@ pub async fn bootstrap(\n         .await?;\n \n     let mut inner_assets = inner_assets.owned().await?;\n-    inner_assets.insert(\"ENTRY\".into(), asset);\n-    inner_assets.insert(\"BOOTSTRAP_CONFIG\".into(), config_asset);\n+    inner_assets.insert(rcstr!(\"ENTRY\"), asset);\n+    inner_assets.insert(rcstr!(\"BOOTSTRAP_CONFIG\"), config_asset);\n \n     let asset = asset_context\n         .process("
        },
        {
            "sha": "e2155f74185ce2b94b4fbcc8d4a0d641258cdca7",
            "filename": "crates/next-core/src/middleware.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fmiddleware.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fmiddleware.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fmiddleware.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, ResolvedVc, Vc, fxindexmap};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{context::AssetContext, module::Module, reference_type::ReferenceType};\n@@ -27,23 +27,23 @@ pub async fn get_middleware_module(\n     project_root: FileSystemPath,\n     userland_module: ResolvedVc<Box<dyn Module>>,\n ) -> Result<Vc<Box<dyn Module>>> {\n-    const INNER: &str = \"INNER_MIDDLEWARE_MODULE\";\n+    let inner = rcstr!(\"INNER_MIDDLEWARE_MODULE\");\n \n     // Load the file from the next.js codebase.\n     let source = load_next_js_template(\n         \"middleware.js\",\n         project_root,\n         fxindexmap! {\n-            \"VAR_USERLAND\" => INNER.into(),\n-            \"VAR_DEFINITION_PAGE\" => \"/middleware\".into(),\n+            \"VAR_USERLAND\" => inner.clone(),\n+            \"VAR_DEFINITION_PAGE\" => rcstr!(\"/middleware\"),\n         },\n         FxIndexMap::default(),\n         FxIndexMap::default(),\n     )\n     .await?;\n \n     let inner_assets = fxindexmap! {\n-        INNER.into() => userland_module\n+        inner => userland_module\n     };\n \n     let module = asset_context"
        },
        {
            "sha": "b7074ae4a62f3baec6faec8feff54ed5cb7fe88e",
            "filename": "crates/next-core/src/next_app/app_page_entry.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,7 +1,7 @@\n use std::io::Write;\n \n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc, fxindexmap};\n use turbo_tasks_fs::{self, File, FileSystemPath, rope::RopeBuilder};\n use turbopack::ModuleAssetContext;\n@@ -92,7 +92,7 @@ pub async fn get_app_page_entry(\n             \"VAR_MODULE_GLOBAL_ERROR\" => if inner_assets.contains_key(GLOBAL_ERROR) {\n                 GLOBAL_ERROR.into()\n              } else {\n-                \"next/dist/client/components/builtin/global-error\".into()\n+                rcstr!(\"next/dist/client/components/builtin/global-error\")\n             },\n         },\n         fxindexmap! {"
        },
        {
            "sha": "2c230e1080739e6d8850df5582734299e1c2909f",
            "filename": "crates/next-core/src/next_app/app_route_entry.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 11,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_route_entry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_route_entry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_route_entry.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc, fxindexmap};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack::ModuleAssetContext;\n@@ -57,18 +57,17 @@ pub async fn get_app_route_entry(\n \n     let path = source.ident().path().owned().await?;\n \n-    const INNER: &str = \"INNER_APP_ROUTE\";\n+    let inner = rcstr!(\"INNER_APP_ROUTE\");\n \n     let output_type: RcStr = next_config\n         .await?\n         .output\n         .as_ref()\n         .map(|o| match o {\n-            OutputType::Standalone => \"\\\"standalone\\\"\".to_string(),\n-            OutputType::Export => \"\\\"export\\\"\".to_string(),\n+            OutputType::Standalone => rcstr!(\"\\\"standalone\\\"\"),\n+            OutputType::Export => rcstr!(\"\\\"export\\\"\"),\n         })\n-        .map(RcStr::from)\n-        .unwrap_or_else(|| \"\\\"\\\"\".into());\n+        .unwrap_or(rcstr!(\"\\\"\\\"\"));\n \n     // Load the file from the next.js codebase.\n     let virtual_source = load_next_js_template(\n@@ -81,7 +80,7 @@ pub async fn get_app_route_entry(\n             // TODO(alexkirsz) Is this necessary?\n             \"VAR_DEFINITION_BUNDLE_PATH\" => \"\".to_string().into(),\n             \"VAR_RESOLVED_PAGE_PATH\" => path.value_to_string().owned().await?,\n-            \"VAR_USERLAND\" => INNER.into(),\n+            \"VAR_USERLAND\" => inner.clone(),\n         },\n         fxindexmap! {\n             \"nextConfigOutput\" => output_type\n@@ -100,7 +99,7 @@ pub async fn get_app_route_entry(\n         .await?;\n \n     let inner_assets = fxindexmap! {\n-        INNER.into() => userland_module\n+        inner => userland_module\n     };\n \n     let mut rsc_entry = module_asset_context\n@@ -137,15 +136,15 @@ async fn wrap_edge_route(\n     page: AppPage,\n     next_config: Vc<NextConfig>,\n ) -> Result<Vc<Box<dyn Module>>> {\n-    const INNER: &str = \"INNER_ROUTE_ENTRY\";\n+    let inner = rcstr!(\"INNER_ROUTE_ENTRY\");\n \n     let next_config = &*next_config.await?;\n \n     let source = load_next_js_template(\n         \"edge-app-route.js\",\n         project_root.clone(),\n         fxindexmap! {\n-            \"VAR_USERLAND\" => INNER.into(),\n+            \"VAR_USERLAND\" => inner.clone(),\n             \"VAR_PAGE\" => page.to_string().into(),\n         },\n         fxindexmap! {\n@@ -156,7 +155,7 @@ async fn wrap_edge_route(\n     .await?;\n \n     let inner_assets = fxindexmap! {\n-        INNER.into() => entry\n+        inner => entry\n     };\n \n     let wrapped = asset_context"
        },
        {
            "sha": "e52ff26aed63405d8732345d2cb9d4c45d0a13ee",
            "filename": "crates/next-core/src/next_app/metadata/route.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fmetadata%2Froute.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fmetadata%2Froute.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fmetadata%2Froute.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -5,6 +5,7 @@\n use anyhow::{Ok, Result, bail};\n use base64::{display::Base64Display, engine::general_purpose::STANDARD};\n use indoc::{formatdoc, indoc};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::Vc;\n use turbo_tasks_fs::{self, File, FileContent, FileSystemPath};\n use turbopack::ModuleAssetContext;\n@@ -83,12 +84,12 @@ pub async fn get_app_metadata_route_entry(\n         page.0.pop();\n \n         if is_multi_dynamic {\n-            page.push(PageSegment::Dynamic(\"__metadata_id__\".into()))?;\n+            page.push(PageSegment::Dynamic(rcstr!(\"__metadata_id__\")))?;\n         } else {\n             // if page last segment is sitemap, change to sitemap.xml\n-            if page.last() == Some(&PageSegment::Static(\"sitemap\".into())) {\n+            if page.last() == Some(&PageSegment::Static(rcstr!(\"sitemap\"))) {\n                 page.0.pop();\n-                page.push(PageSegment::Static(\"sitemap.xml\".into()))?\n+                page.push(PageSegment::Static(rcstr!(\"sitemap.xml\")))?\n             }\n         };\n         // Push /route back"
        },
        {
            "sha": "ce7dfdbedd168b0901ca90e8c7cd84d684d801fa",
            "filename": "crates/next-core/src/next_build.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_build.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_build.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_build.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::Vc;\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::resolve::{ExternalTraced, ExternalType, options::ImportMapping};\n@@ -12,10 +12,10 @@ pub async fn get_postcss_package_mapping(\n ) -> Result<Vc<ImportMapping>> {\n     Ok(ImportMapping::Alternatives(vec![\n         // Prefer the local installed version over the next.js version\n-        ImportMapping::PrimaryAlternative(\"postcss\".into(), Some(project_path.clone()))\n+        ImportMapping::PrimaryAlternative(rcstr!(\"postcss\"), Some(project_path.clone()))\n             .resolved_cell(),\n         ImportMapping::PrimaryAlternative(\n-            \"postcss\".into(),\n+            rcstr!(\"postcss\"),\n             Some(get_next_package(project_path.clone()).owned().await?),\n         )\n         .resolved_cell(),"
        },
        {
            "sha": "6186382110b8a3c8b68017023194cb2555215fb0",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1170,10 +1170,10 @@ impl Issue for InvalidLoaderRuleError {\n                 .into(),\n             ),\n             StyledString::Text(\n-                \"Check out the documentation here for more information:\".into(),\n+                rcstr!(\"Check out the documentation here for more information:\"),\n             ),\n             StyledString::Text(\n-                \"https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#configuring-webpack-loaders\".into(),\n+                rcstr!(\"https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#configuring-webpack-loaders\"),\n             ),\n         ]).resolved_cell())))\n     }"
        },
        {
            "sha": "783bf3e79047698e0f25c899fc3a1910c470e623",
            "filename": "crates/next-core/src/next_edge/entry.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fentry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fentry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fentry.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use indoc::formatdoc;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc, fxindexmap};\n use turbo_tasks_fs::{File, FileSystemPath};\n use turbopack_core::{\n@@ -51,7 +51,7 @@ pub fn wrap_edge_entry(\n     );\n \n     let inner_assets = fxindexmap! {\n-        \"MODULE\".into() => entry\n+        rcstr!(\"MODULE\") => entry\n     };\n \n     Ok(asset_context"
        },
        {
            "sha": "39cebbd70f815760969fc20b33ea21b9fa5c67b8",
            "filename": "crates/next-core/src/next_font/google/util.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 16,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Futil.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,7 +1,7 @@\n use std::{cmp::Ordering, collections::BTreeSet};\n \n use anyhow::{Context, Result, bail};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::FxIndexSet;\n \n use super::options::{FontData, FontWeights};\n@@ -47,8 +47,8 @@ pub(super) fn get_font_axes(\n         .axes;\n \n     let ital = {\n-        let has_italic = styles.contains(&\"italic\".into());\n-        let has_normal = styles.contains(&\"normal\".into());\n+        let has_italic = styles.contains(&rcstr!(\"italic\"));\n+        let has_normal = styles.contains(&rcstr!(\"normal\"));\n         let mut set = FxIndexSet::default();\n         if has_normal {\n             set.insert(FontStyle::Normal);\n@@ -291,6 +291,7 @@ mod tests {\n     use std::collections::BTreeSet;\n \n     use anyhow::Result;\n+    use turbo_rcstr::rcstr;\n     use turbo_tasks::fxindexset;\n     use turbo_tasks_fs::json::parse_json_with_source_context;\n \n@@ -381,12 +382,12 @@ mod tests {\n                 \"Inter\",\n                 &FontWeights::Variable,\n                 &[],\n-                &Some(vec![\"slnt\".into()]),\n+                &Some(vec![rcstr!(\"slnt\")]),\n             )?,\n             FontAxes {\n-                wght: FontAxesWeights::Variable(Some(\"100..900\".into())),\n+                wght: FontAxesWeights::Variable(Some(rcstr!(\"100..900\"))),\n                 ital: fxindexset! {},\n-                variable_axes: Some(vec![(\"slnt\".into(), \"-10..0\".into())])\n+                variable_axes: Some(vec![(rcstr!(\"slnt\"), rcstr!(\"-10..0\"))])\n             }\n         );\n         Ok(())\n@@ -422,10 +423,10 @@ mod tests {\n                 \"Inter\",\n                 &FontWeights::Variable,\n                 &[],\n-                &Some(vec![\"slnt\".into()]),\n+                &Some(vec![rcstr!(\"slnt\")]),\n             )?,\n             FontAxes {\n-                variable_axes: Some(vec![(\"slnt\".into(), \"-10..0\".into())]),\n+                variable_axes: Some(vec![(rcstr!(\"slnt\"), rcstr!(\"-10..0\"))]),\n                 wght: FontAxesWeights::Variable(None),\n                 ..Default::default()\n             }\n@@ -493,9 +494,9 @@ mod tests {\n                     wght: FontAxesWeights::Fixed(BTreeSet::from([500])),\n                     ital: fxindexset! {FontStyle::Normal},\n                     variable_axes: Some(vec![\n-                        (\"GRAD\".into(), \"-50..100\".into()),\n-                        (\"opsz\".into(), \"8..144\".into()),\n-                        (\"wdth\".into(), \"50..150\".into()),\n+                        (rcstr!(\"GRAD\"), rcstr!(\"-50..100\")),\n+                        (rcstr!(\"opsz\"), rcstr!(\"8..144\")),\n+                        (rcstr!(\"wdth\"), rcstr!(\"50..150\")),\n                     ])\n                 },\n                 \"optional\"\n@@ -535,9 +536,9 @@ mod tests {\n                     wght: FontAxesWeights::Fixed(BTreeSet::from([500, 300])),\n                     ital: fxindexset! {FontStyle::Normal, FontStyle::Italic},\n                     variable_axes: Some(vec![\n-                        (\"GRAD\".into(), \"-50..100\".into()),\n-                        (\"opsz\".into(), \"8..144\".into()),\n-                        (\"wdth\".into(), \"50..150\".into()),\n+                        (rcstr!(\"GRAD\"), rcstr!(\"-50..100\")),\n+                        (rcstr!(\"opsz\"), rcstr!(\"8..144\")),\n+                        (rcstr!(\"wdth\"), rcstr!(\"50..150\")),\n                     ])\n                 },\n                 \"optional\"\n@@ -557,8 +558,8 @@ mod tests {\n                 \"Nabla\",\n                 &FontAxes {\n                     variable_axes: Some(vec![\n-                        (\"EDPT\".into(), \"0..200\".into()),\n-                        (\"EHLT\".into(), \"0..24\".into()),\n+                        (rcstr!(\"EDPT\"), rcstr!(\"0..200\")),\n+                        (rcstr!(\"EHLT\"), rcstr!(\"0..24\")),\n                     ]),\n                     ..Default::default()\n                 },"
        },
        {
            "sha": "e2bad07a8b2ab5141475591e57b22cbac2478dd2",
            "filename": "crates/next-core/src/next_font/local/request.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Frequest.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Frequest.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Frequest.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,5 +1,5 @@\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{NonLocalValue, TaskInput, trace::TraceRawVcs};\n \n /// The top-most structure encoded into the query param in requests to\n@@ -112,7 +112,7 @@ fn default_preload() -> bool {\n }\n \n fn default_display() -> RcStr {\n-    \"swap\".into()\n+    rcstr!(\"swap\")\n }\n \n #[cfg(test)]"
        },
        {
            "sha": "5cfd4afbbcc743e5ccd0b651df23f98616c25df3",
            "filename": "crates/next-core/src/next_image/source_asset.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -38,7 +38,7 @@ impl Source for StructuredImageFileSource {\n         self.image\n             .ident()\n             .with_modifier(rcstr!(\"structured image object\"))\n-            .rename_as(\"*.mjs\".into())\n+            .rename_as(rcstr!(\"*.mjs\"))\n     }\n }\n "
        },
        {
            "sha": "caddd340ffc1a8850ca0714611cf3ce52d6bf20c",
            "filename": "crates/next-core/src/next_import_map.rs",
            "status": "modified",
            "additions": 409,
            "deletions": 340,
            "changes": 749,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,4 +1,4 @@\n-use std::collections::BTreeMap;\n+use std::{collections::BTreeMap, sync::LazyLock};\n \n use anyhow::{Context, Result};\n use either::Either;\n@@ -42,52 +42,54 @@ use crate::{\n /// This is not identical to the list of entire node.js internals, refer\n /// https://vercel.com/docs/functions/runtimes/edge-runtime#compatible-node.js-modules\n /// for the allowed imports.\n-const EDGE_UNSUPPORTED_NODE_INTERNALS: [&str; 44] = [\n-    \"child_process\",\n-    \"cluster\",\n-    \"console\",\n-    \"constants\",\n-    \"crypto\",\n-    \"dgram\",\n-    \"diagnostics_channel\",\n-    \"dns\",\n-    \"dns/promises\",\n-    \"domain\",\n-    \"fs\",\n-    \"fs/promises\",\n-    \"http\",\n-    \"http2\",\n-    \"https\",\n-    \"inspector\",\n-    \"module\",\n-    \"net\",\n-    \"os\",\n-    \"path\",\n-    \"path/posix\",\n-    \"path/win32\",\n-    \"perf_hooks\",\n-    \"process\",\n-    \"punycode\",\n-    \"querystring\",\n-    \"readline\",\n-    \"repl\",\n-    \"stream\",\n-    \"stream/promises\",\n-    \"stream/web\",\n-    \"string_decoder\",\n-    \"sys\",\n-    \"timers\",\n-    \"timers/promises\",\n-    \"tls\",\n-    \"trace_events\",\n-    \"tty\",\n-    \"v8\",\n-    \"vm\",\n-    \"wasi\",\n-    \"worker_threads\",\n-    \"zlib\",\n-    \"pnpapi\",\n-];\n+static EDGE_UNSUPPORTED_NODE_INTERNALS: LazyLock<[RcStr; 44]> = LazyLock::new(|| {\n+    [\n+        rcstr!(\"child_process\"),\n+        rcstr!(\"cluster\"),\n+        rcstr!(\"console\"),\n+        rcstr!(\"constants\"),\n+        rcstr!(\"crypto\"),\n+        rcstr!(\"dgram\"),\n+        rcstr!(\"diagnostics_channel\"),\n+        rcstr!(\"dns\"),\n+        rcstr!(\"dns/promises\"),\n+        rcstr!(\"domain\"),\n+        rcstr!(\"fs\"),\n+        rcstr!(\"fs/promises\"),\n+        rcstr!(\"http\"),\n+        rcstr!(\"http2\"),\n+        rcstr!(\"https\"),\n+        rcstr!(\"inspector\"),\n+        rcstr!(\"module\"),\n+        rcstr!(\"net\"),\n+        rcstr!(\"os\"),\n+        rcstr!(\"path\"),\n+        rcstr!(\"path/posix\"),\n+        rcstr!(\"path/win32\"),\n+        rcstr!(\"perf_hooks\"),\n+        rcstr!(\"process\"),\n+        rcstr!(\"punycode\"),\n+        rcstr!(\"querystring\"),\n+        rcstr!(\"readline\"),\n+        rcstr!(\"repl\"),\n+        rcstr!(\"stream\"),\n+        rcstr!(\"stream/promises\"),\n+        rcstr!(\"stream/web\"),\n+        rcstr!(\"string_decoder\"),\n+        rcstr!(\"sys\"),\n+        rcstr!(\"timers\"),\n+        rcstr!(\"timers/promises\"),\n+        rcstr!(\"tls\"),\n+        rcstr!(\"trace_events\"),\n+        rcstr!(\"tty\"),\n+        rcstr!(\"v8\"),\n+        rcstr!(\"vm\"),\n+        rcstr!(\"wasi\"),\n+        rcstr!(\"worker_threads\"),\n+        rcstr!(\"zlib\"),\n+        rcstr!(\"pnpapi\"),\n+    ]\n+});\n \n // Make sure to not add any external requests here.\n /// Computes the Next-specific client import map.\n@@ -135,95 +137,105 @@ pub async fn get_next_client_import_map(\n             };\n \n             import_map.insert_exact_alias(\n-                \"react\",\n+                rcstr!(\"react\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    &format!(\"next/dist/compiled/react{react_flavor}\"),\n+                    format!(\"next/dist/compiled/react{react_flavor}\").into(),\n                 ),\n             );\n             import_map.insert_wildcard_alias(\n-                \"react/\",\n+                rcstr!(\"react/\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    &format!(\"next/dist/compiled/react{react_flavor}/*\"),\n+                    format!(\"next/dist/compiled/react{react_flavor}/*\").into(),\n                 ),\n             );\n             import_map.insert_exact_alias(\n-                \"react-dom\",\n+                rcstr!(\"react-dom\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    &format!(\"next/dist/compiled/react-dom{react_flavor}\"),\n+                    format!(\"next/dist/compiled/react-dom{react_flavor}\").into(),\n                 ),\n             );\n             import_map.insert_exact_alias(\n-                \"react-dom/static\",\n+                rcstr!(\"react-dom/static\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    \"next/dist/compiled/react-dom-experimental/static\",\n+                    rcstr!(\"next/dist/compiled/react-dom-experimental/static\"),\n                 ),\n             );\n             import_map.insert_exact_alias(\n-                \"react-dom/static.edge\",\n+                rcstr!(\"react-dom/static.edge\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    \"next/dist/compiled/react-dom-experimental/static.edge\",\n+                    rcstr!(\"next/dist/compiled/react-dom-experimental/static.edge\"),\n                 ),\n             );\n             import_map.insert_exact_alias(\n-                \"react-dom/static.browser\",\n+                rcstr!(\"react-dom/static.browser\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    \"next/dist/compiled/react-dom-experimental/static.browser\",\n+                    rcstr!(\"next/dist/compiled/react-dom-experimental/static.browser\"),\n                 ),\n             );\n             let react_client_package = get_react_client_package(next_config).await?;\n             import_map.insert_exact_alias(\n-                \"react-dom/client\",\n+                rcstr!(\"react-dom/client\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    &format!(\"next/dist/compiled/react-dom{react_flavor}/{react_client_package}\"),\n+                    format!(\"next/dist/compiled/react-dom{react_flavor}/{react_client_package}\")\n+                        .into(),\n                 ),\n             );\n             import_map.insert_wildcard_alias(\n-                \"react-dom/\",\n+                rcstr!(\"react-dom/\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    &format!(\"next/dist/compiled/react-dom{react_flavor}/*\"),\n+                    format!(\"next/dist/compiled/react-dom{react_flavor}/*\").into(),\n                 ),\n             );\n             import_map.insert_wildcard_alias(\n-                \"react-server-dom-webpack/\",\n-                request_to_import_mapping(app_dir.clone(), \"react-server-dom-turbopack/*\"),\n+                rcstr!(\"react-server-dom-webpack/\"),\n+                request_to_import_mapping(app_dir.clone(), rcstr!(\"react-server-dom-turbopack/*\")),\n             );\n             import_map.insert_wildcard_alias(\n-                \"react-server-dom-turbopack/\",\n+                rcstr!(\"react-server-dom-turbopack/\"),\n                 request_to_import_mapping(\n                     app_dir.clone(),\n-                    &format!(\"next/dist/compiled/react-server-dom-turbopack{react_flavor}/*\"),\n+                    format!(\"next/dist/compiled/react-server-dom-turbopack{react_flavor}/*\").into(),\n                 ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/head\",\n+                rcstr!(\"next/head\"),\n                 request_to_import_mapping(\n                     project_path.clone(),\n-                    \"next/dist/client/components/noop-head\",\n+                    rcstr!(\"next/dist/client/components/noop-head\"),\n                 ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/dynamic\",\n-                request_to_import_mapping(project_path.clone(), \"next/dist/shared/lib/app-dynamic\"),\n+                rcstr!(\"next/dynamic\"),\n+                request_to_import_mapping(\n+                    project_path.clone(),\n+                    rcstr!(\"next/dist/shared/lib/app-dynamic\"),\n+                ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/link\",\n-                request_to_import_mapping(project_path.clone(), \"next/dist/client/app-dir/link\"),\n+                rcstr!(\"next/link\"),\n+                request_to_import_mapping(\n+                    project_path.clone(),\n+                    rcstr!(\"next/dist/client/app-dir/link\"),\n+                ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/form\",\n-                request_to_import_mapping(project_path.clone(), \"next/dist/client/app-dir/form\"),\n+                rcstr!(\"next/form\"),\n+                request_to_import_mapping(\n+                    project_path.clone(),\n+                    rcstr!(\"next/dist/client/app-dir/form\"),\n+                ),\n             );\n         }\n         ClientContextType::Fallback => {}\n@@ -235,10 +247,10 @@ pub async fn get_next_client_import_map(\n         &mut import_map,\n         project_path.clone(),\n         fxindexmap! {\n-            \"server-only\" => \"next/dist/compiled/server-only/index\".to_string(),\n-            \"client-only\" => \"next/dist/compiled/client-only/index\".to_string(),\n-            \"next/dist/compiled/server-only\" => \"next/dist/compiled/server-only/index\".to_string(),\n-            \"next/dist/compiled/client-only\" => \"next/dist/compiled/client-only/index\".to_string(),\n+            rcstr!(\"server-only\") => rcstr!(\"next/dist/compiled/server-only/index\"),\n+            rcstr!(\"client-only\") => rcstr!(\"next/dist/compiled/client-only/index\"),\n+            rcstr!(\"next/dist/compiled/server-only\") => rcstr!(\"next/dist/compiled/server-only/index\"),\n+            rcstr!(\"next/dist/compiled/client-only\") => rcstr!(\"next/dist/compiled/client-only/index\"),\n         },\n     );\n     insert_next_root_params_mapping(\n@@ -253,10 +265,10 @@ pub async fn get_next_client_import_map(\n         ClientContextType::Pages { .. }\n         | ClientContextType::App { .. }\n         | ClientContextType::Fallback => {\n-            for (original, alias) in NEXT_ALIASES {\n+            for (original, alias) in NEXT_ALIASES.iter() {\n                 import_map.insert_exact_alias(\n                     format!(\"node:{original}\"),\n-                    request_to_import_mapping(project_path.clone(), alias),\n+                    request_to_import_mapping(project_path.clone(), alias.clone()),\n                 );\n             }\n         }\n@@ -282,10 +294,10 @@ pub async fn get_next_client_fallback_import_map(ty: ClientContextType) -> Resul\n         | ClientContextType::App {\n             app_dir: context_dir,\n         } => {\n-            for (original, alias) in NEXT_ALIASES {\n+            for (original, alias) in NEXT_ALIASES.iter() {\n                 import_map.insert_exact_alias(\n-                    original,\n-                    request_to_import_mapping(context_dir.clone(), alias),\n+                    original.clone(),\n+                    request_to_import_mapping(context_dir.clone(), alias.clone()),\n                 );\n             }\n         }\n@@ -331,55 +343,64 @@ pub async fn get_next_server_import_map(\n     let external = ImportMapping::External(None, ExternalType::CommonJs, ExternalTraced::Traced)\n         .resolved_cell();\n \n-    import_map.insert_exact_alias(\"next/dist/server/require-hook\", external);\n+    import_map.insert_exact_alias(rcstr!(\"next/dist/server/require-hook\"), external);\n     match ty {\n         ServerContextType::Pages { .. }\n         | ServerContextType::PagesData { .. }\n         | ServerContextType::PagesApi { .. } => {\n-            import_map.insert_exact_alias(\"react\", external);\n-            import_map.insert_wildcard_alias(\"react/\", external);\n-            import_map.insert_exact_alias(\"react-dom\", external);\n-            import_map.insert_exact_alias(\"react-dom/client\", external);\n-            import_map.insert_wildcard_alias(\"react-dom/\", external);\n-            import_map.insert_exact_alias(\"styled-jsx\", external);\n+            import_map.insert_exact_alias(rcstr!(\"react\"), external);\n+            import_map.insert_wildcard_alias(rcstr!(\"react/\"), external);\n+            import_map.insert_exact_alias(rcstr!(\"react-dom\"), external);\n+            import_map.insert_exact_alias(rcstr!(\"react-dom/client\"), external);\n+            import_map.insert_wildcard_alias(rcstr!(\"react-dom/\"), external);\n+            import_map.insert_exact_alias(rcstr!(\"styled-jsx\"), external);\n             import_map.insert_exact_alias(\n-                \"styled-jsx/style\",\n+                rcstr!(\"styled-jsx/style\"),\n                 ImportMapping::External(\n                     Some(rcstr!(\"styled-jsx/style.js\")),\n                     ExternalType::CommonJs,\n                     ExternalTraced::Traced,\n                 )\n                 .resolved_cell(),\n             );\n-            import_map.insert_wildcard_alias(\"styled-jsx/\", external);\n+            import_map.insert_wildcard_alias(rcstr!(\"styled-jsx/\"), external);\n             // TODO: we should not bundle next/dist/build/utils in the pages renderer at all\n-            import_map.insert_wildcard_alias(\"next/dist/build/utils\", external);\n+            import_map.insert_wildcard_alias(rcstr!(\"next/dist/build/utils\"), external);\n         }\n         ServerContextType::AppSSR { .. }\n         | ServerContextType::AppRSC { .. }\n         | ServerContextType::AppRoute { .. } => {\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/head\",\n+                rcstr!(\"next/head\"),\n                 request_to_import_mapping(\n                     project_path.clone(),\n-                    \"next/dist/client/components/noop-head\",\n+                    rcstr!(\"next/dist/client/components/noop-head\"),\n                 ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/dynamic\",\n-                request_to_import_mapping(project_path.clone(), \"next/dist/shared/lib/app-dynamic\"),\n+                rcstr!(\"next/dynamic\"),\n+                request_to_import_mapping(\n+                    project_path.clone(),\n+                    rcstr!(\"next/dist/shared/lib/app-dynamic\"),\n+                ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/link\",\n-                request_to_import_mapping(project_path.clone(), \"next/dist/client/app-dir/link\"),\n+                rcstr!(\"next/link\"),\n+                request_to_import_mapping(\n+                    project_path.clone(),\n+                    rcstr!(\"next/dist/client/app-dir/link\"),\n+                ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/form\",\n-                request_to_import_mapping(project_path.clone(), \"next/dist/client/app-dir/form\"),\n+                rcstr!(\"next/form\"),\n+                request_to_import_mapping(\n+                    project_path.clone(),\n+                    rcstr!(\"next/dist/client/app-dir/form\"),\n+                ),\n             );\n         }\n         ServerContextType::Middleware { .. } | ServerContextType::Instrumentation { .. } => {}\n@@ -417,13 +438,13 @@ pub async fn get_next_edge_import_map(\n         &mut import_map,\n         project_path.clone(),\n         fxindexmap! {\n-            \"next/dist/build/\" => \"next/dist/esm/build/*\".to_string(),\n-            \"next/dist/client/\" => \"next/dist/esm/client/*\".to_string(),\n-            \"next/dist/shared/\" => \"next/dist/esm/shared/*\".to_string(),\n-            \"next/dist/pages/\" => \"next/dist/esm/pages/*\".to_string(),\n-            \"next/dist/lib/\" => \"next/dist/esm/lib/*\".to_string(),\n-            \"next/dist/server/\" => \"next/dist/esm/server/*\".to_string(),\n-            \"next/dist/api/\" => \"next/dist/esm/api/*\".to_string(),\n+            rcstr!(\"next/dist/build/\") => rcstr!(\"next/dist/esm/build/*\"),\n+            rcstr!(\"next/dist/client/\") => rcstr!(\"next/dist/esm/client/*\"),\n+            rcstr!(\"next/dist/shared/\") => rcstr!(\"next/dist/esm/shared/*\"),\n+            rcstr!(\"next/dist/pages/\") => rcstr!(\"next/dist/esm/pages/*\"),\n+            rcstr!(\"next/dist/lib/\") => rcstr!(\"next/dist/esm/lib/*\"),\n+            rcstr!(\"next/dist/server/\") => rcstr!(\"next/dist/esm/server/*\"),\n+            rcstr!(\"next/dist/api/\") => rcstr!(\"next/dist/esm/api/*\"),\n         },\n     );\n \n@@ -432,23 +453,22 @@ pub async fn get_next_edge_import_map(\n         &mut import_map,\n         project_path.clone(),\n         fxindexmap! {\n-            \"next/app\" => \"next/dist/api/app\".to_string(),\n-            \"next/document\" => \"next/dist/api/document\".to_string(),\n-            \"next/dynamic\" => \"next/dist/api/dynamic\".to_string(),\n-            \"next/form\" => \"next/dist/api/form\".to_string(),\n-            \"next/head\" => \"next/dist/api/head\".to_string(),\n-            \"next/headers\" => \"next/dist/api/headers\".to_string(),\n-            \"next/image\" => \"next/dist/api/image\".to_string(),\n-            \"next/link\" => \"next/dist/api/link\".to_string(),\n-            \"next/form\" => \"next/dist/api/form\".to_string(),\n-            \"next/navigation\" => \"next/dist/api/navigation\".to_string(),\n-            \"next/router\" => \"next/dist/api/router\".to_string(),\n-            \"next/script\" => \"next/dist/api/script\".to_string(),\n-            \"next/server\" => \"next/dist/api/server\".to_string(),\n-            \"next/og\" => \"next/dist/api/og\".to_string(),\n+            rcstr!(\"next/app\") => rcstr!(\"next/dist/api/app\"),\n+            rcstr!(\"next/document\") => rcstr!(\"next/dist/api/document\"),\n+            rcstr!(\"next/dynamic\") => rcstr!(\"next/dist/api/dynamic\"),\n+            rcstr!(\"next/form\") => rcstr!(\"next/dist/api/form\"),\n+            rcstr!(\"next/head\") => rcstr!(\"next/dist/api/head\"),\n+            rcstr!(\"next/headers\") => rcstr!(\"next/dist/api/headers\"),\n+            rcstr!(\"next/image\") => rcstr!(\"next/dist/api/image\"),\n+            rcstr!(\"next/link\") => rcstr!(\"next/dist/api/link\"),\n+            rcstr!(\"next/navigation\") => rcstr!(\"next/dist/api/navigation\"),\n+            rcstr!(\"next/router\") => rcstr!(\"next/dist/api/router\"),\n+            rcstr!(\"next/script\") => rcstr!(\"next/dist/api/script\"),\n+            rcstr!(\"next/server\") => rcstr!(\"next/dist/api/server\"),\n+            rcstr!(\"next/og\") => rcstr!(\"next/dist/api/og\"),\n \n             // Alias built-in @vercel/og to edge bundle for edge runtime\n-            \"next/dist/compiled/@vercel/og/index.node.js\" => \"next/dist/compiled/@vercel/og/index.edge.js\".to_string(),\n+            rcstr!(\"next/dist/compiled/@vercel/og/index.node.js\") => rcstr!(\"next/dist/compiled/@vercel/og/index.edge.js\"),\n         },\n     );\n \n@@ -483,21 +503,27 @@ pub async fn get_next_edge_import_map(\n         | ServerContextType::AppRoute { .. } => {\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/head\",\n+                rcstr!(\"next/head\"),\n                 request_to_import_mapping(\n                     project_path.clone(),\n-                    \"next/dist/client/components/noop-head\",\n+                    rcstr!(\"next/dist/client/components/noop-head\"),\n                 ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/dynamic\",\n-                request_to_import_mapping(project_path.clone(), \"next/dist/shared/lib/app-dynamic\"),\n+                rcstr!(\"next/dynamic\"),\n+                request_to_import_mapping(\n+                    project_path.clone(),\n+                    rcstr!(\"next/dist/shared/lib/app-dynamic\"),\n+                ),\n             );\n             insert_exact_alias_or_js(\n                 &mut import_map,\n-                \"next/link\",\n-                request_to_import_mapping(project_path.clone(), \"next/dist/client/app-dir/link\"),\n+                rcstr!(\"next/link\"),\n+                request_to_import_mapping(\n+                    project_path.clone(),\n+                    rcstr!(\"next/dist/client/app-dir/link\"),\n+                ),\n             );\n         }\n     }\n@@ -538,18 +564,18 @@ pub async fn get_next_edge_and_server_fallback_import_map(\n ) -> Result<Vc<ImportMap>> {\n     let mut fallback_import_map = ImportMap::empty();\n \n-    let external_cjs_if_node = move |context_dir: FileSystemPath, request: &str| match runtime {\n+    let external_cjs_if_node = move |context_dir: FileSystemPath, request: RcStr| match runtime {\n         NextRuntime::Edge => request_to_import_mapping(context_dir, request),\n         NextRuntime::NodeJs => external_request_to_cjs_import_mapping(context_dir, request),\n     };\n \n     fallback_import_map.insert_exact_alias(\n-        \"@opentelemetry/api\",\n+        rcstr!(\"@opentelemetry/api\"),\n         // It needs to prefer the local version of @opentelemetry/api, so put this in the fallback\n         // import map\n         ImportMapping::Alternatives(vec![external_cjs_if_node(\n             project_path,\n-            \"next/dist/compiled/@opentelemetry/api\",\n+            rcstr!(\"next/dist/compiled/@opentelemetry/api\"),\n         )])\n         .resolved_cell(),\n     );\n@@ -568,7 +594,7 @@ async fn insert_unsupported_node_internal_aliases(import_map: &mut ImportMap) ->\n     .resolved_cell();\n \n     EDGE_UNSUPPORTED_NODE_INTERNALS.iter().for_each(|module| {\n-        import_map.insert_alias(AliasPattern::exact(*module), unsupported_replacer);\n+        import_map.insert_alias(AliasPattern::exact(module.clone()), unsupported_replacer);\n     });\n     Ok(())\n }\n@@ -585,31 +611,63 @@ pub fn get_next_client_resolved_map(\n     .cell()\n }\n \n-static NEXT_ALIASES: [(&str, &str); 23] = [\n-    (\"assert\", \"next/dist/compiled/assert\"),\n-    (\"buffer\", \"next/dist/compiled/buffer\"),\n-    (\"constants\", \"next/dist/compiled/constants-browserify\"),\n-    (\"crypto\", \"next/dist/compiled/crypto-browserify\"),\n-    (\"domain\", \"next/dist/compiled/domain-browser\"),\n-    (\"http\", \"next/dist/compiled/stream-http\"),\n-    (\"https\", \"next/dist/compiled/https-browserify\"),\n-    (\"os\", \"next/dist/compiled/os-browserify\"),\n-    (\"path\", \"next/dist/compiled/path-browserify\"),\n-    (\"punycode\", \"next/dist/compiled/punycode\"),\n-    (\"process\", \"next/dist/build/polyfills/process\"),\n-    (\"querystring\", \"next/dist/compiled/querystring-es3\"),\n-    (\"stream\", \"next/dist/compiled/stream-browserify\"),\n-    (\"string_decoder\", \"next/dist/compiled/string_decoder\"),\n-    (\"sys\", \"next/dist/compiled/util\"),\n-    (\"timers\", \"next/dist/compiled/timers-browserify\"),\n-    (\"tty\", \"next/dist/compiled/tty-browserify\"),\n-    (\"url\", \"next/dist/compiled/native-url\"),\n-    (\"util\", \"next/dist/compiled/util\"),\n-    (\"vm\", \"next/dist/compiled/vm-browserify\"),\n-    (\"zlib\", \"next/dist/compiled/browserify-zlib\"),\n-    (\"events\", \"next/dist/compiled/events\"),\n-    (\"setImmediate\", \"next/dist/compiled/setimmediate\"),\n-];\n+static NEXT_ALIASES: LazyLock<[(RcStr, RcStr); 23]> = LazyLock::new(|| {\n+    [\n+        (rcstr!(\"assert\"), rcstr!(\"next/dist/compiled/assert\")),\n+        (rcstr!(\"buffer\"), rcstr!(\"next/dist/compiled/buffer\")),\n+        (\n+            rcstr!(\"constants\"),\n+            rcstr!(\"next/dist/compiled/constants-browserify\"),\n+        ),\n+        (\n+            rcstr!(\"crypto\"),\n+            rcstr!(\"next/dist/compiled/crypto-browserify\"),\n+        ),\n+        (\n+            rcstr!(\"domain\"),\n+            rcstr!(\"next/dist/compiled/domain-browser\"),\n+        ),\n+        (rcstr!(\"http\"), rcstr!(\"next/dist/compiled/stream-http\")),\n+        (\n+            rcstr!(\"https\"),\n+            rcstr!(\"next/dist/compiled/https-browserify\"),\n+        ),\n+        (rcstr!(\"os\"), rcstr!(\"next/dist/compiled/os-browserify\")),\n+        (rcstr!(\"path\"), rcstr!(\"next/dist/compiled/path-browserify\")),\n+        (rcstr!(\"punycode\"), rcstr!(\"next/dist/compiled/punycode\")),\n+        (\n+            rcstr!(\"process\"),\n+            rcstr!(\"next/dist/build/polyfills/process\"),\n+        ),\n+        (\n+            rcstr!(\"querystring\"),\n+            rcstr!(\"next/dist/compiled/querystring-es3\"),\n+        ),\n+        (\n+            rcstr!(\"stream\"),\n+            rcstr!(\"next/dist/compiled/stream-browserify\"),\n+        ),\n+        (\n+            rcstr!(\"string_decoder\"),\n+            rcstr!(\"next/dist/compiled/string_decoder\"),\n+        ),\n+        (rcstr!(\"sys\"), rcstr!(\"next/dist/compiled/util\")),\n+        (\n+            rcstr!(\"timers\"),\n+            rcstr!(\"next/dist/compiled/timers-browserify\"),\n+        ),\n+        (rcstr!(\"tty\"), rcstr!(\"next/dist/compiled/tty-browserify\")),\n+        (rcstr!(\"url\"), rcstr!(\"next/dist/compiled/native-url\")),\n+        (rcstr!(\"util\"), rcstr!(\"next/dist/compiled/util\")),\n+        (rcstr!(\"vm\"), rcstr!(\"next/dist/compiled/vm-browserify\")),\n+        (rcstr!(\"zlib\"), rcstr!(\"next/dist/compiled/browserify-zlib\")),\n+        (rcstr!(\"events\"), rcstr!(\"next/dist/compiled/events\")),\n+        (\n+            rcstr!(\"setImmediate\"),\n+            rcstr!(\"next/dist/compiled/setimmediate\"),\n+        ),\n+    ]\n+});\n \n async fn insert_next_server_special_aliases(\n     import_map: &mut ImportMap,\n@@ -619,28 +677,28 @@ async fn insert_next_server_special_aliases(\n     next_config: Vc<NextConfig>,\n     collected_root_params: Option<Vc<CollectedRootParams>>,\n ) -> Result<()> {\n-    let external_cjs_if_node = move |context_dir: FileSystemPath, request: &str| match runtime {\n+    let external_cjs_if_node = move |context_dir: FileSystemPath, request: RcStr| match runtime {\n         NextRuntime::Edge => request_to_import_mapping(context_dir, request),\n         NextRuntime::NodeJs => external_request_to_cjs_import_mapping(context_dir, request),\n     };\n-    let external_esm_if_node = move |context_dir: FileSystemPath, request: &str| match runtime {\n+    let external_esm_if_node = move |context_dir: FileSystemPath, request: RcStr| match runtime {\n         NextRuntime::Edge => request_to_import_mapping(context_dir, request),\n         NextRuntime::NodeJs => external_request_to_esm_import_mapping(context_dir, request),\n     };\n \n     import_map.insert_exact_alias(\n-        \"next/dist/compiled/@vercel/og/index.node.js\",\n+        rcstr!(\"next/dist/compiled/@vercel/og/index.node.js\"),\n         external_esm_if_node(\n             project_path.clone(),\n-            \"next/dist/compiled/@vercel/og/index.node.js\",\n+            rcstr!(\"next/dist/compiled/@vercel/og/index.node.js\"),\n         ),\n     );\n \n     import_map.insert_exact_alias(\n-        \"next/dist/server/ReactDOMServerPages\",\n+        rcstr!(\"next/dist/server/ReactDOMServerPages\"),\n         ImportMapping::Alternatives(vec![\n-            request_to_import_mapping(project_path.clone(), \"react-dom/server.edge\"),\n-            request_to_import_mapping(project_path.clone(), \"react-dom/server.browser\"),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"react-dom/server.edge\")),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"react-dom/server.browser\")),\n         ])\n         .resolved_cell(),\n     );\n@@ -654,12 +712,12 @@ async fn insert_next_server_special_aliases(\n         | ServerContextType::AppRoute { app_dir, .. } => {\n             let next_package = get_next_package(app_dir.clone()).owned().await?;\n             import_map.insert_exact_alias(\n-                \"styled-jsx\",\n-                request_to_import_mapping(next_package.clone(), \"styled-jsx\"),\n+                rcstr!(\"styled-jsx\"),\n+                request_to_import_mapping(next_package.clone(), rcstr!(\"styled-jsx\")),\n             );\n             import_map.insert_wildcard_alias(\n-                \"styled-jsx/\",\n-                request_to_import_mapping(next_package.clone(), \"styled-jsx/*\"),\n+                rcstr!(\"styled-jsx/\"),\n+                request_to_import_mapping(next_package.clone(), rcstr!(\"styled-jsx/*\")),\n             );\n \n             rsc_aliases(\n@@ -694,10 +752,10 @@ async fn insert_next_server_special_aliases(\n                 import_map,\n                 project_path.clone(),\n                 fxindexmap! {\n-                    \"server-only\" => \"next/dist/compiled/server-only/empty\".to_string(),\n-                    \"client-only\" => \"next/dist/compiled/client-only/index\".to_string(),\n-                    \"next/dist/compiled/server-only\" => \"next/dist/compiled/server-only/empty\".to_string(),\n-                    \"next/dist/compiled/client-only\" => \"next/dist/compiled/client-only/index\".to_string(),\n+                    rcstr!(\"server-only\") => rcstr!(\"next/dist/compiled/server-only/empty\"),\n+                    rcstr!(\"client-only\") => rcstr!(\"next/dist/compiled/client-only/index\"),\n+                    rcstr!(\"next/dist/compiled/server-only\") => rcstr!(\"next/dist/compiled/server-only/empty\"),\n+                    rcstr!(\"next/dist/compiled/client-only\") => rcstr!(\"next/dist/compiled/client-only/index\"),\n                 },\n             );\n         }\n@@ -711,10 +769,10 @@ async fn insert_next_server_special_aliases(\n                 import_map,\n                 project_path.clone(),\n                 fxindexmap! {\n-                    \"server-only\" => \"next/dist/compiled/server-only/empty\".to_string(),\n-                    \"client-only\" => \"next/dist/compiled/client-only/error\".to_string(),\n-                    \"next/dist/compiled/server-only\" => \"next/dist/compiled/server-only/empty\".to_string(),\n-                    \"next/dist/compiled/client-only\" => \"next/dist/compiled/client-only/error\".to_string(),\n+                    rcstr!(\"server-only\") => rcstr!(\"next/dist/compiled/server-only/empty\"),\n+                    rcstr!(\"client-only\") => rcstr!(\"next/dist/compiled/client-only/error\"),\n+                    rcstr!(\"next/dist/compiled/server-only\") => rcstr!(\"next/dist/compiled/server-only/empty\"),\n+                    rcstr!(\"next/dist/compiled/client-only\") => rcstr!(\"next/dist/compiled/client-only/error\"),\n                 },\n             );\n         }\n@@ -723,10 +781,10 @@ async fn insert_next_server_special_aliases(\n                 import_map,\n                 project_path.clone(),\n                 fxindexmap! {\n-                    \"server-only\" => \"next/dist/compiled/server-only/index\".to_string(),\n-                    \"client-only\" => \"next/dist/compiled/client-only/index\".to_string(),\n-                    \"next/dist/compiled/server-only\" => \"next/dist/compiled/server-only/index\".to_string(),\n-                    \"next/dist/compiled/client-only\" => \"next/dist/compiled/client-only/index\".to_string(),\n+                    rcstr!(\"server-only\") => rcstr!(\"next/dist/compiled/server-only/index\"),\n+                    rcstr!(\"client-only\") => rcstr!(\"next/dist/compiled/client-only/index\"),\n+                    rcstr!(\"next/dist/compiled/server-only\") => rcstr!(\"next/dist/compiled/server-only/index\"),\n+                    rcstr!(\"next/dist/compiled/client-only\") => rcstr!(\"next/dist/compiled/client-only/index\"),\n                 },\n             );\n         }\n@@ -741,8 +799,11 @@ async fn insert_next_server_special_aliases(\n     .await?;\n \n     import_map.insert_exact_alias(\n-        \"@vercel/og\",\n-        external_cjs_if_node(project_path.clone(), \"next/dist/server/og/image-response\"),\n+        rcstr!(\"@vercel/og\"),\n+        external_cjs_if_node(\n+            project_path.clone(),\n+            rcstr!(\"next/dist/server/og/image-response\"),\n+        ),\n     );\n \n     Ok(())\n@@ -792,141 +853,141 @@ async fn apply_vendored_react_aliases_server(\n     if runtime == NextRuntime::NodeJs && react_condition == \"client\" {\n         react_alias.extend(fxindexmap! {\n             // file:///./../../../packages/next/src/compiled/react/package.json\n-            \"react\" =>                                  /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/ssr/react\"),\n-            \"react/compiler-runtime\" =>                 /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-compiler-runtime\"),\n-            \"react/jsx-dev-runtime\" =>                  /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime\"),\n-            \"react/jsx-runtime\" =>                      /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime\"),\n+            rcstr!(\"react\") =>                                  /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/ssr/react\"),\n+            rcstr!(\"react/compiler-runtime\") =>                 /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-compiler-runtime\"),\n+            rcstr!(\"react/jsx-dev-runtime\") =>                  /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime\"),\n+            rcstr!(\"react/jsx-runtime\") =>                      /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime\"),\n             // file:///./../../../packages/next/src/compiled/react-dom/package.json\n-            \"react-dom\" =>                              /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-dom\"),\n-            \"react-dom/client\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/client\"),\n-            \"react-dom/server\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.node\"),\n-            \"react-dom/server.browser\" =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.browser\"),\n+            rcstr!(\"react-dom\") =>                              /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-dom\"),\n+            rcstr!(\"react-dom/client\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/client\").into(),\n+            rcstr!(\"react-dom/server\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.node\").into(),\n+            rcstr!(\"react-dom/server.browser\") =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.browser\").into(),\n             // TODO: Use build without legacy APIs\n-            \"react-dom/server.edge\" =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\"),\n-            \"react-dom/static\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.node\"),\n-            \"react-dom/static.browser\" =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.browser\"),\n-            \"react-dom/static.edge\" =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\"),\n+            rcstr!(\"react-dom/server.edge\") =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-dom/static\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.node\").into(),\n+            rcstr!(\"react-dom/static.browser\") =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.browser\").into(),\n+            rcstr!(\"react-dom/static.edge\") =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\").into(),\n             // file:///./../../../packages/next/src/compiled/react-server-dom-webpack/package.json\n-            \"react-server-dom-webpack/client\" =>        /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client\"),\n-            \"react-server-dom-webpack/server\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\"),\n-            \"react-server-dom-webpack/server.node\" =>   /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\"),\n-            \"react-server-dom-webpack/static\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.node\"),\n-            \"react-server-dom-turbopack/client\" =>      /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client\"),\n-            \"react-server-dom-turbopack/server\" =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\"),\n-            \"react-server-dom-turbopack/server.node\" => /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\"),\n-            \"react-server-dom-turbopack/static.edge\" => /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\"),\n+            rcstr!(\"react-server-dom-webpack/client\") =>        /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client\"),\n+            rcstr!(\"react-server-dom-webpack/server\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\").into(),\n+            rcstr!(\"react-server-dom-webpack/server.node\") =>   /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\").into(),\n+            rcstr!(\"react-server-dom-webpack/static\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.node\").into(),\n+            rcstr!(\"react-server-dom-turbopack/client\") =>      /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client\"),\n+            rcstr!(\"react-server-dom-turbopack/server\") =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\").into(),\n+            rcstr!(\"react-server-dom-turbopack/server.node\") => /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\").into(),\n+            rcstr!(\"react-server-dom-turbopack/static.edge\") => /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\").into(),\n         })\n     } else if runtime == NextRuntime::NodeJs && react_condition == \"server\" {\n         react_alias.extend(fxindexmap! {\n             // file:///./../../../packages/next/src/compiled/react/package.json\n-            \"react\" =>                                  /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react\"),\n-            \"react/compiler-runtime\" =>                 /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-compiler-runtime\"),\n-            \"react/jsx-dev-runtime\" =>                  /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime\"),\n-            \"react/jsx-runtime\" =>                      /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-runtime\"),\n+            rcstr!(\"react\") =>                                  /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react\"),\n+            rcstr!(\"react/compiler-runtime\") =>                 /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-compiler-runtime\"),\n+            rcstr!(\"react/jsx-dev-runtime\") =>                  /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime\"),\n+            rcstr!(\"react/jsx-runtime\") =>                      /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-runtime\"),\n             // file:///./../../../packages/next/src/compiled/react-dom/package.json\n-            \"react-dom\" =>                              /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-dom\"),\n-            \"react-dom/client\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/client\"),\n-            \"react-dom/server\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.node\"),\n-            \"react-dom/server.browser\" =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.browser\"),\n+            rcstr!(\"react-dom\") =>                              /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-dom\"),\n+            rcstr!(\"react-dom/client\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/client\").into(),\n+            rcstr!(\"react-dom/server\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.node\").into(),\n+            rcstr!(\"react-dom/server.browser\") =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.browser\").into(),\n             // TODO: Use build without legacy APIs\n-            \"react-dom/server.edge\" =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\"),\n-            \"react-dom/static\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.node\"),\n-            \"react-dom/static.browser\" =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.browser\"),\n-            \"react-dom/static.edge\" =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\"),\n+            rcstr!(\"react-dom/server.edge\") =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-dom/static\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.node\").into(),\n+            rcstr!(\"react-dom/static.browser\") =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.browser\").into(),\n+            rcstr!(\"react-dom/static.edge\") =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\").into(),\n             // file:///./../../../packages/next/src/compiled/react-server-dom-webpack/package.json\n-            \"react-server-dom-webpack/client\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.node\"),\n-            \"react-server-dom-webpack/server\" =>        /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server\"),\n-            \"react-server-dom-webpack/server.node\" =>   /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server\"),\n-            \"react-server-dom-webpack/static\" =>        /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-static\"),\n-            \"react-server-dom-turbopack/client\" =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.node\"),\n-            \"react-server-dom-turbopack/server\" =>      /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server\"),\n-            \"react-server-dom-turbopack/server.node\" => /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server\"),\n-            \"react-server-dom-turbopack/static\" =>      /*  */ format!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-static\"),\n+            rcstr!(\"react-server-dom-webpack/client\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.node\").into(),\n+            rcstr!(\"react-server-dom-webpack/server\") =>        /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server\"),\n+            rcstr!(\"react-server-dom-webpack/server.node\") =>   /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server\"),\n+            rcstr!(\"react-server-dom-webpack/static\") =>        /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-static\"),\n+            rcstr!(\"react-server-dom-turbopack/client\") =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.node\").into(),\n+            rcstr!(\"react-server-dom-turbopack/server\") =>      /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server\"),\n+            rcstr!(\"react-server-dom-turbopack/server.node\") => /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server\"),\n+            rcstr!(\"react-server-dom-turbopack/static\") =>      /*  */ rcstr!(\"next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-static\"),\n \n             // Needed to make `react-dom/server` work.\n             // TODO: really?\n-                \"next/dist/compiled/react\" => format!(\"next/dist/compiled/react/index.js\"),\n+                rcstr!(\"next/dist/compiled/react\") => rcstr!(\"next/dist/compiled/react/index.js\"),\n         })\n     } else if runtime == NextRuntime::Edge && react_condition == \"client\" {\n         react_alias.extend(fxindexmap! {\n             // file:///./../../../packages/next/src/compiled/react/package.json\n-            \"react\" =>                                  /*  */ format!(\"next/dist/compiled/react{react_channel}\"),\n-            \"react/compiler-runtime\" =>                 /*  */ format!(\"next/dist/compiled/react{react_channel}/compiler-runtime\"),\n-            \"react/jsx-dev-runtime\" =>                  /*  */ format!(\"next/dist/compiled/react{react_channel}/jsx-dev-runtime\"),\n-            \"react/jsx-runtime\" =>                      /*  */ format!(\"next/dist/compiled/react{react_channel}/jsx-runtime\"),\n+            rcstr!(\"react\") =>                                  /*  */ format!(\"next/dist/compiled/react{react_channel}\").into(),\n+            rcstr!(\"react/compiler-runtime\") =>                 /*  */ format!(\"next/dist/compiled/react{react_channel}/compiler-runtime\").into(),\n+            rcstr!(\"react/jsx-dev-runtime\") =>                  /*  */ format!(\"next/dist/compiled/react{react_channel}/jsx-dev-runtime\").into(),\n+            rcstr!(\"react/jsx-runtime\") =>                      /*  */ format!(\"next/dist/compiled/react{react_channel}/jsx-runtime\").into(),\n             // file:///./../../../packages/next/src/compiled/react-dom/package.json\n-            \"react-dom\" =>                              /*  */ format!(\"next/dist/compiled/react-dom{react_channel}\"),\n-            \"react-dom/client\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/client\"),\n-            \"react-dom/server\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\"),\n-            \"react-dom/server.browser\" =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.browser\"),\n+            rcstr!(\"react-dom\") =>                              /*  */ format!(\"next/dist/compiled/react-dom{react_channel}\").into(),\n+            rcstr!(\"react-dom/client\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/client\").into(),\n+            rcstr!(\"react-dom/server\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-dom/server.browser\") =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.browser\").into(),\n             // TODO: Use build without legacy APIs\n-            \"react-dom/server.edge\" =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\"),\n-            \"react-dom/static\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\"),\n-            \"react-dom/static.browser\" =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.browser\"),\n-            \"react-dom/static.edge\" =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\"),\n+            rcstr!(\"react-dom/server.edge\") =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-dom/static\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\").into(),\n+            rcstr!(\"react-dom/static.browser\") =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.browser\").into(),\n+            rcstr!(\"react-dom/static.edge\") =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\").into(),\n             // file:///./../../../packages/next/src/compiled/react-server-dom-webpack/package.json\n-            \"react-server-dom-webpack/client\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.edge\"),\n-            \"react-server-dom-webpack/server\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.edge\"),\n-            \"react-server-dom-webpack/server.node\" =>   /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\"),\n-            \"react-server-dom-webpack/static\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\"),\n-            \"react-server-dom-turbopack/client\" =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.edge\"),\n-            \"react-server-dom-turbopack/server\" =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.edge\"),\n-            \"react-server-dom-turbopack/server.node\" => /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\"),\n-            \"react-server-dom-turbopack/static\" =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\"),\n+            rcstr!(\"react-server-dom-webpack/client\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.edge\").into(),\n+            rcstr!(\"react-server-dom-webpack/server\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-server-dom-webpack/server.node\") =>   /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\").into(),\n+            rcstr!(\"react-server-dom-webpack/static\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\").into(),\n+            rcstr!(\"react-server-dom-turbopack/client\") =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.edge\").into(),\n+            rcstr!(\"react-server-dom-turbopack/server\") =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-server-dom-turbopack/server.node\") => /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\").into(),\n+            rcstr!(\"react-server-dom-turbopack/static\") =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\").into(),\n         })\n     } else if runtime == NextRuntime::Edge && react_condition == \"server\" {\n         react_alias.extend(fxindexmap! {\n             // file:///./../../../packages/next/src/compiled/react/package.json\n-            \"react\" =>                                  /*  */ format!(\"next/dist/compiled/react{react_channel}/react.react-server\"),\n-            \"react/compiler-runtime\" =>                 /*  */ format!(\"next/dist/compiled/react{react_channel}/compiler-runtime\"),\n-            \"react/jsx-dev-runtime\" =>                  /*  */ format!(\"next/dist/compiled/react{react_channel}/jsx-dev-runtime.react-server\"),\n-            \"react/jsx-runtime\" =>                      /*  */ format!(\"next/dist/compiled/react{react_channel}/jsx-runtime.react-server\"),\n+            rcstr!(\"react\") =>                                  /*  */ format!(\"next/dist/compiled/react{react_channel}/react.react-server\").into(),\n+            rcstr!(\"react/compiler-runtime\") =>                 /*  */ format!(\"next/dist/compiled/react{react_channel}/compiler-runtime\").into(),\n+            rcstr!(\"react/jsx-dev-runtime\") =>                  /*  */ format!(\"next/dist/compiled/react{react_channel}/jsx-dev-runtime.react-server\").into(),\n+            rcstr!(\"react/jsx-runtime\") =>                      /*  */ format!(\"next/dist/compiled/react{react_channel}/jsx-runtime.react-server\").into(),\n             // file:///./../../../packages/next/src/compiled/react-dom/package.json\n-            \"react-dom\" =>                              /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/react-dom.react-server\"),\n-            \"react-dom/client\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/client\"),\n-            \"react-dom/server\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\"),\n-            \"react-dom/server.browser\" =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.browser\"),\n+            rcstr!(\"react-dom\") =>                              /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/react-dom.react-server\").into(),\n+            rcstr!(\"react-dom/client\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/client\").into(),\n+            rcstr!(\"react-dom/server\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-dom/server.browser\") =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.browser\").into(),\n             // TODO: Use build without legacy APIs\n-            \"react-dom/server.edge\" =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\"),\n-            \"react-dom/static\" =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\"),\n-            \"react-dom/static.browser\" =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.browser\"),\n-            \"react-dom/static.edge\" =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\"),\n+            rcstr!(\"react-dom/server.edge\") =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-dom/static\") =>                       /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\").into(),\n+            rcstr!(\"react-dom/static.browser\") =>               /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.browser\").into(),\n+            rcstr!(\"react-dom/static.edge\") =>                  /*  */ format!(\"next/dist/compiled/react-dom{react_channel}/static.edge\").into(),\n             // file:///./../../../packages/next/src/compiled/react-server-dom-webpack/package.json\n-            \"react-server-dom-webpack/client\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.edge\"),\n-            \"react-server-dom-webpack/server\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.edge\"),\n-            \"react-server-dom-webpack/server.node\" =>   /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\"),\n-            \"react-server-dom-webpack/static\" =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\"),\n-            \"react-server-dom-turbopack/client\" =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.edge\"),\n-            \"react-server-dom-turbopack/server\" =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.edge\"),\n-            \"react-server-dom-turbopack/server.node\" => /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\"),\n-            \"react-server-dom-turbopack/static\" =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\"),\n+            rcstr!(\"react-server-dom-webpack/client\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.edge\").into(),\n+            rcstr!(\"react-server-dom-webpack/server\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-server-dom-webpack/server.node\") =>   /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\").into(),\n+            rcstr!(\"react-server-dom-webpack/static\") =>        /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\").into(),\n+            rcstr!(\"react-server-dom-turbopack/client\") =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/client.edge\").into(),\n+            rcstr!(\"react-server-dom-turbopack/server\") =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.edge\").into(),\n+            rcstr!(\"react-server-dom-turbopack/server.node\") => /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/server.node\").into(),\n+            rcstr!(\"react-server-dom-turbopack/static\") =>      /*  */ format!(\"next/dist/compiled/react-server-dom-turbopack{react_channel}/static.edge\").into(),\n         });\n \n         react_alias.extend(fxindexmap! {\n             // This should just be `next/dist/compiled/react${react_channel}` but how to Rust.\n-            \"next/dist/compiled/react\"                               => react_alias[\"react\"].clone(),\n-            \"next/dist/compiled/react-experimental\"                  => react_alias[\"react\"].clone(),\n-            \"next/dist/compiled/react/compiler-runtime\"              => react_alias[\"react/compiler-runtime\"].clone(),\n-            \"next/dist/compiled/react-experimental/compiler-runtime\" => react_alias[\"react/compiler-runtime\"].clone(),\n-            \"next/dist/compiled/react/jsx-dev-runtime\"               => react_alias[\"react/jsx-dev-runtime\"].clone(),\n-            \"next/dist/compiled/react-experimental/jsx-dev-runtime\"  => react_alias[\"react/jsx-dev-runtime\"].clone(),\n-            \"next/dist/compiled/react/jsx-runtime\"                   => react_alias[\"react/jsx-runtime\"].clone(),\n-            \"next/dist/compiled/react-experimental/jsx-runtime\"      => react_alias[\"react/jsx-runtime\"].clone(),\n-            \"next/dist/compiled/react-dom\"                           => react_alias[\"react-dom\"].clone(),\n-            \"next/dist/compiled/react-dom-experimental\"              => react_alias[\"react-dom\"].clone(),\n+            rcstr!(\"next/dist/compiled/react\")                               => react_alias[\"react\"].clone(),\n+            rcstr!(\"next/dist/compiled/react-experimental\")                  => react_alias[\"react\"].clone(),\n+            rcstr!(\"next/dist/compiled/react/compiler-runtime\")              => react_alias[\"react/compiler-runtime\"].clone(),\n+            rcstr!(\"next/dist/compiled/react-experimental/compiler-runtime\") => react_alias[\"react/compiler-runtime\"].clone(),\n+            rcstr!(\"next/dist/compiled/react/jsx-dev-runtime\")               => react_alias[\"react/jsx-dev-runtime\"].clone(),\n+            rcstr!(\"next/dist/compiled/react-experimental/jsx-dev-runtime\")  => react_alias[\"react/jsx-dev-runtime\"].clone(),\n+            rcstr!(\"next/dist/compiled/react/jsx-runtime\")                   => react_alias[\"react/jsx-runtime\"].clone(),\n+            rcstr!(\"next/dist/compiled/react-experimental/jsx-runtime\")      => react_alias[\"react/jsx-runtime\"].clone(),\n+            rcstr!(\"next/dist/compiled/react-dom\")                           => react_alias[\"react-dom\"].clone(),\n+            rcstr!(\"next/dist/compiled/react-dom-experimental\")              => react_alias[\"react-dom\"].clone(),\n         });\n     }\n \n     let react_client_package = get_react_client_package(next_config).await?;\n     react_alias.extend(fxindexmap! {\n-        \"react-dom/client\" => format!(\"next/dist/compiled/react-dom{react_channel}/{react_client_package}\"),\n+        rcstr!(\"react-dom/client\") => RcStr::from(format!(\"next/dist/compiled/react-dom{react_channel}/{react_client_package}\")),\n     });\n \n     let mut alias = react_alias;\n     if react_condition == \"server\" {\n         // This is used in the server runtime to import React Server Components.\n         alias.extend(fxindexmap! {\n-            \"next/navigation\" => format!(\"next/dist/api/navigation.react-server\"),\n+            rcstr!(\"next/navigation\") => rcstr!(\"next/dist/api/navigation.react-server\"),\n         });\n     }\n \n@@ -955,7 +1016,7 @@ async fn rsc_aliases(\n     if ty.should_use_react_server_condition() {\n         // This is used in the server runtime to import React Server Components.\n         alias.extend(fxindexmap! {\n-            \"next/navigation\" => format!(\"next/dist/api/navigation.react-server\"),\n+            rcstr!(\"next/navigation\") => rcstr!(\"next/dist/api/navigation.react-server\"),\n         });\n     }\n \n@@ -978,16 +1039,16 @@ async fn insert_optimized_module_aliases(\n         import_map,\n         project_path,\n         fxindexmap! {\n-            \"unfetch\" => \"next/dist/build/polyfills/fetch/index.js\".to_string(),\n-            \"isomorphic-unfetch\" => \"next/dist/build/polyfills/fetch/index.js\".to_string(),\n-            \"whatwg-fetch\" => \"next/dist/build/polyfills/fetch/whatwg-fetch.js\".to_string(),\n-            \"object-assign\" => \"next/dist/build/polyfills/object-assign.js\".to_string(),\n-            \"object.assign/auto\" => \"next/dist/build/polyfills/object.assign/auto.js\".to_string(),\n-            \"object.assign/implementation\" => \"next/dist/build/polyfills/object.assign/implementation.js\".to_string(),\n-            \"object.assign/polyfill\" => \"next/dist/build/polyfills/object.assign/polyfill.js\".to_string(),\n-            \"object.assign/shim\" => \"next/dist/build/polyfills/object.assign/shim.js\".to_string(),\n-            \"url\" => \"next/dist/compiled/native-url\".to_string(),\n-            \"node:url\" => \"next/dist/compiled/native-url\".to_string(),\n+            rcstr!(\"unfetch\") => rcstr!(\"next/dist/build/polyfills/fetch/index.js\"),\n+            rcstr!(\"isomorphic-unfetch\") => rcstr!(\"next/dist/build/polyfills/fetch/index.js\"),\n+            rcstr!(\"whatwg-fetch\") => rcstr!(\"next/dist/build/polyfills/fetch/whatwg-fetch.js\"),\n+            rcstr!(\"object-assign\") => rcstr!(\"next/dist/build/polyfills/object-assign.js\"),\n+            rcstr!(\"object.assign/auto\") => rcstr!(\"next/dist/build/polyfills/object.assign/auto.js\"),\n+            rcstr!(\"object.assign/implementation\") => rcstr!(\"next/dist/build/polyfills/object.assign/implementation.js\"),\n+            rcstr!(\"object.assign/polyfill\") => rcstr!(\"next/dist/build/polyfills/object.assign/polyfill.js\"),\n+            rcstr!(\"object.assign/shim\") => rcstr!(\"next/dist/build/polyfills/object.assign/shim.js\"),\n+            rcstr!(\"url\") => rcstr!(\"next/dist/compiled/native-url\"),\n+            rcstr!(\"node:url\") => rcstr!(\"next/dist/compiled/native-url\"),\n         },\n     );\n     Ok(())\n@@ -1008,10 +1069,10 @@ async fn insert_next_shared_aliases(\n         import_map,\n         mdx_import_source_file(),\n         vec![\n-            request_to_import_mapping(project_path.clone(), \"./mdx-components\"),\n-            request_to_import_mapping(project_path.clone(), \"./src/mdx-components\"),\n-            request_to_import_mapping(project_path.clone(), \"@mdx-js/react\"),\n-            request_to_import_mapping(project_path.clone(), \"@next/mdx/mdx-components.js\"),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"./mdx-components\")),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"./src/mdx-components\")),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"@mdx-js/react\")),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"@next/mdx/mdx-components.js\")),\n         ],\n     );\n \n@@ -1035,19 +1096,21 @@ async fn insert_next_shared_aliases(\n \n     import_map.insert_alias(\n         // Request path from js via next-font swc transform\n-        AliasPattern::exact(\"next/font/google/target.css\"),\n+        AliasPattern::exact(rcstr!(\"next/font/google/target.css\")),\n         next_font_google_replacer_mapping,\n     );\n \n     import_map.insert_alias(\n         // Request path from js via next-font swc transform\n-        AliasPattern::exact(\"@next/font/google/target.css\"),\n+        AliasPattern::exact(rcstr!(\"@next/font/google/target.css\")),\n         next_font_google_replacer_mapping,\n     );\n \n     let fetch_client = next_config.fetch_client(execution_context.env());\n     import_map.insert_alias(\n-        AliasPattern::exact(\"@vercel/turbopack-next/internal/font/google/cssmodule.module.css\"),\n+        AliasPattern::exact(rcstr!(\n+            \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css\"\n+        )),\n         ImportMapping::Dynamic(ResolvedVc::upcast(\n             NextFontGoogleCssModuleReplacer::new(\n                 project_path.clone(),\n@@ -1062,7 +1125,7 @@ async fn insert_next_shared_aliases(\n     );\n \n     import_map.insert_alias(\n-        AliasPattern::exact(GOOGLE_FONTS_INTERNAL_PREFIX),\n+        AliasPattern::exact(rcstr!(GOOGLE_FONTS_INTERNAL_PREFIX)),\n         ImportMapping::Dynamic(ResolvedVc::upcast(\n             NextFontGoogleFontFileReplacer::new(project_path.clone(), fetch_client)\n                 .to_resolved()\n@@ -1072,73 +1135,76 @@ async fn insert_next_shared_aliases(\n     );\n \n     let next_package = get_next_package(project_path.clone()).owned().await?;\n-    import_map.insert_singleton_alias(\"@swc/helpers\", next_package.clone());\n-    import_map.insert_singleton_alias(\"styled-jsx\", next_package.clone());\n-    import_map.insert_singleton_alias(\"next\", project_path.clone());\n-    import_map.insert_singleton_alias(\"react\", project_path.clone());\n-    import_map.insert_singleton_alias(\"react-dom\", project_path.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"@swc/helpers\"), next_package.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"styled-jsx\"), next_package.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"next\"), project_path.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"react\"), project_path.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"react-dom\"), project_path.clone());\n     let react_client_package = get_react_client_package(next_config).await?;\n     import_map.insert_exact_alias(\n-        \"react-dom/client\",\n+        rcstr!(\"react-dom/client\"),\n         request_to_import_mapping(\n             project_path.clone(),\n-            &format!(\"react-dom/{react_client_package}\"),\n+            format!(\"react-dom/{react_client_package}\").into(),\n         ),\n     );\n \n     import_map.insert_alias(\n         // Make sure you can't import custom server as it'll cause all Next.js internals to be\n         // bundled which doesn't work.\n-        AliasPattern::exact(\"next\"),\n+        AliasPattern::exact(rcstr!(\"next\")),\n         ImportMapping::Empty.resolved_cell(),\n     );\n \n     //https://github.com/vercel/next.js/blob/f94d4f93e4802f951063cfa3351dd5a2325724b3/packages/next/src/build/webpack-config.ts#L1196\n     import_map.insert_exact_alias(\n-        \"setimmediate\",\n-        request_to_import_mapping(project_path.clone(), \"next/dist/compiled/setimmediate\"),\n+        rcstr!(\"setimmediate\"),\n+        request_to_import_mapping(\n+            project_path.clone(),\n+            rcstr!(\"next/dist/compiled/setimmediate\"),\n+        ),\n     );\n \n     import_map.insert_exact_alias(\n-        \"private-next-rsc-server-reference\",\n+        rcstr!(\"private-next-rsc-server-reference\"),\n         request_to_import_mapping(\n             project_path.clone(),\n-            \"next/dist/build/webpack/loaders/next-flight-loader/server-reference\",\n+            rcstr!(\"next/dist/build/webpack/loaders/next-flight-loader/server-reference\"),\n         ),\n     );\n     import_map.insert_exact_alias(\n-        \"private-next-rsc-action-client-wrapper\",\n+        rcstr!(\"private-next-rsc-action-client-wrapper\"),\n         request_to_import_mapping(\n             project_path.clone(),\n-            \"next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper\",\n+            rcstr!(\"next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper\"),\n         ),\n     );\n     import_map.insert_exact_alias(\n-        \"private-next-rsc-action-validate\",\n+        rcstr!(\"private-next-rsc-action-validate\"),\n         request_to_import_mapping(\n             project_path.clone(),\n-            \"next/dist/build/webpack/loaders/next-flight-loader/action-validate\",\n+            rcstr!(\"next/dist/build/webpack/loaders/next-flight-loader/action-validate\"),\n         ),\n     );\n     import_map.insert_exact_alias(\n-        \"private-next-rsc-action-encryption\",\n+        rcstr!(\"private-next-rsc-action-encryption\"),\n         request_to_import_mapping(\n             project_path.clone(),\n-            \"next/dist/server/app-render/encryption\",\n+            rcstr!(\"next/dist/server/app-render/encryption\"),\n         ),\n     );\n     import_map.insert_exact_alias(\n-        \"private-next-rsc-cache-wrapper\",\n+        rcstr!(\"private-next-rsc-cache-wrapper\"),\n         request_to_import_mapping(\n             project_path.clone(),\n-            \"next/dist/build/webpack/loaders/next-flight-loader/cache-wrapper\",\n+            rcstr!(\"next/dist/build/webpack/loaders/next-flight-loader/cache-wrapper\"),\n         ),\n     );\n     import_map.insert_exact_alias(\n-        \"private-next-rsc-track-dynamic-import\",\n+        rcstr!(\"private-next-rsc-track-dynamic-import\"),\n         request_to_import_mapping(\n             project_path.clone(),\n-            \"next/dist/build/webpack/loaders/next-flight-loader/track-dynamic-import\",\n+            rcstr!(\"next/dist/build/webpack/loaders/next-flight-loader/track-dynamic-import\"),\n         ),\n     );\n \n@@ -1150,15 +1216,15 @@ async fn insert_next_shared_aliases(\n     );\n \n     let image_config = next_config.image_config().await?;\n-    if let Some(loader_file) = image_config.loader_file.as_deref() {\n+    if let Some(loader_file) = image_config.loader_file.as_deref().map(RcStr::from) {\n         import_map.insert_exact_alias(\n-            \"next/dist/shared/lib/image-loader\",\n-            request_to_import_mapping(project_path.clone(), loader_file),\n+            rcstr!(\"next/dist/shared/lib/image-loader\"),\n+            request_to_import_mapping(project_path.clone(), loader_file.clone()),\n         );\n \n         if is_runtime_edge {\n             import_map.insert_exact_alias(\n-                \"next/dist/esm/shared/lib/image-loader\",\n+                rcstr!(\"next/dist/esm/shared/lib/image-loader\"),\n                 request_to_import_mapping(project_path.clone(), loader_file),\n             );\n         }\n@@ -1233,33 +1299,33 @@ fn export_value_to_import_mapping(\n fn insert_exact_alias_map(\n     import_map: &mut ImportMap,\n     project_path: FileSystemPath,\n-    map: FxIndexMap<&'static str, String>,\n+    map: FxIndexMap<RcStr, RcStr>,\n ) {\n     for (pattern, request) in map {\n         import_map.insert_exact_alias(\n             pattern,\n-            request_to_import_mapping(project_path.clone(), &request),\n+            request_to_import_mapping(project_path.clone(), request),\n         );\n     }\n }\n \n fn insert_wildcard_alias_map(\n     import_map: &mut ImportMap,\n     project_path: FileSystemPath,\n-    map: FxIndexMap<&'static str, String>,\n+    map: FxIndexMap<RcStr, RcStr>,\n ) {\n     for (pattern, request) in map {\n         import_map.insert_wildcard_alias(\n             pattern,\n-            request_to_import_mapping(project_path.clone(), &request),\n+            request_to_import_mapping(project_path.clone(), request),\n         );\n     }\n }\n \n /// Inserts an alias to an alternative of import mappings into an import map.\n fn insert_alias_to_alternatives<'a>(\n     import_map: &mut ImportMap,\n-    alias: impl Into<String> + 'a,\n+    alias: impl Into<RcStr> + 'a,\n     alternatives: Vec<ResolvedVc<ImportMapping>>,\n ) {\n     import_map.insert_exact_alias(\n@@ -1296,12 +1362,15 @@ async fn insert_instrumentation_client_alias(\n ) -> Result<()> {\n     insert_alias_to_alternatives(\n         import_map,\n-        \"private-next-instrumentation-client\",\n+        rcstr!(\"private-next-instrumentation-client\"),\n         vec![\n-            request_to_import_mapping(project_path.clone(), \"./src/instrumentation-client\"),\n-            request_to_import_mapping(project_path.clone(), \"./src/instrumentation-client.ts\"),\n-            request_to_import_mapping(project_path.clone(), \"./instrumentation-client\"),\n-            request_to_import_mapping(project_path.clone(), \"./instrumentation-client.ts\"),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"./src/instrumentation-client\")),\n+            request_to_import_mapping(\n+                project_path.clone(),\n+                rcstr!(\"./src/instrumentation-client.ts\"),\n+            ),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"./instrumentation-client\")),\n+            request_to_import_mapping(project_path.clone(), rcstr!(\"./instrumentation-client.ts\")),\n             ImportMapping::Ignore.resolved_cell(),\n         ],\n     );\n@@ -1312,30 +1381,30 @@ async fn insert_instrumentation_client_alias(\n // To alias e.g. both `import \"next/link\"` and `import \"next/link.js\"`\n fn insert_exact_alias_or_js(\n     import_map: &mut ImportMap,\n-    pattern: &str,\n+    pattern: RcStr,\n     mapping: ResolvedVc<ImportMapping>,\n ) {\n-    import_map.insert_exact_alias(pattern, mapping);\n     import_map.insert_exact_alias(format!(\"{pattern}.js\"), mapping);\n+    import_map.insert_exact_alias(pattern, mapping);\n }\n \n /// Creates a direct import mapping to the result of resolving a request\n /// in a context.\n fn request_to_import_mapping(\n     context_path: FileSystemPath,\n-    request: &str,\n+    request: RcStr,\n ) -> ResolvedVc<ImportMapping> {\n-    ImportMapping::PrimaryAlternative(request.into(), Some(context_path)).resolved_cell()\n+    ImportMapping::PrimaryAlternative(request, Some(context_path)).resolved_cell()\n }\n \n /// Creates a direct import mapping to the result of resolving an external\n /// request.\n fn external_request_to_cjs_import_mapping(\n     context_dir: FileSystemPath,\n-    request: &str,\n+    request: RcStr,\n ) -> ResolvedVc<ImportMapping> {\n     ImportMapping::PrimaryAlternativeExternal {\n-        name: Some(request.into()),\n+        name: Some(request),\n         ty: ExternalType::CommonJs,\n         traced: ExternalTraced::Traced,\n         lookup_dir: context_dir,\n@@ -1347,10 +1416,10 @@ fn external_request_to_cjs_import_mapping(\n /// request.\n fn external_request_to_esm_import_mapping(\n     context_dir: FileSystemPath,\n-    request: &str,\n+    request: RcStr,\n ) -> ResolvedVc<ImportMapping> {\n     ImportMapping::PrimaryAlternativeExternal {\n-        name: Some(request.into()),\n+        name: Some(request),\n         ty: ExternalType::EcmaScriptModule,\n         traced: ExternalTraced::Traced,\n         lookup_dir: context_dir,"
        },
        {
            "sha": "d479ce4312c6007fe3d5a5efdf369c6fd90b09a4",
            "filename": "crates/next-core/src/next_manifests/client_reference_manifest.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 13,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fclient_reference_manifest.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fclient_reference_manifest.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fclient_reference_manifest.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -5,7 +5,7 @@ use itertools::Itertools;\n use rustc_hash::FxHashMap;\n use serde::{Deserialize, Serialize};\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexSet, ResolvedVc, TaskInput, TryFlatJoinIterExt, TryJoinIterExt, ValueToString, Vc,\n     trace::TraceRawVcs,\n@@ -71,17 +71,13 @@ impl ClientReferenceManifest {\n         async move {\n             let mut entry_manifest: ClientReferenceManifest = Default::default();\n             let mut references = FxIndexSet::default();\n-            let chunk_suffix_path = next_config.chunk_suffix_path().await?;\n+            let chunk_suffix_path = next_config.chunk_suffix_path().owned().await?;\n             let prefix_path = next_config\n                 .computed_asset_prefix()\n+                .owned()\n                 .await?\n-                .as_ref()\n-                .map(|p| p.clone())\n                 .unwrap_or_default();\n-            let suffix_path = chunk_suffix_path\n-                .as_ref()\n-                .map(|p| p.to_string())\n-                .unwrap_or(\"\".into());\n+            let suffix_path = chunk_suffix_path.unwrap_or_default();\n \n             // TODO: Add `suffix` to the manifest for React to use.\n             // entry_manifest.module_loading.prefix = prefix_path;\n@@ -267,7 +263,7 @@ impl ClientReferenceManifest {\n                     entry_manifest.client_modules.module_exports.insert(\n                         get_client_reference_module_key(&server_path, \"*\"),\n                         ManifestNodeEntry {\n-                            name: \"*\".into(),\n+                            name: rcstr!(\"*\"),\n                             id: (&*client_chunk_item_id).into(),\n                             chunks: client_chunks_paths,\n                             // This should of course be client_is_async, but SSR can become\n@@ -280,9 +276,9 @@ impl ClientReferenceManifest {\n \n                     let mut ssr_manifest_node = ManifestNode::default();\n                     ssr_manifest_node.module_exports.insert(\n-                        \"*\".into(),\n+                        rcstr!(\"*\"),\n                         ManifestNodeEntry {\n-                            name: \"*\".into(),\n+                            name: rcstr!(\"*\"),\n                             id: (&*ssr_chunk_item_id).into(),\n                             chunks: ssr_chunks_paths,\n                             // See above\n@@ -292,9 +288,9 @@ impl ClientReferenceManifest {\n \n                     let mut rsc_manifest_node = ManifestNode::default();\n                     rsc_manifest_node.module_exports.insert(\n-                        \"*\".into(),\n+                        rcstr!(\"*\"),\n                         ManifestNodeEntry {\n-                            name: \"*\".into(),\n+                            name: rcstr!(\"*\"),\n                             id: (&*rsc_chunk_item_id).into(),\n                             chunks: vec![],\n                             r#async: rsc_is_async,"
        },
        {
            "sha": "ba91748c58b9499949d1e066706f3f4f8c577dfb",
            "filename": "crates/next-core/src/next_manifests/mod.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fmod.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -519,6 +519,8 @@ pub struct ClientBuildManifest<'a> {\n \n #[cfg(test)]\n mod tests {\n+    use turbo_rcstr::rcstr;\n+\n     use super::*;\n \n     #[test]\n@@ -529,20 +531,20 @@ mod tests {\n                 locale: false,\n                 has: None,\n                 missing: None,\n-                original_source: \"\".into(),\n+                original_source: rcstr!(\"\"),\n             },\n             MiddlewareMatcher {\n-                regexp: Some(\".*\".into()),\n+                regexp: Some(rcstr!(\".*\")),\n                 locale: true,\n                 has: Some(vec![RouteHas::Query {\n-                    key: \"foo\".into(),\n+                    key: rcstr!(\"foo\"),\n                     value: None,\n                 }]),\n                 missing: Some(vec![RouteHas::Query {\n-                    key: \"bar\".into(),\n-                    value: Some(\"value\".into()),\n+                    key: rcstr!(\"bar\"),\n+                    value: Some(rcstr!(\"value\")),\n                 }]),\n-                original_source: \"source\".into(),\n+                original_source: rcstr!(\"source\"),\n             },\n         ];\n "
        },
        {
            "sha": "173f1b628b9e0b5535bee9172537e5dc5d4d6f1f",
            "filename": "crates/next-core/src/next_server/resolve.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -238,7 +238,7 @@ impl AfterResolvePlugin for ExternalCjsModulesResolvePlugin {\n                     // have an extension in the request we try to append \".js\"\n                     // automatically\n                     request_str.push_str(\".js\");\n-                    request = request.append_path(\".js\".into()).resolve().await?;\n+                    request = request.append_path(rcstr!(\".js\")).resolve().await?;\n                     continue;\n                 }\n                 // this can't resolve with node.js from the original location, so bundle it\n@@ -271,7 +271,7 @@ impl AfterResolvePlugin for ExternalCjsModulesResolvePlugin {\n                         .into(),\n                 ),\n                 StyledString::Code(format!(\"npm install {package}\").into()),\n-                StyledString::Text(\" from the project directory.\".into()),\n+                StyledString::Text(rcstr!(\" from the project directory.\")),\n             ]);\n         };\n \n@@ -293,9 +293,9 @@ impl AfterResolvePlugin for ExternalCjsModulesResolvePlugin {\n             let FindContextFileResult::Found(package_json_from_original_location, _) =\n                 &*package_json_from_original_location.await?\n             else {\n-                return unable_to_externalize(vec![StyledString::Text(\n-                    \"The package.json of the package can't be found.\".into(),\n-                )]);\n+                return unable_to_externalize(vec![StyledString::Text(rcstr!(\n+                    \"The package.json of the package can't be found.\"\n+                ))]);\n             };\n             let FileJsonContent::Content(package_json_file) =\n                 &*package_json_file.read_json().await?\n@@ -309,17 +309,17 @@ impl AfterResolvePlugin for ExternalCjsModulesResolvePlugin {\n             let FileJsonContent::Content(package_json_from_original_location) =\n                 &*package_json_from_original_location.read_json().await?\n             else {\n-                return unable_to_externalize(vec![StyledString::Text(\n-                    \"The package.json of the package can't be parsed.\".into(),\n-                )]);\n+                return unable_to_externalize(vec![StyledString::Text(rcstr!(\n+                    \"The package.json of the package can't be parsed.\"\n+                ))]);\n             };\n             let (Some(name), Some(version)) = (\n                 package_json_file.get(\"name\").and_then(|v| v.as_str()),\n                 package_json_file.get(\"version\").and_then(|v| v.as_str()),\n             ) else {\n-                return unable_to_externalize(vec![StyledString::Text(\n-                    \"The package.json of the package has no name or version.\".into(),\n-                )]);\n+                return unable_to_externalize(vec![StyledString::Text(rcstr!(\n+                    \"The package.json of the package has no name or version.\"\n+                ))]);\n             };\n             let (Some(name2), Some(version2)) = (\n                 package_json_from_original_location\n@@ -354,15 +354,15 @@ impl AfterResolvePlugin for ExternalCjsModulesResolvePlugin {\n         let external_type = match (file_type, is_esm) {\n             (FileType::UnsupportedExtension, _) => {\n                 // unsupported file type, bundle it\n-                return unable_to_externalize(vec![StyledString::Text(\n-                    \"Only .mjs, .cjs, .js, .json, or .node can be handled by Node.js.\".into(),\n-                )]);\n+                return unable_to_externalize(vec![StyledString::Text(rcstr!(\n+                    \"Only .mjs, .cjs, .js, .json, or .node can be handled by Node.js.\"\n+                ))]);\n             }\n             (FileType::InvalidPackageJson, _) => {\n                 // invalid package.json, bundle it\n-                return unable_to_externalize(vec![StyledString::Text(\n-                    \"The package.json can't be found or parsed.\".into(),\n-                )]);\n+                return unable_to_externalize(vec![StyledString::Text(rcstr!(\n+                    \"The package.json can't be found or parsed.\"\n+                ))]);\n             }\n             // commonjs without esm is always external\n             (FileType::CommonJs, false) => ExternalType::CommonJs,"
        },
        {
            "sha": "b00dbf34b4e6bf18fe71b8e94bbcef6bef52ba51",
            "filename": "crates/next-core/src/next_server_component/server_component_module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -101,8 +101,8 @@ impl EcmascriptChunkPlaceable for NextServerComponentModule {\n \n         let mut exports = BTreeMap::new();\n         exports.insert(\n-            \"default\".into(),\n-            EsmExport::ImportedBinding(module_reference, \"default\".into(), false),\n+            rcstr!(\"default\"),\n+            EsmExport::ImportedBinding(module_reference, rcstr!(\"default\"), false),\n         );\n \n         Ok(EcmascriptExports::EsmExports("
        },
        {
            "sha": "578ff7e28f71956c27b230eb4d256ce41e4147a6",
            "filename": "crates/next-core/src/next_server_utility/server_utility_module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -101,8 +101,8 @@ impl EcmascriptChunkPlaceable for NextServerUtilityModule {\n \n         let mut exports = BTreeMap::new();\n         exports.insert(\n-            \"default\".into(),\n-            EsmExport::ImportedBinding(module_reference, \"default\".into(), false),\n+            rcstr!(\"default\"),\n+            EsmExport::ImportedBinding(module_reference, rcstr!(\"default\"), false),\n         );\n \n         Ok(EcmascriptExports::EsmExports("
        },
        {
            "sha": "afa634595226c804e2b980996638b75543fb3331",
            "filename": "crates/next-core/src/next_server_utility/server_utility_reference.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_reference.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_reference.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_reference.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use once_cell::sync::Lazy;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbopack_core::{\n     chunk::{ChunkableModuleReference, ChunkingType, ChunkingTypeOption},\n@@ -44,7 +44,7 @@ impl ModuleReference for NextServerUtilityModuleReference {\n     }\n }\n \n-pub static NEXT_SERVER_UTILITY_MERGE_TAG: Lazy<RcStr> = Lazy::new(|| \"next-server-utility\".into());\n+pub static NEXT_SERVER_UTILITY_MERGE_TAG: Lazy<RcStr> = Lazy::new(|| rcstr!(\"next-server-utility\"));\n \n #[turbo_tasks::value_impl]\n impl ChunkableModuleReference for NextServerUtilityModuleReference {"
        },
        {
            "sha": "34d931d02f4e473db3c18122f9dcf48397c1653d",
            "filename": "crates/next-core/src/next_shared/resolve.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fresolve.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -158,7 +158,7 @@ pub(crate) fn get_invalid_client_only_resolve_plugin(\n ) -> Vc<InvalidImportResolvePlugin> {\n     InvalidImportResolvePlugin::new(\n         root,\n-        \"client-only\".into(),\n+        rcstr!(\"client-only\"),\n         vec![\n             \"'client-only' cannot be imported from a Server Component module. It should only be \\\n              used from a Client Component.\"\n@@ -175,7 +175,7 @@ pub(crate) fn get_invalid_server_only_resolve_plugin(\n ) -> Vc<InvalidImportResolvePlugin> {\n     InvalidImportResolvePlugin::new(\n         root,\n-        \"server-only\".into(),\n+        rcstr!(\"server-only\"),\n         vec![\n             \"'server-only' cannot be imported from a Client Component module. It should only be \\\n              used from a Server Component.\"\n@@ -190,7 +190,7 @@ pub(crate) fn get_invalid_styled_jsx_resolve_plugin(\n ) -> Vc<InvalidImportResolvePlugin> {\n     InvalidImportResolvePlugin::new(\n         root,\n-        \"styled-jsx\".into(),\n+        rcstr!(\"styled-jsx\"),\n         vec![\n             \"'client-only' cannot be imported from a Server Component module. It should only be \\\n              used from a Client Component.\"\n@@ -222,7 +222,9 @@ impl AfterResolvePlugin for NextExternalResolvePlugin {\n     async fn after_resolve_condition(&self) -> Result<Vc<AfterResolvePluginCondition>> {\n         Ok(AfterResolvePluginCondition::new(\n             self.project_path.root().owned().await?,\n-            Glob::new(\"**/next/dist/**/*.{external,runtime.dev,runtime.prod}.js\".into()),\n+            Glob::new(rcstr!(\n+                \"**/next/dist/**/*.{external,runtime.dev,runtime.prod}.js\"\n+            )),\n         ))\n     }\n \n@@ -276,7 +278,7 @@ impl AfterResolvePlugin for NextNodeSharedRuntimeResolvePlugin {\n     async fn after_resolve_condition(&self) -> Result<Vc<AfterResolvePluginCondition>> {\n         Ok(AfterResolvePluginCondition::new(\n             self.root.root().owned().await?,\n-            Glob::new(\"**/next/dist/**/*.shared-runtime.js\".into()),\n+            Glob::new(rcstr!(\"**/next/dist/**/*.shared-runtime.js\")),\n         ))\n     }\n \n@@ -401,7 +403,7 @@ impl AfterResolvePlugin for NextSharedRuntimeResolvePlugin {\n     async fn after_resolve_condition(&self) -> Result<Vc<AfterResolvePluginCondition>> {\n         Ok(AfterResolvePluginCondition::new(\n             self.root.root().owned().await?,\n-            Glob::new(\"**/next/dist/esm/**/*.shared-runtime.js\".into()),\n+            Glob::new(rcstr!(\"**/next/dist/esm/**/*.shared-runtime.js\")),\n         ))\n     }\n "
        },
        {
            "sha": "0b81722d400aa84b9b9587b93a55257f7ab43f92",
            "filename": "crates/next-core/src/next_shared/transforms/next_font.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fnext_font.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fnext_font.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fnext_font.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,7 +1,10 @@\n use anyhow::Result;\n use async_trait::async_trait;\n use next_custom_transforms::transforms::fonts::*;\n-use swc_core::ecma::{ast::Program, atoms::Atom, visit::VisitMutWith};\n+use swc_core::{\n+    atoms::atom,\n+    ecma::{ast::Program, atoms::Atom, visit::VisitMutWith},\n+};\n use turbo_tasks::ResolvedVc;\n use turbopack::module_options::{ModuleRule, ModuleRuleEffect};\n use turbopack_ecmascript::{CustomTransformer, EcmascriptInputTransform, TransformContext};\n@@ -11,10 +14,10 @@ use super::module_rule_match_js_no_url;\n /// Returns a rule which applies the Next.js font transform.\n pub fn get_next_font_transform_rule(enable_mdx_rs: bool) -> ModuleRule {\n     let font_loaders = vec![\n-        \"next/font/google\".into(),\n-        \"@next/font/google\".into(),\n-        \"next/font/local\".into(),\n-        \"@next/font/local\".into(),\n+        atom!(\"next/font/google\"),\n+        atom!(\"@next/font/google\"),\n+        atom!(\"next/font/local\"),\n+        atom!(\"@next/font/local\"),\n     ];\n \n     let transformer ="
        },
        {
            "sha": "b9e3da7ae518781547c792eddb0b446de7f21b66",
            "filename": "crates/next-core/src/next_shared/webpack_rules/babel.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fbabel.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fbabel.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fbabel.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -116,7 +116,7 @@ pub async fn is_babel_loader_available(project_path: FileSystemPath) -> Result<V\n     let result = resolve(\n         project_path.clone(),\n         ReferenceType::CommonJs(CommonJsReferenceSubType::Undefined),\n-        Request::parse(Pattern::Constant(\"babel-loader/package.json\".into())),\n+        Request::parse(Pattern::Constant(rcstr!(\"babel-loader/package.json\"))),\n         node_cjs_resolve_options(project_path),\n     );\n     let assets = result.primary_sources().await?;"
        },
        {
            "sha": "d67d046519012f226cab875e4d034697607f6f68",
            "filename": "crates/next-core/src/next_shared/webpack_rules/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fmod.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack::module_options::WebpackLoadersOptions;\n@@ -46,7 +46,7 @@ pub async fn webpack_loader_options(\n fn loader_runner_package_mapping() -> Result<Vc<ImportMapping>> {\n     Ok(ImportMapping::Alternatives(vec![\n         ImportMapping::External(\n-            Some(\"next/dist/compiled/loader-runner\".into()),\n+            Some(rcstr!(\"next/dist/compiled/loader-runner\")),\n             ExternalType::CommonJs,\n             ExternalTraced::Untraced,\n         )"
        },
        {
            "sha": "a32c11420faae3d9d4c41b9f9bd1388d075f038b",
            "filename": "crates/next-core/src/next_shared/webpack_rules/sass.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fsass.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fsass.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fwebpack_rules%2Fsass.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -2,6 +2,7 @@ use std::mem::take;\n \n use anyhow::{Result, bail};\n use serde_json::Value as JsonValue;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbopack::module_options::{LoaderRuleItem, OptionWebpackRules, WebpackRules};\n use turbopack_node::transforms::webpack::WebpackLoaderItem;\n@@ -41,7 +42,7 @@ pub async fn maybe_add_sass_loader(\n             .or(sass_options.get(\"additionalData\"));\n         let rule = rules.get_mut(pattern);\n         let sass_loader = WebpackLoaderItem {\n-            loader: \"next/dist/compiled/sass-loader\".into(),\n+            loader: rcstr!(\"next/dist/compiled/sass-loader\"),\n             options: take(\n                 serde_json::json!({\n                     \"implementation\": sass_options.get(\"implementation\"),\n@@ -54,7 +55,7 @@ pub async fn maybe_add_sass_loader(\n             ),\n         };\n         let resolve_url_loader = WebpackLoaderItem {\n-            loader: \"next/dist/build/webpack/loaders/resolve-url-loader/index\".into(),\n+            loader: rcstr!(\"next/dist/build/webpack/loaders/resolve-url-loader/index\"),\n             options: take(\n                 serde_json::json!({\n                     //https://github.com/vercel/turbo/blob/d527eb54be384a4658243304cecd547d09c05c6b/crates/turbopack-node/src/transforms/webpack.rs#L191"
        },
        {
            "sha": "d951e11ab4fa8ab1f5807bf99f77459b3f4c3b28",
            "filename": "crates/next-core/src/transform_options.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Ftransform_options.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Ftransform_options.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Ftransform_options.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::{self, FileJsonContent, FileSystemPath};\n use turbopack::{\n@@ -161,11 +162,11 @@ pub async fn get_jsx_transform_options(\n         // https://github.com/vercel/next.js/blob/3dc2c1c7f8441cdee31da9f7e0986d654c7fd2e7/packages/next/src/build/swc/options.ts#L112\n         // This'll be ignored if ts|jsconfig explicitly specifies importSource\n         import_source: if is_emotion_enabled && !is_rsc_context {\n-            Some(\"@emotion/react\".into())\n+            Some(rcstr!(\"@emotion/react\"))\n         } else {\n             None\n         },\n-        runtime: Some(\"automatic\".into()),\n+        runtime: Some(rcstr!(\"automatic\")),\n         react_refresh: enable_react_refresh,\n     };\n "
        },
        {
            "sha": "8b540ff449c6a8eeed7031418b44ff5d2b02a26c",
            "filename": "crates/next-core/src/util.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-core%2Fsrc%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Futil.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -105,7 +105,7 @@ pub async fn pathname_for_path(\n     };\n     let path = match (path_ty, path) {\n         // \"/\" is special-cased to \"/index\" for data routes.\n-        (PathType::Data, \"\") => \"/index\".into(),\n+        (PathType::Data, \"\") => rcstr!(\"/index\"),\n         // `get_path_to` always strips the leading `/` from the path, so we need to add\n         // it back here.\n         (_, path) => format!(\"/{path}\").into(),\n@@ -141,7 +141,7 @@ pub async fn get_transpiled_packages(\n \n     let default_transpiled_packages: Vec<RcStr> = load_next_js_templateon(\n         project_path,\n-        \"dist/lib/default-transpiled-packages.json\".into(),\n+        rcstr!(\"dist/lib/default-transpiled-packages.json\"),\n     )\n     .await?;\n \n@@ -280,8 +280,10 @@ impl Issue for NextSourceConfigParsingIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Next.js can't recognize the exported `config` field in route\".into())\n-            .cell()\n+        StyledString::Text(rcstr!(\n+            \"Next.js can't recognize the exported `config` field in route\"\n+        ))\n+        .cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -553,7 +555,7 @@ pub async fn parse_config_from_source(\n                             if let Expr::Lit(Lit::Str(str_value)) = &**init {\n                                 let mut config = NextSourceConfig::default();\n \n-                                let runtime = str_value.value.to_string();\n+                                let runtime = &str_value.value;\n                                 match runtime.as_str() {\n                                     \"edge\" | \"experimental-edge\" => {\n                                         config.runtime = NextRuntime::Edge;"
        },
        {
            "sha": "83e4d9aed43c6e850ea70c56a7a8c5b58b41857c",
            "filename": "crates/next-custom-transforms/src/transforms/cjs_optimizer.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fcjs_optimizer.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fcjs_optimizer.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fcjs_optimizer.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,6 +1,7 @@\n use rustc_hash::{FxHashMap, FxHashSet};\n use serde::Deserialize;\n use swc_core::{\n+    atoms::atom,\n     common::{util::take::Take, SyntaxContext, DUMMY_SP},\n     ecma::{\n         ast::{\n@@ -113,7 +114,7 @@ impl VisitMut for CjsOptimizer {\n                                             obj: Box::new(Expr::Call(CallExpr {\n                                                 span: DUMMY_SP,\n                                                 callee: Ident::new(\n-                                                    \"require\".into(),\n+                                                    atom!(\"require\"),\n                                                     DUMMY_SP,\n                                                     self.unresolved_ctxt,\n                                                 )"
        },
        {
            "sha": "136ae0eeefc9eaa30859537f175b28908f91332a",
            "filename": "crates/next-custom-transforms/src/transforms/dynamic.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fdynamic.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fdynamic.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fdynamic.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -5,7 +5,7 @@ use std::{\n \n use pathdiff::diff_paths;\n use swc_core::{\n-    atoms::Atom,\n+    atoms::{atom, Atom},\n     common::{errors::HANDLER, FileName, Span, DUMMY_SP},\n     ecma::{\n         ast::{\n@@ -264,7 +264,7 @@ impl Fold for NextDynamicPatcher {\n                     let mut props =\n                         vec![PropOrSpread::Prop(Box::new(Prop::KeyValue(KeyValueProp {\n                             key: PropName::Ident(IdentName::new(\n-                                \"loadableGenerated\".into(),\n+                                atom!(\"loadableGenerated\"),\n                                 DUMMY_SP,\n                             )),\n                             value: generated,\n@@ -432,7 +432,7 @@ impl VisitMut for DynamicImportTransitionAdder<'_> {\n                     ObjectLit {\n                         span: DUMMY_SP,\n                         props: vec![PropOrSpread::Prop(Box::new(Prop::KeyValue(KeyValueProp {\n-                            key: PropName::Ident(IdentName::new(\"with\".into(), DUMMY_SP)),\n+                            key: PropName::Ident(IdentName::new(atom!(\"with\"), DUMMY_SP)),\n                             value: with_transition(self.transition_name).into(),\n                         })))],\n                     }\n@@ -453,7 +453,7 @@ impl VisitMut for DynamicImportTransitionAdder<'_> {\n \n fn module_id_options(module_id: Expr) -> Vec<PropOrSpread> {\n     vec![PropOrSpread::Prop(Box::new(Prop::KeyValue(KeyValueProp {\n-        key: PropName::Ident(IdentName::new(\"modules\".into(), DUMMY_SP)),\n+        key: PropName::Ident(IdentName::new(atom!(\"modules\"), DUMMY_SP)),\n         value: Box::new(Expr::Array(ArrayLit {\n             elems: vec![Some(ExprOrSpread {\n                 expr: Box::new(module_id),\n@@ -466,7 +466,7 @@ fn module_id_options(module_id: Expr) -> Vec<PropOrSpread> {\n \n fn webpack_options(module_id: Expr) -> Vec<PropOrSpread> {\n     vec![PropOrSpread::Prop(Box::new(Prop::KeyValue(KeyValueProp {\n-        key: PropName::Ident(IdentName::new(\"webpack\".into(), DUMMY_SP)),\n+        key: PropName::Ident(IdentName::new(atom!(\"webpack\"), DUMMY_SP)),\n         value: Box::new(Expr::Arrow(ArrowExpr {\n             params: vec![],\n             body: Box::new(BlockStmtOrExpr::Expr(Box::new(Expr::Array(ArrayLit {\n@@ -512,7 +512,7 @@ impl NextDynamicPatcher {\n                             local: id_ident,\n                             imported: Some(\n                                 Ident::new(\n-                                    \"__turbopack_module_id__\".into(),\n+                                    atom!(\"__turbopack_module_id__\"),\n                                     DUMMY_SP,\n                                     Default::default(),\n                                 )\n@@ -541,7 +541,7 @@ impl NextDynamicPatcher {\n fn exec_expr_when_resolve_weak_available(expr: &Expr) -> Expr {\n     let undefined_str_literal = Expr::Lit(Lit::Str(Str {\n         span: DUMMY_SP,\n-        value: \"undefined\".into(),\n+        value: atom!(\"undefined\"),\n         raw: None,\n     }));\n "
        },
        {
            "sha": "e129cb0839545ecd7dac0cfd820ec7d0bc5a7372",
            "filename": "crates/next-custom-transforms/src/transforms/import_analyzer.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fimport_analyzer.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fimport_analyzer.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fimport_analyzer.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,6 +1,6 @@\n use rustc_hash::{FxHashMap, FxHashSet};\n use swc_core::{\n-    atoms::Atom,\n+    atoms::{atom, Atom},\n     ecma::{\n         ast::{\n             Expr, Id, ImportDecl, ImportNamedSpecifier, ImportSpecifier, MemberExpr, MemberProp,\n@@ -80,7 +80,7 @@ impl Visit for Analyzer<'_> {\n                     Some(imported) => (local.to_id(), orig_name(imported)),\n                     _ => (local.to_id(), local.sym.clone()),\n                 },\n-                ImportSpecifier::Default(s) => (s.local.to_id(), \"default\".into()),\n+                ImportSpecifier::Default(s) => (s.local.to_id(), atom!(\"default\")),\n                 ImportSpecifier::Namespace(s) => {\n                     self.data\n                         .namespace_imports"
        },
        {
            "sha": "2ce396c4849a5c93e03a87f164c224d20b1da1c2",
            "filename": "crates/next-custom-transforms/src/transforms/next_ssg.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fnext_ssg.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fnext_ssg.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fnext_ssg.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -3,7 +3,7 @@ use std::{cell::RefCell, mem::take, rc::Rc};\n use easy_error::{bail, Error};\n use rustc_hash::FxHashSet;\n use swc_core::{\n-    atoms::Atom,\n+    atoms::{atom, Atom},\n     common::{\n         errors::HANDLER,\n         pass::{Repeat, Repeated},\n@@ -443,7 +443,7 @@ impl Fold for NextSsg {\n \n         match &i {\n             ModuleItem::ModuleDecl(ModuleDecl::ExportNamed(e)) if e.specifiers.is_empty() => {\n-                return ModuleItem::Stmt(Stmt::Empty(EmptyStmt { span: DUMMY_SP }))\n+                return ModuleItem::Stmt(Stmt::Empty(EmptyStmt { span: DUMMY_SP }));\n             }\n             _ => {}\n         }\n@@ -469,9 +469,9 @@ impl Fold for NextSsg {\n                     name: Pat::Ident(\n                         IdentName::new(\n                             if self.state.is_prerenderer {\n-                                \"__N_SSG\".into()\n+                                atom!(\"__N_SSG\")\n                             } else {\n-                                \"__N_SSP\".into()\n+                                atom!(\"__N_SSP\")\n                             },\n                             DUMMY_SP,\n                         )"
        },
        {
            "sha": "f801120888a8d462799d05c657580444f9f5291b",
            "filename": "crates/next-custom-transforms/src/transforms/optimize_server_react.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Foptimize_server_react.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Foptimize_server_react.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Foptimize_server_react.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -4,6 +4,7 @@\n \n use serde::Deserialize;\n use swc_core::{\n+    atoms::atom,\n     common::DUMMY_SP,\n     ecma::{\n         ast::*,\n@@ -71,18 +72,18 @@ fn wrap_expr_with_env_prod_condition(call: CallExpr) -> Expr {\n         left: Box::new(Expr::Member(MemberExpr {\n             obj: (Box::new(Expr::Member(MemberExpr {\n                 obj: (Box::new(Expr::Ident(Ident {\n-                    sym: \"process\".into(),\n+                    sym: atom!(\"process\"),\n                     span: DUMMY_SP,\n                     ..Default::default()\n                 }))),\n                 prop: MemberProp::Ident(IdentName {\n-                    sym: \"env\".into(),\n+                    sym: atom!(\"env\"),\n                     span: DUMMY_SP,\n                 }),\n                 span: DUMMY_SP,\n             }))),\n             prop: (MemberProp::Ident(IdentName {\n-                sym: \"__NEXT_PRIVATE_MINIMIZE_MACRO_FALSE\".into(),\n+                sym: atom!(\"__NEXT_PRIVATE_MINIMIZE_MACRO_FALSE\"),\n                 span: DUMMY_SP,\n             })),\n             span: DUMMY_SP,"
        },
        {
            "sha": "1fd2338bdc78158e31eb68aa83a941a52c8e6ec7",
            "filename": "crates/next-custom-transforms/src/transforms/server_actions.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 14,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -445,7 +445,7 @@ impl<C: Comments> ServerActions<C> {\n             new_params.push(Param {\n                 span: DUMMY_SP,\n                 decorators: vec![],\n-                pat: Pat::Ident(IdentName::new(\"$$ACTION_CLOSURE_BOUND\".into(), DUMMY_SP).into()),\n+                pat: Pat::Ident(IdentName::new(atom!(\"$$ACTION_CLOSURE_BOUND\"), DUMMY_SP).into()),\n             });\n         }\n \n@@ -597,7 +597,7 @@ impl<C: Comments> ServerActions<C> {\n             new_params.push(Param {\n                 span: DUMMY_SP,\n                 decorators: vec![],\n-                pat: Pat::Ident(IdentName::new(\"$$ACTION_CLOSURE_BOUND\".into(), DUMMY_SP).into()),\n+                pat: Pat::Ident(IdentName::new(atom!(\"$$ACTION_CLOSURE_BOUND\"), DUMMY_SP).into()),\n             });\n         }\n \n@@ -1620,7 +1620,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                                     // export default function foo() {}\n                                     self.exported_idents.push((\n                                         ident.clone(),\n-                                        \"default\".into(),\n+                                        atom!(\"default\"),\n                                         ref_id,\n                                     ));\n                                 } else {\n@@ -1638,7 +1638,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n \n                                     self.exported_idents.push((\n                                         new_ident.clone(),\n-                                        \"default\".into(),\n+                                        atom!(\"default\"),\n                                         ref_id,\n                                     ));\n \n@@ -1694,7 +1694,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n \n                                     self.exported_idents.push((\n                                         new_ident.clone(),\n-                                        \"default\".into(),\n+                                        atom!(\"default\"),\n                                         self.generate_server_reference_id(\n                                             \"default\",\n                                             is_cache,\n@@ -1723,7 +1723,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                                 // export default foo\n                                 self.exported_idents.push((\n                                     ident.clone(),\n-                                    \"default\".into(),\n+                                    atom!(\"default\"),\n                                     self.generate_server_reference_id(\n                                         \"default\",\n                                         in_cache_file,\n@@ -1741,7 +1741,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n \n                                 self.exported_idents.push((\n                                     new_ident.clone(),\n-                                    \"default\".into(),\n+                                    atom!(\"default\"),\n                                     self.generate_server_reference_id(\n                                         \"default\",\n                                         in_cache_file,\n@@ -1858,7 +1858,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                     ],\n                     src: Box::new(Str {\n                         span: DUMMY_SP,\n-                        value: \"private-next-rsc-action-client-wrapper\".into(),\n+                        value: atom!(\"private-next-rsc-action-client-wrapper\"),\n                         raw: None,\n                     }),\n                     type_only: false,\n@@ -1990,7 +1990,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                         })],\n                         src: Box::new(Str {\n                             span: DUMMY_SP,\n-                            value: \"private-next-rsc-action-validate\".into(),\n+                            value: atom!(\"private-next-rsc-action-validate\"),\n                             raw: None,\n                         }),\n                         type_only: false,\n@@ -2040,7 +2040,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                 })],\n                 src: Box::new(Str {\n                     span: DUMMY_SP,\n-                    value: \"private-next-rsc-cache-wrapper\".into(),\n+                    value: atom!(\"private-next-rsc-cache-wrapper\"),\n                     raw: None,\n                 }),\n                 type_only: false,\n@@ -2065,7 +2065,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                 })],\n                 src: Box::new(Str {\n                     span: DUMMY_SP,\n-                    value: \"private-next-rsc-server-reference\".into(),\n+                    value: atom!(\"private-next-rsc-server-reference\"),\n                     raw: None,\n                 }),\n                 type_only: false,\n@@ -2094,7 +2094,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                 ],\n                 src: Box::new(Str {\n                     span: DUMMY_SP,\n-                    value: \"private-next-rsc-action-encryption\".into(),\n+                    value: atom!(\"private-next-rsc-action-encryption\"),\n                     raw: None,\n                 }),\n                 type_only: false,\n@@ -2142,7 +2142,7 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                     ServerActionsMode::Turbopack => {\n                         new.push(ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n                             expr: Box::new(Expr::Lit(Lit::Str(\n-                                \"use turbopack no side effects\".into(),\n+                                atom!(\"use turbopack no side effects\").into(),\n                             ))),\n                             span: DUMMY_SP,\n                         })));\n@@ -2165,7 +2165,8 @@ impl<C: Comments> VisitMut for ServerActions<C> {\n                                             vec![\n                                                 ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n                                                     expr: Box::new(Expr::Lit(Lit::Str(\n-                                                        \"use turbopack no side effects\".into(),\n+                                                        atom!(\"use turbopack no side effects\")\n+                                                            .into(),\n                                                     ))),\n                                                     span: DUMMY_SP,\n                                                 })),"
        },
        {
            "sha": "dd9798030df7c253e40a7f95ef48fbd19f069f27",
            "filename": "crates/next-custom-transforms/tests/errors.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Ftests%2Ferrors.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-custom-transforms%2Ftests%2Ferrors.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ferrors.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -11,6 +11,7 @@ use next_custom_transforms::transforms::{\n };\n use rustc_hash::FxHashSet;\n use swc_core::{\n+    atoms::atom,\n     common::{FileName, Mark},\n     ecma::{\n         parser::{EsSyntax, Syntax},\n@@ -21,6 +22,7 @@ use swc_core::{\n     },\n };\n use testing::fixture;\n+use turbo_rcstr::rcstr;\n \n fn syntax() -> Syntax {\n     Syntax::Es(EsSyntax {\n@@ -125,8 +127,8 @@ fn next_font_loaders_errors(input: PathBuf) {\n         syntax(),\n         &|_tr| {\n             next_font_loaders(FontLoaderConfig {\n-                relative_file_path_from_root: \"pages/test.tsx\".into(),\n-                font_loaders: vec![\"@next/font/google\".into(), \"cool-fonts\".into()],\n+                relative_file_path_from_root: atom!(\"pages/test.tsx\"),\n+                font_loaders: vec![atom!(\"@next/font/google\"), atom!(\"cool-fonts\")],\n             })\n         },\n         &input,\n@@ -231,7 +233,7 @@ fn use_cache_not_allowed(input: PathBuf) {\n                         is_development: true,\n                         use_cache_enabled: false,\n                         hash_salt: \"\".into(),\n-                        cache_kinds: FxHashSet::from_iter([\"x\".into()]),\n+                        cache_kinds: FxHashSet::from_iter([rcstr!(\"x\")]),\n                     },\n                     tr.comments.as_ref().clone(),\n                     tr.cm.clone(),"
        },
        {
            "sha": "e04c1f0a0d60bd5f0fec696a89f4e075806677ab",
            "filename": "crates/next-error-code-swc-plugin/src/lib.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-error-code-swc-plugin%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/crates%2Fnext-error-code-swc-plugin%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-error-code-swc-plugin%2Fsrc%2Flib.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -184,11 +184,11 @@ impl VisitMut for TransformVisitor {\n                 callee: Callee::Expr(Box::new(Expr::Member(MemberExpr {\n                     span: new_error_expr.span,\n                     obj: Box::new(Expr::Ident(Ident::new(\n-                        \"Object\".into(),\n+                        rcstr!(\"Object\"),\n                         new_error_expr.span,\n                         Default::default(),\n                     ))),\n-                    prop: MemberProp::Ident(\"defineProperty\".into()),\n+                    prop: MemberProp::Ident(rcstr!(\"defineProperty\")),\n                 }))), // Object.defineProperty(\n                 args: vec![\n                     ExprOrSpread {\n@@ -199,7 +199,7 @@ impl VisitMut for TransformVisitor {\n                         spread: None,\n                         expr: Box::new(Expr::Lit(Lit::Str(Str {\n                             span: new_error_expr.span,\n-                            value: \"__NEXT_ERROR_CODE\".into(),\n+                            value: rcstr!(\"__NEXT_ERROR_CODE\"),\n                             raw: None,\n                         }))), // \"__NEXT_ERROR_CODE\"\n                     },\n@@ -209,22 +209,22 @@ impl VisitMut for TransformVisitor {\n                             span: new_error_expr.span,\n                             props: vec![\n                                 PropOrSpread::Prop(Box::new(Prop::KeyValue(KeyValueProp {\n-                                    key: PropName::Ident(\"value\".into()),\n+                                    key: PropName::Ident(rcstr!(\"value\")),\n                                     value: Box::new(Expr::Lit(Lit::Str(Str {\n                                         span: new_error_expr.span,\n                                         value: code.into(),\n                                         raw: None,\n                                     }))),\n                                 }))),\n                                 PropOrSpread::Prop(Box::new(Prop::KeyValue(KeyValueProp {\n-                                    key: PropName::Ident(\"enumerable\".into()),\n+                                    key: PropName::Ident(rcstr!(\"enumerable\")),\n                                     value: Box::new(Expr::Lit(Lit::Bool(Bool {\n                                         span: new_error_expr.span,\n                                         value: false,\n                                     }))),\n                                 }))),\n                                 PropOrSpread::Prop(Box::new(Prop::KeyValue(KeyValueProp {\n-                                    key: PropName::Ident(\"configurable\".into()),\n+                                    key: PropName::Ident(rcstr!(\"configurable\")),\n                                     value: Box::new(Expr::Lit(Lit::Bool(Bool {\n                                         span: new_error_expr.span,\n                                         value: true,"
        },
        {
            "sha": "69ee5d44f7d87c3846a9d1a23a0b2cea828cf7d4",
            "filename": "turbopack/crates/turbo-tasks-fs/examples/hash_directory.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -10,7 +10,7 @@ use std::{\n \n use anyhow::Result;\n use sha2::{Digest, Sha256};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ReadConsistency, TurboTasks, UpdateInfo, Vc, util::FormatDuration};\n use turbo_tasks_backend::{BackendOptions, TurboTasksBackend, noop_backing_storage};\n use turbo_tasks_fs::{\n@@ -35,7 +35,7 @@ async fn main() -> Result<()> {\n     let task = tt.spawn_root_task(|| {\n         Box::pin(async {\n             let root = current_dir().unwrap().to_str().unwrap().into();\n-            let disk_fs = DiskFileSystem::new(\"project\".into(), root);\n+            let disk_fs = DiskFileSystem::new(rcstr!(\"project\"), root);\n             disk_fs.await?.start_watching(None).await?;\n \n             // Smart Pointer cast"
        },
        {
            "sha": "6db0c0498589a35bc94a8ff8f934ddfb28046fcb",
            "filename": "turbopack/crates/turbo-tasks-fs/examples/hash_glob.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_glob.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_glob.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_glob.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -10,7 +10,7 @@ use std::{\n \n use anyhow::Result;\n use sha2::{Digest, Sha256};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ReadConsistency, TurboTasks, UpdateInfo, Vc, util::FormatDuration};\n use turbo_tasks_backend::{BackendOptions, TurboTasksBackend, noop_backing_storage};\n use turbo_tasks_fs::{\n@@ -32,13 +32,13 @@ async fn main() -> Result<()> {\n     let task = tt.spawn_root_task(|| {\n         Box::pin(async {\n             let root = current_dir().unwrap().to_str().unwrap().into();\n-            let disk_fs = DiskFileSystem::new(\"project\".into(), root);\n+            let disk_fs = DiskFileSystem::new(rcstr!(\"project\"), root);\n             disk_fs.await?.start_watching(None).await?;\n \n             // Smart Pointer cast\n             let fs: Vc<Box<dyn FileSystem>> = Vc::upcast(disk_fs);\n             let input = fs.root().await?.join(\"crates\")?;\n-            let glob = Glob::new(\"**/*.rs\".into());\n+            let glob = Glob::new(rcstr!(\"**/*.rs\"));\n             let glob_result = input.read_glob(glob);\n             let dir_hash = hash_glob_result(glob_result);\n             print_hash(dir_hash).await?;"
        },
        {
            "sha": "a21cc8969cc1cf35d3be67d7f457b1c9abd6f4e3",
            "filename": "turbopack/crates/turbo-tasks-fs/src/glob.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fglob.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fglob.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fglob.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,7 +1,7 @@\n use anyhow::Result;\n use regex::bytes::{Regex, RegexBuilder};\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::Vc;\n \n use crate::globset::parse;\n@@ -100,7 +100,7 @@ impl Glob {\n     #[turbo_tasks::function]\n     pub async fn alternatives(globs: Vec<Vc<Glob>>) -> Result<Vc<Self>> {\n         match globs.len() {\n-            0 => Ok(Glob::new(\"\".into())),\n+            0 => Ok(Glob::new(rcstr!(\"\"))),\n             1 => Ok(globs.into_iter().next().unwrap()),\n             _ => {\n                 let mut new_glob = String::new();"
        },
        {
            "sha": "b8f942e4c8ae7e60ed9204e0164c5223585eb626",
            "filename": "turbopack/crates/turbo-tasks-fs/src/read_glob.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 15,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fread_glob.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fread_glob.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fread_glob.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -193,7 +193,7 @@ pub mod tests {\n         io::prelude::*,\n     };\n \n-    use turbo_rcstr::RcStr;\n+    use turbo_rcstr::{RcStr, rcstr};\n     use turbo_tasks::{Completion, ReadRef, Vc, apply_effects};\n     use turbo_tasks_backend::{BackendOptions, TurboTasksBackend, noop_backing_storage};\n \n@@ -224,11 +224,11 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(rcstr!(\"temp\"), path));\n             let read_dir = fs\n                 .root()\n                 .await?\n-                .read_glob(Glob::new(\"**\".into()))\n+                .read_glob(Glob::new(rcstr!(\"**\")))\n                 .await\n                 .unwrap();\n             assert_eq!(read_dir.results.len(), 2);\n@@ -253,7 +253,7 @@ pub mod tests {\n             let read_dir = fs\n                 .root()\n                 .await?\n-                .read_glob(Glob::new(\"**/bar\".into()))\n+                .read_glob(Glob::new(rcstr!(\"**/bar\")))\n                 .await\n                 .unwrap();\n             assert_eq!(read_dir.results.len(), 0);\n@@ -294,11 +294,11 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(rcstr!(\"temp\"), path));\n             let read_dir = fs\n                 .root()\n                 .await?\n-                .read_glob(Glob::new(\"*.js\".into()))\n+                .read_glob(Glob::new(rcstr!(\"*.js\")))\n                 .await\n                 .unwrap();\n             assert_eq!(read_dir.results.len(), 1);\n@@ -331,7 +331,7 @@ pub mod tests {\n \n     #[turbo_tasks::function(operation)]\n     pub fn track_star_star_glob(path: FileSystemPath) -> Vc<Completion> {\n-        path.track_glob(Glob::new(\"**\".into()), false)\n+        path.track_glob(Glob::new(rcstr!(\"**\")), false)\n     }\n \n     #[cfg(unix)]\n@@ -375,7 +375,7 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(rcstr!(\"temp\"), path));\n             let dir = fs.root().await?.join(\"dir\")?;\n             let read_dir = track_star_star_glob(dir.clone())\n                 .read_strongly_consistent()\n@@ -405,7 +405,7 @@ pub mod tests {\n             // Modify a symlink target file\n             let write_result = write(\n                 fs.root().await?.join(\"link_target.js\")?,\n-                \"new_contents\".into(),\n+                rcstr!(\"new_contents\"),\n             );\n             write_result.read_strongly_consistent().await?;\n             apply_effects(write_result).await?;\n@@ -445,11 +445,13 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n+            use turbo_rcstr::rcstr;\n+\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(rcstr!(\"temp\"), path));\n             let err = fs\n                 .root()\n                 .await?\n-                .track_glob(Glob::new(\"**\".into()), false)\n+                .track_glob(Glob::new(rcstr!(\"**\")), false)\n                 .await\n                 .expect_err(\"Should have detected an infinite loop\");\n \n@@ -462,7 +464,7 @@ pub mod tests {\n             let err = fs\n                 .root()\n                 .await?\n-                .track_glob(Glob::new(\"**\".into()), false)\n+                .track_glob(Glob::new(rcstr!(\"**\")), false)\n                 .await\n                 .expect_err(\"Should have detected an infinite loop\");\n \n@@ -501,11 +503,11 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(rcstr!(\"temp\"), path));\n             let err = fs\n                 .root()\n                 .await?\n-                .read_glob(Glob::new(\"**\".into()))\n+                .read_glob(Glob::new(rcstr!(\"**\")))\n                 .await\n                 .expect_err(\"Should have detected an infinite loop\");\n \n@@ -518,7 +520,7 @@ pub mod tests {\n             let err = fs\n                 .root()\n                 .await?\n-                .track_glob(Glob::new(\"**\".into()), false)\n+                .track_glob(Glob::new(rcstr!(\"**\")), false)\n                 .await\n                 .expect_err(\"Should have detected an infinite loop\");\n "
        },
        {
            "sha": "631266126bd45a97d6cc813d8ac304e9be553665",
            "filename": "turbopack/crates/turbo-tasks-fs/src/virtual_fs.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fvirtual_fs.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fvirtual_fs.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fvirtual_fs.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::{Result, bail};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ValueDefault, ValueToString, Vc};\n \n use super::{FileContent, FileMeta, FileSystem, FileSystemPath, LinkContent};\n@@ -21,7 +21,7 @@ impl VirtualFileSystem {\n     /// [`Vc<VirtualFileSystem>`].\n     pub fn new() -> Vc<Self> {\n         Self::cell(VirtualFileSystem {\n-            name: \"virtual file system\".into(),\n+            name: rcstr!(\"virtual file system\"),\n         })\n     }\n "
        },
        {
            "sha": "1a6c933deff708a2a09ffb0fdcaf61e39e8d6011",
            "filename": "turbopack/crates/turbopack-cli/src/contexts.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fcontexts.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fcontexts.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fcontexts.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -44,23 +44,23 @@ impl fmt::Display for NodeEnv {\n     }\n }\n \n-async fn foreign_code_context_condition() -> Result<ContextCondition> {\n-    Ok(ContextCondition::InDirectory(\"node_modules\".to_string()))\n+fn foreign_code_context_condition() -> ContextCondition {\n+    ContextCondition::InDirectory(\"node_modules\".to_string())\n }\n \n #[turbo_tasks::function]\n pub async fn get_client_import_map(project_path: FileSystemPath) -> Result<Vc<ImportMap>> {\n     let mut import_map = ImportMap::empty();\n \n-    import_map.insert_singleton_alias(\"@swc/helpers\", project_path.clone());\n-    import_map.insert_singleton_alias(\"styled-jsx\", project_path.clone());\n-    import_map.insert_singleton_alias(\"react\", project_path.clone());\n-    import_map.insert_singleton_alias(\"react-dom\", project_path.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"@swc/helpers\"), project_path.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"styled-jsx\"), project_path.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"react\"), project_path.clone());\n+    import_map.insert_singleton_alias(rcstr!(\"react-dom\"), project_path.clone());\n \n     import_map.insert_wildcard_alias(\n-        \"@vercel/turbopack-ecmascript-runtime/\",\n+        rcstr!(\"@vercel/turbopack-ecmascript-runtime/\"),\n         ImportMapping::PrimaryAlternative(\n-            \"./*\".into(),\n+            rcstr!(\"./*\"),\n             Some(\n                 turbopack_ecmascript_runtime::embed_fs()\n                     .root()\n@@ -84,7 +84,7 @@ pub async fn get_client_resolve_options_context(\n         .await?;\n     let module_options_context = ResolveOptionsContext {\n         enable_node_modules: Some(project_path.root().owned().await?),\n-        custom_conditions: vec![node_env.await?.to_string().into(), \"browser\".into()],\n+        custom_conditions: vec![node_env.await?.to_string().into(), rcstr!(\"browser\")],\n         import_map: Some(next_client_import_map),\n         browser: true,\n         module: true,\n@@ -94,7 +94,7 @@ pub async fn get_client_resolve_options_context(\n         enable_typescript: true,\n         enable_react: true,\n         rules: vec![(\n-            foreign_code_context_condition().await?,\n+            foreign_code_context_condition(),\n             module_options_context.clone().resolved_cell(),\n         )],\n         ..module_options_context\n@@ -161,7 +161,7 @@ async fn get_client_module_options_context(\n         },\n         enable_postcss_transform: Some(PostCssTransformOptions::default().resolved_cell()),\n         rules: vec![(\n-            foreign_code_context_condition().await?,\n+            foreign_code_context_condition(),\n             module_options_context.clone().resolved_cell(),\n         )],\n         module_rules: vec![module_rules],"
        },
        {
            "sha": "5fc8739a2404af1b87d45f7a549f6ee3c8e8aa6f",
            "filename": "turbopack/crates/turbopack-cli/src/util.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Futil.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -3,7 +3,7 @@ use std::{env::current_dir, path::PathBuf};\n use anyhow::{Context, Result};\n use dunce::canonicalize;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{NonLocalValue, TaskInput, Vc, trace::TraceRawVcs};\n use turbo_tasks_fs::{DiskFileSystem, FileSystem};\n \n@@ -56,12 +56,12 @@ pub fn normalize_entries(entries: &Option<Vec<String>>) -> Vec<RcStr> {\n     entries\n         .as_ref()\n         .map(|v| v.iter().map(|v| RcStr::from(&**v)).collect())\n-        .unwrap_or_else(|| vec![\"src/entry\".into()])\n+        .unwrap_or_else(|| vec![rcstr!(\"src/entry\")])\n }\n \n #[turbo_tasks::function]\n pub async fn project_fs(project_dir: RcStr, watch: bool) -> Result<Vc<Box<dyn FileSystem>>> {\n-    let disk_fs = DiskFileSystem::new(\"project\".into(), project_dir);\n+    let disk_fs = DiskFileSystem::new(rcstr!(\"project\"), project_dir);\n     if watch {\n         disk_fs.await?.start_watching(None).await?;\n     }\n@@ -70,6 +70,6 @@ pub async fn project_fs(project_dir: RcStr, watch: bool) -> Result<Vc<Box<dyn Fi\n \n #[turbo_tasks::function]\n pub fn output_fs(project_dir: RcStr) -> Result<Vc<Box<dyn FileSystem>>> {\n-    let disk_fs = DiskFileSystem::new(\"output\".into(), project_dir);\n+    let disk_fs = DiskFileSystem::new(rcstr!(\"output\"), project_dir);\n     Ok(Vc::upcast(disk_fs))\n }"
        },
        {
            "sha": "85a8f2afb7a88f91cc8318ec0d54a28f52e58022",
            "filename": "turbopack/crates/turbopack-core/src/chunk/chunk_group.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunk_group.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunk_group.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunk_group.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -3,6 +3,7 @@ use std::{collections::HashSet, sync::atomic::AtomicBool};\n use anyhow::{Context, Result};\n use rustc_hash::FxHashMap;\n use smallvec::{SmallVec, smallvec};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{FxIndexSet, ResolvedVc, TryFlatJoinIterExt, TryJoinIterExt, Vc};\n \n use super::{\n@@ -150,7 +151,7 @@ pub async fn make_chunk_group(\n         chunking_context,\n         chunk_items,\n         chunk_item_batch_groups,\n-        \"\".into(),\n+        rcstr!(\"\"),\n         ResolvedVc::cell(referenced_output_assets),\n     )\n     .await?;"
        },
        {
            "sha": "e0a9cc21a21b8003cad6870b7b757db007d4b0fb",
            "filename": "turbopack/crates/turbopack-core/src/chunk/chunking/style_production.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking%2Fstyle_production.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking%2Fstyle_production.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking%2Fstyle_production.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,6 +1,7 @@\n use anyhow::Result;\n use rustc_hash::FxHashSet;\n use tracing::Instrument;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n \n use crate::{\n@@ -49,7 +50,7 @@ pub async fn make_style_production_chunks(\n                     vec![&ChunkItemOrBatchWithInfo::ChunkItem {\n                         chunk_item: chunk_item.clone(),\n                         size: 0,\n-                        asset_ident: \"\".into(),\n+                        asset_ident: rcstr!(\"\"),\n                     }],\n                     vec![],\n                     &mut String::new(),"
        },
        {
            "sha": "e7f5131e7ce2a5aa93624d17ba0ede4c6b9690f0",
            "filename": "turbopack/crates/turbopack-core/src/compile_time_info.rs",
            "status": "modified",
            "additions": 40,
            "deletions": 15,
            "changes": 55,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fcompile_time_info.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fcompile_time_info.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fcompile_time_info.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -236,6 +236,11 @@ impl From<String> for FreeVarReference {\n         Self::Value(value.into())\n     }\n }\n+impl From<RcStr> for FreeVarReference {\n+    fn from(value: RcStr) -> Self {\n+        Self::Value(value.into())\n+    }\n+}\n \n impl From<&str> for FreeVarReference {\n     fn from(value: &str) -> Self {\n@@ -366,6 +371,7 @@ impl CompileTimeInfoBuilder {\n \n #[cfg(test)]\n mod test {\n+    use turbo_rcstr::rcstr;\n     use turbo_tasks::FxIndexMap;\n \n     use crate::compile_time_info::{DefinableNameSegment, FreeVarReference, FreeVarReferences};\n@@ -377,20 +383,26 @@ mod test {\n                 FOO = \"bar\",\n                 FOO = false,\n                 Buffer = FreeVarReference::EcmaScriptModule {\n-                    request: \"node:buffer\".into(),\n+                    request: rcstr!(\"node:buffer\"),\n                     lookup_path: None,\n-                    export: Some(\"Buffer\".into()),\n+                    export: Some(rcstr!(\"Buffer\")),\n                 },\n             ),\n             FreeVarReferences(FxIndexMap::from_iter(vec![\n-                (vec![\"FOO\".into()], FreeVarReference::Value(\"bar\".into())),\n-                (vec![\"FOO\".into()], FreeVarReference::Value(false.into())),\n                 (\n-                    vec![\"Buffer\".into()],\n+                    vec![rcstr!(\"FOO\").into()],\n+                    FreeVarReference::Value(rcstr!(\"bar\").into())\n+                ),\n+                (\n+                    vec![rcstr!(\"FOO\").into()],\n+                    FreeVarReference::Value(false.into())\n+                ),\n+                (\n+                    vec![rcstr!(\"Buffer\").into()],\n                     FreeVarReference::EcmaScriptModule {\n-                        request: \"node:buffer\".into(),\n+                        request: rcstr!(\"node:buffer\"),\n                         lookup_path: None,\n-                        export: Some(\"Buffer\".into()),\n+                        export: Some(rcstr!(\"Buffer\")),\n                     }\n                 ),\n             ]))\n@@ -407,21 +419,34 @@ mod test {\n             ),\n             FreeVarReferences(FxIndexMap::from_iter(vec![\n                 (\n-                    vec![\"x\".into(), DefinableNameSegment::TypeOf],\n-                    FreeVarReference::Value(\"a\".into())\n+                    vec![rcstr!(\"x\").into(), DefinableNameSegment::TypeOf],\n+                    FreeVarReference::Value(rcstr!(\"a\").into())\n                 ),\n                 (\n-                    vec![\"x\".into(), \"y\".into(), DefinableNameSegment::TypeOf],\n-                    FreeVarReference::Value(\"b\".into())\n+                    vec![\n+                        rcstr!(\"x\").into(),\n+                        rcstr!(\"y\").into(),\n+                        DefinableNameSegment::TypeOf\n+                    ],\n+                    FreeVarReference::Value(rcstr!(\"b\").into())\n+                ),\n+                (\n+                    vec![\n+                        rcstr!(\"x\").into(),\n+                        rcstr!(\"y\").into(),\n+                        rcstr!(\"z\").into(),\n+                        DefinableNameSegment::TypeOf\n+                    ],\n+                    FreeVarReference::Value(rcstr!(\"b\").into())\n                 ),\n                 (\n                     vec![\n-                        \"x\".into(),\n-                        \"y\".into(),\n-                        \"z\".into(),\n+                        rcstr!(\"x\").into(),\n+                        rcstr!(\"y\").into(),\n+                        rcstr!(\"z\").into(),\n                         DefinableNameSegment::TypeOf\n                     ],\n-                    FreeVarReference::Value(\"c\".into())\n+                    FreeVarReference::Value(rcstr!(\"c\").into())\n                 )\n             ]))\n         );"
        },
        {
            "sha": "05c3229d70e8d4c53c599cf2dee3f17f3879c9c2",
            "filename": "turbopack/crates/turbopack-core/src/environment.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -112,7 +112,7 @@ impl Environment {\n             // browserslist correctly because CSS Modules in client components is double-processed,\n             // once for server once for browser.\n             {\n-                Vc::cell(\"\".into())\n+                Vc::cell(rcstr!(\"\"))\n             }\n             ExecutionEnvironment::Browser(browser_env) => {\n                 Vc::cell(browser_env.await?.browserslist_query.clone())"
        },
        {
            "sha": "78ca967a17efef068f22fa5e39a354bd270c8f97",
            "filename": "turbopack/crates/turbopack-core/src/issue/analyze.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fanalyze.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fanalyze.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fanalyze.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n@@ -47,15 +47,15 @@ impl Issue for AnalyzeIssue {\n \n     #[turbo_tasks::function]\n     async fn title(&self) -> Result<Vc<StyledString>> {\n-        let title = &**self.title.await?;\n+        let title = &*self.title.await?;\n         Ok(if let Some(code) = self.code.as_ref() {\n             StyledString::Line(vec![\n                 StyledString::Strong(code.clone()),\n-                StyledString::Text(\" \".into()),\n-                StyledString::Text(title.into()),\n+                StyledString::Text(rcstr!(\" \")),\n+                StyledString::Text(title.clone()),\n             ])\n         } else {\n-            StyledString::Text(title.into())\n+            StyledString::Text(title.clone())\n         }\n         .cell())\n     }"
        },
        {
            "sha": "edb1bb1344c18d7dc884ba1f6753a5f44f8a6a3d",
            "filename": "turbopack/crates/turbopack-core/src/issue/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmod.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -785,7 +785,7 @@ pub enum IssueStage {\n     CodeGen,\n     Unsupported,\n     Misc,\n-    Other(String),\n+    Other(RcStr),\n }\n \n impl Display for IssueStage {"
        },
        {
            "sha": "edae39a5a7d34eb50a677a7d87b2d493e519d43d",
            "filename": "turbopack/crates/turbopack-core/src/issue/module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmodule.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n@@ -50,7 +51,7 @@ impl Issue for ModuleIssue {\n pub async fn emit_unknown_module_type_error(source: Vc<Box<dyn Source>>) -> Result<()> {\n     ModuleIssue {\n         ident: source.ident().to_resolved().await?,\n-        title: StyledString::Text(\"Unknown module type\".into()).resolved_cell(),\n+        title: StyledString::Text(rcstr!(\"Unknown module type\")).resolved_cell(),\n         description: StyledString::Text(\n             r\"This module doesn't have an associated type. Use a known file extension, or register a loader for it.\n "
        },
        {
            "sha": "0d60dda69c7dffc807b297f719fd165abf7137a5",
            "filename": "turbopack/crates/turbopack-core/src/issue/resolve.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fresolve.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,7 +1,7 @@\n use std::fmt::Write;\n \n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ReadRef, ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n@@ -36,8 +36,8 @@ impl Issue for ResolvingIssue {\n     async fn title(&self) -> Result<Vc<StyledString>> {\n         let request = self.request.request_pattern().to_string().owned().await?;\n         Ok(StyledString::Line(vec![\n-            StyledString::Strong(\"Module not found\".into()),\n-            StyledString::Text(\": Can't resolve \".into()),\n+            StyledString::Strong(rcstr!(\"Module not found\")),\n+            StyledString::Text(rcstr!(\": Can't resolve \")),\n             StyledString::Code(request),\n         ])\n         .cell())"
        },
        {
            "sha": "9af256ac66ed5333e3feeec6a2ffe03b365e0269",
            "filename": "turbopack/crates/turbopack-core/src/resolve/alias_map.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 9,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Falias_map.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Falias_map.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Falias_map.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -702,6 +702,8 @@ pub trait AliasTemplate {\n mod test {\n     use std::assert_matches::assert_matches;\n \n+    use turbo_rcstr::rcstr;\n+\n     use super::{AliasMap, AliasPattern, AliasTemplate};\n     use crate::resolve::pattern::Pattern;\n \n@@ -916,37 +918,37 @@ mod test {\n \n         assert_eq!(\n             map.lookup(&Pattern::Concatenation(vec![\n-                Pattern::Constant(\"card/\".into()),\n+                Pattern::Constant(rcstr!(\"card/\")),\n                 Pattern::Dynamic\n             ]))\n             .collect::<Vec<_>>(),\n             vec![super::AliasMatch::Replaced(Pattern::Concatenation(vec![\n-                Pattern::Constant(\"src/cards/\".into()),\n+                Pattern::Constant(rcstr!(\"src/cards/\")),\n                 Pattern::Dynamic\n             ]))]\n         );\n         assert_eq!(\n             map.lookup(&Pattern::Concatenation(vec![\n-                Pattern::Constant(\"comp/\".into()),\n+                Pattern::Constant(rcstr!(\"comp/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\"/x\".into()),\n+                Pattern::Constant(rcstr!(\"/x\")),\n             ]))\n             .collect::<Vec<_>>(),\n             vec![super::AliasMatch::Replaced(Pattern::Concatenation(vec![\n-                Pattern::Constant(\"src/comps/\".into()),\n+                Pattern::Constant(rcstr!(\"src/comps/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\"/x\".into()),\n+                Pattern::Constant(rcstr!(\"/x\")),\n             ]))]\n         );\n         assert_eq!(\n             map.lookup(&Pattern::Concatenation(vec![\n-                Pattern::Constant(\"head/\".into()),\n+                Pattern::Constant(rcstr!(\"head/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\"/x\".into()),\n+                Pattern::Constant(rcstr!(\"/x\")),\n             ]))\n             .collect::<Vec<_>>(),\n             vec![super::AliasMatch::Replaced(Pattern::Concatenation(vec![\n-                Pattern::Constant(\"src/heads/\".into()),\n+                Pattern::Constant(rcstr!(\"src/heads/\")),\n                 Pattern::Dynamic,\n             ]))]\n         );"
        },
        {
            "sha": "07591210c5c8da3189829116777664aee2cef458",
            "filename": "turbopack/crates/turbopack-core/src/resolve/node.rs",
            "status": "modified",
            "additions": 13,
            "deletions": 12,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fnode.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fnode.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fnode.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,3 +1,4 @@\n+use turbo_rcstr::rcstr;\n use turbo_tasks::Vc;\n use turbo_tasks_fs::FileSystemPath;\n \n@@ -9,28 +10,28 @@ use super::options::{\n #[turbo_tasks::function]\n pub fn node_cjs_resolve_options(root: FileSystemPath) -> Vc<ResolveOptions> {\n     let conditions: ResolutionConditions = [\n-        (\"node\".into(), ConditionValue::Set),\n-        (\"require\".into(), ConditionValue::Set),\n+        (rcstr!(\"node\"), ConditionValue::Set),\n+        (rcstr!(\"require\"), ConditionValue::Set),\n     ]\n     .into();\n-    let extensions = vec![\".js\".into(), \".json\".into(), \".node\".into()];\n+    let extensions = vec![rcstr!(\".js\"), rcstr!(\".json\"), rcstr!(\".node\")];\n     ResolveOptions {\n         extensions,\n-        modules: vec![ResolveModules::Nested(root, vec![\"node_modules\".into()])],\n+        modules: vec![ResolveModules::Nested(root, vec![rcstr!(\"node_modules\")])],\n         into_package: vec![\n             ResolveIntoPackage::ExportsField {\n                 conditions: conditions.clone(),\n                 unspecified_conditions: ConditionValue::Unset,\n             },\n             ResolveIntoPackage::MainField {\n-                field: \"main\".into(),\n+                field: rcstr!(\"main\"),\n             },\n         ],\n         in_package: vec![ResolveInPackage::ImportsField {\n             conditions,\n             unspecified_conditions: ConditionValue::Unset,\n         }],\n-        default_files: vec![\"index\".into()],\n+        default_files: vec![rcstr!(\"index\")],\n         ..Default::default()\n     }\n     .cell()\n@@ -39,29 +40,29 @@ pub fn node_cjs_resolve_options(root: FileSystemPath) -> Vc<ResolveOptions> {\n #[turbo_tasks::function]\n pub fn node_esm_resolve_options(root: FileSystemPath) -> Vc<ResolveOptions> {\n     let conditions: ResolutionConditions = [\n-        (\"node\".into(), ConditionValue::Set),\n-        (\"import\".into(), ConditionValue::Set),\n+        (rcstr!(\"node\"), ConditionValue::Set),\n+        (rcstr!(\"import\"), ConditionValue::Set),\n     ]\n     .into();\n-    let extensions = vec![\".js\".into(), \".json\".into(), \".node\".into()];\n+    let extensions = vec![rcstr!(\".js\"), rcstr!(\".json\"), rcstr!(\".node\")];\n     ResolveOptions {\n         fully_specified: true,\n         extensions,\n-        modules: vec![ResolveModules::Nested(root, vec![\"node_modules\".into()])],\n+        modules: vec![ResolveModules::Nested(root, vec![rcstr!(\"node_modules\")])],\n         into_package: vec![\n             ResolveIntoPackage::ExportsField {\n                 conditions: conditions.clone(),\n                 unspecified_conditions: ConditionValue::Unset,\n             },\n             ResolveIntoPackage::MainField {\n-                field: \"main\".into(),\n+                field: rcstr!(\"main\"),\n             },\n         ],\n         in_package: vec![ResolveInPackage::ImportsField {\n             conditions,\n             unspecified_conditions: ConditionValue::Unset,\n         }],\n-        default_files: vec![\"index\".into()],\n+        default_files: vec![rcstr!(\"index\")],\n         ..Default::default()\n     }\n     .cell()"
        },
        {
            "sha": "7da2268386372db3df488a1e340ad404c291a4bb",
            "filename": "turbopack/crates/turbopack-core/src/resolve/options.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -335,7 +335,8 @@ impl ImportMap {\n         prefix: impl Into<RcStr> + 'a,\n         mapping: ResolvedVc<ImportMapping>,\n     ) {\n-        self.map.insert(AliasPattern::wildcard(prefix, \"\"), mapping);\n+        self.map\n+            .insert(AliasPattern::wildcard(prefix, rcstr!(\"\")), mapping);\n     }\n \n     /// Inserts a wildcard alias with suffix into the import map."
        },
        {
            "sha": "2867c7e3b7388380f84e73a84af149560098cda0",
            "filename": "turbopack/crates/turbopack-core/src/resolve/pattern.rs",
            "status": "modified",
            "additions": 133,
            "deletions": 133,
            "changes": 266,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fpattern.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fpattern.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fpattern.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -233,7 +233,7 @@ impl Pattern {\n                 Pattern::Constant(c) => {\n                     let c_len = c.len();\n                     if *chars_to_strip >= c_len {\n-                        *c = \"\".into();\n+                        *c = rcstr!(\"\");\n                     } else {\n                         *c = (&c[*chars_to_strip..]).into();\n                     }\n@@ -282,7 +282,7 @@ impl Pattern {\n                 Pattern::Constant(c) => {\n                     let c_len = c.len();\n                     if *chars_to_strip >= c_len {\n-                        *c = \"\".into();\n+                        *c = rcstr!(\"\");\n                     } else {\n                         *c = (&c[..(c_len - *chars_to_strip)]).into();\n                     }\n@@ -1736,7 +1736,7 @@ fn split_last_segment(path: &str) -> (&str, &str) {\n #[cfg(test)]\n mod tests {\n     use rstest::*;\n-    use turbo_rcstr::RcStr;\n+    use turbo_rcstr::{RcStr, rcstr};\n \n     use super::{Pattern, longest_common_prefix, longest_common_suffix, split_last_segment};\n \n@@ -1760,10 +1760,10 @@ mod tests {\n \n     #[test]\n     fn normalize() {\n-        let a = Pattern::Constant(\"a\".into());\n-        let b = Pattern::Constant(\"b\".into());\n-        let c = Pattern::Constant(\"c\".into());\n-        let s = Pattern::Constant(\"/\".into());\n+        let a = Pattern::Constant(rcstr!(\"a\"));\n+        let b = Pattern::Constant(rcstr!(\"b\"));\n+        let c = Pattern::Constant(rcstr!(\"c\"));\n+        let s = Pattern::Constant(rcstr!(\"/\"));\n         let d = Pattern::Dynamic;\n         {\n             let mut p = Pattern::Concatenation(vec![\n@@ -1775,8 +1775,8 @@ mod tests {\n             assert_eq!(\n                 p,\n                 Pattern::Alternatives(vec![\n-                    Pattern::Constant(\"a/c\".into()),\n-                    Pattern::Constant(\"b/c\".into()),\n+                    Pattern::Constant(rcstr!(\"a/c\")),\n+                    Pattern::Constant(rcstr!(\"b/c\")),\n                 ])\n             );\n         }\n@@ -1793,17 +1793,17 @@ mod tests {\n             assert_eq!(\n                 p,\n                 Pattern::Alternatives(vec![\n-                    Pattern::Constant(\"a/b\".into()),\n-                    Pattern::Constant(\"b/b\".into()),\n-                    Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(\"/b\".into())]),\n-                    Pattern::Constant(\"a/c\".into()),\n-                    Pattern::Constant(\"b/c\".into()),\n-                    Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(\"/c\".into())]),\n-                    Pattern::Concatenation(vec![Pattern::Constant(\"a/\".into()), Pattern::Dynamic]),\n-                    Pattern::Concatenation(vec![Pattern::Constant(\"b/\".into()), Pattern::Dynamic]),\n+                    Pattern::Constant(rcstr!(\"a/b\")),\n+                    Pattern::Constant(rcstr!(\"b/b\")),\n+                    Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(rcstr!(\"/b\"))]),\n+                    Pattern::Constant(rcstr!(\"a/c\")),\n+                    Pattern::Constant(rcstr!(\"b/c\")),\n+                    Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(rcstr!(\"/c\"))]),\n+                    Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"a/\")), Pattern::Dynamic]),\n+                    Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"b/\")), Pattern::Dynamic]),\n                     Pattern::Concatenation(vec![\n                         Pattern::Dynamic,\n-                        Pattern::Constant(\"/\".into()),\n+                        Pattern::Constant(rcstr!(\"/\")),\n                         Pattern::Dynamic\n                     ]),\n                 ])\n@@ -1830,61 +1830,61 @@ mod tests {\n     #[test]\n     fn with_normalized_path() {\n         assert!(\n-            Pattern::Constant(\"a/../..\".into())\n+            Pattern::Constant(rcstr!(\"a/../..\"))\n                 .with_normalized_path()\n                 .is_none()\n         );\n         assert_eq!(\n-            Pattern::Constant(\"a/b/../c\".into())\n+            Pattern::Constant(rcstr!(\"a/b/../c\"))\n                 .with_normalized_path()\n                 .unwrap(),\n-            Pattern::Constant(\"a/c\".into())\n+            Pattern::Constant(rcstr!(\"a/c\"))\n         );\n         assert_eq!(\n             Pattern::Alternatives(vec![\n-                Pattern::Constant(\"a/b/../c\".into()),\n-                Pattern::Constant(\"a/b/../c/d\".into())\n+                Pattern::Constant(rcstr!(\"a/b/../c\")),\n+                Pattern::Constant(rcstr!(\"a/b/../c/d\"))\n             ])\n             .with_normalized_path()\n             .unwrap(),\n             Pattern::Alternatives(vec![\n-                Pattern::Constant(\"a/c\".into()),\n-                Pattern::Constant(\"a/c/d\".into())\n+                Pattern::Constant(rcstr!(\"a/c\")),\n+                Pattern::Constant(rcstr!(\"a/c/d\"))\n             ])\n         );\n \n         // Dynamic is a segment itself\n         assert_eq!(\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\"a/b/\".into()),\n+                Pattern::Constant(rcstr!(\"a/b/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\"../c\".into())\n+                Pattern::Constant(rcstr!(\"../c\"))\n             ])\n             .with_normalized_path()\n             .unwrap(),\n-            Pattern::Constant(\"a/b/c\".into())\n+            Pattern::Constant(rcstr!(\"a/b/c\"))\n         );\n \n         // Dynamic is only part of the second segment\n         assert_eq!(\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\"a/b\".into()),\n+                Pattern::Constant(rcstr!(\"a/b\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\"../c\".into())\n+                Pattern::Constant(rcstr!(\"../c\"))\n             ])\n             .with_normalized_path()\n             .unwrap(),\n-            Pattern::Constant(\"a/c\".into())\n+            Pattern::Constant(rcstr!(\"a/c\"))\n         );\n     }\n \n     #[test]\n     fn is_match() {\n         let pat = Pattern::Concatenation(vec![\n-            Pattern::Constant(\".\".into()),\n-            Pattern::Constant(\"/\".into()),\n+            Pattern::Constant(rcstr!(\".\")),\n+            Pattern::Constant(rcstr!(\"/\")),\n             Pattern::Dynamic,\n-            Pattern::Constant(\".js\".into()),\n+            Pattern::Constant(rcstr!(\".js\")),\n         ]);\n         assert!(pat.could_match(\"\"));\n         assert!(pat.could_match(\"./\"));\n@@ -1910,32 +1910,32 @@ mod tests {\n     #[test]\n     fn constant_prefix() {\n         assert_eq!(\n-            Pattern::Constant(\"a/b/c.js\".into()).constant_prefix(),\n+            Pattern::Constant(rcstr!(\"a/b/c.js\")).constant_prefix(),\n             \"a/b/c.js\",\n         );\n \n         let pat = Pattern::Alternatives(vec![\n-            Pattern::Constant(\"a/b/x\".into()),\n-            Pattern::Constant(\"a/b/y\".into()),\n-            Pattern::Concatenation(vec![Pattern::Constant(\"a/b/c/\".into()), Pattern::Dynamic]),\n+            Pattern::Constant(rcstr!(\"a/b/x\")),\n+            Pattern::Constant(rcstr!(\"a/b/y\")),\n+            Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"a/b/c/\")), Pattern::Dynamic]),\n         ]);\n         assert_eq!(pat.constant_prefix(), \"a/b/\");\n     }\n \n     #[test]\n     fn constant_suffix() {\n         assert_eq!(\n-            Pattern::Constant(\"a/b/c.js\".into()).constant_suffix(),\n+            Pattern::Constant(rcstr!(\"a/b/c.js\")).constant_suffix(),\n             \"a/b/c.js\",\n         );\n \n         let pat = Pattern::Alternatives(vec![\n-            Pattern::Constant(\"a/b/x.js\".into()),\n-            Pattern::Constant(\"a/b/y.js\".into()),\n+            Pattern::Constant(rcstr!(\"a/b/x.js\")),\n+            Pattern::Constant(rcstr!(\"a/b/y.js\")),\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\"a/b/c/\".into()),\n+                Pattern::Constant(rcstr!(\"a/b/c/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\".js\".into()),\n+                Pattern::Constant(rcstr!(\".js\")),\n             ]),\n         ]);\n         assert_eq!(pat.constant_suffix(), \".js\");\n@@ -1949,36 +1949,36 @@ mod tests {\n         }\n \n         assert_eq!(\n-            strip(Pattern::Constant(\"a/b\".into()), 0),\n-            Pattern::Constant(\"a/b\".into())\n+            strip(Pattern::Constant(rcstr!(\"a/b\")), 0),\n+            Pattern::Constant(rcstr!(\"a/b\"))\n         );\n \n         assert_eq!(\n             strip(\n                 Pattern::Alternatives(vec![\n-                    Pattern::Constant(\"a/b/x\".into()),\n-                    Pattern::Constant(\"a/b/y\".into()),\n+                    Pattern::Constant(rcstr!(\"a/b/x\")),\n+                    Pattern::Constant(rcstr!(\"a/b/y\")),\n                 ]),\n                 2\n             ),\n             Pattern::Alternatives(vec![\n-                Pattern::Constant(\"b/x\".into()),\n-                Pattern::Constant(\"b/y\".into()),\n+                Pattern::Constant(rcstr!(\"b/x\")),\n+                Pattern::Constant(rcstr!(\"b/y\")),\n             ])\n         );\n \n         assert_eq!(\n             strip(\n                 Pattern::Concatenation(vec![\n-                    Pattern::Constant(\"a/\".into()),\n-                    Pattern::Constant(\"b\".into()),\n-                    Pattern::Constant(\"/\".into()),\n-                    Pattern::Constant(\"y/\".into()),\n+                    Pattern::Constant(rcstr!(\"a/\")),\n+                    Pattern::Constant(rcstr!(\"b\")),\n+                    Pattern::Constant(rcstr!(\"/\")),\n+                    Pattern::Constant(rcstr!(\"y/\")),\n                     Pattern::Dynamic\n                 ]),\n                 4\n             ),\n-            Pattern::Concatenation(vec![Pattern::Constant(\"y/\".into()), Pattern::Dynamic]),\n+            Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"y/\")), Pattern::Dynamic]),\n         );\n     }\n \n@@ -1990,87 +1990,87 @@ mod tests {\n         }\n \n         assert_eq!(\n-            strip(Pattern::Constant(\"a/b\".into()), 0),\n-            Pattern::Constant(\"a/b\".into())\n+            strip(Pattern::Constant(rcstr!(\"a/b\")), 0),\n+            Pattern::Constant(rcstr!(\"a/b\"))\n         );\n \n         assert_eq!(\n             strip(\n                 Pattern::Alternatives(vec![\n-                    Pattern::Constant(\"x/b/a\".into()),\n-                    Pattern::Constant(\"y/b/a\".into()),\n+                    Pattern::Constant(rcstr!(\"x/b/a\")),\n+                    Pattern::Constant(rcstr!(\"y/b/a\")),\n                 ]),\n                 2\n             ),\n             Pattern::Alternatives(vec![\n-                Pattern::Constant(\"x/b\".into()),\n-                Pattern::Constant(\"y/b\".into()),\n+                Pattern::Constant(rcstr!(\"x/b\")),\n+                Pattern::Constant(rcstr!(\"y/b\")),\n             ])\n         );\n \n         assert_eq!(\n             strip(\n                 Pattern::Concatenation(vec![\n                     Pattern::Dynamic,\n-                    Pattern::Constant(\"/a/\".into()),\n-                    Pattern::Constant(\"b\".into()),\n-                    Pattern::Constant(\"/\".into()),\n-                    Pattern::Constant(\"y/\".into()),\n+                    Pattern::Constant(rcstr!(\"/a/\")),\n+                    Pattern::Constant(rcstr!(\"b\")),\n+                    Pattern::Constant(rcstr!(\"/\")),\n+                    Pattern::Constant(rcstr!(\"y/\")),\n                 ]),\n                 4\n             ),\n-            Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(\"/a/\".into()),]),\n+            Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(rcstr!(\"/a/\")),]),\n         );\n     }\n \n     #[test]\n     fn spread_into_star() {\n-        let pat = Pattern::Constant(\"xyz\".into());\n+        let pat = Pattern::Constant(rcstr!(\"xyz\"));\n         assert_eq!(\n             pat.spread_into_star(\"before/after\"),\n-            Pattern::Constant(\"before/after\".into()),\n+            Pattern::Constant(rcstr!(\"before/after\")),\n         );\n \n         let pat =\n-            Pattern::Concatenation(vec![Pattern::Constant(\"a/b/c/\".into()), Pattern::Dynamic]);\n+            Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"a/b/c/\")), Pattern::Dynamic]);\n         assert_eq!(\n             pat.spread_into_star(\"before/*/after\"),\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\"before/a/b/c/\".into()),\n+                Pattern::Constant(rcstr!(\"before/a/b/c/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\"/after\".into())\n+                Pattern::Constant(rcstr!(\"/after\"))\n             ])\n         );\n \n         let pat = Pattern::Alternatives(vec![\n-            Pattern::Concatenation(vec![Pattern::Constant(\"a/\".into()), Pattern::Dynamic]),\n-            Pattern::Concatenation(vec![Pattern::Constant(\"b/\".into()), Pattern::Dynamic]),\n+            Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"a/\")), Pattern::Dynamic]),\n+            Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"b/\")), Pattern::Dynamic]),\n         ]);\n         assert_eq!(\n             pat.spread_into_star(\"before/*/after\"),\n             Pattern::Alternatives(vec![\n                 Pattern::Concatenation(vec![\n-                    Pattern::Constant(\"before/a/\".into()),\n+                    Pattern::Constant(rcstr!(\"before/a/\")),\n                     Pattern::Dynamic,\n-                    Pattern::Constant(\"/after\".into())\n+                    Pattern::Constant(rcstr!(\"/after\"))\n                 ]),\n                 Pattern::Concatenation(vec![\n-                    Pattern::Constant(\"before/b/\".into()),\n+                    Pattern::Constant(rcstr!(\"before/b/\")),\n                     Pattern::Dynamic,\n-                    Pattern::Constant(\"/after\".into())\n+                    Pattern::Constant(rcstr!(\"/after\"))\n                 ]),\n             ])\n         );\n \n         let pat = Pattern::Alternatives(vec![\n-            Pattern::Constant(\"a\".into()),\n-            Pattern::Constant(\"b\".into()),\n+            Pattern::Constant(rcstr!(\"a\")),\n+            Pattern::Constant(rcstr!(\"b\")),\n         ]);\n         assert_eq!(\n             pat.spread_into_star(\"before/*/*\"),\n             Pattern::Alternatives(vec![\n-                Pattern::Constant(\"before/a/a\".into()),\n-                Pattern::Constant(\"before/b/b\".into()),\n+                Pattern::Constant(rcstr!(\"before/a/a\")),\n+                Pattern::Constant(rcstr!(\"before/b/b\")),\n             ])\n         );\n \n@@ -2079,17 +2079,17 @@ mod tests {\n             pat.spread_into_star(\"before/*/*\"),\n             Pattern::Concatenation(vec![\n                 // TODO currently nothing ensures that both Dynamic parts are equal\n-                Pattern::Constant(\"before/\".into()),\n+                Pattern::Constant(rcstr!(\"before/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\"/\".into()),\n+                Pattern::Constant(rcstr!(\"/\")),\n                 Pattern::Dynamic\n             ])\n         );\n     }\n \n     #[rstest]\n     #[case::dynamic(Pattern::Dynamic)]\n-    #[case::dynamic_concat(Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(\".js\".into())]))]\n+    #[case::dynamic_concat(Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(rcstr!(\".js\"))]))]\n     fn dynamic_match(#[case] pat: Pattern) {\n         assert!(pat.could_match(\"\"));\n         assert!(pat.is_match(\"index.js\"));\n@@ -2143,7 +2143,7 @@ mod tests {\n     fn dynamic_match2() {\n         let pat = Pattern::Concatenation(vec![\n             Pattern::Dynamic,\n-            Pattern::Constant(\"/\".into()),\n+            Pattern::Constant(rcstr!(\"/\")),\n             Pattern::Dynamic,\n         ]);\n         assert!(pat.could_match(\"dir\"));\n@@ -2195,16 +2195,16 @@ mod tests {\n \n     #[rstest]\n     #[case::dynamic(Pattern::Dynamic)]\n-    #[case::dynamic_concat(Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(\".js\".into())]))]\n+    #[case::dynamic_concat(Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(rcstr!(\".js\"))]))]\n     #[case::dynamic_concat2(Pattern::Concatenation(vec![\n         Pattern::Dynamic,\n-        Pattern::Constant(\"/\".into()),\n+        Pattern::Constant(rcstr!(\"/\")),\n         Pattern::Dynamic,\n     ]))]\n     #[case::dynamic_alt_concat(Pattern::alternatives(vec![\n         Pattern::Concatenation(vec![\n             Pattern::Dynamic,\n-            Pattern::Constant(\"/\".into()),\n+            Pattern::Constant(rcstr!(\"/\")),\n             Pattern::Dynamic,\n         ]),\n         Pattern::Dynamic,\n@@ -2218,28 +2218,28 @@ mod tests {\n     #[rstest]\n     #[case::dynamic(Pattern::Dynamic, \"feijf\", None)]\n     #[case::dynamic_concat(\n-        Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(\".js\".into())]),\n+        Pattern::Concatenation(vec![Pattern::Dynamic, Pattern::Constant(rcstr!(\".js\"))]),\n         \"hello.\", None\n     )]\n-    #[case::constant(Pattern::Constant(\"Hello World\".into()), \"Hello \", Some(vec![(\"World\", true)]))]\n+    #[case::constant(Pattern::Constant(rcstr!(\"Hello World\")), \"Hello \", Some(vec![(\"World\", true)]))]\n     #[case::alternatives(\n         Pattern::Alternatives(vec![\n-            Pattern::Constant(\"Hello World\".into()),\n-            Pattern::Constant(\"Hello All\".into())\n+            Pattern::Constant(rcstr!(\"Hello World\")),\n+            Pattern::Constant(rcstr!(\"Hello All\"))\n         ]), \"Hello \", Some(vec![(\"World\", true), (\"All\", true)])\n     )]\n     #[case::alternatives_non_end(\n         Pattern::Alternatives(vec![\n-            Pattern::Constant(\"Hello World\".into()),\n-            Pattern::Constant(\"Hello All\".into()),\n-            Pattern::Concatenation(vec![Pattern::Constant(\"Hello more\".into()), Pattern::Dynamic])\n+            Pattern::Constant(rcstr!(\"Hello World\")),\n+            Pattern::Constant(rcstr!(\"Hello All\")),\n+            Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"Hello more\")), Pattern::Dynamic])\n         ]), \"Hello \", Some(vec![(\"World\", true), (\"All\", true), (\"more\", false)])\n     )]\n     #[case::request_with_extensions(\n         Pattern::Alternatives(vec![\n-            Pattern::Constant(\"./file.js\".into()),\n-            Pattern::Constant(\"./file.ts\".into()),\n-            Pattern::Constant(\"./file.cjs\".into()),\n+            Pattern::Constant(rcstr!(\"./file.js\")),\n+            Pattern::Constant(rcstr!(\"./file.ts\")),\n+            Pattern::Constant(rcstr!(\"./file.cjs\")),\n         ]), \"./\", Some(vec![(\"file.js\", true), (\"file.ts\", true), (\"file.cjs\", true)])\n     )]\n     fn next_constants(\n@@ -2260,9 +2260,9 @@ mod tests {\n         let js_to_ts_tsx = |c: &RcStr| -> Option<Pattern> {\n             c.strip_suffix(\".js\").map(|rest| {\n                 let new_ending = Pattern::Alternatives(vec![\n-                    Pattern::Constant(\".ts\".into()),\n-                    Pattern::Constant(\".tsx\".into()),\n-                    Pattern::Constant(\".js\".into()),\n+                    Pattern::Constant(rcstr!(\".ts\")),\n+                    Pattern::Constant(rcstr!(\".tsx\")),\n+                    Pattern::Constant(rcstr!(\".js\")),\n                 ]);\n                 if !rest.is_empty() {\n                     Pattern::Concatenation(vec![Pattern::Constant(rest.into()), new_ending])\n@@ -2275,48 +2275,48 @@ mod tests {\n         assert_eq!(\n             f(\n                 Pattern::Concatenation(vec![\n-                    Pattern::Constant(\".\".into()),\n-                    Pattern::Constant(\"/\".into()),\n+                    Pattern::Constant(rcstr!(\".\")),\n+                    Pattern::Constant(rcstr!(\"/\")),\n                     Pattern::Dynamic,\n                     Pattern::Alternatives(vec![\n-                        Pattern::Constant(\".js\".into()),\n-                        Pattern::Constant(\".node\".into()),\n+                        Pattern::Constant(rcstr!(\".js\")),\n+                        Pattern::Constant(rcstr!(\".node\")),\n                     ])\n                 ]),\n                 &js_to_ts_tsx\n             ),\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\".\".into()),\n-                Pattern::Constant(\"/\".into()),\n+                Pattern::Constant(rcstr!(\".\")),\n+                Pattern::Constant(rcstr!(\"/\")),\n                 Pattern::Dynamic,\n                 Pattern::Alternatives(vec![\n                     Pattern::Alternatives(vec![\n-                        Pattern::Constant(\".ts\".into()),\n-                        Pattern::Constant(\".tsx\".into()),\n-                        Pattern::Constant(\".js\".into()),\n+                        Pattern::Constant(rcstr!(\".ts\")),\n+                        Pattern::Constant(rcstr!(\".tsx\")),\n+                        Pattern::Constant(rcstr!(\".js\")),\n                     ]),\n-                    Pattern::Constant(\".node\".into()),\n+                    Pattern::Constant(rcstr!(\".node\")),\n                 ])\n             ]),\n         );\n         assert_eq!(\n             f(\n                 Pattern::Concatenation(vec![\n-                    Pattern::Constant(\".\".into()),\n-                    Pattern::Constant(\"/\".into()),\n-                    Pattern::Constant(\"abc.js\".into()),\n+                    Pattern::Constant(rcstr!(\".\")),\n+                    Pattern::Constant(rcstr!(\"/\")),\n+                    Pattern::Constant(rcstr!(\"abc.js\")),\n                 ]),\n                 &js_to_ts_tsx\n             ),\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\".\".into()),\n-                Pattern::Constant(\"/\".into()),\n+                Pattern::Constant(rcstr!(\".\")),\n+                Pattern::Constant(rcstr!(\"/\")),\n                 Pattern::Concatenation(vec![\n-                    Pattern::Constant(\"abc\".into()),\n+                    Pattern::Constant(rcstr!(\"abc\")),\n                     Pattern::Alternatives(vec![\n-                        Pattern::Constant(\".ts\".into()),\n-                        Pattern::Constant(\".tsx\".into()),\n-                        Pattern::Constant(\".js\".into()),\n+                        Pattern::Constant(rcstr!(\".ts\")),\n+                        Pattern::Constant(rcstr!(\".tsx\")),\n+                        Pattern::Constant(rcstr!(\".js\")),\n                     ])\n                 ]),\n             ])\n@@ -2327,60 +2327,60 @@ mod tests {\n     fn match_apply_template() {\n         assert_eq!(\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\"a/b/\".into()),\n+                Pattern::Constant(rcstr!(\"a/b/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\".ts\".into()),\n+                Pattern::Constant(rcstr!(\".ts\")),\n             ])\n             .match_apply_template(\n                 \"a/b/foo.ts\",\n                 &Pattern::Concatenation(vec![\n-                    Pattern::Constant(\"@/a/b/\".into()),\n+                    Pattern::Constant(rcstr!(\"@/a/b/\")),\n                     Pattern::Dynamic,\n-                    Pattern::Constant(\".js\".into()),\n+                    Pattern::Constant(rcstr!(\".js\")),\n                 ])\n             )\n             .as_deref(),\n             Some(\"@/a/b/foo.js\")\n         );\n         assert_eq!(\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\"b/\".into()),\n+                Pattern::Constant(rcstr!(\"b/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\".ts\".into()),\n+                Pattern::Constant(rcstr!(\".ts\")),\n             ])\n             .match_apply_template(\n                 \"a/b/foo.ts\",\n                 &Pattern::Concatenation(vec![\n-                    Pattern::Constant(\"@/a/b/\".into()),\n+                    Pattern::Constant(rcstr!(\"@/a/b/\")),\n                     Pattern::Dynamic,\n-                    Pattern::Constant(\".js\".into()),\n+                    Pattern::Constant(rcstr!(\".js\")),\n                 ])\n             )\n             .as_deref(),\n             None,\n         );\n         assert_eq!(\n             Pattern::Concatenation(vec![\n-                Pattern::Constant(\"a/b/\".into()),\n+                Pattern::Constant(rcstr!(\"a/b/\")),\n                 Pattern::Dynamic,\n-                Pattern::Constant(\".ts\".into()),\n+                Pattern::Constant(rcstr!(\".ts\")),\n             ])\n             .match_apply_template(\n                 \"a/b/foo.ts\",\n                 &Pattern::Concatenation(vec![\n-                    Pattern::Constant(\"@/a/b/x\".into()),\n-                    Pattern::Constant(\".js\".into()),\n+                    Pattern::Constant(rcstr!(\"@/a/b/x\")),\n+                    Pattern::Constant(rcstr!(\".js\")),\n                 ])\n             )\n             .as_deref(),\n             None,\n         );\n         assert_eq!(\n-            Pattern::Concatenation(vec![Pattern::Constant(\"./sub/\".into()), Pattern::Dynamic])\n+            Pattern::Concatenation(vec![Pattern::Constant(rcstr!(\"./sub/\")), Pattern::Dynamic])\n                 .match_apply_template(\n                     \"./sub/file1\",\n                     &Pattern::Concatenation(vec![\n-                        Pattern::Constant(\"@/sub/\".into()),\n+                        Pattern::Constant(rcstr!(\"@/sub/\")),\n                         Pattern::Dynamic\n                     ])\n                 )"
        },
        {
            "sha": "7731a9057dd46b995e436a000db4230f4909ee45",
            "filename": "turbopack/crates/turbopack-core/src/resolve/remap.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fremap.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fremap.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fremap.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -487,7 +487,7 @@ fn is_folder_shorthand(key: &str) -> bool {\n /// we do the expansion here.\n fn expand_folder_shorthand(key: &str, value: &mut SubpathValue) -> Result<AliasPattern> {\n     // Transform folder patterns into wildcard patterns.\n-    let pattern = AliasPattern::wildcard(key, \"\");\n+    let pattern = AliasPattern::wildcard(key, rcstr!(\"\"));\n \n     // Transform templates into wildcard patterns as well.\n     for result in value.results_mut() {"
        },
        {
            "sha": "5a27086b8e54d9d9047c4ee2487e95674dc01459",
            "filename": "turbopack/crates/turbopack-core/src/source_map/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fmod.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -7,7 +7,7 @@ use ref_cast::RefCast;\n use regex::Regex;\n use serde::{Deserialize, Deserializer, Serialize, Serializer};\n use swc_sourcemap::{DecodedMap, SourceMap as RegularMap, SourceMapBuilder, SourceMapIndex};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n use turbo_tasks_fs::{\n     File, FileContent, FileSystem, FileSystemPath, VirtualFileSystem,\n@@ -548,7 +548,7 @@ impl SourceMap {\n \n #[turbo_tasks::function]\n fn sourcemap_content_fs_root() -> Vc<FileSystemPath> {\n-    VirtualFileSystem::new_with_name(\"sourcemap-content\".into()).root()\n+    VirtualFileSystem::new_with_name(rcstr!(\"sourcemap-content\")).root()\n }\n \n #[turbo_tasks::function]"
        },
        {
            "sha": "c30af695b4ffd7d5b7c8437771e32bdd429a07f9",
            "filename": "turbopack/crates/turbopack-css/src/chunk/single_item_chunk/source_map.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsingle_item_chunk%2Fsource_map.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsingle_item_chunk%2Fsource_map.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsingle_item_chunk%2Fsource_map.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::{File, FileSystemPath};\n use turbopack_core::{\n@@ -37,7 +38,7 @@ impl OutputAsset for SingleItemCssChunkSourceMapAsset {\n                 Some(Vc::upcast(self)),\n                 this.chunk.ident_for_path(),\n                 None,\n-                \".single.css\".into(),\n+                rcstr!(\".single.css\"),\n             )\n             .await?\n             .append(\".map\")?"
        },
        {
            "sha": "fe751fdd44f44d176aa44d160dfc818ada1566c0",
            "filename": "turbopack/crates/turbopack-css/src/chunk/source_map.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsource_map.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsource_map.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsource_map.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::{File, FileSystemPath};\n use turbopack_core::{\n@@ -34,7 +35,7 @@ impl OutputAsset for CssChunkSourceMapAsset {\n             .chunk\n             .await?\n             .chunking_context\n-            .chunk_path(Some(Vc::upcast(self)), ident, None, \".css\".into())\n+            .chunk_path(Some(Vc::upcast(self)), ident, None, rcstr!(\".css\"))\n             .await?\n             .append(\".map\")?\n             .cell())"
        },
        {
            "sha": "8598a139fde51de85cc209b701537d99780d6507",
            "filename": "turbopack/crates/turbopack-dev-server/src/update/stream.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fupdate%2Fstream.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fupdate%2Fstream.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fupdate%2Fstream.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -385,7 +385,7 @@ impl Issue for FatalStreamIssue {\n \n     #[turbo_tasks::function]\n     fn stage(&self) -> Vc<IssueStage> {\n-        IssueStage::Other(\"websocket\".into()).cell()\n+        IssueStage::Other(rcstr!(\"websocket\")).cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "dc3fbee86c494c2903184ec2affd97f33875d345",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/src/nodejs_runtime.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fsrc%2Fnodejs_runtime.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fsrc%2Fnodejs_runtime.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fsrc%2Fnodejs_runtime.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbopack_core::{\n     code_builder::{Code, CodeBuilder},\n@@ -17,27 +18,27 @@ pub async fn get_nodejs_runtime_code(\n \n     let shared_runtime_utils_code = embed_static_code(\n         asset_context,\n-        \"shared/runtime-utils.ts\".into(),\n+        rcstr!(\"shared/runtime-utils.ts\"),\n         generate_source_map,\n     );\n     let shared_base_external_utils_code = embed_static_code(\n         asset_context,\n-        \"shared-node/base-externals-utils.ts\".into(),\n+        rcstr!(\"shared-node/base-externals-utils.ts\"),\n         generate_source_map,\n     );\n     let shared_node_external_utils_code = embed_static_code(\n         asset_context,\n-        \"shared-node/node-externals-utils.ts\".into(),\n+        rcstr!(\"shared-node/node-externals-utils.ts\"),\n         generate_source_map,\n     );\n     let shared_node_wasm_utils_code = embed_static_code(\n         asset_context,\n-        \"shared-node/node-wasm-utils.ts\".into(),\n+        rcstr!(\"shared-node/node-wasm-utils.ts\"),\n         generate_source_map,\n     );\n     let runtime_code = embed_static_code(\n         asset_context,\n-        \"nodejs/runtime.ts\".into(),\n+        rcstr!(\"nodejs/runtime.ts\"),\n         generate_source_map,\n     );\n "
        },
        {
            "sha": "08085470658950218af070dc6d470202eed2a6ec",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/imports.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -40,7 +40,7 @@ static ANNOTATION_CHUNKING_TYPE: Lazy<Atom> =\n     Lazy::new(|| crate::annotations::ANNOTATION_CHUNKING_TYPE.into());\n \n /// Changes the type of the resolved module (only \"json\" is supported currently)\n-static ATTRIBUTE_MODULE_TYPE: Lazy<Atom> = Lazy::new(|| \"type\".into());\n+static ATTRIBUTE_MODULE_TYPE: Lazy<Atom> = Lazy::new(|| atom!(\"type\"));\n \n impl ImportAnnotations {\n     pub fn parse(with: Option<&ObjectLit>) -> ImportAnnotations {\n@@ -497,7 +497,7 @@ impl Visit for Analyzer<'_> {\n                     Some(imported) => (local.to_id(), orig_name(imported)),\n                     _ => (local.to_id(), local.sym.clone()),\n                 },\n-                ImportSpecifier::Default(s) => (s.local.to_id(), \"default\".into()),\n+                ImportSpecifier::Default(s) => (s.local.to_id(), atom!(\"default\")),\n                 ImportSpecifier::Namespace(s) => {\n                     self.data.namespace_imports.insert(s.local.to_id(), i);\n                     continue;"
        },
        {
            "sha": "88d0914b08823c5cd81a6437ffa9cb2c71f46731",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -3960,8 +3960,8 @@ pub mod test_utils {\n                 }\n             }\n             JsValue::FreeVar(ref var) => match &**var {\n-                \"__dirname\" => \"__dirname\".into(),\n-                \"__filename\" => \"__filename\".into(),\n+                \"__dirname\" => rcstr!(\"__dirname\").into(),\n+                \"__filename\" => rcstr!(\"__filename\").into(),\n \n                 \"require\" => JsValue::unknown_if(\n                     ignore,"
        },
        {
            "sha": "1271bb1b0345bddf1504eb629504d12948fdf058",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/well_known.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 7,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fwell_known.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fwell_known.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fwell_known.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,6 +1,7 @@\n use std::mem::take;\n \n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::Vc;\n use turbopack_core::compile_time_info::CompileTimeInfo;\n use url::Url;\n@@ -162,7 +163,7 @@ pub fn object_assign(args: Vec<JsValue>) -> JsValue {\n \n pub fn path_join(args: Vec<JsValue>) -> JsValue {\n     if args.is_empty() {\n-        return \".\".into();\n+        return rcstr!(\".\").into();\n     }\n     let mut parts = Vec::new();\n     for item in args {\n@@ -203,9 +204,12 @@ pub fn path_join(args: Vec<JsValue>) -> JsValue {\n     for part in iter {\n         let is_str = part.as_str().is_some();\n         if last_is_str && is_str {\n-            results.push(\"/\".into());\n+            results.push(rcstr!(\"/\").into());\n         } else {\n-            results.push(JsValue::alternatives(vec![\"/\".into(), \"\".into()]));\n+            results.push(JsValue::alternatives(vec![\n+                rcstr!(\"/\").into(),\n+                rcstr!(\"\").into(),\n+            ]));\n         }\n         results.push(part);\n         last_is_str = is_str;\n@@ -246,7 +250,7 @@ pub fn path_resolve(cwd: JsValue, mut args: Vec<JsValue>) -> JsValue {\n                     }\n                     \"..\" => {\n                         if results.pop().is_none() {\n-                            results_final.push(\"..\".into());\n+                            results_final.push(rcstr!(\"..\").into());\n                         }\n                     }\n                     _ => results.push(str.into()),\n@@ -274,9 +278,12 @@ pub fn path_resolve(cwd: JsValue, mut args: Vec<JsValue>) -> JsValue {\n     for part in iter {\n         let is_str = part.as_str().is_some();\n         if last_was_str && is_str {\n-            results.push(\"/\".into());\n+            results.push(rcstr!(\"/\").into());\n         } else {\n-            results.push(JsValue::alternatives(vec![\"/\".into(), \"\".into()]));\n+            results.push(JsValue::alternatives(vec![\n+                rcstr!(\"/\").into(),\n+                rcstr!(\"\").into(),\n+            ]));\n         }\n         results.push(part);\n         last_was_str = is_str;\n@@ -291,7 +298,7 @@ pub fn path_dirname(mut args: Vec<JsValue>) -> JsValue {\n             if let Some(i) = str.rfind('/') {\n                 return JsValue::Constant(ConstantValue::Str(str[..i].to_string().into()));\n             } else {\n-                return JsValue::Constant(ConstantValue::Str(\"\".into()));\n+                return JsValue::Constant(ConstantValue::Str(rcstr!(\"\").into()));\n             }\n         } else if let JsValue::Concat(_, items) = arg\n             && let Some(last) = items.last_mut()"
        },
        {
            "sha": "cbaed5f4a6c77c57b5b2752ac9fb566acba4ca3d",
            "filename": "turbopack/crates/turbopack-ecmascript/src/minify.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fminify.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fminify.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fminify.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -3,6 +3,7 @@ use std::sync::Arc;\n use anyhow::{Context, Result, bail};\n use bytes_str::BytesStr;\n use swc_core::{\n+    atoms::atom,\n     base::try_with_handler,\n     common::{\n         BytePos, FileName, FilePathMapping, GLOBALS, LineCol, Mark, SourceMap as SwcSourceMap,\n@@ -89,7 +90,7 @@ pub fn minify(code: Code, source_maps: bool, mangle: Option<MangleType>) -> Resu\n                             ..Default::default()\n                         }),\n                         mangle: mangle.map(|mangle| {\n-                            let reserved = vec![\"AbortSignal\".into()];\n+                            let reserved = vec![atom!(\"AbortSignal\")];\n                             match mangle {\n                                 MangleType::OptimalSize => MangleOptions {\n                                     reserved,"
        },
        {
            "sha": "540bbd22aee34481b646da8609205f4f5e92177f",
            "filename": "turbopack/crates/turbopack-ecmascript/src/parse.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -310,14 +310,14 @@ async fn parse_file_content(\n     let (emitter, collector) = IssueEmitter::new(\n         source,\n         source_map.clone(),\n-        Some(\"Ecmascript file had an error\".into()),\n+        Some(rcstr!(\"Ecmascript file had an error\")),\n     );\n     let handler = Handler::with_emitter(true, false, Box::new(emitter));\n \n     let (emitter, collector_parse) = IssueEmitter::new(\n         source,\n         source_map.clone(),\n-        Some(\"Parsing ecmascript source code failed\".into()),\n+        Some(rcstr!(\"Parsing ecmascript source code failed\")),\n     );\n     let parser_handler = Handler::with_emitter(true, false, Box::new(emitter));\n     let globals = Arc::new(Globals::new());"
        },
        {
            "sha": "dbf0a5afe54201d70a35cf71c74612874ba95fa9",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/base.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -866,9 +866,9 @@ impl Issue for CircularReExport {\n     #[turbo_tasks::function]\n     async fn title(&self) -> Result<Vc<StyledString>> {\n         Ok(StyledString::Line(vec![\n-            StyledString::Text(\"Export \".into()),\n+            StyledString::Text(rcstr!(\"Export \")),\n             StyledString::Code(self.export.clone()),\n-            StyledString::Text(\" is a circular re-export\".into()),\n+            StyledString::Text(rcstr!(\" is a circular re-export\")),\n         ])\n         .cell())\n     }\n@@ -887,20 +887,20 @@ impl Issue for CircularReExport {\n     async fn description(&self) -> Result<Vc<OptionStyledString>> {\n         Ok(Vc::cell(Some(\n             StyledString::Stack(vec![\n-                StyledString::Line(vec![StyledString::Text(\"The export\".into())]),\n+                StyledString::Line(vec![StyledString::Text(rcstr!(\"The export\"))]),\n                 StyledString::Line(vec![\n                     StyledString::Code(self.export.clone()),\n-                    StyledString::Text(\" of module \".into()),\n+                    StyledString::Text(rcstr!(\" of module \")),\n                     StyledString::Strong(self.module.ident().to_string().owned().await?),\n                 ]),\n-                StyledString::Line(vec![StyledString::Text(\n-                    \"is a re-export of the export\".into(),\n-                )]),\n+                StyledString::Line(vec![StyledString::Text(rcstr!(\n+                    \"is a re-export of the export\"\n+                ))]),\n                 StyledString::Line(vec![\n-                    StyledString::Code(self.import.clone().unwrap_or_else(|| \"*\".into())),\n-                    StyledString::Text(\" of module \".into()),\n+                    StyledString::Code(self.import.clone().unwrap_or_else(|| rcstr!(\"*\"))),\n+                    StyledString::Text(rcstr!(\" of module \")),\n                     StyledString::Strong(self.module_cycle.ident().to_string().owned().await?),\n-                    StyledString::Text(\".\".into()),\n+                    StyledString::Text(rcstr!(\".\")),\n                 ]),\n             ])\n             .resolved_cell(),"
        },
        {
            "sha": "145c1a693b6bed738e42bd810606fd6083fdca20",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -39,7 +39,7 @@ use regex::Regex;\n use rustc_hash::{FxHashMap, FxHashSet};\n use serde::{Deserialize, Serialize};\n use swc_core::{\n-    atoms::Atom,\n+    atoms::{Atom, atom},\n     common::{\n         GLOBALS, Globals, Span, Spanned,\n         comments::{CommentKind, Comments},\n@@ -1469,7 +1469,7 @@ async fn compile_time_info_for_module_type(\n             DefinableNameSegment::Name(rcstr!(\"meta\")),\n             DefinableNameSegment::TypeOf,\n         ])\n-        .or_insert(\"object\".into());\n+        .or_insert(rcstr!(\"object\").into());\n     free_var_references\n         .entry(vec![\n             DefinableNameSegment::Name(rcstr!(\"exports\")),\n@@ -1487,48 +1487,48 @@ async fn compile_time_info_for_module_type(\n             DefinableNameSegment::Name(rcstr!(\"require\")),\n             DefinableNameSegment::TypeOf,\n         ])\n-        .or_insert(\"function\".into());\n+        .or_insert(rcstr!(\"function\").into());\n     free_var_references\n         .entry(vec![DefinableNameSegment::Name(rcstr!(\"require\"))])\n         .or_insert(require.into());\n \n-    let dir_name: RcStr = rcstr!(\"__dirname\");\n+    let dir_name = rcstr!(\"__dirname\");\n     free_var_references\n         .entry(vec![\n             DefinableNameSegment::Name(dir_name.clone()),\n             DefinableNameSegment::TypeOf,\n         ])\n-        .or_insert(\"string\".into());\n+        .or_insert(rcstr!(\"string\").into());\n     free_var_references\n         .entry(vec![DefinableNameSegment::Name(dir_name)])\n         .or_insert(FreeVarReference::InputRelative(\n             InputRelativeConstant::DirName,\n         ));\n-    let file_name: RcStr = rcstr!(\"__filename\");\n+    let file_name = rcstr!(\"__filename\");\n \n     free_var_references\n         .entry(vec![\n             DefinableNameSegment::Name(file_name.clone()),\n             DefinableNameSegment::TypeOf,\n         ])\n-        .or_insert(\"string\".into());\n+        .or_insert(rcstr!(\"string\").into());\n     free_var_references\n         .entry(vec![DefinableNameSegment::Name(file_name)])\n         .or_insert(FreeVarReference::InputRelative(\n             InputRelativeConstant::FileName,\n         ));\n \n     // Compiletime rewrite the nodejs `global` to `globalThis`\n-    let global: RcStr = rcstr!(\"global\");\n+    let global = rcstr!(\"global\");\n     free_var_references\n         .entry(vec![\n             DefinableNameSegment::Name(global.clone()),\n             DefinableNameSegment::TypeOf,\n         ])\n-        .or_insert(\"object\".into());\n+        .or_insert(rcstr!(\"object\").into());\n     free_var_references\n         .entry(vec![DefinableNameSegment::Name(global)])\n-        .or_insert(FreeVarReference::Ident(\"globalThis\".into()));\n+        .or_insert(FreeVarReference::Ident(rcstr!(\"globalThis\")));\n \n     free_var_references.extend(TURBOPACK_RUNTIME_FUNCTION_SHORTCUTS.into_iter().map(\n         |(name, shortcut)| {\n@@ -1558,9 +1558,9 @@ async fn compile_time_info_for_module_type(\n             DefinableNameSegment::TypeOf,\n         ])\n         .or_insert(if is_esm {\n-            \"undefined\".into()\n+            rcstr!(\"undefined\").into()\n         } else {\n-            \"object\".into()\n+            rcstr!(\"object\").into()\n         });\n     Ok(CompileTimeInfo {\n         environment: compile_time_info.environment,\n@@ -2268,7 +2268,7 @@ async fn handle_call<G: Fn(Vec<Effect>) + Send + Sync>(\n                                                 WellKnownFunctionKind::PathJoin,\n                                             )),\n                                             vec![\n-                                                JsValue::FreeVar(\"__dirname\".into()),\n+                                                JsValue::FreeVar(atom!(\"__dirname\")),\n                                                 pkg_or_dir.clone(),\n                                             ],\n                                         ),\n@@ -2328,9 +2328,9 @@ async fn handle_call<G: Fn(Vec<Effect>) + Send + Sync>(\n                                     WellKnownFunctionKind::PathJoin,\n                                 )),\n                                 vec![\n-                                    JsValue::FreeVar(\"__dirname\".into()),\n+                                    JsValue::FreeVar(atom!(\"__dirname\")),\n                                     p.into(),\n-                                    \"intl\".into(),\n+                                    atom!(\"intl\").into(),\n                                 ],\n                             ),\n                             ImportAttributes::empty_ref(),\n@@ -3567,7 +3567,7 @@ impl From<Vec<AstParentKind>> for AstPath {\n     }\n }\n \n-pub static TURBOPACK_HELPER: Lazy<Atom> = Lazy::new(|| \"__turbopack-helper__\".into());\n+pub static TURBOPACK_HELPER: Lazy<Atom> = Lazy::new(|| atom!(\"__turbopack-helper__\"));\n \n pub fn is_turbopack_helper_import(import: &ImportDecl) -> bool {\n     let annotations = ImportAnnotations::parse(import.with.as_deref());"
        },
        {
            "sha": "b933aca1ec55b62b0fe62b186eda05f81214a4d4",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/pattern_mapping.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fpattern_mapping.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fpattern_mapping.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fpattern_mapping.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -10,7 +10,7 @@ use swc_core::{\n     },\n     quote, quote_expr,\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, NonLocalValue, ResolvedVc, TaskInput, TryJoinIterExt, Vc, debug::ValueDebugFormat,\n     trace::TraceRawVcs,\n@@ -341,9 +341,9 @@ async fn to_single_pattern_mapping(\n             // TODO implement mapping\n             CodeGenerationIssue {\n                 severity: IssueSeverity::Bug,\n-                title: StyledString::Text(\n-                    \"pattern mapping is not implemented for this result\".into(),\n-                )\n+                title: StyledString::Text(rcstr!(\n+                    \"pattern mapping is not implemented for this result\"\n+                ))\n                 .resolved_cell(),\n                 message: StyledString::Text(\n                     format!(\n@@ -374,10 +374,10 @@ async fn to_single_pattern_mapping(\n     }\n     CodeGenerationIssue {\n         severity: IssueSeverity::Bug,\n-        title: StyledString::Text(\"non-ecmascript placeable asset\".into()).resolved_cell(),\n-        message: StyledString::Text(\n-            \"asset is not placeable in ESM chunks, so it doesn't have a module id\".into(),\n-        )\n+        title: StyledString::Text(rcstr!(\"non-ecmascript placeable asset\")).resolved_cell(),\n+        message: StyledString::Text(rcstr!(\n+            \"asset is not placeable in ESM chunks, so it doesn't have a module id\"\n+        ))\n         .resolved_cell(),\n         path: origin.origin_path().owned().await?,\n     }"
        },
        {
            "sha": "babaa3c0fe4a9084ffab77832f404de0cdee5b7a",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/unreachable.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Funreachable.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Funreachable.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Funreachable.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -3,7 +3,7 @@ use std::mem::take;\n use anyhow::Result;\n use serde::{Deserialize, Serialize};\n use swc_core::{\n-    atoms::atom,\n+    atoms::{Atom, atom},\n     base::SwcComments,\n     common::{\n         DUMMY_SP, Span, Spanned,\n@@ -37,6 +37,9 @@ pub struct Unreachable {\n     range: AstPathRange,\n }\n \n+fn unreachable_atom() -> Atom {\n+    atom!(\"TURBOPACK unreachable\")\n+}\n struct UnreachableModifier {\n     comments: SwcComments,\n }\n@@ -49,7 +52,7 @@ impl AstModifier for UnreachableModifier {\n \n         *node = Expr::Lit(Lit::Str(Str {\n             span,\n-            value: atom!(\"TURBOPACK unreachable\"),\n+            value: unreachable_atom(),\n             raw: None,\n         }));\n     }\n@@ -64,7 +67,7 @@ impl AstModifier for UnreachableModifier {\n             Comment {\n                 kind: CommentKind::Line,\n                 span: DUMMY_SP,\n-                text: atom!(\"TURBOPACK unreachable\"),\n+                text: unreachable_atom(),\n             },\n         );\n \n@@ -111,7 +114,7 @@ impl UnreachableRangeModifier {\n                 Comment {\n                     kind: CommentKind::Line,\n                     span: DUMMY_SP,\n-                    text: atom!(\"TURBOPACK unreachable\"),\n+                    text: unreachable_atom(),\n                 },\n             );\n "
        },
        {
            "sha": "f729fda9715ced5ca1753cf51c08a18f2bc9e4bc",
            "filename": "turbopack/crates/turbopack-ecmascript/src/runtime_functions.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fruntime_functions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fruntime_functions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fruntime_functions.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -1,6 +1,10 @@\n use std::fmt::{Display, Formatter};\n \n-use swc_core::ecma::ast::{Expr, MemberExpr, MemberProp};\n+use swc_core::{\n+    atoms::atom,\n+    ecma::ast::{Expr, MemberExpr, MemberProp},\n+};\n+use turbo_rcstr::rcstr;\n use turbopack_core::compile_time_info::FreeVarReference;\n \n pub struct TurbopackRuntimeFunctionShortcut {\n@@ -29,14 +33,14 @@ impl Display for TurbopackRuntimeFunctionShortcut {\n \n impl From<&TurbopackRuntimeFunctionShortcut> for FreeVarReference {\n     fn from(val: &TurbopackRuntimeFunctionShortcut) -> Self {\n-        FreeVarReference::Member(\"__turbopack_context__\".into(), val.shortcut.into())\n+        FreeVarReference::Member(rcstr!(\"__turbopack_context__\"), val.shortcut.into())\n     }\n }\n \n impl From<&TurbopackRuntimeFunctionShortcut> for Expr {\n     fn from(val: &TurbopackRuntimeFunctionShortcut) -> Self {\n         Expr::Member(MemberExpr {\n-            obj: Box::new(Expr::Ident(\"__turbopack_context__\".into())),\n+            obj: Box::new(Expr::Ident(atom!(\"__turbopack_context__\").into())),\n             prop: MemberProp::Ident(val.shortcut.into()),\n             ..Default::default()\n         })"
        },
        {
            "sha": "000fe2b9c194cfd5d7661932684c6f4258e9551d",
            "filename": "turbopack/crates/turbopack-ecmascript/src/transform/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -45,7 +45,7 @@ pub enum EcmascriptInputTransform {\n         runtime: ResolvedVc<Option<RcStr>>,\n     },\n     GlobalTypeofs {\n-        window_value: String,\n+        window_value: RcStr,\n     },\n     // These options are subset of swc_core::ecma::transforms::typescript::Config, but\n     // it doesn't derive `Copy` so repeating values in here"
        },
        {
            "sha": "9d4b235e84516c0eac110999e5d959bc8f923067",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/graph.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fgraph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fgraph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fgraph.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -10,6 +10,7 @@ use petgraph::{\n };\n use rustc_hash::{FxHashMap, FxHashSet};\n use swc_core::{\n+    atoms::atom,\n     common::{BytePos, DUMMY_SP, Spanned, SyntaxContext, comments::Comments, util::take::Take},\n     ecma::{\n         ast::{\n@@ -695,7 +696,7 @@ impl DepGraph {\n                                     is_type_only: false,\n                                 })],\n                                 src: if cfg!(test) {\n-                                    Some(Box::new(\"__TURBOPACK_VAR__\".into()))\n+                                    Some(Box::new(atom!(\"__TURBOPACK_VAR__\").into()))\n                                 } else {\n                                     None\n                                 },\n@@ -929,7 +930,7 @@ impl DepGraph {\n                                 ),\n                                 ExportSpecifier::Default(s) => (\n                                     Some(ModuleExportName::Ident(Ident::new(\n-                                        \"default\".into(),\n+                                        atom!(\"default\"),\n                                         DUMMY_SP,\n                                         Default::default(),\n                                     ))),\n@@ -1076,7 +1077,7 @@ impl DepGraph {\n                             items.insert(id, data);\n                         }\n \n-                        exports.push((default_var.to_id(), \"default\".into()));\n+                        exports.push((default_var.to_id(), atom!(\"default\")));\n                     }\n                     ModuleDecl::ExportDefaultExpr(export) => {\n                         // Mirror what `EsmModuleItem::code_generation` does, these are live\n@@ -1140,7 +1141,7 @@ impl DepGraph {\n                         {\n                             // For export default __TURBOPACK__default__export__\n \n-                            exports.push((default_var.to_id(), \"default\".into()));\n+                            exports.push((default_var.to_id(), atom!(\"default\")));\n                         }\n                     }\n "
        },
        {
            "sha": "31f975d757a682417ea659149da2e48d791864b8",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/tests.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Ftests.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Ftests.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Ftests.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -3,10 +3,10 @@ use std::{collections::BTreeMap, fmt::Write, hash::Hash, path::PathBuf, sync::Ar\n use anyhow::Error;\n use serde::Deserialize;\n use swc_core::{\n+    atoms::atom,\n     common::{Mark, SourceMap, SyntaxContext, comments::SingleThreadedComments, util::take::Take},\n     ecma::{\n         ast::{EsVersion, Id, Module},\n-        atoms::Atom,\n         codegen::text_writer::JsWriter,\n         parser::{EsSyntax, parse_file_as_module},\n         visit::VisitMutWith,\n@@ -175,7 +175,7 @@ fn run(input: PathBuf) {\n         )\n         .unwrap();\n \n-        let uri_of_module: Atom = \"entry.js\".into();\n+        let uri_of_module = atom!(\"entry.js\");\n \n         let mut describe =\n             |is_debug: bool, title: &str, entries: Vec<ItemIdGroupKind>, skip_parts: bool| {"
        },
        {
            "sha": "38bd217058c4c34ce6c5ebc7efa7d0842fe523a7",
            "filename": "turbopack/crates/turbopack-ecmascript/src/utils.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Futils.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Futils.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Futils.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -265,7 +265,11 @@ mod tests {\n             Pattern::Constant(rcstr!(\"hello/world\")),\n             js_value_to_pattern(&JsValue::Concat(\n                 1,\n-                vec![\"hello\".into(), \"\\\\\".into(), \"world\".into()]\n+                vec![\n+                    rcstr!(\"hello\").into(),\n+                    rcstr!(\"\\\\\").into(),\n+                    rcstr!(\"world\").into()\n+                ]\n             ))\n         );\n     }"
        },
        {
            "sha": "4423d0bcb4879db3a1b35f9bb7694928cbb3f8fc",
            "filename": "turbopack/crates/turbopack-env/src/dotenv.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fdotenv.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fdotenv.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fdotenv.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -12,25 +12,25 @@ use crate::TryDotenvProcessEnv;\n pub async fn load_env(project_path: FileSystemPath) -> Result<Vc<Box<dyn ProcessEnv>>> {\n     let env: Vc<Box<dyn ProcessEnv>> = Vc::upcast(CommandLineProcessEnv::new());\n \n-    let node_env = env.read(rcstr!(\"NODE_ENV\")).await?;\n-    let node_env = node_env.as_deref().unwrap_or(\"development\");\n+    let node_env = env.read(rcstr!(\"NODE_ENV\")).owned().await?;\n+    let node_env = node_env.unwrap_or(rcstr!(\"development\"));\n \n     let env = Vc::upcast(CustomProcessEnv::new(\n         env,\n         Vc::cell(fxindexmap! {\n-            rcstr!(\"NODE_ENV\") => node_env.into(),\n+            rcstr!(\"NODE_ENV\") => node_env.clone(),\n         }),\n     ));\n \n     let mut files = [\n-        Some(format!(\".env.{node_env}.local\")),\n+        Some(format!(\".env.{node_env}.local\").into()),\n         if node_env == \"test\" {\n             None\n         } else {\n-            Some(\".env.local\".into())\n+            Some(rcstr!(\".env.local\"))\n         },\n-        Some(format!(\".env.{node_env}\")),\n-        Some(\".env\".into()),\n+        Some(format!(\".env.{node_env}\").into()),\n+        Some(rcstr!(\".env\")),\n     ]\n     .into_iter()\n     .flatten();"
        },
        {
            "sha": "97826225e54671a65ddb84a667f1d88e32674439",
            "filename": "turbopack/crates/turbopack-resolve/src/typescript.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -321,7 +321,7 @@ pub async fn tsconfig_resolve_options(\n                         })\n                         .collect();\n                     all_paths.insert(\n-                        key.to_string(),\n+                        RcStr::from(key.as_str()),\n                         ImportMapping::primary_alternatives(entries, Some(context_dir.clone())),\n                     );\n                 } else {"
        },
        {
            "sha": "ed20389b88f8a90bc2e36f68a5b3e8ee5eba7348",
            "filename": "turbopack/crates/turbopack-tests/tests/execution.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -141,7 +141,7 @@ fn get_messages(js_results: JsResult) -> Vec<String> {\n     let mut messages = vec![];\n \n     if js_results.jest_result.test_results.is_empty() {\n-        messages.push(\"No tests were run.\".into());\n+        messages.push(\"No tests were run.\".to_string());\n     }\n \n     for test_result in js_results.jest_result.test_results {\n@@ -191,7 +191,7 @@ async fn run(resource: PathBuf, snapshot_mode: IssueSnapshotMode) -> Result<JsRe\n     // Set up a `tracing_subscriber` for debugging -- We can only do this when using nextest, as\n     // `cargo test` runs all execution test cases in the same process.\n     //\n-    // Configuring `tracing_subscriber` requires proces-global side-effects. We can't use a\n+    // Configuring `tracing_subscriber` requires process-global side-effects. We can't use a\n     // thread-local subscriber because we're not fully single-threaded, even with the\n     // `current_thread` tokio executor.\n     //\n@@ -359,7 +359,7 @@ async fn run_test_operation(prepared_test: ResolvedVc<PreparedTest>) -> Result<V\n \n     let mut import_map = ImportMap::empty();\n     import_map.insert_wildcard_alias(\n-        \"esm-external/\",\n+        rcstr!(\"esm-external/\"),\n         ImportMapping::External(\n             Some(rcstr!(\"*\")),\n             ExternalType::EcmaScriptModule,\n@@ -368,7 +368,7 @@ async fn run_test_operation(prepared_test: ResolvedVc<PreparedTest>) -> Result<V\n         .resolved_cell(),\n     );\n     import_map.insert_exact_alias(\n-        \"jest-circus\",\n+        rcstr!(\"jest-circus\"),\n         ImportMapping::External(None, ExternalType::CommonJs, ExternalTraced::Untraced)\n             .resolved_cell(),\n     );"
        },
        {
            "sha": "381a3027e5d982be7b57dd82015ddd41afb71486",
            "filename": "turbopack/crates/turbopack/benches/node_file_trace.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fbenches%2Fnode_file_trace.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fbenches%2Fnode_file_trace.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fbenches%2Fnode_file_trace.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -79,7 +79,7 @@ fn bench_emit(b: &mut Bencher, bench_input: &BenchInput) {\n         let input: RcStr = bench_input.input.clone().into();\n         async move {\n             let task = tt.spawn_once_task(async move {\n-                let input_fs = DiskFileSystem::new(\"tests\".into(), tests_root.clone());\n+                let input_fs = DiskFileSystem::new(rcstr!(\"tests\"), tests_root.clone());\n                 let input = input_fs.root().await?.join(&input)?;\n \n                 let input_dir = input.parent().parent();"
        },
        {
            "sha": "912fb733b1e84c29561b4e3e8fe92d9927f04f86",
            "filename": "turbopack/crates/turbopack/src/evaluate_context.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fevaluate_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fevaluate_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fevaluate_context.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -43,7 +43,7 @@ pub async fn node_evaluate_asset_context(\n         ImportMap::empty()\n     };\n     import_map.insert_wildcard_alias(\n-        \"@vercel/turbopack-node/\",\n+        rcstr!(\"@vercel/turbopack-node/\"),\n         ImportMapping::PrimaryAlternative(\n             rcstr!(\"./*\"),\n             Some(turbopack_node::embed_js::embed_fs().root().owned().await?),"
        },
        {
            "sha": "15f452d24ef79161c9e04cbcb583490e30466912",
            "filename": "turbopack/crates/turbopack/src/lib.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -654,8 +654,8 @@ async fn externals_tracing_module_context(ty: ExternalType) -> Result<Vc<ModuleA\n         emulate_environment: Some(env),\n         loose_errors: true,\n         custom_conditions: match ty {\n-            ExternalType::CommonJs => vec![\"require\".into()],\n-            ExternalType::EcmaScriptModule => vec![\"import\".into()],\n+            ExternalType::CommonJs => vec![rcstr!(\"require\")],\n+            ExternalType::EcmaScriptModule => vec![rcstr!(\"import\")],\n             ExternalType::Url | ExternalType::Global | ExternalType::Script => vec![],\n         },\n         ..Default::default()"
        },
        {
            "sha": "3d71f949988711c808faf9888f73cefdb3f42117",
            "filename": "turbopack/crates/turbopack/src/module_options/mod.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 7,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -37,7 +37,10 @@ fn package_import_map_from_import_mapping(\n     package_mapping: ResolvedVc<ImportMapping>,\n ) -> Vc<ImportMap> {\n     let mut import_map = ImportMap::default();\n-    import_map.insert_exact_alias(format!(\"@vercel/turbopack/{package_name}\"), package_mapping);\n+    import_map.insert_exact_alias(\n+        RcStr::from(format!(\"@vercel/turbopack/{package_name}\")),\n+        package_mapping,\n+    );\n     import_map.cell()\n }\n \n@@ -48,7 +51,7 @@ fn package_import_map_from_context(\n ) -> Vc<ImportMap> {\n     let mut import_map = ImportMap::default();\n     import_map.insert_exact_alias(\n-        format!(\"@vercel/turbopack/{package_name}\"),\n+        RcStr::from(format!(\"@vercel/turbopack/{package_name}\")),\n         ImportMapping::PrimaryAlternative(package_name, Some(context_path)).resolved_cell(),\n     );\n     import_map.cell()\n@@ -181,8 +184,8 @@ impl ModuleOptions {\n         if let Some(enable_typeof_window_inlining) = enable_typeof_window_inlining {\n             transforms.push(EcmascriptInputTransform::GlobalTypeofs {\n                 window_value: match enable_typeof_window_inlining {\n-                    TypeofWindow::Object => \"object\".to_string(),\n-                    TypeofWindow::Undefined => \"undefined\".to_string(),\n+                    TypeofWindow::Object => rcstr!(\"object\"),\n+                    TypeofWindow::Undefined => rcstr!(\"undefined\"),\n                 },\n             });\n         }\n@@ -461,7 +464,7 @@ impl ModuleOptions {\n                     .context(\"execution_context is required for the postcss_transform\")?;\n \n                 let import_map = if let Some(postcss_package) = options.postcss_package {\n-                    package_import_map_from_import_mapping(\"postcss\".into(), *postcss_package)\n+                    package_import_map_from_import_mapping(rcstr!(\"postcss\"), *postcss_package)\n                 } else {\n                     package_import_map_from_context(\n                         rcstr!(\"postcss\"),\n@@ -618,12 +621,12 @@ impl ModuleOptions {\n                 webpack_loaders_options.loader_runner_package\n             {\n                 package_import_map_from_import_mapping(\n-                    \"loader-runner\".into(),\n+                    rcstr!(\"loader-runner\"),\n                     *loader_runner_package,\n                 )\n             } else {\n                 package_import_map_from_context(\n-                    \"loader-runner\".into(),\n+                    rcstr!(\"loader-runner\"),\n                     path.context(\"need_path in ModuleOptions::new is incorrect\")?,\n                 )\n             };"
        },
        {
            "sha": "721010319f92856736a0406244c082e771437228",
            "filename": "turbopack/crates/turbopack/src/module_options/rule_condition.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Frule_condition.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Frule_condition.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Frule_condition.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -141,7 +141,7 @@ impl RuleCondition {\n                         let content_type = &source.ident().await?.content_type;\n                         return Ok(content_type\n                             .as_ref()\n-                            .is_some_and(|ct| ct.starts_with(start)));\n+                            .is_some_and(|ct| ct.starts_with(start.as_str())));\n                     }\n                     RuleCondition::ContentTypeEmpty => {\n                         return Ok(source.ident().await?.content_type.is_none());"
        },
        {
            "sha": "7804c941aad43871fb853f2a2b77ccd733827bf4",
            "filename": "turbopack/crates/turbopack/src/unsupported_sass.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Funsupported_sass.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/2289975541d9b16185429d8e2fa8b27bbc4c8831/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Funsupported_sass.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Funsupported_sass.rs?ref=2289975541d9b16185429d8e2fa8b27bbc4c8831",
            "patch": "@@ -34,7 +34,7 @@ impl AfterResolvePlugin for UnsupportedSassResolvePlugin {\n     async fn after_resolve_condition(&self) -> Result<Vc<AfterResolvePluginCondition>> {\n         Ok(AfterResolvePluginCondition::new(\n             self.root.root().owned().await?,\n-            Glob::new(\"**/*.{sass,scss}\".into()),\n+            Glob::new(rcstr!(\"**/*.{sass,scss}\")),\n         ))\n     }\n "
        }
    ],
    "stats": {
        "total": 1841,
        "additions": 993,
        "deletions": 848
    }
}