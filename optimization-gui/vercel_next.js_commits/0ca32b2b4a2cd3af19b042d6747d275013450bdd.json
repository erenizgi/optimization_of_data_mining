{
    "author": "huozhi",
    "message": "[devtool] initial support for segment explorer (#78858)",
    "sha": "0ca32b2b4a2cd3af19b042d6747d275013450bdd",
    "files": [
        {
            "sha": "bbb129a93374934e9407a9da1c30137b3ca972a1",
            "filename": "packages/next/src/build/define-env.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -279,6 +279,8 @@ export function getDefineEnv({\n           'process.env.__NEXT_RELATIVE_DIST_DIR': config.distDir,\n         }\n       : {}),\n+    'process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER':\n+      config.experimental.devtoolSegmentExplorer ?? false,\n   }\n \n   const userDefines = config.compiler?.define ?? {}"
        },
        {
            "sha": "1763496a708dc48da1b88a9bfa66d72eb4762521",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-indicator.tsx",
            "status": "modified",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -11,6 +11,7 @@ import { TurbopackInfo } from './dev-tools-info/turbopack-info'\n import { RouteInfo } from './dev-tools-info/route-info'\n import GearIcon from '../../../icons/gear-icon'\n import { UserPreferences } from './dev-tools-info/user-preferences'\n+import { SegmentsExplorer } from '../../overview/segment-explorer'\n import {\n   MENU_CURVE,\n   MENU_DURATION_MS,\n@@ -80,6 +81,7 @@ const OVERLAYS = {\n   Turbo: 'turbo',\n   Route: 'route',\n   Preferences: 'preferences',\n+  SegmentExplorer: 'segment-explorer',\n } as const\n \n export type Overlays = (typeof OVERLAYS)[keyof typeof OVERLAYS]\n@@ -123,6 +125,7 @@ function DevToolsPopover({\n   const isTurbopackInfoOpen = open === OVERLAYS.Turbo\n   const isRouteInfoOpen = open === OVERLAYS.Route\n   const isPreferencesOpen = open === OVERLAYS.Preferences\n+  const isSegmentExplorerOpen = open === OVERLAYS.SegmentExplorer\n \n   const { mounted: menuMounted, rendered: menuRendered } = useDelayedRender(\n     isMenuOpen,\n@@ -325,6 +328,16 @@ function DevToolsPopover({\n         setScale={setScale}\n       />\n \n+      {/* Page Segment Explorer */}\n+      {process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER ? (\n+        <SegmentsExplorer\n+          isOpen={isSegmentExplorerOpen}\n+          close={openRootMenu}\n+          triggerRef={triggerRef}\n+          style={popover}\n+        />\n+      ) : null}\n+\n       {/* Dropdown Menu */}\n       {menuMounted && (\n         <div\n@@ -390,6 +403,15 @@ function DevToolsPopover({\n                 onClick={() => setOpen(OVERLAYS.Preferences)}\n                 index={isTurbopack ? 2 : 3}\n               />\n+              {process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER ? (\n+                <MenuItem\n+                  data-rendered-files\n+                  label=\"Segment Explorer\"\n+                  value={<ChevronRight />}\n+                  onClick={() => setOpen(OVERLAYS.SegmentExplorer)}\n+                  index={isTurbopack ? 3 : 4}\n+                />\n+              ) : null}\n             </div>\n           </Context.Provider>\n         </div>"
        },
        {
            "sha": "cab02773e36ca9ede331cb10106f3da59fc6e421",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/dev-tools-info.tsx",
            "status": "modified",
            "additions": 27,
            "deletions": 20,
            "changes": 47,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -9,9 +9,10 @@ export interface DevToolsInfoPropsCore {\n }\n \n export interface DevToolsInfoProps extends DevToolsInfoPropsCore {\n-  title: string\n+  title: React.ReactNode\n   children: React.ReactNode\n   learnMoreLink?: string\n+  closeButton?: boolean\n }\n \n export function DevToolsInfo({\n@@ -20,6 +21,7 @@ export function DevToolsInfo({\n   learnMoreLink,\n   isOpen,\n   triggerRef,\n+  closeButton = true,\n   close,\n   ...props\n }: DevToolsInfoProps) {\n@@ -55,25 +57,29 @@ export function DevToolsInfo({\n       <div className=\"dev-tools-info-container\">\n         <h1 className=\"dev-tools-info-title\">{title}</h1>\n         {children}\n-        <div className=\"dev-tools-info-button-container\">\n-          <button\n-            ref={closeButtonRef}\n-            className=\"dev-tools-info-close-button\"\n-            onClick={close}\n-          >\n-            Close\n-          </button>\n-          {learnMoreLink && (\n-            <a\n-              className=\"dev-tools-info-learn-more-button\"\n-              href={learnMoreLink}\n-              target=\"_blank\"\n-              rel=\"noreferrer noopener\"\n-            >\n-              Learn More\n-            </a>\n-          )}\n-        </div>\n+        {(closeButton || learnMoreLink) && (\n+          <div className=\"dev-tools-info-button-container\">\n+            {closeButton ? (\n+              <button\n+                ref={closeButtonRef}\n+                className=\"dev-tools-info-close-button\"\n+                onClick={close}\n+              >\n+                Close\n+              </button>\n+            ) : null}\n+            {learnMoreLink && (\n+              <a\n+                className=\"dev-tools-info-learn-more-button\"\n+                href={learnMoreLink}\n+                target=\"_blank\"\n+                rel=\"noreferrer noopener\"\n+              >\n+                Learn More\n+              </a>\n+            )}\n+          </div>\n+        )}\n       </div>\n     </div>\n   )\n@@ -112,6 +118,7 @@ export const DEV_TOOLS_INFO_STYLES = `\n \n   .dev-tools-info-container {\n     padding: 12px;\n+    width: 100%;\n   }\n \n   .dev-tools-info-title {"
        },
        {
            "sha": "9a20acfbfd7006bdba85df91ab646a31b3297895",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/overview/segment-explorer.tsx",
            "status": "added",
            "additions": 204,
            "deletions": 0,
            "changes": 204,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Foverview%2Fsegment-explorer.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,204 @@\n+import type { HTMLProps } from 'react'\n+import { css } from '../../../utils/css'\n+import type { DevToolsInfoPropsCore } from '../errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n+import { DevToolsInfo } from '../errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n+import { cx } from '../../utils/cx'\n+import { LeftArrow } from '../../icons/left-arrow'\n+import {\n+  useSegmentTreeClientState,\n+  type SegmentNode,\n+} from '../../../../../../shared/lib/devtool/app-segment-tree'\n+import type { Trie, TrieNode } from '../../../../../../shared/lib/devtool/trie'\n+\n+const IconLayout = (props: React.SVGProps<SVGSVGElement>) => {\n+  return (\n+    <svg\n+      {...props}\n+      viewBox=\"0 0 16 16\"\n+      fill=\"none\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <path\n+        d=\"M16 12.5L15.9873 12.7559C15.8677 13.9323 14.9323 14.8677 13.7559 14.9873L13.5 15H2.5L2.24414 14.9873C1.06772 14.8677 0.132274 13.9323 0.0126953 12.7559L0 12.5V1H16V12.5ZM1.5 6.25488V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H4.99512V6.25488H1.5ZM6.24512 6.25488V13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V6.25488H6.24512ZM1.5 5.00488H14.5V2.5H1.5V5.00488Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}\n+\n+const IconPage = (props: React.SVGProps<SVGSVGElement>) => {\n+  return (\n+    <svg\n+      {...props}\n+      viewBox=\"0 0 16 16\"\n+      fill=\"none\"\n+      strokeLinejoin=\"round\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <path\n+        fillRule=\"evenodd\"\n+        clipRule=\"evenodd\"\n+        d=\"M14.5 6.5V13.5C14.5 14.8807 13.3807 16 12 16H4C2.61929 16 1.5 14.8807 1.5 13.5V1.5V0H3H8H9.08579C9.351 0 9.60536 0.105357 9.79289 0.292893L14.2071 4.70711C14.3946 4.89464 14.5 5.149 14.5 5.41421V6.5ZM13 6.5V13.5C13 14.0523 12.5523 14.5 12 14.5H4C3.44772 14.5 3 14.0523 3 13.5V1.5H8V5V6.5H9.5H13ZM9.5 2.12132V5H12.3787L9.5 2.12132Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}\n+\n+const ICONS = {\n+  layout: <IconLayout width={16} />,\n+  page: <IconPage width={16} />,\n+}\n+\n+function PageSegmentTree({ tree }: { tree: Trie<SegmentNode> | undefined }) {\n+  if (!tree) {\n+    return null\n+  }\n+  return (\n+    <div className=\"segment-explorer-content\">\n+      <PageSegmentTreeLayerPresentation\n+        tree={tree}\n+        node={tree.getRoot()}\n+        level={0}\n+      />\n+    </div>\n+  )\n+}\n+\n+function PageSegmentTreeLayerPresentation({\n+  tree,\n+  node,\n+  level,\n+}: {\n+  tree: Trie<SegmentNode>\n+  node: TrieNode<SegmentNode>\n+  level: number\n+}) {\n+  const segments = node.value?.pagePath?.split('/') || []\n+  const fileName = segments[segments.length - 1] || ''\n+  const nodeName = node.value?.type\n+  const pagePathPrefix = segments.slice(0, -1).join('/')\n+\n+  return (\n+    <div className=\"segment-explorer-item\">\n+      {!fileName || level === 0 ? null : (\n+        <div className=\"segment-explorer-item-row\">\n+          <div className=\"segment-explorer-line\">\n+            <div className={`segment-explorer-line-text-${nodeName}`}>\n+              <span\n+                className={cx(\n+                  'segment-explorer-line-icon',\n+                  `segment-explorer-line-icon-${nodeName}`\n+                )}\n+              >\n+                {nodeName === 'layout' ? ICONS.layout : ICONS.page}\n+              </span>\n+              {pagePathPrefix === '' ? '' : `${pagePathPrefix}/`}\n+              <span className=\"segment-explorer-filename-path\">{fileName}</span>\n+            </div>\n+          </div>\n+        </div>\n+      )}\n+\n+      <div className=\"tree-node-expanded-rendered-children\">\n+        {Object.entries(node.children).map(\n+          ([key, child]) =>\n+            child && (\n+              <PageSegmentTreeLayerPresentation\n+                key={key}\n+                tree={tree}\n+                node={child}\n+                level={level + 1}\n+              />\n+            )\n+        )}\n+      </div>\n+    </div>\n+  )\n+}\n+\n+export function SegmentsExplorer(\n+  props: DevToolsInfoPropsCore & HTMLProps<HTMLDivElement>\n+) {\n+  const ctx = useSegmentTreeClientState()\n+  if (!ctx) {\n+    return null\n+  }\n+\n+  return (\n+    <DevToolsInfo\n+      title={\n+        <>\n+          <button\n+            className=\"segment-explorer-back-button\"\n+            onClick={props.close}\n+          >\n+            <LeftArrow />\n+          </button>\n+          {'Segment Explorer'}\n+        </>\n+      }\n+      closeButton={false}\n+      {...props}\n+    >\n+      <PageSegmentTree tree={ctx.tree} />\n+    </DevToolsInfo>\n+  )\n+}\n+\n+export const DEV_TOOLS_INFO_RENDER_FILES_STYLES = css`\n+  .segment-explorer-back-button {\n+    margin-right: 12px;\n+    color: var(--color-gray-1000);\n+  }\n+  .segment-explorer-back-button svg {\n+    width: 20px;\n+    height: 20px;\n+  }\n+\n+  .segment-explorer-content {\n+    overflow-y: auto;\n+    padding: 0 12px;\n+    font-size: var(--size-14);\n+  }\n+\n+  .segment-explorer-item-row {\n+    display: flex;\n+    align-items: center;\n+    gap: 8px;\n+    padding: 2px 0;\n+  }\n+\n+  .segment-explorer-filename-path {\n+    display: inline-block;\n+\n+    &:hover {\n+      color: var(--color-gray-1000);\n+      text-decoration: none;\n+    }\n+  }\n+\n+  .segment-explorer-filename-path a {\n+    color: inherit;\n+    text-decoration: inherit;\n+  }\n+\n+  .segment-explorer-line {\n+    white-space: pre;\n+  }\n+\n+  .segment-explorer-line-icon {\n+    margin-right: 4px;\n+  }\n+  .segment-explorer-line-icon-page {\n+    color: inherit;\n+  }\n+  .segment-explorer-line-icon-layout {\n+    color: var(--color-gray-1-00);\n+  }\n+\n+  .segment-explorer-line-text-page {\n+    color: var(--color-blue-900);\n+    font-weight: 500;\n+  }\n+`"
        },
        {
            "sha": "f6932fe9c3998dc18e297d48d5494d7ab13ba4c6",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/styles/component-styles.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcomponent-styles.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcomponent-styles.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fstyles%2Fcomponent-styles.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -21,6 +21,7 @@ import { DEV_TOOLS_INFO_STYLES } from '../components/errors/dev-tools-indicator/\n import { DEV_TOOLS_INFO_TURBOPACK_INFO_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/turbopack-info'\n import { DEV_TOOLS_INFO_ROUTE_INFO_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/route-info'\n import { DEV_TOOLS_INFO_USER_PREFERENCES_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/user-preferences'\n+import { DEV_TOOLS_INFO_RENDER_FILES_STYLES } from '../components/overview/segment-explorer'\n import { FADER_STYLES } from '../components/fader'\n \n export function ComponentStyles() {\n@@ -49,6 +50,7 @@ export function ComponentStyles() {\n         ${DEV_TOOLS_INFO_TURBOPACK_INFO_STYLES}\n         ${DEV_TOOLS_INFO_ROUTE_INFO_STYLES}\n         ${DEV_TOOLS_INFO_USER_PREFERENCES_STYLES}\n+        ${DEV_TOOLS_INFO_RENDER_FILES_STYLES}\n         ${FADER_STYLES}\n       `}\n     </style>"
        },
        {
            "sha": "9c2f4b7a72ac8c22aa620b0208d0b8ec7ee0b2cb",
            "filename": "packages/next/src/server/app-render/create-component-tree.tsx",
            "status": "modified",
            "additions": 48,
            "deletions": 2,
            "changes": 50,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -95,6 +95,7 @@ async function createComponentTreeInternal({\n     renderOpts: { nextConfigOutput, experimental },\n     workStore,\n     componentMod: {\n+      SegmentViewNode,\n       HTTPAccessFallbackBoundary,\n       LayoutRouter,\n       RenderFromTemplateContext,\n@@ -621,8 +622,26 @@ async function createComponentTreeInternal({\n     )\n   }\n \n+  const dir = ctx.renderOpts.dir || process.cwd()\n+  const isSegmentViewEnabled =\n+    process.env.NODE_ENV === 'development' &&\n+    ctx.renderOpts.devtoolSegmentExplorer\n+  const nodeName = modType ?? 'page'\n+\n   if (isPage) {\n-    const PageComponent = Component\n+    const PageComponent = isSegmentViewEnabled\n+      ? (pageProps: any) => {\n+          return (\n+            <SegmentViewNode\n+              type={nodeName}\n+              pagePath={normalizePageOrLayoutFilePath(dir, layoutOrPagePath)}\n+            >\n+              <Component {...pageProps} />\n+            </SegmentViewNode>\n+          )\n+        }\n+      : Component\n+\n     // Assign searchParams to props if this is a page\n     let pageElement: React.ReactNode\n     if (isClientComponent) {\n@@ -708,7 +727,18 @@ async function createComponentTreeInternal({\n       isPossiblyPartialResponse,\n     ]\n   } else {\n-    const SegmentComponent = Component\n+    const SegmentComponent = isSegmentViewEnabled\n+      ? (segmentProps: any) => {\n+          return (\n+            <SegmentViewNode\n+              type={nodeName}\n+              pagePath={normalizePageOrLayoutFilePath(dir, layoutOrPagePath)}\n+            >\n+              <Component {...segmentProps} />\n+            </SegmentViewNode>\n+          )\n+        }\n+      : Component\n \n     const isRootLayoutWithChildrenSlotAndAtLeastOneMoreSlot =\n       rootLayoutAtThisLevel &&\n@@ -964,3 +994,19 @@ function getRootParamsImpl(\n     )\n   }\n }\n+\n+function normalizePageOrLayoutFilePath(\n+  projectDir: string,\n+  layoutOrPagePath: string | undefined\n+) {\n+  const dir = projectDir /*ctx.renderOpts.dir*/ || process.cwd()\n+  const relativePath = (layoutOrPagePath || '')\n+    // remove turbopack [project] prefix\n+    .replace(/^\\[project\\][\\\\/]/, '')\n+    // remove the project root from the path\n+    .replace(dir, '')\n+    // remove /(src/)?app/ dir prefix\n+    .replace(/^[\\\\/](src[\\\\/])?app[\\\\/]/, '')\n+\n+  return relativePath\n+}"
        },
        {
            "sha": "814d47af1ba411abfcf9ce8ecd6c4b9ed6be9dad",
            "filename": "packages/next/src/server/app-render/entry-base.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fentry-base.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fentry-base.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fentry-base.ts?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -45,6 +45,13 @@ import { Postpone } from './rsc/postpone'\n import { taintObjectReference } from './rsc/taint'\n export { collectSegmentData } from './collect-segment-data'\n \n+let SegmentViewNode: typeof import('../../shared/lib/devtool/app-segment-tree').SegmentViewNode =\n+  () => null\n+if (process.env.NODE_ENV === 'development') {\n+  const appSegmentTree: typeof import('../../shared/lib/devtool/app-segment-tree') = require('../../shared/lib/devtool/app-segment-tree')\n+  SegmentViewNode = appSegmentTree.SegmentViewNode\n+}\n+\n // patchFetch makes use of APIs such as `React.unstable_postpone` which are only available\n // in the experimental channel of React, so export it from here so that it comes from the bundled runtime\n function patchFetch() {\n@@ -78,4 +85,6 @@ export {\n   HTTPAccessFallbackBoundary,\n   patchFetch,\n   createMetadataComponents,\n+  // Development only\n+  SegmentViewNode,\n }"
        },
        {
            "sha": "602a68d7b3a8d5e63c635562f9d766893a65ba7a",
            "filename": "packages/next/src/server/app-render/types.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -179,6 +179,7 @@ export type ServerOnInstrumentationRequestError = (\n ) => void | Promise<void>\n \n export interface RenderOptsPartial {\n+  dir?: string\n   previewProps: __ApiPreviewProps | undefined\n   err?: Error | null\n   dev?: boolean\n@@ -269,6 +270,11 @@ export interface RenderOptsPartial {\n    * statically generated.\n    */\n   doNotThrowOnEmptyStaticShell?: boolean\n+\n+  /**\n+   * next config experimental.devtoolSegmentExplorer\n+   */\n+  devtoolSegmentExplorer?: boolean\n }\n \n export type RenderOpts = LoadComponentsReturnType<AppPageModule> &"
        },
        {
            "sha": "5aa4a6b62eff82eb709bc09068e33f2c07ae1256",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -563,6 +563,7 @@ export default abstract class Server<\n     }\n \n     this.renderOpts = {\n+      dir: this.dir,\n       supportsDynamicResponse: true,\n       trailingSlash: this.nextConfig.trailingSlash,\n       deploymentId: this.nextConfig.deploymentId,\n@@ -614,6 +615,8 @@ export default abstract class Server<\n       onInstrumentationRequestError:\n         this.instrumentationOnRequestError.bind(this),\n       reactMaxHeadersLength: this.nextConfig.reactMaxHeadersLength,\n+      devtoolSegmentExplorer:\n+        this.nextConfig.experimental.devtoolSegmentExplorer,\n     }\n \n     // Initialize next/config with the environment configuration"
        },
        {
            "sha": "5722af8fe92e27f318490e7858eea443d86bcbea",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -497,6 +497,7 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n           })\n           .optional(),\n         globalNotFound: z.boolean().optional(),\n+        devtoolSegmentExplorer: z.boolean().optional(),\n       })\n       .optional(),\n     exportPathMap: z"
        },
        {
            "sha": "d2504d2d8e14429947d44ffc309e932669b7ed3b",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -685,6 +685,11 @@ export interface ExperimentalConfig {\n    *\n    */\n   globalNotFound?: boolean\n+\n+  /**\n+   * Enable segment viewer for the app directory in dev tool.\n+   */\n+  devtoolSegmentExplorer?: boolean\n }\n \n export type ExportPathMap = {\n@@ -1382,6 +1387,7 @@ export const defaultConfig: NextConfig = {\n     useCache: undefined,\n     slowModuleDetection: undefined,\n     globalNotFound: false,\n+    devtoolSegmentExplorer: false,\n   },\n   htmlLimitedBots: undefined,\n   bundlePagesRouterDependencies: false,"
        },
        {
            "sha": "e8515edcda6b63f1438cd68063327da7b0b4f93b",
            "filename": "packages/next/src/shared/lib/devtool/app-segment-tree.tsx",
            "status": "added",
            "additions": 101,
            "deletions": 0,
            "changes": 101,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fdevtool%2Fapp-segment-tree.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fdevtool%2Fapp-segment-tree.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fdevtool%2Fapp-segment-tree.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,101 @@\n+'use client'\n+\n+import { type ReactNode, useEffect, useSyncExternalStore } from 'react'\n+import { createTrie, type Trie } from './trie'\n+\n+export type SegmentNode = {\n+  type: string\n+  pagePath: string\n+}\n+\n+type DevtoolClientState = {\n+  tree?: Trie<SegmentNode>\n+}\n+\n+const DEFAULT_CLIENT_STATE =\n+  typeof window === 'undefined'\n+    ? undefined\n+    : createTrie<SegmentNode>({\n+        getKey: (item) => item.pagePath,\n+      })\n+\n+declare global {\n+  interface Window {\n+    __NEXT_DEVTOOLS_CLIENT_STATE?: DevtoolClientState\n+  }\n+}\n+\n+function getSegmentTreeClientState(): DevtoolClientState {\n+  if (typeof window === 'undefined') {\n+    return {}\n+  }\n+  if (!window.__NEXT_DEVTOOLS_CLIENT_STATE) {\n+    window.__NEXT_DEVTOOLS_CLIENT_STATE = {\n+      // Initial state\n+      tree: DEFAULT_CLIENT_STATE,\n+    }\n+  }\n+  return window.__NEXT_DEVTOOLS_CLIENT_STATE\n+}\n+\n+const listeners = typeof window === 'undefined' ? null : new Set<() => void>()\n+\n+const createSegmentTreeStore = (): {\n+  subscribe: (callback: () => void) => () => void\n+  getSnapshot: () => DevtoolClientState\n+  getServerSnapshot: () => undefined\n+} => {\n+  if (typeof window === 'undefined') {\n+    return {\n+      subscribe: () => () => void 0,\n+      getSnapshot: () => ({}),\n+      getServerSnapshot: () => undefined,\n+    }\n+  }\n+\n+  // return a store that can be used by useSyncExternalStore\n+  return {\n+    subscribe: (callback) => {\n+      listeners?.add(callback)\n+      return () => listeners?.delete(callback)\n+    },\n+    getSnapshot: () => {\n+      return getSegmentTreeClientState()\n+    },\n+    getServerSnapshot: () => {\n+      return undefined\n+    },\n+  }\n+}\n+\n+const { subscribe, getSnapshot, getServerSnapshot } = createSegmentTreeStore()\n+\n+export function SegmentViewNode({\n+  type,\n+  pagePath,\n+  children,\n+}: {\n+  type: string\n+  pagePath: string\n+  children: ReactNode\n+}) {\n+  const clientState = getSegmentTreeClientState()\n+  const tree = clientState.tree\n+\n+  useEffect(() => {\n+    if (!tree) {\n+      return\n+    }\n+    tree.insert({\n+      type,\n+      pagePath,\n+    })\n+  }, [type, pagePath, tree])\n+\n+  return children\n+}\n+\n+export function useSegmentTreeClientState() {\n+  const state = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot)\n+  return state\n+}"
        },
        {
            "sha": "700d99df9edeabb87e4f2c17892ffe1905461803",
            "filename": "packages/next/src/shared/lib/devtool/trie.ts",
            "status": "added",
            "additions": 63,
            "deletions": 0,
            "changes": 63,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fdevtool%2Ftrie.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fdevtool%2Ftrie.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fdevtool%2Ftrie.ts?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,63 @@\n+/**\n+ * Trie data structure for storing and searching paths\n+ *\n+ * This can be used to store app router paths and search for them efficiently.\n+ * e.g.\n+ *\n+ * [trie root]\n+ *   ├── layout.js\n+ *   ├── page.js\n+ *   ├── blog\n+ *       ├── layout.js\n+ *       ├── page.js\n+ *       ├── [slug]\n+ *          ├── layout.js\n+ *          ├── page.js\n+ **/\n+\n+export type TrieNode<Value = string> = {\n+  value?: Value\n+  children: {\n+    [key: string]: TrieNode<Value> | undefined\n+  }\n+}\n+\n+export type Trie<Value = string> = {\n+  insert: (value: Value) => void\n+  getRoot: () => TrieNode<Value>\n+}\n+\n+export function createTrie<Value = string>({\n+  getKey = (k) => k as unknown as string,\n+}: {\n+  getKey: (k: Value) => string\n+}): Trie<Value> {\n+  const root: TrieNode<Value> = {\n+    value: undefined,\n+    children: {},\n+  }\n+\n+  function insert(value: Value) {\n+    let currentNode = root\n+    const key = getKey(value)\n+    const segments = key.split('/')\n+\n+    for (const segment of segments) {\n+      if (!currentNode.children[segment]) {\n+        currentNode.children[segment] = {\n+          // Skip value for intermediate nodes\n+          children: {},\n+        }\n+      }\n+      currentNode = currentNode.children[segment]\n+    }\n+\n+    currentNode.value = value\n+  }\n+\n+  function getRoot(): TrieNode<Value> {\n+    return root\n+  }\n+\n+  return { insert, getRoot }\n+}"
        },
        {
            "sha": "716a8db36f52c5b3b068de4e1d3c3bd64290a8be",
            "filename": "test/development/app-dir/segment-explorer/app/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Flayout.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,9 @@\n+import { ReactNode } from 'react'\n+\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "e355998a4433c4d5dbc1dd3722978a2c5abe0b4a",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@bar/default.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Fdefault.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Fdefault.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Fdefault.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'default @bar'\n+}"
        },
        {
            "sha": "1e18e748cf81e93f454e9cd71ce7617948880703",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@bar/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Flayout.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Layout({ children }) {\n+  return (\n+    <div>\n+      <h2>@bar Layout</h2>\n+      <div id=\"bar-children\">{children}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "eb4a3e2e9df71d0f81f102128ee52511d9c00b22",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@bar/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Fpage.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'page @bar'\n+}"
        },
        {
            "sha": "bff087a3a98f99941044142b6601e0ffd4150fe7",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@bar/test-page/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Ftest-page%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Ftest-page%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40bar%2Ftest-page%2Fpage.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'test-page @bar'\n+}"
        },
        {
            "sha": "408576f1876b586e90b61480df9db74ef6568ea8",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@foo/default.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fdefault.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fdefault.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fdefault.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'default @foo'\n+}"
        },
        {
            "sha": "05a3bda4f7be80fce7cf6de65a53e33e8c9bab6f",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@foo/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Flayout.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Layout({ children }) {\n+  return (\n+    <div>\n+      <h2>@foo Layout</h2>\n+      <div id=\"foo-children\">{children}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "44ab40e2ddfce8edb4eacbe5002a952280294d72",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@foo/no-bar/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fno-bar%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fno-bar%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fno-bar%2Fpage.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'no-bar @foo'\n+}"
        },
        {
            "sha": "3536981cea3ff4875f8b1ffea941e755e6268832",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@foo/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Fpage.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'page @foo'\n+}"
        },
        {
            "sha": "8eff01dbe6deca778649eae4eacb6e07e14a0d3c",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/@foo/test-page/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Ftest-page%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Ftest-page%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2F%40foo%2Ftest-page%2Fpage.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'test-page @foo'\n+}"
        },
        {
            "sha": "088fb97919687fa7964eae4da038ec06dfe1b3b9",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/layout.tsx",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Flayout.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,10 @@\n+export default function Layout({ children, bar, foo }) {\n+  return (\n+    <div>\n+      <h1>Parallel Routes Layout</h1>\n+      <div id=\"nested-children\">{children}</div>\n+      <div id=\"foo-slot\">{foo}</div>\n+      <div id=\"bar-slot\">{bar}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "9674097ecd09818da92988cd3ea1a4bb1e88a781",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/no-bar/page.tsx",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Fno-bar%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Fno-bar%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Fno-bar%2Fpage.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,10 @@\n+import Link from 'next/link'\n+\n+export default function Page() {\n+  return (\n+    <div>\n+      <p>no bar</p>\n+      <Link href=\"/parallel-routes\">Back to /parallel-routes</Link>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "9a69fccf9db2e8c0456160872aae4b20e1d794c7",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/page.tsx",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Fpage.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,14 @@\n+import Link from 'next/link'\n+\n+export default function Page() {\n+  return (\n+    <div>\n+      Hello from Nested <br />\n+      <Link href=\"/parallel-routes/test-page\">\n+        To /parallel-routes/test-page\n+      </Link>\n+      <br />\n+      <Link href=\"/parallel-routes/no-bar\">To /parallel-routes/no-bar</Link>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "ee6b1571a5bfc7bff385367a4e635d649468517e",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes/test-page/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Ftest-page%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Ftest-page%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes%2Ftest-page%2Fpage.tsx?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,3 @@\n+export default function TestPage() {\n+  return 'test page'\n+}"
        },
        {
            "sha": "586102a1310fb4c419241bc187502603670e2a7a",
            "filename": "test/development/app-dir/segment-explorer/next.config.js",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0ca32b2b4a2cd3af19b042d6747d275013450bdd/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fnext.config.js?ref=0ca32b2b4a2cd3af19b042d6747d275013450bdd",
            "patch": "@@ -0,0 +1,10 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+const nextConfig = {\n+  experimental: {\n+    devtoolSegmentExplorer: true,\n+  },\n+}\n+\n+module.exports = nextConfig"
        }
    ],
    "stats": {
        "total": 609,
        "additions": 587,
        "deletions": 22
    }
}