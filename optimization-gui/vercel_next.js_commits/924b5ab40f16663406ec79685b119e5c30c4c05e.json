{
    "author": "eps1lon",
    "message": "[test] Only run build_and_deploy once for PRs from upstream (#80329)",
    "sha": "924b5ab40f16663406ec79685b119e5c30c4c05e",
    "files": [
        {
            "sha": "d9abde6f212ef6e14d0f7ce80972caae1980bdd8",
            "filename": ".github/workflows/build_and_deploy.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/924b5ab40f16663406ec79685b119e5c30c4c05e/.github%2Fworkflows%2Fbuild_and_deploy.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/924b5ab40f16663406ec79685b119e5c30c4c05e/.github%2Fworkflows%2Fbuild_and_deploy.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_deploy.yml?ref=924b5ab40f16663406ec79685b119e5c30c4c05e",
            "patch": "@@ -28,6 +28,9 @@ env:\n jobs:\n   deploy-target:\n     runs-on: ubuntu-latest\n+    # Don't trigger this job on `pull_request` events from upstream branches.\n+    # Those would already run this job on the `push` event\n+    if: ${{ github.event_name != 'pull_request' || github.event.pull_request.head.repo.fork }}\n     outputs:\n       value: ${{ steps.deploy-target.outputs.value }}\n     steps:\n@@ -693,7 +696,7 @@ jobs:\n \n   buildPassed:\n     needs: ['deploy-target', 'build', 'build-wasm', 'build-native']\n-    if: always()\n+    if: ${{ always() && needs.deploy-target.outputs.value != '' }}\n     name: thank you, build\n     runs-on: ubuntu-latest\n     steps:"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}