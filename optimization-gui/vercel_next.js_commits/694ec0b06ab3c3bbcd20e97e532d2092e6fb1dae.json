{
    "author": "ztanner",
    "message": "[tests]: add failing deploy test to manifest (#80973)\n\nFor the same reason we have the other `unstable_expire<x>` tests\ndisabled, this adds another one that has been frequently failing for us.\n([Linear x-ref](https://linear.app/vercel/issue/ENET-1729))\n\n`app-action-node-middleware` is also a duplicate of `app-action`, but\nwhen we created it, we did not copy over the manifest exclude list.",
    "sha": "694ec0b06ab3c3bbcd20e97e532d2092e6fb1dae",
    "files": [
        {
            "sha": "62c1bd105ffc0d54c49e0c7ed7db95ab89d3beb3",
            "filename": "test/deploy-tests-manifest.json",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/694ec0b06ab3c3bbcd20e97e532d2092e6fb1dae/test%2Fdeploy-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/694ec0b06ab3c3bbcd20e97e532d2092e6fb1dae/test%2Fdeploy-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdeploy-tests-manifest.json?ref=694ec0b06ab3c3bbcd20e97e532d2092e6fb1dae",
            "patch": "@@ -4,6 +4,14 @@\n     \"test/e2e/app-dir/actions/app-action.test.ts\": {\n       \"failed\": [\n         \"app-dir action handling fetch actions should invalidate client cache when path is revalidated\",\n+        \"app-dir action handling fetch actions should invalidate client cache when tag is revalidated\",\n+        \"app-dir action handling fetch actions should handle unstable_expireTag\"\n+      ]\n+    },\n+    \"test/e2e/app-dir/actions/app-action-node-middleware.test.ts\": {\n+      \"failed\": [\n+        \"app-dir action handling fetch actions should invalidate client cache when path is revalidated\",\n+        \"app-dir action handling fetch actions should invalidate client cache when tag is revalidated\",\n         \"app-dir action handling fetch actions should handle unstable_expireTag\"\n       ]\n     },"
        },
        {
            "sha": "bad2c5721b9deeae81e51ac282c35e9e2761565b",
            "filename": "test/e2e/app-dir/actions/app-action.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 14,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/694ec0b06ab3c3bbcd20e97e532d2092e6fb1dae/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/694ec0b06ab3c3bbcd20e97e532d2092e6fb1dae/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts?ref=694ec0b06ab3c3bbcd20e97e532d2092e6fb1dae",
            "patch": "@@ -10,7 +10,6 @@ import {\n import type { Request, Response } from 'playwright'\n import fs from 'node:fs/promises'\n import { join } from 'node:path'\n-import { setTimeout } from 'node:timers/promises'\n \n const GENERIC_RSC_ERROR =\n   'Error: An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.'\n@@ -1487,14 +1486,10 @@ describe('app-dir action handling', () => {\n           )\n         })\n \n-        // Should be the same number although in serverless it might be\n-        // eventually consistent.\n-        if (!isNextDeploy) {\n-          await retry(async () => {\n-            const another = await browser.elementByCss('#thankyounext').text()\n-            expect(another).toEqual(original)\n-          })\n-        }\n+        await retry(async () => {\n+          const another = await browser.elementByCss('#thankyounext').text()\n+          expect(another).toEqual(original)\n+        })\n \n         await browser.elementByCss('#back').click()\n         await retry(async () => {\n@@ -1512,11 +1507,6 @@ describe('app-dir action handling', () => {\n             throw new Error(`Invalid type: ${type}`)\n         }\n \n-        // Give some time for it to be revalidated.\n-        if (isNextDeploy) {\n-          await setTimeout(5000)\n-        }\n-\n         // Should be different\n         let revalidated\n         await retry(async () => {"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 12,
        "deletions": 14
    }
}