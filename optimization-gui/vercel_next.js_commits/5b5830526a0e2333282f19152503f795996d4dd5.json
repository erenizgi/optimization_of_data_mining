{
    "author": "acdlite",
    "message": "Update Activity names given to routes (#85155)\n\nIn practical terms, clicking the name of a route segment in the Suspense\nDevTools should select the child slots of that layout, because when you\nfocus on it, what you're interested in debugging are navigations that\noccur within the shared layout.\n\nSo the name we apply to the Activity boundary is actually based on the\nname of the *parent* segment.",
    "sha": "5b5830526a0e2333282f19152503f795996d4dd5",
    "files": [
        {
            "sha": "937eb6d037d149e0528641a477f70e837dbc765c",
            "filename": "packages/next/src/client/components/app-router.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/5b5830526a0e2333282f19152503f795996d4dd5/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/5b5830526a0e2333282f19152503f795996d4dd5/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router.tsx?ref=5b5830526a0e2333282f19152503f795996d4dd5",
            "patch": "@@ -435,6 +435,9 @@ function Router({\n       parentCacheNode: cache,\n       parentSegmentPath: null,\n       parentParams: {},\n+      // This is the <Activity> \"name\" that shows up in the Suspense DevTools.\n+      // It represents the root of the app.\n+      debugNameContext: '/',\n       // Root node always has `url`\n       // Provided in AppTreeContext to ensure it can be overwritten in layout-router\n       url: canonicalUrl,"
        },
        {
            "sha": "3ae70d20ab354af80fee98a970353e01b376f18d",
            "filename": "packages/next/src/client/components/layout-router.tsx",
            "status": "modified",
            "additions": 50,
            "deletions": 44,
            "changes": 94,
            "blob_url": "https://github.com/vercel/next.js/blob/5b5830526a0e2333282f19152503f795996d4dd5/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/5b5830526a0e2333282f19152503f795996d4dd5/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx?ref=5b5830526a0e2333282f19152503f795996d4dd5",
            "patch": "@@ -8,6 +8,7 @@ import type { LoadingModuleData } from '../../shared/lib/app-router-types'\n import type {\n   FlightRouterState,\n   FlightSegmentPath,\n+  Segment,\n } from '../../shared/lib/app-router-types'\n import type { ErrorComponent } from './error-boundary'\n import {\n@@ -23,6 +24,7 @@ import React, {\n   Suspense,\n   useDeferredValue,\n   type JSX,\n+  type ActivityProps,\n } from 'react'\n import ReactDOM from 'react-dom'\n import {\n@@ -338,13 +340,15 @@ function ScrollAndFocusHandler({\n function InnerLayoutRouter({\n   tree,\n   segmentPath,\n+  debugNameContext,\n   cacheNode,\n   params,\n   url,\n   isActive,\n }: {\n   tree: FlightRouterState\n   segmentPath: FlightSegmentPath\n+  debugNameContext: ActivityProps['name']\n   cacheNode: CacheNode\n   params: Params\n   url: string\n@@ -469,6 +473,7 @@ function InnerLayoutRouter({\n         parentCacheNode: cacheNode,\n         parentSegmentPath: segmentPath,\n         parentParams: params,\n+        debugNameContext: debugNameContext,\n \n         // TODO-APP: overriding of url for parallel routes\n         url: url,\n@@ -487,9 +492,11 @@ function InnerLayoutRouter({\n  * If no loading property is provided it renders the children without a suspense boundary.\n  */\n function LoadingBoundary({\n+  name,\n   loading,\n   children,\n }: {\n+  name: ActivityProps['name']\n   loading: LoadingModuleData | Promise<LoadingModuleData>\n   children: React.ReactNode\n }): JSX.Element {\n@@ -519,7 +526,7 @@ function LoadingBoundary({\n     const loadingScripts = loadingModuleData[2]\n     return (\n       <Suspense\n-        name=\"loading.tsx\"\n+        name={name}\n         fallback={\n           <>\n             {loadingStyles}\n@@ -577,6 +584,7 @@ export default function OuterLayoutRouter({\n     parentParams,\n     url,\n     isActive,\n+    debugNameContext: parentDebugNameContext,\n   } = context\n \n   // Get the CacheNode for this segment by reading it from the parent segment's\n@@ -696,6 +704,12 @@ export default function OuterLayoutRouter({\n       }\n     }\n \n+    const debugName = getBoundaryDebugNameFromSegment(segment)\n+    // `debugNameContext` represents the nearest non-\"virtual\" parent segment.\n+    // `getBoundaryDebugNameFromSegment` returns null for virtual segments.\n+    // So if `debugName` is null, the context is passed through unchanged.\n+    const debugNameContext = debugName ?? parentDebugNameContext\n+\n     // TODO: The loading module data for a segment is stored on the parent, then\n     // applied to each of that parent segment's parallel route slots. In the\n     // simple case where there's only one parallel route (the `children` slot),\n@@ -715,7 +729,7 @@ export default function OuterLayoutRouter({\n               errorStyles={errorStyles}\n               errorScripts={errorScripts}\n             >\n-              <LoadingBoundary loading={loadingModuleData}>\n+              <LoadingBoundary name={debugName} loading={loadingModuleData}>\n                 <HTTPAccessFallbackBoundary\n                   notFound={notFound}\n                   forbidden={forbidden}\n@@ -728,6 +742,7 @@ export default function OuterLayoutRouter({\n                       params={params}\n                       cacheNode={cacheNode}\n                       segmentPath={segmentPath}\n+                      debugNameContext={debugNameContext}\n                       isActive={isActive && stateKey === activeStateKey}\n                     />\n                     {segmentBoundaryTriggerNode}\n@@ -758,10 +773,17 @@ export default function OuterLayoutRouter({\n     }\n \n     if (process.env.__NEXT_CACHE_COMPONENTS) {\n-      const boundaryName = getBoundaryNameForSuspenseDevTools(tree)\n       child = (\n         <Activity\n-          name={boundaryName}\n+          // In practical terms, clicking this name in the Suspense DevTools\n+          // should select the child slots of that layout.\n+          //\n+          // So the name we apply to the Activity boundary is actually based on\n+          // the nearest parent segments.\n+          //\n+          // We skip over \"virtual\" parents, i.e. ones inserted by Next.js that\n+          // don't correspond to application-defined code.\n+          name={debugNameContext}\n           key={stateKey}\n           mode={stateKey === activeStateKey ? 'visible' : 'hidden'}\n         >\n@@ -778,49 +800,33 @@ export default function OuterLayoutRouter({\n   return children\n }\n \n-function getBoundaryNameForSuspenseDevTools(\n-  subtree: FlightRouterState\n-): string | undefined {\n-  const segment = subtree[0]\n-\n+function getBoundaryDebugNameFromSegment(segment: Segment): string | undefined {\n+  if (segment === '/') {\n+    // Reached the root\n+    return '/'\n+  }\n   if (typeof segment === 'string') {\n-    const children = subtree[1]\n-    const isPage = Object.keys(children).length === 0\n-    if (isPage) {\n-      // Page segment\n-      return '/'\n-    }\n-\n-    // Layout segment\n-\n-    // Skip over \"virtual\" layouts that don't correspond to app-\n-    // defined components.\n-    if (\n-      segment === '' ||\n-      // For some reason, the loader tree sometimes includes extra __PAGE__\n-      // \"layouts\" when part of a parallel route. But it's not a leaf node.\n-      // Otherwise, we wouldn't need this special case because pages are\n-      // always leaf nodes.\n-      // TODO: Investigate why the loader produces these fake page segments.\n-      segment.startsWith(PAGE_SEGMENT_KEY) ||\n-      // This is inserted by the loader. We should consider encoding these\n-      // in a more special way instead of checking the name, to distinguish them\n-      // from app-defined groups.\n-      segment[0] === '(virtual)'\n-    ) {\n+    if (isVirtualLayout(segment)) {\n       return undefined\n+    } else {\n+      return segment + '/'\n     }\n-\n-    if (segment === '/_not-found') {\n-      // Special case. For some reason, the name itself already has a\n-      // leading slash.\n-      return '/_not-found/'\n-    }\n-\n-    return `/${segment}/`\n   }\n-\n-  // Parameterized segments are always layouts\n   const paramCacheKey = segment[1]\n-  return `/${paramCacheKey}/`\n+  return paramCacheKey + '/'\n+}\n+\n+function isVirtualLayout(segment: string): boolean {\n+  return (\n+    // This is inserted by the loader. We should consider encoding these\n+    // in a more special way instead of checking the name, to distinguish them\n+    // from app-defined groups.\n+    segment === '(slot)' ||\n+    // For some reason, the loader tree sometimes includes extra __PAGE__\n+    // \"layouts\" when part of a parallel route. But it's not a leaf node.\n+    // Otherwise, we wouldn't need this special case because pages are\n+    // always leaf nodes.\n+    // TODO: Investigate why the loader produces these fake page segments.\n+    segment.startsWith(PAGE_SEGMENT_KEY)\n+  )\n }"
        },
        {
            "sha": "10de1aac05f1f77b46df97af4929c25ec67d6431",
            "filename": "packages/next/src/shared/lib/app-router-context.shared-runtime.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/5b5830526a0e2333282f19152503f795996d4dd5/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fapp-router-context.shared-runtime.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5b5830526a0e2333282f19152503f795996d4dd5/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fapp-router-context.shared-runtime.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fapp-router-context.shared-runtime.ts?ref=5b5830526a0e2333282f19152503f795996d4dd5",
            "patch": "@@ -63,6 +63,7 @@ export const LayoutRouterContext = React.createContext<{\n   parentCacheNode: CacheNode\n   parentSegmentPath: FlightSegmentPath | null\n   parentParams: Params\n+  debugNameContext: string | undefined\n   url: string\n   isActive: boolean\n } | null>(null)"
        },
        {
            "sha": "d266ef6d86127fd426bd186f82c9debe0a460a21",
            "filename": "test/development/acceptance-app/hydration-error.test.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 15,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/5b5830526a0e2333282f19152503f795996d4dd5/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5b5830526a0e2333282f19152503f795996d4dd5/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts?ref=5b5830526a0e2333282f19152503f795996d4dd5",
            "patch": "@@ -45,7 +45,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -107,7 +107,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -181,7 +181,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name=\"(extra-att...\" loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={<SegmentViewNode>} forbidden={undefined} unauthorized={undefined}>\n                      <HTTPAccessFallbackErrorBoundary pathname=\"/extra-att...\" notFound={<SegmentViewNode>} ...>\n                        <RedirectBoundary>\n@@ -221,7 +221,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -262,7 +262,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -300,7 +300,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -342,7 +342,7 @@ describe('Error overlay for hydration errors in App router', () => {\n          <ScrollAndFocusHandler segmentPath={[...]}>\n            <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n              <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-               <LoadingBoundary loading={null}>\n+               <LoadingBoundary name={undefined} loading={null}>\n                  <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                    <RedirectBoundary>\n                      <RedirectErrorBoundary router={{...}}>\n@@ -376,7 +376,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -415,7 +415,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -453,7 +453,7 @@ describe('Error overlay for hydration errors in App router', () => {\n        \"componentStack\": \"...\n          <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n            <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-             <LoadingBoundary loading={null}>\n+             <LoadingBoundary name={undefined} loading={null}>\n                <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                  <RedirectBoundary>\n                    <RedirectErrorBoundary router={{...}}>\n@@ -510,7 +510,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -566,7 +566,7 @@ describe('Error overlay for hydration errors in App router', () => {\n          <ScrollAndFocusHandler segmentPath={[...]}>\n            <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n              <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-               <LoadingBoundary loading={null}>\n+               <LoadingBoundary name={undefined} loading={null}>\n                  <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                    <RedirectBoundary>\n                      <RedirectErrorBoundary router={{...}}>\n@@ -625,7 +625,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -682,7 +682,7 @@ describe('Error overlay for hydration errors in App router', () => {\n            <ScrollAndFocusHandler segmentPath={[...]}>\n              <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                 <LoadingBoundary loading={null}>\n+                 <LoadingBoundary name={undefined} loading={null}>\n                    <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                      <RedirectBoundary>\n                        <RedirectErrorBoundary router={{...}}>\n@@ -966,7 +966,7 @@ describe('Error overlay for hydration errors in App router', () => {\n                <ScrollAndFocusHandler segmentPath={[...]}>\n                  <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                    <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                     <LoadingBoundary loading={null}>\n+                     <LoadingBoundary name=\"(script-un...\" loading={null}>\n                        <HTTPAccessFallbackBoundary notFound={<SegmentViewNode>} forbidden={undefined} unauthorized={undefined}>\n                          <HTTPAccessFallbackErrorBoundary pathname=\"/script-un...\" notFound={<SegmentViewNode>} ...>\n                            <RedirectBoundary>"
        },
        {
            "sha": "ba470b5b3359d8869c4f9d6fc5d2106117b8df47",
            "filename": "test/development/app-dir/hydration-error-count/hydration-error-count.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/5b5830526a0e2333282f19152503f795996d4dd5/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5b5830526a0e2333282f19152503f795996d4dd5/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts?ref=5b5830526a0e2333282f19152503f795996d4dd5",
            "patch": "@@ -17,7 +17,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>\n@@ -66,7 +66,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>\n@@ -120,7 +120,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>\n@@ -155,7 +155,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>\n@@ -197,7 +197,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>\n@@ -229,7 +229,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>\n@@ -267,7 +267,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>\n@@ -299,7 +299,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>\n@@ -343,7 +343,7 @@ describe('hydration-error-count', () => {\n              <ScrollAndFocusHandler segmentPath={[...]}>\n                <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n                  <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n+                   <LoadingBoundary name={undefined} loading={null}>\n                      <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n                        <RedirectBoundary>\n                          <RedirectErrorBoundary router={{...}}>"
        },
        {
            "sha": "8c119c650d2ff68bfc01dafd5c5769e0126b4fba",
            "filename": "test/e2e/app-dir/cache-components-errors/cache-components-errors.test.ts",
            "status": "modified",
            "additions": 24,
            "deletions": 24,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/5b5830526a0e2333282f19152503f795996d4dd5/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5b5830526a0e2333282f19152503f795996d4dd5/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts?ref=5b5830526a0e2333282f19152503f795996d4dd5",
            "patch": "@@ -238,13 +238,13 @@ describe('Cache Components Errors', () => {\n                    at ScrollAndFocusHandler (bundler:///<next-src>)\n                    at RenderFromTemplateContext (bundler:///<next-src>)\n                    at OuterLayoutRouter (bundler:///<next-src>)\n-                 337 |  */\n-                 338 | function InnerLayoutRouter({\n-               > 339 |   tree,\n+                 340 |  */\n+                 341 | function InnerLayoutRouter({\n+               > 342 |   tree,\n                      |   ^\n-                 340 |   segmentPath,\n-                 341 |   cacheNode,\n-                 342 |   params,\n+                 343 |   segmentPath,\n+                 344 |   debugNameContext,\n+                 345 |   cacheNode,\n                To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/dynamic-metadata-error-route\" in your browser to investigate the error.\n                Error occurred prerendering page \"/dynamic-metadata-error-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n \n@@ -745,13 +745,13 @@ describe('Cache Components Errors', () => {\n                    at ScrollAndFocusHandler (bundler:///<next-src>)\n                    at RenderFromTemplateContext (bundler:///<next-src>)\n                    at OuterLayoutRouter (bundler:///<next-src>)\n-                 337 |  */\n-                 338 | function InnerLayoutRouter({\n-               > 339 |   tree,\n+                 340 |  */\n+                 341 | function InnerLayoutRouter({\n+               > 342 |   tree,\n                      |   ^\n-                 340 |   segmentPath,\n-                 341 |   cacheNode,\n-                 342 |   params,\n+                 343 |   segmentPath,\n+                 344 |   debugNameContext,\n+                 345 |   cacheNode,\n                To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/dynamic-root\" in your browser to investigate the error.\n                Error occurred prerendering page \"/dynamic-root\". Read more: https://nextjs.org/docs/messages/prerender-error\n \n@@ -2141,13 +2141,13 @@ describe('Cache Components Errors', () => {\n                      at ScrollAndFocusHandler (bundler:///<next-src>)\n                      at RenderFromTemplateContext (<anonymous>)\n                      at OuterLayoutRouter (bundler:///<next-src>)\n-                   337 |  */\n-                   338 | function InnerLayoutRouter({\n-                 > 339 |   tree,\n+                   340 |  */\n+                   341 | function InnerLayoutRouter({\n+                 > 342 |   tree,\n                        |   ^\n-                   340 |   segmentPath,\n-                   341 |   cacheNode,\n-                   342 |   params,\n+                   343 |   segmentPath,\n+                   344 |   debugNameContext,\n+                   345 |   cacheNode,\n                  To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-attribution/unguarded-async-guarded-clientsync\" in your browser to investigate the error.\n                  Error occurred prerendering page \"/sync-attribution/unguarded-async-guarded-clientsync\". Read more: https://nextjs.org/docs/messages/prerender-error\n \n@@ -3157,13 +3157,13 @@ describe('Cache Components Errors', () => {\n                      at ScrollAndFocusHandler (bundler:///<next-src>)\n                      at RenderFromTemplateContext (bundler:///<next-src>)\n                      at OuterLayoutRouter (bundler:///<next-src>)\n-                   337 |  */\n-                   338 | function InnerLayoutRouter({\n-                 > 339 |   tree,\n+                   340 |  */\n+                   341 | function InnerLayoutRouter({\n+                 > 342 |   tree,\n                        |   ^\n-                   340 |   segmentPath,\n-                   341 |   cacheNode,\n-                   342 |   params,\n+                   343 |   segmentPath,\n+                   344 |   debugNameContext,\n+                   345 |   cacheNode,\n                  To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-private-without-suspense\" in your browser to investigate the error.\n                  Error occurred prerendering page \"/use-cache-private-without-suspense\". Read more: https://nextjs.org/docs/messages/prerender-error\n "
        }
    ],
    "stats": {
        "total": 194,
        "additions": 102,
        "deletions": 92
    }
}