{
    "author": "gaojude",
    "message": "Remove hmr socket code from prod build (#76232)\n\nFollow up to https://github.com/vercel/next.js/pull/54078, we wouldn't\nwant HMR related code in production bundle. Relates to\nhttps://github.com/vercel/next.js/issues/76198 but doesn't solve that\ncompletely.\n\n----\n<table>\n  <tr>\n<td><img\nsrc=\"https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/rKSEEwxbNzdFs9t0yyxN/5ed4dfeb-5bc6-4e14-a1e8-efef2d0e0066.png\"\nwidth=\"300\"/></td>\n<td><img\nsrc=\"https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/rKSEEwxbNzdFs9t0yyxN/38e382b2-718d-4a09-b55a-6df8b4865614.png\"\nwidth=\"300\"/></td>\n  </tr>\n  <tr>\n<td colspan=\"2\" style=\"text-align: center;\">Size reduced from 122KB to\n119KB for a trivial app router application.</td>\n  </tr>\n</table>",
    "sha": "357361bcea604f2191ef5f370b515c13e455ec88",
    "files": [
        {
            "sha": "9fc2974c95c98bce994b9fb7162b6808395e638f",
            "filename": "packages/next/src/client/index.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/357361bcea604f2191ef5f370b515c13e455ec88/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/357361bcea604f2191ef5f370b515c13e455ec88/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx?ref=357361bcea604f2191ef5f370b515c13e455ec88",
            "patch": "@@ -47,7 +47,6 @@ import {\n } from '../shared/lib/hooks-client-context.shared-runtime'\n import { onRecoverableError } from './react-client-callbacks/on-recoverable-error'\n import tracer from './tracing/tracer'\n-import reportToSocket from './tracing/report-to-socket'\n import { isNextRouterError } from './components/is-next-router-error'\n \n /// <reference types=\"react-dom/experimental\" />\n@@ -189,10 +188,13 @@ class Container extends React.Component<{\n export async function initialize(opts: { devClient?: any } = {}): Promise<{\n   assetPrefix: string\n }> {\n-  tracer.onSpanEnd(reportToSocket)\n-\n   // This makes sure this specific lines are removed in production\n   if (process.env.NODE_ENV === 'development') {\n+    tracer.onSpanEnd(\n+      (\n+        require('./tracing/report-to-socket') as typeof import('./tracing/report-to-socket')\n+      ).default\n+    )\n     devClient = opts.devClient\n   }\n "
        }
    ],
    "stats": {
        "total": 8,
        "additions": 5,
        "deletions": 3
    }
}