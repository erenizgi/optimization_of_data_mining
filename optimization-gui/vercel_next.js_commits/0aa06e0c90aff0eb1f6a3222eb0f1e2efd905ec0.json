{
    "author": "mischnic",
    "message": "Better failure tracking for middleware-custom-matchers-i18n (#76974)\n\nThese are actually separate tests cases. Turbopack build really only\nfails one of them (the one with `locale: false`)",
    "sha": "0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0",
    "files": [
        {
            "sha": "9f7fd6d9d31a752905d0e756542bfa41fe0b77a3",
            "filename": "test/e2e/middleware-custom-matchers-i18n/test/index.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Fe2e%2Fmiddleware-custom-matchers-i18n%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Fe2e%2Fmiddleware-custom-matchers-i18n%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fmiddleware-custom-matchers-i18n%2Ftest%2Findex.test.ts?ref=0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0",
            "patch": "@@ -22,16 +22,17 @@ describe('Middleware custom matchers i18n', () => {\n   afterAll(() => next.destroy())\n \n   it.each(['/hello', '/en/hello', '/nl-NL/hello', '/nl-NL/about'])(\n-    'should match',\n+    'should match %s',\n     async (path) => {\n       const res = await fetchViaHTTP(next.url, path)\n+      console.log(res.status)\n       expect(res.status).toBe(200)\n       expect(res.headers.get('x-from-middleware')).toBeDefined()\n     }\n   )\n \n   it.each(['/invalid/hello', '/hello/invalid', '/about', '/en/about'])(\n-    'should not match',\n+    'should not match %s',\n     async (path) => {\n       const res = await fetchViaHTTP(next.url, path)\n       expect(res.status).toBe(404)\n@@ -41,7 +42,7 @@ describe('Middleware custom matchers i18n', () => {\n   // FIXME:\n   // See https://linear.app/vercel/issue/EC-160/header-value-set-on-middleware-is-not-propagated-on-client-request-of\n   itif(!isModeDeploy).each(['hello', 'en_hello', 'nl-NL_hello', 'nl-NL_about'])(\n-    'should match has query on client routing',\n+    'should match has query on client routing %s',\n     async (id) => {\n       const browser = await webdriver(next.url, '/routes')\n       await browser.eval('window.__TEST_NO_RELOAD = true')"
        },
        {
            "sha": "dc3feb293a086a11eb22112ef79df40c6b84a764",
            "filename": "test/rspack-build-tests-manifest.json",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Frspack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Frspack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-build-tests-manifest.json?ref=0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0",
            "patch": "@@ -6691,8 +6691,20 @@\n   },\n   \"test/e2e/middleware-custom-matchers-i18n/test/index.test.ts\": {\n     \"passed\": [\n-      \"Middleware custom matchers i18n should match\",\n-      \"Middleware custom matchers i18n should match has query on client routing\",\n+      \"Middleware custom matchers i18n should not match\",\n+      \"Middleware custom matchers with root should not match\",\n+      \"Middleware custom matchers i18n should match /hello\",\n+      \"Middleware custom matchers i18n should match /en/hello\",\n+      \"Middleware custom matchers i18n should match /nl-NL/hello\",\n+      \"Middleware custom matchers i18n should match /nl-NL/about\",\n+      \"Middleware custom matchers i18n should not match /invalid/hello\",\n+      \"Middleware custom matchers i18n should not match /hello/invalid\",\n+      \"Middleware custom matchers i18n should not match /about\",\n+      \"Middleware custom matchers i18n should not match /en/about\",\n+      \"Middleware custom matchers i18n should match has query on client routing hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing en_hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing nl-NL_hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing nl-NL_about\",\n       \"Middleware custom matchers i18n should not match\",\n       \"Middleware custom matchers with root should not match\"\n     ],"
        },
        {
            "sha": "f4c21df82c77d68cec66271426d9733cd2b3eb52",
            "filename": "test/rspack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Frspack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Frspack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-dev-tests-manifest.json?ref=0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0",
            "patch": "@@ -9954,8 +9954,20 @@\n   },\n   \"test/e2e/middleware-custom-matchers-i18n/test/index.test.ts\": {\n     \"passed\": [\n-      \"Middleware custom matchers i18n should match\",\n-      \"Middleware custom matchers i18n should match has query on client routing\",\n+      \"Middleware custom matchers i18n should not match\",\n+      \"Middleware custom matchers with root should not match\",\n+      \"Middleware custom matchers i18n should match /hello\",\n+      \"Middleware custom matchers i18n should match /en/hello\",\n+      \"Middleware custom matchers i18n should match /nl-NL/hello\",\n+      \"Middleware custom matchers i18n should match /nl-NL/about\",\n+      \"Middleware custom matchers i18n should not match /invalid/hello\",\n+      \"Middleware custom matchers i18n should not match /hello/invalid\",\n+      \"Middleware custom matchers i18n should not match /about\",\n+      \"Middleware custom matchers i18n should not match /en/about\",\n+      \"Middleware custom matchers i18n should match has query on client routing hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing en_hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing nl-NL_hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing nl-NL_about\",\n       \"Middleware custom matchers i18n should not match\",\n       \"Middleware custom matchers with root should not match\"\n     ],"
        },
        {
            "sha": "04401b76716788ca420ac73a08d953122dbcd4c1",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 13,
            "deletions": 3,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0",
            "patch": "@@ -6617,11 +6617,21 @@\n   \"test/e2e/middleware-custom-matchers-i18n/test/index.test.ts\": {\n     \"passed\": [\n       \"Middleware custom matchers i18n should not match\",\n-      \"Middleware custom matchers with root should not match\"\n+      \"Middleware custom matchers with root should not match\",\n+      \"Middleware custom matchers i18n should match /hello\",\n+      \"Middleware custom matchers i18n should match /en/hello\",\n+      \"Middleware custom matchers i18n should match /nl-NL/hello\",\n+      \"Middleware custom matchers i18n should not match /invalid/hello\",\n+      \"Middleware custom matchers i18n should not match /hello/invalid\",\n+      \"Middleware custom matchers i18n should not match /about\",\n+      \"Middleware custom matchers i18n should not match /en/about\",\n+      \"Middleware custom matchers i18n should match has query on client routing hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing en_hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing nl-NL_hello\"\n     ],\n     \"failed\": [\n-      \"Middleware custom matchers i18n should match\",\n-      \"Middleware custom matchers i18n should match has query on client routing\"\n+      \"Middleware custom matchers i18n should match /nl-NL/about\",\n+      \"Middleware custom matchers i18n should match has query on client routing nl-NL_about\"\n     ],\n     \"pending\": [],\n     \"flakey\": [],"
        },
        {
            "sha": "981046e49c4281c508c0a9d21978d5b7635b5e52",
            "filename": "test/turbopack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Fturbopack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0/test%2Fturbopack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-dev-tests-manifest.json?ref=0aa06e0c90aff0eb1f6a3222eb0f1e2efd905ec0",
            "patch": "@@ -9810,8 +9810,20 @@\n   },\n   \"test/e2e/middleware-custom-matchers-i18n/test/index.test.ts\": {\n     \"passed\": [\n-      \"Middleware custom matchers i18n should match\",\n-      \"Middleware custom matchers i18n should match has query on client routing\",\n+      \"Middleware custom matchers i18n should not match\",\n+      \"Middleware custom matchers with root should not match\",\n+      \"Middleware custom matchers i18n should match /hello\",\n+      \"Middleware custom matchers i18n should match /en/hello\",\n+      \"Middleware custom matchers i18n should match /nl-NL/hello\",\n+      \"Middleware custom matchers i18n should match /nl-NL/about\",\n+      \"Middleware custom matchers i18n should not match /invalid/hello\",\n+      \"Middleware custom matchers i18n should not match /hello/invalid\",\n+      \"Middleware custom matchers i18n should not match /about\",\n+      \"Middleware custom matchers i18n should not match /en/about\",\n+      \"Middleware custom matchers i18n should match has query on client routing hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing en_hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing nl-NL_hello\",\n+      \"Middleware custom matchers i18n should match has query on client routing nl-NL_about\",\n       \"Middleware custom matchers i18n should not match\",\n       \"Middleware custom matchers with root should not match\"\n     ],"
        }
    ],
    "stats": {
        "total": 71,
        "additions": 59,
        "deletions": 12
    }
}