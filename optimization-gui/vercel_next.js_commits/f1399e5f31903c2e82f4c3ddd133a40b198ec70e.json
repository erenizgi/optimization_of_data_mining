{
    "author": "eps1lon",
    "message": "[test] Unflake back-forward-cache test (#80250)",
    "sha": "f1399e5f31903c2e82f4c3ddd133a40b198ec70e",
    "files": [
        {
            "sha": "1ec2eab12b1d539b55d8364dd2ea08e182e8b52c",
            "filename": "test/e2e/app-dir/back-forward-cache/back-forward-cache.test.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 6,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/f1399e5f31903c2e82f4c3ddd133a40b198ec70e/test%2Fe2e%2Fapp-dir%2Fback-forward-cache%2Fback-forward-cache.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f1399e5f31903c2e82f4c3ddd133a40b198ec70e/test%2Fe2e%2Fapp-dir%2Fback-forward-cache%2Fback-forward-cache.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fback-forward-cache%2Fback-forward-cache.test.ts?ref=f1399e5f31903c2e82f4c3ddd133a40b198ec70e",
            "patch": "@@ -139,6 +139,9 @@ describe('back/forward cache', () => {\n   it('bfcache only preserves up to N entries', async () => {\n     // The current limit is hardcoded to 3.\n     const browser = await next.browser('/page/1')\n+    await retry(async () => {\n+      expect(await browser.elementByCss('h2').text()).toEqual('Page 1')\n+    })\n \n     // Accumulate some state on page 1.\n     await retry(async () => {\n@@ -157,6 +160,9 @@ describe('back/forward cache', () => {\n     // Navigate to page 2. Accumulate some state here, too.\n     const linkToPage2 = await browser.elementByCss('a[href=\"/page/2\"]')\n     await linkToPage2.click()\n+    await retry(async () => {\n+      expect(await browser.elementByCss('h2').text()).toEqual('Page 2')\n+    })\n \n     const incrementButton2 = await browser.elementById('increment-button-2')\n     const counterDisplay2 = await browser.elementById('counter-display-2')\n@@ -174,27 +180,37 @@ describe('back/forward cache', () => {\n     // Navigate to 2 additional pages.\n     const linkToPage3 = await browser.elementByCss('a[href=\"/page/3\"]')\n     await linkToPage3.click()\n+    await retry(async () => {\n+      expect(await browser.elementByCss('h2').text()).toEqual('Page 3')\n+    })\n     const linkToPage4 = await browser.elementByCss('a[href=\"/page/4\"]')\n     await linkToPage4.click()\n+    await retry(async () => {\n+      expect(await browser.elementByCss('h2').text()).toEqual('Page 4')\n+    })\n \n     // The bfcache size is now 4. Because the limit is 3, page 1 should have\n     // been evicted, but not page 2.\n \n     // Navigate to page 2 to confirm its state is preserved.\n     await linkToPage2.click()\n+    await retry(async () => {\n+      expect(await browser.elementByCss('h2').text()).toEqual('Page 2')\n+    })\n     const counterDisplay2AfterNav =\n       await browser.elementById('counter-display-2')\n     expect(await counterDisplay2AfterNav.text()).toBe('Count: 9')\n \n     // Navigate back to page 1 to confirm its state is not preserved.\n+    const linkToPage1 = await browser.elementByCss('a[href=\"/page/1\"]')\n+    await linkToPage1.click()\n     await retry(async () => {\n-      const linkToPage1 = await browser.elementByCss('a[href=\"/page/1\"]')\n-      await linkToPage1.click()\n-\n-      const counterDisplay1AfterNav =\n-        await browser.elementById('counter-display-1')\n-      expect(await counterDisplay1AfterNav.text()).toBe('Count: 0')\n+      expect(await browser.elementByCss('h2').text()).toEqual('Page 1')\n     })\n+\n+    const counterDisplay1AfterNav =\n+      await browser.elementById('counter-display-1')\n+    expect(await counterDisplay1AfterNav.text()).toBe('Count: 0')\n   })\n \n   it('navigate back and forth repeatedly between the same pages without evicting', async () => {"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 22,
        "deletions": 6
    }
}