{
    "author": "devjiwonchoi",
    "message": "[dev-overlay] docs: add readme (#76396)\n\nThis PR added the README for the dev overlay for future contributors.\n\n[**View\nPreview**](https://github.com/vercel/next.js/blob/9136b280a3e194b81c1ea9e4aa7236eeb895a843/packages/next/src/client/components/react-dev-overlay/README.md)\n\nCloses NDX-656\n\n---------\n\nCo-authored-by: Lee Robinson <lee@leerob.com>",
    "sha": "b84bd5221b3bfc37c95e2537f1a2a42483da1f0e",
    "files": [
        {
            "sha": "570776c1f8940a493be4691ce84608ad571a59b4",
            "filename": "contributing/core/developing.md",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/b84bd5221b3bfc37c95e2537f1a2a42483da1f0e/contributing%2Fcore%2Fdeveloping.md",
            "raw_url": "https://github.com/vercel/next.js/raw/b84bd5221b3bfc37c95e2537f1a2a42483da1f0e/contributing%2Fcore%2Fdeveloping.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/contributing%2Fcore%2Fdeveloping.md?ref=b84bd5221b3bfc37c95e2537f1a2a42483da1f0e",
            "patch": "@@ -98,6 +98,10 @@ Afterwards, you'll need to unpack the tarball into your test project. You can ei\n $ pnpm unpack-next path/to/project\n ```\n \n+## Developing the Dev Overlay\n+\n+The dev overlay is a feature of Next.js that allows you to see the internal state of the app including the errors. To learn more about contributing to the dev overlay, see the [Dev Overlay README.md](../../packages/next/src/client/components/react-dev-overlay/README.md).\n+\n ## Recover disk space\n \n Rust builds quickly add up to a lot of disk space, you can clean up old artifacts with this command:"
        },
        {
            "sha": "e9990b6bcb21b29ad92294e189428d8f7efe9d37",
            "filename": "packages/next/src/client/components/react-dev-overlay/README.md",
            "status": "modified",
            "additions": 66,
            "deletions": 5,
            "changes": 71,
            "blob_url": "https://github.com/vercel/next.js/blob/b84bd5221b3bfc37c95e2537f1a2a42483da1f0e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2FREADME.md",
            "raw_url": "https://github.com/vercel/next.js/raw/b84bd5221b3bfc37c95e2537f1a2a42483da1f0e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2FREADME.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2FREADME.md?ref=b84bd5221b3bfc37c95e2537f1a2a42483da1f0e",
            "patch": "@@ -1,10 +1,71 @@\n-TODO\n+# Dev Overlay\n \n-### Folder Structure\n+## Project Structure\n \n-- `ui` - This should be isolated from the rest of the codebase to make it easier to be excluded from compiliation and be bundled.\n+- `app/` - Main entrypoint and related files for App Router dev overlay.\n+- `font/` - Includes Geist fonts that will be served to the client via the internal `/__nextjs_font/...` route.\n+- `pages/` - Main entrypoint and related files for Pages Router dev overlay.\n+- `server/` - Source files related to the dev overlay that are to run on the server and not sent to the client.\n+- `ui/` - Main source files that build the UI of the dev overlay. It is recommended to keep this directory isolated from the rest of the codebase to make it easier to be excluded from compiliation and be bundled in the future.\n+- `utils/` - Utils that can also be used outside of this project unlike the ones inside the `ui/` directory.\n+\n+## Development\n+\n+The dev overlay leverages [Shadow DOM](https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_shadow_DOM) to insert the dev overlay into the client without affecting the user's application through encapsulation from CSS.\n+\n+### Local Development\n+\n+Next.js uses [Storybook](https://storybook.js.org) to develop UI components in the dev overlay.\n+\n+To run the dev overlay locally, you can run the following command:\n+\n+```bash\n+pnpm storybook\n+```\n+\n+This will start the Storybook server at `http://localhost:6006`.\n \n ### Styling\n \n-- The entrypoint needs to use `css` util that minifies styles.\n-  - Entrypoint is which are using `<style>` tag to inject styles.\n+Next.js direcly injects CSS into the DOM via `<style>` tag. The styles will not affect the user's application as the [styles are encapsulated](https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_shadow_DOM#encapsulation_from_css) from the rest of the application.\n+\n+> [!TIP]\n+> While Shadow DOM provides style encapsulation, the root element (i.e., `<nextjs-portal>`) can still inherit styles from parent elements like `<body>` or `<html>`. Direct styling on these parent elements (e.g., `body { contain: layout; }`) will affect the dev overlay.\n+\n+Write CSS in template literals alongside your components. It is recommended to use the class names that are unique within the dev overlay to avoid conflicts. You can use `data-nextjs-` data attributes to target the elements in the dev overlay.\n+\n+```tsx\n+export function Component() {\n+  return (\n+    <div className=\"some-unique-class-name\">\n+      <h1>Hello, Next.js!</h1>\n+    </div>\n+  )\n+}\n+\n+export const COMPONENT_NAME_STYLES = `\n+  .some-unique-class-name {\n+    background-color: red;\n+  }\n+`\n+```\n+\n+> [!IMPORTANT]\n+> Use the `css()` util that minifies and removes the comments before injecting to the `<style>` tag.\n+\n+The exported `COMPONENT_NAME_STYLES` can be used in the styles entrypoint (i.e., `ComponentStyles`) of the dev overlay to inject into the `<style>` tag.\n+\n+```tsx\n+import { COMPONENT_NAME_STYLES } from './component'\n+\n+export function ComponentStyles() {\n+  return (\n+    <style>\n+      {css`\n+        // ...\n+        ${COMPONENT_NAME_STYLES}\n+      `}\n+    </style\n+  )\n+}\n+```"
        },
        {
            "sha": "0cfc5c62e81774ebf6ab732f1f9a104460c54f01",
            "filename": "scripts/run-for-change.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/b84bd5221b3bfc37c95e2537f1a2a42483da1f0e/scripts%2Frun-for-change.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b84bd5221b3bfc37c95e2537f1a2a42483da1f0e/scripts%2Frun-for-change.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/scripts%2Frun-for-change.js?ref=b84bd5221b3bfc37c95e2537f1a2a42483da1f0e",
            "patch": "@@ -33,6 +33,7 @@ const CHANGE_ITEM_GROUPS = {\n     'packages/create-next-app/README.md',\n     'packages/font/README.md',\n     'packages/next-env/README.md',\n+    'packages/next/src/client/components/react-dev-overlay/README.md',\n   ],\n   'deploy-examples': ['examples/image-component'],\n   cna: ["
        }
    ],
    "stats": {
        "total": 76,
        "additions": 71,
        "deletions": 5
    }
}