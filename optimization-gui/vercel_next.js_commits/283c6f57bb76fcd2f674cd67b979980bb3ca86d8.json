{
    "author": "eps1lon",
    "message": "[next-upgrade] Force install of dev dependencies (#86119)",
    "sha": "283c6f57bb76fcd2f674cd67b979980bb3ca86d8",
    "files": [
        {
            "sha": "b28cf531c4dfe0acf80bbfbc30cb41ef18e79f83",
            "filename": "packages/next-codemod/lib/handle-package.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/283c6f57bb76fcd2f674cd67b979980bb3ca86d8/packages%2Fnext-codemod%2Flib%2Fhandle-package.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/283c6f57bb76fcd2f674cd67b979980bb3ca86d8/packages%2Fnext-codemod%2Flib%2Fhandle-package.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Flib%2Fhandle-package.ts?ref=283c6f57bb76fcd2f674cd67b979980bb3ca86d8",
            "patch": "@@ -123,6 +123,13 @@ export function runInstallation(\n   try {\n     execa.sync(packageManager, ['install'], {\n       cwd: options.cwd,\n+      env: {\n+        ...process.env,\n+        // In case NODE_ENV=production is set, we still want dev dependencies to\n+        // be installed. Otherwise we won't be able to check for peer dependencies.\n+        // --production=false is not implemented by every package manager.\n+        NODE_ENV: 'development',\n+      },\n       stdio: 'inherit',\n       shell: true,\n     })"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 7,
        "deletions": 0
    }
}