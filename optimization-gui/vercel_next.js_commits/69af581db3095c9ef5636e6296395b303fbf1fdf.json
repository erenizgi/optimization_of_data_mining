{
    "author": "timneutkens",
    "message": "Remove pages export as it is unused (#82990)\n\n## What?\n\nAs far as I can tell there's no usage of this variable. No TS errors and\nall tests pass.",
    "sha": "69af581db3095c9ef5636e6296395b303fbf1fdf",
    "files": [
        {
            "sha": "9ed70cc2dc020d2fa9cf3d67e0fd53d60a66f963",
            "filename": "crates/next-core/src/app_page_loader_tree.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/69af581db3095c9ef5636e6296395b303fbf1fdf/crates%2Fnext-core%2Fsrc%2Fapp_page_loader_tree.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/69af581db3095c9ef5636e6296395b303fbf1fdf/crates%2Fnext-core%2Fsrc%2Fapp_page_loader_tree.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fapp_page_loader_tree.rs?ref=69af581db3095c9ef5636e6296395b303fbf1fdf",
            "patch": "@@ -27,7 +27,6 @@ use crate::{\n pub struct AppPageLoaderTreeBuilder {\n     base: BaseLoaderTreeBuilder,\n     loader_tree_code: String,\n-    pages: Vec<FileSystemPath>,\n     /// next.config.js' basePath option to construct og metadata.\n     base_path: Option<RcStr>,\n }\n@@ -41,7 +40,6 @@ impl AppPageLoaderTreeBuilder {\n         AppPageLoaderTreeBuilder {\n             base: BaseLoaderTreeBuilder::new(module_asset_context, server_component_transition),\n             loader_tree_code: String::new(),\n-            pages: Vec::new(),\n             base_path,\n         }\n     }\n@@ -52,10 +50,6 @@ impl AppPageLoaderTreeBuilder {\n         path: Option<FileSystemPath>,\n     ) -> Result<()> {\n         if let Some(path) = path {\n-            if matches!(module_type, AppDirModuleType::Page) {\n-                self.pages.push(path.clone());\n-            }\n-\n             let tuple_code = self\n                 .base\n                 .create_module_tuple_code(module_type, path)\n@@ -427,7 +421,6 @@ impl AppPageLoaderTreeBuilder {\n             imports: self.base.imports,\n             loader_tree_code: self.loader_tree_code.into(),\n             inner_assets: self.base.inner_assets,\n-            pages: self.pages,\n         })\n     }\n }\n@@ -436,7 +429,6 @@ pub struct AppPageLoaderTreeModule {\n     pub imports: Vec<RcStr>,\n     pub loader_tree_code: RcStr,\n     pub inner_assets: FxIndexMap<RcStr, ResolvedVc<Box<dyn Module>>>,\n-    pub pages: Vec<FileSystemPath>,\n }\n \n impl AppPageLoaderTreeModule {"
        },
        {
            "sha": "d23ac1e558b80502cc6b7bdb315db3cb14d48e06",
            "filename": "crates/next-core/src/next_app/app_page_entry.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 13,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/69af581db3095c9ef5636e6296395b303fbf1fdf/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/69af581db3095c9ef5636e6296395b303fbf1fdf/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs?ref=69af581db3095c9ef5636e6296395b303fbf1fdf",
            "patch": "@@ -2,7 +2,7 @@ use std::io::Write;\n \n use anyhow::Result;\n use turbo_rcstr::RcStr;\n-use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc, fxindexmap};\n+use turbo_tasks::{ResolvedVc, Vc, fxindexmap};\n use turbo_tasks_fs::{self, File, FileSystemPath, rope::RopeBuilder};\n use turbopack::ModuleAssetContext;\n use turbopack_core::{\n@@ -13,10 +13,7 @@ use turbopack_core::{\n     source::Source,\n     virtual_source::VirtualSource,\n };\n-use turbopack_ecmascript::{\n-    runtime_functions::{TURBOPACK_LOAD, TURBOPACK_REQUIRE},\n-    utils::StringifyJs,\n-};\n+use turbopack_ecmascript::runtime_functions::{TURBOPACK_LOAD, TURBOPACK_REQUIRE};\n \n use super::app_entry::AppEntry;\n use crate::{\n@@ -64,7 +61,6 @@ pub async fn get_app_page_entry(\n         inner_assets,\n         imports,\n         loader_tree_code,\n-        pages,\n     } = loader_tree;\n \n     let mut result = RopeBuilder::default();\n@@ -73,12 +69,6 @@ pub async fn get_app_page_entry(\n         writeln!(result, \"{import}\")?;\n     }\n \n-    let pages = pages\n-        .iter()\n-        .map(|page| page.value_to_string())\n-        .try_join()\n-        .await?;\n-\n     let original_name: RcStr = page.to_string().into();\n     let pathname: RcStr = AppPath::from(page.clone()).to_string().into();\n \n@@ -100,7 +90,6 @@ pub async fn get_app_page_entry(\n         ],\n         &[\n             (\"tree\", &*loader_tree_code),\n-            (\"pages\", &StringifyJs(&pages).to_string()),\n             (\"__next_app_require__\", &TURBOPACK_REQUIRE.bound()),\n             (\"__next_app_load_chunk__\", &TURBOPACK_LOAD.bound()),\n         ],"
        },
        {
            "sha": "38ea9012d7a964bebffb5809373e4c45233ebe83",
            "filename": "packages/next/src/build/templates/app-page.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/69af581db3095c9ef5636e6296395b303fbf1fdf/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/69af581db3095c9ef5636e6296395b303fbf1fdf/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts?ref=69af581db3095c9ef5636e6296395b303fbf1fdf",
            "patch": "@@ -63,14 +63,10 @@ import { NoFallbackError } from '../../shared/lib/no-fallback-error.external'\n  * and I've updated it.\n  */\n declare const tree: LoaderTree\n-declare const pages: any\n \n // We inject the tree and pages here so that we can use them in the route\n // module.\n // INJECT:tree\n-// INJECT:pages\n-\n-export { pages }\n \n import GlobalError from 'VAR_MODULE_GLOBAL_ERROR' with { 'turbopack-transition': 'next-server-utility' }\n \n@@ -334,7 +330,6 @@ export async function handler(\n   const ComponentMod = {\n     ...entryBase,\n     tree,\n-    pages,\n     GlobalError,\n     handler,\n     routeModule,"
        },
        {
            "sha": "ab804c9a1d7b2e29e39413ad1a2276e38e6670cc",
            "filename": "packages/next/src/build/webpack/loaders/next-app-loader/index.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/69af581db3095c9ef5636e6296395b303fbf1fdf/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-app-loader%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/69af581db3095c9ef5636e6296395b303fbf1fdf/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-app-loader%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-app-loader%2Findex.ts?ref=69af581db3095c9ef5636e6296395b303fbf1fdf",
            "patch": "@@ -152,7 +152,6 @@ async function createTreeCodeFromPath(\n   }\n ): Promise<{\n   treeCode: string\n-  pages: string\n   rootLayout: string | undefined\n   globalError: string\n   globalNotFound: string\n@@ -163,7 +162,6 @@ async function createTreeCodeFromPath(\n   const isDefaultNotFound = isAppBuiltinPage(pagePath)\n \n   const appDirPrefix = isDefaultNotFound ? APP_DIR_ALIAS : splittedPath[0]\n-  const pages: string[] = []\n \n   let rootLayout: string | undefined\n   let globalError: string = defaultGlobalErrorPath\n@@ -248,8 +246,6 @@ async function createTreeCodeFromPath(\n \n         const resolvedPagePath = await resolver(matchedPagePath)\n         if (resolvedPagePath) {\n-          pages.push(resolvedPagePath)\n-\n           const varName = `page${nestedCollectedDeclarations.length}`\n           nestedCollectedDeclarations.push([varName, resolvedPagePath])\n \n@@ -576,7 +572,6 @@ async function createTreeCodeFromPath(\n \n   return {\n     treeCode: `${treeCode}.children;`,\n-    pages: `${JSON.stringify(pages)};`,\n     rootLayout,\n     globalError,\n     globalNotFound,\n@@ -891,7 +886,6 @@ const nextAppLoader: AppLoader = async function nextAppLoader() {\n     },\n     {\n       tree: treeCodeResult.treeCode,\n-      pages: treeCodeResult.pages,\n       __next_app_require__: '__webpack_require__',\n       // all modules are in the entry chunk, so we never actually need to load chunks in webpack\n       __next_app_load_chunk__: '() => Promise.resolve()',"
        }
    ],
    "stats": {
        "total": 34,
        "additions": 2,
        "deletions": 32
    }
}