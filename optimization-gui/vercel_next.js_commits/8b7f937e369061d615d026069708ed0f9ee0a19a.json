{
    "author": "delbaoliveira",
    "message": "Docs IA 2.0: Add `Caching and Revalidating` page (#79493)\n\nCloses:\nhttps://linear.app/vercel/issue/DOC-3700/getting-started-caching-and-revalidating-page\nRedirects: https://github.com/vercel/front/pull/46120",
    "sha": "8b7f937e369061d615d026069708ed0f9ee0a19a",
    "files": [
        {
            "sha": "6cbd7bb107cd0527cc987019eb2c9c15e38cbafc",
            "filename": "docs/01-app/01-getting-started/08-fetching-data.mdx",
            "status": "modified",
            "additions": 31,
            "deletions": 0,
            "changes": 31,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F08-fetching-data.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F08-fetching-data.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F08-fetching-data.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -234,6 +234,37 @@ export default function BlogPage() {\n }\n ```\n \n+## Deduplicating requests with `React.cache`\n+\n+Deduplication is the process of _preventing duplicate requests_ for the same resource during a render pass. It allows you to fetch the same data in different components while preventing multiple network requests to your data source.\n+\n+If you are using `fetch`, requests can be deduplicated by adding `cache: 'force-cache'`. This means you can safely call the same URL with the same options, and only one request will be made.\n+\n+If you are _not_ using `fetch`, and instead using an ORM or database directly, you can wrap your data fetch with the [React `cache`](https://react.dev/reference/react/cache) function.\n+\n+```tsx filename=\"app/lib/data.ts\" switcher\n+import { cache } from 'react'\n+import { db, posts, eq } from '@/lib/db'\n+\n+export const getPost = cache(async (id: string) => {\n+  const post = await db.query.posts.findFirst({\n+    where: eq(posts.id, parseInt(id)),\n+  })\n+})\n+```\n+\n+```jsx filename=\"app/lib/data.js\" switcher\n+import { cache } from 'react'\n+import { db, posts, eq } from '@/lib/db'\n+import { notFound } from 'next/navigation'\n+\n+export const getPost = cache(async (id) => {\n+  const post = await db.query.posts.findFirst({\n+    where: eq(posts.id, parseInt(id)),\n+  })\n+})\n+```\n+\n ## Streaming\n \n > **Warning:** The content below assumes the [`dynamicIO` config option](/docs/app/api-reference/config/next-config-js/dynamicIO) is enabled in your application. The flag was introduced in Next.js 15 canary."
        },
        {
            "sha": "4e534d418873791035de62d16970c88d56f3f801",
            "filename": "docs/01-app/01-getting-started/09-caching-and-revalidating.mdx",
            "status": "added",
            "additions": 250,
            "deletions": 0,
            "changes": 250,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F09-caching-and-revalidating.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F09-caching-and-revalidating.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F09-caching-and-revalidating.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -0,0 +1,250 @@\n+---\n+title: How to cache and revalidate data\n+nav_title: Caching and Revalidating\n+description: Learn how to cache and revalidate data in your application.\n+related:\n+  title: API Reference\n+  description: Learn more about the features mentioned in this page by reading the API Reference.\n+  links:\n+    - app/api-reference/functions/fetch\n+    - app/api-reference/functions/unstable_cache\n+    - app/api-reference/functions/revalidatePath\n+    - app/api-reference/functions/revalidateTag\n+---\n+\n+Caching is a technique for storing the result of data fetching and other computations so that future requests for the same data can be served faster, without doing the work again. While revalidation allows you to update cache entries without having to rebuild your entire application.\n+\n+Next.js provides a few APIs to handle caching and revalidation. This guide will walk you through when and how to use them.\n+\n+- [`fetch`](#fetch)\n+- [`unstable_cache`](#unstable_cache)\n+- [`revalidatePath`](#revalidatepath)\n+- [`revalidateTag`](#revalidatetag)\n+\n+### `fetch`\n+\n+By default, [`fetch`](/docs/app/api-reference/functions/fetch) requests are not cached. You can cache individual requests by setting the `cache` option to `'force-cache'`.\n+\n+```tsx filename=\"app/page.tsx\" switcher\n+export default async function Page() {\n+  const data = await fetch('https://...', { cache: 'force-cache' })\n+}\n+```\n+\n+```jsx filename=\"app/page.jsx\" switcher\n+export default async function Page() {\n+  const data = await fetch('https://...', { cache: 'force-cache' })\n+}\n+```\n+\n+> **Good to know**: Although `fetch` requests are not cached by default, Next.js will [prerender](/docs/app/getting-started/partial-prerendering#static-rendering) routes that have `fetch` requests and cache the HTML. If you want to guarantee a route is [dynamic](/docs/app/getting-started/partial-prerendering#dynamic-rendering), use the [`connection` API](/docs/app/api-reference/functions/connection).\n+\n+To revalidate the data returned by a `fetch` request, you can use the `next.revalidate` option.\n+\n+```tsx filename=\"app/page.tsx\" switcher\n+export default async function Page() {\n+  const data = await fetch('https://...', { next: { revalidate: 3600 } })\n+}\n+```\n+\n+```jsx filename=\"app/page.jsx\" switcher\n+export default async function Page() {\n+  const data = await fetch('https://...', { next: { revalidate: 3600 } })\n+}\n+```\n+\n+This will revalidate the data after a specified amount of seconds.\n+\n+See the [`fetch` API reference](/docs/app/api-reference/functions/fetch) to learn more.\n+\n+### `unstable_cache`\n+\n+`unstable_cache` allows you to cache the result of database queries and other async functions. To use it, wrap `unstable_cache` around the function. For example:\n+\n+```tsx filename=\"app/lib/data.ts swichter\n+import { db } from '@/lib/db'\n+export async function getUserById(id: string) {\n+  return db\n+    .select()\n+    .from(users)\n+    .where(eq(users.id, id))\n+    .then((res) => res[0])\n+}\n+```\n+\n+```jsx filename=\"app/lib/data.js\" switcher\n+import { db } from '@/lib/db'\n+\n+export async function getUserById(id) {\n+  return db\n+    .select()\n+    .from(users)\n+    .where(eq(users.id, id))\n+    .then((res) => res[0])\n+}\n+```\n+\n+```tsx filename=\"app/page.tsx\" highlight={2,11,13} switcher\n+import { unstable_cache } from 'next/cache'\n+import { getUserById } from '@/app/lib/data'\n+\n+export default async function Page({\n+  params,\n+}: {\n+  params: Promise<{ userId: string }>\n+}) {\n+  const { userId } = await params\n+\n+  const getCachedUser = unstable_cache(\n+    async () => {\n+      return getUserById(userId)\n+    },\n+    [userId] // add the user ID to the cache key\n+  )\n+}\n+```\n+\n+```jsx filename=\"app/page.jsx\" highlight={2,7,9} switcher\n+import { unstable_cache } from 'next/cache';\n+import { getUserById } from '@/app/lib/data';\n+\n+export default async function Page({ params } }) {\n+  const { userId } = await params\n+\n+  const getCachedUser = unstable_cache(\n+    async () => {\n+      return getUserById(userId)\n+    },\n+    [userId] // add the user ID to the cache key\n+  );\n+}\n+```\n+\n+The function accepts a third optional object to define how the cache should be revalidated. It accepts:\n+\n+- `tags`: an array of tags used by Next.js to revalidate the cache.\n+- `revalidate`: the number of seconds after cache should be revalidated.\n+\n+```tsx filename=\"app/page.tsx\" highlight={6-9} switcher\n+const getCachedUser = unstable_cache(\n+  async () => {\n+    return getUserById(userId)\n+  },\n+  [userId],\n+  {\n+    tags: ['user'],\n+    revalidate: 3600,\n+  }\n+)\n+```\n+\n+```jsx filename=\"app/page.js\" highlight={6-9} switcher\n+const getCachedUser = unstable_cache(\n+  async () => {\n+    return getUserById(userId)\n+  },\n+  [userId],\n+  {\n+    tags: ['user'],\n+    revalidate: 3600,\n+  }\n+)\n+```\n+\n+See the [`unstable_cache` API reference](/docs/app/api-reference/functions/unstable_cache) to learn more.\n+\n+### `revalidateTag`\n+\n+`revalidateTag` is used to revalidate a cache entries based on a tag and following an event. To use it with `fetch`, start by tagging the function with the `next.tags` option:\n+\n+```tsx filename=\"app/lib/data.ts\" highlight={3-5} switcher\n+export async function getUserById(id: string) {\n+  const data = await fetch(`https://...`, {\n+    next: {\n+      tags: ['user'],\n+    },\n+  })\n+}\n+```\n+\n+```jsx filename=\"app/lib/data.js\" highlight={3-5} switcher\n+export async function getUserById(id) {\n+  const data = await fetch(`https://...`, {\n+    next: {\n+      tags: ['user'],\n+    },\n+  })\n+}\n+```\n+\n+Alternatively, you can mark an `unstable_cache` function with the `tags` option:\n+\n+```tsx filename=\"app/lib/data.ts\" highlight={6-8} switcher\n+export const getUserById = unstable_cache(\n+  async (id: string) => {\n+    return db.query.users.findFirst({ where: eq(users.id, id) })\n+  },\n+  ['user'], // Needed if variables are not passed as parameters\n+  {\n+    tags: ['user'],\n+  }\n+)\n+```\n+\n+```jsx filename=\"app/lib/data.js\" highlight={6-8} switcher\n+export const getUserById = unstable_cache(\n+  async (id) => {\n+    return db.query.users.findFirst({ where: eq(users.id, id) })\n+  },\n+  ['user'], // Needed if variables are not passed as parameters\n+  {\n+    tags: ['user'],\n+  }\n+)\n+```\n+\n+Then, call `revalidateTag` in a [Route Handler](/docs/app/api-reference/file-conventions/route) or Server Action:\n+\n+```tsx filename=\"app/lib/actions.ts\" highlight={1} switcher\n+import { revalidateTag } from 'next/cache'\n+\n+export async function updateUser(id: string) {\n+  // Mutate data\n+  revalidateTag('user')\n+}\n+```\n+\n+```jsx filename=\"app/lib/actions.js\" highlight={1} switcher\n+import { revalidateTag } from 'next/cache'\n+\n+export async function updateUser(id) {\n+  // Mutate data\n+  revalidateTag('user')\n+}\n+```\n+\n+You can reuse the same tag in multiple functions to revalidate them all at once.\n+\n+See the [`revalidateTag` API reference](/docs/app/api-reference/functions/revalidateTag) to learn more.\n+\n+### `revalidatePath`\n+\n+`revalidatePath` is used to revalidate a route and following an event. To use it, call it in a [Route Handler](/docs/app/api-reference/file-conventions/route) or Server Action:\n+\n+```tsx filename=\"app/lib/actions.ts\" highlight={1} switcher\n+import { revalidatePath } from 'next/cache'\n+\n+export async function updateUser(id: string) {\n+  // Mutate data\n+  revalidatePath('/profile')\n+```\n+\n+```jsx filename=\"app/lib/actions.js\" highlight={1} switcher\n+import { revalidatePath } from 'next/cache'\n+\n+export async function updateUser(id) {\n+  // Mutate data\n+  revalidatePath('/profile')\n+```\n+\n+See the [`revalidatePath` API reference](/docs/app/api-reference/functions/revalidatePath) to learn more."
        },
        {
            "sha": "0a37dced114166a304ed7fae3e3aed4ec7952d7b",
            "filename": "docs/01-app/01-getting-started/10-updating-data.mdx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F10-updating-data.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F10-updating-data.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F10-updating-data.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "previous_filename": "docs/01-app/01-getting-started/09-updating-data.mdx"
        },
        {
            "sha": "7f3350787dedef7d90a774e30a2dc8f3536c115d",
            "filename": "docs/01-app/01-getting-started/11-error-handling.mdx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F11-error-handling.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F11-error-handling.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F11-error-handling.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "previous_filename": "docs/01-app/01-getting-started/10-error-handling.mdx"
        },
        {
            "sha": "efff30506b18e9344fabdb61697a0cb8c466cbf2",
            "filename": "docs/01-app/01-getting-started/12-partial-prerendering.mdx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F12-partial-prerendering.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F12-partial-prerendering.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F12-partial-prerendering.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "previous_filename": "docs/01-app/01-getting-started/11-partial-prerendering.mdx"
        },
        {
            "sha": "c1462f2314b9ca3252138a45c65b349ac156a435",
            "filename": "docs/01-app/01-getting-started/13-metadata-and-og-images.mdx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F13-metadata-and-og-images.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F13-metadata-and-og-images.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F13-metadata-and-og-images.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "previous_filename": "docs/01-app/01-getting-started/12-metadata-and-og-images.mdx"
        },
        {
            "sha": "dd05c7e713b715593db556c2aa43b32961aed7cb",
            "filename": "docs/01-app/01-getting-started/14-deploying.mdx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F14-deploying.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F14-deploying.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F14-deploying.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "previous_filename": "docs/01-app/01-getting-started/13-deploying.mdx"
        },
        {
            "sha": "455b6315024d513d2b377fa299725469db88d03f",
            "filename": "docs/01-app/01-getting-started/15-upgrading.mdx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F15-upgrading.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F01-getting-started%2F15-upgrading.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F15-upgrading.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "previous_filename": "docs/01-app/01-getting-started/14-upgrading.mdx"
        },
        {
            "sha": "5bdde4d95f8ca143b6e0db148a7c1604d30a2164",
            "filename": "docs/01-app/02-guides/migrating/app-router-migration.mdx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F02-guides%2Fmigrating%2Fapp-router-migration.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F02-guides%2Fmigrating%2Fapp-router-migration.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmigrating%2Fapp-router-migration.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -385,7 +385,7 @@ export default function HomePage({ recentPosts }) {\n \n - Create a new `app/page.tsx` file inside the `app` directory. This is a Server Component by default.\n - Import the `home-page.tsx` Client Component into the page.\n-- If you were fetching data in `pages/index.js`, move the data fetching logic directly into the Server Component using the new [data fetching APIs](/docs/app/building-your-application/data-fetching/fetching). See the [data fetching upgrade guide](#step-6-migrating-data-fetching-methods) for more details.\n+- If you were fetching data in `pages/index.js`, move the data fetching logic directly into the Server Component using the new [data fetching APIs](/docs/app/getting-started/fetching-data). See the [data fetching upgrade guide](#step-6-migrating-data-fetching-methods) for more details.\n \n   ```tsx filename=\"app/page.tsx\" switcher\n   // Import your Client Component\n@@ -556,7 +556,7 @@ export default function Dashboard({ projects }) {\n \n In the App Router, we can colocate our data fetching inside our React components using [Server Components](/docs/app/getting-started/server-and-client-components). This allows us to send less JavaScript to the client, while maintaining the rendered HTML from the server.\n \n-By setting the `cache` option to `no-store`, we can indicate that the fetched data should [never be cached](/docs/app/building-your-application/data-fetching/fetching). This is similar to `getServerSideProps` in the `pages` directory.\n+By setting the `cache` option to `no-store`, we can indicate that the fetched data should [never be cached](/docs/app/getting-started/fetching-data). This is similar to `getServerSideProps` in the `pages` directory.\n \n ```tsx filename=\"app/dashboard/page.tsx\" switcher\n // `app` directory\n@@ -876,7 +876,7 @@ export async function GET(request: Request) {}\n export async function GET(request) {}\n ```\n \n-> **Good to know**: If you previously used API routes to call an external API from the client, you can now use [Server Components](/docs/app/getting-started/server-and-client-components) instead to securely fetch data. Learn more about [data fetching](/docs/app/building-your-application/data-fetching/fetching).\n+> **Good to know**: If you previously used API routes to call an external API from the client, you can now use [Server Components](/docs/app/getting-started/server-and-client-components) instead to securely fetch data. Learn more about [data fetching](/docs/app/getting-started/fetching-data).\n \n #### Single-Page Applications\n "
        },
        {
            "sha": "9ac74598d49e53d3beba2fa193870b69bf691895",
            "filename": "docs/01-app/02-guides/production-checklist.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -61,7 +61,7 @@ While building your application, we recommend using the following features to en\n \n <AppOnly>\n \n-- **[Server Components](/docs/app/building-your-application/data-fetching/fetching):** Leverage the benefits of fetching data on the server using Server Components.\n+- **[Server Components](/docs/app/getting-started/fetching-data):** Leverage the benefits of fetching data on the server using Server Components.\n - **[Route Handlers](/docs/app/building-your-application/routing/route-handlers):** Use Route Handlers to access your backend resources from Client Components. But do not call Route Handlers from Server Components to avoid an additional server request.\n - **[Streaming](/docs/app/building-your-application/routing/loading-ui-and-streaming):** Use Loading UI and React Suspense to progressively send UI from the server to the client, and prevent the whole route from blocking while data is being fetched.\n - **[Parallel Data Fetching](/docs/app/getting-started/fetching-data#parallel-data-fetching):** Reduce network waterfalls by fetching data in parallel, where appropriate. Also, consider [preloading data](/docs/app/getting-started/fetching-data#preloading-data) where appropriate."
        },
        {
            "sha": "5008cd1519f78fbec9d779e1951e353d219e7ffd",
            "filename": "docs/01-app/03-building-your-application/02-data-fetching/01-fetching.mdx",
            "status": "removed",
            "additions": 0,
            "deletions": 241,
            "changes": 241,
            "blob_url": "https://github.com/vercel/next.js/blob/63ed70ba4159dcbc11d8c4b98cee6a7321243e7f/docs%2F01-app%2F03-building-your-application%2F02-data-fetching%2F01-fetching.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/63ed70ba4159dcbc11d8c4b98cee6a7321243e7f/docs%2F01-app%2F03-building-your-application%2F02-data-fetching%2F01-fetching.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-building-your-application%2F02-data-fetching%2F01-fetching.mdx?ref=63ed70ba4159dcbc11d8c4b98cee6a7321243e7f",
            "patch": "@@ -1,241 +0,0 @@\n----\n-title: Data Fetching and Caching\n-nav_title: Data Fetching and Caching\n-description: Learn best practices for fetching data on the server or client in Next.js.\n----\n-\n-<details>\n-  <summary>Examples</summary>\n-\n-- [Next.js Commerce](https://vercel.com/templates/next.js/nextjs-commerce)\n-- [On-Demand ISR](https://on-demand-isr.vercel.app)\n-- [Next.js Forms](https://github.com/vercel/next.js/tree/canary/examples/next-forms)\n-\n-</details>\n-\n-This guide will walk you through the basics of data fetching and caching in Next.js, providing practical examples and best practices.\n-\n-Here's a minimal example of data fetching in Next.js:\n-\n-```tsx filename=\"app/page.tsx\" switcher\n-export default async function Page() {\n-  const data = await fetch('https://api.vercel.app/blog')\n-  const posts = await data.json()\n-  return (\n-    <ul>\n-      {posts.map((post) => (\n-        <li key={post.id}>{post.title}</li>\n-      ))}\n-    </ul>\n-  )\n-}\n-```\n-\n-```jsx filename=\"app/page.js\" switcher\n-export default async function Page() {\n-  const data = await fetch('https://api.vercel.app/blog')\n-  const posts = await data.json()\n-  return (\n-    <ul>\n-      {posts.map((post) => (\n-        <li key={post.id}>{post.title}</li>\n-      ))}\n-    </ul>\n-  )\n-}\n-```\n-\n-This example demonstrates a basic server-side data fetch using the `fetch` API in an asynchronous React Server Component.\n-\n-## Reference\n-\n-- [`fetch`](/docs/app/api-reference/functions/fetch)\n-- React [`cache`](https://react.dev/reference/react/cache)\n-- Next.js [`unstable_cache`](/docs/app/api-reference/functions/unstable_cache)\n-\n-### Caching data with an ORM or Database\n-\n-You can use the `unstable_cache` API to cache the response when running `next build`.\n-\n-```tsx filename=\"app/page.tsx\" switcher\n-import { unstable_cache } from 'next/cache'\n-import { db, posts } from '@/lib/db'\n-\n-const getPosts = unstable_cache(\n-  async () => {\n-    return await db.select().from(posts)\n-  },\n-  ['posts'],\n-  { revalidate: 3600, tags: ['posts'] }\n-)\n-\n-export default async function Page() {\n-  const allPosts = await getPosts()\n-\n-  return (\n-    <ul>\n-      {allPosts.map((post) => (\n-        <li key={post.id}>{post.title}</li>\n-      ))}\n-    </ul>\n-  )\n-}\n-```\n-\n-```jsx filename=\"app/page.js\" switcher\n-import { unstable_cache } from 'next/cache'\n-import { db, posts } from '@/lib/db'\n-\n-const getPosts = unstable_cache(\n-  async () => {\n-    return await db.select().from(posts)\n-  },\n-  ['posts'],\n-  { revalidate: 3600, tags: ['posts'] }\n-)\n-\n-export default async function Page() {\n-  const allPosts = await getPosts()\n-\n-  return (\n-    <ul>\n-      {allPosts.map((post) => (\n-        <li key={post.id}>{post.title}</li>\n-      ))}\n-    </ul>\n-  )\n-}\n-```\n-\n-This example caches the result of the database query for 1 hour (3600 seconds). It also adds the cache tag `posts` which can then be invalidated with [Incremental Static Regeneration](/docs/app/guides/incremental-static-regeneration).\n-\n-### Reusing data across multiple functions\n-\n-Next.js uses APIs like `generateMetadata` and `generateStaticParams` where you will need to use the same data fetched in the `page`.\n-\n-If you are using `fetch`, requests can be [memoized](/docs/app/deep-dive/caching#request-memoization) by adding `cache: 'force-cache'`. This means you can safely call the same URL with the same options, and only one request will be made.\n-\n-> **Good to know:**\n->\n-> - In previous versions of Next.js, using `fetch` would have a default `cache` value of `force-cache`. This changed in version 15, to a default of `cache: no-store`.\n-\n-```tsx filename=\"app/blog/[id]/page.tsx\" switcher\n-import { notFound } from 'next/navigation'\n-\n-interface Post {\n-  id: string\n-  title: string\n-  content: string\n-}\n-\n-async function getPost(id: string) {\n-  const res = await fetch(`https://api.vercel.app/blog/${id}`, {\n-    cache: 'force-cache',\n-  })\n-  const post: Post = await res.json()\n-  if (!post) notFound()\n-  return post\n-}\n-\n-export async function generateStaticParams() {\n-  const posts = await fetch('https://api.vercel.app/blog', {\n-    cache: 'force-cache',\n-  }).then((res) => res.json())\n-\n-  return posts.map((post: Post) => ({\n-    id: String(post.id),\n-  }))\n-}\n-\n-export async function generateMetadata({\n-  params,\n-}: {\n-  params: Promise<{ id: string }>\n-}) {\n-  const { id } = await params\n-  const post = await getPost(id)\n-\n-  return {\n-    title: post.title,\n-  }\n-}\n-\n-export default async function Page({\n-  params,\n-}: {\n-  params: Promise<{ id: string }>\n-}) {\n-  const { id } = await params\n-  const post = await getPost(id)\n-\n-  return (\n-    <article>\n-      <h1>{post.title}</h1>\n-      <p>{post.content}</p>\n-    </article>\n-  )\n-}\n-```\n-\n-```jsx filename=\"app/blog/[id]/page.js\" switcher\n-import { notFound } from 'next/navigation'\n-\n-async function getPost(id) {\n-  const res = await fetch(`https://api.vercel.app/blog/${id}`)\n-  const post = await res.json()\n-  if (!post) notFound()\n-  return post\n-}\n-\n-export async function generateStaticParams() {\n-  const posts = await fetch('https://api.vercel.app/blog').then((res) =>\n-    res.json()\n-  )\n-\n-  return posts.map((post) => ({\n-    id: String(post.id),\n-  }))\n-}\n-\n-export async function generateMetadata({ params }) {\n-  const { id } = await params\n-  const post = await getPost(id)\n-\n-  return {\n-    title: post.title,\n-  }\n-}\n-\n-export default async function Page({ params }) {\n-  const { id } = await params\n-  const post = await getPost(id)\n-\n-  return (\n-    <article>\n-      <h1>{post.title}</h1>\n-      <p>{post.content}</p>\n-    </article>\n-  )\n-}\n-```\n-\n-If you are _not_ using `fetch`, and instead using an ORM or database directly, you can wrap your data fetch with the React `cache` function. This will de-duplicate and only make one query.\n-\n-```jsx\n-import { cache } from 'react'\n-import { db, posts, eq } from '@/lib/db' // Example with Drizzle ORM\n-import { notFound } from 'next/navigation'\n-\n-export const getPost = cache(async (id) => {\n-  const post = await db.query.posts.findFirst({\n-    where: eq(posts.id, parseInt(id)),\n-  })\n-\n-  if (!post) notFound()\n-  return post\n-})\n-```\n-\n-### Revalidating cached data\n-\n-Learn more about revalidating cached data with [Incremental Static Regeneration](/docs/app/guides/incremental-static-regeneration)."
        },
        {
            "sha": "deb5026212e33aae0b71f2a95f646d6e56af5c9a",
            "filename": "docs/01-app/04-deep-dive/caching.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F04-deep-dive%2Fcaching.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F04-deep-dive%2Fcaching.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F04-deep-dive%2Fcaching.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -6,7 +6,7 @@ description: An overview of caching mechanisms in Next.js.\n \n Next.js improves your application's performance and reduces costs by caching rendering work and data requests. This page provides an in-depth look at Next.js caching mechanisms, the APIs you can use to configure them, and how they interact with each other.\n \n-> **Good to know**: This page helps you understand how Next.js works under the hood but is **not** essential knowledge to be productive with Next.js. Most of Next.js' caching heuristics are determined by your API usage and have defaults for the best performance with zero or minimal configuration. If you instead want to jump to examples, [start here](/docs/app/building-your-application/data-fetching/fetching).\n+> **Good to know**: This page helps you understand how Next.js works under the hood but is **not** essential knowledge to be productive with Next.js. Most of Next.js' caching heuristics are determined by your API usage and have defaults for the best performance with zero or minimal configuration. If you instead want to jump to examples, [start here](/docs/app/getting-started/fetching-data).\n \n ## Overview\n "
        },
        {
            "sha": "624e94209e4069a9ebb2333659ed04ca3d9ed016",
            "filename": "docs/01-app/05-api-reference/04-functions/unstable_cache.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F05-api-reference%2F04-functions%2Funstable_cache.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F05-api-reference%2F04-functions%2Funstable_cache.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Funstable_cache.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -3,7 +3,7 @@ title: unstable_cache\n description: API Reference for the unstable_cache function.\n ---\n \n-> **Note:** This API will be replaced by [`use cache`](/docs/app/api-reference/directives/use-cache) when it reaches stability.\n+> **Warning:** This API will be replaced by [`use cache`](/docs/app/api-reference/directives/use-cache) when it reaches stability.\n \n `unstable_cache` allows you to cache the results of expensive operations, like database queries, and reuse them across multiple requests.\n \n@@ -27,8 +27,6 @@ export default async function Component({ userID }) {\n > - Accessing dynamic data sources such as `headers` or `cookies` inside a cache scope is not supported. If you need this data inside a cached function use `headers` outside of the cached function and pass the required dynamic data in as an argument.\n > - This API uses Next.js' built-in [Data Cache](/docs/app/deep-dive/caching#data-cache) to persist the result across requests and deployments.\n \n-> **Warning**: This API is unstable and may change in the future. We will provide migration documentation and codemods, if needed, as this API stabilizes.\n-\n ## Parameters\n \n ```jsx"
        },
        {
            "sha": "8bdb44a11f313a5c6cf7db94c1c7cc73b8ec018d",
            "filename": "docs/01-app/05-api-reference/05-config/01-next-config-js/devIndicators.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2FdevIndicators.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2FdevIndicators.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2FdevIndicators.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -38,7 +38,7 @@ Route (app)                              Size     First Load JS\n There are two reasons a route might opt out of static rendering:\n \n - The presence of [Dynamic APIs](/docs/app/getting-started/partial-prerendering#dynamic-rendering) which rely on runtime information.\n-- An [uncached data request](/docs/app/building-your-application/data-fetching/fetching), like a call to an ORM or database driver.\n+- An [uncached data request](/docs/app/getting-started/fetching-data), like a call to an ORM or database driver.\n \n Check your route for any of these conditions, and if you are not able to statically render the route, then consider using [`loading.js`](/docs/app/api-reference/file-conventions/loading) or [`<Suspense />`](https://react.dev/reference/react/Suspense) to leverage [streaming](/docs/app/building-your-application/routing/loading-ui-and-streaming#what-is-streaming).\n "
        },
        {
            "sha": "b2fd0f6708afd10715f6039def2481d26d5ca156",
            "filename": "docs/01-app/05-api-reference/05-config/02-typescript.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F05-api-reference%2F05-config%2F02-typescript.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/docs%2F01-app%2F05-api-reference%2F05-config%2F02-typescript.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F05-config%2F02-typescript.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -47,9 +47,9 @@ The TypeScript plugin can help with:\n The Next.js App Router has **enhanced type safety**. This includes:\n \n 1. **No serialization of data between fetching function and page**: You can `fetch` directly in components, layouts, and pages on the server. This data _does not_ need to be serialized (converted to a string) to be passed to the client side for consumption in React. Instead, since `app` uses Server Components by default, we can use values like `Date`, `Map`, `Set`, and more without any extra steps. Previously, you needed to manually type the boundary between server and client with Next.js-specific types.\n-2. **Streamlined data flow between components**: With the removal of `_app` in favor of root layouts, it is now easier to visualize the data flow between components and pages. Previously, data flowing between individual `pages` and `_app` were difficult to type and could introduce confusing bugs. With [colocated data fetching](/docs/app/building-your-application/data-fetching/fetching) in the App Router, this is no longer an issue.\n+2. **Streamlined data flow between components**: With the removal of `_app` in favor of root layouts, it is now easier to visualize the data flow between components and pages. Previously, data flowing between individual `pages` and `_app` were difficult to type and could introduce confusing bugs. With [colocated data fetching](/docs/app/getting-started/fetching-data) in the App Router, this is no longer an issue.\n \n-[Data Fetching in Next.js](/docs/app/building-your-application/data-fetching/fetching) now provides as close to end-to-end type safety as possible without being prescriptive about your database or content provider selection.\n+[Data Fetching in Next.js](/docs/app/getting-started/fetching-data) now provides as close to end-to-end type safety as possible without being prescriptive about your database or content provider selection.\n \n We're able to type the response data as you would expect with normal TypeScript. For example:\n "
        },
        {
            "sha": "9815ed323f41d8e5a6805ece11016a12fc2309ec",
            "filename": "errors/prerender-error.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/8b7f937e369061d615d026069708ed0f9ee0a19a/errors%2Fprerender-error.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8b7f937e369061d615d026069708ed0f9ee0a19a/errors%2Fprerender-error.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Fprerender-error.mdx?ref=8b7f937e369061d615d026069708ed0f9ee0a19a",
            "patch": "@@ -134,6 +134,6 @@ export default function Page() {\n ## Additional Resources\n \n - [Handling Errors in Next.js](/docs/app/building-your-application/routing/error-handling)\n-- [Data Fetching in Next.js](/docs/app/building-your-application/data-fetching/fetching)\n+- [Data Fetching in Next.js](/docs/app/getting-started/fetching-data)\n \n If you continue to experience issues after trying these solutions, consider checking your server logs for more detailed error messages or reaching out to the Next.js community for support."
        }
    ],
    "stats": {
        "total": 544,
        "additions": 291,
        "deletions": 253
    }
}