{
    "author": "huozhi",
    "message": "docs: mcp (#85010)\n\nCo-authored-by: Delba de Oliveira <32464864+delbaoliveira@users.noreply.github.com>\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "30503c149b29e03b8977da48bc426843b79cb5c1",
    "files": [
        {
            "sha": "308b1e59e2954c91badd6ca6edf91730a4c2d038",
            "filename": "docs/01-app/02-guides/mcp.mdx",
            "status": "added",
            "additions": 172,
            "deletions": 0,
            "changes": 172,
            "blob_url": "https://github.com/vercel/next.js/blob/30503c149b29e03b8977da48bc426843b79cb5c1/docs%2F01-app%2F02-guides%2Fmcp.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/30503c149b29e03b8977da48bc426843b79cb5c1/docs%2F01-app%2F02-guides%2Fmcp.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmcp.mdx?ref=30503c149b29e03b8977da48bc426843b79cb5c1",
            "patch": "@@ -0,0 +1,172 @@\n+---\n+title: Enabling Next.js MCP Server for Coding Agents\n+nav_title: Next.js MCP Server\n+description: Learn how to enable the experimental Next.js MCP server to allow agents access to your application state\n+---\n+\n+The [Model Context Protocol (MCP)](https://modelcontextprotocol.io) is an open standard that allows AI agents and coding assistants to interact with your applications through a standardized interface.\n+\n+Next.js provides two MCP servers, we recommend using both together for the best agent experience:\n+\n+### 1. Next.js MCP Server (Built-in)\n+\n+**Available in Next.js 16 and above**\n+\n+The Next.js MCP server exposes your application's internals, allowing agents to:\n+\n+- Access real-time application state and runtime information\n+- Query page metadata, routes, and rendering details\n+- Retrieve build errors, runtime errors, and development logs\n+- Inspect Server Actions and component hierarchies\n+\n+This server runs within your Next.js dev server and provides direct access to your application's internal state.\n+\n+### 2. Next DevTools MCP (External Package)\n+\n+[`next-devtools-mcp`](https://www.npmjs.com/package/next-devtools-mcp) is a separate package that provides high-level development tools and guidance:\n+\n+- **Next.js Knowledge Base**: Query comprehensive Next.js documentation and best practices\n+- **Migration and Upgrade Tools**: Automated helpers for upgrading to Next.js 16 with codemods\n+- **Cache Components Guide**: Setup and configuration assistance for Cache Components\n+- **Browser Testing**: [Playwright MCP](https://github.com/microsoft/playwright-mcp) integration for verifying pages in the browser\n+\n+Additionally, `next-devtools-mcp` can automatically discover and communicate directly with running Next.js dev servers to access their MCP tools (`get_errors`, `get_logs`, `get_page_metadata`, etc.).\n+\n+Together, these two MCP servers give agents both low-level application internals and high-level development guidance.\n+\n+## Getting started\n+\n+The built-in Next.js MCP server is enabled by default in development in Next.js 16 or above.\n+\n+### Configuring Next DevTools MCP\n+\n+To use the Next DevTools MCP, add [`next-devtools-mcp`](https://www.npmjs.com/package/next-devtools-mcp) to the `.mcp.json` file at the root of your project\n+\n+```json filename=\".mcp.json\"\n+{\n+  \"mcpServers\": {\n+    \"next-devtools\": {\n+      \"command\": \"npx\",\n+      \"args\": [\"-y\", \"next-devtools-mcp@latest\"]\n+    }\n+  }\n+}\n+```\n+\n+For more devtools functionalities and configuration options, check out the [next-devtools-mcp repository](https://github.com/vercel/next-devtools-mcp).\n+\n+## Using with agents\n+\n+MCP-compatible Coding Agents can automatically discover and connect to your Next.js development server. This provides agents with rich context about your project.\n+\n+### Benefits for agent-assisted development\n+\n+Agents can:\n+\n+- **Make context-aware suggestions**: Recommend the right place to add new features based on your existing structure\n+- **Query live application state**: Check current configuration, routes, and middleware during development\n+- **Understand your app router pages layout**: Know exactly which page and layout are rendered in the page\n+- **Provide accurate implementations**: Generate code that follows your project's patterns and conventions\n+\n+## Development workflow\n+\n+1. Start your Next.js development server:\n+\n+```bash filename=\"Terminal\"\n+npm run dev\n+```\n+\n+2. Connect your Coding Agent to the running Next.js instance\n+\n+3. Open your application in the browser to view the page.\n+\n+4. Query your agent for insights and diagnostics (see examples below)\n+\n+### Available Next.js MCP Tools\n+\n+The experimental Next.js MCP server provides the following tools:\n+\n+- **`get_errors`**: Retrieve current build errors, runtime errors, and type errors from your dev server\n+- **`get_logs`**: Access development server logs and console output\n+- **`get_page_metadata`**: Get metadata about specific pages including routes, components, and rendering information\n+- **`get_project_metadata`**: Retrieve project structure, configuration, and overall metadata\n+- **`get_server_action_by_id`**: Look up Server Actions by their ID for debugging and inspection\n+\n+## Examples\n+\n+### Error detection and diagnosis\n+\n+The agent can query your running Next.js application for real-time error information:\n+\n+```bash\n+User: \"What errors are currently in my application?\"\n+```\n+\n+Agent action:\n+\n+- Calls the `get_errors` tool provided by the Next.js MCP server\n+- Retrieves current build errors, runtime errors, and type errors from the dev server\n+- Analyzes the errors and provides actionable fixes\n+\n+<details>\n+<summary>Agent response (click to expand)</summary>\n+\n+```bash\n+> fix errors on the page\n+\n+⏺ I'll help you fix the errors on the page. Let me first check what errors exist by looking at the\n+  current state of the project.\n+\n+⏺ next-devtools - nextjs_runtime (MCP)(action: \"discover_servers\")\n+⏺ next-devtools - nextjs_runtime (MCP)(action: \"call_tool\", toolName: \"get_errors\")\n+\n+⏺ I found a hydration error on the /about page. The error shows that the server is rendering\n+  \"server\" but the client is rendering \"client\", causing a mismatch. Let me create a todo list and fix\n+   this issue.\n+\n+⏺ Perfect! Now let me check for errors on the page.           01:14 PM  claude-sonnet-4-5-20250929\n+\n+⏺ next-devtools - nextjs_runtime (MCP)(action: \"call_tool\", toolName: \"get_errors\")\n+  ⎿ {\n+      \"success\": true,\n+      \"port\": 3000,\n+      \"toolName\": \"get_errors\",\n+      \"result\": {\n+        \"content\": [\n+          {\n+            \"type\": \"text\",\n+            \"text\": \"# Found errors in 1 browser session(s)\\n\\n## Session: /about\\n\\n**1 error(s)\n+     found**\\n\\n### Runtime Errors\\n\\n#### Error 1 (Type: recoverable)\\n\\n**Error**: Hydration failed\n+```\n+\n+</details>\n+\n+This demonstrates the power of having both MCP servers enabled: the Next.js MCP server provides real-time diagnostics directly from your application, while next-devtools-mcp can provide guidance on best practices and migration paths.\n+\n+### Upgrading and best practices\n+\n+You can also ask for help with Next.js concepts and migrations:\n+\n+```bash\n+User: \"Help me upgrade my Next.js app to version 16\"\n+```\n+\n+The agent will use next-devtools-mcp to analyze your current version, guide you through automated migrations with codemods, and provide step-by-step instructions for handling breaking changes like async Request APIs, dynamic route segments, and route handler return types.\n+\n+You can also ask conceptual questions:\n+\n+```bash\n+User: \"When should I use 'use client' in App Router?\"\n+```\n+\n+The agent will query the Next.js knowledge base via next-devtools-mcp and provide documentation-backed explanations with examples from your codebase.\n+\n+## Troubleshooting\n+\n+### MCP server not connecting\n+\n+- Ensure you're using Next.js v16 or above\n+- Start your development server: `npm run dev`\n+- Restart your development server\n+- Check that your MCP client is configured with the correct path\n+- Add MCP server to your agent's settings"
        }
    ],
    "stats": {
        "total": 172,
        "additions": 172,
        "deletions": 0
    }
}