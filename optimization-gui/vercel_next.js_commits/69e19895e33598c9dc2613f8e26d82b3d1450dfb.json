{
    "author": "gaojude",
    "message": "docs: simplify MCP guide to focus on next-devtools-mcp (#85353)",
    "sha": "69e19895e33598c9dc2613f8e26d82b3d1450dfb",
    "files": [
        {
            "sha": "ba15f39669dec74907985043a4b6237866901798",
            "filename": "docs/01-app/02-guides/mcp.mdx",
            "status": "modified",
            "additions": 65,
            "deletions": 62,
            "changes": 127,
            "blob_url": "https://github.com/vercel/next.js/blob/69e19895e33598c9dc2613f8e26d82b3d1450dfb/docs%2F01-app%2F02-guides%2Fmcp.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/69e19895e33598c9dc2613f8e26d82b3d1450dfb/docs%2F01-app%2F02-guides%2Fmcp.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmcp.mdx?ref=69e19895e33598c9dc2613f8e26d82b3d1450dfb",
            "patch": "@@ -1,46 +1,18 @@\n ---\n title: Enabling Next.js MCP Server for Coding Agents\n nav_title: Next.js MCP Server\n-description: Learn how to enable the experimental Next.js MCP server to allow agents access to your application state\n+description: Learn how to use Next.js MCP support to allow coding agents access to your application state\n ---\n \n The [Model Context Protocol (MCP)](https://modelcontextprotocol.io) is an open standard that allows AI agents and coding assistants to interact with your applications through a standardized interface.\n \n-Next.js provides two MCP servers, we recommend using both together for the best agent experience:\n-\n-### 1. Next.js MCP Server (Built-in)\n-\n-**Available in Next.js 16 and above**\n-\n-The Next.js MCP server exposes your application's internals, allowing agents to:\n-\n-- Access real-time application state and runtime information\n-- Query page metadata, routes, and rendering details\n-- Retrieve build errors, runtime errors, and development logs\n-- Inspect Server Actions and component hierarchies\n-\n-This server runs within your Next.js dev server and provides direct access to your application's internal state.\n-\n-### 2. Next DevTools MCP (External Package)\n-\n-[`next-devtools-mcp`](https://www.npmjs.com/package/next-devtools-mcp) is a separate package that provides high-level development tools and guidance:\n-\n-- **Next.js Knowledge Base**: Query comprehensive Next.js documentation and best practices\n-- **Migration and Upgrade Tools**: Automated helpers for upgrading to Next.js 16 with codemods\n-- **Cache Components Guide**: Setup and configuration assistance for Cache Components\n-- **Browser Testing**: [Playwright MCP](https://github.com/microsoft/playwright-mcp) integration for verifying pages in the browser\n-\n-Additionally, `next-devtools-mcp` can automatically discover and communicate directly with running Next.js dev servers to access their MCP tools (`get_errors`, `get_logs`, `get_page_metadata`, etc.).\n-\n-Together, these two MCP servers give agents both low-level application internals and high-level development guidance.\n+Next.js 16+ includes MCP support that enables coding agents to access your application's internals in real-time. To use this functionality, install the [`next-devtools-mcp`](https://www.npmjs.com/package/next-devtools-mcp) package.\n \n ## Getting started\n \n-The built-in Next.js MCP server is enabled by default in development in Next.js 16 or above.\n+**Requirements:** Next.js 16 or above\n \n-### Configuring Next DevTools MCP\n-\n-To use the Next DevTools MCP, add [`next-devtools-mcp`](https://www.npmjs.com/package/next-devtools-mcp) to the `.mcp.json` file at the root of your project\n+Add `next-devtools-mcp` to the `.mcp.json` file at the root of your project:\n \n ```json filename=\".mcp.json\"\n {\n@@ -53,20 +25,30 @@ To use the Next DevTools MCP, add [`next-devtools-mcp`](https://www.npmjs.com/pa\n }\n ```\n \n-For more devtools functionalities and configuration options, check out the [next-devtools-mcp repository](https://github.com/vercel/next-devtools-mcp).\n+That's it! When you start your development server, `next-devtools-mcp` will automatically discover and connect to your running Next.js instance.\n \n-## Using with agents\n+For more configuration options, see the [next-devtools-mcp repository](https://github.com/vercel/next-devtools-mcp).\n \n-MCP-compatible Coding Agents can automatically discover and connect to your Next.js development server. This provides agents with rich context about your project.\n+## Capabilities\n \n-### Benefits for agent-assisted development\n+`next-devtools-mcp` provides coding agents with a growing set of capabilities:\n \n-Agents can:\n+### Application Runtime Access\n \n-- **Make context-aware suggestions**: Recommend the right place to add new features based on your existing structure\n-- **Query live application state**: Check current configuration, routes, and middleware during development\n-- **Understand your app router pages layout**: Know exactly which page and layout are rendered in the page\n-- **Provide accurate implementations**: Generate code that follows your project's patterns and conventions\n+- **Error Detection**: Retrieve current build errors, runtime errors, and type errors from your dev server\n+- **Live State Queries**: Access real-time application state and runtime information\n+- **Page Metadata**: Query page routes, components, and rendering details\n+- **Server Actions**: Inspect Server Actions and component hierarchies\n+- **Development Logs**: Access development server logs and console output\n+\n+### Development Tools\n+\n+- **Next.js Knowledge Base**: Query comprehensive Next.js documentation and best practices\n+- **Migration and Upgrade Tools**: Automated helpers for upgrading to Next.js 16 with codemods\n+- **Cache Components Guide**: Setup and configuration assistance for Cache Components\n+- **Browser Testing**: [Playwright MCP](https://github.com/microsoft/playwright-mcp) integration for verifying pages in the browser\n+\n+> **Note:** The Next.js team is actively expanding these capabilities. New tools and features are added regularly to improve the agent development experience.\n \n ## Development workflow\n \n@@ -76,37 +58,50 @@ Agents can:\n npm run dev\n ```\n \n-2. Connect your Coding Agent to the running Next.js instance\n+2. Your Coding Agent will automatically connect to the running Next.js instance via `next-devtools-mcp`\n \n-3. Open your application in the browser to view the page.\n+3. Open your application in the browser to view pages\n \n 4. Query your agent for insights and diagnostics (see examples below)\n \n-### Available Next.js MCP Tools\n+### Available tools\n \n-The experimental Next.js MCP server provides the following tools:\n+Through `next-devtools-mcp`, agents can use the following tools:\n \n - **`get_errors`**: Retrieve current build errors, runtime errors, and type errors from your dev server\n-- **`get_logs`**: Access development server logs and console output\n+- **`get_logs`**: Get the path to the development log file containing browser console logs and server output\n - **`get_page_metadata`**: Get metadata about specific pages including routes, components, and rendering information\n-- **`get_project_metadata`**: Retrieve project structure, configuration, and overall metadata\n-- **`get_server_action_by_id`**: Look up Server Actions by their ID for debugging and inspection\n+- **`get_project_metadata`**: Retrieve project structure, configuration, and dev server URL\n+- **`get_server_action_by_id`**: Look up Server Actions by their ID to find the source file and function name\n+\n+## Using with agents\n+\n+MCP-compatible Coding Agents can automatically discover and connect to your Next.js development server, providing them with rich context about your project.\n+\n+### Benefits for agent-assisted development\n+\n+Agents can:\n+\n+- **Make context-aware suggestions**: Recommend the right place to add new features based on your existing structure\n+- **Query live application state**: Check current configuration, routes, and middleware during development\n+- **Understand your app router pages layout**: Know exactly which page and layout are rendered\n+- **Provide accurate implementations**: Generate code that follows your project's patterns and conventions\n \n ## Examples\n \n ### Error detection and diagnosis\n \n-The agent can query your running Next.js application for real-time error information:\n+Ask your agent about errors in real-time:\n \n ```bash\n User: \"What errors are currently in my application?\"\n ```\n \n-Agent action:\n+The agent will:\n \n-- Calls the `get_errors` tool provided by the Next.js MCP server\n-- Retrieves current build errors, runtime errors, and type errors from the dev server\n-- Analyzes the errors and provides actionable fixes\n+- Query your running Next.js application via `next-devtools-mcp`\n+- Retrieve current build errors, runtime errors, and type errors\n+- Analyze the errors and provide actionable fixes\n \n <details>\n <summary>Agent response (click to expand)</summary>\n@@ -141,32 +136,40 @@ Agent action:\n \n </details>\n \n-This demonstrates the power of having both MCP servers enabled: the Next.js MCP server provides real-time diagnostics directly from your application, while next-devtools-mcp can provide guidance on best practices and migration paths.\n-\n ### Upgrading and best practices\n \n-You can also ask for help with Next.js concepts and migrations:\n+Get help with Next.js concepts and migrations:\n \n ```bash\n User: \"Help me upgrade my Next.js app to version 16\"\n ```\n \n-The agent will use next-devtools-mcp to analyze your current version, guide you through automated migrations with codemods, and provide step-by-step instructions for handling breaking changes like async Request APIs, dynamic route segments, and route handler return types.\n+The agent will analyze your current version, guide you through automated migrations with codemods, and provide step-by-step instructions for handling breaking changes.\n \n-You can also ask conceptual questions:\n+Ask conceptual questions:\n \n ```bash\n User: \"When should I use 'use client' in App Router?\"\n ```\n \n-The agent will query the Next.js knowledge base via next-devtools-mcp and provide documentation-backed explanations with examples from your codebase.\n+The agent will query the Next.js knowledge base and provide documentation-backed explanations with examples from your codebase.\n+\n+## How it works\n+\n+Next.js 16+ includes a built-in MCP endpoint at `/_next/mcp` that runs within your development server. The `next-devtools-mcp` package automatically discovers and communicates with these endpoints, allowing it to:\n+\n+- Connect to multiple Next.js instances running on different ports\n+- Forward tool calls to the appropriate Next.js dev server\n+- Provide a unified interface for coding agents\n+\n+This architecture decouples the agent interface from the internal implementation, enabling `next-devtools-mcp` to work seamlessly across different Next.js projects.\n \n ## Troubleshooting\n \n ### MCP server not connecting\n \n - Ensure you're using Next.js v16 or above\n+- Verify `next-devtools-mcp` is configured in your `.mcp.json`\n - Start your development server: `npm run dev`\n-- Restart your development server\n-- Check that your MCP client is configured with the correct path\n-- Add MCP server to your agent's settings\n+- Restart your development server if it was already running\n+- Check that your coding agent has loaded the MCP server configuration"
        }
    ],
    "stats": {
        "total": 127,
        "additions": 65,
        "deletions": 62
    }
}