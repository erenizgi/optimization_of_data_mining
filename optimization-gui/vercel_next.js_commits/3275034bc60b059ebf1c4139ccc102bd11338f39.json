{
    "author": "devjiwonchoi",
    "message": "Allow `next.config.mts` for Node.js native TS resolver (#83556)\n\nFollowing up on https://github.com/vercel/next.js/pull/83240\n\nWhen using ESM syntax in `next.config.ts` on a CJS project, Node.js\nfirst assumes it as CJS, then parses it into ESM again, giving a\nwarning:\n\n```\n(node:27529) [MODULE_TYPELESS_PACKAGE_JSON] Warning: Module type of file://.../next.config.ts is not specified and it doesn't parse as CommonJS.\nReparsing as ES module because module syntax was detected. This incurs a performance overhead.\nTo eliminate this warning, add \"type\": \"module\" to .../package.json.\n```\n\nTherefore, give users the option to use `next.config.mts` which Node.js\nexpects ESM syntax.\n\nThe tests are a copy of `next-config-ts-native-ts` and only renamed the\nconfig to mts.\n\n---------\n\nCo-authored-by: Sebastian \"Sebbie\" Silbermann <sebastian.silbermann@vercel.com>",
    "sha": "3275034bc60b059ebf1c4139ccc102bd11338f39",
    "files": [
        {
            "sha": "4796c91e2138cbb0543c65aea1be2555320aa509",
            "filename": ".eslintrc.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/.eslintrc.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/.eslintrc.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.eslintrc.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -66,7 +66,7 @@\n         \"plugin:@typescript-eslint/recommended\",\n         \"plugin:@typescript-eslint/stylistic\"\n       ],\n-      \"files\": [\"**/*.ts\", \"**/*.tsx\"],\n+      \"files\": [\"**/*.ts\", \"**/*.tsx\", \"**/*.mts\"],\n       \"parser\": \"@typescript-eslint/parser\",\n       \"parserOptions\": {\n         \"sourceType\": \"module\","
        },
        {
            "sha": "70935d612ff3b4a5840d2cec820fa11f2c0fc7eb",
            "filename": ".github/workflows/build_and_test.yml",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/.github%2Fworkflows%2Fbuild_and_test.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/.github%2Fworkflows%2Fbuild_and_test.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_test.yml?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -561,9 +561,7 @@ jobs:\n     with:\n       nodeVersion: ${{ matrix.node }}\n       afterBuild: |\n-        export NEXT_TEST_MODE=dev\n-        export NODE_OPTIONS=--experimental-transform-types\n-        node run-tests.js test/e2e/app-dir/next-config-ts-native-ts/**/*.test.ts\n+        NEXT_TEST_MODE=dev NODE_OPTIONS=--experimental-transform-types node run-tests.js test/e2e/app-dir/next-config-ts-native-ts/**/*.test.ts test/e2e/app-dir/next-config-ts-native-mts/**/*.test.ts\n       stepName: 'test-next-config-ts-native-ts-dev-${{ matrix.node }}'\n \n     secrets: inherit\n@@ -583,9 +581,7 @@ jobs:\n     with:\n       nodeVersion: ${{ matrix.node }}\n       afterBuild: |\n-        export NEXT_TEST_MODE=start\n-        export NODE_OPTIONS=--experimental-transform-types\n-        node run-tests.js test/e2e/app-dir/next-config-ts-native-ts/**/*.test.ts\n+        NEXT_TEST_MODE=start NODE_OPTIONS=--experimental-transform-types node run-tests.js test/e2e/app-dir/next-config-ts-native-ts/**/*.test.ts test/e2e/app-dir/next-config-ts-native-mts/**/*.test.ts\n       stepName: 'test-next-config-ts-native-ts-prod-${{ matrix.node }}'\n \n     secrets: inherit"
        },
        {
            "sha": "12ec2b0c36f17096a8a53d28a9b9b0cb612f35a2",
            "filename": "packages/create-next-app/templates/app-api/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp-api%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp-api%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp-api%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -22,6 +22,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "12ec2b0c36f17096a8a53d28a9b9b0cb612f35a2",
            "filename": "packages/create-next-app/templates/app-empty/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp-empty%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp-empty%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp-empty%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -22,6 +22,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "12ec2b0c36f17096a8a53d28a9b9b0cb612f35a2",
            "filename": "packages/create-next-app/templates/app-tw-empty/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw-empty%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw-empty%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw-empty%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -22,6 +22,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "12ec2b0c36f17096a8a53d28a9b9b0cb612f35a2",
            "filename": "packages/create-next-app/templates/app-tw/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -22,6 +22,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "12ec2b0c36f17096a8a53d28a9b9b0cb612f35a2",
            "filename": "packages/create-next-app/templates/app/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fapp%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -22,6 +22,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "3ebe253596fca2cb5a820eadc0369f9db77cc56d",
            "filename": "packages/create-next-app/templates/default-empty/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-empty%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-empty%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-empty%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -17,6 +17,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "3ebe253596fca2cb5a820eadc0369f9db77cc56d",
            "filename": "packages/create-next-app/templates/default-tw-empty/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw-empty%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw-empty%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw-empty%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -17,6 +17,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "3ebe253596fca2cb5a820eadc0369f9db77cc56d",
            "filename": "packages/create-next-app/templates/default-tw/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -17,6 +17,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "3ebe253596fca2cb5a820eadc0369f9db77cc56d",
            "filename": "packages/create-next-app/templates/default/ts/tsconfig.json",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fdefault%2Fts%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fcreate-next-app%2Ftemplates%2Fdefault%2Fts%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fdefault%2Fts%2Ftsconfig.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -17,6 +17,12 @@\n       \"@/*\": [\"./*\"]\n     }\n   },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.mts\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }"
        },
        {
            "sha": "8606c00abe5e4cd36cac8eee3f555cb2bd66bf0b",
            "filename": "packages/next/src/build/next-config-ts/transpile-config.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Fbuild%2Fnext-config-ts%2Ftranspile-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Fbuild%2Fnext-config-ts%2Ftranspile-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fnext-config-ts%2Ftranspile-config.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -122,6 +122,7 @@ export async function transpileConfig({\n         // Node.js v22.10.0+\n         // Value is 'strip' or 'transform' based on how the feature is enabled.\n         // https://nodejs.org/api/process.html#processfeaturestypescript\n+        // TODO: Remove `as any` once we bump @types/node to v22.10.0+\n         if ((process.features as any).typescript) {\n           // Run import() here to catch errors and fallback to legacy resolution.\n           return (await import(pathToFileURL(nextConfigPath).href)).default"
        },
        {
            "sha": "39df46cc9d7427718846d745be5b4ded91bf9eeb",
            "filename": "packages/next/src/lib/typescript/writeConfigurationDefaults.test.ts",
            "status": "modified",
            "additions": 58,
            "deletions": 61,
            "changes": 119,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Flib%2Ftypescript%2FwriteConfigurationDefaults.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Flib%2Ftypescript%2FwriteConfigurationDefaults.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Ftypescript%2FwriteConfigurationDefaults.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -3,6 +3,8 @@ import { tmpdir } from 'node:os'\n import { join } from 'node:path'\n // eslint-disable-next-line import/no-extraneous-dependencies\n import ts from 'typescript'\n+// eslint-disable-next-line import/no-extraneous-dependencies\n+import stripAnsi from 'strip-ansi'\n import { writeConfigurationDefaults } from './writeConfigurationDefaults'\n \n describe('writeConfigurationDefaults()', () => {\n@@ -46,53 +48,51 @@ describe('writeConfigurationDefaults()', () => {\n         hasPagesDir\n       )\n \n-      const tsConfig = await readFile(tsConfigPath, { encoding: 'utf8' })\n-\n-      expect(JSON.parse(tsConfig)).toMatchInlineSnapshot(`\n-      {\n-        \"compilerOptions\": {\n-          \"allowJs\": true,\n-          \"esModuleInterop\": true,\n-          \"incremental\": true,\n-          \"isolatedModules\": true,\n-          \"jsx\": \"react-jsx\",\n-          \"lib\": [\n-            \"dom\",\n-            \"dom.iterable\",\n-            \"esnext\",\n-          ],\n-          \"module\": \"esnext\",\n-          \"moduleResolution\": \"node\",\n-          \"noEmit\": true,\n-          \"plugins\": [\n-            {\n-              \"name\": \"next\",\n-            },\n-          ],\n-          \"resolveJsonModule\": true,\n-          \"skipLibCheck\": true,\n-          \"strict\": false,\n-          \"target\": \"ES2017\",\n-        },\n-        \"exclude\": [\n-          \"node_modules\",\n-        ],\n-        \"include\": [\n-          \"next-env.d.ts\",\n-          \".next/types/**/*.ts\",\n-          \"**/*.ts\",\n-          \"**/*.tsx\",\n-        ],\n-      }\n-    `)\n-\n-      expect(\n-        consoleLogSpy.mock.calls\n-          .flat()\n-          .join('\\n')\n-          // eslint-disable-next-line no-control-regex\n-          .replace(/\\x1B\\[\\d+m/g, '') // remove color control characters\n-      ).toMatchInlineSnapshot(`\n+      const tsConfig = JSON.parse(\n+        await readFile(tsConfigPath, { encoding: 'utf8' })\n+      )\n+\n+      expect(tsConfig).toMatchInlineSnapshot(`\n+             {\n+               \"compilerOptions\": {\n+                 \"allowJs\": true,\n+                 \"esModuleInterop\": true,\n+                 \"incremental\": true,\n+                 \"isolatedModules\": true,\n+                 \"jsx\": \"react-jsx\",\n+                 \"lib\": [\n+                   \"dom\",\n+                   \"dom.iterable\",\n+                   \"esnext\",\n+                 ],\n+                 \"module\": \"esnext\",\n+                 \"moduleResolution\": \"node\",\n+                 \"noEmit\": true,\n+                 \"plugins\": [\n+                   {\n+                     \"name\": \"next\",\n+                   },\n+                 ],\n+                 \"resolveJsonModule\": true,\n+                 \"skipLibCheck\": true,\n+                 \"strict\": false,\n+                 \"target\": \"ES2017\",\n+               },\n+               \"exclude\": [\n+                 \"node_modules\",\n+               ],\n+               \"include\": [\n+                 \"next-env.d.ts\",\n+                 \".next/types/**/*.ts\",\n+                 \"**/*.mts\",\n+                 \"**/*.ts\",\n+                 \"**/*.tsx\",\n+               ],\n+             }\n+          `)\n+\n+      expect(stripAnsi(consoleLogSpy.mock.calls.flat().join('\\n')))\n+        .toMatchInlineSnapshot(`\n         \"\n            We detected TypeScript in your project and reconfigured your tsconfig.json file for you. Strict-mode is set to false by default.\n            The following suggested values were added to your tsconfig.json. These values can be changed to fit your project's needs:\n@@ -104,7 +104,7 @@ describe('writeConfigurationDefaults()', () => {\n            \t- strict was set to false\n            \t- noEmit was set to true\n            \t- incremental was set to true\n-           \t- include was set to ['next-env.d.ts', '.next/types/**/*.ts', '**/*.ts', '**/*.tsx']\n+           \t- include was set to ['next-env.d.ts', '.next/types/**/*.ts', '**/*.mts', '**/*.ts', '**/*.tsx']\n            \t- plugins was updated to add { name: 'next' }\n            \t- exclude was set to ['node_modules']\n \n@@ -136,13 +136,9 @@ describe('writeConfigurationDefaults()', () => {\n         hasPagesDir\n       )\n \n-      expect(\n-        consoleLogSpy.mock.calls\n-          .flat()\n-          .join('\\n')\n-          // eslint-disable-next-line no-control-regex\n-          .replace(/\\x1B\\[\\d+m/g, '') // remove color control characters\n-      ).not.toMatch('Strict-mode is set to false by default.')\n+      expect(stripAnsi(consoleLogSpy.mock.calls.flat().join('\\n'))).not.toMatch(\n+        'Strict-mode is set to false by default.'\n+      )\n     })\n \n     describe('with tsconfig extends', () => {\n@@ -155,7 +151,7 @@ describe('writeConfigurationDefaults()', () => {\n       })\n \n       it('should support empty includes when base provides it', async () => {\n-        const include = ['**/*.ts', '**/*.tsx', nextAppTypes]\n+        const include = ['**/*.ts', '**/*.tsx', nextAppTypes, '**/*.mts']\n         const content = { extends: './tsconfig.base.json' }\n         const baseContent = { include }\n \n@@ -202,11 +198,12 @@ describe('writeConfigurationDefaults()', () => {\n         const parsed = JSON.parse(output)\n \n         expect(parsed.include.sort()).toMatchInlineSnapshot(`\n-          [\n-            \"**/*.ts\",\n-            \"**/*.tsx\",\n-            \".next/types/**/*.ts\",\n-          ]\n+         [\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\",\n+           \".next/types/**/*.ts\",\n+         ]\n         `)\n       })\n "
        },
        {
            "sha": "ca11b1660c28eb2d824a50764c57e03a829401b0",
            "filename": "packages/next/src/lib/typescript/writeConfigurationDefaults.ts",
            "status": "modified",
            "additions": 41,
            "deletions": 29,
            "changes": 70,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Flib%2Ftypescript%2FwriteConfigurationDefaults.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Flib%2Ftypescript%2FwriteConfigurationDefaults.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Ftypescript%2FwriteConfigurationDefaults.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -212,44 +212,56 @@ export async function writeConfigurationDefaults(\n \n   if (!('include' in rawConfig)) {\n     userTsConfig.include = hasAppDir\n-      ? ['next-env.d.ts', nextAppTypes, '**/*.ts', '**/*.tsx']\n-      : ['next-env.d.ts', '**/*.ts', '**/*.tsx']\n+      ? ['next-env.d.ts', nextAppTypes, '**/*.mts', '**/*.ts', '**/*.tsx']\n+      : ['next-env.d.ts', '**/*.mts', '**/*.ts', '**/*.tsx']\n     suggestedActions.push(\n       cyan('include') +\n         ' was set to ' +\n         bold(\n           hasAppDir\n-            ? `['next-env.d.ts', '${nextAppTypes}', '**/*.ts', '**/*.tsx']`\n-            : `['next-env.d.ts', '**/*.ts', '**/*.tsx']`\n+            ? `['next-env.d.ts', '${nextAppTypes}', '**/*.mts', '**/*.ts', '**/*.tsx']`\n+            : `['next-env.d.ts', '**/*.mts', '**/*.ts', '**/*.tsx']`\n         )\n     )\n-  } else if (hasAppDir && !rawConfig.include.includes(nextAppTypes)) {\n-    if (!Array.isArray(userTsConfig.include)) {\n-      userTsConfig.include = []\n+  } else if (hasAppDir) {\n+    const missingFromResolved = []\n+    if (!rawConfig.include.includes(nextAppTypes)) {\n+      missingFromResolved.push(nextAppTypes)\n     }\n-    // rawConfig will resolve all extends and include paths (ex: tsconfig.json, tsconfig.base.json, etc.)\n-    // if it doesn't match userTsConfig then update the userTsConfig to add the\n-    // rawConfig's includes in addition to nextAppTypes\n-    if (\n-      rawConfig.include.length !== userTsConfig.include.length ||\n-      JSON.stringify(rawConfig.include.sort()) !==\n-        JSON.stringify(userTsConfig.include.sort())\n-    ) {\n-      userTsConfig.include.push(...rawConfig.include, nextAppTypes)\n-      suggestedActions.push(\n-        cyan('include') +\n-          ' was set to ' +\n-          bold(\n-            `[${[...rawConfig.include, nextAppTypes]\n-              .map((i) => `'${i}'`)\n-              .join(', ')}]`\n+    if (!rawConfig.include.includes('**/*.mts')) {\n+      missingFromResolved.push('**/*.mts')\n+    }\n+\n+    if (missingFromResolved.length > 0) {\n+      if (!Array.isArray(userTsConfig.include)) {\n+        userTsConfig.include = []\n+      }\n+      // rawConfig will resolve all extends and include paths (ex: tsconfig.json, tsconfig.base.json, etc.)\n+      // if it doesn't match userTsConfig then update the userTsConfig to add the\n+      // rawConfig's includes in addition to missing items\n+      if (\n+        rawConfig.include.length !== userTsConfig.include.length ||\n+        JSON.stringify(rawConfig.include.sort()) !==\n+          JSON.stringify(userTsConfig.include.sort())\n+      ) {\n+        userTsConfig.include.push(...rawConfig.include, ...missingFromResolved)\n+        suggestedActions.push(\n+          cyan('include') +\n+            ' was set to ' +\n+            bold(\n+              `[${[...rawConfig.include, ...missingFromResolved]\n+                .map((i) => `'${i}'`)\n+                .join(', ')}]`\n+            )\n+        )\n+      } else {\n+        missingFromResolved.forEach((item) => {\n+          userTsConfig.include.push(item)\n+          suggestedActions.push(\n+            cyan('include') + ' was updated to add ' + bold(`'${item}'`)\n           )\n-      )\n-    } else {\n-      userTsConfig.include.push(nextAppTypes)\n-      suggestedActions.push(\n-        cyan('include') + ' was updated to add ' + bold(`'${nextAppTypes}'`)\n-      )\n+        })\n+      }\n     }\n   }\n "
        },
        {
            "sha": "f2e3aae72546e5a483777b618b2b83a119f85020",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -1592,7 +1592,8 @@ export default async function loadConfig(\n       [\n         `${configBaseName}.cjs`,\n         `${configBaseName}.cts`,\n-        `${configBaseName}.mts`,\n+        // TODO: Remove `as any` once we bump @types/node to v22.10.0+\n+        ...((process.features as any).typescript ? [] : ['next.config.mts']),\n         `${configBaseName}.json`,\n         `${configBaseName}.jsx`,\n         `${configBaseName}.tsx`,"
        },
        {
            "sha": "8e7f21a6f440ea41451bbf71c08c758629c79a53",
            "filename": "packages/next/src/shared/lib/constants.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fconstants.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fconstants.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fconstants.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -109,6 +109,9 @@ export const CONFIG_FILES = [\n   'next.config.js',\n   'next.config.mjs',\n   'next.config.ts',\n+  // process.features can be undefined on Edge runtime\n+  // TODO: Remove `as any` once we bump @types/node to v22.10.0+\n+  ...((process?.features as any)?.typescript ? ['next.config.mts'] : []),\n ]\n export const BUILD_ID_FILE = 'BUILD_ID'\n export const BLOCKED_PAGES = ['/_document', '/_app', '/_error']"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/async-function/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/async-function/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "ffd1f65483d9025870af2eac41b2412621473fc3",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/async-function/async-function-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fasync-function-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fasync-function-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fasync-function-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-async-function-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should support config as async function (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "6977a7b9784ce40f2fab3eecc9a061545ccad219",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/async-function/async-function-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fasync-function-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fasync-function-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fasync-function-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-async-function-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support config as async function (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "7ef2f3d74f3bd9cc3e0c2c99bca800191e4aae8b",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/async-function/next.config.mts",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fasync-function%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,17 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfigAsyncFunction = async (phase, { defaultConfig }) => {\n+  const nextConfig: NextConfig = {\n+    ...defaultConfig,\n+    env: {\n+      foo: phase ? 'foo' : 'bar',\n+    },\n+  }\n+  return nextConfig\n+}\n+\n+export default nextConfigAsyncFunction"
        },
        {
            "sha": "888614deda3ba5d744d1a7e5dac131038dba2b12",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/dynamic-import-esm/app/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,8 @@\n+import { ReactNode } from 'react'\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/dynamic-import-esm/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "cb356468240d506ec494bbe2cdd8c46c20a50558",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/dynamic-import-esm/foo.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Ffoo.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Ffoo.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Ffoo.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export const foo = 'foo'"
        },
        {
            "sha": "dbe727d5cdf0815a60782570e54d74418b66e7f2",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/dynamic-import-esm/next-config-ts-dynamic-import-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fnext-config-ts-dynamic-import-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fnext-config-ts-dynamic-import-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fnext-config-ts-dynamic-import-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-dynamic-import-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support dynamic import (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "54cf1d5cde8839a1e1bd89965b7b8a6825d86b14",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/dynamic-import-esm/next.config.mts",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,19 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig = async () => {\n+  const { foo } = await import('./foo.ts')\n+\n+  const nextConfig: NextConfig = {\n+    env: {\n+      foo,\n+    },\n+  }\n+\n+  return nextConfig\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "d8c3d4d9917ccceba2459671757e3f63a33bb694",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/dynamic-import-esm/tsconfig.test.json",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fdynamic-import-esm%2Ftsconfig.test.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-as-default/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-as-default/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "63361e01355327825456179c75909b0b0a21868d",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-as-default/next-config-ts-export-as-default-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext-config-ts-export-as-default-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext-config-ts-export-as-default-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext-config-ts-export-as-default-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-export-as-default-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should support export as default (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "5cd4000e1a5f93590131c5494d58591e80a89a59",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-as-default/next-config-ts-export-as-default-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext-config-ts-export-as-default-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext-config-ts-export-as-default-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext-config-ts-export-as-default-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-export-as-default-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support export as default (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "fd4489326348d2f583a39ae3ddf5b4c7fa4a5601",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-as-default/next.config.mts",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-as-default%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,13 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo: 'foo',\n+  },\n+}\n+\n+export { nextConfig as default }"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-default/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-default/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "57778993a4393522b4590b708bef04d23494c408",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-default/next-config-ts-export-default-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext-config-ts-export-default-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext-config-ts-export-default-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext-config-ts-export-default-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-export-default-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should support export default (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "2e7cead4b60be5b5089a68141066a3c986e0af1f",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-default/next-config-ts-export-default-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext-config-ts-export-default-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext-config-ts-export-default-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext-config-ts-export-default-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-export-default-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support export default (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "54ef54e003b52ce8abbb9b6665884e3b0f9b60b0",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/export-default/next.config.mts",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fexport-default%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,11 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+export default {\n+  env: {\n+    foo: 'foo',\n+  },\n+} satisfies NextConfig"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "e5ca1a77124e2b939b05914d2a9ca9745b823950",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/app/page.tsx",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,12 @@\n+export default function Page() {\n+  return (\n+    <p>\n+      {JSON.stringify([\n+        process.env.cjs,\n+        process.env.mjs,\n+        process.env.jsCJS,\n+        process.env.jsESM,\n+      ])}\n+    </p>\n+  )\n+}"
        },
        {
            "sha": "316b3820f640d513ce5d5be55a91b95b4c2dbc0c",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/next-config-ts-import-from-node-modules-cjs.test.ts",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,22 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-from-node-modules-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should import from node_modules (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    const text = $('p').text()\n+    expect(text).toContain('cjs')\n+    expect(text).toContain('mjs')\n+    expect(text).toContain('jsCJS')\n+    expect(text).toContain('jsESM')\n+  })\n+})"
        },
        {
            "sha": "a2db84ed405770668f39584227b2c81794a86658",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/next-config-ts-import-from-node-modules-esm.test.ts",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,25 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-from-node-modules-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should import from node_modules (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    const text = $('p').text()\n+    expect(text).toContain('cjs')\n+    expect(text).toContain('mjs')\n+    expect(text).toContain('jsCJS')\n+    expect(text).toContain('jsESM')\n+  })\n+})"
        },
        {
            "sha": "35b13ea3640dbedfd2c2f7e747f8c4980e1efc24",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/next.config.mts",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,20 @@\n+import type { NextConfig } from 'next'\n+import cjs from 'cjs'\n+import mjs from 'mjs'\n+import jsCJS from 'js-cjs'\n+import jsESM from 'js-esm'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    cjs,\n+    mjs,\n+    jsCJS,\n+    jsESM,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "011bde74737d04c2c40410a590f76e6a6509264f",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/cjs/index.cjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.cjs?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cjs'"
        },
        {
            "sha": "443834d04c84c1a62bf236c6d98052555ec47ea1",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/cjs/index.d.ts",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.d.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,2 @@\n+declare const cjs: string\n+export default cjs"
        },
        {
            "sha": "490dbe501c0eb0d81a8d8de778eab6388086b79d",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/cjs/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Fpackage.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"type\": \"commonjs\",\n+  \"main\": \"index.cjs\"\n+}"
        },
        {
            "sha": "828616938f8f9fe8c99ab35d39a02f3b4ec5e6ee",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/js-cjs/index.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Findex.js?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'jsCJS'"
        },
        {
            "sha": "4aaa4a2388d533377fabe40476492f1b20d81efa",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/js-cjs/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Fpackage.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"type\": \"commonjs\",\n+  \"main\": \"index.js\"\n+}"
        },
        {
            "sha": "93663ef708ac8be1ed3e91bf8c754cf92a6f3bb2",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/js-esm/index.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Findex.js?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'jsESM'"
        },
        {
            "sha": "07aec65d5a4f318072e44bafd186b56a387d9f58",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/js-esm/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Fpackage.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"type\": \"module\",\n+  \"main\": \"index.js\"\n+}"
        },
        {
            "sha": "396adc75950033e5ebba375b2a205a045d200ff6",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/mjs/index.d.ts",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.d.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,2 @@\n+declare const mjs: string\n+export default mjs"
        },
        {
            "sha": "e7b27c03ffc66b50cedbbed53422e05f3e83b09e",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/mjs/index.mjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.mjs?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'mjs'"
        },
        {
            "sha": "d06c01d9b1a8b044536e03512c3fd2418d334ca3",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-from-node-modules/node_modules/mjs/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Fpackage.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"type\": \"commonjs\",\n+  \"main\": \"index.mjs\"\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "3ed1e8d2583a5d152830042d9a0a0d3e873af0ac",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/app/page.tsx",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,14 @@\n+export default function Page() {\n+  return (\n+    <p>\n+      {JSON.stringify([\n+        process.env.js,\n+        process.env.cjs,\n+        process.env.mjs,\n+        process.env.cts,\n+        process.env.mts,\n+        process.env.ts,\n+      ])}\n+    </p>\n+  )\n+}"
        },
        {
            "sha": "011bde74737d04c2c40410a590f76e6a6509264f",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/fixtures/cjs.cjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcjs.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcjs.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcjs.cjs?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cjs'"
        },
        {
            "sha": "b8e1125a55649c23274833122f655a16f4fc0701",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/fixtures/cts.cts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcts.cts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcts.cts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcts.cts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cts'"
        },
        {
            "sha": "828616938f8f9fe8c99ab35d39a02f3b4ec5e6ee",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/fixtures/js-cjs.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fjs-cjs.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fjs-cjs.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fjs-cjs.js?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'jsCJS'"
        },
        {
            "sha": "e7b27c03ffc66b50cedbbed53422e05f3e83b09e",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/fixtures/mjs.mjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmjs.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmjs.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmjs.mjs?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'mjs'"
        },
        {
            "sha": "f6744bd66196f3ae87fb9128617a2be68309b15a",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/fixtures/mts.mts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmts.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmts.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmts.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'mts'"
        },
        {
            "sha": "ef5c20433536154aba302e4e0525b2962959efc5",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/fixtures/ts.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fts.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fts.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ffixtures%2Fts.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'ts'"
        },
        {
            "sha": "da0af39863774dde2dcb27e307b9bb6f49521c75",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/next-config-ts-import-js-extensions-cjs.test.ts",
            "status": "added",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fnext-config-ts-import-js-extensions-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fnext-config-ts-import-js-extensions-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fnext-config-ts-import-js-extensions-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,24 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-js-extensions-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should import js extensions (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    const text = $('p').text()\n+    expect(text).toContain('jsCJS')\n+    expect(text).toContain('cjs')\n+    expect(text).toContain('mjs')\n+    expect(text).toContain('cts')\n+    expect(text).toContain('mts')\n+    expect(text).toContain('ts')\n+  })\n+})"
        },
        {
            "sha": "37d5451b8472e2658b4b5101e7cf9f0b1001db49",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/next.config.mts",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,25 @@\n+import type { NextConfig } from 'next'\n+import cjs from './fixtures/cjs.cjs'\n+import mjs from './fixtures/mjs.mjs'\n+import * as cts from './fixtures/cts.cts'\n+import mts from './fixtures/mts.mts'\n+import ts from './fixtures/ts.ts'\n+import js from './fixtures/js-cjs.js'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    cjs,\n+    mjs,\n+    // Node.js native TS can't handle `export =` syntax.\n+    cts: (cts as any).default,\n+    mts,\n+    ts,\n+    js,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "8393f2663ceb2ebd2d2643a05f83e2514477c278",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-cjs/tsconfig.test.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-cjs%2Ftsconfig.test.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true,\n+    \"esModuleInterop\": true,\n+    \"allowJs\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "3ed1e8d2583a5d152830042d9a0a0d3e873af0ac",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/app/page.tsx",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,14 @@\n+export default function Page() {\n+  return (\n+    <p>\n+      {JSON.stringify([\n+        process.env.js,\n+        process.env.cjs,\n+        process.env.mjs,\n+        process.env.cts,\n+        process.env.mts,\n+        process.env.ts,\n+      ])}\n+    </p>\n+  )\n+}"
        },
        {
            "sha": "011bde74737d04c2c40410a590f76e6a6509264f",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/fixtures/cjs.cjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fcjs.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fcjs.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fcjs.cjs?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cjs'"
        },
        {
            "sha": "b8e1125a55649c23274833122f655a16f4fc0701",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/fixtures/cts.cts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fcts.cts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fcts.cts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fcts.cts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cts'"
        },
        {
            "sha": "93663ef708ac8be1ed3e91bf8c754cf92a6f3bb2",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/fixtures/js-esm.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fjs-esm.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fjs-esm.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fjs-esm.js?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'jsESM'"
        },
        {
            "sha": "e7b27c03ffc66b50cedbbed53422e05f3e83b09e",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/fixtures/mjs.mjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fmjs.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fmjs.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fmjs.mjs?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'mjs'"
        },
        {
            "sha": "f6744bd66196f3ae87fb9128617a2be68309b15a",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/fixtures/mts.mts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fmts.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fmts.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fmts.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'mts'"
        },
        {
            "sha": "ef5c20433536154aba302e4e0525b2962959efc5",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/fixtures/ts.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fts.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fts.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ffixtures%2Fts.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export default 'ts'"
        },
        {
            "sha": "0fbe14b9a3824623189f2df13f2bd1237c1543e3",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/next-config-ts-import-js-extensions-esm.test.ts",
            "status": "added",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fnext-config-ts-import-js-extensions-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fnext-config-ts-import-js-extensions-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fnext-config-ts-import-js-extensions-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,27 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-js-extensions-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should import js extensions (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    const text = $('p').text()\n+    expect(text).toContain('jsESM')\n+    expect(text).toContain('cjs')\n+    expect(text).toContain('mjs')\n+    expect(text).toContain('cts')\n+    expect(text).toContain('mts')\n+    expect(text).toContain('ts')\n+  })\n+})"
        },
        {
            "sha": "245c502c66cf6510aa498929b4cc4ae37edf4de5",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/next.config.mts",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,25 @@\n+import type { NextConfig } from 'next'\n+import cjs from './fixtures/cjs.cjs'\n+import mjs from './fixtures/mjs.mjs'\n+import * as cts from './fixtures/cts.cts'\n+import mts from './fixtures/mts.mts'\n+import ts from './fixtures/ts.ts'\n+import js from './fixtures/js-esm.js'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    cjs,\n+    mjs,\n+    // Node.js native TS can't handle `export =` syntax.\n+    cts: (cts as any).default,\n+    mts,\n+    ts,\n+    js,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "8393f2663ceb2ebd2d2643a05f83e2514477c278",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-js-extensions-esm/tsconfig.test.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-js-extensions-esm%2Ftsconfig.test.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true,\n+    \"esModuleInterop\": true,\n+    \"allowJs\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-json/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-json/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "abdd5202bdfbe6a1112fc94eff5682ef785975ea",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-json/foo.json",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Ffoo.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Ffoo.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Ffoo.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"foo\": \"foo\"\n+}"
        },
        {
            "sha": "c165cf364d7625fb5ae0b4ded02a3e1fa921c653",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-json/next-config-ts-import-json-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext-config-ts-import-json-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext-config-ts-import-json-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext-config-ts-import-json-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-json-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should support import json (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "9878766fb6c2a59f21cd553293dee96730be6dc4",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-json/next-config-ts-import-json-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext-config-ts-import-json-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext-config-ts-import-json-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext-config-ts-import-json-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-json-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support import json (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "975bc289a147f26f6aacd75cad5391de545b14e9",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/import-json/next.config.mts",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fimport-json%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,12 @@\n+import type { NextConfig } from 'next'\n+import fooJson from './foo.json' with { type: 'json' }\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+export default {\n+  env: {\n+    foo: fooJson.foo,\n+  },\n+} satisfies NextConfig"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "a810a8c6a6afef8b96824cc668bc3e0635e62500",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foobarbaz}</p>\n+}"
        },
        {
            "sha": "e1bba987f729b9c4eb1b75ff47da38958198c4c4",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/bar.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fbar.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fbar.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fbar.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+import { baz } from './baz.ts'\n+\n+export const barbaz = 'bar' + baz"
        },
        {
            "sha": "24abaad3a5efe9beb5d41076b522ed5b678cbf62",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/baz.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fbaz.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fbaz.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fbaz.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+export const baz = 'baz'"
        },
        {
            "sha": "70404db45c96eed3c275935e4113404ca762ae6d",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/foo.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Ffoo.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Ffoo.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Ffoo.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+import { barbaz } from './bar.ts'\n+\n+export const foobarbaz = 'foo' + barbaz"
        },
        {
            "sha": "5648973a0cd2311573ef980cfb7fd632e9d557b4",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/next-config-ts-nested-imports-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext-config-ts-nested-imports-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext-config-ts-nested-imports-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext-config-ts-nested-imports-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-nested-imports-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should handle nested imports (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foobarbaz')\n+  })\n+})"
        },
        {
            "sha": "20d61c6a05dfde0e7b10affdff50bbd0ad6b3a02",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/next-config-ts-nested-imports-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext-config-ts-nested-imports-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext-config-ts-nested-imports-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext-config-ts-nested-imports-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-nested-imports-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should handle nested imports (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foobarbaz')\n+  })\n+})"
        },
        {
            "sha": "1511f1aefbd808bf4b949efdded58316a81b45d1",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/next.config.mts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,14 @@\n+import type { NextConfig } from 'next'\n+import { foobarbaz } from './foo.ts'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foobarbaz,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "d8c3d4d9917ccceba2459671757e3f63a33bb694",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/nested-imports/tsconfig.test.json",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnested-imports%2Ftsconfig.test.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-cjs/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-cjs/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "19102815663d23f8b75a47e7a01965dcdc96468c",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-cjs/foo.txt",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Ffoo.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Ffoo.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Ffoo.txt?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+foo\n\\ No newline at end of file"
        },
        {
            "sha": "d90e0956a51d064274f5e6a549a44d7fa09c7b21",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-cjs/next-config-ts-node-api-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fnext-config-ts-node-api-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fnext-config-ts-node-api-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fnext-config-ts-node-api-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-node-api-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should be able to use Node.js API (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "327c6e9e3bd318f64bb37c5d883dae61b2f83dbe",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-cjs/next.config.mts",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-cjs%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,17 @@\n+import type { NextConfig } from 'next'\n+import fs from 'node:fs'\n+import { join } from 'node:path'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const foo = fs.readFileSync(join('.', 'foo.txt'), 'utf8')\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-esm/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-esm/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "19102815663d23f8b75a47e7a01965dcdc96468c",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-esm/foo.txt",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Ffoo.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Ffoo.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Ffoo.txt?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1 @@\n+foo\n\\ No newline at end of file"
        },
        {
            "sha": "9712b9c4367d61ecde1c008145bfe83db996e4b1",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-esm/next-config-ts-node-api-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fnext-config-ts-node-api-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fnext-config-ts-node-api-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fnext-config-ts-node-api-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-node-api-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should be able to use Node.js API (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "7e7cd06dab41145b227c76b87493c5e8a9c50b97",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/node-api-esm/next.config.mts",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Fnode-api-esm%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,22 @@\n+import type { NextConfig } from 'next'\n+import fs from 'node:fs'\n+import { dirname, join } from 'node:path'\n+import { fileURLToPath } from 'node:url'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+// import.meta.url only works in ESM\n+const __filename = fileURLToPath(import.meta.url)\n+const __dirname = dirname(__filename)\n+\n+const foo = fs.readFileSync(join(__dirname, 'foo.txt'), 'utf8')\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "888614deda3ba5d744d1a7e5dac131038dba2b12",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/top-level-await-esm/app/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,8 @@\n+import { ReactNode } from 'react'\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/top-level-await-esm/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "d430909ba65a44e1aa2c940a518eab941a0a79fb",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/top-level-await-esm/get-foo.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fget-foo.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fget-foo.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fget-foo.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export async function getFoo() {\n+  return 'foo'\n+}"
        },
        {
            "sha": "55d5bf343b5a0e81800af0ab05d10bae0e45e5f6",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/top-level-await-esm/next-config-ts-top-level-await-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fnext-config-ts-top-level-await-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fnext-config-ts-top-level-await-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fnext-config-ts-top-level-await-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-top-level-await-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support top-level await (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "c4fe04bd54f8626282a9d683038e78bc700cfdad",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/top-level-await-esm/next.config.mts",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,12 @@\n+import type { NextConfig } from 'next'\n+import { getFoo } from './get-foo.ts'\n+\n+const foo = await getFoo()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "d8c3d4d9917ccceba2459671757e3f63a33bb694",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/top-level-await-esm/tsconfig.test.json",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftop-level-await-esm%2Ftsconfig.test.json?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/type-error/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fapp%2Flayout.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/type-error/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fapp%2Fpage.tsx?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "eae3fd49bcab153d2a824424313a934453f09904",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/type-error/next-config-ts-type-error-cjs.test.ts",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext-config-ts-type-error-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext-config-ts-type-error-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext-config-ts-type-error-cjs.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,32 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-type-error-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next, isNextDev, skipped } = nextTestSetup({\n+    files: __dirname,\n+    skipStart: true,\n+    skipDeployment: true,\n+  })\n+\n+  if (skipped) {\n+    return\n+  }\n+\n+  it('should throw with type error on build (CJS)', async () => {\n+    if (isNextDev) {\n+      await next.start()\n+      const $ = await next.render$('/')\n+      expect($('p').text()).toBe('foo')\n+    } else {\n+      const { cliOutput } = await next.build()\n+      await expect(cliOutput).toContain(\n+        `Type 'string' is not assignable to type 'number'.`\n+      )\n+    }\n+  })\n+})"
        },
        {
            "sha": "b925d05dfaa3d819b1b3c946f1e99b2728900b9d",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/type-error/next-config-ts-type-error-esm.test.ts",
            "status": "added",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext-config-ts-type-error-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext-config-ts-type-error-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext-config-ts-type-error-esm.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,35 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-type-error-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next, isNextDev, skipped } = nextTestSetup({\n+    files: __dirname,\n+    skipStart: true,\n+    skipDeployment: true,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  if (skipped) {\n+    return\n+  }\n+\n+  it('should throw with type error on build (ESM)', async () => {\n+    if (isNextDev) {\n+      await next.start()\n+      const $ = await next.render$('/')\n+      expect($('p').text()).toBe('foo')\n+    } else {\n+      const { cliOutput } = await next.build()\n+      await expect(cliOutput).toContain(\n+        `Type 'string' is not assignable to type 'number'.`\n+      )\n+    }\n+  })\n+})"
        },
        {
            "sha": "bfa814e503a6aa611ac823f727241854993d97a4",
            "filename": "test/e2e/app-dir/next-config-ts-native-mts/type-error/next.config.mts",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext.config.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext.config.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-mts%2Ftype-error%2Fnext.config.mts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -0,0 +1,16 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+// type error\n+let foo: number = 'foo'\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "b7c736eec04ddb93b4e66b5bc484e5406f0fc0e9",
            "filename": "test/e2e/tsconfig-module-preserve/index.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Ftsconfig-module-preserve%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fe2e%2Ftsconfig-module-preserve%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Ftsconfig-module-preserve%2Findex.test.ts?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -57,6 +57,7 @@ describe('tsconfig module: preserve', () => {\n         },\n         \"include\": [\n           \"next-env.d.ts\",\n+          \"**/*.mts\",\n           \"**/*.ts\",\n           \"**/*.tsx\"\n         ],"
        },
        {
            "sha": "5a9865dbb0c2bd08980fce7c18452f87c6892b7c",
            "filename": "test/integration/tsconfig-verifier/test/index.test.js",
            "status": "modified",
            "additions": 429,
            "deletions": 416,
            "changes": 845,
            "blob_url": "https://github.com/vercel/next.js/blob/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fintegration%2Ftsconfig-verifier%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3275034bc60b059ebf1c4139ccc102bd11338f39/test%2Fintegration%2Ftsconfig-verifier%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Ftsconfig-verifier%2Ftest%2Findex.test.js?ref=3275034bc60b059ebf1c4139ccc102bd11338f39",
            "patch": "@@ -25,43 +25,44 @@ import path from 'path'\n       const { code } = await nextBuild(appDir)\n       expect(code).toBe(0)\n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"compilerOptions\": {\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"module\": \"esnext\",\n-            \"esModuleInterop\": true,\n-            \"moduleResolution\": \"node\",\n-            \"resolveJsonModule\": true,\n-            \"isolatedModules\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"compilerOptions\": {\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"module\": \"esnext\",\n+           \"esModuleInterop\": true,\n+           \"moduleResolution\": \"node\",\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -80,43 +81,44 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"compilerOptions\": {\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"module\": \"esnext\",\n-            \"esModuleInterop\": true,\n-            \"moduleResolution\": \"node\",\n-            \"resolveJsonModule\": true,\n-            \"isolatedModules\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"compilerOptions\": {\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"module\": \"esnext\",\n+           \"esModuleInterop\": true,\n+           \"moduleResolution\": \"node\",\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -147,51 +149,52 @@ import path from 'path'\n       // Weird comma placement until this issue is resolved:\n       // https://github.com/kaelzhang/node-comment-json/issues/21\n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"// top-level comment\n-        {\n-          // in-object comment 1\n-          \"compilerOptions\": {\n-            // in-object comment\n-            \"esModuleInterop\": true, // this should be true\n-            \"module\": \"esnext\" // should not be umd\n-            // end-object comment\n-            ,\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"moduleResolution\": \"node\",\n-            \"resolveJsonModule\": true,\n-            \"isolatedModules\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          }\n-          // in-object comment 2\n-          ,\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        // end comment\n-        \"\n+       \"// top-level comment\n+       {\n+         // in-object comment 1\n+         \"compilerOptions\": {\n+           // in-object comment\n+           \"esModuleInterop\": true, // this should be true\n+           \"module\": \"esnext\" // should not be umd\n+           // end-object comment\n+           ,\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"moduleResolution\": \"node\",\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         }\n+         // in-object comment 2\n+         ,\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       // end comment\n+       \"\n       `)\n     })\n \n@@ -207,43 +210,44 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"compilerOptions\": {\n-            \"esModuleInterop\": true,\n-            \"module\": \"commonjs\",\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"moduleResolution\": \"node\",\n-            \"resolveJsonModule\": true,\n-            \"isolatedModules\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"compilerOptions\": {\n+           \"esModuleInterop\": true,\n+           \"module\": \"commonjs\",\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"moduleResolution\": \"node\",\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -259,43 +263,44 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"compilerOptions\": {\n-            \"esModuleInterop\": true,\n-            \"module\": \"es2020\",\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"moduleResolution\": \"node\",\n-            \"resolveJsonModule\": true,\n-            \"isolatedModules\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"compilerOptions\": {\n+           \"esModuleInterop\": true,\n+           \"module\": \"es2020\",\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"moduleResolution\": \"node\",\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -315,43 +320,44 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"compilerOptions\": {\n-            \"esModuleInterop\": true,\n-            \"moduleResolution\": \"node16\",\n-            \"module\": \"node16\",\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"resolveJsonModule\": true,\n-            \"isolatedModules\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"compilerOptions\": {\n+           \"esModuleInterop\": true,\n+           \"moduleResolution\": \"node16\",\n+           \"module\": \"node16\",\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -371,43 +377,44 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"compilerOptions\": {\n-            \"esModuleInterop\": true,\n-            \"moduleResolution\": \"bundler\",\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"module\": \"esnext\",\n-            \"resolveJsonModule\": true,\n-            \"isolatedModules\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"compilerOptions\": {\n+           \"esModuleInterop\": true,\n+           \"moduleResolution\": \"bundler\",\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"module\": \"esnext\",\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -424,44 +431,45 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-              \"{\n-                \"compilerOptions\": {\n-                  \"target\": \"es2022\",\n-                  \"lib\": [\n-                    \"dom\",\n-                    \"dom.iterable\",\n-                    \"esnext\"\n-                  ],\n-                  \"allowJs\": true,\n-                  \"skipLibCheck\": true,\n-                  \"strict\": false,\n-                  \"noEmit\": true,\n-                  \"incremental\": true,\n-                  \"module\": \"esnext\",\n-                  \"esModuleInterop\": true,\n-                  \"moduleResolution\": \"node\",\n-                  \"resolveJsonModule\": true,\n-                  \"isolatedModules\": true,\n-                  \"jsx\": \"react-jsx\",\n-                  \"plugins\": [\n-                    {\n-                      \"name\": \"next\"\n-                    }\n-                  ],\n-                  \"strictNullChecks\": true\n-                },\n-                \"include\": [\n-                  \"next-env.d.ts\",\n-                  \".next/types/**/*.ts\",\n-                  \"**/*.ts\",\n-                  \"**/*.tsx\"\n-                ],\n-                \"exclude\": [\n-                  \"node_modules\"\n-                ]\n-              }\n-              \"\n-          `)\n+       \"{\n+         \"compilerOptions\": {\n+           \"target\": \"es2022\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"module\": \"esnext\",\n+           \"esModuleInterop\": true,\n+           \"moduleResolution\": \"node\",\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n+      `)\n     })\n \n     it('allows you to set node16 module mode', async () => {\n@@ -480,43 +488,44 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"compilerOptions\": {\n-            \"esModuleInterop\": true,\n-            \"module\": \"node16\",\n-            \"moduleResolution\": \"node16\",\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"resolveJsonModule\": true,\n-            \"isolatedModules\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"compilerOptions\": {\n+           \"esModuleInterop\": true,\n+           \"module\": \"node16\",\n+           \"moduleResolution\": \"node16\",\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"resolveJsonModule\": true,\n+           \"isolatedModules\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -536,43 +545,44 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"compilerOptions\": {\n-            \"verbatimModuleSyntax\": true,\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"module\": \"esnext\",\n-            \"esModuleInterop\": true,\n-            \"moduleResolution\": \"node\",\n-            \"resolveJsonModule\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"compilerOptions\": {\n+           \"verbatimModuleSyntax\": true,\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"module\": \"esnext\",\n+           \"esModuleInterop\": true,\n+           \"moduleResolution\": \"node\",\n+           \"resolveJsonModule\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -594,43 +604,44 @@ import path from 'path'\n       expect(code).toBe(0)\n \n       expect(await readFile(tsConfig, 'utf8')).toMatchInlineSnapshot(`\n-        \"{\n-          \"extends\": \"./tsconfig.base.json\",\n-          \"compilerOptions\": {\n-            \"target\": \"ES2017\",\n-            \"lib\": [\n-              \"dom\",\n-              \"dom.iterable\",\n-              \"esnext\"\n-            ],\n-            \"allowJs\": true,\n-            \"skipLibCheck\": true,\n-            \"strict\": false,\n-            \"noEmit\": true,\n-            \"incremental\": true,\n-            \"module\": \"esnext\",\n-            \"esModuleInterop\": true,\n-            \"moduleResolution\": \"node\",\n-            \"resolveJsonModule\": true,\n-            \"jsx\": \"react-jsx\",\n-            \"plugins\": [\n-              {\n-                \"name\": \"next\"\n-              }\n-            ],\n-            \"strictNullChecks\": true\n-          },\n-          \"include\": [\n-            \"next-env.d.ts\",\n-            \".next/types/**/*.ts\",\n-            \"**/*.ts\",\n-            \"**/*.tsx\"\n-          ],\n-          \"exclude\": [\n-            \"node_modules\"\n-          ]\n-        }\n-        \"\n+       \"{\n+         \"extends\": \"./tsconfig.base.json\",\n+         \"compilerOptions\": {\n+           \"target\": \"ES2017\",\n+           \"lib\": [\n+             \"dom\",\n+             \"dom.iterable\",\n+             \"esnext\"\n+           ],\n+           \"allowJs\": true,\n+           \"skipLibCheck\": true,\n+           \"strict\": false,\n+           \"noEmit\": true,\n+           \"incremental\": true,\n+           \"module\": \"esnext\",\n+           \"esModuleInterop\": true,\n+           \"moduleResolution\": \"node\",\n+           \"resolveJsonModule\": true,\n+           \"jsx\": \"react-jsx\",\n+           \"plugins\": [\n+             {\n+               \"name\": \"next\"\n+             }\n+           ],\n+           \"strictNullChecks\": true\n+         },\n+         \"include\": [\n+           \"next-env.d.ts\",\n+           \".next/types/**/*.ts\",\n+           \"**/*.mts\",\n+           \"**/*.ts\",\n+           \"**/*.tsx\"\n+         ],\n+         \"exclude\": [\n+           \"node_modules\"\n+         ]\n+       }\n+       \"\n       `)\n     })\n \n@@ -670,6 +681,7 @@ import path from 'path'\n         \"include\": [\n           \"next-env.d.ts\",\n           \".next/types/**/*.ts\",\n+          \"**/*.mts\",\n           \"**/*.ts\",\n           \"**/*.tsx\"\n         ],\n@@ -737,6 +749,7 @@ import path from 'path'\n         \"include\": [\n           \"next-env.d.ts\",\n           \".next/types/**/*.ts\",\n+          \"**/*.mts\",\n           \"**/*.ts\",\n           \"**/*.tsx\"\n         ],"
        }
    ],
    "stats": {
        "total": 2032,
        "additions": 1509,
        "deletions": 523
    }
}