{
    "author": "remcohaszing",
    "message": "Remove useMDXComponents argument (#80871)\n\n### What?\n\nFix the signatures of `useMDXComponents`.\n\n### Why?\n\nThe `useMDXComponents` function is always called without any arguments.\nIt’s also always supposed to be a named export, not a default export.\nIt’s also called during render. Defining React components during render\nis an anti-pattern. All components that were previously defined inside\nof `useMDXComponents`, are now defined outside of the function.\n\n### How?\n\nManual fixes.\n\n---------\n\nCo-authored-by: graphite-app[bot] <96075541+graphite-app[bot]@users.noreply.github.com>\nCo-authored-by: Joseph <sephxd1234@gmail.com>\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "42bcacd9a1127bac3b018e134312e60d25117cbf",
    "files": [
        {
            "sha": "4c13a0254c9a5e7737134c9dca262f9e49053bed",
            "filename": "docs/01-app/02-guides/mdx.mdx",
            "status": "modified",
            "additions": 36,
            "deletions": 38,
            "changes": 74,
            "blob_url": "https://github.com/vercel/next.js/blob/42bcacd9a1127bac3b018e134312e60d25117cbf/docs%2F01-app%2F02-guides%2Fmdx.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/42bcacd9a1127bac3b018e134312e60d25117cbf/docs%2F01-app%2F02-guides%2Fmdx.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmdx.mdx?ref=42bcacd9a1127bac3b018e134312e60d25117cbf",
            "patch": "@@ -77,18 +77,18 @@ Create an `mdx-components.tsx` (or `.js`) file in the root of your project to de\n ```tsx filename=\"mdx-components.tsx\" switcher\n import type { MDXComponents } from 'mdx/types'\n \n-export function useMDXComponents(components: MDXComponents): MDXComponents {\n-  return {\n-    ...components,\n-  }\n+const components: MDXComponents = {}\n+\n+export function useMDXComponents(): MDXComponents {\n+  return components\n }\n ```\n \n ```js filename=\"mdx-components.js\" switcher\n-export function useMDXComponents(components) {\n-  return {\n-    ...components,\n-  }\n+const components = {}\n+\n+export function useMDXComponents() {\n+  return components\n }\n ```\n \n@@ -357,21 +357,22 @@ import Image, { ImageProps } from 'next/image'\n // React component you want, including inline styles,\n // components from other libraries, and more.\n \n-export function useMDXComponents(components: MDXComponents): MDXComponents {\n-  return {\n-    // Allows customizing built-in components, e.g. to add styling.\n-    h1: ({ children }) => (\n-      <h1 style={{ color: 'red', fontSize: '48px' }}>{children}</h1>\n-    ),\n-    img: (props) => (\n-      <Image\n-        sizes=\"100vw\"\n-        style={{ width: '100%', height: 'auto' }}\n-        {...(props as ImageProps)}\n-      />\n-    ),\n-    ...components,\n-  }\n+const components = {\n+  // Allows customizing built-in components, e.g. to add styling.\n+  h1: ({ children }) => (\n+    <h1 style={{ color: 'red', fontSize: '48px' }}>{children}</h1>\n+  ),\n+  img: (props) => (\n+    <Image\n+      sizes=\"100vw\"\n+      style={{ width: '100%', height: 'auto' }}\n+      {...(props as ImageProps)}\n+    />\n+  ),\n+} satisfies MDXComponents\n+\n+export function useMDXComponents(): MDXComponents {\n+  return components\n }\n ```\n \n@@ -383,21 +384,18 @@ import Image from 'next/image'\n // React component you want, including inline styles,\n // components from other libraries, and more.\n \n-export function useMDXComponents(components) {\n-  return {\n-    // Allows customizing built-in components, e.g. to add styling.\n-    h1: ({ children }) => (\n-      <h1 style={{ color: 'red', fontSize: '48px' }}>{children}</h1>\n-    ),\n-    img: (props) => (\n-      <Image\n-        sizes=\"100vw\"\n-        style={{ width: '100%', height: 'auto' }}\n-        {...props}\n-      />\n-    ),\n-    ...components,\n-  }\n+const components = {\n+  // Allows customizing built-in components, e.g. to add styling.\n+  h1: ({ children }) => (\n+    <h1 style={{ color: 'red', fontSize: '48px' }}>{children}</h1>\n+  ),\n+  img: (props) => (\n+    <Image sizes=\"100vw\" style={{ width: '100%', height: 'auto' }} {...props} />\n+  ),\n+}\n+\n+export function useMDXComponents() {\n+  return components\n }\n ```\n "
        },
        {
            "sha": "456666a04c65a265f68921d416c38d1f6ed54d2e",
            "filename": "docs/01-app/03-api-reference/03-file-conventions/mdx-components.mdx",
            "status": "modified",
            "additions": 17,
            "deletions": 28,
            "changes": 45,
            "blob_url": "https://github.com/vercel/next.js/blob/42bcacd9a1127bac3b018e134312e60d25117cbf/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2Fmdx-components.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/42bcacd9a1127bac3b018e134312e60d25117cbf/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2Fmdx-components.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2Fmdx-components.mdx?ref=42bcacd9a1127bac3b018e134312e60d25117cbf",
            "patch": "@@ -14,56 +14,45 @@ Use the file `mdx-components.tsx` (or `.js`) in the root of your project to defi\n ```tsx filename=\"mdx-components.tsx\" switcher\n import type { MDXComponents } from 'mdx/types'\n \n-export function useMDXComponents(components: MDXComponents): MDXComponents {\n-  return {\n-    ...components,\n-  }\n+const components: MDXComponents = {}\n+\n+export function useMDXComponents(): MDXComponents {\n+  return components\n }\n ```\n \n ```js filename=\"mdx-components.js\" switcher\n-export function useMDXComponents(components) {\n-  return {\n-    ...components,\n-  }\n+const components = {}\n+\n+export function useMDXComponents() {\n+  return components\n }\n ```\n \n ## Exports\n \n ### `useMDXComponents` function\n \n-The file must export a single function, either as a default export or named `useMDXComponents`.\n+The file must export a single function named `useMDXComponents`. This function does not accept any arguments.\n \n ```tsx filename=\"mdx-components.tsx\" switcher\n import type { MDXComponents } from 'mdx/types'\n \n-export function useMDXComponents(components: MDXComponents): MDXComponents {\n-  return {\n-    ...components,\n-  }\n+const components: MDXComponents = {}\n+\n+export function useMDXComponents(): MDXComponents {\n+  return components\n }\n ```\n \n ```js filename=\"mdx-components.js\" switcher\n-export function useMDXComponents(components) {\n-  return {\n-    ...components,\n-  }\n+const components = {}\n+\n+export function useMDXComponents() {\n+  return components\n }\n ```\n \n-## Params\n-\n-### `components`\n-\n-When defining MDX Components, the export function accepts a single parameter, `components`. This parameter is an instance of `MDXComponents`.\n-\n-- The key is the name of the HTML element to override.\n-- The value is the component to render instead.\n-\n-> **Good to know**: Remember to pass all other components (i.e. `...components`) that do not have overrides.\n-\n ## Version History\n \n | Version   | Changes              |"
        },
        {
            "sha": "e4c8d58c2a49db51bc8e882d6acfef7c68aee280",
            "filename": "examples/mdx/mdx-components.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/42bcacd9a1127bac3b018e134312e60d25117cbf/examples%2Fmdx%2Fmdx-components.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/42bcacd9a1127bac3b018e134312e60d25117cbf/examples%2Fmdx%2Fmdx-components.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fmdx%2Fmdx-components.tsx?ref=42bcacd9a1127bac3b018e134312e60d25117cbf",
            "patch": "@@ -1,10 +1,8 @@\n import type { MDXComponents } from \"mdx/types\";\n \n-// This file is required to use MDX in `app` directory.\n-export function useMDXComponents(components: MDXComponents): MDXComponents {\n-  return {\n-    // Allows customizing built-in components, e.g. to add styling.\n-    // h1: ({ children }) => <h1 style={{ fontSize: \"100px\" }}>{children}</h1>,\n-    ...components,\n-  };\n+const components: MDXComponents = {};\n+\n+// Allows customizing built-in components, e.g. to add styling.\n+export function useMDXComponents(): MDXComponents {\n+  return components;\n }"
        },
        {
            "sha": "f218568884f4655953462eeb6006fdb7056df476",
            "filename": "packages/next-mdx/readme.md",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/42bcacd9a1127bac3b018e134312e60d25117cbf/packages%2Fnext-mdx%2Freadme.md",
            "raw_url": "https://github.com/vercel/next.js/raw/42bcacd9a1127bac3b018e134312e60d25117cbf/packages%2Fnext-mdx%2Freadme.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-mdx%2Freadme.md?ref=42bcacd9a1127bac3b018e134312e60d25117cbf",
            "patch": "@@ -105,14 +105,13 @@ yarn add @next/mdx\n Create an `mdx-components.js` file at the root of your project with the following contents:\n \n ```js\n-// This file is required to use @next/mdx in the `app` directory.\n-export function useMDXComponents(components) {\n+// Allows customizing built-in components, e.g. to add styling.\n+const components = {\n+  // h1: ({ children }) => <h1 style={{ fontSize: \"100px\" }}>{children}</h1>,\n+}\n+\n+export function useMDXComponents() {\n   return components\n-  // Allows customizing built-in components, e.g. to add styling.\n-  // return {\n-  //   h1: ({ children }) => <h1 style={{ fontSize: \"100px\" }}>{children}</h1>,\n-  //   ...components,\n-  // }\n }\n ```\n "
        },
        {
            "sha": "c77320c40cf83175dbdf7f8345f8143896795693",
            "filename": "test/development/acceptance-app/fixtures/app-hmr-changes/mdx-components.ts",
            "status": "modified",
            "additions": 25,
            "deletions": 26,
            "changes": 51,
            "blob_url": "https://github.com/vercel/next.js/blob/42bcacd9a1127bac3b018e134312e60d25117cbf/test%2Fdevelopment%2Facceptance-app%2Ffixtures%2Fapp-hmr-changes%2Fmdx-components.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/42bcacd9a1127bac3b018e134312e60d25117cbf/test%2Fdevelopment%2Facceptance-app%2Ffixtures%2Fapp-hmr-changes%2Fmdx-components.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Ffixtures%2Fapp-hmr-changes%2Fmdx-components.ts?ref=42bcacd9a1127bac3b018e134312e60d25117cbf",
            "patch": "@@ -15,30 +15,29 @@ import { Callout } from 'app/(post)/components/callout'\n import { Ref, FootNotes, FootNote } from 'app/(post)/components/footnotes'\n import { Blockquote as blockquote } from 'app/(post)/components/blockquote'\n \n-export function useMDXComponents(components: {\n-  [component: string]: React.ComponentType\n-}) {\n-  return {\n-    ...components,\n-    a,\n-    h1,\n-    h2,\n-    h3,\n-    p,\n-    ol,\n-    ul,\n-    li,\n-    hr,\n-    pre: Snippet,\n-    img: Image,\n-    blockquote,\n-    Tweet,\n-    Image,\n-    Snippet,\n-    Caption,\n-    Callout,\n-    Ref,\n-    FootNotes,\n-    FootNote,\n-  }\n+const components = {\n+  a,\n+  h1,\n+  h2,\n+  h3,\n+  p,\n+  ol,\n+  ul,\n+  li,\n+  hr,\n+  pre: Snippet,\n+  img: Image,\n+  blockquote,\n+  Tweet,\n+  Image,\n+  Snippet,\n+  Caption,\n+  Callout,\n+  Ref,\n+  FootNotes,\n+  FootNote,\n+}\n+\n+export function useMDXComponents() {\n+  return components\n }"
        },
        {
            "sha": "e112b100b6818c3a68ecc61f10bce17d1733f668",
            "filename": "test/e2e/app-dir/app-css/mdx-components.jsx",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/10e0798fc9a43dc34f8d49c6b805d8a54af6d91b/test%2Fe2e%2Fapp-dir%2Fapp-css%2Fmdx-components.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/10e0798fc9a43dc34f8d49c6b805d8a54af6d91b/test%2Fe2e%2Fapp-dir%2Fapp-css%2Fmdx-components.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp-css%2Fmdx-components.jsx?ref=10e0798fc9a43dc34f8d49c6b805d8a54af6d91b",
            "patch": "@@ -1 +0,0 @@\n-export const useMDXComponents = (components) => components"
        },
        {
            "sha": "47e587962a7579441047a1ff53d3b7454a4f511a",
            "filename": "test/e2e/app-dir/modularizeimports/mdx-components.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/10e0798fc9a43dc34f8d49c6b805d8a54af6d91b/test%2Fe2e%2Fapp-dir%2Fmodularizeimports%2Fmdx-components.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/10e0798fc9a43dc34f8d49c6b805d8a54af6d91b/test%2Fe2e%2Fapp-dir%2Fmodularizeimports%2Fmdx-components.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmodularizeimports%2Fmdx-components.tsx?ref=10e0798fc9a43dc34f8d49c6b805d8a54af6d91b",
            "patch": "@@ -1,5 +0,0 @@\n-export function useMDXComponents(components) {\n-  return {\n-    ...components,\n-  }\n-}"
        },
        {
            "sha": "c23899a1b07d378d7cefec7701fd5e91640041e1",
            "filename": "test/integration/app-types/mdx-components.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/10e0798fc9a43dc34f8d49c6b805d8a54af6d91b/test%2Fintegration%2Fapp-types%2Fmdx-components.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/10e0798fc9a43dc34f8d49c6b805d8a54af6d91b/test%2Fintegration%2Fapp-types%2Fmdx-components.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fapp-types%2Fmdx-components.ts?ref=10e0798fc9a43dc34f8d49c6b805d8a54af6d91b",
            "patch": "@@ -1,3 +0,0 @@\n-export function useMDXComponents(components: unknown) {\n-  return components\n-}"
        },
        {
            "sha": "31d97978c6be2dad1dc4a7ee445fbcb1af4a073e",
            "filename": "test/integration/plugin-mdx-rs/mdx-components.js",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/42bcacd9a1127bac3b018e134312e60d25117cbf/test%2Fintegration%2Fplugin-mdx-rs%2Fmdx-components.js",
            "raw_url": "https://github.com/vercel/next.js/raw/42bcacd9a1127bac3b018e134312e60d25117cbf/test%2Fintegration%2Fplugin-mdx-rs%2Fmdx-components.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fplugin-mdx-rs%2Fmdx-components.js?ref=42bcacd9a1127bac3b018e134312e60d25117cbf",
            "patch": "@@ -1,8 +1,9 @@\n import { Marker } from './components/marker'\n \n-export function useMDXComponents(components) {\n-  return {\n-    ...components,\n-    Marker,\n-  }\n+const components = {\n+  Marker,\n+}\n+\n+export function useMDXComponents() {\n+  return components\n }"
        }
    ],
    "stats": {
        "total": 215,
        "additions": 95,
        "deletions": 120
    }
}