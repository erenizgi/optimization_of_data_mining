{
    "author": "lukesandberg",
    "message": "[turbopack] Implement `Issue::source` on more Issue subtypes (#80874)\n\n### What\nFill in `source` implementations for the majority of `Issue` implementations, leaving `TODO`s in a number of the buggy or tricky ones.\n\n### Why?\n\nCurrently `Issue` has both `file_path()` and `source()`.\n * `file_path()` tells us where the error came from\n  * `source()` tells us the exact source file the error came from\n\nGenerally, if at all possible we should strongly prefer `source()` since it enables better error messages.\n\nPart-of PACK-4879",
    "sha": "a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
    "files": [
        {
            "sha": "f245e99f440313c297fb4c851069a217f428264e",
            "filename": "crates/next-api/src/middleware.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -86,7 +86,8 @@ impl MiddlewareEndpoint {\n             userland_module,\n         );\n \n-        let config = parse_config_from_source(userland_module, NextRuntime::Edge).await?;\n+        let config =\n+            parse_config_from_source(*self.source, userland_module, NextRuntime::Edge).await?;\n \n         if matches!(config.runtime, NextRuntime::NodeJs) {\n             return Ok(module);\n@@ -176,7 +177,9 @@ impl MiddlewareEndpoint {\n \n         let userland_module = self.userland_module();\n \n-        let config = parse_config_from_source(userland_module, NextRuntime::Edge).await?;\n+        let config =\n+            parse_config_from_source(*self.await?.source, userland_module, NextRuntime::Edge)\n+                .await?;\n \n         let next_config = this.project.next_config().await?;\n         let has_i18n = next_config.i18n.is_some();"
        },
        {
            "sha": "aef3f6e72bd2fdfa979016552cc769a4dea33332",
            "filename": "crates/next-api/src/module_graph.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fmodule_graph.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -477,6 +477,8 @@ impl Issue for CssGlobalImportIssue {\n     fn stage(&self) -> Vc<IssueStage> {\n         IssueStage::ProcessModule.into()\n     }\n+\n+    // TODO(PACK-4879): compute the source information by following the module references\n }\n \n type FxModuleNameMap = FxIndexMap<ResolvedVc<Box<dyn Module>>, RcStr>;"
        },
        {
            "sha": "a8396f40104312e4a69e30fac74b3b3f52393b77",
            "filename": "crates/next-api/src/pages.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-api%2Fsrc%2Fpages.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-api%2Fsrc%2Fpages.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fpages.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -917,7 +917,8 @@ impl PageEndpoint {\n             .process(self.source(), reference_type.clone())\n             .module();\n \n-        let config = parse_config_from_source(ssr_module, NextRuntime::default()).await?;\n+        let config =\n+            parse_config_from_source(self.source(), ssr_module, NextRuntime::default()).await?;\n \n         Ok(\n             // `/_app` and `/_document` never get rendered directly so they don't need to be"
        },
        {
            "sha": "3eb33f44fee80bf48ed8de9cf91b8714d7d9208b",
            "filename": "crates/next-api/src/project.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-api%2Fsrc%2Fproject.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-api%2Fsrc%2Fproject.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fproject.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1424,7 +1424,7 @@ impl Project {\n             )\n             .module();\n \n-        let config = parse_config_from_source(module, NextRuntime::Edge).await?;\n+        let config = parse_config_from_source(source, module, NextRuntime::Edge).await?;\n \n         if matches!(config.runtime, NextRuntime::NodeJs) {\n             Ok(self.node_middleware_context())"
        },
        {
            "sha": "068f9e4e9210e1a19a35f03189acc382829aae91",
            "filename": "crates/next-core/src/app_segment_config.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fapp_segment_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fapp_segment_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fapp_segment_config.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -245,10 +245,8 @@ impl Issue for NextSegmentConfigParsingIssue {\n     }\n \n     #[turbo_tasks::function]\n-    async fn source(&self) -> Result<Vc<OptionIssueSource>> {\n-        Ok(Vc::cell(Some(\n-            self.source.resolve_source_map().await?.into_owned(),\n-        )))\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n     }\n }\n "
        },
        {
            "sha": "62bb7bb4e8af911d64fb277b48a6abe66f5c36b8",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 48,
            "changes": 50,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -3,21 +3,17 @@ use rustc_hash::FxHashSet;\n use serde::{Deserialize, Deserializer, Serialize};\n use serde_json::Value as JsonValue;\n use turbo_esregex::EsRegex;\n-use turbo_rcstr::{RcStr, rcstr};\n+use turbo_rcstr::RcStr;\n use turbo_tasks::{\n     FxIndexMap, NonLocalValue, OperationValue, ResolvedVc, TaskInput, Vc, debug::ValueDebugFormat,\n     trace::TraceRawVcs,\n };\n use turbo_tasks_env::EnvMap;\n-use turbo_tasks_fs::FileSystemPath;\n use turbopack::module_options::{\n     ConditionItem, ConditionPath, LoaderRuleItem, OptionWebpackRules,\n     module_options_context::{MdxTransformOptions, OptionWebpackConditions},\n };\n-use turbopack_core::{\n-    issue::{Issue, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n-    resolve::ResolveAliasMap,\n-};\n+use turbopack_core::resolve::ResolveAliasMap;\n use turbopack_ecmascript::{OptionTreeShaking, TreeShakingMode};\n use turbopack_ecmascript_plugins::transform::{\n     emotion::EmotionTransformConfig, relay::RelayConfig,\n@@ -1669,45 +1665,3 @@ impl JsConfig {\n         Vc::cell(self.compiler_options.clone().unwrap_or_default())\n     }\n }\n-\n-#[turbo_tasks::value]\n-struct OutdatedConfigIssue {\n-    path: FileSystemPath,\n-    old_name: RcStr,\n-    new_name: RcStr,\n-    description: RcStr,\n-}\n-\n-#[turbo_tasks::value_impl]\n-impl Issue for OutdatedConfigIssue {\n-    fn severity(&self) -> IssueSeverity {\n-        IssueSeverity::Error\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn stage(&self) -> Vc<IssueStage> {\n-        IssueStage::Config.into()\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.path.clone().cell()\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn title(&self) -> Vc<StyledString> {\n-        StyledString::Line(vec![\n-            StyledString::Code(self.old_name.clone()),\n-            StyledString::Text(rcstr!(\" has been replaced by \")),\n-            StyledString::Code(self.new_name.clone()),\n-        ])\n-        .cell()\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn description(&self) -> Vc<OptionStyledString> {\n-        Vc::cell(Some(\n-            StyledString::Text(self.description.clone()).resolved_cell(),\n-        ))\n-    }\n-}"
        },
        {
            "sha": "317d1ecbe150f50d145ac1395c0e91e5f6cfbc36",
            "filename": "crates/next-core/src/next_font/google/mod.rs",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -19,7 +19,7 @@ use turbopack::evaluate_context::node_evaluate_asset_context;\n use turbopack_core::{\n     asset::AssetContent,\n     context::AssetContext,\n-    ident::{AssetIdent, Layer},\n+    ident::Layer,\n     issue::{IssueExt, IssueSeverity, StyledString},\n     reference_type::{InnerAssets, ReferenceType},\n     resolve::{\n@@ -710,22 +710,22 @@ async fn get_mock_stylesheet(\n         false,\n     );\n     let loader_path = mock_fs.root().await?.join(\"loader.js\")?;\n+    let loader_source = Vc::upcast(VirtualSource::new(\n+        loader_path.clone(),\n+        AssetContent::file(\n+            File::from(format!(\n+                \"import data from './{}'; export default function load() {{ return data; }};\",\n+                response_path\n+                    .file_name()\n+                    .context(\"Must exist\")?\n+                    .to_string_lossy(),\n+            ))\n+            .into(),\n+        ),\n+    ));\n     let mocked_response_asset = asset_context\n         .process(\n-            Vc::upcast(VirtualSource::new(\n-                loader_path.clone(),\n-                AssetContent::file(\n-                    File::from(format!(\n-                        \"import data from './{}'; export default function load() {{ return data; \\\n-                         }};\",\n-                        response_path\n-                            .file_name()\n-                            .context(\"Must exist\")?\n-                            .to_string_lossy(),\n-                    ))\n-                    .into(),\n-                ),\n-            )),\n+            loader_source,\n             ReferenceType::Internal(InnerAssets::empty().to_resolved().await?),\n         )\n         .module();\n@@ -735,7 +735,7 @@ async fn get_mock_stylesheet(\n         mocked_response_asset,\n         root,\n         *env,\n-        AssetIdent::from_path(loader_path),\n+        loader_source,\n         asset_context,\n         *chunking_context,\n         None,"
        },
        {
            "sha": "886bf79de2d6feb34a67964dc93ff74a6fbd6963",
            "filename": "crates/next-core/src/next_font/local/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -316,6 +316,8 @@ fn font_file_options_from_query_map(query: &RcStr) -> Result<NextFontLocalFontFi\n #[turbo_tasks::value(shared)]\n struct FontResolvingIssue {\n     font_path: ResolvedVc<RcStr>,\n+    // TODO(PACK-4879): The filepath is incorrect and there should be a fine grained source\n+    // location pointing at the import/require\n     origin_path: FileSystemPath,\n }\n "
        },
        {
            "sha": "5a711897436e7c84394831a30b8b3384078fa03f",
            "filename": "crates/next-core/src/next_image/source_asset.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -55,7 +55,7 @@ impl Asset for StructuredImageFileSource {\n         let blur_options = blur_options();\n         match self.blur_placeholder_mode {\n             BlurPlaceholderMode::NextImageUrl => {\n-                let info = get_meta_data(self.image.ident(), *content, None).await?;\n+                let info = get_meta_data(*self.image, *content, None).await?;\n                 let width = info.width;\n                 let height = info.height;\n                 let blur_options = blur_options.await?;\n@@ -83,7 +83,7 @@ impl Asset for StructuredImageFileSource {\n                 )?;\n             }\n             BlurPlaceholderMode::DataUrl => {\n-                let info = get_meta_data(self.image.ident(), *content, Some(blur_options)).await?;\n+                let info = get_meta_data(*self.image, *content, Some(blur_options)).await?;\n                 writeln!(\n                     result,\n                     \"export default {{ src, width: {width}, height: {height}, blurDataURL: \\\n@@ -99,7 +99,7 @@ impl Asset for StructuredImageFileSource {\n                 )?;\n             }\n             BlurPlaceholderMode::None => {\n-                let info = get_meta_data(self.image.ident(), *content, None).await?;\n+                let info = get_meta_data(*self.image, *content, None).await?;\n                 writeln!(\n                     result,\n                     \"export default {{ src, width: {width}, height: {height} }}\","
        },
        {
            "sha": "f3a5051e9a6be2e105617d80729fa91d23147444",
            "filename": "crates/next-core/src/next_server/resolve.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -448,6 +448,8 @@ async fn packages_glob(packages: Vc<Vec<RcStr>>) -> Result<Vc<OptionPackagesGlob\n \n #[turbo_tasks::value]\n struct ExternalizeIssue {\n+    // TODO(PACK-4879): The filepath is incorrect and there should be a fine grained source\n+    // location pointing at the import/require\n     file_path: FileSystemPath,\n     package: RcStr,\n     request_str: RcStr,\n@@ -463,9 +465,9 @@ impl Issue for ExternalizeIssue {\n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n         StyledString::Line(vec![\n-            StyledString::Text(\"Package \".into()),\n+            StyledString::Text(rcstr!(\"Package \")),\n             StyledString::Code(self.package.clone()),\n-            StyledString::Text(\" can't be external\".into()),\n+            StyledString::Text(rcstr!(\" can't be external\")),\n         ])\n         .cell()\n     }\n@@ -485,11 +487,11 @@ impl Issue for ExternalizeIssue {\n         Ok(Vc::cell(Some(\n             StyledString::Stack(vec![\n                 StyledString::Line(vec![\n-                    StyledString::Text(\"The request \".into()),\n+                    StyledString::Text(rcstr!(\"The request \")),\n                     StyledString::Code(self.request_str.clone()),\n-                    StyledString::Text(\" matches \".into()),\n-                    StyledString::Code(\"serverExternalPackages\".into()),\n-                    StyledString::Text(\" (or the default list).\".into()),\n+                    StyledString::Text(rcstr!(\" matches \")),\n+                    StyledString::Code(rcstr!(\"serverExternalPackages\")),\n+                    StyledString::Text(rcstr!(\" (or the default list).\")),\n                 ]),\n                 StyledString::Line(self.reason.clone()),\n             ])"
        },
        {
            "sha": "c4d2bbf5ea5448e0f35ae13e9e5cdf4a77e4a988",
            "filename": "crates/next-core/src/next_shared/resolve.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Fresolve.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -45,6 +45,8 @@ static FEATURE_MODULES: LazyLock<FxHashMap<&'static str, Vec<&'static str>>> =\n \n #[turbo_tasks::value(shared)]\n pub struct InvalidImportModuleIssue {\n+    // TODO(PACK-4879): The filepath is incorrect and there should be a fine grained source\n+    // location pointing at the import/require\n     pub file_path: FileSystemPath,\n     pub messages: Vec<RcStr>,\n     pub skip_context_message: bool,"
        },
        {
            "sha": "658c044adb33dcca245dd2f24e38bce61c8d8b6c",
            "filename": "crates/next-core/src/next_shared/transforms/next_page_static_info.rs",
            "status": "modified",
            "additions": 31,
            "deletions": 11,
            "changes": 42,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fnext_page_static_info.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fnext_page_static_info.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fnext_page_static_info.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -6,14 +6,16 @@ use next_custom_transforms::transforms::page_static_info::{\n use serde_json::Value;\n use swc_core::{\n     atoms::{Atom, atom},\n+    common::source_map::SmallPos,\n     ecma::ast::Program,\n };\n use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack::module_options::{ModuleRule, ModuleRuleEffect};\n use turbopack_core::issue::{\n-    Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString,\n+    Issue, IssueExt, IssueSeverity, IssueSource, IssueStage, OptionIssueSource, OptionStyledString,\n+    StyledString,\n };\n use turbopack_ecmascript::{CustomTransformer, EcmascriptInputTransform, TransformContext};\n \n@@ -82,7 +84,11 @@ impl CustomTransformer for NextPageStaticInfo {\n             if is_server_layer_page {\n                 for warning in collected_exports.warnings.iter() {\n                     PageStaticInfoIssue {\n-                        file_path: ctx.file_path.clone(),\n+                        source: IssueSource::from_swc_offsets(\n+                            ctx.source,\n+                            warning.span.lo.to_u32(),\n+                            warning.span.hi.to_u32(),\n+                        ),\n                         messages: vec![\n                             format!(\n                                 \"Next.js can't recognize the exported `{}` field in \\\"{}\\\" as {}.\",\n@@ -98,7 +104,8 @@ impl CustomTransformer for NextPageStaticInfo {\n             }\n \n             if is_app_page\n-                && let Some(Const::Value(Value::Object(config_obj))) = properties_to_extract.config\n+                && let Some(Const::Value(Value::Object(config_obj), span)) =\n+                    properties_to_extract.config\n             {\n                 let mut messages = vec![format!(\n                     \"Page config in {} is deprecated. Replace `export const config=â€¦` with the \\\n@@ -117,7 +124,11 @@ impl CustomTransformer for NextPageStaticInfo {\n                 messages.push(\"Visit https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config for more information.\".to_string());\n \n                 PageStaticInfoIssue {\n-                    file_path: ctx.file_path.clone(),\n+                    source: IssueSource::from_swc_offsets(\n+                        ctx.source,\n+                        span.lo.to_u32(),\n+                        span.hi.to_u32(),\n+                    ),\n                     messages,\n                     severity: IssueSeverity::Warning,\n                 }\n@@ -126,11 +137,15 @@ impl CustomTransformer for NextPageStaticInfo {\n             }\n \n             if collected_exports.directives.contains(&atom!(\"client\"))\n-                && collected_exports.generate_static_params\n+                && let Some(span) = collected_exports.generate_static_params\n                 && is_app_page\n             {\n                 PageStaticInfoIssue {\n-                    file_path: ctx.file_path.clone(),\n+                    source: IssueSource::from_swc_offsets(\n+                        ctx.source,\n+                        span.lo.to_u32(),\n+                        span.hi.to_u32(),\n+                    ),\n                     messages: vec![format!(r#\"Page \"{}\" cannot use both \"use client\" and export function \"generateStaticParams()\".\"#, ctx.file_path_str)],\n                     severity: IssueSeverity::Error,\n                 }\n@@ -144,10 +159,10 @@ impl CustomTransformer for NextPageStaticInfo {\n }\n \n #[turbo_tasks::value(shared)]\n-pub struct PageStaticInfoIssue {\n-    pub file_path: FileSystemPath,\n-    pub messages: Vec<String>,\n-    pub severity: IssueSeverity,\n+struct PageStaticInfoIssue {\n+    source: IssueSource,\n+    messages: Vec<String>,\n+    severity: IssueSeverity,\n }\n \n #[turbo_tasks::value_impl]\n@@ -168,7 +183,7 @@ impl Issue for PageStaticInfoIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.file_path.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -183,4 +198,9 @@ impl Issue for PageStaticInfoIssue {\n             .resolved_cell(),\n         ))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }"
        },
        {
            "sha": "d830c3ce1f11beeb6940b1aa378f2679d5df55b9",
            "filename": "crates/next-core/src/util.rs",
            "status": "modified",
            "additions": 67,
            "deletions": 45,
            "changes": 112,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-core%2Fsrc%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Futil.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -3,10 +3,10 @@ use std::future::Future;\n use anyhow::{Context, Result, bail};\n use serde::{Deserialize, Serialize, de::DeserializeOwned};\n use swc_core::{\n-    common::GLOBALS,\n+    common::{GLOBALS, Spanned, source_map::SmallPos},\n     ecma::ast::{Expr, Lit, Program},\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, FxIndexSet, NonLocalValue, ResolvedVc, TaskInput, ValueDefault, Vc,\n     trace::TraceRawVcs, util::WrapFuture,\n@@ -19,8 +19,10 @@ use turbopack_core::{\n     asset::AssetContent,\n     compile_time_info::{CompileTimeDefineValue, CompileTimeDefines, DefineableNameSegment},\n     condition::ContextCondition,\n-    ident::AssetIdent,\n-    issue::{Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n+    issue::{\n+        Issue, IssueExt, IssueSeverity, IssueSource, IssueStage, OptionIssueSource,\n+        OptionStyledString, StyledString,\n+    },\n     module::Module,\n     source::Source,\n     virtual_source::VirtualSource,\n@@ -263,15 +265,15 @@ impl ValueDefault for NextSourceConfig {\n /// An issue that occurred while parsing the page config.\n #[turbo_tasks::value(shared)]\n pub struct NextSourceConfigParsingIssue {\n-    ident: ResolvedVc<AssetIdent>,\n+    source: IssueSource,\n     detail: ResolvedVc<StyledString>,\n }\n \n #[turbo_tasks::value_impl]\n impl NextSourceConfigParsingIssue {\n     #[turbo_tasks::function]\n-    pub fn new(ident: ResolvedVc<AssetIdent>, detail: ResolvedVc<StyledString>) -> Vc<Self> {\n-        Self { ident, detail }.cell()\n+    pub fn new(source: IssueSource, detail: ResolvedVc<StyledString>) -> Vc<Self> {\n+        Self { source, detail }.cell()\n     }\n }\n \n@@ -294,7 +296,7 @@ impl Issue for NextSourceConfigParsingIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.ident.path()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -313,16 +315,21 @@ impl Issue for NextSourceConfigParsingIssue {\n     fn detail(&self) -> Vc<OptionStyledString> {\n         Vc::cell(Some(self.detail))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }\n \n async fn emit_invalid_config_warning(\n-    ident: Vc<AssetIdent>,\n+    source: IssueSource,\n     detail: &str,\n     value: &JsValue,\n ) -> Result<()> {\n     let (explainer, hints) = value.explain(2, 0);\n     NextSourceConfigParsingIssue::new(\n-        ident,\n+        source,\n         StyledString::Text(format!(\"{detail} Got {explainer}.{hints}\").into()).cell(),\n     )\n     .to_resolved()\n@@ -332,7 +339,7 @@ async fn emit_invalid_config_warning(\n }\n \n async fn parse_route_matcher_from_js_value(\n-    ident: Vc<AssetIdent>,\n+    source: IssueSource,\n     value: &JsValue,\n ) -> Result<Option<Vec<MiddlewareMatcherKind>>> {\n     let parse_matcher_kind_matcher = |value: &JsValue| {\n@@ -397,7 +404,7 @@ async fn parse_route_matcher_from_js_value(\n                 matchers.push(MiddlewareMatcherKind::Str(matcher.to_string()));\n             } else {\n                 emit_invalid_config_warning(\n-                    ident,\n+                    source,\n                     \"The matcher property must be a string or array of strings\",\n                     value,\n                 )\n@@ -437,7 +444,7 @@ async fn parse_route_matcher_from_js_value(\n                     matchers.push(MiddlewareMatcherKind::Matcher(matcher));\n                 } else {\n                     emit_invalid_config_warning(\n-                        ident,\n+                        source,\n                         \"The matcher property must be a string or array of strings\",\n                         value,\n                     )\n@@ -447,7 +454,7 @@ async fn parse_route_matcher_from_js_value(\n         }\n         _ => {\n             emit_invalid_config_warning(\n-                ident,\n+                source,\n                 \"The matcher property must be a string or array of strings\",\n                 value,\n             )\n@@ -464,6 +471,7 @@ async fn parse_route_matcher_from_js_value(\n \n #[turbo_tasks::function]\n pub async fn parse_config_from_source(\n+    source: ResolvedVc<Box<dyn Source>>,\n     module: ResolvedVc<Box<dyn Module>>,\n     default_runtime: NextRuntime,\n ) -> Result<Vc<NextSourceConfig>> {\n@@ -486,29 +494,39 @@ pub async fn parse_config_from_source(\n \n                     // Check if there is exported config object `export const config = {...}`\n                     // https://nextjs.org/docs/app/building-your-application/routing/middleware#matcher\n-                    if decl_ident\n-                        .map(|ident| &*ident.sym == \"config\")\n-                        .unwrap_or_default()\n+                    if let Some(ident) = decl_ident\n+                        && ident.sym == \"config\"\n                     {\n                         if let Some(init) = decl.init.as_ref() {\n                             return WrapFuture::new(\n                                 async {\n                                     let value = eval_context.eval(init);\n-                                    Ok(parse_config_from_js_value(*module, &value, default_runtime)\n-                                        .await?\n-                                        .cell())\n+                                    Ok(parse_config_from_js_value(\n+                                        IssueSource::from_swc_offsets(\n+                                            source,\n+                                            init.span_lo().to_u32(),\n+                                            init.span_hi().to_u32(),\n+                                        ),\n+                                        &value,\n+                                        default_runtime,\n+                                    )\n+                                    .await?\n+                                    .cell())\n                                 },\n                                 |f, ctx| GLOBALS.set(globals, || f.poll(ctx)),\n                             )\n                             .await;\n                         } else {\n                             NextSourceConfigParsingIssue::new(\n-                                module.ident(),\n-                                StyledString::Text(\n+                                IssueSource::from_swc_offsets(\n+                                    source,\n+                                    ident.span_lo().to_u32(),\n+                                    ident.span_hi().to_u32(),\n+                                ),\n+                                StyledString::Text(rcstr!(\n                                     \"The exported config object must contain an variable \\\n                                      initializer.\"\n-                                        .into(),\n-                                )\n+                                ))\n                                 .cell(),\n                             )\n                             .to_resolved()\n@@ -518,16 +536,18 @@ pub async fn parse_config_from_source(\n                     }\n                     // Or, check if there is segment runtime option\n                     // https://nextjs.org/docs/app/building-your-application/rendering/edge-and-nodejs-runtimes#segment-runtime-Option\n-                    else if decl_ident\n-                        .map(|ident| &*ident.sym == \"runtime\")\n-                        .unwrap_or_default()\n+                    else if let Some(ident) = decl_ident\n+                        && ident.sym == \"runtime\"\n                     {\n                         let runtime_value_issue = NextSourceConfigParsingIssue::new(\n-                            module.ident(),\n-                            StyledString::Text(\n+                            IssueSource::from_swc_offsets(\n+                                source,\n+                                ident.span_lo().to_u32(),\n+                                ident.span_hi().to_u32(),\n+                            ),\n+                            StyledString::Text(rcstr!(\n                                 \"The runtime property must be either \\\"nodejs\\\" or \\\"edge\\\".\"\n-                                    .into(),\n-                            )\n+                            ))\n                             .cell(),\n                         )\n                         .to_resolved()\n@@ -557,12 +577,15 @@ pub async fn parse_config_from_source(\n                             }\n                         } else {\n                             NextSourceConfigParsingIssue::new(\n-                                module.ident(),\n-                                StyledString::Text(\n+                                IssueSource::from_swc_offsets(\n+                                    source,\n+                                    ident.span_lo().to_u32(),\n+                                    ident.span_hi().to_u32(),\n+                                ),\n+                                StyledString::Text(rcstr!(\n                                     \"The exported segment runtime option must contain an variable \\\n                                      initializer.\"\n-                                        .into(),\n-                                )\n+                                ))\n                                 .cell(),\n                             )\n                             .to_resolved()\n@@ -583,7 +606,7 @@ pub async fn parse_config_from_source(\n }\n \n async fn parse_config_from_js_value(\n-    module: Vc<Box<dyn Module>>,\n+    source: IssueSource,\n     value: &JsValue,\n     default_runtime: NextRuntime,\n ) -> Result<NextSourceConfig> {\n@@ -597,7 +620,7 @@ async fn parse_config_from_js_value(\n             match part {\n                 ObjectPart::Spread(_) => {\n                     emit_invalid_config_warning(\n-                        module.ident(),\n+                        source,\n                         \"Spread properties are not supported in the config export.\",\n                         value,\n                     )\n@@ -618,7 +641,7 @@ async fn parse_config_from_js_value(\n                                             }\n                                             _ => {\n                                                 emit_invalid_config_warning(\n-                                                    module.ident(),\n+                                                    source,\n                                                     \"The runtime property must be either \\\n                                                      \\\"nodejs\\\" or \\\"edge\\\".\",\n                                                     value,\n@@ -629,7 +652,7 @@ async fn parse_config_from_js_value(\n                                     }\n                                 } else {\n                                     emit_invalid_config_warning(\n-                                        module.ident(),\n+                                        source,\n                                         \"The runtime property must be a constant string.\",\n                                         value,\n                                     )\n@@ -638,8 +661,7 @@ async fn parse_config_from_js_value(\n                             }\n                             \"matcher\" => {\n                                 config.matcher =\n-                                    parse_route_matcher_from_js_value(module.ident(), value)\n-                                        .await?;\n+                                    parse_route_matcher_from_js_value(source, value).await?;\n                             }\n                             \"regions\" => {\n                                 config.regions = match value {\n@@ -658,7 +680,7 @@ async fn parse_config_from_js_value(\n                                                 regions.push(str.to_string().into());\n                                             } else {\n                                                 emit_invalid_config_warning(\n-                                                    module.ident(),\n+                                                    source,\n                                                     \"Values of the `config.regions` array need to \\\n                                                      static strings\",\n                                                     item,\n@@ -670,7 +692,7 @@ async fn parse_config_from_js_value(\n                                     }\n                                     _ => {\n                                         emit_invalid_config_warning(\n-                                            module.ident(),\n+                                            source,\n                                             \"`config.regions` needs to be a static string or \\\n                                              array of static strings\",\n                                             value,\n@@ -684,7 +706,7 @@ async fn parse_config_from_js_value(\n                         }\n                     } else {\n                         emit_invalid_config_warning(\n-                            module.ident(),\n+                            source,\n                             \"The exported config object must not contain non-constant strings.\",\n                             key,\n                         )\n@@ -695,7 +717,7 @@ async fn parse_config_from_js_value(\n         }\n     } else {\n         emit_invalid_config_warning(\n-            module.ident(),\n+            source,\n             \"The exported config object must be a valid object literal.\",\n             value,\n         )"
        },
        {
            "sha": "9c40020490a905bed5f2e79eeb25d96aabd3994b",
            "filename": "crates/next-custom-transforms/src/transforms/page_static_info/collect_exported_const_visitor.rs",
            "status": "modified",
            "additions": 78,
            "deletions": 51,
            "changes": 129,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fcollect_exported_const_visitor.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fcollect_exported_const_visitor.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fcollect_exported_const_visitor.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,7 +1,7 @@\n use serde_json::{Map, Number, Value};\n use swc_core::{\n     atoms::Atom,\n-    common::{Mark, SyntaxContext},\n+    common::{Mark, Span, Spanned, SyntaxContext},\n     ecma::{\n         ast::{\n             BindingIdent, Decl, ExportDecl, Expr, Lit, Module, ModuleDecl, ModuleItem, Pat,\n@@ -15,8 +15,8 @@ use swc_core::{\n /// refer extract_expored_const_values for the supported value types.\n /// Undefined / null is treated as None.\n pub enum Const {\n-    Value(Value),\n-    Unsupported(String),\n+    Value(Value, Span),\n+    Unsupported(String, Span),\n }\n \n pub(crate) struct CollectExportedConstVisitor<'a, M>\n@@ -82,23 +82,32 @@ pub trait GetMut<K, V> {\n /// Coerece the actual value of the given ast node.\n fn extract_value(ctx: ExprCtx, init: &Expr, id: String) -> Option<Const> {\n     match init {\n-        init if init.is_undefined(ctx) => Some(Const::Value(Value::Null)),\n-        Expr::Ident(ident) => Some(Const::Unsupported(format!(\n-            \"Unknown identifier \\\"{}\\\" at \\\"{}\\\".\",\n-            ident.sym, id\n-        ))),\n+        init if init.is_undefined(ctx) => Some(Const::Value(Value::Null, init.span())),\n+        Expr::Ident(ident) => Some(Const::Unsupported(\n+            format!(\"Unknown identifier \\\"{}\\\" at \\\"{}\\\".\", ident.sym, id),\n+            init.span(),\n+        )),\n         Expr::Lit(lit) => match lit {\n-            Lit::Num(num) => Some(Const::Value(Value::Number(\n-                Number::from_f64(num.value).expect(\"Should able to convert f64 to Number\"),\n-            ))),\n-            Lit::Null(_) => Some(Const::Value(Value::Null)),\n-            Lit::Str(s) => Some(Const::Value(Value::String(s.value.to_string()))),\n-            Lit::Bool(b) => Some(Const::Value(Value::Bool(b.value))),\n-            Lit::Regex(r) => Some(Const::Value(Value::String(format!(\n-                \"/{}/{}\",\n-                r.exp, r.flags\n-            )))),\n-            _ => Some(Const::Unsupported(\"Unsupported Literal\".to_string())),\n+            Lit::Num(num) => Some(Const::Value(\n+                Value::Number(\n+                    Number::from_f64(num.value).expect(\"Should able to convert f64 to Number\"),\n+                ),\n+                init.span(),\n+            )),\n+            Lit::Null(_) => Some(Const::Value(Value::Null, init.span())),\n+            Lit::Str(s) => Some(Const::Value(\n+                Value::String(s.value.to_string()),\n+                init.span(),\n+            )),\n+            Lit::Bool(b) => Some(Const::Value(Value::Bool(b.value), init.span())),\n+            Lit::Regex(r) => Some(Const::Value(\n+                Value::String(format!(\"/{}/{}\", r.exp, r.flags)),\n+                init.span(),\n+            )),\n+            _ => Some(Const::Unsupported(\n+                \"Unsupported Literal\".to_string(),\n+                init.span(),\n+            )),\n         },\n         Expr::Array(arr) => {\n             let mut a = vec![];\n@@ -107,22 +116,28 @@ fn extract_value(ctx: ExprCtx, init: &Expr, id: String) -> Option<Const> {\n                 match elem {\n                     Some(elem) => {\n                         if elem.spread.is_some() {\n-                            return Some(Const::Unsupported(format!(\n-                                \"Unsupported spread operator in the Array Expression at \\\"{id}\\\"\"\n-                            )));\n+                            return Some(Const::Unsupported(\n+                                format!(\n+                                    \"Unsupported spread operator in the Array Expression at \\\n+                                     \\\"{id}\\\"\"\n+                                ),\n+                                init.span(),\n+                            ));\n                         }\n \n                         match extract_value(ctx, &elem.expr, id.clone()) {\n-                            Some(Const::Value(value)) => a.push(value),\n-                            Some(Const::Unsupported(message)) => {\n-                                return Some(Const::Unsupported(format!(\n-                                    \"Unsupported value in the Array Expression: {message}\"\n-                                )))\n+                            Some(Const::Value(value, _)) => a.push(value),\n+                            Some(Const::Unsupported(message, loc)) => {\n+                                return Some(Const::Unsupported(\n+                                    format!(\"Unsupported value in the Array Expression: {message}\"),\n+                                    loc,\n+                                ));\n                             }\n                             _ => {\n                                 return Some(Const::Unsupported(\n                                     \"Unsupported value in the Array Expression\".to_string(),\n-                                ))\n+                                    elem.expr.span(),\n+                                ));\n                             }\n                         }\n                     }\n@@ -132,7 +147,7 @@ fn extract_value(ctx: ExprCtx, init: &Expr, id: String) -> Option<Const> {\n                 }\n             }\n \n-            Some(Const::Value(Value::Array(a)))\n+            Some(Const::Value(Value::Array(a), arr.span()))\n         }\n         Expr::Object(obj) => {\n             let mut o = Map::new();\n@@ -144,37 +159,44 @@ fn extract_value(ctx: ExprCtx, init: &Expr, id: String) -> Option<Const> {\n                             PropName::Ident(i) => i.sym.as_ref(),\n                             PropName::Str(s) => s.value.as_ref(),\n                             _ => {\n-                                return Some(Const::Unsupported(format!(\n-                                    \"Unsupported key type in the Object Expression at \\\"{id}\\\"\"\n-                                )))\n+                                return Some(Const::Unsupported(\n+                                    format!(\n+                                        \"Unsupported key type in the Object Expression at \\\"{id}\\\"\"\n+                                    ),\n+                                    kv.key.span(),\n+                                ));\n                             }\n                         },\n                         &kv.value,\n                     ),\n                     _ => {\n-                        return Some(Const::Unsupported(format!(\n-                            \"Unsupported spread operator in the Object Expression at \\\"{id}\\\"\"\n-                        )))\n+                        return Some(Const::Unsupported(\n+                            format!(\n+                                \"Unsupported spread operator in the Object Expression at \\\"{id}\\\"\"\n+                            ),\n+                            prop.span(),\n+                        ));\n                     }\n                 };\n                 let new_value = extract_value(ctx, value, format!(\"{id}.{key}\"));\n-                if let Some(Const::Unsupported(msg)) = new_value {\n-                    return Some(Const::Unsupported(msg));\n+                if let Some(Const::Unsupported(_, _)) = new_value {\n+                    return new_value;\n                 }\n \n-                if let Some(Const::Value(value)) = new_value {\n+                if let Some(Const::Value(value, _)) = new_value {\n                     o.insert(key.to_string(), value);\n                 }\n             }\n \n-            Some(Const::Value(Value::Object(o)))\n+            Some(Const::Value(Value::Object(o), obj.span()))\n         }\n         Expr::Tpl(tpl) => {\n             // [TODO] should we add support for `${'e'}d${'g'}'e'`?\n             if !tpl.exprs.is_empty() {\n-                Some(Const::Unsupported(format!(\n-                    \"Unsupported template literal with expressions at \\\"{id}\\\".\"\n-                )))\n+                Some(Const::Unsupported(\n+                    format!(\"Unsupported template literal with expressions at \\\"{id}\\\".\"),\n+                    tpl.span(),\n+                ))\n             } else {\n                 Some(\n                     tpl.quasis\n@@ -194,18 +216,23 @@ fn extract_value(ctx: ExprCtx, init: &Expr, id: String) -> Option<Const> {\n                             let cooked = q.cooked.as_ref();\n                             let raw = q.raw.as_ref();\n \n-                            Const::Value(Value::String(\n-                                cooked.map(|c| c.to_string()).unwrap_or(raw.to_string()),\n-                            ))\n+                            Const::Value(\n+                                Value::String(\n+                                    cooked.map(|c| c.to_string()).unwrap_or(raw.to_string()),\n+                                ),\n+                                tpl.span(),\n+                            )\n                         })\n-                        .unwrap_or(Const::Unsupported(format!(\n-                            \"Unsupported node type at \\\"{id}\\\"\"\n-                        ))),\n+                        .unwrap_or(Const::Unsupported(\n+                            format!(\"Unsupported node type at \\\"{id}\\\"\"),\n+                            tpl.span(),\n+                        )),\n                 )\n             }\n         }\n-        _ => Some(Const::Unsupported(format!(\n-            \"Unsupported node type at \\\"{id}\\\"\"\n-        ))),\n+        _ => Some(Const::Unsupported(\n+            format!(\"Unsupported node type at \\\"{id}\\\"\"),\n+            init.span(),\n+        )),\n     }\n }"
        },
        {
            "sha": "bf0b10535b7448ac4f6a5e84b863fb53f291f7fe",
            "filename": "crates/next-custom-transforms/src/transforms/page_static_info/collect_exports_visitor.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 4,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fcollect_exports_visitor.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fcollect_exports_visitor.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fcollect_exports_visitor.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -3,6 +3,7 @@ use std::{iter::FromIterator, sync::LazyLock};\n use rustc_hash::FxHashSet;\n use swc_core::{\n     atoms::atom,\n+    common::Spanned,\n     ecma::{\n         ast::{\n             Decl, ExportDecl, ExportNamedSpecifier, ExportSpecifier, Expr, ExprOrSpread, ExprStmt,\n@@ -79,7 +80,8 @@ impl Visit for CollectExportsVisitor {\n                         export_info.generate_image_metadata =\n                             Some(name.sym == \"generateImageMetadata\");\n                         export_info.generate_sitemaps = Some(name.sym == \"generateSitemaps\");\n-                        export_info.generate_static_params = name.sym == \"generateStaticParams\";\n+                        export_info.generate_static_params =\n+                            (name.sym == \"generateStaticParams\").then_some(name.span());\n                     }\n                 }\n \n@@ -129,7 +131,8 @@ impl Visit for CollectExportsVisitor {\n                 export_info.ssr = id.sym == \"getServerSideProps\";\n                 export_info.generate_image_metadata = Some(id.sym == \"generateImageMetadata\");\n                 export_info.generate_sitemaps = Some(id.sym == \"generateSitemaps\");\n-                export_info.generate_static_params = id.sym == \"generateStaticParams\";\n+                export_info.generate_static_params =\n+                    (id.sym == \"generateStaticParams\").then_some(id.span());\n             }\n             _ => {}\n         }\n@@ -166,21 +169,25 @@ impl Visit for CollectExportsVisitor {\n                     export_info.generate_sitemaps = Some(true);\n                 }\n \n-                if !export_info.generate_static_params && value.sym == \"generateStaticParams\" {\n-                    export_info.generate_static_params = true;\n+                if export_info.generate_static_params.is_none()\n+                    && value.sym == \"generateStaticParams\"\n+                {\n+                    export_info.generate_static_params = Some(value.span());\n                 }\n \n                 if export_info.runtime.is_none() && value.sym == \"runtime\" {\n                     export_info.warnings.push(ExportInfoWarning::new(\n                         value.sym.clone(),\n                         \"it was not assigned to a string literal\",\n+                        value.span,\n                     ));\n                 }\n \n                 if export_info.preferred_region.is_empty() && value.sym == \"preferredRegion\" {\n                     export_info.warnings.push(ExportInfoWarning::new(\n                         value.sym.clone(),\n                         \"it was not assigned to a string literal or an array of string literals\",\n+                        value.span,\n                     ));\n                 }\n             }"
        },
        {
            "sha": "7f063bea8dabd9ce1cb26b842abab9e6f44705f0",
            "filename": "crates/next-custom-transforms/src/transforms/page_static_info/mod.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_static_info%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -8,7 +8,7 @@ use serde::{Deserialize, Serialize};\n use swc_core::{\n     atoms::Atom,\n     base::SwcComments,\n-    common::GLOBALS,\n+    common::{Span, GLOBALS},\n     ecma::{ast::Program, visit::VisitWith},\n };\n \n@@ -45,11 +45,12 @@ pub struct PageStaticInfo {\n pub struct ExportInfoWarning {\n     pub key: Atom,\n     pub message: &'static str,\n+    pub span: Span,\n }\n \n impl ExportInfoWarning {\n-    pub fn new(key: Atom, message: &'static str) -> Self {\n-        Self { key, message }\n+    pub fn new(key: Atom, message: &'static str, span: Span) -> Self {\n+        Self { key, message, span }\n     }\n }\n \n@@ -64,7 +65,7 @@ pub struct ExportInfo {\n     pub preferred_region: Vec<Atom>,\n     pub generate_image_metadata: Option<bool>,\n     pub generate_sitemaps: Option<bool>,\n-    pub generate_static_params: bool,\n+    pub generate_static_params: Option<Span>,\n     pub extra_properties: FxHashSet<Atom>,\n     pub directives: FxHashSet<Atom>,\n     /// extra properties to bubble up warning messages from visitor,"
        },
        {
            "sha": "fd27771513e87ee47f34dd6af0d2cb30fb26ccab",
            "filename": "turbopack/crates/turbo-tasks-fetch/src/lib.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 9,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Fsrc%2Flib.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -139,20 +139,19 @@ impl FetchError {\n #[turbo_tasks::value_impl]\n impl FetchError {\n     #[turbo_tasks::function]\n-    pub async fn to_issue(\n-        self: Vc<Self>,\n+    pub fn to_issue(\n+        &self,\n         severity: IssueSeverity,\n         issue_context: FileSystemPath,\n-    ) -> Result<Vc<FetchIssue>> {\n-        let this = &*self.await?;\n-        Ok(FetchIssue {\n+    ) -> Vc<FetchIssue> {\n+        FetchIssue {\n             issue_context,\n             severity,\n-            url: this.url,\n-            kind: this.kind,\n-            detail: this.detail,\n+            url: self.url,\n+            kind: self.kind,\n+            detail: self.detail,\n         }\n-        .cell())\n+        .cell()\n     }\n }\n "
        },
        {
            "sha": "1f7725549b108ca372b37afe91fd9ce4f9afb7c1",
            "filename": "turbopack/crates/turbopack-cli-utils/src/issue.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 12,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-cli-utils%2Fsrc%2Fissue.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-cli-utils%2Fsrc%2Fissue.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli-utils%2Fsrc%2Fissue.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -272,17 +272,15 @@ pub fn format_issue(\n         }\n     }\n \n-    write!(\n-        issue_text,\n-        \"{} - [{}] {}\",\n-        severity.style(severity_to_style(severity)),\n-        stage,\n-        plain_issue.file_path\n-    )\n-    .unwrap();\n-\n-    for line in styled_issue.lines() {\n-        writeln!(issue_text, \"  {line}\").unwrap();\n+    let severity = severity.style(severity_to_style(severity));\n+    write!(issue_text, \"{severity} - [{stage}] \").unwrap();\n+    for (index, line) in styled_issue.lines().enumerate() {\n+        // don't indent the first line\n+        if index > 0 {\n+            issue_text.push_str(\"  \");\n+        }\n+        issue_text.push_str(line);\n+        issue_text.push('\\n');\n     }\n \n     issue_text\n@@ -696,6 +694,6 @@ fn style_issue_source(plain_issue: &PlainIssue, context_path: &str) -> String {\n         format_source_content(source, &mut styled_issue);\n         styled_issue\n     } else {\n-        formatted_title\n+        format!(\"{context_path}  {formatted_title}\\n\")\n     }\n }"
        },
        {
            "sha": "319b84e51adf81bdc02a218de90b338829ab34ff",
            "filename": "turbopack/crates/turbopack-core/src/chunk/module_id_strategies.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmodule_id_strategies.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmodule_id_strategies.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmodule_id_strategies.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -57,6 +57,7 @@ impl ModuleIdStrategy for GlobalModuleIdStrategy {\n         if !ident_string.ends_with(\"[app-client] (ecmascript, next/dynamic entry)\") {\n             // TODO: This shouldn't happen, but is a temporary workaround to ignore next/dynamic\n             // imports of a server component from another server component.\n+            // TODO(PACK-4879): should this be a debug_assert! a panic!? a bail!?\n \n             ModuleIssue {\n                 ident,\n@@ -68,6 +69,7 @@ impl ModuleIdStrategy for GlobalModuleIdStrategy {\n                     format!(\"ModuleId not found for ident: {ident_string:?}\").into(),\n                 )\n                 .resolved_cell(),\n+                source: None,\n             }\n             .resolved_cell()\n             .emit();"
        },
        {
            "sha": "6ea7e7191eea18f5306403c97a11d2db11469d7f",
            "filename": "turbopack/crates/turbopack-core/src/issue/analyze.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 10,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fanalyze.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fanalyze.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fanalyze.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -3,11 +3,8 @@ use turbo_rcstr::RcStr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n-use super::{\n-    Issue, IssueSeverity, IssueSource, IssueStage, OptionIssueSource, OptionStyledString,\n-    StyledString,\n-};\n-use crate::ident::AssetIdent;\n+use super::{Issue, IssueSeverity, IssueSource, IssueStage, OptionStyledString, StyledString};\n+use crate::{ident::AssetIdent, issue::OptionIssueSource};\n \n #[turbo_tasks::value(shared)]\n pub struct AnalyzeIssue {\n@@ -79,10 +76,7 @@ impl Issue for AnalyzeIssue {\n     }\n \n     #[turbo_tasks::function]\n-    async fn source(&self) -> Result<Vc<OptionIssueSource>> {\n-        Ok(Vc::cell(match &self.source {\n-            Some(source) => Some(source.resolve_source_map().await?.into_owned()),\n-            None => None,\n-        }))\n+    async fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(self.source)\n     }\n }"
        },
        {
            "sha": "230d87dd7cf07101cd20ddf5785bbf07f268e447",
            "filename": "turbopack/crates/turbopack-core/src/issue/mod.rs",
            "status": "modified",
            "additions": 46,
            "deletions": 45,
            "changes": 91,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -4,7 +4,6 @@ pub mod module;\n pub mod resolve;\n \n use std::{\n-    borrow::Cow,\n     cmp::{Ordering, min},\n     fmt::{Display, Formatter},\n };\n@@ -421,7 +420,17 @@ impl CapturedIssues {\n }\n \n #[derive(\n-    Clone, Debug, PartialEq, Eq, Serialize, Deserialize, Hash, TaskInput, TraceRawVcs, NonLocalValue,\n+    Clone,\n+    Copy,\n+    Debug,\n+    PartialEq,\n+    Eq,\n+    Serialize,\n+    Deserialize,\n+    Hash,\n+    TaskInput,\n+    TraceRawVcs,\n+    NonLocalValue,\n )]\n pub struct IssueSource {\n     source: ResolvedVc<Box<dyn Source>>,\n@@ -430,7 +439,17 @@ pub struct IssueSource {\n \n /// The end position is the first character after the range\n #[derive(\n-    Clone, Debug, PartialEq, Eq, Serialize, Deserialize, Hash, TaskInput, TraceRawVcs, NonLocalValue,\n+    Clone,\n+    Copy,\n+    Debug,\n+    PartialEq,\n+    Eq,\n+    Serialize,\n+    Deserialize,\n+    Hash,\n+    TaskInput,\n+    TraceRawVcs,\n+    NonLocalValue,\n )]\n enum SourceRange {\n     LineColumn(SourcePos, SourcePos),\n@@ -458,33 +477,40 @@ impl IssueSource {\n         }\n     }\n \n-    pub async fn resolve_source_map(&self) -> Result<Cow<'_, Self>> {\n-        if let Some(range) = &self.range {\n-            let (start, end) = match range {\n-                SourceRange::LineColumn(start, end) => (*start, *end),\n+    async fn into_plain(self) -> Result<PlainIssueSource> {\n+        let Self { mut source, range } = self;\n+\n+        let range = if let Some(range) = range {\n+            let mut range = match range {\n+                SourceRange::LineColumn(start, end) => Some((start, end)),\n                 SourceRange::ByteOffset(start, end) => {\n                     if let FileLinesContent::Lines(lines) = &*self.source.content().lines().await? {\n-                        let start = find_line_and_column(lines.as_ref(), *start);\n-                        let end = find_line_and_column(lines.as_ref(), *end);\n-                        (start, end)\n+                        let start = find_line_and_column(lines.as_ref(), start);\n+                        let end = find_line_and_column(lines.as_ref(), end);\n+                        Some((start, end))\n                     } else {\n-                        return Ok(Cow::Borrowed(self));\n+                        None\n                     }\n                 }\n             };\n \n             // If we have a source map, map the line/column to the original source.\n-            let mapped = source_pos(self.source, start, end).await?;\n+            if let Some((start, end)) = range {\n+                let mapped = source_pos(source, start, end).await?;\n \n-            if let Some((source, start, end)) = mapped {\n-                return Ok(Cow::Owned(IssueSource {\n-                    source,\n-                    range: Some(SourceRange::LineColumn(start, end)),\n-                }));\n+                if let Some((mapped_source, start, end)) = mapped {\n+                    range = Some((start, end));\n+                    source = mapped_source;\n+                }\n             }\n-        }\n-\n-        Ok(Cow::Borrowed(self))\n+            range\n+        } else {\n+            None\n+        };\n+        Ok(PlainIssueSource {\n+            asset: PlainSource::from_source(*source).await?,\n+            range,\n+        })\n     }\n \n     /// Create a [`IssueSource`] from byte offsets given by an swc ast node\n@@ -902,31 +928,6 @@ pub struct PlainIssueSource {\n     pub range: Option<(SourcePos, SourcePos)>,\n }\n \n-impl IssueSource {\n-    pub async fn into_plain(&self) -> Result<PlainIssueSource> {\n-        Ok(PlainIssueSource {\n-            asset: PlainSource::from_source(*self.source).await?,\n-            range: match &self.range {\n-                Some(range) => match range {\n-                    SourceRange::LineColumn(start, end) => Some((*start, *end)),\n-                    SourceRange::ByteOffset(start, end) => {\n-                        if let FileLinesContent::Lines(lines) =\n-                            &*self.source.content().lines().await?\n-                        {\n-                            let start = find_line_and_column(lines.as_ref(), *start);\n-                            let end = find_line_and_column(lines.as_ref(), *end);\n-                            Some((start, end))\n-                        } else {\n-                            None\n-                        }\n-                    }\n-                },\n-                _ => None,\n-            },\n-        })\n-    }\n-}\n-\n #[turbo_tasks::value(serialization = \"none\")]\n #[derive(Clone, Debug, PartialOrd, Ord)]\n pub struct PlainSource {"
        },
        {
            "sha": "1891be2fab3f81edfa48eb0755edeed11e7232c1",
            "filename": "turbopack/crates/turbopack-core/src/issue/module.rs",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fmodule.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -3,13 +3,19 @@ use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n use super::{Issue, IssueStage, OptionStyledString, StyledString};\n-use crate::{ident::AssetIdent, issue::IssueExt, source::Source};\n+use crate::{\n+    ident::AssetIdent,\n+    issue::{IssueExt, IssueSource, OptionIssueSource},\n+    source::Source,\n+};\n \n #[turbo_tasks::value(shared)]\n pub struct ModuleIssue {\n     pub ident: ResolvedVc<AssetIdent>,\n     pub title: ResolvedVc<StyledString>,\n     pub description: ResolvedVc<StyledString>,\n+    // TODO(PACK-4879): make this mandatory and drop `ident`\n+    pub source: Option<IssueSource>,\n }\n \n #[turbo_tasks::value_impl]\n@@ -33,6 +39,11 @@ impl Issue for ModuleIssue {\n     fn description(&self) -> Vc<OptionStyledString> {\n         Vc::cell(Some(self.description))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(self.source)\n+    }\n }\n \n #[turbo_tasks::function]\n@@ -46,6 +57,7 @@ pub async fn emit_unknown_module_type_error(source: Vc<Box<dyn Source>>) -> Resu\n Read more: https://nextjs.org/docs/app/api-reference/next-config-js/turbo#webpack-loaders\".into(),\n         )\n         .resolved_cell(),\n+        source: Some(IssueSource::from_source_only(source.to_resolved().await?)),\n     }\n     .resolved_cell()\n     .emit();"
        },
        {
            "sha": "99157f1ee2f00596dad083d0ef41322d007a2567",
            "filename": "turbopack/crates/turbopack-core/src/issue/resolve.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fissue%2Fresolve.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -5,10 +5,10 @@ use turbo_rcstr::RcStr;\n use turbo_tasks::{ReadRef, ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n-use super::{Issue, IssueSource, IssueStage, OptionIssueSource, OptionStyledString, StyledString};\n+use super::{Issue, IssueSource, IssueStage, OptionStyledString, StyledString};\n use crate::{\n     error::PrettyPrintError,\n-    issue::IssueSeverity,\n+    issue::{IssueSeverity, OptionIssueSource},\n     resolve::{\n         options::{ImportMap, ImportMapResult, ResolveOptions},\n         parse::Request,\n@@ -115,11 +115,8 @@ impl Issue for ResolvingIssue {\n     }\n \n     #[turbo_tasks::function]\n-    async fn source(&self) -> Result<Vc<OptionIssueSource>> {\n-        Ok(Vc::cell(match &self.source {\n-            Some(source) => Some(source.resolve_source_map().await?.into_owned()),\n-            None => None,\n-        }))\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(self.source)\n     }\n \n     // TODO add sub_issue for a description of resolve_options"
        },
        {
            "sha": "51bf3dd846d92a36db7f16030eb3d5a9b8a3cc6d",
            "filename": "turbopack/crates/turbopack-core/src/package_json.rs",
            "status": "modified",
            "additions": 54,
            "deletions": 19,
            "changes": 73,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fpackage_json.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fpackage_json.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fpackage_json.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,13 +1,22 @@\n-use std::{fmt::Write, ops::Deref};\n+use std::ops::Deref;\n \n use anyhow::Result;\n use serde_json::Value as JsonValue;\n-use turbo_rcstr::RcStr;\n-use turbo_tasks::{NonLocalValue, ReadRef, Vc, debug::ValueDebugFormat, trace::TraceRawVcs};\n-use turbo_tasks_fs::{FileContent, FileJsonContent, FileSystemPath};\n+use turbo_rcstr::{RcStr, rcstr};\n+use turbo_tasks::{\n+    NonLocalValue, ReadRef, ResolvedVc, Vc, debug::ValueDebugFormat, trace::TraceRawVcs,\n+};\n+use turbo_tasks_fs::{FileJsonContent, FileSystemPath};\n \n use super::issue::Issue;\n-use crate::issue::{IssueExt, IssueStage, OptionStyledString, StyledString};\n+use crate::{\n+    asset::Asset,\n+    issue::{\n+        IssueExt, IssueSource, IssueStage, OptionIssueSource, OptionStyledString, StyledString,\n+    },\n+    source::Source,\n+    source_pos::SourcePos,\n+};\n \n /// PackageJson wraps the parsed JSON content of a `package.json` file. The\n /// wrapper is necessary so that we can reference the [FileJsonContent]'s inner\n@@ -31,22 +40,43 @@ pub struct OptionPackageJson(Option<PackageJson>);\n /// Reads a package.json file (if it exists). If the file is unparseable, it\n /// emits a useful [Issue] pointing to the invalid location.\n #[turbo_tasks::function]\n-pub async fn read_package_json(path: FileSystemPath) -> Result<Vc<OptionPackageJson>> {\n-    let read = path.read_json().await?;\n+pub async fn read_package_json(path: ResolvedVc<Box<dyn Source>>) -> Result<Vc<OptionPackageJson>> {\n+    let read = path.content().parse_json().await?;\n     match &*read {\n         FileJsonContent::Content(_) => Ok(OptionPackageJson(Some(PackageJson(read))).cell()),\n         FileJsonContent::NotFound => Ok(OptionPackageJson(None).cell()),\n         FileJsonContent::Unparseable(e) => {\n-            let mut message = \"package.json is not parseable: invalid JSON: \".to_string();\n-            if let FileContent::Content(content) = &*path.read().await? {\n-                let text = content.content().to_str()?;\n-                e.write_with_content(&mut message, &text)?;\n-            } else {\n-                write!(message, \"{e}\")?;\n-            }\n+            let error_message = RcStr::from(format!(\n+                \"package.json is not parseable: invalid JSON: {}\",\n+                e.message\n+            ));\n+\n+            let source = match (e.start_location, e.end_location) {\n+                (None, None) => IssueSource::from_source_only(path),\n+                (Some((line, column)), None) | (None, Some((line, column))) => {\n+                    IssueSource::from_line_col(\n+                        path,\n+                        SourcePos { line, column },\n+                        SourcePos { line, column },\n+                    )\n+                }\n+                (Some((start_line, start_column)), Some((end_line, end_column))) => {\n+                    IssueSource::from_line_col(\n+                        path,\n+                        SourcePos {\n+                            line: start_line,\n+                            column: start_column,\n+                        },\n+                        SourcePos {\n+                            line: end_line,\n+                            column: end_column,\n+                        },\n+                    )\n+                }\n+            };\n             PackageJsonIssue {\n-                error_message: message.into(),\n-                path,\n+                error_message,\n+                source,\n             }\n             .resolved_cell()\n             .emit();\n@@ -58,15 +88,15 @@ pub async fn read_package_json(path: FileSystemPath) -> Result<Vc<OptionPackageJ\n /// Reusable Issue struct representing any problem with a `package.json`\n #[turbo_tasks::value(shared)]\n pub struct PackageJsonIssue {\n-    pub path: FileSystemPath,\n     pub error_message: RcStr,\n+    pub source: IssueSource,\n }\n \n #[turbo_tasks::value_impl]\n impl Issue for PackageJsonIssue {\n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Error parsing package.json file\".into()).cell()\n+        StyledString::Text(rcstr!(\"Error parsing package.json file\")).cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -76,7 +106,7 @@ impl Issue for PackageJsonIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.path.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -85,4 +115,9 @@ impl Issue for PackageJsonIssue {\n             StyledString::Text(self.error_message.clone()).resolved_cell(),\n         ))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }"
        },
        {
            "sha": "fb024bb97296bad3d2c8dd582c5ceee132c534f4",
            "filename": "turbopack/crates/turbopack-core/src/resolve/mod.rs",
            "status": "modified",
            "additions": 22,
            "deletions": 10,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1189,8 +1189,10 @@ enum ExportsFieldResult {\n /// Extracts the \"exports\" field out of the package.json, parsing it into an\n /// appropriate [AliasMap] for lookups.\n #[turbo_tasks::function]\n-async fn exports_field(package_json_path: FileSystemPath) -> Result<Vc<ExportsFieldResult>> {\n-    let read = read_package_json(package_json_path.clone()).await?;\n+async fn exports_field(\n+    package_json_path: ResolvedVc<Box<dyn Source>>,\n+) -> Result<Vc<ExportsFieldResult>> {\n+    let read = read_package_json(*package_json_path).await?;\n     let package_json = match &*read {\n         Some(json) => json,\n         None => return Ok(ExportsFieldResult::None.cell()),\n@@ -1203,8 +1205,9 @@ async fn exports_field(package_json_path: FileSystemPath) -> Result<Vc<ExportsFi\n         Ok(exports) => Ok(ExportsFieldResult::Some(exports).cell()),\n         Err(err) => {\n             PackageJsonIssue {\n-                path: package_json_path,\n                 error_message: err.to_string().into(),\n+                // TODO(PACK-4879): add line column information\n+                source: IssueSource::from_source_only(package_json_path),\n             }\n             .resolved_cell()\n             .emit();\n@@ -1230,8 +1233,11 @@ async fn imports_field(lookup_path: FileSystemPath) -> Result<Vc<ImportsFieldRes\n     let FindContextFileResult::Found(package_json_path, _refs) = &*package_json_context else {\n         return Ok(ImportsFieldResult::None.cell());\n     };\n+    let source = Vc::upcast::<Box<dyn Source>>(FileSource::new(package_json_path.clone()))\n+        .to_resolved()\n+        .await?;\n \n-    let read = read_package_json(package_json_path.clone()).await?;\n+    let read = read_package_json(*source).await?;\n     let package_json = match &*read {\n         Some(json) => json,\n         None => return Ok(ImportsFieldResult::None.cell()),\n@@ -1244,8 +1250,9 @@ async fn imports_field(lookup_path: FileSystemPath) -> Result<Vc<ImportsFieldRes\n         Ok(imports) => Ok(ImportsFieldResult::Some(imports, package_json_path.clone()).cell()),\n         Err(err) => {\n             PackageJsonIssue {\n-                path: package_json_path.clone(),\n                 error_message: err.to_string().into(),\n+                // TODO(PACK-4879): Add line-column information\n+                source: IssueSource::from_source_only(source),\n             }\n             .resolved_cell()\n             .emit();\n@@ -1314,7 +1321,8 @@ pub async fn find_context_file_or_package_key(\n     let mut refs = Vec::new();\n     let package_json_path = lookup_path.join(\"package.json\")?;\n     if let Some(package_json_path) = exists(package_json_path, &mut refs).await?\n-        && let Some(json) = &*read_package_json(package_json_path.clone()).await?\n+        && let Some(json) =\n+            &*read_package_json(Vc::upcast(FileSource::new(package_json_path.clone()))).await?\n         && json.get(&*package_key).is_some()\n     {\n         return Ok(FindContextFileResult::Found(package_json_path, refs).into());\n@@ -2090,7 +2098,9 @@ async fn resolve_into_folder(\n     for resolve_into_package in options_value.into_package.iter() {\n         match resolve_into_package {\n             ResolveIntoPackage::MainField { field: name } => {\n-                if let Some(package_json) = &*read_package_json(package_json_path.clone()).await?\n+                if let Some(package_json) =\n+                    &*read_package_json(Vc::upcast(FileSource::new(package_json_path.clone())))\n+                        .await?\n                     && let Some(field_value) = package_json[name.as_str()].as_str()\n                 {\n                     let normalized_request: RcStr = normalize_request(field_value).into();\n@@ -2381,7 +2391,8 @@ async fn apply_in_package(\n             continue;\n         };\n \n-        let read = read_package_json(package_json_path.clone()).await?;\n+        let read =\n+            read_package_json(Vc::upcast(FileSource::new(package_json_path.clone()))).await?;\n         let Some(package_json) = &*read else {\n             continue;\n         };\n@@ -2474,7 +2485,8 @@ async fn find_self_reference(\n ) -> Result<Vc<FindSelfReferencePackageResult>> {\n     let package_json_context = find_context_file(lookup_path, package_json()).await?;\n     if let FindContextFileResult::Found(package_json_path, _refs) = &*package_json_context {\n-        let read = read_package_json(package_json_path.clone()).await?;\n+        let read =\n+            read_package_json(Vc::upcast(FileSource::new(package_json_path.clone()))).await?;\n         if let Some(json) = &*read\n             && json.get(\"exports\").is_some()\n             && let Some(name) = json[\"name\"].as_str()\n@@ -2639,7 +2651,7 @@ async fn resolve_into_package(\n             } => {\n                 let package_json_path = package_path.join(\"package.json\")?;\n                 let ExportsFieldResult::Some(exports_field) =\n-                    &*exports_field(package_json_path.clone()).await?\n+                    &*exports_field(Vc::upcast(FileSource::new(package_json_path.clone()))).await?\n                 else {\n                     continue;\n                 };"
        },
        {
            "sha": "19f0fcaf84c8b8be1ae2ecb66a13fbc99f125b18",
            "filename": "turbopack/crates/turbopack-css/src/module_asset.rs",
            "status": "modified",
            "additions": 19,
            "deletions": 7,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -12,7 +12,10 @@ use turbopack_core::{\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     context::{AssetContext, ProcessResult},\n     ident::AssetIdent,\n-    issue::{Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n+    issue::{\n+        Issue, IssueExt, IssueSeverity, IssueSource, IssueStage, OptionIssueSource,\n+        OptionStyledString, StyledString,\n+    },\n     module::Module,\n     module_graph::ModuleGraph,\n     reference::{ModuleReference, ModuleReferences},\n@@ -330,7 +333,8 @@ impl EcmascriptChunkItem for ModuleChunkItem {\n                         let Some(resolved_module) = &*resolved_module else {\n                             CssModuleComposesIssue {\n                                 severity: IssueSeverity::Error,\n-                                source: self.module.ident().to_resolved().await?,\n+                                // TODO(PACK-4879): this should include detailed location information\n+                                source: IssueSource::from_source_only(self.module.await?.source),\n                                 message: formatdoc! {\n                                     r#\"\n                                         Module {from} referenced in `composes: ... from {from};` can't be resolved.\n@@ -346,7 +350,8 @@ impl EcmascriptChunkItem for ModuleChunkItem {\n                         else {\n                             CssModuleComposesIssue {\n                                 severity: IssueSeverity::Error,\n-                                    source: self.module.ident().to_resolved().await?,\n+                                // TODO(PACK-4879): this should include detailed location information\n+                                source: IssueSource::from_source_only(self.module.await?.source),\n                                 message: formatdoc! {\n                                     r#\"\n                                         Module {from} referenced in `composes: ... from {from};` is not a CSS module.\n@@ -431,7 +436,7 @@ fn generate_minimal_source_map(filename: String, source: String) -> Result<Rope>\n #[turbo_tasks::value(shared)]\n struct CssModuleComposesIssue {\n     severity: IssueSeverity,\n-    source: ResolvedVc<AssetIdent>,\n+    source: IssueSource,\n     message: RcStr,\n }\n \n@@ -443,8 +448,10 @@ impl Issue for CssModuleComposesIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"An issue occurred while resolving a CSS module `composes:` rule\".into())\n-            .cell()\n+        StyledString::Text(rcstr!(\n+            \"An issue occurred while resolving a CSS module `composes:` rule\"\n+        ))\n+        .cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -454,7 +461,7 @@ impl Issue for CssModuleComposesIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.source.path()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -463,4 +470,9 @@ impl Issue for CssModuleComposesIssue {\n             StyledString::Text(self.message.clone()).resolved_cell(),\n         ))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }"
        },
        {
            "sha": "bcd69aee6ece153e763065d9a3729c0c9ecb1b1c",
            "filename": "turbopack/crates/turbopack-css/src/process.rs",
            "status": "modified",
            "additions": 12,
            "deletions": 21,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -369,7 +369,6 @@ pub async fn parse_css(\n     };\n     async move {\n         let content = source.content();\n-        let fs_path = source.ident().path();\n         let ident_str = &*source.ident().to_string().await?;\n         Ok(match &*content.await? {\n             AssetContent::Redirect { .. } => ParseCssResult::Unparseable.cell(),\n@@ -381,7 +380,6 @@ pub async fn parse_css(\n                         process_content(\n                             *file_content,\n                             string.into_owned(),\n-                            fs_path.await?.clone_value(),\n                             ident_str,\n                             source,\n                             origin,\n@@ -402,7 +400,6 @@ pub async fn parse_css(\n async fn process_content(\n     content_vc: ResolvedVc<FileContent>,\n     code: String,\n-    fs_path_vc: FileSystemPath,\n     filename: &str,\n     source: ResolvedVc<Box<dyn Source>>,\n     origin: ResolvedVc<Box<dyn ResolveOrigin>>,\n@@ -463,7 +460,7 @@ async fn process_content(\n                     ss.visit(&mut validator).unwrap();\n \n                     for err in validator.errors {\n-                        err.report(fs_path_vc.clone());\n+                        err.report(source);\n                     }\n                 }\n \n@@ -482,13 +479,12 @@ async fn process_content(\n                                         line: loc.line as _,\n                                         column: loc.column as _,\n                                     };\n-                                    Some(IssueSource::from_line_col(source, pos, pos))\n+                                    IssueSource::from_line_col(source, pos, pos)\n                                 }\n-                                None => None,\n+                                None => IssueSource::from_source_only(source),\n                             };\n \n                             ParsingIssue {\n-                                file: fs_path_vc.clone(),\n                                 msg: err.to_string().into(),\n                                 source,\n                             }\n@@ -527,12 +523,11 @@ async fn process_content(\n                             line: loc.line as _,\n                             column: loc.column as _,\n                         };\n-                        Some(IssueSource::from_line_col(source, pos, pos))\n+                        IssueSource::from_line_col(source, pos, pos)\n                     }\n-                    None => None,\n+                    None => IssueSource::from_source_only(source),\n                 };\n                 ParsingIssue {\n-                    file: fs_path_vc,\n                     msg: e.to_string().into(),\n                     source,\n                 }\n@@ -577,17 +572,17 @@ enum CssError {\n }\n \n impl CssError {\n-    fn report(self, file: FileSystemPath) {\n+    fn report(self, source: ResolvedVc<Box<dyn Source>>) {\n         match self {\n             CssError::CssSelectorInModuleNotPure { selector } => {\n                 ParsingIssue {\n-                    file,\n                     msg: format!(\n                         \"Selector \\\"{selector}\\\" is not pure. Pure selectors must contain at \\\n                          least one local class or id.\"\n                     )\n                     .into(),\n-                    source: None,\n+                    // TODO: This should include the location of the selector in the file.\n+                    source: IssueSource::from_source_only(source),\n                 }\n                 .resolved_cell()\n                 .emit();\n@@ -685,15 +680,14 @@ fn generate_css_source_map(source_map: &parcel_sourcemap::SourceMap) -> Result<R\n #[turbo_tasks::value]\n struct ParsingIssue {\n     msg: RcStr,\n-    file: FileSystemPath,\n-    source: Option<IssueSource>,\n+    source: IssueSource,\n }\n \n #[turbo_tasks::value_impl]\n impl Issue for ParsingIssue {\n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.file.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -707,11 +701,8 @@ impl Issue for ParsingIssue {\n     }\n \n     #[turbo_tasks::function]\n-    async fn source(&self) -> Result<Vc<OptionIssueSource>> {\n-        Ok(Vc::cell(match &self.source {\n-            Some(s) => Some(s.resolve_source_map().await?.into_owned()),\n-            None => None,\n-        }))\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "205e1d4f018e2788b1c8be01ce38fc074d36c0f9",
            "filename": "turbopack/crates/turbopack-css/src/references/import.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Freferences%2Fimport.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Freferences%2Fimport.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Freferences%2Fimport.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -139,7 +139,7 @@ impl ModuleReference for ImportAssetReference {\n             *self.origin,\n             *self.request,\n             CssReferenceSubType::AtImport(import_context),\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n         ))\n     }\n }"
        },
        {
            "sha": "fda155120b5d00383c5c84f56258b5e126b107a7",
            "filename": "turbopack/crates/turbopack-css/src/references/url.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Freferences%2Furl.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Freferences%2Furl.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Freferences%2Furl.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -77,7 +77,7 @@ impl ModuleReference for UrlAssetReference {\n             *self.origin,\n             *self.request,\n             ReferenceType::Url(UrlReferenceSubType::CssUrl),\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n             false,\n         )\n     }"
        },
        {
            "sha": "0c632568ccc24812e53c39898a4aba2c8cb7930e",
            "filename": "turbopack/crates/turbopack-ecmascript-plugins/src/transform/directives/mod.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -2,7 +2,6 @@ use swc_core::ecma::ast::{Lit, Program};\n \n pub mod client;\n pub mod client_disallowed;\n-pub mod server;\n mod server_to_client_proxy;\n \n macro_rules! has_directive {\n@@ -29,12 +28,3 @@ fn is_client_module(program: &Program) -> bool {\n         Program::Script(s) => has_directive!(s.body.iter().map(Some), \"use client\"),\n     }\n }\n-\n-fn is_server_module(program: &Program) -> bool {\n-    match program {\n-        Program::Module(m) => {\n-            has_directive!(m.body.iter().map(|item| item.as_stmt()), \"use server\")\n-        }\n-        Program::Script(s) => has_directive!(s.body.iter().map(Some), \"use server\"),\n-    }\n-}"
        },
        {
            "sha": "6825d563e29e44115725c0c5f2dcc85a54d58af2",
            "filename": "turbopack/crates/turbopack-ecmascript-plugins/src/transform/directives/server.rs",
            "status": "removed",
            "additions": 0,
            "deletions": 52,
            "changes": 52,
            "blob_url": "https://github.com/vercel/next.js/blob/12ee9b2545bfcad779ae746ed83d44e0afeffeae/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fserver.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/12ee9b2545bfcad779ae746ed83d44e0afeffeae/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fserver.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fserver.rs?ref=12ee9b2545bfcad779ae746ed83d44e0afeffeae",
            "patch": "@@ -1,52 +0,0 @@\n-use anyhow::Result;\n-use async_trait::async_trait;\n-use swc_core::{\n-    ecma::ast::{ModuleItem, Program},\n-    quote,\n-};\n-use turbo_rcstr::RcStr;\n-use turbo_tasks::Vc;\n-use turbopack_core::issue::IssueExt;\n-use turbopack_ecmascript::{CustomTransformer, TransformContext, UnsupportedServerActionIssue};\n-\n-use super::is_server_module;\n-\n-#[derive(Debug)]\n-pub struct ServerDirectiveTransformer {\n-    // ServerDirective is not implemented yet and always reports an issue.\n-    // We don't have to pass a valid transition name yet, but the API is prepared.\n-    #[allow(unused)]\n-    transition_name: Vc<RcStr>,\n-}\n-\n-impl ServerDirectiveTransformer {\n-    pub fn new(transition_name: &Vc<RcStr>) -> Self {\n-        Self {\n-            transition_name: *transition_name,\n-        }\n-    }\n-}\n-\n-#[async_trait]\n-impl CustomTransformer for ServerDirectiveTransformer {\n-    #[tracing::instrument(level = tracing::Level::TRACE, name = \"server_directive\", skip_all)]\n-    async fn transform(&self, program: &mut Program, ctx: &TransformContext<'_>) -> Result<()> {\n-        if is_server_module(program) {\n-            let stmt = quote!(\n-                \"throw new Error('Server actions (\\\"use server\\\") are not yet supported in \\\n-                 Turbopack');\" as Stmt\n-            );\n-            match program {\n-                Program::Module(m) => m.body = vec![ModuleItem::Stmt(stmt)],\n-                Program::Script(s) => s.body = vec![stmt],\n-            }\n-            UnsupportedServerActionIssue {\n-                file_path: ctx.file_path.clone(),\n-            }\n-            .resolved_cell()\n-            .emit();\n-        }\n-\n-        Ok(())\n-    }\n-}"
        },
        {
            "sha": "d167fa5f6ed338e4d5bc490a9007818622b82c70",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/placeable.rs",
            "status": "modified",
            "additions": 42,
            "deletions": 27,
            "changes": 69,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -6,7 +6,11 @@ use turbopack_core::{\n     asset::Asset,\n     chunk::ChunkableModule,\n     error::PrettyPrintError,\n-    issue::{Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n+    file_source::FileSource,\n+    issue::{\n+        Issue, IssueExt, IssueSeverity, IssueSource, IssueStage, OptionIssueSource,\n+        OptionStyledString, StyledString,\n+    },\n     module::Module,\n     resolve::{FindContextFileResult, find_context_file, package_json},\n };\n@@ -47,7 +51,9 @@ enum SideEffectsValue {\n async fn side_effects_from_package_json(\n     package_json: FileSystemPath,\n ) -> Result<Vc<SideEffectsValue>> {\n-    if let FileJsonContent::Content(content) = &*package_json.read_json().await?\n+    let package_json_file = FileSource::new(package_json).to_resolved().await?;\n+    let package_json = &*package_json_file.content().parse_json().await?;\n+    if let FileJsonContent::Content(content) = package_json\n         && let Some(side_effects) = content.get(\"sideEffects\")\n     {\n         if let Some(side_effects) = side_effects.as_bool() {\n@@ -66,7 +72,10 @@ async fn side_effects_from_package_json(\n                         }\n                     } else {\n                         SideEffectsInPackageJsonIssue {\n-                            path: package_json.clone(),\n+                            // TODO(PACK-4879): This should point at the buggy element\n+                            source: IssueSource::from_source_only(ResolvedVc::upcast(\n+                                package_json_file,\n+                            )),\n                             description: Some(\n                                 StyledString::Text(\n                                     format!(\n@@ -83,29 +92,29 @@ async fn side_effects_from_package_json(\n                         None\n                     }\n                 })\n-                .map(|glob| {\n-                    let package_json = package_json.clone();\n-                    async move {\n-                        match glob.resolve().await {\n-                            Ok(glob) => Ok(Some(glob)),\n-                            Err(err) => {\n-                                SideEffectsInPackageJsonIssue {\n-                                    path: package_json.clone(),\n-                                    description: Some(\n-                                        StyledString::Text(\n-                                            format!(\n-                                                \"Invalid glob in sideEffects: {}\",\n-                                                PrettyPrintError(&err)\n-                                            )\n-                                            .into(),\n+                .map(|glob| async move {\n+                    match glob.resolve().await {\n+                        Ok(glob) => Ok(Some(glob)),\n+                        Err(err) => {\n+                            SideEffectsInPackageJsonIssue {\n+                                // TODO(PACK-4879): This should point at the buggy glob\n+                                source: IssueSource::from_source_only(ResolvedVc::upcast(\n+                                    package_json_file,\n+                                )),\n+                                description: Some(\n+                                    StyledString::Text(\n+                                        format!(\n+                                            \"Invalid glob in sideEffects: {}\",\n+                                            PrettyPrintError(&err)\n                                         )\n-                                        .resolved_cell(),\n-                                    ),\n-                                }\n-                                .resolved_cell()\n-                                .emit();\n-                                Ok(None)\n+                                        .into(),\n+                                    )\n+                                    .resolved_cell(),\n+                                ),\n                             }\n+                            .resolved_cell()\n+                            .emit();\n+                            Ok(None)\n                         }\n                     }\n                 })\n@@ -116,7 +125,8 @@ async fn side_effects_from_package_json(\n             );\n         } else {\n             SideEffectsInPackageJsonIssue {\n-                path: package_json.clone(),\n+                // TODO(PACK-4879): This should point at the buggy value\n+                source: IssueSource::from_source_only(ResolvedVc::upcast(package_json_file)),\n                 description: Some(\n                     StyledString::Text(\n                         format!(\n@@ -136,7 +146,7 @@ async fn side_effects_from_package_json(\n \n #[turbo_tasks::value]\n struct SideEffectsInPackageJsonIssue {\n-    path: FileSystemPath,\n+    source: IssueSource,\n     description: Option<ResolvedVc<StyledString>>,\n }\n \n@@ -153,7 +163,7 @@ impl Issue for SideEffectsInPackageJsonIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.path.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -165,6 +175,11 @@ impl Issue for SideEffectsInPackageJsonIssue {\n     fn description(&self) -> Vc<OptionStyledString> {\n         Vc::cell(self.description)\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }\n \n #[turbo_tasks::function]"
        },
        {
            "sha": "c03bdd52036c7817a2bd9aa96a513b2df0f3ad62",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -80,7 +80,7 @@ use swc_core::{\n use tracing::{Instrument, Level, instrument};\n pub use transform::{\n     CustomTransformer, EcmascriptInputTransform, EcmascriptInputTransforms, TransformContext,\n-    TransformPlugin, UnsupportedServerActionIssue,\n+    TransformPlugin,\n };\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{"
        },
        {
            "sha": "a35b7eef92b66d18536eeb2bf65f13590104784f",
            "filename": "turbopack/crates/turbopack-ecmascript/src/parse.rs",
            "status": "modified",
            "additions": 19,
            "deletions": 7,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -24,15 +24,18 @@ use swc_core::{\n     },\n };\n use tracing::{Instrument, Level, instrument};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc, util::WrapFuture};\n use turbo_tasks_fs::{FileContent, FileSystemPath, rope::Rope};\n use turbo_tasks_hash::hash_xxh3_hash64;\n use turbopack_core::{\n     SOURCE_URL_PROTOCOL,\n     asset::{Asset, AssetContent},\n     error::PrettyPrintError,\n-    issue::{Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n+    issue::{\n+        Issue, IssueExt, IssueSeverity, IssueSource, IssueStage, OptionIssueSource,\n+        OptionStyledString, StyledString,\n+    },\n     source::Source,\n     source_map::utils::add_default_ignore_list,\n };\n@@ -224,7 +227,7 @@ async fn parse_internal(\n         Err(error) => {\n             let error: RcStr = PrettyPrintError(&error).to_string().into();\n             ReadSourceIssue {\n-                source,\n+                source: IssueSource::from_source_only(source),\n                 error: error.clone(),\n             }\n             .resolved_cell()\n@@ -272,7 +275,10 @@ async fn parse_internal(\n                         .to_string()\n                         .into();\n                         ReadSourceIssue {\n-                            source,\n+                            // Technically we could supply byte offsets to the issue source, but\n+                            // that would cause another utf8 error to be produced when we attempt to\n+                            // infer line/column offsets\n+                            source: IssueSource::from_source_only(source),\n                             error: error.clone(),\n                         }\n                         .resolved_cell()\n@@ -453,6 +459,7 @@ async fn parse_file_content(\n                 file_name_hash: file_path_hash,\n                 query_str: query,\n                 file_path: fs_path_vc.clone(),\n+                source\n             };\n             let span = tracing::trace_span!(\"transforms\");\n             async {\n@@ -529,20 +536,20 @@ async fn parse_file_content(\n \n #[turbo_tasks::value]\n struct ReadSourceIssue {\n-    source: ResolvedVc<Box<dyn Source>>,\n+    source: IssueSource,\n     error: RcStr,\n }\n \n #[turbo_tasks::value_impl]\n impl Issue for ReadSourceIssue {\n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.source.ident().path()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Reading source code for parsing failed\".into()).cell()\n+        StyledString::Text(rcstr!(\"Reading source code for parsing failed\")).cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -568,6 +575,11 @@ impl Issue for ReadSourceIssue {\n     fn stage(&self) -> Vc<IssueStage> {\n         IssueStage::Load.cell()\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }\n \n struct VarDeclWithTsDeclareCollector {"
        },
        {
            "sha": "917ea88dd525c5a02e01c393bf9feb152da41e8b",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/amd.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Famd.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Famd.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Famd.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -68,7 +68,7 @@ impl ModuleReference for AmdDefineAssetReference {\n         cjs_resolve(\n             *self.origin,\n             *self.request,\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n             self.in_try,\n         )\n     }\n@@ -178,7 +178,7 @@ impl AmdDefineWithDependenciesCodeGen {\n                             cjs_resolve(\n                                 *self.origin,\n                                 **request,\n-                                Some(self.issue_source.clone()),\n+                                Some(self.issue_source),\n                                 self.in_try,\n                             ),\n                             ResolveType::ChunkItem,"
        },
        {
            "sha": "6dfdbc44417c6fe83f40d752787e8142a70357d5",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/cjs.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fcjs.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fcjs.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fcjs.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -62,7 +62,7 @@ impl ModuleReference for CjsAssetReference {\n         cjs_resolve(\n             *self.origin,\n             *self.request,\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n             self.in_try,\n         )\n     }\n@@ -113,7 +113,7 @@ impl ModuleReference for CjsRequireAssetReference {\n         cjs_resolve(\n             *self.origin,\n             *self.request,\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n             self.in_try,\n         )\n     }\n@@ -238,7 +238,7 @@ impl ModuleReference for CjsRequireResolveAssetReference {\n         cjs_resolve(\n             *self.origin,\n             *self.request,\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n             self.in_try,\n         )\n     }"
        },
        {
            "sha": "2b1a6c120a38008606b584d63da9c98260178ad0",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/base.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 4,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -437,7 +437,7 @@ impl ModuleReference for EsmAssetReference {\n             *self.request,\n             ty,\n             false,\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n         )\n         .await?;\n \n@@ -449,7 +449,7 @@ impl ModuleReference for EsmAssetReference {\n                     InvalidExport {\n                         export: export_name.clone(),\n                         module,\n-                        source: self.issue_source.clone(),\n+                        source: self.issue_source,\n                     }\n                     .resolved_cell()\n                     .emit();\n@@ -837,7 +837,7 @@ impl Issue for InvalidExport {\n \n     #[turbo_tasks::function]\n     fn source(&self) -> Vc<OptionIssueSource> {\n-        Vc::cell(Some(self.source.clone()))\n+        Vc::cell(Some(self.source))\n     }\n }\n \n@@ -847,7 +847,6 @@ pub struct CircularReExport {\n     import: Option<RcStr>,\n     module: ResolvedVc<Box<dyn EcmascriptChunkPlaceable>>,\n     module_cycle: ResolvedVc<Box<dyn EcmascriptChunkPlaceable>>,\n-    // TODO ideally we'd have an issue source here\n }\n \n #[turbo_tasks::value_impl]\n@@ -899,4 +898,11 @@ impl Issue for CircularReExport {\n             .resolved_cell(),\n         )))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        // TODO(PACK-4879): This should point at the buggy export by querying for the source\n+        // location\n+        Vc::cell(None)\n+    }\n }"
        },
        {
            "sha": "cacd70a5564c8b65b143062eae27ca4de3e723a2",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/dynamic.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fdynamic.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fdynamic.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fdynamic.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -82,7 +82,7 @@ impl ModuleReference for EsmAsyncAssetReference {\n             *self.request,\n             EcmaScriptModulesReferenceSubType::DynamicImport,\n             self.in_try,\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n         )\n         .await\n     }"
        },
        {
            "sha": "fb36b06a47c4a6e1c7bd02c1d379419c9d4d8929",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/url.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Furl.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Furl.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Furl.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -107,7 +107,7 @@ impl ModuleReference for UrlAssetReference {\n             *self.origin,\n             *self.request,\n             ReferenceType::Url(UrlReferenceSubType::EcmaScriptNewUrl),\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n             self.in_try,\n         )\n     }"
        },
        {
            "sha": "0a7eb5b77f4df4fdaed0f45e51e53fdd192d7163",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -743,7 +743,6 @@ pub(crate) async fn analyse_ecmascript_module_internal(\n                     .to_resolved()\n                     .await?,\n                 r.issue_source\n-                    .clone()\n                     .unwrap_or_else(|| IssueSource::from_source_only(source)),\n                 r.annotations.clone(),\n                 match options.tree_shaking_mode {\n@@ -841,7 +840,8 @@ pub(crate) async fn analyse_ecmascript_module_internal(\n         let exports = if !esm_exports.is_empty() || !esm_star_exports.is_empty() {\n             if specified_type == SpecifiedModuleType::CommonJs {\n                 SpecifiedModuleTypeIssue {\n-                    path: source.ident().path().await?.clone_value(),\n+                    // TODO(PACK-4879): this should point at one of the exports\n+                    source: IssueSource::from_source_only(source),\n                     specified_type,\n                 }\n                 .resolved_cell()\n@@ -859,7 +859,9 @@ pub(crate) async fn analyse_ecmascript_module_internal(\n             match detect_dynamic_export(program) {\n                 DetectedDynamicExportType::CommonJs => {\n                     SpecifiedModuleTypeIssue {\n-                        path: source.ident().path().await?.clone_value(),\n+                        // TODO(PACK-4879): this should point at the source location of the commonjs\n+                        // export\n+                        source: IssueSource::from_source_only(source),\n                         specified_type,\n                     }\n                     .resolved_cell()\n@@ -1380,7 +1382,7 @@ pub(crate) async fn analyse_ecmascript_module_internal(\n                                             EsmAssetReference::new(\n                                                 original_reference.origin,\n                                                 original_reference.request,\n-                                                original_reference.issue_source.clone(),\n+                                                original_reference.issue_source,\n                                                 original_reference.annotations.clone(),\n                                                 Some(ModulePart::export(export.clone())),\n                                                 original_reference.import_externals,"
        },
        {
            "sha": "18917ac742e04fe512f42a544159f08b6ed83ad4",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/require_context.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -196,7 +196,7 @@ impl RequireContextMap {\n             let request = Request::parse(origin_relative.clone().into())\n                 .to_resolved()\n                 .await?;\n-            let result = cjs_resolve(origin, *request, issue_source.clone(), is_optional)\n+            let result = cjs_resolve(origin, *request, issue_source, is_optional)\n                 .to_resolved()\n                 .await?;\n \n@@ -242,7 +242,7 @@ impl RequireContextAssetReference {\n             origin.origin_path().await?.parent().join(&dir)?,\n             include_subdirs,\n             filter,\n-            issue_source.clone(),\n+            issue_source,\n             in_try,\n         )\n         .to_resolved()"
        },
        {
            "sha": "64c0318de5d8ab8b94d2cff25258d8c2b18348f9",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/type_issue.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 3,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Ftype_issue.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Ftype_issue.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Ftype_issue.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,20 +1,23 @@\n use turbo_tasks::Vc;\n use turbo_tasks_fs::FileSystemPath;\n-use turbopack_core::issue::{Issue, IssueSeverity, IssueStage, OptionStyledString, StyledString};\n+use turbopack_core::issue::{\n+    Issue, IssueSeverity, IssueSource, IssueStage, OptionIssueSource, OptionStyledString,\n+    StyledString,\n+};\n \n use crate::SpecifiedModuleType;\n \n #[turbo_tasks::value(shared)]\n pub struct SpecifiedModuleTypeIssue {\n-    pub path: FileSystemPath,\n+    pub source: IssueSource,\n     pub specified_type: SpecifiedModuleType,\n }\n \n #[turbo_tasks::value_impl]\n impl Issue for SpecifiedModuleTypeIssue {\n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.path.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -82,4 +85,9 @@ impl Issue for SpecifiedModuleTypeIssue {\n     fn stage(&self) -> Vc<IssueStage> {\n         IssueStage::Analysis.into()\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }"
        },
        {
            "sha": "97a254748f80032dea82a9abd8dbbdbcaf521471",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/worker.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fworker.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fworker.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fworker.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -61,7 +61,7 @@ impl WorkerAssetReference {\n             *self.request,\n             // TODO support more worker types\n             ReferenceType::Worker(WorkerReferenceSubType::WebWorker),\n-            Some(self.issue_source.clone()),\n+            Some(self.issue_source),\n             self.in_try,\n         );\n "
        },
        {
            "sha": "e8b4bcf9d7776abc53c6248648e423301dd35847",
            "filename": "turbopack/crates/turbopack-ecmascript/src/transform/mod.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 35,
            "changes": 38,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -22,13 +22,10 @@ use swc_core::{\n     },\n     quote,\n };\n-use turbo_rcstr::{RcStr, rcstr};\n+use turbo_rcstr::RcStr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n-use turbopack_core::{\n-    environment::Environment,\n-    issue::{Issue, IssueSeverity, IssueStage, StyledString},\n-};\n+use turbopack_core::{environment::Environment, source::Source};\n \n #[turbo_tasks::value]\n #[derive(Debug, Clone, Hash)]\n@@ -121,6 +118,7 @@ pub struct TransformContext<'a> {\n     pub file_name_hash: u128,\n     pub query_str: RcStr,\n     pub file_path: FileSystemPath,\n+    pub source: ResolvedVc<Box<dyn Source>>,\n }\n \n impl EcmascriptInputTransform {\n@@ -352,33 +350,3 @@ pub fn remove_directives(program: &mut Program) {\n         }\n     }\n }\n-\n-#[turbo_tasks::value(shared)]\n-pub struct UnsupportedServerActionIssue {\n-    pub file_path: FileSystemPath,\n-}\n-\n-#[turbo_tasks::value_impl]\n-impl Issue for UnsupportedServerActionIssue {\n-    fn severity(&self) -> IssueSeverity {\n-        IssueSeverity::Error\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(rcstr!(\n-            \"Server actions (\\\"use server\\\") are not yet supported in Turbopack\"\n-        ))\n-        .cell()\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.file_path.clone().cell()\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn stage(&self) -> Vc<IssueStage> {\n-        IssueStage::Transform.cell()\n-    }\n-}"
        },
        {
            "sha": "97aacfb17e1537837bba07da50f5536a68769502",
            "filename": "turbopack/crates/turbopack-image/src/process/mod.rs",
            "status": "modified",
            "additions": 43,
            "deletions": 38,
            "changes": 81,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-image%2Fsrc%2Fprocess%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-image%2Fsrc%2Fprocess%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-image%2Fsrc%2Fprocess%2Fmod.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -22,8 +22,11 @@ use turbo_tasks::{NonLocalValue, ResolvedVc, Vc, debug::ValueDebugFormat, trace:\n use turbo_tasks_fs::{File, FileContent, FileSystemPath};\n use turbopack_core::{\n     error::PrettyPrintError,\n-    ident::AssetIdent,\n-    issue::{Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n+    issue::{\n+        Issue, IssueExt, IssueSeverity, IssueSource, IssueStage, OptionIssueSource,\n+        OptionStyledString, StyledString,\n+    },\n+    source::Source,\n };\n \n use self::svg::calculate;\n@@ -102,16 +105,16 @@ fn extension_to_image_format(extension: &str) -> Option<ImageFormat> {\n     })\n }\n \n-fn result_to_issue<T>(path: FileSystemPath, result: Result<T>) -> Option<T> {\n+fn result_to_issue<T>(source: ResolvedVc<Box<dyn Source>>, result: Result<T>) -> Option<T> {\n     match result {\n         Ok(r) => Some(r),\n         Err(err) => {\n             ImageProcessingIssue {\n-                path,\n                 message: StyledString::Text(format!(\"{}\", PrettyPrintError(&err)).into())\n                     .resolved_cell(),\n                 issue_severity: None,\n                 title: None,\n+                source: IssueSource::from_source_only(source),\n             }\n             .resolved_cell()\n             .emit();\n@@ -121,11 +124,11 @@ fn result_to_issue<T>(path: FileSystemPath, result: Result<T>) -> Option<T> {\n }\n \n fn load_image(\n-    path: FileSystemPath,\n+    path: ResolvedVc<Box<dyn Source>>,\n     bytes: &[u8],\n-    extension: Option<&str>,\n+    extension: &str,\n ) -> Option<(ImageBuffer, Option<ImageFormat>)> {\n-    result_to_issue(path.clone(), load_image_internal(path, bytes, extension))\n+    result_to_issue(path, load_image_internal(path, bytes, extension))\n }\n \n /// Type of raw image buffer read by reader from `load_image`.\n@@ -136,17 +139,16 @@ enum ImageBuffer {\n }\n \n fn load_image_internal(\n-    path: FileSystemPath,\n+    image: ResolvedVc<Box<dyn Source>>,\n     bytes: &[u8],\n-    extension: Option<&str>,\n+    extension: &str,\n ) -> Result<(ImageBuffer, Option<ImageFormat>)> {\n     let reader = image::io::Reader::new(Cursor::new(&bytes));\n     let mut reader = reader\n         .with_guessed_format()\n         .context(\"unable to determine image format from file content\")?;\n     let mut format = reader.format();\n     if format.is_none()\n-        && let Some(extension) = extension\n         && let Some(new_format) = extension_to_image_format(extension)\n     {\n         format = Some(new_format);\n@@ -164,12 +166,11 @@ fn load_image_internal(\n     #[cfg(not(feature = \"avif\"))]\n     if matches!(format, Some(ImageFormat::Avif)) {\n         ImageProcessingIssue {\n-            path,\n-            message: StyledString::Text(\n+            source: IssueSource::from_source_only(image),\n+            message: StyledString::Text(rcstr!(\n                 \"This version of Turbopack does not support AVIF images, will emit without \\\n                  optimization or encoding\"\n-                    .into(),\n-            )\n+            ))\n             .resolved_cell(),\n             title: Some(StyledString::Text(rcstr!(\"AVIF image not supported\")).resolved_cell()),\n             issue_severity: Some(IssueSeverity::Warning),\n@@ -182,12 +183,11 @@ fn load_image_internal(\n     #[cfg(not(feature = \"webp\"))]\n     if matches!(format, Some(ImageFormat::WebP)) {\n         ImageProcessingIssue {\n-            path,\n-            message: StyledString::Text(\n+            source: IssueSource::from_source_only(image),\n+            message: StyledString::Text(rcstr!(\n                 \"This version of Turbopack does not support WEBP images, will emit without \\\n                  optimization or encoding\"\n-                    .into(),\n-            )\n+            ))\n             .resolved_cell(),\n             title: Some(StyledString::Text(rcstr!(\"WEBP image not supported\")).resolved_cell()),\n             issue_severity: Some(IssueSeverity::Warning),\n@@ -202,7 +202,7 @@ fn load_image_internal(\n }\n \n fn compute_blur_data(\n-    path: FileSystemPath,\n+    path: ResolvedVc<Box<dyn Source>>,\n     image: image::DynamicImage,\n     format: ImageFormat,\n     options: &BlurPlaceholderOptions,\n@@ -213,7 +213,7 @@ fn compute_blur_data(\n         Ok(r) => Some(r),\n         Err(err) => {\n             ImageProcessingIssue {\n-                path,\n+                source: IssueSource::from_source_only(path),\n                 message: StyledString::Text(format!(\"{}\", PrettyPrintError(&err)).into())\n                     .resolved_cell(),\n                 issue_severity: None,\n@@ -340,27 +340,27 @@ fn image_format_to_mime_type(format: ImageFormat) -> Result<Option<Mime>> {\n /// Optionally computes a blur placeholder.\n #[turbo_tasks::function]\n pub async fn get_meta_data(\n-    ident: Vc<AssetIdent>,\n+    image: ResolvedVc<Box<dyn Source>>,\n     content: Vc<FileContent>,\n     blur_placeholder: Option<Vc<BlurPlaceholderOptions>>,\n ) -> Result<Vc<ImageMetaData>> {\n     let FileContent::Content(content) = &*content.await? else {\n         bail!(\"Input image not found\");\n     };\n     let bytes = content.content().to_bytes();\n-    let path_resolved = ident.path().await?.clone_value();\n-    let path = path_resolved.clone();\n-    let extension = path.extension_ref();\n-    if extension == Some(\"svg\") {\n+    let path = image.ident().path().await?;\n+    let extension = path.extension();\n+\n+    if extension == \"svg\" {\n         let content = result_to_issue(\n-            path_resolved.clone(),\n+            image,\n             std::str::from_utf8(&bytes).context(\"Input image is not valid utf-8\"),\n         );\n         let Some(content) = content else {\n             return Ok(ImageMetaData::fallback_value(Some(mime::IMAGE_SVG)).cell());\n         };\n         let info = result_to_issue(\n-            path_resolved.clone(),\n+            image,\n             calculate(content).context(\"Failed to parse svg source code for image dimensions\"),\n         );\n         let Some((width, height)) = info else {\n@@ -374,14 +374,14 @@ pub async fn get_meta_data(\n         }\n         .cell());\n     }\n-    let Some((image, format)) = load_image(path_resolved.clone(), &bytes, extension) else {\n+    let Some((image_buffer, format)) = load_image(image, &bytes, extension) else {\n         return Ok(ImageMetaData::fallback_value(None).cell());\n     };\n \n-    match image {\n+    match image_buffer {\n         ImageBuffer::Raw(..) => Ok(ImageMetaData::fallback_value(None).cell()),\n-        ImageBuffer::Decoded(image) => {\n-            let (width, height) = image.dimensions();\n+        ImageBuffer::Decoded(image_data) => {\n+            let (width, height) = image_data.dimensions();\n             let blur_placeholder = if let Some(blur_placeholder) = blur_placeholder {\n                 if matches!(\n                     format,\n@@ -392,8 +392,8 @@ pub async fn get_meta_data(\n                         | Some(ImageFormat::Avif)\n                 ) {\n                     compute_blur_data(\n-                        path_resolved.clone(),\n                         image,\n+                        image_data,\n                         format.unwrap(),\n                         &*blur_placeholder.await?,\n                     )\n@@ -421,7 +421,7 @@ pub async fn get_meta_data(\n \n #[turbo_tasks::function]\n pub async fn optimize(\n-    ident: Vc<AssetIdent>,\n+    source: ResolvedVc<Box<dyn Source>>,\n     content: Vc<FileContent>,\n     max_width: u32,\n     max_height: u32,\n@@ -431,10 +431,10 @@ pub async fn optimize(\n         return Ok(FileContent::NotFound.cell());\n     };\n     let bytes = content.content().to_bytes();\n-    let path = ident.path().await?.clone_value();\n+    let path = source.ident().path().await?;\n+    let extension = path.extension();\n \n-    let Some((image, format)) = load_image(path, &bytes, ident.path().await?.extension_ref())\n-    else {\n+    let Some((image, format)) = load_image(source, &bytes, extension) else {\n         return Ok(FileContent::NotFound.cell());\n     };\n     match image {\n@@ -486,10 +486,10 @@ pub async fn optimize(\n \n #[turbo_tasks::value]\n struct ImageProcessingIssue {\n-    path: FileSystemPath,\n     message: ResolvedVc<StyledString>,\n     title: Option<ResolvedVc<StyledString>>,\n     issue_severity: Option<IssueSeverity>,\n+    source: IssueSource,\n }\n \n #[turbo_tasks::value_impl]\n@@ -500,7 +500,7 @@ impl Issue for ImageProcessingIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.path.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -519,4 +519,9 @@ impl Issue for ImageProcessingIssue {\n     fn description(&self) -> Vc<OptionStyledString> {\n         Vc::cell(Some(self.message))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }"
        },
        {
            "sha": "4512738d8d2fb02729620c9a6774013131fff8d9",
            "filename": "turbopack/crates/turbopack-mdx/src/lib.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 20,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-mdx%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-mdx%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-mdx%2Fsrc%2Flib.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -193,7 +193,7 @@ impl MdxTransformedAsset {\n             }\n             .cell()),\n             Err(err) => {\n-                let loc = match err.place {\n+                let source = match err.place {\n                     Some(p) => {\n                         let (start, end) = match *p {\n                             // markdown's positions are 1-indexed, SourcePos is 0-indexed.\n@@ -217,17 +217,16 @@ impl MdxTransformedAsset {\n                             }\n                         };\n \n-                        Some(IssueSource::from_line_col(self.source, start, end))\n+                        IssueSource::from_line_col(self.source, start, end)\n                     }\n-                    None => None,\n+                    None => IssueSource::from_source_only(self.source),\n                 };\n \n                 MdxIssue {\n-                    path: self.source.ident().path().await?.clone_value(),\n-                    loc,\n-                    reason: err.reason,\n-                    mdx_rule_id: *err.rule_id,\n-                    mdx_source: *err.source,\n+                    source,\n+                    reason: RcStr::from(err.reason),\n+                    mdx_rule_id: RcStr::from(*err.rule_id),\n+                    mdx_source: RcStr::from(*err.source),\n                 }\n                 .resolved_cell()\n                 .emit();\n@@ -250,29 +249,25 @@ struct MdxTransformResult {\n #[turbo_tasks::value]\n struct MdxIssue {\n     /// Place of message.\n-    path: FileSystemPath,\n-    loc: Option<IssueSource>,\n+    source: IssueSource,\n     /// Reason for message (should use markdown).\n-    reason: String,\n+    reason: RcStr,\n     /// Category of message.\n-    mdx_rule_id: String,\n+    mdx_rule_id: RcStr,\n     /// Namespace of message.\n-    mdx_source: String,\n+    mdx_source: RcStr,\n }\n \n #[turbo_tasks::value_impl]\n impl Issue for MdxIssue {\n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.path.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n-    async fn source(&self) -> Result<Vc<OptionIssueSource>> {\n-        Ok(Vc::cell(match &self.loc {\n-            Some(loc) => Some(loc.resolve_source_map().await?.into_owned()),\n-            None => None,\n-        }))\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n     }\n \n     #[turbo_tasks::function]\n@@ -288,7 +283,7 @@ impl Issue for MdxIssue {\n     #[turbo_tasks::function]\n     fn description(&self) -> Vc<OptionStyledString> {\n         Vc::cell(Some(\n-            StyledString::Text(self.reason.clone().into()).resolved_cell(),\n+            StyledString::Text(self.reason.clone()).resolved_cell(),\n         ))\n     }\n }"
        },
        {
            "sha": "29e2ad97eda1cb6d7533a9f84ad0e985af03fe82",
            "filename": "turbopack/crates/turbopack-node/src/evaluate.rs",
            "status": "modified",
            "additions": 16,
            "deletions": 8,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Fevaluate.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Fevaluate.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Fevaluate.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -28,12 +28,15 @@ use turbopack_core::{\n     context::AssetContext,\n     error::PrettyPrintError,\n     file_source::FileSource,\n-    ident::AssetIdent,\n-    issue::{Issue, IssueExt, IssueStage, OptionStyledString, StyledString},\n+    issue::{\n+        Issue, IssueExt, IssueSource, IssueStage, OptionIssueSource, OptionStyledString,\n+        StyledString,\n+    },\n     module::Module,\n     module_graph::{ModuleGraph, chunk_group_info::ChunkGroupEntry},\n     output::{OutputAsset, OutputAssets},\n     reference_type::{InnerAssets, ReferenceType},\n+    source::Source,\n     virtual_source::VirtualSource,\n };\n \n@@ -411,7 +414,7 @@ pub fn evaluate(\n     module_asset: ResolvedVc<Box<dyn Module>>,\n     cwd: FileSystemPath,\n     env: ResolvedVc<Box<dyn ProcessEnv>>,\n-    context_ident_for_issue: ResolvedVc<AssetIdent>,\n+    context_source_for_issue: ResolvedVc<Box<dyn Source>>,\n     asset_context: ResolvedVc<Box<dyn AssetContext>>,\n     chunking_context: ResolvedVc<Box<dyn ChunkingContext>>,\n     runtime_entries: Option<ResolvedVc<EvaluatableAssets>>,\n@@ -423,7 +426,7 @@ pub fn evaluate(\n         module_asset,\n         cwd,\n         env,\n-        context_ident_for_issue,\n+        context_source_for_issue,\n         asset_context,\n         chunking_context,\n         runtime_entries,\n@@ -592,7 +595,7 @@ struct BasicEvaluateContext {\n     module_asset: ResolvedVc<Box<dyn Module>>,\n     cwd: FileSystemPath,\n     env: ResolvedVc<Box<dyn ProcessEnv>>,\n-    context_ident_for_issue: ResolvedVc<AssetIdent>,\n+    context_source_for_issue: ResolvedVc<Box<dyn Source>>,\n     asset_context: ResolvedVc<Box<dyn AssetContext>>,\n     chunking_context: ResolvedVc<Box<dyn ChunkingContext>>,\n     runtime_entries: Option<ResolvedVc<EvaluatableAssets>>,\n@@ -641,7 +644,7 @@ impl EvaluateContext for BasicEvaluateContext {\n     async fn emit_error(&self, error: StructuredError, pool: &NodeJsPool) -> Result<()> {\n         EvaluationIssue {\n             error,\n-            context_ident: self.context_ident_for_issue,\n+            source: IssueSource::from_source_only(self.context_source_for_issue),\n             assets_for_source_mapping: pool.assets_for_source_mapping,\n             assets_root: pool.assets_root.clone(),\n             root_path: self.chunking_context.root_path().await?.clone_value(),\n@@ -699,7 +702,7 @@ async fn print_error(\n /// An issue that occurred while evaluating node code.\n #[turbo_tasks::value(shared)]\n pub struct EvaluationIssue {\n-    pub context_ident: ResolvedVc<AssetIdent>,\n+    pub source: IssueSource,\n     pub error: StructuredError,\n     pub assets_for_source_mapping: ResolvedVc<AssetsForSourceMapping>,\n     pub assets_root: FileSystemPath,\n@@ -720,7 +723,7 @@ impl Issue for EvaluationIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.context_ident.path()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -740,4 +743,9 @@ impl Issue for EvaluationIssue {\n             .resolved_cell(),\n         )))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }"
        },
        {
            "sha": "a67ca5539d79ff6f087df5e778f6d599743c65a9",
            "filename": "turbopack/crates/turbopack-node/src/transforms/postcss.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 41,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fpostcss.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fpostcss.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fpostcss.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -16,9 +16,7 @@ use turbopack_core::{\n     context::{AssetContext, ProcessResult},\n     file_source::FileSource,\n     ident::AssetIdent,\n-    issue::{\n-        Issue, IssueDescriptionExt, IssueSeverity, IssueStage, OptionStyledString, StyledString,\n-    },\n+    issue::IssueDescriptionExt,\n     reference_type::{EntryReferenceSubType, InnerAssets, ReferenceType},\n     resolve::{FindContextFileResult, find_context_file_or_package_key, options::ImportMapping},\n     source::Source,\n@@ -525,7 +523,7 @@ impl PostCssTransformedAsset {\n             module_asset: postcss_executor,\n             cwd: project_path.clone(),\n             env: *env,\n-            context_ident_for_issue: self.source.ident().to_resolved().await?,\n+            context_source_for_issue: self.source,\n             asset_context: evaluate_context,\n             chunking_context: *chunking_context,\n             resolve_options_context: None,\n@@ -557,40 +555,3 @@ impl PostCssTransformedAsset {\n         Ok(ProcessPostCssResult { content, assets }.cell())\n     }\n }\n-\n-#[turbo_tasks::value]\n-struct PostCssTransformIssue {\n-    source: FileSystemPath,\n-    description: RcStr,\n-    severity: IssueSeverity,\n-    title: RcStr,\n-}\n-\n-#[turbo_tasks::value_impl]\n-impl Issue for PostCssTransformIssue {\n-    #[turbo_tasks::function]\n-    fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.source.clone().cell()\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(self.title.clone()).cell()\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn description(&self) -> Vc<OptionStyledString> {\n-        Vc::cell(Some(\n-            StyledString::Text(self.description.clone()).resolved_cell(),\n-        ))\n-    }\n-\n-    fn severity(&self) -> IssueSeverity {\n-        self.severity\n-    }\n-\n-    #[turbo_tasks::function]\n-    fn stage(&self) -> Vc<IssueStage> {\n-        IssueStage::Transform.cell()\n-    }\n-}"
        },
        {
            "sha": "b27e4b934460c1ae31cf82422748422d06b37b89",
            "filename": "turbopack/crates/turbopack-node/src/transforms/webpack.rs",
            "status": "modified",
            "additions": 31,
            "deletions": 13,
            "changes": 44,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -24,7 +24,10 @@ use turbopack_core::{\n     context::{AssetContext, ProcessResult},\n     file_source::FileSource,\n     ident::AssetIdent,\n-    issue::{Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n+    issue::{\n+        Issue, IssueExt, IssueSeverity, IssueSource, IssueStage, OptionIssueSource,\n+        OptionStyledString, StyledString,\n+    },\n     module::Module,\n     reference_type::{InnerAssets, ReferenceType},\n     resolve::{\n@@ -254,7 +257,7 @@ impl WebpackLoadersProcessedAsset {\n             module_asset: webpack_loaders_executor,\n             cwd: project_path.clone(),\n             env: *env,\n-            context_ident_for_issue: this.source.ident().to_resolved().await?,\n+            context_source_for_issue: this.source,\n             asset_context: evaluate_context,\n             chunking_context: *chunking_context,\n             resolve_options_context: Some(transform.resolve_options_context),\n@@ -415,7 +418,7 @@ pub struct WebpackLoaderContext {\n     pub module_asset: ResolvedVc<Box<dyn Module>>,\n     pub cwd: FileSystemPath,\n     pub env: ResolvedVc<Box<dyn ProcessEnv>>,\n-    pub context_ident_for_issue: ResolvedVc<AssetIdent>,\n+    pub context_source_for_issue: ResolvedVc<Box<dyn Source>>,\n     pub asset_context: ResolvedVc<Box<dyn AssetContext>>,\n     pub chunking_context: ResolvedVc<Box<dyn ChunkingContext>>,\n     pub resolve_options_context: Option<ResolvedVc<ResolveOptionsContext>>,\n@@ -466,7 +469,7 @@ impl EvaluateContext for WebpackLoaderContext {\n     async fn emit_error(&self, error: StructuredError, pool: &NodeJsPool) -> Result<()> {\n         EvaluationIssue {\n             error,\n-            context_ident: self.context_ident_for_issue,\n+            source: IssueSource::from_source_only(self.context_source_for_issue),\n             assets_for_source_mapping: pool.assets_for_source_mapping,\n             assets_root: pool.assets_root.clone(),\n             root_path: self.chunking_context.root_path().await?.clone_value(),\n@@ -526,7 +529,7 @@ impl EvaluateContext for WebpackLoaderContext {\n \n                 for build_path in resolved_build_paths {\n                     BuildDependencyIssue {\n-                        context_ident: self.context_ident_for_issue,\n+                        source: IssueSource::from_source_only(self.context_source_for_issue),\n                         path: build_path,\n                     }\n                     .resolved_cell()\n@@ -535,7 +538,7 @@ impl EvaluateContext for WebpackLoaderContext {\n             }\n             InfoMessage::EmittedError { error, severity } => {\n                 EvaluateEmittedErrorIssue {\n-                    file_path: self.context_ident_for_issue.path().await?.clone_value(),\n+                    source: IssueSource::from_source_only(self.context_source_for_issue),\n                     error,\n                     severity,\n                     assets_for_source_mapping: pool.assets_for_source_mapping,\n@@ -621,7 +624,7 @@ impl EvaluateContext for WebpackLoaderContext {\n                 .collect();\n \n             EvaluateErrorLoggingIssue {\n-                file_path: self.context_ident_for_issue.path().await?.clone_value(),\n+                source: IssueSource::from_source_only(self.context_source_for_issue),\n                 logging: logs,\n                 severity: if has_errors {\n                     IssueSeverity::Error\n@@ -725,8 +728,8 @@ async fn apply_webpack_resolve_options(\n /// An issue that occurred while evaluating node code.\n #[turbo_tasks::value(shared)]\n pub struct BuildDependencyIssue {\n-    pub context_ident: ResolvedVc<AssetIdent>,\n     pub path: FileSystemPath,\n+    pub source: IssueSource,\n }\n \n #[turbo_tasks::value_impl]\n@@ -747,7 +750,7 @@ impl Issue for BuildDependencyIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.context_ident.path()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -766,11 +769,16 @@ impl Issue for BuildDependencyIssue {\n             .resolved_cell(),\n         )))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }\n \n #[turbo_tasks::value(shared)]\n pub struct EvaluateEmittedErrorIssue {\n-    pub file_path: FileSystemPath,\n+    pub source: IssueSource,\n     pub severity: IssueSeverity,\n     pub error: StructuredError,\n     pub assets_for_source_mapping: ResolvedVc<AssetsForSourceMapping>,\n@@ -782,7 +790,7 @@ pub struct EvaluateEmittedErrorIssue {\n impl Issue for EvaluateEmittedErrorIssue {\n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.file_path.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -816,11 +824,16 @@ impl Issue for EvaluateEmittedErrorIssue {\n             .resolved_cell(),\n         )))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }\n \n #[turbo_tasks::value(shared)]\n pub struct EvaluateErrorLoggingIssue {\n-    pub file_path: FileSystemPath,\n+    pub source: IssueSource,\n     pub severity: IssueSeverity,\n     #[turbo_tasks(trace_ignore)]\n     pub logging: Vec<LogInfo>,\n@@ -833,7 +846,7 @@ pub struct EvaluateErrorLoggingIssue {\n impl Issue for EvaluateErrorLoggingIssue {\n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.file_path.clone().cell()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -887,4 +900,9 @@ impl Issue for EvaluateErrorLoggingIssue {\n             .collect::<Vec<_>>();\n         Vc::cell(Some(StyledString::Stack(lines).resolved_cell()))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }"
        },
        {
            "sha": "317d4ae81c739e7f3f9dc5d1aadc909da74fd392",
            "filename": "turbopack/crates/turbopack-resolve/src/typescript.rs",
            "status": "modified",
            "additions": 46,
            "deletions": 19,
            "changes": 65,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-use std::{collections::HashMap, fmt::Write, mem::take};\n+use std::{collections::HashMap, mem::take};\n \n use anyhow::Result;\n use serde_json::Value as JsonValue;\n@@ -9,8 +9,10 @@ use turbopack_core::{\n     asset::Asset,\n     context::AssetContext,\n     file_source::FileSource,\n-    ident::AssetIdent,\n-    issue::{Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n+    issue::{\n+        Issue, IssueExt, IssueSeverity, IssueSource, IssueStage, OptionIssueSource,\n+        OptionStyledString, StyledString,\n+    },\n     reference_type::{ReferenceType, TypeScriptReferenceSubType},\n     resolve::{\n         AliasPattern, ModuleResolveResult, handle_resolve_error,\n@@ -25,15 +27,16 @@ use turbopack_core::{\n         resolve,\n     },\n     source::{OptionSource, Source},\n+    source_pos::SourcePos,\n };\n \n use crate::ecmascript::get_condition_maps;\n \n #[turbo_tasks::value(shared)]\n-pub struct TsConfigIssue {\n-    pub severity: IssueSeverity,\n-    pub source_ident: ResolvedVc<AssetIdent>,\n-    pub message: RcStr,\n+struct TsConfigIssue {\n+    severity: IssueSeverity,\n+    source: IssueSource,\n+    message: RcStr,\n }\n \n #[turbo_tasks::function]\n@@ -64,16 +67,33 @@ pub async fn read_tsconfigs(\n         let parsed_data = data.parse_json_with_comments();\n         match &*parsed_data.await? {\n             FileJsonContent::Unparseable(e) => {\n-                let mut message = \"tsconfig is not parseable: invalid JSON: \".to_string();\n-                if let FileContent::Content(content) = &*data.await? {\n-                    let text = content.content().to_str()?;\n-                    e.write_with_content(&mut message, text.as_ref())?;\n-                } else {\n-                    write!(message, \"{e}\")?;\n-                }\n+                let message = format!(\"tsconfig is not parseable: invalid JSON: {}\", e.message);\n+                let source = match (e.start_location, e.end_location) {\n+                    (None, None) => IssueSource::from_source_only(tsconfig),\n+                    (Some((line, column)), None) | (None, Some((line, column))) => {\n+                        IssueSource::from_line_col(\n+                            tsconfig,\n+                            SourcePos { line, column },\n+                            SourcePos { line, column },\n+                        )\n+                    }\n+                    (Some((start_line, start_column)), Some((end_line, end_column))) => {\n+                        IssueSource::from_line_col(\n+                            tsconfig,\n+                            SourcePos {\n+                                line: start_line,\n+                                column: start_column,\n+                            },\n+                            SourcePos {\n+                                line: end_line,\n+                                column: end_column,\n+                            },\n+                        )\n+                    }\n+                };\n                 TsConfigIssue {\n                     severity: IssueSeverity::Error,\n-                    source_ident: tsconfig.ident().to_resolved().await?,\n+                    source,\n                     message: message.into(),\n                 }\n                 .resolved_cell()\n@@ -82,7 +102,7 @@ pub async fn read_tsconfigs(\n             FileJsonContent::NotFound => {\n                 TsConfigIssue {\n                     severity: IssueSeverity::Error,\n-                    source_ident: tsconfig.ident().to_resolved().await?,\n+                    source: IssueSource::from_source_only(tsconfig),\n                     message: rcstr!(\"tsconfig not found\"),\n                 }\n                 .resolved_cell()\n@@ -99,7 +119,8 @@ pub async fn read_tsconfigs(\n                     } else {\n                         TsConfigIssue {\n                             severity: IssueSeverity::Error,\n-                            source_ident: tsconfig.ident().to_resolved().await?,\n+                            // TODO: this should point at the `extends` property\n+                            source: IssueSource::from_source_only(tsconfig),\n                             message: format!(\"extends: \\\"{extends}\\\" doesn't resolve correctly\")\n                                 .into(),\n                         }\n@@ -306,7 +327,8 @@ pub async fn tsconfig_resolve_options(\n                 } else {\n                     TsConfigIssue {\n                         severity: IssueSeverity::Warning,\n-                        source_ident: source.ident().to_resolved().await?,\n+                        // TODO: this should point at the invalid key\n+                        source: IssueSource::from_source_only(*source),\n                         message: format!(\n                             \"compilerOptions.paths[{key}] doesn't contains an array as \\\n                              expected\\n{key}: {value:#}\",\n@@ -524,7 +546,7 @@ impl Issue for TsConfigIssue {\n \n     #[turbo_tasks::function]\n     fn file_path(&self) -> Vc<FileSystemPath> {\n-        self.source_ident.path()\n+        self.source.file_path()\n     }\n \n     #[turbo_tasks::function]\n@@ -538,4 +560,9 @@ impl Issue for TsConfigIssue {\n     fn stage(&self) -> Vc<IssueStage> {\n         IssueStage::Analysis.cell()\n     }\n+\n+    #[turbo_tasks::function]\n+    fn source(&self) -> Vc<OptionIssueSource> {\n+        Vc::cell(Some(self.source))\n+    }\n }"
        },
        {
            "sha": "abf094d4d257d88f2e326a3f21b6883fb6133182",
            "filename": "turbopack/crates/turbopack-swc-utils/src/emitter.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-swc-utils%2Fsrc%2Femitter.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-swc-utils%2Fsrc%2Femitter.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-swc-utils%2Fsrc%2Femitter.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -51,7 +51,7 @@ impl IssueCollector {\n                 Vc::cell(issue.title.clone()),\n                 issue.message.clone().cell(),\n                 issue.code.clone(),\n-                issue.issue_source.clone(),\n+                issue.issue_source,\n             )\n         })\n     }"
        },
        {
            "sha": "012cff04c7fe3628e9636c325b4f9a3bbcfe5ca3",
            "filename": "turbopack/crates/turbopack-tests/tests/execution.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -44,7 +44,6 @@ use turbopack_core::{\n         ExternalTraced, ExternalType,\n         options::{ImportMap, ImportMapping},\n     },\n-    source::Source,\n };\n use turbopack_ecmascript_runtime::RuntimeType;\n use turbopack_node::{debug::should_debug, evaluate::evaluate};\n@@ -474,7 +473,7 @@ async fn run_test_operation(prepared_test: ResolvedVc<PreparedTest>) -> Result<V\n         jest_entry_asset,\n         path.clone(),\n         Vc::upcast(CommandLineProcessEnv::new()),\n-        test_source.ident(),\n+        Vc::upcast(test_source),\n         asset_context,\n         Vc::upcast(chunking_context),\n         None,"
        },
        {
            "sha": "c7c8fa731d10e5679be03613fa4b9a6090ef786e",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/async-modules/export-all/issues/unexpected export __star__-118256.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fasync-modules%2Fexport-all%2Fissues%2Funexpected%20export%20__star__-118256.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fasync-modules%2Fexport-all%2Fissues%2Funexpected%20export%20__star__-118256.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fasync-modules%2Fexport-all%2Fissues%2Funexpected%20export%20__star__-118256.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-warning - [analysis] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/async-modules/export-all/input/exports.js  unexpected export *\n+warning - [analysis] /turbopack/crates/turbopack-tests/tests/execution/turbopack/async-modules/export-all/input/exports.js  unexpected export *\n+  \n   export * used with module [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/async-modules/export-all/input/exports.js [test] (ecmascript) which is a CommonJS module with exports only available at runtime\n   List all export names manually (`export { a, b, c } from \"...\") or rewrite the module to ESM, to avoid the additional runtime code.`\n   "
        },
        {
            "sha": "ecf82e3138a680d0c39b781a2f93f98de4a57496",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/comptime/issues/__l___Module not found____c__ Can't resolve __c_'.-8f442a.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fcomptime%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'.-8f442a.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fcomptime%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'.-8f442a.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fcomptime%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'.-8f442a.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-error - [resolve] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/comptime/input/index.js  /turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/comptime/input/index.js:4:4  Module not found: Can't resolve './not-existing-file'\n+error - [resolve] /turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/comptime/input/index.js:4:4  Module not found: Can't resolve './not-existing-file'\n   \n        1 | it('importing a not existing file should throw', () => {\n        2 |   // This is a check to make sure that the following tests would fail if they require(\"fail\")"
        },
        {
            "sha": "af25d5325c58f6ec58c5d8acbfbef8b5967f4c65",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/error/issues/Reading source code for parsing failed-18c792.txt",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Ferror%2Fissues%2FReading%20source%20code%20for%20parsing%20failed-18c792.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Ferror%2Fissues%2FReading%20source%20code%20for%20parsing%20failed-18c792.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Ferror%2Fissues%2FReading%20source%20code%20for%20parsing%20failed-18c792.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-error - [load] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/error/input/broken.js  Reading source code for parsing failed\n+error - [load] /turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/error/input/broken.js  Reading source code for parsing failed\n+  \n   An unexpected error happened while trying to read the source code to parse: failed to convert rope into string\n   \n   Caused by:",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/error/issues/Reading source code for parsing failed-aa8c94.txt"
        },
        {
            "sha": "914b8529419011100168aa8f3fd68c1dd0ee5f2c",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/node-default-import/issues/Specified module format (CommonJs) is not matching-267718.txt",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnode-default-import%2Fissues%2FSpecified%20module%20format%20(CommonJs)%20is%20not%20matching-267718.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnode-default-import%2Fissues%2FSpecified%20module%20format%20(CommonJs)%20is%20not%20matching-267718.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnode-default-import%2Fissues%2FSpecified%20module%20format%20(CommonJs)%20is%20not%20matching-267718.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-error - [analysis] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/node-default-import/input/node_modules/esm-package/invalid-exports.cjs  Specified module format (CommonJs) is not matching the module format of the source code (EcmaScript Modules)\n+error - [analysis] /turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/node-default-import/input/node_modules/esm-package/invalid-exports.cjs  Specified module format (CommonJs) is not matching the module format of the source code (EcmaScript Modules)\n+  \n   The CommonJs module format was specified in the package.json that is affecting this source file or by using an special extension, but Ecmascript import/export syntax is used in the source code.\n   The module was automatically converted to an EcmaScript module, but that is in conflict with the specified module format. Either change the \"type\" field in the package.json or replace EcmaScript import/export syntax with CommonJs syntas in the source file.\n   In some cases EcmaScript import/export syntax is added by an transform and isn't actually part of the source code. In these cases revisit transformation options to inject the correct syntax.",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/node-default-import/issues/Specified module format (CommonJs) is not matching-2aff7d.txt"
        },
        {
            "sha": "d9c0c9efb7c8742abef34ae8a698a405bf81b5b9",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/node-default-import/issues/Specified module format (EcmaScript Modules) is no-1a0fe8.txt",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnode-default-import%2Fissues%2FSpecified%20module%20format%20(EcmaScript%20Modules)%20is%20no-1a0fe8.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnode-default-import%2Fissues%2FSpecified%20module%20format%20(EcmaScript%20Modules)%20is%20no-1a0fe8.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnode-default-import%2Fissues%2FSpecified%20module%20format%20(EcmaScript%20Modules)%20is%20no-1a0fe8.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-warning - [analysis] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/node-default-import/input/node_modules/esm-package/invalid-exports.js  Specified module format (EcmaScript Modules) is not matching the module format of the source code (CommonJs)\n+warning - [analysis] /turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/node-default-import/input/node_modules/esm-package/invalid-exports.js  Specified module format (EcmaScript Modules) is not matching the module format of the source code (CommonJs)\n+  \n   The EcmaScript module format was specified in the package.json that is affecting this source file or by using an special extension, but it looks like that CommonJs syntax is used in the source code.\n   Exports made by CommonJs syntax will lead to a runtime error, since the module is in EcmaScript mode. Either change the \"type\" field in the package.json or replace CommonJs syntax with EcmaScript import/export syntax in the source file.\n   ",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/node-default-import/issues/Specified module format (EcmaScript Modules) is no-839e1c.txt"
        },
        {
            "sha": "b86476a8c95a8ae8c0a6a9f26015b451d00f401f",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/cycle/reexport-cycle/issues/__l_Export __c_a__ is a circular re-export__-01c974.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fcycle%2Freexport-cycle%2Fissues%2F__l_Export%20__c_a__%20is%20a%20circular%20re-export__-01c974.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fcycle%2Freexport-cycle%2Fissues%2F__l_Export%20__c_a__%20is%20a%20circular%20re-export__-01c974.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fcycle%2Freexport-cycle%2Fissues%2F__l_Export%20__c_a__%20is%20a%20circular%20re-export__-01c974.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-error - [bindings] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/cycle/reexport-cycle/input/a.js  Export a is a circular re-export\n+error - [bindings] /turbopack/crates/turbopack-tests/tests/execution/turbopack/cycle/reexport-cycle/input/a.js  Export a is a circular re-export\n+  \n   \n   The export\n   "
        },
        {
            "sha": "bbeb4ea983299922f51230fd6db1f5448a47041d",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/cycle/reexport-cycle/issues/__l_Export __c_a__ is a circular re-export__-1122f4.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fcycle%2Freexport-cycle%2Fissues%2F__l_Export%20__c_a__%20is%20a%20circular%20re-export__-1122f4.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fcycle%2Freexport-cycle%2Fissues%2F__l_Export%20__c_a__%20is%20a%20circular%20re-export__-1122f4.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fcycle%2Freexport-cycle%2Fissues%2F__l_Export%20__c_a__%20is%20a%20circular%20re-export__-1122f4.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-error - [bindings] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/cycle/reexport-cycle/input/b.js  Export a is a circular re-export\n+error - [bindings] /turbopack/crates/turbopack-tests/tests/execution/turbopack/cycle/reexport-cycle/input/b.js  Export a is a circular re-export\n+  \n   \n   The export\n   "
        },
        {
            "sha": "f164a728a32a2bd315e9de286c43bb1aa1594af9",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/invalid-export/issues/__l_Export __c_Abc__ doesn't exist in target modul-2cf4be.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Finvalid-export%2Fissues%2F__l_Export%20__c_Abc__%20doesn't%20exist%20in%20target%20modul-2cf4be.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Finvalid-export%2Fissues%2F__l_Export%20__c_Abc__%20doesn't%20exist%20in%20target%20modul-2cf4be.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Finvalid-export%2Fissues%2F__l_Export%20__c_Abc__%20doesn't%20exist%20in%20target%20modul-2cf4be.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-error - [bindings] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/invalid-export/input/invalid-export/index.js  /turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/invalid-export/input/invalid-export/index.js:1:0  Export Abc doesn't exist in target module\n+error - [bindings] /turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/invalid-export/input/invalid-export/index.js:1:0  Export Abc doesn't exist in target module\n   \n          + v----------------------------v\n        1 + import { Abc } from './module'"
        },
        {
            "sha": "777d837f618eddb54d61f7ada51b87178250d608",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/resolving/dynamic-unrelated/issues/Unknown module type-4dabd1.txt",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fresolving%2Fdynamic-unrelated%2Fissues%2FUnknown%20module%20type-4dabd1.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fresolving%2Fdynamic-unrelated%2Fissues%2FUnknown%20module%20type-4dabd1.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fresolving%2Fdynamic-unrelated%2Fissues%2FUnknown%20module%20type-4dabd1.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-error - [process module] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/resolving/dynamic-unrelated/input/sub/README.md  Unknown module type\n+error - [process module] /turbopack/crates/turbopack-tests/tests/execution/turbopack/resolving/dynamic-unrelated/input/sub/README.md  Unknown module type\n+  \n   This module doesn't have an associated type. Use a known file extension, or register a loader for it.\n   \n   Read more: https://nextjs.org/docs/app/api-reference/next-config-js/turbo#webpack-loaders\n\\ No newline at end of file",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/resolving/dynamic-unrelated/issues/Unknown module type-d12243.txt"
        },
        {
            "sha": "d5f9e5b151c8d684e380cdfc81e24ec105a081a5",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/resolving/dynamic-unrelated/issues/Unknown module type-aa753d.txt",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fresolving%2Fdynamic-unrelated%2Fissues%2FUnknown%20module%20type-aa753d.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fresolving%2Fdynamic-unrelated%2Fissues%2FUnknown%20module%20type-aa753d.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fresolving%2Fdynamic-unrelated%2Fissues%2FUnknown%20module%20type-aa753d.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-error - [process module] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/resolving/dynamic-unrelated/input/sub/helper.txt  Unknown module type\n+error - [process module] /turbopack/crates/turbopack-tests/tests/execution/turbopack/resolving/dynamic-unrelated/input/sub/helper.txt  Unknown module type\n+  \n   This module doesn't have an associated type. Use a known file extension, or register a loader for it.\n   \n   Read more: https://nextjs.org/docs/app/api-reference/next-config-js/turbo#webpack-loaders\n\\ No newline at end of file",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/resolving/dynamic-unrelated/issues/Unknown module type-ec9fd4.txt"
        },
        {
            "sha": "6d76b1855bda1f37bb5a594e21fa481b7ff46bc7",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/scope-hoisting/reexport-dynamic-cjs/issues/unexpected export __star__-bffb6d.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fscope-hoisting%2Freexport-dynamic-cjs%2Fissues%2Funexpected%20export%20__star__-bffb6d.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fscope-hoisting%2Freexport-dynamic-cjs%2Fissues%2Funexpected%20export%20__star__-bffb6d.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fscope-hoisting%2Freexport-dynamic-cjs%2Fissues%2Funexpected%20export%20__star__-bffb6d.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-warning - [analysis] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/scope-hoisting/reexport-dynamic-cjs/input/a.js  unexpected export *\n+warning - [analysis] /turbopack/crates/turbopack-tests/tests/execution/turbopack/scope-hoisting/reexport-dynamic-cjs/input/a.js  unexpected export *\n+  \n   export * used with module [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/scope-hoisting/reexport-dynamic-cjs/input/a.js [test] (ecmascript) which is a CommonJS module with exports only available at runtime\n   List all export names manually (`export { a, b, c } from \"...\") or rewrite the module to ESM, to avoid the additional runtime code.`\n   "
        },
        {
            "sha": "b066e93b9a45efbe0f100367ef3544041c26fa34",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/scope-hoisting/reexport-dynamic-cjs/issues/unexpected export __star__-e62f85.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fscope-hoisting%2Freexport-dynamic-cjs%2Fissues%2Funexpected%20export%20__star__-e62f85.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fscope-hoisting%2Freexport-dynamic-cjs%2Fissues%2Funexpected%20export%20__star__-e62f85.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fscope-hoisting%2Freexport-dynamic-cjs%2Fissues%2Funexpected%20export%20__star__-e62f85.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-warning - [analysis] [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/scope-hoisting/reexport-dynamic-cjs/input/b.js  unexpected export *\n+warning - [analysis] /turbopack/crates/turbopack-tests/tests/execution/turbopack/scope-hoisting/reexport-dynamic-cjs/input/b.js  unexpected export *\n+  \n   export * used with module [project]/turbopack/crates/turbopack-tests/tests/execution/turbopack/scope-hoisting/reexport-dynamic-cjs/input/b.js [test] (ecmascript) which is a CommonJS module with exports only available at runtime\n   List all export names manually (`export { a, b, c } from \"...\") or rewrite the module to ESM, to avoid the additional runtime code.`\n   "
        },
        {
            "sha": "163ba3e33b21dd7be1f41a74d0e4ff6ae904899c",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/webpack/scope-hoisting/reexport-star-external-cjs/issues/unexpected export __star__-6bd305.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fwebpack%2Fscope-hoisting%2Freexport-star-external-cjs%2Fissues%2Funexpected%20export%20__star__-6bd305.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fwebpack%2Fscope-hoisting%2Freexport-star-external-cjs%2Fissues%2Funexpected%20export%20__star__-6bd305.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fwebpack%2Fscope-hoisting%2Freexport-star-external-cjs%2Fissues%2Funexpected%20export%20__star__-6bd305.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-warning - [analysis] [project]/turbopack/crates/turbopack-tests/tests/execution/webpack/scope-hoisting/reexport-star-external-cjs/input/a.js  unexpected export *\n+warning - [analysis] /turbopack/crates/turbopack-tests/tests/execution/webpack/scope-hoisting/reexport-star-external-cjs/input/a.js  unexpected export *\n+  \n   export * used with module [project]/turbopack/crates/turbopack-tests/tests/execution/webpack/scope-hoisting/reexport-star-external-cjs/input/a.js [test] (ecmascript) which is a CommonJS module with exports only available at runtime\n   List all export names manually (`export { a, b, c } from \"...\") or rewrite the module to ESM, to avoid the additional runtime code.`\n   "
        },
        {
            "sha": "ec7fe23b4b67cd53bf4979f531f4eaea4dedf5ba",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/comptime/typeof/issues/Specified module format (EcmaScript Modules) is no-729334.txt",
            "status": "renamed",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Ftypeof%2Fissues%2FSpecified%20module%20format%20(EcmaScript%20Modules)%20is%20no-729334.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Ftypeof%2Fissues%2FSpecified%20module%20format%20(EcmaScript%20Modules)%20is%20no-729334.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Ftypeof%2Fissues%2FSpecified%20module%20format%20(EcmaScript%20Modules)%20is%20no-729334.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-warning - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/comptime/typeof/input/esm-specified.mjs  Specified module format (EcmaScript Modules) is not matching the module format of the source code (CommonJs)\n+warning - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/comptime/typeof/input/esm-specified.mjs  Specified module format (EcmaScript Modules) is not matching the module format of the source code (CommonJs)\n+  \n   The EcmaScript module format was specified in the package.json that is affecting this source file or by using an special extension, but it looks like that CommonJs syntax is used in the source code.\n   Exports made by CommonJs syntax will lead to a runtime error, since the module is in EcmaScript mode. Either change the \"type\" field in the package.json or replace CommonJs syntax with EcmaScript import/export syntax in the source file.\n   ",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/snapshot/comptime/typeof/issues/Specified module format (EcmaScript Modules) is no-35f78b.txt"
        },
        {
            "sha": "5dc663e44a15b5c914f89337de806edd79fd9dca",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/issues/__l___lint TP1001__ import(FreeVar(Math)[__quo__ra-139331.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1001__%20import(FreeVar(Math)%5B__quo__ra-139331.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1001__%20import(FreeVar(Math)%5B__quo__ra-139331.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1001__%20import(FreeVar(Math)%5B__quo__ra-139331.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-\u001b[92;4msuggestion - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:12:0  lint TP1001 import(FreeVar(Math)[\"random\"]()) is very dynamic\n+\u001b[92;4msuggestion - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:12:0  lint TP1001 import(FreeVar(Math)[\"random\"]()) is very dynamic\n   \n        8 | child_process.spawnSync('node', [unknown, unknown])\n        9 | "
        },
        {
            "sha": "3b079f1adf0936ec31751b2e73f4752a51073951",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/issues/__l___lint TP1002__ require(FreeVar(Math)[__quo__r-7cec26.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1002__%20require(FreeVar(Math)%5B__quo__r-7cec26.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1002__%20require(FreeVar(Math)%5B__quo__r-7cec26.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1002__%20require(FreeVar(Math)%5B__quo__r-7cec26.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-\u001b[92;4msuggestion - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:10:0  lint TP1002 require(FreeVar(Math)[\"random\"]()) is very dynamic\n+\u001b[92;4msuggestion - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:10:0  lint TP1002 require(FreeVar(Math)[\"random\"]()) is very dynamic\n   \n        6 | child_process.spawnSync(unknown)\n        7 | child_process.spawnSync('node', unknown)"
        },
        {
            "sha": "6bd29cf34f30adea38688638d5f0d98b6dc12f82",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/issues/__l___lint TP1004__ fs.readFileSync(FreeVar(Math)[-0e7ad9.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1004__%20fs.readFileSync(FreeVar(Math)%5B-0e7ad9.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1004__%20fs.readFileSync(FreeVar(Math)%5B-0e7ad9.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1004__%20fs.readFileSync(FreeVar(Math)%5B-0e7ad9.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-\u001b[92;4msuggestion - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:14:0  lint TP1004 fs.readFileSync(FreeVar(Math)[\"random\"]()) is very dynamic\n+\u001b[92;4msuggestion - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:14:0  lint TP1004 fs.readFileSync(FreeVar(Math)[\"random\"]()) is very dynamic\n   \n       10 | require(unknown)\n       11 | "
        },
        {
            "sha": "35a343257c15cfe8579e53fe5824c9d85037d7b7",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/issues/__l___lint TP1004__ fs.readFileSync(FreeVar(Math)[-e62575.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1004__%20fs.readFileSync(FreeVar(Math)%5B-e62575.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1004__%20fs.readFileSync(FreeVar(Math)%5B-e62575.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1004__%20fs.readFileSync(FreeVar(Math)%5B-e62575.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-\u001b[92;4msuggestion - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:15:0  lint TP1004 fs.readFileSync(FreeVar(Math)[\"random\"]()) is very dynamic\n+\u001b[92;4msuggestion - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:15:0  lint TP1004 fs.readFileSync(FreeVar(Math)[\"random\"]()) is very dynamic\n   \n       11 | \n       12 | import(unknown)"
        },
        {
            "sha": "44bbf56e2b81390fc0d5d3e6fdb12593a198a955",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/issues/__l___lint TP1005__ child_process.spawnSync(FreeVa-c7ff8c.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(FreeVa-c7ff8c.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(FreeVa-c7ff8c.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(FreeVa-c7ff8c.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-\u001b[92;4msuggestion - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:6:0  lint TP1005 child_process.spawnSync(FreeVar(Math)[\"random\"]()) is very dynamic\n+\u001b[92;4msuggestion - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:6:0  lint TP1005 child_process.spawnSync(FreeVar(Math)[\"random\"]()) is very dynamic\n   \n        2 | import fs, { readFileSync } from 'node:fs'\n        3 | "
        },
        {
            "sha": "f90fda17708a764ace550a016a2e27349d5da799",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/issues/__l___lint TP1005__ child_process.spawnSync(__-1bf930.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(__-1bf930.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(__-1bf930.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(__-1bf930.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-\u001b[92;4msuggestion - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:8:0  lint TP1005 child_process.spawnSync(\n+\u001b[92;4msuggestion - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:8:0  lint TP1005 child_process.spawnSync(\n   \n        4 | const unknown = Math.random()\n        5 | "
        },
        {
            "sha": "5570c3dea451eb0137c605e6ff9ef988252f4492",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/issues/__l___lint TP1005__ child_process.spawnSync(__quo_-ed2370.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(__quo_-ed2370.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(__quo_-ed2370.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1005__%20child_process.spawnSync(__quo_-ed2370.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-\u001b[92;4msuggestion - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:7:0  lint TP1005 child_process.spawnSync(\"node\", FreeVar(Math)[\"random\"]()) is very dynamic\n+\u001b[92;4msuggestion - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:7:0  lint TP1005 child_process.spawnSync(\"node\", FreeVar(Math)[\"random\"]()) is very dynamic\n   \n        3 | \n        4 | const unknown = Math.random()"
        },
        {
            "sha": "32c9d02ac6f0f1dab9736006547c300fe4ebb1d7",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/issues/__l___lint TP1201__ new URL(FreeVar(Math)[__quo__r-cd3de5.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1201__%20new%20URL(FreeVar(Math)%5B__quo__r-cd3de5.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1201__%20new%20URL(FreeVar(Math)%5B__quo__r-cd3de5.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fdynamic-request%2Fvery-dynamic%2Fissues%2F__l___lint%20TP1201__%20new%20URL(FreeVar(Math)%5B__quo__r-cd3de5.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-\u001b[92;4msuggestion - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:17:0  lint TP1201 new URL(FreeVar(Math)[\"random\"](), import.meta*0*[\"url\"]) is very dynamic\n+\u001b[92;4msuggestion - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/dynamic-request/very-dynamic/input/index.js:17:0  lint TP1201 new URL(FreeVar(Math)[\"random\"](), import.meta*0*[\"url\"]) is very dynamic\n   \n       13 | \n       14 | fs.readFileSync(unknown)"
        },
        {
            "sha": "431bb38dc57a9b1123deaf5a775a3a707a60a50c",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/export-alls/cjs-2/issues/unexpected export __star__-2d66af.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fexport-alls%2Fcjs-2%2Fissues%2Funexpected%20export%20__star__-2d66af.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fexport-alls%2Fcjs-2%2Fissues%2Funexpected%20export%20__star__-2d66af.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fexport-alls%2Fcjs-2%2Fissues%2Funexpected%20export%20__star__-2d66af.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-warning - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/export-alls/cjs-2/input/commonjs.js  unexpected export *\n+warning - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/export-alls/cjs-2/input/commonjs.js  unexpected export *\n+  \n   export * used with module [project]/turbopack/crates/turbopack-tests/tests/snapshot/export-alls/cjs-2/input/commonjs.js [test] (ecmascript) which is a CommonJS module with exports only available at runtime\n   List all export names manually (`export { a, b, c } from \"...\") or rewrite the module to ESM, to avoid the additional runtime code.`\n   "
        },
        {
            "sha": "819a8095fcf3fca09a9c4530d2c47e4c1fc6a8aa",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/export-alls/cjs-script/issues/unexpected export __star__-feb633.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fexport-alls%2Fcjs-script%2Fissues%2Funexpected%20export%20__star__-feb633.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fexport-alls%2Fcjs-script%2Fissues%2Funexpected%20export%20__star__-feb633.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fexport-alls%2Fcjs-script%2Fissues%2Funexpected%20export%20__star__-feb633.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-warning - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/export-alls/cjs-script/input/exported.cjs  unexpected export *\n+warning - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/export-alls/cjs-script/input/exported.cjs  unexpected export *\n+  \n   export * used with module [project]/turbopack/crates/turbopack-tests/tests/snapshot/export-alls/cjs-script/input/exported.cjs [test] (ecmascript) which is a CommonJS module with exports only available at runtime\n   List all export names manually (`export { a, b, c } from \"...\") or rewrite the module to ESM, to avoid the additional runtime code.`\n   "
        },
        {
            "sha": "e5d94a8556e612cd029a7a1076fa37166c01f7cf",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/duplicate-binding/issues/Ecmascript file had an error-3ef93d.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fduplicate-binding%2Fissues%2FEcmascript%20file%20had%20an%20error-3ef93d.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fduplicate-binding%2Fissues%2FEcmascript%20file%20had%20an%20error-3ef93d.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fduplicate-binding%2Fissues%2FEcmascript%20file%20had%20an%20error-3ef93d.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-error - [analysis] [project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/duplicate-binding/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/imports/duplicate-binding/input/index.js:3:16  Ecmascript file had an error\n+error - [analysis] /turbopack/crates/turbopack-tests/tests/snapshot/imports/duplicate-binding/input/index.js:3:16  Ecmascript file had an error\n        1 | import { Table } from './table'\n        2 | \n          +                 v---v"
        },
        {
            "sha": "2346a0b101cd689b9d3f03f8c9e654c3ed6f12e7",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/json/issues/Code generation for chunk item errored-fc1795.txt",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fjson%2Fissues%2FCode%20generation%20for%20chunk%20item%20errored-fc1795.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fjson%2Fissues%2FCode%20generation%20for%20chunk%20item%20errored-fc1795.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fjson%2Fissues%2FCode%20generation%20for%20chunk%20item%20errored-fc1795.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,5 @@\n-error - [code gen] [project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/json/input/invalid.json  Code generation for chunk item errored\n+error - [code gen] /turbopack/crates/turbopack-tests/tests/snapshot/imports/json/input/invalid.json  Code generation for chunk item errored\n+  \n   An error occurred while generating the chunk item [project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/json/input/invalid.json (json)\n   \n   Caused by:"
        },
        {
            "sha": "c21f5c12fade5ee4e7e1babf068dbac8854bbaf3",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/resolve_error_cjs/issues/__l___Module not found____c__ Can't resolve __c_'d-afd823.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fresolve_error_cjs%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'d-afd823.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fresolve_error_cjs%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'d-afd823.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fresolve_error_cjs%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'d-afd823.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-error - [resolve] [project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/resolve_error_cjs/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/imports/resolve_error_cjs/input/index.js:1:12  Module not found: Can't resolve 'does-not-exist/path'\n+error - [resolve] /turbopack/crates/turbopack-tests/tests/snapshot/imports/resolve_error_cjs/input/index.js:1:12  Module not found: Can't resolve 'does-not-exist/path'\n   \n          +             v----------------------------v\n        1 + const dne = require('does-not-exist/path')"
        },
        {
            "sha": "16f7a8b4176ecc755edd38b0c270ecc21b52c7b9",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/resolve_error_esm/issues/__l___Module not found____c__ Can't resolve __c_'d-3d3a88.txt",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fresolve_error_esm%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'d-3d3a88.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fresolve_error_esm%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'d-3d3a88.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fresolve_error_esm%2Fissues%2F__l___Module%20not%20found____c__%20Can't%20resolve%20__c_'d-3d3a88.txt?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -1,4 +1,4 @@\n-error - [resolve] [project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/resolve_error_esm/input/index.js  /turbopack/crates/turbopack-tests/tests/snapshot/imports/resolve_error_esm/input/index.js:1:0  Module not found: Can't resolve 'does-not-exist/path'\n+error - [resolve] /turbopack/crates/turbopack-tests/tests/snapshot/imports/resolve_error_esm/input/index.js:1:0  Module not found: Can't resolve 'does-not-exist/path'\n   \n          + v-----------------------------------v\n        1 + import dne from 'does-not-exist/path'"
        },
        {
            "sha": "22d8ddf9f2f4a4c0ba690dc5ca96591dc3c90970",
            "filename": "turbopack/crates/turbopack/src/lib.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -36,7 +36,7 @@ use turbopack_core::{\n     context::{AssetContext, ProcessResult},\n     environment::{Environment, ExecutionEnvironment, NodeJsEnvironment},\n     ident::Layer,\n-    issue::{IssueExt, StyledString, module::ModuleIssue},\n+    issue::{IssueExt, IssueSource, StyledString, module::ModuleIssue},\n     module::Module,\n     output::OutputAsset,\n     raw_module::RawModule,\n@@ -599,14 +599,14 @@ async fn process_default_internal(\n                             Some(module_type) => {\n                                 ModuleIssue {\n                                     ident: ident.to_resolved().await?,\n-                                    title: StyledString::Text(\"Invalid module type\".into())\n+                                    title: StyledString::Text(rcstr!(\"Invalid module type\"))\n                                         .resolved_cell(),\n-                                    description: StyledString::Text(\n+                                    description: StyledString::Text(rcstr!(\n                                         \"The module type must be Ecmascript or Typescript to add \\\n                                          Ecmascript transforms\"\n-                                            .into(),\n-                                    )\n+                                    ))\n                                     .resolved_cell(),\n+                                    source: Some(IssueSource::from_source_only(current_source)),\n                                 }\n                                 .resolved_cell()\n                                 .emit();\n@@ -615,14 +615,14 @@ async fn process_default_internal(\n                             None => {\n                                 ModuleIssue {\n                                     ident: ident.to_resolved().await?,\n-                                    title: StyledString::Text(\"Missing module type\".into())\n+                                    title: StyledString::Text(rcstr!(\"Missing module type\"))\n                                         .resolved_cell(),\n-                                    description: StyledString::Text(\n+                                    description: StyledString::Text(rcstr!(\n                                         \"The module type effect must be applied before adding \\\n                                          Ecmascript transforms\"\n-                                            .into(),\n-                                    )\n+                                    ))\n                                     .resolved_cell(),\n+                                    source: Some(IssueSource::from_source_only(current_source)),\n                                 }\n                                 .resolved_cell()\n                                 .emit();"
        },
        {
            "sha": "8efec7fa8eec0b39daf14120a5b684ce5d16f3f5",
            "filename": "turbopack/crates/turbopack/src/unsupported_sass.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Funsupported_sass.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a8ae109b3363f74356e04893d3bbf2deaa6b0d05/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Funsupported_sass.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Funsupported_sass.rs?ref=a8ae109b3363f74356e04893d3bbf2deaa6b0d05",
            "patch": "@@ -62,6 +62,8 @@ impl AfterResolvePlugin for UnsupportedSassResolvePlugin {\n \n #[turbo_tasks::value(shared)]\n struct UnsupportedSassModuleIssue {\n+    // TODO(PACK-4879): The `file_path` is incorrect for this issue and we should supply\n+    // detailed source information.\n     file_path: FileSystemPath,\n     request: ResolvedVc<Request>,\n }"
        }
    ],
    "stats": {
        "total": 1415,
        "additions": 744,
        "deletions": 671
    }
}