{
    "author": "kdy1",
    "message": "build: Fix minifier options for webpack builds (#78717)\n\n### What?\n\nAdjust the options for the SWC minifier to disable character frequency analysis for webpack builds correctly.\n\n### Why?\n\nhttps://github.com/vercel/next.js/pull/77887 only adjusted the option for rspack.\n\n### How?\n\nFollow-up of https://github.com/vercel/next.js/pull/77887",
    "sha": "52233c12ad3acada2dd8d0b525fea8f5f30099f3",
    "files": [
        {
            "sha": "08c1c4ac45b88d9c43bcfb4eed2ff2196db1187e",
            "filename": "packages/next/src/build/webpack-config.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/52233c12ad3acada2dd8d0b525fea8f5f30099f3/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/52233c12ad3acada2dd8d0b525fea8f5f30099f3/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts?ref=52233c12ad3acada2dd8d0b525fea8f5f30099f3",
            "patch": "@@ -1207,7 +1207,10 @@ export default async function getBaseWebpackConfig(\n               // @ts-ignore No typings yet\n               const { MinifyPlugin } =\n                 require('./webpack/plugins/minify-webpack-plugin/src/index.js') as typeof import('./webpack/plugins/minify-webpack-plugin/src')\n-              new MinifyPlugin({ noMangling }).apply(compiler)\n+              new MinifyPlugin({\n+                noMangling,\n+                disableCharFreq: !isClient,\n+              }).apply(compiler)\n             },\n             // Minify CSS\n             (compiler: webpack.Compiler) => {"
        },
        {
            "sha": "31e92d242ed108faca354d5c11a9a7845b8d0d5d",
            "filename": "packages/next/src/build/webpack/plugins/minify-webpack-plugin/src/index.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/52233c12ad3acada2dd8d0b525fea8f5f30099f3/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fminify-webpack-plugin%2Fsrc%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/52233c12ad3acada2dd8d0b525fea8f5f30099f3/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fminify-webpack-plugin%2Fsrc%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fminify-webpack-plugin%2Fsrc%2Findex.ts?ref=52233c12ad3acada2dd8d0b525fea8f5f30099f3",
            "patch": "@@ -32,7 +32,9 @@ function buildError(error: any, file: string) {\n const debugMinify = process.env.NEXT_DEBUG_MINIFY\n \n export class MinifyPlugin {\n-  constructor(private options: { noMangling?: boolean }) {}\n+  constructor(\n+    private options: { noMangling?: boolean; disableCharFreq?: boolean }\n+  ) {}\n \n   async optimize(\n     compiler: any,\n@@ -47,7 +49,11 @@ export class MinifyPlugin {\n       RawSource: typeof sources.RawSource\n     }\n   ) {\n-    const mangle = !this.options.noMangling\n+    const mangle = this.options.noMangling\n+      ? false\n+      : {\n+          disableCharFreq: !!this.options.disableCharFreq,\n+        }\n     const compilationSpan =\n       getCompilationSpan(compilation)! || getCompilationSpan(compiler)\n "
        }
    ],
    "stats": {
        "total": 15,
        "additions": 12,
        "deletions": 3
    }
}