{
    "author": "huozhi",
    "message": "[dev-overlay] replace the react hydration error link with nextjs one (#76438)",
    "sha": "400a1814b490cdfc8e0c2da6868737dd800acd0e",
    "files": [
        {
            "sha": "529d03db72646e62685bcd26b7b0930249c30890",
            "filename": "packages/next/src/client/components/is-hydration-error.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/400a1814b490cdfc8e0c2da6868737dd800acd0e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fis-hydration-error.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/400a1814b490cdfc8e0c2da6868737dd800acd0e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fis-hydration-error.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fis-hydration-error.ts?ref=400a1814b490cdfc8e0c2da6868737dd800acd0e",
            "patch": "@@ -10,7 +10,10 @@ const reactHydrationStartMessages = [\n   `A tree hydrated but some attributes of the server rendered HTML didn't match the client properties. This won't be patched up. This can happen if a SSR-ed Client Component used:`,\n ]\n \n-const reactHydrationErrorDocLink = 'https://react.dev/link/hydration-mismatch'\n+export const REACT_HYDRATION_ERROR_LINK =\n+  'https://react.dev/link/hydration-mismatch'\n+export const NEXTJS_HYDRATION_ERROR_LINK =\n+  'https://nextjs.org/docs/messages/react-hydration-error'\n \n export const getDefaultHydrationErrorMessage = () => {\n   return reactUnifiedMismatchWarning\n@@ -48,7 +51,6 @@ export function testReactHydrationWarning(msg: string): boolean {\n \n export function getHydrationErrorStackInfo(rawMessage: string): {\n   message: string | null\n-  link?: string\n   stack?: string\n   diff?: string\n } {\n@@ -59,7 +61,6 @@ export function getHydrationErrorStackInfo(rawMessage: string): {\n   if (!isReactHydrationErrorMessage(rawMessage) && !isReactHydrationWarning) {\n     return {\n       message: null,\n-      link: '',\n       stack: rawMessage,\n       diff: '',\n     }\n@@ -69,7 +70,6 @@ export function getHydrationErrorStackInfo(rawMessage: string): {\n     const [message, diffLog] = rawMessage.split('\\n\\n')\n     return {\n       message: message.trim(),\n-      link: reactHydrationErrorDocLink,\n       stack: '',\n       diff: (diffLog || '').trim(),\n     }\n@@ -78,7 +78,7 @@ export function getHydrationErrorStackInfo(rawMessage: string): {\n   const firstLineBreak = rawMessage.indexOf('\\n')\n   rawMessage = rawMessage.slice(firstLineBreak + 1).trim()\n \n-  const [message, trailing] = rawMessage.split(`${reactHydrationErrorDocLink}`)\n+  const [message, trailing] = rawMessage.split(`${REACT_HYDRATION_ERROR_LINK}`)\n   const trimmedMessage = message.trim()\n   // React built-in hydration diff starts with a newline, checking if length is > 1\n   if (trailing && trailing.length > 1) {\n@@ -95,14 +95,12 @@ export function getHydrationErrorStackInfo(rawMessage: string): {\n \n     return {\n       message: trimmedMessage,\n-      link: reactHydrationErrorDocLink,\n       diff: diffs.join('\\n'),\n       stack: stacks.join('\\n'),\n     }\n   } else {\n     return {\n       message: trimmedMessage,\n-      link: reactHydrationErrorDocLink,\n       stack: trailing, // without hydration diff\n     }\n   }"
        },
        {
            "sha": "b51661845815aa3e82355b011e97d7b6112432d0",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/error-overlay-toolbar/docs-link-button.tsx",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/400a1814b490cdfc8e0c2da6868737dd800acd0e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fdocs-link-button.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/400a1814b490cdfc8e0c2da6868737dd800acd0e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fdocs-link-button.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fdocs-link-button.tsx?ref=400a1814b490cdfc8e0c2da6868737dd800acd0e",
            "patch": "@@ -1,3 +1,7 @@\n+import {\n+  NEXTJS_HYDRATION_ERROR_LINK,\n+  REACT_HYDRATION_ERROR_LINK,\n+} from '../../../../../is-hydration-error'\n import { parseUrlFromText } from '../../../utils/parse-url-from-text'\n \n const docsURLAllowlist = ['https://nextjs.org', 'https://react.dev']\n@@ -13,7 +17,14 @@ function getDocsURLFromErrorMessage(text: string): string | null {\n     return null\n   }\n \n-  return urls[0]\n+  const href = urls[0]\n+\n+  // Replace react hydration error link with nextjs hydration error link\n+  if (href === REACT_HYDRATION_ERROR_LINK) {\n+    return NEXTJS_HYDRATION_ERROR_LINK\n+  }\n+\n+  return href\n }\n \n export function DocsLinkButton({ errorMessage }: { errorMessage: string }) {"
        },
        {
            "sha": "e7bbb1d196f658e503756b060cc588eab4dcfaed",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/container/errors.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/400a1814b490cdfc8e0c2da6868737dd800acd0e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcontainer%2Ferrors.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/400a1814b490cdfc8e0c2da6868737dd800acd0e/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcontainer%2Ferrors.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcontainer%2Ferrors.tsx?ref=400a1814b490cdfc8e0c2da6868737dd800acd0e",
            "patch": "@@ -15,6 +15,7 @@ import {\n } from '../../../errors/console-error'\n import { extractNextErrorCode } from '../../../../../lib/error-telemetry-utils'\n import { ErrorOverlayLayout } from '../components/errors/error-overlay-layout/error-overlay-layout'\n+import { NEXTJS_HYDRATION_ERROR_LINK } from '../../../is-hydration-error'\n import type { ReadyRuntimeError } from '../../utils/get-error-by-type'\n import type { ErrorBaseProps } from '../components/errors/error-overlay/error-overlay'\n \n@@ -180,7 +181,9 @@ export function Errors({\n             id=\"nextjs__container_errors__link\"\n             className=\"nextjs__container_errors__link\"\n           >\n-            <HotlinkedText text=\"See more info here: https://nextjs.org/docs/messages/react-hydration-error\" />\n+            <HotlinkedText\n+              text={`See more info here: ${NEXTJS_HYDRATION_ERROR_LINK}`}\n+            />\n           </p>\n         ) : null}\n       </div>"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 21,
        "deletions": 9
    }
}