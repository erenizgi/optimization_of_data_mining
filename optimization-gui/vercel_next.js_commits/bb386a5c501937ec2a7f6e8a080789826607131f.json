{
    "author": "sokra",
    "message": "Turbopack: use unstable sort for better performance (#78764)\n\n### What?\n\nSmall performance improvement by using unstable sort",
    "sha": "bb386a5c501937ec2a7f6e8a080789826607131f",
    "files": [
        {
            "sha": "9a979775c025ff51efa57eff20f9b7c67e55f1ad",
            "filename": "turbopack/crates/turbo-persistence/src/collector.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/bb386a5c501937ec2a7f6e8a080789826607131f/turbopack%2Fcrates%2Fturbo-persistence%2Fsrc%2Fcollector.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/bb386a5c501937ec2a7f6e8a080789826607131f/turbopack%2Fcrates%2Fturbo-persistence%2Fsrc%2Fcollector.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-persistence%2Fsrc%2Fcollector.rs?ref=bb386a5c501937ec2a7f6e8a080789826607131f",
            "patch": "@@ -93,7 +93,7 @@ impl<K: StoreKey, const SIZE_SHIFT: usize> Collector<K, SIZE_SHIFT> {\n     /// Sorts the entries and returns them along with the total key and value sizes. This doesn't\n     /// clear the entries.\n     pub fn sorted(&mut self) -> (&[CollectorEntry<K>], usize, usize) {\n-        self.entries.sort_by(|a, b| a.key.cmp(&b.key));\n+        self.entries.sort_unstable_by(|a, b| a.key.cmp(&b.key));\n         (&self.entries, self.total_key_size, self.total_value_size)\n     }\n "
        },
        {
            "sha": "70392805708892c4ccb21ccbbde847d28545dced",
            "filename": "turbopack/crates/turbo-persistence/src/write_batch.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/bb386a5c501937ec2a7f6e8a080789826607131f/turbopack%2Fcrates%2Fturbo-persistence%2Fsrc%2Fwrite_batch.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/bb386a5c501937ec2a7f6e8a080789826607131f/turbopack%2Fcrates%2Fturbo-persistence%2Fsrc%2Fwrite_batch.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-persistence%2Fsrc%2Fwrite_batch.rs?ref=bb386a5c501937ec2a7f6e8a080789826607131f",
            "patch": "@@ -291,7 +291,7 @@ impl<K: StoreKey + Send + Sync, const FAMILIES: usize> WriteBatch<K, FAMILIES> {\n \n         shared_error.into_inner()?;\n         let seq = self.current_sequence_number.load(Ordering::SeqCst);\n-        new_sst_files.sort_by_key(|(seq, _)| *seq);\n+        new_sst_files.sort_unstable_by_key(|(seq, _)| *seq);\n         Ok(FinishResult {\n             sequence_number: seq,\n             new_sst_files,"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}