{
    "author": "mischnic",
    "message": "Turbopack: keep side-effect-full imports (#76545)\n\nThis was already fixed by https://github.com/vercel/next.js/pull/77640 in the meantime\r\n\r\nAdds a test for https://github.com/vercel/next.js/issues/76464\r\n\r\n```js\r\n// Inside a sideEffect: free module, ...\r\n\r\n// ...imports without any bindings are completely dropped, even \r\n// if they reference modules which have `sideEffects: true`\r\nimport \"./this-module-has-sideEffects\";\r\n```",
    "sha": "a03e275806a9bf6ef46f3c42a077765fe456b579",
    "files": [
        {
            "sha": "a1dabd354d482ef6c3f3d58024897fe979b9ab70",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/side-effects-optimization/side-effect-import/input/index.js",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Findex.js?ref=a03e275806a9bf6ef46f3c42a077765fe456b579",
            "patch": "@@ -0,0 +1,7 @@\n+import { Parent } from './ui/src/index'\n+\n+it(\"should retain side effect-full imports\", () => {\n+  expect(Parent()).toBe(\"Parent Child\")\n+  expect(globalThis.sideEffectExecuted).toBe(true)\n+});\n+"
        },
        {
            "sha": "13ff232cab4c8b02ef367365ec84db20dced0eb7",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/side-effects-optimization/side-effect-import/input/ui/package.json",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fpackage.json?ref=a03e275806a9bf6ef46f3c42a077765fe456b579",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"sideEffects\": [\n+    \"./src/side-effect.js\"\n+  ]\n+}"
        },
        {
            "sha": "78811445b2c92ffc82b311447ba9b65f6a7c4f66",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/side-effects-optimization/side-effect-import/input/ui/src/Child.js",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2FChild.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2FChild.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2FChild.js?ref=a03e275806a9bf6ef46f3c42a077765fe456b579",
            "patch": "@@ -0,0 +1,6 @@\n+import './side-effect.js'\n+\n+export function Child() {\n+  return \"Child\"\n+}\n+export { Three } from './test'"
        },
        {
            "sha": "f83dc597fec2e2381bb0431a2e2baa27f79be1b4",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/side-effects-optimization/side-effect-import/input/ui/src/index.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Findex.js?ref=a03e275806a9bf6ef46f3c42a077765fe456b579",
            "patch": "@@ -0,0 +1,5 @@\n+import { Child } from './Child'\n+\n+export function Parent() {\n+  return \"Parent \" + Child();\n+}"
        },
        {
            "sha": "d829fdd264b35121456208effc031fe8c5449f8e",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/side-effects-optimization/side-effect-import/input/ui/src/side-effect.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Fside-effect.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Fside-effect.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Fside-effect.js?ref=a03e275806a9bf6ef46f3c42a077765fe456b579",
            "patch": "@@ -0,0 +1 @@\n+globalThis.sideEffectExecuted = true;"
        },
        {
            "sha": "7d950d75b4ca81b49e57a03e4482ef91b442f418",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/side-effects-optimization/side-effect-import/input/ui/src/test.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Ftest.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Ftest.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Finput%2Fui%2Fsrc%2Ftest.js?ref=a03e275806a9bf6ef46f3c42a077765fe456b579",
            "patch": "@@ -0,0 +1 @@\n+export const Three = 3"
        },
        {
            "sha": "af13697f09f935e9c18c212c95296a9187fde3eb",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/side-effects-optimization/side-effect-import/options.json",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Foptions.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a03e275806a9bf6ef46f3c42a077765fe456b579/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Foptions.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fside-effects-optimization%2Fside-effect-import%2Foptions.json?ref=a03e275806a9bf6ef46f3c42a077765fe456b579",
            "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"treeShakingMode\": \"reexports-only\"\n+}"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 28,
        "deletions": 0
    }
}