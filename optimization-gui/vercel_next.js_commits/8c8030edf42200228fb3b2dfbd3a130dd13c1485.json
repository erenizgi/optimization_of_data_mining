{
    "author": "sokra",
    "message": "Turbopack: apply side effects false removal on all module types (#86133)\n\n### What?\n\nfix the side effects false handling for other module types. Before it did only work for ecmascript modules.",
    "sha": "8c8030edf42200228fb3b2dfbd3a130dd13c1485",
    "files": [
        {
            "sha": "8c08dfbef55a9929acafa9bdf3ef40653e0cf2c0",
            "filename": "crates/next-core/src/hmr_entry.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/crates%2Fnext-core%2Fsrc%2Fhmr_entry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/crates%2Fnext-core%2Fsrc%2Fhmr_entry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fhmr_entry.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -70,6 +70,11 @@ impl Module for HmrEntryModule {\n                 .await?,\n         )]))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(self: Vc<Self>, _: Vc<Glob>) -> Vc<bool> {\n+        Vc::cell(false)\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -105,11 +110,6 @@ impl EcmascriptChunkPlaceable for HmrEntryModule {\n     fn get_exports(self: Vc<Self>) -> Vc<EcmascriptExports> {\n         EcmascriptExports::None.cell()\n     }\n-\n-    #[turbo_tasks::function]\n-    fn is_marked_as_side_effect_free(self: Vc<Self>, _: Vc<Glob>) -> Vc<bool> {\n-        Vc::cell(false)\n-    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "e376057349dff32bb6a729ad5eb2b96fd89813ad",
            "filename": "crates/next-core/src/raw_ecmascript_module.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -92,6 +92,14 @@ impl Module for RawEcmascriptModule {\n     fn ident(&self) -> Vc<AssetIdent> {\n         self.source.ident().with_modifier(rcstr!(\"raw\"))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(false)\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -126,11 +134,6 @@ impl EcmascriptChunkPlaceable for RawEcmascriptModule {\n     fn get_exports(&self) -> Vc<EcmascriptExports> {\n         EcmascriptExports::CommonJs.cell()\n     }\n-\n-    #[turbo_tasks::function]\n-    fn is_marked_as_side_effect_free(&self, _side_effect_free_packages: Vc<Glob>) -> Vc<bool> {\n-        Vc::cell(false)\n-    }\n }\n \n #[turbo_tasks::value]"
        },
        {
            "sha": "5afcbeef56b060c45f94dbd15de412bb859d7551",
            "filename": "turbopack/crates/turbopack-core/src/module.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -1,5 +1,6 @@\n use turbo_rcstr::RcStr;\n use turbo_tasks::{ResolvedVc, TaskInput, ValueToString, Vc};\n+use turbo_tasks_fs::glob::Glob;\n \n use crate::{asset::Asset, ident::AssetIdent, reference::ModuleReferences};\n \n@@ -38,6 +39,15 @@ pub trait Module: Asset {\n     fn is_self_async(self: Vc<Self>) -> Vc<bool> {\n         Vc::cell(false)\n     }\n+\n+    /// Returns true if the module is marked as side effect free in package.json or by other means.\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(false)\n+    }\n }\n \n #[turbo_tasks::value_trait]"
        },
        {
            "sha": "d9f810b120af5761bc73cd6469cda1539e6bb292",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/placeable.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -31,16 +31,6 @@ pub trait EcmascriptChunkPlaceable: ChunkableModule + Module + Asset {\n     fn get_async_module(self: Vc<Self>) -> Vc<OptionAsyncModule> {\n         Vc::cell(None)\n     }\n-    #[turbo_tasks::function]\n-    async fn is_marked_as_side_effect_free(\n-        self: Vc<Self>,\n-        side_effect_free_packages: Vc<Glob>,\n-    ) -> Result<Vc<bool>> {\n-        Ok(is_marked_as_side_effect_free(\n-            self.ident().path().owned().await?,\n-            side_effect_free_packages,\n-        ))\n-    }\n }\n \n #[turbo_tasks::value]"
        },
        {
            "sha": "2379e82f46af45fb8f32ebf47561764d8d298cd0",
            "filename": "turbopack/crates/turbopack-ecmascript/src/inlined_bytes_module.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -44,6 +44,14 @@ impl Module for InlinedBytesJsModule {\n             .ident()\n             .with_modifier(rcstr!(\"static bytes in ecmascript\"))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -75,11 +83,6 @@ impl EcmascriptChunkPlaceable for InlinedBytesJsModule {\n     fn get_exports(&self) -> Vc<EcmascriptExports> {\n         EcmascriptExports::Value.cell()\n     }\n-\n-    #[turbo_tasks::function]\n-    fn is_marked_as_side_effect_free(&self, _side_effect_free_packages: Vc<Glob>) -> Vc<bool> {\n-        Vc::cell(true)\n-    }\n }\n \n #[turbo_tasks::value]"
        },
        {
            "sha": "0993b8a5b1fcd1f4fc99911e15507ff11cefbca4",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -749,6 +749,23 @@ impl Module for EcmascriptModuleAsset {\n             Ok(Vc::cell(false))\n         }\n     }\n+\n+    #[turbo_tasks::function]\n+    async fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        side_effect_free_packages: Vc<Glob>,\n+    ) -> Result<Vc<bool>> {\n+        // Check package.json first, so that we can skip parsing the module if it's marked that way.\n+        let pkg_side_effect_free = is_marked_as_side_effect_free(\n+            self.ident().path().owned().await?,\n+            side_effect_free_packages,\n+        );\n+        Ok(if *pkg_side_effect_free.await? {\n+            pkg_side_effect_free\n+        } else {\n+            Vc::cell(self.analyze().await?.has_side_effect_free_directive)\n+        })\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -785,23 +802,6 @@ impl EcmascriptChunkPlaceable for EcmascriptModuleAsset {\n     async fn get_async_module(self: Vc<Self>) -> Result<Vc<OptionAsyncModule>> {\n         Ok(*self.analyze().await?.async_module)\n     }\n-\n-    #[turbo_tasks::function]\n-    async fn is_marked_as_side_effect_free(\n-        self: Vc<Self>,\n-        side_effect_free_packages: Vc<Glob>,\n-    ) -> Result<Vc<bool>> {\n-        // Check package.json first, so that we can skip parsing the module if it's marked that way.\n-        let pkg_side_effect_free = is_marked_as_side_effect_free(\n-            self.ident().path().owned().await?,\n-            side_effect_free_packages,\n-        );\n-        Ok(if *pkg_side_effect_free.await? {\n-            pkg_side_effect_free\n-        } else {\n-            Vc::cell(self.analyze().await?.has_side_effect_free_directive)\n-        })\n-    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "15c18e86110a7f702f6079840ead491e7a96b6ae",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/external_module.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -298,6 +298,14 @@ impl Module for CachedExternalModule {\n                 || self.external_type == CachedExternalType::Script,\n         ))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(false)\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -357,14 +365,6 @@ impl EcmascriptChunkPlaceable for CachedExternalModule {\n             },\n         )\n     }\n-\n-    #[turbo_tasks::function]\n-    fn is_marked_as_side_effect_free(\n-        self: Vc<Self>,\n-        _side_effect_free_packages: Vc<Glob>,\n-    ) -> Vc<bool> {\n-        Vc::cell(false)\n-    }\n }\n \n #[turbo_tasks::value]"
        },
        {
            "sha": "4a22e2b82322a34b24528331fd7b57e91a76fd7b",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/facade/module.rs",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -175,6 +175,22 @@ impl Module for EcmascriptModuleFacadeModule {\n             .await?;\n         Ok(is_self_async)\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        &self,\n+        side_effect_free_packages: Vc<Glob>,\n+    ) -> Result<Vc<bool>> {\n+        Ok(match self.part {\n+            ModulePart::Facade => self\n+                .module\n+                .is_marked_as_side_effect_free(side_effect_free_packages),\n+            ModulePart::RenamedExport { .. } | ModulePart::RenamedNamespace { .. } => {\n+                Vc::cell(true)\n+            }\n+            _ => bail!(\"Unexpected ModulePart for EcmascriptModuleFacadeModule\"),\n+        })\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -335,22 +351,6 @@ impl EcmascriptChunkPlaceable for EcmascriptModuleFacadeModule {\n         Ok(EcmascriptExports::EsmExports(exports).cell())\n     }\n \n-    #[turbo_tasks::function]\n-    fn is_marked_as_side_effect_free(\n-        &self,\n-        side_effect_free_packages: Vc<Glob>,\n-    ) -> Result<Vc<bool>> {\n-        Ok(match self.part {\n-            ModulePart::Facade => self\n-                .module\n-                .is_marked_as_side_effect_free(side_effect_free_packages),\n-            ModulePart::RenamedExport { .. } | ModulePart::RenamedNamespace { .. } => {\n-                Vc::cell(true)\n-            }\n-            _ => bail!(\"Unexpected ModulePart for EcmascriptModuleFacadeModule\"),\n-        })\n-    }\n-\n     #[turbo_tasks::function]\n     async fn get_async_module(self: Vc<Self>) -> Result<Vc<OptionAsyncModule>> {\n         Ok(Vc::cell(Some(self.async_module().to_resolved().await?)))"
        },
        {
            "sha": "b43d4f638833b5b45dee8650a8afc989b58f7e9f",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/locals/module.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -66,6 +66,12 @@ impl Module for EcmascriptModuleLocalsModule {\n             Ok(Vc::cell(false))\n         }\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(&self, side_effect_free_packages: Vc<Glob>) -> Vc<bool> {\n+        self.module\n+            .is_marked_as_side_effect_free(side_effect_free_packages)\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -164,12 +170,6 @@ impl EcmascriptChunkPlaceable for EcmascriptModuleLocalsModule {\n         Ok(EcmascriptExports::EsmExports(exports).cell())\n     }\n \n-    #[turbo_tasks::function]\n-    fn is_marked_as_side_effect_free(&self, side_effect_free_packages: Vc<Glob>) -> Vc<bool> {\n-        self.module\n-            .is_marked_as_side_effect_free(side_effect_free_packages)\n-    }\n-\n     #[turbo_tasks::function]\n     fn get_async_module(&self) -> Vc<OptionAsyncModule> {\n         self.module.get_async_module()"
        },
        {
            "sha": "65646da7717d9e01e188191e1708765c634e2ebc",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/asset.rs",
            "status": "modified",
            "additions": 13,
            "deletions": 15,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -346,6 +346,19 @@ impl Module for EcmascriptModulePartAsset {\n \n         Ok(analyze.references())\n     }\n+\n+    #[turbo_tasks::function]\n+    async fn is_marked_as_side_effect_free(\n+        &self,\n+        side_effect_free_packages: Vc<Glob>,\n+    ) -> Result<Vc<bool>> {\n+        match self.part {\n+            ModulePart::Exports | ModulePart::Export(..) => Ok(Vc::cell(true)),\n+            _ => Ok(self\n+                .full_module\n+                .is_marked_as_side_effect_free(side_effect_free_packages)),\n+        }\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -362,21 +375,6 @@ impl EcmascriptChunkPlaceable for EcmascriptModulePartAsset {\n     async fn get_exports(self: Vc<Self>) -> Result<Vc<EcmascriptExports>> {\n         Ok(*self.analyze().await?.exports)\n     }\n-\n-    #[turbo_tasks::function]\n-    async fn is_marked_as_side_effect_free(\n-        self: Vc<Self>,\n-        side_effect_free_packages: Vc<Glob>,\n-    ) -> Result<Vc<bool>> {\n-        let this = self.await?;\n-\n-        match this.part {\n-            ModulePart::Exports | ModulePart::Export(..) => Ok(Vc::cell(true)),\n-            _ => Ok(this\n-                .full_module\n-                .is_marked_as_side_effect_free(side_effect_free_packages)),\n-        }\n-    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "7456d8e927f11d076342ae472ce02d0e2ac9f5c8",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/side_effect_module.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -107,6 +107,11 @@ impl Module for SideEffectsModule {\n \n         Ok(Vc::cell(references))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(self: Vc<Self>, _: Vc<Glob>) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -123,11 +128,6 @@ impl EcmascriptChunkPlaceable for SideEffectsModule {\n     fn get_exports(&self) -> Vc<EcmascriptExports> {\n         self.resolved_as.get_exports()\n     }\n-\n-    #[turbo_tasks::function]\n-    fn is_marked_as_side_effect_free(self: Vc<Self>, _: Vc<Glob>) -> Vc<bool> {\n-        Vc::cell(true)\n-    }\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "d2ca5e36b6eb88fe5f594909a384be6907d78747",
            "filename": "turbopack/crates/turbopack-json/src/lib.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 5,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -52,6 +52,14 @@ impl Module for JsonModuleAsset {\n     fn ident(&self) -> Vc<AssetIdent> {\n         self.source.ident().with_modifier(rcstr!(\"json\"))\n     }\n+\n+    #[turbo_tasks::function]\n+    fn is_marked_as_side_effect_free(\n+        self: Vc<Self>,\n+        _side_effect_free_packages: Vc<Glob>,\n+    ) -> Vc<bool> {\n+        Vc::cell(true)\n+    }\n }\n \n #[turbo_tasks::value_impl]\n@@ -83,11 +91,6 @@ impl EcmascriptChunkPlaceable for JsonModuleAsset {\n     fn get_exports(&self) -> Vc<EcmascriptExports> {\n         EcmascriptExports::Value.cell()\n     }\n-\n-    #[turbo_tasks::function]\n-    fn is_marked_as_side_effect_free(&self, _side_effect_free_packages: Vc<Glob>) -> Vc<bool> {\n-        Vc::cell(true)\n-    }\n }\n \n #[turbo_tasks::value]"
        },
        {
            "sha": "06b26ea648429614f5e120ec1fff172b2cbbcd56",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/cjs.js",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fcjs.js",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fcjs.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fcjs.js?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1,4 @@\n+import used from './used.cjs'\n+import unused from './unused.cjs'\n+\n+export { used }"
        },
        {
            "sha": "45d4e407c1520a08e73cce5ed8292afb0f326d79",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/index.js",
            "status": "added",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Findex.js?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1,24 @@\n+import { used } from './json.js'\n+import { used as used2 } from './js.js'\n+import { used as used3 } from './cjs.js'\n+\n+it('should tree shake all unused modules', () => {\n+  expect(used).toEqual({ used: true })\n+  expect(used2).toBe(true)\n+  expect(used3).toBe(true)\n+\n+  const modules = Array.from(__turbopack_modules__.keys())\n+  expect(modules).toContainEqual(expect.stringMatching(/input\\/json\\.js/))\n+  expect(modules).toContainEqual(expect.stringMatching(/input\\/used\\.json/))\n+  expect(modules).not.toContainEqual(\n+    expect.stringMatching(/input\\/unused\\.json/)\n+  )\n+  expect(modules).toContainEqual(expect.stringMatching(/input\\/js\\.js/))\n+  expect(modules).toContainEqual(expect.stringMatching(/input\\/used\\.js/))\n+  expect(modules).not.toContainEqual(expect.stringMatching(/input\\/unused\\.js/))\n+  expect(modules).toContainEqual(expect.stringMatching(/input\\/cjs\\.js/))\n+  expect(modules).toContainEqual(expect.stringMatching(/input\\/used\\.cjs/))\n+  expect(modules).not.toContainEqual(\n+    expect.stringMatching(/input\\/unused\\.cjs/)\n+  )\n+})"
        },
        {
            "sha": "8c02319c6df846bd8976fe4262241b757bd56c31",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/js.js",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fjs.js",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fjs.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fjs.js?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1,4 @@\n+import used from './used.js'\n+import unused from './unused.js'\n+\n+export { used }"
        },
        {
            "sha": "626a65af99122018ac9cc84789df55d95d313b45",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/json.js",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fjson.js",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fjson.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fjson.js?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1,4 @@\n+import used from './used.json'\n+import unused from './unused.json'\n+\n+export { used }"
        },
        {
            "sha": "e640fa695bf35f6f4bf07c45dbe3c7f836de6338",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/package.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fpackage.json?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1,7 @@\n+{\n+  \"sideEffects\": [\n+    \"./json.js\",\n+    \"./js.js\",\n+    \"./cjs.js\"\n+  ]\n+}"
        },
        {
            "sha": "33c1891f81e78b93188556ce8df7df60766f61a5",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/unused.cjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.cjs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1 @@\n+module.exports = true"
        },
        {
            "sha": "186b120756be198f7b34e195640ac267dba19c4e",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/unused.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.js",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.js?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1 @@\n+export default true"
        },
        {
            "sha": "6182be02eda518889ec91423f1e4648c1fca6ab5",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/unused.json",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.json",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Funused.json?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"unused\": true\n+}"
        },
        {
            "sha": "33c1891f81e78b93188556ce8df7df60766f61a5",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/used.cjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.cjs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1 @@\n+module.exports = true"
        },
        {
            "sha": "186b120756be198f7b34e195640ac267dba19c4e",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/used.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.js",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.js?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1 @@\n+export default true"
        },
        {
            "sha": "0f4d267f1299a969120262210bd24fca89bd17aa",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/input/used.json",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.json",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Finput%2Fused.json?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"used\": true\n+}"
        },
        {
            "sha": "d9a24fe8177a63c9d5bbdfaa75c2e5a52217dabb",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/tree-shaking/ignore-side-effect-free-module/options.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Foptions.json",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Foptions.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Ftree-shaking%2Fignore-side-effect-free-module%2Foptions.json?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"treeShakingMode\": \"reexports-only\",\n+  \"scopeHoisting\": false\n+}"
        },
        {
            "sha": "ea99c7e2ddeb93bd036e10f8b02af3d17bf54c1c",
            "filename": "turbopack/crates/turbopack/src/lib.rs",
            "status": "modified",
            "additions": 38,
            "deletions": 11,
            "changes": 49,
            "blob_url": "https://github.com/vercel/next.js/blob/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8c8030edf42200228fb3b2dfbd3a130dd13c1485/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs?ref=8c8030edf42200228fb3b2dfbd3a130dd13c1485",
            "patch": "@@ -82,8 +82,14 @@ async fn apply_module_type(\n     css_import_context: Option<ResolvedVc<ImportContext>>,\n     runtime_code: bool,\n ) -> Result<Vc<ProcessResult>> {\n+    let tree_shaking_mode = module_asset_context\n+        .module_options_context()\n+        .await?\n+        .tree_shaking_mode;\n+    let is_evaluation = matches!(&part, Some(ModulePart::Evaluation));\n+\n     let module_type = &*module_type.await?;\n-    Ok(ProcessResult::Module(match module_type {\n+    let module = match module_type {\n         ModuleType::Ecmascript {\n             preprocess,\n             main,\n@@ -164,10 +170,11 @@ async fn apply_module_type(\n             if runtime_code {\n                 ResolvedVc::upcast(module)\n             } else {\n-                let options_value = options.await?;\n-                if options_value.tree_shaking_mode.is_some()\n-                    && matches!(&part, Some(ModulePart::Evaluation))\n-                {\n+                // Check side effect free on the intermediate module before following reexports\n+                // This can skip the module earlier and could skip more modules than only doing it\n+                // at the end. Also we avoid parsing/analyzing the module in this\n+                // case, because we would need to parse/analyze it for reexports.\n+                if tree_shaking_mode.is_some() && is_evaluation {\n                     // If we are tree shaking, skip the evaluation part if the module is marked as\n                     // side effect free.\n                     let side_effect_free_packages = module_asset_context\n@@ -183,7 +190,7 @@ async fn apply_module_type(\n                     }\n                 }\n \n-                match options_value.tree_shaking_mode {\n+                match tree_shaking_mode {\n                     Some(TreeShakingMode::ModuleFragments) => {\n                         Vc::upcast(EcmascriptModulePartAsset::select_part(\n                             *module,\n@@ -299,8 +306,25 @@ async fn apply_module_type(\n                 .to_resolved()\n                 .await?\n         }\n-    })\n-    .cell())\n+    };\n+\n+    if tree_shaking_mode.is_some() && is_evaluation {\n+        // If we are tree shaking, skip the evaluation part if the module is marked as\n+        // side effect free.\n+        let side_effect_free_packages = module_asset_context\n+            .side_effect_free_packages()\n+            .resolve()\n+            .await?;\n+\n+        if *module\n+            .is_marked_as_side_effect_free(side_effect_free_packages)\n+            .await?\n+        {\n+            return Ok(ProcessResult::Ignore.cell());\n+        }\n+    }\n+\n+    Ok(ProcessResult::Module(module).cell())\n }\n \n async fn apply_reexport_tree_shaking(\n@@ -547,7 +571,8 @@ async fn process_default_internal(\n         _ => None,\n     };\n \n-    for (i, rule) in options.await?.rules.iter().enumerate() {\n+    let options_value = options.await?;\n+    for (i, rule) in options_value.rules.iter().enumerate() {\n         if has_type_attribute && current_module_type.is_some() {\n             continue;\n         }\n@@ -710,7 +735,7 @@ async fn process_default_internal(\n         return Ok(ProcessResult::Unknown(current_source).cell());\n     };\n \n-    apply_module_type(\n+    let module = apply_module_type(\n         current_source,\n         module_asset_context,\n         module_type.cell(),\n@@ -723,7 +748,9 @@ async fn process_default_internal(\n         },\n         matches!(reference_type, ReferenceType::Runtime),\n     )\n-    .await\n+    .await?;\n+\n+    Ok(module)\n }\n \n #[turbo_tasks::function]"
        }
    ],
    "stats": {
        "total": 307,
        "additions": 199,
        "deletions": 108
    }
}