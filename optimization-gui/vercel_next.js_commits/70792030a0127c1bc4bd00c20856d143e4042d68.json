{
    "author": "wbinnssmith",
    "message": "Remove canary-gate and add experimental warning for alternate bundler (#77806)\n\nThis:\n- Removes the Rspack canary gate\n- Adds a warning that Rspack support is driven by the community and is\nexperimental.\n- Links to the discussion page for feedback\n\nTest Plan: Installed and used in an app. Verified the link is valid.",
    "sha": "70792030a0127c1bc4bd00c20856d143e4042d68",
    "files": [
        {
            "sha": "94905e9e35a0d14c026d6d022b1b1238ce3a87ce",
            "filename": "packages/next-rspack/README.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/70792030a0127c1bc4bd00c20856d143e4042d68/packages%2Fnext-rspack%2FREADME.md",
            "raw_url": "https://github.com/vercel/next.js/raw/70792030a0127c1bc4bd00c20856d143e4042d68/packages%2Fnext-rspack%2FREADME.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-rspack%2FREADME.md?ref=70792030a0127c1bc4bd00c20856d143e4042d68",
            "patch": "@@ -1,7 +1,7 @@\n # next-rspack (EXPERIMENTAL)\n \n > [!WARNING]\n-> This package is currently experimental and actively developed and supported in Next.jsâ€™ `canary` branch. To use this, you must be using a published canary build of Next.js.\n+> This package is currently experimental. It's not an official Next.js plugin, and is supported by the Rspack team in partnership with Next.js. Help improve Next.js and Rspack by providing feedback at https://github.com/vercel/next.js/discussions/77800\n \n This plugin allows you to use [Rspack](https://rspack.dev) in place of webpack with Next.js.\n "
        },
        {
            "sha": "e78ec16b6f5640b870f1dc5ab0d9fd40a2924723",
            "filename": "packages/next-rspack/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/70792030a0127c1bc4bd00c20856d143e4042d68/packages%2Fnext-rspack%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/70792030a0127c1bc4bd00c20856d143e4042d68/packages%2Fnext-rspack%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-rspack%2Fpackage.json?ref=70792030a0127c1bc4bd00c20856d143e4042d68",
            "patch": "@@ -3,7 +3,7 @@\n   \"version\": \"15.3.0-canary.42\",\n   \"repository\": {\n     \"url\": \"vercel/next.js\",\n-    \"directory\": \"packages/next-plugin-rspack\"\n+    \"directory\": \"packages/next-rspack\"\n   },\n   \"types\": \"index.d.ts\",\n   \"dependencies\": {"
        },
        {
            "sha": "35e49a1ae3244be1f816b7acd4b274a70978786e",
            "filename": "packages/next/src/shared/lib/get-rspack.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/70792030a0127c1bc4bd00c20856d143e4042d68/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fget-rspack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/70792030a0127c1bc4bd00c20856d143e4042d68/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fget-rspack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fget-rspack.ts?ref=70792030a0127c1bc4bd00c20856d143e4042d68",
            "patch": "@@ -1,7 +1,7 @@\n-import { CanaryOnlyError, isStableBuild } from './canary-only'\n+import { warnOnce } from '../../build/output/log'\n \n export function getRspackCore() {\n-  gateCanary()\n+  warnRspack()\n   try {\n     // eslint-disable-next-line import/no-extraneous-dependencies\n     return require('@rspack/core')\n@@ -17,7 +17,7 @@ export function getRspackCore() {\n }\n \n export function getRspackReactRefresh() {\n-  gateCanary()\n+  warnRspack()\n   try {\n     // eslint-disable-next-line import/no-extraneous-dependencies\n     const plugin = require('@rspack/plugin-react-refresh')\n@@ -37,10 +37,8 @@ export function getRspackReactRefresh() {\n   }\n }\n \n-function gateCanary() {\n-  if (isStableBuild()) {\n-    throw new CanaryOnlyError(\n-      'Rspack support is only available in Next.js canary.'\n-    )\n-  }\n+function warnRspack() {\n+  warnOnce(\n+    `\\`next-rspack\\` is currently experimental. It's not an official Next.js plugin, and is supported by the Rspack team in partnership with Next.js. Help improve Next.js and Rspack by providing feedback at https://github.com/vercel/next.js/discussions/77800`\n+  )\n }"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 9,
        "deletions": 11
    }
}