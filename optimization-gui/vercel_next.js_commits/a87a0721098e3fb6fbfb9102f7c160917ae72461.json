{
    "author": "Cy-Tek",
    "message": "fix(turbopack) Adjust the way catchall routes are handled when a more specific parallel route exists (#81634)\n\n## Improve App Router Route Prioritization\n\n### What?\nFixed a logic bug where we were failing to correctly identify routes as\ncatchall routes due to treating parallel routes as a completed route\npath. This shouldn't happen because parallel routes do not affect the\nrouting structure.\n\n### How?\n\n- Modified the route selection logic to more clearly prioritize specific\nroutes over catch-all routes\n- Make sure we only count true leaf nodes when determining when to use\nthe catch-all. Parallel is not a leaf node\n- Added a test case to ensure middleware rewrites and redirects work\ncorrectly with both parallel and non-parallel catch-all routes.\n\nFixes #PACK-4490",
    "sha": "a87a0721098e3fb6fbfb9102f7c160917ae72461",
    "files": [
        {
            "sha": "43fd0a9cd4103a7b19a71fdcfc2671d188dc728b",
            "filename": "crates/next-core/src/next_app/mod.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 9,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fmod.rs?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -257,17 +257,22 @@ impl AppPage {\n         matches!(self.0.last(), Some(PageSegment::PageType(..)))\n     }\n \n-    pub fn is_catchall(&self) -> bool {\n-        let segment = if self.is_complete() {\n-            // The `PageType` is the last segment for completed pages.\n-            self.0.iter().nth_back(1)\n-        } else {\n-            self.0.last()\n-        };\n+    /// The `PageType` is the last segment for completed pages. We need to find\n+    /// the last segment that is not a `PageType`, `Group`, or `Parallel`\n+    /// segment, because these do not inform the routing structure.\n+    pub fn get_last_routing_segment(&self) -> Option<&PageSegment> {\n+        self.0.iter().rev().find(|segment| {\n+            !matches!(\n+                segment,\n+                PageSegment::PageType(_) | PageSegment::Group(_) | PageSegment::Parallel(_)\n+            )\n+        })\n+    }\n \n+    pub fn is_catchall(&self) -> bool {\n         matches!(\n-            segment,\n-            Some(PageSegment::CatchAll(..) | PageSegment::OptionalCatchAll(..))\n+            self.get_last_routing_segment(),\n+            Some(PageSegment::CatchAll(_) | PageSegment::OptionalCatchAll(_))\n         )\n     }\n "
        },
        {
            "sha": "f0cce5370bc7ed6eab437b8e41823639e2453c97",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/app/(someGroup)/anotherRoute/[[...slug]]/page.jsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2FanotherRoute%2F%5B%5B...slug%5D%5D%2Fpage.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2FanotherRoute%2F%5B%5B...slug%5D%5D%2Fpage.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2FanotherRoute%2F%5B%5B...slug%5D%5D%2Fpage.jsx?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,7 @@\n+import React from 'react'\n+\n+export default function Page({ params }) {\n+  return (\n+    <h1 id=\"catch-all\">anotherRoute catch-all: {params.slug?.join('/')}</h1>\n+  )\n+}"
        },
        {
            "sha": "421397a4250cd5c5b0f37a35784cde2673417560",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/app/(someGroup)/anotherRoute/whoops/page.jsx",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2FanotherRoute%2Fwhoops%2Fpage.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2FanotherRoute%2Fwhoops%2Fpage.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2FanotherRoute%2Fwhoops%2Fpage.jsx?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,5 @@\n+import React from 'react'\n+\n+export default function Page() {\n+  return <h1 id=\"specific-page\">anotherRoute whoops</h1>\n+}"
        },
        {
            "sha": "27414c09d7861f59be6242b651510e06d98571f3",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/app/(someGroup)/payment/[[...slug]]/@parallel/page.jsx",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2F%40parallel%2Fpage.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2F%40parallel%2Fpage.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2F%40parallel%2Fpage.jsx?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,5 @@\n+import React from 'react'\n+\n+export default function Page() {\n+  return <h1 id=\"parallel-page\">parallel page</h1>\n+}"
        },
        {
            "sha": "40a3645bee3e75e69ad9e1c639fc34c80be6ffba",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/app/(someGroup)/payment/[[...slug]]/layout.jsx",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2Flayout.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2Flayout.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2Flayout.jsx?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,10 @@\n+import React from 'react'\n+\n+export default function Layout({ children, parallel }) {\n+  return (\n+    <>\n+      {children}\n+      {parallel}\n+    </>\n+  )\n+}"
        },
        {
            "sha": "59b48cbc0af40c80fefe1e9d93027dd839a72223",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/app/(someGroup)/payment/[[...slug]]/page.jsx",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2Fpage.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2Fpage.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2F%5B%5B...slug%5D%5D%2Fpage.jsx?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,5 @@\n+import React from 'react'\n+\n+export default function Page({ params }) {\n+  return <h1 id=\"catch-all\">payment catch-all: {params.slug?.join('/')}</h1>\n+}"
        },
        {
            "sha": "76f3af03498719336c852468a53335e602626f16",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/app/(someGroup)/payment/whoops/page.jsx",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2Fwhoops%2Fpage.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2Fwhoops%2Fpage.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2F(someGroup)%2Fpayment%2Fwhoops%2Fpage.jsx?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,5 @@\n+import React from 'react'\n+\n+export default function Page() {\n+  return <h1 id=\"specific-page\">payment whoops</h1>\n+}"
        },
        {
            "sha": "730b676b58e67358f0299a00eec03c563fec8b3c",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/app/layout.jsx",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2Flayout.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2Flayout.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2Flayout.jsx?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,12 @@\n+import React from 'react'\n+\n+export default function RootLayout({ children }) {\n+  return (\n+    <html>\n+      <head>\n+        <title>Test App</title>\n+      </head>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "32b681d6d1ead39ea6fc44b22c2dcd1c86ca14d2",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/app/page.jsx",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2Fpage.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2Fpage.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fapp%2Fpage.jsx?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,5 @@\n+import React from 'react'\n+\n+export default function Page() {\n+  return <h1>Root Page</h1>\n+}"
        },
        {
            "sha": "2ad0710fc36c178a66754ad01a97bf5fb23751d0",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/middleware-rewrite-catchall-priority-with-parallel-route.test.js",
            "status": "added",
            "additions": 43,
            "deletions": 0,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fmiddleware-rewrite-catchall-priority-with-parallel-route.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fmiddleware-rewrite-catchall-priority-with-parallel-route.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fmiddleware-rewrite-catchall-priority-with-parallel-route.test.js?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,43 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('app-dir - middleware rewrite with catch-all and parallel routes', () => {\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  describe('payment route', () => {\n+    it('should rewrite to the specific page instead of the catch-all with parallel route', async () => {\n+      const browser = await next.browser('/payment/test')\n+      const text = await browser.elementByCss('#specific-page').text()\n+\n+      expect(text).toBe('payment whoops')\n+      expect(await browser.url()).toBe(next.url + '/payment/test')\n+    })\n+\n+    it('should redirect to the specific page instead of the catch-all with parallel route', async () => {\n+      const browser = await next.browser('/payment/test?redirect=true')\n+      const text = await browser.elementByCss('#specific-page').text()\n+\n+      expect(text).toBe('payment whoops')\n+      expect(await browser.url()).toBe(next.url + '/payment/whoops')\n+    })\n+  })\n+\n+  describe('anotherRoute', () => {\n+    it('should rewrite to the specific page instead of the catch-all without parallel route', async () => {\n+      const browser = await next.browser('/anotherRoute/test')\n+      const text = await browser.elementByCss('#specific-page').text()\n+\n+      expect(text).toBe('anotherRoute whoops')\n+      expect(await browser.url()).toBe(next.url + '/anotherRoute/test')\n+    })\n+\n+    it('should redirect to the specific page instead of the catch-all without parallel route', async () => {\n+      const browser = await next.browser('/anotherRoute/test?redirect=true')\n+      const text = await browser.elementByCss('#specific-page').text()\n+\n+      expect(text).toBe('anotherRoute whoops')\n+      expect(await browser.url()).toBe(next.url + '/anotherRoute/whoops')\n+    })\n+  })\n+})"
        },
        {
            "sha": "8a5819f051dc2972b54eca1d910921ac00c2f80e",
            "filename": "test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/middleware.js",
            "status": "added",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fmiddleware.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fmiddleware.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmiddleware-rewrite-catchall-priority-with-parallel-route%2Fmiddleware.js?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -0,0 +1,35 @@\n+import { NextResponse } from 'next/server'\n+\n+export async function middleware(request) {\n+  if (\n+    request.nextUrl.pathname.includes('payment') &&\n+    !request.nextUrl.pathname.includes('whoops')\n+  ) {\n+    if (request.nextUrl.searchParams.has('redirect')) {\n+      return NextResponse.redirect(new URL('/payment/whoops', request.url))\n+    }\n+    return NextResponse.rewrite(new URL('/payment/whoops', request.url))\n+  }\n+  if (\n+    request.nextUrl.pathname.includes('anotherRoute') &&\n+    !request.nextUrl.pathname.includes('whoops')\n+  ) {\n+    if (request.nextUrl.searchParams.has('redirect')) {\n+      return NextResponse.redirect(new URL('/anotherRoute/whoops', request.url))\n+    }\n+    return NextResponse.rewrite(new URL('/anotherRoute/whoops', request.url))\n+  }\n+}\n+\n+export const config = {\n+  matcher: [\n+    /*\n+     * Match all request paths except for the ones starting with:\n+     * - api (API routes)\n+     * - _next/static (static files)\n+     * - _next/image (image optimization files)\n+     * - favicon.ico, sitemap.xml, robots.txt (metadata files)\n+     */\n+    '/((?!api|_next/static|_next/image|favicon.ico|sitemap.xml|robots.txt).*)',\n+  ],\n+}"
        },
        {
            "sha": "165083f2447e4c0766b4b2ef96b3def82add1960",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -3316,6 +3316,18 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n+  \"test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/middleware-rewrite-catchall-priority-with-parallel-route.test.js\": {\n+    \"passed\": [\n+      \"app-dir - middleware rewrite with catch-all and parallel routes should rewrite to the specific page instead of the catch-all with parallel route\",\n+      \"app-dir - middleware rewrite with catch-all and parallel routes should redirect to the specific page instead of the catch-all with parallel route\",\n+      \"app-dir - middleware rewrite with catch-all and parallel routes should rewrite to the specific page instead of the catch-all without parallel route\",\n+      \"app-dir - middleware rewrite with catch-all and parallel routes should redirect to the specific page instead of the catch-all without parallel route\"\n+    ],\n+    \"failed\": [],\n+    \"pending\": [],\n+    \"flakey\": [],\n+    \"runtimeError\": false\n+  },\n   \"test/e2e/app-dir/middleware-sitemap/matcher-exclude-sitemap/index.test.ts\": {\n     \"passed\": [\n       \"middleware-sitemap should not be affected by middleware if sitemap.xml is excluded from the matcher\""
        },
        {
            "sha": "3c0057e69e9af156ad3b1757ec15fc897bbb9930",
            "filename": "test/turbopack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fturbopack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a87a0721098e3fb6fbfb9102f7c160917ae72461/test%2Fturbopack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-dev-tests-manifest.json?ref=a87a0721098e3fb6fbfb9102f7c160917ae72461",
            "patch": "@@ -7165,6 +7165,18 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n+  \"test/e2e/app-dir/middleware-rewrite-catchall-priority-with-parallel-route/middleware-rewrite-catchall-priority-with-parallel-route.test.js\": {\n+    \"passed\": [\n+      \"app-dir - middleware rewrite with catch-all and parallel routes should rewrite to the specific page instead of the catch-all with parallel route\",\n+      \"app-dir - middleware rewrite with catch-all and parallel routes should redirect to the specific page instead of the catch-all with parallel route\",\n+      \"app-dir - middleware rewrite with catch-all and parallel routes should rewrite to the specific page instead of the catch-all without parallel route\",\n+      \"app-dir - middleware rewrite with catch-all and parallel routes should redirect to the specific page instead of the catch-all without parallel route\"\n+    ],\n+    \"failed\": [],\n+    \"pending\": [],\n+    \"flakey\": [],\n+    \"runtimeError\": false\n+  },\n   \"test/e2e/app-dir/middleware-sitemap/matcher-exclude-sitemap/index.test.ts\": {\n     \"passed\": [\n       \"middleware-sitemap should not be affected by middleware if sitemap.xml is excluded from the matcher\""
        }
    ],
    "stats": {
        "total": 179,
        "additions": 170,
        "deletions": 9
    }
}