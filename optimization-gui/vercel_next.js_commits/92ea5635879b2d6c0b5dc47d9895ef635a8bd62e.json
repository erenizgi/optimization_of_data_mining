{
    "author": "timneutkens",
    "message": "Development: Only require loadJsConfig when using webpack (#83623)\n\n## What?\n\nDon't require/call loadJsConfig when using Turbopack, as it's handled\ninternally. loadJsConfig is one of the places where TypeScript gets\nloaded. There's still the TS verify as well, this narrows the amount of\nplaces where TypeScript gets loaded to make it easier to remove that\nloading of TypeScript in a future PR.",
    "sha": "92ea5635879b2d6c0b5dc47d9895ef635a8bd62e",
    "files": [
        {
            "sha": "ebefa6e19b25dd12cad10415312eabba31243b37",
            "filename": "packages/next/src/server/lib/router-utils/setup-dev-bundler.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 7,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/92ea5635879b2d6c0b5dc47d9895ef635a8bd62e/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/92ea5635879b2d6c0b5dc47d9895ef635a8bd62e/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts?ref=92ea5635879b2d6c0b5dc47d9895ef635a8bd62e",
            "patch": "@@ -19,7 +19,6 @@ import * as Log from '../../../build/output/log'\n import { setGlobal } from '../../../trace/shared'\n import type { Telemetry } from '../../../telemetry/storage'\n import type { IncomingMessage, ServerResponse } from 'http'\n-import loadJsConfig from '../../../build/load-jsconfig'\n import { createValidFileMatcher } from '../find-page-file'\n import {\n   EVENT_BUILD_FEATURE_USAGE,\n@@ -763,14 +762,22 @@ async function startWatcher(\n           ])\n         }\n         let tsconfigResult:\n-          | UnwrapPromise<ReturnType<typeof loadJsConfig>>\n+          | UnwrapPromise<\n+              ReturnType<typeof import('../../../build/load-jsconfig').default>\n+            >\n           | undefined\n \n-        if (tsconfigChange) {\n-          try {\n-            tsconfigResult = await loadJsConfig(dir, nextConfig)\n-          } catch (_) {\n-            /* do we want to log if there are syntax errors in tsconfig while editing? */\n+        // This is not relevant for Turbopack because tsconfig/jsconfig is handled internally.\n+        if (!hotReloader.turbopackProject) {\n+          if (tsconfigChange) {\n+            try {\n+              const loadJsConfig = (\n+                require('../../../build/load-jsconfig') as typeof import('../../../build/load-jsconfig')\n+              ).default\n+              tsconfigResult = await loadJsConfig(dir, nextConfig)\n+            } catch (_) {\n+              /* do we want to log if there are syntax errors in tsconfig while editing? */\n+            }\n           }\n         }\n "
        }
    ],
    "stats": {
        "total": 21,
        "additions": 14,
        "deletions": 7
    }
}