{
    "author": "sokra",
    "message": "report compiler duration for webpack and improve numbers (#76665)\n\n### What?\n\n* More precision in reported number\n* Also report duration for webpack",
    "sha": "cf99982e14b1fd88a061ce441f0f1527d672d2ac",
    "files": [
        {
            "sha": "eb869b126ded1df7fb04ec69cc2b31a6583ee7cd",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 11,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/cf99982e14b1fd88a061ce441f0f1527d672d2ac/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/cf99982e14b1fd88a061ce441f0f1527d672d2ac/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=cf99982e14b1fd88a061ce441f0f1527d672d2ac",
            "patch": "@@ -1419,16 +1419,7 @@ export default async function build(\n \n           buildTraceContext = rest.buildTraceContext\n \n-          let durationString\n-          if (compilerDuration > 120) {\n-            durationString = `${Math.round(compilerDuration / 6) / 10}min`\n-          } else if (compilerDuration > 20) {\n-            durationString = `${Math.round(compilerDuration)}s`\n-          } else if (compilerDuration > 2) {\n-            durationString = `${Math.round(compilerDuration * 10) / 10}s`\n-          } else {\n-            durationString = `${Math.round(compilerDuration * 1000)}ms`\n-          }\n+          const durationString = durationToString(compilerDuration)\n           Log.event(`Compiled successfully in ${durationString}`)\n \n           telemetry.record(\n@@ -1515,7 +1506,8 @@ export default async function build(\n               traceMemoryUsage('Finished client compilation', nextBuildSpan)\n             })\n \n-            Log.event('Compiled successfully')\n+            const durationString = durationToString(durationInSeconds)\n+            Log.event(`Compiled successfully in ${durationString}`)\n \n             telemetry.record(\n               eventBuildCompleted(pagesPaths, {\n@@ -3633,3 +3625,17 @@ export default async function build(\n     }\n   }\n }\n+\n+function durationToString(compilerDuration: number) {\n+  let durationString\n+  if (compilerDuration > 120) {\n+    durationString = `${(compilerDuration / 60).toFixed(1)}min`\n+  } else if (compilerDuration > 40) {\n+    durationString = `${compilerDuration.toFixed(0)}s`\n+  } else if (compilerDuration > 2) {\n+    durationString = `${compilerDuration.toFixed(1)}s`\n+  } else {\n+    durationString = `${(compilerDuration * 1000).toFixed(0)}ms`\n+  }\n+  return durationString\n+}"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 17,
        "deletions": 11
    }
}