{
    "author": "bgw",
    "message": "Turbopack: Remove the deprecated `.turbo` config object (#84109)\n\nThis config name was previously deprecated in a 15.x release (renamed to `turbopack`), and there's already a codemod to migrate these over.",
    "sha": "498c7fce681eec548beac280420e9e297d58da90",
    "files": [
        {
            "sha": "2faadfb24840f0b97089145507aae83538529ba1",
            "filename": "docs/01-app/03-api-reference/08-turbopack.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/498c7fce681eec548beac280420e9e297d58da90/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/498c7fce681eec548beac280420e9e297d58da90/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx?ref=498c7fce681eec548beac280420e9e297d58da90",
            "patch": "@@ -188,8 +188,6 @@ Turbopack can be configured via `next.config.js` (or `next.config.ts`) under the\n   Change or extend file extensions for module resolution.\n - **`moduleIds`**\n   Set how module IDs are generated (`'named'` vs `'deterministic'`).\n-- **`memoryLimit`**\n-  Set a memory limit (in bytes) for Turbopack.\n \n ```js filename=\"next.config.js\"\n module.exports = {"
        },
        {
            "sha": "dc06321a793019d924e5a8abb8085c047ccfa3f5",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 31,
            "changes": 31,
            "blob_url": "https://github.com/vercel/next.js/blob/498c7fce681eec548beac280420e9e297d58da90/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/498c7fce681eec548beac280420e9e297d58da90/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=498c7fce681eec548beac280420e9e297d58da90",
            "patch": "@@ -8,7 +8,6 @@ import type { SizeLimit } from '../types'\n import type {\n   ExportPathMap,\n   TurbopackLoaderItem,\n-  DeprecatedExperimentalTurboOptions,\n   TurbopackOptions,\n   TurbopackRuleConfigItem,\n   TurbopackRuleConfigCollection,\n@@ -163,32 +162,6 @@ const zTurbopackConfig: zod.ZodType<TurbopackOptions> = z.strictObject({\n   root: z.string().optional(),\n })\n \n-// Same as zTurbopackConfig but with deprecated properties. Unfortunately, base\n-// properties are duplicated here as `ZodType`s do not export `extend()`.\n-const zDeprecatedExperimentalTurboConfig: zod.ZodType<DeprecatedExperimentalTurboOptions> =\n-  z.strictObject({\n-    loaders: z.record(z.string(), z.array(zTurbopackLoaderItem)).optional(),\n-    rules: z.record(z.string(), zTurbopackRuleConfigCollection).optional(),\n-    resolveAlias: z\n-      .record(\n-        z.string(),\n-        z.union([\n-          z.string(),\n-          z.array(z.string()),\n-          z.record(z.string(), z.union([z.string(), z.array(z.string())])),\n-        ])\n-      )\n-      .optional(),\n-    resolveExtensions: z.array(z.string()).optional(),\n-    treeShaking: z.boolean().optional(),\n-    persistentCaching: z.union([z.number(), z.literal(false)]).optional(),\n-    memoryLimit: z.number().optional(),\n-    moduleIds: z.enum(['named', 'deterministic']).optional(),\n-    minify: z.boolean().optional(),\n-    sourceMaps: z.boolean().optional(),\n-    root: z.string().optional(),\n-  })\n-\n export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n   z.strictObject({\n     allowedDevOrigins: z.array(z.string()).optional(),\n@@ -462,10 +435,6 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n         typedRoutes: z.boolean().optional(),\n         webpackBuildWorker: z.boolean().optional(),\n         webpackMemoryOptimizations: z.boolean().optional(),\n-        /**\n-         * @deprecated Use `config.turbopack` instead.\n-         */\n-        turbo: zDeprecatedExperimentalTurboConfig.optional(),\n         turbopackMemoryLimit: z.number().optional(),\n         turbopackMinify: z.boolean().optional(),\n         turbopackPersistentCaching: z.boolean().optional(),"
        },
        {
            "sha": "b4ff66f727a3e8c0112a9f488896e1ad30e8a70f",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 42,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/498c7fce681eec548beac280420e9e297d58da90/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/498c7fce681eec548beac280420e9e297d58da90/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=498c7fce681eec548beac280420e9e297d58da90",
            "patch": "@@ -25,7 +25,7 @@ export type NextConfigComplete = Required<NextConfig> & {\n   // override NextConfigComplete.experimental.htmlLimitedBots to string\n   // because it's not defined in NextConfigComplete.experimental\n   htmlLimitedBots: string | undefined\n-  experimental: Omit<ExperimentalConfig, 'turbo'>\n+  experimental: ExperimentalConfig\n }\n \n export type I18NDomains = readonly DomainLocale[]\n@@ -182,40 +182,6 @@ export interface TurbopackOptions {\n   root?: string\n }\n \n-export interface DeprecatedExperimentalTurboOptions extends TurbopackOptions {\n-  /**\n-   * (`next --turbopack` only) A list of webpack loaders to apply when running with Turbopack.\n-   *\n-   * @deprecated Use `rules` instead.\n-   * @see [Turbopack Loaders](https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#configuring-webpack-loaders)\n-   */\n-  loaders?: Record<string, TurbopackLoaderItem[]>\n-\n-  /**\n-   * A target memory limit for turbo, in bytes.\n-   * @deprecated Use `experimental.turbopackMemoryLimit` instead.\n-   */\n-  memoryLimit?: number\n-\n-  /**\n-   * Enable minification. Defaults to true in build mode and false in dev mode.\n-   * @deprecated Use `experimental.turbopackMinify` instead.\n-   */\n-  minify?: boolean\n-\n-  /**\n-   * Enable tree shaking for the turbopack dev server and build.\n-   * @deprecated Use `experimental.turbopackTreeShaking` instead.\n-   */\n-  treeShaking?: boolean\n-\n-  /**\n-   * Enable source maps. Defaults to true.\n-   * @deprecated Use `experimental.turbopackSourceMaps` instead.\n-   */\n-  sourceMaps?: boolean\n-}\n-\n export interface WebpackConfigContext {\n   /** Next.js root directory */\n   dir: string\n@@ -444,12 +410,6 @@ export interface ExperimentalConfig {\n    */\n   optimizeServerReact?: boolean\n \n-  /**\n-   * @deprecated Use `config.turbopack` instead.\n-   * Run `npx @next/codemod@latest next-experimental-turbo-to-turbopack .` to migrate automatically.\n-   */\n-  turbo?: DeprecatedExperimentalTurboOptions\n-\n   /**\n    * A target memory limit for turbo, in bytes.\n    */\n@@ -1487,7 +1447,6 @@ export const defaultConfig = Object.freeze({\n     disablePostcssPresetEnv: undefined,\n     amp: undefined,\n     urlImports: undefined,\n-    turbo: undefined,\n     typedEnv: false,\n     clientTraceMetadata: undefined,\n     parallelServerCompiles: false,"
        },
        {
            "sha": "7d23ed2d6047e011322785568ea472abf6df1b53",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 43,
            "changes": 44,
            "blob_url": "https://github.com/vercel/next.js/blob/498c7fce681eec548beac280420e9e297d58da90/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/498c7fce681eec548beac280420e9e297d58da90/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=498c7fce681eec548beac280420e9e297d58da90",
            "patch": "@@ -16,7 +16,6 @@ import type {\n   ExperimentalConfig,\n   NextConfigComplete,\n   NextConfig,\n-  TurbopackLoaderItem,\n } from './config-shared'\n \n import { loadWebpackHook } from './config-utils'\n@@ -1458,7 +1457,7 @@ export default async function loadConfig(\n       ) as (keyof ExperimentalConfig)[]) {\n         const value = loadedConfig.experimental[name]\n \n-        if (name === 'turbo' && !process.env.TURBOPACK) {\n+        if (name.startsWith('turbopack') && !process.env.TURBOPACK) {\n           // Ignore any Turbopack config if Turbopack is not enabled\n           continue\n         }\n@@ -1502,47 +1501,6 @@ export default async function loadConfig(\n       userConfig.reactProductionProfiling = reactProductionProfiling\n     }\n \n-    if (\n-      userConfig.experimental?.turbo?.loaders &&\n-      !userConfig.experimental?.turbo?.rules\n-    ) {\n-      curLog.warn(\n-        'experimental.turbo.loaders is now deprecated. Please update next.config.js to use experimental.turbo.rules as soon as possible.\\n' +\n-          'The new option is similar, but the key should be a glob instead of an extension.\\n' +\n-          'Example: loaders: { \".mdx\": [\"mdx-loader\"] } -> rules: { \"*.mdx\": [\"mdx-loader\"] }\" }\\n' +\n-          'See more info here https://nextjs.org/docs/app/api-reference/next-config-js/turbo'\n-      )\n-\n-      const rules: Record<string, TurbopackLoaderItem[]> = {}\n-      for (const [ext, loaders] of Object.entries(\n-        userConfig.experimental.turbo.loaders\n-      )) {\n-        rules['*' + ext] = loaders as TurbopackLoaderItem[]\n-      }\n-\n-      userConfig.experimental.turbo.rules = rules\n-    }\n-\n-    if (userConfig.experimental?.turbo) {\n-      curLog.warn(\n-        'The config property `experimental.turbo` is deprecated. Move this setting to `config.turbopack` or run `npx @next/codemod@latest next-experimental-turbo-to-turbopack .`'\n-      )\n-\n-      // Merge the two configs, preferring values in `config.turbopack`.\n-      userConfig.turbopack = {\n-        ...userConfig.experimental.turbo,\n-        ...userConfig.turbopack,\n-      }\n-      userConfig.experimental.turbopackMemoryLimit ??=\n-        userConfig.experimental.turbo.memoryLimit\n-      userConfig.experimental.turbopackMinify ??=\n-        userConfig.experimental.turbo.minify\n-      userConfig.experimental.turbopackTreeShaking ??=\n-        userConfig.experimental.turbo.treeShaking\n-      userConfig.experimental.turbopackSourceMaps ??=\n-        userConfig.experimental.turbo.sourceMaps\n-    }\n-\n     if (userConfig.experimental?.useLightningcss) {\n       const { loadBindings } =\n         require('../build/swc') as typeof import('../build/swc')"
        },
        {
            "sha": "4ee00a218505ac95ed8f4b2cb12779643277286d",
            "filename": "test/e2e/turbopack-turbo-config-compatibility/app/layout.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fapp%2Flayout.js",
            "raw_url": "https://github.com/vercel/next.js/raw/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fapp%2Flayout.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fapp%2Flayout.js?ref=5834e0cb704d320b4b5e0f338a4307585b35a0a9",
            "patch": "@@ -1,7 +0,0 @@\n-export default function RootLayout({ children }) {\n-  return (\n-    <html lang=\"en\">\n-      <body>{children}</body>\n-    </html>\n-  )\n-}"
        },
        {
            "sha": "c5a59e9f9b32bd693bd54750a8359e1f897328b2",
            "filename": "test/e2e/turbopack-turbo-config-compatibility/app/page.js",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fapp%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fapp%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fapp%2Fpage.js?ref=5834e0cb704d320b4b5e0f338a4307585b35a0a9",
            "patch": "@@ -1,5 +0,0 @@\n-import foo from 'foo'\n-\n-export default function Page() {\n-  return <div id=\"result\">Hello {foo}</div>\n-}"
        },
        {
            "sha": "3d58d1c65d7ba7400474ff89c509f3884ec70f87",
            "filename": "test/e2e/turbopack-turbo-config-compatibility/index.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 39,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Findex.test.ts?ref=5834e0cb704d320b4b5e0f338a4307585b35a0a9",
            "patch": "@@ -1,39 +0,0 @@\n-/* eslint-disable jest/no-standalone-expect */\n-import { nextTestSetup } from 'e2e-utils'\n-;(process.env.IS_TURBOPACK_TEST ? describe : describe.skip)(\n-  'turbopack-turbo-config-compatibility',\n-  () => {\n-    describe('including both turbopack and deprecated experimental turbo config', () => {\n-      const { next } = nextTestSetup({\n-        files: __dirname,\n-      })\n-\n-      it('prefers turbopack config over deprecated experimental turbo config', async () => {\n-        const $ = await next.render$('/')\n-        expect($('#result').text()).toEqual('Hello turbopack')\n-      })\n-    })\n-\n-    describe('only including deprecated experimental turbo config', () => {\n-      const { next } = nextTestSetup({\n-        files: __dirname,\n-        overrideFiles: {\n-          'next.config.js': `module.exports = {\n-          experimental: {\n-            turbo: {\n-              resolveAlias: {\n-                foo: './turbo.js',\n-              },\n-            },\n-          },\n-        }`,\n-        },\n-      })\n-\n-      it('still uses the deprecated experimental turbo config', async () => {\n-        const $ = await next.render$('/')\n-        expect($('#result').text()).toEqual('Hello turbo')\n-      })\n-    })\n-  }\n-)"
        },
        {
            "sha": "8c1bfc417fd7fca2472192f257e68baeb0079bb4",
            "filename": "test/e2e/turbopack-turbo-config-compatibility/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fnext.config.js?ref=5834e0cb704d320b4b5e0f338a4307585b35a0a9",
            "patch": "@@ -1,14 +0,0 @@\n-module.exports = {\n-  turbopack: {\n-    resolveAlias: {\n-      foo: './turbopack.js',\n-    },\n-  },\n-  experimental: {\n-    turbo: {\n-      resolveAlias: {\n-        foo: './turbo.js',\n-      },\n-    },\n-  },\n-}"
        },
        {
            "sha": "7554597e94c274c2527606f99f1e14d135609543",
            "filename": "test/e2e/turbopack-turbo-config-compatibility/turbo.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fturbo.js",
            "raw_url": "https://github.com/vercel/next.js/raw/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fturbo.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fturbo.js?ref=5834e0cb704d320b4b5e0f338a4307585b35a0a9",
            "patch": "@@ -1 +0,0 @@\n-export default 'turbo'"
        },
        {
            "sha": "4f7ddaeb011a7e78e252b8a3d9a337dda4a71cc0",
            "filename": "test/e2e/turbopack-turbo-config-compatibility/turbopack.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fturbopack.js",
            "raw_url": "https://github.com/vercel/next.js/raw/5834e0cb704d320b4b5e0f338a4307585b35a0a9/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fturbopack.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fturbopack-turbo-config-compatibility%2Fturbopack.js?ref=5834e0cb704d320b4b5e0f338a4307585b35a0a9",
            "patch": "@@ -1 +0,0 @@\n-export default 'turbopack'"
        }
    ],
    "stats": {
        "total": 187,
        "additions": 2,
        "deletions": 185
    }
}