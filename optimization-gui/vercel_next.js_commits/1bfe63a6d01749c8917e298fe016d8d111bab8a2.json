{
    "author": "lubieowoce",
    "message": "auto-enable errors.json merge driver (#83420)\n\nThe merge driver for `errors.json` has been around for a while, and\nseems to work without issues. This PR enables it by default by\ninstalling it in `postinstall`(via the existing `git-configure.mjs`\nscript which is invoked from there already)\n\nIt also adds `scripts/merge-errors-json/uninstall` to temporarily\ndisable it in case of issues. If the driver crashes, we'll also print\ninstructions on how to disable it.",
    "sha": "1bfe63a6d01749c8917e298fe016d8d111bab8a2",
    "files": [
        {
            "sha": "305285f13d243f4f5e71393445ca131793b70f35",
            "filename": "scripts/git-configure.mjs",
            "status": "modified",
            "additions": 15,
            "deletions": 8,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/1bfe63a6d01749c8917e298fe016d8d111bab8a2/scripts%2Fgit-configure.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1bfe63a6d01749c8917e298fe016d8d111bab8a2/scripts%2Fgit-configure.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/scripts%2Fgit-configure.mjs?ref=1bfe63a6d01749c8917e298fe016d8d111bab8a2",
            "patch": "@@ -1,12 +1,19 @@\n+// @ts-check\n import execa from 'execa'\n \n // See https://github.com/vercel/next.js/pull/47375\n-const { stdout, stderr } = await execa(\n-  'git',\n-  ['config', 'index.skipHash', 'false'],\n-  {\n-    reject: false,\n-  }\n-)\n+await execa('git', ['config', 'index.skipHash', 'false'], {\n+  stdio: 'inherit',\n+  reject: false,\n+})\n \n-console.log(stderr + stdout)\n+// Enable the errors.json git merge driver.\n+// It can be disabled by running:\n+//\n+//   scripts/merge-errors-json/uninstall\n+//\n+// or by manually removing the `[merge \"errors-json\"]` section from your .git/config.\n+await execa('scripts/merge-errors-json/install', [], {\n+  stdio: 'inherit',\n+  reject: false,\n+})"
        },
        {
            "sha": "2424b69d2e37f3feec573394b0eedb41c475f3f1",
            "filename": "scripts/merge-errors-json/merge.mjs",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/1bfe63a6d01749c8917e298fe016d8d111bab8a2/scripts%2Fmerge-errors-json%2Fmerge.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1bfe63a6d01749c8917e298fe016d8d111bab8a2/scripts%2Fmerge-errors-json%2Fmerge.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/scripts%2Fmerge-errors-json%2Fmerge.mjs?ref=1bfe63a6d01749c8917e298fe016d8d111bab8a2",
            "patch": "@@ -50,6 +50,16 @@ function main() {\n     process.exit(0)\n   } catch (error) {\n     console.error('merge-errors-json: merge failed:', error.message)\n+    console.error()\n+    console.error(\n+      [\n+        'if this error persists, you can disable the merge driver by running',\n+        '',\n+        '  scripts/merge-errors-json/uninstall',\n+        '',\n+        'or by manually removing the `[merge \"errors-json\"]` section from your .git/config.',\n+      ].join('\\n')\n+    )\n     process.exit(1)\n   }\n }"
        },
        {
            "sha": "c68a6ea3294781fc61ea8ed958454a4325c1ca19",
            "filename": "scripts/merge-errors-json/uninstall",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/1bfe63a6d01749c8917e298fe016d8d111bab8a2/scripts%2Fmerge-errors-json%2Funinstall",
            "raw_url": "https://github.com/vercel/next.js/raw/1bfe63a6d01749c8917e298fe016d8d111bab8a2/scripts%2Fmerge-errors-json%2Funinstall",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/scripts%2Fmerge-errors-json%2Funinstall?ref=1bfe63a6d01749c8917e298fe016d8d111bab8a2",
            "patch": "@@ -0,0 +1,3 @@\n+#!/bin/sh\n+driver_name='errors-json'\n+git config --remove-section merge.\"$driver_name\""
        }
    ],
    "stats": {
        "total": 36,
        "additions": 28,
        "deletions": 8
    }
}