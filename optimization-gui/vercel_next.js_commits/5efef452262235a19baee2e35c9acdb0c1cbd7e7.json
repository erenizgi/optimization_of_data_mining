{
    "author": "maral",
    "message": "Update caching.mdx (#81129)\n\n### What?\n\nFix misleading information in the docs about mixing cached and uncached\n`fetch` calls during dynamic rendering.\n\n### Why?\n\nI followed the guide (using Next.js 15.3.2) and tried it out with this\ncode:\n```ts\n  const joke = await fetch(\"https://api.chucknorris.io/jokes/random\", {\n    cache: \"no-cache\",\n  });\n  const jokeData = await joke.json();\n\n  console.log(\"Fetched joke:\", jokeData.value);\n\n  const joke2 = await fetch(\n    \"https://api.chucknorris.io/jokes/random?category=dev\"\n  );\n  const jokeData2 = await joke2.json();\n  console.log(\"Fetched joke2:\", jokeData2.value);\n```\n\nAfter building and starting the production server, when I refresh the\npage, both `jokeData.value` and `jokeData2.value` are different,\nuncached. If I want the other `fetch` to be cached, I need to explicitly\nenable caching, e.g.\n\n```ts\n  const joke = await fetch(\"https://api.chucknorris.io/jokes/random\", {\n    cache: \"no-cache\",\n  });\n  const jokeData = await joke.json();\n\n  console.log(\"Fetched joke:\", jokeData.value);\n\n  const joke2 = await fetch(\n    \"https://api.chucknorris.io/jokes/random?category=dev\",\n    {\n      cache: \"force-cache\",\n    }\n  );\n  const jokeData2 = await joke2.json();\n  console.log(\"Fetched joke2:\", jokeData2.value);\n```\n\nThis way the first fetch is not cached while the second one is.\n\n### How?\n\nThe previous version claimed:\n> Other `fetch` requests that do not opt out of caching will still be\ncached in the Data Cache.\n\nBut below in the guide, we can see this:\n> The default caching behavior of fetch (e.g., when the cache option is\nnot specified) is equal to setting the cache option to no-store:\n\nSo the first citation is misleading - the fetch requests are not cached\nby default (with dynamic rendering - static rendering would cache the\nsingle call it into the output), so we actually need to explicitly\nenable caching to have them cached.\n\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "5efef452262235a19baee2e35c9acdb0c1cbd7e7",
    "files": [
        {
            "sha": "e2d5c9ca97bdd3ff39122024ea5efe5c77396f74",
            "filename": "docs/01-app/02-guides/caching.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/5efef452262235a19baee2e35c9acdb0c1cbd7e7/docs%2F01-app%2F02-guides%2Fcaching.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/5efef452262235a19baee2e35c9acdb0c1cbd7e7/docs%2F01-app%2F02-guides%2Fcaching.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fcaching.mdx?ref=5efef452262235a19baee2e35c9acdb0c1cbd7e7",
            "patch": "@@ -312,7 +312,7 @@ You can opt out of the Full Route Cache, or in other words, dynamically render c\n \n - **Using a [Dynamic API](#dynamic-apis)**: This will opt the route out from the Full Route Cache and dynamically render it at request time. The Data Cache can still be used.\n - **Using the `dynamic = 'force-dynamic'` or `revalidate = 0` route segment config options**: This will skip the Full Route Cache and the Data Cache. Meaning components will be rendered and data fetched on every incoming request to the server. The Router Cache will still apply as it's a client-side cache.\n-- **Opting out of the [Data Cache](#data-cache)**: If a route has a `fetch` request that is not cached, this will opt the route out of the Full Route Cache. The data for the specific `fetch` request will be fetched for every incoming request. Other `fetch` requests that do not opt out of caching will still be cached in the Data Cache. This allows for a hybrid of cached and uncached data.\n+- **Opting out of the [Data Cache](#data-cache)**: If a route has a `fetch` request that is not cached, this will opt the route out of the Full Route Cache. The data for the specific `fetch` request will be fetched for every incoming request. Other `fetch` requests that explicitly enable caching will still be cached in the Data Cache. This allows for a hybrid of cached and uncached data.\n \n ## Client-side Router Cache\n "
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}