{
    "author": "eps1lon",
    "message": "[test] `assert*` -> `waitFor*` when the util is not instant (#85450)",
    "sha": "0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
    "files": [
        {
            "sha": "030d979ce340426992e37740cbb7480db844c10a",
            "filename": "test/development/acceptance-app/ReactRefreshLogBox-builtins.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-builtins.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-builtins.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-builtins.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -304,7 +304,7 @@ describe('ReactRefreshLogBox-builtins app', () => {\n         }\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.documentElement.innerHTML)\n     ).toContain('index page')"
        },
        {
            "sha": "e1b26c39dc8c43b1ea196a00f64b62e8458022a7",
            "filename": "test/development/acceptance-app/ReactRefreshLogBox-scss.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-scss.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-scss.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-scss.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -34,17 +34,17 @@ describe.skip('ReactRefreshLogBox scss app', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     // Syntax error\n     await session.patch('index.module.scss', `.button { font-size: :5px; }`)\n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     const source = await session.getRedboxSource()\n     expect(source).toMatchSnapshot()\n \n     // Fix syntax error\n     await session.patch('index.module.scss', `.button { font-size: 5px; }`)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   test('scss module pure selector error', async () => {\n@@ -69,7 +69,7 @@ describe.skip('ReactRefreshLogBox scss app', () => {\n     // Checks for selectors that can't be prefixed.\n     // Selector \"button\" is not pure (pure selectors must contain at least one local class or id)\n     await session.patch('index.module.scss', `button { font-size: 5px; }`)\n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     const source2 = await session.getRedboxSource()\n     expect(source2).toMatchSnapshot()\n   })"
        },
        {
            "sha": "b4ebf51c2a2910eb405a2b5af7d3e7ef39ddf22c",
            "filename": "test/development/acceptance-app/ReactRefreshLogBox.test.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -265,7 +265,7 @@ describe('ReactRefreshLogBox app', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     await session.patch(\n       'index.js',\n@@ -388,7 +388,7 @@ describe('ReactRefreshLogBox app', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('hello')\n@@ -452,7 +452,7 @@ describe('ReactRefreshLogBox app', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('hello new')\n@@ -477,7 +477,7 @@ describe('ReactRefreshLogBox app', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     await session.patch('index.module.css', `.button`)\n \n@@ -957,7 +957,7 @@ describe('ReactRefreshLogBox app', () => {\n         }\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await session.patch(\n       'index.js',\n       outdent`\n@@ -985,7 +985,7 @@ describe('ReactRefreshLogBox app', () => {\n         }\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await session.patch(\n       'index.js',\n       outdent`\n@@ -1011,7 +1011,7 @@ describe('ReactRefreshLogBox app', () => {\n         }\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await session.patch(\n       'index.js',\n       outdent`\n@@ -1131,7 +1131,7 @@ describe('ReactRefreshLogBox app', () => {\n     await retry(async () => {\n       expect(await getToastErrorCount(browser)).toBe(4)\n     })\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     // Add Component error\n     await session.patch(\n@@ -1363,7 +1363,7 @@ describe('ReactRefreshLogBox app', () => {\n     expect(await browser.waitForElementByCss('#text').text()).toBe(\n       'Hello world'\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     // Re-add error\n     await session.patch(\n@@ -1544,7 +1544,7 @@ describe('ReactRefreshLogBox app', () => {\n \n       await retry(async () => {\n         // Should use `await expect(browser).toDisplayRedbox()`\n-        await session.assertHasRedbox()\n+        await session.waitForRedbox()\n       })\n \n       if (isRspack) {\n@@ -1589,7 +1589,7 @@ describe('ReactRefreshLogBox app', () => {\n         'index.js',\n         'export default function Page() {return <p>hello world</p>}'\n       )\n-      await session.assertNoRedbox()\n+      await session.waitForNoRedbox()\n     })\n   }\n "
        },
        {
            "sha": "a3917313cd506101705fc2e0a3a887e208ee2e35",
            "filename": "test/development/acceptance-app/ReactRefreshModule.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshModule.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshModule.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshModule.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -12,7 +12,7 @@ describe('ReactRefreshModule app', () => {\n   it('should allow any variable names', async () => {\n     await using sandbox = await createSandbox(next, new Map([]))\n     const { session } = sandbox\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     const variables = [\n       '_a',\n@@ -34,7 +34,7 @@ describe('ReactRefreshModule app', () => {\n           }\n         `\n       )\n-      await session.assertNoRedbox()\n+      await session.waitForNoRedbox()\n       expect(next.cliOutput).not.toContain(\n         `'${variable}' has already been declared`\n       )"
        },
        {
            "sha": "8696335e7323864cae12cf64d1127ad889156314",
            "filename": "test/development/acceptance-app/ReactRefreshRegression.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshRegression.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2FReactRefreshRegression.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshRegression.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -76,7 +76,7 @@ describe('ReactRefreshRegression app', () => {\n     )\n \n     // Verify no hydration mismatch:\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   // https://github.com/vercel/next.js/issues/13978\n@@ -277,7 +277,7 @@ describe('ReactRefreshRegression app', () => {\n       `export default function () { throw new Error('boom'); }`\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n \n     const source = await session.getRedboxSource()\n     expect(source.split(/\\r?\\n/g).slice(2).join('\\n').replace(/^\\n+/, ''))\n@@ -296,7 +296,7 @@ describe('ReactRefreshRegression app', () => {\n       `export default function Page() { throw new Error('boom'); }`\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n \n     const source = await session.getRedboxSource()\n     expect(source.split(/\\r?\\n/g).slice(2).join('\\n').replace(/^\\n+/, ''))\n@@ -318,7 +318,7 @@ describe('ReactRefreshRegression app', () => {\n       `\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n \n     const source = await session.getRedboxSource()\n     expect(source.split(/\\r?\\n/g).slice(2).join('\\n').replace(/^\\n+/, ''))\n@@ -366,7 +366,7 @@ describe('ReactRefreshRegression app', () => {\n \n     let didNotReload = await session.patch('app/content.mdx', `Hello Foo!`)\n     expect(didNotReload).toBe(true)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(\n         () => document.querySelector('#content').textContent\n@@ -375,7 +375,7 @@ describe('ReactRefreshRegression app', () => {\n \n     didNotReload = await session.patch('app/content.mdx', `Hello Bar!`)\n     expect(didNotReload).toBe(true)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(\n         () => document.querySelector('#content').textContent"
        },
        {
            "sha": "7a9438a741566001b3090329a4f31f36924229b5",
            "filename": "test/development/acceptance-app/app-hmr-changes.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Fapp-hmr-changes.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Fapp-hmr-changes.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fapp-hmr-changes.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -52,12 +52,12 @@ describe('Error overlay - RSC build errors', () => {\n           await session.patch(pagePath, break2.replace('break 3', '<Hello />'))\n \n           await session.patch(pagePath, break2)\n-          await session.assertHasRedbox()\n+          await session.waitForRedbox()\n \n           await session.patch(pagePath, break1)\n \n           await session.patch(pagePath, originalPage)\n-          await session.assertNoRedbox()\n+          await session.waitForNoRedbox()\n         }\n \n         expect("
        },
        {
            "sha": "2d4ffe5f62bd1584992fdca19ba3676a01a54a2f",
            "filename": "test/development/acceptance-app/editor-links.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Feditor-links.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Feditor-links.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Feditor-links.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -86,7 +86,7 @@ describe('Error overlay - editor links', () => {\n       expect(loaded).toBe(true)\n     })\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     await clickSourceFile(browser)\n     await check(() => editorRequestsCount, /1/)\n   })\n@@ -129,7 +129,7 @@ describe('Error overlay - editor links', () => {\n       `\n         )\n \n-        await session.assertHasRedbox()\n+        await session.waitForRedbox()\n         await clickImportTraceFiles(browser)\n         await check(() => editorRequestsCount, /4/)\n       })\n@@ -170,7 +170,7 @@ describe('Error overlay - editor links', () => {\n       `\n         )\n \n-        await session.assertHasRedbox()\n+        await session.waitForRedbox()\n         await clickImportTraceFiles(browser)\n         await check(() => editorRequestsCount, /3/)\n       })"
        },
        {
            "sha": "93911866bb528620fa6bf951f64be370b7344065",
            "filename": "test/development/acceptance-app/error-message-url.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Ferror-message-url.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Ferror-message-url.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Ferror-message-url.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -20,7 +20,7 @@ describe('Error overlay - error message urls', () => {\n       content + '\\nexport function getServerSideProps() {}'\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n \n     const link = await browser.elementByCss(\n       '[data-nextjs-terminal] a, [data-nextjs-codeframe] a'"
        },
        {
            "sha": "180967d8e6543bf6909be71dde78abebec97e8c4",
            "filename": "test/development/acceptance-app/error-recovery.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -115,7 +115,7 @@ describe('Error recovery app', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     await check(\n       () => session.evaluate(() => document.querySelector('p').textContent),\n@@ -384,7 +384,7 @@ describe('Error recovery app', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(await session.hasErrorToast()).toBe(false)\n \n     expect(\n@@ -395,7 +395,7 @@ describe('Error recovery app', () => {\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Count: 2')\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(await session.hasErrorToast()).toBe(false)\n   })\n \n@@ -472,7 +472,7 @@ describe('Error recovery app', () => {\n \n     // TODO-APP: re-enable when error recovery doesn't reload the page.\n     // expect(didNotReload).toBe(true)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Hello')\n@@ -566,7 +566,7 @@ describe('Error recovery app', () => {\n \n     // TODO-APP: re-enable when error recovery doesn't reload the page.\n     // expect(didNotReload).toBe(true)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Hello')\n@@ -868,7 +868,7 @@ describe('Error recovery app', () => {\n     )\n \n     // Expected: this fixes the problem\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   // https://github.com/pmmmwh/react-refresh-webpack-plugin/pull/3#issuecomment-554137262"
        },
        {
            "sha": "507ac88920b857910bd302849a9791c918296855",
            "filename": "test/development/acceptance-app/hydration-error.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -3,7 +3,7 @@ import { FileRef, nextTestSetup } from 'e2e-utils'\n import path from 'path'\n import { outdent } from 'outdent'\n import {\n-  assertNoRedbox,\n+  waitForNoRedbox,\n   getRedboxErrorLink,\n   getToastErrorCount,\n   retry,\n@@ -89,7 +89,7 @@ describe('Error overlay for hydration errors in App router', () => {\n       }\n     `,\n       async () => {\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n         expect(await browser.elementByCss('.child').text()).toBe('Value')\n       }\n     )"
        },
        {
            "sha": "74f1ce7f52ea814546dad6f0765a7916a6996691",
            "filename": "test/development/acceptance-app/invalid-imports.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Finvalid-imports.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Finvalid-imports.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Finvalid-imports.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -63,7 +63,7 @@ describe('Error Overlay invalid imports', () => {\n     const withoutUseClient = content.replace(\"'use client'\", '')\n     await session.patch(pageFile, withoutUseClient)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     if (process.env.IS_TURBOPACK_TEST) {\n       expect(await session.getRedboxSource()).toMatchInlineSnapshot(`\n         \"./app\n@@ -157,7 +157,7 @@ describe('Error Overlay invalid imports', () => {\n     const withoutUseClient = content.replace(\"'use client'\", '')\n     await session.patch(pageFile, withoutUseClient)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     if (process.env.IS_TURBOPACK_TEST) {\n       expect(await session.getRedboxSource()).toMatchInlineSnapshot(`\n         \"./node_modules/client-only-package\n@@ -249,7 +249,7 @@ describe('Error Overlay invalid imports', () => {\n     const content = await next.readFile(file)\n     await session.patch(file, \"'use client'\\n\" + content)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     if (process.env.IS_TURBOPACK_TEST) {\n       expect(await session.getRedboxSource()).toMatchInlineSnapshot(`\n         \"./node_modules/server-only-package"
        },
        {
            "sha": "8f4caaca937ccc84fdfb77b67fc70361629bdb58",
            "filename": "test/development/acceptance-app/rsc-build-errors.test.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 22,
            "changes": 44,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Frsc-build-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Frsc-build-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Frsc-build-errors.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -24,7 +24,7 @@ describe('Error overlay - RSC build errors', () => {\n     )\n     await session.patch(pageFile, uncomment)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxSource()).toInclude(\n       '\"getServerSideProps\" is not supported in app/'\n     )\n@@ -46,29 +46,29 @@ describe('Error overlay - RSC build errors', () => {\n       'export const metadata'\n     )\n     await session.patch(pageFile, uncomment)\n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxSource()).toInclude(\n       'You are attempting to export \"metadata\" from a component marked with \"use client\", which is disallowed.'\n     )\n \n     // Restore file\n     await session.patch(pageFile, content)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     // Add `generateMetadata` error\n     uncomment = content.replace(\n       '// export async function generateMetadata',\n       'export async function generateMetadata'\n     )\n     await session.patch(pageFile, uncomment)\n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxSource()).toInclude(\n       'You are attempting to export \"generateMetadata\" from a component marked with \"use client\", which is disallowed.'\n     )\n \n     // Fix the error again to test error overlay works with hmr rebuild\n     await session.patch(pageFile, content)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   it('should throw an error when metadata exports are used together in server components', async () => {\n@@ -86,7 +86,7 @@ describe('Error overlay - RSC build errors', () => {\n     )\n \n     await session.patch(pageFile, uncomment)\n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxSource()).toInclude(\n       '\"metadata\" and \"generateMetadata\" cannot be exported at the same time, please keep one of them.'\n     )\n@@ -109,7 +109,7 @@ describe('Error overlay - RSC build errors', () => {\n     await session.patch(pageFile, uncomment)\n     await next.patchFile(pageFile, content)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxSource()).toInclude(\n       '\"getStaticProps\" is not supported in app/'\n     )\n@@ -127,7 +127,7 @@ describe('Error overlay - RSC build errors', () => {\n     const uncomment = content.replace(\"// 'use client'\", \"'use client'\")\n     await next.patchFile(pageFile, uncomment)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxSource()).toInclude(\n       'directive must be placed before other expressions'\n     )\n@@ -148,7 +148,7 @@ describe('Error overlay - RSC build errors', () => {\n     )\n     await session.patch(pageFile, uncomment)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxSource()).toInclude(\n       `Youâ€™re importing a class component. It only works in a Client Component`\n     )\n@@ -170,7 +170,7 @@ describe('Error overlay - RSC build errors', () => {\n     )\n     await next.patchFile(file, uncomment)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     if (isTurbopack) {\n       // TODO: fix the issue ordering.\n       // turbopack emits the resolve issue first instead of the transform issue.\n@@ -224,7 +224,7 @@ describe('Error overlay - RSC build errors', () => {\n         `/server-with-errors/react-apis/${api.toLowerCase()}`\n       )\n       const { session } = sandbox\n-      await session.assertHasRedbox()\n+      await session.waitForRedbox()\n       expect(await session.getRedboxSource()).toInclude(\n         // `Component` has a custom error message\n         api === 'Component'\n@@ -248,7 +248,7 @@ describe('Error overlay - RSC build errors', () => {\n         `/server-with-errors/react-dom-apis/${api.toLowerCase()}`\n       )\n       const { session } = sandbox\n-      await session.assertHasRedbox()\n+      await session.waitForRedbox()\n       expect(await session.getRedboxSource()).toInclude(\n         `You're importing a component that needs \\`${api}\\`. This React Hook only works in a Client Component. To fix, mark the file (or its parent) with the \\`\"use client\"\\` directive.`\n       )\n@@ -272,7 +272,7 @@ describe('Error overlay - RSC build errors', () => {\n \n     await session.patch(file, uncomment)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxSource()).toInclude(\n       `You're importing a component that needs \"server-only\". That only works in a Server Component but one of its parents is marked with \"use client\", so it's a Client Component.`\n     )\n@@ -288,7 +288,7 @@ describe('Error overlay - RSC build errors', () => {\n           `/server-with-errors/next-cache-in-client/${api.toLowerCase()}`\n         )\n         const { session } = sandbox\n-        await session.assertHasRedbox()\n+        await session.waitForRedbox()\n         expect(await session.getRedboxSource()).toInclude(\n           `You're importing a component that needs \"${api}\". That only works in a Server Component but one of its parents is marked with \"use client\", so it's a Client Component.`\n         )\n@@ -305,7 +305,7 @@ describe('Error overlay - RSC build errors', () => {\n         `/server-with-errors/next-cache-in-client/${api.toLowerCase()}`\n       )\n       const { session } = sandbox\n-      await session.assertNoRedbox()\n+      await session.waitForNoRedbox()\n     })\n   })\n \n@@ -319,7 +319,7 @@ describe('Error overlay - RSC build errors', () => {\n         `/server-with-errors/next-root-params/without-flag`\n       )\n       const { session } = sandbox\n-      await session.assertHasRedbox()\n+      await session.waitForRedbox()\n       if (!isCacheComponentsEnabled) {\n         expect(await session.getRedboxSource()).toInclude(\n           `'next/root-params' can only be imported when \\`experimental.rootParams\\` is enabled.`\n@@ -351,7 +351,7 @@ describe('Error overlay - RSC build errors', () => {\n         `/server-with-errors/next-root-params/in-client`\n       )\n       const { session } = sandbox\n-      await session.assertHasRedbox()\n+      await session.waitForRedbox()\n       expect(await session.getRedboxSource()).toInclude(\n         `You're importing a component that needs \"next/root-params\". That only works in a Server Component but one of its parents is marked with \"use client\", so it's a Client Component.`\n       )\n@@ -374,7 +374,7 @@ describe('Error overlay - RSC build errors', () => {\n         `/server-with-errors/next-root-params/in-client-await-import`\n       )\n       const { session } = sandbox\n-      await session.assertHasRedbox()\n+      await session.waitForRedbox()\n       expect(await session.getRedboxSource()).toInclude(\n         `'next/root-params' cannot be imported from a Client Component module. It should only be used from a Server Component.`\n       )\n@@ -395,7 +395,7 @@ describe('Error overlay - RSC build errors', () => {\n       content.replace('() => <p>hello dynamic world</p>', 'undefined')\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     expect(await session.getRedboxDescription()).toInclude(\n       `Element type is invalid. Received a promise that resolves to: undefined. Lazy element type must resolve to a class or function.`\n     )\n@@ -414,7 +414,7 @@ describe('Error overlay - RSC build errors', () => {\n       'export default function Error() {}'\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     await expect(session.getRedboxSource()).resolves.toMatch(\n       /must be a Client \\n| Component/\n     )\n@@ -464,7 +464,7 @@ describe('Error overlay - RSC build errors', () => {\n     // Empty file\n     await session.patch('app/server-with-errors/error-file/error.js', '')\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     await expect(session.getRedboxSource()).resolves.toMatch(\n       /Add the \"use client\"/\n     )\n@@ -511,7 +511,7 @@ describe('Error overlay - RSC build errors', () => {\n     const { session } = sandbox\n     await session.patch(pagePath, content)\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n \n     expect(await session.getRedboxDescription()).toContain(\n       'Cannot add property x, object is not extensible'"
        },
        {
            "sha": "7b9f6a7dffbc6b67dc438e15ec841e44ee205c07",
            "filename": "test/development/acceptance-app/server-components.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Fserver-components.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance-app%2Fserver-components.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fserver-components.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -520,7 +520,7 @@ describe('Error Overlay for server components', () => {\n         ])\n       )\n       const { session } = sandbox\n-      await session.assertHasRedbox()\n+      await session.waitForRedbox()\n       // In webpack when the message too long it gets truncated with `  | ` with new lines.\n       // So we need to check for the first part of the message.\n       const normalizedSource = await session.getRedboxSource()\n@@ -552,7 +552,7 @@ describe('Error Overlay for server components', () => {\n           ])\n         )\n         const { session } = sandbox\n-        await session.assertHasRedbox()\n+        await session.waitForRedbox()\n         // In webpack when the message too long it gets truncated with `  | ` with new lines.\n         // So we need to check for the first part of the message.\n         const normalizedSource = await session.getRedboxSource()"
        },
        {
            "sha": "a303a28cc5af4e4f3c196d1ff5a515f72a299fd4",
            "filename": "test/development/acceptance/ReactRefreshLogBox-app-doc.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-app-doc.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-app-doc.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-app-doc.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -36,7 +36,7 @@ describe('ReactRefreshLogBox _app _document', () => {\n         export default MyApp\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   test('empty _document shows logbox', async () => {\n@@ -83,7 +83,7 @@ describe('ReactRefreshLogBox _app _document', () => {\n         export default MyDocument\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   test('_app syntax error shows logbox', async () => {\n@@ -186,7 +186,7 @@ describe('ReactRefreshLogBox _app _document', () => {\n         export default MyApp\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   test('_document syntax error shows logbox', async () => {\n@@ -312,6 +312,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n         export default MyDocument\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n })"
        },
        {
            "sha": "a14e77f8a35d6a058606e31d0eef2020169b29b4",
            "filename": "test/development/acceptance/ReactRefreshLogBox-builtins.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-builtins.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-builtins.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-builtins.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -310,7 +310,7 @@ describe('ReactRefreshLogBox', () => {\n         }\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.documentElement.innerHTML)\n     ).toContain('index page')"
        },
        {
            "sha": "36406a0150503e1327e58aa49c8424765b2b0d66",
            "filename": "test/development/acceptance/ReactRefreshLogBox-scss.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-scss.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-scss.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-scss.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -33,11 +33,11 @@ describe.skip('ReactRefreshLogBox scss', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     // Syntax error\n     await session.patch('index.module.scss', `.button { font-size: :5px; }`)\n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     const source = await session.getRedboxSource()\n     expect(source).toMatchSnapshot()\n   })\n@@ -64,7 +64,7 @@ describe.skip('ReactRefreshLogBox scss', () => {\n     // Checks for selectors that can't be prefixed.\n     // Selector \"button\" is not pure (pure selectors must contain at least one local class or id)\n     await session.patch('index.module.scss', `button { font-size: 5px; }`)\n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     const source2 = await session.getRedboxSource()\n     expect(source2).toMatchSnapshot()\n   })"
        },
        {
            "sha": "2192fdc8502dccfbb79906e12e3b8b50eb8bd600",
            "filename": "test/development/acceptance/ReactRefreshLogBox.test.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -425,7 +425,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     await session.patch(\n       'index.js',\n@@ -547,7 +547,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('hello')\n@@ -664,7 +664,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('hello new')\n@@ -689,7 +689,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     // Syntax error\n     await session.patch('index.module.css', `.button`)\n@@ -829,7 +829,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await browser.elementByCss('button').click()\n \n     if (isReact18) {\n@@ -880,7 +880,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await browser.elementByCss('button').click()\n \n     if (isReact18) {\n@@ -931,7 +931,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await browser.elementByCss('button').click()\n \n     if (isReact18) {\n@@ -982,7 +982,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await browser.elementByCss('button').click()\n \n     if (isReact18) {\n@@ -1033,7 +1033,7 @@ describe('ReactRefreshLogBox', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await browser.elementByCss('button').click()\n \n     if (isReact18) {\n@@ -1116,7 +1116,7 @@ describe('ReactRefreshLogBox', () => {\n         }\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await session.patch(\n       'index.js',\n       outdent`\n@@ -1166,7 +1166,7 @@ describe('ReactRefreshLogBox', () => {\n         }\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await session.patch(\n       'index.js',\n       outdent`\n@@ -1212,7 +1212,7 @@ describe('ReactRefreshLogBox', () => {\n         }\n       `\n     )\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     await session.patch(\n       'index.js',\n       outdent`"
        },
        {
            "sha": "2d0b433a8b1d7cc5c4a1b6b9c990e03f91b4f9d6",
            "filename": "test/development/acceptance/ReactRefreshModule.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshModule.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshModule.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshModule.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -11,7 +11,7 @@ describe('ReactRefreshModule', () => {\n   it('should allow any variable names', async () => {\n     await using sandbox = await createSandbox(next)\n     const { session } = sandbox\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     const variables = [\n       '_a',\n@@ -30,7 +30,7 @@ describe('ReactRefreshModule', () => {\n           return null\n         }`\n       )\n-      await session.assertNoRedbox()\n+      await session.waitForNoRedbox()\n       expect(next.cliOutput).not.toContain(\n         `'${variable}' has already been declared`\n       )"
        },
        {
            "sha": "d9eb408da6f79d84150c2457fbfb11bae46c14ac",
            "filename": "test/development/acceptance/ReactRefreshRegression.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshRegression.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2FReactRefreshRegression.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshRegression.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -76,7 +76,7 @@ describe('ReactRefreshRegression', () => {\n     )\n \n     // Verify no hydration mismatch:\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   // https://github.com/vercel/next.js/issues/13978\n@@ -341,7 +341,7 @@ describe('ReactRefreshRegression', () => {\n \n     let didNotReload = await session.patch('pages/mdx.mdx', `Hello Foo!`)\n     expect(didNotReload).toBe(true)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(\n         () => document.querySelector('#__next').textContent\n@@ -350,7 +350,7 @@ describe('ReactRefreshRegression', () => {\n \n     didNotReload = await session.patch('pages/mdx.mdx', `Hello Bar!`)\n     expect(didNotReload).toBe(true)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(\n         () => document.querySelector('#__next').textContent"
        },
        {
            "sha": "1c07c0437c6ea7b23ad837e2e3de2407ac1eb0bb",
            "filename": "test/development/acceptance/error-recovery.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -122,7 +122,7 @@ describe('pages/ error recovery', () => {\n       /Count: 1/\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   test('logbox: can recover from a event handler error', async () => {\n@@ -189,7 +189,7 @@ describe('pages/ error recovery', () => {\n       `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n@@ -199,7 +199,7 @@ describe('pages/ error recovery', () => {\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Count: 2')\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   it('logbox: can recover from a component error', async () => {\n@@ -342,7 +342,7 @@ describe('pages/ error recovery', () => {\n     )\n \n     expect(didNotReload).toBe(true)\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Hello')\n@@ -725,7 +725,7 @@ describe('pages/ error recovery', () => {\n     )\n \n     // Expected: this fixes the problem\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n \n   // https://github.com/pmmmwh/react-refresh-webpack-plugin/pull/3#issuecomment-554150098"
        },
        {
            "sha": "a6b50da069be52a1cfd166dbfb9dfe26a35bbe57",
            "filename": "test/development/acceptance/hydration-error.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -141,7 +141,7 @@ describe('Error overlay for hydration errors in Pages router', () => {\n     `\n     )\n \n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n \n     expect(await browser.elementByCss('.child').text()).toBe('Value')\n   })\n@@ -1175,6 +1175,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n     )\n     const { session } = sandbox\n     // FIXME: Should have a redbox just like with App router\n-    await session.assertNoRedbox()\n+    await session.waitForNoRedbox()\n   })\n })"
        },
        {
            "sha": "fd9b2066201de853083f21d66c7feca248d63b5b",
            "filename": "test/development/acceptance/server-component-compiler-errors-in-pages.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2Fserver-component-compiler-errors-in-pages.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Facceptance%2Fserver-component-compiler-errors-in-pages.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2Fserver-component-compiler-errors-in-pages.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -46,7 +46,7 @@ describe('Error Overlay for server components compiler errors in pages', () => {\n       `\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     await expect(session.getRedboxSource()).resolves.toMatch(\n       /That only works in a Server Component/\n     )\n@@ -130,7 +130,7 @@ describe('Error Overlay for server components compiler errors in pages', () => {\n       `\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     await expect(session.getRedboxSource()).resolves.toMatch(\n       /That only works in a Server Component/\n     )\n@@ -216,7 +216,7 @@ describe('Error Overlay for server components compiler errors in pages', () => {\n       `\n     )\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     await expect(session.getRedboxSource()).resolves.toMatch(\n       /That only works in a Server Component/\n     )\n@@ -311,7 +311,7 @@ describe('Error Overlay for server components compiler errors in pages', () => {\n     await using sandbox = await createSandbox(next, files)\n     const { session } = sandbox\n \n-    await session.assertHasRedbox()\n+    await session.waitForRedbox()\n     await expect(session.getRedboxSource()).resolves.toMatch(\n       /That only works in a Server Component/\n     )\n@@ -403,7 +403,7 @@ describe('Error Overlay for server components compiler errors in pages', () => {\n         `\n       )\n \n-      await session.assertHasRedbox()\n+      await session.waitForRedbox()\n       await expect(session.getRedboxSource()).resolves.toMatch(\n         `You're importing a component that needs \"${api}\". That only works in a Server Component which is not supported in the pages/ directory.`\n       )\n@@ -427,7 +427,7 @@ describe('Error Overlay for server components compiler errors in pages', () => {\n         `\n       )\n \n-      await session.assertNoRedbox()\n+      await session.waitForNoRedbox()\n     })\n   })\n })"
        },
        {
            "sha": "e277c214c4a6c51b5ee006c6abcbde8a1d1ebff5",
            "filename": "test/development/app-dir/basic/basic.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fbasic%2Fbasic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fbasic%2Fbasic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fbasic%2Fbasic.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n import { waitForHydration } from 'development-sandbox'\n \n describe('basic app-dir tests', () => {\n@@ -12,6 +12,6 @@ describe('basic app-dir tests', () => {\n     await browser.refresh()\n     await waitForHydration(browser)\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n })"
        },
        {
            "sha": "bd42324df9cdc1fca2748f6f53f42273369331cd",
            "filename": "test/development/app-dir/cache-components-dev-cache-scope/cache-components-dev-cache-scope.test.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-cache-scope%2Fcache-components-dev-cache-scope.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-cache-scope%2Fcache-components-dev-cache-scope.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-cache-scope%2Fcache-components-dev-cache-scope.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -2,7 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n import {\n   getRedboxDescription,\n   openRedbox,\n-  assertNoRedbox,\n+  waitForNoRedbox,\n   retry,\n } from 'next-test-utils'\n \n@@ -13,27 +13,27 @@ describe('Cache Components Dev Errors', () => {\n \n   it('should not show a red box error on the SSR render', async () => {\n     const browser = await next.browser('/cached')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     let latestValue = await browser.elementByCss('#value').text()\n \n     await browser.refresh()\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     let priorValue = latestValue\n     latestValue = await browser.elementByCss('#value').text()\n \n     expect(latestValue).toBe(priorValue)\n \n     await browser.elementByCss('#refresh').click()\n     await retry(async () => {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       let priorValue = latestValue\n       latestValue = await browser.elementByCss('#value').text()\n       expect(latestValue).not.toBe(priorValue)\n     })\n \n     await browser.elementByCss('#refresh').click()\n     await retry(async () => {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       let priorValue = latestValue\n       latestValue = await browser.elementByCss('#value').text()\n       expect(latestValue).not.toBe(priorValue)\n@@ -45,23 +45,23 @@ describe('Cache Components Dev Errors', () => {\n \n     // await browser.elementByCss('#reload').click()\n     // await retry(async () => {\n-    //   await assertNoRedbox(browser)\n+    //   await waitForNoRedbox(browser)\n     //   let priorValue = latestValue\n     //   latestValue = await browser.elementByCss('#value').text()\n     //   expect(latestValue).toBe(priorValue)\n     // })\n \n     // await browser.elementByCss('#reload').click()\n     // await retry(async () => {\n-    //   await assertNoRedbox(browser)\n+    //   await waitForNoRedbox(browser)\n     //   let priorValue = latestValue\n     //   latestValue = await browser.elementByCss('#value').text()\n     //   expect(latestValue).toBe(priorValue)\n     // })\n \n     // await browser.elementByCss('#refresh').click()\n     // await retry(async () => {\n-    //   await assertNoRedbox(browser)\n+    //   await waitForNoRedbox(browser)\n     //   let priorValue = latestValue\n     //   latestValue = await browser.elementByCss('#value').text()\n     //   expect(latestValue).not.toBe(priorValue)"
        },
        {
            "sha": "63d907ee710b8cc7e9493576fdfbf4f436359d29",
            "filename": "test/development/app-dir/cache-components-dev-errors/cache-components-dev-errors.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n import stripAnsi from 'strip-ansi'\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertNoRedbox,\n-  assertNoErrorToast,\n+  waitForNoRedbox,\n+  waitForNoErrorToast,\n   hasErrorToast,\n   retry,\n } from 'next-test-utils'\n@@ -44,7 +44,7 @@ describe('Cache Components Dev Errors', () => {\n     })\n \n     await browser.elementByCss(\"[href='/error']\").click()\n-    await assertNoErrorToast(browser)\n+    await waitForNoErrorToast(browser)\n \n     await browser.loadPage(`${next.url}/error`)\n \n@@ -175,6 +175,6 @@ describe('Cache Components Dev Errors', () => {\n       }\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n })"
        },
        {
            "sha": "8f4e2f93b58357aa00a9077076791a143596a200",
            "filename": "test/development/app-dir/cache-components-dev-fallback-validation/cache-components-dev-fallback-validation.test.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-fallback-validation%2Fcache-components-dev-fallback-validation.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-fallback-validation%2Fcache-components-dev-fallback-validation.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-fallback-validation%2Fcache-components-dev-fallback-validation.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('Cache Components Fallback Validation', () => {\n   const { isTurbopack, next } = nextTestSetup({\n@@ -12,24 +12,24 @@ describe('Cache Components Fallback Validation', () => {\n     const browser = await next.browser(\n       '/complete/prerendered/wrapped/prerendered'\n     )\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.loadPage(`${next.url}/complete/prerendered/wrapped/novel`)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.loadPage(`${next.url}/complete/novel/wrapped/novel`)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.loadPage(\n       `${next.url}/complete/prerendered/unwrapped/prerendered`\n     )\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.loadPage(`${next.url}/complete/prerendered/unwrapped/novel`)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.loadPage(`${next.url}/complete/novel/unwrapped/novel`)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should warn about missing Suspense when accessing params if static params are partially known at build time', async () => {\n@@ -38,13 +38,13 @@ describe('Cache Components Fallback Validation', () => {\n     const browser = await next.browser(\n       '/partial/prerendered/wrapped/prerendered'\n     )\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.loadPage(`${next.url}/partial/prerendered/wrapped/novel`)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.loadPage(`${next.url}/partial/novel/wrapped/novel`)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.loadPage(\n       `${next.url}/partial/prerendered/unwrapped/prerendered`"
        },
        {
            "sha": "e50b2c5b98e9b4a50b9dcc443b0c90dc80aa1061",
            "filename": "test/development/app-dir/capture-console-error-owner-stack/capture-console-error-owner-stack.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, assertNoConsoleErrors } from 'next-test-utils'\n+import { waitForNoRedbox, assertNoConsoleErrors } from 'next-test-utils'\n \n describe('app-dir - capture-console-error-owner-stack', () => {\n   const { next } = nextTestSetup({\n@@ -122,7 +122,7 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n     const browser = await next.browser('/browser/error-event')\n     await browser.elementByCss('button').click()\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     await assertNoConsoleErrors(browser)\n   })\n })"
        },
        {
            "sha": "50d6c98ac37c55dc8dc217c244a739704588fa92",
            "filename": "test/development/app-dir/dev-indicator/hide-button.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fhide-button.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fhide-button.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fhide-button.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasDevToolsIndicator,\n+  waitForDevToolsIndicator,\n   assertNoDevToolsIndicator,\n-  openDevToolsIndicatorPopover,\n+  toggleDevToolsIndicatorPopover,\n   waitFor,\n } from 'next-test-utils'\n \n@@ -19,7 +19,7 @@ describe('dev indicator - Hide DevTools Button', () => {\n   it('should show the dev indicator when the server is manually restarted', async () => {\n     const browser = await next.browser('/')\n \n-    await openDevToolsIndicatorPopover(browser)\n+    await toggleDevToolsIndicatorPopover(browser)\n     await browser.elementByCss('[data-preferences]').click()\n     await browser.elementByCss('[data-hide-dev-tools]').click()\n \n@@ -30,13 +30,13 @@ describe('dev indicator - Hide DevTools Button', () => {\n \n     const browser2 = await next.browser('/')\n     await browser2.refresh()\n-    await assertHasDevToolsIndicator(browser2)\n+    await waitForDevToolsIndicator(browser2)\n   })\n \n   it('should still hide the dev indicator after reloading the page', async () => {\n     const browser = await next.browser('/')\n \n-    await openDevToolsIndicatorPopover(browser)\n+    await toggleDevToolsIndicatorPopover(browser)\n     await browser.elementByCss('[data-preferences]').click()\n     await browser.elementByCss('[data-hide-dev-tools]').click()\n \n@@ -52,7 +52,7 @@ describe('dev indicator - Hide DevTools Button', () => {\n \n     const browser = await next.browser('/')\n \n-    await openDevToolsIndicatorPopover(browser)\n+    await toggleDevToolsIndicatorPopover(browser)\n     await browser.elementByCss('[data-preferences]').click()\n     await browser.elementByCss('[data-hide-dev-tools]').click()\n \n@@ -62,6 +62,6 @@ describe('dev indicator - Hide DevTools Button', () => {\n     await waitFor(COOLDOWN)\n \n     await browser.refresh()\n-    await assertHasDevToolsIndicator(browser)\n+    await waitForDevToolsIndicator(browser)\n   })\n })"
        },
        {
            "sha": "1e2c60c9077bd593218f9a35fa46fbced28f51f6",
            "filename": "test/development/app-dir/dev-indicator/route-type.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 11,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Froute-type.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Froute-type.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Froute-type.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertStaticIndicator, retry } from 'next-test-utils'\n+import { waitForStaticIndicator } from 'next-test-utils'\n \n describe('app dir dev indicator - route type', () => {\n   const { next } = nextTestSetup({\n@@ -9,9 +9,7 @@ describe('app dir dev indicator - route type', () => {\n   it('should have route type as static by default for static page', async () => {\n     const browser = await next.browser('/')\n \n-    await retry(async () => {\n-      await assertStaticIndicator(browser, 'Static')\n-    })\n+    await waitForStaticIndicator(browser, 'Static')\n   })\n \n   it('should have route type as dynamic when changing to dynamic page', async () => {\n@@ -24,9 +22,7 @@ describe('app dir dev indicator - route type', () => {\n     )\n \n     try {\n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n     } finally {\n       await next.patchFile('app/page.tsx', origContent)\n     }\n@@ -43,9 +39,7 @@ describe('app dir dev indicator - route type', () => {\n     const browser = await next.browser('/')\n \n     try {\n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n     } finally {\n       await next.patchFile('app/page.tsx', origContent)\n     }\n@@ -56,6 +50,6 @@ describe('app dir dev indicator - route type', () => {\n \n     await browser.waitForElementByCss('#ready')\n \n-    await assertStaticIndicator(browser, 'Dynamic')\n+    await waitForStaticIndicator(browser, 'Dynamic')\n   })\n })"
        },
        {
            "sha": "be09d57caa73bfee20aa49272338314928550214",
            "filename": "test/development/app-dir/devtools-position/utils.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fdevtools-position%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fdevtools-position%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdevtools-position%2Futils.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,9 +1,9 @@\n import type { Playwright } from '../../../lib/next-webdriver'\n-import { assertHasDevToolsIndicator } from 'next-test-utils'\n+import { waitForDevToolsIndicator } from 'next-test-utils'\n \n export async function getDevIndicatorPosition(browser: Playwright) {\n   // assert before eval() to prevent race condition\n-  await assertHasDevToolsIndicator(browser)\n+  await waitForDevToolsIndicator(browser)\n \n   const style = await browser.eval(() => {\n     return ("
        },
        {
            "sha": "0b989d60cd55dbe7181b9447b4e8928700d6e5a1",
            "filename": "test/development/app-dir/edge-errors-hmr/index.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fedge-errors-hmr%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fedge-errors-hmr%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fedge-errors-hmr%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, assertNoRedbox } from 'next-test-utils'\n+import { waitForRedbox, waitForNoRedbox } from 'next-test-utils'\n \n describe('develop - app-dir - edge errros hmr', () => {\n   const { next } = nextTestSetup({\n@@ -14,11 +14,11 @@ describe('develop - app-dir - edge errros hmr', () => {\n       return content.replace('{/* < */}', '<') // uncomment\n     })\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n \n     await next.patchFile('app/comp.server.js', clientComponentSource)\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should recover from build errors when client component error', async () => {\n@@ -29,10 +29,10 @@ describe('develop - app-dir - edge errros hmr', () => {\n       return content.replace('{/* < */}', '<') // uncomment\n     })\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n \n     await next.patchFile('app/comp.client.js', clientComponentSource)\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n })"
        },
        {
            "sha": "fd3fe55555fb319d1d0f75f7cdde88002f07c371",
            "filename": "test/development/app-dir/error-overlay/async-client-component/async-client-component.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Fasync-client-component%2Fasync-client-component.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Fasync-client-component%2Fasync-client-component.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Fasync-client-component%2Fasync-client-component.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n /* eslint-env jest */\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('app-dir - async-client-component', () => {\n   const { next } = nextTestSetup({\n@@ -37,7 +37,7 @@ describe('app-dir - async-client-component', () => {\n   it('app router server component async module', async () => {\n     const browser = await next.browser('/server')\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     expect(await browser.elementByCss('#app-router-value').text()).toBe('hello')\n   })"
        },
        {
            "sha": "0ffd5ecf90aa44f718a046e9d993611eb301aced",
            "filename": "test/development/app-dir/error-overlay/error-ignored-frames/error-ignored-frames.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getStackFramesContent,\n   toggleCollapseCallStackFrames,\n } from 'next-test-utils'\n@@ -12,7 +12,7 @@ describe('error-ignored-frames', () => {\n \n   it('should be able to collapse ignored frames in server component', async () => {\n     const browser = await next.browser('/')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n \n     const defaultStack = await getStackFramesContent(browser)\n     expect(defaultStack).toMatchInlineSnapshot(`\"at Page (app/page.tsx (2:9))\"`)\n@@ -29,7 +29,7 @@ describe('error-ignored-frames', () => {\n \n   it('should be able to collapse ignored frames in client component', async () => {\n     const browser = await next.browser('/client')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n \n     const defaultStack = await getStackFramesContent(browser)\n     expect(defaultStack).toMatchInlineSnapshot(\n@@ -48,7 +48,7 @@ describe('error-ignored-frames', () => {\n \n   it('should be able to collapse ignored frames in interleaved call stack', async () => {\n     const browser = await next.browser('/interleaved')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n \n     const defaultStack = await getStackFramesContent(browser)\n     if (isTurbopack) {\n@@ -75,7 +75,7 @@ describe('error-ignored-frames', () => {\n \n   it('should be able to collapse pages router ignored frames', async () => {\n     const browser = await next.browser('/pages')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n \n     const defaultStack = await getStackFramesContent(browser)\n     expect(defaultStack).toMatchInlineSnapshot("
        },
        {
            "sha": "34036667500793387f3ed70ec11635e8101d4ae7",
            "filename": "test/development/app-dir/externalize-node-binary-browser-error/externalize-node-binary-browser-error.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fexternalize-node-binary-browser-error%2Fexternalize-node-binary-browser-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fexternalize-node-binary-browser-error%2Fexternalize-node-binary-browser-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fexternalize-node-binary-browser-error%2Fexternalize-node-binary-browser-error.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n } from 'next-test-utils'\n@@ -13,7 +13,7 @@ describe.skip('externalize-node-binary-browser-error', () => {\n \n   it('should error when import node binary on browser side', async () => {\n     const browser = await next.browser('/')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const redbox = {\n       description: await getRedboxDescription(browser),\n       source: await getRedboxSource(browser),"
        },
        {
            "sha": "08ecb1c9fa76643aa96b848c4b39e86cdb2de180",
            "filename": "test/development/app-dir/hmr-deleted-page/hmr-deleted-page.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-deleted-page%2Fhmr-deleted-page.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-deleted-page%2Fhmr-deleted-page.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhmr-deleted-page%2Fhmr-deleted-page.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { join } from 'path'\n \n import { nextTestSetup, FileRef } from 'e2e-utils'\n-import { assertHasRedbox, assertNoRedbox } from 'next-test-utils'\n+import { waitForRedbox, waitForNoRedbox } from 'next-test-utils'\n import { waitForHydration } from 'development-sandbox'\n \n describe('hmr-deleted-page', () => {\n@@ -19,12 +19,12 @@ describe('hmr-deleted-page', () => {\n     await next.deleteFile('app/page/style.css')\n     await waitForHydration(browser)\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n \n     await next.deleteFile('app/page')\n     await waitForHydration(browser)\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     expect(await browser.elementByCss('h1').text()).toBe('404')\n   })\n })"
        },
        {
            "sha": "17da6bb8cb4b8a9a74f2fa00529b723001dd99b7",
            "filename": "test/development/app-dir/hmr-move-file/hmr-move-file.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-move-file%2Fhmr-move-file.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-move-file%2Fhmr-move-file.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhmr-move-file%2Fhmr-move-file.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('HMR Move File', () => {\n   const { next } = nextTestSetup({\n@@ -17,7 +17,7 @@ describe('HMR Move File', () => {\n       content.replace('./button', './button2')\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     expect(await browser.elementByCss('#hello-world-button').text()).toBe(\n       'hello world'"
        },
        {
            "sha": "2ea8b3b0752dd879239f5896c8871fcc7b6a167e",
            "filename": "test/development/app-dir/hmr-parallel-routes/hmr-parallel-routes.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-parallel-routes%2Fhmr-parallel-routes.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-parallel-routes%2Fhmr-parallel-routes.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhmr-parallel-routes%2Fhmr-parallel-routes.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('hmr-parallel-routes', () => {\n   const { next } = nextTestSetup({\n@@ -15,15 +15,15 @@ describe('hmr-parallel-routes', () => {\n       content.replace('Bar Page', 'Bar Page Updated')\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     expect(await browser.elementByCss('#bar').text()).toBe('Bar Page Updated')\n \n     await next.patchFile('app/@foo/page.tsx', (content) =>\n       content.replace('Foo Page', 'Foo Page Updated')\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     expect(await browser.elementByCss('#foo').text()).toBe('Foo Page Updated')\n   })"
        },
        {
            "sha": "481cba5cf25378e9d9d2177879d83c1bf2c2f4e3",
            "filename": "test/development/app-dir/hmr-shared-css/hmr-shared-css.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-shared-css%2Fhmr-shared-css.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-shared-css%2Fhmr-shared-css.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhmr-shared-css%2Fhmr-shared-css.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('hmr-app-and-pages', () => {\n   const { next } = nextTestSetup({\n@@ -21,7 +21,7 @@ describe('hmr-app-and-pages', () => {\n       )\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     expect(\n       await browser.elementByCss('body').getComputedCss('background-color')\n     ).toEqual('rgb(255, 0, 0)')\n@@ -41,7 +41,7 @@ describe('hmr-app-and-pages', () => {\n       )\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     expect(\n       await browser.elementByCss('body').getComputedCss('background-color')\n     ).toEqual('rgb(255, 255, 255)')"
        },
        {
            "sha": "1a483afd91e2f23325afb145ac8fb4a292a8c13f",
            "filename": "test/development/app-dir/hmr-symlink/hmr-symlink.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-symlink%2Fhmr-symlink.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fhmr-symlink%2Fhmr-symlink.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhmr-symlink%2Fhmr-symlink.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, retry } from 'next-test-utils'\n+import { waitForNoRedbox, retry } from 'next-test-utils'\n \n // This tests file symlinks, but not directory symlinks. Directory symlinks are\n // known to break route manifest generation:\n@@ -21,7 +21,7 @@ describe('HMR symlinks', () => {\n       (content) => content.replace('symlink target', 'updated symlink target'),\n       async () => {\n         await retry(async () => {\n-          await assertNoRedbox(browser)\n+          await waitForNoRedbox(browser)\n           expect(await browser.elementByCss('h1').text()).toBe(\n             'This is the updated symlink target'\n           )\n@@ -47,7 +47,7 @@ describe('HMR symlinks', () => {\n           'app/symlink-link/page.tsx'\n         )\n         await retry(async () => {\n-          await assertNoRedbox(browser)\n+          await waitForNoRedbox(browser)\n           expect(await browser.elementByCss('h1').text()).toBe(\n             'This is the second symlink target'\n           )\n@@ -77,7 +77,7 @@ describe('HMR symlinks', () => {\n           'app/symlink-link/page.tsx'\n         )\n         await retry(async () => {\n-          await assertNoRedbox(browser)\n+          await waitForNoRedbox(browser)\n           expect(await browser.elementByCss('h1').text()).toBe(\n             'This is the second symlink target'\n           )"
        },
        {
            "sha": "c8a851b31f424874fc3ac86ebef84dd04296b4be",
            "filename": "test/development/app-dir/missing-required-html-tags/index.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getToastErrorCount,\n   hasErrorToast,\n   retry,\n@@ -12,7 +12,7 @@ describe('app-dir - missing required html tags', () => {\n \n   it('should display correct error count in dev indicator', async () => {\n     const browser = await next.browser('/')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     retry(async () => {\n       expect(await hasErrorToast(browser)).toBe(true)\n     })\n@@ -22,7 +22,7 @@ describe('app-dir - missing required html tags', () => {\n   it('should show error overlay', async () => {\n     const browser = await next.browser('/')\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     await expect(browser).toDisplayRedbox(`\n      {\n        \"description\": \"Missing <html> and <body> tags in the root layout.\n@@ -93,7 +93,7 @@ describe('app-dir - missing required html tags', () => {\n       retry(() => expect(reloaded).toBe(true), 10_000),\n     ])\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     expect(await browser.elementByCss('p').text()).toBe('hello world')\n \n     // Reintroduce the bug, but only missing html tag\n@@ -105,6 +105,6 @@ describe('app-dir - missing required html tags', () => {\n     )\n \n     // TODO(NDX-768): Should show \"missing tags\" error\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n })"
        },
        {
            "sha": "4ca6d2f5c9e075d60c3423c624dcde3999465dc8",
            "filename": "test/development/app-dir/next-after-app-invalid-usage/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fnext-after-app-invalid-usage%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fnext-after-app-invalid-usage%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fnext-after-app-invalid-usage%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n import { nextTestSetup } from 'e2e-utils'\n import * as Log from './basic/utils/log'\n-import { assertHasRedbox, getRedboxSource } from '../../../lib/next-test-utils'\n+import { waitForRedbox, getRedboxSource } from '../../../lib/next-test-utils'\n import { join } from 'path'\n \n describe('after() - invalid usages', () => {\n@@ -25,7 +25,7 @@ describe('after() - invalid usages', () => {\n   it('errors at compile time when used in a client module', async () => {\n     const session = await next.browser('/invalid-in-client')\n \n-    await assertHasRedbox(session)\n+    await waitForRedbox(session)\n     expect(await getRedboxSource(session)).toMatch(\n       /You're importing a component that needs \"?after\"?\\. That only works in a Server Component but one of its parents is marked with \"use client\", so it's a Client Component\\./\n     )"
        },
        {
            "sha": "6be3f685f1571bfca332ceeb12dcccaa8e1fe120",
            "filename": "test/development/app-dir/owner-stack/owner-stack.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, retry } from 'next-test-utils'\n+import { waitForNoRedbox, retry } from 'next-test-utils'\n \n // These stacks are not sourcemapped and therefore not ignore-listed.\n // Feel free to update internal frames in assertions.\n@@ -86,7 +86,7 @@ describe('app-dir - owner-stack', () => {\n   it('should log stitched error for browser caught errors', async () => {\n     const browser = await next.browser('/browser/caught')\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     const logs = await browser.log()\n     const errorLog = logs.find((log) => {"
        },
        {
            "sha": "84caa90c55752862d71332b580c6bb3b44d1017d",
            "filename": "test/development/app-dir/server-component-next-dynamic-ssr-false/server-component-next-dynamic-ssr-false.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n } from 'next-test-utils'\n@@ -12,7 +12,7 @@ describe('app-dir - server-component-next-dynamic-ssr-false', () => {\n \n   it('should error when use dynamic ssr:false in server component', async () => {\n     const browser = await next.browser('/')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const redbox = {\n       description: await getRedboxDescription(browser),\n       source: await getRedboxSource(browser),"
        },
        {
            "sha": "3eb0c676ebd05923491bbf743d64c75ad7277f32",
            "filename": "test/development/app-dir/ssr-in-rsc/ssr-in-rsc.test.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n } from 'next-test-utils'\n@@ -40,7 +40,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/app-code/react-dom-server-browser-explicit'\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     if (isTurbopack) {\n       expect(await browser.elementByCss('main').text()).toMatchInlineSnapshot(`\n         \"{\n@@ -108,7 +108,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/app-code/react-dom-server-edge-explicit'\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     if (isTurbopack) {\n       expect(await browser.elementByCss('main').text()).toMatchInlineSnapshot(`\n         \"{\n@@ -258,7 +258,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/app-code/react-dom-server-node-explicit'\n     )\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const redbox = {\n       description: await getRedboxDescription(browser),\n       source: await getRedboxSource(browser),\n@@ -315,7 +315,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/app-code/react-dom-server-node-implicit'\n     )\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const redbox = {\n       description: await getRedboxDescription(browser),\n       source: await getRedboxSource(browser),\n@@ -398,7 +398,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/library-code/react-dom-server-browser-explicit'\n     )\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const redbox = {\n       description: await getRedboxDescription(browser),\n       source: await getRedboxSource(browser),\n@@ -455,7 +455,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/library-code/react-dom-server-edge-explicit'\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     if (isTurbopack) {\n       expect(await browser.elementByCss('main').text()).toMatchInlineSnapshot(`\n         \"{\n@@ -527,7 +527,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/library-code/react-dom-server-edge-implicit'\n     )\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     if (isTurbopack) {\n       expect(await browser.elementByCss('main').text()).toMatchInlineSnapshot(`\n         \"{\n@@ -599,7 +599,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/library-code/react-dom-server-node-explicit'\n     )\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const redbox = {\n       description: await getRedboxDescription(browser),\n       source: await getRedboxSource(browser),\n@@ -656,7 +656,7 @@ describe('react-dom/server in React Server environment', () => {\n       '/exports/library-code/react-dom-server-node-implicit'\n     )\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const redbox = {\n       description: await getRedboxDescription(browser),\n       source: await getRedboxSource(browser),"
        },
        {
            "sha": "01e1e57deefb7fe6ca652c751cffb8c34ef99b6c",
            "filename": "test/development/app-dir/ssr-only-error/ssr-only-error.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fssr-only-error%2Fssr-only-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fssr-only-error%2Fssr-only-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fssr-only-error%2Fssr-only-error.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, hasErrorToast } from 'next-test-utils'\n+import { waitForNoRedbox, hasErrorToast } from 'next-test-utils'\n \n describe('ssr-only-error', () => {\n   const { next } = nextTestSetup({\n@@ -30,7 +30,7 @@ describe('ssr-only-error', () => {\n       pushErrorAsConsoleLog: true,\n     })\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     expect(await hasErrorToast(browser)).toBe(false)\n \n     const text = await browser.elementByCss('body').text()"
        },
        {
            "sha": "664e83387a6ffdeb53a6dd950f7b0687afd7633f",
            "filename": "test/development/app-dir/use-cache-errors/use-cache-errors.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fuse-cache-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fuse-cache-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fuse-cache-errors.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from '../../../lib/next-test-utils'\n+import { waitForNoRedbox } from '../../../lib/next-test-utils'\n \n describe('use-cache-errors', () => {\n   const { next } = nextTestSetup({\n@@ -12,7 +12,7 @@ describe('use-cache-errors', () => {\n     // statement (`var _s = __turbopack_context__.k.signature`) does not\n     // interfere with our \"use cache\" directive misplacement detection.\n     const browser = await next.browser('/')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should show a runtime error when calling the incorrectly used cache function', async () => {"
        },
        {
            "sha": "9ca0904cc3049c5befae5cfcca26462784a7b522",
            "filename": "test/development/basic/barrel-optimization/barrel-optimization-mui.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fbarrel-optimization%2Fbarrel-optimization-mui.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fbarrel-optimization%2Fbarrel-optimization-mui.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fbarrel-optimization%2Fbarrel-optimization-mui.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { join } from 'path'\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n // This is implemented in Turbopack, but Turbopack doesn't log the module count.\n ;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n@@ -27,7 +27,7 @@ import { assertNoRedbox } from 'next-test-utils'\n         expect($('#typography').text()).toContain('typography')\n \n         const browser = await next.browser('/mui')\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       })\n     })\n   }"
        },
        {
            "sha": "080de49583caa64cfdbf6455ad4c9748460c5a48",
            "filename": "test/development/basic/barrel-optimization/barrel-optimization-tremor.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fbarrel-optimization%2Fbarrel-optimization-tremor.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fbarrel-optimization%2Fbarrel-optimization-tremor.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fbarrel-optimization%2Fbarrel-optimization-tremor.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { join } from 'path'\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('optimizePackageImports - mui', () => {\n   const { next } = nextTestSetup({\n@@ -20,6 +20,6 @@ describe('optimizePackageImports - mui', () => {\n   it('should work', async () => {\n     // Without barrel optimization, the reproduction breaks.\n     const browser = await next.browser('/')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n })"
        },
        {
            "sha": "f96b3cfa7ee08b04971a9ddc7d174b789cc3858f",
            "filename": "test/development/basic/gssp-ssr-change-reloading/test/index.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -3,7 +3,7 @@\n import { join } from 'path'\n import webdriver from 'next-webdriver'\n import { createNext, FileRef } from 'e2e-utils'\n-import { assertNoRedbox, check } from 'next-test-utils'\n+import { waitForNoRedbox, check } from 'next-test-utils'\n import { NextInstance } from 'e2e-utils'\n \n const installCheckVisible = (browser) => {\n@@ -292,7 +292,7 @@ describe('GS(S)P Server-Side Change Reloading', () => {\n       `)\n \n       await next.patchFile(page, originalContent)\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     } finally {\n       await next.patchFile(page, originalContent)\n     }\n@@ -333,7 +333,7 @@ describe('GS(S)P Server-Side Change Reloading', () => {\n       expect(next.cliOutput).toMatch(/custom oops/)\n \n       await next.patchFile(page, originalContent)\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     } finally {\n       await next.patchFile(page, originalContent)\n     }"
        },
        {
            "sha": "76589dd2e2a22a7e5646ae804e421f86fec03565",
            "filename": "test/development/basic/hmr/run-basic-hmr-test.util.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fhmr%2Frun-basic-hmr-test.util.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fhmr%2Frun-basic-hmr-test.util.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fhmr%2Frun-basic-hmr-test.util.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getBrowserBodyText,\n   retry,\n   waitFor,\n@@ -57,7 +57,7 @@ export function runBasicHmrTest(nextConfig: {\n         'pages/auto-export-is-ready.js',\n         (content) => `import hello from 'non-existent'\\n` + content,\n         async () => {\n-          await assertHasRedbox(browser)\n+          await waitForRedbox(browser)\n           await waitFor(3000)\n           outputLength = next.cliOutput.length\n         }"
        },
        {
            "sha": "9ba3841acf4a7a2d60f0410c6540eaabd73e75af",
            "filename": "test/development/basic/hmr/run-error-recovery-hmr-test.util.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fhmr%2Frun-error-recovery-hmr-test.util.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fhmr%2Frun-error-recovery-hmr-test.util.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fhmr%2Frun-error-recovery-hmr-test.util.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { join } from 'path'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getBrowserBodyText,\n   getRedboxHeader,\n   getRedboxDescription,\n@@ -156,7 +156,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n       join('pages', 'hmr', 'about2.js'),\n       (content) => content.replace('</div>', 'div'),\n       async () => {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         const source = next.normalizeTestDirContent(\n           await getRedboxSource(browser)\n         )\n@@ -247,7 +247,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n           // Ensure dev server has time to break:\n           await new Promise((resolve) => setTimeout(resolve, 2000))\n \n-          await assertHasRedbox(browser)\n+          await waitForRedbox(browser)\n           expect(await getRedboxSource(browser)).toContain(\n             \"Expected '</', got '<eof>'\"\n           )\n@@ -275,7 +275,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n       join('pages', 'hmr', 'about3.js'),\n       (content) => content.replace('export', 'aa=20;\\nexport'),\n       async () => {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxHeader(browser)).toMatch(/aa is not defined/)\n       }\n     )\n@@ -304,7 +304,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n           'throw new Error(\"an-expected-error\");\\nreturn'\n         ),\n       async () => {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxSource(browser)).toMatch(/an-expected-error/)\n       }\n     )\n@@ -333,7 +333,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n           'export default {};\\nexport const fn ='\n         ),\n       async () => {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxDescription(browser)).toMatchInlineSnapshot(\n           `\"The default export is not a React Component in page: \"/hmr/about5\"\"`\n         )\n@@ -364,7 +364,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n           'export default () => /search/;\\nexport const fn ='\n         ),\n       async () => {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         // TODO: Replace this when webpack 5 is the default\n         expect(await getRedboxHeader(browser)).toMatch(\n           `Objects are not valid as a React child (found: [object RegExp]). If you meant to render a collection of children, use an array instead.`\n@@ -397,7 +397,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n         'export default undefined;\\nexport const fn ='\n       ),\n       async () => {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxDescription(browser)).toMatchInlineSnapshot(\n           `\"The default export is not a React Component in page: \"/hmr/about7\"\"`\n         )\n@@ -409,7 +409,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n         /This is the about page/\n       )\n     })\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should recover after webpack parse error in an imported file', async () => {\n@@ -429,7 +429,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n           'import \"../../components/parse-error.xyz\"\\nexport default'\n         ),\n       async () => {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxHeader(browser)).toMatch('Build Error')\n \n         if (process.env.IS_TURBOPACK_TEST) {\n@@ -486,7 +486,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n         /This is the about page/\n       )\n     })\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should recover after loader parse error in an imported file', async () => {\n@@ -506,7 +506,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n           'import \"../../components/parse-error.js\"\\nexport default'\n         ),\n       async () => {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxHeader(browser)).toMatch('Build Error')\n         let redboxSource = await getRedboxSource(browser)\n \n@@ -585,7 +585,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n         /This is the about page/\n       )\n     })\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should recover from errors in getInitialProps in client', async () => {\n@@ -594,7 +594,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n     const errorContent = await next.readFile(erroredPage)\n     await browser.elementByCss('#error-in-gip-link').click()\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     expect(await getRedboxDescription(browser)).toMatchInlineSnapshot(\n       `\"an-expected-error-in-gip\"`\n     )\n@@ -626,7 +626,7 @@ export function runErrorRecoveryHmrTest(nextConfig: {\n \n   it('should recover after an error reported via SSR', async () => {\n     const browser = await next.browser(basePath + '/hmr/error-in-gip')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     expect(await getRedboxDescription(browser)).toMatchInlineSnapshot(\n       `\"an-expected-error-in-gip\"`\n     )"
        },
        {
            "sha": "2bb60a0d72a52d8808727e3033c1a46766986e7e",
            "filename": "test/development/basic/next-dynamic/next-dynamic.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fnext-dynamic%2Fnext-dynamic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fnext-dynamic%2Fnext-dynamic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fnext-dynamic%2Fnext-dynamic.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -2,7 +2,7 @@ import { join } from 'path'\n import cheerio from 'cheerio'\n import webdriver from 'next-webdriver'\n import { createNext, FileRef } from 'e2e-utils'\n-import { assertNoRedbox, renderViaHTTP, check } from 'next-test-utils'\n+import { waitForNoRedbox, renderViaHTTP, check } from 'next-test-utils'\n import { NextInstance } from 'e2e-utils'\n \n const customDocumentGipContent = `\\\n@@ -170,7 +170,7 @@ describe('next/dynamic', () => {\n         try {\n           browser = await webdriver(next.url, basePath + '/dynamic/no-ssr')\n           await check(() => browser.elementByCss('body').text(), /navigator/)\n-          await assertNoRedbox(browser)\n+          await waitForNoRedbox(browser)\n         } finally {\n           if (browser) {\n             await browser.close()\n@@ -183,7 +183,7 @@ describe('next/dynamic', () => {\n         try {\n           browser = await webdriver(next.url, basePath + '/dynamic/no-ssr-esm')\n           await check(() => browser.elementByCss('body').text(), /esm.mjs/)\n-          await assertNoRedbox(browser)\n+          await waitForNoRedbox(browser)\n         } finally {\n           if (browser) {\n             await browser.close()"
        },
        {
            "sha": "ccb43a45a3790d502e42a50e1ac660b5f31107a5",
            "filename": "test/development/basic/project-directory-rename.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fproject-directory-rename.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fbasic%2Fproject-directory-rename.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fproject-directory-rename.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import fs from 'fs-extra'\n import webdriver from 'next-webdriver'\n-import { assertNoRedbox, check, findPort } from 'next-test-utils'\n+import { waitForNoRedbox, check, findPort } from 'next-test-utils'\n import { NextInstance } from 'e2e-utils'\n import { createNext } from 'e2e-utils'\n import stripAnsi from 'strip-ansi'\n@@ -42,7 +42,7 @@ describe.skip('Project Directory Renaming', () => {\n     await check(async () => {\n       return (await browser.eval('window.beforeNav')) === 1 ? 'pending' : 'done'\n     }, 'done')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     try {\n       // should still HMR correctly"
        },
        {
            "sha": "379bf5bdcf37ce825dff670dbae85eecd3015a21",
            "filename": "test/development/client-dev-overlay/index.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -2,7 +2,7 @@ import { FileRef } from 'e2e-utils'\n import { Playwright } from 'next-webdriver'\n import { nextTestSetup } from 'e2e-utils'\n import { join } from 'path'\n-import { assertHasDevToolsIndicator, retry } from 'next-test-utils'\n+import { waitForDevToolsIndicator, retry } from 'next-test-utils'\n \n describe('client-dev-overlay', () => {\n   const { next, isTurbopack } = nextTestSetup({\n@@ -124,8 +124,8 @@ describe('client-dev-overlay', () => {\n   it('should nudge to use Turbopack unless Turbopack is disabled', async () => {\n     const browser = await next.browser('/')\n \n-    // Don't use openDevToolsIndicatorPopover because this is asserting something in the old dev tools menu which isn't preset yet in the new UI.\n-    const devToolsIndicator = await assertHasDevToolsIndicator(browser)\n+    // Don't use toggleDevToolsIndicatorPopover because this is asserting something in the old dev tools menu which isn't preset yet in the new UI.\n+    const devToolsIndicator = await waitForDevToolsIndicator(browser)\n     try {\n       await devToolsIndicator.click()\n     } catch (cause) {\n@@ -175,7 +175,7 @@ describe('client-dev-overlay with Cache Components', () => {\n   it('should show Cache Components as enabled in the devtools menu', async () => {\n     const browser = await next.browser('/')\n \n-    const devToolsIndicator = await assertHasDevToolsIndicator(browser)\n+    const devToolsIndicator = await waitForDevToolsIndicator(browser)\n     try {\n       await devToolsIndicator.click()\n     } catch (cause) {"
        },
        {
            "sha": "fd3724640dacc1fd8d42ac61c78de5ff280cfba8",
            "filename": "test/development/dev-indicator/dev-indicator.test.ts",
            "status": "modified",
            "additions": 27,
            "deletions": 71,
            "changes": 98,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fdev-indicator%2Fdev-indicator.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fdev-indicator%2Fdev-indicator.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fdev-indicator%2Fdev-indicator.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertStaticIndicator, retry } from 'next-test-utils'\n+import { waitForStaticIndicator } from 'next-test-utils'\n \n const withCacheComponents = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n@@ -12,110 +12,82 @@ describe('dev indicator - route type', () => {\n     it('should update when going from dynamic -> static', async () => {\n       const browser = await next.browser('/pages/gssp')\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n \n       // validate static -> dynamic updates\n       await browser.elementByCss(\"[href='/pages']\").click()\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Static')\n-      })\n+      await waitForStaticIndicator(browser, 'Static')\n     })\n \n     it('should update when going from static -> dynamic', async () => {\n       const browser = await next.browser('/pages')\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Static')\n-      })\n+      await waitForStaticIndicator(browser, 'Static')\n \n       // validate static -> dynamic updates\n       await browser.elementByCss(\"[href='/pages/gssp']\").click()\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n     })\n \n     it('should be marked dynamic on first load', async () => {\n       const browser = await next.browser('/pages/gssp')\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n     })\n   })\n \n   describe('getInitialProps', () => {\n     it('should be marked dynamic on first load', async () => {\n       const browser = await next.browser('/pages/gip')\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n     })\n \n     it('should update when going from dynamic -> static', async () => {\n       const browser = await next.browser('/pages/gip')\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n \n       await browser.elementByCss(\"[href='/pages']\").click()\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Static')\n-      })\n+      await waitForStaticIndicator(browser, 'Static')\n     })\n \n     it('should update when going from static -> dynamic', async () => {\n       const browser = await next.browser('/pages')\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Static')\n-      })\n+      await waitForStaticIndicator(browser, 'Static')\n \n       await browser.elementByCss(\"[href='/pages/gip']\").click()\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n     })\n   })\n \n   describe('getStaticPaths', () => {\n     it('should be marked static on first load', async () => {\n       const browser = await next.browser('/pages/pregenerated')\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Static')\n-      })\n+      await waitForStaticIndicator(browser, 'Static')\n     })\n \n     it('should update when going from dynamic -> static', async () => {\n       const browser = await next.browser('/pages/gssp')\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Dynamic')\n-      })\n+      await waitForStaticIndicator(browser, 'Dynamic')\n \n       await browser.elementByCss(\"[href='/pages/pregenerated']\").click()\n \n-      await retry(async () => {\n-        await assertStaticIndicator(browser, 'Static')\n-      })\n+      await waitForStaticIndicator(browser, 'Static')\n     })\n   })\n \n   it('should have route type as static by default for static page', async () => {\n     const browser = await next.browser('/pages')\n \n-    await retry(async () => {\n-      await assertStaticIndicator(browser, 'Static')\n-    })\n+    await waitForStaticIndicator(browser, 'Static')\n   })\n \n   describe('with App Router', () => {\n@@ -124,44 +96,36 @@ describe('dev indicator - route type', () => {\n         describe('with Cache Components enabled', () => {\n           it('should not show a static indicator', async () => {\n             const browser = await next.browser('/app/static-indicator/dynamic')\n-            await assertStaticIndicator(browser, undefined)\n+            await waitForStaticIndicator(browser, undefined)\n           })\n \n           it('should still show a static indicator when navigating to a Pages Router page', async () => {\n             const browser = await next.browser('/app/static-indicator/dynamic')\n-            await assertStaticIndicator(browser, undefined)\n+            await waitForStaticIndicator(browser, undefined)\n \n             await browser.elementByCss(\"[href='/pages']\").click()\n \n-            await retry(async () => {\n-              await assertStaticIndicator(browser, 'Static')\n-            })\n+            await waitForStaticIndicator(browser, 'Static')\n           })\n         })\n       } else {\n         describe('with Cache Components disabled', () => {\n           it('should be marked dynamic on first load', async () => {\n             const browser = await next.browser('/app/static-indicator/dynamic')\n \n-            await retry(async () => {\n-              await assertStaticIndicator(browser, 'Dynamic')\n-            })\n+            await waitForStaticIndicator(browser, 'Dynamic')\n           })\n \n           it('should update when going from dynamic -> static', async () => {\n             const browser = await next.browser('/app/static-indicator/dynamic')\n \n-            await retry(async () => {\n-              await assertStaticIndicator(browser, 'Dynamic')\n-            })\n+            await waitForStaticIndicator(browser, 'Dynamic')\n \n             await browser\n               .elementByCss(\"[href='/app/static-indicator/static']\")\n               .click()\n \n-            await retry(async () => {\n-              await assertStaticIndicator(browser, 'Static')\n-            })\n+            await waitForStaticIndicator(browser, 'Static')\n           })\n         })\n       }\n@@ -172,44 +136,36 @@ describe('dev indicator - route type', () => {\n         describe('with Cache Components enabled', () => {\n           it('should not show a static indicator', async () => {\n             const browser = await next.browser('/app/static-indicator/static')\n-            await assertStaticIndicator(browser, undefined)\n+            await waitForStaticIndicator(browser, undefined)\n           })\n \n           it('should still show a static indicator when navigating to a Pages Router page', async () => {\n             const browser = await next.browser('/app/static-indicator/static')\n-            await assertStaticIndicator(browser, undefined)\n+            await waitForStaticIndicator(browser, undefined)\n \n             await browser.elementByCss(\"[href='/pages/gssp']\").click()\n \n-            await retry(async () => {\n-              await assertStaticIndicator(browser, 'Dynamic')\n-            })\n+            await waitForStaticIndicator(browser, 'Dynamic')\n           })\n         })\n       } else {\n         describe('with Cache Components disabled', () => {\n           it('should be marked static on first load', async () => {\n             const browser = await next.browser('/app/static-indicator/static')\n \n-            await retry(async () => {\n-              await assertStaticIndicator(browser, 'Static')\n-            })\n+            await waitForStaticIndicator(browser, 'Static')\n           })\n \n           it('should update when going from static -> dynamic', async () => {\n             const browser = await next.browser('/app/static-indicator/static')\n \n-            await retry(async () => {\n-              await assertStaticIndicator(browser, 'Static')\n-            })\n+            await waitForStaticIndicator(browser, 'Static')\n \n             await browser\n               .elementByCss(\"[href='/app/static-indicator/dynamic']\")\n               .click()\n \n-            await retry(async () => {\n-              await assertStaticIndicator(browser, 'Dynamic')\n-            })\n+            await waitForStaticIndicator(browser, 'Dynamic')\n           })\n         })\n       }"
        },
        {
            "sha": "b56e2a36c5543b7a506c293cae4ce4181e3be3c2",
            "filename": "test/development/error-overlay/index.test.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox } from 'next-test-utils'\n+import { waitForRedbox } from 'next-test-utils'\n \n describe('DevErrorOverlay', () => {\n   const { next } = nextTestSetup({\n@@ -86,7 +86,7 @@ describe('DevErrorOverlay', () => {\n       },\n     })\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     await browser.waitForIdleNetwork()\n \n     // Verify woff2 files were requested and loaded successfully\n@@ -99,7 +99,7 @@ describe('DevErrorOverlay', () => {\n   it('should load dev overlay styles successfully', async () => {\n     const browser = await next.browser('/hydration-error')\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const redbox = browser.locateRedbox()\n \n     // check the data-nextjs-dialog-header=\"true\" DOM element styles under redbox is applied"
        },
        {
            "sha": "3eebdc74bac9efb9bee5d277c992d075c3d12ae1",
            "filename": "test/development/jsconfig-path-reloading/index.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fjsconfig-path-reloading%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fjsconfig-path-reloading%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fjsconfig-path-reloading%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n import { createNext, FileRef } from 'e2e-utils'\n import { NextInstance } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   check,\n   renderViaHTTP,\n   getRedboxSource,\n@@ -82,7 +82,7 @@ describe('jsconfig-path-reloading', () => {\n           )}`\n         )\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxSource(browser)).toContain('\"@lib/second-data\"')\n \n         await next.patchFile(\n@@ -103,7 +103,7 @@ describe('jsconfig-path-reloading', () => {\n           )\n         )\n \n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n \n         const html2 = await browser.eval('document.documentElement.innerHTML')\n         expect(html2).toContain('first button')\n@@ -158,7 +158,7 @@ describe('jsconfig-path-reloading', () => {\n           indexContent.replace('@mybutton', '@myotherbutton')\n         )\n \n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n \n         await check(async () => {\n           const html2 = await browser.eval('document.documentElement.innerHTML')"
        },
        {
            "sha": "a364d54953a91dbae1e76e6a71b1a7237ded9de9",
            "filename": "test/development/middleware-errors/index.test.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,4 +1,4 @@\n-import { assertNoRedbox, check, getDistDir, retry } from 'next-test-utils'\n+import { waitForNoRedbox, check, getDistDir, retry } from 'next-test-utils'\n import stripAnsi from 'strip-ansi'\n import { nextTestSetup } from 'e2e-utils'\n \n@@ -98,7 +98,7 @@ describe('middleware - development errors', () => {\n \n       await next.patchFile('middleware.js', `export default function () {}`)\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     })\n   })\n \n@@ -149,7 +149,7 @@ describe('middleware - development errors', () => {\n \n     it('does not render the error', async () => {\n       const browser = await next.browser('/')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await browser.elementByCss('#page-title')).toBeTruthy()\n     })\n   })\n@@ -269,7 +269,7 @@ describe('middleware - development errors', () => {\n         expect(next.cliOutput.slice(lengthOfLogs)).toContain('GET / 200')\n       }, 10000) // middleware rebuild takes a while in CI\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     })\n   })\n \n@@ -375,7 +375,7 @@ describe('middleware - development errors', () => {\n \n       await next.patchFile('middleware.js', `export default function () {}`)\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     })\n   })\n \n@@ -410,7 +410,7 @@ describe('middleware - development errors', () => {\n \n     it('does not render the error', async () => {\n       const browser = await next.browser('/')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await browser.elementByCss('#page-title')).toBeTruthy()\n     })\n   })\n@@ -448,7 +448,7 @@ describe('middleware - development errors', () => {\n \n     it('does not render the error', async () => {\n       const browser = await next.browser('/')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await browser.elementByCss('#page-title')).toBeTruthy()\n     })\n   })\n@@ -529,7 +529,7 @@ describe('middleware - development errors', () => {\n \n       await next.patchFile('middleware.js', `export default function () {}`)\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await browser.elementByCss('#page-title')).toBeTruthy()\n     })\n   })\n@@ -557,7 +557,7 @@ describe('middleware - development errors', () => {\n     it('renders the error correctly and recovers', async () => {\n       const browser = await next.browser('/')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await next.patchFile('middleware.js', `export default function () }`)\n \n@@ -615,7 +615,7 @@ describe('middleware - development errors', () => {\n \n       await next.patchFile('middleware.js', `export default function () {}`)\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await browser.elementByCss('#page-title')).toBeTruthy()\n     })\n   })"
        },
        {
            "sha": "8be590ed1994244af796748aeeeddd34cb8925be",
            "filename": "test/development/next-font/build-errors.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fnext-font%2Fbuild-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fnext-font%2Fbuild-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fnext-font%2Fbuild-errors.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -3,8 +3,8 @@ import { NextInstance } from 'e2e-utils'\n import { join } from 'path'\n import webdriver from 'next-webdriver'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxSource,\n } from 'next-test-utils'\n \n@@ -36,15 +36,15 @@ export default function Page() {\n `\n     )\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n       \"app/page.js\n       \\`next/font\\` error:\n       Missing required \\`src\\` property\"\n     `)\n \n     await next.patchFile('app/page.js', content)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it(\"should show a module not found error if local font file can' be resolved\", async () => {\n@@ -64,7 +64,7 @@ export default function Page() {\n `\n     )\n \n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     const sourceLines = (await getRedboxSource(browser)).split('\\n')\n \n     // Should display the file name correctly\n@@ -75,6 +75,6 @@ export default function Page() {\n     )\n \n     await next.patchFile('app/page.js', content)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n })"
        },
        {
            "sha": "21ef5e992694851e3ddc399b486c3687c8f6acf3",
            "filename": "test/development/next-font/font-loader-in-document-error.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fnext-font%2Ffont-loader-in-document-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fnext-font%2Ffont-loader-in-document-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fnext-font%2Ffont-loader-in-document-error.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { createNext, FileRef } from 'e2e-utils'\n import { NextInstance } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource } from 'next-test-utils'\n import webdriver from 'next-webdriver'\n import { join } from 'path'\n \n@@ -18,7 +18,7 @@ describe('font-loader-in-document-error', () => {\n \n   test('next/font inside _document', async () => {\n     const browser = await webdriver(next.url, '/')\n-    await assertHasRedbox(browser)\n+    await waitForRedbox(browser)\n     if (process.env.IS_TURBOPACK_TEST) {\n       // TODO: Turbopack doesn't include pages/\n       expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`"
        },
        {
            "sha": "6c102782c9d4e5285f86d875ba5105d4a1deca4e",
            "filename": "test/development/pages-dir/client-navigation/foreign-history-manipulation.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Fforeign-history-manipulation.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Fforeign-history-manipulation.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Fforeign-history-manipulation.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n /* eslint-env jest */\n \n-import { assertNoRedbox, waitFor } from 'next-test-utils'\n+import { waitForNoRedbox, waitFor } from 'next-test-utils'\n import path from 'path'\n import { nextTestSetup } from 'e2e-utils'\n \n@@ -22,7 +22,7 @@ describe('Client navigation with foreign history manipulation', () => {\n     await browser.waitForElementByCss('.nav-about')\n     await browser.back()\n     await waitFor(1000)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should ignore history state with an invalid url', async () => {\n@@ -35,7 +35,7 @@ describe('Client navigation with foreign history manipulation', () => {\n     await browser.waitForElementByCss('.nav-about')\n     await browser.back()\n     await waitFor(1000)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should ignore foreign history state with missing properties', async () => {\n@@ -46,6 +46,6 @@ describe('Client navigation with foreign history manipulation', () => {\n     await browser.waitForElementByCss('.nav-about')\n     await browser.back()\n     await waitFor(1000)\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n })"
        },
        {
            "sha": "84330246ac1aa0b26fd7135a345cc1562041dd5b",
            "filename": "test/development/repeated-dev-edits/repeated-dev-edits.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Frepeated-dev-edits%2Frepeated-dev-edits.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Frepeated-dev-edits%2Frepeated-dev-edits.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Frepeated-dev-edits%2Frepeated-dev-edits.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n import fs from 'fs-extra'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n import path from 'path'\n \n describe('repeated-dev-edits', () => {\n@@ -25,7 +25,7 @@ describe('repeated-dev-edits', () => {\n     expect(await browser.elementByCss('p').text()).toBe('version-2')\n \n     // Verify no hydration mismatch:\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await next.patchFile(\n       pagePath,\n@@ -35,11 +35,11 @@ describe('repeated-dev-edits', () => {\n     expect(await browser.elementByCss('p').text()).toBe('version-3')\n \n     // Verify no hydration mismatch:\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n \n     await browser.refresh()\n \n     // Verify no hydration mismatch:\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n })"
        },
        {
            "sha": "38a644cc72bdcc41e06d71173a3cfc2e3ab1ab89",
            "filename": "test/development/sass-error/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fsass-error%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Fsass-error%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fsass-error%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource } from 'next-test-utils'\n \n describe('app dir - css', () => {\n   const { next, skipped } = nextTestSetup({\n@@ -21,7 +21,7 @@ describe('app dir - css', () => {\n         it('should use original source points for sass errors', async () => {\n           const browser = await next.browser('/sass-error')\n \n-          await assertHasRedbox(browser)\n+          await waitForRedbox(browser)\n           const source = await getRedboxSource(browser)\n \n           // css-loader does not report an error for this case"
        },
        {
            "sha": "dac23bc38a41dbec2fe2ea1690d013ba95baceac",
            "filename": "test/development/tsconfig-path-reloading/index.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Ftsconfig-path-reloading%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fdevelopment%2Ftsconfig-path-reloading%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Ftsconfig-path-reloading%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n import { createNext, FileRef } from 'e2e-utils'\n import { NextInstance } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   check,\n   renderViaHTTP,\n   getRedboxSource,\n@@ -82,7 +82,7 @@ describe('tsconfig-path-reloading', () => {\n           )}`\n         )\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxSource(browser)).toContain(\"'@lib/second-data'\")\n \n         await next.patchFile(\n@@ -103,7 +103,7 @@ describe('tsconfig-path-reloading', () => {\n           )\n         )\n \n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n \n         const html2 = await browser.eval('document.documentElement.innerHTML')\n         expect(html2).toContain('first button')\n@@ -158,7 +158,7 @@ describe('tsconfig-path-reloading', () => {\n           indexContent.replace('@mybutton', '@myotherbutton')\n         )\n \n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n \n         await check(async () => {\n           const html2 = await browser.eval('document.documentElement.innerHTML')"
        },
        {
            "sha": "c3df994447d2ca32f871980f537c2018b9199fca",
            "filename": "test/e2e/app-dir/action-in-pages-router/action-in-pages-router.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Faction-in-pages-router%2Faction-in-pages-router.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Faction-in-pages-router%2Faction-in-pages-router.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Faction-in-pages-router%2Faction-in-pages-router.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, retry } from 'next-test-utils'\n+import { waitForNoRedbox, retry } from 'next-test-utils'\n \n describe('app-dir - action-in-pages-router', () => {\n   const { next, isNextStart } = nextTestSetup({\n@@ -17,7 +17,7 @@ describe('app-dir - action-in-pages-router', () => {\n         .join('')\n       // This is a fake server action, a simple function so it can still work\n       expect(browserLogText).toContain('action:foo')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     })\n   })\n "
        },
        {
            "sha": "8a29367f1b3b7e464564476936568b3c40d93538",
            "filename": "test/e2e/app-dir/actions/app-action.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { FileRef, nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   retry,\n   waitFor,\n   getRedboxSource,\n@@ -995,7 +995,7 @@ describe('app-dir action handling', () => {\n             origContent + '\\n\\nexport const foo = 1'\n           )\n \n-          await assertHasRedbox(browser)\n+          await waitForRedbox(browser)\n           expect(await getRedboxSource(browser)).toContain(\n             'Only async functions are allowed to be exported in a \"use server\" file.'\n           )"
        },
        {
            "sha": "a0eef396de5a1f0efdb4682cc575050a5869e8c2",
            "filename": "test/e2e/app-dir/app-compilation/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fapp-compilation%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fapp-compilation%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp-compilation%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, retry } from 'next-test-utils'\n+import { waitForNoRedbox, retry } from 'next-test-utils'\n \n describe('app dir', () => {\n   const { next, isNextDev, isNextStart, skipped } = nextTestSetup({\n@@ -43,7 +43,7 @@ describe('app dir', () => {\n         })\n \n         // It should not have an error\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n \n         // HMR should still work\n         await next.patchFile("
        },
        {
            "sha": "07df04df8dae4c4266019b165879a7436134524b",
            "filename": "test/e2e/app-dir/app-external/app-external.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fapp-external%2Fapp-external.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fapp-external%2Fapp-external.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp-external%2Fapp-external.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, check, getDistDir, retry } from 'next-test-utils'\n+import { waitForNoRedbox, check, getDistDir, retry } from 'next-test-utils'\n \n async function resolveStreamResponse(response: any, onData?: any) {\n   let result = ''\n@@ -249,7 +249,7 @@ describe('app dir - external dependency', () => {\n     expect($('#transpile-cjs-lib').text()).toBe('transpile-cjs-lib')\n \n     const browser = await next.browser('/cjs/client')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n   })\n \n   it('should export client module references in esm', async () => {"
        },
        {
            "sha": "ea887655048adb6f212b7d8cd270472227eece57",
            "filename": "test/e2e/app-dir/app-root-params-getters/simple.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Fsimple.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Fsimple.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Fsimple.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, retry } from 'next-test-utils'\n+import { waitForNoRedbox, retry } from 'next-test-utils'\n import { join } from 'path'\n import { createSandbox } from 'development-sandbox'\n import { outdent } from 'outdent'\n@@ -70,7 +70,7 @@ describe('app-root-param-getters - simple', () => {\n       'This page could not be found.'\n     )\n     if (isNextDev) {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n   })\n "
        },
        {
            "sha": "26ab66b1e867377512e87b3b4dbd374e1c618a64",
            "filename": "test/e2e/app-dir/app-root-params-getters/use-cache.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Fuse-cache.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Fuse-cache.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Fuse-cache.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n import { join } from 'path'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('app-root-param-getters - cache - at runtime', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n@@ -72,7 +72,7 @@ describe('app-root-param-getters - private cache', () => {\n     it('should allow using root params within a \"use cache: private\" - dev', async () => {\n       const browser = await next.browser('/en/us/use-cache-private')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await browser.elementById('param').text()).toBe('en us')\n     })\n   } else {"
        },
        {
            "sha": "cbf3872ae8293b44b5873d68b859b5662a4abb1c",
            "filename": "test/e2e/app-dir/cache-components-create-component-tree/cache-components-create-component-tree.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-create-component-tree%2Fcache-components-create-component-tree.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-create-component-tree%2Fcache-components-create-component-tree.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-create-component-tree%2Fcache-components-create-component-tree.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { isNextDev, nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('hello-world', () => {\n   const { next } = nextTestSetup({\n@@ -11,7 +11,7 @@ describe('hello-world', () => {\n   if (isNextDev) {\n     it('should not indicate there is an error when incidental math.random calls occur during component tree generation during dev', async () => {\n       const browser = await next.browser('/')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       // The redbox assertion is currently unreliable in this test and so this is an additional check to ensure the CLI didn't print anything with `Math.random()` in it.\n       expect(next.cliOutput).not.toContain('Math.random()')"
        },
        {
            "sha": "bbd22b79b982ead56108a49151c20027a9840f3c",
            "filename": "test/e2e/app-dir/cache-components-dynamic-imports/cache-components-dynamic-imports.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fcache-components-dynamic-imports.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fcache-components-dynamic-imports.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fcache-components-dynamic-imports.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import * as path from 'path'\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, retry } from 'next-test-utils'\n+import { waitForNoRedbox, retry } from 'next-test-utils'\n \n describe('async imports in cacheComponents', () => {\n   const { next, isNextStart, isNextDev } = nextTestSetup({\n@@ -62,7 +62,7 @@ describe('async imports in cacheComponents', () => {\n     if (isNextDev) {\n       await retry(async () => {\n         // we shouldn't get any errors from `spawnDynamicValidationInDev`\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       })\n     }\n   }"
        },
        {
            "sha": "5df947a0675f91d72c44f6ba0a8fb4f44429b24e",
            "filename": "test/e2e/app-dir/cache-components-errors/cache-components-errors.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { isNextDev, nextTestSetup } from 'e2e-utils'\n-import { assertNoErrorToast } from 'next-test-utils'\n+import { waitForNoErrorToast } from 'next-test-utils'\n import { getPrerenderOutput } from './utils'\n \n describe('Cache Components Errors', () => {\n@@ -314,7 +314,7 @@ describe('Cache Components Errors', () => {\n       if (isNextDev) {\n         it('should not show a collapsed redbox error', async () => {\n           const browser = await next.browser(pathname)\n-          await assertNoErrorToast(browser)\n+          await waitForNoErrorToast(browser)\n         })\n       } else {\n         it('should partially prerender when all dynamic components are inside a Suspense boundary', async () => {\n@@ -441,7 +441,7 @@ describe('Cache Components Errors', () => {\n       if (isNextDev) {\n         it('should not show a collapsed redbox error', async () => {\n           const browser = await next.browser(pathname)\n-          await assertNoErrorToast(browser)\n+          await waitForNoErrorToast(browser)\n         })\n       } else {\n         it('should not error the build when all routes are static', async () => {\n@@ -685,7 +685,7 @@ describe('Cache Components Errors', () => {\n       if (isNextDev) {\n         it('should not show a collapsed redbox error', async () => {\n           const browser = await next.browser(pathname)\n-          await assertNoErrorToast(browser)\n+          await waitForNoErrorToast(browser)\n         })\n       } else {\n         it('should partially prerender when all dynamic components are inside a Suspense boundary', async () => {\n@@ -1622,7 +1622,7 @@ describe('Cache Components Errors', () => {\n         if (isNextDev) {\n           it('does not show a validation error in the dev overlay', async () => {\n             const browser = await next.browser(pathname)\n-            await assertNoErrorToast(browser)\n+            await waitForNoErrorToast(browser)\n           })\n         } else {\n           it('should not error the build sync IO is used inside a Suspense Boundary in a client Component and nothing else is dynamic', async () => {"
        },
        {
            "sha": "3ecebbe890b269767bd6ae314a73bd2233e149de",
            "filename": "test/e2e/app-dir/cache-components-route-handler-errors/cache-components-route-handler-errors.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fcache-components-route-handler-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fcache-components-route-handler-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fcache-components-route-handler-errors.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n } from 'next-test-utils'\n@@ -26,7 +26,7 @@ describe('cache-components-route-handler-errors', () => {\n     if (isNextDev) {\n       // Test the first route handler with \"dynamic\" config\n       const browser = await next.browser('/route-with-dynamic')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const redbox = {\n         description: await getRedboxDescription(browser),\n         source: await getRedboxSource(browser),"
        },
        {
            "sha": "893920ef4ed8b90c2c6fcd21f7da1defaa8e4c48",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/cache-components-edge-deduplication.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-edge-deduplication.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-edge-deduplication.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-edge-deduplication.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -3,7 +3,7 @@ import { nextTestSetup } from 'e2e-utils'\n // Only Turbopack runs the transform on the layout once in edge and non-edge contexts\n // so we only test this on Turbopack\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n } from 'next-test-utils'\n@@ -29,7 +29,7 @@ import {\n \n       if (isNextDev) {\n         const browser = await next.browser('/edge-with-layout/edge')\n-        assertHasRedbox(browser)\n+        waitForRedbox(browser)\n         const redbox = {\n           description: await getRedboxDescription(browser),\n           source: await getRedboxSource(browser),"
        },
        {
            "sha": "e18bb074bef5982955d1a63c5dbc951e2a5ab723",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/cache-components-segment-configs.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n   retry,\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n } from 'next-test-utils'\n@@ -26,7 +26,7 @@ describe('cache-components-segment-configs', () => {\n \n     if (isNextDev) {\n       const browser = await next.browser('/revalidate')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const redbox = {\n         description: await getRedboxDescription(browser),\n         source: await getRedboxSource(browser),\n@@ -87,7 +87,7 @@ describe('cache-components-segment-configs', () => {\n \n         if (isNextDev) {\n           const browser = await next.browser('/revalidate')\n-          await assertHasRedbox(browser)\n+          await waitForRedbox(browser)\n           const redbox = {\n             description: await getRedboxDescription(browser),\n             source: await getRedboxSource(browser),"
        },
        {
            "sha": "c716dd1d144946145ebd9655ac4480fda731a0c9",
            "filename": "test/e2e/app-dir/cache-components/cache-components.server-action.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.server-action.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.server-action.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.server-action.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox, retry } from 'next-test-utils'\n+import { waitForNoRedbox, retry } from 'next-test-utils'\n \n describe('cache-components', () => {\n   const { next, isNextDev } = nextTestSetup({\n@@ -32,7 +32,7 @@ describe('cache-components', () => {\n       // we expect this error not to be logged anymore.\n       expect(next.cliOutput).toMatch('Error: Route \"/server-action-inline\"')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n   })\n "
        },
        {
            "sha": "e0034f2d478c753313ab84bed419a8b1df578a59",
            "filename": "test/e2e/app-dir/error-on-next-codemod-comment/error-on-next-codemod-comment.test.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Ferror-on-next-codemod-comment%2Ferror-on-next-codemod-comment.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Ferror-on-next-codemod-comment%2Ferror-on-next-codemod-comment.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Ferror-on-next-codemod-comment%2Ferror-on-next-codemod-comment.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxSource,\n   retry,\n } from 'next-test-utils'\n@@ -21,7 +21,7 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n     it('should error with swc if you have codemod comments left', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       if (process.env.IS_TURBOPACK_TEST) {\n         expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n@@ -82,7 +82,7 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n \n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       // Recover the original file content\n       await next.patchFile('app/page.tsx', originFileContent)\n@@ -91,7 +91,7 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n     it('should disappear the error when you rre the codemod comment', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       let originFileContent\n       await next.patchFile('app/page.tsx', (code) => {\n@@ -103,7 +103,7 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n       })\n \n       await retry(async () => {\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       })\n \n       // Recover the original file content\n@@ -113,7 +113,7 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n     it('should disappear the error when you replace with bypass comment', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       let originFileContent\n       await next.patchFile('app/page.tsx', (code) => {\n@@ -122,7 +122,7 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n       })\n \n       await retry(async () => {\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       })\n \n       // Recover the original file content"
        },
        {
            "sha": "07c20e7bde85d1535fb6f3ec3fc04c15657a5980",
            "filename": "test/e2e/app-dir/errors/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Ferrors%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Ferrors%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Ferrors%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -27,7 +27,7 @@ describe('app-dir - errors', () => {\n       if (isNextDev) {\n         // TODO: investigate desired behavior here as it is currently\n         // minimized by default\n-        // await assertHasRedbox(browser)\n+        // await waitForRedbox(browser)\n         // expect(await getRedboxHeader(browser)).toMatch(/this is a test/)\n       } else {\n         expect(\n@@ -63,7 +63,7 @@ describe('app-dir - errors', () => {\n \n       if (isNextDev) {\n         // TODO-APP: ensure error overlay is shown for errors that happened before/during hydration\n-        // await assertHasRedbox(browser)\n+        // await waitForRedbox(browser)\n         // expect(await getRedboxHeader(browser)).toMatch(/this is a test/)\n       }\n "
        },
        {
            "sha": "9ef97456dcbf982f0756f5c0aa0d8107467f3573",
            "filename": "test/e2e/app-dir/forbidden/default/forbidden-default.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fforbidden%2Fdefault%2Fforbidden-default.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fforbidden%2Fdefault%2Fforbidden-default.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fforbidden%2Fdefault%2Fforbidden-default.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxDescription,\n } from 'next-test-utils'\n \n@@ -22,7 +22,7 @@ describe('app dir - forbidden with default forbidden boundary', () => {\n     await browser.elementByCss('#trigger-forbidden').click()\n \n     if (isNextDev) {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxDescription(browser)).toMatch(\n         /forbidden\\(\\) is not allowed to use in root layout/\n       )\n@@ -34,7 +34,7 @@ describe('app dir - forbidden with default forbidden boundary', () => {\n     const browser = await next.browser('/?root-forbidden=1')\n \n     if (isNextDev) {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxDescription(browser)).toBe(\n         'Error: forbidden() is not allowed to use in root layout'\n       )\n@@ -72,7 +72,7 @@ describe('app dir - forbidden with default forbidden boundary', () => {\n     )\n \n     await browser.loadPage(next.url + '/group-dynamic/403')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     await browser.waitForElementByCss('.group-root-layout')\n     expect(await browser.elementByCss('.next-error-h1').text()).toBe('403')\n   })"
        },
        {
            "sha": "3d5056e931f36f85f8c7ecd70fc935db981cc433",
            "filename": "test/e2e/app-dir/global-error/error-in-global-error/error-in-global-error.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Ferror-in-global-error%2Ferror-in-global-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Ferror-in-global-error%2Ferror-in-global-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Ferror-in-global-error%2Ferror-in-global-error.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox } from 'next-test-utils'\n+import { waitForRedbox } from 'next-test-utils'\n \n describe('app dir - global-error - error-in-global-error', () => {\n   const { next, isNextDev } = nextTestSetup({\n@@ -12,7 +12,7 @@ describe('app dir - global-error - error-in-global-error', () => {\n     expect(text).toBe('Custom Global Error')\n \n     if (isNextDev) {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       await expect(browser).toDisplayRedbox(`\n        {\n          \"description\": \"error in page\",\n@@ -37,7 +37,7 @@ describe('app dir - global-error - error-in-global-error', () => {\n     )\n \n     if (isNextDev) {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       await expect(browser).toDisplayRedbox(`\n        [\n          {"
        },
        {
            "sha": "7e0330af0dfcb0b4968f247c2811175d0c766d30",
            "filename": "test/e2e/app-dir/global-error/with-style-import/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Fwith-style-import%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Fwith-style-import%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Fwith-style-import%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n-import { assertHasRedbox, getRedboxHeader } from 'next-test-utils'\n+import { waitForRedbox, getRedboxHeader } from 'next-test-utils'\n import { nextTestSetup } from 'e2e-utils'\n \n async function testDev(browser, errorRegex) {\n-  await assertHasRedbox(browser)\n+  await waitForRedbox(browser)\n   expect(await getRedboxHeader(browser)).toMatch(errorRegex)\n }\n "
        },
        {
            "sha": "f89b38536f3deb83466ad881caae03c6607ab3c7",
            "filename": "test/e2e/app-dir/global-not-found/basic/global-not-found-basic.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fbasic%2Fglobal-not-found-basic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fbasic%2Fglobal-not-found-basic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fbasic%2Fglobal-not-found-basic.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('global-not-found - basic', () => {\n   const { next, isNextDev } = nextTestSetup({\n@@ -9,7 +9,7 @@ describe('global-not-found - basic', () => {\n   it('should render global-not-found for 404', async () => {\n     const browser = await next.browser('/does-not-exist')\n     if (isNextDev) {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n \n     const errorTitle = await browser.elementByCss('#global-error-title').text()"
        },
        {
            "sha": "4a5d64017e6c56d927362ee528760572c245d7ed",
            "filename": "test/e2e/app-dir/global-not-found/no-root-layout/no-root-layout.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fno-root-layout%2Fno-root-layout.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fno-root-layout%2Fno-root-layout.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fno-root-layout%2Fno-root-layout.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('global-not-found - no-root-layout', () => {\n   const { next, isNextDev } = nextTestSetup({\n@@ -9,7 +9,7 @@ describe('global-not-found - no-root-layout', () => {\n   it('should render global-not-found for 404', async () => {\n     const browser = await next.browser('/does-not-exist')\n     if (isNextDev) {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n \n     const errorTitle = await browser.elementByCss('#global-error-title').text()"
        },
        {
            "sha": "fb4fc957b7d4c7104f82ba32df3e634716874ab1",
            "filename": "test/e2e/app-dir/loader-file-named-export-custom-loader-error/loader-file-named-export-custom-loader-error.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Floader-file-named-export-custom-loader-error%2Floader-file-named-export-custom-loader-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Floader-file-named-export-custom-loader-error%2Floader-file-named-export-custom-loader-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Floader-file-named-export-custom-loader-error%2Floader-file-named-export-custom-loader-error.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,11 +1,11 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxHeader } from 'next-test-utils'\n+import { waitForRedbox, getRedboxHeader } from 'next-test-utils'\n \n const errorMessage =\n   'images.loaderFile detected but the file is missing default export.\\nRead more: https://nextjs.org/docs/messages/invalid-images-config'\n \n async function testDev(browser, errorRegex) {\n-  await assertHasRedbox(browser)\n+  await waitForRedbox(browser)\n   expect(await getRedboxHeader(browser)).toMatch(errorRegex)\n }\n "
        },
        {
            "sha": "4c33c3a46f0616521a6771a7faea50ed6924a62e",
            "filename": "test/e2e/app-dir/metadata-route-like-pages/metadata-route-like-pages.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fmetadata-route-like-pages%2Fmetadata-route-like-pages.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fmetadata-route-like-pages%2Fmetadata-route-like-pages.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-route-like-pages%2Fmetadata-route-like-pages.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('metadata-route-like-pages', () => {\n   const { next } = nextTestSetup({\n@@ -8,13 +8,13 @@ describe('metadata-route-like-pages', () => {\n \n   it('should able to visit sitemap page', async () => {\n     const browser = await next.browser('/sitemap')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     expect(await browser.elementByCss('h1').text()).toBe('Sitemap')\n   })\n \n   it('should able to visit icon page', async () => {\n     const browser = await next.browser('/icon')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     expect(await browser.elementByCss('h1').text()).toBe('Icon')\n   })\n })"
        },
        {
            "sha": "ac3d091bc81b9bc5912cac21e1a89bea19b17896",
            "filename": "test/e2e/app-dir/next-after-app-static/generate-static-params-error/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnext-after-app-static%2Fgenerate-static-params-error%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnext-after-app-static%2Fgenerate-static-params-error%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-after-app-static%2Fgenerate-static-params-error%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxDescription,\n } from '../../../../lib/next-test-utils'\n \n@@ -18,7 +18,7 @@ describe('after() in generateStaticParams - thrown errors', () => {\n     it('shows the error overlay if an error is thrown inside after', async () => {\n       await next.start()\n       const browser = await next.browser('/callback/1')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const route = '/callback/[myParam]'\n       expect(await getRedboxDescription(browser)).toContain(\n         `My cool error thrown inside after on route \"${route}\"`"
        },
        {
            "sha": "87ae198a2da28236499f9d64ee1640904cb6eb65",
            "filename": "test/e2e/app-dir/next-after-app-static/generate-static-params/index.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnext-after-app-static%2Fgenerate-static-params%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnext-after-app-static%2Fgenerate-static-params%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-after-app-static%2Fgenerate-static-params%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n import { nextTestSetup } from 'e2e-utils'\n import * as Log from './utils/log'\n-import { assertNoRedbox, retry } from '../../../../lib/next-test-utils'\n+import { waitForNoRedbox, retry } from '../../../../lib/next-test-utils'\n \n describe('after() in generateStaticParams', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n@@ -31,7 +31,7 @@ describe('after() in generateStaticParams', () => {\n       const browser = await next.browser('/one/a')\n \n       expect(await browser.elementByCss('body').text()).toBe('Param: a')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       await retry(async () => {\n         expect(Log.readCliLogs(getLogs())).toContainEqual({\n           source: '[generateStaticParams] /one/[myParam]',\n@@ -40,7 +40,7 @@ describe('after() in generateStaticParams', () => {\n \n       await browser.get(new URL('/two/d', next.url).href)\n       expect(await browser.elementByCss('body').text()).toBe('Param: d')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       await retry(async () => {\n         expect(Log.readCliLogs(getLogs())).toContainEqual({\n           source: '[generateStaticParams] /two/[myParam]',"
        },
        {
            "sha": "7f28f69ddfe190a3fc415f56b5a3e98ee2030c20",
            "filename": "test/e2e/app-dir/next-after-pages/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnext-after-pages%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnext-after-pages%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-after-pages%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n /* eslint-env jest */\n import { nextTestSetup, isNextDev } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource, retry } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource, retry } from 'next-test-utils'\n import * as Log from './utils/log'\n \n // using after is a compile-time error in build mode.\n@@ -60,7 +60,7 @@ _describe('after() - pages', () => {\n       ])('$title', async ({ path }) => {\n         const browser = await next.browser(path)\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxSource(browser)).toMatch(\n           /You're importing a component that needs \"?after\"?\\. That only works in a Server Component which is not supported in the pages\\/ directory\\./\n         )"
        },
        {
            "sha": "809bd70451fba72566acd98c2f52c586ef02586e",
            "filename": "test/e2e/app-dir/next-font/next-font.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnext-font%2Fnext-font.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnext-font%2Fnext-font.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-font%2Fnext-font.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup, FileRef } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource } from 'next-test-utils'\n import { join } from 'path'\n import cheerio from 'cheerio'\n \n@@ -481,7 +481,7 @@ describe('app dir - next/font', () => {\n               './does-not-exist.woff2'\n             )\n           )\n-          await assertHasRedbox(browser)\n+          await waitForRedbox(browser)\n           expect(await getRedboxSource(browser)).toInclude(\n             \"Can't resolve './does-not-exist.woff2'\"\n           )"
        },
        {
            "sha": "ebaec7811502286a25da4d76ec0d7c0419e910e1",
            "filename": "test/e2e/app-dir/non-root-project-monorepo/non-root-project-monorepo.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnon-root-project-monorepo%2Fnon-root-project-monorepo.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnon-root-project-monorepo%2Fnon-root-project-monorepo.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnon-root-project-monorepo%2Fnon-root-project-monorepo.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup, FileRef } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxCallStack,\n   getRedboxSource,\n } from 'next-test-utils'\n@@ -43,7 +43,7 @@ describe('non-root-project-monorepo', () => {\n     it('should work on client-side', async () => {\n       const browser = await next.browser('/monorepo-package-ssr')\n       expect(await browser.elementByCss('p').text()).toBe('Hello Typescript')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await browser.elementByCss('p').text()).toBe('Hello Typescript')\n       await browser.close()\n     })\n@@ -66,7 +66,7 @@ describe('non-root-project-monorepo', () => {\n \n     it('should work on client-side', async () => {\n       const browser = await next.browser('/import-meta-url-ssr')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       if (isTurbopack) {\n         // Turbopack intentionally doesn't expose the full path to the browser bundles\n         expect(await browser.elementByCss('p').text()).toBe(\n@@ -85,7 +85,7 @@ describe('non-root-project-monorepo', () => {\n     describe('source-maps', () => {\n       it('should work on RSC', async () => {\n         const browser = await next.browser('/source-maps-rsc')\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         if (isTurbopack) {\n           // TODO the function name should be hidden\n@@ -148,7 +148,7 @@ describe('non-root-project-monorepo', () => {\n \n       it('should work on SSR', async () => {\n         const browser = await next.browser('/source-maps-ssr')\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         if (isTurbopack) {\n           // TODO the function name should be hidden\n@@ -211,7 +211,7 @@ describe('non-root-project-monorepo', () => {\n \n       it('should work on client-side', async () => {\n         const browser = await next.browser('/source-maps-client')\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         if (isTurbopack) {\n           // TODO the function name should be hidden"
        },
        {
            "sha": "c5c8f56c1bb1eb434285d12192047286726e5cdd",
            "filename": "test/e2e/app-dir/not-found-default/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnot-found-default%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnot-found-default%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnot-found-default%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('app dir - not found with default 404 page', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n@@ -92,7 +92,7 @@ describe('app dir - not found with default 404 page', () => {\n     )\n \n     await browser.loadPage(next.url + '/group-dynamic/404')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     await browser.waitForElementByCss('.group-root-layout')\n     expect(await browser.elementByCss('.next-error-h1').text()).toBe('404')\n   })"
        },
        {
            "sha": "82fcb2d92400c7f2e9a56af8798e11504e21b0d0",
            "filename": "test/e2e/app-dir/not-found-with-layout-and-group-not-found/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnot-found-with-layout-and-group-not-found%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnot-found-with-layout-and-group-not-found%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnot-found-with-layout-and-group-not-found%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('app dir - not found with nested layouts and custom not-found', () => {\n   const { next, skipped } = nextTestSetup({\n@@ -13,7 +13,7 @@ describe('app dir - not found with nested layouts and custom not-found', () => {\n \n   it('should render the custom not-found page when notFound() is thrown from a page within the group', async () => {\n     const browser = await next.browser('/')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     const heading = await browser.elementByCss('h1#not-found-heading')\n     expect(await heading.text()).toBe('Group Not Found Page')\n   })"
        },
        {
            "sha": "724ae91bbed4e038872e4e166577c2abfd1c84fe",
            "filename": "test/e2e/app-dir/not-found-with-nested-layouts/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnot-found-with-nested-layouts%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fnot-found-with-nested-layouts%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnot-found-with-nested-layouts%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('app dir - not found with nested layouts', () => {\n   const { next, skipped } = nextTestSetup({\n@@ -13,7 +13,7 @@ describe('app dir - not found with nested layouts', () => {\n \n   it('should render the custom not-found page when notFound() is thrown from a page', async () => {\n     const browser = await next.browser('/')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     const heading = await browser.elementByCss('h1#not-found-heading')\n     expect(await heading.text()).toBe('Custom Not Found Page')\n   })"
        },
        {
            "sha": "791ac3c1828b0cf2a9a165c1c455ffe5e9b3f258",
            "filename": "test/e2e/app-dir/parallel-routes-leaf-segments/parallel-routes-leaf-segments.build-error.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fparallel-routes-leaf-segments%2Fparallel-routes-leaf-segments.build-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fparallel-routes-leaf-segments%2Fparallel-routes-leaf-segments.build-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fparallel-routes-leaf-segments%2Fparallel-routes-leaf-segments.build-error.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import path from 'path'\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, retry } from 'next-test-utils'\n+import { waitForRedbox, retry } from 'next-test-utils'\n \n describe('parallel-routes-leaf-segments-build-error', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n@@ -30,7 +30,7 @@ describe('parallel-routes-leaf-segments-build-error', () => {\n     it('should throw MissingDefaultParallelRouteError for @header slot', async () => {\n       if (isNextDev) {\n         const browser = await next.browser('/with-children/child')\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         await retry(async () => {\n           const logs = await browser.log()\n@@ -56,7 +56,7 @@ describe('parallel-routes-leaf-segments-build-error', () => {\n     it('should throw MissingDefaultParallelRouteError for parallel slots', async () => {\n       if (isNextDev) {\n         const browser = await next.browser('/with-groups-and-children/nested')\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         await retry(async () => {\n           const logs = await browser.log()"
        },
        {
            "sha": "40cdab7510ea3ea928c8b7ab8befd3043262a5f0",
            "filename": "test/e2e/app-dir/refresh/refresh.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Frefresh%2Frefresh.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Frefresh%2Frefresh.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Frefresh%2Frefresh.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { retry, assertHasRedbox, getRedboxDescription } from 'next-test-utils'\n+import { retry, waitForRedbox, getRedboxDescription } from 'next-test-utils'\n \n describe('app-dir refresh', () => {\n   const { next, skipped, isNextDev } = nextTestSetup({\n@@ -38,7 +38,7 @@ describe('app-dir refresh', () => {\n     const browser = await next.browser('/refresh-invalid-render')\n \n     if (isNextDev) {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const description = await getRedboxDescription(browser)\n       expect(description).toContain(\n         'refresh can only be called from within a Server Action'\n@@ -67,7 +67,7 @@ describe('app-dir refresh', () => {\n     const browser = await next.browser('/refresh-invalid-cache')\n \n     if (isNextDev) {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const description = await getRedboxDescription(browser)\n       expect(description).toContain(\n         'refresh can only be called from within a Server Action'"
        },
        {
            "sha": "8e8a4e09b8097ba8174fec6fd3c911577a9cf37d",
            "filename": "test/e2e/app-dir/revalidatetag-rsc/revalidatetag-rsc.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Frevalidatetag-rsc%2Frevalidatetag-rsc.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Frevalidatetag-rsc%2Frevalidatetag-rsc.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Frevalidatetag-rsc%2Frevalidatetag-rsc.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxHeader, retry } from 'next-test-utils'\n+import { waitForRedbox, getRedboxHeader, retry } from 'next-test-utils'\n \n describe('revalidateTag-rsc', () => {\n   const { next, isNextDev, isNextDeploy } = nextTestSetup({\n@@ -28,7 +28,7 @@ describe('revalidateTag-rsc', () => {\n       await browser.elementByCss('#revalidate-via-page').click()\n \n       if (isNextDev) {\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         await expect(getRedboxHeader(browser)).resolves.toContain(\n           'Route /revalidate_via_page used \"revalidateTag data\"'\n         )"
        },
        {
            "sha": "fde385d9d85d29ef3bcbaad4a6566f3beca03d17",
            "filename": "test/e2e/app-dir/root-layout/root-layout.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Froot-layout%2Froot-layout.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Froot-layout%2Froot-layout.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Froot-layout%2Froot-layout.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, check, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, check, getRedboxSource } from 'next-test-utils'\n \n describe('app-dir root layout', () => {\n   const {\n@@ -23,7 +23,7 @@ describe('app-dir root layout', () => {\n           waitHydration: false,\n         })\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n         \"Please make sure to include the following tags in your root layout: <html>, <body>.\n \n@@ -37,7 +37,7 @@ describe('app-dir root layout', () => {\n         })\n         await browser.elementByCss('a').click()\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n         \"Please make sure to include the following tags in your root layout: <html>, <body>.\n \n@@ -50,7 +50,7 @@ describe('app-dir root layout', () => {\n           waitHydration: false,\n         })\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n         \"Please make sure to include the following tags in your root layout: <html>, <body>.\n "
        },
        {
            "sha": "c2e6d6135f304deec94a73e286e67b4852190e11",
            "filename": "test/e2e/app-dir/scss/invalid-global-with-app/invalid-global-with-app.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-global-with-app%2Finvalid-global-with-app.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-global-with-app%2Finvalid-global-with-app.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-global-with-app%2Finvalid-global-with-app.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n \n import { isNextStart, nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource } from 'next-test-utils'\n \n describe('Invalid Global CSS with Custom App', () => {\n   const { next, skipped, isTurbopack, isRspack } = nextTestSetup({\n@@ -33,7 +33,7 @@ describe('Invalid Global CSS with Custom App', () => {\n     it('should show a build error', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const errorSource = await getRedboxSource(browser)\n \n       if (isTurbopack) {"
        },
        {
            "sha": "aabe3ede8f465b9a6820687e0dcdb105724de0fc",
            "filename": "test/e2e/app-dir/scss/invalid-global/invalid-global.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-global%2Finvalid-global.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-global%2Finvalid-global.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-global%2Finvalid-global.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n \n import { isNextStart, nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource } from 'next-test-utils'\n \n describe('Invalid Global CSS', () => {\n   const { next, skipped, isTurbopack, isRspack } = nextTestSetup({\n@@ -33,7 +33,7 @@ describe('Invalid Global CSS', () => {\n     it('should show a build error', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const errorSource = await getRedboxSource(browser)\n \n       if (isTurbopack) {"
        },
        {
            "sha": "ff6c61feb47a1f7a96e5cb857b9ae030a28a13f2",
            "filename": "test/e2e/app-dir/scss/invalid-module-document/invalid-module-document.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-module-document%2Finvalid-module-document.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-module-document%2Finvalid-module-document.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fscss%2Finvalid-module-document%2Finvalid-module-document.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n \n import { isNextStart, nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource } from 'next-test-utils'\n \n // Importing module CSS in _document is allowed in Turbopack\n ;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n@@ -36,7 +36,7 @@ import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n       it('should show a build error', async () => {\n         const browser = await next.browser('/')\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         const errorSource = await getRedboxSource(browser)\n \n         if (isRspack) {"
        },
        {
            "sha": "e34ca5fc6d01f7b5ea52bdd3024cbae42f5e92a8",
            "filename": "test/e2e/app-dir/scss/npm-import-bad/npm-import-bad.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Fnpm-import-bad%2Fnpm-import-bad.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Fnpm-import-bad%2Fnpm-import-bad.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fscss%2Fnpm-import-bad%2Fnpm-import-bad.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n \n import { isNextStart, nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource } from 'next-test-utils'\n \n describe('CSS Import from node_modules', () => {\n   const { next, skipped, isTurbopack, isRspack } = nextTestSetup({\n@@ -32,7 +32,7 @@ describe('CSS Import from node_modules', () => {\n     it('should show a build error', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const errorSource = await getRedboxSource(browser)\n \n       if (isTurbopack) {"
        },
        {
            "sha": "d9d549dcb9add906da1112025a837ec678f92230",
            "filename": "test/e2e/app-dir/scss/valid-and-invalid-global/valid-and-invalid-global.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Fvalid-and-invalid-global%2Fvalid-and-invalid-global.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fscss%2Fvalid-and-invalid-global%2Fvalid-and-invalid-global.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fscss%2Fvalid-and-invalid-global%2Fvalid-and-invalid-global.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n \n import { isNextStart, nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource } from 'next-test-utils'\n \n describe('Valid and Invalid Global CSS with Custom App', () => {\n   const { next, skipped, isTurbopack, isRspack } = nextTestSetup({\n@@ -33,7 +33,7 @@ describe('Valid and Invalid Global CSS with Custom App', () => {\n     it('should show a build error', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const errorSource = await getRedboxSource(browser)\n \n       if (isTurbopack) {"
        },
        {
            "sha": "f1280f6f76cec78ae724b0659199ced2dc535ea8",
            "filename": "test/e2e/app-dir/unauthorized/default/unauthorized-default.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Funauthorized%2Fdefault%2Funauthorized-default.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Funauthorized%2Fdefault%2Funauthorized-default.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Funauthorized%2Fdefault%2Funauthorized-default.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxDescription,\n } from 'next-test-utils'\n \n@@ -22,7 +22,7 @@ describe('app dir - unauthorized with default unauthorized boundary', () => {\n     await browser.elementByCss('#trigger-unauthorized').click()\n \n     if (isNextDev) {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxDescription(browser)).toMatch(\n         /unauthorized\\(\\) is not allowed to use in root layout/\n       )\n@@ -34,7 +34,7 @@ describe('app dir - unauthorized with default unauthorized boundary', () => {\n     const browser = await next.browser('/?root-unauthorized=1')\n \n     if (isNextDev) {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxDescription(browser)).toBe(\n         'Error: unauthorized() is not allowed to use in root layout'\n       )\n@@ -72,7 +72,7 @@ describe('app dir - unauthorized with default unauthorized boundary', () => {\n     )\n \n     await browser.loadPage(next.url + '/group-dynamic/401')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     await browser.waitForElementByCss('.group-root-layout')\n     expect(await browser.elementByCss('.next-error-h1').text()).toBe('401')\n   })"
        },
        {
            "sha": "a76927bd6cd9ca6c2d0dd90fc4c5faae8140669e",
            "filename": "test/e2e/app-dir/use-cache-close-over-function/use-cache-close-over-function.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fuse-cache-close-over-function.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fuse-cache-close-over-function.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fuse-cache-close-over-function.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n   openRedbox,\n@@ -68,7 +68,7 @@ describe('use-cache-close-over-function', () => {\n       const outputIndex = next.cliOutput.length\n       const browser = await next.browser('/server')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       const errorDescription = await getRedboxDescription(browser)\n       const errorSource = await getRedboxSource(browser)"
        },
        {
            "sha": "000270a83aa79d75d9de7c24860f3b25d4d6f0f8",
            "filename": "test/e2e/app-dir/use-cache-hanging-inputs/use-cache-hanging-inputs.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fuse-cache-hanging-inputs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fuse-cache-hanging-inputs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fuse-cache-hanging-inputs.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -4,7 +4,7 @@ import {\n   getRedboxDescription,\n   getRedboxSource,\n   openRedbox,\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxTitle,\n   getRedboxTotalErrorCount,\n } from 'next-test-utils'\n@@ -192,7 +192,7 @@ describe('use-cache-hanging-inputs', () => {\n       it('should show an error overlay with only one error', async () => {\n         const browser = await next.browser('/error')\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         const count = await getRedboxTotalErrorCount(browser)\n         const title = await getRedboxTitle(browser)"
        },
        {
            "sha": "01c03cfd8110d2e8f7ed025df8095c0bbef5aea8",
            "filename": "test/e2e/app-dir/use-cache-search-params/use-cache-search-params.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-search-params%2Fuse-cache-search-params.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-search-params%2Fuse-cache-search-params.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-search-params%2Fuse-cache-search-params.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   assertNoConsoleErrors,\n-  assertNoRedbox,\n+  waitForNoRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n } from 'next-test-utils'\n@@ -34,7 +34,7 @@ describe('use-cache-search-params', () => {\n         const outputIndex = next.cliOutput.length\n         const browser = await next.browser(`${route}?foo=1`)\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         const errorDescription = await getRedboxDescription(browser)\n         const errorSource = await getRedboxSource(browser)\n@@ -70,7 +70,7 @@ describe('use-cache-search-params', () => {\n         const outputIndex = next.cliOutput.length\n         const browser = await next.browser(`${route}?foo=1`)\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         const errorDescription = await getRedboxDescription(browser)\n         const errorSource = await getRedboxSource(browser)\n@@ -104,7 +104,7 @@ describe('use-cache-search-params', () => {\n         await browser.refresh()\n         await browser.refresh()\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n \n         const errorDescription = await getRedboxDescription(browser)\n \n@@ -121,7 +121,7 @@ describe('use-cache-search-params', () => {\n         const outputIndex = next.cliOutput.length\n         const browser = await next.browser(`${route}?foo=1`)\n \n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n \n         const cliOutput = stripAnsi(next.cliOutput.slice(outputIndex))\n "
        },
        {
            "sha": "406e52fabd2021ab975e68b78539fb29be5228b4",
            "filename": "test/e2e/app-dir/use-cache-segment-configs/use-cache-segment-configs.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox } from 'next-test-utils'\n+import { waitForRedbox } from 'next-test-utils'\n import stripAnsi from 'strip-ansi'\n \n describe('use-cache-segment-configs', () => {\n@@ -19,7 +19,7 @@ describe('use-cache-segment-configs', () => {\n     if (isNextDev) {\n       const browser = await next.browser('/runtime')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`"
        },
        {
            "sha": "58488c4e40a142f17327c8708d0ca7779217358c",
            "filename": "test/e2e/app-dir/use-cache-unknown-cache-kind/use-cache-unknown-cache-kind.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n   retry,\n@@ -102,14 +102,14 @@ describe('use-cache-unknown-cache-kind', () => {\n     it('should not show an error for default cache kinds', async () => {\n       await using sandbox = await createSandbox(next, undefined, '/remote')\n       const { browser } = sandbox\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     })\n \n     it('should show a build error', async () => {\n       await using sandbox = await createSandbox(next, undefined, '/')\n       const { browser } = sandbox\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       const errorDescription = await getRedboxDescription(browser)\n       const errorSource = await getRedboxSource(browser)\n@@ -175,7 +175,7 @@ describe('use-cache-unknown-cache-kind', () => {\n       await using sandbox = await createSandbox(next, undefined, '/')\n       const { browser, session } = sandbox\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       await session.patch(\n         'next.config.js',\n@@ -191,7 +191,7 @@ describe('use-cache-unknown-cache-kind', () => {\n \n       await retry(async () => {\n         expect(await browser.elementByCss('p').text()).toBe('hello world')\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       })\n     })\n   }"
        },
        {
            "sha": "4b248eee3b5b510413998e1b762e49019969f9bb",
            "filename": "test/e2e/app-dir/use-cache-without-experimental-flag/use-cache-without-experimental-flag.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n import { nextTestSetup } from 'e2e-utils'\n import { NextConfig } from 'next'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxDescription,\n   getRedboxSource,\n   retry,\n@@ -105,7 +105,7 @@ describe('use-cache-without-experimental-flag', () => {\n     it('should show a build error', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       const errorDescription = await getRedboxDescription(browser)\n       const errorSource = await getRedboxSource(browser)\n@@ -176,15 +176,15 @@ describe('use-cache-without-experimental-flag', () => {\n     it('should recover from the build error if useCache flag is set', async () => {\n       const browser = await next.browser('/')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       await next.patchFile(\n         'next.config.js',\n         `module.exports = ${JSON.stringify(nextConfigWithUseCache)}`,\n         () =>\n           retry(async () => {\n             expect(await browser.elementByCss('p').text()).toBe('hello world')\n-            await assertNoRedbox(browser)\n+            await waitForNoRedbox(browser)\n           })\n       )\n     })"
        },
        {
            "sha": "34cc2756e8cd8111220bdbcf43bbd0e082060113",
            "filename": "test/e2e/app-dir/use-cache/use-cache.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fuse-cache.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fuse-cache.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fuse-cache.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import {\n   assertNoConsoleErrors,\n-  assertNoErrorToast,\n+  waitForNoErrorToast,\n   retry,\n } from 'next-test-utils'\n import stripAnsi from 'strip-ansi'\n@@ -1161,7 +1161,7 @@ describe('use-cache', () => {\n       expect(canonicalUrl).toBe('https://example.com/baz/qux')\n \n       // There should be no timeout error.\n-      await assertNoErrorToast(browser)\n+      await waitForNoErrorToast(browser)\n     })\n \n     it('makes a cached generateMetadata function that implicitly depends on params dynamic during prerendering', async () => {\n@@ -1190,7 +1190,7 @@ describe('use-cache', () => {\n       browser = await next.browser('/generate-metadata-resume/canonical/foo')\n \n       // There should be no timeout error.\n-      await assertNoErrorToast(browser)\n+      await waitForNoErrorToast(browser)\n     })\n \n     it('makes a cached generateMetadata function that reads params dynamic during prerendering', async () => {"
        },
        {
            "sha": "0754bc965587635fba049d7b1d61bafe9482ce28",
            "filename": "test/e2e/basepath/basepath.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fbasepath%2Fbasepath.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fbasepath%2Fbasepath.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fbasepath%2Fbasepath.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -4,7 +4,7 @@ import cheerio from 'cheerio'\n import webdriver from 'next-webdriver'\n import { nextTestSetup } from 'e2e-utils'\n import {\n-  assertNoRedbox,\n+  waitForNoRedbox,\n   check,\n   fetchViaHTTP,\n   getClientBuildManifestLoaderChunkUrlPath,\n@@ -535,7 +535,7 @@ describe('basePath', () => {\n       expect(await browser.eval('window.location.search')).toBe('?query=true')\n \n       if (isNextDev) {\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       }\n     } finally {\n       await browser.close()\n@@ -559,7 +559,7 @@ describe('basePath', () => {\n       expect(await browser.eval('window.location.search')).toBe('?query=true')\n \n       if (isNextDev) {\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       }\n     } finally {\n       await browser.close()"
        },
        {
            "sha": "1f408c5472ce772db81f8994dd8f8eef21a17cc6",
            "filename": "test/e2e/basepath/trailing-slash.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fbasepath%2Ftrailing-slash.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fbasepath%2Ftrailing-slash.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fbasepath%2Ftrailing-slash.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import webdriver from 'next-webdriver'\n import { createNext } from 'e2e-utils'\n import { NextInstance } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('basePath + trailingSlash', () => {\n   let next: NextInstance\n@@ -42,7 +42,7 @@ describe('basePath + trailingSlash', () => {\n         expect(await browser.eval('window.location.search')).toBe('?query=true')\n \n         if (dev) {\n-          await assertNoRedbox(browser)\n+          await waitForNoRedbox(browser)\n         }\n       } finally {\n         await browser.close()\n@@ -68,7 +68,7 @@ describe('basePath + trailingSlash', () => {\n         expect(await browser.eval('window.location.search')).toBe('?query=true')\n \n         if (dev) {\n-          await assertNoRedbox(browser)\n+          await waitForNoRedbox(browser)\n         }\n       } finally {\n         await browser.close()"
        },
        {
            "sha": "44076bfd6905a257fa91f5b1936a90109dabbdeb",
            "filename": "test/e2e/conflicting-app-page-error/index.test.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fconflicting-app-page-error%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fconflicting-app-page-error%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fconflicting-app-page-error%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   getRedboxHeader,\n   getRedboxSource,\n   retry,\n@@ -49,7 +49,7 @@ describe('Conflict between app file and pages file', () => {\n \n   async function containConflictsError(browser, conflicts) {\n     await retry(async () => {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       if (process.env.IS_TURBOPACK_TEST) {\n         expect(await getRedboxDescription(browser)).toContain(\n           'App Router and Pages Router both match path:'\n@@ -70,7 +70,7 @@ describe('Conflict between app file and pages file', () => {\n     it('should show error overlay for /another', async () => {\n       await next.start()\n       const browser = await next.browser('/another')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       await containConflictsError(browser, [\n         ['pages/index.js', 'app/page.js'],\n         ['pages/another.js', 'app/another/page.js'],\n@@ -79,7 +79,7 @@ describe('Conflict between app file and pages file', () => {\n \n     it('should show error overlay for /', async () => {\n       const browser = await next.browser('/')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       await containConflictsError(browser, [\n         ['pages/index.js', 'app/page.js'],\n         ['pages/another.js', 'app/another/page.js'],\n@@ -88,14 +88,14 @@ describe('Conflict between app file and pages file', () => {\n \n     it('should support hmr with conflicts', async () => {\n       const browser = await next.browser('/')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n \n       await next.renameFile('pages/index.js', 'pages/index2.js')\n       await next.renameFile('pages/another.js', 'pages/another2.js')\n \n       // Wait for successful recompilation\n       await browser.loadPage(next.url + '/')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await browser.elementByCss('p').text()).toContain('index - app')\n \n       await browser.loadPage(next.url + '/another')\n@@ -104,23 +104,23 @@ describe('Conflict between app file and pages file', () => {\n \n     it('should not show error overlay for non conflict pages under app or pages dir', async () => {\n       const browser = await next.browser('/non-conflict')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await getRedboxHeader(browser)).toEqual(null)\n       expect(await browser.elementByCss('p').text()).toBe('non-conflict app')\n \n       await browser.loadPage(next.url + '/non-conflict-pages')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(await getRedboxHeader(browser)).toEqual(null)\n       expect(await browser.elementByCss('h1').text()).toBe('non-conflict pages')\n     })\n \n     it('should error again when there is new conflict', async () => {\n       const browser = await next.browser('/')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       // Re-trigger the conflicted errors\n       await next.renameFile('pages/index2.js', 'pages/index.js')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       await containConflictsError(browser, [['pages/index.js', 'app/page.js']])\n     })\n   }"
        },
        {
            "sha": "0440be47f7ba9487a831a54c28d242f6acaee653",
            "filename": "test/e2e/geist-font/geist-font.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fgeist-font%2Fgeist-font.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fgeist-font%2Fgeist-font.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fgeist-font%2Fgeist-font.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('geist-font', () => {\n   const { next } = nextTestSetup({\n@@ -15,7 +15,7 @@ describe('geist-font', () => {\n   it('should work with geist font in pages router', async () => {\n     const browser = await next.browser('/foo')\n \n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     const text = await browser.elementByCss('p').text()\n     expect(text).toBe('Foo page')\n   })"
        },
        {
            "sha": "c4849d359b7c7007409d20aa27e571d76ef29d74",
            "filename": "test/e2e/getserversideprops/test/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fgetserversideprops%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fgetserversideprops%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fgetserversideprops%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -12,7 +12,7 @@ import {\n   normalizeRegEx,\n   renderViaHTTP,\n   waitFor,\n-  assertHasRedbox,\n+  waitForRedbox,\n } from 'next-test-utils'\n import { join } from 'path'\n import webdriver from 'next-webdriver'\n@@ -768,7 +768,7 @@ const runTests = (isDev = false, isDeploy = false) => {\n       const browser = await webdriver(next.url, '/')\n       await browser.elementByCss('#non-json').click()\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       await expect(getRedboxHeader(browser)).resolves.toMatch(\n         /Error serializing `.time` returned from `getServerSideProps`/\n       )"
        },
        {
            "sha": "f3c19b8d34afc34ef3d03719d9c19b9cad0c62c3",
            "filename": "test/e2e/legacy-link-behavior/validations.console.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Flegacy-link-behavior%2Fvalidations.console.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Flegacy-link-behavior%2Fvalidations.console.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Flegacy-link-behavior%2Fvalidations.console.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { isNextDev, nextTestSetup } from 'e2e-utils'\n-import { assertNoRedbox } from 'next-test-utils'\n+import { waitForNoRedbox } from 'next-test-utils'\n \n describe('Validations for <Link legacyBehavior>', () => {\n   const { next, isNextDeploy } = nextTestSetup({\n@@ -117,7 +117,7 @@ describe('Validations for <Link legacyBehavior>', () => {\n           )\n \n           if (isNextDev) {\n-            await assertNoRedbox(browser)\n+            await waitForNoRedbox(browser)\n           } else {\n             expect(newConsoleOutput()).toEqual('')\n           }\n@@ -129,7 +129,7 @@ describe('Validations for <Link legacyBehavior>', () => {\n           )\n \n           if (isNextDev) {\n-            await assertNoRedbox(browser)\n+            await waitForNoRedbox(browser)\n           } else {\n             expect(newConsoleOutput()).toEqual('')\n           }\n@@ -188,7 +188,7 @@ describe('Validations for <Link legacyBehavior>', () => {\n         )\n \n         if (isNextDev) {\n-          await assertNoRedbox(browser)\n+          await waitForNoRedbox(browser)\n         } else {\n           expect(newConsoleOutput()).toEqual('')\n         }\n@@ -233,7 +233,7 @@ describe('Validations for <Link legacyBehavior>', () => {\n           )\n \n           if (isNextDev) {\n-            await assertNoRedbox(browser)\n+            await waitForNoRedbox(browser)\n           } else {\n             expect(newConsoleOutput()).toEqual('')\n           }\n@@ -245,7 +245,7 @@ describe('Validations for <Link legacyBehavior>', () => {\n           )\n \n           if (isNextDev) {\n-            await assertNoRedbox(browser)\n+            await waitForNoRedbox(browser)\n           } else {\n             expect(newConsoleOutput()).toEqual('')\n           }\n@@ -320,7 +320,7 @@ describe('Validations for <Link legacyBehavior>', () => {\n       const browser = await next.browser('/validations/client/child-component')\n \n       if (isNextDev) {\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       } else {\n         expect(newConsoleOutput()).toEqual('')\n       }"
        },
        {
            "sha": "97bb8b8cf81d19ed514392075cb3761d33799414",
            "filename": "test/e2e/module-layer/module-layer.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fmodule-layer%2Fmodule-layer.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fmodule-layer%2Fmodule-layer.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fmodule-layer%2Fmodule-layer.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource, retry } from 'next-test-utils'\n+import { waitForRedbox, getRedboxSource, retry } from 'next-test-utils'\n \n describe('module layer', () => {\n   const { next, isNextStart, isNextDev } = nextTestSetup({\n@@ -115,7 +115,7 @@ describe('module layer', () => {\n         )\n \n         await retry(async () => {\n-          await assertHasRedbox(browser)\n+          await waitForRedbox(browser)\n           const source = await getRedboxSource(browser)\n           expect(source).toContain(\n             `You're importing a component that imports client-only. It only works in a Client Component but none of its parents are marked with \"use client\"`"
        },
        {
            "sha": "3b00e0319ad86ea03411a64a07022d1a620ab9ff",
            "filename": "test/e2e/prerender.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fprerender.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fprerender.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fprerender.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -6,7 +6,7 @@ import escapeRegex from 'escape-string-regexp'\n import { createNext, FileRef } from 'e2e-utils'\n import { NextInstance } from 'e2e-utils'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   check,\n   fetchViaHTTP,\n   getBrowserBodyText,\n@@ -1356,7 +1356,7 @@ describe('Prerender', () => {\n         // )\n \n         // FIXME: disable this\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxHeader(browser)).toMatch(\n           /Failed to load static props/\n         )\n@@ -1372,7 +1372,7 @@ describe('Prerender', () => {\n         // )\n \n         // FIXME: disable this\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxHeader(browser)).toMatch(\n           /Failed to load static props/\n         )"
        },
        {
            "sha": "b80e1f31f09b58ce543edaf8425ba28db2e7447d",
            "filename": "test/e2e/react-compiler/react-compiler.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Freact-compiler%2Freact-compiler.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Freact-compiler%2Freact-compiler.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Freact-compiler%2Freact-compiler.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup, FileRef } from 'e2e-utils'\n-import { assertHasRedbox } from 'next-test-utils'\n+import { waitForRedbox } from 'next-test-utils'\n import { join } from 'path'\n import stripAnsi from 'strip-ansi'\n \n@@ -143,7 +143,7 @@ describe.each(['default', 'babelrc'] as const)(\n             '\\n  2 |'\n         )\n \n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n       }\n     })\n   }"
        },
        {
            "sha": "430d6b5cdc2b069c59bee9f6318a0bd7b4f1b5ce",
            "filename": "test/e2e/type-module-interop/index.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Ftype-module-interop%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Ftype-module-interop%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Ftype-module-interop%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,6 +1,6 @@\n import { createNext } from 'e2e-utils'\n import { NextInstance } from 'e2e-utils'\n-import { assertNoRedbox, renderViaHTTP } from 'next-test-utils'\n+import { waitForNoRedbox, renderViaHTTP } from 'next-test-utils'\n import webdriver from 'next-webdriver'\n import cheerio from 'cheerio'\n \n@@ -89,7 +89,7 @@ describe('Type module interop', () => {\n \n   it('should render client-side', async () => {\n     const browser = await webdriver(next.url, '/')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     await browser.close()\n   })\n \n@@ -101,7 +101,7 @@ describe('Type module interop', () => {\n \n   it('should render client-side with modules', async () => {\n     const browser = await webdriver(next.url, '/modules')\n-    await assertNoRedbox(browser)\n+    await waitForNoRedbox(browser)\n     await browser.close()\n   })\n })"
        },
        {
            "sha": "bd09a1c8465f74b3abbdbfc1ea4e7f619b4672da",
            "filename": "test/e2e/with-router/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fwith-router%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fe2e%2Fwith-router%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fwith-router%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxHeader } from 'next-test-utils'\n+import { waitForRedbox, getRedboxHeader } from 'next-test-utils'\n \n describe('withRouter', () => {\n   const { next, isTurbopack, isNextDev } = nextTestSetup({\n@@ -65,7 +65,7 @@ describe('withRouter', () => {\n     describe('SSR', () => {\n       it('should show an error when trying to use router methods during SSR', async () => {\n         const browser = await next.browser('/router-method-ssr')\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxHeader(browser)).toMatch(\n           `No router instance found. you should only use \"next/router\" inside the client side of your app. https://`\n         )"
        },
        {
            "sha": "3cc722fc73b8749cce8ea2532ce79d846cb153a3",
            "filename": "test/integration/app-config-asset-prefix/test/index.test.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fapp-config-asset-prefix%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fapp-config-asset-prefix%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fapp-config-asset-prefix%2Ftest%2Findex.test.js?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n import { join } from 'path'\n import {\n-  assertNoRedbox,\n+  waitForNoRedbox,\n   killApp,\n   findPort,\n   launchApp,\n@@ -25,7 +25,7 @@ describe('App assetPrefix config', () => {\n     const browser = await webdriver(appPort, '/')\n     try {\n       await waitFor(2000)\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       const title = await browser.elementById('title').text()\n       expect(title).toBe('IndexPage')\n     } finally {"
        },
        {
            "sha": "d861d442b90b217088ff5380d991bf881cf2ec55",
            "filename": "test/integration/app-dir-export/test/utils.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fapp-dir-export%2Ftest%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fapp-dir-export%2Ftest%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fapp-dir-export%2Ftest%2Futils.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -6,7 +6,7 @@ import fs from 'fs-extra'\n import webdriver from 'next-webdriver'\n import globOrig from 'glob'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   check,\n   fetchViaHTTP,\n   File,\n@@ -267,7 +267,7 @@ export async function runTests({\n       if (isDev) {\n         const url = dynamicPage ? '/another/first' : '/api/json'\n         const browser = await webdriver(port, url)\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         const header = await getRedboxHeader(browser)\n         const source = await getRedboxSource(browser)\n         if (expectedErrMsg instanceof RegExp) {"
        },
        {
            "sha": "fd39d0893c2597c2b34c74809c9a0ac22a5f36c6",
            "filename": "test/integration/config-devtool-dev/test/index.test.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fconfig-devtool-dev%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fconfig-devtool-dev%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fconfig-devtool-dev%2Ftest%2Findex.test.js?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n \n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   findPort,\n   getRedboxSource,\n   killApp,\n@@ -32,7 +32,7 @@ const appDir = join(__dirname, '../')\n       })\n \n       const browser = await webdriver(appPort, '/')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       if (process.platform === 'win32') {\n         // TODO: add win32 snapshot\n       } else {"
        },
        {
            "sha": "8ef09dbbd630bacd432f1819454b145d8e2b8f9b",
            "filename": "test/integration/config-output-export/test/index.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fconfig-output-export%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fconfig-output-export%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fconfig-output-export%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   fetchViaHTTP,\n   File,\n   findPort,\n@@ -218,7 +218,7 @@ describe('config-output-export', () => {\n       })\n       browser = await webdriver(result.port, '/blog')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'ISR cannot be used with \"output: export\".'\n       )\n@@ -253,7 +253,7 @@ describe('config-output-export', () => {\n         output: 'export',\n       })\n       browser = await webdriver(result.port, '/blog')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     } finally {\n       await killApp(app).catch(() => {})\n       fs.rmSync(blog)\n@@ -281,7 +281,7 @@ describe('config-output-export', () => {\n         output: 'export',\n       })\n       browser = await webdriver(result.port, '/blog')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     } finally {\n       await killApp(app).catch(() => {})\n       fs.rmSync(blog)\n@@ -309,7 +309,7 @@ describe('config-output-export', () => {\n         output: 'export',\n       })\n       browser = await webdriver(result.port, '/blog')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'getServerSideProps cannot be used with \"output: export\".'\n       )\n@@ -353,7 +353,7 @@ describe('config-output-export', () => {\n         output: 'export',\n       })\n       browser = await webdriver(result.port, '/posts/one')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'getStaticPaths with \"fallback: true\" cannot be used with \"output: export\".'\n       )\n@@ -397,7 +397,7 @@ describe('config-output-export', () => {\n         output: 'export',\n       })\n       browser = await webdriver(result.port, '/posts/one')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'getStaticPaths with \"fallback: blocking\" cannot be used with \"output: export\".'\n       )\n@@ -443,7 +443,7 @@ describe('config-output-export', () => {\n       browser = await webdriver(result.port, '/posts/one')\n       const h1 = await browser.elementByCss('h1')\n       expect(await h1.text()).toContain('Hello from one')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(result.stderr).toBeEmpty()\n     } finally {\n       await killApp(app).catch(() => {})"
        },
        {
            "sha": "e2674522716f906be0dd96f796bec05e980ffbcf",
            "filename": "test/integration/custom-routes/test/index.test.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fcustom-routes%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fcustom-routes%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcustom-routes%2Ftest%2Findex.test.js?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -9,7 +9,7 @@ import WebSocket from 'ws'\n import cheerio from 'cheerio'\n import webdriver from 'next-webdriver'\n import {\n-  assertNoRedbox,\n+  waitForNoRedbox,\n   launchApp,\n   killApp,\n   findPort,\n@@ -296,7 +296,7 @@ const runTests = (isDev = false) => {\n     expect(await browser.eval('window.beforeNav')).toBe(1)\n \n     if (isDev) {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n   })\n "
        },
        {
            "sha": "890f09ce2c7172b18638bac2210417888d2473d0",
            "filename": "test/integration/dynamic-routing/test/index.test.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fdynamic-routing%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fdynamic-routing%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fdynamic-routing%2Ftest%2Findex.test.js?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -5,7 +5,7 @@ import { join, dirname } from 'path'\n import fs from 'fs-extra'\n import url from 'url'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   renderViaHTTP,\n   fetchViaHTTP,\n   findPort,\n@@ -1200,7 +1200,7 @@ function runTests({ dev }) {\n         await browser\n           .elementByCss('#view-post-1-interpolated-incorrectly')\n           .click()\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         const header = await getRedboxHeader(browser)\n         expect(header).toContain(\n           'The provided `href` (/[name]?another=value) value is missing query values (name) to be interpolated properly.'"
        },
        {
            "sha": "7d326867a83ca719fe6da4f8f3ed0fcd2c0978b0",
            "filename": "test/integration/invalid-href/test/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Finvalid-href%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Finvalid-href%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Finvalid-href%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n \n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   findPort,\n   getRedboxHeader,\n   killApp,\n@@ -49,7 +49,7 @@ const showsError = async (pathname, regex, click = false, isWarn = false) => {\n         return warnLogs.join('\\n')\n       }, regex)\n     } else {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const errorContent = await getRedboxHeader(browser)\n       expect(errorContent).toMatch(regex)\n     }"
        },
        {
            "sha": "9bd3068e3e9fddb8be84958a81f4bd4c98c2663a",
            "filename": "test/integration/next-image-legacy/base-path/test/index.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-legacy%2Fbase-path%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-legacy%2Fbase-path%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-legacy%2Fbase-path%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n /* eslint-env jest */\n \n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   check,\n   findPort,\n   getRedboxHeader,\n@@ -376,7 +376,7 @@ function runTests(mode) {\n     it('should show missing src error', async () => {\n       const browser = await webdriver(appPort, '/docs/missing-src')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -386,7 +386,7 @@ function runTests(mode) {\n     it('should show invalid src error', async () => {\n       const browser = await webdriver(appPort, '/docs/invalid-src')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Invalid src prop (https://google.com/test.png) on `next/image`, hostname \"google.com\" is not configured under images in your `next.config.js`'\n       )\n@@ -398,7 +398,7 @@ function runTests(mode) {\n         '/docs/invalid-src-proto-relative'\n       )\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Failed to parse src \"//assets.example.com/img.jpg\" on `next/image`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)'\n       )"
        },
        {
            "sha": "6c8a5693355be08ee6920dcbd6701548f7a3dcf9",
            "filename": "test/integration/next-image-legacy/default/test/index.test.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-legacy%2Fdefault%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-legacy%2Fdefault%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-legacy%2Fdefault%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -3,8 +3,8 @@\n import cheerio from 'cheerio'\n import validateHTML from 'html-validator'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   check,\n   fetchViaHTTP,\n   findPort,\n@@ -814,7 +814,7 @@ function runTests(mode) {\n     it('should show missing src error', async () => {\n       const browser = await webdriver(appPort, '/missing-src')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -824,7 +824,7 @@ function runTests(mode) {\n     it('should show invalid src error', async () => {\n       const browser = await webdriver(appPort, '/invalid-src')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Invalid src prop (https://google.com/test.png) on `next/image`, hostname \"google.com\" is not configured under images in your `next.config.js`'\n       )\n@@ -833,7 +833,7 @@ function runTests(mode) {\n     it('should show invalid src error when protocol-relative', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-proto-relative')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Failed to parse src \"//assets.example.com/img.jpg\" on `next/image`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)'\n       )\n@@ -842,7 +842,7 @@ function runTests(mode) {\n     it('should show error when string src and placeholder=blur and blurDataURL is missing', async () => {\n       const browser = await webdriver(appPort, '/invalid-placeholder-blur')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.png\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property.`\n       )\n@@ -851,7 +851,7 @@ function runTests(mode) {\n     it('should show error when not numeric string width or height', async () => {\n       const browser = await webdriver(appPort, '/invalid-width-or-height')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" has invalid \"width\" or \"height\" property. These should be numeric values.`\n       )\n@@ -863,7 +863,7 @@ function runTests(mode) {\n         '/invalid-placeholder-blur-static'\n       )\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toMatch(\n         /Image with src \"(.*)bmp\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property/\n       )\n@@ -875,7 +875,7 @@ function runTests(mode) {\n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n       }, /Image with src (.*)jpg(.*) may not render properly as a child of a flex container. Consider wrapping the image with a div to configure the width/gm)\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     })\n \n     it('should warn when img with layout=fill is inside a container without position relative', async () => {\n@@ -900,7 +900,7 @@ function runTests(mode) {\n       expect(warnings).not.toMatch(\n         /Image with src (.*)webp(.*) may not render properly/gm\n       )\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     })\n \n     it('should warn when using a very small image with placeholder=blur', async () => {\n@@ -909,7 +909,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)jpg(.*) is smaller than 40x40. Consider removing(.*)/gm\n       )\n@@ -921,7 +921,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)jpg(.*) is using quality \"50\" which is not configured in images.qualities \\[75\\]. Please update your config to \\[50, 75\\]./gm\n       )\n@@ -933,7 +933,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).not.toMatch(\n         /Expected server HTML to contain a matching/gm\n       )\n@@ -957,7 +957,7 @@ function runTests(mode) {\n         const warnings = (await browser.log())\n           .map((log) => log.message)\n           .join('\\n')\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n         expect(warnings).toMatch(\n           /Image with src (.*)test(.*) was detected as the Largest Contentful Paint/gm\n         )\n@@ -972,7 +972,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)png(.*) has a \"loader\" property that does not implement width/gm\n       )\n@@ -996,7 +996,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)png(.*) has \"sizes\" property but it will be ignored/gm\n       )\n@@ -1017,7 +1017,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).not.toMatch(\n         /Image with src (.*) has a \"loader\" property that does not implement width/gm\n       )"
        },
        {
            "sha": "e37e00fbc770c2ae21a056faa166bac3f0f282c4",
            "filename": "test/integration/next-image-new/app-dir-localpatterns/test/index.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fapp-dir-localpatterns%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fapp-dir-localpatterns%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fapp-dir-localpatterns%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n /* eslint-env jest */\n \n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   fetchViaHTTP,\n   findPort,\n   getImagesManifest,\n@@ -35,7 +35,7 @@ function runTests(mode: 'dev' | 'server') {\n   it('should load matching images', async () => {\n     const browser = await webdriver(appPort, '/')\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n     const ids = ['nested-assets', 'static-img']\n     const urls = await Promise.all(ids.map((id) => getSrc(browser, id)))\n@@ -55,7 +55,7 @@ function runTests(mode: 'dev' | 'server') {\n     const page = '/' + id\n     const browser = await webdriver(appPort, page)\n     if (mode === 'dev') {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toMatch(\n         /Invalid src prop (.+) on `next\\/image` does not match `images.localPatterns` configured/g\n       )"
        },
        {
            "sha": "30192aa6217c0fb6a7b7dfc50d0f213f73049359",
            "filename": "test/integration/next-image-new/app-dir-qualities/test/index.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fapp-dir-qualities%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fapp-dir-qualities%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fapp-dir-qualities%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n /* eslint-env jest */\n \n import {\n-  assertNoRedbox,\n+  waitForNoRedbox,\n   fetchViaHTTP,\n   findPort,\n   getImagesManifest,\n@@ -33,7 +33,7 @@ function runTests(mode: 'dev' | 'server') {\n   it('should load img when quality is undefined', async () => {\n     const browser = await webdriver(appPort, '/')\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n     const url = await getSrc(browser, 'q-undefined')\n     const res = await fetchViaHTTP(appPort, url)\n@@ -44,7 +44,7 @@ function runTests(mode: 'dev' | 'server') {\n   it('should load img when quality 42', async () => {\n     const browser = await webdriver(appPort, '/')\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n     const url = await getSrc(browser, 'q-42')\n     const res = await fetchViaHTTP(appPort, url)\n@@ -54,7 +54,7 @@ function runTests(mode: 'dev' | 'server') {\n   it('should load img when quality 69', async () => {\n     const browser = await webdriver(appPort, '/')\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n     const url = await getSrc(browser, 'q-69')\n     const res = await fetchViaHTTP(appPort, url)\n@@ -64,7 +64,7 @@ function runTests(mode: 'dev' | 'server') {\n   it('should load img when quality 88', async () => {\n     const browser = await webdriver(appPort, '/')\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n     const url = await getSrc(browser, 'q-88')\n     const res = await fetchViaHTTP(appPort, url)\n@@ -75,7 +75,7 @@ function runTests(mode: 'dev' | 'server') {\n     const page = '/invalid-quality'\n     const browser = await webdriver(appPort, page)\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     }\n     const url = await getSrc(browser, 'q-100')\n     expect(url).toContain('&q=88') // coerced to closest matching of 88"
        },
        {
            "sha": "0a7ddc63145b462eb5f7bb1b4fb5b9ba4f350027",
            "filename": "test/integration/next-image-new/app-dir/test/index.test.ts",
            "status": "modified",
            "additions": 28,
            "deletions": 28,
            "changes": 56,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fapp-dir%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fapp-dir%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fapp-dir%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -3,8 +3,8 @@\n import cheerio from 'cheerio'\n import validateHTML from 'html-validator'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   check,\n   fetchViaHTTP,\n   findPort,\n@@ -955,7 +955,7 @@ function runTests(mode: 'dev' | 'server') {\n       'position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;object-fit:cover;object-position:10% 10%;color:transparent'\n     )\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n@@ -987,7 +987,7 @@ function runTests(mode: 'dev' | 'server') {\n       'color:transparent;width:100%;height:auto'\n     )\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n@@ -1037,7 +1037,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show missing src error', async () => {\n       const browser = await webdriver(appPort, '/missing-src')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -1047,7 +1047,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show empty string src error', async () => {\n       const browser = await webdriver(appPort, '/empty-string-src')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -1057,7 +1057,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show null src error', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-null')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await retry(async () => {\n         expect(\n@@ -1069,7 +1069,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show invalid src error', async () => {\n       const browser = await webdriver(appPort, '/invalid-src')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Invalid src prop (https://google.com/test.png) on `next/image`, hostname \"google.com\" is not configured under images in your `next.config.js`'\n       )\n@@ -1078,23 +1078,23 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show invalid src error when protocol-relative', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-proto-relative')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Failed to parse src \"//assets.example.com/img.jpg\" on `next/image`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)'\n       )\n     })\n \n     it('should show invalid src with leading space', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-leading-space')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Image with src \" /test.jpg\" cannot start with a space or control character.'\n       )\n     })\n \n     it('should show invalid src with trailing space', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-trailing-space')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Image with src \"/test.png \" cannot end with a space or control character.'\n       )\n@@ -1103,7 +1103,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show error when string src and placeholder=blur and blurDataURL is missing', async () => {\n       const browser = await webdriver(appPort, '/invalid-placeholder-blur')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.png\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property.`\n       )\n@@ -1112,7 +1112,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show error when invalid width prop', async () => {\n       const browser = await webdriver(appPort, '/invalid-width')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" has invalid \"width\" property. Expected a numeric value in pixels but received \"100%\".`\n       )\n@@ -1121,7 +1121,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show error when invalid Infinity width prop', async () => {\n       const browser = await webdriver(appPort, '/invalid-Infinity-width')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" has invalid \"width\" property. Expected a numeric value in pixels but received \"Infinity\".`\n       )\n@@ -1130,7 +1130,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show error when invalid height prop', async () => {\n       const browser = await webdriver(appPort, '/invalid-height')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" has invalid \"height\" property. Expected a numeric value in pixels but received \"50vh\".`\n       )\n@@ -1139,7 +1139,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show missing alt error', async () => {\n       const browser = await webdriver(appPort, '/missing-alt')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -1149,7 +1149,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show error when missing width prop', async () => {\n       const browser = await webdriver(appPort, '/missing-width')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" is missing required \"width\" property.`\n       )\n@@ -1158,7 +1158,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show error when missing height prop', async () => {\n       const browser = await webdriver(appPort, '/missing-height')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" is missing required \"height\" property.`\n       )\n@@ -1167,7 +1167,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show error when width prop on fill image', async () => {\n       const browser = await webdriver(appPort, '/invalid-fill-width')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/wide.png\" has both \"width\" and \"fill\" properties.`\n       )\n@@ -1176,7 +1176,7 @@ function runTests(mode: 'dev' | 'server') {\n     it('should show error when CSS position changed on fill image', async () => {\n       const browser = await webdriver(appPort, '/invalid-fill-position')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/wide.png\" has both \"fill\" and \"style.position\" properties. Images with \"fill\" always use position absolute - it cannot be modified.`\n       )\n@@ -1188,7 +1188,7 @@ function runTests(mode: 'dev' | 'server') {\n         '/invalid-placeholder-blur-static'\n       )\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toMatch(\n         /Image with src \"(.*)bmp\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property/\n       )\n@@ -1200,7 +1200,7 @@ function runTests(mode: 'dev' | 'server') {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)jpg(.*) is smaller than 40x40. Consider removing(.*)/gm\n       )\n@@ -1212,7 +1212,7 @@ function runTests(mode: 'dev' | 'server') {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)jpg(.*) is using quality \"50\" which is not configured in images.qualities \\[75\\]. Please update your config to \\[50, 75\\]./gm\n       )\n@@ -1224,7 +1224,7 @@ function runTests(mode: 'dev' | 'server') {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).not.toMatch(\n         /Expected server HTML to contain a matching/gm\n       )\n@@ -1248,7 +1248,7 @@ function runTests(mode: 'dev' | 'server') {\n         const warnings = (await browser.log())\n           .map((log) => log.message)\n           .join('\\n')\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n         expect(warnings).toMatch(\n           /Image with src (.*)test(.*) was detected as the Largest Contentful Paint/gm\n         )\n@@ -1263,7 +1263,7 @@ function runTests(mode: 'dev' | 'server') {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)png(.*) has a \"loader\" property that does not implement width/gm\n       )\n@@ -1286,7 +1286,7 @@ function runTests(mode: 'dev' | 'server') {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).not.toMatch(\n         /Image with src (.*) has \"fill\" but is missing \"sizes\" prop. Please add it to improve page performance/gm\n       )\n@@ -1298,7 +1298,7 @@ function runTests(mode: 'dev' | 'server') {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).not.toMatch(\n         /Image with src (.*) has a \"loader\" property that does not implement width/gm\n       )"
        },
        {
            "sha": "f51ac964c0dc69e745c0794ae3b0439108e872af",
            "filename": "test/integration/next-image-new/base-path/test/index.test.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Findex.test.js?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,8 +1,8 @@\n /* eslint-env jest */\n \n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   check,\n   findPort,\n   getRedboxHeader,\n@@ -131,7 +131,7 @@ function runTests(mode) {\n     it('should show missing src error', async () => {\n       const browser = await webdriver(appPort, '/docs/missing-src')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -141,7 +141,7 @@ function runTests(mode) {\n     it('should show invalid src error', async () => {\n       const browser = await webdriver(appPort, '/docs/invalid-src')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Invalid src prop (https://google.com/test.png) on `next/image`, hostname \"google.com\" is not configured under images in your `next.config.js`'\n       )\n@@ -153,7 +153,7 @@ function runTests(mode) {\n         '/docs/invalid-src-proto-relative'\n       )\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Failed to parse src \"//assets.example.com/img.jpg\" on `next/image`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)'\n       )"
        },
        {
            "sha": "c054a7643ffe978b61accfbf99727fb45d72b879",
            "filename": "test/integration/next-image-new/default/test/index.test.ts",
            "status": "modified",
            "additions": 28,
            "deletions": 28,
            "changes": 56,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fdefault%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fdefault%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fdefault%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -3,8 +3,8 @@\n import cheerio from 'cheerio'\n import validateHTML from 'html-validator'\n import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   check,\n   fetchViaHTTP,\n   findPort,\n@@ -954,7 +954,7 @@ function runTests(mode) {\n       'position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;object-fit:cover;object-position:10% 10%;color:transparent'\n     )\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n@@ -986,7 +986,7 @@ function runTests(mode) {\n       'color:transparent;width:100%;height:auto'\n     )\n     if (mode === 'dev') {\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n@@ -1036,7 +1036,7 @@ function runTests(mode) {\n     it('should show missing src error', async () => {\n       const browser = await webdriver(appPort, '/missing-src')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -1046,7 +1046,7 @@ function runTests(mode) {\n     it('should show empty string src error', async () => {\n       const browser = await webdriver(appPort, '/empty-string-src')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -1056,7 +1056,7 @@ function runTests(mode) {\n     it('should show null src error', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-null')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await retry(async () => {\n         expect(\n@@ -1068,7 +1068,7 @@ function runTests(mode) {\n     it('should show invalid src error', async () => {\n       const browser = await webdriver(appPort, '/invalid-src')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Invalid src prop (https://google.com/test.png) on `next/image`, hostname \"google.com\" is not configured under images in your `next.config.js`'\n       )\n@@ -1077,23 +1077,23 @@ function runTests(mode) {\n     it('should show invalid src error when protocol-relative', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-proto-relative')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Failed to parse src \"//assets.example.com/img.jpg\" on `next/image`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)'\n       )\n     })\n \n     it('should show invalid src with leading space', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-leading-space')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Image with src \" /test.jpg\" cannot start with a space or control character.'\n       )\n     })\n \n     it('should show invalid src with trailing space', async () => {\n       const browser = await webdriver(appPort, '/invalid-src-trailing-space')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         'Image with src \"/test.png \" cannot end with a space or control character.'\n       )\n@@ -1102,7 +1102,7 @@ function runTests(mode) {\n     it('should show error when string src and placeholder=blur and blurDataURL is missing', async () => {\n       const browser = await webdriver(appPort, '/invalid-placeholder-blur')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.png\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property.`\n       )\n@@ -1111,7 +1111,7 @@ function runTests(mode) {\n     it('should show error when invalid width prop', async () => {\n       const browser = await webdriver(appPort, '/invalid-width')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" has invalid \"width\" property. Expected a numeric value in pixels but received \"100%\".`\n       )\n@@ -1120,7 +1120,7 @@ function runTests(mode) {\n     it('should show error when invalid Infinity width prop', async () => {\n       const browser = await webdriver(appPort, '/invalid-Infinity-width')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" has invalid \"width\" property. Expected a numeric value in pixels but received \"Infinity\".`\n       )\n@@ -1129,7 +1129,7 @@ function runTests(mode) {\n     it('should show error when invalid height prop', async () => {\n       const browser = await webdriver(appPort, '/invalid-height')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" has invalid \"height\" property. Expected a numeric value in pixels but received \"50vh\".`\n       )\n@@ -1138,7 +1138,7 @@ function runTests(mode) {\n     it('should show missing alt error', async () => {\n       const browser = await webdriver(appPort, '/missing-alt')\n \n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n \n       await check(async () => {\n         return (await browser.log()).map((log) => log.message).join('\\n')\n@@ -1148,7 +1148,7 @@ function runTests(mode) {\n     it('should show error when missing width prop', async () => {\n       const browser = await webdriver(appPort, '/missing-width')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" is missing required \"width\" property.`\n       )\n@@ -1157,7 +1157,7 @@ function runTests(mode) {\n     it('should show error when missing height prop', async () => {\n       const browser = await webdriver(appPort, '/missing-height')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/test.jpg\" is missing required \"height\" property.`\n       )\n@@ -1166,7 +1166,7 @@ function runTests(mode) {\n     it('should show error when width prop on fill image', async () => {\n       const browser = await webdriver(appPort, '/invalid-fill-width')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/wide.png\" has both \"width\" and \"fill\" properties.`\n       )\n@@ -1175,7 +1175,7 @@ function runTests(mode) {\n     it('should show error when CSS position changed on fill image', async () => {\n       const browser = await webdriver(appPort, '/invalid-fill-position')\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toContain(\n         `Image with src \"/wide.png\" has both \"fill\" and \"style.position\" properties. Images with \"fill\" always use position absolute - it cannot be modified.`\n       )\n@@ -1187,7 +1187,7 @@ function runTests(mode) {\n         '/invalid-placeholder-blur-static'\n       )\n \n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       expect(await getRedboxHeader(browser)).toMatch(\n         /Image with src \"(.*)bmp\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property/\n       )\n@@ -1199,7 +1199,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)jpg(.*) is smaller than 40x40. Consider removing(.*)/gm\n       )\n@@ -1211,7 +1211,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)jpg(.*) is using quality \"50\" which is not configured in images.qualities \\[75\\]. Please update your config to \\[50, 75\\]/gm\n       )\n@@ -1223,7 +1223,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).not.toMatch(\n         /Expected server HTML to contain a matching/gm\n       )\n@@ -1247,7 +1247,7 @@ function runTests(mode) {\n         const warnings = (await browser.log())\n           .map((log) => log.message)\n           .join('\\n')\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n         expect(warnings).toMatch(\n           /Image with src (.*)test(.*) was detected as the Largest Contentful Paint/gm\n         )\n@@ -1262,7 +1262,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).toMatch(\n         /Image with src (.*)png(.*) has a \"loader\" property that does not implement width/gm\n       )\n@@ -1285,7 +1285,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).not.toMatch(\n         /Image with src (.*) has \"fill\" but is missing \"sizes\" prop. Please add it to improve page performance/gm\n       )\n@@ -1297,7 +1297,7 @@ function runTests(mode) {\n       const warnings = (await browser.log())\n         .map((log) => log.message)\n         .join('\\n')\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n       expect(warnings).not.toMatch(\n         /Image with src (.*) has a \"loader\" property that does not implement width/gm\n       )"
        },
        {
            "sha": "92a0d28ae5e5e1db1bb62792d85fc2d5c99e54e9",
            "filename": "test/integration/next-image-new/export-config/test/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fexport-config%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Fexport-config%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fexport-config%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -2,7 +2,7 @@\n \n import { join } from 'path'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   findPort,\n   getRedboxHeader,\n   killApp,\n@@ -35,7 +35,7 @@ describe('next/image with output export config', () => {\n         const browser = await webdriver(appPort, '/')\n         const msg =\n           \"Image Optimization using the default loader is not compatible with `{ output: 'export' }`.\"\n-        await assertHasRedbox(browser)\n+        await waitForRedbox(browser)\n         expect(await getRedboxHeader(browser)).toContain(msg)\n         expect(stderr).toContain(msg)\n       })"
        },
        {
            "sha": "57a68ec465a0d679c51459e066cc7e1f899bbe50",
            "filename": "test/integration/next-image-new/invalid-image-import/test/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Finvalid-image-import%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fnext-image-new%2Finvalid-image-import%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Finvalid-image-import%2Ftest%2Findex.test.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -2,7 +2,7 @@\n \n import { join } from 'path'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   findPort,\n   getRedboxDescription,\n   getRedboxSource,\n@@ -22,7 +22,7 @@ function runTests({ isDev }) {\n   it('should show error', async () => {\n     if (isDev) {\n       const browser = await webdriver(appPort, '/')\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n       const description = await getRedboxDescription(browser)\n       if (process.env.IS_TURBOPACK_TEST) {\n         expect(description).toMatchInlineSnapshot(`\"Processing image failed\"`)"
        },
        {
            "sha": "c4ede43def96bc113c3f59384d5d3af28fe4419b",
            "filename": "test/integration/server-side-dev-errors/test/index.test.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fserver-side-dev-errors%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Fintegration%2Fserver-side-dev-errors%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fserver-side-dev-errors%2Ftest%2Findex.test.js?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -4,7 +4,7 @@ import fs from 'fs/promises'\n import { join } from 'path'\n import webdriver from 'next-webdriver'\n import {\n-  assertNoRedbox,\n+  waitForNoRedbox,\n   findPort,\n   killApp,\n   launchApp,\n@@ -98,7 +98,7 @@ describe('server-side dev errors', () => {\n       `)\n \n       await fs.writeFile(gspPage, content, { flush: true })\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     } finally {\n       await fs.writeFile(gspPage, content)\n     }\n@@ -148,7 +148,7 @@ describe('server-side dev errors', () => {\n       `)\n \n       await fs.writeFile(gsspPage, content)\n-      await assertNoRedbox(browser)\n+      await waitForNoRedbox(browser)\n     } finally {\n       await fs.writeFile(gsspPage, content)\n     }\n@@ -262,7 +262,7 @@ describe('server-side dev errors', () => {\n       await retry(async () => {\n         // manually refresh as this is an API route\n         await browser.refresh()\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       })\n     } finally {\n       await fs.writeFile(apiPage, content)\n@@ -328,7 +328,7 @@ describe('server-side dev errors', () => {\n       await retry(async () => {\n         // manually refresh as this is an API route\n         await browser.refresh()\n-        await assertNoRedbox(browser)\n+        await waitForNoRedbox(browser)\n       })\n     } finally {\n       await fs.writeFile(dynamicApiPage, content)"
        },
        {
            "sha": "250f5487fdbd913b2c6fe5fdf61fc4129ea42480",
            "filename": "test/lib/add-redbox-matchers.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Flib%2Fadd-redbox-matchers.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Flib%2Fadd-redbox-matchers.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fadd-redbox-matchers.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -1,7 +1,7 @@\n import type { MatcherContext } from 'expect'\n import { toMatchInlineSnapshot } from 'jest-snapshot'\n import {\n-  assertHasRedbox,\n+  waitForRedbox,\n   getRedboxCallStack,\n   getRedboxComponentStack,\n   getRedboxDescription,\n@@ -260,7 +260,7 @@ expect.extend({\n     this.dontThrow = () => {}\n \n     try {\n-      await assertHasRedbox(browser)\n+      await waitForRedbox(browser)\n     } catch (cause) {\n       // argument length is relevant.\n       // Jest will update absent snapshots but fail if you specify a snapshot even if undefined.\n@@ -318,15 +318,15 @@ expect.extend({\n         return toMatchInlineSnapshot.call(\n           this,\n           String(cause.message)\n-            // Should switch to `toDisplayRedbox` not `assertHasRedbox`\n-            .replace('assertHasRedbox', 'toDisplayRedbox')\n+            // Should switch to `toDisplayRedbox` not `waitForRedbox`\n+            .replace('waitForRedbox', 'toDisplayRedbox')\n         )\n       } else {\n         return toMatchInlineSnapshot.call(\n           this,\n           String(cause.message)\n-            // Should switch to `toDisplayRedbox` not `assertHasRedbox`\n-            .replace('assertHasRedbox', 'toDisplayRedbox'),\n+            // Should switch to `toDisplayRedbox` not `waitForRedbox`\n+            .replace('waitForRedbox', 'toDisplayRedbox'),\n           expectedRedboxSnapshot\n         )\n       }"
        },
        {
            "sha": "4cf16a3d6ab113b3a2af6c1178c1e655253df6bc",
            "filename": "test/lib/development-sandbox.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Flib%2Fdevelopment-sandbox.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Flib%2Fdevelopment-sandbox.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fdevelopment-sandbox.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -5,8 +5,8 @@ import {\n   getRedboxHeader,\n   getRedboxSource,\n   getVersionCheckerText,\n-  assertHasRedbox,\n-  assertNoRedbox,\n+  waitForRedbox,\n+  waitForNoRedbox,\n   waitFor,\n   openRedbox,\n   getRedboxDescriptionWarning,\n@@ -131,11 +131,11 @@ export async function createSandbox(\n           await next.renameFolder(...args)\n         },\n         evaluate,\n-        async assertHasRedbox() {\n-          return assertHasRedbox(browser)\n+        async waitForRedbox() {\n+          return waitForRedbox(browser)\n         },\n-        async assertNoRedbox() {\n-          return assertNoRedbox(browser)\n+        async waitForNoRedbox() {\n+          return waitForNoRedbox(browser)\n         },\n         async openRedbox() {\n           return openRedbox(browser)"
        },
        {
            "sha": "05177d0aa80e515d6557e91d3b0271b9321fa460",
            "filename": "test/lib/next-test-utils.ts",
            "status": "modified",
            "additions": 45,
            "deletions": 43,
            "changes": 88,
            "blob_url": "https://github.com/vercel/next.js/blob/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Flib%2Fnext-test-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b58a32c457884ca138c47d4947b2d3d6e8e34d1/test%2Flib%2Fnext-test-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-test-utils.ts?ref=0b58a32c457884ca138c47d4947b2d3d6e8e34d1",
            "patch": "@@ -814,13 +814,13 @@ export async function retry<T>(\n   throw new Error('Duration cannot be less than 0.')\n }\n \n-export async function assertHasRedbox(browser: Playwright) {\n+export async function waitForRedbox(browser: Playwright) {\n   const redbox = browser.locateRedbox()\n   try {\n     await redbox.waitFor({ timeout: 5000 })\n   } catch (errorCause) {\n     const error = new Error('Expected Redbox but found no visible one.')\n-    Error.captureStackTrace(error, assertHasRedbox)\n+    Error.captureStackTrace(error, waitForRedbox)\n     throw error\n   }\n \n@@ -832,12 +832,12 @@ export async function assertHasRedbox(browser: Playwright) {\n     const error = new Error('Redbox still had suspended content after 10s', {\n       cause,\n     })\n-    Error.captureStackTrace(error, assertHasRedbox)\n+    Error.captureStackTrace(error, waitForRedbox)\n     throw error\n   }\n }\n \n-export async function assertNoRedbox(\n+export async function waitForNoRedbox(\n   browser: Playwright,\n   { waitInMs = 5000 }: { waitInMs?: number } = {}\n ) {\n@@ -857,12 +857,12 @@ export async function assertNoRedbox(\n         `description: ${redboxDescription}\\n` +\n         `source: ${redboxSource}`\n     )\n-    Error.captureStackTrace(error, assertNoRedbox)\n+    Error.captureStackTrace(error, waitForNoRedbox)\n     throw error\n   }\n }\n \n-export async function assertNoErrorToast(browser: Playwright): Promise<void> {\n+export async function waitForNoErrorToast(browser: Playwright): Promise<void> {\n   let didOpenRedbox = false\n \n   try {\n@@ -873,9 +873,9 @@ export async function assertNoErrorToast(browser: Playwright): Promise<void> {\n   }\n \n   if (didOpenRedbox) {\n-    // If a redbox was opened unexpectedly, we use the `assertNoRedbox` helper\n+    // If a redbox was opened unexpectedly, we use the `waitForNoRedbox` helper\n     // to print a useful error message containing the redbox contents.\n-    await assertNoRedbox(browser, {\n+    await waitForNoRedbox(browser, {\n       // We already know the redbox is open, so we can skip waiting for it.\n       waitInMs: 0,\n     })\n@@ -912,13 +912,13 @@ export async function getToastErrorCount(browser: Playwright): Promise<number> {\n \n /**\n  * Has retried version of {@link hasErrorToast} built-in.\n- * Success implies {@link assertHasRedbox}.\n+ * Success implies {@link waitForRedbox}.\n  */\n export async function openRedbox(browser: Playwright): Promise<void> {\n   const redbox = browser.locateRedbox()\n   if (await redbox.isVisible()) {\n     const error = new Error(\n-      'Redbox is already open. Use `assertHasRedbox` instead.'\n+      'Redbox is already open. Use `waitForRedbox` instead.'\n     )\n     Error.captureStackTrace(error, openRedbox)\n     throw error\n@@ -931,19 +931,19 @@ export async function openRedbox(browser: Playwright): Promise<void> {\n     Error.captureStackTrace(error, openRedbox)\n     throw error\n   }\n-  await assertHasRedbox(browser)\n+  await waitForRedbox(browser)\n }\n \n-export async function openDevToolsIndicatorPopover(\n+export async function toggleDevToolsIndicatorPopover(\n   browser: Playwright\n ): Promise<void> {\n-  const devToolsIndicator = await assertHasDevToolsIndicator(browser)\n+  const devToolsIndicator = await waitForDevToolsIndicator(browser)\n \n   try {\n     await devToolsIndicator.click()\n   } catch (cause) {\n-    const error = new Error('No DevTools Indicator to open.', { cause })\n-    Error.captureStackTrace(error, openDevToolsIndicatorPopover)\n+    const error = new Error('No DevTools Indicator to toggle.', { cause })\n+    Error.captureStackTrace(error, toggleDevToolsIndicatorPopover)\n     throw error\n   }\n }\n@@ -957,7 +957,7 @@ export async function getSegmentExplorerRoute(browser: Playwright) {\n \n export async function getSegmentExplorerContent(browser: Playwright) {\n   // open the devtool button\n-  await openDevToolsIndicatorPopover(browser)\n+  await toggleDevToolsIndicatorPopover(browser)\n \n   // open the segment explorer\n   await browser.elementByCss('[data-segment-explorer]').click()\n@@ -995,15 +995,15 @@ export async function hasDevToolsPanel(browser: Playwright) {\n   return result\n }\n \n-export async function assertHasDevToolsIndicator(browser: Playwright) {\n+export async function waitForDevToolsIndicator(browser: Playwright) {\n   const devToolsIndicator = browser.locateDevToolsIndicator()\n   try {\n     await devToolsIndicator.waitFor({ timeout: 5000 })\n   } catch (errorCause) {\n     const error = new Error(\n       'Expected DevTools Indicator but found no visible one.'\n     )\n-    Error.captureStackTrace(error, assertHasDevToolsIndicator)\n+    Error.captureStackTrace(error, waitForDevToolsIndicator)\n     throw error\n   }\n \n@@ -1022,37 +1022,39 @@ export async function assertNoDevToolsIndicator(browser: Playwright) {\n   }\n }\n \n-export async function assertStaticIndicator(\n+export async function waitForStaticIndicator(\n   browser: Playwright,\n   expectedRouteType: 'Static' | 'Dynamic' | undefined\n ): Promise<void> {\n-  await openDevToolsIndicatorPopover(browser)\n+  await toggleDevToolsIndicatorPopover(browser)\n \n-  const routeType = await browser.eval(() => {\n-    const portal = [].slice\n-      .call(document.querySelectorAll('nextjs-portal'))\n-      .find((p) => p.shadowRoot.querySelector('[data-nextjs-toast]'))\n-\n-    return (\n-      portal?.shadowRoot\n-        // 'Route\\nStatic' || 'Route\\nDynamic'\n-        ?.querySelector('[data-nextjs-route-type]')\n-        ?.innerText.split('\\n')\n-        .pop()\n-    )\n-  })\n-\n-  if (routeType !== expectedRouteType) {\n-    if (expectedRouteType) {\n-      throw new Error(\n-        `Expected static indicator with route type ${expectedRouteType}, found ${routeType} instead.`\n-      )\n-    } else {\n-      throw new Error(\n-        `Expected no static indicator, found ${routeType} instead.`\n+  await retry(async () => {\n+    const routeType = await browser.eval(() => {\n+      const portal = [].slice\n+        .call(document.querySelectorAll('nextjs-portal'))\n+        .find((p) => p.shadowRoot.querySelector('[data-nextjs-toast]'))\n+\n+      return (\n+        portal?.shadowRoot\n+          // 'Route\\nStatic' || 'Route\\nDynamic'\n+          ?.querySelector('[data-nextjs-route-type]')\n+          ?.innerText.split('\\n')\n+          .pop()\n       )\n+    })\n+\n+    if (routeType !== expectedRouteType) {\n+      if (expectedRouteType) {\n+        throw new Error(\n+          `Expected static indicator with route type ${expectedRouteType}, found ${routeType} instead.`\n+        )\n+      } else {\n+        throw new Error(\n+          `Expected no static indicator, found ${routeType} instead.`\n+        )\n+      }\n     }\n-  }\n+  })\n }\n \n export function getRedboxHeader(browser: Playwright): Promise<string | null> {"
        }
    ],
    "stats": {
        "total": 1358,
        "additions": 655,
        "deletions": 703
    }
}