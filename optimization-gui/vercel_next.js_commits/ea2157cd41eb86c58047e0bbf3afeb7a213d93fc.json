{
    "author": "eps1lon",
    "message": "[turbopack] Clear chunk cache on HMR instead of creating new `next-server` VM (#81664)",
    "sha": "ea2157cd41eb86c58047e0bbf3afeb7a213d93fc",
    "files": [
        {
            "sha": "e58a792e1ae00a56b7f94e24ea6d44a0ee49160a",
            "filename": "packages/next/src/server/dev/hot-reloader-turbopack.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 19,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/ea2157cd41eb86c58047e0bbf3afeb7a213d93fc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ea2157cd41eb86c58047e0bbf3afeb7a213d93fc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts?ref=ea2157cd41eb86c58047e0bbf3afeb7a213d93fc",
            "patch": "@@ -37,7 +37,7 @@ import {\n } from './middleware-turbopack'\n import { PageNotFoundError } from '../../shared/lib/utils'\n import { debounce } from '../utils'\n-import { deleteCache, deleteFromRequireCache } from './require-cache'\n+import { deleteCache } from './require-cache'\n import {\n   clearAllModuleContexts,\n   clearModuleContext,\n@@ -342,30 +342,12 @@ export async function createHotReloaderTurbopack(\n \n     resetFetch()\n \n-    const hasAppPaths = writtenEndpoint.serverPaths.some(({ path: p }) =>\n-      p.startsWith('server/app')\n-    )\n-\n     // Edge uses the browser runtime which already disposes chunks individually.\n     // TODO: process.env.NEXT_RUNTIME is 'nodejs' even though Node.js runtime is not used.\n     if ('__turbopack_clear_chunk_cache__' in globalThis) {\n       ;(globalThis as any).__turbopack_clear_chunk_cache__()\n     }\n \n-    // TODO: Stop re-evaluating React Client once it relies on Turbopack's chunk cache.\n-    if (hasAppPaths) {\n-      deleteFromRequireCache(\n-        require.resolve(\n-          'next/dist/compiled/next-server/app-page-turbo.runtime.dev.js'\n-        )\n-      )\n-      deleteFromRequireCache(\n-        require.resolve(\n-          'next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js'\n-        )\n-      )\n-    }\n-\n     const serverPaths = writtenEndpoint.serverPaths.map(({ path: p }) =>\n       join(distDir, p)\n     )"
        },
        {
            "sha": "7879ff1cbd3138065e0a86a0bab22d8ca857b7a0",
            "filename": "packages/next/src/server/dev/require-cache.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/ea2157cd41eb86c58047e0bbf3afeb7a213d93fc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Frequire-cache.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ea2157cd41eb86c58047e0bbf3afeb7a213d93fc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Frequire-cache.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Frequire-cache.ts?ref=ea2157cd41eb86c58047e0bbf3afeb7a213d93fc",
            "patch": "@@ -2,7 +2,7 @@ import isError from '../../lib/is-error'\n import { realpathSync } from '../../lib/realpath'\n import { clearManifestCache } from '../load-manifest.external'\n \n-export function deleteFromRequireCache(filePath: string) {\n+function deleteFromRequireCache(filePath: string) {\n   try {\n     filePath = realpathSync(filePath)\n   } catch (e) {"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 2,
        "deletions": 20
    }
}