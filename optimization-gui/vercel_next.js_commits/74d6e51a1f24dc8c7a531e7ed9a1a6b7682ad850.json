{
    "author": "kdy1",
    "message": "fix: Update `swc_core` and use `rayon` instead of `chili` (#77338)\n\n### What?\n\nUse `rayon` for parallelism\n\n### Why?\n\n`chili` seems to have some bugs regarding the CPU usage of heartbeat thread in idle mode.\n\n### How?\n\n - Closes https://github.com/vercel/next.js/issues/77192",
    "sha": "74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850",
    "files": [
        {
            "sha": "d8d00c796e658c7a6a8b131e71aa96ab6d8746ef",
            "filename": "Cargo.lock",
            "status": "modified",
            "additions": 11,
            "deletions": 15,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850/Cargo.lock",
            "raw_url": "https://github.com/vercel/next.js/raw/74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850/Cargo.lock",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.lock?ref=74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850",
            "patch": "@@ -1103,12 +1103,6 @@ version = \"0.1.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"fd16c4719339c4530435d38e511904438d07cce7950afa3718a84ac36c10e89e\"\n \n-[[package]]\n-name = \"chili\"\n-version = \"0.2.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"e72f874459a658df39dd1d99f7f62a9c421792efc26eaae8d497ae5d2e816a62\"\n-\n [[package]]\n name = \"chromiumoxide\"\n version = \"0.5.4\"\n@@ -4592,6 +4586,7 @@ dependencies = [\n  \"serde_json\",\n  \"supports-hyperlinks\",\n  \"swc_core\",\n+ \"swc_parallel\",\n  \"terminal_hyperlink\",\n  \"tokio\",\n  \"tracing\",\n@@ -7205,9 +7200,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_core\"\n-version = \"16.6.2\"\n+version = \"16.9.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"176ed65e403fb5fa1be022686e7fff1e85d0d2a23e03a3bb744376d186fca90c\"\n+checksum = \"713c3ffe5b2378ee62315875422840943e15fb956f5a7c24e04fd0bc1d4fe141\"\n dependencies = [\n  \"binding_macros\",\n  \"swc\",\n@@ -7688,9 +7683,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_minifier\"\n-version = \"12.1.2\"\n+version = \"12.3.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"2a7e71138f0a48813a57cce10fb28ac55fecb7bb70c492f56e3517a1bb039f35\"\n+checksum = \"a7866d3eea5cfafe9fc730f5d3bf1eba60d5d63e4823ec83dd15acfcce21cc8d\"\n dependencies = [\n  \"arrayvec 0.7.4\",\n  \"indexmap 2.7.1\",\n@@ -8058,9 +8053,9 @@ dependencies = [\n \n [[package]]\n name = \"swc_ecma_usage_analyzer\"\n-version = \"12.0.1\"\n+version = \"12.0.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"384c49a5891a06857543370518bd37e1e27727e3174e439dc662b79333d6a652\"\n+checksum = \"8af89be14ef84b16529f89a70972c7f85b0e9e2599ea09d9f7c3e5b186b8f225\"\n dependencies = [\n  \"indexmap 2.7.1\",\n  \"rustc-hash 2.1.0\",\n@@ -8227,12 +8222,12 @@ dependencies = [\n \n [[package]]\n name = \"swc_parallel\"\n-version = \"1.2.0\"\n+version = \"1.3.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"e5f75f1094d69174ef628e3665fff0f81d58e9f568802e3c90d332c72b0b6026\"\n+checksum = \"8f16052d5123ec45c1c49100781363f3f4e4a6be2da6d82f473b79db1e3abeb8\"\n dependencies = [\n- \"chili\",\n  \"once_cell\",\n+ \"rayon\",\n ]\n \n [[package]]\n@@ -9751,6 +9746,7 @@ dependencies = [\n  \"sourcemap\",\n  \"strsim 0.11.1\",\n  \"swc_core\",\n+ \"swc_parallel\",\n  \"tokio\",\n  \"tracing\",\n  \"turbo-rcstr\","
        },
        {
            "sha": "1879534545e40682d3deb33a88e2f52a3106ab0d",
            "filename": "Cargo.toml",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850/Cargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850/Cargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.toml?ref=74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850",
            "patch": "@@ -296,10 +296,11 @@ turbopack-trace-utils = { path = \"turbopack/crates/turbopack-trace-utils\" }\n turbopack-wasm = { path = \"turbopack/crates/turbopack-wasm\" }\n \n # SWC crates\n-swc_core = { version = \"16.6.2\", features = [\n+swc_core = { version = \"16.9.0\", features = [\n   \"ecma_loader_lru\",\n   \"ecma_loader_parking_lot\",\n ] }\n+swc_parallel = { version = \"1.3.0\", default-features = false, features = [\"rayon\"] }\n testing = { version = \"8.0.0\" }\n \n # Keep consistent with preset_env_base through swc_core"
        },
        {
            "sha": "9bb4d7f6a2bce1da4cfdc875d49899a7b08df2da",
            "filename": "crates/napi/Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850/crates%2Fnapi%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850/crates%2Fnapi%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2FCargo.toml?ref=74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850",
            "patch": "@@ -97,6 +97,7 @@ swc_core = { workspace = true, features = [\n     \"ecma_utils\",\n     \"ecma_visit\",\n ] }\n+swc_parallel = { workspace = true, default-features = false, features = [\"rayon\"] }\n \n # Dependencies for the native, non-wasm32 build.\n [target.'cfg(not(target_arch = \"wasm32\"))'.dependencies]"
        },
        {
            "sha": "da4f257fff919d05b01f6ac514925a4cb64acb4e",
            "filename": "turbopack/crates/turbopack-ecmascript/Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850/turbopack%2Fcrates%2Fturbopack-ecmascript%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850/turbopack%2Fcrates%2Fturbopack-ecmascript%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2FCargo.toml?ref=74d6e51a1f24dc8c7a531e7ed9a1a6b7682ad850",
            "patch": "@@ -71,6 +71,7 @@ swc_core = { workspace = true, features = [\n   \"testing\",\n   \"base\",\n ] }\n+swc_parallel = { workspace = true, default-features = false, features = [\"rayon\"] }\n \n [dev-dependencies]\n criterion = { workspace = true, features = [\"async_tokio\"] }"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 15,
        "deletions": 16
    }
}