{
    "author": "sokra",
    "message": "Turbopack: fix persistent caching test case (#83170)\n\n### What?\n\nThe test case was broken and never tested if persistent caching was caching at all",
    "sha": "e657c383fd901ee829507dc2325b85f0f3ce8133",
    "files": [
        {
            "sha": "5db1617748ad56311bed17f1e53859e6ba5609a5",
            "filename": "test/e2e/persistent-caching/my-loader.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e657c383fd901ee829507dc2325b85f0f3ce8133/test%2Fe2e%2Fpersistent-caching%2Fmy-loader.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e657c383fd901ee829507dc2325b85f0f3ce8133/test%2Fe2e%2Fpersistent-caching%2Fmy-loader.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fpersistent-caching%2Fmy-loader.js?ref=e657c383fd901ee829507dc2325b85f0f3ce8133",
            "patch": "@@ -1,4 +1,5 @@\n module.exports = async function myLoader(source) {\n+  console.log('Loader is running!')\n   // Make webpack consider the build as large change which makes it persistent cache it sooner\n   await new Promise((resolve) => setTimeout(resolve, 2000))\n   return source.replace(/Timestamp/g, `Timestamp = ${Date.now()}`)"
        },
        {
            "sha": "0d683f017a9d364340007a901a538ed3e0d021fb",
            "filename": "test/e2e/persistent-caching/next.config.js",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/e657c383fd901ee829507dc2325b85f0f3ce8133/test%2Fe2e%2Fpersistent-caching%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e657c383fd901ee829507dc2325b85f0f3ce8133/test%2Fe2e%2Fpersistent-caching%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fpersistent-caching%2Fnext.config.js?ref=e657c383fd901ee829507dc2325b85f0f3ce8133",
            "patch": "@@ -4,10 +4,13 @@\n const nextConfig = {\n   turbopack: {\n     rules: {\n-      'app/page.tsx': {\n+      './app/page.tsx': {\n         loaders: ['./my-loader.js'],\n       },\n-      'pages/pages.tsx': {\n+      './app/client/page.tsx': {\n+        loaders: ['./my-loader.js'],\n+      },\n+      './pages/pages.tsx': {\n         loaders: ['./my-loader.js'],\n       },\n     },\n@@ -17,7 +20,7 @@ const nextConfig = {\n   },\n   webpack(config) {\n     config.module.rules.push({\n-      test: /app\\/page\\.tsx|pages\\/pages.tsx/,\n+      test: /app\\/page\\.tsx|app\\/client\\/page\\.tsx|pages\\/pages\\.tsx/,\n       use: ['./my-loader.js'],\n     })\n "
        },
        {
            "sha": "6e83449e16785ee783cd133c1895ada4e0c5ad5a",
            "filename": "test/e2e/persistent-caching/persistent-caching.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/e657c383fd901ee829507dc2325b85f0f3ce8133/test%2Fe2e%2Fpersistent-caching%2Fpersistent-caching.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e657c383fd901ee829507dc2325b85f0f3ce8133/test%2Fe2e%2Fpersistent-caching%2Fpersistent-caching.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fpersistent-caching%2Fpersistent-caching.test.ts?ref=e657c383fd901ee829507dc2325b85f0f3ce8133",
            "patch": "@@ -39,16 +39,19 @@ describe('persistent-caching', () => {\n     {\n       const browser = await next.browser('/')\n       appTimestamp = await browser.elementByCss('main').text()\n+      expect(appTimestamp).toMatch(/Timestamp = \\d+/)\n       await browser.close()\n     }\n     {\n       const browser = await next.browser('/client')\n       appClientTimestamp = await browser.elementByCss('main').text()\n+      expect(appClientTimestamp).toMatch(/Timestamp = \\d+/)\n       await browser.close()\n     }\n     {\n       const browser = await next.browser('/pages')\n       pagesTimestamp = await browser.elementByCss('main').text()\n+      expect(pagesTimestamp).toMatch(/Timestamp = \\d+/)\n       await browser.close()\n     }\n     await restartCycle()"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 10,
        "deletions": 3
    }
}