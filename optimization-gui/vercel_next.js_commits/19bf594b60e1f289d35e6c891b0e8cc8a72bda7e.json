{
    "author": "huozhi",
    "message": "Revert \"[devtool] merge segment explorer flag into panel ui flag (#81085)\" (#81131)\n\nReverts #81085 to keep the flags separate so can test separately",
    "sha": "19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
    "files": [
        {
            "sha": "91370643fc17ab7068ede1f615e4e6f0e82346b2",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -797,9 +797,8 @@ pub struct ExperimentalConfig {\n     global_not_found: Option<bool>,\n     /// Defaults to false in development mode, true in production mode.\n     turbopack_remove_unused_exports: Option<bool>,\n-    /// Devtool option for new panel UI.\n-    #[serde(rename = \"devtoolNewPanelUI\")]\n-    devtool_new_panel_ui: Option<bool>,\n+    /// Devtool option for the segment explorer.\n+    devtool_segment_explorer: Option<bool>,\n }\n \n #[derive("
        },
        {
            "sha": "f6f7a175a2c67839df0c3e2f76247c6377a97736",
            "filename": "packages/next/src/build/define-env.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -298,6 +298,9 @@ export function getDefineEnv({\n           ),\n         }\n       : {}),\n+    'process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER':\n+      // Enable segment explorer in devtools\n+      isDevToolPanelUIEnabled || !!config.experimental.devtoolSegmentExplorer,\n     'process.env.__NEXT_DEVTOOL_NEW_PANEL_UI': isDevToolPanelUIEnabled,\n \n     // The devtools need to know whether or not to show an option to clear the"
        },
        {
            "sha": "91347999495a2cce7280801bd4b895018042b897",
            "filename": "packages/next/src/build/templates/app-page.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -484,7 +484,8 @@ export async function handler(\n           deploymentId: nextConfig.deploymentId,\n           enableTainting: nextConfig.experimental.taint,\n           htmlLimitedBots: nextConfig.htmlLimitedBots,\n-          devtoolNewPanelUI: nextConfig.experimental.devtoolNewPanelUI,\n+          devtoolSegmentExplorer:\n+            nextConfig.experimental.devtoolSegmentExplorer,\n           reactMaxHeadersLength: nextConfig.reactMaxHeadersLength,\n \n           multiZoneDraftMode,"
        },
        {
            "sha": "c45746066b892ccfb57f1ef2f9c60ab04ed3c599",
            "filename": "packages/next/src/build/webpack/loaders/next-edge-ssr-loader/render.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-edge-ssr-loader%2Frender.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-edge-ssr-loader%2Frender.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-edge-ssr-loader%2Frender.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -100,7 +100,7 @@ export function getRender({\n         serverActionsManifest,\n         serverActions,\n         nextFontManifest,\n-        devtoolNewPanelUI: config.experimental.devtoolNewPanelUI,\n+        devtoolSegmentExplorer: config.experimental.devtoolSegmentExplorer,\n       },\n       renderToHTML,\n       incrementalCacheHandler,"
        },
        {
            "sha": "0cf967371d8250e0f7d4aefb5b525814a9fb9f14",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-indicator/devtools-indicator.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -56,7 +56,7 @@ export function DevToolsIndicator({\n           [vertical]: `${INDICATOR_PADDING}px`,\n           [horizontal]: `${INDICATOR_PADDING}px`,\n           visibility:\n-            state.isDevToolsPanelOpen && !state.isErrorOverlayOpen\n+            state.isDevToolsPanelOpen || state.isErrorOverlayOpen\n               ? 'hidden'\n               : 'visible',\n         } as CSSProperties"
        },
        {
            "sha": "8f3d9e928ba4d3c3697b4ab547761e91bee8d9cf",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -161,8 +161,7 @@ export function DevToolsPanel({\n                 >\n                   <div data-nextjs-devtools-panel-header-tab-group>\n                     <button\n-                      data-nextjs-devtools-panel-header-tab=\"issues\"\n-                      data-nextjs-devtools-panel-header-tab-active={\n+                      data-nextjs-devtools-panel-header-tab={\n                         activeTab === 'issues'\n                       }\n                       onClick={() => setActiveTab('issues')}\n@@ -177,17 +176,15 @@ export function DevToolsPanel({\n                       ) : null}\n                     </button>\n                     <button\n-                      data-nextjs-devtools-panel-header-tab=\"route\"\n-                      data-nextjs-devtools-panel-header-tab-active={\n+                      data-nextjs-devtools-panel-header-tab={\n                         activeTab === 'route'\n                       }\n                       onClick={() => setActiveTab('route')}\n                     >\n                       Route Info\n                     </button>\n                     <button\n-                      data-nextjs-devtools-panel-header-tab=\"settings\"\n-                      data-nextjs-devtools-panel-header-tab-active={\n+                      data-nextjs-devtools-panel-header-tab={\n                         activeTab === 'settings'\n                       }\n                       onClick={() => setActiveTab('settings')}\n@@ -355,7 +352,7 @@ export const DEVTOOLS_PANEL_STYLES = css`\n     }\n   }\n \n-  [data-nextjs-devtools-panel-header-tab-active='true'] {\n+  [data-nextjs-devtools-panel-header-tab='true'] {\n     color: var(--color-gray-1000);\n     background-color: var(--color-gray-100);\n   }"
        },
        {
            "sha": "f88d23f8ed7aec8b028dc05152f22bfc30e716d9",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-indicator.tsx",
            "status": "modified",
            "additions": 26,
            "deletions": 3,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -26,6 +26,7 @@ import {\n   type DevToolsScale,\n } from './dev-tools-info/preferences'\n import { Draggable } from './draggable'\n+import { SegmentsExplorer } from './dev-tools-info/segments-explorer'\n \n // TODO: add E2E tests to cover different scenarios\n \n@@ -83,6 +84,7 @@ const OVERLAYS = {\n   Turbo: 'turbo',\n   Route: 'route',\n   Preferences: 'preferences',\n+  SegmentExplorer: 'segment-explorer',\n } as const\n \n export type Overlays = (typeof OVERLAYS)[keyof typeof OVERLAYS]\n@@ -128,6 +130,7 @@ function DevToolsPopover({\n   const isTurbopackInfoOpen = open === OVERLAYS.Turbo\n   const isRouteInfoOpen = open === OVERLAYS.Route\n   const isPreferencesOpen = open === OVERLAYS.Preferences\n+  const isSegmentExplorerOpen = open === OVERLAYS.SegmentExplorer\n \n   const { mounted: menuMounted, rendered: menuRendered } = useDelayedRender(\n     isMenuOpen,\n@@ -217,9 +220,7 @@ function DevToolsPopover({\n   }\n \n   function toggleErrorOverlay() {\n-    if (!process.env.__NEXT_DEVTOOL_NEW_PANEL_UI) {\n-      dispatch({ type: ACTION_ERROR_OVERLAY_TOGGLE })\n-    }\n+    dispatch({ type: ACTION_ERROR_OVERLAY_TOGGLE })\n   }\n \n   function closeToRootMenu() {\n@@ -335,6 +336,19 @@ function DevToolsPopover({\n         setScale={setScale}\n       />\n \n+      {/* Page Route Info */}\n+      {process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER ? (\n+        <SegmentsExplorer\n+          isOpen={isSegmentExplorerOpen}\n+          close={closeToRootMenu}\n+          triggerRef={triggerRef}\n+          style={popover}\n+          routerType={routerType}\n+          // dummy page for legacy segment explorer, will be removed in the future\n+          page={''}\n+        />\n+      ) : null}\n+\n       {/* Dropdown Menu */}\n       {menuMounted && (\n         <div\n@@ -400,6 +414,15 @@ function DevToolsPopover({\n                 onClick={() => setOpen(OVERLAYS.Preferences)}\n                 index={isTurbopack ? 2 : 3}\n               />\n+              {process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER ? (\n+                <MenuItem\n+                  data-segment-explorer\n+                  label=\"Route Info\"\n+                  value={<ChevronRight />}\n+                  onClick={() => setOpen(OVERLAYS.SegmentExplorer)}\n+                  index={isTurbopack ? 3 : 4}\n+                />\n+              ) : null}\n             </div>\n           </Context.Provider>\n         </div>"
        },
        {
            "sha": "526bb89ff93dd47cc70680a30c33f518ca2c8210",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-info/segments-explorer.tsx",
            "status": "added",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fsegments-explorer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fsegments-explorer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fsegments-explorer.tsx?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -0,0 +1,27 @@\n+import { PageSegmentTree } from '../../../overview/segment-explorer'\n+import { DevToolsInfo, type DevToolsInfoPropsCore } from './dev-tools-info'\n+\n+export function SegmentsExplorer({\n+  routerType,\n+  page,\n+  ...props\n+}: DevToolsInfoPropsCore &\n+  React.HTMLProps<HTMLDivElement> & {\n+    routerType: 'app' | 'pages'\n+    page: string\n+  }) {\n+  const isAppRouter = routerType === 'app'\n+  return (\n+    <DevToolsInfo title=\"Route Info\" {...props}>\n+      <div data-nextjs-segments-explorer>\n+        <PageSegmentTree isAppRouter={isAppRouter} page={page} />\n+      </div>\n+    </DevToolsInfo>\n+  )\n+}\n+\n+export const SEGMENTS_EXPLORER_STYLES = `\n+  [data-nextjs-segments-explorer] {\n+    margin: -12px -8px;\n+  }\n+`"
        },
        {
            "sha": "3d5f19b2267fc41f37a78b3739d4eb9723fa43f6",
            "filename": "packages/next/src/next-devtools/dev-overlay/styles/component-styles.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -36,6 +36,7 @@ import { DEVTOOLS_PANEL_TAB_ISSUES_CONTENT_STYLES } from '../components/devtools\n import { ISSUE_FEEDBACK_BUTTON_STYLES } from '../components/errors/error-overlay-toolbar/issue-feedback-button'\n import { ERROR_CONTENT_SKELETON_STYLES } from '../container/runtime-error/error-content-skeleton'\n import { SEGMENTS_EXPLORER_TAB_STYLES } from '../components/devtools-panel/devtools-panel-tab/segments-explorer-tab'\n+import { SEGMENTS_EXPLORER_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/segments-explorer'\n import { DEVTOOLS_PANEL_TAB_ISSUES_CONTENT_LAYOUT_STYLES } from '../components/devtools-panel/devtools-panel-tab/issues-tab/issues-tab-content-layout'\n import { DEVTOOLS_PANEL_TAB_ISSUES_EMPTY_CONTENT_STYLES } from '../components/devtools-panel/devtools-panel-tab/issues-tab/issues-tab-empty-content'\n \n@@ -67,6 +68,7 @@ export function ComponentStyles() {\n         ${DEV_TOOLS_INFO_TURBOPACK_INFO_STYLES}\n         ${DEV_TOOLS_INFO_ROUTE_INFO_STYLES}\n         ${DEV_TOOLS_INFO_USER_PREFERENCES_STYLES}\n+        ${SEGMENTS_EXPLORER_STYLES}\n         ${DEV_TOOLS_INFO_RENDER_FILES_STYLES}\n         ${FADER_STYLES}\n         ${DEVTOOLS_PANEL_STYLES}"
        },
        {
            "sha": "e9b5bed17c6d37c50e65230a71938e7cd88886b1",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -3977,7 +3977,7 @@ const getGlobalErrorStyles = async (\n       dir,\n       globalErrorModule?.[1]\n     )\n-    if (ctx.renderOpts.devtoolNewPanelUI && globalErrorModulePath) {\n+    if (ctx.renderOpts.devtoolSegmentExplorer && globalErrorModulePath) {\n       const SegmentViewNode = ctx.componentMod.SegmentViewNode\n       globalErrorStyles = (\n         // This will be rendered next to GlobalError component under ErrorBoundary,"
        },
        {
            "sha": "94f465269c49c4f7e835694a48c505d0f6ff7db1",
            "filename": "packages/next/src/server/app-render/create-component-tree.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -396,7 +396,8 @@ async function createComponentTreeInternal({\n   // Resolve the segment param\n   const actualSegment = segmentParam ? segmentParam.treeSegment : segment\n   const isSegmentViewEnabled =\n-    process.env.NODE_ENV === 'development' && ctx.renderOpts.devtoolNewPanelUI\n+    process.env.NODE_ENV === 'development' &&\n+    ctx.renderOpts.devtoolSegmentExplorer\n   const dir =\n     process.env.NEXT_RUNTIME === 'edge'\n       ? process.env.__NEXT_EDGE_PROJECT_DIR!\n@@ -1083,7 +1084,8 @@ async function createBoundaryConventionElement({\n   tree: LoaderTree\n }) {\n   const isSegmentViewEnabled =\n-    process.env.NODE_ENV === 'development' && ctx.renderOpts.devtoolNewPanelUI\n+    process.env.NODE_ENV === 'development' &&\n+    ctx.renderOpts.devtoolSegmentExplorer\n   const dir =\n     process.env.NEXT_RUNTIME === 'edge'\n       ? process.env.__NEXT_EDGE_PROJECT_DIR!"
        },
        {
            "sha": "95737918aa6e418f1f4abf72f3c2d59d8f2e1c91",
            "filename": "packages/next/src/server/app-render/types.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -280,9 +280,9 @@ export interface RenderOptsPartial {\n   allowEmptyStaticShell?: boolean\n \n   /**\n-   * next config experimental.devtoolNewPanelUI\n+   * next config experimental.devtoolSegmentExplorer\n    */\n-  devtoolNewPanelUI?: boolean\n+  devtoolSegmentExplorer?: boolean\n }\n \n export type RenderOpts = LoadComponentsReturnType<AppPageModule> &"
        },
        {
            "sha": "5611478f0caef445798f8d98b13840433d269fd0",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -612,7 +612,8 @@ export default abstract class Server<\n       onInstrumentationRequestError:\n         this.instrumentationOnRequestError.bind(this),\n       reactMaxHeadersLength: this.nextConfig.reactMaxHeadersLength,\n-      devtoolNewPanelUI: this.nextConfig.experimental.devtoolNewPanelUI,\n+      devtoolSegmentExplorer:\n+        this.nextConfig.experimental.devtoolSegmentExplorer,\n     }\n \n     // Initialize next/config with the environment configuration"
        },
        {
            "sha": "12cb82fad11afbfc104139786a3080998a16a08a",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -500,6 +500,7 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n           })\n           .optional(),\n         globalNotFound: z.boolean().optional(),\n+        devtoolSegmentExplorer: z.boolean().optional(),\n         devtoolNewPanelUI: z.boolean().optional(),\n       })\n       .optional(),"
        },
        {
            "sha": "3279341797b04ff209a05628be306488745afbc2",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -736,6 +736,11 @@ export interface ExperimentalConfig {\n    */\n   globalNotFound?: boolean\n \n+  /**\n+   * Enable segment viewer for the app directory in Next.js DevTools.\n+   */\n+  devtoolSegmentExplorer?: boolean\n+\n   /**\n    * Enable new panel UI for the Next.js DevTools.\n    */\n@@ -1451,6 +1456,7 @@ export const defaultConfig = {\n     useCache: undefined,\n     slowModuleDetection: undefined,\n     globalNotFound: false,\n+    devtoolSegmentExplorer: false,\n   },\n   htmlLimitedBots: undefined,\n   bundlePagesRouterDependencies: false,"
        },
        {
            "sha": "8a5b5c187d4e41d783952059e7a8e6f2796c2632",
            "filename": "test/development/app-dir/segment-explorer-globals/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer-globals%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer-globals%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer-globals%2Fnext.config.js?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    devtoolNewPanelUI: true,\n+    devtoolSegmentExplorer: true,\n     authInterrupts: true,\n     globalNotFound: true,\n   },"
        },
        {
            "sha": "136a25cbc1ce97ed936d2c0744b4f3f367e0a0fe",
            "filename": "test/development/app-dir/segment-explorer-globals/segment-explorer-globals.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer-globals%2Fsegment-explorer-globals.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer-globals%2Fsegment-explorer-globals.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer-globals%2Fsegment-explorer-globals.test.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -3,12 +3,11 @@ import { openDevToolsIndicatorPopover } from 'next-test-utils'\n import { Playwright } from 'next-webdriver'\n \n async function getSegmentExplorerContent(browser: Playwright) {\n+  // open the devtool button\n   await openDevToolsIndicatorPopover(browser)\n \n-  // open segment explorer tab\n-  await browser\n-    .elementByCss('[data-nextjs-devtools-panel-header-tab=\"route\"]')\n-    .click()\n+  // open the segment explorer\n+  await browser.elementByCss('[data-segment-explorer]').click()\n \n   //  wait for the segment explorer to be visible\n   await browser.waitForElementByCss('[data-nextjs-devtool-segment-explorer]')"
        },
        {
            "sha": "6a4b4a634d561b7e8c95c15316e3571b3fa1e40d",
            "filename": "test/development/app-dir/segment-explorer/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fnext.config.js?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    devtoolNewPanelUI: true,\n+    devtoolSegmentExplorer: true,\n     authInterrupts: true,\n   },\n }"
        },
        {
            "sha": "ce472236f543713e92224940cda59ba064bc6f2c",
            "filename": "test/development/app-dir/segment-explorer/segment-explorer.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -6,10 +6,8 @@ async function getSegmentExplorerContent(browser: Playwright) {\n   // open the devtool button\n   await openDevToolsIndicatorPopover(browser)\n \n-  // open segment explorer tab\n-  await browser\n-    .elementByCss('[data-nextjs-devtools-panel-header-tab=\"route\"]')\n-    .click()\n+  // open the segment explorer\n+  await browser.elementByCss('[data-segment-explorer]').click()\n \n   //  wait for the segment explorer to be visible\n   await browser.waitForElementByCss('[data-nextjs-devtool-segment-explorer]')\n@@ -88,7 +86,6 @@ describe('segment-explorer', () => {\n     await browser.elementByCss('[href=\"/soft-navigation/b\"]').click()\n     await retry(async () => {\n       expect(await browser.elementByCss('body').text()).toContain('Page B')\n-      expect(await browser.url()).toBe(`${next.url}/soft-navigation/b`)\n     })\n \n     expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`"
        },
        {
            "sha": "451bcaeb308c8a5f734e6c1b41e11baf7a3ee553",
            "filename": "test/lib/next-test-utils.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Flib%2Fnext-test-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/19bf594b60e1f289d35e6c891b0e8cc8a72bda7e/test%2Flib%2Fnext-test-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-test-utils.ts?ref=19bf594b60e1f289d35e6c891b0e8cc8a72bda7e",
            "patch": "@@ -951,11 +951,6 @@ export async function openRedbox(browser: Playwright): Promise<void> {\n export async function openDevToolsIndicatorPopover(\n   browser: Playwright\n ): Promise<void> {\n-  // If the devtools panel is already open, we don't assert the indicator,\n-  // and no need to open it again.\n-  if (await hasDevToolsPanel(browser)) {\n-    return\n-  }\n   const devToolsIndicator = await assertHasDevToolsIndicator(browser)\n \n   try {"
        }
    ],
    "stats": {
        "total": 129,
        "additions": 91,
        "deletions": 38
    }
}