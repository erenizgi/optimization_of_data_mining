{
    "author": "eps1lon",
    "message": "[cna] Preserve existing config option when enabling React Compiler (#84663)",
    "sha": "360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
    "files": [
        {
            "sha": "b108e1a2e4d4f3a9aecf15c5c56fa2f9bfaedf12",
            "filename": "packages/create-next-app/templates/app-api/js/next.config.mjs",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp-api%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp-api%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp-api%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,4 +1,6 @@\n /** @type {import('next').NextConfig} */\n-const nextConfig = {};\n+const nextConfig = {\n+  /* config options here */\n+};\n \n export default nextConfig;"
        },
        {
            "sha": "b108e1a2e4d4f3a9aecf15c5c56fa2f9bfaedf12",
            "filename": "packages/create-next-app/templates/app-empty/js/next.config.mjs",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp-empty%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp-empty%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp-empty%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,4 +1,6 @@\n /** @type {import('next').NextConfig} */\n-const nextConfig = {};\n+const nextConfig = {\n+  /* config options here */\n+};\n \n export default nextConfig;"
        },
        {
            "sha": "b108e1a2e4d4f3a9aecf15c5c56fa2f9bfaedf12",
            "filename": "packages/create-next-app/templates/app-tw-empty/js/next.config.mjs",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw-empty%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw-empty%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw-empty%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,4 +1,6 @@\n /** @type {import('next').NextConfig} */\n-const nextConfig = {};\n+const nextConfig = {\n+  /* config options here */\n+};\n \n export default nextConfig;"
        },
        {
            "sha": "b108e1a2e4d4f3a9aecf15c5c56fa2f9bfaedf12",
            "filename": "packages/create-next-app/templates/app-tw/js/next.config.mjs",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp-tw%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,4 +1,6 @@\n /** @type {import('next').NextConfig} */\n-const nextConfig = {};\n+const nextConfig = {\n+  /* config options here */\n+};\n \n export default nextConfig;"
        },
        {
            "sha": "b108e1a2e4d4f3a9aecf15c5c56fa2f9bfaedf12",
            "filename": "packages/create-next-app/templates/app/js/next.config.mjs",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fapp%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fapp%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,4 +1,6 @@\n /** @type {import('next').NextConfig} */\n-const nextConfig = {};\n+const nextConfig = {\n+  /* config options here */\n+};\n \n export default nextConfig;"
        },
        {
            "sha": "3ff725108e7e7eea8b2e5b0964c82a9126764949",
            "filename": "packages/create-next-app/templates/default-empty/js/next.config.mjs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-empty%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-empty%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-empty%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,5 +1,6 @@\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n+  /* config options here */\n   reactStrictMode: true,\n };\n "
        },
        {
            "sha": "3ff725108e7e7eea8b2e5b0964c82a9126764949",
            "filename": "packages/create-next-app/templates/default-tw-empty/js/next.config.mjs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw-empty%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw-empty%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw-empty%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,5 +1,6 @@\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n+  /* config options here */\n   reactStrictMode: true,\n };\n "
        },
        {
            "sha": "3ff725108e7e7eea8b2e5b0964c82a9126764949",
            "filename": "packages/create-next-app/templates/default-tw/js/next.config.mjs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fdefault-tw%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,5 +1,6 @@\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n+  /* config options here */\n   reactStrictMode: true,\n };\n "
        },
        {
            "sha": "3ff725108e7e7eea8b2e5b0964c82a9126764949",
            "filename": "packages/create-next-app/templates/default/js/next.config.mjs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fdefault%2Fjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Fdefault%2Fjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Fdefault%2Fjs%2Fnext.config.mjs?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -1,5 +1,6 @@\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n+  /* config options here */\n   reactStrictMode: true,\n };\n "
        },
        {
            "sha": "13db501e3de29db586b77f5fb7f8717f873cec22",
            "filename": "packages/create-next-app/templates/index.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 11,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts?ref=360901fc669f21b12fd7f3c0cc92ba7a4d9a8dcd",
            "patch": "@@ -103,17 +103,10 @@ export const installTemplate = async ({\n     );\n     let configContent = await fs.readFile(nextConfigFile, \"utf8\");\n \n-    if (mode === \"ts\") {\n-      configContent = configContent.replace(\n-        \"const nextConfig: NextConfig = {\\n  /* config options here */\\n};\",\n-        `const nextConfig: NextConfig = {\\n  reactCompiler: true,\\n};`,\n-      );\n-    } else {\n-      configContent = configContent.replace(\n-        \"const nextConfig = {};\",\n-        `const nextConfig = {\\n  reactCompiler: true,\\n};`,\n-      );\n-    }\n+    configContent = configContent.replace(\n+      \"/* config options here */\\n\",\n+      \"/* config options here */\\n  reactCompiler: true,\\n\",\n+    );\n \n     await fs.writeFile(nextConfigFile, configContent);\n   }"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 23,
        "deletions": 16
    }
}