{
    "author": "timneutkens",
    "message": "Build: Include rewrites in manifest generation (#81894)\n\n## What?\n\nThese values get assigned right after creating the object. So they can\njust be included when creating the object. I think in the past it might\nhave had conditions wrapping it but they're no longer there.",
    "sha": "1e5888b210c25d1d36e007dde8d21a99b927c4cf",
    "files": [
        {
            "sha": "dd7a27fe6b85078d56d82066e2d0ce47b1fdf78b",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 13,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/1e5888b210c25d1d36e007dde8d21a99b927c4cf/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1e5888b210c25d1d36e007dde8d21a99b927c4cf/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=1e5888b210c25d1d36e007dde8d21a99b927c4cf",
            "patch": "@@ -1404,9 +1404,15 @@ export default async function build(\n             ),\n             headers: headers.map((r) => buildCustomRoute('header', r)),\n             rewrites: {\n-              beforeFiles: [],\n-              afterFiles: [],\n-              fallback: [],\n+              beforeFiles: rewrites.beforeFiles.map((r) =>\n+                buildCustomRoute('rewrite', r)\n+              ),\n+              afterFiles: rewrites.afterFiles.map((r) =>\n+                buildCustomRoute('rewrite', r)\n+              ),\n+              fallback: rewrites.fallback.map((r) =>\n+                buildCustomRoute('rewrite', r)\n+              ),\n             },\n             dynamicRoutes,\n             staticRoutes,\n@@ -1443,16 +1449,6 @@ export default async function build(\n           } satisfies RoutesManifest\n         })\n \n-      routesManifest.rewrites = {\n-        beforeFiles: rewrites.beforeFiles.map((r) =>\n-          buildCustomRoute('rewrite', r)\n-        ),\n-        afterFiles: rewrites.afterFiles.map((r) =>\n-          buildCustomRoute('rewrite', r)\n-        ),\n-        fallback: rewrites.fallback.map((r) => buildCustomRoute('rewrite', r)),\n-      }\n-\n       let clientRouterFilters:\n         | undefined\n         | ReturnType<typeof createClientRouterFilter>"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 9,
        "deletions": 13
    }
}