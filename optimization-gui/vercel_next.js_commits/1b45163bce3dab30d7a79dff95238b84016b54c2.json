{
    "author": "gnoff",
    "message": "Exclude `next-js` condition from middleware, proxy, and instrumentation (#85321)\n\nThese scopes aren't fully Next.js environments and can't access many\nNext.js APIs. In the future this might change but for now we will\nexclude the `next-js` condition when bundling for these entrypoints so\nthat 3rd parties that target Next.js can do so with the expectation that\nregardless of what environment they are running in the full suite of\nNext.js libraries they support will work.",
    "sha": "1b45163bce3dab30d7a79dff95238b84016b54c2",
    "files": [
        {
            "sha": "2b5c06ced3b0d3f27840a2936f140cccd79bd74f",
            "filename": "crates/next-core/src/next_edge/context.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fcontext.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fcontext.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fcontext.rs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -153,9 +153,9 @@ pub async fn get_edge_resolve_options_context(\n         custom_conditions.push(rcstr!(\"react-server\"));\n     };\n \n-    if *next_config.enable_cache_components().await? {\n-        custom_conditions.push(rcstr!(\"next-js\"));\n-    };\n+    // Edge runtime is disabled for projects with Cache Components enabled except for Middleware\n+    // but Middleware doesn't have all Next.js APIs so we omit the \"next-js\" condition for all edge\n+    // entrypoints\n \n     let resolve_options_context = ResolveOptionsContext {\n         enable_node_modules: Some(project_path.root().owned().await?),"
        },
        {
            "sha": "02c455dfef2ceb774e7c25471856616cfa05d654",
            "filename": "crates/next-core/src/next_server/context.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -214,7 +214,10 @@ pub async fn get_server_resolve_options_context(\n         custom_conditions.push(rcstr!(\"react-server\"));\n     };\n \n-    if *next_config.enable_cache_components().await? {\n+    if *next_config.enable_cache_components().await?\n+        // Middleware shouldn't use the \"next-js\" condition because it doesn't have all Next.js APIs available\n+        && !matches!(ty, ServerContextType::Middleware { .. } |  ServerContextType::Instrumentation { .. })\n+    {\n         custom_conditions.push(rcstr!(\"next-js\"));\n     };\n "
        },
        {
            "sha": "a2692d5123b93490c794e04e3d3ad0fc32642d47",
            "filename": "packages/next/src/build/webpack-config.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -687,7 +687,6 @@ export default async function getBaseWebpackConfig(\n     : distDir\n \n   const conditionNames = [\n-    ...(config.cacheComponents === true ? ['next-js'] : []),\n     ...(isEdgeServer ? [edgeConditionName] : []),\n     // inherits Webpack's default conditions\n     '...',\n@@ -1389,6 +1388,17 @@ export default async function getBaseWebpackConfig(\n     },\n     module: {\n       rules: [\n+        {\n+          issuerLayer: {\n+            not: [WEBPACK_LAYERS.middleware, WEBPACK_LAYERS.instrument],\n+          },\n+          resolve: {\n+            conditionNames: [\n+              config.cacheComponents ? 'next-js' : '',\n+              '...',\n+            ].filter(Boolean) as string[],\n+          },\n+        },\n         // Alias server-only and client-only to proper exports based on bundling layers\n         {\n           issuerLayer: {"
        },
        {
            "sha": "b512c09d476623ff4bf8d0d63c29b784925dbdf8",
            "filename": "test/e2e/app-dir/next-condition/fixtures/instrumentation/.gitignore",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2F.gitignore",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2F.gitignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2F.gitignore?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/.gitignore"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/next-condition/fixtures/instrumentation/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fapp%2Flayout.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/layout.tsx"
        },
        {
            "sha": "0bd21c5bac776b2207e1e01878c12fde935a2dde",
            "filename": "test/e2e/app-dir/next-condition/fixtures/instrumentation/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fapp%2Fpage.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <div>Hello World</div>\n+}"
        },
        {
            "sha": "ac9e3181d1eb23130abed037283e1bab27c31db3",
            "filename": "test/e2e/app-dir/next-condition/fixtures/instrumentation/instrumentation.ts",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Finstrumentation.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Finstrumentation.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Finstrumentation.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,13 @@\n+import CJSExportsDefault from 'my-cjs-package/exports'\n+import ExternalCJSExportsDefault from 'my-external-cjs-package/exports'\n+import ESMExportsDefault from 'my-esm-package/exports'\n+import ExternalESMExportsDefault from 'my-external-esm-package/exports'\n+\n+export function register() {\n+  console.log('==== REGISTER START ====')\n+  console.log('CJSExportsDefault:', CJSExportsDefault)\n+  console.log('ExternalCJSExportsDefault:', ExternalCJSExportsDefault)\n+  console.log('ESMExportsDefault:', ESMExportsDefault)\n+  console.log('ExternalESMExportsDefault:', ExternalESMExportsDefault)\n+  console.log('==== REGISTER END ====')\n+}"
        },
        {
            "sha": "63e32c68184d3fcbd7dd448da681c0a2047bd279",
            "filename": "test/e2e/app-dir/next-condition/fixtures/instrumentation/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fnext.config.js?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/next.config.js"
        },
        {
            "sha": "16de853ca62c5ca696cc624324ec11fbe61d2194",
            "filename": "test/e2e/app-dir/next-condition/fixtures/instrumentation/package.json",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fpackage.json?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,8 @@\n+{\n+  \"dependencies\": {\n+    \"my-cjs-package\": \"file:./sym-linked-packages/my-cjs-package\",\n+    \"my-esm-package\": \"file:./sym-linked-packages/my-esm-package\",\n+    \"my-external-cjs-package\": \"file:./sym-linked-packages/my-external-cjs-package\",\n+    \"my-external-esm-package\": \"file:./sym-linked-packages/my-external-esm-package\"\n+  }\n+}"
        },
        {
            "sha": "bca310dbe9feeaf730e9c3168fa641878f326448",
            "filename": "test/e2e/app-dir/next-condition/fixtures/instrumentation/packages.d.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fpackages.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fpackages.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fpackages.d.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/packages.d.ts"
        },
        {
            "sha": "4b727bf6889722de2802a19fe449ed629042fa52",
            "filename": "test/e2e/app-dir/next-condition/fixtures/instrumentation/sym-linked-packages",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fsym-linked-packages",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fsym-linked-packages",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Finstrumentation%2Fsym-linked-packages?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+../../packages\n\\ No newline at end of file"
        },
        {
            "sha": "b512c09d476623ff4bf8d0d63c29b784925dbdf8",
            "filename": "test/e2e/app-dir/next-condition/fixtures/middleware/.gitignore",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2F.gitignore",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2F.gitignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2F.gitignore?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+node_modules\n\\ No newline at end of file"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/next-condition/fixtures/middleware/app/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fapp%2Flayout.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,9 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "0bd21c5bac776b2207e1e01878c12fde935a2dde",
            "filename": "test/e2e/app-dir/next-condition/fixtures/middleware/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fapp%2Fpage.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <div>Hello World</div>\n+}"
        },
        {
            "sha": "1324ee01fc147000722fac4e650b9c20895d9c17",
            "filename": "test/e2e/app-dir/next-condition/fixtures/middleware/middleware.ts",
            "status": "added",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fmiddleware.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fmiddleware.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fmiddleware.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,15 @@\n+import CJSExportsDefault from 'my-cjs-package/exports'\n+import ExternalCJSExportsDefault from 'my-external-cjs-package/exports'\n+import ESMExportsDefault from 'my-esm-package/exports'\n+import ExternalESMExportsDefault from 'my-external-esm-package/exports'\n+\n+export default async function proxy(req: Request) {\n+  if (!req.url.includes('/_next/')) {\n+    console.log('==== MIDDLEWARE START ====')\n+    console.log('CJSExportsDefault:', CJSExportsDefault)\n+    console.log('ExternalCJSExportsDefault:', ExternalCJSExportsDefault)\n+    console.log('ESMExportsDefault:', ESMExportsDefault)\n+    console.log('ExternalESMExportsDefault:', ExternalESMExportsDefault)\n+    console.log('==== MIDDLEWARE END ====')\n+  }\n+}"
        },
        {
            "sha": "63e32c68184d3fcbd7dd448da681c0a2047bd279",
            "filename": "test/e2e/app-dir/next-condition/fixtures/middleware/next.config.js",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fnext.config.js?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,12 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+\n+const nextConfig = {\n+  serverExternalPackages: [\n+    'my-external-esm-package',\n+    'my-external-cjs-package',\n+  ],\n+}\n+\n+module.exports = nextConfig"
        },
        {
            "sha": "16de853ca62c5ca696cc624324ec11fbe61d2194",
            "filename": "test/e2e/app-dir/next-condition/fixtures/middleware/package.json",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fpackage.json?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,8 @@\n+{\n+  \"dependencies\": {\n+    \"my-cjs-package\": \"file:./sym-linked-packages/my-cjs-package\",\n+    \"my-esm-package\": \"file:./sym-linked-packages/my-esm-package\",\n+    \"my-external-cjs-package\": \"file:./sym-linked-packages/my-external-cjs-package\",\n+    \"my-external-esm-package\": \"file:./sym-linked-packages/my-external-esm-package\"\n+  }\n+}"
        },
        {
            "sha": "bca310dbe9feeaf730e9c3168fa641878f326448",
            "filename": "test/e2e/app-dir/next-condition/fixtures/middleware/packages.d.ts",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fpackages.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fpackages.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fpackages.d.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,8 @@\n+declare module 'my-cjs-package/exports'\n+declare module 'my-cjs-package/imports'\n+declare module 'my-esm-package/exports'\n+declare module 'my-esm-package/imports'\n+declare module 'my-external-cjs-package/exports'\n+declare module 'my-external-cjs-package/imports'\n+declare module 'my-external-esm-package/exports'\n+declare module 'my-external-esm-package/imports'"
        },
        {
            "sha": "4b727bf6889722de2802a19fe449ed629042fa52",
            "filename": "test/e2e/app-dir/next-condition/fixtures/middleware/sym-linked-packages",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fsym-linked-packages",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fsym-linked-packages",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fmiddleware%2Fsym-linked-packages?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+../../packages\n\\ No newline at end of file"
        },
        {
            "sha": "b512c09d476623ff4bf8d0d63c29b784925dbdf8",
            "filename": "test/e2e/app-dir/next-condition/fixtures/proxy/.gitignore",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2F.gitignore",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2F.gitignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2F.gitignore?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+node_modules\n\\ No newline at end of file"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/next-condition/fixtures/proxy/app/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fapp%2Flayout.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,9 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "0bd21c5bac776b2207e1e01878c12fde935a2dde",
            "filename": "test/e2e/app-dir/next-condition/fixtures/proxy/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fapp%2Fpage.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <div>Hello World</div>\n+}"
        },
        {
            "sha": "63e32c68184d3fcbd7dd448da681c0a2047bd279",
            "filename": "test/e2e/app-dir/next-condition/fixtures/proxy/next.config.js",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fnext.config.js?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,12 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+\n+const nextConfig = {\n+  serverExternalPackages: [\n+    'my-external-esm-package',\n+    'my-external-cjs-package',\n+  ],\n+}\n+\n+module.exports = nextConfig"
        },
        {
            "sha": "16de853ca62c5ca696cc624324ec11fbe61d2194",
            "filename": "test/e2e/app-dir/next-condition/fixtures/proxy/package.json",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fpackage.json?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,8 @@\n+{\n+  \"dependencies\": {\n+    \"my-cjs-package\": \"file:./sym-linked-packages/my-cjs-package\",\n+    \"my-esm-package\": \"file:./sym-linked-packages/my-esm-package\",\n+    \"my-external-cjs-package\": \"file:./sym-linked-packages/my-external-cjs-package\",\n+    \"my-external-esm-package\": \"file:./sym-linked-packages/my-external-esm-package\"\n+  }\n+}"
        },
        {
            "sha": "bca310dbe9feeaf730e9c3168fa641878f326448",
            "filename": "test/e2e/app-dir/next-condition/fixtures/proxy/packages.d.ts",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fpackages.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fpackages.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fpackages.d.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,8 @@\n+declare module 'my-cjs-package/exports'\n+declare module 'my-cjs-package/imports'\n+declare module 'my-esm-package/exports'\n+declare module 'my-esm-package/imports'\n+declare module 'my-external-cjs-package/exports'\n+declare module 'my-external-cjs-package/imports'\n+declare module 'my-external-esm-package/exports'\n+declare module 'my-external-esm-package/imports'"
        },
        {
            "sha": "1324ee01fc147000722fac4e650b9c20895d9c17",
            "filename": "test/e2e/app-dir/next-condition/fixtures/proxy/proxy.ts",
            "status": "added",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fproxy.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fproxy.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fproxy.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,15 @@\n+import CJSExportsDefault from 'my-cjs-package/exports'\n+import ExternalCJSExportsDefault from 'my-external-cjs-package/exports'\n+import ESMExportsDefault from 'my-esm-package/exports'\n+import ExternalESMExportsDefault from 'my-external-esm-package/exports'\n+\n+export default async function proxy(req: Request) {\n+  if (!req.url.includes('/_next/')) {\n+    console.log('==== MIDDLEWARE START ====')\n+    console.log('CJSExportsDefault:', CJSExportsDefault)\n+    console.log('ExternalCJSExportsDefault:', ExternalCJSExportsDefault)\n+    console.log('ESMExportsDefault:', ESMExportsDefault)\n+    console.log('ExternalESMExportsDefault:', ExternalESMExportsDefault)\n+    console.log('==== MIDDLEWARE END ====')\n+  }\n+}"
        },
        {
            "sha": "4b727bf6889722de2802a19fe449ed629042fa52",
            "filename": "test/e2e/app-dir/next-condition/fixtures/proxy/sym-linked-packages",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fsym-linked-packages",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fsym-linked-packages",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Fproxy%2Fsym-linked-packages?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+../../packages\n\\ No newline at end of file"
        },
        {
            "sha": "b512c09d476623ff4bf8d0d63c29b784925dbdf8",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/.gitignore",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2F.gitignore",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2F.gitignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2F.gitignore?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+node_modules\n\\ No newline at end of file"
        },
        {
            "sha": "5bfbea03e08483203f3a245bf2f46bd9f6b5db56",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/cjs/client.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fcjs%2Fclient.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fcjs%2Fclient.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fcjs%2Fclient.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/cjs/client.tsx"
        },
        {
            "sha": "d393b69f1704b4a72202476e56642a7a52924f8b",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/cjs/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fcjs%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fcjs%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fcjs%2Fpage.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/cjs/page.tsx"
        },
        {
            "sha": "39372a63dae2015bd0036bc5668bd11af06f097a",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/esm/client.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fesm%2Fclient.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fesm%2Fclient.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fesm%2Fclient.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/esm/client.tsx"
        },
        {
            "sha": "9f731e1f5c9da943011a40b149560289bf1693ba",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/esm/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fesm%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fesm%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fesm%2Fpage.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/esm/page.tsx"
        },
        {
            "sha": "fcc5f4e7a7e30c331761b23b40a25fb4bd513428",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/external-cjs/client.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-cjs%2Fclient.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-cjs%2Fclient.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-cjs%2Fclient.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/external-cjs/client.tsx"
        },
        {
            "sha": "f144dfa78e1a7e92c9c49293e672be47ca85f823",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/external-cjs/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-cjs%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-cjs%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-cjs%2Fpage.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/external-cjs/page.tsx"
        },
        {
            "sha": "1c3adb999e18d8cd440734e1529ab95d724fba6e",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/external-esm/client.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-esm%2Fclient.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-esm%2Fclient.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-esm%2Fclient.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/external-esm/client.tsx"
        },
        {
            "sha": "d59675f38d6656b2c95d114ab63e28632205f4b5",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/external-esm/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-esm%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-esm%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Fexternal-esm%2Fpage.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "previous_filename": "test/e2e/app-dir/next-condition/app/external-esm/page.tsx"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/app/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fapp%2Flayout.tsx?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,9 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "63e32c68184d3fcbd7dd448da681c0a2047bd279",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/next.config.js",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fnext.config.js?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,12 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+\n+const nextConfig = {\n+  serverExternalPackages: [\n+    'my-external-esm-package',\n+    'my-external-cjs-package',\n+  ],\n+}\n+\n+module.exports = nextConfig"
        },
        {
            "sha": "16de853ca62c5ca696cc624324ec11fbe61d2194",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/package.json",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fpackage.json?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,8 @@\n+{\n+  \"dependencies\": {\n+    \"my-cjs-package\": \"file:./sym-linked-packages/my-cjs-package\",\n+    \"my-esm-package\": \"file:./sym-linked-packages/my-esm-package\",\n+    \"my-external-cjs-package\": \"file:./sym-linked-packages/my-external-cjs-package\",\n+    \"my-external-esm-package\": \"file:./sym-linked-packages/my-external-esm-package\"\n+  }\n+}"
        },
        {
            "sha": "bca310dbe9feeaf730e9c3168fa641878f326448",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/packages.d.ts",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fpackages.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fpackages.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fpackages.d.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,8 @@\n+declare module 'my-cjs-package/exports'\n+declare module 'my-cjs-package/imports'\n+declare module 'my-esm-package/exports'\n+declare module 'my-esm-package/imports'\n+declare module 'my-external-cjs-package/exports'\n+declare module 'my-external-cjs-package/imports'\n+declare module 'my-external-esm-package/exports'\n+declare module 'my-external-esm-package/imports'"
        },
        {
            "sha": "4b727bf6889722de2802a19fe449ed629042fa52",
            "filename": "test/e2e/app-dir/next-condition/fixtures/render/sym-linked-packages",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fsym-linked-packages",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fsym-linked-packages",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Ffixtures%2Frender%2Fsym-linked-packages?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+../../packages\n\\ No newline at end of file"
        },
        {
            "sha": "88d3e4df990faa0dee91e0be91615f6b470298c1",
            "filename": "test/e2e/app-dir/next-condition/next-condition.test.ts",
            "status": "modified",
            "additions": 155,
            "deletions": 4,
            "changes": 159,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnext-condition.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnext-condition.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnext-condition.test.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -1,9 +1,14 @@\n-import { nextTestSetup } from 'e2e-utils'\n+import { FileRef, nextTestSetup } from 'e2e-utils'\n \n-describe('`next-js` Condition', () => {\n+describe('`next-js` Condition - Rendering', () => {\n   const { next, isTurbopack, skipped } = nextTestSetup({\n-    files: __dirname,\n-    dependencies: require('./package.json').dependencies,\n+    files: __dirname + '/fixtures/render',\n+    // copy shared packages over to the test folder. This will override the symlink that currently\n+    // exists in the fixture with relative paths\n+    overrideFiles: {\n+      'sym-linked-packages': new FileRef(__dirname + '/packages'),\n+    },\n+    dependencies: require('./fixtures/render/package.json').dependencies,\n     // Deploy tests are broken with `config.serverExternalPackages`\n     skipDeployment: true,\n   })\n@@ -618,6 +623,136 @@ describe('`next-js` Condition', () => {\n   }\n })\n \n+describe('`next-js` Condition - middleware (legacy)', () => {\n+  const { next, skipped } = nextTestSetup({\n+    files: __dirname + '/fixtures/middleware',\n+    // copy shared packages over to the test folder. This will override the symlink that currently\n+    // exists in the fixture with relative paths\n+    overrideFiles: {\n+      'sym-linked-packages': new FileRef(__dirname + '/packages'),\n+    },\n+    dependencies: require('./fixtures/middleware/package.json').dependencies,\n+    // Deploy tests are broken with `config.serverExternalPackages`\n+    skipDeployment: true,\n+  })\n+\n+  if (skipped) {\n+    return\n+  }\n+\n+  // Recommended for tests that check HTML. Cheerio is a HTML parser that has a jQuery like API.\n+  describe('With or Without Cache Components', () => {\n+    it('should follow the next-js condition from a bundled commonjs package', async () => {\n+      let cliIndex = next.cliOutput.length\n+      const $ = await next.render$('/')\n+\n+      const middlewareOutput = formatMiddlewareOutput(\n+        next.cliOutput.slice(cliIndex)\n+      )\n+      expect(middlewareOutput).toMatchInlineSnapshot(`\n+       \"CJSExportsDefault: {\n+         default: 'EXPORTS DEFAULT SERVER - Default Export',\n+         named: 'EXPORTS DEFAULT SERVER - Named Export'\n+       }\n+       ExternalCJSExportsDefault: {\n+         default: 'EXPORTS DEFAULT SERVER - Default Export',\n+         named: 'EXPORTS DEFAULT SERVER - Named Export'\n+       }\n+       ESMExportsDefault: EXPORTS DEFAULT SERVER - Default Export\n+       ExternalESMExportsDefault: EXPORTS DEFAULT SERVER - Default Export\"\n+      `)\n+\n+      const text = formatHtmlText($('main').html())\n+      expect(text).toMatchInlineSnapshot(`\"Hello World\"`)\n+    })\n+  })\n+})\n+\n+describe('`next-js` Condition - proxy', () => {\n+  const { next, skipped } = nextTestSetup({\n+    files: __dirname + '/fixtures/proxy',\n+    // copy shared packages over to the test folder. This will override the symlink that currently\n+    // exists in the fixture with relative paths\n+    overrideFiles: {\n+      'sym-linked-packages': new FileRef(__dirname + '/packages'),\n+    },\n+    dependencies: require('./fixtures/proxy/package.json').dependencies,\n+    // Deploy tests are broken with `config.serverExternalPackages`\n+    skipDeployment: true,\n+  })\n+\n+  if (skipped) {\n+    return\n+  }\n+\n+  // Recommended for tests that check HTML. Cheerio is a HTML parser that has a jQuery like API.\n+  describe('With or Without Cache Components', () => {\n+    it('should follow the next-js condition from a bundled commonjs package', async () => {\n+      let cliIndex = next.cliOutput.length\n+      const $ = await next.render$('/')\n+\n+      const middlewareOutput = formatMiddlewareOutput(\n+        next.cliOutput.slice(cliIndex)\n+      )\n+      expect(middlewareOutput).toMatchInlineSnapshot(`\n+         \"CJSExportsDefault: {\n+           default: 'EXPORTS DEFAULT SERVER - Default Export',\n+           named: 'EXPORTS DEFAULT SERVER - Named Export'\n+         }\n+         ExternalCJSExportsDefault: {\n+           default: 'EXPORTS DEFAULT CLIENT - Default Export',\n+           named: 'EXPORTS DEFAULT CLIENT - Named Export'\n+         }\n+         ESMExportsDefault: EXPORTS DEFAULT SERVER - Default Export\n+         ExternalESMExportsDefault: EXPORTS DEFAULT CLIENT - Default Export\"\n+        `)\n+\n+      const text = formatHtmlText($('main').html())\n+      expect(text).toMatchInlineSnapshot(`\"Hello World\"`)\n+    })\n+  })\n+})\n+\n+describe('`next-js` Condition - instrumentation', () => {\n+  const { next, skipped } = nextTestSetup({\n+    files: __dirname + '/fixtures/instrumentation',\n+    // copy shared packages over to the test folder. This will override the symlink that currently\n+    // exists in the fixture with relative paths\n+    overrideFiles: {\n+      'sym-linked-packages': new FileRef(__dirname + '/packages'),\n+    },\n+    dependencies: require('./fixtures/instrumentation/package.json')\n+      .dependencies,\n+    // Deploy tests are broken with `config.serverExternalPackages`\n+    skipDeployment: true,\n+  })\n+\n+  if (skipped) {\n+    return\n+  }\n+\n+  // Recommended for tests that check HTML. Cheerio is a HTML parser that has a jQuery like API.\n+  describe('With or Without Cache Components', () => {\n+    it('should not follow the next-js condition inside instrumentation', async () => {\n+      // We need a request to trigger the server start in start tests\n+      await next.render$('/')\n+      const registerOutput = formatRegisterOutput(next.cliOutput)\n+      expect(registerOutput).toMatchInlineSnapshot(`\n+         \"CJSExportsDefault: {\n+           default: 'EXPORTS DEFAULT SERVER - Default Export',\n+           named: 'EXPORTS DEFAULT SERVER - Named Export'\n+         }\n+         ExternalCJSExportsDefault: {\n+           default: 'EXPORTS DEFAULT CLIENT - Default Export',\n+           named: 'EXPORTS DEFAULT CLIENT - Named Export'\n+         }\n+         ESMExportsDefault: EXPORTS DEFAULT SERVER - Default Export\n+         ExternalESMExportsDefault: EXPORTS DEFAULT CLIENT - Default Export\"\n+        `)\n+    })\n+  })\n+})\n+\n /**\n  * produces more readable snapshots by stripping tags and auto formatting\n  */\n@@ -645,3 +780,19 @@ function formatHtmlText(html) {\n     .filter(Boolean)\n     .join('\\n')\n }\n+\n+function formatMiddlewareOutput(cliOutput) {\n+  return (\n+    cliOutput.match(\n+      /==== MIDDLEWARE START ====(.*?)==== MIDDLEWARE END ====/s\n+    )?.[1] ?? ''\n+  ).trim()\n+}\n+\n+function formatRegisterOutput(cliOutput) {\n+  return (\n+    cliOutput.match(\n+      /==== REGISTER START ====(.*?)==== REGISTER END ====/s\n+    )?.[1] ?? ''\n+  ).trim()\n+}"
        },
        {
            "sha": "9b25ff979ae94e32852bbb9a76c5ac754009c9a8",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.modules.yaml",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.modules.yaml",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.modules.yaml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.modules.yaml?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,23 @@\n+hoistPattern:\n+  - '*'\n+hoistedDependencies: {}\n+included:\n+  dependencies: true\n+  devDependencies: true\n+  optionalDependencies: true\n+injectedDeps: {}\n+layoutVersion: 5\n+nodeLinker: isolated\n+packageManager: pnpm@9.6.0\n+pendingBuilds: []\n+prunedAt: Thu, 23 Oct 2025 19:32:10 GMT\n+publicHoistPattern:\n+  - '*eslint*'\n+  - '*prettier*'\n+registries:\n+  '@vercel-private': https://vercel-private-registry.vercel.sh/registry\n+  default: https://registry.npmjs.org/\n+skipped: []\n+storeDir: /Users/joshstory/Library/pnpm/store/v3\n+virtualStoreDir: .pnpm\n+virtualStoreDirMaxLength: 120"
        },
        {
            "sha": "bade8f8fad3ae3f1cebe7a63558e29334749a6fa",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/lock.yaml",
            "status": "added",
            "additions": 43,
            "deletions": 0,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Flock.yaml",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Flock.yaml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Flock.yaml?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,43 @@\n+lockfileVersion: '9.0'\n+\n+settings:\n+  autoInstallPeers: true\n+  excludeLinksFromLockfile: false\n+\n+importers:\n+  .:\n+    dependencies:\n+      my-cjs-package:\n+        specifier: file:./packages/my-cjs-package\n+        version: file:packages/my-cjs-package\n+      my-esm-package:\n+        specifier: file:./packages/my-esm-package\n+        version: file:packages/my-esm-package\n+      my-external-cjs-package:\n+        specifier: file:./packages/my-external-cjs-package\n+        version: file:packages/my-external-cjs-package\n+      my-external-esm-package:\n+        specifier: file:./packages/my-external-esm-package\n+        version: file:packages/my-external-esm-package\n+\n+packages:\n+  my-cjs-package@file:packages/my-cjs-package:\n+    resolution: { directory: packages/my-cjs-package, type: directory }\n+\n+  my-esm-package@file:packages/my-esm-package:\n+    resolution: { directory: packages/my-esm-package, type: directory }\n+\n+  my-external-cjs-package@file:packages/my-external-cjs-package:\n+    resolution: { directory: packages/my-external-cjs-package, type: directory }\n+\n+  my-external-esm-package@file:packages/my-external-esm-package:\n+    resolution: { directory: packages/my-external-esm-package, type: directory }\n+\n+snapshots:\n+  my-cjs-package@file:packages/my-cjs-package: {}\n+\n+  my-esm-package@file:packages/my-esm-package: {}\n+\n+  my-external-cjs-package@file:packages/my-external-cjs-package: {}\n+\n+  my-external-esm-package@file:packages/my-external-esm-package: {}"
        },
        {
            "sha": "59ae7f848094b0cd7f035d1ef15dd8ca03b18b9f",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/package.json",
            "status": "added",
            "additions": 33,
            "deletions": 0,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fpackage.json?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,33 @@\n+{\n+  \"name\": \"my-cjs-package\",\n+  \"version\": \"0.0.0\",\n+  \"type\": \"commonjs\",\n+  \"files\": [\n+    \"src\"\n+  ],\n+  \"exports\": {\n+    \"./exports\": {\n+      \"next-js\": {\n+        \"react-server\": \"./src/exports.next.server.cjs\",\n+        \"default\": \"./src/exports.next.default.cjs\"\n+      },\n+      \"default\": {\n+        \"react-server\": \"./src/exports.default.server.cjs\",\n+        \"default\": \"./src/exports.default.default.cjs\"\n+      }\n+    },\n+    \"./imports\": \"./src/imports.cjs\"\n+  },\n+  \"imports\": {\n+    \"#imports\": {\n+      \"next-js\": {\n+        \"react-server\": \"./src/imports/imports.next.server.cjs\",\n+        \"default\": \"./src/imports/imports.next.default.cjs\"\n+      },\n+      \"default\": {\n+        \"react-server\": \"./src/imports/imports.default.server.cjs\",\n+        \"default\": \"./src/imports/imports.default.default.cjs\"\n+      }\n+    }\n+  }\n+}"
        },
        {
            "sha": "45a58cd83380107d157707e4eaeee1611b85cbad",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/exports.default.default.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.default.default.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.default.default.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.default.default.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'EXPORTS DEFAULT CLIENT - Default Export',\n+  named: 'EXPORTS DEFAULT CLIENT - Named Export',\n+}"
        },
        {
            "sha": "2d6f59ebbb89479cebd0c54203a3cc9a047c76f9",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/exports.default.server.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.default.server.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.default.server.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.default.server.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'EXPORTS DEFAULT SERVER - Default Export',\n+  named: 'EXPORTS DEFAULT SERVER - Named Export',\n+}"
        },
        {
            "sha": "fc69523910f805be8c4c8b627cc817e68b03f334",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/exports.next.default.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.next.default.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.next.default.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.next.default.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'EXPORTS NEXT CLIENT - Default Export',\n+  named: 'EXPORTS NEXT CLIENT - Named Export',\n+}"
        },
        {
            "sha": "4ad43ae403c565e86258bc732d091c847c8b11a8",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/exports.next.server.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.next.server.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.next.server.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fexports.next.server.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'EXPORTS NEXT SERVER - Default Export',\n+  named: 'EXPORTS NEXT SERVER - Named Export',\n+}"
        },
        {
            "sha": "191d7e5b51959e5f8de8cef762321abf56783593",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/imports.cjs",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,3 @@\n+const Imports = require('#imports')\n+\n+module.exports = Imports"
        },
        {
            "sha": "62f7ceed930146fa8b45a508a5544b1570773350",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/imports/imports.default.default.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.default.default.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.default.default.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.default.default.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'IMPORTS DEFAULT CLIENT - Default Export',\n+  named: 'IMPORTS DEFAULT CLIENT - Named Export',\n+}"
        },
        {
            "sha": "4261b3410330b682ae01d2423dbc87ac163a074a",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/imports/imports.default.server.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.default.server.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.default.server.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.default.server.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'IMPORTS DEFAULT SERVER - Default Export',\n+  named: 'IMPORTS DEFAULT SERVER - Named Export',\n+}"
        },
        {
            "sha": "815998eff98c4fc11dd2f5fe40854b9adb529181",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/imports/imports.next.default.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.next.default.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.next.default.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.next.default.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'IMPORTS NEXT CLIENT - Default Export',\n+  named: 'IMPORTS NEXT CLIENT - Named Export',\n+}"
        },
        {
            "sha": "6c33abbb3947881748b656e5b77bfe383515df9a",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package/src/imports/imports.next.server.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.next.server.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.next.server.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-cjs-package%40file%2Bpackages%2Bmy-cjs-package%2Fnode_modules%2Fmy-cjs-package%2Fsrc%2Fimports%2Fimports.next.server.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'IMPORTS NEXT SERVER - Default Export',\n+  named: 'IMPORTS NEXT SERVER - Named Export',\n+}"
        },
        {
            "sha": "20304f95451d7b78cd7c3ecf839a2264b75d56f0",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/package.json",
            "status": "added",
            "additions": 33,
            "deletions": 0,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fpackage.json?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,33 @@\n+{\n+  \"name\": \"my-esm-package\",\n+  \"version\": \"0.0.0\",\n+  \"type\": \"module\",\n+  \"files\": [\n+    \"src\"\n+  ],\n+  \"exports\": {\n+    \"./exports\": {\n+      \"next-js\": {\n+        \"react-server\": \"./src/exports.next.server.mjs\",\n+        \"default\": \"./src/exports.next.default.mjs\"\n+      },\n+      \"default\": {\n+        \"react-server\": \"./src/exports.default.server.mjs\",\n+        \"default\": \"./src/exports.default.default.mjs\"\n+      }\n+    },\n+    \"./imports\": \"./src/imports.mjs\"\n+  },\n+  \"imports\": {\n+    \"#imports\": {\n+      \"next-js\": {\n+        \"react-server\": \"./src/imports/imports.next.server.mjs\",\n+        \"default\": \"./src/imports/imports.next.default.mjs\"\n+      },\n+      \"default\": {\n+        \"react-server\": \"./src/imports/imports.default.server.mjs\",\n+        \"default\": \"./src/imports/imports.default.default.mjs\"\n+      }\n+    }\n+  }\n+}"
        },
        {
            "sha": "ec909bf9dc15a43c767a5314ec1f195c4fc5983d",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/exports.default.default.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.default.default.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.default.default.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.default.default.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'EXPORTS DEFAULT CLIENT - Default Export'\n+export const named = 'EXPORTS DEFAULT CLIENT - Named Export'"
        },
        {
            "sha": "ad00e9c4e124d32e647ef4b50fbf7a1bc11e2fc2",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/exports.default.server.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.default.server.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.default.server.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.default.server.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'EXPORTS DEFAULT SERVER - Default Export'\n+export const named = 'EXPORTS DEFAULT SERVER - Named Export'"
        },
        {
            "sha": "34fc7f153825182a27d65e99b9a3c13fdd860c4c",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/exports.next.default.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.next.default.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.next.default.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.next.default.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'EXPORTS NEXT CLIENT - Default Export'\n+export const named = 'EXPORTS NEXT CLIENT - Named Export'"
        },
        {
            "sha": "ca015bd5f5e8b4d9434f41414db438b94d1481a7",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/exports.next.server.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.next.server.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.next.server.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fexports.next.server.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'EXPORTS NEXT SERVER - Default Export'\n+export const named = 'EXPORTS NEXT SERVER - Named Export'"
        },
        {
            "sha": "e825df4e2a363fb738549d384ae896a627612d9f",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/imports.mjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+import Imports from '#imports'\n+\n+export * from '#imports'\n+export default Imports"
        },
        {
            "sha": "d0fa994de0f953f315a80a947cd69e5f11eaa8d2",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/imports/imports.default.default.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.default.default.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.default.default.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.default.default.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'IMPORTS DEFAULT CLIENT - Default Export'\n+export const named = 'IMPORTS DEFAULT CLIENT - Named Export'"
        },
        {
            "sha": "76dc2fcb78270f344f1c3c0109a4c7bc2e80a503",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/imports/imports.default.server.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.default.server.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.default.server.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.default.server.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'IMPORTS DEFAULT SERVER - Default Export'\n+export const named = 'IMPORTS DEFAULT SERVER - Named Export'"
        },
        {
            "sha": "6eded42f2bbc7bce856e7390e91e1d94c440dd82",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/imports/imports.next.default.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.next.default.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.next.default.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.next.default.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'IMPORTS NEXT CLIENT - Default Export'\n+export const named = 'IMPORTS NEXT CLIENT - Named Export'"
        },
        {
            "sha": "1c90eea9ed645bf83687001e8bc6ef91a12641bc",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package/src/imports/imports.next.server.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.next.server.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.next.server.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-esm-package%40file%2Bpackages%2Bmy-esm-package%2Fnode_modules%2Fmy-esm-package%2Fsrc%2Fimports%2Fimports.next.server.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'IMPORTS NEXT SERVER - Default Export'\n+export const named = 'IMPORTS NEXT SERVER - Named Export'"
        },
        {
            "sha": "7d9c81a5e6b30b2415844628d57046e75e51a542",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/package.json",
            "status": "added",
            "additions": 33,
            "deletions": 0,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fpackage.json?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,33 @@\n+{\n+  \"name\": \"my-external-cjs-package\",\n+  \"version\": \"0.0.0\",\n+  \"type\": \"commonjs\",\n+  \"files\": [\n+    \"src\"\n+  ],\n+  \"exports\": {\n+    \"./exports\": {\n+      \"next-js\": {\n+        \"react-server\": \"./src/exports.next.server.cjs\",\n+        \"default\": \"./src/exports.next.default.cjs\"\n+      },\n+      \"default\": {\n+        \"react-server\": \"./src/exports.default.server.cjs\",\n+        \"default\": \"./src/exports.default.default.cjs\"\n+      }\n+    },\n+    \"./imports\": \"./src/imports.cjs\"\n+  },\n+  \"imports\": {\n+    \"#imports\": {\n+      \"next-js\": {\n+        \"react-server\": \"./src/imports/imports.next.server.cjs\",\n+        \"default\": \"./src/imports/imports.next.default.cjs\"\n+      },\n+      \"default\": {\n+        \"react-server\": \"./src/imports/imports.default.server.cjs\",\n+        \"default\": \"./src/imports/imports.default.default.cjs\"\n+      }\n+    }\n+  }\n+}"
        },
        {
            "sha": "45a58cd83380107d157707e4eaeee1611b85cbad",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/exports.default.default.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.default.default.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.default.default.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.default.default.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'EXPORTS DEFAULT CLIENT - Default Export',\n+  named: 'EXPORTS DEFAULT CLIENT - Named Export',\n+}"
        },
        {
            "sha": "2d6f59ebbb89479cebd0c54203a3cc9a047c76f9",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/exports.default.server.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.default.server.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.default.server.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.default.server.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'EXPORTS DEFAULT SERVER - Default Export',\n+  named: 'EXPORTS DEFAULT SERVER - Named Export',\n+}"
        },
        {
            "sha": "fc69523910f805be8c4c8b627cc817e68b03f334",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/exports.next.default.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.next.default.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.next.default.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.next.default.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'EXPORTS NEXT CLIENT - Default Export',\n+  named: 'EXPORTS NEXT CLIENT - Named Export',\n+}"
        },
        {
            "sha": "4ad43ae403c565e86258bc732d091c847c8b11a8",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/exports.next.server.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.next.server.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.next.server.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fexports.next.server.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'EXPORTS NEXT SERVER - Default Export',\n+  named: 'EXPORTS NEXT SERVER - Named Export',\n+}"
        },
        {
            "sha": "191d7e5b51959e5f8de8cef762321abf56783593",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/imports.cjs",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,3 @@\n+const Imports = require('#imports')\n+\n+module.exports = Imports"
        },
        {
            "sha": "62f7ceed930146fa8b45a508a5544b1570773350",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/imports/imports.default.default.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.default.default.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.default.default.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.default.default.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'IMPORTS DEFAULT CLIENT - Default Export',\n+  named: 'IMPORTS DEFAULT CLIENT - Named Export',\n+}"
        },
        {
            "sha": "4261b3410330b682ae01d2423dbc87ac163a074a",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/imports/imports.default.server.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.default.server.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.default.server.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.default.server.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'IMPORTS DEFAULT SERVER - Default Export',\n+  named: 'IMPORTS DEFAULT SERVER - Named Export',\n+}"
        },
        {
            "sha": "815998eff98c4fc11dd2f5fe40854b9adb529181",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/imports/imports.next.default.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.next.default.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.next.default.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.next.default.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'IMPORTS NEXT CLIENT - Default Export',\n+  named: 'IMPORTS NEXT CLIENT - Named Export',\n+}"
        },
        {
            "sha": "6c33abbb3947881748b656e5b77bfe383515df9a",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package/src/imports/imports.next.server.cjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.next.server.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.next.server.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-cjs-package%40file%2Bpackages%2Bmy-external-cjs-package%2Fnode_modules%2Fmy-external-cjs-package%2Fsrc%2Fimports%2Fimports.next.server.cjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+module.exports = {\n+  default: 'IMPORTS NEXT SERVER - Default Export',\n+  named: 'IMPORTS NEXT SERVER - Named Export',\n+}"
        },
        {
            "sha": "f9c597fefb9850bfa97f50ad6595f184f93ec9d6",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/package.json",
            "status": "added",
            "additions": 33,
            "deletions": 0,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fpackage.json?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,33 @@\n+{\n+  \"name\": \"my-external-esm-package\",\n+  \"version\": \"0.0.0\",\n+  \"type\": \"module\",\n+  \"files\": [\n+    \"src\"\n+  ],\n+  \"exports\": {\n+    \"./exports\": {\n+      \"next-js\": {\n+        \"react-server\": \"./src/exports.next.server.mjs\",\n+        \"default\": \"./src/exports.next.default.mjs\"\n+      },\n+      \"default\": {\n+        \"react-server\": \"./src/exports.default.server.mjs\",\n+        \"default\": \"./src/exports.default.default.mjs\"\n+      }\n+    },\n+    \"./imports\": \"./src/imports.mjs\"\n+  },\n+  \"imports\": {\n+    \"#imports\": {\n+      \"next-js\": {\n+        \"react-server\": \"./src/imports/imports.next.server.mjs\",\n+        \"default\": \"./src/imports/imports.next.default.mjs\"\n+      },\n+      \"default\": {\n+        \"react-server\": \"./src/imports/imports.default.server.mjs\",\n+        \"default\": \"./src/imports/imports.default.default.mjs\"\n+      }\n+    }\n+  }\n+}"
        },
        {
            "sha": "ec909bf9dc15a43c767a5314ec1f195c4fc5983d",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/exports.default.default.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.default.default.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.default.default.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.default.default.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'EXPORTS DEFAULT CLIENT - Default Export'\n+export const named = 'EXPORTS DEFAULT CLIENT - Named Export'"
        },
        {
            "sha": "ad00e9c4e124d32e647ef4b50fbf7a1bc11e2fc2",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/exports.default.server.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.default.server.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.default.server.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.default.server.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'EXPORTS DEFAULT SERVER - Default Export'\n+export const named = 'EXPORTS DEFAULT SERVER - Named Export'"
        },
        {
            "sha": "34fc7f153825182a27d65e99b9a3c13fdd860c4c",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/exports.next.default.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.next.default.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.next.default.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.next.default.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'EXPORTS NEXT CLIENT - Default Export'\n+export const named = 'EXPORTS NEXT CLIENT - Named Export'"
        },
        {
            "sha": "ca015bd5f5e8b4d9434f41414db438b94d1481a7",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/exports.next.server.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.next.server.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.next.server.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fexports.next.server.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'EXPORTS NEXT SERVER - Default Export'\n+export const named = 'EXPORTS NEXT SERVER - Named Export'"
        },
        {
            "sha": "e825df4e2a363fb738549d384ae896a627612d9f",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/imports.mjs",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,4 @@\n+import Imports from '#imports'\n+\n+export * from '#imports'\n+export default Imports"
        },
        {
            "sha": "d0fa994de0f953f315a80a947cd69e5f11eaa8d2",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/imports/imports.default.default.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.default.default.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.default.default.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.default.default.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'IMPORTS DEFAULT CLIENT - Default Export'\n+export const named = 'IMPORTS DEFAULT CLIENT - Named Export'"
        },
        {
            "sha": "76dc2fcb78270f344f1c3c0109a4c7bc2e80a503",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/imports/imports.default.server.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.default.server.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.default.server.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.default.server.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'IMPORTS DEFAULT SERVER - Default Export'\n+export const named = 'IMPORTS DEFAULT SERVER - Named Export'"
        },
        {
            "sha": "6eded42f2bbc7bce856e7390e91e1d94c440dd82",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/imports/imports.next.default.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.next.default.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.next.default.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.next.default.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'IMPORTS NEXT CLIENT - Default Export'\n+export const named = 'IMPORTS NEXT CLIENT - Named Export'"
        },
        {
            "sha": "1c90eea9ed645bf83687001e8bc6ef91a12641bc",
            "filename": "test/e2e/app-dir/next-condition/node_modules/.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package/src/imports/imports.next.server.mjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.next.server.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.next.server.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2F.pnpm%2Fmy-external-esm-package%40file%2Bpackages%2Bmy-external-esm-package%2Fnode_modules%2Fmy-external-esm-package%2Fsrc%2Fimports%2Fimports.next.server.mjs?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1,2 @@\n+export default 'IMPORTS NEXT SERVER - Default Export'\n+export const named = 'IMPORTS NEXT SERVER - Named Export'"
        },
        {
            "sha": "de2a86f67f056eb318cda880cba3fd93a0ab3b7d",
            "filename": "test/e2e/app-dir/next-condition/node_modules/my-cjs-package",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-cjs-package",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-cjs-package",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-cjs-package?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+.pnpm/my-cjs-package@file+packages+my-cjs-package/node_modules/my-cjs-package\n\\ No newline at end of file"
        },
        {
            "sha": "47a792e747e8568d5d3b0a000175d20399b12980",
            "filename": "test/e2e/app-dir/next-condition/node_modules/my-esm-package",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-esm-package",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-esm-package",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-esm-package?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+.pnpm/my-esm-package@file+packages+my-esm-package/node_modules/my-esm-package\n\\ No newline at end of file"
        },
        {
            "sha": "625536cbcf77e1488e562c0662e67a02a8b2968b",
            "filename": "test/e2e/app-dir/next-condition/node_modules/my-external-cjs-package",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-external-cjs-package",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-external-cjs-package",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-external-cjs-package?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+.pnpm/my-external-cjs-package@file+packages+my-external-cjs-package/node_modules/my-external-cjs-package\n\\ No newline at end of file"
        },
        {
            "sha": "1845ad92bd16df08592980540fc87a1f6f331b5a",
            "filename": "test/e2e/app-dir/next-condition/node_modules/my-external-esm-package",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-external-esm-package",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-external-esm-package",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnode_modules%2Fmy-external-esm-package?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -0,0 +1 @@\n+.pnpm/my-external-esm-package@file+packages+my-external-esm-package/node_modules/my-external-esm-package\n\\ No newline at end of file"
        },
        {
            "sha": "6f22894553f326898a7118dff26f43db280a6fc4",
            "filename": "test/e2e/app-dir/next-condition/package.json",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/db19303fb7c17bddf32f1aaff11a72f64d427546/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/db19303fb7c17bddf32f1aaff11a72f64d427546/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fpackage.json?ref=db19303fb7c17bddf32f1aaff11a72f64d427546",
            "patch": "@@ -1,8 +0,0 @@\n-{\n-  \"dependencies\": {\n-    \"my-cjs-package\": \"file:./packages/my-cjs-package\",\n-    \"my-esm-package\": \"file:./packages/my-esm-package\",\n-    \"my-external-cjs-package\": \"file:./packages/my-external-cjs-package\",\n-    \"my-external-esm-package\": \"file:./packages/my-external-esm-package\"\n-  }\n-}"
        },
        {
            "sha": "c8de248b1eeae5fc400f0b547018c6f31bfcb74e",
            "filename": "test/lib/next-modes/base.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Flib%2Fnext-modes%2Fbase.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1b45163bce3dab30d7a79dff95238b84016b54c2/test%2Flib%2Fnext-modes%2Fbase.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-modes%2Fbase.ts?ref=1b45163bce3dab30d7a79dff95238b84016b54c2",
            "patch": "@@ -156,6 +156,15 @@ export class NextInstance {\n           await fs.mkdir(path.dirname(outputFilename), { recursive: true })\n           await fs.writeFile(outputFilename, item)\n         } else {\n+          try {\n+            const existingStat = await fs.lstat(outputFilename)\n+            if (existingStat.isFile() || existingStat.isSymbolicLink()) {\n+              await fs.unlink(outputFilename)\n+            }\n+          } catch {\n+            // file might not exist or can't be unliked. carry on\n+          }\n+\n           await fs.cp(item.fsPath, outputFilename, { recursive: true })\n         }\n       }"
        }
    ],
    "stats": {
        "total": 689,
        "additions": 672,
        "deletions": 17
    }
}