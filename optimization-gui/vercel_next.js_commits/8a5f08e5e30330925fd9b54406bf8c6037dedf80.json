{
    "author": "bgw",
    "message": "chore(HMR clients): Fix a bunch of typescript errors by including the appropriate webpack type declarations (#77207)\n\nAs the title says.\n\nTypes are defined here: https://github.com/webpack/webpack/blob/3aa6b6bc3a6452b36df8eb8324b466a7d218e143/module.d.ts",
    "sha": "8a5f08e5e30330925fd9b54406bf8c6037dedf80",
    "files": [
        {
            "sha": "914d105696d6ca82189886bd21f581625319a456",
            "filename": "packages/next/src/build/webpack/loaders/next-style-loader/runtime/injectStylesIntoLinkTag.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-style-loader%2Fruntime%2FinjectStylesIntoLinkTag.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-style-loader%2Fruntime%2FinjectStylesIntoLinkTag.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-style-loader%2Fruntime%2FinjectStylesIntoLinkTag.ts?ref=8a5f08e5e30330925fd9b54406bf8c6037dedf80",
            "patch": "@@ -1,3 +1,5 @@\n+/// <reference types=\"webpack/module.d.ts\" />\n+\n const getTarget = (() => {\n   const memo: any = {}\n \n@@ -27,8 +29,6 @@ const getTarget = (() => {\n   }\n })()\n \n-declare let __webpack_nonce__: string\n-\n module.exports = (url: any, options: any) => {\n   options = options || {}\n   options.attributes ="
        },
        {
            "sha": "baf8aff73e8b6891b58af1674eeb0e8be5f38765",
            "filename": "packages/next/src/build/webpack/loaders/next-style-loader/runtime/injectStylesIntoStyleTag.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-style-loader%2Fruntime%2FinjectStylesIntoStyleTag.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-style-loader%2Fruntime%2FinjectStylesIntoStyleTag.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-style-loader%2Fruntime%2FinjectStylesIntoStyleTag.ts?ref=8a5f08e5e30330925fd9b54406bf8c6037dedf80",
            "patch": "@@ -1,3 +1,5 @@\n+/// <reference types=\"webpack/module.d.ts\" />\n+\n const isOldIE = (function isOldIE() {\n   let memo: any\n "
        },
        {
            "sha": "0bd527145464ddc571b5bcbc59b155614b9e969d",
            "filename": "packages/next/src/client/components/react-dev-overlay/app/hot-reloader-client.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx?ref=8a5f08e5e30330925fd9b54406bf8c6037dedf80",
            "patch": "@@ -1,3 +1,5 @@\n+/// <reference types=\"webpack/module.d.ts\" />\n+\n import type { ReactNode } from 'react'\n import { useCallback, useEffect, startTransition, useMemo, useRef } from 'react'\n import stripAnsi from 'next/dist/compiled/strip-ansi'\n@@ -120,7 +122,6 @@ function isUpdateAvailable() {\n \n // Webpack disallows updates in other states.\n function canApplyUpdates() {\n-  // @ts-expect-error module.hot exists\n   return module.hot.status() === 'idle'\n }\n function afterApplyUpdates(fn: any) {\n@@ -129,12 +130,10 @@ function afterApplyUpdates(fn: any) {\n   } else {\n     function handler(status: any) {\n       if (status === 'idle') {\n-        // @ts-expect-error module.hot exists\n         module.hot.removeStatusHandler(handler)\n         fn()\n       }\n     }\n-    // @ts-expect-error module.hot exists\n     module.hot.addStatusHandler(handler)\n   }\n }\n@@ -213,7 +212,6 @@ function tryApplyUpdates(\n   }\n \n   // https://webpack.js.org/api/hot-module-replacement/#check\n-  // @ts-expect-error module.hot exists\n   module.hot\n     .check(/* autoApply */ false)\n     .then((updatedModules: any[] | null) => {\n@@ -226,7 +224,6 @@ function tryApplyUpdates(\n         onBeforeUpdate(hasUpdates)\n       }\n       // https://webpack.js.org/api/hot-module-replacement/#apply\n-      // @ts-expect-error module.hot exists\n       return module.hot.apply()\n     })\n     .then("
        },
        {
            "sha": "0c8596e426a17da5a039e777c6087cdd0d82f369",
            "filename": "packages/next/src/client/components/react-dev-overlay/pages/hot-reloader-client.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 7,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhot-reloader-client.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhot-reloader-client.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhot-reloader-client.ts?ref=8a5f08e5e30330925fd9b54406bf8c6037dedf80",
            "patch": "@@ -28,6 +28,8 @@\n // can be found here:\n // https://github.com/facebook/create-react-app/blob/v3.4.1/packages/react-dev-utils/webpackHotDevClient.js\n \n+/// <reference types=\"webpack/module.d.ts\" />\n+\n import {\n   register,\n   onBuildError,\n@@ -67,7 +69,6 @@ import {\n // https://github.com/glenjamin/webpack-hot-middleware\n \n declare global {\n-  const __webpack_hash__: string\n   interface Window {\n     __nextDevClientId: number\n   }\n@@ -406,7 +407,6 @@ function isUpdateAvailable() {\n \n // Webpack disallows updates in other states.\n function canApplyUpdates() {\n-  // @ts-expect-error TODO: module.hot exists but type needs to be added. Can't use `as any` here as webpack parses for `module.hot` calls.\n   return module.hot.status() === 'idle'\n }\n function afterApplyUpdates(fn: () => void) {\n@@ -415,12 +415,10 @@ function afterApplyUpdates(fn: () => void) {\n   } else {\n     function handler(status: string) {\n       if (status === 'idle') {\n-        // @ts-expect-error TODO: module.hot exists but type needs to be added. Can't use `as any` here as webpack parses for `module.hot` calls.\n         module.hot.removeStatusHandler(handler)\n         fn()\n       }\n     }\n-    // @ts-expect-error TODO: module.hot exists but type needs to be added. Can't use `as any` here as webpack parses for `module.hot` calls.\n     module.hot.addStatusHandler(handler)\n   }\n }\n@@ -430,7 +428,6 @@ function tryApplyUpdates(\n   onBeforeHotUpdate: ((updatedModules: string[]) => unknown) | undefined,\n   onHotUpdateSuccess: (updatedModules: string[]) => unknown\n ) {\n-  // @ts-expect-error TODO: module.hot exists but type needs to be added. Can't use `as any` here as webpack parses for `module.hot` calls.\n   if (!module.hot) {\n     // HotModuleReplacementPlugin is not in Webpack configuration.\n     console.error('HotModuleReplacementPlugin is not in Webpack configuration.')\n@@ -480,7 +477,6 @@ function tryApplyUpdates(\n   }\n \n   // https://webpack.js.org/api/hot-module-replacement/#check\n-  // @ts-expect-error TODO: module.hot exists but type needs to be added. Can't use `as any` here as webpack parses for `module.hot` calls.\n   module.hot\n     .check(/* autoApply */ false)\n     .then((updatedModules: any) => {\n@@ -491,7 +487,6 @@ function tryApplyUpdates(\n       if (typeof onBeforeHotUpdate === 'function') {\n         onBeforeHotUpdate(updatedModules)\n       }\n-      // @ts-expect-error TODO: module.hot exists but type needs to be added. Can't use `as any` here as webpack parses for `module.hot` calls.\n       return module.hot.apply()\n     })\n     .then("
        },
        {
            "sha": "a4f0cf529db8cb0c1efc0201394e97c520092061",
            "filename": "packages/next/src/client/dev/amp-dev.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts?ref=8a5f08e5e30330925fd9b54406bf8c6037dedf80",
            "patch": "@@ -8,9 +8,7 @@ import {\n import { HMR_ACTIONS_SENT_TO_BROWSER } from '../../server/dev/hot-reloader-types'\n import { reportInvalidHmrMessage } from '../components/react-dev-overlay/shared'\n \n-declare global {\n-  const __webpack_runtime_id__: string\n-}\n+/// <reference types=\"webpack/module.d.ts\" />\n \n const data = JSON.parse(\n   (document.getElementById('__NEXT_DATA__') as any).textContent\n@@ -35,7 +33,6 @@ function isUpdateAvailable() {\n \n // Webpack disallows updates in other states.\n function canApplyUpdates() {\n-  // @ts-expect-error TODO: module.hot exists but type needs to be added. Can't use `as any` here as webpack parses for `module.hot` calls.\n   return module.hot.status() === 'idle'\n }\n "
        },
        {
            "sha": "a54babc5f75851e73fdd18dfb668f7430eb5a8d3",
            "filename": "packages/next/src/pages/_document.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fpages%2F_document.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8a5f08e5e30330925fd9b54406bf8c6037dedf80/packages%2Fnext%2Fsrc%2Fpages%2F_document.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fpages%2F_document.tsx?ref=8a5f08e5e30330925fd9b54406bf8c6037dedf80",
            "patch": "@@ -1,3 +1,5 @@\n+/// <reference types=\"webpack/module.d.ts\" />\n+\n import React, { type JSX } from 'react'\n import { NEXT_BUILTIN_DOCUMENT } from '../shared/lib/constants'\n import type {\n@@ -214,10 +216,10 @@ function getPreNextWorkerScripts(context: HtmlProps, props: OriginProps) {\n   if (!nextScriptWorkers || process.env.NEXT_RUNTIME === 'edge') return null\n \n   try {\n-    let {\n-      partytownSnippet,\n-      // @ts-ignore: Prevent webpack from processing this require\n-    } = __non_webpack_require__('@builder.io/partytown/integration'!)\n+    // @ts-expect-error: Prevent webpack from processing this require\n+    let { partytownSnippet } = __non_webpack_require__(\n+      '@builder.io/partytown/integration'!\n+    )\n \n     const children = Array.isArray(props.children)\n       ? props.children"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 15,
        "deletions": 22
    }
}