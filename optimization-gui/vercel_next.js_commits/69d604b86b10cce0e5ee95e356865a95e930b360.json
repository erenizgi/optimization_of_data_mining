{
    "author": "ztanner",
    "message": "temporarily disable flaky deploy test (#83032)\n\nTemporarily disabling this to prevent failing test noise while\ninvestigating the discrepancy between start/deploy.",
    "sha": "69d604b86b10cce0e5ee95e356865a95e930b360",
    "files": [
        {
            "sha": "da6bad38c4ffd8b94fc568dac436bd6aa0442c58",
            "filename": "test/e2e/app-dir/actions/app-action.test.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 17,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/69d604b86b10cce0e5ee95e356865a95e930b360/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/69d604b86b10cce0e5ee95e356865a95e930b360/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Factions%2Fapp-action.test.ts?ref=69d604b86b10cce0e5ee95e356865a95e930b360",
            "patch": "@@ -1907,29 +1907,32 @@ describe('app-dir action handling', () => {\n   })\n \n   describe('action discarding', () => {\n-    it('should not trigger a refresh for a server action that gets discarded due to a navigation (without revalidation)', async () => {\n-      let browser = await next.browser('/action-discarding')\n-      await browser.waitForIdleNetwork()\n-      const initialRandomNumber = await browser\n-        .elementByCss('#cached-random')\n-        .text()\n+    // TODO: Investigate flaky behavior when deployed\n+    if (!isNextDeploy) {\n+      it('should not trigger a refresh for a server action that gets discarded due to a navigation (without revalidation)', async () => {\n+        let browser = await next.browser('/action-discarding')\n+        await browser.waitForIdleNetwork()\n+        const initialRandomNumber = await browser\n+          .elementByCss('#cached-random')\n+          .text()\n \n-      await browser.elementByCss('#slow-action').click()\n+        await browser.elementByCss('#slow-action').click()\n \n-      // navigate to destination\n-      await browser.elementByCss('#navigate-destination').click()\n+        // navigate to destination\n+        await browser.elementByCss('#navigate-destination').click()\n \n-      // wait for the 2s action to finish\n-      await waitFor(2000)\n+        // wait for the 2s action to finish\n+        await waitFor(2000)\n \n-      await retry(async () => {\n-        const newRandomNumber = await browser\n-          .elementByCss('#cached-random')\n-          .text()\n+        await retry(async () => {\n+          const newRandomNumber = await browser\n+            .elementByCss('#cached-random')\n+            .text()\n \n-        expect(newRandomNumber).toBe(initialRandomNumber)\n+          expect(newRandomNumber).toBe(initialRandomNumber)\n+        })\n       })\n-    })\n+    }\n \n     it('should trigger a refresh for a server action that gets discarded due to a navigation (with revalidation)', async () => {\n       let browser = await next.browser('/action-discarding')"
        }
    ],
    "stats": {
        "total": 37,
        "additions": 20,
        "deletions": 17
    }
}