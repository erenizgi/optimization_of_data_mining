{
    "author": "mischnic",
    "message": "Turbopack: don't fail for parse errors in tracing (#84408)\n\nTurns string decode and parse errors into warnings for extensionless files when in tracing mode.\r\n\r\nA `require(dynamic)` inside of node_modules can easily end up pulling in extensionless files such as binary files, or `LICENSE`, which would fail the build.",
    "sha": "7a49afcf8af542fed04946ce5632c27304bc3f8b",
    "files": [
        {
            "sha": "b4aa573778e9b415f87fce11d99827632419b44d",
            "filename": "crates/next-core/src/segment_config.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/crates%2Fnext-core%2Fsrc%2Fsegment_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/crates%2Fnext-core%2Fsrc%2Fsegment_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fsegment_config.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -395,6 +395,7 @@ pub async fn parse_segment_config_from_source(\n             EcmascriptModuleAssetType::Ecmascript\n         },\n         EcmascriptInputTransforms::empty(),\n+        false,\n     )\n     .await?;\n "
        },
        {
            "sha": "0facb2f8c269ddfb2edd99e8263b568745136593",
            "filename": "test/production/standalone-mode/tracing-static-files/app/layout.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fapp%2Flayout.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fapp%2Flayout.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fapp%2Flayout.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/app/layout.js"
        },
        {
            "sha": "54012bb78f9a0f1ccc35500e112388ee036d7e52",
            "filename": "test/production/standalone-mode/tracing-static-files/app/page.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fapp%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fapp%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fapp%2Fpage.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/app/page.js"
        },
        {
            "sha": "ce013625030ba8dba906f756967f9e9ca394464a",
            "filename": "test/production/standalone-mode/tracing-static-files/data/static-from-app-cwd.txt",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-cwd.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-cwd.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-cwd.txt?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/data/static-from-app-cwd.txt"
        },
        {
            "sha": "ce013625030ba8dba906f756967f9e9ca394464a",
            "filename": "test/production/standalone-mode/tracing-static-files/data/static-from-app-rel-join.txt",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-rel-join.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-rel-join.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-rel-join.txt?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/data/static-from-app-rel-join.txt"
        },
        {
            "sha": "ce013625030ba8dba906f756967f9e9ca394464a",
            "filename": "test/production/standalone-mode/tracing-static-files/data/static-from-app-rel-read.txt",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-rel-read.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-rel-read.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-app-rel-read.txt?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/data/static-from-app-rel-read.txt"
        },
        {
            "sha": "ce013625030ba8dba906f756967f9e9ca394464a",
            "filename": "test/production/standalone-mode/tracing-static-files/data/static-from-pkg.txt",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-pkg.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-pkg.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fdata%2Fstatic-from-pkg.txt?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/data/static-from-pkg.txt"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "test/production/standalone-mode/tracing-static-files/foo/foo.txt",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Ffoo.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Ffoo.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Ffoo.txt?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/foo/foo.txt"
        },
        {
            "sha": "30b23bc2d726bf9da49ec766f7812325674ed8da",
            "filename": "test/production/standalone-mode/tracing-static-files/foo/index.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Findex.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/foo/index.js"
        },
        {
            "sha": "1aea491022211e28c1c4dd68868236fd015138a3",
            "filename": "test/production/standalone-mode/tracing-static-files/foo/package.json",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ffoo%2Fpackage.json?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/foo/package.json"
        },
        {
            "sha": "807126e4cf0bf5b1c8c917e6e0148a27331587d1",
            "filename": "test/production/standalone-mode/tracing-static-files/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fnext.config.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/next.config.js"
        },
        {
            "sha": "2511e3bc7558fc3f72727730a56cdf486f449e66",
            "filename": "test/production/standalone-mode/tracing-static-files/package.json",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Fpackage.json?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "previous_filename": "test/production/standalone-mode/tracing/package.json"
        },
        {
            "sha": "8c950fc137127dcb1229009eb2a6568fbdeab198",
            "filename": "test/production/standalone-mode/tracing-static-files/tracing-static-files.test.ts",
            "status": "renamed",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ftracing-static-files.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ftracing-static-files.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-static-files%2Ftracing-static-files.test.ts?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -1,19 +1,23 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-describe('standalone mode - tracing', () => {\n+describe('standalone mode - tracing-static-files', () => {\n   const dependencies = require('./package.json').dependencies\n \n   const { next, skipped } = nextTestSetup({\n     files: __dirname,\n     dependencies,\n     skipDeployment: true,\n+    skipStart: true,\n   })\n \n   if (skipped) {\n     return\n   }\n \n   it('should trace process.cwd calls in node_modules', async () => {\n+    let { exitCode } = await next.build()\n+    expect(exitCode).toBe(0)\n+\n     let trace = await next.readJSON('.next/server/app/page.js.nft.json')\n \n     // should trace process.cwd and relative calls relative to the root\n@@ -31,7 +35,7 @@ describe('standalone mode - tracing', () => {\n     if (process.env.IS_TURBOPACK_TEST) {\n       // Webpack doesn't trace these relative reference\n       expect(trace.files).toContainEqual(\n-        expect.stringMatching(/.*\\/node_modules\\/foo\\/foo.txt/)\n+        expect.stringMatching(/.*\\/node_modules\\/foo\\/foo\\.txt$/)\n       )\n     }\n ",
            "previous_filename": "test/production/standalone-mode/tracing/tracing.test.ts"
        },
        {
            "sha": "0facb2f8c269ddfb2edd99e8263b568745136593",
            "filename": "test/production/standalone-mode/tracing-unparsable/app/layout.js",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fapp%2Flayout.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fapp%2Flayout.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fapp%2Flayout.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Root({ children }) {\n+  return (\n+    <html>\n+      <head></head>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "891ad3a552f4484eefa6de43b4190a8abe96d3bf",
            "filename": "test/production/standalone-mode/tracing-unparsable/app/page.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fapp%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fapp%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fapp%2Fpage.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1,5 @@\n+import foo from 'foo'\n+\n+export default function Page() {\n+  return 'hello ' + foo\n+}"
        },
        {
            "sha": "8aa26455d23acf904be3ed9dfb3a3efe3e49245a",
            "filename": "test/production/standalone-mode/tracing-unparsable/foo/LICENSE",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2FLICENSE",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2FLICENSE",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2FLICENSE?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1,21 @@\n+MIT License\n+\n+Copyright (c) [year] [fullname]\n+\n+Permission is hereby granted, free of charge, to any person obtaining a copy\n+of this software and associated documentation files (the \"Software\"), to deal\n+in the Software without restriction, including without limitation the rights\n+to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+copies of the Software, and to permit persons to whom the Software is\n+furnished to do so, subject to the following conditions:\n+\n+The above copyright notice and this permission notice shall be included in all\n+copies or substantial portions of the Software.\n+\n+THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n+SOFTWARE."
        },
        {
            "sha": "50257b966ecec4bec6c1f5b1d7ac8efb55fe1505",
            "filename": "test/production/standalone-mode/tracing-unparsable/foo/binary",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fbinary",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fbinary",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fbinary?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b"
        },
        {
            "sha": "fd61a3f40c00313cde4da4a2ca5a0dff7f86340f",
            "filename": "test/production/standalone-mode/tracing-unparsable/foo/index.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Findex.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1,5 @@\n+function doRequire(mod) {\n+  return require('./' + mod)\n+}\n+\n+module.exports = doRequire('value.js')"
        },
        {
            "sha": "1aea491022211e28c1c4dd68868236fd015138a3",
            "filename": "test/production/standalone-mode/tracing-unparsable/foo/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fpackage.json?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"name\": \"foo\",\n+  \"version\": \"0.0.0\"\n+}"
        },
        {
            "sha": "b0f64cecc428dedf98384fd98505582e3515232f",
            "filename": "test/production/standalone-mode/tracing-unparsable/foo/value.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fvalue.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fvalue.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ffoo%2Fvalue.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'foo value'"
        },
        {
            "sha": "842df636765431641c9b3bff7a384958f2d0c0b7",
            "filename": "test/production/standalone-mode/tracing-unparsable/next.config.js",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fnext.config.js?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1,8 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+const nextConfig = {\n+  serverExternalPackages: ['foo'],\n+}\n+\n+module.exports = nextConfig"
        },
        {
            "sha": "2511e3bc7558fc3f72727730a56cdf486f449e66",
            "filename": "test/production/standalone-mode/tracing-unparsable/package.json",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Fpackage.json?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"dependencies\": {\n+    \"foo\": \"file:./foo\"\n+  }\n+}"
        },
        {
            "sha": "ffee7fe396d1b5fdc64e5b8e5ea68e9cc38f23c4",
            "filename": "test/production/standalone-mode/tracing-unparsable/tracing-unparsable.test.ts",
            "status": "added",
            "additions": 39,
            "deletions": 0,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ftracing-unparsable.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ftracing-unparsable.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Ftracing-unparsable%2Ftracing-unparsable.test.ts?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -0,0 +1,39 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('standalone mode - tracing-unparsable', () => {\n+  const dependencies = require('./package.json').dependencies\n+\n+  const { next, skipped } = nextTestSetup({\n+    files: __dirname,\n+    dependencies,\n+    skipDeployment: true,\n+    skipStart: true,\n+  })\n+\n+  if (skipped) {\n+    return\n+  }\n+\n+  it('should not error when dynamic require includes non-JS files', async () => {\n+    let { exitCode } = await next.build()\n+    expect(exitCode).toBe(0)\n+\n+    let trace = await next.readJSON('.next/server/app/page.js.nft.json')\n+\n+    expect(trace.files).toContainEqual(\n+      expect.stringMatching(/.*\\/node_modules\\/foo\\/LICENSE$/)\n+    )\n+    expect(trace.files).toContainEqual(\n+      expect.stringMatching(/.*\\/node_modules\\/foo\\/binary$/)\n+    )\n+    expect(trace.files).toContainEqual(\n+      expect.stringMatching(/.*\\/node_modules\\/foo\\/index\\.js$/)\n+    )\n+    expect(trace.files).toContainEqual(\n+      expect.stringMatching(/.*\\/node_modules\\/foo\\/value\\.js$/)\n+    )\n+    expect(trace.files).toContainEqual(\n+      expect.stringMatching(/.*\\/node_modules\\/foo\\/package\\.json$/)\n+    )\n+  })\n+})"
        },
        {
            "sha": "e24447c5d457ab1bf1c85002f5db92c61e5c8727",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 5,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -277,6 +277,8 @@ pub struct EcmascriptOptions {\n pub enum EcmascriptModuleAssetType {\n     /// Module with EcmaScript code\n     Ecmascript,\n+    /// Module with (presumed) EcmaScript code, but it was extensionless\n+    EcmascriptExtensionless,\n     /// Module with TypeScript code without types\n     Typescript {\n         // parse JSX syntax.\n@@ -292,6 +294,9 @@ impl Display for EcmascriptModuleAssetType {\n     fn fmt(&self, f: &mut Formatter<'_>) -> std::fmt::Result {\n         match self {\n             EcmascriptModuleAssetType::Ecmascript => write!(f, \"ecmascript\"),\n+            EcmascriptModuleAssetType::EcmascriptExtensionless => {\n+                write!(f, \"ecmascript extensionless\")\n+            }\n             EcmascriptModuleAssetType::Typescript { tsx, analyze_types } => {\n                 write!(f, \"typescript\")?;\n                 if *tsx {\n@@ -489,7 +494,7 @@ impl EcmascriptParsable for EcmascriptModuleAsset {\n     #[turbo_tasks::function]\n     async fn failsafe_parse(self: Vc<Self>) -> Result<Vc<ParseResult>> {\n         let this = self.await?;\n-        let real_result = this.parse();\n+        let real_result = this.parse().await?;\n         if this.options.await?.keep_last_successful_parse {\n             let real_result_value = real_result.await?;\n             let result_value = if matches!(*real_result_value, ParseResult::Ok { .. }) {\n@@ -532,7 +537,7 @@ impl EcmascriptAnalyzable for EcmascriptModuleAsset {\n     ) -> Result<Vc<EcmascriptModuleContent>> {\n         let this = self.await?;\n \n-        let parsed = this.parse();\n+        let parsed = this.parse().await?;\n \n         Ok(EcmascriptModuleContent::new_without_analysis(\n             parsed,\n@@ -548,7 +553,7 @@ impl EcmascriptAnalyzable for EcmascriptModuleAsset {\n         chunking_context: ResolvedVc<Box<dyn ChunkingContext>>,\n         async_module_info: Option<ResolvedVc<AsyncModuleInfo>>,\n     ) -> Result<Vc<EcmascriptModuleContentOptions>> {\n-        let parsed = self.await?.parse().to_resolved().await?;\n+        let parsed = self.await?.parse().await?.to_resolved().await?;\n \n         let analyze = self.analyze();\n         let analyze_ref = analyze.await?;\n@@ -681,8 +686,13 @@ impl EcmascriptModuleAsset {\n }\n \n impl EcmascriptModuleAsset {\n-    pub fn parse(&self) -> Vc<ParseResult> {\n-        parse(*self.source, self.ty, *self.transforms)\n+    pub async fn parse(&self) -> Result<Vc<ParseResult>> {\n+        Ok(parse(\n+            *self.source,\n+            self.ty,\n+            *self.transforms,\n+            self.options.await?.analyze_mode == AnalyzeMode::Tracing,\n+        ))\n     }\n \n     #[tracing::instrument(level = \"trace\", skip_all)]"
        },
        {
            "sha": "2f802e8a079ff40787e67dbb05bcdee5a261f57a",
            "filename": "turbopack/crates/turbopack-ecmascript/src/parse.rs",
            "status": "modified",
            "additions": 32,
            "deletions": 9,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -173,16 +173,22 @@ pub async fn parse(\n     source: ResolvedVc<Box<dyn Source>>,\n     ty: EcmascriptModuleAssetType,\n     transforms: ResolvedVc<EcmascriptInputTransforms>,\n+    is_external_tracing: bool,\n ) -> Result<Vc<ParseResult>> {\n     let span = tracing::info_span!(\n         \"parse ecmascript\",\n         name = display(source.ident().to_string().await?),\n         ty = display(&ty)\n     );\n \n-    match parse_internal(source, ty, transforms)\n-        .instrument(span)\n-        .await\n+    match parse_internal(\n+        source,\n+        ty,\n+        transforms,\n+        is_external_tracing && matches!(ty, EcmascriptModuleAssetType::EcmascriptExtensionless),\n+    )\n+    .instrument(span)\n+    .await\n     {\n         Ok(result) => Ok(result),\n         Err(error) => Err(error.context(format!(\n@@ -196,6 +202,7 @@ async fn parse_internal(\n     source: ResolvedVc<Box<dyn Source>>,\n     ty: EcmascriptModuleAssetType,\n     transforms: ResolvedVc<EcmascriptInputTransforms>,\n+    loose_errors: bool,\n ) -> Result<Vc<ParseResult>> {\n     let content = source.content();\n     let fs_path = source.ident().path().owned().await?;\n@@ -208,6 +215,11 @@ async fn parse_internal(\n             ReadSourceIssue {\n                 source: IssueSource::from_source_only(source),\n                 error: error.clone(),\n+                severity: if loose_errors {\n+                    IssueSeverity::Warning\n+                } else {\n+                    IssueSeverity::Error\n+                },\n             }\n             .resolved_cell()\n             .emit();\n@@ -234,6 +246,7 @@ async fn parse_internal(\n                             source,\n                             ty,\n                             transforms,\n+                            loose_errors,\n                         )\n                         .await\n                         {\n@@ -254,10 +267,16 @@ async fn parse_internal(\n                         .into();\n                         ReadSourceIssue {\n                             // Technically we could supply byte offsets to the issue source, but\n-                            // that would cause another utf8 error to be produced when we attempt to\n-                            // infer line/column offsets\n+                            // that would cause another utf8 error to be produced when we\n+                            // attempt to infer line/column\n+                            // offsets\n                             source: IssueSource::from_source_only(source),\n                             error: error.clone(),\n+                            severity: if loose_errors {\n+                                IssueSeverity::Warning\n+                            } else {\n+                                IssueSeverity::Error\n+                            },\n                         }\n                         .resolved_cell()\n                         .emit();\n@@ -282,6 +301,7 @@ async fn parse_file_content(\n     source: ResolvedVc<Box<dyn Source>>,\n     ty: EcmascriptModuleAssetType,\n     transforms: &[EcmascriptInputTransform],\n+    loose_errors: bool,\n ) -> Result<Vc<ParseResult>> {\n     let source_map: Arc<swc_core::common::SourceMap> = Default::default();\n     let (emitter, collector) = IssueEmitter::new(\n@@ -310,7 +330,9 @@ async fn parse_file_content(\n             let mut parsed_program = {\n                 let lexer = Lexer::new(\n                     match ty {\n-                        EcmascriptModuleAssetType::Ecmascript => Syntax::Es(EsSyntax {\n+                        EcmascriptModuleAssetType::Ecmascript\n+                        | EcmascriptModuleAssetType::EcmascriptExtensionless\n+                        => Syntax::Es(EsSyntax {\n                             jsx: true,\n                             fn_bind: true,\n                             decorators: true,\n@@ -506,15 +528,16 @@ async fn parse_file_content(\n         // Assign the correct globals\n         *g = globals;\n     }\n-    collector.emit().await?;\n-    collector_parse.emit().await?;\n+    collector.emit(loose_errors).await?;\n+    collector_parse.emit(loose_errors).await?;\n     Ok(result.cell())\n }\n \n #[turbo_tasks::value]\n struct ReadSourceIssue {\n     source: IssueSource,\n     error: RcStr,\n+    severity: IssueSeverity,\n }\n \n #[turbo_tasks::value_impl]\n@@ -545,7 +568,7 @@ impl Issue for ReadSourceIssue {\n     }\n \n     fn severity(&self) -> IssueSeverity {\n-        IssueSeverity::Error\n+        self.severity\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "6e54a168741d4c3486cf61ac5f7946da8d243d62",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -530,7 +530,8 @@ async fn analyze_ecmascript_module_internal(\n     let analyze_types = match &ty {\n         EcmascriptModuleAssetType::Typescript { analyze_types, .. } => *analyze_types,\n         EcmascriptModuleAssetType::TypescriptDeclaration => true,\n-        EcmascriptModuleAssetType::Ecmascript => false,\n+        EcmascriptModuleAssetType::Ecmascript\n+        | EcmascriptModuleAssetType::EcmascriptExtensionless => false,\n     };\n \n     // Split out our module part if we have one.\n@@ -1444,7 +1445,7 @@ async fn analyze_ecmascript_module_internal(\n \n     analysis.set_successful(true);\n \n-    collector.emit().await?;\n+    collector.emit(false).await?;\n \n     analysis\n         .build("
        },
        {
            "sha": "6df4baa2e1509202dbea5abd51ee5170ae2540d4",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/locals/module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -100,7 +100,7 @@ impl EcmascriptAnalyzable for EcmascriptModuleLocalsModule {\n     ) -> Result<Vc<EcmascriptModuleContentOptions>> {\n         let exports = self.get_exports().to_resolved().await?;\n         let original_module = self.await?.module;\n-        let parsed = original_module.await?.parse().to_resolved().await?;\n+        let parsed = original_module.await?.parse().await?.to_resolved().await?;\n \n         let analyze = original_module.analyze();\n         let analyze_result = analyze.await?;"
        },
        {
            "sha": "fdcf305095829d151ce9937efae322a0c54c4fc1",
            "filename": "turbopack/crates/turbopack-ecmascript/src/webpack/parse.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fparse.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -190,7 +190,13 @@ pub async fn webpack_runtime(\n     source: Vc<Box<dyn Source>>,\n     transforms: Vc<EcmascriptInputTransforms>,\n ) -> Result<Vc<WebpackRuntime>> {\n-    let parsed = parse(source, EcmascriptModuleAssetType::Ecmascript, transforms).await?;\n+    let parsed = parse(\n+        source,\n+        EcmascriptModuleAssetType::Ecmascript,\n+        transforms,\n+        false,\n+    )\n+    .await?;\n     match &*parsed {\n         ParseResult::Ok {\n             program,"
        },
        {
            "sha": "c821c6473a3f03df4f44213c5c7f7704e3f6959f",
            "filename": "turbopack/crates/turbopack-ecmascript/src/webpack/references.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Freferences.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Freferences.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Freferences.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -26,7 +26,13 @@ pub async fn module_references(\n     runtime: ResolvedVc<WebpackRuntime>,\n     transforms: ResolvedVc<EcmascriptInputTransforms>,\n ) -> Result<Vc<ModuleReferences>> {\n-    let parsed = parse(*source, EcmascriptModuleAssetType::Ecmascript, *transforms).await?;\n+    let parsed = parse(\n+        *source,\n+        EcmascriptModuleAssetType::Ecmascript,\n+        *transforms,\n+        false,\n+    )\n+    .await?;\n     match &*parsed {\n         ParseResult::Ok {\n             program,\n@@ -48,7 +54,7 @@ pub async fn module_references(\n             HANDLER.set(&handler, || {\n                 program.visit_with(&mut visitor);\n             });\n-            collector.emit().await?;\n+            collector.emit(false).await?;\n             Ok(Vc::cell(references))\n         }\n         ParseResult::Unparsable { .. } | ParseResult::NotFound => Ok(Vc::cell(Vec::new())),"
        },
        {
            "sha": "5db50a863b6d3226cc56faf86ebd1530e45e0c06",
            "filename": "turbopack/crates/turbopack-swc-utils/src/emitter.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-swc-utils%2Fsrc%2Femitter.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack-swc-utils%2Fsrc%2Femitter.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-swc-utils%2Fsrc%2Femitter.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -20,15 +20,19 @@ pub struct IssueCollector {\n }\n \n impl IssueCollector {\n-    pub async fn emit(self) -> Result<()> {\n+    pub async fn emit(self, loose_errors: bool) -> Result<()> {\n         let issues = {\n             let mut inner = self.inner.lock();\n             take(&mut inner.emitted_issues)\n         };\n \n         for issue in issues {\n             AnalyzeIssue::new(\n-                issue.severity,\n+                if loose_errors && issue.severity <= IssueSeverity::Error {\n+                    IssueSeverity::Warning\n+                } else {\n+                    issue.severity\n+                },\n                 issue.source.ident(),\n                 Vc::cell(issue.title),\n                 issue.message.cell(),"
        },
        {
            "sha": "24fc0d504df7b72b0b699b532b021cafcac34e0f",
            "filename": "turbopack/crates/turbopack/src/lib.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Flib.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -92,6 +92,12 @@ async fn apply_module_type(\n             postprocess,\n             options,\n         }\n+        | ModuleType::EcmascriptExtensionless {\n+            preprocess,\n+            main,\n+            postprocess,\n+            options,\n+        }\n         | ModuleType::Typescript {\n             preprocess,\n             main,\n@@ -135,6 +141,9 @@ async fn apply_module_type(\n                 ModuleType::Ecmascript { .. } => {\n                     builder = builder.with_type(EcmascriptModuleAssetType::Ecmascript)\n                 }\n+                ModuleType::EcmascriptExtensionless { .. } => {\n+                    builder = builder.with_type(EcmascriptModuleAssetType::EcmascriptExtensionless)\n+                }\n                 ModuleType::Typescript {\n                     tsx, analyze_types, ..\n                 } => {"
        },
        {
            "sha": "2de0143c34ff530b87d4106a5dec3efdca16add6",
            "filename": "turbopack/crates/turbopack/src/module_options/mod.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -411,12 +411,14 @@ impl ModuleOptions {\n                     RuleCondition::ResourcePathHasNoExtension,\n                     RuleCondition::ContentTypeEmpty,\n                 ]),\n-                vec![ModuleRuleEffect::ModuleType(ModuleType::Ecmascript {\n-                    preprocess: empty,\n-                    main: empty,\n-                    postprocess: empty,\n-                    options: ecmascript_options_vc,\n-                })],\n+                vec![ModuleRuleEffect::ModuleType(\n+                    ModuleType::EcmascriptExtensionless {\n+                        preprocess: empty,\n+                        main: empty,\n+                        postprocess: empty,\n+                        options: ecmascript_options_vc,\n+                    },\n+                )],\n             ),\n             // Static assets\n             ModuleRule::new("
        },
        {
            "sha": "f1e017c1d3ee19d240f92f2713ed7eae792042a3",
            "filename": "turbopack/crates/turbopack/src/module_options/module_rule.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_rule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7a49afcf8af542fed04946ce5632c27304bc3f8b/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_rule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_rule.rs?ref=7a49afcf8af542fed04946ce5632c27304bc3f8b",
            "patch": "@@ -120,6 +120,16 @@ pub enum ModuleType {\n         #[turbo_tasks(trace_ignore)]\n         options: ResolvedVc<EcmascriptOptions>,\n     },\n+    EcmascriptExtensionless {\n+        /// Transforms to run first: transpile TypeScript, decorators, ...\n+        preprocess: ResolvedVc<EcmascriptInputTransforms>,\n+        /// Transforms to execute on standard EcmaScript (plus JSX): styled-jsx, swc plugins, ...\n+        main: ResolvedVc<EcmascriptInputTransforms>,\n+        /// Transforms to run last: JSX, preset-env, scan for imports, ...\n+        postprocess: ResolvedVc<EcmascriptInputTransforms>,\n+        #[turbo_tasks(trace_ignore)]\n+        options: ResolvedVc<EcmascriptOptions>,\n+    },\n     Json,\n     Raw,\n     NodeAddon,"
        }
    ],
    "stats": {
        "total": 232,
        "additions": 202,
        "deletions": 30
    }
}