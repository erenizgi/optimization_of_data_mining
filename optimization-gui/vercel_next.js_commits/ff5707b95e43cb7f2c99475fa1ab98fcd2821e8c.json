{
    "author": "bgw",
    "message": "fix(CI): Update llvm when building native musl targets (#81392)\n\nTested locally with\n\n```\npodman run --platform=linux/amd64 -t -i ghcr.io/napi-rs/napi-rs/nodejs-rust:stable-2023-09-17-alpine bash\n```\n\nWe must ensure llvm16 is removed before installing llvm20 and\nllvm20-dev, as there's a file conflict between llvm16 and llvm20-dev.\n\nFull build-and-deploy run:\n[https://github.com/vercel/next.js/actions/runs/16128142342](https://github.com/vercel/next.js/actions/runs/16128189670)",
    "sha": "ff5707b95e43cb7f2c99475fa1ab98fcd2821e8c",
    "files": [
        {
            "sha": "937ae8dae8e3892d81af1d37151990d7168eac0a",
            "filename": ".github/workflows/build_and_deploy.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/ff5707b95e43cb7f2c99475fa1ab98fcd2821e8c/.github%2Fworkflows%2Fbuild_and_deploy.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/ff5707b95e43cb7f2c99475fa1ab98fcd2821e8c/.github%2Fworkflows%2Fbuild_and_deploy.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_deploy.yml?ref=ff5707b95e43cb7f2c99475fa1ab98fcd2821e8c",
            "patch": "@@ -247,7 +247,8 @@ jobs:\n             build: >-\n               set -ex &&\n               apk update &&\n-              apk add --no-cache libc6-compat pkgconfig dav1d libdav1d dav1d-dev clang-static llvm-dev &&\n+              apk del llvm &&\n+              apk add --no-cache libc6-compat pkgconfig dav1d libdav1d dav1d-dev clang-static llvm llvm-dev &&\n               rustup show &&\n               rustup target add x86_64-unknown-linux-musl &&\n               npm i -g \"@napi-rs/cli@${NAPI_CLI_VERSION}\" &&\n@@ -288,7 +289,8 @@ jobs:\n             build: >-\n               set -ex &&\n               apk update &&\n-              apk add --no-cache libc6-compat pkgconfig dav1d libdav1d dav1d-dev clang-static llvm-dev &&\n+              apk del llvm &&\n+              apk add --no-cache libc6-compat pkgconfig dav1d libdav1d dav1d-dev clang-static llvm llvm-dev &&\n               export JEMALLOC_SYS_WITH_LG_PAGE=16 &&\n               npm i -g \"@napi-rs/cli@${NAPI_CLI_VERSION}\" &&\n               rustup show &&"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}