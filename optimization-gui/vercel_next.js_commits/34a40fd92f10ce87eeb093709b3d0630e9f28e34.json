{
    "author": "timneutkens",
    "message": "Development: Implement request time for Pages Router (#85012)\n\n## What?\n\nImplemented #84906 for Pages Router.",
    "sha": "34a40fd92f10ce87eeb093709b3d0630e9f28e34",
    "files": [
        {
            "sha": "8fdaecdf82328aba4ff6ed23fbe585c6752d640c",
            "filename": "packages/next/src/build/templates/pages-api.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/34a40fd92f10ce87eeb093709b3d0630e9f28e34/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fpages-api.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/34a40fd92f10ce87eeb093709b3d0630e9f28e34/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fpages-api.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fpages-api.ts?ref=34a40fd92f10ce87eeb093709b3d0630e9f28e34",
            "patch": "@@ -13,6 +13,7 @@ import * as userland from 'VAR_USERLAND'\n import { getTracer, SpanKind } from '../../server/lib/trace/tracer'\n import { BaseServerSpan } from '../../server/lib/trace/constants'\n import type { InstrumentationOnRequestError } from '../../server/instrumentation/types'\n+import { addRequestMeta } from '../../server/request-meta'\n \n // Re-export the handler (should be the default export).\n export default hoist(userland, 'default')\n@@ -42,6 +43,9 @@ export async function handler(\n     waitUntil?: (prom: Promise<void>) => void\n   }\n ): Promise<void> {\n+  if (routeModule.isDev) {\n+    addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint())\n+  }\n   let srcPage = 'VAR_DEFINITION_PAGE'\n \n   // turbopack doesn't normalize `/index` in the page name"
        },
        {
            "sha": "ce76e27907d67a023be17a606ce81cc8cf5a670c",
            "filename": "packages/next/src/server/route-modules/pages/pages-handler.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/34a40fd92f10ce87eeb093709b3d0630e9f28e34/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/34a40fd92f10ce87eeb093709b3d0630e9f28e34/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts?ref=34a40fd92f10ce87eeb093709b3d0630e9f28e34",
            "patch": "@@ -69,6 +69,13 @@ export const getHandler = ({\n       waitUntil: (prom: Promise<void>) => void\n     }\n   ): Promise<void> {\n+    if (routeModule.isDev) {\n+      addRequestMeta(\n+        req,\n+        'devRequestTimingInternalsEnd',\n+        process.hrtime.bigint()\n+      )\n+    }\n     let srcPage = originalSrcPage\n     // turbopack doesn't normalize `/index` in the page name\n     // so we need to to process dynamic routes properly"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 11,
        "deletions": 0
    }
}