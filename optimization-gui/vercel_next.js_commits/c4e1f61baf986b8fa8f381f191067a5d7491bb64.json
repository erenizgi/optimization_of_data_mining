{
    "author": "icyJoseph",
    "message": "docs: Verbose troubleshooting for unconfigured hosts (#84271)\n\nCloses: https://linear.app/vercel/issue/DOC-5151/unconfigured-image-host\n\n---------\n\nCo-authored-by: Rich Haines <hello@richardhaines.dev>",
    "sha": "c4e1f61baf986b8fa8f381f191067a5d7491bb64",
    "files": [
        {
            "sha": "a9005f5f953f2a34a0dcecc23b1972fd1c7e1ada",
            "filename": "errors/next-image-unconfigured-host.mdx",
            "status": "modified",
            "additions": 55,
            "deletions": 0,
            "changes": 55,
            "blob_url": "https://github.com/vercel/next.js/blob/c4e1f61baf986b8fa8f381f191067a5d7491bb64/errors%2Fnext-image-unconfigured-host.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/c4e1f61baf986b8fa8f381f191067a5d7491bb64/errors%2Fnext-image-unconfigured-host.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Fnext-image-unconfigured-host.mdx?ref=c4e1f61baf986b8fa8f381f191067a5d7491bb64",
            "patch": "@@ -6,6 +6,28 @@ title: '`next/image` Un-configured Host'\n \n One of your pages that leverages the `next/image` component, passed a `src` value that uses a hostname in the URL that isn't defined in the `images.remotePatterns` in `next.config.js`.\n \n+Each part of the `src` value is strictly matched against your `images.remotePatterns` definitions. Matching is exact and case-sensitive, meaning a mismatch in any single part will fail the check.\n+\n+For a URL like `https://example.org/images/example?v=1234`, the following parts must match the pattern you configured:\n+\n+- **Protocol**: `http` vs `https` must match exactly.\n+- **Hostname**: `example.org` is different from `www.example.org` and from subdomains like `assets.example.org`.\n+- **Port**: If present (e.g. `:3000`), it must be included.\n+- **Pathname**: The path must be covered by your glob, e.g. `/**` or `/images/**`.\n+- **Search**: If specified in a pattern, it must match the full search string exactly (including the leading `?`). Globs are not supported for search.\n+\n+If any of these differ from the actual `src`, the image will be rejected.\n+\n+Common pitfalls that cause this error:\n+\n+- Using `https` in `src` but only allowing `http` (or vice‑versa).\n+- Loading from a subdomain like `assets.example.com` while only configuring `example.com`.\n+- Missing a port during local/dev usage, e.g. `http://localhost:3000`.\n+- A too‑narrow pathname pattern (e.g. `/images/` instead of `/images/**`).\n+- When using the `URL` constructor, if no `search` is specified, then the `search` property is set to an empty string `''`, which means search params are **NOT** allowed.\n+\n+See the [Remote Patterns](/docs/pages/api-reference/components/image#remotepatterns) reference for details.\n+\n ## Possible Ways to Fix It\n \n Add the protocol, hostname, port, and pathname to the `images.remotePatterns` config in `next.config.js`:\n@@ -18,6 +40,39 @@ module.exports = {\n }\n ```\n \n+### With specific search params\n+\n+To allow a single search param, `v=1234`:\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  images: {\n+    remotePatterns: [\n+      new URL('https://assets.example.com/account123/**?v=1234'),\n+    ],\n+  },\n+}\n+```\n+\n+### Any search params\n+\n+To allow any search parameter, use the remote pattern object, omitting the `search` key.\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  images: {\n+    remotePatterns: [\n+      {\n+        protocol: 'https',\n+        hostname: 'assets.example.com',\n+        port: '',\n+        pathname: '/account123/**',\n+      },\n+    ],\n+  },\n+}\n+```\n+\n ### Fixing older versions of Next.js\n \n <details>"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 55,
        "deletions": 0
    }
}