{
    "author": "unstubbable",
    "message": "[dynamicIO] Don't abort on sync request data access (#81162)",
    "sha": "0a67d1c701e1881a567b2ac226e7fb4938441e66",
    "files": [
        {
            "sha": "4e4731027aa104b0a2492107577ad99187e3984d",
            "filename": "packages/next/src/client/request/params.browser.dev.ts",
            "status": "modified",
            "additions": 67,
            "deletions": 1,
            "changes": 68,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.dev.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.dev.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.dev.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -10,7 +10,7 @@ import {\n interface CacheLifetime {}\n const CachedParams = new WeakMap<CacheLifetime, Promise<Params>>()\n \n-export function makeDynamicallyTrackedExoticParamsWithDevWarnings(\n+function makeDynamicallyTrackedExoticParamsWithDevWarnings(\n   underlyingParams: Params\n ): Promise<Params> {\n   const cachedParams = CachedParams.get(underlyingParams)\n@@ -65,6 +65,62 @@ export function makeDynamicallyTrackedExoticParamsWithDevWarnings(\n   return proxiedPromise\n }\n \n+// Similar to `makeDynamicallyTrackedExoticParamsWithDevWarnings`, but just\n+// logging the sync access without actually defining the params on the promise.\n+function makeDynamicallyTrackedParamsWithDevWarnings(\n+  underlyingParams: Params\n+): Promise<Params> {\n+  const cachedParams = CachedParams.get(underlyingParams)\n+  if (cachedParams) {\n+    return cachedParams\n+  }\n+\n+  // We don't use makeResolvedReactPromise here because params\n+  // supports copying with spread and we don't want to unnecessarily\n+  // instrument the promise with spreadable properties of ReactPromise.\n+  const promise = Promise.resolve(underlyingParams)\n+\n+  const proxiedProperties = new Set<string>()\n+  const unproxiedProperties: Array<string> = []\n+\n+  Object.keys(underlyingParams).forEach((prop) => {\n+    if (wellKnownProperties.has(prop)) {\n+      // These properties cannot be shadowed because they need to be the\n+      // true underlying value for Promises to work correctly at runtime\n+    } else {\n+      proxiedProperties.add(prop)\n+    }\n+  })\n+\n+  const proxiedPromise = new Proxy(promise, {\n+    get(target, prop, receiver) {\n+      if (typeof prop === 'string') {\n+        if (\n+          // We are accessing a property that was proxied to the promise instance\n+          proxiedProperties.has(prop)\n+        ) {\n+          const expression = describeStringPropertyAccess('params', prop)\n+          warnForSyncAccess(expression)\n+        }\n+      }\n+      return ReflectAdapter.get(target, prop, receiver)\n+    },\n+    set(target, prop, value, receiver) {\n+      if (typeof prop === 'string') {\n+        proxiedProperties.delete(prop)\n+      }\n+      return ReflectAdapter.set(target, prop, value, receiver)\n+    },\n+    ownKeys(target) {\n+      warnForEnumeration(unproxiedProperties)\n+      return Reflect.ownKeys(target)\n+    },\n+  })\n+\n+  CachedParams.set(underlyingParams, proxiedPromise)\n+  return proxiedPromise\n+}\n+\n function warnForSyncAccess(expression: string) {\n   console.error(\n     `A param property was accessed directly with ${expression}. \\`params\\` is now a Promise and should be unwrapped with \\`React.use()\\` before accessing properties of the underlying params object. In this version of Next.js direct access to param properties is still supported to facilitate migration but in a future version you will be required to unwrap \\`params\\` with \\`React.use()\\`.`\n@@ -109,3 +165,13 @@ function describeListOfPropertyNames(properties: Array<string>) {\n     }\n   }\n }\n+\n+export function createRenderParamsFromClient(\n+  clientParams: Params\n+): Promise<Params> {\n+  if (process.env.__NEXT_DYNAMIC_IO) {\n+    return makeDynamicallyTrackedParamsWithDevWarnings(clientParams)\n+  }\n+\n+  return makeDynamicallyTrackedExoticParamsWithDevWarnings(clientParams)\n+}"
        },
        {
            "sha": "145d0f46dcf6800ddb4444bbdc9737015d5f210f",
            "filename": "packages/next/src/client/request/params.browser.prod.ts",
            "status": "modified",
            "additions": 23,
            "deletions": 3,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.prod.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.prod.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.prod.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -4,9 +4,7 @@ import { wellKnownProperties } from '../../shared/lib/utils/reflect-utils'\n interface CacheLifetime {}\n const CachedParams = new WeakMap<CacheLifetime, Promise<Params>>()\n \n-export function makeUntrackedExoticParams(\n-  underlyingParams: Params\n-): Promise<Params> {\n+function makeUntrackedExoticParams(underlyingParams: Params): Promise<Params> {\n   const cachedParams = CachedParams.get(underlyingParams)\n   if (cachedParams) {\n     return cachedParams\n@@ -26,3 +24,25 @@ export function makeUntrackedExoticParams(\n \n   return promise\n }\n+\n+function makeUntrackedParams(underlyingParams: Params): Promise<Params> {\n+  const cachedParams = CachedParams.get(underlyingParams)\n+  if (cachedParams) {\n+    return cachedParams\n+  }\n+\n+  const promise = Promise.resolve(underlyingParams)\n+  CachedParams.set(underlyingParams, promise)\n+\n+  return promise\n+}\n+\n+export function createRenderParamsFromClient(\n+  clientParams: Params\n+): Promise<Params> {\n+  if (process.env.__NEXT_DYNAMIC_IO) {\n+    return makeUntrackedParams(clientParams)\n+  }\n+\n+  return makeUntrackedExoticParams(clientParams)\n+}"
        },
        {
            "sha": "fd303e38e924f7b512b190acbb74e1472c52b7e9",
            "filename": "packages/next/src/client/request/params.browser.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fparams.browser.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,7 +1,7 @@\n export const createRenderParamsFromClient =\n   process.env.NODE_ENV === 'development'\n     ? (require('./params.browser.dev') as typeof import('./params.browser.dev'))\n-        .makeDynamicallyTrackedExoticParamsWithDevWarnings\n+        .createRenderParamsFromClient\n     : (\n         require('./params.browser.prod') as typeof import('./params.browser.prod')\n-      ).makeUntrackedExoticParams\n+      ).createRenderParamsFromClient"
        },
        {
            "sha": "dbf0b97694c0988927a9581f9f9ad1204243c203",
            "filename": "packages/next/src/client/request/search-params.browser.dev.ts",
            "status": "modified",
            "additions": 85,
            "deletions": 1,
            "changes": 86,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.dev.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.dev.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.dev.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -10,7 +10,7 @@ import {\n interface CacheLifetime {}\n const CachedSearchParams = new WeakMap<CacheLifetime, Promise<SearchParams>>()\n \n-export function makeUntrackedExoticSearchParamsWithDevWarnings(\n+function makeUntrackedExoticSearchParamsWithDevWarnings(\n   underlyingSearchParams: SearchParams\n ): Promise<SearchParams> {\n   const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)\n@@ -84,6 +84,80 @@ export function makeUntrackedExoticSearchParamsWithDevWarnings(\n   return proxiedPromise\n }\n \n+// Similar to `makeUntrackedExoticSearchParamsWithDevWarnings`, but just logging\n+// the sync access without actually defining the search params on the promise.\n+function makeUntrackedSearchParamsWithDevWarnings(\n+  underlyingSearchParams: SearchParams\n+): Promise<SearchParams> {\n+  const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)\n+  if (cachedSearchParams) {\n+    return cachedSearchParams\n+  }\n+\n+  const proxiedProperties = new Set<string>()\n+  const unproxiedProperties: Array<string> = []\n+  const promise = Promise.resolve(underlyingSearchParams)\n+\n+  Object.keys(underlyingSearchParams).forEach((prop) => {\n+    if (wellKnownProperties.has(prop)) {\n+      // These properties cannot be shadowed because they need to be the\n+      // true underlying value for Promises to work correctly at runtime\n+      unproxiedProperties.push(prop)\n+    } else {\n+      proxiedProperties.add(prop)\n+    }\n+  })\n+\n+  const proxiedPromise = new Proxy(promise, {\n+    get(target, prop, receiver) {\n+      if (typeof prop === 'string') {\n+        if (\n+          !wellKnownProperties.has(prop) &&\n+          (proxiedProperties.has(prop) ||\n+            // We are accessing a property that doesn't exist on the promise nor\n+            // the underlying searchParams.\n+            Reflect.has(target, prop) === false)\n+        ) {\n+          const expression = describeStringPropertyAccess('searchParams', prop)\n+          warnForSyncAccess(expression)\n+        }\n+      }\n+      return ReflectAdapter.get(target, prop, receiver)\n+    },\n+    set(target, prop, value, receiver) {\n+      if (typeof prop === 'string') {\n+        proxiedProperties.delete(prop)\n+      }\n+      return Reflect.set(target, prop, value, receiver)\n+    },\n+    has(target, prop) {\n+      if (typeof prop === 'string') {\n+        if (\n+          !wellKnownProperties.has(prop) &&\n+          (proxiedProperties.has(prop) ||\n+            // We are accessing a property that doesn't exist on the promise nor\n+            // the underlying searchParams.\n+            Reflect.has(target, prop) === false)\n+        ) {\n+          const expression = describeHasCheckingStringProperty(\n+            'searchParams',\n+            prop\n+          )\n+          warnForSyncAccess(expression)\n+        }\n+      }\n+      return Reflect.has(target, prop)\n+    },\n+    ownKeys(target) {\n+      warnForSyncSpread()\n+      return Reflect.ownKeys(target)\n+    },\n+  })\n+\n+  CachedSearchParams.set(underlyingSearchParams, proxiedPromise)\n+  return proxiedPromise\n+}\n+\n function warnForSyncAccess(expression: string) {\n   console.error(\n     `A searchParam property was accessed directly with ${expression}. ` +\n@@ -99,3 +173,13 @@ function warnForSyncSpread() {\n       `Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`\n   )\n }\n+\n+export function createRenderSearchParamsFromClient(\n+  underlyingSearchParams: SearchParams\n+): Promise<SearchParams> {\n+  if (process.env.__NEXT_DYNAMIC_IO) {\n+    return makeUntrackedSearchParamsWithDevWarnings(underlyingSearchParams)\n+  }\n+\n+  return makeUntrackedExoticSearchParamsWithDevWarnings(underlyingSearchParams)\n+}"
        },
        {
            "sha": "555de6f587cfd3e75fda6b3fffcb932117039b95",
            "filename": "packages/next/src/client/request/search-params.browser.prod.ts",
            "status": "modified",
            "additions": 25,
            "deletions": 1,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.prod.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.prod.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.prod.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -5,7 +5,7 @@ import { wellKnownProperties } from '../../shared/lib/utils/reflect-utils'\n interface CacheLifetime {}\n const CachedSearchParams = new WeakMap<CacheLifetime, Promise<SearchParams>>()\n \n-export function makeUntrackedExoticSearchParams(\n+function makeUntrackedExoticSearchParams(\n   underlyingSearchParams: SearchParams\n ): Promise<SearchParams> {\n   const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)\n@@ -30,3 +30,27 @@ export function makeUntrackedExoticSearchParams(\n \n   return promise\n }\n+\n+function makeUntrackedSearchParams(\n+  underlyingSearchParams: SearchParams\n+): Promise<SearchParams> {\n+  const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)\n+  if (cachedSearchParams) {\n+    return cachedSearchParams\n+  }\n+\n+  const promise = Promise.resolve(underlyingSearchParams)\n+  CachedSearchParams.set(underlyingSearchParams, promise)\n+\n+  return promise\n+}\n+\n+export function createRenderSearchParamsFromClient(\n+  underlyingSearchParams: SearchParams\n+): Promise<SearchParams> {\n+  if (process.env.__NEXT_DYNAMIC_IO) {\n+    return makeUntrackedSearchParams(underlyingSearchParams)\n+  }\n+\n+  return makeUntrackedExoticSearchParams(underlyingSearchParams)\n+}"
        },
        {
            "sha": "5beda0a8088f0efb66b99496ee269ee0f15fdba6",
            "filename": "packages/next/src/client/request/search-params.browser.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Frequest%2Fsearch-params.browser.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@ export const createRenderSearchParamsFromClient =\n   process.env.NODE_ENV === 'development'\n     ? (\n         require('./search-params.browser.dev') as typeof import('./search-params.browser.dev')\n-      ).makeUntrackedExoticSearchParamsWithDevWarnings\n+      ).createRenderSearchParamsFromClient\n     : (\n         require('./search-params.browser.prod') as typeof import('./search-params.browser.prod')\n-      ).makeUntrackedExoticSearchParams\n+      ).createRenderSearchParamsFromClient"
        },
        {
            "sha": "e2f3870c9de02b1578e9b8db55d59d5bf13e3156",
            "filename": "packages/next/src/server/request/cookies.ts",
            "status": "modified",
            "additions": 57,
            "deletions": 153,
            "changes": 210,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fcookies.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fcookies.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fcookies.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -12,7 +12,6 @@ import {\n } from '../app-render/work-unit-async-storage.external'\n import {\n   postponeWithTracking,\n-  abortAndThrowOnSynchronousRequestDataAccess,\n   throwToInterruptStaticGeneration,\n   trackDynamicDataInDynamicRender,\n   trackSynchronousRequestDataAccessInDev,\n@@ -24,6 +23,7 @@ import { createDedupedByCallsiteServerErrorLoggerDev } from '../create-deduped-b\n import { scheduleImmediate } from '../../lib/scheduler'\n import { isRequestAPICallableInsideAfter } from './utils'\n import { InvariantError } from '../../shared/lib/invariant-error'\n+import { ReflectAdapter } from '../web/spec-extension/adapters/reflect'\n \n /**\n  * In this version of Next.js `cookies()` returns a Promise however you can still reference the properties of the underlying cookies object\n@@ -92,13 +92,7 @@ export function cookies(): Promise<ReadonlyRequestCookies> {\n     if (workUnitStore) {\n       switch (workUnitStore.type) {\n         case 'prerender':\n-          // dynamicIO Prerender\n-          // We don't track dynamic access here because access will be tracked when you access\n-          // one of the properties of the cookies object.\n-          return makeDynamicallyTrackedExoticCookies(\n-            workStore.route,\n-            workUnitStore\n-          )\n+          return makeHangingCookies(workUnitStore)\n         case 'prerender-client':\n           const exportName = '`cookies`'\n           throw new InvariantError(\n@@ -149,6 +143,13 @@ export function cookies(): Promise<ReadonlyRequestCookies> {\n   }\n \n   if (process.env.NODE_ENV === 'development' && !workStore?.isPrefetchRequest) {\n+    if (process.env.__NEXT_DYNAMIC_IO) {\n+      return makeUntrackedCookiesWithDevWarnings(\n+        underlyingCookies,\n+        workStore?.route\n+      )\n+    }\n+\n     return makeUntrackedExoticCookiesWithDevWarnings(\n       underlyingCookies,\n       workStore?.route\n@@ -168,8 +169,7 @@ const CachedCookies = new WeakMap<\n   Promise<ReadonlyRequestCookies>\n >()\n \n-function makeDynamicallyTrackedExoticCookies(\n-  route: string,\n+function makeHangingCookies(\n   prerenderStore: PrerenderStoreModern\n ): Promise<ReadonlyRequestCookies> {\n   const cachedPromise = CachedCookies.get(prerenderStore)\n@@ -183,149 +183,6 @@ function makeDynamicallyTrackedExoticCookies(\n   )\n   CachedCookies.set(prerenderStore, promise)\n \n-  Object.defineProperties(promise, {\n-    [Symbol.iterator]: {\n-      value: function () {\n-        const expression = '`cookies()[Symbol.iterator]()`'\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    size: {\n-      get() {\n-        const expression = '`cookies().size`'\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    get: {\n-      value: function get() {\n-        let expression: string\n-        if (arguments.length === 0) {\n-          expression = '`cookies().get()`'\n-        } else {\n-          expression = `\\`cookies().get(${describeNameArg(arguments[0])})\\``\n-        }\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    getAll: {\n-      value: function getAll() {\n-        let expression: string\n-        if (arguments.length === 0) {\n-          expression = '`cookies().getAll()`'\n-        } else {\n-          expression = `\\`cookies().getAll(${describeNameArg(arguments[0])})\\``\n-        }\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    has: {\n-      value: function has() {\n-        let expression: string\n-        if (arguments.length === 0) {\n-          expression = '`cookies().has()`'\n-        } else {\n-          expression = `\\`cookies().has(${describeNameArg(arguments[0])})\\``\n-        }\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    set: {\n-      value: function set() {\n-        let expression: string\n-        if (arguments.length === 0) {\n-          expression = '`cookies().set()`'\n-        } else {\n-          const arg = arguments[0]\n-          if (arg) {\n-            expression = `\\`cookies().set(${describeNameArg(arg)}, ...)\\``\n-          } else {\n-            expression = '`cookies().set(...)`'\n-          }\n-        }\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    delete: {\n-      value: function () {\n-        let expression: string\n-        if (arguments.length === 0) {\n-          expression = '`cookies().delete()`'\n-        } else if (arguments.length === 1) {\n-          expression = `\\`cookies().delete(${describeNameArg(arguments[0])})\\``\n-        } else {\n-          expression = `\\`cookies().delete(${describeNameArg(arguments[0])}, ...)\\``\n-        }\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    clear: {\n-      value: function clear() {\n-        const expression = '`cookies().clear()`'\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    toString: {\n-      value: function toString() {\n-        const expression = '`cookies().toString()`'\n-        const error = createCookiesAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-  } satisfies CookieExtensions)\n-\n   return promise\n }\n \n@@ -543,6 +400,53 @@ function makeUntrackedExoticCookiesWithDevWarnings(\n   return promise\n }\n \n+// Similar to `makeUntrackedExoticCookiesWithDevWarnings`, but just logging the\n+// sync access without actually defining the cookies properties on the promise.\n+function makeUntrackedCookiesWithDevWarnings(\n+  underlyingCookies: ReadonlyRequestCookies,\n+  route?: string\n+): Promise<ReadonlyRequestCookies> {\n+  const cachedCookies = CachedCookies.get(underlyingCookies)\n+  if (cachedCookies) {\n+    return cachedCookies\n+  }\n+\n+  const promise = new Promise<ReadonlyRequestCookies>((resolve) =>\n+    scheduleImmediate(() => resolve(underlyingCookies))\n+  )\n+\n+  const proxiedPromise = new Proxy(promise, {\n+    get(target, prop, receiver) {\n+      switch (prop) {\n+        case Symbol.iterator: {\n+          warnForSyncAccess(route, '`...cookies()` or similar iteration')\n+          break\n+        }\n+        case 'size':\n+        case 'get':\n+        case 'getAll':\n+        case 'has':\n+        case 'set':\n+        case 'delete':\n+        case 'clear':\n+        case 'toString': {\n+          warnForSyncAccess(route, `\\`cookies().${prop}\\``)\n+          break\n+        }\n+        default: {\n+          // We only warn for well-defined properties of the cookies object.\n+        }\n+      }\n+\n+      return ReflectAdapter.get(target, prop, receiver)\n+    },\n+  })\n+\n+  CachedCookies.set(underlyingCookies, proxiedPromise)\n+\n+  return proxiedPromise\n+}\n+\n function describeNameArg(arg: unknown) {\n   return typeof arg === 'object' &&\n     arg !== null &&"
        },
        {
            "sha": "868fb1879e632809fb13e1f28a4db55e790b39d7",
            "filename": "packages/next/src/server/request/draft-mode.ts",
            "status": "modified",
            "additions": 51,
            "deletions": 18,
            "changes": 69,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fdraft-mode.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fdraft-mode.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fdraft-mode.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -19,6 +19,7 @@ import { createDedupedByCallsiteServerErrorLoggerDev } from '../create-deduped-b\n import { StaticGenBailoutError } from '../../client/components/static-generation-bailout'\n import { DynamicServerError } from '../../client/components/hooks-server-context'\n import { InvariantError } from '../../shared/lib/invariant-error'\n+import { ReflectAdapter } from '../web/spec-extension/adapters/reflect'\n \n /**\n  * In this version of Next.js `draftMode()` returns a Promise however you can still reference the properties of the underlying draftMode object\n@@ -54,10 +55,7 @@ export function draftMode(): Promise<DraftMode> {\n \n   switch (workUnitStore.type) {\n     case 'request':\n-      return createOrGetCachedExoticDraftMode(\n-        workUnitStore.draftMode,\n-        workStore\n-      )\n+      return createOrGetCachedDraftMode(workUnitStore.draftMode, workStore)\n \n     case 'cache':\n     case 'unstable-cache':\n@@ -70,7 +68,7 @@ export function draftMode(): Promise<DraftMode> {\n       )\n \n       if (draftModeProvider) {\n-        return createOrGetCachedExoticDraftMode(draftModeProvider, workStore)\n+        return createOrGetCachedDraftMode(draftModeProvider, workStore)\n       }\n \n     // Otherwise, we fall through to providing an empty draft mode.\n@@ -80,27 +78,20 @@ export function draftMode(): Promise<DraftMode> {\n     case 'prerender-ppr':\n     case 'prerender-legacy':\n       // Return empty draft mode\n-      if (\n-        process.env.NODE_ENV === 'development' &&\n-        !workStore?.isPrefetchRequest\n-      ) {\n-        const route = workStore?.route\n-        return createExoticDraftModeWithDevWarnings(null, route)\n-      } else {\n-        return createExoticDraftMode(null)\n-      }\n+      return createOrGetCachedDraftMode(null, workStore)\n \n     default:\n       const _exhaustiveCheck: never = workUnitStore\n       return _exhaustiveCheck\n   }\n }\n \n-function createOrGetCachedExoticDraftMode(\n-  draftModeProvider: DraftModeProvider,\n+function createOrGetCachedDraftMode(\n+  draftModeProvider: DraftModeProvider | null,\n   workStore: WorkStore | undefined\n ): Promise<DraftMode> {\n-  const cachedDraftMode = CachedDraftModes.get(draftMode)\n+  const cacheKey = draftModeProvider ?? NullDraftMode\n+  const cachedDraftMode = CachedDraftModes.get(cacheKey)\n \n   if (cachedDraftMode) {\n     return cachedDraftMode\n@@ -110,17 +101,27 @@ function createOrGetCachedExoticDraftMode(\n \n   if (process.env.NODE_ENV === 'development' && !workStore?.isPrefetchRequest) {\n     const route = workStore?.route\n+\n+    if (process.env.__NEXT_DYNAMIC_IO) {\n+      return createDraftModeWithDevWarnings(draftModeProvider, route)\n+    }\n+\n     promise = createExoticDraftModeWithDevWarnings(draftModeProvider, route)\n   } else {\n+    if (process.env.__NEXT_DYNAMIC_IO) {\n+      return Promise.resolve(new DraftMode(draftModeProvider))\n+    }\n+\n     promise = createExoticDraftMode(draftModeProvider)\n   }\n \n-  CachedDraftModes.set(draftModeProvider, promise)\n+  CachedDraftModes.set(cacheKey, promise)\n \n   return promise\n }\n \n interface CacheLifetime {}\n+const NullDraftMode = {}\n const CachedDraftModes = new WeakMap<CacheLifetime, Promise<DraftMode>>()\n \n function createExoticDraftMode(\n@@ -178,6 +179,38 @@ function createExoticDraftModeWithDevWarnings(\n   return promise\n }\n \n+// Similar to `createExoticDraftModeWithDevWarnings`, but just logging the sync\n+// access without actually defining the draftMode properties on the promise.\n+function createDraftModeWithDevWarnings(\n+  underlyingProvider: null | DraftModeProvider,\n+  route: undefined | string\n+): Promise<DraftMode> {\n+  const instance = new DraftMode(underlyingProvider)\n+  const promise = Promise.resolve(instance)\n+\n+  const proxiedPromise = new Proxy(promise, {\n+    get(target, prop, receiver) {\n+      switch (prop) {\n+        case 'isEnabled':\n+          warnForSyncAccess(route, `\\`draftMode().${prop}\\``)\n+          break\n+        case 'enable':\n+        case 'disable': {\n+          warnForSyncAccess(route, `\\`draftMode().${prop}()\\``)\n+          break\n+        }\n+        default: {\n+          // We only warn for well-defined properties of the draftMode object.\n+        }\n+      }\n+\n+      return ReflectAdapter.get(target, prop, receiver)\n+    },\n+  })\n+\n+  return proxiedPromise\n+}\n+\n class DraftMode {\n   /**\n    * @internal - this declaration is stripped via `tsc --stripInternal`"
        },
        {
            "sha": "eb26fc64402da6bcc287483d7faf6a0bbed95a99",
            "filename": "packages/next/src/server/request/headers.ts",
            "status": "modified",
            "additions": 59,
            "deletions": 145,
            "changes": 204,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fheaders.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fheaders.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fheaders.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -10,7 +10,6 @@ import {\n } from '../app-render/work-unit-async-storage.external'\n import {\n   postponeWithTracking,\n-  abortAndThrowOnSynchronousRequestDataAccess,\n   throwToInterruptStaticGeneration,\n   trackDynamicDataInDynamicRender,\n   trackSynchronousRequestDataAccessInDev,\n@@ -21,6 +20,7 @@ import { createDedupedByCallsiteServerErrorLoggerDev } from '../create-deduped-b\n import { scheduleImmediate } from '../../lib/scheduler'\n import { isRequestAPICallableInsideAfter } from './utils'\n import { InvariantError } from '../../shared/lib/invariant-error'\n+import { ReflectAdapter } from '../web/spec-extension/adapters/reflect'\n \n /**\n  * In this version of Next.js `headers()` returns a Promise however you can still reference the properties of the underlying Headers instance\n@@ -96,13 +96,7 @@ export function headers(): Promise<ReadonlyHeaders> {\n     if (workUnitStore) {\n       switch (workUnitStore.type) {\n         case 'prerender':\n-          // dynamicIO Prerender\n-          // We don't track dynamic access here because access will be tracked when you access\n-          // one of the properties of the headers object.\n-          return makeDynamicallyTrackedExoticHeaders(\n-            workStore.route,\n-            workUnitStore\n-          )\n+          return makeHangingHeaders(workUnitStore)\n         case 'prerender-client':\n           const exportName = '`headers`'\n           throw new InvariantError(\n@@ -137,6 +131,13 @@ export function headers(): Promise<ReadonlyHeaders> {\n \n   const requestStore = getExpectedRequestStore('headers')\n   if (process.env.NODE_ENV === 'development' && !workStore?.isPrefetchRequest) {\n+    if (process.env.__NEXT_DYNAMIC_IO) {\n+      return makeUntrackedHeadersWithDevWarnings(\n+        requestStore.headers,\n+        workStore?.route\n+      )\n+    }\n+\n     return makeUntrackedExoticHeadersWithDevWarnings(\n       requestStore.headers,\n       workStore?.route\n@@ -149,8 +150,7 @@ export function headers(): Promise<ReadonlyHeaders> {\n interface CacheLifetime {}\n const CachedHeaders = new WeakMap<CacheLifetime, Promise<ReadonlyHeaders>>()\n \n-function makeDynamicallyTrackedExoticHeaders(\n-  route: string,\n+function makeHangingHeaders(\n   prerenderStore: PrerenderStoreModern\n ): Promise<ReadonlyHeaders> {\n   const cachedHeaders = CachedHeaders.get(prerenderStore)\n@@ -164,141 +164,6 @@ function makeDynamicallyTrackedExoticHeaders(\n   )\n   CachedHeaders.set(prerenderStore, promise)\n \n-  Object.defineProperties(promise, {\n-    append: {\n-      value: function append() {\n-        const expression = `\\`headers().append(${describeNameArg(arguments[0])}, ...)\\``\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    delete: {\n-      value: function _delete() {\n-        const expression = `\\`headers().delete(${describeNameArg(arguments[0])})\\``\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    get: {\n-      value: function get() {\n-        const expression = `\\`headers().get(${describeNameArg(arguments[0])})\\``\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    has: {\n-      value: function has() {\n-        const expression = `\\`headers().has(${describeNameArg(arguments[0])})\\``\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    set: {\n-      value: function set() {\n-        const expression = `\\`headers().set(${describeNameArg(arguments[0])}, ...)\\``\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    getSetCookie: {\n-      value: function getSetCookie() {\n-        const expression = '`headers().getSetCookie()`'\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    forEach: {\n-      value: function forEach() {\n-        const expression = '`headers().forEach(...)`'\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    keys: {\n-      value: function keys() {\n-        const expression = '`headers().keys()`'\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    values: {\n-      value: function values() {\n-        const expression = '`headers().values()`'\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    entries: {\n-      value: function entries() {\n-        const expression = '`headers().entries()`'\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-    [Symbol.iterator]: {\n-      value: function () {\n-        const expression = '`headers()[Symbol.iterator]()`'\n-        const error = createHeadersAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      },\n-    },\n-  } satisfies HeadersExtensions)\n-\n   return promise\n }\n \n@@ -471,6 +336,55 @@ function makeUntrackedExoticHeadersWithDevWarnings(\n   return promise\n }\n \n+// Similar to `makeUntrackedExoticHeadersWithDevWarnings`, but just logging the\n+// sync access without actually defining the headers properties on the promise.\n+function makeUntrackedHeadersWithDevWarnings(\n+  underlyingHeaders: ReadonlyHeaders,\n+  route?: string\n+): Promise<ReadonlyHeaders> {\n+  const cachedHeaders = CachedHeaders.get(underlyingHeaders)\n+  if (cachedHeaders) {\n+    return cachedHeaders\n+  }\n+\n+  const promise = new Promise<ReadonlyHeaders>((resolve) =>\n+    scheduleImmediate(() => resolve(underlyingHeaders))\n+  )\n+\n+  const proxiedPromise = new Proxy(promise, {\n+    get(target, prop, receiver) {\n+      switch (prop) {\n+        case Symbol.iterator: {\n+          warnForSyncAccess(route, '`...headers()` or similar iteration')\n+          break\n+        }\n+        case 'append':\n+        case 'delete':\n+        case 'get':\n+        case 'has':\n+        case 'set':\n+        case 'getSetCookie':\n+        case 'forEach':\n+        case 'keys':\n+        case 'values':\n+        case 'entries': {\n+          warnForSyncAccess(route, `\\`headers().${prop}\\``)\n+          break\n+        }\n+        default: {\n+          // We only warn for well-defined properties of the headers object.\n+        }\n+      }\n+\n+      return ReflectAdapter.get(target, prop, receiver)\n+    },\n+  })\n+\n+  CachedHeaders.set(underlyingHeaders, proxiedPromise)\n+\n+  return proxiedPromise\n+}\n+\n function describeNameArg(arg: unknown) {\n   return typeof arg === 'string' ? `'${arg}'` : '...'\n }"
        },
        {
            "sha": "acde00a541c3112b637269bcf534393467a8395a",
            "filename": "packages/next/src/server/request/params.ts",
            "status": "modified",
            "additions": 86,
            "deletions": 37,
            "changes": 123,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fparams.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fparams.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fparams.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -3,7 +3,6 @@ import type { FallbackRouteParams } from './fallback-params'\n \n import { ReflectAdapter } from '../web/spec-extension/adapters/reflect'\n import {\n-  abortAndThrowOnSynchronousRequestDataAccess,\n   throwToInterruptStaticGeneration,\n   postponeWithTracking,\n   trackSynchronousRequestDataAccessInDev,\n@@ -168,11 +167,7 @@ function createPrerenderParams(\n         case 'prerender':\n         case 'prerender-client':\n           // We are in a dynamicIO prerender\n-          return makeAbortingExoticParams(\n-            underlyingParams,\n-            workStore.route,\n-            prerenderStore\n-          )\n+          return makeHangingParams(underlyingParams, prerenderStore)\n         default:\n           return makeErroringExoticParams(\n             underlyingParams,\n@@ -193,11 +188,22 @@ function createRenderParams(\n   workStore: WorkStore\n ): Promise<Params> {\n   if (process.env.NODE_ENV === 'development' && !workStore.isPrefetchRequest) {\n+    if (process.env.__NEXT_DYNAMIC_IO) {\n+      return makeDynamicallyTrackedParamsWithDevWarnings(\n+        underlyingParams,\n+        workStore\n+      )\n+    }\n+\n     return makeDynamicallyTrackedExoticParamsWithDevWarnings(\n       underlyingParams,\n       workStore\n     )\n   } else {\n+    if (process.env.__NEXT_DYNAMIC_IO) {\n+      return makeUntrackedParams(underlyingParams)\n+    }\n+\n     return makeUntrackedExoticParams(underlyingParams)\n   }\n }\n@@ -232,9 +238,8 @@ const fallbackParamsProxyHandler: ProxyHandler<Promise<Params>> = {\n   },\n }\n \n-function makeAbortingExoticParams(\n+function makeHangingParams(\n   underlyingParams: Params,\n-  route: string,\n   prerenderStore: PrerenderStoreModern\n ): Promise<Params> {\n   const cachedParams = CachedParams.get(underlyingParams)\n@@ -249,35 +254,6 @@ function makeAbortingExoticParams(\n \n   CachedParams.set(underlyingParams, promise)\n \n-  Object.keys(underlyingParams).forEach((prop) => {\n-    if (wellKnownProperties.has(prop)) {\n-      // These properties cannot be shadowed because they need to be the\n-      // true underlying value for Promises to work correctly at runtime\n-    } else {\n-      Object.defineProperty(promise, prop, {\n-        get() {\n-          const expression = describeStringPropertyAccess('params', prop)\n-          const error = createParamsAccessError(route, expression)\n-          abortAndThrowOnSynchronousRequestDataAccess(\n-            route,\n-            expression,\n-            error,\n-            prerenderStore\n-          )\n-        },\n-        set(newValue) {\n-          Object.defineProperty(promise, prop, {\n-            value: newValue,\n-            writable: true,\n-            enumerable: true,\n-          })\n-        },\n-        enumerable: true,\n-        configurable: true,\n-      })\n-    }\n-  })\n-\n   return promise\n }\n \n@@ -401,6 +377,18 @@ function makeUntrackedExoticParams(underlyingParams: Params): Promise<Params> {\n   return promise\n }\n \n+function makeUntrackedParams(underlyingParams: Params): Promise<Params> {\n+  const cachedParams = CachedParams.get(underlyingParams)\n+  if (cachedParams) {\n+    return cachedParams\n+  }\n+\n+  const promise = Promise.resolve(underlyingParams)\n+  CachedParams.set(underlyingParams, promise)\n+\n+  return promise\n+}\n+\n function makeDynamicallyTrackedExoticParamsWithDevWarnings(\n   underlyingParams: Params,\n   store: WorkStore\n@@ -461,6 +449,67 @@ function makeDynamicallyTrackedExoticParamsWithDevWarnings(\n   return proxiedPromise\n }\n \n+// Similar to `makeDynamicallyTrackedExoticParamsWithDevWarnings`, but just\n+// logging the sync access without actually defining the params on the promise.\n+function makeDynamicallyTrackedParamsWithDevWarnings(\n+  underlyingParams: Params,\n+  store: WorkStore\n+): Promise<Params> {\n+  const cachedParams = CachedParams.get(underlyingParams)\n+  if (cachedParams) {\n+    return cachedParams\n+  }\n+\n+  // We don't use makeResolvedReactPromise here because params\n+  // supports copying with spread and we don't want to unnecessarily\n+  // instrument the promise with spreadable properties of ReactPromise.\n+  const promise = new Promise<Params>((resolve) =>\n+    scheduleImmediate(() => resolve(underlyingParams))\n+  )\n+\n+  const proxiedProperties = new Set<string>()\n+  const unproxiedProperties: Array<string> = []\n+\n+  Object.keys(underlyingParams).forEach((prop) => {\n+    if (wellKnownProperties.has(prop)) {\n+      // These properties cannot be shadowed because they need to be the\n+      // true underlying value for Promises to work correctly at runtime\n+      unproxiedProperties.push(prop)\n+    } else {\n+      proxiedProperties.add(prop)\n+    }\n+  })\n+\n+  const proxiedPromise = new Proxy(promise, {\n+    get(target, prop, receiver) {\n+      if (typeof prop === 'string') {\n+        if (\n+          // We are accessing a property that was proxied to the promise instance\n+          proxiedProperties.has(prop)\n+        ) {\n+          const expression = describeStringPropertyAccess('params', prop)\n+          warnForSyncAccess(store.route, expression)\n+        }\n+      }\n+      return ReflectAdapter.get(target, prop, receiver)\n+    },\n+    set(target, prop, value, receiver) {\n+      if (typeof prop === 'string') {\n+        proxiedProperties.delete(prop)\n+      }\n+      return ReflectAdapter.set(target, prop, value, receiver)\n+    },\n+    ownKeys(target) {\n+      const expression = '`...params` or similar expression'\n+      warnForIncompleteEnumeration(store.route, expression, unproxiedProperties)\n+      return Reflect.ownKeys(target)\n+    },\n+  })\n+\n+  CachedParams.set(underlyingParams, proxiedPromise)\n+  return proxiedPromise\n+}\n+\n function syncIODev(\n   route: string | undefined,\n   expression: string,"
        },
        {
            "sha": "e5ef2942e1c4b3027636abbe0335a6234f1201c7",
            "filename": "packages/next/src/server/request/search-params.ts",
            "status": "modified",
            "additions": 104,
            "deletions": 48,
            "changes": 152,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fsearch-params.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fsearch-params.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frequest%2Fsearch-params.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,6 @@ import type { WorkStore } from '../app-render/work-async-storage.external'\n \n import { ReflectAdapter } from '../web/spec-extension/adapters/reflect'\n import {\n-  abortAndThrowOnSynchronousRequestDataAccess,\n   throwToInterruptStaticGeneration,\n   postponeWithTracking,\n   trackDynamicDataInDynamicRender,\n@@ -143,7 +142,7 @@ function createPrerenderSearchParams(\n     case 'prerender':\n     case 'prerender-client':\n       // We are in a dynamicIO (PPR or otherwise) prerender\n-      return makeAbortingExoticSearchParams(workStore.route, prerenderStore)\n+      return makeHangingSearchParams(prerenderStore)\n     default:\n       // The remaining cases are prerender-ppr and prerender-legacy\n       // We are in a legacy static generation and need to interrupt the prerender\n@@ -165,11 +164,22 @@ function createRenderSearchParams(\n       process.env.NODE_ENV === 'development' &&\n       !workStore.isPrefetchRequest\n     ) {\n+      if (process.env.__NEXT_DYNAMIC_IO) {\n+        return makeUntrackedSearchParamsWithDevWarnings(\n+          underlyingSearchParams,\n+          workStore\n+        )\n+      }\n+\n       return makeDynamicallyTrackedExoticSearchParamsWithDevWarnings(\n         underlyingSearchParams,\n         workStore\n       )\n     } else {\n+      if (process.env.__NEXT_DYNAMIC_IO) {\n+        return makeUntrackedSearchParams(underlyingSearchParams)\n+      }\n+\n       return makeUntrackedExoticSearchParams(underlyingSearchParams, workStore)\n     }\n   }\n@@ -183,8 +193,7 @@ const CachedSearchParamsForUseCache = new WeakMap<\n   Promise<SearchParams>\n >()\n \n-function makeAbortingExoticSearchParams(\n-  route: string,\n+function makeHangingSearchParams(\n   prerenderStore: PrerenderStoreModern\n ): Promise<SearchParams> {\n   const cachedSearchParams = CachedSearchParams.get(prerenderStore)\n@@ -221,54 +230,10 @@ function makeAbortingExoticSearchParams(\n         }\n \n         default: {\n-          if (typeof prop === 'string' && !wellKnownProperties.has(prop)) {\n-            const expression = describeStringPropertyAccess(\n-              'searchParams',\n-              prop\n-            )\n-            const error = createSearchAccessError(route, expression)\n-            abortAndThrowOnSynchronousRequestDataAccess(\n-              route,\n-              expression,\n-              error,\n-              prerenderStore\n-            )\n-          }\n           return ReflectAdapter.get(target, prop, receiver)\n         }\n       }\n     },\n-    has(target, prop) {\n-      // We don't expect key checking to be used except for testing the existence of\n-      // searchParams so we make all has tests trigger dynamic. this means that `promise.then`\n-      // can resolve to the then function on the Promise prototype but 'then' in promise will assume\n-      // you are testing whether the searchParams has a 'then' property.\n-      if (typeof prop === 'string') {\n-        const expression = describeHasCheckingStringProperty(\n-          'searchParams',\n-          prop\n-        )\n-        const error = createSearchAccessError(route, expression)\n-        abortAndThrowOnSynchronousRequestDataAccess(\n-          route,\n-          expression,\n-          error,\n-          prerenderStore\n-        )\n-      }\n-      return ReflectAdapter.has(target, prop)\n-    },\n-    ownKeys() {\n-      const expression =\n-        '`{...searchParams}`, `Object.keys(searchParams)`, or similar'\n-      const error = createSearchAccessError(route, expression)\n-      abortAndThrowOnSynchronousRequestDataAccess(\n-        route,\n-        expression,\n-        error,\n-        prerenderStore\n-      )\n-    },\n   })\n \n   CachedSearchParams.set(prerenderStore, proxiedPromise)\n@@ -537,6 +502,20 @@ function makeUntrackedExoticSearchParams(\n   return promise\n }\n \n+function makeUntrackedSearchParams(\n+  underlyingSearchParams: SearchParams\n+): Promise<SearchParams> {\n+  const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)\n+  if (cachedSearchParams) {\n+    return cachedSearchParams\n+  }\n+\n+  const promise = Promise.resolve(underlyingSearchParams)\n+  CachedSearchParams.set(underlyingSearchParams, promise)\n+\n+  return promise\n+}\n+\n function makeDynamicallyTrackedExoticSearchParamsWithDevWarnings(\n   underlyingSearchParams: SearchParams,\n   store: WorkStore\n@@ -691,6 +670,83 @@ function makeDynamicallyTrackedExoticSearchParamsWithDevWarnings(\n   return proxiedPromise\n }\n \n+// Similar to `makeDynamicallyTrackedExoticSearchParamsWithDevWarnings`, but\n+// just logging the sync access without actually defining the search params on\n+// the promise.\n+function makeUntrackedSearchParamsWithDevWarnings(\n+  underlyingSearchParams: SearchParams,\n+  store: WorkStore\n+): Promise<SearchParams> {\n+  const cachedSearchParams = CachedSearchParams.get(underlyingSearchParams)\n+  if (cachedSearchParams) {\n+    return cachedSearchParams\n+  }\n+\n+  const proxiedProperties = new Set<string>()\n+  const unproxiedProperties: Array<string> = []\n+  const promise = Promise.resolve(underlyingSearchParams)\n+\n+  Object.keys(underlyingSearchParams).forEach((prop) => {\n+    if (wellKnownProperties.has(prop)) {\n+      // These properties cannot be shadowed because they need to be the\n+      // true underlying value for Promises to work correctly at runtime\n+      unproxiedProperties.push(prop)\n+    } else {\n+      proxiedProperties.add(prop)\n+    }\n+  })\n+\n+  const proxiedPromise = new Proxy(promise, {\n+    get(target, prop, receiver) {\n+      if (typeof prop === 'string') {\n+        if (\n+          !wellKnownProperties.has(prop) &&\n+          (proxiedProperties.has(prop) ||\n+            // We are accessing a property that doesn't exist on the promise nor\n+            // the underlying searchParams.\n+            Reflect.has(target, prop) === false)\n+        ) {\n+          const expression = describeStringPropertyAccess('searchParams', prop)\n+          warnForSyncAccess(store.route, expression)\n+        }\n+      }\n+      return ReflectAdapter.get(target, prop, receiver)\n+    },\n+    set(target, prop, value, receiver) {\n+      if (typeof prop === 'string') {\n+        proxiedProperties.delete(prop)\n+      }\n+      return Reflect.set(target, prop, value, receiver)\n+    },\n+    has(target, prop) {\n+      if (typeof prop === 'string') {\n+        if (\n+          !wellKnownProperties.has(prop) &&\n+          (proxiedProperties.has(prop) ||\n+            // We are accessing a property that doesn't exist on the promise nor\n+            // the underlying searchParams.\n+            Reflect.has(target, prop) === false)\n+        ) {\n+          const expression = describeHasCheckingStringProperty(\n+            'searchParams',\n+            prop\n+          )\n+          warnForSyncAccess(store.route, expression)\n+        }\n+      }\n+      return Reflect.has(target, prop)\n+    },\n+    ownKeys(target) {\n+      const expression = '`Object.keys(searchParams)` or similar'\n+      warnForIncompleteEnumeration(store.route, expression, unproxiedProperties)\n+      return Reflect.ownKeys(target)\n+    },\n+  })\n+\n+  CachedSearchParams.set(underlyingSearchParams, proxiedPromise)\n+  return proxiedPromise\n+}\n+\n function syncIODev(\n   route: string | undefined,\n   expression: string,"
        },
        {
            "sha": "1d9edd3a192ee2002a72bd55179ac30bc0e59f55",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.sync-dynamic.test.ts",
            "status": "modified",
            "additions": 308,
            "deletions": 769,
            "changes": 1077,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,5 +1,5 @@\n import { isNextDev, nextTestSetup } from 'e2e-utils'\n-import { assertLog, getPrerenderOutput } from './utils'\n+import { getPrerenderOutput } from './utils'\n \n describe.each(\n   isNextDev\n@@ -20,9 +20,9 @@ describe.each(\n         },\n       ]\n )('Dynamic IO Errors - $name', ({ inPrerenderDebugMode }) => {\n-  describe('Sync Dynamic - With Fallback - client searchParams', () => {\n+  describe('Sync Dynamic - client searchParams', () => {\n     const { next, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-client-search-with-fallback',\n+      files: __dirname + '/fixtures/sync-client-search',\n       skipStart: !isNextDev,\n       skipDeployment: true,\n       buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n@@ -33,44 +33,48 @@ describe.each(\n     }\n \n     if (isNextDev) {\n-      // We don't error the build, but we do show a dev-only error so that users\n-      // migrate to the async usage.\n-      it('should show a collapsed redbox error', async () => {\n-        const browser = await next.browser('/')\n+      it('should return `undefined` for `searchParams.foo`', async () => {\n+        const browser = await next.browser('/?foo=test')\n+\n+        expect(await browser.elementById('foo-param').text()).toBe('undefined')\n+      })\n+\n+      it('should show a collapsed redbox with a sync access error', async () => {\n+        const browser = await next.browser('/?foo=test')\n \n         await expect(browser).toDisplayCollapsedRedbox(`\n          {\n            \"description\": \"A searchParam property was accessed directly with \\`searchParams.foo\\`. \\`searchParams\\` should be unwrapped with \\`React.use()\\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n            \"environmentLabel\": null,\n            \"label\": \"Console Error\",\n-           \"source\": \"app/page.tsx (44:5) @ SearchParamsReadingComponent\n-         > 44 |   ).foo\n+           \"source\": \"app/page.tsx (26:5) @ SearchParamsReadingComponent\n+         > 26 |   ).foo\n               |     ^\",\n            \"stack\": [\n-             \"SearchParamsReadingComponent app/page.tsx (44:5)\",\n-             \"Page app/page.tsx (19:11)\",\n+             \"SearchParamsReadingComponent app/page.tsx (26:5)\",\n+             \"Page app/page.tsx (14:7)\",\n            ],\n          }\n         `)\n       })\n     } else {\n-      it('should not error the build when synchronously reading search params in a client component if all dynamic access is inside a Suspense boundary', async () => {\n+      it('should not error the build when synchronously reading `searchParams.foo`', async () => {\n         try {\n           await next.start()\n         } catch {\n-          throw new Error('expected build not to fail for fully static project')\n+          throw new Error('expected build not to fail')\n         }\n \n         expect(next.cliOutput).toContain(' / ')\n-        const $ = await next.render$('/')\n-        expect($('[data-fallback]').length).toBe(2)\n+        const browser = await next.browser('/?foo=test')\n+        expect(await browser.elementById('foo-param').text()).toBe('undefined')\n       })\n     }\n   })\n \n-  describe('Sync Dynamic - Without Fallback - client searchParams', () => {\n-    const { next, isTurbopack, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-client-search-without-fallback',\n+  describe('Sync Dynamic - server searchParams', () => {\n+    const { next, skipped } = nextTestSetup({\n+      files: __dirname + '/fixtures/sync-server-search',\n       skipStart: !isNextDev,\n       skipDeployment: true,\n       buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n@@ -81,230 +85,48 @@ describe.each(\n     }\n \n     if (isNextDev) {\n-      it('should show a collapsed redbox with two errors', async () => {\n-        const browser = await next.browser('/')\n-\n-        await expect(browser).toDisplayCollapsedRedbox(`\n-         [\n-           {\n-             \"description\": \"Route \"/\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense\",\n-             \"environmentLabel\": \"Server\",\n-             \"label\": \"Console Error\",\n-             \"source\": \"app/page.tsx (48:8) @ LongRunningComponent\n-         > 48 |     use(\n-              |        ^\",\n-             \"stack\": [\n-               \"LongRunningComponent app/page.tsx (48:8)\",\n-               \"IndirectionTwo app/indirection.tsx (7:34)\",\n-               \"Page app/page.tsx (19:61)\",\n-               \"main <anonymous> (1:13)\",\n-               \"body <anonymous> (1:13)\",\n-               \"html <anonymous> (1:13)\",\n-               \"Root [Server] <anonymous> (1:22)\",\n-               \"LogSafely <anonymous> (0:0)\",\n-             ],\n-           },\n-           {\n-             \"description\": \"A searchParam property was accessed directly with \\`searchParams.foo\\`. \\`searchParams\\` should be unwrapped with \\`React.use()\\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": null,\n-             \"label\": \"Console Error\",\n-             \"source\": \"app/page.tsx (42:5) @ SearchParamsReadingComponent\n-         > 42 |   ).foo\n-              |     ^\",\n-             \"stack\": [\n-               \"SearchParamsReadingComponent app/page.tsx (42:5)\",\n-               \"Page app/page.tsx (19:11)\",\n-             ],\n-           },\n-         ]\n-        `)\n-      })\n-    } else {\n-      it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n-        try {\n-          await next.build()\n-        } catch {\n-          // we expect the build to fail\n-        }\n-\n-        const output = getPrerenderOutput(next.cliOutput, {\n-          isMinified: !inPrerenderDebugMode,\n-        })\n-\n-        if (isTurbopack) {\n-          if (inPrerenderDebugMode) {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense\n-                 at LongRunningComponent (<anonymous>)\n-                 at IndirectionTwo (turbopack:///[project]/app/indirection.tsx:7:33)\n-                 at Page (turbopack:///[project]/app/page.tsx:19:60)\n-                 at RenderFromTemplateContext (<anonymous>)\n-                 at main (<anonymous>)\n-                 at body (<anonymous>)\n-                 at html (<anonymous>)\n-                5 | }\n-                6 |\n-             >  7 | export function IndirectionTwo({ children }) {\n-                  |                                 ^\n-                8 |   return children\n-                9 | }\n-               10 |\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-             > Export encountered errors on following paths:\n-             \t/page: /\"\n-            `)\n-          } else {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense\n-                 at a (<anonymous>)\n-                 at b (<next-dist-dir>)\n-                 at c (<next-dist-dir>)\n-                 at d (<next-dist-dir>)\n-                 at e (<next-dist-dir>)\n-                 at f (<next-dist-dir>)\n-                 at g (<next-dist-dir>)\n-                 at h (<next-dist-dir>)\n-                 at i (<next-dist-dir>)\n-                 at j (<next-dist-dir>)\n-                 at k (<next-dist-dir>)\n-                 at l (<next-dist-dir>)\n-                 at m (<next-dist-dir>)\n-                 at n (<anonymous>)\n-                 at o (<next-dist-dir>)\n-                 at main (<anonymous>)\n-                 at body (<anonymous>)\n-                 at html (<anonymous>)\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n-             Export encountered an error on /page: /, exiting the build.\"\n-            `)\n-          }\n-        } else {\n-          if (inPrerenderDebugMode) {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense\n-                 at LongRunningComponent (<anonymous>)\n-                 at IndirectionTwo (webpack:///app/indirection.tsx:7:33)\n-                 at Page (webpack:///app/page.tsx:19:60)\n-                 at ClientPageRoot (webpack://<next-src>)\n-                 at InnerLayoutRouter (webpack://<next-src>)\n-                 at RedirectErrorBoundary (webpack://<next-src>)\n-                 at RedirectBoundary (webpack://<next-src>)\n-                 at HTTPAccessFallbackErrorBoundary (webpack://<next-src>)\n-                 at HTTPAccessFallbackBoundary (webpack://<next-src>)\n-                 at LoadingBoundary (webpack://<next-src>)\n-                 at ErrorBoundary (webpack://<next-src>)\n-                 at InnerScrollAndFocusHandler (webpack://<next-src>)\n-                 at ScrollAndFocusHandler (webpack://<next-src>)\n-                 at RenderFromTemplateContext (<anonymous>)\n-                 at OuterLayoutRouter (webpack://<next-src>)\n-                 at main (<anonymous>)\n-                 at body (<anonymous>)\n-                 at html (<anonymous>)\n-                5 | }\n-                6 |\n-             >  7 | export function IndirectionTwo({ children }) {\n-                  |                                 ^\n-                8 |   return children\n-                9 | }\n-               10 |\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+      it('should return `undefined` for `searchParams.foo`', async () => {\n+        const browser = await next.browser('/?foo=test')\n \n-             > Export encountered errors on following paths:\n-             \t/page: /\"\n-            `)\n-          } else {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense\n-                 at a (<anonymous>)\n-                 at b (<next-dist-dir>)\n-                 at c (<next-dist-dir>)\n-                 at d (<next-dist-dir>)\n-                 at e (<next-dist-dir>)\n-                 at f (<next-dist-dir>)\n-                 at g (<next-dist-dir>)\n-                 at h (<next-dist-dir>)\n-                 at i (<next-dist-dir>)\n-                 at j (<next-dist-dir>)\n-                 at k (<next-dist-dir>)\n-                 at l (<next-dist-dir>)\n-                 at m (<next-dist-dir>)\n-                 at n (<anonymous>)\n-                 at o (<next-dist-dir>)\n-                 at main (<anonymous>)\n-                 at body (<anonymous>)\n-                 at html (<anonymous>)\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n-             Export encountered an error on /page: /, exiting the build.\"\n-            `)\n-          }\n-        }\n+        expect(await browser.elementById('foo-param').text()).toBe('undefined')\n       })\n-    }\n-  })\n \n-  describe('Sync Dynamic - With Fallback - server searchParams', () => {\n-    const { next, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-server-search-with-fallback',\n-      skipStart: !isNextDev,\n-      skipDeployment: true,\n-      buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n-    })\n-\n-    if (skipped) {\n-      return\n-    }\n-\n-    if (isNextDev) {\n-      // We don't error the build, but we do show a dev-only error so that users\n-      // migrate to the async usage.\n-      it('should show a collapsed redbox error', async () => {\n-        const browser = await next.browser('/')\n+      it('should show a collapsed redbox with a sync access error', async () => {\n+        const browser = await next.browser('/?foo=test')\n \n         await expect(browser).toDisplayCollapsedRedbox(`\n          {\n            \"description\": \"Route \"/\" used \\`searchParams.foo\\`. \\`searchParams\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n            \"environmentLabel\": \"Prerender\",\n            \"label\": \"Console Error\",\n-           \"source\": \"app/page.tsx (42:5) @ SearchParamsReadingComponent\n-         > 42 |   ).foo\n+           \"source\": \"app/page.tsx (30:5) @ SearchParamsReadingComponent\n+         > 30 |   ).foo\n               |     ^\",\n            \"stack\": [\n-             \"SearchParamsReadingComponent app/page.tsx (42:5)\",\n-             \"Page app/page.tsx (19:11)\",\n+             \"SearchParamsReadingComponent app/page.tsx (30:5)\",\n+             \"Page app/page.tsx (15:7)\",\n            ],\n          }\n         `)\n       })\n-\n-      it('should prefix a log after sync dynamic IO with \"Server\"', async () => {\n-        const browser = await next.browser('/')\n-        const logs = await browser.log()\n-\n-        assertLog(\n-          logs,\n-          'Server',\n-          'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-        )\n-      })\n     } else {\n-      it('should not error the build when synchronously reading search params in a server component if all dynamic access is inside a Suspense boundary', async () => {\n+      it('should not error the build when synchronously reading `searchParams.foo`', async () => {\n         try {\n           await next.start()\n         } catch {\n-          throw new Error('expected build not to fail for fully static project')\n+          throw new Error('expected build not to fail')\n         }\n \n         expect(next.cliOutput).toContain(' / ')\n-        const $ = await next.render$('/')\n-        expect($('[data-fallback]').length).toBe(2)\n+        const browser = await next.browser('/?foo=test')\n+        expect(await browser.elementById('foo-param').text()).toBe('undefined')\n       })\n     }\n   })\n \n-  describe('Sync Dynamic - Without Fallback - server searchParams', () => {\n+  describe('Sync Dynamic - cookies', () => {\n     const { next, isTurbopack, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-server-search-without-fallback',\n+      files: __dirname + '/fixtures/sync-cookies',\n       skipStart: !isNextDev,\n       skipDeployment: true,\n       buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n@@ -315,239 +137,69 @@ describe.each(\n     }\n \n     if (isNextDev) {\n-      // TODO: Ideally we'd only show the error once.\n-      it('should show a collapsed redbox error', async () => {\n+      it('should show a redbox with a sync access error and a runtime error', async () => {\n         const browser = await next.browser('/')\n \n-        await expect(browser).toDisplayCollapsedRedbox(`\n-         [\n-           {\n-             \"description\": \"Route \"/\" used \\`searchParams.foo\\`. \\`searchParams\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": \"Prerender\",\n-             \"label\": \"Console Error\",\n-             \"source\": \"app/page.tsx (41:5) @ SearchParamsReadingComponent\n-         > 41 |   ).foo\n-              |     ^\",\n-             \"stack\": [\n-               \"SearchParamsReadingComponent app/page.tsx (41:5)\",\n-               \"Page app/page.tsx (20:11)\",\n-             ],\n-           },\n-           {\n-             \"description\": \"Route \"/\" used \\`searchParams.foo\\`. \\`searchParams\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": \"Server\",\n-             \"label\": \"Console Error\",\n-             \"source\": \"app/page.tsx (41:5) @ SearchParamsReadingComponent\n-         > 41 |   ).foo\n-              |     ^\",\n-             \"stack\": [\n-               \"SearchParamsReadingComponent app/page.tsx (41:5)\",\n-               \"LogSafely <anonymous> (0:0)\",\n-             ],\n-           },\n-         ]\n-        `)\n-      })\n-\n-      it('should prefix a log after sync dynamic IO with \"Server\"', async () => {\n-        const browser = await next.browser('/')\n-        const logs = await browser.log()\n-\n-        assertLog(\n-          logs,\n-          'Server',\n-          'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-        )\n-      })\n-    } else {\n-      it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n-        try {\n-          await next.build()\n-        } catch {\n-          // we expect the build to fail\n-        }\n-\n-        const output = getPrerenderOutput(next.cliOutput, {\n-          isMinified: !inPrerenderDebugMode,\n-        })\n-\n         if (isTurbopack) {\n-          if (inPrerenderDebugMode) {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`searchParams.foo\\`. \\`searchParams\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at SearchParamsReadingComponent (turbopack:///[project]/app/page.tsx:41:4)\n-               39 |   const fooParams = (\n-               40 |     searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-             > 41 |   ).foo\n-                  |    ^\n-               42 |\n-               43 |   console.log(\n-               44 |     'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-             > Export encountered errors on following paths:\n-             \t/page: /\"\n-            `)\n-          } else {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`searchParams.foo\\`. \\`searchParams\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at a (<next-dist-dir>)\n-                 at b (<next-dist-dir>)\n-                 at c (<next-dist-dir>)\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n-             Export encountered an error on /page: /, exiting the build.\"\n-            `)\n-          }\n+          await expect(browser).toDisplayRedbox(`\n+           [\n+             {\n+               \"description\": \"Route \"/\" used \\`cookies().get\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n+               \"environmentLabel\": \"Prerender\",\n+               \"label\": \"Console Error\",\n+               \"source\": \"app/page.tsx (17:26) @ CookiesReadingComponent\n+           > 17 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n+                |                          ^\",\n+               \"stack\": [\n+                 \"CookiesReadingComponent app/page.tsx (17:26)\",\n+                 \"Page app/page.tsx (11:7)\",\n+               ],\n+             },\n+             {\n+               \"description\": \"(0 , <turbopack-module-id>.cookies)(...).get is not a function\",\n+               \"environmentLabel\": \"Prerender\",\n+               \"label\": \"Runtime TypeError\",\n+               \"source\": \"app/page.tsx (17:67) @ CookiesReadingComponent\n+           > 17 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n+                |                                                                   ^\",\n+               \"stack\": [\n+                 \"CookiesReadingComponent app/page.tsx (17:67)\",\n+               ],\n+             },\n+           ]\n+          `)\n         } else {\n-          if (inPrerenderDebugMode) {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`searchParams.foo\\`. \\`searchParams\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at SearchParamsReadingComponent (webpack:///app/page.tsx:41:4)\n-               39 |   const fooParams = (\n-               40 |     searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-             > 41 |   ).foo\n-                  |    ^\n-               42 |\n-               43 |   console.log(\n-               44 |     'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-             > Export encountered errors on following paths:\n-             \t/page: /\"\n-            `)\n-          } else {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`searchParams.foo\\`. \\`searchParams\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at a (<next-dist-dir>)\n-                 at b (<next-dist-dir>)\n-                 at c (<next-dist-dir>)\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n-             Export encountered an error on /page: /, exiting the build.\"\n-            `)\n-          }\n+          await expect(browser).toDisplayRedbox(`\n+           [\n+             {\n+               \"description\": \"Route \"/\" used \\`cookies().get\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n+               \"environmentLabel\": \"Prerender\",\n+               \"label\": \"Console Error\",\n+               \"source\": \"app/page.tsx (17:18) @ CookiesReadingComponent\n+           > 17 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n+                |                  ^\",\n+               \"stack\": [\n+                 \"CookiesReadingComponent app/page.tsx (17:18)\",\n+                 \"Page app/page.tsx (11:7)\",\n+               ],\n+             },\n+             {\n+               \"description\": \"(0 , <webpack-module-id>.cookies)(...).get is not a function\",\n+               \"environmentLabel\": \"Prerender\",\n+               \"label\": \"Runtime TypeError\",\n+               \"source\": \"app/page.tsx (17:67) @ CookiesReadingComponent\n+           > 17 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n+                |                                                                   ^\",\n+               \"stack\": [\n+                 \"CookiesReadingComponent app/page.tsx (17:67)\",\n+               ],\n+             },\n+           ]\n+          `)\n         }\n       })\n-    }\n-  })\n-\n-  describe('Sync Dynamic - With Fallback - cookies', () => {\n-    const { next, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-cookies-with-fallback',\n-      skipStart: !isNextDev,\n-      skipDeployment: true,\n-      buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n-    })\n-\n-    if (skipped) {\n-      return\n-    }\n-\n-    if (isNextDev) {\n-      // We don't error the build, but we do show a dev-only error so that users\n-      // migrate to the async usage.\n-      it('should show a collapsed redbox error', async () => {\n-        const browser = await next.browser('/')\n-\n-        await expect(browser).toDisplayCollapsedRedbox(`\n-         {\n-           \"description\": \"Route \"/\" used \\`cookies().get('token')\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-           \"environmentLabel\": \"Server\",\n-           \"label\": \"Console Error\",\n-           \"source\": \"app/page.tsx (33:66) @ CookiesReadingComponent\n-         > 33 |   const token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n-              |                                                                  ^\",\n-           \"stack\": [\n-             \"CookiesReadingComponent app/page.tsx (33:66)\",\n-             \"Page app/page.tsx (16:11)\",\n-           ],\n-         }\n-        `)\n-      })\n-\n-      it('should prefix a log after sync dynamic IO with \"Server\"', async () => {\n-        const browser = await next.browser('/')\n-        const logs = await browser.log()\n-\n-        assertLog(\n-          logs,\n-          'Server',\n-          'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-        )\n-      })\n     } else {\n-      it('should not error the build when synchronously reading cookies if all dynamic access is inside a Suspense boundary', async () => {\n-        try {\n-          await next.start()\n-        } catch {\n-          throw new Error('expected build not to fail for fully static project')\n-        }\n-\n-        expect(next.cliOutput).toContain(' / ')\n-        const $ = await next.render$('/')\n-        expect($('[data-fallback]').length).toBe(2)\n-      })\n-    }\n-  })\n-\n-  describe('Sync Dynamic - Without Fallback - cookies', () => {\n-    const { next, isTurbopack, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-cookies-without-fallback',\n-      skipStart: !isNextDev,\n-      skipDeployment: true,\n-      buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n-    })\n-\n-    if (skipped) {\n-      return\n-    }\n-\n-    if (isNextDev) {\n-      // TODO: Ideally we'd only show the error once.\n-      it('should show a collapsed redbox error', async () => {\n-        const browser = await next.browser('/')\n-\n-        await expect(browser).toDisplayCollapsedRedbox(`\n-         [\n-           {\n-             \"description\": \"Route \"/\" used \\`cookies().get('token')\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": \"Server\",\n-             \"label\": \"Console Error\",\n-             \"source\": \"app/page.tsx (32:67) @ CookiesReadingComponent\n-         > 32 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n-              |                                                                   ^\",\n-             \"stack\": [\n-               \"CookiesReadingComponent app/page.tsx (32:67)\",\n-               \"Page app/page.tsx (17:11)\",\n-             ],\n-           },\n-           {\n-             \"description\": \"Route \"/\" used \\`cookies().get('token')\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": \"Server\",\n-             \"label\": \"Console Error\",\n-             \"source\": \"app/page.tsx (32:67) @ CookiesReadingComponent\n-         > 32 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n-              |                                                                   ^\",\n-             \"stack\": [\n-               \"CookiesReadingComponent app/page.tsx (32:67)\",\n-               \"LogSafely <anonymous> (0:0)\",\n-             ],\n-           },\n-         ]\n-        `)\n-      })\n-\n-      it('should prefix a log after sync dynamic IO with \"Server\"', async () => {\n-        const browser = await next.browser('/')\n-        const logs = await browser.log()\n-\n-        assertLog(\n-          logs,\n-          'Server',\n-          'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-        )\n-      })\n-    } else {\n-      it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n+      it('should error the build with a runtime error', async () => {\n         try {\n           await next.build()\n         } catch {\n@@ -561,56 +213,62 @@ describe.each(\n         if (isTurbopack) {\n           if (inPrerenderDebugMode) {\n             expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`cookies().get('token')\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at CookiesReadingComponent (turbopack:///[project]/app/page.tsx:32:66)\n-               30 | async function CookiesReadingComponent() {\n-               31 |   await new Promise((r) => process.nextTick(r))\n-             > 32 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n+             \"Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             TypeError: <module-function>().get is not a function\n+                 at CookiesReadingComponent (turbopack:///[project]/app/page.tsx:17:66)\n+                 at stringify (<anonymous>)\n+               15 |\n+               16 | async function CookiesReadingComponent() {\n+             > 17 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n                   |                                                                  ^\n-               33 |\n-               34 |   console.log(\n-               35 |     'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+               18 |   return <div>this component reads the \\`token\\` cookie synchronously</div>\n+               19 | }\n+               20 | {\n+               digest: '<error-digest>'\n+             }\n \n              > Export encountered errors on following paths:\n              \t/page: /\"\n             `)\n           } else {\n             expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`cookies().get('token')\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n+             \"Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             TypeError: <module-function>().get is not a function\n                  at a (<next-dist-dir>)\n-                 at b (<next-dist-dir>)\n-                 at c (<next-dist-dir>)\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                 at b (<anonymous>) {\n+               digest: '<error-digest>'\n+             }\n              Export encountered an error on /page: /, exiting the build.\"\n             `)\n           }\n         } else {\n           if (inPrerenderDebugMode) {\n             expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`cookies().get('token')\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at createCookiesAccessError (webpack://<next-src>)\n-                 at Promise.get (webpack://<next-src>)\n-                 at CookiesReadingComponent (webpack:///app/page.tsx:32:66)\n-               579 | ) {\n-               580 |   const prefix = route ? \\`Route \"\\${route}\" \\` : 'This route '\n-             > 581 |   return new Error(\n-                   |         ^\n-               582 |     \\`\\${prefix}used \\${expression}. \\` +\n-               583 |       \\`\\\\\\`cookies()\\\\\\` should be awaited before using its value. \\` +\n-               584 |       \\`Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\\`\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             \"Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             TypeError: <module-function>().get is not a function\n+                 at CookiesReadingComponent (webpack:///app/page.tsx:17:66)\n+                 at stringify (<anonymous>)\n+               15 |\n+               16 | async function CookiesReadingComponent() {\n+             > 17 |   const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n+                  |                                                                  ^\n+               18 |   return <div>this component reads the \\`token\\` cookie synchronously</div>\n+               19 | }\n+               20 | {\n+               digest: '<error-digest>'\n+             }\n \n              > Export encountered errors on following paths:\n              \t/page: /\"\n             `)\n           } else {\n             expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`cookies().get('token')\\`. \\`cookies()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n+             \"Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             TypeError: <module-function>().get is not a function\n                  at a (<next-dist-dir>)\n-                 at b (<next-dist-dir>)\n-                 at c (<next-dist-dir>)\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                 at b (<anonymous>) {\n+               digest: '<error-digest>'\n+             }\n              Export encountered an error on /page: /, exiting the build.\"\n             `)\n           }\n@@ -632,76 +290,65 @@ describe.each(\n     }\n \n     if (isNextDev) {\n-      // We don't error the build, but we do show a dev-only error so that users\n-      // migrate to the async usage.\n-      it('should show a collapsed redbox error', async () => {\n+      it('should return `undefined` for `draftMode().isEnabled`', async () => {\n+        const browser = await next.browser('/')\n+\n+        expect(await browser.elementById('draft-mode').text()).toBe('undefined')\n+      })\n+\n+      it('should show a collapsed redbox with a sync access error', async () => {\n         const browser = await next.browser('/')\n \n         if (isTurbopack) {\n           await expect(browser).toDisplayCollapsedRedbox(`\n            {\n              \"description\": \"Route \"/\" used \\`draftMode().isEnabled\\`. \\`draftMode()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": \"Server\",\n+             \"environmentLabel\": \"Prerender\",\n              \"label\": \"Console Error\",\n-             \"source\": \"app/page.tsx (25:31) @ DraftModeReadingComponent\n-           > 25 |   const isEnabled = (draftMode() as unknown as UnsafeUnwrappedDraftMode)\n+             \"source\": \"app/page.tsx (23:31) @ DraftModeReadingComponent\n+           > 23 |   const isEnabled = (draftMode() as unknown as UnsafeUnwrappedDraftMode)\n                 |                               ^\",\n              \"stack\": [\n-               \"DraftModeReadingComponent app/page.tsx (25:31)\",\n-               \"Page app/page.tsx (16:11)\",\n+               \"DraftModeReadingComponent app/page.tsx (23:31)\",\n+               \"Page app/page.tsx (13:7)\",\n              ],\n            }\n           `)\n         } else {\n           await expect(browser).toDisplayCollapsedRedbox(`\n            {\n              \"description\": \"Route \"/\" used \\`draftMode().isEnabled\\`. \\`draftMode()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": \"Server\",\n+             \"environmentLabel\": \"Prerender\",\n              \"label\": \"Console Error\",\n-             \"source\": \"app/page.tsx (25:21) @ DraftModeReadingComponent\n-           > 25 |   const isEnabled = (draftMode() as unknown as UnsafeUnwrappedDraftMode)\n+             \"source\": \"app/page.tsx (23:21) @ DraftModeReadingComponent\n+           > 23 |   const isEnabled = (draftMode() as unknown as UnsafeUnwrappedDraftMode)\n                 |                     ^\",\n              \"stack\": [\n-               \"DraftModeReadingComponent app/page.tsx (25:21)\",\n-               \"Page app/page.tsx (16:11)\",\n+               \"DraftModeReadingComponent app/page.tsx (23:21)\",\n+               \"Page app/page.tsx (13:7)\",\n              ],\n            }\n           `)\n         }\n       })\n-\n-      // TODO: We should not change the `prerenderPhase` flag in this case.\n-      it.failing(\n-        'should prefix a log after sync `draftMode().isEnabled` access with \"Prerender\"',\n-        async () => {\n-          const browser = await next.browser('/')\n-          const logs = await browser.log()\n-\n-          assertLog(\n-            logs,\n-            'Prerender',\n-            'This log should be prefixed with the \"Prerender\" environment, because the sync access above does not lead to an abort.'\n-          )\n-        }\n-      )\n     } else {\n-      it('should not error the build when synchronously reading draftMode ', async () => {\n+      it('should not error the build when synchronously reading `draftMode().isEnabled`', async () => {\n         try {\n           await next.start()\n         } catch {\n-          throw new Error('expected build not to fail for fully static project')\n+          throw new Error('expected build not to fail')\n         }\n \n-        expect(next.cliOutput).toContain(' / ')\n-        const $ = await next.render$('/')\n-        expect($('#draft-mode').text()).toBe('false')\n+        expect(next.cliOutput).toContain(' / ')\n+        const browser = await next.browser('/')\n+        expect(await browser.elementById('draft-mode').text()).toBe('undefined')\n       })\n     }\n   })\n \n-  describe('Sync Dynamic - With Fallback - headers', () => {\n-    const { next, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-headers-with-fallback',\n+  describe('Sync Dynamic - headers', () => {\n+    const { next, isTurbopack, skipped } = nextTestSetup({\n+      files: __dirname + '/fixtures/sync-headers',\n       skipStart: !isNextDev,\n       skipDeployment: true,\n       buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n@@ -712,111 +359,69 @@ describe.each(\n     }\n \n     if (isNextDev) {\n-      // We don't error the build, but we do show a dev-only error so that users\n-      // migrate to the async usage.\n-      it('should show a collapsed redbox error', async () => {\n+      it('should show a redbox with a sync access error and a runtime error', async () => {\n         const browser = await next.browser('/')\n \n-        await expect(browser).toDisplayCollapsedRedbox(`\n+        if (isTurbopack) {\n+          await expect(browser).toDisplayRedbox(`\n+           [\n              {\n-               \"description\": \"Route \"/\" used \\`headers().get('user-agent')\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-               \"environmentLabel\": \"Server\",\n+               \"description\": \"Route \"/\" used \\`headers().get\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n+               \"environmentLabel\": \"Prerender\",\n                \"label\": \"Console Error\",\n-               \"source\": \"app/page.tsx (33:70) @ HeadersReadingComponent\n-             > 33 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n-                  |                                                                      ^\",\n+               \"source\": \"app/page.tsx (17:29) @ HeadersReadingComponent\n+           > 17 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n+                |                             ^\",\n                \"stack\": [\n-                 \"HeadersReadingComponent app/page.tsx (33:70)\",\n-                 \"Page app/page.tsx (16:11)\",\n+                 \"HeadersReadingComponent app/page.tsx (17:29)\",\n+                 \"Page app/page.tsx (11:7)\",\n                ],\n-             }\n-            `)\n-      })\n-\n-      it('should prefix a log after sync dynamic IO with \"Server\"', async () => {\n-        const browser = await next.browser('/')\n-        const logs = await browser.log()\n-\n-        assertLog(\n-          logs,\n-          'Server',\n-          'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-        )\n-      })\n-    } else {\n-      it('should not error the build when synchronously reading headers if all dynamic access is inside a Suspense boundary', async () => {\n-        try {\n-          await next.start()\n-        } catch {\n-          throw new Error('expected build not to fail for fully static project')\n+             },\n+             {\n+               \"description\": \"(0 , <turbopack-module-id>.headers)(...).get is not a function\",\n+               \"environmentLabel\": \"Prerender\",\n+               \"label\": \"Runtime TypeError\",\n+               \"source\": \"app/page.tsx (17:70) @ HeadersReadingComponent\n+           > 17 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n+                |                                                                      ^\",\n+               \"stack\": [\n+                 \"HeadersReadingComponent app/page.tsx (17:70)\",\n+               ],\n+             },\n+           ]\n+          `)\n+        } else {\n+          await expect(browser).toDisplayRedbox(`\n+           [\n+             {\n+               \"description\": \"Route \"/\" used \\`headers().get\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n+               \"environmentLabel\": \"Prerender\",\n+               \"label\": \"Console Error\",\n+               \"source\": \"app/page.tsx (17:21) @ HeadersReadingComponent\n+           > 17 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n+                |                     ^\",\n+               \"stack\": [\n+                 \"HeadersReadingComponent app/page.tsx (17:21)\",\n+                 \"Page app/page.tsx (11:7)\",\n+               ],\n+             },\n+             {\n+               \"description\": \"(0 , <webpack-module-id>.headers)(...).get is not a function\",\n+               \"environmentLabel\": \"Prerender\",\n+               \"label\": \"Runtime TypeError\",\n+               \"source\": \"app/page.tsx (17:70) @ HeadersReadingComponent\n+           > 17 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n+                |                                                                      ^\",\n+               \"stack\": [\n+                 \"HeadersReadingComponent app/page.tsx (17:70)\",\n+               ],\n+             },\n+           ]\n+          `)\n         }\n-\n-        expect(next.cliOutput).toContain(' / ')\n-        const $ = await next.render$('/')\n-        expect($('[data-fallback]').length).toBe(2)\n-      })\n-    }\n-  })\n-\n-  describe('Sync Dynamic - Without Fallback - headers', () => {\n-    const { next, isTurbopack, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-headers-without-fallback',\n-      skipStart: !isNextDev,\n-      skipDeployment: true,\n-      buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n-    })\n-\n-    if (skipped) {\n-      return\n-    }\n-\n-    if (isNextDev) {\n-      // TODO: Ideally we'd only show the error once.\n-      it('should show a collapsed redbox error', async () => {\n-        const browser = await next.browser('/')\n-\n-        await expect(browser).toDisplayCollapsedRedbox(`\n-             [\n-               {\n-                 \"description\": \"Route \"/\" used \\`headers().get('user-agent')\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-                 \"environmentLabel\": \"Server\",\n-                 \"label\": \"Console Error\",\n-                 \"source\": \"app/page.tsx (32:70) @ HeadersReadingComponent\n-             > 32 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n-                  |                                                                      ^\",\n-                 \"stack\": [\n-                   \"HeadersReadingComponent app/page.tsx (32:70)\",\n-                   \"Page app/page.tsx (17:11)\",\n-                 ],\n-               },\n-               {\n-                 \"description\": \"Route \"/\" used \\`headers().get('user-agent')\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-                 \"environmentLabel\": \"Server\",\n-                 \"label\": \"Console Error\",\n-                 \"source\": \"app/page.tsx (32:70) @ HeadersReadingComponent\n-             > 32 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n-                  |                                                                      ^\",\n-                 \"stack\": [\n-                   \"HeadersReadingComponent app/page.tsx (32:70)\",\n-                   \"LogSafely <anonymous> (0:0)\",\n-                 ],\n-               },\n-             ]\n-            `)\n-      })\n-\n-      it('should prefix a log after sync dynamic IO with \"Server\"', async () => {\n-        const browser = await next.browser('/')\n-        const logs = await browser.log()\n-\n-        assertLog(\n-          logs,\n-          'Server',\n-          'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-        )\n       })\n     } else {\n-      it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n+      it('should error the build with a runtime error', async () => {\n         try {\n           await next.build()\n         } catch {\n@@ -830,56 +435,62 @@ describe.each(\n         if (isTurbopack) {\n           if (inPrerenderDebugMode) {\n             expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`headers().get('user-agent')\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at HeadersReadingComponent (turbopack:///[project]/app/page.tsx:32:69)\n-               30 | async function HeadersReadingComponent() {\n-               31 |   await new Promise((r) => process.nextTick(r))\n-             > 32 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n+             \"Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             TypeError: <module-function>().get is not a function\n+                 at HeadersReadingComponent (turbopack:///[project]/app/page.tsx:17:69)\n+                 at stringify (<anonymous>)\n+               15 |\n+               16 | async function HeadersReadingComponent() {\n+             > 17 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n                   |                                                                     ^\n-               33 |     'user-agent'\n-               34 |   )\n-               35 |\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+               18 |     'user-agent'\n+               19 |   )\n+               20 |   return ( {\n+               digest: '<error-digest>'\n+             }\n \n              > Export encountered errors on following paths:\n              \t/page: /\"\n             `)\n           } else {\n             expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`headers().get('user-agent')\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n+             \"Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             TypeError: <module-function>().get is not a function\n                  at a (<next-dist-dir>)\n-                 at b (<next-dist-dir>)\n-                 at c (<next-dist-dir>)\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                 at b (<anonymous>) {\n+               digest: '<error-digest>'\n+             }\n              Export encountered an error on /page: /, exiting the build.\"\n             `)\n           }\n         } else {\n           if (inPrerenderDebugMode) {\n             expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`headers().get('user-agent')\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at createHeadersAccessError (webpack://<next-src>)\n-                 at Promise.get (webpack://<next-src>)\n-                 at HeadersReadingComponent (webpack:///app/page.tsx:32:69)\n-               501 | ) {\n-               502 |   const prefix = route ? \\`Route \"\\${route}\" \\` : 'This route '\n-             > 503 |   return new Error(\n-                   |         ^\n-               504 |     \\`\\${prefix}used \\${expression}. \\` +\n-               505 |       \\`\\\\\\`headers()\\\\\\` should be awaited before using its value. \\` +\n-               506 |       \\`Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\\`\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             \"Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             TypeError: <module-function>().get is not a function\n+                 at HeadersReadingComponent (webpack:///app/page.tsx:17:69)\n+                 at stringify (<anonymous>)\n+               15 |\n+               16 | async function HeadersReadingComponent() {\n+             > 17 |   const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n+                  |                                                                     ^\n+               18 |     'user-agent'\n+               19 |   )\n+               20 |   return ( {\n+               digest: '<error-digest>'\n+             }\n \n              > Export encountered errors on following paths:\n              \t/page: /\"\n             `)\n           } else {\n             expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/\" used \\`headers().get('user-agent')\\`. \\`headers()\\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n+             \"Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+             TypeError: <module-function>().get is not a function\n                  at a (<next-dist-dir>)\n-                 at b (<next-dist-dir>)\n-                 at c (<next-dist-dir>)\n-             Error occurred prerendering page \"/\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                 at b (<anonymous>) {\n+               digest: '<error-digest>'\n+             }\n              Export encountered an error on /page: /, exiting the build.\"\n             `)\n           }\n@@ -888,9 +499,9 @@ describe.each(\n     }\n   })\n \n-  describe('Sync Dynamic - With Fallback - params', () => {\n+  describe('Sync Dynamic - client params', () => {\n     const { next, isTurbopack, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-params-with-fallback',\n+      files: __dirname + '/fixtures/sync-client-params',\n       skipStart: !isNextDev,\n       skipDeployment: true,\n       buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n@@ -901,70 +512,65 @@ describe.each(\n     }\n \n     if (isNextDev) {\n-      // We don't error the build, but we do show a dev-only error so that users\n-      // migrate to the async usage.\n-      it('should show a collapsed redbox error', async () => {\n+      it('should return `undefined` for `params.slug`', async () => {\n+        const browser = await next.browser('/test')\n+\n+        expect(await browser.elementById('param').text()).toBe('undefined')\n+      })\n+\n+      it('should show a collapsed redbox with a sync access error', async () => {\n         const browser = await next.browser('/test')\n \n         if (isTurbopack) {\n           await expect(browser).toDisplayCollapsedRedbox(`\n-             {\n-               \"description\": \"Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-               \"environmentLabel\": \"Server\",\n-               \"label\": \"Console Error\",\n-               \"source\": \"app/[slug]/page.tsx (32:23) @ ParamsReadingComponent\n-             > 32 |   const slug = params.slug\n-                  |                       ^\",\n-               \"stack\": [\n-                 \"ParamsReadingComponent app/[slug]/page.tsx (32:23)\",\n-                 \"Page app/[slug]/page.tsx (15:11)\",\n-               ],\n-             }\n-            `)\n+           {\n+             \"description\": \"A param property was accessed directly with \\`params.slug\\`. \\`params\\` is now a Promise and should be unwrapped with \\`React.use()\\` before accessing properties of the underlying params object. In this version of Next.js direct access to param properties is still supported to facilitate migration but in a future version you will be required to unwrap \\`params\\` with \\`React.use()\\`.\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Console Error\",\n+             \"source\": \"app/[slug]/page.tsx (20:39) @ ParamsReadingComponent\n+           > 20 |       <span id=\"param\">{String(params.slug)}</span>\n+                |                                       ^\",\n+             \"stack\": [\n+               \"ParamsReadingComponent app/[slug]/page.tsx (20:39)\",\n+               \"Page app/[slug]/page.tsx (11:7)\",\n+             ],\n+           }\n+          `)\n         } else {\n           await expect(browser).toDisplayCollapsedRedbox(`\n            {\n-             \"description\": \"Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": \"Server\",\n+             \"description\": \"A param property was accessed directly with \\`params.slug\\`. \\`params\\` is now a Promise and should be unwrapped with \\`React.use()\\` before accessing properties of the underlying params object. In this version of Next.js direct access to param properties is still supported to facilitate migration but in a future version you will be required to unwrap \\`params\\` with \\`React.use()\\`.\",\n+             \"environmentLabel\": null,\n              \"label\": \"Console Error\",\n-             \"source\": null,\n+             \"source\": \"app/[slug]/page.tsx (20:39) @ ParamsReadingComponent\n+           > 20 |       <span id=\"param\">{String(params.slug)}</span>\n+                |                                       ^\",\n              \"stack\": [\n-               \"ParamsReadingComponent rsc:/Server/webpack-internal:///(rsc)/app/%5Bslug%5D/page.tsx (85:25)\",\n-               \"Page rsc:/Prerender/webpack-internal:///(rsc)/app/%5Bslug%5D/page.tsx (30:106)\",\n+               \"ParamsReadingComponent app/[slug]/page.tsx (20:39)\",\n+               \"Page app/[slug]/page.tsx (11:7)\",\n              ],\n            }\n           `)\n         }\n       })\n-\n-      it('should prefix a log after sync dynamic IO with \"Server\"', async () => {\n-        const browser = await next.browser('/test')\n-        const logs = await browser.log()\n-\n-        assertLog(\n-          logs,\n-          'Server',\n-          'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-        )\n-      })\n     } else {\n-      it('should not error the build when synchronously reading params if all dynamic access is inside a Suspense boundary', async () => {\n+      it('should not error the build when synchronously reading `params.slug`', async () => {\n         try {\n           await next.start()\n         } catch {\n-          throw new Error('expected build not to fail for fully static project')\n+          throw new Error('expected build not to fail')\n         }\n \n         expect(next.cliOutput).toContain(' /[slug] ')\n-        const $ = await next.render$('/test')\n-        expect($('[data-fallback]').length).toBe(2)\n+        const browser = await next.browser('/test')\n+        expect(await browser.elementById('param').text()).toBe('undefined')\n       })\n     }\n   })\n \n-  describe('Sync Dynamic - Without Fallback - params', () => {\n+  describe('Sync Dynamic - server params', () => {\n     const { next, isTurbopack, skipped } = nextTestSetup({\n-      files: __dirname + '/fixtures/sync-params-without-fallback',\n+      files: __dirname + '/fixtures/sync-server-params',\n       skipStart: !isNextDev,\n       skipDeployment: true,\n       buildOptions: inPrerenderDebugMode ? ['--debug-prerender'] : undefined,\n@@ -975,125 +581,58 @@ describe.each(\n     }\n \n     if (isNextDev) {\n-      it('should show a collapsed redbox error', async () => {\n+      it('should return `undefined` for `params.slug`', async () => {\n+        const browser = await next.browser('/test')\n+\n+        expect(await browser.elementById('param').text()).toBe('undefined')\n+      })\n+\n+      it('should show a collapsed redbox with a sync access error', async () => {\n         const browser = await next.browser('/test')\n \n         if (isTurbopack) {\n           await expect(browser).toDisplayCollapsedRedbox(`\n-             {\n-               \"description\": \"Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-               \"environmentLabel\": \"Server\",\n-               \"label\": \"Console Error\",\n-               \"source\": \"app/[slug]/page.tsx (31:23) @ ParamsReadingComponent\n-             > 31 |   const slug = params.slug\n-                  |                       ^\",\n-               \"stack\": [\n-                 \"ParamsReadingComponent app/[slug]/page.tsx (31:23)\",\n-                 \"Page app/[slug]/page.tsx (16:11)\",\n-               ],\n-             }\n-            `)\n+           {\n+             \"description\": \"Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n+             \"environmentLabel\": \"Prerender\",\n+             \"label\": \"Console Error\",\n+             \"source\": \"app/[slug]/page.tsx (24:39) @ ParamsReadingComponent\n+           > 24 |       <span id=\"param\">{String(params.slug)}</span>\n+                |                                       ^\",\n+             \"stack\": [\n+               \"ParamsReadingComponent app/[slug]/page.tsx (24:39)\",\n+               \"Page app/[slug]/page.tsx (12:7)\",\n+             ],\n+           }\n+          `)\n         } else {\n+          // TODO(veil): Source mapping breaks due to double-encoding of the\n+          // square brackets.\n           await expect(browser).toDisplayCollapsedRedbox(`\n            {\n              \"description\": \"Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-             \"environmentLabel\": \"Server\",\n+             \"environmentLabel\": \"Prerender\",\n              \"label\": \"Console Error\",\n              \"source\": null,\n              \"stack\": [\n-               \"ParamsReadingComponent rsc:/Server/webpack-internal:///(rsc)/app/%5Bslug%5D/page.tsx (74:25)\",\n-               \"Page rsc:/Prerender/webpack-internal:///(rsc)/app/%5Bslug%5D/page.tsx (30:106)\",\n+               \"ParamsReadingComponent rsc:/Prerender/webpack-internal:///(rsc)/app/%5Bslug%5D/page.tsx (51:41)\",\n+               \"Page rsc:/Prerender/webpack-internal:///(rsc)/app/%5Bslug%5D/page.tsx (23:88)\",\n              ],\n            }\n           `)\n         }\n       })\n-\n-      it('should prefix a log after sync dynamic IO with \"Server\"', async () => {\n-        const browser = await next.browser('/test')\n-        const logs = await browser.log()\n-\n-        assertLog(\n-          logs,\n-          'Server',\n-          'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-        )\n-      })\n     } else {\n-      it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n+      it('should not error the build when synchronously reading `params.slug`', async () => {\n         try {\n-          await next.build()\n+          await next.start()\n         } catch {\n-          // we expect the build to fail\n+          throw new Error('expected build not to fail')\n         }\n \n-        const output = getPrerenderOutput(next.cliOutput, {\n-          isMinified: !inPrerenderDebugMode,\n-        })\n-\n-        if (isTurbopack) {\n-          if (inPrerenderDebugMode) {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at Reflect.get (<anonymous>)\n-                 at ParamsReadingComponent (turbopack:///[project]/app/[slug]/page.tsx:31:22)\n-               29 | async function ParamsReadingComponent({ params }) {\n-               30 |   await new Promise((r) => process.nextTick(r))\n-             > 31 |   const slug = params.slug\n-                  |                      ^\n-               32 |\n-               33 |   console.log(\n-               34 |     'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-             Error occurred prerendering page \"/[slug]\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-             > Export encountered errors on following paths:\n-             \t/[slug]/page: /[slug]\"\n-            `)\n-          } else {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at a (<next-dist-dir>)\n-                 at b (<next-dist-dir>)\n-                 at c (<anonymous>)\n-                 at d (<next-dist-dir>)\n-                 at e (<next-dist-dir>)\n-                 at f (<next-dist-dir>)\n-             Error occurred prerendering page \"/[slug]\". Read more: https://nextjs.org/docs/messages/prerender-error\n-             Export encountered an error on /[slug]/page: /[slug], exiting the build.\"\n-            `)\n-          }\n-        } else {\n-          if (inPrerenderDebugMode) {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at Reflect.get (<anonymous>)\n-                 at ParamsReadingComponent (webpack:///app/[slug]/page.tsx:31:22)\n-               29 | async function ParamsReadingComponent({ params }) {\n-               30 |   await new Promise((r) => process.nextTick(r))\n-             > 31 |   const slug = params.slug\n-                  |                      ^\n-               32 |\n-               33 |   console.log(\n-               34 |     'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-             Error occurred prerendering page \"/[slug]\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-             > Export encountered errors on following paths:\n-             \t/[slug]/page: /[slug]\"\n-            `)\n-          } else {\n-            expect(output).toMatchInlineSnapshot(`\n-             \"Error: Route \"/[slug]\" used \\`params.slug\\`. \\`params\\` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\n-                 at a (<next-dist-dir>)\n-                 at b (<next-dist-dir>)\n-                 at c (<anonymous>)\n-                 at d (<next-dist-dir>)\n-                 at e (<next-dist-dir>)\n-                 at f (<next-dist-dir>)\n-             Error occurred prerendering page \"/[slug]\". Read more: https://nextjs.org/docs/messages/prerender-error\n-             Export encountered an error on /[slug]/page: /[slug], exiting the build.\"\n-            `)\n-          }\n-        }\n+        expect(next.cliOutput).toContain(' /[slug] ')\n+        const browser = await next.browser('/test')\n+        expect(await browser.elementById('param').text()).toBe('undefined')\n       })\n     }\n   })"
        },
        {
            "sha": "c8d23a16b718e7501109a8ca993dc545c44cb7b7",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-params/app/[slug]/page.tsx",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fapp%2F%5Bslug%5D%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -0,0 +1,23 @@\n+'use client'\n+\n+export default function Page({ params }) {\n+  return (\n+    <>\n+      <p>\n+        This page accesses params synchronously. This does not trigger dynamic,\n+        and the build should succeed. In dev mode, we do log an error for the\n+        sync access though.\n+      </p>\n+      <ParamsReadingComponent params={params} />\n+    </>\n+  )\n+}\n+\n+function ParamsReadingComponent({ params }) {\n+  return (\n+    <div>\n+      this component read the `slug` param synchronously:{' '}\n+      <span id=\"param\">{String(params.slug)}</span>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-params/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fapp%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-with-fallback/app/layout.tsx"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-params/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-params%2Fnext.config.js?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-with-fallback/next.config.js"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-with-fallback/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "8f81a5ce9aad44e8605eac82674ed7be55a2a66c",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-with-fallback/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 78,
            "changes": 78,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fapp%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,78 +0,0 @@\n-'use client'\n-\n-import { Suspense, use } from 'react'\n-import { type UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-type SearchParams = { foo: string | string[] | undefined }\n-export default function Page(props: { searchParams: Promise<SearchParams> }) {\n-  return (\n-    <>\n-      <p>\n-        This page accesses searchParams synchronously but it does so late enough\n-        in the render that all unfinished sub-trees have a defined Suspense\n-        boundary. This is fine and doesn't need to error the build.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <SearchParamsReadingComponent searchParams={props.searchParams} />\n-        </IndirectionOne>\n-      </Suspense>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionTwo>\n-          <LongRunningComponent />\n-        </IndirectionTwo>\n-      </Suspense>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-function SearchParamsReadingComponent({\n-  searchParams,\n-}: {\n-  searchParams: Promise<SearchParams>\n-}) {\n-  if (typeof window === 'undefined') {\n-    use(new Promise((r) => process.nextTick(r)))\n-  }\n-  const fooParams = (\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  ).foo\n-  return <div>this component read the `foo` search param: {fooParams}</div>\n-}\n-\n-function LongRunningComponent() {\n-  if (typeof window === 'undefined') {\n-    use(\n-      new Promise((r) =>\n-        process.nextTick(async () => {\n-          await 1\n-          process.nextTick(r)\n-        })\n-      )\n-    )\n-  }\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync searchParams access happens.\n-    </div>\n-  )\n-}\n-\n-function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component renders synchronously. It should be finished before sync IO\n-      is accessed in the other component.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-without-fallback/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "591cd134173968874c1f81e3a9efd12f51f0e956",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-without-fallback/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 76,
            "changes": 76,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fapp%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,76 +0,0 @@\n-'use client'\n-\n-import { Suspense, use } from 'react'\n-import { type UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-type SearchParams = { foo: string | string[] | undefined }\n-export default function Page(props: { searchParams: Promise<SearchParams> }) {\n-  return (\n-    <>\n-      <p>\n-        This page accesses searchParams synchronously and it does it early\n-        enough that some sibling component trees are not finished and they do\n-        not have a parent Suspense boundary above them.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <SearchParamsReadingComponent searchParams={props.searchParams} />\n-        </IndirectionOne>\n-      </Suspense>\n-      <IndirectionTwo>\n-        <LongRunningComponent />\n-      </IndirectionTwo>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-function SearchParamsReadingComponent({\n-  searchParams,\n-}: {\n-  searchParams: Promise<SearchParams>\n-}) {\n-  if (typeof window === 'undefined') {\n-    use(new Promise((r) => process.nextTick(r)))\n-  }\n-  const fooParams = (\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  ).foo\n-  return <div>this component read the `foo` search param: {fooParams}</div>\n-}\n-\n-function LongRunningComponent() {\n-  if (typeof window === 'undefined') {\n-    use(\n-      new Promise((r) =>\n-        process.nextTick(async () => {\n-          await 1\n-          process.nextTick(r)\n-        })\n-      )\n-    )\n-  }\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync searchParams access happens.\n-    </div>\n-  )\n-}\n-\n-function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component renders synchronously. It should be finished before sync IO\n-      is accessed in the other component.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fapp%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-without-fallback/app/layout.tsx"
        },
        {
            "sha": "eea10be7fc348a64505f83ef193841332ae04875",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search/app/page.tsx",
            "status": "added",
            "additions": 33,
            "deletions": 0,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fapp%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -0,0 +1,33 @@\n+'use client'\n+\n+import { type UnsafeUnwrappedSearchParams } from 'next/server'\n+\n+type SearchParams = { foo: string | string[] | undefined }\n+export default function Page(props: { searchParams: Promise<SearchParams> }) {\n+  return (\n+    <>\n+      <p>\n+        This page accesses searchParams synchronously. This does not trigger\n+        dynamic, and the build should succeed. In dev mode, we do log an error\n+        for the sync access though.\n+      </p>\n+      <SearchParamsReadingComponent searchParams={props.searchParams} />\n+    </>\n+  )\n+}\n+\n+function SearchParamsReadingComponent({\n+  searchParams,\n+}: {\n+  searchParams: Promise<SearchParams>\n+}) {\n+  const fooParam = (\n+    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n+  ).foo\n+  return (\n+    <div>\n+      this component reads the `foo` search param:{' '}\n+      <span id=\"foo-param\">{String(fooParam)}</span>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search%2Fnext.config.js?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-without-fallback/next.config.js"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-with-fallback/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "93b21fed775c1f5ff3d4a8ab6dddffc2467087c2",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-with-fallback/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 72,
            "changes": 72,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fapp%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,72 +0,0 @@\n-import { Suspense } from 'react'\n-import { cookies, type UnsafeUnwrappedCookies } from 'next/headers'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-export default async function Page() {\n-  return (\n-    <>\n-      <p>\n-        This page accesses cookies synchronously but it does so late enough in\n-        the render that all unfinished sub-trees have a defined Suspense\n-        boundary. This is fine and doesn't need to error the build.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <CookiesReadingComponent />\n-        </IndirectionOne>\n-      </Suspense>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionTwo>\n-          <LongRunningComponent />\n-        </IndirectionTwo>\n-      </Suspense>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-async function CookiesReadingComponent() {\n-  await new Promise((r) => process.nextTick(r))\n-  const token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n-\n-  console.log(\n-    'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-  )\n-\n-  return (\n-    <div>\n-      this component read the `token` cookie synchronously: {token?.value}\n-    </div>\n-  )\n-}\n-\n-async function LongRunningComponent() {\n-  await new Promise((r) =>\n-    process.nextTick(async () => {\n-      await 1\n-      process.nextTick(r)\n-    })\n-  )\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync cookies call happens.\n-    </div>\n-  )\n-}\n-\n-async function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component runs quickly (in a microtask). It should be finished before\n-      the sync cookies call is triggered.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-without-fallback/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "0ebec0c88de2205799a2a20a4f939888ce92a876",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-without-fallback/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 67,
            "changes": 67,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fapp%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,67 +0,0 @@\n-import { Suspense } from 'react'\n-import { cookies, type UnsafeUnwrappedCookies } from 'next/headers'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-export default async function Page() {\n-  return (\n-    <>\n-      <p>\n-        This page accesses cookies synchronously and it triggers dynamic before\n-        another component is finished which doesn't define a fallback UI with\n-        Suspense. This is considered a build error and the message should\n-        clearly indicate that it was caused by a synchronous dynamic API usage.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <CookiesReadingComponent />\n-        </IndirectionOne>\n-      </Suspense>\n-      <IndirectionTwo>\n-        <LongRunningComponent />\n-      </IndirectionTwo>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-async function CookiesReadingComponent() {\n-  await new Promise((r) => process.nextTick(r))\n-  const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n-\n-  console.log(\n-    'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-  )\n-\n-  return <div>this component read the `token` cookie synchronously</div>\n-}\n-\n-async function LongRunningComponent() {\n-  await new Promise((r) =>\n-    process.nextTick(async () => {\n-      await 1\n-      process.nextTick(r)\n-    })\n-  )\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync cookies call happens.\n-    </div>\n-  )\n-}\n-\n-async function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component runs quickly (in a microtask). It should be finished before\n-      the sync cookies call is triggered.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fapp%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-with-fallback/app/layout.tsx"
        },
        {
            "sha": "102b1926b1e905b048a4e54b0414cca1af373333",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies/app/page.tsx",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fapp%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -0,0 +1,19 @@\n+import { cookies, type UnsafeUnwrappedCookies } from 'next/headers'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page accesses cookies synchronously. This triggers a type error. In\n+        dev mode, we also log an explicit error that `cookies()` should be\n+        awaited.\n+      </p>\n+      <CookiesReadingComponent />\n+    </>\n+  )\n+}\n+\n+async function CookiesReadingComponent() {\n+  const _token = (cookies() as unknown as UnsafeUnwrappedCookies).get('token')\n+  return <div>this component reads the `token` cookie synchronously</div>\n+}"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies%2Fnext.config.js?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-with-fallback/next.config.js"
        },
        {
            "sha": "c2fe27f1f1ea92f2fe2d12904656c641be9ac54b",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-draft-mode/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-draft-mode%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-draft-mode%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-draft-mode%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,5 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "f9e49071c91a1be494225f8c42681a31ce29af70",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-draft-mode/app/page.tsx",
            "status": "modified",
            "additions": 12,
            "deletions": 15,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-draft-mode%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-draft-mode%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-draft-mode%2Fapp%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,7 +1,6 @@\n-import { Suspense } from 'react'\n import { draftMode, UnsafeUnwrappedDraftMode } from 'next/headers'\n-\n-import { IndirectionOne } from './indirection'\n+import { connection } from 'next/server'\n+import { Suspense } from 'react'\n \n export default async function Page() {\n   return (\n@@ -11,10 +10,9 @@ export default async function Page() {\n         trigger dynamic, and the build should succeed. In dev mode, we do log an\n         error for the sync access though.\n       </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <DraftModeReadingComponent />\n-        </IndirectionOne>\n+      <DraftModeReadingComponent />\n+      <Suspense>\n+        <Dynamic />\n       </Suspense>\n     </>\n   )\n@@ -24,19 +22,18 @@ async function DraftModeReadingComponent() {\n   await new Promise((r) => process.nextTick(r))\n   const isEnabled = (draftMode() as unknown as UnsafeUnwrappedDraftMode)\n     .isEnabled\n-\n-  console.log(\n-    'This log should be prefixed with the \"Prerender\" environment, because the sync access above does not lead to an abort.'\n-  )\n-\n   return (\n     <div>\n       this component read the draftMode isEnabled status synchronously:{' '}\n-      <span id=\"draft-mode\">{isEnabled.toString()}</span>\n+      <span id=\"draft-mode\">{String(isEnabled)}</span>\n     </div>\n   )\n }\n \n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n+// This component ensures that we're creating a partially prerendered page, so\n+// that we also test that there is no sync draftMode defined during the resume.\n+async function Dynamic() {\n+  await connection()\n+\n+  return null\n }"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers-with-fallback/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-with-fallback%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-with-fallback%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-with-fallback%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "c25f904a6d6e4303b2e894e62473238deac2f6e2",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers-with-fallback/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 74,
            "changes": 74,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-with-fallback%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-with-fallback%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-with-fallback%2Fapp%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,74 +0,0 @@\n-import { Suspense } from 'react'\n-import { headers, UnsafeUnwrappedHeaders } from 'next/headers'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-export default async function Page() {\n-  return (\n-    <>\n-      <p>\n-        This page accesses headers synchronously but it does so late enough in\n-        the render that all unfinished sub-trees have a defined Suspense\n-        boundary. This is fine and doesn't need to error the build.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <HeadersReadingComponent />\n-        </IndirectionOne>\n-      </Suspense>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionTwo>\n-          <LongRunningComponent />\n-        </IndirectionTwo>\n-      </Suspense>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-async function HeadersReadingComponent() {\n-  await new Promise((r) => process.nextTick(r))\n-  const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n-    'user-agent'\n-  )\n-\n-  console.log(\n-    'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-  )\n-\n-  return (\n-    <div>\n-      this component read the `user-agent` header synchronously: {userAgent}\n-    </div>\n-  )\n-}\n-\n-async function LongRunningComponent() {\n-  await new Promise((r) =>\n-    process.nextTick(async () => {\n-      await 1\n-      process.nextTick(r)\n-    })\n-  )\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync headers call happens.\n-    </div>\n-  )\n-}\n-\n-async function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component runs quickly (in a microtask). It should be finished before\n-      the sync headers call is triggered.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers-without-fallback/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-without-fallback%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-without-fallback%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-without-fallback%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "54ecba97359cb0e585f63d67871176a5ce8242a5",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers-without-fallback/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 73,
            "changes": 73,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-without-fallback%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-without-fallback%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers-without-fallback%2Fapp%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,73 +0,0 @@\n-import { Suspense } from 'react'\n-import { headers, type UnsafeUnwrappedHeaders } from 'next/headers'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-export default async function Page() {\n-  return (\n-    <>\n-      <p>\n-        This page accesses headers synchronously and it triggers dynamic before\n-        another component is finished which doesn't define a fallback UI with\n-        Suspense. This is considered a build error and the message should\n-        clearly indicate that it was caused by a synchronous dynamic API usage.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <HeadersReadingComponent />\n-        </IndirectionOne>\n-      </Suspense>\n-      <IndirectionTwo>\n-        <LongRunningComponent />\n-      </IndirectionTwo>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-async function HeadersReadingComponent() {\n-  await new Promise((r) => process.nextTick(r))\n-  const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n-    'user-agent'\n-  )\n-\n-  console.log(\n-    'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-  )\n-\n-  return (\n-    <div>\n-      this component read the `user-agent` header synchronously: {userAgent}\n-    </div>\n-  )\n-}\n-\n-async function LongRunningComponent() {\n-  await new Promise((r) =>\n-    process.nextTick(async () => {\n-      await 1\n-      process.nextTick(r)\n-    })\n-  )\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync headers call happens.\n-    </div>\n-  )\n-}\n-\n-async function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component runs quickly (in a microtask). It should be finished before\n-      the sync headers call is triggered.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fapp%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-without-fallback/app/layout.tsx"
        },
        {
            "sha": "be502eee8d0fdc228bef73e6c153bdae700017df",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers/app/page.tsx",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fapp%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -0,0 +1,25 @@\n+import { headers, type UnsafeUnwrappedHeaders } from 'next/headers'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page accesses headers synchronously. This triggers a type error. In\n+        dev mode, we also log an explicit error that `headers()` should be\n+        awaited.\n+      </p>\n+      <HeadersReadingComponent />\n+    </>\n+  )\n+}\n+\n+async function HeadersReadingComponent() {\n+  const userAgent = (headers() as unknown as UnsafeUnwrappedHeaders).get(\n+    'user-agent'\n+  )\n+  return (\n+    <div>\n+      this component reads the `user-agent` header synchronously: {userAgent}\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-headers%2Fnext.config.js?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-without-fallback/next.config.js"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-params-with-fallback/app/[slug]/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2F%5Bslug%5D%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2F%5Bslug%5D%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2F%5Bslug%5D%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "6894f8a086076b4c3a6d783cb34a942dbb09e4b1",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-params-with-fallback/app/[slug]/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 67,
            "changes": 67,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2F%5Bslug%5D%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,67 +0,0 @@\n-import { Suspense } from 'react'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-export default async function Page({ params }) {\n-  return (\n-    <>\n-      <p>\n-        This page accesses params synchronously but it does so late enough in\n-        the render that all unfinished sub-trees have a defined Suspense\n-        boundary. This is fine and doesn't need to error the build.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <ParamsReadingComponent params={params} />\n-        </IndirectionOne>\n-      </Suspense>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionTwo>\n-          <LongRunningComponent />\n-        </IndirectionTwo>\n-      </Suspense>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-async function ParamsReadingComponent({ params }) {\n-  await new Promise((r) => process.nextTick(r))\n-  const slug = params.slug\n-\n-  console.log(\n-    'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-  )\n-\n-  return <div>this component read the `slug` param synchronously: {slug}</div>\n-}\n-\n-async function LongRunningComponent() {\n-  await new Promise((r) =>\n-    process.nextTick(async () => {\n-      await 1\n-      process.nextTick(r)\n-    })\n-  )\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync params call happens.\n-    </div>\n-  )\n-}\n-\n-async function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component runs quickly (in a microtask). It should be finished before\n-      the sync params call is triggered.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-params-with-fallback/app/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fapp%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,9 +0,0 @@\n-export default function Root({ children }: { children: React.ReactNode }) {\n-  return (\n-    <html>\n-      <body>\n-        <main>{children}</main>\n-      </body>\n-    </html>\n-  )\n-}"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-params-with-fallback/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-with-fallback%2Fnext.config.js?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,10 +0,0 @@\n-/**\n- * @type {import('next').NextConfig}\n- */\n-const nextConfig = {\n-  experimental: {\n-    dynamicIO: true,\n-  },\n-}\n-\n-module.exports = nextConfig"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-params-without-fallback/app/[slug]/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2F%5Bslug%5D%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2F%5Bslug%5D%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2F%5Bslug%5D%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "81590155ca3bbd5d85359659176640b29269bc6f",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-params-without-fallback/app/[slug]/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 66,
            "changes": 66,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2F%5Bslug%5D%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,66 +0,0 @@\n-import { Suspense } from 'react'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-export default async function Page({ params }) {\n-  return (\n-    <>\n-      <p>\n-        This page accesses params synchronously and it triggers dynamic before\n-        another component is finished which doesn't define a fallback UI with\n-        Suspense. This is considered a build error and the message should\n-        clearly indicate that it was caused by a synchronous dynamic API usage.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <ParamsReadingComponent params={params} />\n-        </IndirectionOne>\n-      </Suspense>\n-      <IndirectionTwo>\n-        <LongRunningComponent />\n-      </IndirectionTwo>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-async function ParamsReadingComponent({ params }) {\n-  await new Promise((r) => process.nextTick(r))\n-  const slug = params.slug\n-\n-  console.log(\n-    'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-  )\n-\n-  return <div>this component read the `slug` param synchronously: {slug}</div>\n-}\n-\n-async function LongRunningComponent() {\n-  await new Promise((r) =>\n-    process.nextTick(async () => {\n-      await 1\n-      process.nextTick(r)\n-    })\n-  )\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync params call happens.\n-    </div>\n-  )\n-}\n-\n-async function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component runs quickly (in a microtask). It should be finished before\n-      the sync params call is triggered.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-params-without-fallback/app/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fapp%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,9 +0,0 @@\n-export default function Root({ children }: { children: React.ReactNode }) {\n-  return (\n-    <html>\n-      <body>\n-        <main>{children}</main>\n-      </body>\n-    </html>\n-  )\n-}"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-params-without-fallback/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-params-without-fallback%2Fnext.config.js?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,10 +0,0 @@\n-/**\n- * @type {import('next').NextConfig}\n- */\n-const nextConfig = {\n-  experimental: {\n-    dynamicIO: true,\n-  },\n-}\n-\n-module.exports = nextConfig"
        },
        {
            "sha": "b255162d3a697d6155c7100273d997cd81d08a7a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-params/app/[slug]/page.tsx",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fapp%2F%5Bslug%5D%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -0,0 +1,36 @@\n+import { connection } from 'next/server'\n+import { Suspense } from 'react'\n+\n+export default async function Page({ params }) {\n+  return (\n+    <>\n+      <p>\n+        This page accesses params synchronously. This does not trigger dynamic,\n+        and the build should succeed. In dev mode, we do log an error for the\n+        sync access though.\n+      </p>\n+      <ParamsReadingComponent params={params} />\n+      <Suspense>\n+        <Dynamic />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function ParamsReadingComponent({ params }) {\n+  return (\n+    <div>\n+      this component read the `slug` param synchronously:{' '}\n+      <span id=\"param\">{String(params.slug)}</span>\n+    </div>\n+  )\n+}\n+\n+// This component ensures that we're creating a partially prerendered page, so\n+// that we also test that there are no sync params defined during the\n+// resume.\n+async function Dynamic() {\n+  await connection()\n+\n+  return null\n+}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-params/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fapp%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers-with-fallback/app/layout.tsx"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-params/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-params%2Fnext.config.js?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers-with-fallback/next.config.js"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-with-fallback/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-with-fallback/app/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,9 +0,0 @@\n-export default function Root({ children }: { children: React.ReactNode }) {\n-  return (\n-    <html>\n-      <body>\n-        <main>{children}</main>\n-      </body>\n-    </html>\n-  )\n-}"
        },
        {
            "sha": "f7e57af026fea29a2cc71e62132b7fe9062fb686",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-with-fallback/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 81,
            "changes": 81,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fapp%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,81 +0,0 @@\n-import { Suspense } from 'react'\n-import { type UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-type SearchParams = { foo: string | string[] | undefined }\n-export default async function Page(props: {\n-  searchParams: Promise<SearchParams>\n-}) {\n-  return (\n-    <>\n-      <p>\n-        This page accesses searchParams synchronously but it does so late enough\n-        in the render that all unfinished sub-trees have a defined Suspense\n-        boundary. This is fine and doesn't need to error the build.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <SearchParamsReadingComponent searchParams={props.searchParams} />\n-        </IndirectionOne>\n-      </Suspense>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionTwo>\n-          <LongRunningComponent />\n-        </IndirectionTwo>\n-      </Suspense>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-async function SearchParamsReadingComponent({\n-  searchParams,\n-}: {\n-  searchParams: Promise<SearchParams>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const fooParams = (\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  ).foo\n-\n-  console.log(\n-    'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-  )\n-\n-  return (\n-    <div>\n-      this component read the accessed the `foo` search param: {fooParams}\n-    </div>\n-  )\n-}\n-\n-async function LongRunningComponent() {\n-  await new Promise((r) =>\n-    process.nextTick(async () => {\n-      await 1\n-      process.nextTick(r)\n-    })\n-  )\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync searchParams access happens.\n-    </div>\n-  )\n-}\n-\n-async function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component runs quickly (in a microtask). It should be finished before\n-      the sync searchParams access happens.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-with-fallback/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fnext.config.js?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,10 +0,0 @@\n-/**\n- * @type {import('next').NextConfig}\n- */\n-const nextConfig = {\n-  experimental: {\n-    dynamicIO: true,\n-  },\n-}\n-\n-module.exports = nextConfig"
        },
        {
            "sha": "6afe901491d3ac3b46767368abf30a5c90fe715a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-without-fallback/app/indirection.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Findirection.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-'use client'\n-\n-export function IndirectionOne({ children }) {\n-  return children\n-}\n-\n-export function IndirectionTwo({ children }) {\n-  return children\n-}\n-\n-export function IndirectionThree({ children }) {\n-  return children\n-}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-without-fallback/app/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,9 +0,0 @@\n-export default function Root({ children }: { children: React.ReactNode }) {\n-  return (\n-    <html>\n-      <body>\n-        <main>{children}</main>\n-      </body>\n-    </html>\n-  )\n-}"
        },
        {
            "sha": "878b35ae8bd5c40ae4f553622b9c8faaf8ad46d1",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-without-fallback/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 80,
            "changes": 80,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fapp%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,80 +0,0 @@\n-import { Suspense } from 'react'\n-import { type UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { IndirectionOne, IndirectionTwo, IndirectionThree } from './indirection'\n-\n-type SearchParams = { foo: string | string[] | undefined }\n-export default async function Page(props: {\n-  searchParams: Promise<SearchParams>\n-}) {\n-  return (\n-    <>\n-      <p>\n-        This page accesses searchParams synchronously and it triggers dynamic\n-        before another component is finished which doesn't define a fallback UI\n-        with Suspense. This is considered a build error and the message should\n-        clearly indicate that it was caused by a synchronous dynamic API usage.\n-      </p>\n-      <Suspense fallback={<Fallback />}>\n-        <IndirectionOne>\n-          <SearchParamsReadingComponent searchParams={props.searchParams} />\n-        </IndirectionOne>\n-      </Suspense>\n-      <IndirectionTwo>\n-        <LongRunningComponent />\n-      </IndirectionTwo>\n-      <IndirectionThree>\n-        <ShortRunningComponent />\n-      </IndirectionThree>\n-    </>\n-  )\n-}\n-\n-async function SearchParamsReadingComponent({\n-  searchParams,\n-}: {\n-  searchParams: Promise<SearchParams>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const fooParams = (\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  ).foo\n-\n-  console.log(\n-    'This log should be prefixed with the \"Server\" environment, because the sync IO access above advanced the rendering out of the \"Prerender\" environment.'\n-  )\n-\n-  return (\n-    <div>\n-      this component read the accessed the `foo` search param: {fooParams}\n-    </div>\n-  )\n-}\n-\n-async function LongRunningComponent() {\n-  await new Promise((r) =>\n-    process.nextTick(async () => {\n-      await 1\n-      process.nextTick(r)\n-    })\n-  )\n-  return (\n-    <div>\n-      this component took a long time to resolve (but still before the dynamicIO\n-      cutoff). It might not be done before the sync searchParams access happens.\n-    </div>\n-  )\n-}\n-\n-async function ShortRunningComponent() {\n-  return (\n-    <div>\n-      This component runs quickly (in a microtask). It should be finished before\n-      the sync searchParams access happens.\n-    </div>\n-  )\n-}\n-\n-function Fallback() {\n-  return <div data-fallback=\"\">loading...</div>\n-}"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-without-fallback/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fnext.config.js?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,10 +0,0 @@\n-/**\n- * @type {import('next').NextConfig}\n- */\n-const nextConfig = {\n-  experimental: {\n-    dynamicIO: true,\n-  },\n-}\n-\n-module.exports = nextConfig"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fapp%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers-without-fallback/app/layout.tsx"
        },
        {
            "sha": "a9f3fbb9412c9bac8df6842c959e9565d8ea9a60",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search/app/page.tsx",
            "status": "added",
            "additions": 46,
            "deletions": 0,
            "changes": 46,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fapp%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -0,0 +1,46 @@\n+import { connection, type UnsafeUnwrappedSearchParams } from 'next/server'\n+import { Suspense } from 'react'\n+\n+type SearchParams = { foo: string | string[] | undefined }\n+export default async function Page(props: {\n+  searchParams: Promise<SearchParams>\n+}) {\n+  return (\n+    <>\n+      <p>\n+        This page accesses searchParams synchronously. This does not trigger\n+        dynamic, and the build should succeed. In dev mode, we do log an error\n+        for the sync access though.\n+      </p>\n+      <SearchParamsReadingComponent searchParams={props.searchParams} />\n+      <Suspense>\n+        <Dynamic />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SearchParamsReadingComponent({\n+  searchParams,\n+}: {\n+  searchParams: Promise<SearchParams>\n+}) {\n+  const fooParam = (\n+    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n+  ).foo\n+  return (\n+    <div>\n+      this component reads the `foo` search param:{' '}\n+      <span id=\"foo-param\">{String(fooParam)}</span>\n+    </div>\n+  )\n+}\n+\n+// This component ensures that we're creating a partially prerendered page, so\n+// that we also test that there are no sync search params defined during the\n+// resume.\n+async function Dynamic() {\n+  await connection()\n+\n+  return null\n+}"
        },
        {
            "sha": "ac4afcf432196896657dae6577717292a9b9e15e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search/next.config.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search%2Fnext.config.js?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-headers-without-fallback/next.config.js"
        },
        {
            "sha": "e17363431c8f97dcd92a9cbf357f29fd559b2e97",
            "filename": "test/e2e/app-dir/dynamic-io-errors/utils.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 28,
            "changes": 50,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Futils.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,7 +1,6 @@\n // Used to deterministically stub out minified local names in stack traces.\n const abc = 'abcdefghijklmnopqrstuvwxyz'\n const hostElementsUsedInFixtures = ['html', 'body', 'main', 'div']\n-import escapeStringRegexp from 'escape-string-regexp'\n \n export function getPrerenderOutput(\n   cliOutput: string,\n@@ -22,7 +21,7 @@ export function getPrerenderOutput(\n     return `at ${deterministicName} (<anonymous>)`\n   }\n \n-  for (const line of cliOutput.split('\\n')) {\n+  for (let line of cliOutput.split('\\n')) {\n     if (line.includes('Collecting page data')) {\n       foundPrerenderingLine = true\n       continue\n@@ -33,34 +32,29 @@ export function getPrerenderOutput(\n     }\n \n     if (foundPrerenderingLine && !line.includes('Generating static pages')) {\n-      lines.push(\n-        isMinified\n-          ? line\n-              .replace(/at \\S+ \\(.next[^)]+\\)/, replaceNextDistStackFrame)\n-              .replace(/at (\\S+) \\(<anonymous>\\)/, replaceAnonymousStackFrame)\n-          : line.replace(\n-              /at (\\S+) \\((webpack:\\/\\/)\\/src[^)]+\\)/,\n-              `at $1 ($2<next-src>)`\n-            )\n-      )\n+      if (isMinified) {\n+        line = line\n+          .replace(/at \\S+ \\(.next[^)]+\\)/, replaceNextDistStackFrame)\n+          .replace(/at (\\S+) \\(<anonymous>\\)/, replaceAnonymousStackFrame)\n+      } else {\n+        line = line.replace(\n+          /at (\\S+) \\((webpack:\\/\\/)\\/src[^)]+\\)/,\n+          `at $1 ($2<next-src>)`\n+        )\n+      }\n+\n+      line = line\n+        .replace(/digest: '\\d+'/, \"digest: '<error-digest>'\")\n+        // Convert a module function sequence expression, e.g.:\n+        // - (0 , __TURBOPACK__imported__module__1836__.cookies)(...)\n+        // - (0 , c.cookies)(...)\n+        // - (0 , cookies.U)(...)\n+        // - (0 , e.U)(...)\n+        .replace(/\\(0 , \\w+\\.(\\w+)\\)\\(\\.\\.\\.\\)/, '<module-function>()')\n+\n+      lines.push(line)\n     }\n   }\n \n   return lines.join('\\n').trim()\n }\n-\n-export function assertLog(\n-  logs: Array<{ source: string; message: string }>,\n-  environment: 'Server' | 'Prerender' | 'Cache',\n-  message: string\n-) {\n-  expect(logs.map((l) => l.message)).toEqual(\n-    expect.arrayContaining([\n-      expect.stringMatching(\n-        new RegExp(\n-          `^.*${escapeStringRegexp(message)}.*  \\\\b${environment}\\\\b  $`\n-        )\n-      ),\n-    ])\n-  )\n-}"
        },
        {
            "sha": "64e2329cdc7f829a91338adb74f3f2c3ced17bb4",
            "filename": "test/e2e/app-dir/dynamic-io/app/cookies/exercise/page.tsx",
            "status": "renamed",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fexercise%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fexercise%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fexercise%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,7 +1,7 @@\n import { cookies } from 'next/headers'\n \n-import { getSentinelValue } from '../../../getSentinelValue'\n-import { AllComponents } from '../components'\n+import { getSentinelValue } from '../../getSentinelValue'\n+import { AllComponents } from './components'\n \n export default async function Page() {\n   const allCookies = await cookies()",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/cookies/exercise/async/page.tsx"
        },
        {
            "sha": "296426c32fdca3586bedbd5e6425daed30fa7b6e",
            "filename": "test/e2e/app-dir/dynamic-io/app/cookies/exercise/sync/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fexercise%2Fsync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fexercise%2Fsync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fexercise%2Fsync%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,20 +0,0 @@\n-import { cookies, type UnsafeUnwrappedCookies } from 'next/headers'\n-\n-import { getSentinelValue } from '../../../getSentinelValue'\n-import { AllComponents } from '../components'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const allCookies = cookies() as unknown as UnsafeUnwrappedCookies\n-  return (\n-    <>\n-      <p>\n-        This page will exercise a number of APIs on the cookies() instance\n-        directly (without await it as a promise). It should not produce runtime\n-        errors but it will warn in dev\n-      </p>\n-      <AllComponents cookies={allCookies} expression=\"cookies()\" />\n-      <div id=\"page\">{getSentinelValue()}</div>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "f588b89d9b64cd3615866288ed7253c4dc940619",
            "filename": "test/e2e/app-dir/dynamic-io/app/cookies/static-behavior/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fstatic-behavior%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fstatic-behavior%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fstatic-behavior%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,7 +1,7 @@\n import { Suspense } from 'react'\n import { cookies } from 'next/headers'\n \n-import { getSentinelValue } from '../../../getSentinelValue'\n+import { getSentinelValue } from '../../getSentinelValue'\n /**\n  * This test case is constructed to demonstrate how using the async form of cookies can lead to a better\n  * prerender with dynamic IO when PPR is on. There is no difference when PPR is off. When PPR is on the second component",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/cookies/static-behavior/async/page.tsx"
        },
        {
            "sha": "65879d4635a05b903efc5a7cec0d0bb3d13adff3",
            "filename": "test/e2e/app-dir/dynamic-io/app/cookies/static-behavior/sync/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 37,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fstatic-behavior%2Fsync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fstatic-behavior%2Fsync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fcookies%2Fstatic-behavior%2Fsync%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,37 +0,0 @@\n-import { Suspense } from 'react'\n-import { cookies, type UnsafeUnwrappedCookies } from 'next/headers'\n-\n-import { getSentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  // We delay rendering so that metadata can be resolved first\n-  await new Promise((r) => process.nextTick(r))\n-  return (\n-    <Suspense fallback=\"loading...\">\n-      <Suspense fallback=\"inner loading...\">\n-        <Component />\n-      </Suspense>\n-      <ComponentTwo />\n-      <div id=\"page\">{getSentinelValue()}</div>\n-    </Suspense>\n-  )\n-}\n-\n-function Component() {\n-  const cookie = (cookies() as unknown as UnsafeUnwrappedCookies).get(\n-    'x-sentinel'\n-  )\n-  if (cookie && cookie.value) {\n-    return (\n-      <div>\n-        cookie <span id=\"x-sentinel\">{cookie.value}</span>\n-      </div>\n-    )\n-  } else {\n-    return <div>no cookie found</div>\n-  }\n-}\n-\n-function ComponentTwo() {\n-  return <p>footer</p>\n-}"
        },
        {
            "sha": "d598350179b02b3a31385f94aa7c6725e0d3d700",
            "filename": "test/e2e/app-dir/dynamic-io/app/draftmode/ToggleButton.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2FToggleButton.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2FToggleButton.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2FToggleButton.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/draftmode/async/ToggleButton.tsx"
        },
        {
            "sha": "3fa97182e75bec2997415949261341b741b0be8c",
            "filename": "test/e2e/app-dir/dynamic-io/app/draftmode/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,6 +1,6 @@\n import { draftMode } from 'next/headers'\n \n-import { getSentinelValue } from '../../getSentinelValue'\n+import { getSentinelValue } from '../getSentinelValue'\n \n import ToggleButton from './ToggleButton'\n ",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/draftmode/async/page.tsx"
        },
        {
            "sha": "b318afbbcc3035021e29fcab4c09af5221f82c98",
            "filename": "test/e2e/app-dir/dynamic-io/app/draftmode/sync/ToggleButton.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2FToggleButton.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2FToggleButton.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2FToggleButton.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,17 +0,0 @@\n-'use client'\n-\n-import { useRouter } from 'next/navigation'\n-\n-export default function ToggleButton() {\n-  const router = useRouter()\n-\n-  return (\n-    <button\n-      onClick={() =>\n-        fetch('/draftmode/sync/toggle').then(() => router.refresh())\n-      }\n-    >\n-      Toggle Draft Mode\n-    </button>\n-  )\n-}"
        },
        {
            "sha": "abf66e42122b6b4d4cdc0dc92ef09ad796c308fc",
            "filename": "test/e2e/app-dir/dynamic-io/app/draftmode/sync/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 30,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,30 +0,0 @@\n-import { draftMode, type UnsafeUnwrappedDraftMode } from 'next/headers'\n-\n-import { getSentinelValue } from '../../getSentinelValue'\n-\n-import ToggleButton from './ToggleButton'\n-\n-export default async function Page() {\n-  return (\n-    <>\n-      <p>\n-        This page uses `draftMode().isEnabled`. This is now a promise however\n-        reading it during prerender is fine because it is always false during\n-        prerender so we don't expect it to trigger any dynamic behavior.\n-      </p>\n-      <Component />\n-      <ToggleButton />\n-      <div id=\"page\">{getSentinelValue()}</div>\n-    </>\n-  )\n-}\n-\n-async function Component() {\n-  const syncDraftMode = draftMode() as unknown as UnsafeUnwrappedDraftMode\n-  return (\n-    <div>\n-      draftMode enabled?{' '}\n-      <span id=\"draft-mode\">{'' + syncDraftMode.isEnabled}</span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "6a126e9ceead9f7d0e41a806a6f8916ca7c20ad0",
            "filename": "test/e2e/app-dir/dynamic-io/app/draftmode/sync/toggle/route.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2Ftoggle%2Froute.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2Ftoggle%2Froute.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Fsync%2Ftoggle%2Froute.ts?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,13 +0,0 @@\n-import { draftMode, type UnsafeUnwrappedDraftMode } from 'next/headers'\n-\n-export async function GET(request: Request) {\n-  const syncDraftMode = draftMode() as unknown as UnsafeUnwrappedDraftMode\n-  const isEnabled = syncDraftMode.isEnabled\n-  if (isEnabled) {\n-    syncDraftMode.disable()\n-    return new Response('Draft mode is disabled')\n-  } else {\n-    syncDraftMode.enable()\n-    return new Response('Draft mode is enabled')\n-  }\n-}"
        },
        {
            "sha": "1efb29d3d6067e1fc21c049424440724f36f2dc2",
            "filename": "test/e2e/app-dir/dynamic-io/app/draftmode/toggle/route.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Ftoggle%2Froute.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Ftoggle%2Froute.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fdraftmode%2Ftoggle%2Froute.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/draftmode/async/toggle/route.ts"
        },
        {
            "sha": "3600c9bd303e411e561e3d066412216db2d7026f",
            "filename": "test/e2e/app-dir/dynamic-io/app/headers/exercise/page.tsx",
            "status": "renamed",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fexercise%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fexercise%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fexercise%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,7 +1,7 @@\n import { headers } from 'next/headers'\n \n-import { getSentinelValue } from '../../../getSentinelValue'\n-import { AllComponents } from '../components'\n+import { getSentinelValue } from '../../getSentinelValue'\n+import { AllComponents } from './components'\n \n export default async function Page() {\n   const allHeaders = await headers()",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/headers/exercise/async/page.tsx"
        },
        {
            "sha": "ef7ec64313b45d5f32e1d26766fcf9700c771c97",
            "filename": "test/e2e/app-dir/dynamic-io/app/headers/exercise/sync/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 33,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fexercise%2Fsync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fexercise%2Fsync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fexercise%2Fsync%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,33 +0,0 @@\n-import { headers, type UnsafeUnwrappedHeaders } from 'next/headers'\n-\n-import { getSentinelValue } from '../../../getSentinelValue'\n-import { AllComponents } from '../components'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const xSentinelValues = new Set<string>()\n-  // We use the async form here to avoid triggering dev warnings. this is not direclty being\n-  // aserted, it just helps us do assertions in our AllComponents\n-  for (let [headerName, headerValue] of (await headers()).entries()) {\n-    if (headerName.startsWith('x-sentinel')) {\n-      xSentinelValues.add(headerValue)\n-    }\n-  }\n-\n-  const allHeaders = headers() as unknown as UnsafeUnwrappedHeaders\n-  return (\n-    <>\n-      <p>\n-        This page will exercise a number of APIs on the headers() instance\n-        directly (without awaiting it as a promise). It should not produce\n-        runtime errors but it will warn in dev\n-      </p>\n-      <AllComponents\n-        headers={allHeaders}\n-        xSentinelValues={xSentinelValues}\n-        expression=\"headers()\"\n-      />\n-      <div id=\"page\">{getSentinelValue()}</div>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "3ee1fb7660e635dc3106f8fe75f6ba8acba39cd9",
            "filename": "test/e2e/app-dir/dynamic-io/app/headers/static-behavior/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fstatic-behavior%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fstatic-behavior%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fstatic-behavior%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,7 +1,7 @@\n import { Suspense } from 'react'\n import { headers } from 'next/headers'\n \n-import { getSentinelValue } from '../../../getSentinelValue'\n+import { getSentinelValue } from '../../getSentinelValue'\n /**\n  * This test case is constructed to demonstrate how using the async form of cookies can lead to a better\n  * prerender with dynamic IO when PPR is on. There is no difference when PPR is off. When PPR is on the second component",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/headers/static-behavior/async/page.tsx"
        },
        {
            "sha": "cb8d4b3bd2796117e23438ca6664b5b8284d8ca9",
            "filename": "test/e2e/app-dir/dynamic-io/app/headers/static-behavior/sync/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 39,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fstatic-behavior%2Fsync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fstatic-behavior%2Fsync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fheaders%2Fstatic-behavior%2Fsync%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,39 +0,0 @@\n-import { Suspense } from 'react'\n-import { headers, type UnsafeUnwrappedHeaders } from 'next/headers'\n-\n-import { getSentinelValue } from '../../../getSentinelValue'\n-/**\n- * This test case is constructed to demonstrate the deopting behavior of synchronously\n- * accesing dynamic data like headers. <ComponentTwo /> won't be able to render before we abort\n- */\n-export default async function Page() {\n-  // We introduce a delay to allow metadata to resolve fully\n-  await new Promise((r) => process.nextTick(r))\n-  return (\n-    <Suspense fallback=\"loading...\">\n-      <Suspense fallback=\"inner loading...\">\n-        <Component />\n-      </Suspense>\n-      <ComponentTwo />\n-      <div id=\"page\">{getSentinelValue()}</div>\n-    </Suspense>\n-  )\n-}\n-\n-function Component() {\n-  const _headers = headers() as unknown as UnsafeUnwrappedHeaders\n-  const hasHeader = _headers.has('x-sentinel')\n-  if (hasHeader) {\n-    return (\n-      <div>\n-        header <span id=\"x-sentinel\">{_headers.get('x-sentinel')}</span>\n-      </div>\n-    )\n-  } else {\n-    return <div>no header found</div>\n-  }\n-}\n-\n-function ComponentTwo() {\n-  return <p>footer</p>\n-}"
        },
        {
            "sha": "833a22cb03abe856e720840b2c1654448c55f517",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-access/client/layout.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fclient%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fclient%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fclient%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { use } from 'react'\n \n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-access/client/layout.tsx"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-access/client/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fclient%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-access/client/page.tsx"
        },
        {
            "sha": "7f76bfd83d139d84428c475cbb53d4fddffb351a",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-access/server/layout.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fserver%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fserver%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fserver%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default async function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-access/server/layout.tsx"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-access/server/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-access%2Fserver%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-access/server/page.tsx"
        },
        {
            "sha": "3cd8184c9a1600a5a4fc4c175827ad172abaa175",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-has/client/layout.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fclient%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fclient%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fclient%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { use } from 'react'\n \n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-has/client/layout.tsx"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-has/client/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fclient%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-has/client/page.tsx"
        },
        {
            "sha": "f9c1a26209df8545aad6a10a394d1593580df821",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-has/server/layout.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fserver%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fserver%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fserver%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default async function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-has/server/layout.tsx"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-has/server/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-has%2Fserver%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-has/server/page.tsx"
        },
        {
            "sha": "63d6ac640ac0ccef39cee63dc20eb29905d5e4ad",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-spread/client/layout.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fclient%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fclient%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fclient%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { use } from 'react'\n \n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-spread/client/layout.tsx"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-spread/client/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fclient%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-spread/client/page.tsx"
        },
        {
            "sha": "322b4f4f9b5391006d74f59c67fe31207a9aba31",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-spread/server/layout.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fserver%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fserver%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fserver%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default async function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-spread/server/layout.tsx"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/layout-spread/server/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Flayout-spread%2Fserver%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/layout-spread/server/page.tsx"
        },
        {
            "sha": "a78404072ab75658f27ac6a0ea0c43e565043965",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/page-access/client/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-access%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-access%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-access%2Fclient%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { use } from 'react'\n \n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/page-access/client/page.tsx"
        },
        {
            "sha": "b26f26368a1d97c2c40a7f50c9f06f359d4162d2",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/page-access/server/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-access%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-access%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-access%2Fserver%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default async function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/page-access/server/page.tsx"
        },
        {
            "sha": "c25cc85d3d816cc77ae4684322363b5fdb5fd4de",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/page-has/client/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-has%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-has%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-has%2Fclient%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { use } from 'react'\n \n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/page-has/client/page.tsx"
        },
        {
            "sha": "472dd8c96df7b5fb04a254a5660028c62dc040e3",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/page-has/server/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-has%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-has%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-has%2Fserver%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default async function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/page-has/server/page.tsx"
        },
        {
            "sha": "3d17f01513ac83663a3e102a2f72922e8ba9ed5f",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/page-spread/client/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-spread%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-spread%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-spread%2Fclient%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { use } from 'react'\n \n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/page-spread/client/page.tsx"
        },
        {
            "sha": "b8c13a432192368d68b5778921acbff94e26664d",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/page-spread/server/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-spread%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-spread%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fpage-spread%2Fserver%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../getSentinelValue'\n \n export default async function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/async/page-spread/server/page.tsx"
        },
        {
            "sha": "39e5d2479b228dafa1dc4c59224d58fb8094f06b",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-access/client/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 38,
            "changes": 38,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-access%2Fclient%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-access%2Fclient%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-access%2Fclient%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,38 +0,0 @@\n-'use client'\n-\n-import { use } from 'react'\n-\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../../../../client-utils'\n-const waiter = createWaiter()\n-\n-export default function Page({\n-  params,\n-  children,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-  children: React.ReactNode\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  return (\n-    <section>\n-      <p>\n-        This Layout accesses params directly in a client component inside a high\n-        cardinality and low cardinality dynamic params\n-      </p>\n-      <div>\n-        page lowcard: <span id=\"param-lowcard\">{syncParams.lowcard}</span>\n-      </div>\n-      <div>\n-        page highcard: <span id=\"param-highcard\">{syncParams.highcard}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-      {children}\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "64a4443c04c0afe6c83a72cdc727a0025d8deac3",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-access/server/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 30,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-access%2Fserver%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-access%2Fserver%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-access%2Fserver%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,30 +0,0 @@\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-export default async function Page({\n-  params,\n-  children,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-  children: React.ReactNode\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  return (\n-    <section>\n-      <p>\n-        This Layout accesses params directly in a server component inside a high\n-        cardinality and low cardinality dynamic params\n-      </p>\n-      <div>\n-        page lowcard: <span id=\"param-lowcard\">{syncParams.lowcard}</span>\n-      </div>\n-      <div>\n-        page highcard: <span id=\"param-highcard\">{syncParams.highcard}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-      {children}\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "bf6dd140c695c954e2de5f693687db3876926f6f",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-has/client/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 48,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fclient%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fclient%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fclient%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,48 +0,0 @@\n-'use client'\n-\n-import { use } from 'react'\n-\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../../../../client-utils'\n-const waiter = createWaiter()\n-\n-export default function Page({\n-  params,\n-  children,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-  children: React.ReactNode\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  return (\n-    <section>\n-      <p>\n-        This Layout does key checking of the params prop in a client component\n-        without `use`ing first\n-      </p>\n-      <div>\n-        page lowcard:{' '}\n-        <span id=\"param-has-lowcard\">\n-          {'' + Reflect.has(syncParams, 'lowcard')}\n-        </span>\n-      </div>\n-      <div>\n-        page highcard:{' '}\n-        <span id=\"param-has-highcard\">\n-          {'' + Reflect.has(syncParams, 'highcard')}\n-        </span>\n-      </div>\n-      <div>\n-        page foo:{' '}\n-        <span id=\"param-has-foo\">{'' + Reflect.has(syncParams, 'foo')}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-      {children}\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-has/client/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fclient%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,3 +0,0 @@\n-export default async function Page() {\n-  return 'page'\n-}"
        },
        {
            "sha": "07debf876948f1e368413ca8b199d5a9f62fd2f0",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-has/server/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 40,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fserver%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fserver%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fserver%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,40 +0,0 @@\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-export default async function Page({\n-  params,\n-  children,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-  children: React.ReactNode\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  return (\n-    <section>\n-      <p>\n-        This Layout does key checking of the params prop in a server component\n-        without awaiting first\n-      </p>\n-      <div>\n-        page lowcard:{' '}\n-        <span id=\"param-has-lowcard\">\n-          {'' + Reflect.has(syncParams, 'lowcard')}\n-        </span>\n-      </div>\n-      <div>\n-        page highcard:{' '}\n-        <span id=\"param-has-highcard\">\n-          {'' + Reflect.has(syncParams, 'highcard')}\n-        </span>\n-      </div>\n-      <div>\n-        page foo:{' '}\n-        <span id=\"param-has-foo\">{'' + Reflect.has(syncParams, 'foo')}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-      {children}\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-has/server/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-has%2Fserver%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,3 +0,0 @@\n-export default async function Page() {\n-  return 'page'\n-}"
        },
        {
            "sha": "e8541a0485f7fcc57a8f97efb22b4e0f91a0311c",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-spread/client/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 43,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fclient%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fclient%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fclient%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,43 +0,0 @@\n-'use client'\n-\n-import { use } from 'react'\n-\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../../../../client-utils'\n-const waiter = createWaiter()\n-\n-export default function Page({\n-  params,\n-  children,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-  children: React.ReactNode\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  const copied = { ...syncParams }\n-  return (\n-    <section>\n-      <p>\n-        This Layout spreads params in a client component without awaiting or\n-        `use`ing it first\n-      </p>\n-      <div>\n-        page lowcard: <span id=\"param-copied-lowcard\">{copied.lowcard}</span>\n-      </div>\n-      <div>\n-        page highcard: <span id=\"param-copied-highcard\">{copied.highcard}</span>\n-      </div>\n-      <div>\n-        param key count:{' '}\n-        <span id=\"param-key-count\">{Object.keys(copied).length}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-      {children}\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-spread/client/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fclient%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,3 +0,0 @@\n-export default async function Page() {\n-  return 'page'\n-}"
        },
        {
            "sha": "d9b79ec049e0ba3cdb1e8b575282459b9410c838",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-spread/server/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 36,
            "changes": 36,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fserver%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fserver%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fserver%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,36 +0,0 @@\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-import React from 'react'\n-\n-export default async function Page({\n-  params,\n-  children,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-  children: React.ReactNode\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  const copied = { ...syncParams }\n-  return (\n-    <section>\n-      <p>\n-        This Layout spreads params in a server component without awaiting or\n-        `use`ing it first\n-      </p>\n-      <div>\n-        page lowcard: <span id=\"param-copied-lowcard\">{copied.lowcard}</span>\n-      </div>\n-      <div>\n-        page highcard: <span id=\"param-copied-highcard\">{copied.highcard}</span>\n-      </div>\n-      <div>\n-        param key count:{' '}\n-        <span id=\"param-key-count\">{Object.keys(copied).length}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-      {children}\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-spread/server/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Flayout-spread%2Fserver%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,3 +0,0 @@\n-export default async function Page() {\n-  return 'page'\n-}"
        },
        {
            "sha": "a7dcebb8db2af517fd04531cd194aabc104de008",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/page-access/client/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 35,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-access%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-access%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-access%2Fclient%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,35 +0,0 @@\n-'use client'\n-\n-import { use } from 'react'\n-\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../../../../client-utils'\n-const waiter = createWaiter()\n-\n-export default function Page({\n-  params,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  return (\n-    <section>\n-      <p>\n-        This Page accesses params directly in a client component inside a high\n-        cardinality and low cardinality dynamic params\n-      </p>\n-      <div>\n-        page lowcard: <span id=\"param-lowcard\">{syncParams.lowcard}</span>\n-      </div>\n-      <div>\n-        page highcard: <span id=\"param-highcard\">{syncParams.highcard}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "0268de2b1d0c3a4caffe575e11c8dcb287943ce6",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/page-access/server/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 27,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-access%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-access%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-access%2Fserver%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,27 +0,0 @@\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-export default async function Page({\n-  params,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  return (\n-    <section>\n-      <p>\n-        This Page accesses params directly in a server component inside a high\n-        cardinality and low cardinality dynamic params\n-      </p>\n-      <div>\n-        page lowcard: <span id=\"param-lowcard\">{syncParams.lowcard}</span>\n-      </div>\n-      <div>\n-        page highcard: <span id=\"param-highcard\">{syncParams.highcard}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "dc0f0b88f7b886aadf909f903f869716098f6e91",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/page-has/client/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 45,
            "changes": 45,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-has%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-has%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-has%2Fclient%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,45 +0,0 @@\n-'use client'\n-\n-import { use } from 'react'\n-\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../../../../client-utils'\n-const waiter = createWaiter()\n-\n-export default function Page({\n-  params,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  return (\n-    <section>\n-      <p>\n-        This Page does key checking of the params prop in a client component\n-        without `use`ing first\n-      </p>\n-      <div>\n-        page lowcard:{' '}\n-        <span id=\"param-has-lowcard\">\n-          {'' + Reflect.has(syncParams, 'lowcard')}\n-        </span>\n-      </div>\n-      <div>\n-        page highcard:{' '}\n-        <span id=\"param-has-highcard\">\n-          {'' + Reflect.has(syncParams, 'highcard')}\n-        </span>\n-      </div>\n-      <div>\n-        page foo:{' '}\n-        <span id=\"param-has-foo\">{'' + Reflect.has(syncParams, 'foo')}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "e7272343e10ec0c9ac0371c07cf1e6c585889c3b",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/page-has/server/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 37,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-has%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-has%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-has%2Fserver%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,37 +0,0 @@\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-export default async function Page({\n-  params,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  return (\n-    <section>\n-      <p>\n-        This Page does key checking of the params prop in a server component\n-        without awaiting first\n-      </p>\n-      <div>\n-        page lowcard:{' '}\n-        <span id=\"param-has-lowcard\">\n-          {'' + Reflect.has(syncParams, 'lowcard')}\n-        </span>\n-      </div>\n-      <div>\n-        page highcard:{' '}\n-        <span id=\"param-has-highcard\">\n-          {'' + Reflect.has(syncParams, 'highcard')}\n-        </span>\n-      </div>\n-      <div>\n-        page foo:{' '}\n-        <span id=\"param-has-foo\">{'' + Reflect.has(syncParams, 'foo')}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "570d3e85e901bbd5b9ca5db071e0a61d77604dd2",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/page-spread/client/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 40,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-spread%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-spread%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-spread%2Fclient%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,40 +0,0 @@\n-'use client'\n-\n-import { use } from 'react'\n-\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../../../../client-utils'\n-const waiter = createWaiter()\n-\n-export default function Page({\n-  params,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  const copied = { ...syncParams }\n-  return (\n-    <section>\n-      <p>\n-        This Page spreads params in a client component without awaiting or\n-        `use`ing it first\n-      </p>\n-      <div>\n-        page lowcard: <span id=\"param-copied-lowcard\">{copied.lowcard}</span>\n-      </div>\n-      <div>\n-        page highcard: <span id=\"param-copied-highcard\">{copied.highcard}</span>\n-      </div>\n-      <div>\n-        param key count:{' '}\n-        <span id=\"param-key-count\">{Object.keys(copied).length}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "fb623ca42fcd44578c1fdc103c537c1912a84758",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/page-spread/server/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 32,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-spread%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-spread%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fsemantics%2F%5Blowcard%5D%2F%5Bhighcard%5D%2Fsync%2Fpage-spread%2Fserver%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,32 +0,0 @@\n-import { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../getSentinelValue'\n-\n-export default async function Page({\n-  params,\n-}: {\n-  params: Promise<{ lowcard: string; highcard: string }>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  const copied = { ...syncParams }\n-  return (\n-    <section>\n-      <p>\n-        This Page spreads params in a server component without awaiting or\n-        `use`ing it first\n-      </p>\n-      <div>\n-        page lowcard: <span id=\"param-copied-lowcard\">{copied.lowcard}</span>\n-      </div>\n-      <div>\n-        page highcard: <span id=\"param-copied-highcard\">{copied.highcard}</span>\n-      </div>\n-      <div>\n-        param key count:{' '}\n-        <span id=\"param-key-count\">{Object.keys(copied).length}</span>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </section>\n-  )\n-}"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/async/layout/client/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fasync%2Flayout%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fasync%2Flayout%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fasync%2Flayout%2Fclient%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,3 +0,0 @@\n-export default async function Page() {\n-  return 'page'\n-}"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/async/layout/server/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fasync%2Flayout%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fasync%2Flayout%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fasync%2Flayout%2Fserver%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,3 +0,0 @@\n-export default async function Page() {\n-  return 'page'\n-}"
        },
        {
            "sha": "a3cc3a01e73c6c40c0b19dbb2dee3403ce459391",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/layout/client/layout.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fclient%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fclient%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fclient%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { use } from 'react'\n \n-import { getSentinelValue } from '../../../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../../../getSentinelValue'\n \n export default function Layout({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/async/layout/client/layout.tsx"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/layout/client/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fclient%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-access/client/page.tsx"
        },
        {
            "sha": "ca671bb150416ef704a536fd9744524fccf997ca",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/layout/server/layout.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fserver%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fserver%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fserver%2Flayout.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../../../getSentinelValue'\n \n export default async function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/async/layout/server/layout.tsx"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/layout/server/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Flayout%2Fserver%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/semantics/[lowcard]/[highcard]/sync/layout-access/server/page.tsx"
        },
        {
            "sha": "7185877c1de1368b52b5b01108351842ee652828",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/page/client/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fpage%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fpage%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fpage%2Fclient%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { use } from 'react'\n \n-import { getSentinelValue } from '../../../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../../../getSentinelValue'\n \n export default function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/async/page/client/page.tsx"
        },
        {
            "sha": "c62527d2f6c48fdf40e2b4b667f41ec97ef4f426",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/page/server/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fpage%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fpage%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fpage%2Fserver%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../../../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../../../../../../getSentinelValue'\n \n export default async function Page({\n   params,",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/async/page/server/page.tsx"
        },
        {
            "sha": "e5c928098941868c6c227c383d656ea6381dc909",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/sync/layout/client/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 77,
            "changes": 77,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fclient%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fclient%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fclient%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,77 +0,0 @@\n-'use client'\n-\n-import { use } from 'react'\n-\n-import type { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../../../../../../client-utils'\n-const waiter = createWaiter()\n-\n-export default function Layout({\n-  params,\n-  children,\n-}: {\n-  params: Promise<{ dyn: string; then: string; value: string; status: string }>\n-  children: React.ReactNode\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  const copied = { ...syncParams }\n-  return (\n-    <section>\n-      <p>\n-        This Layout accesses params that have name collisions with Promise\n-        properties. When synchronous access is available we assert that you can\n-        access non colliding param names directly and all params if you await\n-      </p>\n-      <ul>\n-        <li>\n-          dyn: <span id=\"param-dyn\">{getValueAsString(syncParams.dyn)}</span>\n-        </li>\n-        <li>\n-          then:{' '}\n-          <span id=\"param-then\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect then to be unavailable on the syncParams type\n-              syncParams.then\n-            )}\n-          </span>\n-        </li>\n-        <li>\n-          value:{' '}\n-          <span id=\"param-value\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect value to be unavailable on the syncParams type\n-              syncParams.value\n-            )}\n-          </span>\n-        </li>\n-        <li>\n-          status:{' '}\n-          <span id=\"param-status\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect status to be unavailable on the syncParams type\n-              syncParams.status\n-            )}\n-          </span>\n-        </li>\n-      </ul>\n-      <div>\n-        copied: <pre>{JSON.stringify(copied)}</pre>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-      {children}\n-    </section>\n-  )\n-}\n-\n-function getValueAsString(value: any) {\n-  if (typeof value === 'string') {\n-    return value\n-  }\n-\n-  return String(value)\n-}"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/sync/layout/client/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fclient%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,3 +0,0 @@\n-export default async function Page() {\n-  return 'page'\n-}"
        },
        {
            "sha": "dbb3fdacf9a868cef0bca658b9e7a3253f593748",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/sync/layout/server/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 69,
            "changes": 69,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fserver%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fserver%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fserver%2Flayout.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,69 +0,0 @@\n-import type { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../../../getSentinelValue'\n-\n-export default async function Page({\n-  params,\n-  children,\n-}: {\n-  params: Promise<{ dyn: string; then: string; value: string; status: string }>\n-  children: React.ReactNode\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  const copied = { ...syncParams }\n-  return (\n-    <section>\n-      <p>\n-        This Layout accesses params that have name collisions with Promise\n-        properties. When synchronous access is available we assert that you can\n-        access non colliding param names directly and all params if you await\n-      </p>\n-      <ul>\n-        <li>\n-          dyn: <span id=\"param-dyn\">{getValueAsString(syncParams.dyn)}</span>\n-        </li>\n-        <li>\n-          then:{' '}\n-          <span id=\"param-then\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect then to be unavailable on the syncParams type\n-              syncParams.then\n-            )}\n-          </span>\n-        </li>\n-        <li>\n-          value:{' '}\n-          <span id=\"param-value\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect value to be unavailable on the syncParams type\n-              syncParams.value\n-            )}\n-          </span>\n-        </li>\n-        <li>\n-          status:{' '}\n-          <span id=\"param-status\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect status to be unavailable on the syncParams type\n-              syncParams.status\n-            )}\n-          </span>\n-        </li>\n-      </ul>\n-      <div>\n-        copied: <pre>{JSON.stringify(copied)}</pre>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-      {children}\n-    </section>\n-  )\n-}\n-\n-function getValueAsString(value: any) {\n-  if (typeof value === 'string') {\n-    return value\n-  }\n-\n-  return String(value)\n-}"
        },
        {
            "sha": "d0b3a9ca484f8862db24faea800376d4b0767bb8",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/sync/layout/server/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Flayout%2Fserver%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,3 +0,0 @@\n-export default async function Page() {\n-  return 'page'\n-}"
        },
        {
            "sha": "3da7091d3e063bdefd33d8a2e67e239086a8aaa7",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/sync/page/client/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 74,
            "changes": 74,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Fpage%2Fclient%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Fpage%2Fclient%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Fpage%2Fclient%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,74 +0,0 @@\n-'use client'\n-\n-import { use } from 'react'\n-\n-import type { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../../../../../../client-utils'\n-const waiter = createWaiter()\n-\n-export default function Page({\n-  params,\n-}: {\n-  params: Promise<{ dyn: string; then: string; value: string; status: string }>\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  const copied = { ...syncParams }\n-  return (\n-    <section>\n-      <p>\n-        This Page accesses params that have name collisions with Promise\n-        properties. When synchronous access is available we assert that you can\n-        access non colliding param names directly and all params if you await\n-      </p>\n-      <ul>\n-        <li>\n-          dyn: <span id=\"param-dyn\">{getValueAsString(syncParams.dyn)}</span>\n-        </li>\n-        <li>\n-          then:{' '}\n-          <span id=\"param-then\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect then to be unavailable on the syncParams type\n-              syncParams.then\n-            )}\n-          </span>\n-        </li>\n-        <li>\n-          value:{' '}\n-          <span id=\"param-value\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect value to be unavailable on the syncParams type\n-              syncParams.value\n-            )}\n-          </span>\n-        </li>\n-        <li>\n-          status:{' '}\n-          <span id=\"param-status\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect status to be unavailable on the syncParams type\n-              syncParams.status\n-            )}\n-          </span>\n-        </li>\n-      </ul>\n-      <div>\n-        copied: <pre>{JSON.stringify(copied)}</pre>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </section>\n-  )\n-}\n-\n-function getValueAsString(value: any) {\n-  if (typeof value === 'string') {\n-    return value\n-  }\n-\n-  return String(value)\n-}"
        },
        {
            "sha": "9c0fdaaf36e435a8a0917add715ee586a4e2856e",
            "filename": "test/e2e/app-dir/dynamic-io/app/params/shadowing/[dyn]/[then]/[value]/[status]/sync/page/server/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 66,
            "changes": 66,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Fpage%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Fpage%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fparams%2Fshadowing%2F%5Bdyn%5D%2F%5Bthen%5D%2F%5Bvalue%5D%2F%5Bstatus%5D%2Fsync%2Fpage%2Fserver%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,66 +0,0 @@\n-import type { UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../../../../../../getSentinelValue'\n-\n-export default async function Page({\n-  params,\n-}: {\n-  params: Promise<{ dyn: string; then: string; value: string; status: string }>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const syncParams = params as unknown as UnsafeUnwrappedParams<typeof params>\n-  const copied = { ...syncParams }\n-  return (\n-    <section>\n-      <p>\n-        This Page accesses params that have name collisions with Promise\n-        properties. When synchronous access is available we assert that you can\n-        access non colliding param names directly and all params if you await\n-      </p>\n-      <ul>\n-        <li>\n-          dyn: <span id=\"param-dyn\">{getValueAsString(syncParams.dyn)}</span>\n-        </li>\n-        <li>\n-          then:{' '}\n-          <span id=\"param-then\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect then to be unavailable on the syncParams type\n-              syncParams.then\n-            )}\n-          </span>\n-        </li>\n-        <li>\n-          value:{' '}\n-          <span id=\"param-value\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect value to be unavailable on the syncParams type\n-              syncParams.value\n-            )}\n-          </span>\n-        </li>\n-        <li>\n-          status:{' '}\n-          <span id=\"param-status\">\n-            {getValueAsString(\n-              // @ts-expect-error we expect status to be unavailable on the syncParams type\n-              syncParams.status\n-            )}\n-          </span>\n-        </li>\n-      </ul>\n-      <div>\n-        copied: <pre>{JSON.stringify(copied)}</pre>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </section>\n-  )\n-}\n-\n-function getValueAsString(value: any) {\n-  if (typeof value === 'string') {\n-    return value\n-  }\n-\n-  return String(value)\n-}"
        },
        {
            "sha": "4385ba9adcdddb82af1a9a4822d2ab0656ef6a0a",
            "filename": "test/e2e/app-dir/dynamic-io/app/routes/[dyn]/route.ts",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Froutes%2F%5Bdyn%5D%2Froute.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Froutes%2F%5Bdyn%5D%2Froute.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Froutes%2F%5Bdyn%5D%2Froute.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,6 +1,6 @@\n import type { NextRequest } from 'next/server'\n \n-import { getSentinelValue } from '../../../getSentinelValue'\n+import { getSentinelValue } from '../../getSentinelValue'\n \n export async function generateStaticParams() {\n   return [",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/routes/[dyn]/async/route.ts"
        },
        {
            "sha": "41260d96c724d6eac48ef8339d60c40d229a0ea9",
            "filename": "test/e2e/app-dir/dynamic-io/app/routes/[dyn]/sync/route.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 27,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Froutes%2F%5Bdyn%5D%2Fsync%2Froute.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Froutes%2F%5Bdyn%5D%2Fsync%2Froute.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Froutes%2F%5Bdyn%5D%2Fsync%2Froute.ts?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,27 +0,0 @@\n-import type { NextRequest, UnsafeUnwrappedParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../getSentinelValue'\n-\n-export async function generateStaticParams() {\n-  return [\n-    {\n-      dyn: '1',\n-    },\n-  ]\n-}\n-\n-export async function GET(\n-  request: NextRequest,\n-  props: { params: Promise<{ dyn: string }> }\n-) {\n-  const dyn = (\n-    props.params as unknown as UnsafeUnwrappedParams<typeof props.params>\n-  ).dyn\n-  return new Response(\n-    JSON.stringify({\n-      value: getSentinelValue(),\n-      type: 'dynamic params',\n-      param: dyn,\n-    })\n-  )\n-}"
        },
        {
            "sha": "e6fdc5f9e8882c9ae20f5146b4b058d92e320fe4",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/client/use/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fclient%2Fuse%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fclient%2Fuse%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fclient%2Fuse%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -2,7 +2,7 @@\n \n import { Suspense, use } from 'react'\n \n-import { getSentinelValue } from '../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../getSentinelValue'\n \n type AnySearchParams = { [key: string]: string | string[] | undefined }\n ",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/search/async/client/use/page.tsx"
        },
        {
            "sha": "b8ea63eed5a0233fd5ac77466e7a8d2841b1c126",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/server/await/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fserver%2Fawait%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fserver%2Fawait%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fserver%2Fawait%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,6 +1,6 @@\n import { Suspense } from 'react'\n \n-import { getSentinelValue } from '../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../getSentinelValue'\n \n type AnySearchParams = { [key: string]: string | string[] | undefined }\n ",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/search/async/server/await/page.tsx"
        },
        {
            "sha": "670da8df373d4e94350d6cbce46c9cab2fc35f7a",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/server/use/page.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fserver%2Fuse%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fserver%2Fuse%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fserver%2Fuse%2Fpage.tsx?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -1,4 +1,4 @@\n-import { getSentinelValue } from '../../../../getSentinelValue'\n+import { getSentinelValue } from '../../../getSentinelValue'\n \n import { Suspense, use } from 'react'\n ",
            "previous_filename": "test/e2e/app-dir/dynamic-io/app/search/async/server/use/page.tsx"
        },
        {
            "sha": "036166e059af60e8ab367b051e32dca47c8253b0",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/sync/client/access/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 53,
            "changes": 53,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Faccess%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Faccess%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Faccess%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,53 +0,0 @@\n-'use client'\n-\n-import { Suspense, use } from 'react'\n-\n-import type { UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../client-utils'\n-const waiter = createWaiter()\n-\n-type AnySearchParams = { [key: string]: string | string[] | undefined }\n-\n-export default function Page({\n-  searchParams,\n-}: {\n-  searchParams: Promise<AnySearchParams>\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const castedSearchParams =\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  return (\n-    <>\n-      <p>This page access a search param synchronously</p>\n-      <p>The `use` is inside a Suspense boundary</p>\n-      <p>With PPR we expect the page to have a partially static page</p>\n-      <p>Without PPR we expect the page to be dynamic</p>\n-      <Suspense fallback=\"outer loading...\">\n-        <Suspense fallback=\"inner loading...\">\n-          <Component searchParams={castedSearchParams} />\n-        </Suspense>\n-        <ComponentTwo />\n-      </Suspense>\n-    </>\n-  )\n-}\n-\n-function Component({ searchParams }: { searchParams: AnySearchParams }) {\n-  return (\n-    <>\n-      <div>\n-        This component accessed `searchParams.sentinel`: \"\n-        <span id=\"value\">{searchParams.sentinel}</span>\"\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </>\n-  )\n-}\n-\n-function ComponentTwo() {\n-  return null\n-}"
        },
        {
            "sha": "a7cb275bcdb51aa52708d7b76c19e804a95106cc",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/sync/client/has/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 59,
            "changes": 59,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Fhas%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Fhas%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Fhas%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,59 +0,0 @@\n-'use client'\n-\n-import { Suspense, use } from 'react'\n-\n-import type { UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../client-utils'\n-const waiter = createWaiter()\n-\n-type AnySearchParams = { [key: string]: string | string[] | undefined }\n-\n-export default function Page({\n-  searchParams,\n-}: {\n-  searchParams: Promise<AnySearchParams>\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const castedSearchParams =\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  return (\n-    <>\n-      <p>This page access a search param synchronously</p>\n-      <p>The `use` is inside a Suspense boundary</p>\n-      <p>With PPR we expect the page to have a partially static page</p>\n-      <p>Without PPR we expect the page to be dynamic</p>\n-      <Suspense fallback=\"outer loading...\">\n-        <Suspense fallback=\"inner loading...\">\n-          <Component searchParams={castedSearchParams} />\n-        </Suspense>\n-        <ComponentTwo />\n-      </Suspense>\n-    </>\n-  )\n-}\n-\n-function Component({ searchParams }: { searchParams: AnySearchParams }) {\n-  return (\n-    <>\n-      <div>\n-        This component checks if the sentinel search param is defined\n-        <p>\n-          sentinel:{' '}\n-          <span id=\"has-sentinel\">{String('sentinel' in searchParams)}</span>\n-        </p>\n-        <p>\n-          foo: <span id=\"has-foo\">{String('foo' in searchParams)}</span>\n-        </p>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </>\n-  )\n-}\n-\n-function ComponentTwo() {\n-  return null\n-}"
        },
        {
            "sha": "0405e824c3b44e9ea44cd186237c9c1a15b8becf",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/sync/client/spread/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 65,
            "changes": 65,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Fspread%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Fspread%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fclient%2Fspread%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,65 +0,0 @@\n-'use client'\n-\n-import { Suspense, use } from 'react'\n-\n-import type { UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../getSentinelValue'\n-\n-import { createWaiter } from '../../../../client-utils'\n-const waiter = createWaiter()\n-\n-type AnySearchParams = { [key: string]: string | string[] | undefined }\n-\n-export default function Page({\n-  searchParams,\n-}: {\n-  searchParams: Promise<AnySearchParams>\n-}) {\n-  use(waiter.wait())\n-  waiter.cleanup()\n-  const castedSearchParams =\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  return (\n-    <>\n-      <p>This page access a search param synchronously</p>\n-      <p>The `use` is inside a Suspense boundary</p>\n-      <p>With PPR we expect the page to have a partially static page</p>\n-      <p>Without PPR we expect the page to be dynamic</p>\n-      <Suspense fallback=\"outer loading...\">\n-        <Suspense fallback=\"inner loading...\">\n-          <Component searchParams={castedSearchParams} />\n-        </Suspense>\n-        <ComponentTwo />\n-      </Suspense>\n-    </>\n-  )\n-}\n-\n-function Component({ searchParams }: { searchParams: AnySearchParams }) {\n-  const copied = { ...searchParams }\n-  return (\n-    <>\n-      <div>\n-        <p>This component clones search params and then prints</p>\n-        <ul>\n-          {Object.keys(copied).map((k) => {\n-            return (\n-              <li key={k}>\n-                {k}:{' '}\n-                <span data-value={true} id={'value-' + k}>\n-                  {copied[k]}\n-                </span>\n-              </li>\n-            )\n-          })}\n-        </ul>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </>\n-  )\n-}\n-\n-function ComponentTwo() {\n-  return null\n-}"
        },
        {
            "sha": "b8f663697cfd89b5d040a08f39ef4ce6f40d82ac",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/sync/server/access/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 47,
            "changes": 47,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Faccess%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Faccess%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Faccess%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,47 +0,0 @@\n-import { Suspense } from 'react'\n-\n-import type { UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../getSentinelValue'\n-\n-type AnySearchParams = { [key: string]: string | string[] | undefined }\n-\n-export default async function Page({\n-  searchParams,\n-}: {\n-  searchParams: Promise<AnySearchParams>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const castedSearchParams =\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  return (\n-    <>\n-      <p>This page access a search param synchronously</p>\n-      <p>The `use` is inside a Suspense boundary</p>\n-      <p>With PPR we expect the page to have a partially static page</p>\n-      <p>Without PPR we expect the page to be dynamic</p>\n-      <Suspense fallback=\"outer loading...\">\n-        <Suspense fallback=\"inner loading...\">\n-          <Component searchParams={castedSearchParams} />\n-        </Suspense>\n-        <ComponentTwo />\n-      </Suspense>\n-    </>\n-  )\n-}\n-\n-function Component({ searchParams }: { searchParams: AnySearchParams }) {\n-  return (\n-    <>\n-      <div>\n-        This component accessed `searchParams.sentinel`: \"\n-        <span id=\"value\">{searchParams.sentinel}</span>\"\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </>\n-  )\n-}\n-\n-function ComponentTwo() {\n-  return null\n-}"
        },
        {
            "sha": "8d5b18ed85cd204740ab65827235f88ce7f422bb",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/sync/server/has/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 53,
            "changes": 53,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Fhas%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Fhas%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Fhas%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,53 +0,0 @@\n-import { Suspense } from 'react'\n-\n-import type { UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../getSentinelValue'\n-\n-type AnySearchParams = { [key: string]: string | string[] | undefined }\n-\n-export default async function Page({\n-  searchParams,\n-}: {\n-  searchParams: Promise<AnySearchParams>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const castedSearchParams =\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  return (\n-    <>\n-      <p>This page access a search param synchronously</p>\n-      <p>The `use` is inside a Suspense boundary</p>\n-      <p>With PPR we expect the page to have a partially static page</p>\n-      <p>Without PPR we expect the page to be dynamic</p>\n-      <Suspense fallback=\"outer loading...\">\n-        <Suspense fallback=\"inner loading...\">\n-          <Component searchParams={castedSearchParams} />\n-        </Suspense>\n-        <ComponentTwo />\n-      </Suspense>\n-    </>\n-  )\n-}\n-\n-function Component({ searchParams }: { searchParams: AnySearchParams }) {\n-  return (\n-    <>\n-      <div>\n-        This component checks if the sentinel search param is defined\n-        <p>\n-          sentinel:{' '}\n-          <span id=\"has-sentinel\">{String('sentinel' in searchParams)}</span>\n-        </p>\n-        <p>\n-          foo: <span id=\"has-foo\">{String('foo' in searchParams)}</span>\n-        </p>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </>\n-  )\n-}\n-\n-function ComponentTwo() {\n-  return null\n-}"
        },
        {
            "sha": "14ce5eb0b700211b0202b28765de9ad5e314c7af",
            "filename": "test/e2e/app-dir/dynamic-io/app/search/sync/server/spread/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 59,
            "changes": 59,
            "blob_url": "https://github.com/vercel/next.js/blob/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Fspread%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6951729f435f130c11d436ed9b8dabea253a0ee2/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Fspread%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fsearch%2Fsync%2Fserver%2Fspread%2Fpage.tsx?ref=6951729f435f130c11d436ed9b8dabea253a0ee2",
            "patch": "@@ -1,59 +0,0 @@\n-import { Suspense } from 'react'\n-\n-import type { UnsafeUnwrappedSearchParams } from 'next/server'\n-\n-import { getSentinelValue } from '../../../../getSentinelValue'\n-\n-type AnySearchParams = { [key: string]: string | string[] | undefined }\n-\n-export default async function Page({\n-  searchParams,\n-}: {\n-  searchParams: Promise<AnySearchParams>\n-}) {\n-  await new Promise((r) => process.nextTick(r))\n-  const castedSearchParams =\n-    searchParams as unknown as UnsafeUnwrappedSearchParams<typeof searchParams>\n-  return (\n-    <>\n-      <p>This page access a search param synchronously</p>\n-      <p>The `use` is inside a Suspense boundary</p>\n-      <p>With PPR we expect the page to have a partially static page</p>\n-      <p>Without PPR we expect the page to be dynamic</p>\n-      <Suspense fallback=\"outer loading...\">\n-        <Suspense fallback=\"inner loading...\">\n-          <Component searchParams={castedSearchParams} />\n-        </Suspense>\n-        <ComponentTwo />\n-      </Suspense>\n-    </>\n-  )\n-}\n-\n-function Component({ searchParams }: { searchParams: AnySearchParams }) {\n-  const copied = { ...searchParams }\n-  return (\n-    <>\n-      <div>\n-        <p>This component clones search params and then prints</p>\n-        <ul>\n-          {Object.keys(copied).map((k) => {\n-            return (\n-              <li key={k}>\n-                {k}:{' '}\n-                <span data-value={true} id={'value-' + k}>\n-                  {copied[k]}\n-                </span>\n-              </li>\n-            )\n-          })}\n-        </ul>\n-      </div>\n-      <span id=\"page\">{getSentinelValue()}</span>\n-    </>\n-  )\n-}\n-\n-function ComponentTwo() {\n-  return null\n-}"
        },
        {
            "sha": "485c52590f94c23e38b7c3275e778c861c60d82c",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.cookies.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 138,
            "changes": 145,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.cookies.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.cookies.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.cookies.test.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -10,21 +10,8 @@ describe('dynamic-io', () => {\n     return\n   }\n \n-  it('should partially prerender pages that use async cookies', async () => {\n-    let $ = await next.render$('/cookies/static-behavior/async', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#x-sentinel').text()).toBe('hello')\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at buildtime')\n-      expect($('#x-sentinel').text()).toBe('hello')\n-    }\n-  })\n-\n-  it('should partially prerender pages that use sync cookies', async () => {\n-    let $ = await next.render$('/cookies/static-behavior/sync', {})\n+  it('should partially prerender pages that use cookies', async () => {\n+    let $ = await next.render$('/cookies/static-behavior', {})\n     if (isNextDev) {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n@@ -49,8 +36,8 @@ describe('dynamic-io', () => {\n     }\n   })\n \n-  it('should be able to access cookie properties asynchronously', async () => {\n-    let $ = await next.render$('/cookies/exercise/async', {})\n+  it('should be able to access cookie properties', async () => {\n+    let $ = await next.render$('/cookies/exercise', {})\n     let cookieWarnings = next.cliOutput\n       .split('\\n')\n       .filter((l) => l.includes('Route \"/cookies/exercise'))\n@@ -59,165 +46,47 @@ describe('dynamic-io', () => {\n \n     // For...of iteration\n     expect($('#for-of-x-sentinel').text()).toContain('hello')\n-    expect($('#for-of-x-sentinel-path').text()).toContain(\n-      '/cookies/exercise/async'\n-    )\n-    expect($('#for-of-x-sentinel-rand').text()).toContain('x-sentinel-rand')\n-\n-    // ...spread iteration\n-    expect($('#spread-x-sentinel').text()).toContain('hello')\n-    expect($('#spread-x-sentinel-path').text()).toContain(\n-      '/cookies/exercise/async'\n-    )\n-    expect($('#spread-x-sentinel-rand').text()).toContain('x-sentinel-rand')\n-\n-    // cookies().size\n-    expect(parseInt($('#size-cookies').text())).toBeGreaterThanOrEqual(3)\n-\n-    // cookies().get('...') && cookies().getAll('...')\n-    expect($('#get-x-sentinel').text()).toContain('hello')\n-    expect($('#get-x-sentinel-path').text()).toContain(\n-      '/cookies/exercise/async'\n-    )\n-    expect($('#get-x-sentinel-rand').text()).toContain('x-sentinel-rand')\n-\n-    // cookies().has('...')\n-    expect($('#has-x-sentinel').text()).toContain('true')\n-    expect($('#has-x-sentinel-foobar').text()).toContain('false')\n-\n-    // cookies().set('...', '...')\n-    expect($('#set-result-x-sentinel').text()).toContain(\n-      'Cookies can only be modified in a Server Action'\n-    )\n-    expect($('#set-value-x-sentinel').text()).toContain('hello')\n-\n-    // cookies().delete('...', '...')\n-    expect($('#delete-result-x-sentinel').text()).toContain(\n-      'Cookies can only be modified in a Server Action'\n-    )\n-    expect($('#delete-value-x-sentinel').text()).toContain('hello')\n-\n-    // cookies().clear()\n-    expect($('#clear-result').text()).toContain(\n-      'Cookies can only be modified in a Server Action'\n-    )\n-    expect($('#clear-value-x-sentinel').text()).toContain('hello')\n-\n-    // cookies().toString()\n-    expect($('#toString').text()).toContain('x-sentinel=hello')\n-    expect($('#toString').text()).toContain('x-sentinel-path')\n-    expect($('#toString').text()).toContain('x-sentinel-rand=')\n-  })\n-\n-  it('should be able to access cookie properties synchronously', async () => {\n-    let $ = await next.render$('/cookies/exercise/sync', {})\n-    let cookieWarnings = next.cliOutput\n-      .split('\\n')\n-      .filter((l) => l.includes('Route \"/cookies/exercise'))\n-\n-    if (!isNextDev) {\n-      expect(cookieWarnings).toHaveLength(0)\n-    }\n-    let i = 0\n-\n-    // For...of iteration\n-    expect($('#for-of-x-sentinel').text()).toContain('hello')\n-    expect($('#for-of-x-sentinel-path').text()).toContain(\n-      '/cookies/exercise/sync'\n-    )\n+    expect($('#for-of-x-sentinel-path').text()).toContain('/cookies/exercise')\n     expect($('#for-of-x-sentinel-rand').text()).toContain('x-sentinel-rand')\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain(\n-        '`...cookies()` or similar iteration.'\n-      )\n-    }\n \n     // ...spread iteration\n     expect($('#spread-x-sentinel').text()).toContain('hello')\n-    expect($('#spread-x-sentinel-path').text()).toContain(\n-      '/cookies/exercise/sync'\n-    )\n+    expect($('#spread-x-sentinel-path').text()).toContain('/cookies/exercise')\n     expect($('#spread-x-sentinel-rand').text()).toContain('x-sentinel-rand')\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain(\n-        '`...cookies()` or similar iteration.'\n-      )\n-    }\n \n     // cookies().size\n     expect(parseInt($('#size-cookies').text())).toBeGreaterThanOrEqual(3)\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain('`cookies().size`')\n-    }\n \n     // cookies().get('...') && cookies().getAll('...')\n     expect($('#get-x-sentinel').text()).toContain('hello')\n-    expect($('#get-x-sentinel-path').text()).toContain('/cookies/exercise/sync')\n+    expect($('#get-x-sentinel-path').text()).toContain('/cookies/exercise')\n     expect($('#get-x-sentinel-rand').text()).toContain('x-sentinel-rand')\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain(\"`cookies().get('x-sentinel')`\")\n-      expect(cookieWarnings[i++]).toContain(\n-        \"`cookies().get('x-sentinel-path')`\"\n-      )\n-      expect(cookieWarnings[i++]).toContain(\n-        \"`cookies().getAll('x-sentinel-rand')`\"\n-      )\n-    }\n \n     // cookies().has('...')\n     expect($('#has-x-sentinel').text()).toContain('true')\n     expect($('#has-x-sentinel-foobar').text()).toContain('false')\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain(\"`cookies().has('x-sentinel')`\")\n-      expect(cookieWarnings[i++]).toContain(\n-        \"`cookies().has('x-sentinel-foobar')`\"\n-      )\n-    }\n \n     // cookies().set('...', '...')\n     expect($('#set-result-x-sentinel').text()).toContain(\n       'Cookies can only be modified in a Server Action'\n     )\n     expect($('#set-value-x-sentinel').text()).toContain('hello')\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain(\n-        \"`cookies().set('x-sentinel', ...)`\"\n-      )\n-      expect(cookieWarnings[i++]).toContain(\"`cookies().get('x-sentinel')`\")\n-    }\n \n     // cookies().delete('...', '...')\n     expect($('#delete-result-x-sentinel').text()).toContain(\n       'Cookies can only be modified in a Server Action'\n     )\n     expect($('#delete-value-x-sentinel').text()).toContain('hello')\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain(\"`cookies().delete('x-sentinel')`\")\n-      expect(cookieWarnings[i++]).toContain(\"`cookies().get('x-sentinel')`\")\n-    }\n \n     // cookies().clear()\n     expect($('#clear-result').text()).toContain(\n       'Cookies can only be modified in a Server Action'\n     )\n     expect($('#clear-value-x-sentinel').text()).toContain('hello')\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain('`cookies().clear()`')\n-      expect(cookieWarnings[i++]).toContain(\"`cookies().get('x-sentinel')`\")\n-    }\n \n     // cookies().toString()\n     expect($('#toString').text()).toContain('x-sentinel=hello')\n     expect($('#toString').text()).toContain('x-sentinel-path')\n     expect($('#toString').text()).toContain('x-sentinel-rand=')\n-    if (isNextDev) {\n-      expect(cookieWarnings[i++]).toContain(\n-        '`cookies().toString()` or implicit casting'\n-      )\n-    }\n-\n-    if (isNextDev) {\n-      expect(i).toBe(cookieWarnings.length)\n-    }\n   })\n })"
        },
        {
            "sha": "1e28c28815e87186578f4b5f03bc3c8094a72af1",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.draft-mode.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 20,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.draft-mode.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.draft-mode.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.draft-mode.test.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -26,7 +26,7 @@ describe('dynamic-io', () => {\n \n   it('should fully prerender pages that use draftMode', async () => {\n     expect(getLines('Route \"/draftmode')).toEqual([])\n-    let $ = await next.render$('/draftmode/async', {})\n+    let $ = await next.render$('/draftmode', {})\n     if (isNextDev) {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n@@ -38,24 +38,5 @@ describe('dynamic-io', () => {\n       expect($('#draft-mode').text()).toBe('false')\n       expect(getLines('Route \"/draftmode')).toEqual([])\n     }\n-\n-    $ = await next.render$('/draftmode/sync', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#draft-mode').text()).toBe('false')\n-      expect(getLines('Route \"/draftmode')).toEqual([\n-        expect.stringContaining('`draftMode().isEnabled`'),\n-        // TODO need to figure out why deduping isn't working here\n-        expect.stringContaining('`draftMode().isEnabled`'),\n-        // TODO need to figure out why deduping isn't working here\n-        expect.stringContaining('`draftMode().isEnabled`'),\n-      ])\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at buildtime')\n-      expect($('#draft-mode').text()).toBe('false')\n-      expect(getLines('Route \"/draftmode')).toEqual([])\n-    }\n   })\n })"
        },
        {
            "sha": "719748a32bfb68fbf3e2ecb3d88f0c95f1ffae22",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.headers.test.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 167,
            "changes": 175,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.headers.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.headers.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.headers.test.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -10,21 +10,8 @@ describe('dynamic-io', () => {\n     return\n   }\n \n-  it('should partially prerender pages that use async headers', async () => {\n-    let $ = await next.render$('/headers/static-behavior/async', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#x-sentinel').text()).toBe('hello')\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at buildtime')\n-      expect($('#x-sentinel').text()).toBe('hello')\n-    }\n-  })\n-\n-  it('should partially prerender pages that use sync headers', async () => {\n-    let $ = await next.render$('/headers/static-behavior/sync', {})\n+  it('should partially prerender pages that use headers', async () => {\n+    let $ = await next.render$('/headers/static-behavior', {})\n     if (isNextDev) {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n@@ -50,7 +37,7 @@ describe('dynamic-io', () => {\n   })\n \n   it('should be able to access headers properties asynchronously', async () => {\n-    let $ = await next.render$('/headers/exercise/async', {})\n+    let $ = await next.render$('/headers/exercise', {})\n     let cookieWarnings = next.cliOutput\n       .split('\\n')\n       .filter((l) => l.includes('Route \"/headers/exercise'))\n@@ -89,9 +76,7 @@ describe('dynamic-io', () => {\n \n     // (await headers()).forEach(...)\n     expect($('#for-each-x-sentinel').text()).toContain('hello')\n-    expect($('#for-each-x-sentinel-path').text()).toContain(\n-      '/headers/exercise/async'\n-    )\n+    expect($('#for-each-x-sentinel-path').text()).toContain('/headers/exercise')\n     expect($('#for-each-x-sentinel-rand').length).toBe(1)\n \n     // (await headers()).keys(...)\n@@ -101,166 +86,22 @@ describe('dynamic-io', () => {\n \n     // (await headers()).values(...)\n     expect($('[data-class=\"values\"]').text()).toContain('hello')\n-    expect($('[data-class=\"values\"]').text()).toContain(\n-      '/headers/exercise/async'\n-    )\n+    expect($('[data-class=\"values\"]').text()).toContain('/headers/exercise')\n     expect($('[data-class=\"values\"]').length).toBe(3)\n \n     // (await headers()).entries(...)\n     expect($('#entries-x-sentinel').text()).toContain('hello')\n-    expect($('#entries-x-sentinel-path').text()).toContain(\n-      '/headers/exercise/async'\n-    )\n+    expect($('#entries-x-sentinel-path').text()).toContain('/headers/exercise')\n     expect($('#entries-x-sentinel-rand').length).toBe(1)\n \n     // for...of (await headers())\n     expect($('#for-of-x-sentinel').text()).toContain('hello')\n-    expect($('#for-of-x-sentinel-path').text()).toContain(\n-      '/headers/exercise/async'\n-    )\n+    expect($('#for-of-x-sentinel-path').text()).toContain('/headers/exercise')\n     expect($('#for-of-x-sentinel-rand').length).toBe(1)\n \n     // ...(await headers())\n     expect($('#spread-x-sentinel').text()).toContain('hello')\n-    expect($('#spread-x-sentinel-path').text()).toContain(\n-      '/headers/exercise/async'\n-    )\n-    expect($('#spread-x-sentinel-rand').length).toBe(1)\n-  })\n-\n-  it('should be able to access headers properties synchronously', async () => {\n-    let $ = await next.render$('/headers/exercise/sync', {})\n-    let headerWarnings = next.cliOutput\n-      .split('\\n')\n-      .filter((l) => l.includes('Route \"/headers/exercise'))\n-\n-    if (!isNextDev) {\n-      expect(headerWarnings).toHaveLength(0)\n-    }\n-    let i = 0\n-\n-    // headers().append('...', '...')\n-    expect($('#append-result-x-sentinel').text()).toContain(\n-      'Headers cannot be modified'\n-    )\n-    expect($('#append-value-x-sentinel').text()).toContain('hello')\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain(\n-        \"`headers().append('x-sentinel', ...)`\"\n-      )\n-      expect(headerWarnings[i++]).toContain(\"`headers().get('x-sentinel')`\")\n-    }\n-\n-    // headers().delete('...')\n-    expect($('#delete-result-x-sentinel').text()).toContain(\n-      'Headers cannot be modified'\n-    )\n-    expect($('#delete-value-x-sentinel').text()).toContain('hello')\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain(\"`headers().delete('x-sentinel')`\")\n-      expect(headerWarnings[i++]).toContain(\"`headers().get('x-sentinel')`\")\n-    }\n-\n-    // headers().get('...')\n-    expect($('#get-x-sentinel').text()).toContain('hello')\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain(\"`headers().get('x-sentinel')`\")\n-    }\n-\n-    // cookies().has('...')\n-    expect($('#has-x-sentinel').text()).toContain('true')\n-    expect($('#has-x-sentinel-foobar').text()).toContain('false')\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain(\"`headers().has('x-sentinel')`\")\n-      expect(headerWarnings[i++]).toContain(\n-        \"`headers().has('x-sentinel-foobar')`\"\n-      )\n-    }\n-\n-    // headers().set('...', '...')\n-    expect($('#set-result-x-sentinel').text()).toContain(\n-      'Headers cannot be modified'\n-    )\n-    expect($('#set-value-x-sentinel').text()).toContain('hello')\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain(\n-        \"`headers().set('x-sentinel', ...)`\"\n-      )\n-      expect(headerWarnings[i++]).toContain(\"`headers().get('x-sentinel')`\")\n-    }\n-\n-    // headers().getSetCookie()\n-    // This is always empty because headers() represents Request headers\n-    // not response headers and is not mutable.\n-    expect($('#get-set-cookie').text()).toEqual('[]')\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain('`headers().getSetCookie()`')\n-    }\n-\n-    // headers().forEach(...)\n-    expect($('#for-each-x-sentinel').text()).toContain('hello')\n-    expect($('#for-each-x-sentinel-path').text()).toContain(\n-      '/headers/exercise/sync'\n-    )\n-    expect($('#for-each-x-sentinel-rand').length).toBe(1)\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain('`headers().forEach(...)`')\n-    }\n-\n-    // headers().keys(...)\n-    expect($('#keys-x-sentinel').text()).toContain('x-sentinel')\n-    expect($('#keys-x-sentinel-path').text()).toContain('x-sentinel-path')\n-    expect($('#keys-x-sentinel-rand').text()).toContain('x-sentinel-rand')\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain('`headers().keys()`')\n-    }\n-\n-    // headers().values(...)\n-    expect($('[data-class=\"values\"]').text()).toContain('hello')\n-    expect($('[data-class=\"values\"]').text()).toContain(\n-      '/headers/exercise/sync'\n-    )\n-    expect($('[data-class=\"values\"]').length).toBe(3)\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain('`headers().values()`')\n-    }\n-\n-    // headers().entries(...)\n-    expect($('#entries-x-sentinel').text()).toContain('hello')\n-    expect($('#entries-x-sentinel-path').text()).toContain(\n-      '/headers/exercise/sync'\n-    )\n-    expect($('#entries-x-sentinel-rand').length).toBe(1)\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain('`headers().entries()`')\n-    }\n-\n-    // for...of headers()\n-    expect($('#for-of-x-sentinel').text()).toContain('hello')\n-    expect($('#for-of-x-sentinel-path').text()).toContain(\n-      '/headers/exercise/sync'\n-    )\n-    expect($('#for-of-x-sentinel-rand').length).toBe(1)\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain(\n-        '`...headers()` or similar iteration'\n-      )\n-    }\n-\n-    // ...headers()\n-    expect($('#spread-x-sentinel').text()).toContain('hello')\n-    expect($('#spread-x-sentinel-path').text()).toContain(\n-      '/headers/exercise/sync'\n-    )\n+    expect($('#spread-x-sentinel-path').text()).toContain('/headers/exercise')\n     expect($('#spread-x-sentinel-rand').length).toBe(1)\n-    if (isNextDev) {\n-      expect(headerWarnings[i++]).toContain(\n-        '`...headers()` or similar iteration'\n-      )\n-    }\n-\n-    if (isNextDev) {\n-      expect(i).toBe(headerWarnings.length)\n-    }\n   })\n })"
        },
        {
            "sha": "00fe7b363f0ec49f7168f6bc17ece3a9469dfafc",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.params.test.ts",
            "status": "modified",
            "additions": 62,
            "deletions": 840,
            "changes": 902,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.params.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.params.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.params.test.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -25,12 +25,12 @@ describe('dynamic-io', () => {\n     return warnings\n   }\n \n-  describe('Async Params', () => {\n+  describe('Params', () => {\n     it('should partially prerender pages that await params in a server components', async () => {\n       expect(getLines('Route \"/params')).toEqual([])\n \n       let $ = await next.render$(\n-        '/params/semantics/one/build/async/layout-access/server'\n+        '/params/semantics/one/build/layout-access/server'\n       )\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n@@ -50,585 +50,7 @@ describe('dynamic-io', () => {\n         expect($('#param-highcard').text()).toBe('build')\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/layout-access/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/build/async/page-access/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/page-access/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-    })\n-\n-    it('should partially prerender pages that use params in a client components', async () => {\n-      expect(getLines('Route \"/params')).toEqual([])\n-\n-      let $ = await next.render$(\n-        '/params/semantics/one/build/async/layout-access/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/layout-access/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/build/async/page-access/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/page-access/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-    })\n-\n-    it('should fully prerender pages that check individual param keys after awaiting params in a server component', async () => {\n-      expect(getLines('Route \"/params')).toEqual([])\n-      let $ = await next.render$(\n-        '/params/semantics/one/build/async/layout-has/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/build/async/page-has/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/layout-has/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        // With PPR fallbacks the first visit is still partially prerendered\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$('/params/semantics/one/run/async/page-has/server')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        // With PPR fallbacks the first visit is still partially prerendered\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-    })\n-\n-    it('should fully prerender pages that check individual param keys after `use`ing params in a client component', async () => {\n-      expect(getLines('Route \"/params')).toEqual([])\n-      let $ = await next.render$(\n-        '/params/semantics/one/build/async/layout-has/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/build/async/page-has/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/layout-has/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        // With PPR fallbacks the first visit is still partially prerendered\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$('/params/semantics/one/run/async/page-has/client')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        // With PPR fallbacks the first visit is still partially prerendered\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-has-lowcard').text()).toBe('true')\n-        expect($('#param-has-highcard').text()).toBe('true')\n-        expect($('#param-has-foo').text()).toBe('false')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-    })\n-\n-    it('should partially prerender pages that spread awaited params in a server component', async () => {\n-      expect(getLines('Route \"/params')).toEqual([])\n-      let $ = await next.render$(\n-        '/params/semantics/one/build/async/layout-spread/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('build')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('build')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/build/async/page-spread/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('build')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('build')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/layout-spread/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('run')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('run')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/page-spread/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('run')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('run')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-    })\n-\n-    it('should partially prerender pages that spread `use`ed params in a client component', async () => {\n-      expect(getLines('Route \"/params')).toEqual([])\n-      let $ = await next.render$(\n-        '/params/semantics/one/build/async/layout-spread/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('build')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('build')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/build/async/page-spread/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('build')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('build')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/layout-spread/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('run')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('run')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/async/page-spread/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('run')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-copied-lowcard').text()).toBe('one')\n-        expect($('#param-copied-highcard').text()).toBe('run')\n-        expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-    })\n-  })\n-\n-  describe('Synchronous Params access', () => {\n-    it('should partially prerender pages that access params synchronously in a server components', async () => {\n-      expect(getLines('Route \"/params')).toEqual([])\n-\n-      let $ = await next.render$(\n-        '/params/semantics/one/build/sync/layout-access/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#lowcard').text()).toBe('at runtime')\n-        expect($('#highcard').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#lowcard').text()).toBe('at buildtime')\n-        expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#param-lowcard').text()).toBe('one')\n-        expect($('#param-highcard').text()).toBe('build')\n-      }\n-\n-      $ = await next.render$(\n-        '/params/semantics/one/run/sync/layout-access/server'\n-      )\n+      $ = await next.render$('/params/semantics/one/run/layout-access/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n \n@@ -637,10 +59,7 @@ describe('dynamic-io', () => {\n         expect($('#page').text()).toBe('at runtime')\n         expect($('#param-lowcard').text()).toBe('one')\n         expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -652,20 +71,16 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/build/sync/page-access/server'\n-      )\n+      $ = await next.render$('/params/semantics/one/build/page-access/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n+\n         expect($('#lowcard').text()).toBe('at runtime')\n         expect($('#highcard').text()).toBe('at runtime')\n         expect($('#page').text()).toBe('at runtime')\n         expect($('#param-lowcard').text()).toBe('one')\n         expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -676,9 +91,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/run/sync/page-access/server'\n-      )\n+      $ = await next.render$('/params/semantics/one/run/page-access/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n \n@@ -687,10 +100,7 @@ describe('dynamic-io', () => {\n         expect($('#page').text()).toBe('at runtime')\n         expect($('#param-lowcard').text()).toBe('one')\n         expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -703,11 +113,11 @@ describe('dynamic-io', () => {\n       }\n     })\n \n-    it('should partially prerender pages that access params synchronously in a client components', async () => {\n+    it('should partially prerender pages that use params in a client components', async () => {\n       expect(getLines('Route \"/params')).toEqual([])\n \n       let $ = await next.render$(\n-        '/params/semantics/one/build/sync/layout-access/client'\n+        '/params/semantics/one/build/layout-access/client'\n       )\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n@@ -716,10 +126,7 @@ describe('dynamic-io', () => {\n         expect($('#page').text()).toBe('at runtime')\n         expect($('#param-lowcard').text()).toBe('one')\n         expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -730,9 +137,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/run/sync/layout-access/client'\n-      )\n+      $ = await next.render$('/params/semantics/one/run/layout-access/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n \n@@ -741,10 +146,7 @@ describe('dynamic-io', () => {\n         expect($('#page').text()).toBe('at runtime')\n         expect($('#param-lowcard').text()).toBe('one')\n         expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -756,21 +158,15 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/build/sync/page-access/client'\n-      )\n+      $ = await next.render$('/params/semantics/one/build/page-access/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n-\n         expect($('#lowcard').text()).toBe('at runtime')\n         expect($('#highcard').text()).toBe('at runtime')\n         expect($('#page').text()).toBe('at runtime')\n         expect($('#param-lowcard').text()).toBe('one')\n         expect($('#param-highcard').text()).toBe('build')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -781,21 +177,15 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/run/sync/page-access/client'\n-      )\n+      $ = await next.render$('/params/semantics/one/run/page-access/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n-\n         expect($('#lowcard').text()).toBe('at runtime')\n         expect($('#highcard').text()).toBe('at runtime')\n         expect($('#page').text()).toBe('at runtime')\n         expect($('#param-lowcard').text()).toBe('one')\n         expect($('#param-highcard').text()).toBe('run')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -808,10 +198,10 @@ describe('dynamic-io', () => {\n       }\n     })\n \n-    it('should fully prerender pages that check individual param keys directly on the params prop in a server component', async () => {\n+    it('should fully prerender pages that check individual param keys after awaiting params in a server component', async () => {\n       expect(getLines('Route \"/params')).toEqual([])\n       let $ = await next.render$(\n-        '/params/semantics/one/build/sync/layout-has/server'\n+        '/params/semantics/one/build/layout-has/server'\n       )\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n@@ -833,7 +223,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$('/params/semantics/one/build/sync/page-has/server')\n+      $ = await next.render$('/params/semantics/one/build/page-has/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -854,7 +244,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$('/params/semantics/one/run/sync/layout-has/server')\n+      $ = await next.render$('/params/semantics/one/run/layout-has/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -865,19 +255,19 @@ describe('dynamic-io', () => {\n         expect($('#param-has-foo').text()).toBe('false')\n         expect(getLines('Route \"/params')).toEqual([])\n       } else {\n-        // With PPR fallbacks the first visit is fully prerendered\n-        // because has-checking doesn't postpone even with ppr fallbacks\n+        // With PPR fallbacks the first visit is still partially prerendered\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n         expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n+        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n+        expect($('#page').text()).toBe('at runtime')\n         expect($('#param-has-lowcard').text()).toBe('true')\n         expect($('#param-has-highcard').text()).toBe('true')\n         expect($('#param-has-foo').text()).toBe('false')\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$('/params/semantics/one/run/sync/page-has/server')\n+      $ = await next.render$('/params/semantics/one/run/page-has/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -888,23 +278,23 @@ describe('dynamic-io', () => {\n         expect($('#param-has-foo').text()).toBe('false')\n         expect(getLines('Route \"/params')).toEqual([])\n       } else {\n-        // With PPR fallbacks the first visit is fully prerendered\n-        // because has-checking doesn't postpone even with ppr fallbacks\n+        // With PPR fallbacks the first visit is still partially prerendered\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n         expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n+        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n+        expect($('#page').text()).toBe('at runtime')\n         expect($('#param-has-lowcard').text()).toBe('true')\n         expect($('#param-has-highcard').text()).toBe('true')\n         expect($('#param-has-foo').text()).toBe('false')\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n     })\n \n-    it('should fully prerender pages that check individual param keys directly on the params prop in a client component', async () => {\n+    it('should fully prerender pages that check individual param keys after `use`ing params in a client component', async () => {\n       expect(getLines('Route \"/params')).toEqual([])\n       let $ = await next.render$(\n-        '/params/semantics/one/build/sync/layout-has/client'\n+        '/params/semantics/one/build/layout-has/client'\n       )\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n@@ -926,7 +316,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$('/params/semantics/one/build/sync/page-has/client')\n+      $ = await next.render$('/params/semantics/one/build/page-has/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -947,7 +337,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$('/params/semantics/one/run/sync/layout-has/client')\n+      $ = await next.render$('/params/semantics/one/run/layout-has/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -958,19 +348,19 @@ describe('dynamic-io', () => {\n         expect($('#param-has-foo').text()).toBe('false')\n         expect(getLines('Route \"/params')).toEqual([])\n       } else {\n-        // With PPR fallbacks the first visit is fully prerendered\n-        // because has-checking doesn't postpone even with ppr fallbacks\n+        // With PPR fallbacks the first visit is still partially prerendered\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n         expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n+        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n+        expect($('#page').text()).toBe('at runtime')\n         expect($('#param-has-lowcard').text()).toBe('true')\n         expect($('#param-has-highcard').text()).toBe('true')\n         expect($('#param-has-foo').text()).toBe('false')\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$('/params/semantics/one/run/sync/page-has/client')\n+      $ = await next.render$('/params/semantics/one/run/page-has/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -981,25 +371,23 @@ describe('dynamic-io', () => {\n         expect($('#param-has-foo').text()).toBe('false')\n         expect(getLines('Route \"/params')).toEqual([])\n       } else {\n-        // With PPR fallbacks the first visit is still fully prerendered\n-        // has-checking keys isn't dynamic and since we aren't awaiting the\n-        // whole params object we end up with a complete prerender even\n-        // for the fallback page.\n+        // With PPR fallbacks the first visit is still partially prerendered\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n         expect($('#highcard').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n+        expect($('#highcard-fallback').text()).toBe('loading highcard children')\n+        expect($('#page').text()).toBe('at runtime')\n         expect($('#param-has-lowcard').text()).toBe('true')\n         expect($('#param-has-highcard').text()).toBe('true')\n         expect($('#param-has-foo').text()).toBe('false')\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n     })\n \n-    it('should partially prerender pages that spread params without awaiting first in a server component', async () => {\n+    it('should partially prerender pages that spread awaited params in a server component', async () => {\n       expect(getLines('Route \"/params')).toEqual([])\n       let $ = await next.render$(\n-        '/params/semantics/one/build/sync/layout-spread/server'\n+        '/params/semantics/one/build/layout-spread/server'\n       )\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n@@ -1009,9 +397,7 @@ describe('dynamic-io', () => {\n         expect($('#param-copied-lowcard').text()).toBe('one')\n         expect($('#param-copied-highcard').text()).toBe('build')\n         expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`...params` or similar expression'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -1023,9 +409,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/build/sync/page-spread/server'\n-      )\n+      $ = await next.render$('/params/semantics/one/build/page-spread/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -1034,9 +418,7 @@ describe('dynamic-io', () => {\n         expect($('#param-copied-lowcard').text()).toBe('one')\n         expect($('#param-copied-highcard').text()).toBe('build')\n         expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`...params` or similar expression'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -1048,9 +430,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/run/sync/layout-spread/server'\n-      )\n+      $ = await next.render$('/params/semantics/one/run/layout-spread/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -1059,9 +439,7 @@ describe('dynamic-io', () => {\n         expect($('#param-copied-lowcard').text()).toBe('one')\n         expect($('#param-copied-highcard').text()).toBe('run')\n         expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`...params` or similar expression'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -1074,9 +452,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/run/sync/page-spread/server'\n-      )\n+      $ = await next.render$('/params/semantics/one/run/page-spread/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -1085,9 +461,7 @@ describe('dynamic-io', () => {\n         expect($('#param-copied-lowcard').text()).toBe('one')\n         expect($('#param-copied-highcard').text()).toBe('run')\n         expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`...params` or similar expression'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -1101,10 +475,10 @@ describe('dynamic-io', () => {\n       }\n     })\n \n-    it('should partially prerender pages that spread params without `use`ing them first in a client component', async () => {\n+    it('should partially prerender pages that spread `use`ed params in a client component', async () => {\n       expect(getLines('Route \"/params')).toEqual([])\n       let $ = await next.render$(\n-        '/params/semantics/one/build/sync/layout-spread/client'\n+        '/params/semantics/one/build/layout-spread/client'\n       )\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n@@ -1114,11 +488,7 @@ describe('dynamic-io', () => {\n         expect($('#param-copied-lowcard').text()).toBe('one')\n         expect($('#param-copied-highcard').text()).toBe('build')\n         expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`...params` or similar expression'),\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -1130,9 +500,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/build/sync/page-spread/client'\n-      )\n+      $ = await next.render$('/params/semantics/one/build/page-spread/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -1141,11 +509,7 @@ describe('dynamic-io', () => {\n         expect($('#param-copied-lowcard').text()).toBe('one')\n         expect($('#param-copied-highcard').text()).toBe('build')\n         expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`...params` or similar expression'),\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -1157,9 +521,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/run/sync/layout-spread/client'\n-      )\n+      $ = await next.render$('/params/semantics/one/run/layout-spread/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -1168,11 +530,7 @@ describe('dynamic-io', () => {\n         expect($('#param-copied-lowcard').text()).toBe('one')\n         expect($('#param-copied-highcard').text()).toBe('run')\n         expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`...params` or similar expression'),\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -1185,9 +543,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/semantics/one/run/sync/page-spread/client'\n-      )\n+      $ = await next.render$('/params/semantics/one/run/page-spread/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#lowcard').text()).toBe('at runtime')\n@@ -1196,11 +552,7 @@ describe('dynamic-io', () => {\n         expect($('#param-copied-lowcard').text()).toBe('one')\n         expect($('#param-copied-highcard').text()).toBe('run')\n         expect($('#param-key-count').text()).toBe('2')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`...params` or similar expression'),\n-          expect.stringContaining('`params.lowcard`'),\n-          expect.stringContaining('`params.highcard`'),\n-        ])\n+        expect(getLines('Route \"/params')).toEqual([])\n       } else {\n         expect($('#layout').text()).toBe('at buildtime')\n         expect($('#lowcard').text()).toBe('at buildtime')\n@@ -1219,7 +571,7 @@ describe('dynamic-io', () => {\n     it('should correctly allow param names like then, value, and status when awaiting params in a server component', async () => {\n       expect(getLines('Route \"/params')).toEqual([])\n       let $ = await next.render$(\n-        '/params/shadowing/foo/bar/baz/qux/async/layout/server'\n+        '/params/shadowing/foo/bar/baz/qux/layout/server'\n       )\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n@@ -1239,9 +591,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/shadowing/foo/bar/baz/qux/async/page/server'\n-      )\n+      $ = await next.render$('/params/shadowing/foo/bar/baz/qux/page/server')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#page').text()).toBe('at runtime')\n@@ -1264,7 +614,7 @@ describe('dynamic-io', () => {\n     it('should correctly allow param names like then, value, and status when `use`ing params in a client component', async () => {\n       expect(getLines('Route \"/params')).toEqual([])\n       let $ = await next.render$(\n-        '/params/shadowing/foo/bar/baz/qux/async/layout/client'\n+        '/params/shadowing/foo/bar/baz/qux/layout/client'\n       )\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n@@ -1284,9 +634,7 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n \n-      $ = await next.render$(\n-        '/params/shadowing/foo/bar/baz/qux/async/page/client'\n-      )\n+      $ = await next.render$('/params/shadowing/foo/bar/baz/qux/page/client')\n       if (isNextDev) {\n         expect($('#layout').text()).toBe('at runtime')\n         expect($('#page').text()).toBe('at runtime')\n@@ -1305,132 +653,6 @@ describe('dynamic-io', () => {\n         expect(getLines('Route \"/params')).toEqual([])\n       }\n     })\n-\n-    it('should not allow param names like then and status when accessing params directly in a server component', async () => {\n-      expect(getLines('Route \"/params')).toEqual([])\n-      let $ = await next.render$(\n-        '/params/shadowing/foo/bar/baz/qux/sync/layout/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-dyn').text()).toBe('foo')\n-        expect($('#param-then').text()).toEqual(\n-          expect.stringContaining('native code')\n-        )\n-        expect($('#param-value').text()).toBe('baz')\n-        expect($('#param-status').text()).toBe('undefined')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`then` and `status`'),\n-          expect.stringContaining('`params.dyn`'),\n-          expect.stringContaining('`params.value`'),\n-        ])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-dyn').text()).toBe('foo')\n-        expect($('#param-then').text()).toEqual(\n-          expect.stringContaining('native code')\n-        )\n-        expect($('#param-value').text()).toBe('baz')\n-        expect($('#param-status').text()).toBe('undefined')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/shadowing/foo/bar/baz/qux/sync/page/server'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-dyn').text()).toBe('foo')\n-        expect($('#param-then').text()).toEqual(\n-          expect.stringContaining('native code')\n-        )\n-        expect($('#param-value').text()).toBe('baz')\n-        expect($('#param-status').text()).toBe('undefined')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`then` and `status`'),\n-          expect.stringContaining('`params.dyn`'),\n-          expect.stringContaining('`params.value`'),\n-        ])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-dyn').text()).toBe('foo')\n-        expect($('#param-then').text()).toEqual(\n-          expect.stringContaining('native code')\n-        )\n-        expect($('#param-value').text()).toBe('baz')\n-        expect($('#param-status').text()).toBe('undefined')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-    })\n-\n-    it('should not allow param names like then and status when accessing params directly in a client component', async () => {\n-      expect(getLines('Route \"/params')).toEqual([])\n-      let $ = await next.render$(\n-        '/params/shadowing/foo/bar/baz/qux/sync/layout/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-dyn').text()).toBe('foo')\n-        expect($('#param-then').text()).toEqual(\n-          expect.stringContaining('native code')\n-        )\n-        expect($('#param-value').text()).toBe('baz')\n-        expect($('#param-status').text()).toBe('undefined')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`then` and `status`'),\n-          expect.stringContaining('`params.dyn`'),\n-          expect.stringContaining('`params.value`'),\n-          expect.stringContaining('`params.dyn`'),\n-          expect.stringContaining('`params.value`'),\n-        ])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-dyn').text()).toBe('foo')\n-        expect($('#param-then').text()).toEqual(\n-          expect.stringContaining('native code')\n-        )\n-        expect($('#param-value').text()).toBe('baz')\n-        expect($('#param-status').text()).toBe('undefined')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-\n-      $ = await next.render$(\n-        '/params/shadowing/foo/bar/baz/qux/sync/page/client'\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-dyn').text()).toBe('foo')\n-        expect($('#param-then').text()).toEqual(\n-          expect.stringContaining('native code')\n-        )\n-        expect($('#param-value').text()).toBe('baz')\n-        expect($('#param-status').text()).toBe('undefined')\n-        expect(getLines('Route \"/params')).toEqual([\n-          expect.stringContaining('`then` and `status`'),\n-          expect.stringContaining('`params.dyn`'),\n-          expect.stringContaining('`params.value`'),\n-          expect.stringContaining('`params.dyn`'),\n-          expect.stringContaining('`params.value`'),\n-        ])\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#param-dyn').text()).toBe('foo')\n-        expect($('#param-then').text()).toEqual(\n-          expect.stringContaining('native code')\n-        )\n-        expect($('#param-value').text()).toBe('baz')\n-        expect($('#param-status').text()).toBe('undefined')\n-        expect(getLines('Route \"/params')).toEqual([])\n-      }\n-    })\n   })\n \n   if (!isNextDev) {"
        },
        {
            "sha": "1cebce77bb37abefe68e47acdb53cfa48cce0e21",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.routes.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 40,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.routes.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.routes.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.routes.test.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -246,9 +246,9 @@ describe('dynamic-io', () => {\n     expect(json.message).toBe('task')\n   })\n \n-  it('should prerender GET route handlers when accessing awaited params', async () => {\n+  it('should prerender GET route handlers when accessing params', async () => {\n     expect(getLines('Route \"/routes/[dyn]')).toEqual([])\n-    let str = await next.render('/routes/1/async', {})\n+    let str = await next.render('/routes/1', {})\n     let json = JSON.parse(str)\n \n     if (isNextDev) {\n@@ -263,7 +263,7 @@ describe('dynamic-io', () => {\n       expect(getLines('Route \"/routes/[dyn]')).toEqual([])\n     }\n \n-    str = await next.render('/routes/2/async', {})\n+    str = await next.render('/routes/2', {})\n     json = JSON.parse(str)\n \n     if (isNextDev) {\n@@ -278,41 +278,4 @@ describe('dynamic-io', () => {\n       expect(getLines('Route \"/routes/[dyn]')).toEqual([])\n     }\n   })\n-\n-  it('should prerender GET route handlers when accessing params without awaiting first', async () => {\n-    expect(getLines('Route \"/routes/[dyn]')).toEqual([])\n-    let str = await next.render('/routes/1/sync', {})\n-    let json = JSON.parse(str)\n-\n-    if (isNextDev) {\n-      expect(json.value).toEqual('at runtime')\n-      expect(json.type).toBe('dynamic params')\n-      expect(json.param).toBe('1')\n-      expect(getLines('Route \"/routes/[dyn]')).toEqual([\n-        expect.stringContaining('`params.dyn`.'),\n-      ])\n-    } else {\n-      expect(json.value).toEqual('at buildtime')\n-      expect(json.type).toBe('dynamic params')\n-      expect(json.param).toBe('1')\n-      expect(getLines('Route \"/routes/[dyn]')).toEqual([])\n-    }\n-\n-    str = await next.render('/routes/2/sync', {})\n-    json = JSON.parse(str)\n-\n-    if (isNextDev) {\n-      expect(json.value).toEqual('at runtime')\n-      expect(json.type).toBe('dynamic params')\n-      expect(json.param).toBe('2')\n-      expect(getLines('Route \"/routes/[dyn]')).toEqual([\n-        expect.stringContaining('`params.dyn`.'),\n-      ])\n-    } else {\n-      expect(json.value).toEqual('at runtime')\n-      expect(json.type).toBe('dynamic params')\n-      expect(json.param).toBe('2')\n-      expect(getLines('Route \"/routes/[dyn]')).toEqual([])\n-    }\n-  })\n })"
        },
        {
            "sha": "a0fe642766288a4612205dfad4c8a68581c8fdec",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.search.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 180,
            "changes": 183,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.search.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.search.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.search.test.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -10,22 +10,8 @@ describe('dynamic-io', () => {\n     return\n   }\n \n-  let cliIndex = 0\n-  beforeEach(() => {\n-    cliIndex = next.cliOutput.length\n-  })\n-  function getLines(containing: string): Array<string> {\n-    const warnings = next.cliOutput\n-      .slice(cliIndex)\n-      .split('\\n')\n-      .filter((l) => l.includes(containing))\n-\n-    cliIndex = next.cliOutput.length\n-    return warnings\n-  }\n-\n   it('should partially prerender pages that await searchParams in a server component', async () => {\n-    let $ = await next.render$('/search/async/server/await?sentinel=hello')\n+    let $ = await next.render$('/search/server/await?sentinel=hello')\n     if (isNextDev) {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#value').text()).toBe('hello')\n@@ -40,7 +26,7 @@ describe('dynamic-io', () => {\n   })\n \n   it('should partially prerender pages that `use` searchParams in a server component', async () => {\n-    let $ = await next.render$('/search/async/server/use?sentinel=hello')\n+    let $ = await next.render$('/search/server/use?sentinel=hello')\n     if (isNextDev) {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#value').text()).toBe('hello')\n@@ -55,180 +41,17 @@ describe('dynamic-io', () => {\n   })\n \n   it('should partially prerender pages that `use` searchParams in a client component', async () => {\n-    let $ = await next.render$('/search/async/client/use?sentinel=hello')\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#value').text()).toBe('hello')\n-      expect($('#page').text()).toBe('at runtime')\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('main').text()).toContain('inner loading...')\n-      expect($('main').text()).not.toContain('outer loading...')\n-      expect($('#value').text()).toBe('hello')\n-      expect($('#page').text()).toBe('at runtime')\n-    }\n-  })\n-\n-  it('should partially prerender pages that access a searchParam property synchronously in a server component', async () => {\n-    let $ = await next.render$('/search/sync/server/access?sentinel=hello')\n-    let searchWarnings = getLines('Route \"/search')\n+    let $ = await next.render$('/search/client/use?sentinel=hello')\n     if (isNextDev) {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#value').text()).toBe('hello')\n       expect($('#page').text()).toBe('at runtime')\n-      expect(searchWarnings).toEqual([\n-        expect.stringContaining('`searchParams.sentinel`'),\n-      ])\n     } else {\n-      expect(searchWarnings).toHaveLength(0)\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('main').text()).not.toContain('inner loading...')\n-      // This test case aborts synchronously and the later component render\n-      // triggers the outer boundary\n-      expect($('main').text()).toContain('outer loading...')\n-      expect($('#value').text()).toBe('hello')\n-      expect($('#page').text()).toBe('at runtime')\n-    }\n-  })\n-\n-  it('should partially prerender pages that access a searchParam property synchronously in a client component', async () => {\n-    let $ = await next.render$('/search/sync/client/access?sentinel=hello')\n-    let searchWarnings = getLines('Route \"/search')\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#value').text()).toBe('hello')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect(searchWarnings).toEqual([\n-        expect.stringContaining('`searchParams.sentinel`'),\n-      ])\n-    } else {\n-      expect(searchWarnings).toHaveLength(0)\n       expect($('#layout').text()).toBe('at buildtime')\n       expect($('main').text()).toContain('inner loading...')\n       expect($('main').text()).not.toContain('outer loading...')\n       expect($('#value').text()).toBe('hello')\n       expect($('#page').text()).toBe('at runtime')\n     }\n   })\n-\n-  it('should partially prerender pages that checks for the existence of a searchParam property synchronously in a server component', async () => {\n-    let $ = await next.render$('/search/sync/server/has?sentinel=hello')\n-    let searchWarnings = getLines('Route \"/search')\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#has-sentinel').text()).toBe('true')\n-      expect($('#has-foo').text()).toBe('false')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect(searchWarnings).toEqual([\n-        expect.stringContaining(\n-          '`Reflect.has(searchParams, \"sentinel\")`, `\"sentinel\" in searchParams`, or similar'\n-        ),\n-        expect.stringContaining(\n-          '`Reflect.has(searchParams, \"foo\")`, `\"foo\" in searchParams`, or similar'\n-        ),\n-      ])\n-    } else {\n-      expect(searchWarnings).toHaveLength(0)\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('main').text()).not.toContain('inner loading...')\n-      // This test case aborts synchronously and the later component render\n-      // triggers the outer boundary\n-      expect($('main').text()).toContain('outer loading...')\n-      expect($('#has-sentinel').text()).toBe('true')\n-      expect($('#has-foo').text()).toBe('false')\n-      expect($('#page').text()).toBe('at runtime')\n-    }\n-  })\n-\n-  it('should partially prerender pages that checks for the existence of a searchParam property synchronously in a client component', async () => {\n-    let $ = await next.render$('/search/sync/client/has?sentinel=hello')\n-    let searchWarnings = getLines('Route \"/search')\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#has-sentinel').text()).toBe('true')\n-      expect($('#has-foo').text()).toBe('false')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect(searchWarnings).toEqual([\n-        expect.stringContaining(\n-          '`Reflect.has(searchParams, \"sentinel\")`, `\"sentinel\" in searchParams`, or similar'\n-        ),\n-        expect.stringContaining(\n-          '`Reflect.has(searchParams, \"foo\")`, `\"foo\" in searchParams`, or similar'\n-        ),\n-      ])\n-    } else {\n-      expect(searchWarnings).toHaveLength(0)\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('main').text()).toContain('inner loading...')\n-      expect($('main').text()).not.toContain('outer loading...')\n-      expect($('#has-sentinel').text()).toBe('true')\n-      expect($('#has-foo').text()).toBe('false')\n-      expect($('#page').text()).toBe('at runtime')\n-    }\n-  })\n-\n-  it('should partially prerender pages that spreads ...searchParam synchronously in a server component', async () => {\n-    let $ = await next.render$(\n-      '/search/sync/server/spread?sentinel=hello&foo=foo&then=bar&value=baz'\n-    )\n-    let searchWarnings = getLines('Route \"/search')\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('[data-value]').length).toBe(3)\n-      expect($('#value-sentinel').text()).toBe('hello')\n-      expect($('#value-foo').text()).toBe('foo')\n-      expect($('#value-value').text()).toBe('baz')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect(searchWarnings).toEqual([\n-        expect.stringContaining(\n-          'conflict with builtin or well-known property names: `then`'\n-        ),\n-      ])\n-    } else {\n-      expect(searchWarnings).toHaveLength(0)\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('main').text()).not.toContain('inner loading...')\n-      // This test case aborts synchronously and the later component render\n-      // triggers the outer boundary\n-      expect($('main').text()).toContain('outer loading...')\n-      expect($('[data-value]').length).toBe(3)\n-      expect($('#value-sentinel').text()).toBe('hello')\n-      expect($('#value-foo').text()).toBe('foo')\n-      expect($('#value-value').text()).toBe('baz')\n-      expect($('#page').text()).toBe('at runtime')\n-    }\n-  })\n-\n-  it('should partially prerender pages that spreads ...searchParam synchronously in a client component', async () => {\n-    let $ = await next.render$(\n-      '/search/sync/client/spread?sentinel=hello&foo=foo&then=bar&value=baz'\n-    )\n-    let searchWarnings = getLines('Route \"/search')\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('[data-value]').length).toBe(3)\n-      expect($('#value-sentinel').text()).toBe('hello')\n-      expect($('#value-foo').text()).toBe('foo')\n-      expect($('#value-value').text()).toBe('baz')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect(searchWarnings).toEqual([\n-        expect.stringContaining(\n-          'conflict with builtin or well-known property names: `then`'\n-        ),\n-        expect.stringContaining('`searchParams.sentinel`'),\n-        expect.stringContaining('`searchParams.foo`'),\n-        expect.stringContaining('`searchParams.value`'),\n-      ])\n-    } else {\n-      expect(searchWarnings).toHaveLength(0)\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('main').text()).toContain('inner loading...')\n-      expect($('main').text()).not.toContain('outer loading...')\n-      expect($('[data-value]').length).toBe(3)\n-      expect($('#value-sentinel').text()).toBe('hello')\n-      expect($('#value-foo').text()).toBe('foo')\n-      expect($('#value-value').text()).toBe('baz')\n-      expect($('#page').text()).toBe('at runtime')\n-    }\n-  })\n })"
        },
        {
            "sha": "97c64d010942b02ea0411505c2c4dd274d99d33c",
            "filename": "test/lib/add-redbox-matchers.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 4,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Flib%2Fadd-redbox-matchers.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0a67d1c701e1881a567b2ac226e7fb4938441e66/test%2Flib%2Fadd-redbox-matchers.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fadd-redbox-matchers.ts?ref=0a67d1c701e1881a567b2ac226e7fb4938441e66",
            "patch": "@@ -164,13 +164,25 @@ async function createErrorSnapshot(\n     }\n   }\n \n+  let sanitizedDescription = description\n+\n+  if (sanitizedDescription) {\n+    sanitizedDescription = sanitizedDescription\n+      .replace(/{imported module [^}]+}/, '<turbopack-module-id>')\n+      .replace(/\\w+_WEBPACK_IMPORTED_MODULE_\\w+/, '<webpack-module-id>')\n+\n+    if (next !== null) {\n+      sanitizedDescription = sanitizedDescription.replace(\n+        next.testDir,\n+        '<FIXME-project-root>'\n+      )\n+    }\n+  }\n+\n   const snapshot: ErrorSnapshot = {\n     environmentLabel,\n     label: label ?? '<FIXME-excluded-label>',\n-    description:\n-      description !== null && next !== null\n-        ? description.replace(next.testDir, '<FIXME-project-root>')\n-        : description,\n+    description: sanitizedDescription,\n     source: focusedSource,\n     stack:\n       next !== null && stack !== null"
        }
    ],
    "stats": {
        "total": 6109,
        "additions": 1212,
        "deletions": 4897
    }
}