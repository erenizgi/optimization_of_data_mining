{
    "author": "eps1lon",
    "message": "[test] Allow CLI integration test to be retryable (#85586)\n\nFixes https://github.com/vercel/next.js/actions/runs/18937795131/job/54068900147#step:34:1879\r\n\r\n`--experimental-https` test creates a cert relying on no cert existing in the default path. When it passes, it doesn't cleanup. Retrying that test file due to an unrelated failure would therefore always fail. Now we ensure no cert exists.",
    "sha": "63b9e8bdf85ef7f01039b89a42cd9de573472edc",
    "files": [
        {
            "sha": "6f26fcc232edd0138bdc6bca7a3ee1fba7b41301",
            "filename": "test/integration/cli/test/index.test.js",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/63b9e8bdf85ef7f01039b89a42cd9de573472edc/test%2Fintegration%2Fcli%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/63b9e8bdf85ef7f01039b89a42cd9de573472edc/test%2Fintegration%2Fcli%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcli%2Ftest%2Findex.test.js?ref=63b9e8bdf85ef7f01039b89a42cd9de573472edc",
            "patch": "@@ -15,6 +15,7 @@ import path, { join } from 'path'\n import pkg from 'next/package'\n import http from 'http'\n import stripAnsi from 'strip-ansi'\n+import { rmSync } from 'fs'\n \n const dirBasic = join(__dirname, '../basic')\n const dirDuplicateSass = join(__dirname, '../duplicate-sass')\n@@ -848,6 +849,13 @@ describe('CLI Usage', () => {\n     })\n \n     itCI('--experimental-https', async () => {\n+      // set by runNextCommandDev\n+      const nextDir = path.dirname(require.resolve('next/package'))\n+      // hardcoded by Next.js relative to cwd of Next.js\n+      const certDir = path.resolve(nextDir, 'certificates')\n+      try {\n+        rmSync(certDir, { recursive: true, force: true })\n+      } catch {}\n       // only runs on CI as it requires administrator privileges\n       const port = await findPort()\n       let output = ''"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 8,
        "deletions": 0
    }
}