{
    "author": "devjiwonchoi",
    "message": "Log generate params duration in dev (#86726)\n\nDuring the request in dev, there's a time to generate params from\n`getStaticPaths` or `generateStaticParams`. Include that in the request\nlog. Since Pages Router's `getStaticPaths` are technically \"generate\nparams\" as well, set the label to `generate-params`.\n\nExample:\n\n```\nGET / in 0ms (compile: 0ms, generate-params: 0ms, render: 0ms)\n```\n\n<img width=\"1116\" height=\"70\" alt=\"CleanShot 2025-12-02 at 14 39 05@2x\"\nsrc=\"https://github.com/user-attachments/assets/fc9ebc45-5b77-4a15-9567-43f0b6ace867\"\n/>\n\n---------\n\nCo-authored-by: Tim Neutkens <timneutkens@me.com>",
    "sha": "5019e61d1cb592d9575985c9fb171641f0231feb",
    "files": [
        {
            "sha": "3b19204fac943ce2f09870314c526e3e950752b0",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/5019e61d1cb592d9575985c9fb171641f0231feb/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5019e61d1cb592d9575985c9fb171641f0231feb/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=5019e61d1cb592d9575985c9fb171641f0231feb",
            "patch": "@@ -2248,13 +2248,27 @@ export default abstract class Server<\n       isDynamicRoute(pathname) &&\n       (components.getStaticPaths || isAppPath)\n     ) {\n+      let getStaticPathsStart: bigint | undefined\n+      if (opts.dev) {\n+        getStaticPathsStart = process.hrtime.bigint()\n+      }\n+\n       const pathsResults = await this.getStaticPaths({\n         pathname,\n         urlPathname,\n         requestHeaders: req.headers,\n         page: components.page,\n         isAppPath,\n       })\n+\n+      if (opts.dev && getStaticPathsStart && pathsResults.staticPaths?.length) {\n+        addRequestMeta(\n+          req,\n+          'devGenerateStaticParamsDuration',\n+          process.hrtime.bigint() - getStaticPathsStart\n+        )\n+      }\n+\n       if (isAppPath && this.nextConfig.cacheComponents) {\n         if (pathsResults.prerenderedRoutes?.length) {\n           let smallestFallbackRouteParams = null"
        },
        {
            "sha": "9aa318ae7de8fe5aa910127d4e2c1402ced56ee2",
            "filename": "packages/next/src/server/dev/log-requests.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 3,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/5019e61d1cb592d9575985c9fb171641f0231feb/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Flog-requests.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5019e61d1cb592d9575985c9fb171641f0231feb/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Flog-requests.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Flog-requests.ts?ref=5019e61d1cb592d9575985c9fb171641f0231feb",
            "patch": "@@ -47,7 +47,8 @@ export function logRequests(\n   requestEndTime: bigint,\n   devRequestTimingMiddlewareStart: bigint | undefined,\n   devRequestTimingMiddlewareEnd: bigint | undefined,\n-  devRequestTimingInternalsEnd: bigint | undefined\n+  devRequestTimingInternalsEnd: bigint | undefined,\n+  devGenerateStaticParamsDuration: bigint | undefined\n ): void {\n   if (!ignoreLoggingIncomingRequests(request, loggingConfig)) {\n     logIncomingRequests(\n@@ -57,7 +58,8 @@ export function logRequests(\n       response.statusCode,\n       devRequestTimingMiddlewareStart,\n       devRequestTimingMiddlewareEnd,\n-      devRequestTimingInternalsEnd\n+      devRequestTimingInternalsEnd,\n+      devGenerateStaticParamsDuration\n     )\n   }\n \n@@ -75,7 +77,8 @@ function logIncomingRequests(\n   statusCode: number,\n   devRequestTimingMiddlewareStart: bigint | undefined,\n   devRequestTimingMiddlewareEnd: bigint | undefined,\n-  devRequestTimingInternalsEnd: bigint | undefined\n+  devRequestTimingInternalsEnd: bigint | undefined,\n+  devGenerateStaticParamsDuration: bigint | undefined\n ): void {\n   const isRSC = getRequestMeta(request, 'isRSCRequest')\n   const url = isRSC ? stripNextRscUnionQuery(request.url) : request.url\n@@ -113,6 +116,13 @@ function logIncomingRequests(\n     }\n     // Insert as the first item to be rendered in the list\n     times.unshift(['compile', frameworkTime])\n+\n+    // Insert after compile, before render based on the execution order.\n+    if (devGenerateStaticParamsDuration) {\n+      // Pages Router getStaticPaths are technically \"generate params\" as well.\n+      times.push(['generate-params', devGenerateStaticParamsDuration])\n+    }\n+\n     times.push(['render', requestEndTime - devRequestTimingInternalsEnd])\n   }\n "
        },
        {
            "sha": "20e552de4e3ab8e655ddcc410ca08b7ddd88f91f",
            "filename": "packages/next/src/server/dev/next-dev-server.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/5019e61d1cb592d9575985c9fb171641f0231feb/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5019e61d1cb592d9575985c9fb171641f0231feb/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts?ref=5019e61d1cb592d9575985c9fb171641f0231feb",
            "patch": "@@ -519,7 +519,8 @@ export default class DevServer extends Server {\n               requestEnd,\n               getRequestMeta(req, 'devRequestTimingMiddlewareStart'),\n               getRequestMeta(req, 'devRequestTimingMiddlewareEnd'),\n-              getRequestMeta(req, 'devRequestTimingInternalsEnd')\n+              getRequestMeta(req, 'devRequestTimingInternalsEnd'),\n+              getRequestMeta(req, 'devGenerateStaticParamsDuration')\n             )\n           })\n         }"
        },
        {
            "sha": "8eff8eb9d4291047f1eb92870f8da1d1f2f4ab4e",
            "filename": "packages/next/src/server/request-meta.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/5019e61d1cb592d9575985c9fb171641f0231feb/packages%2Fnext%2Fsrc%2Fserver%2Frequest-meta.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5019e61d1cb592d9575985c9fb171641f0231feb/packages%2Fnext%2Fsrc%2Fserver%2Frequest-meta.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frequest-meta.ts?ref=5019e61d1cb592d9575985c9fb171641f0231feb",
            "patch": "@@ -270,6 +270,11 @@ export interface RequestMeta {\n   devRequestTimingMiddlewareStart?: bigint\n   devRequestTimingMiddlewareEnd?: bigint\n   devRequestTimingInternalsEnd?: bigint\n+\n+  /**\n+   * DEV only: The duration of getStaticPaths/generateStaticParams in process.hrtime.bigint()\n+   */\n+  devGenerateStaticParamsDuration?: bigint\n }\n \n /**"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 34,
        "deletions": 4
    }
}