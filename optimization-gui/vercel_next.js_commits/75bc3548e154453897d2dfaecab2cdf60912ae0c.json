{
    "author": "wbinnssmith",
    "message": "Turbopack: Make `turbopack-resolve` and `turbopack-trace-server` Rust 2024 (#79133)\n\n- Match ergonomics\n- Marked trace server’s `SpanRef::children` as returning `use<‘a>`",
    "sha": "75bc3548e154453897d2dfaecab2cdf60912ae0c",
    "files": [
        {
            "sha": "e2c6bdf0d094e39f78c582a8df7e0eaa413c5c6f",
            "filename": "turbopack/crates/turbopack-resolve/Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2FCargo.toml?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -3,7 +3,7 @@ name = \"turbopack-resolve\"\n version = \"0.1.0\"\n description = \"Methods to create and modify resolver options\"\n license = \"MIT\"\n-edition = \"2021\"\n+edition = \"2024\"\n autobenches = false\n \n [lib]"
        },
        {
            "sha": "240690bcea2adb6a502ba1fc5301b507a78189d0",
            "filename": "turbopack/crates/turbopack-resolve/src/ecmascript.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fecmascript.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fecmascript.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fecmascript.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -4,14 +4,14 @@ use turbopack_core::{\n     issue::IssueSource,\n     reference_type::{CommonJsReferenceSubType, EcmaScriptModulesReferenceSubType, ReferenceType},\n     resolve::{\n-        handle_resolve_error, handle_resolve_source_error,\n+        ModuleResolveResult, ResolveResult, handle_resolve_error, handle_resolve_source_error,\n         options::{\n             ConditionValue, ResolutionConditions, ResolveInPackage, ResolveIntoPackage,\n             ResolveOptions,\n         },\n         origin::{ResolveOrigin, ResolveOriginExt},\n         parse::Request,\n-        resolve, ModuleResolveResult, ResolveResult,\n+        resolve,\n     },\n };\n /// Retrieves the [ResolutionConditions] of the \"into\" and \"in\" package resolution options, so that"
        },
        {
            "sha": "bcb78ae66815eef5dcf20e7f718003f42b3bcd92",
            "filename": "turbopack/crates/turbopack-resolve/src/node_native_binding.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fnode_native_binding.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fnode_native_binding.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fnode_native_binding.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -5,15 +5,15 @@ use serde::{Deserialize, Serialize};\n use turbo_rcstr::RcStr;\n use turbo_tasks::{FxIndexMap, ResolvedVc, TryFlatJoinIterExt, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::{\n-    glob::Glob, json::parse_json_rope_with_source_context, DirectoryEntry, FileContent,\n-    FileSystemEntryType, FileSystemPath,\n+    DirectoryEntry, FileContent, FileSystemEntryType, FileSystemPath, glob::Glob,\n+    json::parse_json_rope_with_source_context,\n };\n use turbopack_core::{\n     asset::{Asset, AssetContent},\n     file_source::FileSource,\n     raw_module::RawModule,\n     reference::ModuleReference,\n-    resolve::{pattern::Pattern, resolve_raw, ModuleResolveResult, RequestKey, ResolveResultItem},\n+    resolve::{ModuleResolveResult, RequestKey, ResolveResultItem, pattern::Pattern, resolve_raw},\n     source::Source,\n     target::{CompileTarget, Platform},\n };\n@@ -103,7 +103,7 @@ pub async fn resolve_node_pre_gyp_files(\n     let compile_target = compile_target.await?;\n     if let Some(config_asset) = *config {\n         if let AssetContent::File(file) = &*config_asset.content().await? {\n-            if let FileContent::Content(ref config_file) = &*file.await? {\n+            if let FileContent::Content(config_file) = &*file.await? {\n                 let config_file_path = config_asset.ident().path();\n                 let mut affecting_paths = vec![config_file_path];\n                 let config_file_dir = config_file_path.parent();"
        },
        {
            "sha": "d9d16342da573a78a76812b9fb4c9a928e67ea90",
            "filename": "turbopack/crates/turbopack-resolve/src/resolve.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fresolve.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -2,12 +2,11 @@ use anyhow::Result;\n use turbo_tasks::Vc;\n use turbo_tasks_fs::{FileSystem, FileSystemPath};\n use turbopack_core::resolve::{\n-    find_context_file,\n+    AliasMap, AliasPattern, ExternalTraced, ExternalType, FindContextFileResult, find_context_file,\n     options::{\n         ConditionValue, ImportMap, ImportMapping, ResolutionConditions, ResolveInPackage,\n         ResolveIntoPackage, ResolveModules, ResolveOptions,\n     },\n-    AliasMap, AliasPattern, ExternalTraced, ExternalType, FindContextFileResult,\n };\n \n use crate::{"
        },
        {
            "sha": "1def033879feda933e7b1bd996223916488a374a",
            "filename": "turbopack/crates/turbopack-resolve/src/typescript.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -3,7 +3,7 @@ use std::{collections::HashMap, fmt::Write, mem::take};\n use anyhow::Result;\n use serde_json::Value as JsonValue;\n use turbo_rcstr::RcStr;\n-use turbo_tasks::{fxindexset, ResolvedVc, Value, ValueDefault, Vc};\n+use turbo_tasks::{ResolvedVc, Value, ValueDefault, Vc, fxindexset};\n use turbo_tasks_fs::{FileContent, FileJsonContent, FileSystemPath};\n use turbopack_core::{\n     asset::Asset,\n@@ -13,7 +13,7 @@ use turbopack_core::{\n     issue::{Issue, IssueExt, IssueSeverity, IssueStage, OptionStyledString, StyledString},\n     reference_type::{ReferenceType, TypeScriptReferenceSubType},\n     resolve::{\n-        handle_resolve_error,\n+        AliasPattern, ModuleResolveResult, handle_resolve_error,\n         node::node_cjs_resolve_options,\n         options::{\n             ConditionValue, ImportMap, ImportMapping, ResolveIntoPackage, ResolveModules,\n@@ -22,7 +22,7 @@ use turbopack_core::{\n         origin::{ResolveOrigin, ResolveOriginExt},\n         parse::Request,\n         pattern::Pattern,\n-        resolve, AliasPattern, ModuleResolveResult,\n+        resolve,\n     },\n     source::{OptionSource, Source},\n };"
        },
        {
            "sha": "9de0865dda8f0e81a7aaa3abe3d41cc62d9e9d6d",
            "filename": "turbopack/crates/turbopack-trace-server/Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2FCargo.toml?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -3,7 +3,7 @@ name = \"turbopack-trace-server\"\n version = \"0.1.0\"\n description = \"TBD\"\n license = \"MIT\"\n-edition = \"2021\"\n+edition = \"2024\"\n autobenches = false\n \n [[bin]]"
        },
        {
            "sha": "89f5447f93e70e246285a4af540ad3a530d0988c",
            "filename": "turbopack/crates/turbopack-trace-server/src/reader/heaptrack.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fheaptrack.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fheaptrack.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fheaptrack.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -1,12 +1,12 @@\n use std::{env, str::from_utf8, sync::Arc};\n \n-use anyhow::{bail, Context, Result};\n+use anyhow::{Context, Result, bail};\n use indexmap::map::Entry;\n use rustc_demangle::demangle;\n use rustc_hash::{FxHashMap, FxHashSet};\n \n use super::TraceFormat;\n-use crate::{span::SpanIndex, store_container::StoreContainer, timestamp::Timestamp, FxIndexMap};\n+use crate::{FxIndexMap, span::SpanIndex, store_container::StoreContainer, timestamp::Timestamp};\n \n #[derive(Debug, Clone, Copy)]\n struct TraceNode {"
        },
        {
            "sha": "81846b00d1f2e0763986fcbc5970d616c2f84b8f",
            "filename": "turbopack/crates/turbopack-trace-server/src/reader/nextjs.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fnextjs.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fnextjs.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fnextjs.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -4,7 +4,7 @@ use rustc_hash::{FxHashMap, FxHashSet};\n use serde::Deserialize;\n \n use super::TraceFormat;\n-use crate::{span::SpanIndex, store_container::StoreContainer, timestamp::Timestamp, FxIndexMap};\n+use crate::{FxIndexMap, span::SpanIndex, store_container::StoreContainer, timestamp::Timestamp};\n \n pub struct NextJsFormat {\n     store: Arc<StoreContainer>,"
        },
        {
            "sha": "53632497c875f6da9dcf223aaf9742a34b05b798",
            "filename": "turbopack/crates/turbopack-trace-server/src/reader/turbopack.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fturbopack.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fturbopack.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Freader%2Fturbopack.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -12,10 +12,10 @@ use turbopack_trace_utils::tracing::{TraceRow, TraceValue};\n \n use super::TraceFormat;\n use crate::{\n+    FxIndexMap,\n     span::SpanIndex,\n     store_container::{StoreContainer, StoreWriteGuard},\n     timestamp::Timestamp,\n-    FxIndexMap,\n };\n \n #[derive(Default)]"
        },
        {
            "sha": "c3367eeb2adcea85b4390f1c3e3c0196ff6084e9",
            "filename": "turbopack/crates/turbopack-trace-server/src/server.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fserver.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fserver.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fserver.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -4,9 +4,9 @@ use std::{\n     thread::spawn,\n };\n \n-use anyhow::{bail, Result};\n+use anyhow::{Result, bail};\n use serde::{Deserialize, Serialize};\n-use tungstenite::{accept, Message};\n+use tungstenite::{Message, accept};\n \n use crate::{\n     store::SpanId,"
        },
        {
            "sha": "f152d22d44eb0ec51cdab5d5e02ac9f4bd977dca",
            "filename": "turbopack/crates/turbopack-trace-server/src/span_bottom_up_ref.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_bottom_up_ref.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_bottom_up_ref.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_bottom_up_ref.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -5,12 +5,12 @@ use std::{\n };\n \n use crate::{\n+    FxIndexMap,\n     span::{SpanBottomUp, SpanGraphEvent, SpanIndex},\n-    span_graph_ref::{event_map_to_list, SpanGraphEventRef, SpanGraphRef},\n+    span_graph_ref::{SpanGraphEventRef, SpanGraphRef, event_map_to_list},\n     span_ref::SpanRef,\n     store::{SpanId, Store},\n     timestamp::Timestamp,\n-    FxIndexMap,\n };\n \n pub struct SpanBottomUpRef<'a> {"
        },
        {
            "sha": "8bf7b2ec10d428c9e286203b4998b73c8571a736",
            "filename": "turbopack/crates/turbopack-trace-server/src/span_graph_ref.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_graph_ref.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_graph_ref.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_graph_ref.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -7,13 +7,13 @@ use std::{\n use rayon::iter::{IntoParallelRefIterator, ParallelIterator};\n \n use crate::{\n+    FxIndexMap,\n     bottom_up::build_bottom_up_graph,\n     span::{SpanGraph, SpanGraphEvent, SpanIndex},\n     span_bottom_up_ref::SpanBottomUpRef,\n     span_ref::SpanRef,\n     store::{SpanId, Store},\n     timestamp::Timestamp,\n-    FxIndexMap,\n };\n \n #[derive(Clone)]"
        },
        {
            "sha": "124b94727043f1fa7ca4b3bc98dcdd5882662a21",
            "filename": "turbopack/crates/turbopack-trace-server/src/span_ref.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_ref.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_ref.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fspan_ref.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -10,13 +10,13 @@ use rayon::iter::{IntoParallelIterator, IntoParallelRefIterator, ParallelIterato\n use rustc_hash::FxHashSet;\n \n use crate::{\n+    FxIndexMap,\n     bottom_up::build_bottom_up_graph,\n     span::{Span, SpanEvent, SpanExtra, SpanGraphEvent, SpanIndex, SpanNames, SpanTimeData},\n     span_bottom_up_ref::SpanBottomUpRef,\n-    span_graph_ref::{event_map_to_list, SpanGraphEventRef, SpanGraphRef},\n+    span_graph_ref::{SpanGraphEventRef, SpanGraphRef, event_map_to_list},\n     store::{SpanId, Store},\n     timestamp::Timestamp,\n-    FxIndexMap,\n };\n \n #[derive(Copy, Clone)]\n@@ -187,7 +187,7 @@ impl<'a> SpanRef<'a> {\n         })\n     }\n \n-    pub fn children(&self) -> impl DoubleEndedIterator<Item = SpanRef<'a>> + 'a {\n+    pub fn children(&self) -> impl DoubleEndedIterator<Item = SpanRef<'a>> + 'a + use<'a> {\n         self.span.events.iter().filter_map(|event| match event {\n             SpanEvent::SelfTime { .. } => None,\n             SpanEvent::Child { index } => Some(SpanRef {"
        },
        {
            "sha": "19d5797f58be75bb9a7066d1cdb95d902c755316",
            "filename": "turbopack/crates/turbopack-trace-server/src/store.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fstore.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fstore.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fstore.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -2,7 +2,7 @@ use std::{\n     cmp::{max, min},\n     env,\n     num::NonZeroUsize,\n-    sync::{atomic::AtomicU64, OnceLock},\n+    sync::{OnceLock, atomic::AtomicU64},\n };\n \n use rustc_hash::FxHashSet;"
        },
        {
            "sha": "39938a647a8ebf741afeff19fd6a6329873ffe04",
            "filename": "turbopack/crates/turbopack-trace-server/src/store_container.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fstore_container.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fstore_container.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fstore_container.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -1,8 +1,8 @@\n use std::{\n     ops::{Deref, DerefMut},\n     sync::{\n-        atomic::{AtomicBool, Ordering},\n         RwLock, RwLockReadGuard, RwLockWriteGuard,\n+        atomic::{AtomicBool, Ordering},\n     },\n };\n "
        },
        {
            "sha": "b58b2ffc076df918a720a5721c3b7425a9717725",
            "filename": "turbopack/crates/turbopack-trace-server/src/u64_empty_string.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fu64_empty_string.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fu64_empty_string.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fu64_empty_string.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -1,4 +1,4 @@\n-use serde::{de, Deserialize, Deserializer, Serializer};\n+use serde::{Deserialize, Deserializer, Serializer, de};\n \n pub fn serialize<S>(value: &u64, serializer: S) -> Result<S::Ok, S::Error>\n where"
        },
        {
            "sha": "d42f699bdcb10967e8fb39ffbf267ea3287fbef5",
            "filename": "turbopack/crates/turbopack-trace-server/src/u64_string.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fu64_string.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fu64_string.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fu64_string.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -1,6 +1,6 @@\n use std::{fmt::Display, str::FromStr};\n \n-use serde::{de, Deserialize, Deserializer, Serializer};\n+use serde::{Deserialize, Deserializer, Serializer, de};\n \n pub fn serialize<T, S>(value: &T, serializer: S) -> Result<S::Ok, S::Error>\n where"
        },
        {
            "sha": "555000e4c4ca67fefa885b229902c41621a13506",
            "filename": "turbopack/crates/turbopack-trace-server/src/viewer.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fviewer.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75bc3548e154453897d2dfaecab2cdf60912ae0c/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fviewer.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-server%2Fsrc%2Fviewer.rs?ref=75bc3548e154453897d2dfaecab2cdf60912ae0c",
            "patch": "@@ -1,4 +1,4 @@\n-use std::cmp::{max, Reverse};\n+use std::cmp::{Reverse, max};\n \n use either::Either;\n use itertools::Itertools;\n@@ -173,11 +173,7 @@ impl ValueMode {\n ///\n /// cases where count per time is very low is probably not important\n fn value_over_time(value: u64, time: Timestamp) -> u64 {\n-    if *time == 0 {\n-        0\n-    } else {\n-        value / *time\n-    }\n+    if *time == 0 { 0 } else { value / *time }\n }\n \n #[derive(Clone, Copy, Debug)]"
        }
    ],
    "stats": {
        "total": 65,
        "additions": 30,
        "deletions": 35
    }
}