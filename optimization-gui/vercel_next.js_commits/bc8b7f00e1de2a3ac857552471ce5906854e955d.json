{
    "author": "nicole0707",
    "message": "Update send to v0.18.0 (#78816)\n\n### Why?\nCurrently, Next.js uses a precompiled version of send under\n`next/dist/compiled/send`, which is based on an outdated version. This\nolder version omits headers like Content-Security-Policy (CSP) when\nreturning a 304, even if those headers were present in the initial 200\nresponse.\n\nAs a result, CSP headers are either missing entirely or fallback to\ndefault CDN-level policies in cached responses. This behavior causes\nsecurity issues or inconsistent enforcement in strict CSP environments.\n\n### What?\n\nThis PR upgrades the internal `send` package used in static asset\nserving to the latest official version (v1.2.0), which includes proper\nhandling of headers in 304 Not Modified responses.\n\n\nFixes #78815",
    "sha": "bc8b7f00e1de2a3ac857552471ce5906854e955d",
    "files": [
        {
            "sha": "1b148726a7133e3274e473ec33f5d3afded0affc",
            "filename": "packages/next/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/bc8b7f00e1de2a3ac857552471ce5906854e955d/packages%2Fnext%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/bc8b7f00e1de2a3ac857552471ce5906854e955d/packages%2Fnext%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fpackage.json?ref=bc8b7f00e1de2a3ac857552471ce5906854e955d",
            "patch": "@@ -309,7 +309,7 @@\n     \"schema-utils2\": \"npm:schema-utils@2.7.1\",\n     \"schema-utils3\": \"npm:schema-utils@3.0.0\",\n     \"semver\": \"7.3.2\",\n-    \"send\": \"0.17.1\",\n+    \"send\": \"0.18.0\",\n     \"server-only\": \"0.0.1\",\n     \"setimmediate\": \"1.0.5\",\n     \"shell-quote\": \"1.7.3\","
        },
        {
            "sha": "3c8f2b5aa833308abc71e3a246ce16b910b398d7",
            "filename": "packages/next/src/compiled/compression/index.js",
            "status": "modified",
            "additions": 16,
            "deletions": 9,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/bc8b7f00e1de2a3ac857552471ce5906854e955d/packages%2Fnext%2Fsrc%2Fcompiled%2Fcompression%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/bc8b7f00e1de2a3ac857552471ce5906854e955d/packages%2Fnext%2Fsrc%2Fcompiled%2Fcompression%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Fcompression%2Findex.js?ref=bc8b7f00e1de2a3ac857552471ce5906854e955d"
        },
        {
            "sha": "b6ea1c1fd44ff6f4af6a8e4e5d4793004b9e8524",
            "filename": "packages/next/src/compiled/send/LICENSE",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/bc8b7f00e1de2a3ac857552471ce5906854e955d/packages%2Fnext%2Fsrc%2Fcompiled%2Fsend%2FLICENSE",
            "raw_url": "https://github.com/vercel/next.js/raw/bc8b7f00e1de2a3ac857552471ce5906854e955d/packages%2Fnext%2Fsrc%2Fcompiled%2Fsend%2FLICENSE",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Fsend%2FLICENSE?ref=bc8b7f00e1de2a3ac857552471ce5906854e955d",
            "patch": "@@ -1,7 +1,7 @@\n (The MIT License)\n \n Copyright (c) 2012 TJ Holowaychuk\n-Copyright (c) 2014-2016 Douglas Christopher Wilson\n+Copyright (c) 2014-2022 Douglas Christopher Wilson\n \n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the"
        },
        {
            "sha": "c44207848e832c87b1edc5d2dfa3798189ed9c1e",
            "filename": "packages/next/src/compiled/send/index.js",
            "status": "modified",
            "additions": 13,
            "deletions": 28,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/bc8b7f00e1de2a3ac857552471ce5906854e955d/packages%2Fnext%2Fsrc%2Fcompiled%2Fsend%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/bc8b7f00e1de2a3ac857552471ce5906854e955d/packages%2Fnext%2Fsrc%2Fcompiled%2Fsend%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Fsend%2Findex.js?ref=bc8b7f00e1de2a3ac857552471ce5906854e955d"
        },
        {
            "sha": "23165fc1ebee820022adbf79d07a8d1f03835ee9",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 28,
            "deletions": 14,
            "changes": 42,
            "blob_url": "https://github.com/vercel/next.js/blob/bc8b7f00e1de2a3ac857552471ce5906854e955d/pnpm-lock.yaml",
            "raw_url": "https://github.com/vercel/next.js/raw/bc8b7f00e1de2a3ac857552471ce5906854e955d/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/pnpm-lock.yaml?ref=bc8b7f00e1de2a3ac857552471ce5906854e955d",
            "patch": "@@ -1448,8 +1448,8 @@ importers:\n         specifier: 7.3.2\n         version: 7.3.2\n       send:\n-        specifier: 0.17.1\n-        version: 0.17.1\n+        specifier: 0.18.0\n+        version: 0.18.0\n       server-only:\n         specifier: 0.0.1\n         version: 0.0.1\n@@ -11722,10 +11722,6 @@ packages:\n     resolution: {integrity: sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==}\n     engines: {node: '>= 0.6'}\n \n-  mime-types@2.1.30:\n-    resolution: {integrity: sha512-crmjA4bLtR8m9qLpHvgxSChT+XoSlZi8J4n/aIdn3z92e/U47Z0V/yl+Wh9W046GgFVAmoNR/fmdbZYcSSIUeg==}\n-    engines: {node: '>= 0.6'}\n-\n   mime-types@2.1.35:\n     resolution: {integrity: sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==}\n     engines: {node: '>= 0.6'}\n@@ -14535,6 +14531,10 @@ packages:\n     resolution: {integrity: sha512-BsVKsiGcQMFwT8UxypobUKyv7irCNRHk1T0G680vk88yf6LBByGcZJOTJCrTP2xVN6yI+XjPJcNuE3V4fT9sAg==}\n     engines: {node: '>= 0.8.0'}\n \n+  send@0.18.0:\n+    resolution: {integrity: sha512-qqWzuOjSFOuqPjFe4NOsMLafToQQwBSOEpS+FwEt3A2V3vKubTquT3vmLTQpFgMXp8AlFWFuP1qKaJZOtPpVXg==}\n+    engines: {node: '>= 0.8.0'}\n+\n   send@0.19.0:\n     resolution: {integrity: sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==}\n     engines: {node: '>= 0.8.0'}\n@@ -21729,7 +21729,7 @@ snapshots:\n \n   accepts@1.3.7:\n     dependencies:\n-      mime-types: 2.1.30\n+      mime-types: 2.1.35\n       negotiator: 0.6.2\n \n   accepts@1.3.8:\n@@ -25815,13 +25815,13 @@ snapshots:\n     dependencies:\n       asynckit: 0.4.0\n       combined-stream: 1.0.8\n-      mime-types: 2.1.30\n+      mime-types: 2.1.35\n \n   form-data@4.0.0:\n     dependencies:\n       asynckit: 0.4.0\n       combined-stream: 1.0.8\n-      mime-types: 2.1.30\n+      mime-types: 2.1.35\n \n   format@0.2.2: {}\n \n@@ -29412,10 +29412,6 @@ snapshots:\n \n   mime-db@1.52.0: {}\n \n-  mime-types@2.1.30:\n-    dependencies:\n-      mime-db: 1.47.0\n-\n   mime-types@2.1.35:\n     dependencies:\n       mime-db: 1.52.0\n@@ -32177,7 +32173,7 @@ snapshots:\n       is-typedarray: 1.0.0\n       isstream: 0.1.2\n       json-stringify-safe: 5.0.1\n-      mime-types: 2.1.30\n+      mime-types: 2.1.35\n       oauth-sign: 0.9.0\n       performance-now: 2.1.0\n       qs: 6.5.2\n@@ -32585,6 +32581,24 @@ snapshots:\n     transitivePeerDependencies:\n       - supports-color\n \n+  send@0.18.0:\n+    dependencies:\n+      debug: 2.6.9\n+      depd: 2.0.0\n+      destroy: 1.2.0\n+      encodeurl: 1.0.2\n+      escape-html: 1.0.3\n+      etag: 1.8.1\n+      fresh: 0.5.2\n+      http-errors: 2.0.0\n+      mime: 1.6.0\n+      ms: 2.1.3\n+      on-finished: 2.4.1\n+      range-parser: 1.2.1\n+      statuses: 2.0.1\n+    transitivePeerDependencies:\n+      - supports-color\n+\n   send@0.19.0:\n     dependencies:\n       debug: 2.6.9"
        }
    ],
    "stats": {
        "total": 112,
        "additions": 59,
        "deletions": 53
    }
}