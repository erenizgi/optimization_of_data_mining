{
    "author": "wbinnssmith",
    "message": "Update toolchain to nightly-2025-02-12 (#75983)\n\nThis updates the Rust toolchain to nightly-2025-02-12. It required:\r\n\r\n- Removing `#![feature(async_closure)]`\r\n- Removing `#![feature(map_many_mut)]` and renaming `map.get_many_mut()`\r\nto `map.get_disjoint_mut()`\r\n- Adding a range argument to `vec.extract_if()`\r\n\r\nTest Plan: CI",
    "sha": "cb8d1b0b13d365154be57b33ee870f1d7aaef941",
    "files": [
        {
            "sha": "d90dbdfb0b0eae0bcd23c92aa3a7c6179c467874",
            "filename": "crates/next-api/src/dynamic_imports.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/crates%2Fnext-api%2Fsrc%2Fdynamic_imports.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/crates%2Fnext-api%2Fsrc%2Fdynamic_imports.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fdynamic_imports.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -9,9 +9,10 @@\n //!     [implementation 2](https://github.com/vercel/next.js/pull/56389/files#diff-791951bbe1fa09bcbad9be9173412d0848168f7d658758f11b6e8888a021552c),\n //!     [implementation 3](https://github.com/vercel/next.js/pull/56389/files#diff-c33f6895801329243dd3f627c69da259bcab95c2c9d12993152842591931ff01R557)\n //! - When running an application,\n-//!    - Server reads generated `react-loadable-manifest.json`, sets dynamicImportIds with the mapping of the import ids, and dynamicImports to the actual corresponding chunks.\n-//!         [implementation 1](https://github.com/vercel/next.js/blob/ad42b610c25b72561ad367b82b1c7383fd2a5dd2/packages/next/src/server/load-components.ts#L119),\n-//!         [implementation 2](https://github.com/vercel/next.js/blob/ad42b610c25b72561ad367b82b1c7383fd2a5dd2/packages/next/src/server/render.tsx#L1417C7-L1420)\n+//!    - Server reads generated `react-loadable-manifest.json`, sets dynamicImportIds with the\n+//!      mapping of the import ids, and dynamicImports to the actual corresponding chunks.\n+//!      [implementation 1](https://github.com/vercel/next.js/blob/ad42b610c25b72561ad367b82b1c7383fd2a5dd2/packages/next/src/server/load-components.ts#L119),\n+//!      [implementation 2](https://github.com/vercel/next.js/blob/ad42b610c25b72561ad367b82b1c7383fd2a5dd2/packages/next/src/server/render.tsx#L1417C7-L1420)\n //!    - Server embeds those into __NEXT_DATA__ and [send to the client.](https://github.com/vercel/next.js/blob/ad42b610c25b72561ad367b82b1c7383fd2a5dd2/packages/next/src/server/render.tsx#L1453)\n //!    - When client boots up, pass it to the [client preload](https://github.com/vercel/next.js/blob/ad42b610c25b72561ad367b82b1c7383fd2a5dd2/packages/next/src/client/index.tsx#L943)\n //!    - Loadable runtime [injects preload fn](https://github.com/vercel/next.js/blob/ad42b610c25b72561ad367b82b1c7383fd2a5dd2/packages/next/src/shared/lib/loadable.shared-runtime.tsx#L281)"
        },
        {
            "sha": "389e0f996ed3530a748269b1c415f7783dc40e43",
            "filename": "crates/next-api/src/server_actions.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/crates%2Fnext-api%2Fsrc%2Fserver_actions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/crates%2Fnext-api%2Fsrc%2Fserver_actions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fserver_actions.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -225,10 +225,7 @@ pub fn parse_server_actions(\n         comments.iter().find_map(|c| {\n             c.text\n                 .split_once(\"__next_internal_action_entry_do_not_use__\")\n-                .and_then(|(_, actions)| match serde_json::from_str(actions) {\n-                    Ok(v) => Some(v),\n-                    Err(_) => None,\n-                })\n+                .and_then(|(_, actions)| serde_json::from_str(actions).ok())\n         })\n     })\n }"
        },
        {
            "sha": "de01df2ca1233c3e2e7086226bb1b56544fc33f3",
            "filename": "crates/next-core/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/crates%2Fnext-core%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/crates%2Fnext-core%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,4 +1,3 @@\n-#![feature(async_closure)]\n #![feature(str_split_remainder)]\n #![feature(impl_trait_in_assoc_type)]\n #![feature(arbitrary_self_types)]"
        },
        {
            "sha": "f5018e78b1bca24c901a5c45755ee4007d1794b0",
            "filename": "crates/next-core/src/next_server/resolve.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fresolve.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -230,7 +230,7 @@ impl AfterResolvePlugin for ExternalCjsModulesResolvePlugin {\n                 *node_resolved_from_original_location.first_source().await?\n             else {\n                 if is_esm\n-                    && package_subpath != \"\"\n+                    && !package_subpath.is_empty()\n                     && package_subpath != \"/\"\n                     && !request_str.ends_with(\".js\")\n                 {"
        },
        {
            "sha": "41eb67abca56986a1f42f5b2f7018d82f9b19a0e",
            "filename": "rust-toolchain.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/rust-toolchain.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/rust-toolchain.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/rust-toolchain.toml?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,4 +1,4 @@\n [toolchain]\n-channel = \"nightly-2024-12-10\"\n+channel = \"nightly-2025-02-12\"\n components = [\"rustfmt\", \"clippy\", \"rust-analyzer\"]\n profile = \"minimal\""
        },
        {
            "sha": "293ec9e005698ce78fa85f2b701db298634af163",
            "filename": "turbopack/crates/turbo-rcstr/src/lib.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -63,7 +63,7 @@ unsafe impl Sync for RcStr {}\n \n const DYNAMIC_TAG: u8 = 0b_00;\n const INLINE_TAG: u8 = 0b_01; // len in upper nybble\n-const INLINE_TAG_INIT: NonZeroU8 = unsafe { NonZeroU8::new_unchecked(INLINE_TAG) };\n+const INLINE_TAG_INIT: NonZeroU8 = NonZeroU8::new(INLINE_TAG).unwrap();\n const TAG_MASK: u8 = 0b_11;\n const LEN_OFFSET: usize = 4;\n const LEN_MASK: u8 = 0xf0;"
        },
        {
            "sha": "8568df326f5000ad41b58e746abd1fbd005a14a5",
            "filename": "turbopack/crates/turbo-tasks-fs/examples/hash_directory.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -65,7 +65,7 @@ async fn print_hash(dir_hash: Vc<RcStr>) -> Result<Vc<()>> {\n }\n \n async fn filename(path: Vc<FileSystemPath>) -> Result<String> {\n-    Ok(path.await?.path.split('/').last().unwrap().to_string())\n+    Ok(path.await?.path.split('/').next_back().unwrap().to_string())\n }\n \n #[turbo_tasks::function]"
        },
        {
            "sha": "7fb9a0baa30318dcc2cb1252eec9655716490863",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_method_self_type.stderr",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -4,7 +4,7 @@ error: methods taking `self` are not supported with `operation`\n 13 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n    |                            ^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `fn(OperationVc<Foobar>) -> Vc<()> {Foobar::arbitrary_self_type_turbo_tasks_function_inline}: turbo_tasks::task::function::IntoTaskFnWithThis<_, _, _>` is not satisfied\n+error[E0277]: the trait bound `fn(...) -> ... {...::arbitrary_self_type_turbo_tasks_function_inline}: IntoTaskFnWithThis<_, _, _>` is not satisfied\n   --> tests/function/fail_operation_method_self_type.rs:10:1\n    |\n 10 | #[turbo_tasks::value_impl]\n@@ -20,6 +20,7 @@ note: required by a bound in `NativeFunction::new_method`\n ...\n    |         I: IntoTaskFnWithThis<Mode, This, Inputs>,\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `NativeFunction::new_method`\n+   = note: consider using `--verbose` to print the full type name to the console\n    = note: this error originates in the attribute macro `turbo_tasks::value_impl` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error[E0307]: invalid `self` parameter type: `OperationVc<Foobar>`\n@@ -28,5 +29,5 @@ error[E0307]: invalid `self` parameter type: `OperationVc<Foobar>`\n 13 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n    |                                  ^^^^^^^^^^^^^^^^^\n    |\n-   = note: type of `self` must be `Self` or a type that dereferences to it\n-   = help: consider changing to `self`, `&self`, `&mut self`, `self: Box<Self>`, `self: Rc<Self>`, `self: Arc<Self>`, or `self: Pin<P>` (where P is one of the previous types except `Self`)\n+   = note: type of `self` must be `Self` or some type implementing `Receiver`\n+   = help: consider changing to `self`, `&self`, `&mut self`, or a type implementing `Receiver` such as `self: Box<Self>`, `self: Rc<Self>`, or `self: Arc<Self>`"
        },
        {
            "sha": "e27682998cb1186a1c22741230863c0ff5c82cb8",
            "filename": "turbopack/crates/turbo-tasks-macros/src/func.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Ffunc.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Ffunc.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Ffunc.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -105,7 +105,7 @@ impl TurboFn<'_> {\n                     // other forms of self.\n \n                     let definition_context = match &definition_context {\n-                        DefinitionContext::NakedFn { .. } => return None,\n+                        DefinitionContext::NakedFn => return None,\n                         _ => &definition_context,\n                     };\n \n@@ -182,7 +182,7 @@ impl TurboFn<'_> {\n \n                     if let Pat::Ident(ident) = &*typed.pat {\n                         if ident.ident == \"self\" {\n-                            if let DefinitionContext::NakedFn { .. } = definition_context {\n+                            if let DefinitionContext::NakedFn = definition_context {\n                                 // The function is not associated. The compiler will emit an error\n                                 // on its own.\n                                 return None;\n@@ -201,10 +201,10 @@ impl TurboFn<'_> {\n                             });\n                         } else {\n                             match definition_context {\n-                                DefinitionContext::NakedFn { .. }\n-                                | DefinitionContext::ValueInherentImpl { .. } => {}\n-                                DefinitionContext::ValueTraitImpl { .. }\n-                                | DefinitionContext::ValueTrait { .. } => {\n+                                DefinitionContext::NakedFn\n+                                | DefinitionContext::ValueInherentImpl => {}\n+                                DefinitionContext::ValueTraitImpl\n+                                | DefinitionContext::ValueTrait => {\n                                     typed\n                                         .span()\n                                         .unwrap()"
        },
        {
            "sha": "5c2c9895393314db2f334644350b3bea6c3aed10",
            "filename": "turbopack/crates/turbopack-browser/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,4 +1,3 @@\n-#![feature(async_closure)]\n #![feature(iter_intersperse)]\n #![feature(int_roundings)]\n #![feature(arbitrary_self_types)]"
        },
        {
            "sha": "ff761d3d07ccea14b889e630587cfb3d2d2c9c50",
            "filename": "turbopack/crates/turbopack-cli-utils/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-cli-utils%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-cli-utils%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli-utils%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,4 +1,3 @@\n-#![feature(async_closure)]\n #![feature(min_specialization)]\n #![feature(round_char_boundary)]\n #![feature(thread_id_value)]"
        },
        {
            "sha": "644c7063811b92e940fce56b8beaee20d6c9f916",
            "filename": "turbopack/crates/turbopack-core/src/ident.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fident.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fident.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fident.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -331,7 +331,7 @@ impl AssetIdent {\n             }\n         }\n         if i > 0 {\n-            let hash = encode_hex(hash_xxh3_hash64(name[..i].as_bytes()));\n+            let hash = encode_hex(hash_xxh3_hash64(&name.as_bytes()[..i]));\n             let truncated_hash = &hash[..5];\n             name = format!(\"{}_{}\", truncated_hash, &name[i..]);\n         }"
        },
        {
            "sha": "c4edfe984ff34941576e72ab3a5424e2e82b6266",
            "filename": "turbopack/crates/turbopack-core/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,12 +1,10 @@\n-#![feature(async_closure)]\n #![feature(min_specialization)]\n #![feature(type_alias_impl_trait)]\n #![feature(assert_matches)]\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n #![feature(impl_trait_in_assoc_type)]\n #![feature(iter_intersperse)]\n-#![feature(map_many_mut)]\n \n pub mod asset;\n pub mod changed;"
        },
        {
            "sha": "b0b5c827fce9a988919d0787fd466b9ec5408dd6",
            "filename": "turbopack/crates/turbopack-core/src/module_graph/chunk_group_info.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule_graph%2Fchunk_group_info.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule_graph%2Fchunk_group_info.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule_graph%2Fchunk_group_info.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -269,7 +269,7 @@ pub async fn compute_chunk_group_info(graph: &ModuleGraph) -> Result<Vc<ChunkGro\n                         } else {\n                             // Fast path\n                             let [Some(parent_chunk_groups), Some(current_chunk_groups)] =\n-                                module_chunk_groups.get_many_mut([&parent, &node.module])\n+                                module_chunk_groups.get_disjoint_mut([&parent, &node.module])\n                             else {\n                                 // All modules are inserted in the previous iteration\n                                 unreachable!()"
        },
        {
            "sha": "07fc8033dd4e52716bb0e3d27854c55133f1446e",
            "filename": "turbopack/crates/turbopack-css/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,4 +1,3 @@\n-#![feature(async_closure)]\n #![feature(min_specialization)]\n #![feature(box_patterns)]\n #![feature(iter_intersperse)]"
        },
        {
            "sha": "7b6259572ce7e8b0a1affa6a343f5d2fe6d47315",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/router.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Frouter.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Frouter.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Frouter.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -84,9 +84,13 @@ impl ContentSource for PrefixedRouterContentSource {\n             debug_assert!(prefix.is_empty() || prefix.ends_with('/'));\n             debug_assert!(!prefix.starts_with('/'));\n         }\n-        let prefix = (!prefix.is_empty())\n-            .then(|| BaseSegment::from_static_pathname(prefix.as_str()).collect())\n-            .unwrap_or(Vec::new());\n+\n+        let prefix = if prefix.is_empty() {\n+            Vec::new()\n+        } else {\n+            BaseSegment::from_static_pathname(prefix.as_str()).collect()\n+        };\n+\n         let inner_trees = self.routes.iter().map(|(path, source)| {\n             let prepended_base = prefix\n                 .iter()"
        },
        {
            "sha": "11710bcaeabf9a39de5092e558d6eb88371d2759",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/mod.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1723,11 +1723,11 @@ impl JsValue {\n                         format!(\"path.resolve({cwd})\"),\n                         \"The Node.js path.resolve method: https://nodejs.org/api/path.html#pathresolvepaths\",\n                     ),\n-                    WellKnownFunctionKind::Import { .. } => (\n+                    WellKnownFunctionKind::Import => (\n                         \"import\".to_string(),\n                         \"The dynamic import() method from the ESM specification: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports\"\n                     ),\n-                    WellKnownFunctionKind::Require { .. } => (\"require\".to_string(), \"The require method from CommonJS\"),\n+                    WellKnownFunctionKind::Require => (\"require\".to_string(), \"The require method from CommonJS\"),\n                     WellKnownFunctionKind::RequireResolve => (\"require.resolve\".to_string(), \"The require.resolve method from CommonJS\"),\n                     WellKnownFunctionKind::RequireContext => (\"require.context\".to_string(), \"The require.context method from webpack\"),\n                     WellKnownFunctionKind::RequireContextRequire(..) => (\"require.context(...)\".to_string(), \"The require.context(...) method from webpack: https://webpack.js.org/api/module-methods/#requirecontext\"),\n@@ -1802,7 +1802,7 @@ impl JsValue {\n                       \"load/loadSync\".to_string(),\n                       \"require('@grpc/proto-loader').load(filepath, { includeDirs: [root] }) https://github.com/grpc/grpc-node\"\n                     ),\n-                    WellKnownFunctionKind::WorkerConstructor { .. } => (\n+                    WellKnownFunctionKind::WorkerConstructor => (\n                       \"Worker\".to_string(),\n                       \"The standard Worker constructor: https://developer.mozilla.org/en-US/docs/Web/API/Worker/Worker\"\n                     ),\n@@ -3876,7 +3876,7 @@ pub mod test_utils {\n         let mut new_value = match v {\n             JsValue::Call(\n                 _,\n-                box JsValue::WellKnownFunction(WellKnownFunctionKind::Import { .. }),\n+                box JsValue::WellKnownFunction(WellKnownFunctionKind::Import),\n                 ref args,\n             ) => match &args[0] {\n                 JsValue::Constant(v) => JsValue::Module(ModuleValue {"
        },
        {
            "sha": "103dbbb6137837c818d0d445ed5b15676e3e8a1a",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/well_known.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fwell_known.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fwell_known.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fwell_known.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -515,13 +515,13 @@ pub fn path_to_file_url(args: Vec<JsValue>) -> JsValue {\n \n pub fn well_known_function_member(kind: WellKnownFunctionKind, prop: JsValue) -> (JsValue, bool) {\n     let new_value = match (kind, prop.as_str()) {\n-        (WellKnownFunctionKind::Require { .. }, Some(\"resolve\")) => {\n+        (WellKnownFunctionKind::Require, Some(\"resolve\")) => {\n             JsValue::WellKnownFunction(WellKnownFunctionKind::RequireResolve)\n         }\n-        (WellKnownFunctionKind::Require { .. }, Some(\"cache\")) => {\n+        (WellKnownFunctionKind::Require, Some(\"cache\")) => {\n             JsValue::WellKnownObject(WellKnownObjectKind::RequireCache)\n         }\n-        (WellKnownFunctionKind::Require { .. }, Some(\"context\")) => {\n+        (WellKnownFunctionKind::Require, Some(\"context\")) => {\n             JsValue::WellKnownFunction(WellKnownFunctionKind::RequireContext)\n         }\n         (WellKnownFunctionKind::RequireContextRequire(val), Some(\"resolve\")) => {\n@@ -536,7 +536,7 @@ pub fn well_known_function_member(kind: WellKnownFunctionKind, prop: JsValue) ->\n         (WellKnownFunctionKind::NodeResolveFrom, Some(\"silent\")) => {\n             JsValue::WellKnownFunction(WellKnownFunctionKind::NodeResolveFrom)\n         }\n-        (WellKnownFunctionKind::Import { .. }, Some(\"meta\")) => {\n+        (WellKnownFunctionKind::Import, Some(\"meta\")) => {\n             JsValue::WellKnownObject(WellKnownObjectKind::ImportMeta)\n         }\n         #[allow(unreachable_patterns)]"
        },
        {
            "sha": "27a6232dc666695c119e003bed8504c8a7a1f4fd",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,6 +1,5 @@\n // Needed for swc visit_ macros\n #![allow(non_local_definitions)]\n-#![feature(async_closure)]\n #![feature(box_patterns)]\n #![feature(min_specialization)]\n #![feature(iter_intersperse)]"
        },
        {
            "sha": "0b6e4cc3642e119605e1b343e75db7fa1c34566c",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -2303,7 +2303,7 @@ async fn handle_member(\n         }\n \n         if is_prop_cache {\n-            if let JsValue::WellKnownFunction(WellKnownFunctionKind::Require { .. }) =\n+            if let JsValue::WellKnownFunction(WellKnownFunctionKind::Require) =\n                 obj.as_ref().unwrap()\n             {\n                 analysis.add_code_gen(CjsRequireCacheAccess::new(ast_path.to_vec().into()));"
        },
        {
            "sha": "e655b816645d7e578003fb605aac223591b61b50",
            "filename": "turbopack/crates/turbopack-env/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -9,7 +9,6 @@\n //! cannot override it). Later dotenv files can reference variables prior\n //! defined variables.\n \n-#![feature(async_closure)]\n #![feature(min_specialization)]\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]"
        },
        {
            "sha": "eba4f8032ee492ce14aed8e431fc8648e9390331",
            "filename": "turbopack/crates/turbopack-node/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,4 +1,3 @@\n-#![feature(async_closure)]\n #![feature(min_specialization)]\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]"
        },
        {
            "sha": "e1a22cd56a8d9d6a3a2a7276340972b922a3d33a",
            "filename": "turbopack/crates/turbopack-node/src/transforms/webpack.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -612,7 +612,9 @@ async fn apply_webpack_resolve_options(\n     if let Some(alias_fields) = webpack_resolve_options.alias_fields {\n         let mut old = resolve_options\n             .in_package\n-            .extract_if(|field| matches!(field, ResolveInPackage::AliasField(..)))\n+            .extract_if(0.., |field| {\n+                matches!(field, ResolveInPackage::AliasField(..))\n+            })\n             .collect::<Vec<_>>();\n         for field in alias_fields {\n             if &*field == \"...\" {\n@@ -653,7 +655,9 @@ async fn apply_webpack_resolve_options(\n     if let Some(main_fields) = webpack_resolve_options.main_fields {\n         let mut old = resolve_options\n             .into_package\n-            .extract_if(|field| matches!(field, ResolveIntoPackage::MainField { .. }))\n+            .extract_if(0.., |field| {\n+                matches!(field, ResolveIntoPackage::MainField { .. })\n+            })\n             .collect::<Vec<_>>();\n         for field in main_fields {\n             if &*field == \"...\" {"
        },
        {
            "sha": "5b6808a1e852228f176bf845c9a64f773c6e51d5",
            "filename": "turbopack/crates/turbopack-nodejs/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,4 +1,3 @@\n-#![feature(async_closure)]\n #![feature(iter_intersperse)]\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]"
        },
        {
            "sha": "bdd5df320344b4fea4f9a6bd817ee88c9cd10d36",
            "filename": "turbopack/crates/turbopack-trace-utils/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-trace-utils%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/cb8d1b0b13d365154be57b33ee870f1d7aaef941/turbopack%2Fcrates%2Fturbopack-trace-utils%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-trace-utils%2Fsrc%2Flib.rs?ref=cb8d1b0b13d365154be57b33ee870f1d7aaef941",
            "patch": "@@ -1,4 +1,3 @@\n-#![feature(async_closure)]\n #![feature(min_specialization)]\n #![feature(round_char_boundary)]\n #![feature(thread_id_value)]"
        }
    ],
    "stats": {
        "total": 90,
        "additions": 43,
        "deletions": 47
    }
}