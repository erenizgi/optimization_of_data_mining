{
    "author": "huozhi",
    "message": "[devtool] copy decoded info of error details (#81735)\n\nChange the copy button's content from the original error stack trace to a prompt template with error details from the error page and ask AI to fix it. You can copy it for either bug reporting or asking AI agent to explain/fix the errors for you.\r\n\r\n### Example content\r\n\r\nA runtime error prompt\r\n```\r\nFix this error in Next.js app:\r\n\r\n## Error Type\r\nRuntime Error\r\n\r\n## Error Message\r\nError on client\r\n    at Page (app/runtime-error/page.tsx:5:11)\r\n\r\n## Code Frame\r\n  3 | export default function Page() {\r\n  4 |   if (typeof window !== 'undefined') {\r\n> 5 |     throw new Error('Error on client')\r\n    |           ^\r\n  6 |   }\r\n  7 |   return <p>page</p>\r\n  8 | }\r\n\r\nNext.js version: 15.4.2-canary.3 (Webpack)\r\n\r\nExplain what's wrong and fix it.\r\n```\r\n\r\n### Recordings\r\n\r\n| build error | runtime error |\r\n|:--|:--|\r\n| <video src=\"https://github.com/user-attachments/assets/f31c935e-797c-48c7-8e80-5c1bdcde7c5c\"> | <video src=\"https://github.com/user-attachments/assets/15987538-af32-4a32-90e7-1bbf08f1d57b\"> |",
    "sha": "7d030a0295d36e649320ae501b609d9eac48bcb6",
    "files": [
        {
            "sha": "66469787577c8cecc892e2ebf6b3b0bfc63dca8f",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/copy-button/index.tsx",
            "status": "modified",
            "additions": 27,
            "deletions": 12,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcopy-button%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcopy-button%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcopy-button%2Findex.tsx?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -133,20 +133,35 @@ function useCopyModern(content: string) {\n const useCopy =\n   typeof React.useActionState === 'function' ? useCopyModern : useCopyLegacy\n \n-export function CopyButton({\n-  actionLabel,\n-  successLabel,\n-  content,\n-  icon,\n-  disabled,\n-  ...props\n-}: React.HTMLProps<HTMLButtonElement> & {\n+type CopyButtonProps = React.HTMLProps<HTMLButtonElement> & {\n   actionLabel: string\n   successLabel: string\n-  content: string\n   icon?: React.ReactNode\n-}) {\n-  const [copyState, copy, reset, isPending] = useCopy(content)\n+}\n+\n+export function CopyButton(\n+  props: CopyButtonProps & { content?: string; getContent?: () => string }\n+) {\n+  const {\n+    content,\n+    getContent,\n+    actionLabel,\n+    successLabel,\n+    icon,\n+    disabled,\n+    ...rest\n+  } = props\n+  const getContentString = (): string => {\n+    if (content) {\n+      return content\n+    }\n+    if (getContent) {\n+      return getContent()\n+    }\n+    return ''\n+  }\n+  const contentString = getContentString()\n+  const [copyState, copy, reset, isPending] = useCopy(contentString)\n \n   const error = copyState.state === 'error' ? copyState.error : null\n   React.useEffect(() => {\n@@ -186,7 +201,7 @@ export function CopyButton({\n \n   return (\n     <button\n-      {...props}\n+      {...rest}\n       type=\"button\"\n       title={label}\n       aria-label={label}"
        },
        {
            "sha": "e9de2c40920c0880c1fd0de90efb43a24d2e4d5c",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-layout/error-overlay-layout.test.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.test.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.test.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.test.tsx?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -29,6 +29,7 @@ const renderTestComponent = () => {\n         installed: '15.0.0',\n         staleness: 'fresh',\n       }}\n+      generateErrorInfo={() => ''}\n     >\n       Module not found: Cannot find module './missing-module'\n     </ErrorOverlayLayout>"
        },
        {
            "sha": "e948660ef91810b78a7b4634037e168501ac84ac",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-layout/error-overlay-layout.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -52,6 +52,7 @@ export interface ErrorOverlayLayoutProps extends ErrorBaseProps {\n   activeIdx?: number\n   setActiveIndex?: (index: number) => void\n   dialogResizerRef?: React.RefObject<HTMLDivElement | null>\n+  generateErrorInfo: () => string\n }\n \n export function ErrorOverlayLayout({\n@@ -70,6 +71,7 @@ export function ErrorOverlayLayout({\n   setActiveIndex,\n   isTurbopack,\n   dialogResizerRef,\n+  generateErrorInfo,\n   // This prop is used to animate the dialog, it comes from a parent component (<ErrorOverlay>)\n   // If it's not being passed, we should just render the component as it is being\n   // used without the context of a parent component that controls its state (e.g. Storybook).\n@@ -151,7 +153,11 @@ export function ErrorOverlayLayout({\n                       />\n                     )}\n                   </span>\n-                  <ErrorOverlayToolbar error={error} debugInfo={debugInfo} />\n+                  <ErrorOverlayToolbar\n+                    error={error}\n+                    debugInfo={debugInfo}\n+                    generateErrorInfo={generateErrorInfo}\n+                  />\n                 </div>\n                 <ErrorMessage errorMessage={errorMessage} />\n               </ErrorOverlayDialogHeader>"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-toolbar/copy-error-button.css",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.css",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.css",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.css?ref=7d030a0295d36e649320ae501b609d9eac48bcb6"
        },
        {
            "sha": "212c778b723ab56a18f666cf472807a33942df66",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-toolbar/copy-error-button.stories.tsx",
            "status": "renamed",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.stories.tsx?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -1,17 +1,17 @@\n import type { Meta, StoryObj } from '@storybook/react'\n-import { CopyStackTraceButton } from './copy-stack-trace-button'\n+import { CopyErrorButton } from './copy-error-button'\n import { withShadowPortal } from '../../../storybook/with-shadow-portal'\n \n-const meta: Meta<typeof CopyStackTraceButton> = {\n-  component: CopyStackTraceButton,\n+const meta: Meta<typeof CopyErrorButton> = {\n+  component: CopyErrorButton,\n   parameters: {\n     layout: 'centered',\n   },\n   decorators: [withShadowPortal],\n }\n \n export default meta\n-type Story = StoryObj<typeof CopyStackTraceButton>\n+type Story = StoryObj<typeof CopyErrorButton>\n \n export const WithStackTrace: Story = {\n   args: {",
            "previous_filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-toolbar/copy-stack-trace-button.stories.tsx"
        },
        {
            "sha": "b8b0bc63d981eadfb5ec76f933824700be72a111",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-toolbar/copy-error-button.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-error-button.tsx?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -0,0 +1,20 @@\n+import { CopyButton } from '../../copy-button'\n+\n+export function CopyErrorButton({\n+  error,\n+  generateErrorInfo,\n+}: {\n+  error: Error\n+  generateErrorInfo: () => string\n+}) {\n+  return (\n+    <CopyButton\n+      data-nextjs-data-runtime-error-copy-stack\n+      className=\"copy-error-button\"\n+      actionLabel=\"Copy Error Info\"\n+      successLabel=\"Error Info Copied\"\n+      getContent={generateErrorInfo}\n+      disabled={!error}\n+    />\n+  )\n+}"
        },
        {
            "sha": "62b8729e564776cb627deb9402c6910087653262",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-toolbar/copy-stack-trace-button.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/cf1b7194a882b07f2e59021fedb6fbed44ac8f4c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-stack-trace-button.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/cf1b7194a882b07f2e59021fedb6fbed44ac8f4c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-stack-trace-button.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Fcopy-stack-trace-button.tsx?ref=cf1b7194a882b07f2e59021fedb6fbed44ac8f4c",
            "patch": "@@ -1,14 +0,0 @@\n-import { CopyButton } from '../../copy-button'\n-\n-export function CopyStackTraceButton({ error }: { error: Error }) {\n-  return (\n-    <CopyButton\n-      data-nextjs-data-runtime-error-copy-stack\n-      className=\"copy-stack-trace-button\"\n-      actionLabel=\"Copy Stack Trace\"\n-      successLabel=\"Stack Trace Copied\"\n-      content={error.stack || ''}\n-      disabled={!error.stack}\n-    />\n-  )\n-}"
        },
        {
            "sha": "e477744bfdfefeb8130524436f6ee33d7873a9e0",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-toolbar/error-overlay-toolbar.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Ferror-overlay-toolbar.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Ferror-overlay-toolbar.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-toolbar%2Ferror-overlay-toolbar.tsx?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -1,24 +1,26 @@\n import type { DebugInfo } from '../../../../shared/types'\n import { NodejsInspectorButton } from './nodejs-inspector-button'\n-import { CopyStackTraceButton } from './copy-stack-trace-button'\n+import { CopyErrorButton } from './copy-error-button'\n import { DocsLinkButton } from './docs-link-button'\n \n type ErrorOverlayToolbarProps = {\n   error: Error\n   debugInfo: DebugInfo | undefined\n   feedbackButton?: React.ReactNode\n+  generateErrorInfo: () => string\n }\n \n export function ErrorOverlayToolbar({\n   error,\n   debugInfo,\n   feedbackButton,\n+  generateErrorInfo,\n }: ErrorOverlayToolbarProps) {\n   return (\n     <span className=\"error-overlay-toolbar\">\n       {/* TODO: Move the button inside and remove the feedback on the footer of the error overlay.  */}\n       {feedbackButton}\n-      <CopyStackTraceButton error={error} />\n+      <CopyErrorButton error={error} generateErrorInfo={generateErrorInfo} />\n       <DocsLinkButton errorMessage={error.message} />\n       <NodejsInspectorButton\n         devtoolsFrontendUrl={debugInfo?.devtoolsFrontendUrl}\n@@ -34,7 +36,7 @@ export const styles = `\n   }\n \n   .nodejs-inspector-button,\n-  .copy-stack-trace-button,\n+  .copy-error-button,\n   .docs-link-button {\n     display: flex;\n     justify-content: center;"
        },
        {
            "sha": "077b8d7487201e629b0d0bdd176a3d0ed175ce2b",
            "filename": "packages/next/src/next-devtools/dev-overlay/container/build-error.tsx",
            "status": "modified",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Fbuild-error.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Fbuild-error.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Fbuild-error.tsx?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -37,12 +37,38 @@ export const BuildError: React.FC<BuildErrorProps> = function BuildError({\n     [message]\n   )\n \n+  const generateErrorInfo = useCallback(() => {\n+    const parts: string[] = []\n+\n+    // 1. Error Type\n+    parts.push(`## Error Type\\nBuild Error`)\n+\n+    // 2. Error Message\n+    if (formattedMessage) {\n+      parts.push(`## Error Message\\n${formattedMessage}`)\n+    }\n+\n+    // 3. Build Output (decoded stderr)\n+    if (message) {\n+      const decodedOutput = stripAnsi(message)\n+      parts.push(`## Build Output\\n${decodedOutput}`)\n+    }\n+\n+    // Format as AI prompt\n+    const errorInfo = `${parts.join('\\n\\n')}\n+\n+Next.js version: ${props.versionInfo.installed} (${process.env.__NEXT_BUNDLER})\\n`\n+\n+    return errorInfo\n+  }, [message, formattedMessage, props.versionInfo])\n+\n   return (\n     <ErrorOverlayLayout\n       errorType=\"Build Error\"\n       errorMessage={formattedMessage}\n       onClose={noop}\n       error={error}\n+      generateErrorInfo={generateErrorInfo}\n       {...props}\n     >\n       <Terminal content={message} />"
        },
        {
            "sha": "9a695f5c4f8ecbd31281543972812d834a5e8d5f",
            "filename": "packages/next/src/next-devtools/dev-overlay/container/errors.tsx",
            "status": "modified",
            "additions": 82,
            "deletions": 1,
            "changes": 83,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Ferrors.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Ferrors.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Ferrors.tsx?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -1,4 +1,4 @@\n-import { useMemo, useRef, Suspense } from 'react'\n+import { useMemo, useRef, Suspense, useCallback } from 'react'\n import type { DebugInfo } from '../../shared/types'\n import { Overlay, OverlayBackdrop } from '../components/overlay'\n import { RuntimeError } from './runtime-error'\n@@ -15,9 +15,12 @@ import {\n   NEXTJS_HYDRATION_ERROR_LINK,\n } from '../../shared/react-19-hydration-error'\n import type { ReadyRuntimeError } from '../utils/get-error-by-type'\n+import { useFrames } from '../utils/get-error-by-type'\n import type { ErrorBaseProps } from '../components/errors/error-overlay/error-overlay'\n import type { HydrationErrorState } from '../../shared/hydration-error'\n import { useActiveRuntimeError } from '../hooks/use-active-runtime-error'\n+import { formatCodeFrame } from '../components/code-frame/parse-code-frame'\n+import stripAnsi from 'next/dist/compiled/strip-ansi'\n \n export interface ErrorsProps extends ErrorBaseProps {\n   getSquashedHydrationErrorDetails: (error: Error) => HydrationErrorState | null\n@@ -132,6 +135,83 @@ export function Errors({\n     setActiveIndex,\n   } = useActiveRuntimeError({ runtimeErrors, getSquashedHydrationErrorDetails })\n \n+  // Get parsed frames data\n+  const frames = useFrames(activeError)\n+\n+  const firstFrame = useMemo(() => {\n+    const firstFirstPartyFrameIndex = frames.findIndex(\n+      (entry) =>\n+        !entry.ignored &&\n+        Boolean(entry.originalCodeFrame) &&\n+        Boolean(entry.originalStackFrame)\n+    )\n+\n+    return frames[firstFirstPartyFrameIndex] ?? null\n+  }, [frames])\n+\n+  const generateErrorInfo = useCallback(() => {\n+    if (!activeError) return ''\n+\n+    const parts: string[] = []\n+\n+    // 1. Error Type\n+    if (errorType) {\n+      parts.push(`## Error Type\\n${errorType}`)\n+    }\n+\n+    // 2. Error Message\n+    const error = activeError.error\n+    let message = error.message\n+    if ('environmentName' in error && error.environmentName) {\n+      const envPrefix = `[ ${error.environmentName} ] `\n+      if (message.startsWith(envPrefix)) {\n+        message = message.slice(envPrefix.length)\n+      }\n+    }\n+    if (message) {\n+      parts.push(`## Error Message\\n${message}`)\n+    }\n+    // Append call stack\n+    if (frames.length > 0) {\n+      const visibleFrames = frames.filter((frame) => !frame.ignored)\n+      if (visibleFrames.length > 0) {\n+        const stackLines = visibleFrames\n+          .map((frame) => {\n+            if (frame.originalStackFrame) {\n+              const { methodName, file, line1, column1 } =\n+                frame.originalStackFrame\n+              return `    at ${methodName} (${file}:${line1}:${column1})`\n+            } else if (frame.sourceStackFrame) {\n+              const { methodName, file, line1, column1 } =\n+                frame.sourceStackFrame\n+              return `    at ${methodName} (${file}:${line1}:${column1})`\n+            }\n+            return ''\n+          })\n+          .filter(Boolean)\n+\n+        if (stackLines.length > 0) {\n+          parts.push(`\\n${stackLines.join('\\n')}`)\n+        }\n+      }\n+    }\n+\n+    // 3. Code Frame (decoded)\n+    if (firstFrame?.originalCodeFrame) {\n+      const decodedCodeFrame = stripAnsi(\n+        formatCodeFrame(firstFrame.originalCodeFrame)\n+      )\n+      parts.push(`## Code Frame\\n${decodedCodeFrame}`)\n+    }\n+\n+    // Format as markdown error info\n+    const errorInfo = `${parts.join('\\n\\n')}\n+\n+Next.js version: ${props.versionInfo.installed} (${process.env.__NEXT_BUNDLER})\\n`\n+\n+    return errorInfo\n+  }, [activeError, errorType, firstFrame, frames, props.versionInfo])\n+\n   if (isLoading) {\n     // TODO: better loading state\n     return (\n@@ -168,6 +248,7 @@ export function Errors({\n       activeIdx={activeIdx}\n       setActiveIndex={setActiveIndex}\n       dialogResizerRef={dialogResizerRef}\n+      generateErrorInfo={generateErrorInfo}\n       {...props}\n     >\n       <div className=\"error-overlay-notes-container\">"
        },
        {
            "sha": "4a0cb07f79664bbc07d6f812879702334906c3aa",
            "filename": "packages/next/src/next-devtools/dev-overlay/utils/get-error-by-type.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Futils%2Fget-error-by-type.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/7d030a0295d36e649320ae501b609d9eac48bcb6/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Futils%2Fget-error-by-type.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Futils%2Fget-error-by-type.ts?ref=7d030a0295d36e649320ae501b609d9eac48bcb6",
            "patch": "@@ -14,7 +14,11 @@ export type ReadyRuntimeError = {\n   type: 'runtime' | 'console' | 'recoverable'\n }\n \n-export const useFrames = (error: ReadyRuntimeError): OriginalStackFrame[] => {\n+export const useFrames = (\n+  error: ReadyRuntimeError | null\n+): OriginalStackFrame[] => {\n+  if (!error) return []\n+\n   if ('use' in React) {\n     const frames = error.frames\n "
        }
    ],
    "stats": {
        "total": 213,
        "additions": 177,
        "deletions": 36
    }
}