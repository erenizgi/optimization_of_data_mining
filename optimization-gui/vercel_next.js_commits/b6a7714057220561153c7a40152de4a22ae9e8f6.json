{
    "author": "unstubbable",
    "message": "Hoist inner `'use cache'` functions to reduce function allocations (#85904)\n\nThis PR fixes a slight performance regression introduced in #85519 where\ninline async function expressions were created for each unique set of\narguments passed to a `'use cache'` function.\n\nFor a function like this:\n\n```js\nexport async function getCachedData(id) {\n  'use cache';\n  return fetch(`/api/data/${id}`);\n}\n```\n\nwe were previously generating (simplified):\n\n```js\nexport var $$RSC_SERVER_CACHE_0 = cache(\"default\", \"0815\", 0, async function(id) {\n  return fetch(`/api/data/${id}`);\n});\n```\n\nIn #85519, we restructured this to ensure proper stack frames in error\nmessages (simplified):\n\n```js\nexport var $$RSC_SERVER_CACHE_0 = React.cache(function getCachedData() {\n  return cache(\"default\", \"0815\", 0, async function(id) {\n    return fetch(`/api/data/${id}`);\n  }, arguments);\n});\n```\n\nHowever, this introduced a small performance issue: the inner async\nfunction expression was passed inline to the cache wrapper. While\n`React.cache` memoizes the outer function, each unique set of arguments\nwould cause a new inner function object to be allocated.\n\nNow we're generating (simplified):\n\n```js\nconst $$RSC_SERVER_CACHE_0_INNER = async function getCachedData(id) {\n  return fetch(`/api/data/${id}`);\n};\n\nexport var $$RSC_SERVER_CACHE_0 = React.cache(function getCachedData() {\n  return cache(\"default\", \"0815\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n});\n```\n\nThe cache implementation is now hoisted to module scope with an `_INNER`\nsuffix as a const declaration with a named function expression. The\nfunction name is preserved to ensure proper stack traces in dev. This\neliminates the repeated function allocations while preserving the\nimprovements from #85519.",
    "sha": "b6a7714057220561153c7a40152de4a22ae9e8f6",
    "files": [
        {
            "sha": "398e94b9992ec43c120bb4657cfaa401fd070a0d",
            "filename": "crates/next-custom-transforms/src/transforms/server_actions.rs",
            "status": "modified",
            "additions": 102,
            "deletions": 120,
            "changes": 222,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -733,8 +733,7 @@ impl<C: Comments> ServerActions<C> {\n         }\n \n         let cache_name: Atom = self.gen_cache_ident();\n-        let cache_ident = private_ident!(Span::dummy_with_cmt(), cache_name.clone());\n-        let export_name: Atom = cache_name;\n+        let export_name: Atom = cache_name.clone();\n \n         let reference_id = self.generate_server_reference_id(&export_name, true, Some(&new_params));\n \n@@ -760,55 +759,18 @@ impl<C: Comments> ServerActions<C> {\n             }),\n         };\n \n-        let inner_fn = Box::new(Expr::Fn(FnExpr {\n-            ident: None,\n-            function: Box::new(Function {\n-                params: new_params.clone(),\n-                body: inner_fn_body,\n-                span: arrow.span,\n-                is_generator: false,\n-                is_async: true,\n-                ..Default::default()\n-            }),\n-        }));\n-\n-        // Wrap with $$reactCache__(function foo() { return $$cache__(...) })\n-        let wrapper_fn = wrap_cache_expr(\n+        let cache_ident = create_and_hoist_cache_function(\n             cache_kind.as_str(),\n-            reference_id.as_str(),\n+            reference_id.clone(),\n             ids_from_closure.len(),\n-            inner_fn,\n+            cache_name,\n             self.arrow_or_fn_expr_ident.clone(),\n+            new_params.clone(),\n+            inner_fn_body,\n             arrow.span,\n+            &mut self.hoisted_extra_items,\n         );\n \n-        // Create the export: export var $$RSC_SERVER_CACHE_0 = ...\n-        self.hoisted_extra_items\n-            .push(ModuleItem::ModuleDecl(ModuleDecl::ExportDecl(ExportDecl {\n-                span: DUMMY_SP,\n-                decl: VarDecl {\n-                    kind: VarDeclKind::Var,\n-                    decls: vec![VarDeclarator {\n-                        span: arrow.span,\n-                        name: Pat::Ident(cache_ident.clone().into()),\n-                        init: Some(wrapper_fn),\n-                        definite: false,\n-                    }],\n-                    ..Default::default()\n-                }\n-                .into(),\n-            })));\n-\n-        self.hoisted_extra_items\n-            .push(ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n-                span: DUMMY_SP,\n-                expr: Box::new(annotate_ident_as_server_reference(\n-                    cache_ident.clone(),\n-                    reference_id.clone(),\n-                    arrow.span,\n-                )),\n-            })));\n-\n         if let Some(Ident { sym, .. }) = &self.arrow_or_fn_expr_ident {\n             assign_name_to_ident(&cache_ident, sym.as_str(), &mut self.hoisted_extra_items);\n         }\n@@ -855,7 +817,6 @@ impl<C: Comments> ServerActions<C> {\n         }\n \n         let cache_name: Atom = self.gen_cache_ident();\n-        let cache_ident = private_ident!(Span::dummy_with_cmt(), cache_name.clone());\n \n         let reference_id = self.generate_server_reference_id(&cache_name, true, Some(&new_params));\n \n@@ -871,54 +832,18 @@ impl<C: Comments> ServerActions<C> {\n         let function_body = function.body.take();\n         let function_span = function.span;\n \n-        let inner_fn = Box::new(Expr::Fn(FnExpr {\n-            ident: fn_name.clone(),\n-            function: Box::new(Function {\n-                params: new_params.clone(),\n-                body: function_body,\n-                span: function_span,\n-                is_async: true,\n-                ..function.take()\n-            }),\n-        }));\n-\n-        // Wrap with $$reactCache__(function foo() { return $$cache__(...) })\n-        let wrapper_fn = wrap_cache_expr(\n+        let cache_ident = create_and_hoist_cache_function(\n             cache_kind.as_str(),\n-            reference_id.as_str(),\n+            reference_id.clone(),\n             ids_from_closure.len(),\n-            inner_fn,\n+            cache_name,\n             fn_name.clone(),\n+            new_params.clone(),\n+            function_body,\n             function_span,\n+            &mut self.hoisted_extra_items,\n         );\n \n-        // Create the export: export var $$RSC_SERVER_CACHE_0 = ...\n-        self.hoisted_extra_items\n-            .push(ModuleItem::ModuleDecl(ModuleDecl::ExportDecl(ExportDecl {\n-                span: DUMMY_SP,\n-                decl: VarDecl {\n-                    kind: VarDeclKind::Var,\n-                    decls: vec![VarDeclarator {\n-                        span: function_span,\n-                        name: Pat::Ident(cache_ident.clone().into()),\n-                        init: Some(wrapper_fn),\n-                        definite: false,\n-                    }],\n-                    ..Default::default()\n-                }\n-                .into(),\n-            })));\n-\n-        self.hoisted_extra_items\n-            .push(ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n-                span: DUMMY_SP,\n-                expr: Box::new(annotate_ident_as_server_reference(\n-                    cache_ident.clone(),\n-                    reference_id.clone(),\n-                    function_span,\n-                )),\n-            })));\n-\n         if let Some(Ident { sym, .. }) = fn_name {\n             assign_name_to_ident(&cache_ident, sym.as_str(), &mut self.hoisted_extra_items);\n         } else if self.in_default_export_decl {\n@@ -2412,46 +2337,77 @@ fn retain_names_from_declared_idents(\n     *child_names = retained_names;\n }\n \n-fn wrap_cache_expr(\n+#[allow(clippy::too_many_arguments)]\n+fn create_and_hoist_cache_function(\n     cache_kind: &str,\n-    reference_id: &str,\n+    reference_id: Atom,\n     bound_args_length: usize,\n-    inner_fn: Box<Expr>,\n+    cache_name: Atom,\n     fn_ident: Option<Ident>,\n+    params: Vec<Param>,\n+    body: Option<BlockStmt>,\n     original_span: Span,\n-) -> Box<Expr> {\n+    hoisted_extra_items: &mut Vec<ModuleItem>,\n+) -> Ident {\n+    let cache_ident = private_ident!(Span::dummy_with_cmt(), cache_name.clone());\n+    let inner_fn_name: Atom = format!(\"{}_INNER\", cache_name).into();\n+    let inner_fn_ident = private_ident!(Span::dummy_with_cmt(), inner_fn_name);\n+\n+    let inner_fn_expr = FnExpr {\n+        ident: fn_ident.clone(),\n+        function: Box::new(Function {\n+            params,\n+            body,\n+            span: original_span,\n+            is_generator: false,\n+            is_async: true,\n+            ..Default::default()\n+        }),\n+    };\n+\n+    hoisted_extra_items.push(ModuleItem::Stmt(Stmt::Decl(Decl::Var(Box::new(VarDecl {\n+        span: original_span,\n+        kind: VarDeclKind::Const,\n+        declare: false,\n+        decls: vec![VarDeclarator {\n+            span: original_span,\n+            name: Pat::Ident(BindingIdent {\n+                id: inner_fn_ident.clone(),\n+                type_ann: None,\n+            }),\n+            init: Some(Box::new(Expr::Fn(inner_fn_expr))),\n+            definite: false,\n+        }],\n+        ..Default::default()\n+    })))));\n+\n+    // For anonymous functions, set the name property to an empty string to\n+    // avoid leaking the internal variable name in stack traces.\n+    if fn_ident.is_none() {\n+        assign_name_to_ident(&inner_fn_ident, \"\", hoisted_extra_items);\n+    }\n+\n     let cache_call = CallExpr {\n         span: original_span,\n         callee: quote_ident!(\"$$cache__\").as_callee(),\n         args: vec![\n-            ExprOrSpread {\n-                spread: None,\n-                expr: Box::new(cache_kind.into()),\n-            },\n-            ExprOrSpread {\n-                spread: None,\n-                expr: Box::new(reference_id.into()),\n-            },\n-            ExprOrSpread {\n-                spread: None,\n-                expr: Box::new(Expr::Lit(Lit::Num(Number {\n-                    span: DUMMY_SP,\n-                    value: bound_args_length as f64,\n-                    raw: None,\n-                }))),\n-            },\n-            inner_fn.as_arg(),\n-            ExprOrSpread {\n-                spread: None,\n-                expr: Box::new(Expr::Ident(private_ident!(DUMMY_SP, \"arguments\"))),\n-            },\n+            Box::new(Expr::from(cache_kind)).as_arg(),\n+            Box::new(Expr::from(reference_id.as_str())).as_arg(),\n+            Box::new(Expr::Lit(Lit::Num(Number {\n+                span: DUMMY_SP,\n+                value: bound_args_length as f64,\n+                raw: None,\n+            })))\n+            .as_arg(),\n+            Box::new(Expr::Ident(inner_fn_ident)).as_arg(),\n+            Box::new(Expr::Ident(private_ident!(DUMMY_SP, \"arguments\"))).as_arg(),\n         ],\n         ..Default::default()\n     };\n \n     // This wrapper function ensures that we have a user-space call stack frame.\n-    let wrapper_fn = Box::new(Expr::Fn(FnExpr {\n-        ident: fn_ident,\n+    let wrapper_fn_expr = Box::new(Expr::Fn(FnExpr {\n+        ident: fn_ident.clone(),\n         function: Box::new(Function {\n             body: Some(BlockStmt {\n                 span: DUMMY_SP,\n@@ -2466,11 +2422,37 @@ fn wrap_cache_expr(\n         }),\n     }));\n \n-    Box::new(Expr::Call(CallExpr {\n+    let wrapper_fn = Box::new(Expr::Call(CallExpr {\n         callee: quote_ident!(\"$$reactCache__\").as_callee(),\n-        args: vec![wrapper_fn.as_arg()],\n+        args: vec![wrapper_fn_expr.as_arg()],\n         ..Default::default()\n-    }))\n+    }));\n+\n+    hoisted_extra_items.push(ModuleItem::ModuleDecl(ModuleDecl::ExportDecl(ExportDecl {\n+        span: DUMMY_SP,\n+        decl: VarDecl {\n+            kind: VarDeclKind::Var,\n+            decls: vec![VarDeclarator {\n+                span: original_span,\n+                name: Pat::Ident(cache_ident.clone().into()),\n+                init: Some(wrapper_fn),\n+                definite: false,\n+            }],\n+            ..Default::default()\n+        }\n+        .into(),\n+    })));\n+\n+    hoisted_extra_items.push(ModuleItem::Stmt(Stmt::Expr(ExprStmt {\n+        span: DUMMY_SP,\n+        expr: Box::new(annotate_ident_as_server_reference(\n+            cache_ident.clone(),\n+            reference_id,\n+            original_span,\n+        )),\n+    })));\n+\n+    cache_ident\n }\n \n fn create_var_declarator(ident: &Ident, extra_items: &mut Vec<ModuleItem>) {\n@@ -2494,11 +2476,11 @@ fn assign_name_to_ident(ident: &Ident, name: &str, extra_items: &mut Vec<ModuleI\n         // WORKAROUND for https://github.com/microsoft/TypeScript/issues/61165\n         // This should just be\n         //\n-        //   \"Object.defineProperty($action, \\\"name\\\", { value: $name, writable: false });\"\n+        //   \"Object.defineProperty($action, \\\"name\\\", { value: $name });\"\n         //\n         // but due to the above typescript bug, `Object.defineProperty` calls are typechecked incorrectly\n         // in js files, and it can cause false positives when typechecking our fixture files.\n-        \"Object[\\\"defineProperty\\\"]($action, \\\"name\\\", { value: $name, writable: false });\"\n+        \"Object[\\\"defineProperty\\\"]($action, \\\"name\\\", { value: $name });\"\n             as ModuleItem,\n         action: Ident = ident.clone(),\n         name: Expr = name.into(),"
        },
        {
            "sha": "6e969c76082d0ca823bcbf8fc58aed1a8ee5b57c",
            "filename": "crates/next-custom-transforms/tests/errors/server-actions/server-graph/6/output.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fserver-actions%2Fserver-graph%2F6%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fserver-actions%2Fserver-graph%2F6%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fserver-actions%2Fserver-graph%2F6%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -3,8 +3,7 @@ import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc\n export default $$RSC_SERVER_ACTION_0 = ()=>{};\n var $$RSC_SERVER_ACTION_0;\n Object[\"defineProperty\"]($$RSC_SERVER_ACTION_0, \"name\", {\n-    value: \"default\",\n-    writable: false\n+    value: \"default\"\n });\n import { ensureServerEntryExports } from \"private-next-rsc-action-validate\";\n ensureServerEntryExports(["
        },
        {
            "sha": "88665aa089e0348efd8ddb6ab99022f12e4370b9",
            "filename": "crates/next-custom-transforms/tests/fixture/next-font-with-directive/use-cache/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fnext-font-with-directive%2Fuse-cache%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fnext-font-with-directive%2Fuse-cache%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fnext-font-with-directive%2Fuse-cache%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -4,14 +4,14 @@ import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n import React from 'react';\n import inter from '@next/font/google/target.css?{\"path\":\"app/test.tsx\",\"import\":\"Inter\",\"arguments\":[],\"variableName\":\"inter\"}';\n+const $$RSC_SERVER_CACHE_0_INNER = async function Cached({ children }) {\n+    return <div className={inter.className}>{children}</div>;\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function Cached() {\n-    return $$cache__(\"default\", \"c0dd5bb6fef67f5ab84327f5164ac2c3111a159337\", 0, async function Cached({ children }) {\n-        return <div className={inter.className}>{children}</div>;\n-    }, arguments);\n+    return $$cache__(\"default\", \"c0dd5bb6fef67f5ab84327f5164ac2c3111a159337\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"c0dd5bb6fef67f5ab84327f5164ac2c3111a159337\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"Cached\",\n-    writable: false\n+    value: \"Cached\"\n });\n export var Cached = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "c28fe5267dd8721a02a2854321ed62f29b3a065e",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/11/output.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F11%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F11%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F11%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,8 +2,7 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n export default async function $$RSC_SERVER_ACTION_0() {}\n Object[\"defineProperty\"]($$RSC_SERVER_ACTION_0, \"name\", {\n-    value: \"default\",\n-    writable: false\n+    value: \"default\"\n });\n import { ensureServerEntryExports } from \"private-next-rsc-action-validate\";\n ensureServerEntryExports(["
        },
        {
            "sha": "c1155b38a97232cc26d815b64dd79865e33d70db",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/15/output.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F15%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F15%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F15%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -5,8 +5,7 @@ export default $$RSC_SERVER_ACTION_0 = async (a, b)=>{\n };\n var $$RSC_SERVER_ACTION_0;\n Object[\"defineProperty\"]($$RSC_SERVER_ACTION_0, \"name\", {\n-    value: \"default\",\n-    writable: false\n+    value: \"default\"\n });\n import { ensureServerEntryExports } from \"private-next-rsc-action-validate\";\n ensureServerEntryExports(["
        },
        {
            "sha": "5156c1f1f5a162120ec0eac54f937ccc501f562a",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/22/output.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F22%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F22%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F22%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -5,8 +5,7 @@ export const action = validator(async ()=>{});\n export default $$RSC_SERVER_ACTION_0 = validator(async ()=>{});\n var $$RSC_SERVER_ACTION_0;\n Object[\"defineProperty\"]($$RSC_SERVER_ACTION_0, \"name\", {\n-    value: \"default\",\n-    writable: false\n+    value: \"default\"\n });\n import { ensureServerEntryExports } from \"private-next-rsc-action-validate\";\n ensureServerEntryExports(["
        },
        {
            "sha": "0fa231aaa92b60e0c0a13389f502da7a69f71b34",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/33/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F33%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F33%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F33%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -3,15 +3,15 @@ import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n const v = 'world';\n+const $$RSC_SERVER_CACHE_0_INNER = async function fn() {\n+    return 'hello, ' + v;\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function fn() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function fn() {\n-        return 'hello, ' + v;\n-    }, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"fn\",\n-    writable: false\n+    value: \"fn\"\n });\n var fn = $$RSC_SERVER_CACHE_0;\n export async function Component() {"
        },
        {
            "sha": "ce3077c8b17edd0b2c6a944d2fb3146809254752",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/34/output.js",
            "status": "modified",
            "additions": 20,
            "deletions": 20,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F34%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F34%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F34%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,53 +2,53 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function foo() {\n+    return 'foo';\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function foo() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function() {\n-        return 'foo';\n-    }, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"foo\",\n-    writable: false\n+    value: \"foo\"\n });\n const foo = $$RSC_SERVER_CACHE_0;\n export { bar };\n+const $$RSC_SERVER_CACHE_1_INNER = async function bar() {\n+    return 'bar';\n+};\n export var $$RSC_SERVER_CACHE_1 = $$reactCache__(function bar() {\n-    return $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function bar() {\n-        return 'bar';\n-    }, arguments);\n+    return $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, $$RSC_SERVER_CACHE_1_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n-    value: \"bar\",\n-    writable: false\n+    value: \"bar\"\n });\n var bar = $$RSC_SERVER_CACHE_1;\n // Should not be wrapped in $$cache__.\n const qux = async function qux() {\n     return 'qux';\n };\n+const $$RSC_SERVER_CACHE_2_INNER = async function baz() {\n+    return qux() + 'baz';\n+};\n export var $$RSC_SERVER_CACHE_2 = $$reactCache__(function baz() {\n-    return $$cache__(\"default\", \"8069348c79fce073bae2f70f139565a2fda1c74c74\", 0, async function baz() {\n-        return qux() + 'baz';\n-    }, arguments);\n+    return $$cache__(\"default\", \"8069348c79fce073bae2f70f139565a2fda1c74c74\", 0, $$RSC_SERVER_CACHE_2_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_2, \"8069348c79fce073bae2f70f139565a2fda1c74c74\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_2, \"name\", {\n-    value: \"baz\",\n-    writable: false\n+    value: \"baz\"\n });\n const baz = $$RSC_SERVER_CACHE_2;\n+const $$RSC_SERVER_CACHE_3_INNER = async function quux() {\n+    return 'quux';\n+};\n export var $$RSC_SERVER_CACHE_3 = $$reactCache__(function quux() {\n-    return $$cache__(\"default\", \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", 0, async function() {\n-        return 'quux';\n-    }, arguments);\n+    return $$cache__(\"default\", \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", 0, $$RSC_SERVER_CACHE_3_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_3, \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_3, \"name\", {\n-    value: \"quux\",\n-    writable: false\n+    value: \"quux\"\n });\n const quux = $$RSC_SERVER_CACHE_3;\n export { foo, baz };"
        },
        {
            "sha": "581bda1f0faf47e0bf48e4999e7c5efb9ea21f12",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/35/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F35%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F35%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F35%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,14 +2,14 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function my_fn() {\n+    return 'data';\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function my_fn() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function() {\n-        return 'data';\n-    }, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"my_fn\",\n-    writable: false\n+    value: \"my_fn\"\n });\n export const my_fn = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "9a053a6b2be5d5cb789118ae1f12b3352d0f3d17",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/36/output.js",
            "status": "modified",
            "additions": 20,
            "deletions": 20,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F36%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F36%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F36%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,47 +2,47 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function foo() {\n+    return 'data A';\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function foo() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function foo() {\n-        return 'data A';\n-    }, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"foo\",\n-    writable: false\n+    value: \"foo\"\n });\n export var foo = $$RSC_SERVER_CACHE_0;\n+const $$RSC_SERVER_CACHE_1_INNER = async function bar() {\n+    return 'data B';\n+};\n export var $$RSC_SERVER_CACHE_1 = $$reactCache__(function bar() {\n-    return $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function bar() {\n-        return 'data B';\n-    }, arguments);\n+    return $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, $$RSC_SERVER_CACHE_1_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n-    value: \"bar\",\n-    writable: false\n+    value: \"bar\"\n });\n export var bar = $$RSC_SERVER_CACHE_1;\n+const $$RSC_SERVER_CACHE_2_INNER = async function Cached({ children }) {\n+    return children;\n+};\n export var $$RSC_SERVER_CACHE_2 = $$reactCache__(function Cached() {\n-    return $$cache__(\"default\", \"c069348c79fce073bae2f70f139565a2fda1c74c74\", 0, async function Cached({ children }) {\n-        return children;\n-    }, arguments);\n+    return $$cache__(\"default\", \"c069348c79fce073bae2f70f139565a2fda1c74c74\", 0, $$RSC_SERVER_CACHE_2_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_2, \"c069348c79fce073bae2f70f139565a2fda1c74c74\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_2, \"name\", {\n-    value: \"Cached\",\n-    writable: false\n+    value: \"Cached\"\n });\n export default $$RSC_SERVER_CACHE_2;\n+const $$RSC_SERVER_CACHE_3_INNER = async function baz() {\n+    return 'data C';\n+};\n export var $$RSC_SERVER_CACHE_3 = $$reactCache__(function baz() {\n-    return $$cache__(\"default\", \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", 0, async function baz() {\n-        return 'data C';\n-    }, arguments);\n+    return $$cache__(\"default\", \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", 0, $$RSC_SERVER_CACHE_3_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_3, \"8012a8d21b6362b4cc8f5b15560525095bc48dba80\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_3, \"name\", {\n-    value: \"baz\",\n-    writable: false\n+    value: \"baz\"\n });\n export const baz = $$RSC_SERVER_CACHE_3;"
        },
        {
            "sha": "70eab690f537be4520ac8ec291f48aacce40f817",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/37/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F37%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F37%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F37%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,15 +2,15 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function fn() {\n+    return 'foo';\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function fn() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function fn() {\n-        return 'foo';\n-    }, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"fn\",\n-    writable: false\n+    value: \"fn\"\n });\n var fn = $$RSC_SERVER_CACHE_0;\n async function Component() {"
        },
        {
            "sha": "2332f78bd280d5a390b737a7813d89fe22324acb",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/38/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F38%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F38%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F38%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,14 +2,14 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function foo() {\n+    return 'data';\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function foo() {\n-    return $$cache__(\"x\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function foo() {\n-        return 'data';\n-    }, arguments);\n+    return $$cache__(\"x\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"foo\",\n-    writable: false\n+    value: \"foo\"\n });\n export var foo = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "da71805957d32b7f4de3de71d70af56ddc7236cb",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/39/output.js",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F39%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F39%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F39%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,18 +2,18 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function fn([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n+    console.log($$ACTION_ARG_0);\n+    return {\n+        foo: $$ACTION_ARG_1\n+    };\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function fn() {\n-    return $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 2, async function fn([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n-        console.log($$ACTION_ARG_0);\n-        return {\n-            foo: $$ACTION_ARG_1\n-        };\n-    }, arguments);\n+    return $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 2, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"fn\",\n-    writable: false\n+    value: \"fn\"\n });\n async function Component({ foo }) {\n     const a = 123;"
        },
        {
            "sha": "5e506f46d78699754cccc06ad0d4e7e781460b40",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/40/output.js",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F40%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F40%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F40%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -3,21 +3,21 @@ import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n import { Form } from 'components';\n+const $$RSC_SERVER_CACHE_0_INNER = async function cache([$$ACTION_ARG_0, $$ACTION_ARG_1], e) {\n+    const f = $$ACTION_ARG_0 + e;\n+    return [\n+        f,\n+        {\n+            a: $$ACTION_ARG_1\n+        }\n+    ];\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function cache() {\n-    return $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 2, async function cache([$$ACTION_ARG_0, $$ACTION_ARG_1], e) {\n-        const f = $$ACTION_ARG_0 + e;\n-        return [\n-            f,\n-            {\n-                a: $$ACTION_ARG_1\n-            }\n-        ];\n-    }, arguments);\n+    return $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 2, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"cache\",\n-    writable: false\n+    value: \"cache\"\n });\n export const $$RSC_SERVER_ACTION_1 = async function action($$ACTION_CLOSURE_BOUND, c) {\n     var [$$ACTION_ARG_0, $$ACTION_ARG_1] = await decryptActionBoundArgs(\"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);"
        },
        {
            "sha": "a693fa136665a5aaa530bf69b5b32647221670b9",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/41/output.js",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F41%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F41%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F41%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -10,18 +10,18 @@ export const $$RSC_SERVER_ACTION_0 = async function fn($$ACTION_CLOSURE_BOUND) {\n     };\n };\n registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+const $$RSC_SERVER_CACHE_1_INNER = async function Component({ foo }) {\n+    const a = 123;\n+    var fn = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", a, foo));\n+    const data = await fn();\n+    // @ts-expect-error: data is not a valid react child\n+    return <div>{data}</div>;\n+};\n export var $$RSC_SERVER_CACHE_1 = $$reactCache__(function Component() {\n-    return $$cache__(\"default\", \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function Component({ foo }) {\n-        const a = 123;\n-        var fn = $$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", a, foo));\n-        const data = await fn();\n-        // @ts-expect-error: data is not a valid react child\n-        return <div>{data}</div>;\n-    }, arguments);\n+    return $$cache__(\"default\", \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, $$RSC_SERVER_CACHE_1_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_1, \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n-    value: \"Component\",\n-    writable: false\n+    value: \"Component\"\n });\n export var Component = $$RSC_SERVER_CACHE_1;"
        },
        {
            "sha": "b61436cd49184152f77ee00173e7d7f600faead8",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/42/output.js",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F42%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F42%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F42%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,18 +2,18 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function fn([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n+    console.log($$ACTION_ARG_0);\n+    return {\n+        foo: $$ACTION_ARG_1\n+    };\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function fn() {\n-    return $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 2, async function([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n-        console.log($$ACTION_ARG_0);\n-        return {\n-            foo: $$ACTION_ARG_1\n-        };\n-    }, arguments);\n+    return $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 2, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"fn\",\n-    writable: false\n+    value: \"fn\"\n });\n async function Component({ foo }) {\n     const a = 123;"
        },
        {
            "sha": "c19536b6dc559b01a77e80d59e625c06b8e6b679",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/43/output.js",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F43%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F43%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F43%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -9,19 +9,19 @@ export const $$RSC_SERVER_ACTION_0 = async function action($$ACTION_CLOSURE_BOUN\n     console.log(secret, $$ACTION_ARG_0);\n };\n registerServerReference($$RSC_SERVER_ACTION_0, \"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", null);\n+const $$RSC_SERVER_CACHE_1_INNER = async function getCachedRandom(x, children) {\n+    return {\n+        x,\n+        y: Math.random(),\n+        z: <Button action={$$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", x))}/>,\n+        r: children\n+    };\n+};\n export var $$RSC_SERVER_CACHE_1 = $$reactCache__(function getCachedRandom() {\n-    return $$cache__(\"default\", \"e0951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function getCachedRandom(x, children) {\n-        return {\n-            x,\n-            y: Math.random(),\n-            z: <Button action={$$RSC_SERVER_ACTION_0.bind(null, encryptActionBoundArgs(\"406a88810ecce4a4e8b59d53b8327d7e98bbf251d7\", x))}/>,\n-            r: children\n-        };\n-    }, arguments);\n+    return $$cache__(\"default\", \"e0951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, $$RSC_SERVER_CACHE_1_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_1, \"e0951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n-    value: \"getCachedRandom\",\n-    writable: false\n+    value: \"getCachedRandom\"\n });\n var getCachedRandom = $$RSC_SERVER_CACHE_1;"
        },
        {
            "sha": "7e4b6a9a4a93a127e727ccb6480d3de1ec0cd018",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/45/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F45%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F45%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F45%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -8,14 +8,14 @@ function Foo() {\n     console.log(v);\n     return v;\n }\n+const $$RSC_SERVER_CACHE_0_INNER = async function bar() {\n+    return <Foo/>;\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function bar() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function bar() {\n-        return <Foo/>;\n-    }, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"bar\",\n-    writable: false\n+    value: \"bar\"\n });\n export var bar = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "f0fc35a3fdbbee672d6d12730becf5ddef0b61f7",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/46/output.js",
            "status": "modified",
            "additions": 34,
            "deletions": 34,
            "changes": 68,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F46%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F46%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F46%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -4,18 +4,18 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function f1(a, b) {\n+    return [\n+        a,\n+        b\n+    ];\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function f1() {\n-    return $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function f1(a, b) {\n-        return [\n-            a,\n-            b\n-        ];\n-    }, arguments);\n+    return $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"f1\",\n-    writable: false\n+    value: \"f1\"\n });\n var f1 = $$RSC_SERVER_CACHE_0;\n export const // Should be 0 110000 0, which is \"60\" in hex.\n@@ -27,20 +27,20 @@ $$RSC_SERVER_ACTION_1 = async function f2(a, b) {\n };\n registerServerReference($$RSC_SERVER_ACTION_1, \"6090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n var f2 = $$RSC_SERVER_ACTION_1;\n-export var // Should be 1 111111 1, which is \"ff\" in hex.\n-$$RSC_SERVER_CACHE_2 = $$reactCache__(function f3() {\n-    return $$cache__(\"default\", \"ff69348c79fce073bae2f70f139565a2fda1c74c74\", 0, async function f3(a, b, ...rest) {\n-        return [\n-            a,\n-            b,\n-            rest\n-        ];\n-    }, arguments);\n+// Should be 1 111111 1, which is \"ff\" in hex.\n+const $$RSC_SERVER_CACHE_2_INNER = async function f3(a, b, ...rest) {\n+    return [\n+        a,\n+        b,\n+        rest\n+    ];\n+};\n+export var $$RSC_SERVER_CACHE_2 = $$reactCache__(function f3() {\n+    return $$cache__(\"default\", \"ff69348c79fce073bae2f70f139565a2fda1c74c74\", 0, $$RSC_SERVER_CACHE_2_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_2, \"ff69348c79fce073bae2f70f139565a2fda1c74c74\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_2, \"name\", {\n-    value: \"f3\",\n-    writable: false\n+    value: \"f3\"\n });\n var f3 = $$RSC_SERVER_CACHE_2;\n export const // Should be 0 111110 0, which is \"7c\" in hex.\n@@ -68,23 +68,23 @@ $$RSC_SERVER_ACTION_4 = async function f5(a, b, c, d, e, f) {\n };\n registerServerReference($$RSC_SERVER_ACTION_4, \"7ea9b2939c1f39073a6bed227fd20233064c8b7869\", null);\n var f5 = $$RSC_SERVER_ACTION_4;\n-export var // Should be 1 111111 1, which is \"ff\" in hex.\n-$$RSC_SERVER_CACHE_5 = $$reactCache__(function f6() {\n-    return $$cache__(\"default\", \"ff471a5eb0be1c31686dd4ba938a80328b80b1615d\", 0, async function f6(a, b, c, d, e, f, g) {\n-        return [\n-            a,\n-            b,\n-            c,\n-            d,\n-            e,\n-            f,\n-            g\n-        ];\n-    }, arguments);\n+// Should be 1 111111 1, which is \"ff\" in hex.\n+const $$RSC_SERVER_CACHE_5_INNER = async function f6(a, b, c, d, e, f, g) {\n+    return [\n+        a,\n+        b,\n+        c,\n+        d,\n+        e,\n+        f,\n+        g\n+    ];\n+};\n+export var $$RSC_SERVER_CACHE_5 = $$reactCache__(function f6() {\n+    return $$cache__(\"default\", \"ff471a5eb0be1c31686dd4ba938a80328b80b1615d\", 0, $$RSC_SERVER_CACHE_5_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_5, \"ff471a5eb0be1c31686dd4ba938a80328b80b1615d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_5, \"name\", {\n-    value: \"f6\",\n-    writable: false\n+    value: \"f6\"\n });\n var f6 = $$RSC_SERVER_CACHE_5;"
        },
        {
            "sha": "e1e4d7a638a7cb4bd684ee53d9a91f6617e6240f",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/48/output.js",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F48%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F48%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F48%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -25,18 +25,18 @@ export async function action3(a, b) {\n       {b}\n     </div>;\n }\n-export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function cache() {\n-    return $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function cache(a, b) {\n-        return <div>\n+const $$RSC_SERVER_CACHE_0_INNER = async function cache(a, b) {\n+    return <div>\n       {a}\n       {b}\n     </div>;\n-    }, arguments);\n+};\n+export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function cache() {\n+    return $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"cache\",\n-    writable: false\n+    value: \"cache\"\n });\n // Should be 1 110000 0, which is \"e0\" in hex.\n export var cache = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "0a2ea4a50f5af4c982ab09f9d3823047497e89b1",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/49/output.js",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F49%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F49%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F49%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,14 +2,18 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n-export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function() {\n-    return $$cache__(\"default\", \"f03128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function(a, b, c) {\n-        return <div>\n+const $$RSC_SERVER_CACHE_0_INNER = async function(a, b, c) {\n+    return <div>\n       {a}\n       {b}\n       {c}\n     </div>;\n-    }, arguments);\n+};\n+Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0_INNER, \"name\", {\n+    value: \"\"\n+});\n+export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function() {\n+    return $$cache__(\"default\", \"f03128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"f03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n export default $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "e11dfaa762b726f75f5db04e8b1385edf509725b",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/50/output.js",
            "status": "modified",
            "additions": 9,
            "deletions": 6,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F50%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F50%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F50%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,18 +2,21 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n-export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function() {\n-    return $$cache__(\"default\", \"f03128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function(a, b, c) {\n-        return <div>\n+const $$RSC_SERVER_CACHE_0_INNER = async function(a, b, c) {\n+    return <div>\n       {a}\n       {b}\n       {c}\n     </div>;\n-    }, arguments);\n+};\n+Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0_INNER, \"name\", {\n+    value: \"\"\n+});\n+export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function() {\n+    return $$cache__(\"default\", \"f03128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"f03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"default\",\n-    writable: false\n+    value: \"default\"\n });\n export default $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "98b9b0db5df428bb79bf61e7d46d7dbf5dc464d7",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/51/output.js",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F51%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F51%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F51%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -10,8 +10,7 @@ export const $$RSC_SERVER_ACTION_1 = async function $$RSC_SERVER_ACTION_0(a, b,\n registerServerReference($$RSC_SERVER_ACTION_1, \"7090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);\n export default $$RSC_SERVER_ACTION_1;\n Object[\"defineProperty\"]($$RSC_SERVER_ACTION_0, \"name\", {\n-    value: \"default\",\n-    writable: false\n+    value: \"default\"\n });\n export const $$RSC_SERVER_ACTION_2 = async function foo(a, b) {\n     return <div>"
        },
        {
            "sha": "122c51190480b3052904bd0e9bf8d49f5bd1013a",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/52/output.js",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F52%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F52%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F52%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -3,29 +3,29 @@ import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n import { Client } from 'components';\n-export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function // Should be 1 110000 0, which is \"e0\" in hex (counts as two params,\n+const $$RSC_SERVER_CACHE_0_INNER = async function // Should be 1 110000 0, which is \"e0\" in hex (counts as two params,\n // because of the encrypted bound args param)\n-fn1() {\n-    return $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 2, async function([$$ACTION_ARG_0, $$ACTION_ARG_1], c) {\n-        return $$ACTION_ARG_0 + $$ACTION_ARG_1 + c;\n-    }, arguments);\n+fn1([$$ACTION_ARG_0, $$ACTION_ARG_1], c) {\n+    return $$ACTION_ARG_0 + $$ACTION_ARG_1 + c;\n+};\n+export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function fn1() {\n+    return $$cache__(\"default\", \"e03128060c414d59f8552e4788b846c0d2b7f74743\", 2, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"e03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"fn1\",\n-    writable: false\n+    value: \"fn1\"\n });\n-export var $$RSC_SERVER_CACHE_1 = $$reactCache__(function // Should be 1 100000 0, which is \"c0\" in hex (counts as one param,\n+const $$RSC_SERVER_CACHE_1_INNER = async function // Should be 1 100000 0, which is \"c0\" in hex (counts as one param,\n // because of the encrypted bound args param)\n-fn2() {\n-    return $$cache__(\"default\", \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", 2, async function fn2([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n-        return $$ACTION_ARG_0 + $$ACTION_ARG_1;\n-    }, arguments);\n+fn2([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n+    return $$ACTION_ARG_0 + $$ACTION_ARG_1;\n+};\n+export var $$RSC_SERVER_CACHE_1 = $$reactCache__(function fn2() {\n+    return $$cache__(\"default\", \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", 2, $$RSC_SERVER_CACHE_1_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_1, \"c0951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n-    value: \"fn2\",\n-    writable: false\n+    value: \"fn2\"\n });\n export const $$RSC_SERVER_ACTION_2 = async function // Should be 0 110000 0, which is \"60\" in hex (counts as two params,\n // because of the encrypted bound args param)"
        },
        {
            "sha": "1bbc02558e1d637e9547279d51d6ab5b66ad110c",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/53/output.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F53%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F53%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F53%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,13 +2,13 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function foo() {};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function foo() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function foo() {}, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"foo\",\n-    writable: false\n+    value: \"foo\"\n });\n export const $$RSC_SERVER_ACTION_1 = async function bar() {};\n registerServerReference($$RSC_SERVER_ACTION_1, \"0090b5db271335765a4b0eab01f044b381b5ebd5cd\", null);"
        },
        {
            "sha": "7da7a776c577e48ebb13b49c3f7d2992052be1b6",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/54/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F54%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F54%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F54%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,15 +2,15 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function foo([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n+    return $$ACTION_ARG_0 * $$ACTION_ARG_1;\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function foo() {\n-    return $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 2, async function foo([$$ACTION_ARG_0, $$ACTION_ARG_1]) {\n-        return $$ACTION_ARG_0 * $$ACTION_ARG_1;\n-    }, arguments);\n+    return $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 2, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"foo\",\n-    writable: false\n+    value: \"foo\"\n });\n export const $$RSC_SERVER_ACTION_1 = async function bar($$ACTION_CLOSURE_BOUND) {\n     var [$$ACTION_ARG_0] = await decryptActionBoundArgs(\"4090b5db271335765a4b0eab01f044b381b5ebd5cd\", $$ACTION_CLOSURE_BOUND);"
        },
        {
            "sha": "666e714e306473ecb9064678bebf8f37409ea927",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/55/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F55%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F55%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F55%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,15 +2,15 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function fetch1() {\n+    return fetch('https://example.com').then((res)=>res.json());\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function fetch1() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function fetch1() {\n-        return fetch('https://example.com').then((res)=>res.json());\n-    }, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"fetch\",\n-    writable: false\n+    value: \"fetch\"\n });\n export const api = {\n     product: {"
        },
        {
            "sha": "bca501e57ec7eab0ffb6001a6992683dbaab5b01",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/57/output.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F57%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F57%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F57%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,15 +2,15 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function foo() {\n+    return fetch('https://example.com').then((res)=>res.json());\n+};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function foo() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function foo() {\n-        return fetch('https://example.com').then((res)=>res.json());\n-    }, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"foo\",\n-    writable: false\n+    value: \"foo\"\n });\n export const $$RSC_SERVER_ACTION_1 = async function bar() {\n     console.log(42);"
        },
        {
            "sha": "3147f3b01d49b442e56b5b17ae7c3fe8ea1e5cf6",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/58/output.js",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F58%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F58%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F58%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,10 +2,14 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function([$$ACTION_ARG_0]) {\n+    return $$ACTION_ARG_0();\n+};\n+Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0_INNER, \"name\", {\n+    value: \"\"\n+});\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function() {\n-    return $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 1, async function([$$ACTION_ARG_0]) {\n-        return $$ACTION_ARG_0();\n-    }, arguments);\n+    return $$cache__(\"default\", \"c03128060c414d59f8552e4788b846c0d2b7f74743\", 1, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"c03128060c414d59f8552e4788b846c0d2b7f74743\", null);\n function createCachedFn(start) {"
        },
        {
            "sha": "9fcbd49d3847edbff285782dc1dae74a59cd4123",
            "filename": "crates/next-custom-transforms/tests/fixture/server-actions/server-graph/60/output.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F60%2Foutput.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F60%2Foutput.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fserver-actions%2Fserver-graph%2F60%2Foutput.ts?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -12,12 +12,12 @@ export enum E {\n }\n export default interface D {\n }\n+const $$RSC_SERVER_CACHE_0_INNER = async function Page() {};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function Page() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function Page() {}, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"Page\",\n-    writable: false\n+    value: \"Page\"\n });\n export var Page = $$RSC_SERVER_CACHE_0;"
        },
        {
            "sha": "c4e088402d94ab731a87fb7b21bb88b82154f3d4",
            "filename": "crates/next-custom-transforms/tests/fixture/source-maps/server-graph/use-cache/1/output.js",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.js?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2,23 +2,23 @@\n import { encryptActionBoundArgs, decryptActionBoundArgs } from \"private-next-rsc-action-encryption\";\n import { cache as $$cache__ } from \"private-next-rsc-cache-wrapper\";\n import { cache as $$reactCache__ } from \"react\";\n+const $$RSC_SERVER_CACHE_0_INNER = async function foo() {};\n export var $$RSC_SERVER_CACHE_0 = $$reactCache__(function foo() {\n-    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, async function() {}, arguments);\n+    return $$cache__(\"default\", \"803128060c414d59f8552e4788b846c0d2b7f74743\", 0, $$RSC_SERVER_CACHE_0_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_0, \"803128060c414d59f8552e4788b846c0d2b7f74743\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_0, \"name\", {\n-    value: \"foo\",\n-    writable: false\n+    value: \"foo\"\n });\n const foo = $$RSC_SERVER_CACHE_0;\n+const $$RSC_SERVER_CACHE_1_INNER = async function bar() {\n+    return foo();\n+};\n export var $$RSC_SERVER_CACHE_1 = $$reactCache__(function bar() {\n-    return $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, async function bar() {\n-        return foo();\n-    }, arguments);\n+    return $$cache__(\"default\", \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", 0, $$RSC_SERVER_CACHE_1_INNER, arguments);\n });\n registerServerReference($$RSC_SERVER_CACHE_1, \"80951c375b4a6a6e89d67b743ec5808127cfde405d\", null);\n Object[\"defineProperty\"]($$RSC_SERVER_CACHE_1, \"name\", {\n-    value: \"bar\",\n-    writable: false\n+    value: \"bar\"\n });\n export var bar = $$RSC_SERVER_CACHE_1;"
        },
        {
            "sha": "084d0da93348bdcff10b0df0d87a3dd45e215b0a",
            "filename": "crates/next-custom-transforms/tests/fixture/source-maps/server-graph/use-cache/1/output.map",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.map",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fsource-maps%2Fserver-graph%2Fuse-cache%2F1%2Foutput.map?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -1 +1 @@\n-{\"version\":3,\"sources\":[\"input.js\"],\"sourcesContent\":[\"'use cache'\\n\\nconst foo = async () => {\\n  'use cache'\\n}\\n\\nexport async function bar() {\\n  return foo()\\n}\\n\"],\"names\":[],\"mappings\":\";;;;WAEY,sCAAA,SAAN;WAAM,sEAAA,kBAEZ;;AAFY;;;;;AAAZ,MAAM;WAIC,sCAAA,SAAe;WAAf,sEAAA,eAAe;QACpB,OAAO;IACT;;AAFO;;;;;AAAP,WAAsB\"}\n+{\"version\":3,\"sources\":[\"input.js\"],\"sourcesContent\":[\"'use cache'\\n\\nconst foo = async () => {\\n  'use cache'\\n}\\n\\nexport async function bar() {\\n  return foo()\\n}\\n\"],\"names\":[],\"mappings\":\";;;;AAEY,MAAA,6BAAA,eAAN,OAEN;WAFY,sCAAA,SAAN;WAAM;;AAAA;;;;AAAZ,MAAM;AAIC,MAAA,6BAAA,eAAe;IACpB,OAAO;AACT;WAFO,sCAAA,SAAe;WAAf;;AAAA;;;;AAAP,WAAsB\"}"
        },
        {
            "sha": "49e2e72596958dc6f0d0975c1eab0565d6c04979",
            "filename": "test/development/app-dir/use-cache-errors/app/anonymous/page.tsx",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fapp%2Fanonymous%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fapp%2Fanonymous%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fapp%2Fanonymous%2Fpage.tsx?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -0,0 +1,12 @@\n+function createCacheFn() {\n+  return async () => {\n+    'use cache'\n+    throw new Error('kaputt!')\n+  }\n+}\n+\n+const cached = createCacheFn()\n+\n+export default async function Page() {\n+  return <p>A page with an anonymous cache function. {await cached()}</p>\n+}"
        },
        {
            "sha": "4d56c67b58b7b3dc1229193fd0c2f3363c8d31de",
            "filename": "test/development/app-dir/use-cache-errors/use-cache-errors.test.ts",
            "status": "modified",
            "additions": 69,
            "deletions": 2,
            "changes": 71,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fuse-cache-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fuse-cache-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fuse-cache-errors%2Fuse-cache-errors.test.ts?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -1,11 +1,12 @@\n import { nextTestSetup } from 'e2e-utils'\n import { waitForNoRedbox } from '../../../lib/next-test-utils'\n \n+const cacheComponentsEnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n+\n describe('use-cache-errors', () => {\n-  const { next } = nextTestSetup({\n+  const { next, isRspack, isTurbopack } = nextTestSetup({\n     files: __dirname,\n   })\n-  const isRspack = Boolean(process.env.NEXT_RSPACK)\n \n   it('should not show a false-positive compiler error about a misplaced \"use cache\" directive', async () => {\n     // This is a regression test to ensure that an injected React Refresh\n@@ -50,4 +51,70 @@ describe('use-cache-errors', () => {\n       `)\n     }\n   })\n+\n+  it('should not leak generated internal cache function names in call stacks', async () => {\n+    const browser = await next.browser('/anonymous')\n+\n+    if (cacheComponentsEnabled) {\n+      if (isTurbopack) {\n+        await expect(browser).toDisplayRedbox(`\n+         {\n+           \"description\": \"kaputt!\",\n+           \"environmentLabel\": \"Prerender\",\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"app/anonymous/page.tsx (4:11) @ <anonymous>\n+         > 4 |     throw new Error('kaputt!')\n+             |           ^\",\n+           \"stack\": [\n+             \"<anonymous> app/anonymous/page.tsx (4:11)\",\n+           ],\n+         }\n+        `)\n+      } else {\n+        await expect(browser).toDisplayRedbox(`\n+         {\n+           \"description\": \"kaputt!\",\n+           \"environmentLabel\": \"Prerender\",\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"app/anonymous/page.tsx (4:11) @ eval\n+         > 4 |     throw new Error('kaputt!')\n+             |           ^\",\n+           \"stack\": [\n+             \"eval app/anonymous/page.tsx (4:11)\",\n+           ],\n+         }\n+        `)\n+      }\n+    } else {\n+      if (isTurbopack) {\n+        await expect(browser).toDisplayRedbox(`\n+         {\n+           \"description\": \"kaputt!\",\n+           \"environmentLabel\": \"Cache\",\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"app/anonymous/page.tsx (4:11) @ <anonymous>\n+         > 4 |     throw new Error('kaputt!')\n+             |           ^\",\n+           \"stack\": [\n+             \"<anonymous> app/anonymous/page.tsx (4:11)\",\n+           ],\n+         }\n+        `)\n+      } else {\n+        await expect(browser).toDisplayRedbox(`\n+         {\n+           \"description\": \"kaputt!\",\n+           \"environmentLabel\": \"Cache\",\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"app/anonymous/page.tsx (4:11) @ eval\n+         > 4 |     throw new Error('kaputt!')\n+             |           ^\",\n+           \"stack\": [\n+             \"eval app/anonymous/page.tsx (4:11)\",\n+           ],\n+         }\n+        `)\n+      }\n+    }\n+  })\n })"
        },
        {
            "sha": "97224a310dda9343e5438767ac2f62cc3771fa83",
            "filename": "test/e2e/app-dir/cache-components-errors/cache-components-errors.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/b6a7714057220561153c7a40152de4a22ae9e8f6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b6a7714057220561153c7a40152de4a22ae9e8f6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts?ref=b6a7714057220561153c7a40152de4a22ae9e8f6",
            "patch": "@@ -2149,7 +2149,7 @@ describe('Cache Components Errors', () => {\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route /use-cache-cookies used \\`cookies()\\` inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \\`cookies()\\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\n-                     at <unknown> (app/use-cache-cookies/page.tsx:22:11)\n+                     at a (app/use-cache-cookies/page.tsx:22:11)\n                    20 |   // in userland.\n                    21 |   try {\n                  > 22 |     await cookies()\n@@ -2275,7 +2275,7 @@ describe('Cache Components Errors', () => {\n               if (isTurbopack) {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route /use-cache-draft-mode used \"draftMode().enable()\" inside \"use cache\". The enabled status of \\`draftMode()\\` can be read in caches but you must not enable or disable \\`draftMode()\\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\n-                     at <unknown> (app/use-cache-draft-mode/page.tsx:20:26)\n+                     at a (app/use-cache-draft-mode/page.tsx:20:26)\n                    18 |   // here to ensure that this error is shown even when it's caught in userland.\n                    19 |   try {\n                  > 20 |     ;(await draftMode()).enable()\n@@ -2360,7 +2360,7 @@ describe('Cache Components Errors', () => {\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route /use-cache-headers used \\`headers()\\` inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \\`headers()\\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\n-                     at <unknown> (app/use-cache-headers/page.tsx:21:11)\n+                     at a (app/use-cache-headers/page.tsx:21:11)\n                    19 |   // to ensure that this error is shown even when it's caught in userland.\n                    20 |   try {\n                  > 21 |     await headers()"
        }
    ],
    "stats": {
        "total": 763,
        "additions": 415,
        "deletions": 348
    }
}