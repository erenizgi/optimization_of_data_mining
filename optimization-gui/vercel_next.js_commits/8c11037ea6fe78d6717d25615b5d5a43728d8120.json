{
    "author": "bgub",
    "message": "fix: make sure validator.ts uses relative paths for imports (#82761)\n\nPreviously, `.next/types/validator.ts` looked like this after a build:\n\n```typescript\n// Validate /Users/you/code/next.js/test/e2e/app-dir/typed-routes/app/dashboard/@team/page.tsx\n{\n  const handler = {} as typeof import(\"/Users/you/code/next.js/test/e2e/app-dir/typed-routes/app/dashboard/@team/page.js\")\n  handler satisfies AppPageConfig<\"/dashboard\">\n}\n```\n\nNow, it looks like this:\n\n```typescript\n// Validate ../../app/dashboard/@team/page.tsx\n{\n  const handler = {} as typeof import(\"../../app/dashboard/@team/page.js\")\n  handler satisfies AppPageConfig<\"/dashboard\">\n}\n```\n\nThis can be important for security reasons.",
    "sha": "8c11037ea6fe78d6717d25615b5d5a43728d8120",
    "files": [
        {
            "sha": "7f283c40c675eea008754ec458fcd528141868ff",
            "filename": "packages/next/src/server/lib/router-utils/route-types-utils.ts",
            "status": "modified",
            "additions": 31,
            "deletions": 10,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/8c11037ea6fe78d6717d25615b5d5a43728d8120/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Froute-types-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8c11037ea6fe78d6717d25615b5d5a43728d8120/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Froute-types-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Froute-types-utils.ts?ref=8c11037ea6fe78d6717d25615b5d5a43728d8120",
            "patch": "@@ -179,29 +179,50 @@ export async function createRouteTypesManifest({\n     appRouteHandlerRoutes: {},\n     redirectRoutes: {},\n     rewriteRoutes: {},\n-    appRouteHandlers: new Set(appRouteHandlers.map(({ filePath }) => filePath)),\n-    pageApiRoutes: new Set(pageApiRoutes.map(({ filePath }) => filePath)),\n-    appPagePaths: new Set(appRoutes.map(({ filePath }) => filePath)),\n-    pagesRouterPagePaths: new Set(pageRoutes.map(({ filePath }) => filePath)),\n-    layoutPaths: new Set(layoutRoutes.map(({ filePath }) => filePath)),\n+    appRouteHandlers: new Set(\n+      appRouteHandlers.map(({ filePath }) => getRelativePath(filePath))\n+    ),\n+    pageApiRoutes: new Set(\n+      pageApiRoutes.map(({ filePath }) => getRelativePath(filePath))\n+    ),\n+    appPagePaths: new Set(\n+      appRoutes.map(({ filePath }) => getRelativePath(filePath))\n+    ),\n+    pagesRouterPagePaths: new Set(\n+      pageRoutes.map(({ filePath }) => getRelativePath(filePath))\n+    ),\n+    layoutPaths: new Set(\n+      layoutRoutes.map(({ filePath }) => getRelativePath(filePath))\n+    ),\n     filePathToRoute: new Map([\n       ...appRoutes.map(\n         ({ route, filePath }) =>\n-          [filePath, resolveInterceptingRoute(route)] as [string, string]\n+          [getRelativePath(filePath), resolveInterceptingRoute(route)] as [\n+            string,\n+            string,\n+          ]\n       ),\n       ...layoutRoutes.map(\n         ({ route, filePath }) =>\n-          [filePath, resolveInterceptingRoute(route)] as [string, string]\n+          [getRelativePath(filePath), resolveInterceptingRoute(route)] as [\n+            string,\n+            string,\n+          ]\n       ),\n       ...appRouteHandlers.map(\n         ({ route, filePath }) =>\n-          [filePath, resolveInterceptingRoute(route)] as [string, string]\n+          [getRelativePath(filePath), resolveInterceptingRoute(route)] as [\n+            string,\n+            string,\n+          ]\n       ),\n       ...pageRoutes.map(\n-        ({ route, filePath }) => [filePath, route] as [string, string]\n+        ({ route, filePath }) =>\n+          [getRelativePath(filePath), route] as [string, string]\n       ),\n       ...pageApiRoutes.map(\n-        ({ route, filePath }) => [filePath, route] as [string, string]\n+        ({ route, filePath }) =>\n+          [getRelativePath(filePath), route] as [string, string]\n       ),\n     ]),\n   }"
        }
    ],
    "stats": {
        "total": 41,
        "additions": 31,
        "deletions": 10
    }
}