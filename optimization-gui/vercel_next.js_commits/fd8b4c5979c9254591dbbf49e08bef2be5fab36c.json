{
    "author": "devjiwonchoi",
    "message": "docs: Split \"Get Started: Route Handlers and Middleware\" to Route Handlers and Proxy (#84708)\n\nThis PR splits the route handlers and middleware to allow for separate\nonboarding docs, making it easier to migrate the docs from Middleware to\nProxy.\n\nThese PR stacks are to publish a full replacement of the docs for the\nMiddleware to Proxy. Steps are as follows:\n\n- Split \"Get Started: Route Handlers and middleware\" to Route Handlers /\nProxy\n- Clone the Middleware docs for Proxy\n- Add \"Migration to Proxy\" section to Middleware docs\n  - Explain the rationale for the renaming to Proxy\n  - Provide migration guide\n- Add an error doc that the deprecation warning can refer to. The error\ndoc will:\n  - Explain why this error occurred\n  - Provide migration guide\n  - Explain the rationale for the renaming to Proxy",
    "sha": "fd8b4c5979c9254591dbbf49e08bef2be5fab36c",
    "files": [
        {
            "sha": "a1c21cf4a0f78c2e6a1f486e1d5e9f3a9d39052d",
            "filename": "docs/01-app/01-getting-started/15-route-handlers.mdx",
            "status": "renamed",
            "additions": 4,
            "deletions": 63,
            "changes": 67,
            "blob_url": "https://github.com/vercel/next.js/blob/fd8b4c5979c9254591dbbf49e08bef2be5fab36c/docs%2F01-app%2F01-getting-started%2F15-route-handlers.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/fd8b4c5979c9254591dbbf49e08bef2be5fab36c/docs%2F01-app%2F01-getting-started%2F15-route-handlers.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F15-route-handlers.mdx?ref=fd8b4c5979c9254591dbbf49e08bef2be5fab36c",
            "patch": "@@ -1,13 +1,12 @@\n ---\n-title: Route Handlers and Middleware\n-nav_title: Route Handlers and Middleware\n-description: Learn how to use Route Handlers and Middleware\n+title: Route Handlers\n+nav_title: Route Handlers\n+description: Learn how to use Route Handlers\n related:\n   title: API Reference\n-  description: Learn more about Route Handlers and Middleware\n+  description: Learn more about Route Handlers\n   links:\n     - app/api-reference/file-conventions/route\n-    - app/api-reference/file-conventions/middleware\n     - app/guides/backend-for-frontend\n ---\n \n@@ -142,61 +141,3 @@ export async function GET(_req: NextRequest, ctx: RouteContext<'/users/[id]'>) {\n > **Good to know**\n >\n > - Types are generated during `next dev`, `next build` or `next typegen`.\n-\n-## Middleware\n-\n-Middleware allows you to run code before a request is completed. Then, based on the incoming request, you can modify the response by rewriting, redirecting, modifying the request or response headers, or responding directly.\n-\n-### Use cases\n-\n-Some common scenarios where Middleware is effective include:\n-\n-- Quick redirects after reading parts of the incoming request\n-- Rewriting to different pages based on A/B tests or experiments\n-- Modifying headers for all pages or a subset of pages\n-\n-Middleware is _not_ a good fit for:\n-\n-- Slow data fetching\n-- Session management\n-\n-Using fetch with `options.cache`, `options.next.revalidate`, or `options.next.tags`, has no effect in Middleware.\n-\n-### Convention\n-\n-Create a `middleware.ts` (or `.js`) file in the project root, or inside `src` if applicable, so that it is located at the same level as `pages` or `app`.\n-\n-> **Note**: While only one `middleware.ts` file is supported per project, you can still organize your middleware logic into modules. Break out middleware functionalities into separate `.ts` or `.js` files and import them into your main `middleware.ts` file. This allows for cleaner management of route-specific middleware, aggregated in the `middleware.ts` for centralized control. By enforcing a single middleware file, it simplifies configuration, prevents potential conflicts, and optimizes performance by avoiding multiple middleware layers.\n-\n-### Example\n-\n-```ts filename=\"middleware.ts\" switcher\n-import { NextResponse } from 'next/server'\n-import type { NextRequest } from 'next/server'\n-\n-// This function can be marked `async` if using `await` inside\n-export function middleware(request: NextRequest) {\n-  return NextResponse.redirect(new URL('/home', request.url))\n-}\n-\n-// See \"Matching Paths\" below to learn more\n-export const config = {\n-  matcher: '/about/:path*',\n-}\n-```\n-\n-```js filename=\"middleware.js\" switcher\n-import { NextResponse } from 'next/server'\n-\n-// This function can be marked `async` if using `await` inside\n-export function middleware(request) {\n-  return NextResponse.redirect(new URL('/home', request.url))\n-}\n-\n-// See \"Matching Paths\" below to learn more\n-export const config = {\n-  matcher: '/about/:path*',\n-}\n-```\n-\n-Read more about [using `middleware`](/docs/app/guides/backend-for-frontend#middleware), or refer to the `middleware` [API reference](/docs/app/api-reference/file-conventions/middleware).",
            "previous_filename": "docs/01-app/01-getting-started/15-route-handlers-and-middleware.mdx"
        },
        {
            "sha": "130e98a81bc632ba21a2925d29bbe04d92dc0650",
            "filename": "docs/01-app/01-getting-started/16-proxy.mdx",
            "status": "added",
            "additions": 72,
            "deletions": 0,
            "changes": 72,
            "blob_url": "https://github.com/vercel/next.js/blob/fd8b4c5979c9254591dbbf49e08bef2be5fab36c/docs%2F01-app%2F01-getting-started%2F16-proxy.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/fd8b4c5979c9254591dbbf49e08bef2be5fab36c/docs%2F01-app%2F01-getting-started%2F16-proxy.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F16-proxy.mdx?ref=fd8b4c5979c9254591dbbf49e08bef2be5fab36c",
            "patch": "@@ -0,0 +1,72 @@\n+---\n+title: Proxy\n+nav_title: Proxy\n+description: Learn how to use Proxy\n+related:\n+  title: API Reference\n+  description: Learn more about Proxy\n+  links:\n+    # TODO: Update to proxy docs\n+    - app/api-reference/file-conventions/middleware\n+    - app/guides/backend-for-frontend\n+---\n+\n+## Proxy\n+\n+Proxy allows you to run code before a request is completed. Then, based on the incoming request, you can modify the response by rewriting, redirecting, modifying the request or response headers, or responding directly.\n+\n+### Use cases\n+\n+Some common scenarios where Proxy is effective include:\n+\n+- Quick redirects after reading parts of the incoming request\n+- Rewriting to different pages based on A/B tests or experiments\n+- Modifying headers for all pages or a subset of pages\n+\n+Proxy is _not_ a good fit for:\n+\n+- Slow data fetching\n+- Session management\n+\n+Using fetch with `options.cache`, `options.next.revalidate`, or `options.next.tags`, has no effect in Proxy.\n+\n+### Convention\n+\n+Create a `proxy.ts` (or `.js`) file in the project root, or inside `src` if applicable, so that it is located at the same level as `pages` or `app`.\n+\n+> **Note**: While only one `proxy.ts` file is supported per project, you can still organize your proxy logic into modules. Break out proxy functionalities into separate `.ts` or `.js` files and import them into your main `proxy.ts` file. This allows for cleaner management of route-specific proxy, aggregated in the `proxy.ts` for centralized control. By enforcing a single proxy file, it simplifies configuration, prevents potential conflicts, and optimizes performance by avoiding multiple proxy layers.\n+\n+### Example\n+\n+```ts filename=\"proxy.ts\" switcher\n+import { NextResponse } from 'next/server'\n+import type { NextRequest } from 'next/server'\n+\n+// This function can be marked `async` if using `await` inside\n+export function proxy(request: NextRequest) {\n+  return NextResponse.redirect(new URL('/home', request.url))\n+}\n+\n+// See \"Matching Paths\" below to learn more\n+export const config = {\n+  matcher: '/about/:path*',\n+}\n+```\n+\n+```js filename=\"proxy.js\" switcher\n+import { NextResponse } from 'next/server'\n+\n+// This function can be marked `async` if using `await` inside\n+export function proxy(request) {\n+  return NextResponse.redirect(new URL('/home', request.url))\n+}\n+\n+// See \"Matching Paths\" below to learn more\n+export const config = {\n+  matcher: '/about/:path*',\n+}\n+```\n+\n+{/* TODO: Update to proxy docs */}\n+\n+Read more about [using `proxy`](/docs/app/guides/backend-for-frontend#middleware), or refer to the `proxy` [API reference](/docs/app/api-reference/file-conventions/middleware)."
        },
        {
            "sha": "2889d3b5fc3a5812d3c547d68b62a0982795c738",
            "filename": "docs/01-app/01-getting-started/17-deploying.mdx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/fd8b4c5979c9254591dbbf49e08bef2be5fab36c/docs%2F01-app%2F01-getting-started%2F17-deploying.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/fd8b4c5979c9254591dbbf49e08bef2be5fab36c/docs%2F01-app%2F01-getting-started%2F17-deploying.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F17-deploying.mdx?ref=fd8b4c5979c9254591dbbf49e08bef2be5fab36c",
            "previous_filename": "docs/01-app/01-getting-started/16-deploying.mdx"
        },
        {
            "sha": "30c44aca95159b00d8affd6ab930ea6c092ab39f",
            "filename": "docs/01-app/01-getting-started/18-upgrading.mdx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/fd8b4c5979c9254591dbbf49e08bef2be5fab36c/docs%2F01-app%2F01-getting-started%2F18-upgrading.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/fd8b4c5979c9254591dbbf49e08bef2be5fab36c/docs%2F01-app%2F01-getting-started%2F18-upgrading.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F18-upgrading.mdx?ref=fd8b4c5979c9254591dbbf49e08bef2be5fab36c",
            "previous_filename": "docs/01-app/01-getting-started/17-upgrading.mdx"
        }
    ],
    "stats": {
        "total": 139,
        "additions": 76,
        "deletions": 63
    }
}