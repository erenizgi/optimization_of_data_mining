{
    "author": "devjiwonchoi",
    "message": "[codemod] Install ESLint v9 if version under for next-lint-to-eslint-cli (#85182)\n\nWhen running `next-lint-to-eslint-cli` and ESLint version lower than 9,\nupgrade to `^9` to ensure full Flat config support.",
    "sha": "e8685ebc12bb8e8c81e67ecded579a456b17da49",
    "files": [
        {
            "sha": "589a7b219df139e7de04f177bdd79066139cfacf",
            "filename": "packages/next-codemod/transforms/__testfixtures__/next-lint-to-eslint-cli/flat-config-flat-compat-with-other-compat/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config-flat-compat-with-other-compat%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config-flat-compat-with-other-compat%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config-flat-compat-with-other-compat%2Fpackage.json?ref=e8685ebc12bb8e8c81e67ecded579a456b17da49",
            "patch": "@@ -20,7 +20,7 @@\n     \"@types/node\": \"^20\",\n     \"@types/react\": \"^19\",\n     \"@types/react-dom\": \"^19\",\n-    \"eslint\": \"^9\",\n+    \"eslint\": \"^8\",\n     \"eslint-config-next\": \"^16\"\n   }\n }"
        },
        {
            "sha": "589a7b219df139e7de04f177bdd79066139cfacf",
            "filename": "packages/next-codemod/transforms/__testfixtures__/next-lint-to-eslint-cli/flat-config-flat-compat/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config-flat-compat%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config-flat-compat%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config-flat-compat%2Fpackage.json?ref=e8685ebc12bb8e8c81e67ecded579a456b17da49",
            "patch": "@@ -20,7 +20,7 @@\n     \"@types/node\": \"^20\",\n     \"@types/react\": \"^19\",\n     \"@types/react-dom\": \"^19\",\n-    \"eslint\": \"^9\",\n+    \"eslint\": \"^8\",\n     \"eslint-config-next\": \"^16\"\n   }\n }"
        },
        {
            "sha": "589a7b219df139e7de04f177bdd79066139cfacf",
            "filename": "packages/next-codemod/transforms/__testfixtures__/next-lint-to-eslint-cli/flat-config/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Fflat-config%2Fpackage.json?ref=e8685ebc12bb8e8c81e67ecded579a456b17da49",
            "patch": "@@ -20,7 +20,7 @@\n     \"@types/node\": \"^20\",\n     \"@types/react\": \"^19\",\n     \"@types/react-dom\": \"^19\",\n-    \"eslint\": \"^9\",\n+    \"eslint\": \"^8\",\n     \"eslint-config-next\": \"^16\"\n   }\n }"
        },
        {
            "sha": "589a7b219df139e7de04f177bdd79066139cfacf",
            "filename": "packages/next-codemod/transforms/__testfixtures__/next-lint-to-eslint-cli/legacy-config/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Flegacy-config%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Flegacy-config%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnext-lint-to-eslint-cli%2Flegacy-config%2Fpackage.json?ref=e8685ebc12bb8e8c81e67ecded579a456b17da49",
            "patch": "@@ -20,7 +20,7 @@\n     \"@types/node\": \"^20\",\n     \"@types/react\": \"^19\",\n     \"@types/react-dom\": \"^19\",\n-    \"eslint\": \"^9\",\n+    \"eslint\": \"^8\",\n     \"eslint-config-next\": \"^16\"\n   }\n }"
        },
        {
            "sha": "bac018e3df309b07b66c6ec46b32816e985c59f3",
            "filename": "packages/next-codemod/transforms/__tests__/next-lint-to-eslint-cli.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fnext-lint-to-eslint-cli.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fnext-lint-to-eslint-cli.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fnext-lint-to-eslint-cli.test.js?ref=e8685ebc12bb8e8c81e67ecded579a456b17da49",
            "patch": "@@ -94,7 +94,7 @@ describe('next-lint-to-eslint-cli', () => {\n             \"@types/node\": \"^20\",\n             \"@types/react\": \"^19\",\n             \"@types/react-dom\": \"^19\",\n-            \"eslint\": \"^9\",\n+            \"eslint\": \"^8\",\n             \"eslint-config-next\": \"^16\"\n           }\n         }\n@@ -232,7 +232,7 @@ describe('next-lint-to-eslint-cli', () => {\n             \"@types/node\": \"^20\",\n             \"@types/react\": \"^19\",\n             \"@types/react-dom\": \"^19\",\n-            \"eslint\": \"^9\",\n+            \"eslint\": \"^8\",\n             \"eslint-config-next\": \"^16\"\n           }\n         }\n@@ -474,7 +474,7 @@ describe('next-lint-to-eslint-cli', () => {\n             \"@types/node\": \"^20\",\n             \"@types/react\": \"^19\",\n             \"@types/react-dom\": \"^19\",\n-            \"eslint\": \"^9\",\n+            \"eslint\": \"^8\",\n             \"eslint-config-next\": \"^16\"\n           }\n         }"
        },
        {
            "sha": "74c39c68e6bde05078f60ee93674a139761ccb4f",
            "filename": "packages/next-codemod/transforms/next-lint-to-eslint-cli.ts",
            "status": "modified",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2Fnext-lint-to-eslint-cli.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e8685ebc12bb8e8c81e67ecded579a456b17da49/packages%2Fnext-codemod%2Ftransforms%2Fnext-lint-to-eslint-cli.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2Fnext-lint-to-eslint-cli.ts?ref=e8685ebc12bb8e8c81e67ecded579a456b17da49",
            "patch": "@@ -1,6 +1,7 @@\n import { existsSync, readFileSync, writeFileSync, unlinkSync } from 'node:fs'\n import path from 'node:path'\n import { execSync } from 'node:child_process'\n+import semver from 'semver'\n import { getPkgManager, installPackages } from '../lib/handle-package'\n import { createParserFromPath } from '../lib/parser'\n import { white, bold, red, yellow, green, magenta } from 'picocolors'\n@@ -961,6 +962,30 @@ function updatePackageJsonScripts(packageJsonContent: string): {\n       needsUpdate = true\n     }\n \n+    // Bump eslint to v9 for full Flat config support\n+    if (\n+      packageJson.dependencies?.['eslint'] &&\n+      semver.lt(\n+        semver.minVersion(packageJson.dependencies['eslint'])?.version ??\n+          '0.0.0',\n+        '9.0.0'\n+      )\n+    ) {\n+      packageJson.dependencies['eslint'] = '^9'\n+      needsUpdate = true\n+    }\n+    if (\n+      packageJson.devDependencies?.['eslint'] &&\n+      semver.lt(\n+        semver.minVersion(packageJson.devDependencies['eslint'])?.version ??\n+          '0.0.0',\n+        '9.0.0'\n+      )\n+    ) {\n+      packageJson.devDependencies['eslint'] = '^9'\n+      needsUpdate = true\n+    }\n+\n     // Remove @eslint/eslintrc if it exists since we no longer use FlatCompat\n     if (packageJson.devDependencies?.['@eslint/eslintrc']) {\n       delete packageJson.devDependencies['@eslint/eslintrc']"
        }
    ],
    "stats": {
        "total": 39,
        "additions": 32,
        "deletions": 7
    }
}