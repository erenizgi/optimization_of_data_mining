{
    "author": "bgub",
    "message": "fix: don't fail with amp config in JS (#82798)\n\nBecause tsc doesn't infer string literal types in JS files\n\n---------\n\nCo-authored-by: JJ Kasper <jj@jjsweb.site>",
    "sha": "4e9cc18917a3cc300b8a8b21e1b570ab775edb2b",
    "files": [
        {
            "sha": "431390854bb6c492073b1cc2efff9dfc5cf5aee9",
            "filename": "packages/next/src/server/lib/router-utils/typegen.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4e9cc18917a3cc300b8a8b21e1b570ab775edb2b/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4e9cc18917a3cc300b8a8b21e1b570ab775edb2b/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts?ref=4e9cc18917a3cc300b8a8b21e1b570ab775edb2b",
            "patch": "@@ -475,7 +475,7 @@ export function generateValidatorFile(\n    * Validated at build-time by parsePagesSegmentConfig.\n    */\n   config?: {\n-    amp?: boolean | 'hybrid'\n+    amp?: boolean | 'hybrid' | string // necessary for JS\n     maxDuration?: number\n     runtime?: 'edge' | 'experimental-edge' | 'nodejs' | string // necessary unless config is exported as const\n     regions?: string[]"
        },
        {
            "sha": "3df335a0ce35b032ba2171b0b72183f0767b5407",
            "filename": "test/integration/amphtml/pages/use-amp-hook.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4e9cc18917a3cc300b8a8b21e1b570ab775edb2b/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4e9cc18917a3cc300b8a8b21e1b570ab775edb2b/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.tsx?ref=4e9cc18917a3cc300b8a8b21e1b570ab775edb2b",
            "patch": "@@ -0,0 +1,8 @@\n+import { useAmp } from 'next/amp'\n+\n+export const config = { amp: 'hybrid' }\n+\n+export default () => {\n+  const isAmp = useAmp()\n+  return `Hello ${isAmp ? 'AMP' : 'others'}`\n+}"
        },
        {
            "sha": "36dfe75c11f1668019d8315f130a256e86415a2f",
            "filename": "test/integration/api-support/pages/api/big-parse.ts",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4e9cc18917a3cc300b8a8b21e1b570ab775edb2b/test%2Fintegration%2Fapi-support%2Fpages%2Fapi%2Fbig-parse.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4e9cc18917a3cc300b8a8b21e1b570ab775edb2b/test%2Fintegration%2Fapi-support%2Fpages%2Fapi%2Fbig-parse.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fapi-support%2Fpages%2Fapi%2Fbig-parse.ts?ref=4e9cc18917a3cc300b8a8b21e1b570ab775edb2b",
            "patch": "@@ -0,0 +1,13 @@\n+import { NextApiRequest, NextApiResponse } from 'next'\n+\n+export const config = {\n+  api: {\n+    bodyParser: {\n+      sizeLimit: '5mb',\n+    },\n+  },\n+}\n+\n+export default (req: NextApiRequest, res: NextApiResponse) => {\n+  res.status(200).json(req.body)\n+}"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 22,
        "deletions": 1
    }
}