{
    "author": "hallucinogenizer",
    "message": "Update prefetching.mdx providing more clarity on the usage of `router.prefetch()` (#84903)\n\n## What\nUpdated `prefetching.mdx` in the App Router documentation providing more\nclarity on the usage of `router.prefetch()`.\n\n## Why\nWe found the current section on `Manual Prefetching` to be lacking in\ndetail and a bit misleading as well.\n\nThe issue with the current version of the documentation is that the code\nsnippet provided:\n```tsx\nconst router = useRouter();\nrouter.prefetch();\n```\nMakes it seem like `router.prefetch()` can be called at the same level\nas `useRouter()`, i.e. in the component body, even though that causes\nthe page to crash for many possible reasons, such as `window is not\ndefined`, or `Router action dispatched before initialization.`.\n\nI am not sure if this is helpful/correct or not, just thought this may\nhelp someone. If not feel free to close this PR. Thanks in advance for\nyour time.\n\n## Reproduction\nHere is a codesandbox reproducing the issue that occurs if you follow\nthe code snippet trivially:\nhttps://codesandbox.io/p/devbox/s5pmsj\n\n<!-- Thanks for opening a PR! Your contribution is much appreciated.\nTo make sure your PR is handled as smoothly as possible we request that\nyou follow the checklist sections below.\nChoose the right checklist for the change(s) that you're making:\n\n## For Contributors\n\n### Improving Documentation\n\n- Run `pnpm prettier-fix` to fix formatting issues before opening the\nPR. (Done)\n- Read the Docs Contribution Guide to ensure your contribution follows\nthe docs guidelines:\nhttps://nextjs.org/docs/community/contribution-guide (Done)\n\n\nCloses NEXT-\nFixes #\n\n-->\n\n---------\n\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "7296aa624e6205def670b22bdc5681f8a42eb55a",
    "files": [
        {
            "sha": "7033b3815b8338bf415d78b93f58175e41273e9f",
            "filename": "docs/01-app/02-guides/prefetching.mdx",
            "status": "modified",
            "additions": 14,
            "deletions": 3,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/7296aa624e6205def670b22bdc5681f8a42eb55a/docs%2F01-app%2F02-guides%2Fprefetching.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/7296aa624e6205def670b22bdc5681f8a42eb55a/docs%2F01-app%2F02-guides%2Fprefetching.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fprefetching.mdx?ref=7296aa624e6205def670b22bdc5681f8a42eb55a",
            "patch": "@@ -58,16 +58,27 @@ Automatic prefetching runs only in production. Disable with `prefetch={false}` o\n \n ## Manual prefetch\n \n+To do manual prefetching, import the `useRouter` hook from `next/navigation`, and call `router.prefetch()` to warm routes outside the viewport or in response to analytics, hover, scroll, etc.\n+\n ```tsx\n 'use client'\n \n import { useRouter } from 'next/navigation'\n+import { CustomLink } from '@components/link'\n+\n+export function PricingCard() {\n+  const router = useRouter()\n \n-const router = useRouter()\n-router.prefetch('/pricing')\n+  return (\n+    <div onMouseEnter={() => router.prefetch('/pricing')}>\n+      {/* other UI elements */}\n+      <CustomLink href=\"/pricing\">View Pricing</CustomLink>\n+    </div>\n+  )\n+}\n ```\n \n-Call `router.prefetch()` to warm routes outside the viewport or in response to analytics, hover, scroll, etc.\n+If the intent is to prefetch a URL when a component loads, see the extending or rejecting a link [example].\n \n ## Hover-triggered prefetch\n "
        }
    ],
    "stats": {
        "total": 17,
        "additions": 14,
        "deletions": 3
    }
}