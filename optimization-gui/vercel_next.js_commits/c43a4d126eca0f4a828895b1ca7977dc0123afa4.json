{
    "author": "sokra",
    "message": "Turbopack: add flags to AvailabilityInfo (#85771)\n\n### What?\n\nChange AvailabilityInfo from an enum to a struct with flags.",
    "sha": "c43a4d126eca0f4a828895b1ca7977dc0123afa4",
    "files": [
        {
            "sha": "3dca9d2466246c4026f699048d8ad975672c169d",
            "filename": "Cargo.lock",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/Cargo.lock",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/Cargo.lock",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.lock?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -9587,6 +9587,7 @@ dependencies = [\n  \"anyhow\",\n  \"async-trait\",\n  \"auto-hash-map\",\n+ \"bitfield\",\n  \"browserslist-rs\",\n  \"bytes-str\",\n  \"const_format\","
        },
        {
            "sha": "bd094e17312b3b959ff57772d68d417a2f95c068",
            "filename": "crates/next-api/src/app.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-api%2Fsrc%2Fapp.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-api%2Fsrc%2Fapp.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fapp.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -1247,7 +1247,7 @@ impl AppEndpoint {\n                 client_shared_chunk_group.assets.owned().await?,\n             )\n         } else {\n-            (AvailabilityInfo::Root, vec![])\n+            (AvailabilityInfo::root(), vec![])\n         };\n \n         let per_page_module_graph = *project.per_page_module_graph().await?;\n@@ -1710,7 +1710,7 @@ impl AppEndpoint {\n                             .collect(),\n                     ),\n                     module_graph,\n-                    AvailabilityInfo::Root,\n+                    AvailabilityInfo::root(),\n                 );\n \n                 let chunk_group2_assets = chunking_context.evaluated_chunk_group_assets(\n@@ -1752,7 +1752,7 @@ impl AppEndpoint {\n                                 // TODO this should be ChunkGroup::Shared\n                                 ChunkGroup::Entry(server_utils),\n                                 module_graph,\n-                                AvailabilityInfo::Root,\n+                                AvailabilityInfo::root(),\n                             )\n                             .to_resolved()\n                             .await?;"
        },
        {
            "sha": "2477911dd220b49b650cd571534c5f5dbdf9b274",
            "filename": "crates/next-api/src/instrumentation.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-api%2Fsrc%2Finstrumentation.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-api%2Fsrc%2Finstrumentation.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Finstrumentation.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -107,7 +107,7 @@ impl InstrumentationEndpoint {\n             module.ident(),\n             ChunkGroup::Entry(vec![module]),\n             module_graph,\n-            AvailabilityInfo::Root,\n+            AvailabilityInfo::root(),\n         ))\n     }\n \n@@ -134,7 +134,7 @@ impl InstrumentationEndpoint {\n                 module_graph,\n                 OutputAssets::empty(),\n                 OutputAssets::empty(),\n-                AvailabilityInfo::Root,\n+                AvailabilityInfo::root(),\n             )\n             .await?;\n         Ok(*chunk)"
        },
        {
            "sha": "2b87d3709c3a45d825383a0e55935910e7fe357f",
            "filename": "crates/next-api/src/middleware.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -119,7 +119,7 @@ impl MiddlewareEndpoint {\n             module.ident(),\n             ChunkGroup::Entry(vec![module]),\n             module_graph,\n-            AvailabilityInfo::Root,\n+            AvailabilityInfo::root(),\n         );\n         Ok(edge_chunk_grou)\n     }\n@@ -147,7 +147,7 @@ impl MiddlewareEndpoint {\n                 module_graph,\n                 OutputAssets::empty(),\n                 OutputAssets::empty(),\n-                AvailabilityInfo::Root,\n+                AvailabilityInfo::root(),\n             )\n             .await?;\n         Ok(*chunk)"
        },
        {
            "sha": "19df31a3fb39fe5529225351a315da2947873d61",
            "filename": "crates/next-api/src/pages.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-api%2Fsrc%2Fpages.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-api%2Fsrc%2Fpages.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fpages.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -781,7 +781,7 @@ impl PageEndpoint {\n                 AssetIdent::from_path(this.page.await?.base_path.clone()),\n                 ChunkGroup::Entry(evaluatable_assets),\n                 module_graph,\n-                AvailabilityInfo::Root,\n+                AvailabilityInfo::root(),\n             );\n \n             Ok(client_chunk_group)"
        },
        {
            "sha": "d5d05e9bfc8afc5b3e902e0f7a16eae5ca7b1eef",
            "filename": "crates/next-core/src/next_app/app_client_shared_chunks.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_client_shared_chunks.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_client_shared_chunks.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_client_shared_chunks.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -33,7 +33,7 @@ pub async fn get_app_client_shared_chunk_group(\n                         .collect(),\n                 ),\n                 module_graph,\n-                AvailabilityInfo::Root,\n+                AvailabilityInfo::root(),\n             )\n             .resolve()\n             .await"
        },
        {
            "sha": "b6bc814285137cf018a25f170701063f04905ca8",
            "filename": "turbopack/crates/turbopack-browser/src/chunking_context.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 18,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -680,15 +680,9 @@ impl ChunkingContext for BrowserChunkingContext {\n \n             if this.enable_hot_module_replacement {\n                 let mut ident = ident;\n-                match input_availability_info {\n-                    AvailabilityInfo::Root => {}\n-                    AvailabilityInfo::Untracked => {\n-                        ident = ident.with_modifier(rcstr!(\"untracked\"));\n-                    }\n-                    AvailabilityInfo::Complete { available_modules } => {\n-                        ident =\n-                            ident.with_modifier(available_modules.hash().await?.to_string().into());\n-                    }\n+                if let Some(input_availability_info_ident) = input_availability_info.ident().await?\n+                {\n+                    ident = ident.with_modifier(input_availability_info_ident);\n                 }\n                 let other_assets = Vc::cell(assets.clone());\n                 assets.push(\n@@ -764,15 +758,9 @@ impl ChunkingContext for BrowserChunkingContext {\n \n             if this.enable_hot_module_replacement {\n                 let mut ident = ident;\n-                match input_availability_info {\n-                    AvailabilityInfo::Root => {}\n-                    AvailabilityInfo::Untracked => {\n-                        ident = ident.with_modifier(rcstr!(\"untracked\"));\n-                    }\n-                    AvailabilityInfo::Complete { available_modules } => {\n-                        ident =\n-                            ident.with_modifier(available_modules.hash().await?.to_string().into());\n-                    }\n+                if let Some(input_availability_info_ident) = input_availability_info.ident().await?\n+                {\n+                    ident = ident.with_modifier(input_availability_info_ident);\n                 }\n                 assets.push(\n                     self.generate_chunk_list_register_chunk("
        },
        {
            "sha": "1c470e80bf19478e53897e8decf5d294fa295826",
            "filename": "turbopack/crates/turbopack-cli/src/build/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fbuild%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fbuild%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fbuild%2Fmod.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -444,7 +444,7 @@ async fn build_internal(\n                                     [ResolvedVc::upcast(ecmascript)].into_iter().collect(),\n                                 ),\n                                 module_graph,\n-                                AvailabilityInfo::Root,\n+                                AvailabilityInfo::root(),\n                             ),\n                             Target::Node => OutputAssetsWithReferenced {\n                                 assets: ResolvedVc::cell(vec![\n@@ -464,7 +464,7 @@ async fn build_internal(\n                                             module_graph,\n                                             OutputAssets::empty(),\n                                             OutputAssets::empty(),\n-                                            AvailabilityInfo::Root,\n+                                            AvailabilityInfo::root(),\n                                         )\n                                         .await?\n                                         .asset,"
        },
        {
            "sha": "9a1101b3f5d6f663a5c58eeb6e4356e250ce025a",
            "filename": "turbopack/crates/turbopack-core/Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-core%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-core%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2FCargo.toml?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -16,6 +16,7 @@ workspace = true\n anyhow = { workspace = true }\n async-trait = { workspace = true }\n auto-hash-map = { workspace = true }\n+bitfield = { workspace = true }\n browserslist-rs = { workspace = true }\n bytes-str = { workspace = true }\n const_format = { workspace = true }"
        },
        {
            "sha": "93fa32dcbdadf7ca7e4746031e69e099ddb3b435",
            "filename": "turbopack/crates/turbopack-core/src/chunk/availability_info.rs",
            "status": "modified",
            "additions": 42,
            "deletions": 26,
            "changes": 68,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Favailability_info.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Favailability_info.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Favailability_info.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -1,9 +1,17 @@\n use anyhow::Result;\n+use bitfield::bitfield;\n use serde::{Deserialize, Serialize};\n+use turbo_rcstr::RcStr;\n use turbo_tasks::{NonLocalValue, ResolvedVc, TaskInput, Vc, trace::TraceRawVcs};\n \n use super::available_modules::{AvailableModules, AvailableModulesSet};\n \n+bitfield! {\n+    #[derive(Clone, Copy, Default, TaskInput, TraceRawVcs, NonLocalValue, Serialize, Deserialize, PartialEq, Eq, Hash)]\n+    pub struct AvailabilityFlags(u8);\n+    impl Debug;\n+}\n+\n #[derive(\n     Eq,\n     PartialEq,\n@@ -17,40 +25,48 @@ use super::available_modules::{AvailableModules, AvailableModulesSet};\n     Serialize,\n     Deserialize,\n )]\n-pub enum AvailabilityInfo {\n-    /// Availability of modules is not tracked\n-    Untracked,\n-    /// Availability of modules is tracked, but no modules are available\n-    Root,\n+pub struct AvailabilityInfo {\n+    flags: AvailabilityFlags,\n     /// There are modules already available.\n-    Complete {\n-        available_modules: ResolvedVc<AvailableModules>,\n-    },\n+    available_modules: Option<ResolvedVc<AvailableModules>>,\n }\n \n impl AvailabilityInfo {\n-    pub fn available_modules(&self) -> Option<ResolvedVc<AvailableModules>> {\n-        match self {\n-            Self::Untracked => None,\n-            Self::Root => None,\n-            Self::Complete {\n-                available_modules, ..\n-            } => Some(*available_modules),\n+    pub fn root() -> Self {\n+        Self {\n+            flags: AvailabilityFlags::default(),\n+            available_modules: None,\n         }\n     }\n \n+    pub fn available_modules(&self) -> Option<ResolvedVc<AvailableModules>> {\n+        self.available_modules\n+    }\n+\n     pub async fn with_modules(self, modules: Vc<AvailableModulesSet>) -> Result<Self> {\n-        Ok(match self {\n-            AvailabilityInfo::Untracked => AvailabilityInfo::Untracked,\n-            AvailabilityInfo::Root => AvailabilityInfo::Complete {\n-                available_modules: AvailableModules::new(modules).to_resolved().await?,\n-            },\n-            AvailabilityInfo::Complete { available_modules } => AvailabilityInfo::Complete {\n-                available_modules: available_modules\n-                    .with_modules(modules)\n-                    .to_resolved()\n-                    .await?,\n-            },\n+        Ok(if let Some(available_modules) = self.available_modules {\n+            Self {\n+                flags: self.flags,\n+                available_modules: Some(\n+                    available_modules\n+                        .with_modules(modules)\n+                        .to_resolved()\n+                        .await?,\n+                ),\n+            }\n+        } else {\n+            Self {\n+                flags: self.flags,\n+                available_modules: Some(AvailableModules::new(modules).to_resolved().await?),\n+            }\n+        })\n+    }\n+\n+    pub async fn ident(&self) -> Result<Option<RcStr>> {\n+        Ok(if let Some(available_modules) = self.available_modules {\n+            Some(available_modules.hash().await?.to_string().into())\n+        } else {\n+            None\n         })\n     }\n }"
        },
        {
            "sha": "0e5a6e328e43ba00df9f9c92123047b2e0b8094c",
            "filename": "turbopack/crates/turbopack-core/src/chunk/chunking_context.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking_context.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -104,7 +104,7 @@ impl ChunkGroupResult {\n             assets: ResolvedVc::cell(vec![]),\n             referenced_assets: ResolvedVc::cell(vec![]),\n             references: ResolvedVc::cell(vec![]),\n-            availability_info: AvailabilityInfo::Root,\n+            availability_info: AvailabilityInfo::root(),\n         }\n         .cell()\n     }\n@@ -114,7 +114,7 @@ impl ChunkGroupResult {\n             assets: ResolvedVc::cell(vec![]),\n             referenced_assets: ResolvedVc::cell(vec![]),\n             references: ResolvedVc::cell(vec![]),\n-            availability_info: AvailabilityInfo::Root,\n+            availability_info: AvailabilityInfo::root(),\n         }\n         .resolved_cell()\n     }\n@@ -521,7 +521,7 @@ impl<T: ChunkingContext + Send + Upcast<Box<dyn ChunkingContext>>> ChunkingConte\n         chunk_group: ChunkGroup,\n         module_graph: Vc<ModuleGraph>,\n     ) -> Vc<ChunkGroupResult> {\n-        self.chunk_group(ident, chunk_group, module_graph, AvailabilityInfo::Root)\n+        self.chunk_group(ident, chunk_group, module_graph, AvailabilityInfo::root())\n     }\n \n     fn root_chunk_group_assets(\n@@ -588,7 +588,7 @@ impl<T: ChunkingContext + Send + Upcast<Box<dyn ChunkingContext>>> ChunkingConte\n             module_graph,\n             extra_chunks,\n             extra_referenced_assets,\n-            AvailabilityInfo::Root,\n+            AvailabilityInfo::root(),\n         )\n     }\n \n@@ -607,7 +607,7 @@ impl<T: ChunkingContext + Send + Upcast<Box<dyn ChunkingContext>>> ChunkingConte\n             module_graph,\n             extra_chunks,\n             extra_referenced_assets,\n-            AvailabilityInfo::Root,\n+            AvailabilityInfo::root(),\n         )\n     }\n "
        },
        {
            "sha": "3e333cd80d854d5b21f7cdcff1e886628090b0e4",
            "filename": "turbopack/crates/turbopack-dev-server/src/html.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fhtml.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fhtml.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fhtml.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -163,7 +163,7 @@ impl DevHtmlAsset {\n                                     .collect(),\n                             ),\n                             *module_graph,\n-                            AvailabilityInfo::Root,\n+                            AvailabilityInfo::root(),\n                         )\n                         .await?\n                 } else {"
        },
        {
            "sha": "87864d547e1f0ad17f016ee0a209a826a09b6ee5",
            "filename": "turbopack/crates/turbopack-ecmascript/src/worker_chunk/chunk_item.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fchunk_item.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fchunk_item.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fchunk_item.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -40,7 +40,7 @@ impl WorkerLoaderChunkItem {\n             module.inner.ident().with_modifier(rcstr!(\"worker\")),\n             ChunkGroup::Isolated(ResolvedVc::upcast(module.inner)),\n             *self.module_graph,\n-            AvailabilityInfo::Root,\n+            AvailabilityInfo::root(),\n         ))\n     }\n "
        },
        {
            "sha": "ea066d1515805616cedd590f69170bb54541dcff",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c43a4d126eca0f4a828895b1ca7977dc0123afa4/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs?ref=c43a4d126eca0f4a828895b1ca7977dc0123afa4",
            "patch": "@@ -518,7 +518,7 @@ async fn run_test_operation(resource: RcStr) -> Result<Vc<FileSystemPath>> {\n             entry_module.ident(),\n             ChunkGroup::Entry(entry_modules.into_iter().collect()),\n             module_graph,\n-            AvailabilityInfo::Root,\n+            AvailabilityInfo::root(),\n         ),\n         Runtime::NodeJs => {\n             OutputAssetsWithReferenced {\n@@ -535,7 +535,7 @@ async fn run_test_operation(resource: RcStr) -> Result<Vc<FileSystemPath>> {\n                             module_graph,\n                             OutputAssets::empty(),\n                             OutputAssets::empty(),\n-                            AvailabilityInfo::Root,\n+                            AvailabilityInfo::root(),\n                         )\n                         .await?\n                         .asset,"
        }
    ],
    "stats": {
        "total": 134,
        "additions": 70,
        "deletions": 64
    }
}