{
    "author": "mischnic",
    "message": "Turbopack: remove dead code (#79280)\n\n- `IncludeIdentModule` is unused (and incompatible with the ModuleGraph anyway)\n- Cleanup some `todo!()`s",
    "sha": "13af7b57f641fb3a80df85548ca288be91d99b63",
    "files": [
        {
            "sha": "e0cc8578a0c09184efcf1c0cc8ca35b67f806358",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/static_assets.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fstatic_assets.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fstatic_assets.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fstatic_assets.rs?ref=13af7b57f641fb3a80df85548ca288be91d99b63",
            "patch": "@@ -140,8 +140,9 @@ impl Introspectable for StaticAssetsContentSource {\n                             .to_resolved()\n                             .await?,\n                         ),\n-                        DirectoryEntry::Other(_) => todo!(\"what's DirectoryContent::Other?\"),\n-                        DirectoryEntry::Error => todo!(),\n+                        DirectoryEntry::Other(_) | DirectoryEntry::Error => {\n+                            todo!(\"unsupported DirectoryContent variant: {entry:?}\")\n+                        }\n                     };\n                     Ok((ResolvedVc::cell(name.clone()), child))\n                 }"
        },
        {
            "sha": "0b27482d0ad7a2cb769a8ffc859a1e0e50cd0b2f",
            "filename": "turbopack/crates/turbopack-ecmascript/src/async_chunk/module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs?ref=13af7b57f641fb3a80df85548ca288be91d99b63",
            "patch": "@@ -76,7 +76,7 @@ impl Module for AsyncLoaderModule {\n impl Asset for AsyncLoaderModule {\n     #[turbo_tasks::function]\n     fn content(&self) -> Vc<AssetContent> {\n-        todo!()\n+        panic!(\"content() should not be called\");\n     }\n }\n "
        },
        {
            "sha": "30e1b12afc59e0ba3d1e41cc66fba185a5677be2",
            "filename": "turbopack/crates/turbopack-ecmascript/src/manifest/chunk_asset.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs?ref=13af7b57f641fb3a80df85548ca288be91d99b63",
            "patch": "@@ -152,7 +152,7 @@ impl Module for ManifestAsyncModule {\n impl Asset for ManifestAsyncModule {\n     #[turbo_tasks::function]\n     fn content(&self) -> Vc<AssetContent> {\n-        todo!()\n+        panic!(\"content() should not be called\");\n     }\n }\n "
        },
        {
            "sha": "b5430179c1a26fa11e57050ed53cf5b99c3cbecb",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/external_module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 32,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs?ref=13af7b57f641fb3a80df85548ca288be91d99b63",
            "patch": "@@ -268,35 +268,3 @@ impl EcmascriptChunkItem for CachedExternalModuleChunkItem {\n         )\n     }\n }\n-\n-/// A module that only has an ident and no content nor references.\n-///\n-/// It is used to include a module's ident in the module graph before the module\n-/// itself is resolved, as is the case with NextServerComponentModule's\n-/// \"client modules\" and \"ssr modules\".\n-#[turbo_tasks::value]\n-pub struct IncludeIdentModule {\n-    ident: ResolvedVc<AssetIdent>,\n-}\n-\n-#[turbo_tasks::value_impl]\n-impl IncludeIdentModule {\n-    #[turbo_tasks::function]\n-    pub fn new(ident: ResolvedVc<AssetIdent>) -> Vc<Self> {\n-        Self { ident }.cell()\n-    }\n-}\n-\n-impl Asset for IncludeIdentModule {\n-    fn content(self: Vc<Self>) -> Vc<AssetContent> {\n-        todo!(\"IncludeIdentModule doesn't implement content()\")\n-    }\n-}\n-\n-#[turbo_tasks::value_impl]\n-impl Module for IncludeIdentModule {\n-    #[turbo_tasks::function]\n-    fn ident(&self) -> Vc<AssetIdent> {\n-        *self.ident\n-    }\n-}"
        },
        {
            "sha": "853e398ff10f752f8ad31e3e21d4caf3be524aa4",
            "filename": "turbopack/crates/turbopack-ecmascript/src/worker_chunk/module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/13af7b57f641fb3a80df85548ca288be91d99b63/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs?ref=13af7b57f641fb3a80df85548ca288be91d99b63",
            "patch": "@@ -62,7 +62,7 @@ impl Module for WorkerLoaderModule {\n impl Asset for WorkerLoaderModule {\n     #[turbo_tasks::function]\n     fn content(&self) -> Vc<AssetContent> {\n-        todo!()\n+        panic!(\"content() should not be called\");\n     }\n }\n "
        }
    ],
    "stats": {
        "total": 43,
        "additions": 6,
        "deletions": 37
    }
}