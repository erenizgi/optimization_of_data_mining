{
    "author": "eps1lon",
    "message": "[dev-overlay] Add indicator when sourcemapping fails (#76516)",
    "sha": "690f89dec695fc23bfabf9ba1d2f63af9124871d",
    "files": [
        {
            "sha": "0cec358a48dde38f396fd00add00856c503e16d9",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/call-stack-frame/call-stack-frame.tsx",
            "status": "modified",
            "additions": 11,
            "deletions": 3,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/690f89dec695fc23bfabf9ba1d2f63af9124871d/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fcall-stack-frame%2Fcall-stack-frame.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/690f89dec695fc23bfabf9ba1d2f63af9124871d/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fcall-stack-frame%2Fcall-stack-frame.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fcall-stack-frame%2Fcall-stack-frame.tsx?ref=690f89dec695fc23bfabf9ba1d2f63af9124871d",
            "patch": "@@ -2,7 +2,7 @@ import type { StackFrame } from 'next/dist/compiled/stacktrace-parser'\n import type { OriginalStackFrame } from '../../../utils/stack-frame'\n \n import { HotlinkedText } from '../hot-linked-text'\n-import { ExternalIcon } from '../../icons/external'\n+import { ExternalIcon, SourceMappingErrorIcon } from '../../icons/external'\n import { getFrameSource } from '../../../utils/stack-frame'\n import { useOpenInEditor } from '../../utils/use-open-in-editor'\n \n@@ -11,7 +11,6 @@ export const CallStackFrame: React.FC<{\n   index: number\n }> = function CallStackFrame({ frame, index }) {\n   // TODO: ability to expand resolved frames\n-  // TODO: render error or external indicator\n \n   const f: StackFrame = frame.originalStackFrame ?? frame.sourceStackFrame\n   const hasSource = Boolean(frame.originalCodeFrame)\n@@ -57,6 +56,15 @@ export const CallStackFrame: React.FC<{\n             <ExternalIcon width={16} height={16} />\n           </button>\n         )}\n+        {frame.error ? (\n+          <button\n+            className=\"source-mapping-error-button\"\n+            onClick={() => console.error(frame.reason)}\n+            title=\"Sourcemapping failed. Click to log cause of error.\"\n+          >\n+            <SourceMappingErrorIcon width={16} height={16} />\n+          </button>\n+        ) : null}\n       </div>\n       <span\n         className=\"call-stack-frame-file-source\"\n@@ -114,7 +122,7 @@ export const CALL_STACK_FRAME_STYLES = `\n     }\n   }\n \n-  .open-in-editor-button {\n+  .open-in-editor-button, .source-mapping-error-button {\n     display: flex;\n     align-items: center;\n     justify-content: center;"
        },
        {
            "sha": "6dfbefacbbbc02d52fcb85e65386a78f3fc4b891",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/icons/external.tsx",
            "status": "modified",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/690f89dec695fc23bfabf9ba1d2f63af9124871d/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fexternal.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/690f89dec695fc23bfabf9ba1d2f63af9124871d/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fexternal.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Ficons%2Fexternal.tsx?ref=690f89dec695fc23bfabf9ba1d2f63af9124871d",
            "patch": "@@ -17,3 +17,23 @@ export function ExternalIcon(props: React.SVGProps<SVGSVGElement>) {\n     </svg>\n   )\n }\n+\n+export function SourceMappingErrorIcon(props: React.SVGProps<SVGSVGElement>) {\n+  return (\n+    <svg\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+      height=\"16\"\n+      strokeLinejoin=\"round\"\n+      viewBox=\"-4 -4 24 24\"\n+      width=\"16\"\n+      {...props}\n+    >\n+      <path\n+        fillRule=\"evenodd\"\n+        clipRule=\"evenodd\"\n+        d=\"M8.55846 2H7.44148L1.88975 13.5H14.1102L8.55846 2ZM9.90929 1.34788C9.65902 0.829456 9.13413 0.5 8.55846 0.5H7.44148C6.86581 0.5 6.34092 0.829454 6.09065 1.34787L0.192608 13.5653C-0.127943 14.2293 0.355835 15 1.09316 15H14.9068C15.6441 15 16.1279 14.2293 15.8073 13.5653L9.90929 1.34788ZM8.74997 4.75V5.5V8V8.75H7.24997V8V5.5V4.75H8.74997ZM7.99997 12C8.55226 12 8.99997 11.5523 8.99997 11C8.99997 10.4477 8.55226 10 7.99997 10C7.44769 10 6.99997 10.4477 6.99997 11C6.99997 11.5523 7.44769 12 7.99997 12Z\"\n+        fill=\"currentColor\"\n+      ></path>\n+    </svg>\n+  )\n+}"
        },
        {
            "sha": "22e8355e0fbc24d6170bab0a9ef71786e91d670a",
            "filename": "test/lib/next-test-utils.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/690f89dec695fc23bfabf9ba1d2f63af9124871d/test%2Flib%2Fnext-test-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/690f89dec695fc23bfabf9ba1d2f63af9124871d/test%2Flib%2Fnext-test-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-test-utils.ts?ref=690f89dec695fc23bfabf9ba1d2f63af9124871d",
            "patch": "@@ -1439,6 +1439,8 @@ export async function getRedboxCallStack(\n         // so that c&p automatically does the right thing.\n         const frame = frameElement.innerText.replace('\\n', ' ')\n \n+        // TODO: Special marker if source-mapping fails.\n+\n         // Feel free to adjust this heuristic if it accidentally hides too much.\n         const isInternalFrame =\n           // likely https://linear.app/vercel/issue/NDX-464"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 33,
        "deletions": 3
    }
}