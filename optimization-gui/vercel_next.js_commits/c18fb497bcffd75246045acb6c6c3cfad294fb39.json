{
    "author": "eps1lon",
    "message": "[ci] Ensure runners use configured Node.js version (#87183)",
    "sha": "c18fb497bcffd75246045acb6c6c3cfad294fb39",
    "files": [
        {
            "sha": "62915d416cb7d8e4a0bacd0e28ace478f737693e",
            "filename": ".github/workflows/build_reusable.yml",
            "status": "modified",
            "additions": 10,
            "deletions": 4,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/c18fb497bcffd75246045acb6c6c3cfad294fb39/.github%2Fworkflows%2Fbuild_reusable.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/c18fb497bcffd75246045acb6c6c3cfad294fb39/.github%2Fworkflows%2Fbuild_reusable.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_reusable.yml?ref=c18fb497bcffd75246045acb6c6c3cfad294fb39",
            "patch": "@@ -151,9 +151,10 @@ jobs:\n           script: |\n             core.setOutput('input_step_key', '${{ inputs.stepName }}'.toLowerCase().replaceAll(/[/.]/g, '-').trim('-'));\n \n-      - name: Use Node.js ${{ inputs.nodeVersion || env.NODE_LTS_VERSION }}\n+      - name: Use Node.js ${{ inputs.nodeVersion || env.NODE_LTS_VERSION }} for default shell\n         run: |\n-          node --version || echo \"Node.js not installed yet\"\n+          node --version || true\n+          which node || true\n           # TODO: May be sufficient to just set `$FNM_MULTISHELL_PATH/bin` from `fnm env --json` into GITHUB_PATH\n           fnm_env=$(fnm env)\n           # Debug what we're about to eval\n@@ -163,10 +164,15 @@ jobs:\n           fnm default ${{ inputs.nodeVersion || env.NODE_LTS_VERSION }}\n           node --version\n           which node\n-          echo \"$FNM_MULTISHELL_PATH/bin\" >> \"$GITHUB_PATH\"\n+          NODE_SHELL_PATH=$(dirname \"$(which node)\")\n+          echo \"Adding '$NODE_SHELL_PATH' to GITHUB_PATH\"\n+          echo \"$NODE_SHELL_PATH\" >> \"$GITHUB_PATH\"\n       # Debug used Node.js version in a separate step to ensure\n       # the Node.js version is set for the entire job\n-      - run: node --version\n+      - name: Verify Node.js version\n+        run: |\n+          which node\n+          node --version\n       - name: Prepare corepack\n         if: ${{ contains(fromJson(inputs.runs_on_labels), 'ubuntu-latest') }}\n         run: |"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 10,
        "deletions": 4
    }
}