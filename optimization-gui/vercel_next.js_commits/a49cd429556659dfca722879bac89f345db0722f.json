{
    "author": "sokra",
    "message": "Revert \"Turbopack: remove Asset supertrait from Module trait. Modules don't have content\" (#86415)\n\nReverts vercel/next.js#86339",
    "sha": "a49cd429556659dfca722879bac89f345db0722f",
    "files": [
        {
            "sha": "7b06a51284da620917b6aa39cc46e637f57a5593",
            "filename": "crates/next-core/src/next_client_reference/ecmascript_client_reference/ecmascript_client_reference_module.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -4,9 +4,9 @@ use anyhow::{Context, Result, bail};\n use indoc::writedoc;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{IntoTraitRef, ResolvedVc, ValueToString, Vc};\n-use turbo_tasks_fs::File;\n+use turbo_tasks_fs::{File, FileContent};\n use turbopack_core::{\n-    asset::AssetContent,\n+    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkGroupType, ChunkItem, ChunkType, ChunkableModule,\n         ChunkableModuleReference, ChunkingContext, ChunkingType, ChunkingTypeOption,\n@@ -243,6 +243,18 @@ impl Module for EcmascriptClientReferenceModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for EcmascriptClientReferenceModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        AssetContent::File(\n+            FileContent::Content(\"// This is a proxy module for Next.js client references.\".into())\n+                .resolved_cell(),\n+        )\n+        .cell()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for EcmascriptClientReferenceModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "a93cc9ff59ffa6181de1a3092c27506847a3074c",
            "filename": "crates/next-core/src/next_dynamic/dynamic_module.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -4,7 +4,9 @@ use anyhow::Result;\n use indoc::formatdoc;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n+use turbo_tasks_fs::FileContent;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     ident::AssetIdent,\n     module::Module,\n@@ -71,6 +73,18 @@ impl Module for NextDynamicEntryModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for NextDynamicEntryModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        AssetContent::File(\n+            FileContent::Content(\"// This is a marker module for Next.js dynamic.\".into())\n+                .resolved_cell(),\n+        )\n+        .cell()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for NextDynamicEntryModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "996bdc7f91a5320c6feaf189d3a05efd62aa50e7",
            "filename": "crates/next-core/src/next_server_component/server_component_module.rs",
            "status": "modified",
            "additions": 16,
            "deletions": 1,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -4,8 +4,9 @@ use anyhow::Result;\n use indoc::formatdoc;\n use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n-use turbo_tasks_fs::FileSystemPath;\n+use turbo_tasks_fs::{FileContent, FileSystemPath};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     ident::AssetIdent,\n     module::Module,\n@@ -68,6 +69,20 @@ impl Module for NextServerComponentModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for NextServerComponentModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        AssetContent::File(\n+            FileContent::Content(\n+                \"// This is a marker module for Next.js server components.\".into(),\n+            )\n+            .resolved_cell(),\n+        )\n+        .cell()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for NextServerComponentModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "e50548bd50d13df4ab59b8747151e31e928e8a4f",
            "filename": "crates/next-core/src/next_server_utility/server_utility_module.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -4,8 +4,9 @@ use anyhow::Result;\n use indoc::formatdoc;\n use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n-use turbo_tasks_fs::FileSystemPath;\n+use turbo_tasks_fs::{FileContent, FileSystemPath};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     ident::AssetIdent,\n     module::Module,\n@@ -68,6 +69,18 @@ impl Module for NextServerUtilityModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for NextServerUtilityModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        AssetContent::File(\n+            FileContent::Content(\"// This is a marker module for Next.js server utilities.\".into())\n+                .resolved_cell(),\n+        )\n+        .cell()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for NextServerUtilityModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "78fc1e0ca51f4feb07c2825c6b16dc06cdd02363",
            "filename": "crates/next-core/src/next_shared/transforms/swc_ecma_transform_plugins.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fswc_ecma_transform_plugins.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fswc_ecma_transform_plugins.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_shared%2Ftransforms%2Fswc_ecma_transform_plugins.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -36,12 +36,11 @@ pub async fn get_swc_ecma_transform_rule_impl(\n     enable_mdx_rs: bool,\n ) -> Result<Option<ModuleRule>> {\n     use anyhow::bail;\n-    use turbo_tasks::{TryFlatJoinIterExt, ValueToString};\n+    use turbo_tasks::TryFlatJoinIterExt;\n     use turbo_tasks_fs::FileContent;\n     use turbopack::{resolve_options, resolve_options_context::ResolveOptionsContext};\n     use turbopack_core::{\n         asset::Asset,\n-        module::Module,\n         reference_type::{CommonJsReferenceSubType, ReferenceType},\n         resolve::{handle_resolve_error, parse::Request, resolve},\n     };\n@@ -100,16 +99,7 @@ pub async fn get_swc_ecma_transform_rule_impl(\n                     return Ok(None);\n                 };\n \n-                let Some(plugin_source) = &*plugin_module.source().await? else {\n-                    use anyhow::bail;\n-\n-                    bail!(\n-                        \"Expected source for plugin module: {}\",\n-                        plugin_module.ident().to_string().await?\n-                    );\n-                };\n-\n-                let content = &*plugin_source.content().file_content().await?;\n+                let content = &*plugin_module.content().file_content().await?;\n                 let FileContent::Content(file) = content else {\n                     bail!(\"Expected file content for plugin module\");\n                 };"
        },
        {
            "sha": "bf8b6fcf3f05f3ed91fa900507aa51cfb3d09bc8",
            "filename": "crates/next-core/src/raw_ecmascript_module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fraw_ecmascript_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -10,7 +10,7 @@ use turbo_tasks::{FxIndexMap, FxIndexSet, ResolvedVc, TryJoinIterExt, ValueToStr\n use turbo_tasks_fs::{FileContent, glob::Glob, rope::Rope};\n use turbopack::{ModuleAssetContext, module_options::CustomModuleType};\n use turbopack_core::{\n-    asset::Asset,\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     code_builder::CodeBuilder,\n     compile_time_info::{\n@@ -107,6 +107,14 @@ impl Module for RawEcmascriptModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for RawEcmascriptModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for RawEcmascriptModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "8d392c8cd6c22d3b8ea31bfb71628c4839404c04",
            "filename": "turbopack/crates/turbopack-core/src/changed.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 16,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchanged.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchanged.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchanged.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -1,6 +1,6 @@\n-use anyhow::{Result, bail};\n+use anyhow::Result;\n use turbo_tasks::{\n-    Completion, Completions, ResolvedVc, TryJoinIterExt, ValueToString, Vc,\n+    Completion, Completions, ResolvedVc, TryJoinIterExt, Vc,\n     graph::{AdjacencyMap, GraphTraversal},\n };\n \n@@ -33,7 +33,7 @@ pub async fn any_content_changed_of_module(\n         .completed()?\n         .into_inner()\n         .into_postorder_topological()\n-        .map(|m| source_changed(*m))\n+        .map(|m| content_changed(*ResolvedVc::upcast(m)))\n         .map(|v| v.to_resolved())\n         .try_join()\n         .await?;\n@@ -85,16 +85,3 @@ pub async fn content_changed(asset: Vc<Box<dyn Asset>>) -> Result<Vc<Completion>\n     asset.content().file_content().await?;\n     Ok(Completion::new())\n }\n-\n-/// Returns a completion that changes when the content of the given asset\n-/// changes.\n-#[turbo_tasks::function]\n-pub async fn source_changed(asset: Vc<Box<dyn Module>>) -> Result<Vc<Completion>> {\n-    if let Some(source) = *asset.source().await? {\n-        // Reading the file content is enough to add as dependency\n-        source.content().file_content().await?;\n-    } else {\n-        bail!(\"Module {} has no source\", asset.ident().to_string().await?)\n-    }\n-    Ok(Completion::new())\n-}"
        },
        {
            "sha": "c20aa32da3244b9a9ad125d0262adedccda0748f",
            "filename": "turbopack/crates/turbopack-core/src/chunk/evaluate.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fevaluate.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fevaluate.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fevaluate.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use turbo_tasks::{ResolvedVc, Upcast, ValueToString, Vc};\n \n use super::ChunkableModule;\n use crate::{\n+    asset::Asset,\n     context::AssetContext,\n     module::Module,\n     reference_type::{EntryReferenceSubType, ReferenceType},\n@@ -14,7 +15,7 @@ use crate::{\n /// The chunking context implementation will resolve the dynamic entry to a\n /// well-known value or trait object.\n #[turbo_tasks::value_trait]\n-pub trait EvaluatableAsset: Module + ChunkableModule {}\n+pub trait EvaluatableAsset: Asset + Module + ChunkableModule {}\n \n pub trait EvaluatableAssetExt {\n     fn to_evaluatable("
        },
        {
            "sha": "604d5cf7ac1608857ee1599ee043fcb9a69be074",
            "filename": "turbopack/crates/turbopack-core/src/chunk/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fmod.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -90,7 +90,7 @@ pub struct ModuleIds(Vec<ResolvedVc<ModuleId>>);\n \n /// A [Module] that can be converted into a [Chunk].\n #[turbo_tasks::value_trait]\n-pub trait ChunkableModule: Module {\n+pub trait ChunkableModule: Module + Asset {\n     #[turbo_tasks::function]\n     fn as_chunk_item(\n         self: Vc<Self>,\n@@ -115,7 +115,7 @@ impl ChunkableModules {\n // with other module types (as a MergeableModule cannot prevent itself from being merged with other\n // module types)\n #[turbo_tasks::value_trait]\n-pub trait MergeableModule: Module {\n+pub trait MergeableModule: Module + Asset {\n     /// Even though MergeableModule is implemented, this allows a dynamic condition to determine\n     /// mergeability\n     #[turbo_tasks::function]"
        },
        {
            "sha": "a1f9bf7924f4247027f9ba3375e59bf63a3b94ee",
            "filename": "turbopack/crates/turbopack-core/src/introspect/module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -33,12 +33,8 @@ impl Introspectable for IntrospectableModule {\n     }\n \n     #[turbo_tasks::function]\n-    async fn details(&self) -> Result<Vc<RcStr>> {\n-        if let Some(source) = *self.0.source().await? {\n-            Ok(content_to_details(source.content()))\n-        } else {\n-            Ok(Vc::cell(\"No source\".into()))\n-        }\n+    fn details(&self) -> Vc<RcStr> {\n+        content_to_details(self.0.content())\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "a7390e56ccbe0b2f68db5b8fb33cc82ca5bc5036",
            "filename": "turbopack/crates/turbopack-core/src/module.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -2,7 +2,7 @@ use turbo_rcstr::RcStr;\n use turbo_tasks::{ResolvedVc, TaskInput, ValueToString, Vc};\n use turbo_tasks_fs::glob::Glob;\n \n-use crate::{ident::AssetIdent, reference::ModuleReferences, source::OptionSource};\n+use crate::{asset::Asset, ident::AssetIdent, reference::ModuleReferences, source::OptionSource};\n \n #[derive(Clone, Copy, Debug, TaskInput, Hash)]\n #[turbo_tasks::value(shared)]\n@@ -14,7 +14,7 @@ pub enum StyleType {\n /// A module. This usually represents parsed source code, which has references\n /// to other modules.\n #[turbo_tasks::value_trait]\n-pub trait Module {\n+pub trait Module: Asset {\n     /// The identifier of the [Module]. It's expected to be unique and capture\n     /// all properties of the [Module].\n     #[turbo_tasks::function]\n@@ -55,7 +55,7 @@ pub trait Module {\n }\n \n #[turbo_tasks::value_trait]\n-pub trait StyleModule: Module {\n+pub trait StyleModule: Module + Asset {\n     /// The style type of the module.\n     #[turbo_tasks::function]\n     fn style_type(&self) -> Vc<StyleType>;"
        },
        {
            "sha": "ba1096f4c596878be97b2f4a6a119d8880426bed",
            "filename": "turbopack/crates/turbopack-core/src/node_addon_module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fnode_addon_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fnode_addon_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fnode_addon_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -7,6 +7,7 @@ use turbo_tasks::{FxIndexSet, ResolvedVc, TryJoinIterExt, Vc};\n use turbo_tasks_fs::{FileSystemEntryType, FileSystemPath};\n \n use crate::{\n+    asset::{Asset, AssetContent},\n     file_source::FileSource,\n     ident::AssetIdent,\n     module::Module,\n@@ -101,6 +102,14 @@ impl Module for NodeAddonModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for NodeAddonModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::function]\n async fn dir_references(package_dir: FileSystemPath) -> Result<Vc<ModuleReferences>> {\n     let matches = read_matches("
        },
        {
            "sha": "dc6fd947b4e9637aa28c71dc36581c3e2177f31d",
            "filename": "turbopack/crates/turbopack-core/src/raw_module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fraw_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fraw_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fraw_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -1,6 +1,7 @@\n use turbo_tasks::{ResolvedVc, Vc};\n \n use crate::{\n+    asset::{Asset, AssetContent},\n     ident::AssetIdent,\n     module::Module,\n     source::{OptionSource, Source},\n@@ -26,6 +27,14 @@ impl Module for RawModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for RawModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl RawModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "13a676b529c47c8418b9dcdcc05619f9fb16728b",
            "filename": "turbopack/crates/turbopack-core/src/rebase.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 11,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Frebase.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Frebase.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Frebase.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -1,7 +1,7 @@\n use std::hash::Hash;\n \n-use anyhow::{Result, bail};\n-use turbo_tasks::{ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n+use anyhow::Result;\n+use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n use crate::{\n@@ -74,14 +74,7 @@ impl OutputAsset for RebasedAsset {\n #[turbo_tasks::value_impl]\n impl Asset for RebasedAsset {\n     #[turbo_tasks::function]\n-    async fn content(&self) -> Result<Vc<AssetContent>> {\n-        if let Some(source) = *self.module.source().await? {\n-            Ok(source.content())\n-        } else {\n-            bail!(\n-                \"Module {} has no source\",\n-                self.module.ident().to_string().await?\n-            )\n-        }\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.module.content()\n     }\n }"
        },
        {
            "sha": "ec8e092fe8343b346b8914edc9804e5662c578d4",
            "filename": "turbopack/crates/turbopack-core/src/traced_asset.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 11,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftraced_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftraced_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftraced_asset.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -1,5 +1,5 @@\n-use anyhow::{Result, bail};\n-use turbo_tasks::{ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n+use anyhow::Result;\n+use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n use turbo_tasks_fs::FileSystemPath;\n \n use crate::{\n@@ -54,14 +54,7 @@ impl OutputAsset for TracedAsset {\n #[turbo_tasks::value_impl]\n impl Asset for TracedAsset {\n     #[turbo_tasks::function]\n-    async fn content(&self) -> Result<Vc<AssetContent>> {\n-        if let Some(source) = *self.module.source().await? {\n-            Ok(source.content())\n-        } else {\n-            bail!(\n-                \"Module {} has no source\",\n-                self.module.ident().to_string().await?,\n-            )\n-        }\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.module.content()\n     }\n }"
        },
        {
            "sha": "a13d89aa7b36c1fff77f9600a5bc0bb73b41156d",
            "filename": "turbopack/crates/turbopack-css/src/asset.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fasset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fasset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fasset.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{IntoTraitRef, ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, MinifyType},\n     context::AssetContext,\n     environment::Environment,\n@@ -165,6 +166,14 @@ impl StyleModule for CssModuleAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for CssModuleAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for CssModuleAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "2106f81b87a235b6de6eb695366bada073673d73",
            "filename": "turbopack/crates/turbopack-css/src/chunk/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -437,7 +437,7 @@ impl GenerateSourceMap for CssChunk {\n \n // TODO: remove\n #[turbo_tasks::value_trait]\n-pub trait CssChunkPlaceable: ChunkableModule + Module {}\n+pub trait CssChunkPlaceable: ChunkableModule + Module + Asset {}\n \n #[derive(Clone, Debug)]\n #[turbo_tasks::value(shared)]"
        },
        {
            "sha": "a3552ca2f5a86cbbd26935a3d7bfa409d348e6a6",
            "filename": "turbopack/crates/turbopack-css/src/embed.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fembed.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fembed.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fembed.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -1,8 +1,8 @@\n use turbo_tasks::Vc;\n-use turbopack_core::{chunk::ChunkingContext, module::Module, output::OutputAsset};\n+use turbopack_core::{asset::Asset, chunk::ChunkingContext, module::Module, output::OutputAsset};\n \n #[turbo_tasks::value_trait]\n-pub trait CssEmbed: Module {\n+pub trait CssEmbed: Module + Asset {\n     #[turbo_tasks::function]\n     fn embedded_asset(\n         self: Vc<Self>,"
        },
        {
            "sha": "1918f45763120fe724731f554aefc00b3bf7b18c",
            "filename": "turbopack/crates/turbopack-css/src/module_asset.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fmodule_asset.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -8,6 +8,7 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, IntoTraitRef, ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{FileSystemPath, rope::Rope};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext, ModuleChunkItemIdExt},\n     context::{AssetContext, ProcessResult},\n     ident::AssetIdent,\n@@ -112,6 +113,14 @@ impl Module for ModuleCssAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for ModuleCssAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n /// A CSS class that is exported from a CSS module.\n ///\n /// See [`ModuleCssClasses`] for more information."
        },
        {
            "sha": "d32a0551a236f973b0c7576ef1bcb86462364cda",
            "filename": "turbopack/crates/turbopack-ecmascript/src/async_chunk/module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkableModule, ChunkingContext, availability_info::AvailabilityInfo},\n     ident::AssetIdent,\n     module::Module,\n@@ -75,6 +76,14 @@ impl Module for AsyncLoaderModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for AsyncLoaderModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        panic!(\"content() should not be called\");\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for AsyncLoaderModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "d9f810b120af5761bc73cd6469cda1539e6bb292",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/placeable.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -24,7 +24,7 @@ use crate::references::{\n };\n \n #[turbo_tasks::value_trait]\n-pub trait EcmascriptChunkPlaceable: ChunkableModule + Module {\n+pub trait EcmascriptChunkPlaceable: ChunkableModule + Module + Asset {\n     #[turbo_tasks::function]\n     fn get_exports(self: Vc<Self>) -> Vc<EcmascriptExports>;\n     #[turbo_tasks::function]"
        },
        {
            "sha": "106f45fc3c56d321695f251ed98f2aa9f04002d1",
            "filename": "turbopack/crates/turbopack-ecmascript/src/inlined_bytes_module.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Finlined_bytes_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -5,7 +5,7 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{FileContent, glob::Glob, rope::RopeBuilder};\n use turbopack_core::{\n-    asset::Asset,\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     ident::AssetIdent,\n     module::Module,\n@@ -59,6 +59,14 @@ impl Module for InlinedBytesJsModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for InlinedBytesJsModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for InlinedBytesJsModule {\n     #[turbo_tasks::function]\n@@ -120,7 +128,7 @@ impl ChunkItem for InlinedBytesJsChunkItem {\n impl EcmascriptChunkItem for InlinedBytesJsChunkItem {\n     #[turbo_tasks::function]\n     async fn content(&self) -> Result<Vc<EcmascriptChunkItemContent>> {\n-        let content = self.module.await?.source.content().file_content().await?;\n+        let content = self.module.content().file_content().await?;\n         match &*content {\n             FileContent::Content(data) => {\n                 let mut inner_code = RopeBuilder::default();"
        },
        {
            "sha": "0d3e5c79f42777473ff4d411725baaa7e7e7947d",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -90,6 +90,7 @@ use turbo_tasks::{\n };\n use turbo_tasks_fs::{FileJsonContent, FileSystemPath, glob::Glob, rope::Rope};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkItem, ChunkType, ChunkableModule, ChunkingContext, EvaluatableAsset,\n         MergeableModule, MergeableModuleExposure, MergeableModules, MergeableModulesExposed,\n@@ -402,7 +403,7 @@ pub trait EcmascriptParsable {\n }\n \n #[turbo_tasks::value_trait]\n-pub trait EcmascriptAnalyzable: Module {\n+pub trait EcmascriptAnalyzable: Module + Asset {\n     #[turbo_tasks::function]\n     fn analyze(self: Vc<Self>) -> Vc<AnalyzeEcmascriptModuleResult>;\n \n@@ -773,6 +774,14 @@ impl Module for EcmascriptModuleAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for EcmascriptModuleAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for EcmascriptModuleAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "06f3276366ca254db7fff7ee37fa0a7fc5320368",
            "filename": "turbopack/crates/turbopack-ecmascript/src/manifest/chunk_asset.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{\n         ChunkableModule, ChunkingContext, ChunkingContextExt, availability_info::AvailabilityInfo,\n     },\n@@ -161,6 +162,14 @@ impl Module for ManifestAsyncModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for ManifestAsyncModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        panic!(\"content() should not be called\");\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for ManifestAsyncModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "31b8729b9342111b80eff6ceb212c3ce195f0dcb",
            "filename": "turbopack/crates/turbopack-ecmascript/src/merged_module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -1,6 +1,7 @@\n use anyhow::{Context, Result};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkItem, ChunkType, ChunkableModule, ChunkingContext,\n         MergeableModuleExposure, MergeableModules, MergeableModulesExposed,\n@@ -59,6 +60,14 @@ impl MergedEcmascriptModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for MergedEcmascriptModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        panic!(\"content() should not be called\");\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl Module for MergedEcmascriptModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "72b2199fe7c1161592becef1dcabff10d3204eb7",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/external_module.rs",
            "status": "modified",
            "additions": 20,
            "deletions": 2,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -4,8 +4,9 @@ use anyhow::Result;\n use serde::{Deserialize, Serialize};\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{NonLocalValue, ResolvedVc, TaskInput, TryJoinIterExt, Vc, trace::TraceRawVcs};\n-use turbo_tasks_fs::{FileSystem, VirtualFileSystem, glob::Glob, rope::RopeBuilder};\n+use turbo_tasks_fs::{FileContent, FileSystem, VirtualFileSystem, glob::Glob, rope::RopeBuilder};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{AsyncModuleInfo, ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     ident::{AssetIdent, Layer},\n     module::Module,\n@@ -312,6 +313,15 @@ impl Module for CachedExternalModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for CachedExternalModule {\n+    #[turbo_tasks::function]\n+    fn content(self: Vc<Self>) -> Vc<AssetContent> {\n+        // should be `NotFound` as this function gets called to detect source changes\n+        AssetContent::file(FileContent::NotFound.cell())\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for CachedExternalModule {\n     #[turbo_tasks::function]\n@@ -435,6 +445,14 @@ impl ModuleWithoutSelfAsync {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for ModuleWithoutSelfAsync {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.module.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl Module for ModuleWithoutSelfAsync {\n     #[turbo_tasks::function]\n@@ -444,7 +462,7 @@ impl Module for ModuleWithoutSelfAsync {\n \n     #[turbo_tasks::function]\n     fn source(&self) -> Vc<turbopack_core::source::OptionSource> {\n-        self.module.source()\n+        Vc::cell(None)\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "3295e45cc49b3851f8f7a50d8b964d2c664c7c6c",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/require_context.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -21,6 +21,7 @@ use turbo_tasks::{\n };\n use turbo_tasks_fs::{DirectoryContent, DirectoryEntry, FileSystemPath, glob::Glob};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{\n         ChunkItem, ChunkType, ChunkableModule, ChunkableModuleReference, ChunkingContext,\n         MinifyType, ModuleChunkItemIdExt,\n@@ -435,6 +436,14 @@ impl Module for RequireContextAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for RequireContextAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        unimplemented!()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for RequireContextAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "7fa5eb6b9a587ca54eb6cdd42d62f71cfc6de6fd",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/facade/module.rs",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -2,8 +2,9 @@ use std::collections::BTreeMap;\n \n use anyhow::{Result, bail};\n use turbo_tasks::{ResolvedVc, Vc};\n-use turbo_tasks_fs::glob::Glob;\n+use turbo_tasks_fs::{File, FileContent, glob::Glob};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkableModule, ChunkingContext, EvaluatableAsset, MergeableModule,\n         MergeableModules, MergeableModulesExposed,\n@@ -197,6 +198,16 @@ impl Module for EcmascriptModuleFacadeModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for EcmascriptModuleFacadeModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        let f = File::from(\"\");\n+\n+        AssetContent::file(FileContent::Content(f).cell())\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl EcmascriptAnalyzable for EcmascriptModuleFacadeModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "6f687d24f95182289fbce277363efb778f1022de",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/locals/module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fmodule.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -4,6 +4,7 @@ use anyhow::{Result, bail};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkableModule, ChunkingContext, MergeableModule, MergeableModules,\n         MergeableModulesExposed,\n@@ -78,6 +79,14 @@ impl Module for EcmascriptModuleLocalsModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for EcmascriptModuleLocalsModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.module.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl EcmascriptAnalyzable for EcmascriptModuleLocalsModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "b0ad370ff2ea06ef900d13195ad1675b3ade4247",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/asset.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{AsyncModuleInfo, ChunkableModule, ChunkingContext, EvaluatableAsset},\n     context::AssetContext,\n     ident::AssetIdent,\n@@ -365,6 +366,14 @@ impl Module for EcmascriptModulePartAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for EcmascriptModulePartAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.full_module.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl EcmascriptChunkPlaceable for EcmascriptModulePartAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "5c6b2d9a9be6f9d60afc1c1e3841d2867bd23fa2",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/side_effect_module.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 1,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -1,8 +1,9 @@\n use anyhow::Result;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n-use turbo_tasks_fs::glob::Glob;\n+use turbo_tasks_fs::{FileContent, glob::Glob};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkableModule, ChunkingContext, EvaluatableAsset},\n     ident::AssetIdent,\n     module::Module,\n@@ -118,6 +119,21 @@ impl Module for SideEffectsModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for SideEffectsModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        AssetContent::File(\n+            FileContent::Content(\n+                \"// This is a proxy module for reexportings a module with additional side effects.\"\n+                    .into(),\n+            )\n+            .resolved_cell(),\n+        )\n+        .cell()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl EcmascriptChunkPlaceable for SideEffectsModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "8e6314f96afd2a7ed70c4bec83e7460676ff34cb",
            "filename": "turbopack/crates/turbopack-ecmascript/src/typescript/mod.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -4,7 +4,7 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::DirectoryContent;\n use turbopack_core::{\n-    asset::Asset,\n+    asset::{Asset, AssetContent},\n     ident::AssetIdent,\n     module::Module,\n     raw_module::RawModule,\n@@ -180,6 +180,14 @@ impl Module for TsConfigModuleAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for TsConfigModuleAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value]\n #[derive(Hash, Debug)]\n pub struct CompilerReference {"
        },
        {
            "sha": "739b0cd0933e2b24c7f0313fe76723a5ef7658ee",
            "filename": "turbopack/crates/turbopack-ecmascript/src/webpack/mod.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use swc_core::ecma::ast::Lit;\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     file_source::FileSource,\n     ident::AssetIdent,\n     module::Module,\n@@ -65,6 +66,14 @@ impl Module for WebpackModuleAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for WebpackModuleAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value(shared)]\n pub struct WebpackChunkAssetReference {\n     #[turbo_tasks(trace_ignore)]"
        },
        {
            "sha": "09dfb6110c9d73b7328a59fdd9154c28d4e394ec",
            "filename": "turbopack/crates/turbopack-ecmascript/src/worker_chunk/module.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{\n         ChunkGroupType, ChunkableModule, ChunkableModuleReference, ChunkingContext, ChunkingType,\n         ChunkingTypeOption,\n@@ -66,6 +67,14 @@ impl Module for WorkerLoaderModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for WorkerLoaderModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        panic!(\"content() should not be called\");\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for WorkerLoaderModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "e77a9f7bbe3bc77e66b2f541048c294166495e23",
            "filename": "turbopack/crates/turbopack-json/src/lib.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-json%2Fsrc%2Flib.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -16,7 +16,7 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{FileContent, FileJsonContent, glob::Glob};\n use turbopack_core::{\n-    asset::Asset,\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     code_builder::CodeBuilder,\n     ident::AssetIdent,\n@@ -67,6 +67,14 @@ impl Module for JsonModuleAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for JsonModuleAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for JsonModuleAsset {\n     #[turbo_tasks::function]\n@@ -130,7 +138,7 @@ impl EcmascriptChunkItem for JsonChunkItem {\n     async fn content(&self) -> Result<Vc<EcmascriptChunkItemContent>> {\n         // We parse to JSON and then stringify again to ensure that the\n         // JSON is valid.\n-        let content = self.module.await?.source.content().file_content();\n+        let content = self.module.content().file_content();\n         let data = content.parse_json().await?;\n         match &*data {\n             FileJsonContent::Content(data) => {"
        },
        {
            "sha": "975318dc6cd2807f1166b0784ed12fbf30131c35",
            "filename": "turbopack/crates/turbopack-static/src/css.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fcss.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -2,7 +2,12 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n-    chunk::ChunkingContext, ident::AssetIdent, module::Module, output::OutputAsset, source::Source,\n+    asset::{Asset, AssetContent},\n+    chunk::ChunkingContext,\n+    ident::AssetIdent,\n+    module::Module,\n+    output::OutputAsset,\n+    source::Source,\n };\n use turbopack_css::embed::CssEmbed;\n \n@@ -56,6 +61,14 @@ impl Module for StaticUrlCssModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for StaticUrlCssModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl CssEmbed for StaticUrlCssModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "5898740e7b410120b846eb4e9866b313f13c4a20",
            "filename": "turbopack/crates/turbopack-static/src/ecma.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-static%2Fsrc%2Fecma.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     ident::AssetIdent,\n     module::Module,\n@@ -72,6 +73,14 @@ impl Module for StaticUrlJsModule {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for StaticUrlJsModule {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for StaticUrlJsModule {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "3db28a19882fb6ea45e478ceaf31715915694cde",
            "filename": "turbopack/crates/turbopack-wasm/src/module_asset.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -3,6 +3,7 @@ use turbo_rcstr::rcstr;\n use turbo_tasks::{IntoTraitRef, ResolvedVc, Vc, fxindexmap};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{\n         AsyncModuleInfo, ChunkItem, ChunkType, ChunkableModule, ChunkingContext,\n         chunk_group::references_to_output_assets,\n@@ -145,6 +146,14 @@ impl Module for WebAssemblyModuleAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for WebAssemblyModuleAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for WebAssemblyModuleAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "03661228b60b6adf96b38c12381777e8c0ea2f54",
            "filename": "turbopack/crates/turbopack-wasm/src/raw.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fraw.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a49cd429556659dfca722879bac89f345db0722f/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fraw.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fraw.rs?ref=a49cd429556659dfca722879bac89f345db0722f",
            "patch": "@@ -2,6 +2,7 @@ use anyhow::{Result, bail};\n use turbo_rcstr::rcstr;\n use turbo_tasks::{IntoTraitRef, ResolvedVc, Vc};\n use turbopack_core::{\n+    asset::{Asset, AssetContent},\n     chunk::{ChunkItem, ChunkType, ChunkableModule, ChunkingContext},\n     context::AssetContext,\n     ident::AssetIdent,\n@@ -65,6 +66,14 @@ impl Module for RawWebAssemblyModuleAsset {\n     }\n }\n \n+#[turbo_tasks::value_impl]\n+impl Asset for RawWebAssemblyModuleAsset {\n+    #[turbo_tasks::function]\n+    fn content(&self) -> Vc<AssetContent> {\n+        self.source.content()\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl ChunkableModule for RawWebAssemblyModuleAsset {\n     #[turbo_tasks::function]"
        }
    ],
    "stats": {
        "total": 412,
        "additions": 330,
        "deletions": 82
    }
}