{
    "author": "sokra",
    "message": "Turbopack: Persisting happens in foreground tasks (#83020)\n\n### What?\n\nBackground tasks will only run when idle, but persisting should also happen when active.",
    "sha": "5146e4c5024ef3a0b677bd9f48bbf64d9fd5e455",
    "files": [
        {
            "sha": "c5d35ffa2cd80867ca7a50740e5c4d6f95134925",
            "filename": "turbopack/crates/turbo-tasks-backend/src/backend/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/5146e4c5024ef3a0b677bd9f48bbf64d9fd5e455/turbopack%2Fcrates%2Fturbo-tasks-backend%2Fsrc%2Fbackend%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/5146e4c5024ef3a0b677bd9f48bbf64d9fd5e455/turbopack%2Fcrates%2Fturbo-tasks-backend%2Fsrc%2Fbackend%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-backend%2Fsrc%2Fbackend%2Fmod.rs?ref=5146e4c5024ef3a0b677bd9f48bbf64d9fd5e455",
            "patch": "@@ -1215,7 +1215,7 @@ impl<B: BackingStorage> TurboTasksBackendInner<B> {\n \n         if self.should_persist() {\n             // Schedule the snapshot job\n-            turbo_tasks.schedule_backend_background_job(TurboTasksBackendJob::InitialSnapshot);\n+            turbo_tasks.schedule_backend_foreground_job(TurboTasksBackendJob::InitialSnapshot);\n         }\n     }\n \n@@ -2215,7 +2215,7 @@ impl<B: BackingStorage> TurboTasksBackendInner<B> {\n                                 Ordering::Relaxed,\n                             );\n \n-                            turbo_tasks.schedule_backend_background_job(\n+                            turbo_tasks.schedule_backend_foreground_job(\n                                 TurboTasksBackendJob::FollowUpSnapshot,\n                             );\n                             return;"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}