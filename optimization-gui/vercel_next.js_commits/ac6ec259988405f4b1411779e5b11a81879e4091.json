{
    "author": "bgw",
    "message": "Turbopack: Use workaround for rustc miscompilation bug on macos intel (#81950)\n\nUses https://github.com/hyperium/hyper/pull/3908 cherry-picked on top of\nhyper v1.6.0 to work around\nhttps://github.com/hyperium/hyper/issues/3902 and\nhttps://github.com/rust-lang/rust/issues/140686\n\n- Git Branch:\nhttps://github.com/bgw/hyper-rs/commits/v1.6.0-with-macos-intel-miscompilation-workaround/\n- Cherry-picked commit:\nhttps://github.com/bgw/hyper-rs/commit/ab3544930722e6c270c16d3239dbb1d58f713393\n\nFixes #81697\n\nThe proper fix is to update the rustc toolchain, but since we use\nnightly toolchains, this is too risky for a minor patch release. So this\napplies the workaround instead.\n\n## Test Plan\n\nForce using x86-64 under Rosetta by downloading a \"standalone\" version\nof nodejs and adding it to the front of the `PATH` with:\n\n```\nexport PATH=/Users/bgw/Downloads/node-v22.17.1-darwin-x64/bin/:\"$PATH\"\n```\n\nUse `create-next-app` to create a new app. This fetching Geist by\ndefault.\n\nRun `pnpm dev`, see the 404 errors.\n\nModify the `package.json` to use this preview version:\n\n```\n    \"next\": \"https://vercel-packages.vercel.app/next/commits/16196a3d2d7df65222727619e8db993336cf7aff/next\"\n```\n\nRun `pnpm i && pnpm dev`, see that the 404s are solved!",
    "sha": "ac6ec259988405f4b1411779e5b11a81879e4091",
    "files": [
        {
            "sha": "2f75a320d6b09b26e1011c18d1e081e6cb053fd1",
            "filename": "Cargo.lock",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/ac6ec259988405f4b1411779e5b11a81879e4091/Cargo.lock",
            "raw_url": "https://github.com/vercel/next.js/raw/ac6ec259988405f4b1411779e5b11a81879e4091/Cargo.lock",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.lock?ref=ac6ec259988405f4b1411779e5b11a81879e4091",
            "patch": "@@ -2809,8 +2809,7 @@ dependencies = [\n [[package]]\n name = \"hyper\"\n version = \"1.6.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"cc2b571658e38e0c01b1fdca3bbbe93c00d3d71693ff2770043f8c29bc7d6f80\"\n+source = \"git+https://github.com/bgw/hyper-rs.git?branch=v1.6.0-with-macos-intel-miscompilation-workaround#ab3544930722e6c270c16d3239dbb1d58f713393\"\n dependencies = [\n  \"bytes\",\n  \"futures-channel\","
        },
        {
            "sha": "e50d88e1e3140d7ccf6b13fb463cdff3211a8958",
            "filename": "Cargo.toml",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/ac6ec259988405f4b1411779e5b11a81879e4091/Cargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/ac6ec259988405f4b1411779e5b11a81879e4091/Cargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.toml?ref=ac6ec259988405f4b1411779e5b11a81879e4091",
            "patch": "@@ -438,6 +438,7 @@ vergen-gitcl = { version = \"1.0.8\", features = [\n webbrowser = \"0.8.7\"\n \n [patch.crates-io]\n-mdxjs = { git = \"https://github.com/kdy1/mdxjs-rs.git\", branch = \"swc-core-30\" }\n+hyper = { git = \"https://github.com/bgw/hyper-rs.git\", branch = \"v1.6.0-with-macos-intel-miscompilation-workaround\" }\n lightningcss = { git = \"https://github.com/parcel-bundler/lightningcss.git\", branch = \"mischnic/bump-browserslist\" }\n+mdxjs = { git = \"https://github.com/kdy1/mdxjs-rs.git\", branch = \"swc-core-30\" }\n parcel_selectors = { git = \"https://github.com/parcel-bundler/lightningcss.git\", branch = \"mischnic/bump-browserslist\" }"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}