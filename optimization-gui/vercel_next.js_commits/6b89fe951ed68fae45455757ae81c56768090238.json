{
    "author": "sokra",
    "message": "Turbopack: use prototype for turbopack context for better runtime performance (#81547)\n\n### What?\n\n* use prototype for turbopack context for better runtime performance\n* remove destructuring when unneeded\n* ensure all calls use the correct context\n* create static module object at one location\n\n### Why?\n\nImprove performance by reducing allocations in the hot path of module evaluation:\n\nBased on our module-cost benchmark this is about a 15% runtime improvement\n\n* CommonJS Execution Duration: 25.60ms → 21.85ms (14.6% improvement)\n* ESM Execution Duration: 53.34ms → 44.82ms (16.0% improvement)\n\nWhich addressed most of the known gap with webpack.\n\nPart of PACK-5057",
    "sha": "6b89fe951ed68fae45455757ae81c56768090238",
    "files": [
        {
            "sha": "b19e16e48b4a6fdfd4540f10cdf0b0a5359a6bbf",
            "filename": "crates/next-core/src/next_app/app_page_entry.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_app%2Fapp_page_entry.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -98,8 +98,8 @@ pub async fn get_app_page_entry(\n         fxindexmap! {\n             \"tree\" => loader_tree_code,\n             \"pages\" => StringifyJs(&pages).to_string().into(),\n-            \"__next_app_require__\" => TURBOPACK_REQUIRE.full.into(),\n-            \"__next_app_load_chunk__\" => TURBOPACK_LOAD.full.into(),\n+            \"__next_app_require__\" => TURBOPACK_REQUIRE.bound().into(),\n+            \"__next_app_load_chunk__\" => TURBOPACK_LOAD.bound().into(),\n         },\n         fxindexmap! {},\n     )"
        },
        {
            "sha": "0c95504c282b578b9763abc077361e537c9d9789",
            "filename": "packages/next/src/client/next-dev-turbopack.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/packages%2Fnext%2Fsrc%2Fclient%2Fnext-dev-turbopack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/packages%2Fnext%2Fsrc%2Fclient%2Fnext-dev-turbopack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fnext-dev-turbopack.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -31,7 +31,9 @@ initialize({\n       page: string,\n       chunksData: any\n     ) => {\n-      const chunkPromises = chunksData.map(__turbopack_load__)\n+      const chunkPromises = chunksData.map((c: unknown) =>\n+        __turbopack_load__(c)\n+      )\n \n       Promise.all(chunkPromises).catch((err) =>\n         console.error('failed to load chunks for page ' + page, err)"
        },
        {
            "sha": "8d32cde976f85311bfa3bea45e307d603f99065f",
            "filename": "packages/next/src/client/next-turbopack.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/packages%2Fnext%2Fsrc%2Fclient%2Fnext-turbopack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/packages%2Fnext%2Fsrc%2Fclient%2Fnext-turbopack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fnext-turbopack.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -29,7 +29,9 @@ initialize({})\n       page: string,\n       chunksData: any\n     ) => {\n-      const chunkPromises = chunksData.map(__turbopack_load__)\n+      const chunkPromises = chunksData.map((c: unknown) =>\n+        __turbopack_load__(c)\n+      )\n \n       Promise.all(chunkPromises).catch((err) =>\n         console.error('failed to load chunks for page ' + page, err)"
        },
        {
            "sha": "ac1a6abc7775d2ac63dd4bcb91df0a7fde432e56",
            "filename": "test/development/acceptance-app/error-recovery.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -286,6 +286,10 @@ describe('Error recovery app', () => {\n \n     if (isTurbopack) {\n       // TODO(veil): Location of Page should be app/page.js\n+      // TODO(sokra): The location is wrong because of an bug with HMR and source maps.\n+      // When the code `index.js` changes, this also moves the locations of `app/page.js` in the bundled file.\n+      // So the SourceMap is updated to reflect that. But the browser still has the old bundled file loaded.\n+      // So we look up locations from the old bundle in the new source maps, which leads to mismatched locations.\n       await expect(browser).toDisplayCollapsedRedbox(`\n        {\n          \"description\": \"oops\",\n@@ -298,7 +302,7 @@ describe('Error recovery app', () => {\n            \"Index.useCallback[increment] index.js (7:11)\",\n            \"button <anonymous>\",\n            \"Index index.js (12:7)\",\n-           \"Page index.js (10:6)\",\n+           \"Page index.js (8:16)\",\n          ],\n        }\n       `)"
        },
        {
            "sha": "c627e15a3f4beb15843a4c200d6865c3497132d0",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/browser/runtime/base/build-base.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 72,
            "changes": 91,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fbuild-base.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fbuild-base.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fbuild-base.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -1,9 +1,8 @@\n /// <reference path=\"./runtime-base.ts\" />\n /// <reference path=\"./dummy.ts\" />\n \n-declare var augmentContext: (context: unknown) => unknown\n-\n const moduleCache: ModuleCache<Module> = {}\n+contextPrototype.c = moduleCache\n \n /**\n  * Gets or instantiates a runtime module.\n@@ -53,83 +52,17 @@ function instantiateModule(\n     // This can happen if modules incorrectly handle HMR disposes/updates,\n     // e.g. when they keep a `setTimeout` around which still executes old code\n     // and contains e.g. a `require(\"something\")` call.\n-    let instantiationReason\n-    switch (sourceType) {\n-      case SourceType.Runtime:\n-        instantiationReason = `as a runtime entry of chunk ${sourceData}`\n-        break\n-      case SourceType.Parent:\n-        instantiationReason = `because it was required from module ${sourceData}`\n-        break\n-      case SourceType.Update:\n-        instantiationReason = 'because of an HMR update'\n-        break\n-      default:\n-        invariant(\n-          sourceType,\n-          (sourceType) => `Unknown source type: ${sourceType}`\n-        )\n-    }\n-    throw new Error(\n-      `Module ${id} was instantiated ${instantiationReason}, but the module factory is not available. It might have been deleted in an HMR update.`\n-    )\n+    factoryNotAvailable(id, sourceType, sourceData)\n   }\n \n-  switch (sourceType) {\n-    case SourceType.Runtime:\n-      runtimeModules.add(id)\n-      break\n-    case SourceType.Parent:\n-      // No need to add this module as a child of the parent module here, this\n-      // has already been taken care of in `getOrInstantiateModuleFromParent`.\n-      break\n-    case SourceType.Update:\n-      throw new Error('Unexpected')\n-    default:\n-      invariant(\n-        sourceType,\n-        (sourceType) => `Unknown source type: ${sourceType}`\n-      )\n-  }\n-\n-  const module: Module = {\n-    exports: {},\n-    error: undefined,\n-    loaded: false,\n-    id,\n-    namespaceObject: undefined,\n-  }\n+  const module: Module = createModuleObject(id)\n \n   moduleCache[id] = module\n \n   // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\n   try {\n-    const r = commonJsRequire.bind(null, module)\n-    moduleFactory(\n-      augmentContext({\n-        a: asyncModule.bind(null, module),\n-        e: module.exports,\n-        r: commonJsRequire.bind(null, module),\n-        t: runtimeRequire,\n-        f: moduleContext,\n-        i: esmImport.bind(null, module),\n-        s: esmExport.bind(null, module, module.exports, moduleCache),\n-        j: dynamicExport.bind(null, module, module.exports, moduleCache),\n-        v: exportValue.bind(null, module, moduleCache),\n-        n: exportNamespace.bind(null, module, moduleCache),\n-        m: module,\n-        c: moduleCache,\n-        M: moduleFactories,\n-        l: loadChunk.bind(null, SourceType.Parent, id),\n-        L: loadChunkByUrl.bind(null, SourceType.Parent, id),\n-        w: loadWebAssembly.bind(null, SourceType.Parent, id),\n-        u: loadWebAssemblyModule.bind(null, SourceType.Parent, id),\n-        P: resolveAbsolutePath,\n-        U: relativeURL,\n-        R: createResolvePathFromModule(r),\n-        b: getWorkerBlobURL,\n-      })\n-    )\n+    const context = new (Context as any as ContextConstructor<Module>)(module)\n+    moduleFactory(context)\n   } catch (error) {\n     module.error = error as any\n     throw error\n@@ -143,3 +76,17 @@ function instantiateModule(\n \n   return module\n }\n+\n+// eslint-disable-next-line @typescript-eslint/no-unused-vars\n+function registerChunk([\n+  chunkScript,\n+  chunkModules,\n+  runtimeParams,\n+]: ChunkRegistration) {\n+  const chunkPath = getPathFromScript(chunkScript)\n+  for (const [moduleId, moduleFactory] of Object.entries(chunkModules)) {\n+    registerCompressedModuleFactory(moduleId, moduleFactory)\n+  }\n+\n+  return BACKEND.registerChunk(chunkPath, runtimeParams)\n+}"
        },
        {
            "sha": "1d3cf61e518e20d103e5503cb3815ca4c351557a",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/browser/runtime/base/dev-base.ts",
            "status": "modified",
            "additions": 114,
            "deletions": 71,
            "changes": 185,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdev-base.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdev-base.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdev-base.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -2,6 +2,12 @@\n /// <reference path=\"./dev-protocol.d.ts\" />\n /// <reference path=\"./dev-extensions.ts\" />\n \n+interface TurbopackDevContext extends TurbopackBrowserBaseContext<HotModule> {\n+  k: RefreshContext\n+}\n+\n+const devContextPrototype = Context.prototype as TurbopackDevContext\n+\n /**\n  * This file contains runtime types and functions that are shared between all\n  * Turbopack *development* ECMAScript runtimes.\n@@ -13,6 +19,7 @@\n /* eslint-disable @typescript-eslint/no-unused-vars */\n \n const devModuleCache: ModuleCache<HotModule> = Object.create(null)\n+devContextPrototype.c = devModuleCache\n \n // This file must not use `import` and `export` statements. Otherwise, it\n // becomes impossible to augment interfaces declared in `<reference>`d files\n@@ -33,16 +40,9 @@ type RefreshContext = {\n \n type RefreshHelpers = RefreshRuntimeGlobals['$RefreshHelpers$']\n \n-interface TurbopackDevBaseContext extends TurbopackBaseContext<Module> {\n-  k: RefreshContext\n-  R: ResolvePathFromModule\n-}\n-\n-interface TurbopackDevContext extends TurbopackDevBaseContext {}\n-\n type ModuleFactory = (\n   this: Module['exports'],\n-  context: TurbopackDevBaseContext\n+  context: TurbopackDevContext\n ) => unknown\n \n interface DevRuntimeBackend {\n@@ -62,6 +62,38 @@ class UpdateApplyError extends Error {\n   }\n }\n \n+/**\n+ * Module IDs that are instantiated as part of the runtime of a chunk.\n+ */\n+const runtimeModules: Set<ModuleId> = new Set()\n+\n+/**\n+ * Map from module ID to the chunks that contain this module.\n+ *\n+ * In HMR, we need to keep track of which modules are contained in which so\n+ * chunks. This is so we don't eagerly dispose of a module when it is removed\n+ * from chunk A, but still exists in chunk B.\n+ */\n+const moduleChunksMap: Map<ModuleId, Set<ChunkPath>> = new Map()\n+/**\n+ * Map from a chunk path to all modules it contains.\n+ */\n+const chunkModulesMap: Map<ChunkPath, Set<ModuleId>> = new Map()\n+/**\n+ * Chunk lists that contain a runtime. When these chunk lists receive an update\n+ * that can't be reconciled with the current state of the page, we need to\n+ * reload the runtime entirely.\n+ */\n+const runtimeChunkLists: Set<ChunkListPath> = new Set()\n+/**\n+ * Map from a chunk list to the chunk paths it contains.\n+ */\n+const chunkListChunksMap: Map<ChunkListPath, Set<ChunkPath>> = new Map()\n+/**\n+ * Map from a chunk path to the chunk lists it belongs to.\n+ */\n+const chunkChunkListsMap: Map<ChunkPath, Set<ChunkListPath>> = new Map()\n+\n /**\n  * Maps module IDs to persisted data between executions of their hot module\n  * implementation (`hot.data`).\n@@ -126,6 +158,20 @@ const getOrInstantiateModuleFromParent: GetOrInstantiateModuleFromParent<\n   return instantiateModule(id, SourceType.Parent, sourceModule.id)\n }\n \n+function DevContext(\n+  this: TurbopackDevContext,\n+  module: HotModule,\n+  refresh: RefreshContext\n+) {\n+  Context.call(this, module)\n+  this.k = refresh\n+}\n+DevContext.prototype = Context.prototype\n+\n+type DevContextConstructor = {\n+  new (module: HotModule, refresh: RefreshContext): TurbopackDevContext\n+}\n+\n function instantiateModule(\n   moduleId: ModuleId,\n   sourceType: SourceType,\n@@ -139,26 +185,7 @@ function instantiateModule(\n     // This can happen if modules incorrectly handle HMR disposes/updates,\n     // e.g. when they keep a `setTimeout` around which still executes old code\n     // and contains e.g. a `require(\"something\")` call.\n-    let instantiationReason\n-    switch (sourceType) {\n-      case SourceType.Runtime:\n-        instantiationReason = `as a runtime entry of chunk ${sourceData}`\n-        break\n-      case SourceType.Parent:\n-        instantiationReason = `because it was required from module ${sourceData}`\n-        break\n-      case SourceType.Update:\n-        instantiationReason = 'because of an HMR update'\n-        break\n-      default:\n-        invariant(\n-          sourceType,\n-          (sourceType) => `Unknown source type: ${sourceType}`\n-        )\n-    }\n-    throw new Error(\n-      `Module ${id} was instantiated ${instantiationReason}, but the module factory is not available. It might have been deleted in an HMR update.`\n-    )\n+    factoryNotAvailable(id, sourceType, sourceData)\n   }\n \n   const hotData = moduleHotData.get(id)!\n@@ -185,52 +212,22 @@ function instantiateModule(\n       )\n   }\n \n-  const module: HotModule = {\n-    exports: {},\n-    error: undefined,\n-    loaded: false,\n-    id: id,\n-    parents,\n-    children: [],\n-    namespaceObject: undefined,\n-    hot,\n-  }\n+  const module: HotModule = createModuleObject(id) as HotModule\n+  module.parents = parents\n+  module.children = []\n+  module.hot = hot\n \n   devModuleCache[id] = module\n   moduleHotState.set(module, hotState)\n \n   // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\n   try {\n     runModuleExecutionHooks(module, (refresh) => {\n-      const r = commonJsRequire.bind(null, module)\n-      moduleFactory(\n-        augmentContext({\n-          a: asyncModule.bind(null, module),\n-          e: module.exports,\n-          r: commonJsRequire.bind(null, module),\n-          t: runtimeRequire,\n-          f: moduleContext,\n-          i: esmImport.bind(null, module),\n-          s: esmExport.bind(null, module, module.exports, devModuleCache),\n-          j: dynamicExport.bind(null, module, module.exports, devModuleCache),\n-          v: exportValue.bind(null, module, devModuleCache),\n-          n: exportNamespace.bind(null, module, devModuleCache),\n-          m: module,\n-          c: devModuleCache,\n-          C: null,\n-          M: moduleFactories,\n-          l: loadChunk.bind(null, SourceType.Parent, id),\n-          L: loadChunkByUrl.bind(null, SourceType.Parent, id),\n-          w: loadWebAssembly.bind(null, SourceType.Parent, id),\n-          u: loadWebAssemblyModule.bind(null, SourceType.Parent, id),\n-          P: resolveAbsolutePath,\n-          U: relativeURL,\n-          k: refresh,\n-          R: createResolvePathFromModule(r),\n-          b: getWorkerBlobURL,\n-          z: requireStub,\n-        })\n+      const context = new (DevContext as any as DevContextConstructor)(\n+        module,\n+        refresh\n       )\n+      moduleFactory(context)\n     })\n   } catch (error) {\n     module.error = error as any\n@@ -246,6 +243,12 @@ function instantiateModule(\n   return module\n }\n \n+const DUMMY_REFRESH_CONTEXT = {\n+  register: (_type: unknown, _id: unknown) => {},\n+  signature: () => (_type: unknown) => {},\n+  registerExports: (_module: unknown, _helpers: unknown) => {},\n+}\n+\n /**\n  * NOTE(alexkirsz) Webpack has a \"module execution\" interception hook that\n  * Next.js' React Refresh runtime hooks into to add module context to the\n@@ -272,11 +275,7 @@ function runModuleExecutionHooks(\n     // If the react refresh hooks are not installed we need to bind dummy functions.\n     // This is expected when running in a Web Worker.  It is also common in some of\n     // our test environments.\n-    executeModule({\n-      register: (_type, _id) => {},\n-      signature: () => (_type) => {},\n-      registerExports: (_module, _helpers) => {},\n-    })\n+    executeModule(DUMMY_REFRESH_CONTEXT)\n   }\n }\n \n@@ -1088,6 +1087,50 @@ function disposeChunk(chunkPath: ChunkPath): boolean {\n   return true\n }\n \n+/**\n+ * Adds a module to a chunk.\n+ */\n+function addModuleToChunk(moduleId: ModuleId, chunkPath: ChunkPath) {\n+  let moduleChunks = moduleChunksMap.get(moduleId)\n+  if (!moduleChunks) {\n+    moduleChunks = new Set([chunkPath])\n+    moduleChunksMap.set(moduleId, moduleChunks)\n+  } else {\n+    moduleChunks.add(chunkPath)\n+  }\n+\n+  let chunkModules = chunkModulesMap.get(chunkPath)\n+  if (!chunkModules) {\n+    chunkModules = new Set([moduleId])\n+    chunkModulesMap.set(chunkPath, chunkModules)\n+  } else {\n+    chunkModules.add(moduleId)\n+  }\n+}\n+\n+/**\n+ * Marks a chunk list as a runtime chunk list. There can be more than one\n+ * runtime chunk list. For instance, integration tests can have multiple chunk\n+ * groups loaded at runtime, each with its own chunk list.\n+ */\n+function markChunkListAsRuntime(chunkListPath: ChunkListPath) {\n+  runtimeChunkLists.add(chunkListPath)\n+}\n+\n+function registerChunk([\n+  chunkScript,\n+  chunkModules,\n+  runtimeParams,\n+]: ChunkRegistration) {\n+  const chunkPath = getPathFromScript(chunkScript)\n+  for (const [moduleId, moduleFactory] of Object.entries(chunkModules)) {\n+    registerCompressedModuleFactory(moduleId, moduleFactory)\n+    addModuleToChunk(moduleId, chunkPath)\n+  }\n+\n+  return BACKEND.registerChunk(chunkPath, runtimeParams)\n+}\n+\n /**\n  * Subscribes to chunk list updates from the update server and applies them.\n  */"
        },
        {
            "sha": "4ffe7e5039778dff7f57b7525829f44b88d0d5bd",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/browser/runtime/base/dev-dummy.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdev-dummy.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdev-dummy.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdev-dummy.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -9,9 +9,3 @@\n \n declare var DEV_BACKEND: DevRuntimeBackend\n declare var _eval: (code: EcmascriptModuleEntry) => any\n-/**\n- * Adds additional properties to the `TurbopackDevBaseContext` interface.\n- */\n-declare var augmentContext: (\n-  context: TurbopackDevBaseContext\n-) => TurbopackDevContext"
        },
        {
            "sha": "e4be5f58f6398173ea7cc0695a5253354dbe7381",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/browser/runtime/base/dummy.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdummy.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdummy.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fdummy.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -11,17 +11,3 @@\n /// <reference path=\"../../../shared/require-type.d.ts\" />\n \n declare var BACKEND: RuntimeBackend\n-declare var loadWebAssembly: (\n-  sourceType: SourceType,\n-  sourceData: SourceData,\n-  wasmChunkPath: ChunkPath,\n-  edgeModule: () => WebAssembly.Module,\n-  imports: WebAssembly.Imports\n-) => Exports\n-declare var loadWebAssemblyModule: (\n-  sourceType: SourceType,\n-  sourceData: SourceData,\n-  wasmChunkPath: ChunkPath,\n-  edgeModule: () => WebAssembly.Module\n-) => WebAssembly.Module\n-declare var relativeURL: (inputUrl: string) => void"
        },
        {
            "sha": "7319a348f1ca704cae819e058695918ef7c42ff7",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/browser/runtime/base/runtime-base.ts",
            "status": "modified",
            "additions": 131,
            "deletions": 108,
            "changes": 239,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fruntime-base.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fruntime-base.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fbase%2Fruntime-base.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -21,6 +21,13 @@ declare var TURBOPACK_NEXT_CHUNK_URLS: ChunkUrl[] | undefined\n declare var CHUNK_BASE_PATH: string\n declare var CHUNK_SUFFIX_PATH: string\n \n+interface TurbopackBrowserBaseContext<M> extends TurbopackBaseContext<M> {\n+  R: ResolvePathFromModule\n+}\n+\n+const browserContextPrototype =\n+  Context.prototype as TurbopackBrowserBaseContext<unknown>\n+\n // Provided by build or dev base\n declare function instantiateModule(\n   id: ModuleId,\n@@ -76,6 +83,19 @@ interface RuntimeBackend {\n     sourceData: SourceData,\n     chunkUrl: ChunkUrl\n   ) => Promise<void>\n+  loadWebAssembly: (\n+    sourceType: SourceType,\n+    sourceData: SourceData,\n+    wasmChunkPath: ChunkPath,\n+    edgeModule: () => WebAssembly.Module,\n+    importsObj: WebAssembly.Imports\n+  ) => Promise<Exports>\n+  loadWebAssemblyModule: (\n+    sourceType: SourceType,\n+    sourceData: SourceData,\n+    wasmChunkPath: ChunkPath,\n+    edgeModule: () => WebAssembly.Module\n+  ) => Promise<WebAssembly.Module>\n }\n \n interface DevRuntimeBackend {\n@@ -85,46 +105,56 @@ interface DevRuntimeBackend {\n }\n \n const moduleFactories: ModuleFactories = Object.create(null)\n-/**\n- * Module IDs that are instantiated as part of the runtime of a chunk.\n- */\n-const runtimeModules: Set<ModuleId> = new Set()\n-/**\n- * Map from module ID to the chunks that contain this module.\n- *\n- * In HMR, we need to keep track of which modules are contained in which so\n- * chunks. This is so we don't eagerly dispose of a module when it is removed\n- * from chunk A, but still exists in chunk B.\n- */\n-const moduleChunksMap: Map<ModuleId, Set<ChunkPath>> = new Map()\n-/**\n- * Map from a chunk path to all modules it contains.\n- */\n-const chunkModulesMap: Map<ChunkPath, Set<ModuleId>> = new Map()\n-/**\n- * Chunk lists that contain a runtime. When these chunk lists receive an update\n- * that can't be reconciled with the current state of the page, we need to\n- * reload the runtime entirely.\n- */\n-const runtimeChunkLists: Set<ChunkListPath> = new Set()\n-/**\n- * Map from a chunk list to the chunk paths it contains.\n- */\n-const chunkListChunksMap: Map<ChunkListPath, Set<ChunkPath>> = new Map()\n-/**\n- * Map from a chunk path to the chunk lists it belongs to.\n- */\n-const chunkChunkListsMap: Map<ChunkPath, Set<ChunkListPath>> = new Map()\n+contextPrototype.M = moduleFactories\n \n const availableModules: Map<ModuleId, Promise<any> | true> = new Map()\n \n const availableModuleChunks: Map<ChunkPath, Promise<any> | true> = new Map()\n \n-async function loadChunk(\n+function factoryNotAvailable(\n+  moduleId: ModuleId,\n+  sourceType: SourceType,\n+  sourceData: SourceData\n+) {\n+  let instantiationReason\n+  switch (sourceType) {\n+    case SourceType.Runtime:\n+      instantiationReason = `as a runtime entry of chunk ${sourceData}`\n+      break\n+    case SourceType.Parent:\n+      instantiationReason = `because it was required from module ${sourceData}`\n+      break\n+    case SourceType.Update:\n+      instantiationReason = 'because of an HMR update'\n+      break\n+    default:\n+      invariant(\n+        sourceType,\n+        (sourceType) => `Unknown source type: ${sourceType}`\n+      )\n+  }\n+  throw new Error(\n+    `Module ${moduleId} was instantiated ${instantiationReason}, but the module factory is not available. It might have been deleted in an HMR update.`\n+  )\n+}\n+\n+function loadChunk(\n+  this: TurbopackBrowserBaseContext<Module>,\n+  chunkData: ChunkData\n+): Promise<void> {\n+  return loadChunkInternal(SourceType.Parent, this.m.id, chunkData)\n+}\n+browserContextPrototype.l = loadChunk\n+\n+function loadInitialChunk(chunkPath: ChunkPath, chunkData: ChunkData) {\n+  return loadChunkInternal(SourceType.Runtime, chunkPath, chunkData)\n+}\n+\n+async function loadChunkInternal(\n   sourceType: SourceType,\n   sourceData: SourceData,\n   chunkData: ChunkData\n-): Promise<any> {\n+): Promise<void> {\n   if (typeof chunkData === 'string') {\n     return loadChunkPath(sourceType, sourceData, chunkData)\n   }\n@@ -136,7 +166,8 @@ async function loadChunk(\n   })\n   if (modulesPromises.length > 0 && modulesPromises.every((p) => p)) {\n     // When all included items are already loaded or loading, we can skip loading ourselves\n-    return Promise.all(modulesPromises)\n+    await Promise.all(modulesPromises)\n+    return\n   }\n \n   const includedModuleChunksList = chunkData.moduleChunks || []\n@@ -154,7 +185,8 @@ async function loadChunk(\n \n     if (moduleChunksPromises.length === includedModuleChunksList.length) {\n       // When all included module chunks are already loaded or loading, we can skip loading ourselves\n-      return Promise.all(moduleChunksPromises)\n+      await Promise.all(moduleChunksPromises)\n+      return\n     }\n \n     const moduleChunksToLoad: Set<ChunkPath> = new Set()\n@@ -192,7 +224,7 @@ async function loadChunk(\n     }\n   }\n \n-  return promise\n+  await promise\n }\n \n const loadedChunk = Promise.resolve(undefined)\n@@ -202,6 +234,15 @@ const instrumentedBackendLoadChunks = new WeakMap<\n >()\n // Do not make this async. React relies on referential equality of the returned Promise.\n function loadChunkByUrl(\n+  this: TurbopackBrowserBaseContext<Module>,\n+  chunkUrl: ChunkUrl\n+) {\n+  return loadChunkByUrlInternal(SourceType.Parent, this.m.id, chunkUrl)\n+}\n+browserContextPrototype.L = loadChunkByUrl\n+\n+// Do not make this async. React relies on referential equality of the returned Promise.\n+function loadChunkByUrlInternal(\n   sourceType: SourceType,\n   sourceData: SourceData,\n   chunkUrl: ChunkUrl\n@@ -249,26 +290,27 @@ function loadChunkByUrl(\n   return entry\n }\n \n-async function loadChunkPath(\n+// Do not make this async. React relies on referential equality of the returned Promise.\n+function loadChunkPath(\n   sourceType: SourceType,\n   sourceData: SourceData,\n   chunkPath: ChunkPath\n-): Promise<any> {\n+): Promise<void> {\n   const url = getChunkRelativeUrl(chunkPath)\n-  return loadChunkByUrl(sourceType, sourceData, url)\n+  return loadChunkByUrlInternal(sourceType, sourceData, url)\n }\n \n /**\n  * Returns an absolute url to an asset.\n  */\n-function createResolvePathFromModule(\n-  resolver: (moduleId: string) => Exports\n-): (moduleId: string) => string {\n-  return function resolvePathFromModule(moduleId: string): string {\n-    const exported = resolver(moduleId)\n-    return exported?.default ?? exported\n-  }\n+function resolvePathFromModule(\n+  this: TurbopackBaseContext<Module>,\n+  moduleId: string\n+): string {\n+  const exported = this.r(moduleId)\n+  return exported?.default ?? exported\n }\n+browserContextPrototype.R = resolvePathFromModule\n \n /**\n  * no-op for browser\n@@ -277,6 +319,7 @@ function createResolvePathFromModule(\n function resolveAbsolutePath(modulePath?: string): string {\n   return `/ROOT/${modulePath ?? ''}`\n }\n+browserContextPrototype.P = resolveAbsolutePath\n \n /**\n  * Returns a blob URL for the worker.\n@@ -291,41 +334,7 @@ importScripts(...self.TURBOPACK_NEXT_CHUNK_URLS.map(c => self.TURBOPACK_WORKER_L\n   let blob = new Blob([bootstrap], { type: 'text/javascript' })\n   return URL.createObjectURL(blob)\n }\n-\n-/**\n- * Adds a module to a chunk.\n- */\n-function addModuleToChunk(moduleId: ModuleId, chunkPath: ChunkPath) {\n-  let moduleChunks = moduleChunksMap.get(moduleId)\n-  if (!moduleChunks) {\n-    moduleChunks = new Set([chunkPath])\n-    moduleChunksMap.set(moduleId, moduleChunks)\n-  } else {\n-    moduleChunks.add(chunkPath)\n-  }\n-\n-  let chunkModules = chunkModulesMap.get(chunkPath)\n-  if (!chunkModules) {\n-    chunkModules = new Set([moduleId])\n-    chunkModulesMap.set(chunkPath, chunkModules)\n-  } else {\n-    chunkModules.add(moduleId)\n-  }\n-}\n-\n-/**\n- * Returns the first chunk that included a module.\n- * This is used by the Node.js backend, hence why it's marked as unused in this\n- * file.\n- */\n-function getFirstModuleChunk(moduleId: ModuleId) {\n-  const moduleChunkPaths = moduleChunksMap.get(moduleId)\n-  if (moduleChunkPaths == null) {\n-    return null\n-  }\n-\n-  return moduleChunkPaths.values().next().value\n-}\n+browserContextPrototype.b = getWorkerBlobURL\n \n /**\n  * Instantiates a runtime module.\n@@ -370,37 +379,21 @@ function getPathFromScript(\n   return path as ChunkPath | ChunkListPath\n }\n \n-/**\n- * Marks a chunk list as a runtime chunk list. There can be more than one\n- * runtime chunk list. For instance, integration tests can have multiple chunk\n- * groups loaded at runtime, each with its own chunk list.\n- */\n-function markChunkListAsRuntime(chunkListPath: ChunkListPath) {\n-  runtimeChunkLists.add(chunkListPath)\n-}\n-\n-function registerChunk([\n-  chunkScript,\n-  chunkModules,\n-  runtimeParams,\n-]: ChunkRegistration) {\n-  const chunkPath = getPathFromScript(chunkScript)\n-  for (const [moduleId, moduleFactory] of Object.entries(chunkModules)) {\n-    if (!moduleFactories[moduleId]) {\n-      if (Array.isArray(moduleFactory)) {\n-        let [moduleFactoryFn, otherIds] = moduleFactory\n-        moduleFactories[moduleId] = moduleFactoryFn\n-        for (const otherModuleId of otherIds) {\n-          moduleFactories[otherModuleId] = moduleFactoryFn\n-        }\n-      } else {\n-        moduleFactories[moduleId] = moduleFactory\n+function registerCompressedModuleFactory(\n+  moduleId: ModuleId,\n+  moduleFactory: Function | [Function, ModuleId[]]\n+) {\n+  if (!moduleFactories[moduleId]) {\n+    if (Array.isArray(moduleFactory)) {\n+      let [moduleFactoryFn, otherIds] = moduleFactory\n+      moduleFactories[moduleId] = moduleFactoryFn\n+      for (const otherModuleId of otherIds) {\n+        moduleFactories[otherModuleId] = moduleFactoryFn\n       }\n+    } else {\n+      moduleFactories[moduleId] = moduleFactory\n     }\n-    addModuleToChunk(moduleId, chunkPath)\n   }\n-\n-  return BACKEND.registerChunk(chunkPath, runtimeParams)\n }\n \n const regexJsUrl = /\\.js(?:\\?[^#]*)?(?:#.*)?$/\n@@ -418,3 +411,33 @@ const regexCssUrl = /\\.css(?:\\?[^#]*)?(?:#.*)?$/\n function isCss(chunkUrl: ChunkUrl): boolean {\n   return regexCssUrl.test(chunkUrl)\n }\n+\n+function loadWebAssembly(\n+  this: TurbopackBaseContext<Module>,\n+  chunkPath: ChunkPath,\n+  edgeModule: () => WebAssembly.Module,\n+  importsObj: WebAssembly.Imports\n+): Promise<Exports> {\n+  return BACKEND.loadWebAssembly(\n+    SourceType.Parent,\n+    this.m.id,\n+    chunkPath,\n+    edgeModule,\n+    importsObj\n+  )\n+}\n+contextPrototype.w = loadWebAssembly\n+\n+function loadWebAssemblyModule(\n+  this: TurbopackBaseContext<Module>,\n+  chunkPath: ChunkPath,\n+  edgeModule: () => WebAssembly.Module\n+): Promise<WebAssembly.Module> {\n+  return BACKEND.loadWebAssemblyModule(\n+    SourceType.Parent,\n+    this.m.id,\n+    chunkPath,\n+    edgeModule\n+  )\n+}\n+contextPrototype.u = loadWebAssemblyModule"
        },
        {
            "sha": "ad104b1107dd227653adba93c6f9f8aa8039337d",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/browser/runtime/dom/runtime-backend-dom.ts",
            "status": "modified",
            "additions": 33,
            "deletions": 34,
            "changes": 67,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fdom%2Fruntime-backend-dom.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fdom%2Fruntime-backend-dom.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fdom%2Fruntime-backend-dom.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -20,39 +20,6 @@ type ChunkResolver = {\n \n let BACKEND: RuntimeBackend\n \n-function augmentContext(context: unknown): unknown {\n-  return context\n-}\n-\n-function fetchWebAssembly(wasmChunkPath: ChunkPath) {\n-  return fetch(getChunkRelativeUrl(wasmChunkPath))\n-}\n-\n-async function loadWebAssembly(\n-  _sourceType: SourceType,\n-  _sourceData: SourceData,\n-  wasmChunkPath: ChunkPath,\n-  _edgeModule: () => WebAssembly.Module,\n-  importsObj: WebAssembly.Imports\n-): Promise<Exports> {\n-  const req = fetchWebAssembly(wasmChunkPath)\n-\n-  const { instance } = await WebAssembly.instantiateStreaming(req, importsObj)\n-\n-  return instance.exports\n-}\n-\n-async function loadWebAssemblyModule(\n-  _sourceType: SourceType,\n-  _sourceData: SourceData,\n-  wasmChunkPath: ChunkPath,\n-  _edgeModule: () => WebAssembly.Module\n-): Promise<WebAssembly.Module> {\n-  const req = fetchWebAssembly(wasmChunkPath)\n-\n-  return await WebAssembly.compileStreaming(req)\n-}\n-\n /**\n  * Maps chunk paths to the corresponding resolver.\n  */\n@@ -81,7 +48,7 @@ const chunkResolvers: Map<ChunkUrl, ChunkResolver> = new Map()\n       // This waits for chunks to be loaded, but also marks included items as available.\n       await Promise.all(\n         params.otherChunks.map((otherChunkData) =>\n-          loadChunk(SourceType.Runtime, chunkPath, otherChunkData)\n+          loadInitialChunk(chunkPath, otherChunkData)\n         )\n       )\n \n@@ -103,6 +70,34 @@ const chunkResolvers: Map<ChunkUrl, ChunkResolver> = new Map()\n     ) {\n       return doLoadChunk(sourceType, sourceData, chunkUrl)\n     },\n+\n+    async loadWebAssembly(\n+      _sourceType: SourceType,\n+      _sourceData: SourceData,\n+      wasmChunkPath: ChunkPath,\n+      _edgeModule: () => WebAssembly.Module,\n+      importsObj: WebAssembly.Imports\n+    ): Promise<Exports> {\n+      const req = fetchWebAssembly(wasmChunkPath)\n+\n+      const { instance } = await WebAssembly.instantiateStreaming(\n+        req,\n+        importsObj\n+      )\n+\n+      return instance.exports\n+    },\n+\n+    async loadWebAssemblyModule(\n+      _sourceType: SourceType,\n+      _sourceData: SourceData,\n+      wasmChunkPath: ChunkPath,\n+      _edgeModule: () => WebAssembly.Module\n+    ): Promise<WebAssembly.Module> {\n+      const req = fetchWebAssembly(wasmChunkPath)\n+\n+      return await WebAssembly.compileStreaming(req)\n+    },\n   }\n \n   function getOrCreateResolver(chunkUrl: ChunkUrl): ChunkResolver {\n@@ -232,4 +227,8 @@ const chunkResolvers: Map<ChunkUrl, ChunkResolver> = new Map()\n     resolver.loadingStarted = true\n     return resolver.promise\n   }\n+\n+  function fetchWebAssembly(wasmChunkPath: ChunkPath) {\n+    return fetch(getChunkRelativeUrl(wasmChunkPath))\n+  }\n })()"
        },
        {
            "sha": "1449a86f3f14458d6c88236acf274cde0f5bc6ae",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/browser/runtime/edge/runtime-backend-edge.ts",
            "status": "modified",
            "additions": 39,
            "deletions": 73,
            "changes": 112,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fedge%2Fruntime-backend-edge.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fedge%2Fruntime-backend-edge.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fbrowser%2Fruntime%2Fedge%2Fruntime-backend-edge.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -18,79 +18,6 @@ type ChunkRunner = {\n }\n \n let BACKEND: RuntimeBackend\n-\n-type ExternalRequire = (\n-  id: DependencySpecifier,\n-  thunk: () => any,\n-  esm?: boolean\n-) => Exports | EsmNamespaceObject\n-type ExternalImport = (\n-  id: DependencySpecifier\n-) => Promise<Exports | EsmNamespaceObject>\n-\n-interface TurbopackEdgeContext extends TurbopackBaseContext<Module> {\n-  x: ExternalRequire\n-  y: ExternalImport\n-}\n-\n-function augmentContext(\n-  context: TurbopackBaseContext<Module>\n-): TurbopackEdgeContext {\n-  const nodejsContext = context as TurbopackEdgeContext\n-  nodejsContext.x = externalRequire\n-  nodejsContext.y = externalImport\n-  return nodejsContext\n-}\n-\n-async function loadWebAssembly(\n-  sourceType: SourceType,\n-  sourceData: SourceData,\n-  chunkPath: ChunkPath,\n-  edgeModule: () => WebAssembly.Module,\n-  imports: WebAssembly.Imports\n-): Promise<Exports> {\n-  const module = await loadWebAssemblyModule(\n-    sourceType,\n-    sourceData,\n-    chunkPath,\n-    edgeModule\n-  )\n-\n-  return await WebAssembly.instantiate(module, imports)\n-}\n-\n-function getFileStem(path: string): string {\n-  const fileName = path.split('/').pop()!\n-\n-  const stem = fileName.split('.').shift()!\n-\n-  if (stem === '') {\n-    return fileName\n-  }\n-\n-  return stem\n-}\n-\n-async function loadWebAssemblyModule(\n-  _sourceType: SourceType,\n-  _sourceData: SourceData,\n-  chunkPath: ChunkPath,\n-  edgeModule: () => WebAssembly.Module\n-): Promise<WebAssembly.Module> {\n-  let module\n-  try {\n-    module = edgeModule()\n-  } catch (_e) {}\n-\n-  if (!module) {\n-    throw new Error(\n-      `dynamically loading WebAssembly is not supported in this runtime as global was not injected for chunk '${chunkPath}'`\n-    )\n-  }\n-\n-  return module\n-}\n-\n ;(() => {\n   BACKEND = {\n     // The \"none\" runtime expects all chunks within the same chunk group to be\n@@ -131,6 +58,27 @@ async function loadWebAssemblyModule(\n     ) {\n       throw new Error('chunk loading is not supported')\n     },\n+\n+    async loadWebAssembly(\n+      _sourceType: SourceType,\n+      _sourceData: SourceData,\n+      chunkPath: ChunkPath,\n+      edgeModule: () => WebAssembly.Module,\n+      imports: WebAssembly.Imports\n+    ): Promise<Exports> {\n+      const module = await loadEdgeWasm(chunkPath, edgeModule)\n+\n+      return await WebAssembly.instantiate(module, imports)\n+    },\n+\n+    async loadWebAssemblyModule(\n+      _sourceType: SourceType,\n+      _sourceData: SourceData,\n+      chunkPath: ChunkPath,\n+      edgeModule: () => WebAssembly.Module\n+    ): Promise<WebAssembly.Module> {\n+      return loadEdgeWasm(chunkPath, edgeModule)\n+    },\n   }\n \n   const registeredChunks: Set<ChunkPath> = new Set()\n@@ -203,4 +151,22 @@ async function loadWebAssemblyModule(\n       getOrInstantiateRuntimeModule(chunkPath, moduleId)\n     }\n   }\n+\n+  async function loadEdgeWasm(\n+    chunkPath: ChunkPath,\n+    edgeModule: () => WebAssembly.Module\n+  ): Promise<WebAssembly.Module> {\n+    let module\n+    try {\n+      module = edgeModule()\n+    } catch (_e) {}\n+\n+    if (!module) {\n+      throw new Error(\n+        `dynamically loading WebAssembly is not supported in this runtime as global was not injected for chunk '${chunkPath}'`\n+      )\n+    }\n+\n+    return module\n+  }\n })()"
        },
        {
            "sha": "f512882d4b06e087efd6904b8e319fdc44479ab3",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/nodejs/runtime.ts",
            "status": "modified",
            "additions": 38,
            "deletions": 78,
            "changes": 116,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fnodejs%2Fruntime.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fnodejs%2Fruntime.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fnodejs%2Fruntime.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -40,19 +40,14 @@ function stringifySourceInfo(\n   }\n }\n \n-type ExternalRequire = (\n-  id: ModuleId,\n-  thunk: () => any,\n-  esm?: boolean\n-) => Exports | EsmNamespaceObject\n-type ExternalImport = (id: ModuleId) => Promise<Exports | EsmNamespaceObject>\n-\n interface TurbopackNodeBuildContext extends TurbopackBaseContext<Module> {\n   R: ResolvePathFromModule\n   x: ExternalRequire\n   y: ExternalImport\n }\n \n+const nodeContextPrototype = Context.prototype as TurbopackNodeBuildContext\n+\n type ModuleFactory = (\n   this: Module['exports'],\n   context: TurbopackNodeBuildContext\n@@ -62,37 +57,35 @@ const url = require('url') as typeof import('url')\n const fs = require('fs/promises') as typeof import('fs/promises')\n \n const moduleFactories: ModuleFactories = Object.create(null)\n+nodeContextPrototype.M = moduleFactories\n const moduleCache: ModuleCache<Module> = Object.create(null)\n+nodeContextPrototype.c = moduleCache\n \n /**\n  * Returns an absolute path to the given module's id.\n  */\n-function createResolvePathFromModule(\n-  resolver: (moduleId: string) => Exports\n-): (moduleId: string) => string {\n-  return function resolvePathFromModule(moduleId: string): string {\n-    const exported = resolver(moduleId)\n-    const exportedPath = exported?.default ?? exported\n-    if (typeof exportedPath !== 'string') {\n-      return exported as any\n-    }\n+function resolvePathFromModule(\n+  this: TurbopackBaseContext<Module>,\n+  moduleId: string\n+): string {\n+  const exported = this.r(moduleId)\n+  const exportedPath = exported?.default ?? exported\n+  if (typeof exportedPath !== 'string') {\n+    return exported as any\n+  }\n \n-    const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length)\n-    const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix)\n+  const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length)\n+  const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix)\n \n-    return url.pathToFileURL(resolved).href\n-  }\n+  return url.pathToFileURL(resolved).href\n }\n+nodeContextPrototype.R = resolvePathFromModule\n \n-function loadChunk(\n-  sourceType: SourceType,\n-  sourceData: SourceData,\n-  chunkData: ChunkData\n-): void {\n+function loadRuntimeChunk(sourcePath: ChunkPath, chunkData: ChunkData): void {\n   if (typeof chunkData === 'string') {\n-    loadChunkPath(sourceType, sourceData, chunkData)\n+    loadRuntimeChunkPath(sourcePath, chunkData)\n   } else {\n-    loadChunkPath(sourceType, sourceData, chunkData.path)\n+    loadRuntimeChunkPath(sourcePath, chunkData.path)\n   }\n }\n \n@@ -105,9 +98,8 @@ function clearChunkCache() {\n   chunkCache.clear()\n }\n \n-function loadChunkPath(\n-  sourceType: SourceType,\n-  sourceData: SourceData,\n+function loadRuntimeChunkPath(\n+  sourcePath: ChunkPath,\n   chunkPath: ChunkPath\n ): void {\n   if (!isJs(chunkPath)) {\n@@ -141,8 +133,8 @@ function loadChunkPath(\n   } catch (e) {\n     let errorMessage = `Failed to load chunk ${chunkPath}`\n \n-    if (sourceType !== undefined) {\n-      errorMessage += ` from ${stringifySourceInfo(sourceType, sourceData)}`\n+    if (sourcePath) {\n+      errorMessage += ` from runtime for chunk ${sourcePath}`\n     }\n \n     throw new Error(errorMessage, {\n@@ -174,8 +166,7 @@ function loadChunkUncached(chunkPath: ChunkPath) {\n }\n \n function loadChunkAsync(\n-  sourceType: SourceType,\n-  sourceData: SourceData,\n+  this: TurbopackBaseContext<Module>,\n   chunkData: ChunkData\n ): Promise<void> {\n   const chunkPath = typeof chunkData === 'string' ? chunkData : chunkData.path\n@@ -192,10 +183,7 @@ function loadChunkAsync(\n       loadChunkUncached(chunkPath)\n       entry = loadedChunk\n     } catch (e) {\n-      let errorMessage = `Failed to load chunk ${chunkPath}`\n-      if (sourceType !== undefined) {\n-        errorMessage += ` from ${stringifySourceInfo(sourceType, sourceData)}`\n-      }\n+      const errorMessage = `Failed to load chunk ${chunkPath} from module ${this.m.id}`\n \n       // Cache the failure promise, future requests will also get this same rejection\n       entry = Promise.reject(\n@@ -209,15 +197,16 @@ function loadChunkAsync(\n   // TODO: Return an instrumented Promise that React can use instead of relying on referential equality.\n   return entry\n }\n+contextPrototype.l = loadChunkAsync\n \n function loadChunkAsyncByUrl(\n-  sourceType: SourceType,\n-  sourceData: SourceData,\n+  this: TurbopackBaseContext<Module>,\n   chunkUrl: string\n ) {\n   const path = url.fileURLToPath(new URL(chunkUrl, RUNTIME_ROOT)) as ChunkPath\n-  return loadChunkAsync(sourceType, sourceData, path)\n+  return loadChunkAsync.call(this, path)\n }\n+contextPrototype.L = loadChunkAsyncByUrl\n \n function loadWebAssembly(\n   chunkPath: ChunkPath,\n@@ -228,6 +217,7 @@ function loadWebAssembly(\n \n   return instantiateWebAssemblyFromPath(resolved, imports)\n }\n+contextPrototype.w = loadWebAssembly\n \n function loadWebAssemblyModule(\n   chunkPath: ChunkPath,\n@@ -237,11 +227,14 @@ function loadWebAssemblyModule(\n \n   return compileWebAssemblyFromPath(resolved)\n }\n+contextPrototype.u = loadWebAssemblyModule\n \n function getWorkerBlobURL(_chunks: ChunkPath[]): string {\n   throw new Error('Worker blobs are not implemented yet for Node.js')\n }\n \n+nodeContextPrototype.b = getWorkerBlobURL\n+\n function instantiateModule(\n   id: ModuleId,\n   sourceType: SourceType,\n@@ -271,45 +264,13 @@ function instantiateModule(\n     )\n   }\n \n-  const module: Module = {\n-    exports: {},\n-    error: undefined,\n-    loaded: false,\n-    id,\n-    namespaceObject: undefined,\n-  }\n+  const module: Module = createModuleObject(id)\n   moduleCache[id] = module\n \n   // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\n   try {\n-    const r = commonJsRequire.bind(null, module)\n-    moduleFactory.call(module.exports, {\n-      a: asyncModule.bind(null, module),\n-      e: module.exports,\n-      r,\n-      t: runtimeRequire,\n-      x: externalRequire,\n-      y: externalImport,\n-      f: moduleContext,\n-      i: esmImport.bind(null, module),\n-      s: esmExport.bind(null, module, module.exports, moduleCache),\n-      j: dynamicExport.bind(null, module, module.exports, moduleCache),\n-      v: exportValue.bind(null, module, moduleCache),\n-      n: exportNamespace.bind(null, module, moduleCache),\n-      m: module,\n-      c: moduleCache,\n-      M: moduleFactories,\n-      l: loadChunkAsync.bind(null, SourceType.Parent, id),\n-      L: loadChunkAsyncByUrl.bind(null, SourceType.Parent, id),\n-      C: clearChunkCache,\n-      w: loadWebAssembly,\n-      u: loadWebAssemblyModule,\n-      P: resolveAbsolutePath,\n-      U: relativeURL,\n-      R: createResolvePathFromModule(r),\n-      b: getWorkerBlobURL,\n-      z: requireStub,\n-    })\n+    const context = new (Context as any as ContextConstructor<Module>)(module)\n+    moduleFactory(context)\n   } catch (error) {\n     module.error = error as any\n     throw error\n@@ -380,6 +341,5 @@ function isJs(chunkUrlOrPath: ChunkUrl | ChunkPath): boolean {\n \n module.exports = (sourcePath: ChunkPath) => ({\n   m: (id: ModuleId) => getOrInstantiateRuntimeModule(sourcePath, id),\n-  c: (chunkData: ChunkData) =>\n-    loadChunk(SourceType.Runtime, sourcePath, chunkData),\n+  c: (chunkData: ChunkData) => loadRuntimeChunk(sourcePath, chunkData),\n })"
        },
        {
            "sha": "cecd477c80653831cfe2fa15003d2951c6e3cf9f",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/shared-node/base-externals-utils.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared-node%2Fbase-externals-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared-node%2Fbase-externals-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared-node%2Fbase-externals-utils.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -24,6 +24,7 @@ async function externalImport(id: DependencySpecifier) {\n \n   return raw\n }\n+contextPrototype.y = externalImport\n \n function externalRequire(\n   id: ModuleId,\n@@ -56,3 +57,4 @@ externalRequire.resolve = (\n ) => {\n   return require.resolve(id, options)\n }\n+contextPrototype.x = externalRequire"
        },
        {
            "sha": "b994b30b2602e96582b122738ff380e3ee18bfc7",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/shared-node/node-externals-utils.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared-node%2Fnode-externals-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared-node%2Fnode-externals-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared-node%2Fnode-externals-utils.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -30,3 +30,4 @@ function resolveAbsolutePath(modulePath?: string): string {\n   }\n   return ABSOLUTE_ROOT\n }\n+Context.prototype.P = resolveAbsolutePath"
        },
        {
            "sha": "7e080231928db3af67e3c879f64838f99d0f9563",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/shared/runtime-types.d.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 1,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-types.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-types.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-types.d.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -34,11 +34,13 @@ type ChunkData =\n     }\n \n type CommonJsRequire = (moduleId: ModuleId) => Exports\n+type RuntimeRequire = (request: string) => Exports\n type ModuleContextFactory = (map: ModuleContextMap) => ModuleContext\n type EsmImport = (\n   moduleId: ModuleId,\n   allowExportDefault: boolean\n ) => EsmNamespaceObject | Promise<EsmNamespaceObject>\n+type InvokeAsyncLoader = (moduleId: ModuleId) => Promise<Exports>\n type EsmExport = (\n   exportGetters: Record<string, () => any>,\n   id: ModuleId | undefined\n@@ -87,6 +89,15 @@ type AsyncModule = (\n type ResolveAbsolutePath = (modulePath?: string) => string\n type GetWorkerBlobURL = (chunks: ChunkPath[]) => string\n \n+type ExternalRequire = (\n+  id: DependencySpecifier,\n+  thunk: () => any,\n+  esm?: boolean\n+) => Exports | EsmNamespaceObject\n+type ExternalImport = (\n+  id: DependencySpecifier\n+) => Promise<Exports | EsmNamespaceObject>\n+\n interface Module {\n   exports: Function | Exports | Promise<Exports> | AsyncModulePromise\n   error: Error | undefined\n@@ -108,9 +119,10 @@ interface TurbopackBaseContext<M> {\n   a: AsyncModule\n   e: Module['exports']\n   r: CommonJsRequire\n-  t: CommonJsRequire\n+  t: RuntimeRequire\n   f: ModuleContextFactory\n   i: EsmImport\n+  A: InvokeAsyncLoader\n   s: EsmExport\n   j: DynamicExport\n   v: ExportValue\n@@ -125,5 +137,7 @@ interface TurbopackBaseContext<M> {\n   P: ResolveAbsolutePath\n   U: RelativeURL\n   b: GetWorkerBlobURL\n+  x: ExternalRequire\n+  y: ExternalImport\n   z: CommonJsRequire\n }"
        },
        {
            "sha": "3c20ab58d479eee12f5d795c12fa0e0fabb169e3",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/shared/runtime-utils.ts",
            "status": "modified",
            "additions": 73,
            "deletions": 27,
            "changes": 100,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-utils.ts?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -19,6 +19,15 @@ declare function getOrInstantiateModuleFromParent<M>(\n \n const REEXPORTED_OBJECTS = Symbol('reexported objects')\n \n+/**\n+ * Constructs the `__turbopack_context__` object for a module.\n+ */\n+function Context(this: TurbopackBaseContext<Module>, module: Module) {\n+  this.m = module\n+  this.e = module.exports\n+}\n+const contextPrototype = Context.prototype as TurbopackBaseContext<Module>\n+\n type ModuleContextMap = Record<ModuleId, ModuleContextEntry>\n \n interface ModuleContextEntry {\n@@ -67,18 +76,26 @@ function getOverwrittenModule(\n   if (!module) {\n     // This is invoked when a module is merged into another module, thus it wasn't invoked via\n     // instantiateModule and the cache entry wasn't created yet.\n-    module = {\n-      exports: {},\n-      error: undefined,\n-      loaded: false,\n-      id,\n-      namespaceObject: undefined,\n-    }\n+    module = createModuleObject(id)\n     moduleCache[id] = module\n   }\n   return module\n }\n \n+/**\n+ * Creates the module object. Only done here to ensure all module objects have the same shape.\n+ */\n+function createModuleObject(id: ModuleId): Module {\n+  return {\n+    exports: {},\n+    error: undefined,\n+    loaded: false,\n+    id,\n+    namespaceObject: undefined,\n+    [REEXPORTED_OBJECTS]: undefined,\n+  }\n+}\n+\n /**\n  * Adds the getters to the exports object.\n  */\n@@ -107,19 +124,20 @@ function esm(\n  * Makes the module an ESM with exports\n  */\n function esmExport(\n-  module: Module,\n-  exports: Exports,\n-  moduleCache: ModuleCache<Module>,\n+  this: TurbopackBaseContext<Module>,\n   getters: Record<string, () => any>,\n   id: ModuleId | undefined\n ) {\n+  let module = this.m\n+  let exports = this.e\n   if (id != null) {\n-    module = getOverwrittenModule(moduleCache, id)\n+    module = getOverwrittenModule(this.c, id)\n     exports = module.exports\n   }\n   module.namespaceObject = module.exports\n   esm(exports, getters)\n }\n+contextPrototype.s = esmExport\n \n function ensureDynamicExports(module: Module, exports: Exports) {\n   let reexportedObjects = module[REEXPORTED_OBJECTS]\n@@ -158,14 +176,14 @@ function ensureDynamicExports(module: Module, exports: Exports) {\n  * Dynamically exports properties from an object\n  */\n function dynamicExport(\n-  module: Module,\n-  exports: Exports,\n-  moduleCache: ModuleCache<Module>,\n+  this: TurbopackBaseContext<Module>,\n   object: Record<string, any>,\n   id: ModuleId | undefined\n ) {\n+  let module = this.m\n+  let exports = this.e\n   if (id != null) {\n-    module = getOverwrittenModule(moduleCache, id)\n+    module = getOverwrittenModule(this.c, id)\n     exports = module.exports\n   }\n   ensureDynamicExports(module, exports)\n@@ -174,30 +192,33 @@ function dynamicExport(\n     module[REEXPORTED_OBJECTS]!.push(object)\n   }\n }\n+contextPrototype.j = dynamicExport\n \n function exportValue(\n-  module: Module,\n-  moduleCache: ModuleCache<Module>,\n+  this: TurbopackBaseContext<Module>,\n   value: any,\n   id: ModuleId | undefined\n ) {\n+  let module = this.m\n   if (id != null) {\n-    module = getOverwrittenModule(moduleCache, id)\n+    module = getOverwrittenModule(this.c, id)\n   }\n   module.exports = value\n }\n+contextPrototype.v = exportValue\n \n function exportNamespace(\n-  module: Module,\n-  moduleCache: ModuleCache<Module>,\n+  this: TurbopackBaseContext<Module>,\n   namespace: any,\n   id: ModuleId | undefined\n ) {\n+  let module = this.m\n   if (id != null) {\n-    module = getOverwrittenModule(moduleCache, id)\n+    module = getOverwrittenModule(this.c, id)\n   }\n   module.exports = module.namespaceObject = namespace\n }\n+contextPrototype.n = exportNamespace\n \n function createGetter(obj: Record<string | symbol, any>, key: string | symbol) {\n   return () => obj[key]\n@@ -258,10 +279,10 @@ function createNS(raw: Module['exports']): EsmNamespaceObject {\n }\n \n function esmImport(\n-  sourceModule: Module,\n+  this: TurbopackBaseContext<Module>,\n   id: ModuleId\n ): Exclude<Module['namespaceObject'], undefined> {\n-  const module = getOrInstantiateModuleFromParent(id, sourceModule)\n+  const module = getOrInstantiateModuleFromParent(id, this.m)\n   if (module.error) throw module.error\n \n   // any ES module has to have `module.namespaceObject` defined.\n@@ -275,6 +296,18 @@ function esmImport(\n     raw && (raw as any).__esModule\n   ))\n }\n+contextPrototype.i = esmImport\n+\n+function asyncLoader(\n+  this: TurbopackBaseContext<Module>,\n+  moduleId: ModuleId\n+): Promise<Exports> {\n+  const loader = this.r(moduleId) as (\n+    importFunction: EsmImport\n+  ) => Promise<Exports>\n+  return loader(this.i.bind(this))\n+}\n+contextPrototype.A = asyncLoader\n \n // Add a simple runtime require so that environments without one can still pass\n // `typeof require` CommonJS checks so that exports are correctly registered.\n@@ -286,12 +319,17 @@ const runtimeRequire =\n     : function require() {\n         throw new Error('Unexpected use of runtime require')\n       }\n+contextPrototype.t = runtimeRequire\n \n-function commonJsRequire(sourceModule: Module, id: ModuleId): Exports {\n-  const module = getOrInstantiateModuleFromParent(id, sourceModule)\n+function commonJsRequire(\n+  this: TurbopackBaseContext<Module>,\n+  id: ModuleId\n+): Exports {\n+  const module = getOrInstantiateModuleFromParent(id, this.m)\n   if (module.error) throw module.error\n   return module.exports\n }\n+contextPrototype.r = commonJsRequire\n \n /**\n  * `require.context` and require/import expression runtime.\n@@ -327,6 +365,7 @@ function moduleContext(map: ModuleContextMap): ModuleContext {\n \n   return moduleContext\n }\n+contextPrototype.f = moduleContext\n \n /**\n  * Returns the path of a chunk defined by its data.\n@@ -437,7 +476,7 @@ function wrapDeps(deps: Dep[]): AsyncModuleExt[] {\n }\n \n function asyncModule(\n-  module: Module,\n+  this: TurbopackBaseContext<Module>,\n   body: (\n     handleAsyncDependencies: (\n       deps: Dep[]\n@@ -446,6 +485,7 @@ function asyncModule(\n   ) => void,\n   hasAwait: boolean\n ) {\n+  const module = this.m\n   const queue: AsyncQueue | undefined = hasAwait\n     ? Object.assign([], { status: QueueStatus.Unknown })\n     : undefined\n@@ -524,6 +564,7 @@ function asyncModule(\n     queue.status = QueueStatus.Unresolved\n   }\n }\n+contextPrototype.a = asyncModule\n \n /**\n  * A pseudo \"fake\" URL object to resolve to its relative path.\n@@ -550,8 +591,8 @@ const relativeURL = function relativeURL(this: any, inputUrl: string) {\n       value: values[key],\n     })\n }\n-\n relativeURL.prototype = URL.prototype\n+contextPrototype.U = relativeURL\n \n /**\n  * Utility function to ensure all variants of an enum are handled.\n@@ -566,3 +607,8 @@ function invariant(never: never, computeMessage: (arg: any) => string): never {\n function requireStub(_moduleId: ModuleId): never {\n   throw new Error('dynamic usage of require is not supported')\n }\n+contextPrototype.z = requireStub\n+\n+type ContextConstructor<M> = {\n+  new (module: Module): TurbopackBaseContext<M>\n+}"
        },
        {
            "sha": "d42c03d21d618d4c5d273215e32a0edca3e2d613",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/item.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 24,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fitem.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fitem.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fitem.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -18,8 +18,9 @@ use turbopack_core::{\n };\n \n use crate::{\n-    EcmascriptModuleContent, EcmascriptOptions,\n+    EcmascriptModuleContent,\n     references::async_module::{AsyncModuleOptions, OptionAsyncModuleOptions},\n+    runtime_functions::TURBOPACK_ASYNC_MODULE,\n     utils::{FormatIter, StringifyJs},\n };\n \n@@ -40,10 +41,8 @@ impl EcmascriptChunkItemContent {\n     pub async fn new(\n         content: Vc<EcmascriptModuleContent>,\n         chunking_context: Vc<Box<dyn ChunkingContext>>,\n-        options: Vc<EcmascriptOptions>,\n         async_module_options: Vc<OptionAsyncModuleOptions>,\n     ) -> Result<Vc<Self>> {\n-        let refresh = options.await?.refresh;\n         let externals = *chunking_context\n             .environment()\n             .supports_commonjs_externals()\n@@ -65,7 +64,6 @@ impl EcmascriptChunkItemContent {\n             options: if content.is_esm {\n                 EcmascriptChunkItemOptions {\n                     strict: true,\n-                    refresh,\n                     externals,\n                     async_module,\n                     stub_require: true,\n@@ -78,7 +76,6 @@ impl EcmascriptChunkItemContent {\n \n                 EcmascriptChunkItemOptions {\n                     strict,\n-                    refresh,\n                     externals,\n                     // These things are not available in ESM\n                     module: true,\n@@ -94,22 +91,12 @@ impl EcmascriptChunkItemContent {\n     #[turbo_tasks::function]\n     pub async fn module_factory(&self) -> Result<Vc<Code>> {\n         let mut args = Vec::new();\n-        if self.options.async_module.is_some() {\n-            args.push(\"a: __turbopack_async_module__\");\n-        }\n-        if self.options.refresh {\n-            args.push(\"k: __turbopack_refresh__\");\n-        }\n-        if self.options.module || self.options.refresh {\n+        if self.options.module {\n             args.push(\"m: module\");\n         }\n         if self.options.exports {\n             args.push(\"e: exports\");\n         }\n-        if self.options.wasm {\n-            args.push(\"w: __turbopack_wasm__\");\n-            args.push(\"u: __turbopack_wasm_module__\");\n-        }\n \n         let mut code = CodeBuilder::default();\n         let additional_ids = self.additional_ids.iter().try_join().await?;\n@@ -128,8 +115,11 @@ impl EcmascriptChunkItemContent {\n         }\n \n         if self.options.async_module.is_some() {\n-            code += \"__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, \\\n-                     __turbopack_async_result__) => { try {\\n\";\n+            writeln!(\n+                code,\n+                \"return {TURBOPACK_ASYNC_MODULE}(async (__turbopack_handle_async_dependencies__, \\\n+                 __turbopack_async_result__) => {{ try {{\\n\"\n+            )?;\n         } else if !args.is_empty() {\n             code += \"{\\n\";\n         }\n@@ -168,9 +158,6 @@ impl EcmascriptChunkItemContent {\n pub struct EcmascriptChunkItemOptions {\n     /// Whether this chunk item should be in \"use strict\" mode.\n     pub strict: bool,\n-    /// Whether this chunk item's module factory should include a\n-    /// `__turbopack_refresh__` argument.\n-    pub refresh: bool,\n     /// Whether this chunk item's module factory should include a `module`\n     /// argument.\n     pub module: bool,\n@@ -186,9 +173,6 @@ pub struct EcmascriptChunkItemOptions {\n     /// Whether this chunk item's module is async (either has a top level await\n     /// or is importing async modules).\n     pub async_module: Option<AsyncModuleOptions>,\n-    /// Whether this chunk item's module factory should include\n-    /// `__turbopack_wasm__` to load WebAssembly.\n-    pub wasm: bool,\n     pub placeholder_for_future_extensions: (),\n }\n "
        },
        {
            "sha": "95734651b5c5de13f86405dbf732113389ee5dcf",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -178,7 +178,6 @@ pub struct OptionTreeShaking(pub Option<TreeShakingMode>);\n #[turbo_tasks::value(shared)]\n #[derive(Hash, Debug, Default, Copy, Clone)]\n pub struct EcmascriptOptions {\n-    pub refresh: bool,\n     /// variant of tree shaking to use\n     pub tree_shaking_mode: Option<TreeShakingMode>,\n     /// module is forced to a specific type (happens e. g. for .cjs and .mjs)\n@@ -824,14 +823,9 @@ impl EcmascriptChunkItem for ModuleChunkItem {\n                 .module\n                 .module_content(*this.chunking_context, async_module_info);\n \n-            EcmascriptChunkItemContent::new(\n-                content,\n-                *this.chunking_context,\n-                this.module.options(),\n-                async_module_options,\n-            )\n-            .resolve()\n-            .await\n+            EcmascriptChunkItemContent::new(content, *this.chunking_context, async_module_options)\n+                .resolve()\n+                .await\n         }\n         .instrument(span)\n         .await"
        },
        {
            "sha": "97b287343b358b1a9f34bc330f0515ed32bb5241",
            "filename": "turbopack/crates/turbopack-ecmascript/src/merged_module.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmerged_module.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -173,7 +173,6 @@ impl EcmascriptChunkItem for MergedEcmascriptModuleChunkItem {\n         Ok(EcmascriptChunkItemContent::new(\n             content,\n             *self.chunking_context,\n-            *module.options,\n             async_module_options,\n         ))\n     }"
        },
        {
            "sha": "f4502a7af47913a1ffac960edbdc9be76da613a7",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/external_module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -21,7 +21,7 @@ use turbopack_core::{\n };\n \n use crate::{\n-    EcmascriptModuleContent, EcmascriptOptions,\n+    EcmascriptModuleContent,\n     chunk::{\n         EcmascriptChunkItem, EcmascriptChunkItemContent, EcmascriptChunkPlaceable,\n         EcmascriptChunkType, EcmascriptExports,\n@@ -394,7 +394,6 @@ impl EcmascriptChunkItem for CachedExternalModuleChunkItem {\n         EcmascriptChunkItemContent::new(\n             self.module.content(),\n             *self.chunking_context,\n-            EcmascriptOptions::default().cell(),\n             async_module_options,\n         )\n     }"
        },
        {
            "sha": "f96232d35e58deff54294ee515581b48874483de",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/member.rs",
            "status": "modified",
            "additions": 25,
            "deletions": 4,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmember.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmember.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmember.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -1,7 +1,12 @@\n use anyhow::Result;\n use serde::{Deserialize, Serialize};\n use swc_core::{\n-    common::DUMMY_SP,\n+    atoms::atom,\n+    base::SwcComments,\n+    common::{\n+        DUMMY_SP, Span,\n+        comments::{Comment, CommentKind, Comments},\n+    },\n     ecma::ast::{Expr, MemberExpr, MemberProp},\n     quote,\n };\n@@ -31,19 +36,35 @@ impl MemberReplacement {\n         &self,\n         _chunking_context: Vc<Box<dyn ChunkingContext>>,\n     ) -> Result<CodeGeneration> {\n+        let comments = SwcComments::default();\n+\n         let key = self.key.clone();\n         let value = self.value.clone();\n \n+        let comments_clone = comments.clone();\n         let visitor = create_visitor!(self.path, visit_mut_expr, |expr: &mut Expr| {\n+            let span = Span::dummy_with_cmt();\n+\n+            comments_clone.add_leading(\n+                span.lo,\n+                Comment {\n+                    kind: CommentKind::Block,\n+                    span: DUMMY_SP,\n+                    text: atom!(\"TURBOPACK member replacement\"),\n+                },\n+            );\n             let member = Expr::Member(MemberExpr {\n-                span: DUMMY_SP,\n+                span,\n                 obj: Box::new(Expr::Ident((&*key).into())),\n                 prop: MemberProp::Ident((&*value).into()),\n             });\n-            *expr = quote!(\"(\\\"TURBOPACK member replacement\\\", $e)\" as Expr, e: Expr = member);\n+            *expr = quote!(\"$e\" as Expr, e: Expr = member);\n         });\n \n-        Ok(CodeGeneration::visitors(vec![visitor]))\n+        Ok(CodeGeneration::visitors_with_comments(\n+            vec![visitor],\n+            comments,\n+        ))\n     }\n }\n "
        },
        {
            "sha": "3d0f9a8cdb4780ca5f5b7e12a21d3f90f06c3825",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -157,8 +157,8 @@ use crate::{\n         util::InlineSourceMap,\n     },\n     runtime_functions::{\n-        TURBOPACK_EXPORT_NAMESPACE, TURBOPACK_EXPORT_VALUE, TURBOPACK_REQUIRE_REAL,\n-        TURBOPACK_REQUIRE_STUB, TURBOPACK_RUNTIME_FUNCTION_SHORTCUTS,\n+        TURBOPACK_EXPORT_NAMESPACE, TURBOPACK_EXPORT_VALUE, TURBOPACK_EXPORTS,\n+        TURBOPACK_REQUIRE_REAL, TURBOPACK_REQUIRE_STUB, TURBOPACK_RUNTIME_FUNCTION_SHORTCUTS,\n     },\n     tree_shake::{find_turbopack_part_id_in_asserts, part_of_module, split},\n     utils::{AstPathRange, module_value_to_well_known_object},\n@@ -1548,9 +1548,9 @@ async fn compile_time_info_for_module_type(\n         .or_insert(if is_esm {\n             FreeVarReference::Value(CompileTimeDefineValue::Undefined)\n         } else {\n-            // Insert `__turbopack_context__.e` which is equivalent to `module.exports` but should\n+            // Insert shortcut which is equivalent to `module.exports` but should\n             // not be shadowed by user symbols.\n-            FreeVarReference::Member(rcstr!(\"__turbopack_context__\"), rcstr!(\"e\"))\n+            TURBOPACK_EXPORTS.into()\n         });\n     free_var_references\n         .entry(vec!["
        },
        {
            "sha": "7f768961d9b9607d6f1399a83b1b641d64fea327",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/pattern_mapping.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fpattern_mapping.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fpattern_mapping.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fpattern_mapping.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -31,8 +31,8 @@ use super::util::{request_to_string, throw_module_not_found_expr};\n use crate::{\n     references::util::throw_module_not_found_error_expr,\n     runtime_functions::{\n-        TURBOPACK_EXTERNAL_IMPORT, TURBOPACK_EXTERNAL_REQUIRE, TURBOPACK_IMPORT,\n-        TURBOPACK_MODULE_CONTEXT, TURBOPACK_REQUIRE,\n+        TURBOPACK_ASYNC_LOADER, TURBOPACK_EXTERNAL_IMPORT, TURBOPACK_EXTERNAL_REQUIRE,\n+        TURBOPACK_IMPORT, TURBOPACK_MODULE_CONTEXT, TURBOPACK_REQUIRE,\n     },\n     utils::module_id_to_lit,\n };\n@@ -208,9 +208,8 @@ impl SinglePatternMapping {\n                 &format!(\"Unsupported external type {ty:?} for dynamic import reference\"),\n             ),\n             Self::ModuleLoader(module_id) => {\n-                quote!(\"($turbopack_require($id))($turbopack_import)\" as Expr,\n-                    turbopack_require: Expr = TURBOPACK_REQUIRE.into(),\n-                    turbopack_import: Expr = TURBOPACK_IMPORT.into(),\n+                quote!(\"$turbopack_async_loader($id)\" as Expr,\n+                    turbopack_async_loader: Expr = TURBOPACK_ASYNC_LOADER.into(),\n                     id: Expr = module_id_to_lit(module_id)\n                 )\n             }"
        },
        {
            "sha": "14bfcf6ebb1df9bc11537460401ae84e6c660f1d",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/unreachable.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Funreachable.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Funreachable.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Funreachable.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -1,9 +1,9 @@\n-use std::{mem::take, sync::LazyLock};\n+use std::mem::take;\n \n use anyhow::Result;\n use serde::{Deserialize, Serialize};\n use swc_core::{\n-    atoms::Atom,\n+    atoms::atom,\n     base::SwcComments,\n     common::{\n         DUMMY_SP, Span, Spanned,\n@@ -37,8 +37,6 @@ pub struct Unreachable {\n     range: AstPathRange,\n }\n \n-static UNREACHABLE_ATOM: LazyLock<Atom> = LazyLock::new(|| \"TURBOPACK unreachable\".into());\n-\n struct UnreachableModifier {\n     comments: SwcComments,\n }\n@@ -51,7 +49,7 @@ impl AstModifier for UnreachableModifier {\n \n         *node = Expr::Lit(Lit::Str(Str {\n             span,\n-            value: UNREACHABLE_ATOM.clone(),\n+            value: atom!(\"TURBOPACK unreachable\"),\n             raw: None,\n         }));\n     }\n@@ -66,7 +64,7 @@ impl AstModifier for UnreachableModifier {\n             Comment {\n                 kind: CommentKind::Line,\n                 span: DUMMY_SP,\n-                text: UNREACHABLE_ATOM.clone(),\n+                text: atom!(\"TURBOPACK unreachable\"),\n             },\n         );\n \n@@ -113,7 +111,7 @@ impl UnreachableRangeModifier {\n                 Comment {\n                     kind: CommentKind::Line,\n                     span: DUMMY_SP,\n-                    text: UNREACHABLE_ATOM.clone(),\n+                    text: atom!(\"TURBOPACK unreachable\"),\n                 },\n             );\n "
        },
        {
            "sha": "4ef5aa637eff874413fc1c3e603813431e286322",
            "filename": "turbopack/crates/turbopack-ecmascript/src/runtime_functions.rs",
            "status": "modified",
            "additions": 26,
            "deletions": 2,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fruntime_functions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fruntime_functions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fruntime_functions.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -12,6 +12,13 @@ impl TurbopackRuntimeFunctionShortcut {\n     pub const fn new(full: &'static str, shortcut: &'static str) -> Self {\n         Self { full, shortcut }\n     }\n+\n+    pub fn bound(&self) -> String {\n+        format!(\n+            \"__turbopack_context__.{}.bind(__turbopack_context__)\",\n+            self.shortcut\n+        )\n+    }\n }\n \n impl Display for TurbopackRuntimeFunctionShortcut {\n@@ -36,8 +43,20 @@ impl From<&TurbopackRuntimeFunctionShortcut> for Expr {\n     }\n }\n \n+impl<'l> From<&'l TurbopackRuntimeFunctionShortcut> for &'l str {\n+    fn from(val: &TurbopackRuntimeFunctionShortcut) -> Self {\n+        val.full\n+    }\n+}\n+\n+pub const TURBOPACK_EXPORTS: &TurbopackRuntimeFunctionShortcut =\n+    &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.e\", \"e\");\n+pub const TURBOPACK_MODULE: &TurbopackRuntimeFunctionShortcut =\n+    &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.m\", \"m\");\n pub const TURBOPACK_REQUIRE: &TurbopackRuntimeFunctionShortcut =\n     &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.r\", \"r\");\n+pub const TURBOPACK_ASYNC_LOADER: &TurbopackRuntimeFunctionShortcut =\n+    &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.A\", \"A\");\n pub const TURBOPACK_MODULE_CONTEXT: &TurbopackRuntimeFunctionShortcut =\n     &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.f\", \"f\");\n pub const TURBOPACK_IMPORT: &TurbopackRuntimeFunctionShortcut =\n@@ -80,10 +99,14 @@ pub const TURBOPACK_REQUIRE_STUB: &TurbopackRuntimeFunctionShortcut =\n     &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.z\", \"z\");\n pub const TURBOPACK_REQUIRE_REAL: &TurbopackRuntimeFunctionShortcut =\n     &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.t\", \"t\");\n+pub const TURBOPACK_WASM: &TurbopackRuntimeFunctionShortcut =\n+    &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.w\", \"w\");\n+pub const TURBOPACK_WASM_MODULE: &TurbopackRuntimeFunctionShortcut =\n+    &TurbopackRuntimeFunctionShortcut::new(\"__turbopack_context__.u\", \"u\");\n \n /// Adding an entry to this list will automatically ensure that `__turbopack_XXX__` can be called\n /// from user code (by inserting a replacement into free_var_references)\n-pub const TURBOPACK_RUNTIME_FUNCTION_SHORTCUTS: [(&str, &TurbopackRuntimeFunctionShortcut); 22] = [\n+pub const TURBOPACK_RUNTIME_FUNCTION_SHORTCUTS: [(&str, &TurbopackRuntimeFunctionShortcut); 23] = [\n     (\"__turbopack_require__\", TURBOPACK_REQUIRE),\n     (\"__turbopack_module_context__\", TURBOPACK_MODULE_CONTEXT),\n     (\"__turbopack_import__\", TURBOPACK_IMPORT),\n@@ -105,7 +128,6 @@ pub const TURBOPACK_RUNTIME_FUNCTION_SHORTCUTS: [(&str, &TurbopackRuntimeFunctio\n         TURBOPACK_RESOLVE_MODULE_ID_PATH,\n     ),\n     (\"__turbopack_worker_blob_url__\", TURBOPACK_WORKER_BLOB_URL),\n-    (\"__turbopack_async_module__\", TURBOPACK_ASYNC_MODULE),\n     (\"__turbopack_external_require__\", TURBOPACK_EXTERNAL_REQUIRE),\n     (\"__turbopack_external_import__\", TURBOPACK_EXTERNAL_IMPORT),\n     (\"__turbopack_refresh__\", TURBOPACK_REFRESH),\n@@ -115,4 +137,6 @@ pub const TURBOPACK_RUNTIME_FUNCTION_SHORTCUTS: [(&str, &TurbopackRuntimeFunctio\n         \"__turbopack_clear_chunk_cache__\",\n         TURBOPACK_CLEAR_CHUNK_CACHE,\n     ),\n+    (\"__turbopack_wasm__\", TURBOPACK_WASM),\n+    (\"__turbopack_wasm_module__\", TURBOPACK_WASM_MODULE),\n ];"
        },
        {
            "sha": "3e5b89d5ff889116591b5d46baa7f06883986255",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/facade/chunk_item.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fchunk_item.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fchunk_item.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fchunk_item.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -8,7 +8,7 @@ use turbopack_core::{\n \n use super::module::EcmascriptModuleFacadeModule;\n use crate::{\n-    EcmascriptAnalyzable, EcmascriptOptions,\n+    EcmascriptAnalyzable,\n     chunk::{\n         EcmascriptChunkItem, EcmascriptChunkItemContent, EcmascriptChunkPlaceable,\n         EcmascriptChunkType,\n@@ -48,7 +48,6 @@ impl EcmascriptChunkItem for EcmascriptModuleFacadeChunkItem {\n         Ok(EcmascriptChunkItemContent::new(\n             content,\n             *chunking_context,\n-            EcmascriptOptions::default().cell(),\n             async_module_options,\n         ))\n     }"
        },
        {
            "sha": "100f54b9c63d313cbdf9c6440b98b7d707bf6249",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/locals/chunk_item.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fchunk_item.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fchunk_item.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Flocals%2Fchunk_item.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -48,7 +48,6 @@ impl EcmascriptChunkItem for EcmascriptModuleLocalsChunkItem {\n         Ok(EcmascriptChunkItemContent::new(\n             content,\n             *chunking_context,\n-            *original_module.await?.options,\n             async_module_options,\n         ))\n     }"
        },
        {
            "sha": "a49f21808a341d0440d24bf69f6b76f0f017729c",
            "filename": "turbopack/crates/turbopack-ecmascript/src/transform/mod.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -27,6 +27,8 @@ use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{environment::Environment, source::Source};\n \n+use crate::runtime_functions::{TURBOPACK_MODULE, TURBOPACK_REFRESH};\n+\n #[turbo_tasks::value]\n #[derive(Debug, Clone, Hash)]\n pub enum EcmascriptInputTransform {\n@@ -180,8 +182,8 @@ impl EcmascriptInputTransform {\n                     development: Some(*development),\n                     import_source: import_source.await?.as_deref().map(Atom::from),\n                     refresh: if *refresh {\n+                        debug_assert_eq!(TURBOPACK_REFRESH.full, \"__turbopack_context__.k\");\n                         Some(swc_core::ecma::transforms::react::RefreshOptions {\n-                            // __turbopack_context__.k is __turbopack_refresh__\n                             refresh_reg: atom!(\"__turbopack_context__.k.register\"),\n                             refresh_sig: atom!(\"__turbopack_context__.k.signature\"),\n                             ..Default::default()\n@@ -207,12 +209,14 @@ impl EcmascriptInputTransform {\n                 );\n \n                 if *refresh {\n+                    debug_assert_eq!(TURBOPACK_REFRESH.full, \"__turbopack_context__.k\");\n+                    debug_assert_eq!(TURBOPACK_MODULE.full, \"__turbopack_context__.m\");\n                     let stmt = quote!(\n                         // AMP / No-JS mode does not inject these helpers\n-                        \"\\nif (typeof globalThis.$RefreshHelpers$ === 'object' && \\\n+                        \"if (typeof globalThis.$RefreshHelpers$ === 'object' && \\\n                          globalThis.$RefreshHelpers !== null) { \\\n-                         __turbopack_context__.k.registerExports(module, \\\n-                         globalThis.$RefreshHelpers$); }\\n\" as Stmt\n+                         __turbopack_context__.k.registerExports(__turbopack_context__.m, \\\n+                         globalThis.$RefreshHelpers$); }\" as Stmt\n                     );\n \n                     match program {"
        },
        {
            "sha": "f9e1374f4e6a057d857e9c2328a8e24ebd45b8ac",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/chunk_item.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fchunk_item.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fchunk_item.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fchunk_item.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -54,7 +54,6 @@ impl EcmascriptChunkItem for EcmascriptModulePartChunkItem {\n         Ok(EcmascriptChunkItemContent::new(\n             content,\n             *self.chunking_context,\n-            *self.module.await?.full_module.await?.options,\n             async_module_options,\n         ))\n     }"
        },
        {
            "sha": "d3f0c70f52dc938a8f98104c95463a3c4f9ecd1c",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/dynamic-import/output/4c35f_tests_snapshot_basic-tree-shake_dynamic-import_input_index_92a5f455.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic-tree-shake%2Fdynamic-import%2Foutput%2F4c35f_tests_snapshot_basic-tree-shake_dynamic-import_input_index_92a5f455.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic-tree-shake%2Fdynamic-import%2Foutput%2F4c35f_tests_snapshot_basic-tree-shake_dynamic-import_input_index_92a5f455.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic-tree-shake%2Fdynamic-import%2Foutput%2F4c35f_tests_snapshot_basic-tree-shake_dynamic-import_input_index_92a5f455.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -5,7 +5,7 @@\n var { m: module, e: exports } = __turbopack_context__;\n {\n async function main() {\n-    const lib = await __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/dynamic-import/input/lib.js [test] (ecmascript, async loader)\")(__turbopack_context__.i);\n+    const lib = await __turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic-tree-shake/dynamic-import/input/lib.js [test] (ecmascript, async loader)\");\n     console.log(lib.cat);\n }\n main();"
        },
        {
            "sha": "e433b4c5b48b9a326363ad3d57a36a728d3f2112",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk/output/turbopack_crates_turbopack-tests_tests_snapshot_basic_async_chunk_input_46366300._.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_basic_async_chunk_input_46366300._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_basic_async_chunk_input_46366300._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_basic_async_chunk_input_46366300._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -15,7 +15,7 @@ var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbo\n ;\n ;\n (0, __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$basic$2f$async_chunk$2f$input$2f$node_modules$2f$bar$2f$index$2e$js__$5b$test$5d$__$28$ecmascript$29$__[\"bar\"])(true);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk/input/import.js [test] (ecmascript, async loader)\")(__turbopack_context__.i).then(({ foo })=>{\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk/input/import.js [test] (ecmascript, async loader)\").then(({ foo })=>{\n     foo(true);\n });\n }),"
        },
        {
            "sha": "544bcec2f15923e5b25a9d8398b500b82bdf9c86",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk/output/turbopack_crates_turbopack-tests_tests_snapshot_basic_async_chunk_input_46366300._.js.map",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_basic_async_chunk_input_46366300._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_basic_async_chunk_input_46366300._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_basic_async_chunk_input_46366300._.js.map?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -3,6 +3,6 @@\n   \"sources\": [],\n   \"sections\": [\n     {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk/input/shared.js\"],\"sourcesContent\":[\"// shared package\\n\"],\"names\":[],\"mappings\":\"AAAA,iBAAiB\"}},\n-    {\"offset\": {\"line\": 11, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk/input/index.js\"],\"sourcesContent\":[\"import { bar } from 'bar'\\nimport './shared'\\n\\nbar(true)\\n\\nimport('./import').then(({ foo }) => {\\n  foo(true)\\n})\\n\"],\"names\":[],\"mappings\":\";AAAA;AACA;;;AAEA,IAAA,gOAAG,EAAC;AAEJ,kLAAmB,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE;IAC9B,IAAI;AACN\"}},\n+    {\"offset\": {\"line\": 11, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk/input/index.js\"],\"sourcesContent\":[\"import { bar } from 'bar'\\nimport './shared'\\n\\nbar(true)\\n\\nimport('./import').then(({ foo }) => {\\n  foo(true)\\n})\\n\"],\"names\":[],\"mappings\":\";AAAA;AACA;;;AAEA,IAAA,gOAAG,EAAC;AAEJ,yJAAmB,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE;IAC9B,IAAI;AACN\"}},\n     {\"offset\": {\"line\": 24, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk/input/node_modules/bar/index.js\"],\"sourcesContent\":[\"export function bar(value) {\\n  console.assert(value);\\n}\\n\"],\"names\":[],\"mappings\":\";;;AAAO,SAAS,IAAI,KAAK;IACvB,QAAQ,MAAM,CAAC;AACjB\",\"ignoreList\":[0]}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "85f3a303eec95b9179700c53307fc9f280d3c688",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk_build/output/4e721_crates_turbopack-tests_tests_snapshot_basic_async_chunk_build_input_1e41378a._.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk_build%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_async_chunk_build_input_1e41378a._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk_build%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_async_chunk_build_input_1e41378a._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk_build%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_async_chunk_build_input_1e41378a._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -15,7 +15,7 @@ var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbo\n ;\n ;\n (0, __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$basic$2f$async_chunk_build$2f$input$2f$node_modules$2f$bar$2f$index$2e$js__$5b$test$5d$__$28$ecmascript$29$__[\"bar\"])(true);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk_build/input/import.js [test] (ecmascript, async loader)\")(__turbopack_context__.i).then(({ foo })=>{\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk_build/input/import.js [test] (ecmascript, async loader)\").then(({ foo })=>{\n     foo(true);\n });\n }),"
        },
        {
            "sha": "8a6743e1ae48d0d003074b7021acf93db649a989",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk_build/output/4e721_crates_turbopack-tests_tests_snapshot_basic_async_chunk_build_input_1e41378a._.js.map",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk_build%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_async_chunk_build_input_1e41378a._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk_build%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_async_chunk_build_input_1e41378a._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Fasync_chunk_build%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_async_chunk_build_input_1e41378a._.js.map?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -3,6 +3,6 @@\n   \"sources\": [],\n   \"sections\": [\n     {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk_build/input/shared.js\"],\"sourcesContent\":[\"// shared package\\n\"],\"names\":[],\"mappings\":\"AAAA,iBAAiB\"}},\n-    {\"offset\": {\"line\": 11, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk_build/input/index.js\"],\"sourcesContent\":[\"import { bar } from 'bar'\\nimport './shared'\\n\\nbar(true)\\n\\nimport('./import').then(({ foo }) => {\\n  foo(true)\\n})\\n\"],\"names\":[],\"mappings\":\";AAAA;AACA;;;AAEA,IAAA,sOAAG,EAAC;AAEJ,wLAAmB,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE;IAC9B,IAAI;AACN\"}},\n+    {\"offset\": {\"line\": 11, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk_build/input/index.js\"],\"sourcesContent\":[\"import { bar } from 'bar'\\nimport './shared'\\n\\nbar(true)\\n\\nimport('./import').then(({ foo }) => {\\n  foo(true)\\n})\\n\"],\"names\":[],\"mappings\":\";AAAA;AACA;;;AAEA,IAAA,sOAAG,EAAC;AAEJ,+JAAmB,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE;IAC9B,IAAI;AACN\"}},\n     {\"offset\": {\"line\": 24, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/async_chunk_build/input/node_modules/bar/index.js\"],\"sourcesContent\":[\"export function bar(value) {\\n  console.assert(value);\\n}\\n\"],\"names\":[],\"mappings\":\";;;AAAO,SAAS,IAAI,KAAK;IACvB,QAAQ,MAAM,CAAC;AACjB\",\"ignoreList\":[0]}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "d2aae27c9fb0a774b8c421564d214802d33abf8d",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/top-level-await/output/4e721_crates_turbopack-tests_tests_snapshot_basic_top-level-await_input_9acd43f4._.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Ftop-level-await%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_top-level-await_input_9acd43f4._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Ftop-level-await%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_top-level-await_input_9acd43f4._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Ftop-level-await%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_top-level-await_input_9acd43f4._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -8,15 +8,15 @@ __turbopack_context__.s({\n     \"AlternativeCreateUserAction\": ()=>AlternativeCreateUserAction,\n     \"CreateUserAction\": ()=>CreateUserAction\n });\n-const UserApi = __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/top-level-await/input/UserAPI.js [test] (ecmascript, async loader)\")(__turbopack_context__.i);\n+const UserApi = __turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/top-level-await/input/UserAPI.js [test] (ecmascript, async loader)\");\n const CreateUserAction = async (name)=>{\n     console.log('Creating user', name);\n     // These are normal awaits, because they are in an async function\n     const { createUser } = await UserApi;\n     await createUser(name);\n };\n const AlternativeCreateUserAction = async (name)=>{\n-    const { createUser } = await __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/top-level-await/input/UserAPI.js [test] (ecmascript, async loader)\")(__turbopack_context__.i);\n+    const { createUser } = await __turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/top-level-await/input/UserAPI.js [test] (ecmascript, async loader)\");\n     await createUser(name);\n } // Note: Using await import() at top-level doesn't make much sense\n  //       except in rare cases. It will import modules sequentially."
        },
        {
            "sha": "7a3352b222eca787855b3f71cec650754e600491",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/basic/top-level-await/output/4e721_crates_turbopack-tests_tests_snapshot_basic_top-level-await_input_aa0a0c39._.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Ftop-level-await%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_top-level-await_input_aa0a0c39._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Ftop-level-await%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_top-level-await_input_aa0a0c39._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fbasic%2Ftop-level-await%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_basic_top-level-await_input_aa0a0c39._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -3,8 +3,8 @@\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/top-level-await/input/db-connection.js [test] (ecmascript)\": ((__turbopack_context__) => {\n \"use strict\";\n \n-var { a: __turbopack_async_module__ } = __turbopack_context__;\n-__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {\n+return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {\n+\n __turbopack_context__.s({\n     \"close\": ()=>close,\n     \"dbCall\": ()=>dbCall\n@@ -29,8 +29,8 @@ __turbopack_async_result__();\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/basic/top-level-await/input/UserAPI.js [test] (ecmascript)\": ((__turbopack_context__) => {\n \"use strict\";\n \n-var { a: __turbopack_async_module__ } = __turbopack_context__;\n-__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {\n+return __turbopack_context__.a(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {\n+\n __turbopack_context__.s({\n     \"createUser\": ()=>createUser\n });"
        },
        {
            "sha": "f187b05fcdafa1e17b9f863493b2d0fedeb89e4c",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/comptime/typeof/output/turbopack_crates_turbopack-tests_tests_snapshot_comptime_typeof_input_80f5724c._.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Ftypeof%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_comptime_typeof_input_80f5724c._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Ftypeof%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_comptime_typeof_input_80f5724c._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Ftypeof%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_comptime_typeof_input_80f5724c._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -15,7 +15,7 @@ console.log('typeof import.meta', (\"TURBOPACK compile-time value\", \"object\"));\n console.log('typeof module', (\"TURBOPACK compile-time value\", \"object\"));\n console.log('typeof exports', (\"TURBOPACK compile-time value\", \"object\"));\n // CJS, should be real require\n-console.log((\"TURBOPACK member replacement\", __turbopack_context__.t));\n+console.log(/*TURBOPACK member replacement*/ __turbopack_context__.t);\n }}),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/comptime/typeof/input/dep.js [test] (ecmascript)\": ((__turbopack_context__) => {\n \n@@ -39,7 +39,7 @@ console.log('typeof import.meta', (\"TURBOPACK compile-time value\", \"object\"));\n console.log('typeof module', (\"TURBOPACK compile-time value\", \"undefined\"));\n console.log('typeof exports', (\"TURBOPACK compile-time value\", \"undefined\"));\n // ESM, should be require stub\n-console.log((\"TURBOPACK member replacement\", __turbopack_context__.z));\n+console.log(/*TURBOPACK member replacement*/ __turbopack_context__.z);\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/comptime/typeof/input/esm-specified.mjs [test] (ecmascript)\": ((__turbopack_context__) => {\n \"use strict\";\n@@ -56,7 +56,7 @@ console.log('typeof import.meta', (\"TURBOPACK compile-time value\", \"object\"));\n console.log('typeof module', (\"TURBOPACK compile-time value\", \"undefined\"));\n console.log('typeof exports', (\"TURBOPACK compile-time value\", \"undefined\"));\n // ESM, should be require stub\n-console.log((\"TURBOPACK member replacement\", __turbopack_context__.z));\n+console.log(/*TURBOPACK member replacement*/ __turbopack_context__.z);\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/comptime/typeof/input/index.js [test] (ecmascript)\": ((__turbopack_context__) => {\n \"use strict\";"
        },
        {
            "sha": "493a5a21904870631fdac7b7378fe82d9161bffb",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/css/css-modules/output/turbopack_crates_turbopack-tests_tests_snapshot_css_css-modules_input_8f2e7f32._.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcss-modules%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_css-modules_input_8f2e7f32._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcss-modules%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_css-modules_input_8f2e7f32._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcss-modules%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_css-modules_input_8f2e7f32._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -12,7 +12,7 @@ __turbopack_context__.v({\n __turbopack_context__.s({});\n var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$css$2d$modules$2f$input$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/css-modules/input/style.module.css [test] (css module)\");\n ;\n-console.log(__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$css$2d$modules$2f$input$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__[\"default\"], __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/css-modules/input/style.module.css [test] (css module, async loader)\")(__turbopack_context__.i));\n+console.log(__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$css$2d$modules$2f$input$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__[\"default\"], __turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/css-modules/input/style.module.css [test] (css module, async loader)\"));\n }),\n }]);\n "
        },
        {
            "sha": "8cf18b733af3ef94ca2cab552403c198091e41d7",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/css/css/output/turbopack_crates_turbopack-tests_tests_snapshot_css_css_input_6dc4af09._.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcss%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_css_input_6dc4af09._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcss%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_css_input_6dc4af09._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcss%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_css_input_6dc4af09._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -20,7 +20,7 @@ var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbo\n ;\n ;\n ;\n-console.log(__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$css$2f$input$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__[\"default\"], __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$css$2f$input$2f$node_modules$2f$foo$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__[\"default\"], __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/css/input/node_modules/foo/style.css [test] (css, async loader)\")(__turbopack_context__.i));\n+console.log(__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$css$2f$input$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__[\"default\"], __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$css$2f$input$2f$node_modules$2f$foo$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__[\"default\"], __turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/css/input/node_modules/foo/style.css [test] (css, async loader)\"));\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/css/input/node_modules/foo/style.module.css [test] (css module)\": ((__turbopack_context__) => {\n "
        },
        {
            "sha": "02126c787ce5e4e3681dceeb52b4494e743cfc93",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/output/turbopack_crates_turbopack-tests_tests_snapshot_css_cycle_input_index_2a740bfb.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcycle%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_cycle_input_index_2a740bfb.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcycle%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_cycle_input_index_2a740bfb.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcycle%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_cycle_input_index_2a740bfb.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -4,11 +4,11 @@\n \n var { m: module, e: exports } = __turbopack_context__;\n {\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/1.css [test] (css, async loader)\")(__turbopack_context__.i);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/2.css [test] (css, async loader)\")(__turbopack_context__.i);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/x.css [test] (css, async loader)\")(__turbopack_context__.i);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/y.css [test] (css, async loader)\")(__turbopack_context__.i);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/i.css [test] (css, async loader)\")(__turbopack_context__.i);\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/1.css [test] (css, async loader)\");\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/2.css [test] (css, async loader)\");\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/x.css [test] (css, async loader)\");\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/y.css [test] (css, async loader)\");\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle/input/i.css [test] (css, async loader)\");\n }}),\n }]);\n "
        },
        {
            "sha": "68ce94262db45e3cca7dff0254b9e67493d8f259",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/css/cycle2/output/turbopack_crates_turbopack-tests_tests_snapshot_css_cycle2_input_index_d9d7a2bc.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcycle2%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_cycle2_input_index_d9d7a2bc.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcycle2%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_cycle2_input_index_d9d7a2bc.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fcycle2%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_cycle2_input_index_d9d7a2bc.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -4,8 +4,8 @@\n \n var { m: module, e: exports } = __turbopack_context__;\n {\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle2/input/1.css [test] (css, async loader)\")(__turbopack_context__.i);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle2/input/2.css [test] (css, async loader)\")(__turbopack_context__.i);\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle2/input/1.css [test] (css, async loader)\");\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/cycle2/input/2.css [test] (css, async loader)\");\n }}),\n }]);\n "
        },
        {
            "sha": "5a21215379680a9f48d492dbae712f0067df0721",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/css/embed-url/output/turbopack_crates_turbopack-tests_tests_snapshot_css_embed-url_input_4242144a._.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fembed-url%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_embed-url_input_4242144a._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fembed-url%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_embed-url_input_4242144a._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fembed-url%2Foutput%2Fturbopack_crates_turbopack-tests_tests_snapshot_css_embed-url_input_4242144a._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -13,7 +13,7 @@ __turbopack_context__.s({});\n var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$embed$2d$url$2f$input$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/embed-url/input/style.module.css [test] (css module)\");\n ;\n ;\n-console.log(__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$embed$2d$url$2f$input$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__[\"default\"], __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/embed-url/input/style.module.css [test] (css module, async loader)\")(__turbopack_context__.i), __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/embed-url/input/style.css [test] (css, async loader)\")(__turbopack_context__.i));\n+console.log(__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$css$2f$embed$2d$url$2f$input$2f$style$2e$module$2e$css__$5b$test$5d$__$28$css__module$29$__[\"default\"], __turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/embed-url/input/style.module.css [test] (css module, async loader)\"), __turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/embed-url/input/style.css [test] (css, async loader)\"));\n }),\n }]);\n "
        },
        {
            "sha": "7a7eb1b072b5585b59544b50904bdc11141ae460",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/css/split-shared/output/4e721_crates_turbopack-tests_tests_snapshot_css_split-shared_input_index_fc583b08.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fsplit-shared%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_css_split-shared_input_index_fc583b08.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fsplit-shared%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_css_split-shared_input_index_fc583b08.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcss%2Fsplit-shared%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_css_split-shared_input_index_fc583b08.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -4,9 +4,9 @@\n \n var { m: module, e: exports } = __turbopack_context__;\n {\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/split-shared/input/entry.css [test] (css, async loader)\")(__turbopack_context__.i);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/split-shared/input/b1.css [test] (css, async loader)\")(__turbopack_context__.i);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/split-shared/input/entry2.css [test] (css, async loader)\")(__turbopack_context__.i);\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/split-shared/input/entry.css [test] (css, async loader)\");\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/split-shared/input/b1.css [test] (css, async loader)\");\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/css/split-shared/input/entry2.css [test] (css, async loader)\");\n }}),\n }]);\n "
        },
        {
            "sha": "6f3d8106129d09577a5c35bb266286109798732b",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/dynamic/output/4e721_crates_turbopack-tests_tests_snapshot_imports_dynamic_input_index_23ea6f5e.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fdynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_dynamic_input_index_23ea6f5e.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fdynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_dynamic_input_index_23ea6f5e.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fdynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_dynamic_input_index_23ea6f5e.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -4,7 +4,7 @@\n \n var { m: module, e: exports } = __turbopack_context__;\n {\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/dynamic/input/vercel.mjs [test] (ecmascript, async loader)\")(__turbopack_context__.i).then(console.log);\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/dynamic/input/vercel.mjs [test] (ecmascript, async loader)\").then(console.log);\n }}),\n }]);\n "
        },
        {
            "sha": "8875ef5420eb929053a15396a140f43f91c7ccc6",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/dynamic/output/4e721_crates_turbopack-tests_tests_snapshot_imports_dynamic_input_index_23ea6f5e.js.map",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fdynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_dynamic_input_index_23ea6f5e.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fdynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_dynamic_input_index_23ea6f5e.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fdynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_dynamic_input_index_23ea6f5e.js.map?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -2,5 +2,5 @@\n   \"version\": 3,\n   \"sources\": [],\n   \"sections\": [\n-    {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/dynamic/input/index.js\"],\"sourcesContent\":[\"import('./vercel.mjs').then(console.log)\\n\"],\"names\":[],\"mappings\":\"AAAA,iLAAuB,IAAI,CAAC,QAAQ,GAAG\"}}]\n+    {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/dynamic/input/index.js\"],\"sourcesContent\":[\"import('./vercel.mjs').then(console.log)\\n\"],\"names\":[],\"mappings\":\"AAAA,wJAAuB,IAAI,CAAC,QAAQ,GAAG\"}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "6513ee99b3abd43eff370463a51e3eabcf1cce19",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -30,8 +30,8 @@ const __TURBOPACK__import$2e$meta__ = {\n         return `file://${__turbopack_context__.P(\"turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js\")}`;\n     }\n };\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.mjs [test] (ecmascript, async loader)\")(__turbopack_context__.i).then(console.log);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.mjs [test] (ecmascript, async loader)\")(__turbopack_context__.i).then(console.log);\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.mjs [test] (ecmascript, async loader)\").then(console.log);\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.mjs [test] (ecmascript, async loader)\").then(console.log);\n console.log(__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.cjs [test] (ecmascript)\"));\n new Worker(__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.cjs [test] (ecmascript, worker loader)\"));\n // turbopack shouldn't attempt to bundle these, and they should be preserved in the output"
        },
        {
            "sha": "cc425fc19d31e54a70b58fa3fe386b3597440cc6",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -3,5 +3,5 @@\n   \"sources\": [],\n   \"sections\": [\n     {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.cjs\"],\"sourcesContent\":[\"module.exports = 'turbopack'\\n\"],\"names\":[],\"mappings\":\"AAAA,OAAO,OAAO,GAAG\"}},\n-    {\"offset\": {\"line\": 24, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js\"],\"sourcesContent\":[\"import('./vercel.mjs').then(console.log)\\nimport(/* webpackIgnore: false */ './vercel.mjs').then(console.log)\\nconsole.log(require('./vercel.cjs'))\\nnew Worker(\\n  /* turbopackIgnore: false */ new URL('./vercel.cjs', import.meta.url)\\n)\\n\\n// turbopack shouldn't attempt to bundle these, and they should be preserved in the output\\nimport(/* webpackIgnore: true */ './ignore.mjs')\\nimport(/* turbopackIgnore: true */ './ignore.mjs')\\n\\n// this should work for cjs requires too\\nrequire(/* webpackIgnore: true */ './ignore.cjs')\\nrequire(/* turbopackIgnore: true */ './ignore.cjs')\\n\\nnew Worker(\\n  /* turbopackIgnore: true */ new URL('./ignore-worker.cjs', import.meta.url)\\n)\\nnew Worker(\\n  /* webpackIgnore: true */ new URL('./ignore-worker.cjs', import.meta.url)\\n)\\n\\nexport function foo(plugin) {\\n  return require(/* turbopackIgnore: true */ plugin)\\n}\\n\"],\"names\":[],\"mappings\":\";;;;;;;;AAAA,yLAAuB,IAAI,CAAC,QAAQ,GAAG;AACvC,yLAAkD,IAAI,CAAC,QAAQ,GAAG;AAClE,QAAQ,GAAG;AACX,IAAI;AAIJ,0FAA0F;AAC1F,MAAM,CAAC,uBAAuB,GAAG;AACjC,MAAM,CAAC,yBAAyB,GAAG;AAEnC,wCAAwC;AACxC,QAAQ,uBAAuB,GAAG;AAClC,QAAQ,yBAAyB,GAAG;AAEpC,IAAI;AAGJ,IAAI;AAIG,SAAS,IAAI,MAAM;IACxB,OAAO,QAAQ,yBAAyB,GAAG;AAC7C\"}}]\n+    {\"offset\": {\"line\": 24, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js\"],\"sourcesContent\":[\"import('./vercel.mjs').then(console.log)\\nimport(/* webpackIgnore: false */ './vercel.mjs').then(console.log)\\nconsole.log(require('./vercel.cjs'))\\nnew Worker(\\n  /* turbopackIgnore: false */ new URL('./vercel.cjs', import.meta.url)\\n)\\n\\n// turbopack shouldn't attempt to bundle these, and they should be preserved in the output\\nimport(/* webpackIgnore: true */ './ignore.mjs')\\nimport(/* turbopackIgnore: true */ './ignore.mjs')\\n\\n// this should work for cjs requires too\\nrequire(/* webpackIgnore: true */ './ignore.cjs')\\nrequire(/* turbopackIgnore: true */ './ignore.cjs')\\n\\nnew Worker(\\n  /* turbopackIgnore: true */ new URL('./ignore-worker.cjs', import.meta.url)\\n)\\nnew Worker(\\n  /* webpackIgnore: true */ new URL('./ignore-worker.cjs', import.meta.url)\\n)\\n\\nexport function foo(plugin) {\\n  return require(/* turbopackIgnore: true */ plugin)\\n}\\n\"],\"names\":[],\"mappings\":\";;;;;;;;AAAA,gKAAuB,IAAI,CAAC,QAAQ,GAAG;AACvC,gKAAkD,IAAI,CAAC,QAAQ,GAAG;AAClE,QAAQ,GAAG;AACX,IAAI;AAIJ,0FAA0F;AAC1F,MAAM,CAAC,uBAAuB,GAAG;AACjC,MAAM,CAAC,yBAAyB,GAAG;AAEnC,wCAAwC;AACxC,QAAQ,uBAAuB,GAAG;AAClC,QAAQ,yBAAyB,GAAG;AAEpC,IAAI;AAGJ,IAAI;AAIG,SAAS,IAAI,MAAM;IACxB,OAAO,QAAQ,yBAAyB,GAAG;AAC7C\"}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "e37526e0f2c82063af5fa4003e5967bde9d4bae8",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/static-and-dynamic/output/4e721_crates_turbopack-tests_tests_snapshot_imports_static-and-dynamic_input_ab9cac73._.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fstatic-and-dynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_static-and-dynamic_input_ab9cac73._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fstatic-and-dynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_static-and-dynamic_input_ab9cac73._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fstatic-and-dynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_static-and-dynamic_input_ab9cac73._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -15,7 +15,7 @@ __turbopack_context__.s({});\n var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$imports$2f$static$2d$and$2d$dynamic$2f$input$2f$vercel$2e$mjs__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/static-and-dynamic/input/vercel.mjs [test] (ecmascript)\");\n ;\n console.log(__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$imports$2f$static$2d$and$2d$dynamic$2f$input$2f$vercel$2e$mjs__$5b$test$5d$__$28$ecmascript$29$__[\"default\"]);\n-__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/static-and-dynamic/input/vercel.mjs [test] (ecmascript, async loader)\")(__turbopack_context__.i).then(console.log);\n+__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/static-and-dynamic/input/vercel.mjs [test] (ecmascript, async loader)\").then(console.log);\n }),\n }]);\n "
        },
        {
            "sha": "0c66872add716629a7084a1195ca9d9a7956d006",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/static-and-dynamic/output/4e721_crates_turbopack-tests_tests_snapshot_imports_static-and-dynamic_input_ab9cac73._.js.map",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fstatic-and-dynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_static-and-dynamic_input_ab9cac73._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fstatic-and-dynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_static-and-dynamic_input_ab9cac73._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fstatic-and-dynamic%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_static-and-dynamic_input_ab9cac73._.js.map?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -3,5 +3,5 @@\n   \"sources\": [],\n   \"sections\": [\n     {\"offset\": {\"line\": 5, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/static-and-dynamic/input/vercel.mjs\"],\"sourcesContent\":[\"export default 'turbopack'\\n\"],\"names\":[],\"mappings\":\";;;uCAAe\"}},\n-    {\"offset\": {\"line\": 13, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/static-and-dynamic/input/index.js\"],\"sourcesContent\":[\"import img from './vercel.mjs'\\nconsole.log(img)\\n\\nimport('./vercel.mjs').then(console.log)\\n\"],\"names\":[],\"mappings\":\";AAAA;;AACA,QAAQ,GAAG,CAAC,8NAAG;AAEf,4LAAuB,IAAI,CAAC,QAAQ,GAAG\"}}]\n+    {\"offset\": {\"line\": 13, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/static-and-dynamic/input/index.js\"],\"sourcesContent\":[\"import img from './vercel.mjs'\\nconsole.log(img)\\n\\nimport('./vercel.mjs').then(console.log)\\n\"],\"names\":[],\"mappings\":\";AAAA;;AACA,QAAQ,GAAG,CAAC,8NAAG;AAEf,mKAAuB,IAAI,CAAC,QAAQ,GAAG\"}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "c745c4f4d082e875823384dddbae9f201816836f",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_build_runtime/output/[turbopack]_runtime.js",
            "status": "modified",
            "additions": 92,
            "deletions": 81,
            "changes": 173,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -8,6 +8,13 @@ const ASSET_PREFIX = \"/\";\n  * It will be prepended to the runtime code of each runtime.\n  */ /* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"./runtime-types.d.ts\" />\n const REEXPORTED_OBJECTS = Symbol('reexported objects');\n+/**\n+ * Constructs the `__turbopack_context__` object for a module.\n+ */ function Context(module) {\n+    this.m = module;\n+    this.e = module.exports;\n+}\n+const contextPrototype = Context.prototype;\n const hasOwnProperty = Object.prototype.hasOwnProperty;\n const toStringTag = typeof Symbol !== 'undefined' && Symbol.toStringTag;\n function defineProp(obj, name, options) {\n@@ -18,17 +25,23 @@ function getOverwrittenModule(moduleCache, id) {\n     if (!module) {\n         // This is invoked when a module is merged into another module, thus it wasn't invoked via\n         // instantiateModule and the cache entry wasn't created yet.\n-        module = {\n-            exports: {},\n-            error: undefined,\n-            loaded: false,\n-            id,\n-            namespaceObject: undefined\n-        };\n+        module = createModuleObject(id);\n         moduleCache[id] = module;\n     }\n     return module;\n }\n+/**\n+ * Creates the module object. Only done here to ensure all module objects have the same shape.\n+ */ function createModuleObject(id) {\n+    return {\n+        exports: {},\n+        error: undefined,\n+        loaded: false,\n+        id,\n+        namespaceObject: undefined,\n+        [REEXPORTED_OBJECTS]: undefined\n+    };\n+}\n /**\n  * Adds the getters to the exports object.\n  */ function esm(exports, getters) {\n@@ -57,14 +70,17 @@ function getOverwrittenModule(moduleCache, id) {\n }\n /**\n  * Makes the module an ESM with exports\n- */ function esmExport(module, exports, moduleCache, getters, id) {\n+ */ function esmExport(getters, id) {\n+    let module = this.m;\n+    let exports = this.e;\n     if (id != null) {\n-        module = getOverwrittenModule(moduleCache, id);\n+        module = getOverwrittenModule(this.c, id);\n         exports = module.exports;\n     }\n     module.namespaceObject = module.exports;\n     esm(exports, getters);\n }\n+contextPrototype.s = esmExport;\n function ensureDynamicExports(module, exports) {\n     let reexportedObjects = module[REEXPORTED_OBJECTS];\n     if (!reexportedObjects) {\n@@ -94,28 +110,35 @@ function ensureDynamicExports(module, exports) {\n }\n /**\n  * Dynamically exports properties from an object\n- */ function dynamicExport(module, exports, moduleCache, object, id) {\n+ */ function dynamicExport(object, id) {\n+    let module = this.m;\n+    let exports = this.e;\n     if (id != null) {\n-        module = getOverwrittenModule(moduleCache, id);\n+        module = getOverwrittenModule(this.c, id);\n         exports = module.exports;\n     }\n     ensureDynamicExports(module, exports);\n     if (typeof object === 'object' && object !== null) {\n         module[REEXPORTED_OBJECTS].push(object);\n     }\n }\n-function exportValue(module, moduleCache, value, id) {\n+contextPrototype.j = dynamicExport;\n+function exportValue(value, id) {\n+    let module = this.m;\n     if (id != null) {\n-        module = getOverwrittenModule(moduleCache, id);\n+        module = getOverwrittenModule(this.c, id);\n     }\n     module.exports = value;\n }\n-function exportNamespace(module, moduleCache, namespace, id) {\n+contextPrototype.v = exportValue;\n+function exportNamespace(namespace, id) {\n+    let module = this.m;\n     if (id != null) {\n-        module = getOverwrittenModule(moduleCache, id);\n+        module = getOverwrittenModule(this.c, id);\n     }\n     module.exports = module.namespaceObject = namespace;\n }\n+contextPrototype.n = exportNamespace;\n function createGetter(obj, key) {\n     return ()=>obj[key];\n }\n@@ -158,26 +181,34 @@ function createNS(raw) {\n         return Object.create(null);\n     }\n }\n-function esmImport(sourceModule, id) {\n-    const module = getOrInstantiateModuleFromParent(id, sourceModule);\n+function esmImport(id) {\n+    const module = getOrInstantiateModuleFromParent(id, this.m);\n     if (module.error) throw module.error;\n     // any ES module has to have `module.namespaceObject` defined.\n     if (module.namespaceObject) return module.namespaceObject;\n     // only ESM can be an async module, so we don't need to worry about exports being a promise here.\n     const raw = module.exports;\n     return module.namespaceObject = interopEsm(raw, createNS(raw), raw && raw.__esModule);\n }\n+contextPrototype.i = esmImport;\n+function asyncLoader(moduleId) {\n+    const loader = this.r(moduleId);\n+    return loader(this.i.bind(this));\n+}\n+contextPrototype.A = asyncLoader;\n // Add a simple runtime require so that environments without one can still pass\n // `typeof require` CommonJS checks so that exports are correctly registered.\n const runtimeRequire = // @ts-ignore\n typeof require === 'function' ? require : function require1() {\n     throw new Error('Unexpected use of runtime require');\n };\n-function commonJsRequire(sourceModule, id) {\n-    const module = getOrInstantiateModuleFromParent(id, sourceModule);\n+contextPrototype.t = runtimeRequire;\n+function commonJsRequire(id) {\n+    const module = getOrInstantiateModuleFromParent(id, this.m);\n     if (module.error) throw module.error;\n     return module.exports;\n }\n+contextPrototype.r = commonJsRequire;\n /**\n  * `require.context` and require/import expression runtime.\n  */ function moduleContext(map) {\n@@ -205,6 +236,7 @@ function commonJsRequire(sourceModule, id) {\n     };\n     return moduleContext;\n }\n+contextPrototype.f = moduleContext;\n /**\n  * Returns the path of a chunk defined by its data.\n  */ function getChunkPath(chunkData) {\n@@ -269,7 +301,8 @@ function wrapDeps(deps) {\n         };\n     });\n }\n-function asyncModule(module, body, hasAwait) {\n+function asyncModule(body, hasAwait) {\n+    const module = this.m;\n     const queue = hasAwait ? Object.assign([], {\n         status: -1\n     }) : undefined;\n@@ -331,6 +364,7 @@ function asyncModule(module, body, hasAwait) {\n         queue.status = 0;\n     }\n }\n+contextPrototype.a = asyncModule;\n /**\n  * A pseudo \"fake\" URL object to resolve to its relative path.\n  *\n@@ -355,6 +389,7 @@ function asyncModule(module, body, hasAwait) {\n     });\n };\n relativeURL.prototype = URL.prototype;\n+contextPrototype.U = relativeURL;\n /**\n  * Utility function to ensure all variants of an enum are handled.\n  */ function invariant(never, computeMessage) {\n@@ -365,6 +400,7 @@ relativeURL.prototype = URL.prototype;\n  */ function requireStub(_moduleId) {\n     throw new Error('dynamic usage of require is not supported');\n }\n+contextPrototype.z = requireStub;\n /* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../shared/runtime-utils.ts\" />\n /// A 'base' utilities to support runtime can have externals.\n /// Currently this is for node.js / edge runtime both.\n@@ -385,6 +421,7 @@ async function externalImport(id) {\n     }\n     return raw;\n }\n+contextPrototype.y = externalImport;\n function externalRequire(id, thunk, esm = false) {\n     let raw;\n     try {\n@@ -404,6 +441,7 @@ function externalRequire(id, thunk, esm = false) {\n externalRequire.resolve = (id, options)=>{\n     return require.resolve(id, options);\n };\n+contextPrototype.x = externalRequire;\n /* eslint-disable @typescript-eslint/no-unused-vars */ const path = require('path');\n const relativePathToRuntimeRoot = path.relative(RUNTIME_PUBLIC_PATH, '.');\n // Compute the relative path to the `distDir`.\n@@ -424,6 +462,7 @@ const ABSOLUTE_ROOT = path.resolve(__filename, relativePathToDistRoot);\n     }\n     return ABSOLUTE_ROOT;\n }\n+Context.prototype.P = resolveAbsolutePath;\n /* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../shared/runtime-utils.ts\" />\n function readWebAssemblyAsResponse(path) {\n     const { createReadStream } = require('fs');\n@@ -472,29 +511,31 @@ function stringifySourceInfo(sourceType, sourceData) {\n             invariant(sourceType, (sourceType)=>`Unknown source type: ${sourceType}`);\n     }\n }\n+const nodeContextPrototype = Context.prototype;\n const url = require('url');\n const fs = require('fs/promises');\n const moduleFactories = Object.create(null);\n+nodeContextPrototype.M = moduleFactories;\n const moduleCache = Object.create(null);\n+nodeContextPrototype.c = moduleCache;\n /**\n  * Returns an absolute path to the given module's id.\n- */ function createResolvePathFromModule(resolver) {\n-    return function resolvePathFromModule(moduleId) {\n-        const exported = resolver(moduleId);\n-        const exportedPath = exported?.default ?? exported;\n-        if (typeof exportedPath !== 'string') {\n-            return exported;\n-        }\n-        const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length);\n-        const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix);\n-        return url.pathToFileURL(resolved).href;\n-    };\n-}\n-function loadChunk(sourceType, sourceData, chunkData) {\n+ */ function resolvePathFromModule(moduleId) {\n+    const exported = this.r(moduleId);\n+    const exportedPath = exported?.default ?? exported;\n+    if (typeof exportedPath !== 'string') {\n+        return exported;\n+    }\n+    const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length);\n+    const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix);\n+    return url.pathToFileURL(resolved).href;\n+}\n+nodeContextPrototype.R = resolvePathFromModule;\n+function loadRuntimeChunk(sourcePath, chunkData) {\n     if (typeof chunkData === 'string') {\n-        loadChunkPath(sourceType, sourceData, chunkData);\n+        loadRuntimeChunkPath(sourcePath, chunkData);\n     } else {\n-        loadChunkPath(sourceType, sourceData, chunkData.path);\n+        loadRuntimeChunkPath(sourcePath, chunkData.path);\n     }\n }\n const loadedChunks = new Set();\n@@ -504,7 +545,7 @@ const chunkCache = new Map();\n function clearChunkCache() {\n     chunkCache.clear();\n }\n-function loadChunkPath(sourceType, sourceData, chunkPath) {\n+function loadRuntimeChunkPath(sourcePath, chunkPath) {\n     if (!isJs(chunkPath)) {\n         // We only support loading JS chunks in Node.js.\n         // This branch can be hit when trying to load a CSS chunk.\n@@ -532,8 +573,8 @@ function loadChunkPath(sourceType, sourceData, chunkPath) {\n         loadedChunks.add(chunkPath);\n     } catch (e) {\n         let errorMessage = `Failed to load chunk ${chunkPath}`;\n-        if (sourceType !== undefined) {\n-            errorMessage += ` from ${stringifySourceInfo(sourceType, sourceData)}`;\n+        if (sourcePath) {\n+            errorMessage += ` from runtime for chunk ${sourcePath}`;\n         }\n         throw new Error(errorMessage, {\n             cause: e\n@@ -560,7 +601,7 @@ function loadChunkUncached(chunkPath) {\n         }\n     }\n }\n-function loadChunkAsync(sourceType, sourceData, chunkData) {\n+function loadChunkAsync(chunkData) {\n     const chunkPath = typeof chunkData === 'string' ? chunkData : chunkData.path;\n     if (!isJs(chunkPath)) {\n         // We only support loading JS chunks in Node.js.\n@@ -574,10 +615,7 @@ function loadChunkAsync(sourceType, sourceData, chunkData) {\n             loadChunkUncached(chunkPath);\n             entry = loadedChunk;\n         } catch (e) {\n-            let errorMessage = `Failed to load chunk ${chunkPath}`;\n-            if (sourceType !== undefined) {\n-                errorMessage += ` from ${stringifySourceInfo(sourceType, sourceData)}`;\n-            }\n+            const errorMessage = `Failed to load chunk ${chunkPath} from module ${this.m.id}`;\n             // Cache the failure promise, future requests will also get this same rejection\n             entry = Promise.reject(new Error(errorMessage, {\n                 cause: e\n@@ -588,21 +626,26 @@ function loadChunkAsync(sourceType, sourceData, chunkData) {\n     // TODO: Return an instrumented Promise that React can use instead of relying on referential equality.\n     return entry;\n }\n-function loadChunkAsyncByUrl(sourceType, sourceData, chunkUrl) {\n+contextPrototype.l = loadChunkAsync;\n+function loadChunkAsyncByUrl(chunkUrl) {\n     const path1 = url.fileURLToPath(new URL(chunkUrl, RUNTIME_ROOT));\n-    return loadChunkAsync(sourceType, sourceData, path1);\n+    return loadChunkAsync.call(this, path1);\n }\n+contextPrototype.L = loadChunkAsyncByUrl;\n function loadWebAssembly(chunkPath, _edgeModule, imports) {\n     const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n     return instantiateWebAssemblyFromPath(resolved, imports);\n }\n+contextPrototype.w = loadWebAssembly;\n function loadWebAssemblyModule(chunkPath, _edgeModule) {\n     const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n     return compileWebAssemblyFromPath(resolved);\n }\n+contextPrototype.u = loadWebAssemblyModule;\n function getWorkerBlobURL(_chunks) {\n     throw new Error('Worker blobs are not implemented yet for Node.js');\n }\n+nodeContextPrototype.b = getWorkerBlobURL;\n function instantiateModule(id, sourceType, sourceData) {\n     const moduleFactory = moduleFactories[id];\n     if (typeof moduleFactory !== 'function') {\n@@ -622,44 +665,12 @@ function instantiateModule(id, sourceType, sourceData) {\n         }\n         throw new Error(`Module ${id} was instantiated ${instantiationReason}, but the module factory is not available.`);\n     }\n-    const module1 = {\n-        exports: {},\n-        error: undefined,\n-        loaded: false,\n-        id,\n-        namespaceObject: undefined\n-    };\n+    const module1 = createModuleObject(id);\n     moduleCache[id] = module1;\n     // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\n     try {\n-        const r = commonJsRequire.bind(null, module1);\n-        moduleFactory.call(module1.exports, {\n-            a: asyncModule.bind(null, module1),\n-            e: module1.exports,\n-            r,\n-            t: runtimeRequire,\n-            x: externalRequire,\n-            y: externalImport,\n-            f: moduleContext,\n-            i: esmImport.bind(null, module1),\n-            s: esmExport.bind(null, module1, module1.exports, moduleCache),\n-            j: dynamicExport.bind(null, module1, module1.exports, moduleCache),\n-            v: exportValue.bind(null, module1, moduleCache),\n-            n: exportNamespace.bind(null, module1, moduleCache),\n-            m: module1,\n-            c: moduleCache,\n-            M: moduleFactories,\n-            l: loadChunkAsync.bind(null, 1, id),\n-            L: loadChunkAsyncByUrl.bind(null, 1, id),\n-            C: clearChunkCache,\n-            w: loadWebAssembly,\n-            u: loadWebAssemblyModule,\n-            P: resolveAbsolutePath,\n-            U: relativeURL,\n-            R: createResolvePathFromModule(r),\n-            b: getWorkerBlobURL,\n-            z: requireStub\n-        });\n+        const context = new Context(module1);\n+        moduleFactory(context);\n     } catch (error) {\n         module1.error = error;\n         throw error;\n@@ -707,7 +718,7 @@ const regexJsUrl = /\\.js(?:\\?[^#]*)?(?:#.*)?$/;\n }\n module.exports = (sourcePath)=>({\n         m: (id)=>getOrInstantiateRuntimeModule(sourcePath, id),\n-        c: (chunkData)=>loadChunk(0, sourcePath, chunkData)\n+        c: (chunkData)=>loadRuntimeChunk(sourcePath, chunkData)\n     });\n \n "
        },
        {
            "sha": "f17c30733995f5a8cf4788c96990b6ebebcb6e54",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_build_runtime/output/[turbopack]_runtime.js.map",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js.map?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -2,9 +2,9 @@\n   \"version\": 3,\n   \"sources\": [],\n   \"sections\": [\n-    {\"offset\": {\"line\": 3, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared/runtime-utils.ts\"],\"sourcesContent\":[\"/**\\n * This file contains runtime types and functions that are shared between all\\n * TurboPack ECMAScript runtimes.\\n *\\n * It will be prepended to the runtime code of each runtime.\\n */\\n\\n/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"./runtime-types.d.ts\\\" />\\n\\ntype EsmNamespaceObject = Record<string, any>\\n\\n// @ts-ignore Defined in `dev-base.ts`\\ndeclare function getOrInstantiateModuleFromParent<M>(\\n  id: ModuleId,\\n  sourceModule: M\\n): M\\n\\nconst REEXPORTED_OBJECTS = Symbol('reexported objects')\\n\\ntype ModuleContextMap = Record<ModuleId, ModuleContextEntry>\\n\\ninterface ModuleContextEntry {\\n  id: () => ModuleId\\n  module: () => any\\n}\\n\\ninterface ModuleContext {\\n  // require call\\n  (moduleId: ModuleId): Exports | EsmNamespaceObject\\n\\n  // async import call\\n  import(moduleId: ModuleId): Promise<Exports | EsmNamespaceObject>\\n\\n  keys(): ModuleId[]\\n\\n  resolve(moduleId: ModuleId): ModuleId\\n}\\n\\ntype GetOrInstantiateModuleFromParent<M extends Module> = (\\n  moduleId: M['id'],\\n  parentModule: M\\n) => M\\n\\ndeclare function getOrInstantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module\\n\\nconst hasOwnProperty = Object.prototype.hasOwnProperty\\nconst toStringTag = typeof Symbol !== 'undefined' && Symbol.toStringTag\\n\\nfunction defineProp(\\n  obj: any,\\n  name: PropertyKey,\\n  options: PropertyDescriptor & ThisType<any>\\n) {\\n  if (!hasOwnProperty.call(obj, name)) Object.defineProperty(obj, name, options)\\n}\\n\\nfunction getOverwrittenModule(\\n  moduleCache: ModuleCache<Module>,\\n  id: ModuleId\\n): Module {\\n  let module = moduleCache[id]\\n  if (!module) {\\n    // This is invoked when a module is merged into another module, thus it wasn't invoked via\\n    // instantiateModule and the cache entry wasn't created yet.\\n    module = {\\n      exports: {},\\n      error: undefined,\\n      loaded: false,\\n      id,\\n      namespaceObject: undefined,\\n    }\\n    moduleCache[id] = module\\n  }\\n  return module\\n}\\n\\n/**\\n * Adds the getters to the exports object.\\n */\\nfunction esm(\\n  exports: Exports,\\n  getters: Record<string, (() => any) | [() => any, (v: any) => void]>\\n) {\\n  defineProp(exports, '__esModule', { value: true })\\n  if (toStringTag) defineProp(exports, toStringTag, { value: 'Module' })\\n  for (const key in getters) {\\n    const item = getters[key]\\n    if (Array.isArray(item)) {\\n      defineProp(exports, key, {\\n        get: item[0],\\n        set: item[1],\\n        enumerable: true,\\n      })\\n    } else {\\n      defineProp(exports, key, { get: item, enumerable: true })\\n    }\\n  }\\n  Object.seal(exports)\\n}\\n\\n/**\\n * Makes the module an ESM with exports\\n */\\nfunction esmExport(\\n  module: Module,\\n  exports: Exports,\\n  moduleCache: ModuleCache<Module>,\\n  getters: Record<string, () => any>,\\n  id: ModuleId | undefined\\n) {\\n  if (id != null) {\\n    module = getOverwrittenModule(moduleCache, id)\\n    exports = module.exports\\n  }\\n  module.namespaceObject = module.exports\\n  esm(exports, getters)\\n}\\n\\nfunction ensureDynamicExports(module: Module, exports: Exports) {\\n  let reexportedObjects = module[REEXPORTED_OBJECTS]\\n\\n  if (!reexportedObjects) {\\n    reexportedObjects = module[REEXPORTED_OBJECTS] = []\\n    module.exports = module.namespaceObject = new Proxy(exports, {\\n      get(target, prop) {\\n        if (\\n          hasOwnProperty.call(target, prop) ||\\n          prop === 'default' ||\\n          prop === '__esModule'\\n        ) {\\n          return Reflect.get(target, prop)\\n        }\\n        for (const obj of reexportedObjects!) {\\n          const value = Reflect.get(obj, prop)\\n          if (value !== undefined) return value\\n        }\\n        return undefined\\n      },\\n      ownKeys(target) {\\n        const keys = Reflect.ownKeys(target)\\n        for (const obj of reexportedObjects!) {\\n          for (const key of Reflect.ownKeys(obj)) {\\n            if (key !== 'default' && !keys.includes(key)) keys.push(key)\\n          }\\n        }\\n        return keys\\n      },\\n    })\\n  }\\n}\\n\\n/**\\n * Dynamically exports properties from an object\\n */\\nfunction dynamicExport(\\n  module: Module,\\n  exports: Exports,\\n  moduleCache: ModuleCache<Module>,\\n  object: Record<string, any>,\\n  id: ModuleId | undefined\\n) {\\n  if (id != null) {\\n    module = getOverwrittenModule(moduleCache, id)\\n    exports = module.exports\\n  }\\n  ensureDynamicExports(module, exports)\\n\\n  if (typeof object === 'object' && object !== null) {\\n    module[REEXPORTED_OBJECTS]!.push(object)\\n  }\\n}\\n\\nfunction exportValue(\\n  module: Module,\\n  moduleCache: ModuleCache<Module>,\\n  value: any,\\n  id: ModuleId | undefined\\n) {\\n  if (id != null) {\\n    module = getOverwrittenModule(moduleCache, id)\\n  }\\n  module.exports = value\\n}\\n\\nfunction exportNamespace(\\n  module: Module,\\n  moduleCache: ModuleCache<Module>,\\n  namespace: any,\\n  id: ModuleId | undefined\\n) {\\n  if (id != null) {\\n    module = getOverwrittenModule(moduleCache, id)\\n  }\\n  module.exports = module.namespaceObject = namespace\\n}\\n\\nfunction createGetter(obj: Record<string | symbol, any>, key: string | symbol) {\\n  return () => obj[key]\\n}\\n\\n/**\\n * @returns prototype of the object\\n */\\nconst getProto: (obj: any) => any = Object.getPrototypeOf\\n  ? (obj) => Object.getPrototypeOf(obj)\\n  : (obj) => obj.__proto__\\n\\n/** Prototypes that are not expanded for exports */\\nconst LEAF_PROTOTYPES = [null, getProto({}), getProto([]), getProto(getProto)]\\n\\n/**\\n * @param raw\\n * @param ns\\n * @param allowExportDefault\\n *   * `false`: will have the raw module as default export\\n *   * `true`: will have the default property as default export\\n */\\nfunction interopEsm(\\n  raw: Exports,\\n  ns: EsmNamespaceObject,\\n  allowExportDefault?: boolean\\n) {\\n  const getters: { [s: string]: () => any } = Object.create(null)\\n  for (\\n    let current = raw;\\n    (typeof current === 'object' || typeof current === 'function') &&\\n    !LEAF_PROTOTYPES.includes(current);\\n    current = getProto(current)\\n  ) {\\n    for (const key of Object.getOwnPropertyNames(current)) {\\n      getters[key] = createGetter(raw, key)\\n    }\\n  }\\n\\n  // this is not really correct\\n  // we should set the `default` getter if the imported module is a `.cjs file`\\n  if (!(allowExportDefault && 'default' in getters)) {\\n    getters['default'] = () => raw\\n  }\\n\\n  esm(ns, getters)\\n  return ns\\n}\\n\\nfunction createNS(raw: Module['exports']): EsmNamespaceObject {\\n  if (typeof raw === 'function') {\\n    return function (this: any, ...args: any[]) {\\n      return raw.apply(this, args)\\n    }\\n  } else {\\n    return Object.create(null)\\n  }\\n}\\n\\nfunction esmImport(\\n  sourceModule: Module,\\n  id: ModuleId\\n): Exclude<Module['namespaceObject'], undefined> {\\n  const module = getOrInstantiateModuleFromParent(id, sourceModule)\\n  if (module.error) throw module.error\\n\\n  // any ES module has to have `module.namespaceObject` defined.\\n  if (module.namespaceObject) return module.namespaceObject\\n\\n  // only ESM can be an async module, so we don't need to worry about exports being a promise here.\\n  const raw = module.exports\\n  return (module.namespaceObject = interopEsm(\\n    raw,\\n    createNS(raw),\\n    raw && (raw as any).__esModule\\n  ))\\n}\\n\\n// Add a simple runtime require so that environments without one can still pass\\n// `typeof require` CommonJS checks so that exports are correctly registered.\\nconst runtimeRequire =\\n  // @ts-ignore\\n  typeof require === 'function'\\n    ? // @ts-ignore\\n      require\\n    : function require() {\\n        throw new Error('Unexpected use of runtime require')\\n      }\\n\\nfunction commonJsRequire(sourceModule: Module, id: ModuleId): Exports {\\n  const module = getOrInstantiateModuleFromParent(id, sourceModule)\\n  if (module.error) throw module.error\\n  return module.exports\\n}\\n\\n/**\\n * `require.context` and require/import expression runtime.\\n */\\nfunction moduleContext(map: ModuleContextMap): ModuleContext {\\n  function moduleContext(id: ModuleId): Exports {\\n    if (hasOwnProperty.call(map, id)) {\\n      return map[id].module()\\n    }\\n\\n    const e = new Error(`Cannot find module '${id}'`)\\n    ;(e as any).code = 'MODULE_NOT_FOUND'\\n    throw e\\n  }\\n\\n  moduleContext.keys = (): ModuleId[] => {\\n    return Object.keys(map)\\n  }\\n\\n  moduleContext.resolve = (id: ModuleId): ModuleId => {\\n    if (hasOwnProperty.call(map, id)) {\\n      return map[id].id()\\n    }\\n\\n    const e = new Error(`Cannot find module '${id}'`)\\n    ;(e as any).code = 'MODULE_NOT_FOUND'\\n    throw e\\n  }\\n\\n  moduleContext.import = async (id: ModuleId) => {\\n    return await (moduleContext(id) as Promise<Exports>)\\n  }\\n\\n  return moduleContext\\n}\\n\\n/**\\n * Returns the path of a chunk defined by its data.\\n */\\nfunction getChunkPath(chunkData: ChunkData): ChunkPath {\\n  return typeof chunkData === 'string' ? chunkData : chunkData.path\\n}\\n\\nfunction isPromise<T = any>(maybePromise: any): maybePromise is Promise<T> {\\n  return (\\n    maybePromise != null &&\\n    typeof maybePromise === 'object' &&\\n    'then' in maybePromise &&\\n    typeof maybePromise.then === 'function'\\n  )\\n}\\n\\nfunction isAsyncModuleExt<T extends {}>(obj: T): obj is AsyncModuleExt & T {\\n  return turbopackQueues in obj\\n}\\n\\nfunction createPromise<T>() {\\n  let resolve: (value: T | PromiseLike<T>) => void\\n  let reject: (reason?: any) => void\\n\\n  const promise = new Promise<T>((res, rej) => {\\n    reject = rej\\n    resolve = res\\n  })\\n\\n  return {\\n    promise,\\n    resolve: resolve!,\\n    reject: reject!,\\n  }\\n}\\n\\n// everything below is adapted from webpack\\n// https://github.com/webpack/webpack/blob/6be4065ade1e252c1d8dcba4af0f43e32af1bdc1/lib/runtime/AsyncModuleRuntimeModule.js#L13\\n\\nconst turbopackQueues = Symbol('turbopack queues')\\nconst turbopackExports = Symbol('turbopack exports')\\nconst turbopackError = Symbol('turbopack error')\\n\\nconst enum QueueStatus {\\n  Unknown = -1,\\n  Unresolved = 0,\\n  Resolved = 1,\\n}\\n\\ntype AsyncQueueFn = (() => void) & { queueCount: number }\\ntype AsyncQueue = AsyncQueueFn[] & {\\n  status: QueueStatus\\n}\\n\\nfunction resolveQueue(queue?: AsyncQueue) {\\n  if (queue && queue.status !== QueueStatus.Resolved) {\\n    queue.status = QueueStatus.Resolved\\n    queue.forEach((fn) => fn.queueCount--)\\n    queue.forEach((fn) => (fn.queueCount-- ? fn.queueCount++ : fn()))\\n  }\\n}\\n\\ntype Dep = Exports | AsyncModulePromise | Promise<Exports>\\n\\ntype AsyncModuleExt = {\\n  [turbopackQueues]: (fn: (queue: AsyncQueue) => void) => void\\n  [turbopackExports]: Exports\\n  [turbopackError]?: any\\n}\\n\\ntype AsyncModulePromise<T = Exports> = Promise<T> & AsyncModuleExt\\n\\nfunction wrapDeps(deps: Dep[]): AsyncModuleExt[] {\\n  return deps.map((dep): AsyncModuleExt => {\\n    if (dep !== null && typeof dep === 'object') {\\n      if (isAsyncModuleExt(dep)) return dep\\n      if (isPromise(dep)) {\\n        const queue: AsyncQueue = Object.assign([], {\\n          status: QueueStatus.Unresolved,\\n        })\\n\\n        const obj: AsyncModuleExt = {\\n          [turbopackExports]: {},\\n          [turbopackQueues]: (fn: (queue: AsyncQueue) => void) => fn(queue),\\n        }\\n\\n        dep.then(\\n          (res) => {\\n            obj[turbopackExports] = res\\n            resolveQueue(queue)\\n          },\\n          (err) => {\\n            obj[turbopackError] = err\\n            resolveQueue(queue)\\n          }\\n        )\\n\\n        return obj\\n      }\\n    }\\n\\n    return {\\n      [turbopackExports]: dep,\\n      [turbopackQueues]: () => {},\\n    }\\n  })\\n}\\n\\nfunction asyncModule(\\n  module: Module,\\n  body: (\\n    handleAsyncDependencies: (\\n      deps: Dep[]\\n    ) => Exports[] | Promise<() => Exports[]>,\\n    asyncResult: (err?: any) => void\\n  ) => void,\\n  hasAwait: boolean\\n) {\\n  const queue: AsyncQueue | undefined = hasAwait\\n    ? Object.assign([], { status: QueueStatus.Unknown })\\n    : undefined\\n\\n  const depQueues: Set<AsyncQueue> = new Set()\\n\\n  const { resolve, reject, promise: rawPromise } = createPromise<Exports>()\\n\\n  const promise: AsyncModulePromise = Object.assign(rawPromise, {\\n    [turbopackExports]: module.exports,\\n    [turbopackQueues]: (fn) => {\\n      queue && fn(queue)\\n      depQueues.forEach(fn)\\n      promise['catch'](() => {})\\n    },\\n  } satisfies AsyncModuleExt)\\n\\n  const attributes: PropertyDescriptor = {\\n    get(): any {\\n      return promise\\n    },\\n    set(v: any) {\\n      // Calling `esmExport` leads to this.\\n      if (v !== promise) {\\n        promise[turbopackExports] = v\\n      }\\n    },\\n  }\\n\\n  Object.defineProperty(module, 'exports', attributes)\\n  Object.defineProperty(module, 'namespaceObject', attributes)\\n\\n  function handleAsyncDependencies(deps: Dep[]) {\\n    const currentDeps = wrapDeps(deps)\\n\\n    const getResult = () =>\\n      currentDeps.map((d) => {\\n        if (d[turbopackError]) throw d[turbopackError]\\n        return d[turbopackExports]\\n      })\\n\\n    const { promise, resolve } = createPromise<() => Exports[]>()\\n\\n    const fn: AsyncQueueFn = Object.assign(() => resolve(getResult), {\\n      queueCount: 0,\\n    })\\n\\n    function fnQueue(q: AsyncQueue) {\\n      if (q !== queue && !depQueues.has(q)) {\\n        depQueues.add(q)\\n        if (q && q.status === QueueStatus.Unresolved) {\\n          fn.queueCount++\\n          q.push(fn)\\n        }\\n      }\\n    }\\n\\n    currentDeps.map((dep) => dep[turbopackQueues](fnQueue))\\n\\n    return fn.queueCount ? promise : getResult()\\n  }\\n\\n  function asyncResult(err?: any) {\\n    if (err) {\\n      reject((promise[turbopackError] = err))\\n    } else {\\n      resolve(promise[turbopackExports])\\n    }\\n\\n    resolveQueue(queue)\\n  }\\n\\n  body(handleAsyncDependencies, asyncResult)\\n\\n  if (queue && queue.status === QueueStatus.Unknown) {\\n    queue.status = QueueStatus.Unresolved\\n  }\\n}\\n\\n/**\\n * A pseudo \\\"fake\\\" URL object to resolve to its relative path.\\n *\\n * When UrlRewriteBehavior is set to relative, calls to the `new URL()` will construct url without base using this\\n * runtime function to generate context-agnostic urls between different rendering context, i.e ssr / client to avoid\\n * hydration mismatch.\\n *\\n * This is based on webpack's existing implementation:\\n * https://github.com/webpack/webpack/blob/87660921808566ef3b8796f8df61bd79fc026108/lib/runtime/RelativeUrlRuntimeModule.js\\n */\\nconst relativeURL = function relativeURL(this: any, inputUrl: string) {\\n  const realUrl = new URL(inputUrl, 'x:/')\\n  const values: Record<string, any> = {}\\n  for (const key in realUrl) values[key] = (realUrl as any)[key]\\n  values.href = inputUrl\\n  values.pathname = inputUrl.replace(/[?#].*/, '')\\n  values.origin = values.protocol = ''\\n  values.toString = values.toJSON = (..._args: Array<any>) => inputUrl\\n  for (const key in values)\\n    Object.defineProperty(this, key, {\\n      enumerable: true,\\n      configurable: true,\\n      value: values[key],\\n    })\\n}\\n\\nrelativeURL.prototype = URL.prototype\\n\\n/**\\n * Utility function to ensure all variants of an enum are handled.\\n */\\nfunction invariant(never: never, computeMessage: (arg: any) => string): never {\\n  throw new Error(`Invariant: ${computeMessage(never)}`)\\n}\\n\\n/**\\n * A stub function to make `require` available but non-functional in ESM.\\n */\\nfunction requireStub(_moduleId: ModuleId): never {\\n  throw new Error('dynamic usage of require is not supported')\\n}\\n\"],\"names\":[],\"mappings\":\"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\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 367, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/base-externals-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n\\n/// A 'base' utilities to support runtime can have externals.\\n/// Currently this is for node.js / edge runtime both.\\n/// If a fn requires node.js specific behavior, it should be placed in `node-external-utils` instead.\\n\\nasync function externalImport(id: DependencySpecifier) {\\n  let raw\\n  try {\\n    raw = await import(id)\\n  } catch (err) {\\n    // TODO(alexkirsz) This can happen when a client-side module tries to load\\n    // an external module we don't provide a shim for (e.g. querystring, url).\\n    // For now, we fail semi-silently, but in the future this should be a\\n    // compilation error.\\n    throw new Error(`Failed to load external module ${id}: ${err}`)\\n  }\\n\\n  if (raw && raw.__esModule && raw.default && 'default' in raw.default) {\\n    return interopEsm(raw.default, createNS(raw), true)\\n  }\\n\\n  return raw\\n}\\n\\nfunction externalRequire(\\n  id: ModuleId,\\n  thunk: () => any,\\n  esm: boolean = false\\n): Exports | EsmNamespaceObject {\\n  let raw\\n  try {\\n    raw = thunk()\\n  } catch (err) {\\n    // TODO(alexkirsz) This can happen when a client-side module tries to load\\n    // an external module we don't provide a shim for (e.g. querystring, url).\\n    // For now, we fail semi-silently, but in the future this should be a\\n    // compilation error.\\n    throw new Error(`Failed to load external module ${id}: ${err}`)\\n  }\\n\\n  if (!esm || raw.__esModule) {\\n    return raw\\n  }\\n\\n  return interopEsm(raw, createNS(raw), true)\\n}\\n\\nexternalRequire.resolve = (\\n  id: string,\\n  options?: {\\n    paths?: string[]\\n  }\\n) => {\\n  return require.resolve(id, options)\\n}\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAEpD,mDAAmD;AAEnD,6DAA6D;AAC7D,sDAAsD;AACtD,qGAAqG;AAErG,eAAe,eAAe,EAAuB;IACnD,IAAI;IACJ,IAAI;QACF,MAAM,MAAM,MAAM,CAAC;IACrB,EAAE,OAAO,KAAK;QACZ,0EAA0E;QAC1E,0EAA0E;QAC1E,qEAAqE;QACrE,qBAAqB;QACrB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,EAAE,EAAE,KAAK;IAChE;IAEA,IAAI,OAAO,IAAI,UAAU,IAAI,IAAI,OAAO,IAAI,aAAa,IAAI,OAAO,EAAE;QACpE,OAAO,WAAW,IAAI,OAAO,EAAE,SAAS,MAAM;IAChD;IAEA,OAAO;AACT;AAEA,SAAS,gBACP,EAAY,EACZ,KAAgB,EAChB,MAAe,KAAK;IAEpB,IAAI;IACJ,IAAI;QACF,MAAM;IACR,EAAE,OAAO,KAAK;QACZ,0EAA0E;QAC1E,0EAA0E;QAC1E,qEAAqE;QACrE,qBAAqB;QACrB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,EAAE,EAAE,KAAK;IAChE;IAEA,IAAI,CAAC,OAAO,IAAI,UAAU,EAAE;QAC1B,OAAO;IACT;IAEA,OAAO,WAAW,KAAK,SAAS,MAAM;AACxC;AAEA,gBAAgB,OAAO,GAAG,CACxB,IACA;IAIA,OAAO,QAAQ,OAAO,CAAC,IAAI;AAC7B\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 406, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/node-externals-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\ndeclare var RUNTIME_PUBLIC_PATH: string\\ndeclare var RELATIVE_ROOT_PATH: string\\ndeclare var ASSET_PREFIX: string\\n\\nconst path = require('path')\\n\\nconst relativePathToRuntimeRoot = path.relative(RUNTIME_PUBLIC_PATH, '.')\\n// Compute the relative path to the `distDir`.\\nconst relativePathToDistRoot = path.join(\\n  relativePathToRuntimeRoot,\\n  RELATIVE_ROOT_PATH\\n)\\nconst RUNTIME_ROOT = path.resolve(__filename, relativePathToRuntimeRoot)\\n// Compute the absolute path to the root, by stripping distDir from the absolute path to this file.\\nconst ABSOLUTE_ROOT = path.resolve(__filename, relativePathToDistRoot)\\n\\n/**\\n * Returns an absolute path to the given module path.\\n * Module path should be relative, either path to a file or a directory.\\n *\\n * This fn allows to calculate an absolute path for some global static values, such as\\n * `__dirname` or `import.meta.url` that Turbopack will not embeds in compile time.\\n * See ImportMetaBinding::code_generation for the usage.\\n */\\nfunction resolveAbsolutePath(modulePath?: string): string {\\n  if (modulePath) {\\n    return path.join(ABSOLUTE_ROOT, modulePath)\\n  }\\n  return ABSOLUTE_ROOT\\n}\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAMpD,MAAM,OAAO,QAAQ;AAErB,MAAM,4BAA4B,KAAK,QAAQ,CAAC,qBAAqB;AACrE,8CAA8C;AAC9C,MAAM,yBAAyB,KAAK,IAAI,CACtC,2BACA;AAEF,MAAM,eAAe,KAAK,OAAO,CAAC,YAAY;AAC9C,mGAAmG;AACnG,MAAM,gBAAgB,KAAK,OAAO,CAAC,YAAY;AAE/C;;;;;;;CAOC,GACD,SAAS,oBAAoB,UAAmB;IAC9C,IAAI,YAAY;QACd,OAAO,KAAK,IAAI,CAAC,eAAe;IAClC;IACA,OAAO;AACT\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 426, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/node-wasm-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n\\nfunction readWebAssemblyAsResponse(path: string) {\\n  const { createReadStream } = require('fs') as typeof import('fs')\\n  const { Readable } = require('stream') as typeof import('stream')\\n\\n  const stream = createReadStream(path)\\n\\n  // @ts-ignore unfortunately there's a slight type mismatch with the stream.\\n  return new Response(Readable.toWeb(stream), {\\n    headers: {\\n      'content-type': 'application/wasm',\\n    },\\n  })\\n}\\n\\nasync function compileWebAssemblyFromPath(\\n  path: string\\n): Promise<WebAssembly.Module> {\\n  const response = readWebAssemblyAsResponse(path)\\n\\n  return await WebAssembly.compileStreaming(response)\\n}\\n\\nasync function instantiateWebAssemblyFromPath(\\n  path: string,\\n  importsObj: WebAssembly.Imports\\n): Promise<Exports> {\\n  const response = readWebAssemblyAsResponse(path)\\n\\n  const { instance } = await WebAssembly.instantiateStreaming(\\n    response,\\n    importsObj\\n  )\\n\\n  return instance.exports\\n}\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAEpD,mDAAmD;AAEnD,SAAS,0BAA0B,IAAY;IAC7C,MAAM,EAAE,gBAAgB,EAAE,GAAG,QAAQ;IACrC,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ;IAE7B,MAAM,SAAS,iBAAiB;IAEhC,2EAA2E;IAC3E,OAAO,IAAI,SAAS,SAAS,KAAK,CAAC,SAAS;QAC1C,SAAS;YACP,gBAAgB;QAClB;IACF;AACF;AAEA,eAAe,2BACb,IAAY;IAEZ,MAAM,WAAW,0BAA0B;IAE3C,OAAO,MAAM,YAAY,gBAAgB,CAAC;AAC5C;AAEA,eAAe,+BACb,IAAY,EACZ,UAA+B;IAE/B,MAAM,WAAW,0BAA0B;IAE3C,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,YAAY,oBAAoB,CACzD,UACA;IAGF,OAAO,SAAS,OAAO;AACzB\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 447, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/nodejs/runtime.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/base-externals-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/node-externals-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/node-wasm-utils.ts\\\" />\\n\\nenum SourceType {\\n  /**\\n   * The module was instantiated because it was included in an evaluated chunk's\\n   * runtime.\\n   * SourceData is a ChunkPath.\\n   */\\n  Runtime = 0,\\n  /**\\n   * The module was instantiated because a parent module imported it.\\n   * SourceData is a ModuleId.\\n   */\\n  Parent = 1,\\n}\\n\\ntype SourceData = ChunkPath | ModuleId\\n\\nprocess.env.TURBOPACK = '1'\\n\\nfunction stringifySourceInfo(\\n  sourceType: SourceType,\\n  sourceData: SourceData\\n): string {\\n  switch (sourceType) {\\n    case SourceType.Runtime:\\n      return `runtime for chunk ${sourceData}`\\n    case SourceType.Parent:\\n      return `parent module ${sourceData}`\\n    default:\\n      invariant(\\n        sourceType,\\n        (sourceType) => `Unknown source type: ${sourceType}`\\n      )\\n  }\\n}\\n\\ntype ExternalRequire = (\\n  id: ModuleId,\\n  thunk: () => any,\\n  esm?: boolean\\n) => Exports | EsmNamespaceObject\\ntype ExternalImport = (id: ModuleId) => Promise<Exports | EsmNamespaceObject>\\n\\ninterface TurbopackNodeBuildContext extends TurbopackBaseContext<Module> {\\n  R: ResolvePathFromModule\\n  x: ExternalRequire\\n  y: ExternalImport\\n}\\n\\ntype ModuleFactory = (\\n  this: Module['exports'],\\n  context: TurbopackNodeBuildContext\\n) => unknown\\n\\nconst url = require('url') as typeof import('url')\\nconst fs = require('fs/promises') as typeof import('fs/promises')\\n\\nconst moduleFactories: ModuleFactories = Object.create(null)\\nconst moduleCache: ModuleCache<Module> = Object.create(null)\\n\\n/**\\n * Returns an absolute path to the given module's id.\\n */\\nfunction createResolvePathFromModule(\\n  resolver: (moduleId: string) => Exports\\n): (moduleId: string) => string {\\n  return function resolvePathFromModule(moduleId: string): string {\\n    const exported = resolver(moduleId)\\n    const exportedPath = exported?.default ?? exported\\n    if (typeof exportedPath !== 'string') {\\n      return exported as any\\n    }\\n\\n    const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length)\\n    const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix)\\n\\n    return url.pathToFileURL(resolved).href\\n  }\\n}\\n\\nfunction loadChunk(\\n  sourceType: SourceType,\\n  sourceData: SourceData,\\n  chunkData: ChunkData\\n): void {\\n  if (typeof chunkData === 'string') {\\n    loadChunkPath(sourceType, sourceData, chunkData)\\n  } else {\\n    loadChunkPath(sourceType, sourceData, chunkData.path)\\n  }\\n}\\n\\nconst loadedChunks = new Set<ChunkPath>()\\nconst unsupportedLoadChunk = Promise.resolve(undefined)\\nconst loadedChunk: Promise<void> = Promise.resolve(undefined)\\nconst chunkCache = new Map<ChunkPath, Promise<void>>()\\n\\nfunction clearChunkCache() {\\n  chunkCache.clear()\\n}\\n\\nfunction loadChunkPath(\\n  sourceType: SourceType,\\n  sourceData: SourceData,\\n  chunkPath: ChunkPath\\n): void {\\n  if (!isJs(chunkPath)) {\\n    // We only support loading JS chunks in Node.js.\\n    // This branch can be hit when trying to load a CSS chunk.\\n    return\\n  }\\n\\n  if (loadedChunks.has(chunkPath)) {\\n    return\\n  }\\n\\n  try {\\n    const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n    const chunkModules: CompressedModuleFactories = require(resolved)\\n\\n    for (const [moduleId, moduleFactory] of Object.entries(chunkModules)) {\\n      if (!moduleFactories[moduleId]) {\\n        if (Array.isArray(moduleFactory)) {\\n          const [moduleFactoryFn, otherIds] = moduleFactory\\n          moduleFactories[moduleId] = moduleFactoryFn\\n          for (const otherModuleId of otherIds) {\\n            moduleFactories[otherModuleId] = moduleFactoryFn\\n          }\\n        } else {\\n          moduleFactories[moduleId] = moduleFactory\\n        }\\n      }\\n    }\\n    loadedChunks.add(chunkPath)\\n  } catch (e) {\\n    let errorMessage = `Failed to load chunk ${chunkPath}`\\n\\n    if (sourceType !== undefined) {\\n      errorMessage += ` from ${stringifySourceInfo(sourceType, sourceData)}`\\n    }\\n\\n    throw new Error(errorMessage, {\\n      cause: e,\\n    })\\n  }\\n}\\n\\nfunction loadChunkUncached(chunkPath: ChunkPath) {\\n  // resolve to an absolute path to simplify `require` handling\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  // TODO: consider switching to `import()` to enable concurrent chunk loading and async file io\\n  // However this is incompatible with hot reloading (since `import` doesn't use the require cache)\\n  const chunkModules: CompressedModuleFactories = require(resolved)\\n  for (const [moduleId, moduleFactory] of Object.entries(chunkModules)) {\\n    if (!moduleFactories[moduleId]) {\\n      if (Array.isArray(moduleFactory)) {\\n        const [moduleFactoryFn, otherIds] = moduleFactory\\n        moduleFactories[moduleId] = moduleFactoryFn\\n        for (const otherModuleId of otherIds) {\\n          moduleFactories[otherModuleId] = moduleFactoryFn\\n        }\\n      } else {\\n        moduleFactories[moduleId] = moduleFactory\\n      }\\n    }\\n  }\\n}\\n\\nfunction loadChunkAsync(\\n  sourceType: SourceType,\\n  sourceData: SourceData,\\n  chunkData: ChunkData\\n): Promise<void> {\\n  const chunkPath = typeof chunkData === 'string' ? chunkData : chunkData.path\\n  if (!isJs(chunkPath)) {\\n    // We only support loading JS chunks in Node.js.\\n    // This branch can be hit when trying to load a CSS chunk.\\n    return unsupportedLoadChunk\\n  }\\n\\n  let entry = chunkCache.get(chunkPath)\\n  if (entry === undefined) {\\n    try {\\n      // Load the chunk synchronously\\n      loadChunkUncached(chunkPath)\\n      entry = loadedChunk\\n    } catch (e) {\\n      let errorMessage = `Failed to load chunk ${chunkPath}`\\n      if (sourceType !== undefined) {\\n        errorMessage += ` from ${stringifySourceInfo(sourceType, sourceData)}`\\n      }\\n\\n      // Cache the failure promise, future requests will also get this same rejection\\n      entry = Promise.reject(\\n        new Error(errorMessage, {\\n          cause: e,\\n        })\\n      )\\n    }\\n    chunkCache.set(chunkPath, entry)\\n  }\\n  // TODO: Return an instrumented Promise that React can use instead of relying on referential equality.\\n  return entry\\n}\\n\\nfunction loadChunkAsyncByUrl(\\n  sourceType: SourceType,\\n  sourceData: SourceData,\\n  chunkUrl: string\\n) {\\n  const path = url.fileURLToPath(new URL(chunkUrl, RUNTIME_ROOT)) as ChunkPath\\n  return loadChunkAsync(sourceType, sourceData, path)\\n}\\n\\nfunction loadWebAssembly(\\n  chunkPath: ChunkPath,\\n  _edgeModule: () => WebAssembly.Module,\\n  imports: WebAssembly.Imports\\n) {\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  return instantiateWebAssemblyFromPath(resolved, imports)\\n}\\n\\nfunction loadWebAssemblyModule(\\n  chunkPath: ChunkPath,\\n  _edgeModule: () => WebAssembly.Module\\n) {\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  return compileWebAssemblyFromPath(resolved)\\n}\\n\\nfunction getWorkerBlobURL(_chunks: ChunkPath[]): string {\\n  throw new Error('Worker blobs are not implemented yet for Node.js')\\n}\\n\\nfunction instantiateModule(\\n  id: ModuleId,\\n  sourceType: SourceType,\\n  sourceData: SourceData\\n): Module {\\n  const moduleFactory = moduleFactories[id]\\n  if (typeof moduleFactory !== 'function') {\\n    // This can happen if modules incorrectly handle HMR disposes/updates,\\n    // e.g. when they keep a `setTimeout` around which still executes old code\\n    // and contains e.g. a `require(\\\"something\\\")` call.\\n    let instantiationReason\\n    switch (sourceType) {\\n      case SourceType.Runtime:\\n        instantiationReason = `as a runtime entry of chunk ${sourceData}`\\n        break\\n      case SourceType.Parent:\\n        instantiationReason = `because it was required from module ${sourceData}`\\n        break\\n      default:\\n        invariant(\\n          sourceType,\\n          (sourceType) => `Unknown source type: ${sourceType}`\\n        )\\n    }\\n    throw new Error(\\n      `Module ${id} was instantiated ${instantiationReason}, but the module factory is not available.`\\n    )\\n  }\\n\\n  const module: Module = {\\n    exports: {},\\n    error: undefined,\\n    loaded: false,\\n    id,\\n    namespaceObject: undefined,\\n  }\\n  moduleCache[id] = module\\n\\n  // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\\n  try {\\n    const r = commonJsRequire.bind(null, module)\\n    moduleFactory.call(module.exports, {\\n      a: asyncModule.bind(null, module),\\n      e: module.exports,\\n      r,\\n      t: runtimeRequire,\\n      x: externalRequire,\\n      y: externalImport,\\n      f: moduleContext,\\n      i: esmImport.bind(null, module),\\n      s: esmExport.bind(null, module, module.exports, moduleCache),\\n      j: dynamicExport.bind(null, module, module.exports, moduleCache),\\n      v: exportValue.bind(null, module, moduleCache),\\n      n: exportNamespace.bind(null, module, moduleCache),\\n      m: module,\\n      c: moduleCache,\\n      M: moduleFactories,\\n      l: loadChunkAsync.bind(null, SourceType.Parent, id),\\n      L: loadChunkAsyncByUrl.bind(null, SourceType.Parent, id),\\n      C: clearChunkCache,\\n      w: loadWebAssembly,\\n      u: loadWebAssemblyModule,\\n      P: resolveAbsolutePath,\\n      U: relativeURL,\\n      R: createResolvePathFromModule(r),\\n      b: getWorkerBlobURL,\\n      z: requireStub,\\n    })\\n  } catch (error) {\\n    module.error = error as any\\n    throw error\\n  }\\n\\n  module.loaded = true\\n  if (module.namespaceObject && module.exports !== module.namespaceObject) {\\n    // in case of a circular dependency: cjs1 -> esm2 -> cjs1\\n    interopEsm(module.exports, module.namespaceObject)\\n  }\\n\\n  return module\\n}\\n\\n/**\\n * Retrieves a module from the cache, or instantiate it if it is not cached.\\n */\\n// @ts-ignore\\nfunction getOrInstantiateModuleFromParent(\\n  id: ModuleId,\\n  sourceModule: Module\\n): Module {\\n  const module = moduleCache[id]\\n\\n  if (module) {\\n    return module\\n  }\\n\\n  return instantiateModule(id, SourceType.Parent, sourceModule.id)\\n}\\n\\n/**\\n * Instantiates a runtime module.\\n */\\nfunction instantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module {\\n  return instantiateModule(moduleId, SourceType.Runtime, chunkPath)\\n}\\n\\n/**\\n * Retrieves a module from the cache, or instantiate it as a runtime module if it is not cached.\\n */\\n// @ts-ignore TypeScript doesn't separate this module space from the browser runtime\\nfunction getOrInstantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module {\\n  const module = moduleCache[moduleId]\\n  if (module) {\\n    if (module.error) {\\n      throw module.error\\n    }\\n    return module\\n  }\\n\\n  return instantiateRuntimeModule(chunkPath, moduleId)\\n}\\n\\nconst regexJsUrl = /\\\\.js(?:\\\\?[^#]*)?(?:#.*)?$/\\n/**\\n * Checks if a given path/URL ends with .js, optionally followed by ?query or #fragment.\\n */\\nfunction isJs(chunkUrlOrPath: ChunkUrl | ChunkPath): boolean {\\n  return regexJsUrl.test(chunkUrlOrPath)\\n}\\n\\nmodule.exports = (sourcePath: ChunkPath) => ({\\n  m: (id: ModuleId) => getOrInstantiateRuntimeModule(sourcePath, id),\\n  c: (chunkData: ChunkData) =>\\n    loadChunk(SourceType.Runtime, sourcePath, chunkData),\\n})\\n\"],\"names\":[],\"mappings\":\"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\",\"ignoreList\":[0]}}]\n+    {\"offset\": {\"line\": 3, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared/runtime-utils.ts\"],\"sourcesContent\":[\"/**\\n * This file contains runtime types and functions that are shared between all\\n * TurboPack ECMAScript runtimes.\\n *\\n * It will be prepended to the runtime code of each runtime.\\n */\\n\\n/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"./runtime-types.d.ts\\\" />\\n\\ntype EsmNamespaceObject = Record<string, any>\\n\\n// @ts-ignore Defined in `dev-base.ts`\\ndeclare function getOrInstantiateModuleFromParent<M>(\\n  id: ModuleId,\\n  sourceModule: M\\n): M\\n\\nconst REEXPORTED_OBJECTS = Symbol('reexported objects')\\n\\n/**\\n * Constructs the `__turbopack_context__` object for a module.\\n */\\nfunction Context(this: TurbopackBaseContext<Module>, module: Module) {\\n  this.m = module\\n  this.e = module.exports\\n}\\nconst contextPrototype = Context.prototype as TurbopackBaseContext<Module>\\n\\ntype ModuleContextMap = Record<ModuleId, ModuleContextEntry>\\n\\ninterface ModuleContextEntry {\\n  id: () => ModuleId\\n  module: () => any\\n}\\n\\ninterface ModuleContext {\\n  // require call\\n  (moduleId: ModuleId): Exports | EsmNamespaceObject\\n\\n  // async import call\\n  import(moduleId: ModuleId): Promise<Exports | EsmNamespaceObject>\\n\\n  keys(): ModuleId[]\\n\\n  resolve(moduleId: ModuleId): ModuleId\\n}\\n\\ntype GetOrInstantiateModuleFromParent<M extends Module> = (\\n  moduleId: M['id'],\\n  parentModule: M\\n) => M\\n\\ndeclare function getOrInstantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module\\n\\nconst hasOwnProperty = Object.prototype.hasOwnProperty\\nconst toStringTag = typeof Symbol !== 'undefined' && Symbol.toStringTag\\n\\nfunction defineProp(\\n  obj: any,\\n  name: PropertyKey,\\n  options: PropertyDescriptor & ThisType<any>\\n) {\\n  if (!hasOwnProperty.call(obj, name)) Object.defineProperty(obj, name, options)\\n}\\n\\nfunction getOverwrittenModule(\\n  moduleCache: ModuleCache<Module>,\\n  id: ModuleId\\n): Module {\\n  let module = moduleCache[id]\\n  if (!module) {\\n    // This is invoked when a module is merged into another module, thus it wasn't invoked via\\n    // instantiateModule and the cache entry wasn't created yet.\\n    module = createModuleObject(id)\\n    moduleCache[id] = module\\n  }\\n  return module\\n}\\n\\n/**\\n * Creates the module object. Only done here to ensure all module objects have the same shape.\\n */\\nfunction createModuleObject(id: ModuleId): Module {\\n  return {\\n    exports: {},\\n    error: undefined,\\n    loaded: false,\\n    id,\\n    namespaceObject: undefined,\\n    [REEXPORTED_OBJECTS]: undefined,\\n  }\\n}\\n\\n/**\\n * Adds the getters to the exports object.\\n */\\nfunction esm(\\n  exports: Exports,\\n  getters: Record<string, (() => any) | [() => any, (v: any) => void]>\\n) {\\n  defineProp(exports, '__esModule', { value: true })\\n  if (toStringTag) defineProp(exports, toStringTag, { value: 'Module' })\\n  for (const key in getters) {\\n    const item = getters[key]\\n    if (Array.isArray(item)) {\\n      defineProp(exports, key, {\\n        get: item[0],\\n        set: item[1],\\n        enumerable: true,\\n      })\\n    } else {\\n      defineProp(exports, key, { get: item, enumerable: true })\\n    }\\n  }\\n  Object.seal(exports)\\n}\\n\\n/**\\n * Makes the module an ESM with exports\\n */\\nfunction esmExport(\\n  this: TurbopackBaseContext<Module>,\\n  getters: Record<string, () => any>,\\n  id: ModuleId | undefined\\n) {\\n  let module = this.m\\n  let exports = this.e\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n    exports = module.exports\\n  }\\n  module.namespaceObject = module.exports\\n  esm(exports, getters)\\n}\\ncontextPrototype.s = esmExport\\n\\nfunction ensureDynamicExports(module: Module, exports: Exports) {\\n  let reexportedObjects = module[REEXPORTED_OBJECTS]\\n\\n  if (!reexportedObjects) {\\n    reexportedObjects = module[REEXPORTED_OBJECTS] = []\\n    module.exports = module.namespaceObject = new Proxy(exports, {\\n      get(target, prop) {\\n        if (\\n          hasOwnProperty.call(target, prop) ||\\n          prop === 'default' ||\\n          prop === '__esModule'\\n        ) {\\n          return Reflect.get(target, prop)\\n        }\\n        for (const obj of reexportedObjects!) {\\n          const value = Reflect.get(obj, prop)\\n          if (value !== undefined) return value\\n        }\\n        return undefined\\n      },\\n      ownKeys(target) {\\n        const keys = Reflect.ownKeys(target)\\n        for (const obj of reexportedObjects!) {\\n          for (const key of Reflect.ownKeys(obj)) {\\n            if (key !== 'default' && !keys.includes(key)) keys.push(key)\\n          }\\n        }\\n        return keys\\n      },\\n    })\\n  }\\n}\\n\\n/**\\n * Dynamically exports properties from an object\\n */\\nfunction dynamicExport(\\n  this: TurbopackBaseContext<Module>,\\n  object: Record<string, any>,\\n  id: ModuleId | undefined\\n) {\\n  let module = this.m\\n  let exports = this.e\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n    exports = module.exports\\n  }\\n  ensureDynamicExports(module, exports)\\n\\n  if (typeof object === 'object' && object !== null) {\\n    module[REEXPORTED_OBJECTS]!.push(object)\\n  }\\n}\\ncontextPrototype.j = dynamicExport\\n\\nfunction exportValue(\\n  this: TurbopackBaseContext<Module>,\\n  value: any,\\n  id: ModuleId | undefined\\n) {\\n  let module = this.m\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n  }\\n  module.exports = value\\n}\\ncontextPrototype.v = exportValue\\n\\nfunction exportNamespace(\\n  this: TurbopackBaseContext<Module>,\\n  namespace: any,\\n  id: ModuleId | undefined\\n) {\\n  let module = this.m\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n  }\\n  module.exports = module.namespaceObject = namespace\\n}\\ncontextPrototype.n = exportNamespace\\n\\nfunction createGetter(obj: Record<string | symbol, any>, key: string | symbol) {\\n  return () => obj[key]\\n}\\n\\n/**\\n * @returns prototype of the object\\n */\\nconst getProto: (obj: any) => any = Object.getPrototypeOf\\n  ? (obj) => Object.getPrototypeOf(obj)\\n  : (obj) => obj.__proto__\\n\\n/** Prototypes that are not expanded for exports */\\nconst LEAF_PROTOTYPES = [null, getProto({}), getProto([]), getProto(getProto)]\\n\\n/**\\n * @param raw\\n * @param ns\\n * @param allowExportDefault\\n *   * `false`: will have the raw module as default export\\n *   * `true`: will have the default property as default export\\n */\\nfunction interopEsm(\\n  raw: Exports,\\n  ns: EsmNamespaceObject,\\n  allowExportDefault?: boolean\\n) {\\n  const getters: { [s: string]: () => any } = Object.create(null)\\n  for (\\n    let current = raw;\\n    (typeof current === 'object' || typeof current === 'function') &&\\n    !LEAF_PROTOTYPES.includes(current);\\n    current = getProto(current)\\n  ) {\\n    for (const key of Object.getOwnPropertyNames(current)) {\\n      getters[key] = createGetter(raw, key)\\n    }\\n  }\\n\\n  // this is not really correct\\n  // we should set the `default` getter if the imported module is a `.cjs file`\\n  if (!(allowExportDefault && 'default' in getters)) {\\n    getters['default'] = () => raw\\n  }\\n\\n  esm(ns, getters)\\n  return ns\\n}\\n\\nfunction createNS(raw: Module['exports']): EsmNamespaceObject {\\n  if (typeof raw === 'function') {\\n    return function (this: any, ...args: any[]) {\\n      return raw.apply(this, args)\\n    }\\n  } else {\\n    return Object.create(null)\\n  }\\n}\\n\\nfunction esmImport(\\n  this: TurbopackBaseContext<Module>,\\n  id: ModuleId\\n): Exclude<Module['namespaceObject'], undefined> {\\n  const module = getOrInstantiateModuleFromParent(id, this.m)\\n  if (module.error) throw module.error\\n\\n  // any ES module has to have `module.namespaceObject` defined.\\n  if (module.namespaceObject) return module.namespaceObject\\n\\n  // only ESM can be an async module, so we don't need to worry about exports being a promise here.\\n  const raw = module.exports\\n  return (module.namespaceObject = interopEsm(\\n    raw,\\n    createNS(raw),\\n    raw && (raw as any).__esModule\\n  ))\\n}\\ncontextPrototype.i = esmImport\\n\\nfunction asyncLoader(\\n  this: TurbopackBaseContext<Module>,\\n  moduleId: ModuleId\\n): Promise<Exports> {\\n  const loader = this.r(moduleId) as (\\n    importFunction: EsmImport\\n  ) => Promise<Exports>\\n  return loader(this.i.bind(this))\\n}\\ncontextPrototype.A = asyncLoader\\n\\n// Add a simple runtime require so that environments without one can still pass\\n// `typeof require` CommonJS checks so that exports are correctly registered.\\nconst runtimeRequire =\\n  // @ts-ignore\\n  typeof require === 'function'\\n    ? // @ts-ignore\\n      require\\n    : function require() {\\n        throw new Error('Unexpected use of runtime require')\\n      }\\ncontextPrototype.t = runtimeRequire\\n\\nfunction commonJsRequire(\\n  this: TurbopackBaseContext<Module>,\\n  id: ModuleId\\n): Exports {\\n  const module = getOrInstantiateModuleFromParent(id, this.m)\\n  if (module.error) throw module.error\\n  return module.exports\\n}\\ncontextPrototype.r = commonJsRequire\\n\\n/**\\n * `require.context` and require/import expression runtime.\\n */\\nfunction moduleContext(map: ModuleContextMap): ModuleContext {\\n  function moduleContext(id: ModuleId): Exports {\\n    if (hasOwnProperty.call(map, id)) {\\n      return map[id].module()\\n    }\\n\\n    const e = new Error(`Cannot find module '${id}'`)\\n    ;(e as any).code = 'MODULE_NOT_FOUND'\\n    throw e\\n  }\\n\\n  moduleContext.keys = (): ModuleId[] => {\\n    return Object.keys(map)\\n  }\\n\\n  moduleContext.resolve = (id: ModuleId): ModuleId => {\\n    if (hasOwnProperty.call(map, id)) {\\n      return map[id].id()\\n    }\\n\\n    const e = new Error(`Cannot find module '${id}'`)\\n    ;(e as any).code = 'MODULE_NOT_FOUND'\\n    throw e\\n  }\\n\\n  moduleContext.import = async (id: ModuleId) => {\\n    return await (moduleContext(id) as Promise<Exports>)\\n  }\\n\\n  return moduleContext\\n}\\ncontextPrototype.f = moduleContext\\n\\n/**\\n * Returns the path of a chunk defined by its data.\\n */\\nfunction getChunkPath(chunkData: ChunkData): ChunkPath {\\n  return typeof chunkData === 'string' ? chunkData : chunkData.path\\n}\\n\\nfunction isPromise<T = any>(maybePromise: any): maybePromise is Promise<T> {\\n  return (\\n    maybePromise != null &&\\n    typeof maybePromise === 'object' &&\\n    'then' in maybePromise &&\\n    typeof maybePromise.then === 'function'\\n  )\\n}\\n\\nfunction isAsyncModuleExt<T extends {}>(obj: T): obj is AsyncModuleExt & T {\\n  return turbopackQueues in obj\\n}\\n\\nfunction createPromise<T>() {\\n  let resolve: (value: T | PromiseLike<T>) => void\\n  let reject: (reason?: any) => void\\n\\n  const promise = new Promise<T>((res, rej) => {\\n    reject = rej\\n    resolve = res\\n  })\\n\\n  return {\\n    promise,\\n    resolve: resolve!,\\n    reject: reject!,\\n  }\\n}\\n\\n// everything below is adapted from webpack\\n// https://github.com/webpack/webpack/blob/6be4065ade1e252c1d8dcba4af0f43e32af1bdc1/lib/runtime/AsyncModuleRuntimeModule.js#L13\\n\\nconst turbopackQueues = Symbol('turbopack queues')\\nconst turbopackExports = Symbol('turbopack exports')\\nconst turbopackError = Symbol('turbopack error')\\n\\nconst enum QueueStatus {\\n  Unknown = -1,\\n  Unresolved = 0,\\n  Resolved = 1,\\n}\\n\\ntype AsyncQueueFn = (() => void) & { queueCount: number }\\ntype AsyncQueue = AsyncQueueFn[] & {\\n  status: QueueStatus\\n}\\n\\nfunction resolveQueue(queue?: AsyncQueue) {\\n  if (queue && queue.status !== QueueStatus.Resolved) {\\n    queue.status = QueueStatus.Resolved\\n    queue.forEach((fn) => fn.queueCount--)\\n    queue.forEach((fn) => (fn.queueCount-- ? fn.queueCount++ : fn()))\\n  }\\n}\\n\\ntype Dep = Exports | AsyncModulePromise | Promise<Exports>\\n\\ntype AsyncModuleExt = {\\n  [turbopackQueues]: (fn: (queue: AsyncQueue) => void) => void\\n  [turbopackExports]: Exports\\n  [turbopackError]?: any\\n}\\n\\ntype AsyncModulePromise<T = Exports> = Promise<T> & AsyncModuleExt\\n\\nfunction wrapDeps(deps: Dep[]): AsyncModuleExt[] {\\n  return deps.map((dep): AsyncModuleExt => {\\n    if (dep !== null && typeof dep === 'object') {\\n      if (isAsyncModuleExt(dep)) return dep\\n      if (isPromise(dep)) {\\n        const queue: AsyncQueue = Object.assign([], {\\n          status: QueueStatus.Unresolved,\\n        })\\n\\n        const obj: AsyncModuleExt = {\\n          [turbopackExports]: {},\\n          [turbopackQueues]: (fn: (queue: AsyncQueue) => void) => fn(queue),\\n        }\\n\\n        dep.then(\\n          (res) => {\\n            obj[turbopackExports] = res\\n            resolveQueue(queue)\\n          },\\n          (err) => {\\n            obj[turbopackError] = err\\n            resolveQueue(queue)\\n          }\\n        )\\n\\n        return obj\\n      }\\n    }\\n\\n    return {\\n      [turbopackExports]: dep,\\n      [turbopackQueues]: () => {},\\n    }\\n  })\\n}\\n\\nfunction asyncModule(\\n  this: TurbopackBaseContext<Module>,\\n  body: (\\n    handleAsyncDependencies: (\\n      deps: Dep[]\\n    ) => Exports[] | Promise<() => Exports[]>,\\n    asyncResult: (err?: any) => void\\n  ) => void,\\n  hasAwait: boolean\\n) {\\n  const module = this.m\\n  const queue: AsyncQueue | undefined = hasAwait\\n    ? Object.assign([], { status: QueueStatus.Unknown })\\n    : undefined\\n\\n  const depQueues: Set<AsyncQueue> = new Set()\\n\\n  const { resolve, reject, promise: rawPromise } = createPromise<Exports>()\\n\\n  const promise: AsyncModulePromise = Object.assign(rawPromise, {\\n    [turbopackExports]: module.exports,\\n    [turbopackQueues]: (fn) => {\\n      queue && fn(queue)\\n      depQueues.forEach(fn)\\n      promise['catch'](() => {})\\n    },\\n  } satisfies AsyncModuleExt)\\n\\n  const attributes: PropertyDescriptor = {\\n    get(): any {\\n      return promise\\n    },\\n    set(v: any) {\\n      // Calling `esmExport` leads to this.\\n      if (v !== promise) {\\n        promise[turbopackExports] = v\\n      }\\n    },\\n  }\\n\\n  Object.defineProperty(module, 'exports', attributes)\\n  Object.defineProperty(module, 'namespaceObject', attributes)\\n\\n  function handleAsyncDependencies(deps: Dep[]) {\\n    const currentDeps = wrapDeps(deps)\\n\\n    const getResult = () =>\\n      currentDeps.map((d) => {\\n        if (d[turbopackError]) throw d[turbopackError]\\n        return d[turbopackExports]\\n      })\\n\\n    const { promise, resolve } = createPromise<() => Exports[]>()\\n\\n    const fn: AsyncQueueFn = Object.assign(() => resolve(getResult), {\\n      queueCount: 0,\\n    })\\n\\n    function fnQueue(q: AsyncQueue) {\\n      if (q !== queue && !depQueues.has(q)) {\\n        depQueues.add(q)\\n        if (q && q.status === QueueStatus.Unresolved) {\\n          fn.queueCount++\\n          q.push(fn)\\n        }\\n      }\\n    }\\n\\n    currentDeps.map((dep) => dep[turbopackQueues](fnQueue))\\n\\n    return fn.queueCount ? promise : getResult()\\n  }\\n\\n  function asyncResult(err?: any) {\\n    if (err) {\\n      reject((promise[turbopackError] = err))\\n    } else {\\n      resolve(promise[turbopackExports])\\n    }\\n\\n    resolveQueue(queue)\\n  }\\n\\n  body(handleAsyncDependencies, asyncResult)\\n\\n  if (queue && queue.status === QueueStatus.Unknown) {\\n    queue.status = QueueStatus.Unresolved\\n  }\\n}\\ncontextPrototype.a = asyncModule\\n\\n/**\\n * A pseudo \\\"fake\\\" URL object to resolve to its relative path.\\n *\\n * When UrlRewriteBehavior is set to relative, calls to the `new URL()` will construct url without base using this\\n * runtime function to generate context-agnostic urls between different rendering context, i.e ssr / client to avoid\\n * hydration mismatch.\\n *\\n * This is based on webpack's existing implementation:\\n * https://github.com/webpack/webpack/blob/87660921808566ef3b8796f8df61bd79fc026108/lib/runtime/RelativeUrlRuntimeModule.js\\n */\\nconst relativeURL = function relativeURL(this: any, inputUrl: string) {\\n  const realUrl = new URL(inputUrl, 'x:/')\\n  const values: Record<string, any> = {}\\n  for (const key in realUrl) values[key] = (realUrl as any)[key]\\n  values.href = inputUrl\\n  values.pathname = inputUrl.replace(/[?#].*/, '')\\n  values.origin = values.protocol = ''\\n  values.toString = values.toJSON = (..._args: Array<any>) => inputUrl\\n  for (const key in values)\\n    Object.defineProperty(this, key, {\\n      enumerable: true,\\n      configurable: true,\\n      value: values[key],\\n    })\\n}\\nrelativeURL.prototype = URL.prototype\\ncontextPrototype.U = relativeURL\\n\\n/**\\n * Utility function to ensure all variants of an enum are handled.\\n */\\nfunction invariant(never: never, computeMessage: (arg: any) => string): never {\\n  throw new Error(`Invariant: ${computeMessage(never)}`)\\n}\\n\\n/**\\n * A stub function to make `require` available but non-functional in ESM.\\n */\\nfunction requireStub(_moduleId: ModuleId): never {\\n  throw new Error('dynamic usage of require is not supported')\\n}\\ncontextPrototype.z = requireStub\\n\\ntype ContextConstructor<M> = {\\n  new (module: Module): TurbopackBaseContext<M>\\n}\\n\"],\"names\":[],\"mappings\":\"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\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 403, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/base-externals-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n\\n/// A 'base' utilities to support runtime can have externals.\\n/// Currently this is for node.js / edge runtime both.\\n/// If a fn requires node.js specific behavior, it should be placed in `node-external-utils` instead.\\n\\nasync function externalImport(id: DependencySpecifier) {\\n  let raw\\n  try {\\n    raw = await import(id)\\n  } catch (err) {\\n    // TODO(alexkirsz) This can happen when a client-side module tries to load\\n    // an external module we don't provide a shim for (e.g. querystring, url).\\n    // For now, we fail semi-silently, but in the future this should be a\\n    // compilation error.\\n    throw new Error(`Failed to load external module ${id}: ${err}`)\\n  }\\n\\n  if (raw && raw.__esModule && raw.default && 'default' in raw.default) {\\n    return interopEsm(raw.default, createNS(raw), true)\\n  }\\n\\n  return raw\\n}\\ncontextPrototype.y = externalImport\\n\\nfunction externalRequire(\\n  id: ModuleId,\\n  thunk: () => any,\\n  esm: boolean = false\\n): Exports | EsmNamespaceObject {\\n  let raw\\n  try {\\n    raw = thunk()\\n  } catch (err) {\\n    // TODO(alexkirsz) This can happen when a client-side module tries to load\\n    // an external module we don't provide a shim for (e.g. querystring, url).\\n    // For now, we fail semi-silently, but in the future this should be a\\n    // compilation error.\\n    throw new Error(`Failed to load external module ${id}: ${err}`)\\n  }\\n\\n  if (!esm || raw.__esModule) {\\n    return raw\\n  }\\n\\n  return interopEsm(raw, createNS(raw), true)\\n}\\n\\nexternalRequire.resolve = (\\n  id: string,\\n  options?: {\\n    paths?: string[]\\n  }\\n) => {\\n  return require.resolve(id, options)\\n}\\ncontextPrototype.x = externalRequire\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAEpD,mDAAmD;AAEnD,6DAA6D;AAC7D,sDAAsD;AACtD,qGAAqG;AAErG,eAAe,eAAe,EAAuB;IACnD,IAAI;IACJ,IAAI;QACF,MAAM,MAAM,MAAM,CAAC;IACrB,EAAE,OAAO,KAAK;QACZ,0EAA0E;QAC1E,0EAA0E;QAC1E,qEAAqE;QACrE,qBAAqB;QACrB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,EAAE,EAAE,KAAK;IAChE;IAEA,IAAI,OAAO,IAAI,UAAU,IAAI,IAAI,OAAO,IAAI,aAAa,IAAI,OAAO,EAAE;QACpE,OAAO,WAAW,IAAI,OAAO,EAAE,SAAS,MAAM;IAChD;IAEA,OAAO;AACT;AACA,iBAAiB,CAAC,GAAG;AAErB,SAAS,gBACP,EAAY,EACZ,KAAgB,EAChB,MAAe,KAAK;IAEpB,IAAI;IACJ,IAAI;QACF,MAAM;IACR,EAAE,OAAO,KAAK;QACZ,0EAA0E;QAC1E,0EAA0E;QAC1E,qEAAqE;QACrE,qBAAqB;QACrB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,EAAE,EAAE,KAAK;IAChE;IAEA,IAAI,CAAC,OAAO,IAAI,UAAU,EAAE;QAC1B,OAAO;IACT;IAEA,OAAO,WAAW,KAAK,SAAS,MAAM;AACxC;AAEA,gBAAgB,OAAO,GAAG,CACxB,IACA;IAIA,OAAO,QAAQ,OAAO,CAAC,IAAI;AAC7B;AACA,iBAAiB,CAAC,GAAG\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 444, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/node-externals-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\ndeclare var RUNTIME_PUBLIC_PATH: string\\ndeclare var RELATIVE_ROOT_PATH: string\\ndeclare var ASSET_PREFIX: string\\n\\nconst path = require('path')\\n\\nconst relativePathToRuntimeRoot = path.relative(RUNTIME_PUBLIC_PATH, '.')\\n// Compute the relative path to the `distDir`.\\nconst relativePathToDistRoot = path.join(\\n  relativePathToRuntimeRoot,\\n  RELATIVE_ROOT_PATH\\n)\\nconst RUNTIME_ROOT = path.resolve(__filename, relativePathToRuntimeRoot)\\n// Compute the absolute path to the root, by stripping distDir from the absolute path to this file.\\nconst ABSOLUTE_ROOT = path.resolve(__filename, relativePathToDistRoot)\\n\\n/**\\n * Returns an absolute path to the given module path.\\n * Module path should be relative, either path to a file or a directory.\\n *\\n * This fn allows to calculate an absolute path for some global static values, such as\\n * `__dirname` or `import.meta.url` that Turbopack will not embeds in compile time.\\n * See ImportMetaBinding::code_generation for the usage.\\n */\\nfunction resolveAbsolutePath(modulePath?: string): string {\\n  if (modulePath) {\\n    return path.join(ABSOLUTE_ROOT, modulePath)\\n  }\\n  return ABSOLUTE_ROOT\\n}\\nContext.prototype.P = resolveAbsolutePath\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAMpD,MAAM,OAAO,QAAQ;AAErB,MAAM,4BAA4B,KAAK,QAAQ,CAAC,qBAAqB;AACrE,8CAA8C;AAC9C,MAAM,yBAAyB,KAAK,IAAI,CACtC,2BACA;AAEF,MAAM,eAAe,KAAK,OAAO,CAAC,YAAY;AAC9C,mGAAmG;AACnG,MAAM,gBAAgB,KAAK,OAAO,CAAC,YAAY;AAE/C;;;;;;;CAOC,GACD,SAAS,oBAAoB,UAAmB;IAC9C,IAAI,YAAY;QACd,OAAO,KAAK,IAAI,CAAC,eAAe;IAClC;IACA,OAAO;AACT;AACA,QAAQ,SAAS,CAAC,CAAC,GAAG\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 465, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/node-wasm-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n\\nfunction readWebAssemblyAsResponse(path: string) {\\n  const { createReadStream } = require('fs') as typeof import('fs')\\n  const { Readable } = require('stream') as typeof import('stream')\\n\\n  const stream = createReadStream(path)\\n\\n  // @ts-ignore unfortunately there's a slight type mismatch with the stream.\\n  return new Response(Readable.toWeb(stream), {\\n    headers: {\\n      'content-type': 'application/wasm',\\n    },\\n  })\\n}\\n\\nasync function compileWebAssemblyFromPath(\\n  path: string\\n): Promise<WebAssembly.Module> {\\n  const response = readWebAssemblyAsResponse(path)\\n\\n  return await WebAssembly.compileStreaming(response)\\n}\\n\\nasync function instantiateWebAssemblyFromPath(\\n  path: string,\\n  importsObj: WebAssembly.Imports\\n): Promise<Exports> {\\n  const response = readWebAssemblyAsResponse(path)\\n\\n  const { instance } = await WebAssembly.instantiateStreaming(\\n    response,\\n    importsObj\\n  )\\n\\n  return instance.exports\\n}\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAEpD,mDAAmD;AAEnD,SAAS,0BAA0B,IAAY;IAC7C,MAAM,EAAE,gBAAgB,EAAE,GAAG,QAAQ;IACrC,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ;IAE7B,MAAM,SAAS,iBAAiB;IAEhC,2EAA2E;IAC3E,OAAO,IAAI,SAAS,SAAS,KAAK,CAAC,SAAS;QAC1C,SAAS;YACP,gBAAgB;QAClB;IACF;AACF;AAEA,eAAe,2BACb,IAAY;IAEZ,MAAM,WAAW,0BAA0B;IAE3C,OAAO,MAAM,YAAY,gBAAgB,CAAC;AAC5C;AAEA,eAAe,+BACb,IAAY,EACZ,UAA+B;IAE/B,MAAM,WAAW,0BAA0B;IAE3C,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,YAAY,oBAAoB,CACzD,UACA;IAGF,OAAO,SAAS,OAAO;AACzB\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 486, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/nodejs/runtime.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/base-externals-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/node-externals-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/node-wasm-utils.ts\\\" />\\n\\nenum SourceType {\\n  /**\\n   * The module was instantiated because it was included in an evaluated chunk's\\n   * runtime.\\n   * SourceData is a ChunkPath.\\n   */\\n  Runtime = 0,\\n  /**\\n   * The module was instantiated because a parent module imported it.\\n   * SourceData is a ModuleId.\\n   */\\n  Parent = 1,\\n}\\n\\ntype SourceData = ChunkPath | ModuleId\\n\\nprocess.env.TURBOPACK = '1'\\n\\nfunction stringifySourceInfo(\\n  sourceType: SourceType,\\n  sourceData: SourceData\\n): string {\\n  switch (sourceType) {\\n    case SourceType.Runtime:\\n      return `runtime for chunk ${sourceData}`\\n    case SourceType.Parent:\\n      return `parent module ${sourceData}`\\n    default:\\n      invariant(\\n        sourceType,\\n        (sourceType) => `Unknown source type: ${sourceType}`\\n      )\\n  }\\n}\\n\\ninterface TurbopackNodeBuildContext extends TurbopackBaseContext<Module> {\\n  R: ResolvePathFromModule\\n  x: ExternalRequire\\n  y: ExternalImport\\n}\\n\\nconst nodeContextPrototype = Context.prototype as TurbopackNodeBuildContext\\n\\ntype ModuleFactory = (\\n  this: Module['exports'],\\n  context: TurbopackNodeBuildContext\\n) => unknown\\n\\nconst url = require('url') as typeof import('url')\\nconst fs = require('fs/promises') as typeof import('fs/promises')\\n\\nconst moduleFactories: ModuleFactories = Object.create(null)\\nnodeContextPrototype.M = moduleFactories\\nconst moduleCache: ModuleCache<Module> = Object.create(null)\\nnodeContextPrototype.c = moduleCache\\n\\n/**\\n * Returns an absolute path to the given module's id.\\n */\\nfunction resolvePathFromModule(\\n  this: TurbopackBaseContext<Module>,\\n  moduleId: string\\n): string {\\n  const exported = this.r(moduleId)\\n  const exportedPath = exported?.default ?? exported\\n  if (typeof exportedPath !== 'string') {\\n    return exported as any\\n  }\\n\\n  const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length)\\n  const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix)\\n\\n  return url.pathToFileURL(resolved).href\\n}\\nnodeContextPrototype.R = resolvePathFromModule\\n\\nfunction loadRuntimeChunk(sourcePath: ChunkPath, chunkData: ChunkData): void {\\n  if (typeof chunkData === 'string') {\\n    loadRuntimeChunkPath(sourcePath, chunkData)\\n  } else {\\n    loadRuntimeChunkPath(sourcePath, chunkData.path)\\n  }\\n}\\n\\nconst loadedChunks = new Set<ChunkPath>()\\nconst unsupportedLoadChunk = Promise.resolve(undefined)\\nconst loadedChunk: Promise<void> = Promise.resolve(undefined)\\nconst chunkCache = new Map<ChunkPath, Promise<void>>()\\n\\nfunction clearChunkCache() {\\n  chunkCache.clear()\\n}\\n\\nfunction loadRuntimeChunkPath(\\n  sourcePath: ChunkPath,\\n  chunkPath: ChunkPath\\n): void {\\n  if (!isJs(chunkPath)) {\\n    // We only support loading JS chunks in Node.js.\\n    // This branch can be hit when trying to load a CSS chunk.\\n    return\\n  }\\n\\n  if (loadedChunks.has(chunkPath)) {\\n    return\\n  }\\n\\n  try {\\n    const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n    const chunkModules: CompressedModuleFactories = require(resolved)\\n\\n    for (const [moduleId, moduleFactory] of Object.entries(chunkModules)) {\\n      if (!moduleFactories[moduleId]) {\\n        if (Array.isArray(moduleFactory)) {\\n          const [moduleFactoryFn, otherIds] = moduleFactory\\n          moduleFactories[moduleId] = moduleFactoryFn\\n          for (const otherModuleId of otherIds) {\\n            moduleFactories[otherModuleId] = moduleFactoryFn\\n          }\\n        } else {\\n          moduleFactories[moduleId] = moduleFactory\\n        }\\n      }\\n    }\\n    loadedChunks.add(chunkPath)\\n  } catch (e) {\\n    let errorMessage = `Failed to load chunk ${chunkPath}`\\n\\n    if (sourcePath) {\\n      errorMessage += ` from runtime for chunk ${sourcePath}`\\n    }\\n\\n    throw new Error(errorMessage, {\\n      cause: e,\\n    })\\n  }\\n}\\n\\nfunction loadChunkUncached(chunkPath: ChunkPath) {\\n  // resolve to an absolute path to simplify `require` handling\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  // TODO: consider switching to `import()` to enable concurrent chunk loading and async file io\\n  // However this is incompatible with hot reloading (since `import` doesn't use the require cache)\\n  const chunkModules: CompressedModuleFactories = require(resolved)\\n  for (const [moduleId, moduleFactory] of Object.entries(chunkModules)) {\\n    if (!moduleFactories[moduleId]) {\\n      if (Array.isArray(moduleFactory)) {\\n        const [moduleFactoryFn, otherIds] = moduleFactory\\n        moduleFactories[moduleId] = moduleFactoryFn\\n        for (const otherModuleId of otherIds) {\\n          moduleFactories[otherModuleId] = moduleFactoryFn\\n        }\\n      } else {\\n        moduleFactories[moduleId] = moduleFactory\\n      }\\n    }\\n  }\\n}\\n\\nfunction loadChunkAsync(\\n  this: TurbopackBaseContext<Module>,\\n  chunkData: ChunkData\\n): Promise<void> {\\n  const chunkPath = typeof chunkData === 'string' ? chunkData : chunkData.path\\n  if (!isJs(chunkPath)) {\\n    // We only support loading JS chunks in Node.js.\\n    // This branch can be hit when trying to load a CSS chunk.\\n    return unsupportedLoadChunk\\n  }\\n\\n  let entry = chunkCache.get(chunkPath)\\n  if (entry === undefined) {\\n    try {\\n      // Load the chunk synchronously\\n      loadChunkUncached(chunkPath)\\n      entry = loadedChunk\\n    } catch (e) {\\n      const errorMessage = `Failed to load chunk ${chunkPath} from module ${this.m.id}`\\n\\n      // Cache the failure promise, future requests will also get this same rejection\\n      entry = Promise.reject(\\n        new Error(errorMessage, {\\n          cause: e,\\n        })\\n      )\\n    }\\n    chunkCache.set(chunkPath, entry)\\n  }\\n  // TODO: Return an instrumented Promise that React can use instead of relying on referential equality.\\n  return entry\\n}\\ncontextPrototype.l = loadChunkAsync\\n\\nfunction loadChunkAsyncByUrl(\\n  this: TurbopackBaseContext<Module>,\\n  chunkUrl: string\\n) {\\n  const path = url.fileURLToPath(new URL(chunkUrl, RUNTIME_ROOT)) as ChunkPath\\n  return loadChunkAsync.call(this, path)\\n}\\ncontextPrototype.L = loadChunkAsyncByUrl\\n\\nfunction loadWebAssembly(\\n  chunkPath: ChunkPath,\\n  _edgeModule: () => WebAssembly.Module,\\n  imports: WebAssembly.Imports\\n) {\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  return instantiateWebAssemblyFromPath(resolved, imports)\\n}\\ncontextPrototype.w = loadWebAssembly\\n\\nfunction loadWebAssemblyModule(\\n  chunkPath: ChunkPath,\\n  _edgeModule: () => WebAssembly.Module\\n) {\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  return compileWebAssemblyFromPath(resolved)\\n}\\ncontextPrototype.u = loadWebAssemblyModule\\n\\nfunction getWorkerBlobURL(_chunks: ChunkPath[]): string {\\n  throw new Error('Worker blobs are not implemented yet for Node.js')\\n}\\n\\nnodeContextPrototype.b = getWorkerBlobURL\\n\\nfunction instantiateModule(\\n  id: ModuleId,\\n  sourceType: SourceType,\\n  sourceData: SourceData\\n): Module {\\n  const moduleFactory = moduleFactories[id]\\n  if (typeof moduleFactory !== 'function') {\\n    // This can happen if modules incorrectly handle HMR disposes/updates,\\n    // e.g. when they keep a `setTimeout` around which still executes old code\\n    // and contains e.g. a `require(\\\"something\\\")` call.\\n    let instantiationReason\\n    switch (sourceType) {\\n      case SourceType.Runtime:\\n        instantiationReason = `as a runtime entry of chunk ${sourceData}`\\n        break\\n      case SourceType.Parent:\\n        instantiationReason = `because it was required from module ${sourceData}`\\n        break\\n      default:\\n        invariant(\\n          sourceType,\\n          (sourceType) => `Unknown source type: ${sourceType}`\\n        )\\n    }\\n    throw new Error(\\n      `Module ${id} was instantiated ${instantiationReason}, but the module factory is not available.`\\n    )\\n  }\\n\\n  const module: Module = createModuleObject(id)\\n  moduleCache[id] = module\\n\\n  // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\\n  try {\\n    const context = new (Context as any as ContextConstructor<Module>)(module)\\n    moduleFactory(context)\\n  } catch (error) {\\n    module.error = error as any\\n    throw error\\n  }\\n\\n  module.loaded = true\\n  if (module.namespaceObject && module.exports !== module.namespaceObject) {\\n    // in case of a circular dependency: cjs1 -> esm2 -> cjs1\\n    interopEsm(module.exports, module.namespaceObject)\\n  }\\n\\n  return module\\n}\\n\\n/**\\n * Retrieves a module from the cache, or instantiate it if it is not cached.\\n */\\n// @ts-ignore\\nfunction getOrInstantiateModuleFromParent(\\n  id: ModuleId,\\n  sourceModule: Module\\n): Module {\\n  const module = moduleCache[id]\\n\\n  if (module) {\\n    return module\\n  }\\n\\n  return instantiateModule(id, SourceType.Parent, sourceModule.id)\\n}\\n\\n/**\\n * Instantiates a runtime module.\\n */\\nfunction instantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module {\\n  return instantiateModule(moduleId, SourceType.Runtime, chunkPath)\\n}\\n\\n/**\\n * Retrieves a module from the cache, or instantiate it as a runtime module if it is not cached.\\n */\\n// @ts-ignore TypeScript doesn't separate this module space from the browser runtime\\nfunction getOrInstantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module {\\n  const module = moduleCache[moduleId]\\n  if (module) {\\n    if (module.error) {\\n      throw module.error\\n    }\\n    return module\\n  }\\n\\n  return instantiateRuntimeModule(chunkPath, moduleId)\\n}\\n\\nconst regexJsUrl = /\\\\.js(?:\\\\?[^#]*)?(?:#.*)?$/\\n/**\\n * Checks if a given path/URL ends with .js, optionally followed by ?query or #fragment.\\n */\\nfunction isJs(chunkUrlOrPath: ChunkUrl | ChunkPath): boolean {\\n  return regexJsUrl.test(chunkUrlOrPath)\\n}\\n\\nmodule.exports = (sourcePath: ChunkPath) => ({\\n  m: (id: ModuleId) => getOrInstantiateRuntimeModule(sourcePath, id),\\n  c: (chunkData: ChunkData) => loadRuntimeChunk(sourcePath, chunkData),\\n})\\n\"],\"names\":[],\"mappings\":\"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\",\"ignoreList\":[0]}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "72a74851138a9f9a4cb119847303b37c7e9a5fc7",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_dev_runtime/output/a5fc1_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_73aab4ae.js",
            "status": "modified",
            "additions": 214,
            "deletions": 183,
            "changes": 397,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2Fa5fc1_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_73aab4ae.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2Fa5fc1_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_73aab4ae.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2Fa5fc1_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_73aab4ae.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -19,6 +19,13 @@ const RUNTIME_PUBLIC_PATH = \"\";\n  * It will be prepended to the runtime code of each runtime.\n  */ /* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"./runtime-types.d.ts\" />\n const REEXPORTED_OBJECTS = Symbol('reexported objects');\n+/**\n+ * Constructs the `__turbopack_context__` object for a module.\n+ */ function Context(module) {\n+    this.m = module;\n+    this.e = module.exports;\n+}\n+const contextPrototype = Context.prototype;\n const hasOwnProperty = Object.prototype.hasOwnProperty;\n const toStringTag = typeof Symbol !== 'undefined' && Symbol.toStringTag;\n function defineProp(obj, name, options) {\n@@ -29,17 +36,23 @@ function getOverwrittenModule(moduleCache, id) {\n     if (!module) {\n         // This is invoked when a module is merged into another module, thus it wasn't invoked via\n         // instantiateModule and the cache entry wasn't created yet.\n-        module = {\n-            exports: {},\n-            error: undefined,\n-            loaded: false,\n-            id,\n-            namespaceObject: undefined\n-        };\n+        module = createModuleObject(id);\n         moduleCache[id] = module;\n     }\n     return module;\n }\n+/**\n+ * Creates the module object. Only done here to ensure all module objects have the same shape.\n+ */ function createModuleObject(id) {\n+    return {\n+        exports: {},\n+        error: undefined,\n+        loaded: false,\n+        id,\n+        namespaceObject: undefined,\n+        [REEXPORTED_OBJECTS]: undefined\n+    };\n+}\n /**\n  * Adds the getters to the exports object.\n  */ function esm(exports, getters) {\n@@ -68,14 +81,17 @@ function getOverwrittenModule(moduleCache, id) {\n }\n /**\n  * Makes the module an ESM with exports\n- */ function esmExport(module, exports, moduleCache, getters, id) {\n+ */ function esmExport(getters, id) {\n+    let module = this.m;\n+    let exports = this.e;\n     if (id != null) {\n-        module = getOverwrittenModule(moduleCache, id);\n+        module = getOverwrittenModule(this.c, id);\n         exports = module.exports;\n     }\n     module.namespaceObject = module.exports;\n     esm(exports, getters);\n }\n+contextPrototype.s = esmExport;\n function ensureDynamicExports(module, exports) {\n     let reexportedObjects = module[REEXPORTED_OBJECTS];\n     if (!reexportedObjects) {\n@@ -105,28 +121,35 @@ function ensureDynamicExports(module, exports) {\n }\n /**\n  * Dynamically exports properties from an object\n- */ function dynamicExport(module, exports, moduleCache, object, id) {\n+ */ function dynamicExport(object, id) {\n+    let module = this.m;\n+    let exports = this.e;\n     if (id != null) {\n-        module = getOverwrittenModule(moduleCache, id);\n+        module = getOverwrittenModule(this.c, id);\n         exports = module.exports;\n     }\n     ensureDynamicExports(module, exports);\n     if (typeof object === 'object' && object !== null) {\n         module[REEXPORTED_OBJECTS].push(object);\n     }\n }\n-function exportValue(module, moduleCache, value, id) {\n+contextPrototype.j = dynamicExport;\n+function exportValue(value, id) {\n+    let module = this.m;\n     if (id != null) {\n-        module = getOverwrittenModule(moduleCache, id);\n+        module = getOverwrittenModule(this.c, id);\n     }\n     module.exports = value;\n }\n-function exportNamespace(module, moduleCache, namespace, id) {\n+contextPrototype.v = exportValue;\n+function exportNamespace(namespace, id) {\n+    let module = this.m;\n     if (id != null) {\n-        module = getOverwrittenModule(moduleCache, id);\n+        module = getOverwrittenModule(this.c, id);\n     }\n     module.exports = module.namespaceObject = namespace;\n }\n+contextPrototype.n = exportNamespace;\n function createGetter(obj, key) {\n     return ()=>obj[key];\n }\n@@ -169,26 +192,34 @@ function createNS(raw) {\n         return Object.create(null);\n     }\n }\n-function esmImport(sourceModule, id) {\n-    const module = getOrInstantiateModuleFromParent(id, sourceModule);\n+function esmImport(id) {\n+    const module = getOrInstantiateModuleFromParent(id, this.m);\n     if (module.error) throw module.error;\n     // any ES module has to have `module.namespaceObject` defined.\n     if (module.namespaceObject) return module.namespaceObject;\n     // only ESM can be an async module, so we don't need to worry about exports being a promise here.\n     const raw = module.exports;\n     return module.namespaceObject = interopEsm(raw, createNS(raw), raw && raw.__esModule);\n }\n+contextPrototype.i = esmImport;\n+function asyncLoader(moduleId) {\n+    const loader = this.r(moduleId);\n+    return loader(this.i.bind(this));\n+}\n+contextPrototype.A = asyncLoader;\n // Add a simple runtime require so that environments without one can still pass\n // `typeof require` CommonJS checks so that exports are correctly registered.\n const runtimeRequire = // @ts-ignore\n typeof require === 'function' ? require : function require1() {\n     throw new Error('Unexpected use of runtime require');\n };\n-function commonJsRequire(sourceModule, id) {\n-    const module = getOrInstantiateModuleFromParent(id, sourceModule);\n+contextPrototype.t = runtimeRequire;\n+function commonJsRequire(id) {\n+    const module = getOrInstantiateModuleFromParent(id, this.m);\n     if (module.error) throw module.error;\n     return module.exports;\n }\n+contextPrototype.r = commonJsRequire;\n /**\n  * `require.context` and require/import expression runtime.\n  */ function moduleContext(map) {\n@@ -216,6 +247,7 @@ function commonJsRequire(sourceModule, id) {\n     };\n     return moduleContext;\n }\n+contextPrototype.f = moduleContext;\n /**\n  * Returns the path of a chunk defined by its data.\n  */ function getChunkPath(chunkData) {\n@@ -280,7 +312,8 @@ function wrapDeps(deps) {\n         };\n     });\n }\n-function asyncModule(module, body, hasAwait) {\n+function asyncModule(body, hasAwait) {\n+    const module = this.m;\n     const queue = hasAwait ? Object.assign([], {\n         status: -1\n     }) : undefined;\n@@ -342,6 +375,7 @@ function asyncModule(module, body, hasAwait) {\n         queue.status = 0;\n     }\n }\n+contextPrototype.a = asyncModule;\n /**\n  * A pseudo \"fake\" URL object to resolve to its relative path.\n  *\n@@ -366,6 +400,7 @@ function asyncModule(module, body, hasAwait) {\n     });\n };\n relativeURL.prototype = URL.prototype;\n+contextPrototype.U = relativeURL;\n /**\n  * Utility function to ensure all variants of an enum are handled.\n  */ function invariant(never, computeMessage) {\n@@ -376,6 +411,7 @@ relativeURL.prototype = URL.prototype;\n  */ function requireStub(_moduleId) {\n     throw new Error('dynamic usage of require is not supported');\n }\n+contextPrototype.z = requireStub;\n /**\n  * This file contains runtime types and functions that are shared between all\n  * Turbopack *development* ECMAScript runtimes.\n@@ -385,6 +421,7 @@ relativeURL.prototype = URL.prototype;\n  */ /* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../base/globals.d.ts\" />\n /// <reference path=\"../../../shared/runtime-utils.ts\" />\n // Used in WebWorkers to tell the runtime about the chunk base path\n+const browserContextPrototype = Context.prototype;\n var SourceType = /*#__PURE__*/ function(SourceType) {\n     /**\n    * The module was instantiated because it was included in an evaluated chunk's\n@@ -403,33 +440,34 @@ var SourceType = /*#__PURE__*/ function(SourceType) {\n     return SourceType;\n }(SourceType || {});\n const moduleFactories = Object.create(null);\n-/**\n- * Module IDs that are instantiated as part of the runtime of a chunk.\n- */ const runtimeModules = new Set();\n-/**\n- * Map from module ID to the chunks that contain this module.\n- *\n- * In HMR, we need to keep track of which modules are contained in which so\n- * chunks. This is so we don't eagerly dispose of a module when it is removed\n- * from chunk A, but still exists in chunk B.\n- */ const moduleChunksMap = new Map();\n-/**\n- * Map from a chunk path to all modules it contains.\n- */ const chunkModulesMap = new Map();\n-/**\n- * Chunk lists that contain a runtime. When these chunk lists receive an update\n- * that can't be reconciled with the current state of the page, we need to\n- * reload the runtime entirely.\n- */ const runtimeChunkLists = new Set();\n-/**\n- * Map from a chunk list to the chunk paths it contains.\n- */ const chunkListChunksMap = new Map();\n-/**\n- * Map from a chunk path to the chunk lists it belongs to.\n- */ const chunkChunkListsMap = new Map();\n+contextPrototype.M = moduleFactories;\n const availableModules = new Map();\n const availableModuleChunks = new Map();\n-async function loadChunk(sourceType, sourceData, chunkData) {\n+function factoryNotAvailable(moduleId, sourceType, sourceData) {\n+    let instantiationReason;\n+    switch(sourceType){\n+        case 0:\n+            instantiationReason = `as a runtime entry of chunk ${sourceData}`;\n+            break;\n+        case 1:\n+            instantiationReason = `because it was required from module ${sourceData}`;\n+            break;\n+        case 2:\n+            instantiationReason = 'because of an HMR update';\n+            break;\n+        default:\n+            invariant(sourceType, (sourceType)=>`Unknown source type: ${sourceType}`);\n+    }\n+    throw new Error(`Module ${moduleId} was instantiated ${instantiationReason}, but the module factory is not available. It might have been deleted in an HMR update.`);\n+}\n+function loadChunk(chunkData) {\n+    return loadChunkInternal(1, this.m.id, chunkData);\n+}\n+browserContextPrototype.l = loadChunk;\n+function loadInitialChunk(chunkPath, chunkData) {\n+    return loadChunkInternal(0, chunkPath, chunkData);\n+}\n+async function loadChunkInternal(sourceType, sourceData, chunkData) {\n     if (typeof chunkData === 'string') {\n         return loadChunkPath(sourceType, sourceData, chunkData);\n     }\n@@ -440,7 +478,8 @@ async function loadChunk(sourceType, sourceData, chunkData) {\n     });\n     if (modulesPromises.length > 0 && modulesPromises.every((p)=>p)) {\n         // When all included items are already loaded or loading, we can skip loading ourselves\n-        return Promise.all(modulesPromises);\n+        await Promise.all(modulesPromises);\n+        return;\n     }\n     const includedModuleChunksList = chunkData.moduleChunks || [];\n     const moduleChunksPromises = includedModuleChunksList.map((included)=>{\n@@ -453,7 +492,8 @@ async function loadChunk(sourceType, sourceData, chunkData) {\n         // Some module chunks are already loaded or loading.\n         if (moduleChunksPromises.length === includedModuleChunksList.length) {\n             // When all included module chunks are already loaded or loading, we can skip loading ourselves\n-            return Promise.all(moduleChunksPromises);\n+            await Promise.all(moduleChunksPromises);\n+            return;\n         }\n         const moduleChunksToLoad = new Set();\n         for (const moduleChunk of includedModuleChunksList){\n@@ -483,12 +523,17 @@ async function loadChunk(sourceType, sourceData, chunkData) {\n             availableModules.set(included, promise);\n         }\n     }\n-    return promise;\n+    await promise;\n }\n const loadedChunk = Promise.resolve(undefined);\n const instrumentedBackendLoadChunks = new WeakMap();\n // Do not make this async. React relies on referential equality of the returned Promise.\n-function loadChunkByUrl(sourceType, sourceData, chunkUrl) {\n+function loadChunkByUrl(chunkUrl) {\n+    return loadChunkByUrlInternal(1, this.m.id, chunkUrl);\n+}\n+browserContextPrototype.L = loadChunkByUrl;\n+// Do not make this async. React relies on referential equality of the returned Promise.\n+function loadChunkByUrlInternal(sourceType, sourceData, chunkUrl) {\n     const thenable = BACKEND.loadChunkCached(sourceType, sourceData, chunkUrl);\n     let entry = instrumentedBackendLoadChunks.get(thenable);\n     if (entry === undefined) {\n@@ -516,24 +561,25 @@ function loadChunkByUrl(sourceType, sourceData, chunkUrl) {\n     }\n     return entry;\n }\n-async function loadChunkPath(sourceType, sourceData, chunkPath) {\n+// Do not make this async. React relies on referential equality of the returned Promise.\n+function loadChunkPath(sourceType, sourceData, chunkPath) {\n     const url = getChunkRelativeUrl(chunkPath);\n-    return loadChunkByUrl(sourceType, sourceData, url);\n+    return loadChunkByUrlInternal(sourceType, sourceData, url);\n }\n /**\n  * Returns an absolute url to an asset.\n- */ function createResolvePathFromModule(resolver) {\n-    return function resolvePathFromModule(moduleId) {\n-        const exported = resolver(moduleId);\n-        return exported?.default ?? exported;\n-    };\n+ */ function resolvePathFromModule(moduleId) {\n+    const exported = this.r(moduleId);\n+    return exported?.default ?? exported;\n }\n+browserContextPrototype.R = resolvePathFromModule;\n /**\n  * no-op for browser\n  * @param modulePath\n  */ function resolveAbsolutePath(modulePath) {\n     return `/ROOT/${modulePath ?? ''}`;\n }\n+browserContextPrototype.P = resolveAbsolutePath;\n /**\n  * Returns a blob URL for the worker.\n  * @param chunks list of chunks to load\n@@ -550,39 +596,7 @@ importScripts(...self.TURBOPACK_NEXT_CHUNK_URLS.map(c => self.TURBOPACK_WORKER_L\n     });\n     return URL.createObjectURL(blob);\n }\n-/**\n- * Adds a module to a chunk.\n- */ function addModuleToChunk(moduleId, chunkPath) {\n-    let moduleChunks = moduleChunksMap.get(moduleId);\n-    if (!moduleChunks) {\n-        moduleChunks = new Set([\n-            chunkPath\n-        ]);\n-        moduleChunksMap.set(moduleId, moduleChunks);\n-    } else {\n-        moduleChunks.add(chunkPath);\n-    }\n-    let chunkModules = chunkModulesMap.get(chunkPath);\n-    if (!chunkModules) {\n-        chunkModules = new Set([\n-            moduleId\n-        ]);\n-        chunkModulesMap.set(chunkPath, chunkModules);\n-    } else {\n-        chunkModules.add(moduleId);\n-    }\n-}\n-/**\n- * Returns the first chunk that included a module.\n- * This is used by the Node.js backend, hence why it's marked as unused in this\n- * file.\n- */ function getFirstModuleChunk(moduleId) {\n-    const moduleChunkPaths = moduleChunksMap.get(moduleId);\n-    if (moduleChunkPaths == null) {\n-        return null;\n-    }\n-    return moduleChunkPaths.values().next().value;\n-}\n+browserContextPrototype.b = getWorkerBlobURL;\n /**\n  * Instantiates a runtime module.\n  */ function instantiateRuntimeModule(moduleId, chunkPath) {\n@@ -602,30 +616,18 @@ function getPathFromScript(chunkScript) {\n     const path = src.startsWith(CHUNK_BASE_PATH) ? src.slice(CHUNK_BASE_PATH.length) : src;\n     return path;\n }\n-/**\n- * Marks a chunk list as a runtime chunk list. There can be more than one\n- * runtime chunk list. For instance, integration tests can have multiple chunk\n- * groups loaded at runtime, each with its own chunk list.\n- */ function markChunkListAsRuntime(chunkListPath) {\n-    runtimeChunkLists.add(chunkListPath);\n-}\n-function registerChunk([chunkScript, chunkModules, runtimeParams]) {\n-    const chunkPath = getPathFromScript(chunkScript);\n-    for (const [moduleId, moduleFactory] of Object.entries(chunkModules)){\n-        if (!moduleFactories[moduleId]) {\n-            if (Array.isArray(moduleFactory)) {\n-                let [moduleFactoryFn, otherIds] = moduleFactory;\n-                moduleFactories[moduleId] = moduleFactoryFn;\n-                for (const otherModuleId of otherIds){\n-                    moduleFactories[otherModuleId] = moduleFactoryFn;\n-                }\n-            } else {\n-                moduleFactories[moduleId] = moduleFactory;\n+function registerCompressedModuleFactory(moduleId, moduleFactory) {\n+    if (!moduleFactories[moduleId]) {\n+        if (Array.isArray(moduleFactory)) {\n+            let [moduleFactoryFn, otherIds] = moduleFactory;\n+            moduleFactories[moduleId] = moduleFactoryFn;\n+            for (const otherModuleId of otherIds){\n+                moduleFactories[otherModuleId] = moduleFactoryFn;\n             }\n+        } else {\n+            moduleFactories[moduleId] = moduleFactory;\n         }\n-        addModuleToChunk(moduleId, chunkPath);\n     }\n-    return BACKEND.registerChunk(chunkPath, runtimeParams);\n }\n const regexJsUrl = /\\.js(?:\\?[^#]*)?(?:#.*)?$/;\n /**\n@@ -639,16 +641,26 @@ const regexCssUrl = /\\.css(?:\\?[^#]*)?(?:#.*)?$/;\n  */ function isCss(chunkUrl) {\n     return regexCssUrl.test(chunkUrl);\n }\n+function loadWebAssembly(chunkPath, edgeModule, importsObj) {\n+    return BACKEND.loadWebAssembly(1, this.m.id, chunkPath, edgeModule, importsObj);\n+}\n+contextPrototype.w = loadWebAssembly;\n+function loadWebAssemblyModule(chunkPath, edgeModule) {\n+    return BACKEND.loadWebAssemblyModule(1, this.m.id, chunkPath, edgeModule);\n+}\n+contextPrototype.u = loadWebAssemblyModule;\n /// <reference path=\"./dev-globals.d.ts\" />\n /// <reference path=\"./dev-protocol.d.ts\" />\n /// <reference path=\"./dev-extensions.ts\" />\n+const devContextPrototype = Context.prototype;\n /**\n  * This file contains runtime types and functions that are shared between all\n  * Turbopack *development* ECMAScript runtimes.\n  *\n  * It will be appended to the runtime code of each runtime right after the\n  * shared runtime utils.\n  */ /* eslint-disable @typescript-eslint/no-unused-vars */ const devModuleCache = Object.create(null);\n+devContextPrototype.c = devModuleCache;\n class UpdateApplyError extends Error {\n     name = 'UpdateApplyError';\n     dependencyChain;\n@@ -657,6 +669,30 @@ class UpdateApplyError extends Error {\n         this.dependencyChain = dependencyChain;\n     }\n }\n+/**\n+ * Module IDs that are instantiated as part of the runtime of a chunk.\n+ */ const runtimeModules = new Set();\n+/**\n+ * Map from module ID to the chunks that contain this module.\n+ *\n+ * In HMR, we need to keep track of which modules are contained in which so\n+ * chunks. This is so we don't eagerly dispose of a module when it is removed\n+ * from chunk A, but still exists in chunk B.\n+ */ const moduleChunksMap = new Map();\n+/**\n+ * Map from a chunk path to all modules it contains.\n+ */ const chunkModulesMap = new Map();\n+/**\n+ * Chunk lists that contain a runtime. When these chunk lists receive an update\n+ * that can't be reconciled with the current state of the page, we need to\n+ * reload the runtime entirely.\n+ */ const runtimeChunkLists = new Set();\n+/**\n+ * Map from a chunk list to the chunk paths it contains.\n+ */ const chunkListChunksMap = new Map();\n+/**\n+ * Map from a chunk path to the chunk lists it belongs to.\n+ */ const chunkChunkListsMap = new Map();\n /**\n  * Maps module IDs to persisted data between executions of their hot module\n  * implementation (`hot.data`).\n@@ -700,6 +736,11 @@ const getOrInstantiateModuleFromParent = (id, sourceModule)=>{\n     }\n     return instantiateModule(id, SourceType.Parent, sourceModule.id);\n };\n+function DevContext(module, refresh) {\n+    Context.call(this, module);\n+    this.k = refresh;\n+}\n+DevContext.prototype = Context.prototype;\n function instantiateModule(moduleId, sourceType, sourceData) {\n     // We are in development, this is always a string.\n     let id = moduleId;\n@@ -708,21 +749,7 @@ function instantiateModule(moduleId, sourceType, sourceData) {\n         // This can happen if modules incorrectly handle HMR disposes/updates,\n         // e.g. when they keep a `setTimeout` around which still executes old code\n         // and contains e.g. a `require(\"something\")` call.\n-        let instantiationReason;\n-        switch(sourceType){\n-            case SourceType.Runtime:\n-                instantiationReason = `as a runtime entry of chunk ${sourceData}`;\n-                break;\n-            case SourceType.Parent:\n-                instantiationReason = `because it was required from module ${sourceData}`;\n-                break;\n-            case SourceType.Update:\n-                instantiationReason = 'because of an HMR update';\n-                break;\n-            default:\n-                invariant(sourceType, (sourceType)=>`Unknown source type: ${sourceType}`);\n-        }\n-        throw new Error(`Module ${id} was instantiated ${instantiationReason}, but the module factory is not available. It might have been deleted in an HMR update.`);\n+        factoryNotAvailable(id, sourceType, sourceData);\n     }\n     const hotData = moduleHotData.get(id);\n     const { hot, hotState } = createModuleHot(id, hotData);\n@@ -745,48 +772,17 @@ function instantiateModule(moduleId, sourceType, sourceData) {\n         default:\n             invariant(sourceType, (sourceType)=>`Unknown source type: ${sourceType}`);\n     }\n-    const module = {\n-        exports: {},\n-        error: undefined,\n-        loaded: false,\n-        id: id,\n-        parents,\n-        children: [],\n-        namespaceObject: undefined,\n-        hot\n-    };\n+    const module = createModuleObject(id);\n+    module.parents = parents;\n+    module.children = [];\n+    module.hot = hot;\n     devModuleCache[id] = module;\n     moduleHotState.set(module, hotState);\n     // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\n     try {\n         runModuleExecutionHooks(module, (refresh)=>{\n-            const r = commonJsRequire.bind(null, module);\n-            moduleFactory(augmentContext({\n-                a: asyncModule.bind(null, module),\n-                e: module.exports,\n-                r: commonJsRequire.bind(null, module),\n-                t: runtimeRequire,\n-                f: moduleContext,\n-                i: esmImport.bind(null, module),\n-                s: esmExport.bind(null, module, module.exports, devModuleCache),\n-                j: dynamicExport.bind(null, module, module.exports, devModuleCache),\n-                v: exportValue.bind(null, module, devModuleCache),\n-                n: exportNamespace.bind(null, module, devModuleCache),\n-                m: module,\n-                c: devModuleCache,\n-                C: null,\n-                M: moduleFactories,\n-                l: loadChunk.bind(null, SourceType.Parent, id),\n-                L: loadChunkByUrl.bind(null, SourceType.Parent, id),\n-                w: loadWebAssembly.bind(null, SourceType.Parent, id),\n-                u: loadWebAssemblyModule.bind(null, SourceType.Parent, id),\n-                P: resolveAbsolutePath,\n-                U: relativeURL,\n-                k: refresh,\n-                R: createResolvePathFromModule(r),\n-                b: getWorkerBlobURL,\n-                z: requireStub\n-            }));\n+            const context = new DevContext(module, refresh);\n+            moduleFactory(context);\n         });\n     } catch (error) {\n         module.error = error;\n@@ -799,6 +795,11 @@ function instantiateModule(moduleId, sourceType, sourceData) {\n     }\n     return module;\n }\n+const DUMMY_REFRESH_CONTEXT = {\n+    register: (_type, _id)=>{},\n+    signature: ()=>(_type)=>{},\n+    registerExports: (_module, _helpers)=>{}\n+};\n /**\n  * NOTE(alexkirsz) Webpack has a \"module execution\" interception hook that\n  * Next.js' React Refresh runtime hooks into to add module context to the\n@@ -820,11 +821,7 @@ function instantiateModule(moduleId, sourceType, sourceData) {\n         // If the react refresh hooks are not installed we need to bind dummy functions.\n         // This is expected when running in a Web Worker.  It is also common in some of\n         // our test environments.\n-        executeModule({\n-            register: (_type, _id)=>{},\n-            signature: ()=>(_type)=>{},\n-            registerExports: (_module, _helpers)=>{}\n-        });\n+        executeModule(DUMMY_REFRESH_CONTEXT);\n     }\n }\n /**\n@@ -1431,6 +1428,43 @@ function createModuleHot(moduleId, hotData) {\n     }\n     return true;\n }\n+/**\n+ * Adds a module to a chunk.\n+ */ function addModuleToChunk(moduleId, chunkPath) {\n+    let moduleChunks = moduleChunksMap.get(moduleId);\n+    if (!moduleChunks) {\n+        moduleChunks = new Set([\n+            chunkPath\n+        ]);\n+        moduleChunksMap.set(moduleId, moduleChunks);\n+    } else {\n+        moduleChunks.add(chunkPath);\n+    }\n+    let chunkModules = chunkModulesMap.get(chunkPath);\n+    if (!chunkModules) {\n+        chunkModules = new Set([\n+            moduleId\n+        ]);\n+        chunkModulesMap.set(chunkPath, chunkModules);\n+    } else {\n+        chunkModules.add(moduleId);\n+    }\n+}\n+/**\n+ * Marks a chunk list as a runtime chunk list. There can be more than one\n+ * runtime chunk list. For instance, integration tests can have multiple chunk\n+ * groups loaded at runtime, each with its own chunk list.\n+ */ function markChunkListAsRuntime(chunkListPath) {\n+    runtimeChunkLists.add(chunkListPath);\n+}\n+function registerChunk([chunkScript, chunkModules, runtimeParams]) {\n+    const chunkPath = getPathFromScript(chunkScript);\n+    for (const [moduleId, moduleFactory] of Object.entries(chunkModules)){\n+        registerCompressedModuleFactory(moduleId, moduleFactory);\n+        addModuleToChunk(moduleId, chunkPath);\n+    }\n+    return BACKEND.registerChunk(chunkPath, runtimeParams);\n+}\n /**\n  * Subscribes to chunk list updates from the update server and applies them.\n  */ function registerChunkList(chunkList) {\n@@ -1469,21 +1503,6 @@ globalThis.TURBOPACK_CHUNK_UPDATE_LISTENERS ??= [];\n  */ /* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../../../browser/runtime/base/runtime-base.ts\" />\n /// <reference path=\"../../../shared/runtime-types.d.ts\" />\n let BACKEND;\n-function augmentContext(context) {\n-    return context;\n-}\n-function fetchWebAssembly(wasmChunkPath) {\n-    return fetch(getChunkRelativeUrl(wasmChunkPath));\n-}\n-async function loadWebAssembly(_sourceType, _sourceData, wasmChunkPath, _edgeModule, importsObj) {\n-    const req = fetchWebAssembly(wasmChunkPath);\n-    const { instance } = await WebAssembly.instantiateStreaming(req, importsObj);\n-    return instance.exports;\n-}\n-async function loadWebAssemblyModule(_sourceType, _sourceData, wasmChunkPath, _edgeModule) {\n-    const req = fetchWebAssembly(wasmChunkPath);\n-    return await WebAssembly.compileStreaming(req);\n-}\n /**\n  * Maps chunk paths to the corresponding resolver.\n  */ const chunkResolvers = new Map();\n@@ -1503,7 +1522,7 @@ async function loadWebAssemblyModule(_sourceType, _sourceData, wasmChunkPath, _e\n                 getOrCreateResolver(otherChunkUrl);\n             }\n             // This waits for chunks to be loaded, but also marks included items as available.\n-            await Promise.all(params.otherChunks.map((otherChunkData)=>loadChunk(SourceType.Runtime, chunkPath, otherChunkData)));\n+            await Promise.all(params.otherChunks.map((otherChunkData)=>loadInitialChunk(chunkPath, otherChunkData)));\n             if (params.runtimeModuleIds.length > 0) {\n                 for (const moduleId of params.runtimeModuleIds){\n                     getOrInstantiateRuntimeModule(chunkPath, moduleId);\n@@ -1515,6 +1534,15 @@ async function loadWebAssemblyModule(_sourceType, _sourceData, wasmChunkPath, _e\n      * has been loaded.\n      */ loadChunkCached (sourceType, sourceData, chunkUrl) {\n             return doLoadChunk(sourceType, sourceData, chunkUrl);\n+        },\n+        async loadWebAssembly (_sourceType, _sourceData, wasmChunkPath, _edgeModule, importsObj) {\n+            const req = fetchWebAssembly(wasmChunkPath);\n+            const { instance } = await WebAssembly.instantiateStreaming(req, importsObj);\n+            return instance.exports;\n+        },\n+        async loadWebAssemblyModule (_sourceType, _sourceData, wasmChunkPath, _edgeModule) {\n+            const req = fetchWebAssembly(wasmChunkPath);\n+            return await WebAssembly.compileStreaming(req);\n         }\n     };\n     function getOrCreateResolver(chunkUrl) {\n@@ -1625,6 +1653,9 @@ async function loadWebAssemblyModule(_sourceType, _sourceData, wasmChunkPath, _e\n         resolver.loadingStarted = true;\n         return resolver.promise;\n     }\n+    function fetchWebAssembly(wasmChunkPath) {\n+        return fetch(getChunkRelativeUrl(wasmChunkPath));\n+    }\n })();\n /**\n  * This file contains the runtime code specific to the Turbopack development"
        },
        {
            "sha": "f6638c8e9c3cc5ee3abac784bcfc09c0546c2844",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_dev_runtime/output/b1abf_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_73aab4ae.js.map",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_73aab4ae.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_73aab4ae.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_73aab4ae.js.map?ref=6b89fe951ed68fae45455757ae81c56768090238"
        },
        {
            "sha": "9f586308b7e10ed4b1d905548659a86518dff35e",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/output/b1abf_turbopack-tests_tests_snapshot_scope-hoisting_split-shared_input_d89f123b._.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fscope-hoisting%2Fsplit-shared%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_scope-hoisting_split-shared_input_d89f123b._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fscope-hoisting%2Fsplit-shared%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_scope-hoisting_split-shared_input_d89f123b._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fscope-hoisting%2Fsplit-shared%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_scope-hoisting_split-shared_input_d89f123b._.js?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -4,13 +4,13 @@\n \n var { m: module, e: exports } = __turbopack_context__;\n {\n-setTimeout(()=>__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/x/inner.js [test] (ecmascript, async loader)\")(__turbopack_context__.i), 500);\n+setTimeout(()=>__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/x/inner.js [test] (ecmascript, async loader)\"), 500);\n }}),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/y/index.js [test] (ecmascript)\": ((__turbopack_context__) => {\n \n var { m: module, e: exports } = __turbopack_context__;\n {\n-setTimeout(()=>__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/y/middle.js [test] (ecmascript, async loader)\")(__turbopack_context__.i), 1000);\n+setTimeout(()=>__turbopack_context__.A(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/y/middle.js [test] (ecmascript, async loader)\"), 1000);\n }}),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/index.js [test] (ecmascript)\": ((__turbopack_context__) => {\n \"use strict\";"
        },
        {
            "sha": "b911638d456b5220ff1997081cccc63fff780ac7",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/output/b1abf_turbopack-tests_tests_snapshot_scope-hoisting_split-shared_input_d89f123b._.js.map",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fscope-hoisting%2Fsplit-shared%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_scope-hoisting_split-shared_input_d89f123b._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fscope-hoisting%2Fsplit-shared%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_scope-hoisting_split-shared_input_d89f123b._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fscope-hoisting%2Fsplit-shared%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_scope-hoisting_split-shared_input_d89f123b._.js.map?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -2,7 +2,7 @@\n   \"version\": 3,\n   \"sources\": [],\n   \"sections\": [\n-    {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/x/index.js\"],\"sourcesContent\":[\"setTimeout(() => import('./inner'), 500)\\n\"],\"names\":[],\"mappings\":\"AAAA,WAAW,kMAAyB\"}},\n-    {\"offset\": {\"line\": 12, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/y/index.js\"],\"sourcesContent\":[\"setTimeout(() => import('./middle'), 1000)\\n\"],\"names\":[],\"mappings\":\"AAAA,WAAW,mMAA0B\"}},\n+    {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/x/index.js\"],\"sourcesContent\":[\"setTimeout(() => import('./inner'), 500)\\n\"],\"names\":[],\"mappings\":\"AAAA,WAAW,yKAAyB\"}},\n+    {\"offset\": {\"line\": 12, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/y/index.js\"],\"sourcesContent\":[\"setTimeout(() => import('./middle'), 1000)\\n\"],\"names\":[],\"mappings\":\"AAAA,WAAW,0KAA0B\"}},\n     {\"offset\": {\"line\": 17, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/scope-hoisting/split-shared/input/index.js\"],\"sourcesContent\":[\"import './x/index'\\nimport './y/index'\\n\"],\"names\":[],\"mappings\":\";AAAA;AACA\"}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "a06d7da781cbd332a88f8d14e8917eaf2f86289d",
            "filename": "turbopack/crates/turbopack-wasm/src/module_asset.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -257,13 +257,11 @@ impl EcmascriptChunkItem for ModuleChunkItem {\n             .await?\n             .context(\"EcmascriptModuleAsset must implement EcmascriptChunkItem\")?;\n \n-        let mut chunk_item_content = ecmascript_item\n+        let chunk_item_content = ecmascript_item\n             .content_with_async_module_info(async_module_info)\n             .owned()\n             .await?;\n \n-        chunk_item_content.options.wasm = true;\n-\n         Ok(chunk_item_content.cell())\n     }\n }"
        },
        {
            "sha": "e91699a4cbc4d999bf5d79adc11e3a1427643471",
            "filename": "turbopack/crates/turbopack/src/module_options/mod.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/6b89fe951ed68fae45455757ae81c56768090238/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmod.rs?ref=6b89fe951ed68fae45455757ae81c56768090238",
            "patch": "@@ -146,7 +146,6 @@ impl ModuleOptions {\n             ..\n         } = *module_options_context.await?;\n \n-        let mut refresh = false;\n         let mut transforms = vec![];\n \n         // Order of transforms is important. e.g. if the React transform occurs before\n@@ -155,7 +154,6 @@ impl ModuleOptions {\n         // should use `before_transform_plugins`.\n         if let Some(enable_jsx) = enable_jsx {\n             let jsx = enable_jsx.await?;\n-            refresh = jsx.react_refresh;\n \n             transforms.push(EcmascriptInputTransform::React {\n                 development: jsx.development,\n@@ -170,7 +168,6 @@ impl ModuleOptions {\n             url_rewrite_behavior: esm_url_rewrite_behavior,\n             import_externals,\n             ignore_dynamic_requests,\n-            refresh,\n             extract_source_map: matches!(ecmascript_source_maps, SourceMapsType::Full),\n             keep_last_successful_parse,\n             ..Default::default()"
        }
    ],
    "stats": {
        "total": 1791,
        "additions": 918,
        "deletions": 873
    }
}