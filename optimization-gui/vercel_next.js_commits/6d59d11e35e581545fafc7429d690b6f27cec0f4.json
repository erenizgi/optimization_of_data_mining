{
    "author": "ztanner",
    "message": "remove `clientParamParsing` configuration & bundle it with `cacheComponents` (#84763)\n\nWe can't optionally land this flag in `cacheComponents` so this ensures\nit's enabled when using that flag. We still keep around\n`rsc.clientParamParsing` as the Vercel CLI still reads from it to opt\ninto some additional routing configuration, which can be removed in the\nfuture.",
    "sha": "6d59d11e35e581545fafc7429d690b6f27cec0f4",
    "files": [
        {
            "sha": "4bdc30e1d443f7c92195a21e8212480c9c84badd",
            "filename": "packages/next/src/build/define-env.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -199,9 +199,6 @@ export function getDefineEnv({\n     'process.env.__NEXT_CLIENT_SEGMENT_CACHE': Boolean(\n       config.experimental.clientSegmentCache\n     ),\n-    'process.env.__NEXT_CLIENT_PARAM_PARSING': Boolean(\n-      config.experimental.clientParamParsing\n-    ),\n     'process.env.__NEXT_CLIENT_VALIDATE_RSC_REQUEST_HEADERS': Boolean(\n       config.experimental.validateRSCRequestHeaders\n     ),"
        },
        {
            "sha": "735efb233d5727e773c106338c7e6084931d24ec",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 20,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -468,8 +468,8 @@ export type RoutesManifest = {\n     prefetchSegmentSuffix: typeof RSC_SEGMENT_SUFFIX\n \n     /**\n-     * Whether the client param parsing is enabled. This is only relevant for\n-     * app pages when PPR is enabled.\n+     * Whether the client param parsing is enabled. This is automatically enabled when\n+     * cacheComponents is enabled.\n      */\n     clientParamParsing: boolean\n \n@@ -1582,24 +1582,13 @@ export default async function build(\n               prefetchSegmentHeader: NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n               prefetchSegmentSuffix: RSC_SEGMENT_SUFFIX,\n               prefetchSegmentDirSuffix: RSC_SEGMENTS_DIR_SUFFIX,\n-              clientParamParsing:\n-                // NOTE: once this is the default for `clientSegmentCache`, this\n-                // should exclusively be based on the `clientSegmentCache` flag.\n-                config.experimental.clientParamParsing ?? false,\n-              clientParamParsingOrigins: config.experimental.clientParamParsing\n-                ? config.experimental.clientParamParsingOrigins\n-                : undefined,\n+              clientParamParsing: config.experimental.cacheComponents ?? false,\n+              clientParamParsingOrigins:\n+                config.experimental.clientParamParsingOrigins,\n               dynamicRSCPrerender:\n-                // Only enable RDC for Navigations if the feature is enabled.\n-                // Once we've made RDC for Navigations the default for PPR, we\n-                // can remove the check for `config.experimental.rdcForNavigations`.\n                 isAppPPREnabled &&\n                 config.experimental.rdcForNavigations === true &&\n-                // Temporarily we require that clientParamParsing is enabled for\n-                // RDC for Navigations. This is due to a builder configuration\n-                // bug that manifests as invalid query params being passed to\n-                // the resume lambdas.\n-                config.experimental.clientParamParsing === true,\n+                config.experimental.cacheComponents === true,\n             },\n             rewriteHeaders: {\n               pathHeader: NEXT_REWRITTEN_PATH_HEADER,\n@@ -2943,7 +2932,7 @@ export default async function build(\n                     // completely static.\n                     !(\n                       config.experimental.clientSegmentCache &&\n-                      config.experimental.clientParamParsing\n+                      config.experimental.cacheComponents\n                     )\n                   ) {\n                     return\n@@ -3259,7 +3248,7 @@ export default async function build(\n                   // this route.\n                   !(\n                     config.experimental.clientSegmentCache &&\n-                    config.experimental.clientParamParsing &&\n+                    config.experimental.cacheComponents &&\n                     isRoutePPREnabled\n                   )\n                 ) {\n@@ -3369,7 +3358,7 @@ export default async function build(\n                     // this case. This only applies if we have PPR enabled for\n                     // this route.\n                     !config.experimental.clientSegmentCache ||\n-                    !config.experimental.clientParamParsing ||\n+                    !config.experimental.cacheComponents ||\n                     !isRoutePPREnabled\n                   ) {\n                     prefetchDataRoute = path.posix.join("
        },
        {
            "sha": "0a922f19e1392899fbea52604a70a6d479649e56",
            "filename": "packages/next/src/build/templates/app-page.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 13,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -296,11 +296,7 @@ export async function handler(\n   const supportsRSCForNavigations =\n     isRoutePPREnabled &&\n     nextConfig.experimental.rdcForNavigations === true &&\n-    // Temporarily we require that clientParamParsing is enabled for\n-    // RDC for Navigations. This is due to a builder configuration\n-    // bug that manifests as invalid query params being passed to\n-    // the resume lambdas.\n-    nextConfig.experimental.clientParamParsing === true\n+    nextConfig.experimental.cacheComponents === true\n \n   // In development, we always want to generate dynamic HTML.\n   const supportsDynamicResponse: boolean =\n@@ -558,9 +554,6 @@ export async function handler(\n             clientSegmentCache: Boolean(\n               nextConfig.experimental.clientSegmentCache\n             ),\n-            clientParamParsing: Boolean(\n-              nextConfig.experimental.clientParamParsing\n-            ),\n             dynamicOnHover: Boolean(nextConfig.experimental.dynamicOnHover),\n             inlineCss: Boolean(nextConfig.experimental.inlineCss),\n             authInterrupts: Boolean(nextConfig.experimental.authInterrupts),\n@@ -739,14 +732,14 @@ export async function handler(\n           throw new NoFallbackError()\n         }\n \n-        // When client param parsing is enabled, we can use the fallback\n+        // When cacheComponents is enabled, we can use the fallback\n         // response if the request is not a dynamic RSC request because the\n         // RSC data when this feature flag is enabled does not contain any\n         // param references. Without this feature flag enabled, the RSC data\n         // contains param references, and therefore we can't use the fallback.\n         if (\n           isRoutePPREnabled &&\n-          (nextConfig.experimental.clientParamParsing\n+          (nextConfig.experimental.cacheComponents\n             ? !isDynamicRSCRequest\n             : !isRSCRequest)\n         ) {\n@@ -1203,9 +1196,7 @@ export async function handler(\n         if (typeof cachedData.rscData === 'undefined') {\n           // If the response is not an RSC response, then we can't serve it.\n           if (cachedData.html.contentType !== RSC_CONTENT_TYPE_HEADER) {\n-            if (nextConfig.experimental.clientParamParsing) {\n-              // If client param parsing is enabled, then we can return a 404.\n-              // This was likely an old prefetch request.\n+            if (nextConfig.experimental.cacheComponents) {\n               res.statusCode = 404\n               return sendRenderResult({\n                 req,"
        },
        {
            "sha": "8a0fbe106743dbe82c1079937cbf6bcd658bdac5",
            "filename": "packages/next/src/build/templates/edge-ssr-app.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -162,7 +162,6 @@ async function requestHandler(\n         staleTimes: nextConfig.experimental.staleTimes,\n         cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n         clientSegmentCache: Boolean(nextConfig.experimental.clientSegmentCache),\n-        clientParamParsing: Boolean(nextConfig.experimental.clientParamParsing),\n         dynamicOnHover: Boolean(nextConfig.experimental.dynamicOnHover),\n         inlineCss: Boolean(nextConfig.experimental.inlineCss),\n         authInterrupts: Boolean(nextConfig.experimental.authInterrupts),"
        },
        {
            "sha": "5b156707deeab247fedf24c5a1ee8a6d52816e0e",
            "filename": "packages/next/src/client/components/segment-cache-impl/cache.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fsegment-cache-impl%2Fcache.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fsegment-cache-impl%2Fcache.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fsegment-cache-impl%2Fcache.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -1127,9 +1127,7 @@ function convertTreePrefetchToRouteTree(\n         const renderedSearch = '' as NormalizedSearch\n         const childParamKey =\n           // The server omits this field from the prefetch response when\n-          // clientParamParsing is enabled. The flag only exists while we're\n-          // testing the feature, in case there's a bug and we need to revert.\n-          // TODO: Remove once clientParamParsing is enabled everywhere.\n+          // cacheComponents is enabled.\n           childServerSentParamKey !== null\n             ? childServerSentParamKey\n             : // If no param key was sent, use the value parsed on the client."
        },
        {
            "sha": "e36c6f1b0ec3e667d8ca52035183e2a2b88dfd15",
            "filename": "packages/next/src/export/index.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -399,7 +399,6 @@ async function exportAppImpl(\n         nextConfig.experimental.clientSegmentCache === 'client-only'\n           ? 'client-only'\n           : Boolean(nextConfig.experimental.clientSegmentCache),\n-      clientParamParsing: nextConfig.experimental.clientParamParsing ?? false,\n       clientParamParsingOrigins:\n         nextConfig.experimental.clientParamParsingOrigins,\n       dynamicOnHover: nextConfig.experimental.dynamicOnHover ?? false,"
        },
        {
            "sha": "72e28e818e42b408ebc0bcbe73615651e4a0b3c0",
            "filename": "packages/next/src/export/routes/app-page.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-page.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -132,14 +132,10 @@ export async function exportAppPage(\n     // properly so long as we don't have unknown route params. When a route doesn't\n     // have unknown route params, there will not be any flight data.\n     if (!flightData) {\n-      // Unless the user has clientParamParsing enabled, we expect that routes\n-      // that don't have fallback route params would have flight data. This is\n-      // because when clientParamParsing is enabled, the absence of flight data\n-      // means that the route has unknown route params.\n       if (\n         !fallbackRouteParams ||\n         fallbackRouteParams.size === 0 ||\n-        renderOpts.experimental.clientParamParsing\n+        renderOpts.experimental.cacheComponents\n       ) {\n         throw new Error(`Invariant: failed to get page data for ${path}`)\n       }"
        },
        {
            "sha": "d519b6667852f2897d5029ce8553193c18effc2a",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -4996,7 +4996,7 @@ async function collectSegmentData(\n   const selectStaleTime = createSelectStaleTime(renderOpts.experimental)\n   const staleTime = selectStaleTime(prerenderStore.stale)\n   return await ComponentMod.collectSegmentData(\n-    renderOpts.experimental.clientParamParsing,\n+    renderOpts.experimental.cacheComponents,\n     fullPageDataBuffer,\n     staleTime,\n     clientReferenceManifest.clientModules as ManifestNode,"
        },
        {
            "sha": "89163768906ae7b04e9c128f36076fe31d0a272d",
            "filename": "packages/next/src/server/app-render/collect-segment-data.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 9,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcollect-segment-data.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcollect-segment-data.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcollect-segment-data.tsx?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -39,10 +39,9 @@ export type RootTreePrefetch = {\n export type TreePrefetch = {\n   name: string\n   paramType: DynamicParamTypesShort | null\n-  // TODO: When clientParamParsing is enabled, this field is always null.\n+  // When cacheComponents is enabled, this field is always null.\n   // Instead we parse the param on the client, allowing us to omit it from\n-  // the prefetch response and increase its cacheability. Remove this field\n-  // once clientParamParsing is enabled everywhere.\n+  // the prefetch response and increase its cacheability.\n   paramKey: string | null\n \n   // Child segments.\n@@ -89,7 +88,7 @@ function onSegmentPrerenderError(error: unknown) {\n }\n \n export async function collectSegmentData(\n-  isClientParamParsingEnabled: boolean,\n+  isCacheComponentsEnabled: boolean,\n   fullPageDataBuffer: Buffer,\n   staleTime: number,\n   clientModules: ManifestNode,\n@@ -134,7 +133,7 @@ export async function collectSegmentData(\n     // inside of it, the side effects are transferred to the new stream.\n     // @ts-expect-error\n     <PrefetchTreeData\n-      isClientParamParsingEnabled={isClientParamParsingEnabled}\n+      isClientParamParsingEnabled={isCacheComponentsEnabled}\n       fullPageDataBuffer={fullPageDataBuffer}\n       serverConsumerManifest={serverConsumerManifest}\n       clientModules={clientModules}\n@@ -319,10 +318,8 @@ function collectSegmentDataImpl(\n   return {\n     name,\n     paramType,\n-    // This value is ommitted from the prefetch response when clientParamParsing\n-    // is enabled. The flag only exists while we're testing the feature, in\n-    // case there's a bug and we need to revert.\n-    // TODO: Remove once clientParamParsing is enabled everywhere.\n+    // This value is ommitted from the prefetch response when cacheComponents\n+    // is enabled.\n     paramKey: isClientParamParsingEnabled ? null : paramKey,\n     hasRuntimePrefetch,\n     slots: slotMetadata,"
        },
        {
            "sha": "f1e1ed7a466bfbcdb35a41d200a8ce636f3caa4e",
            "filename": "packages/next/src/server/app-render/types.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -132,7 +132,6 @@ export interface RenderOptsPartial {\n     clientTraceMetadata: string[] | undefined\n     cacheComponents: boolean\n     clientSegmentCache: boolean | 'client-only'\n-    clientParamParsing: boolean\n \n     /**\n      * The origins that are allowed to write the rewritten headers when"
        },
        {
            "sha": "f58dc59570b2cc49f075c698034d2566939f5cb4",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -554,8 +554,6 @@ export default abstract class Server<\n           this.nextConfig.experimental.clientSegmentCache === 'client-only'\n             ? 'client-only'\n             : Boolean(this.nextConfig.experimental.clientSegmentCache),\n-        clientParamParsing:\n-          this.nextConfig.experimental.clientParamParsing ?? false,\n         clientParamParsingOrigins:\n           this.nextConfig.experimental.clientParamParsingOrigins,\n         dynamicOnHover: this.nextConfig.experimental.dynamicOnHover ?? false,"
        },
        {
            "sha": "ef235b85e137491ccbf9a6e668e46cc28e3e88f4",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -196,7 +196,6 @@ export const experimentalSchema = {\n     .union([z.boolean(), z.literal('client-only')])\n     .optional(),\n   rdcForNavigations: z.boolean().optional(),\n-  clientParamParsing: z.boolean().optional(),\n   clientParamParsingOrigins: z.array(z.string()).optional(),\n   dynamicOnHover: z.boolean().optional(),\n   disableOptimizedLoading: z.boolean().optional(),"
        },
        {
            "sha": "fe362b5b5a51cce1bf2ecc088a7098b0e9125d5b",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -287,7 +287,6 @@ export interface ExperimentalConfig {\n    * Partial Prerendering is enabled.\n    */\n   rdcForNavigations?: boolean\n-  clientParamParsing?: boolean\n \n   /**\n    * The origins that are allowed to write the rewritten headers when\n@@ -1455,7 +1454,6 @@ export const defaultConfig = Object.freeze({\n     caseSensitiveRoutes: false,\n     clientSegmentCache: true,\n     rdcForNavigations: false,\n-    clientParamParsing: false,\n     clientParamParsingOrigins: undefined,\n     dynamicOnHover: false,\n     preloadEntriesOnStart: true,"
        },
        {
            "sha": "0502139dd62fcbe82213ebb323e883a1345d0879",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 31,
            "changes": 31,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -1332,18 +1332,6 @@ function assignDefaultsAndValidate(\n     )\n   }\n \n-  // We require clientSegmentCache to be enabled if clientParamParsing is\n-  // enabled. This is because clientParamParsing is only relevant when\n-  // clientSegmentCache is enabled.\n-  if (\n-    result.experimental.clientParamParsing &&\n-    !result.experimental.clientSegmentCache\n-  ) {\n-    throw new Error(\n-      `\\`experimental.clientParamParsing\\` can not be \\`true\\` when \\`experimental.clientSegmentCache\\` is \\`false\\`. Client param parsing is only relevant when client segment cache is enabled.`\n-    )\n-  }\n-\n   if (\n     phase === PHASE_DEVELOPMENT_SERVER &&\n     result.experimental?.isolatedDevBuild\n@@ -1829,25 +1817,6 @@ function enforceExperimentalFeatures(\n     )\n   }\n \n-  // TODO: Remove this once we've made Client Param Parsing the default.\n-  if (\n-    process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true' &&\n-    // We do respect an explicit value in the user config.\n-    (config.experimental.clientParamParsing === undefined ||\n-      (isDefaultConfig && !config.experimental.clientParamParsing))\n-  ) {\n-    config.experimental.clientParamParsing = true\n-\n-    if (configuredExperimentalFeatures) {\n-      addConfiguredExperimentalFeature(\n-        configuredExperimentalFeatures,\n-        'clientParamParsing',\n-        true,\n-        'enabled by `__NEXT_EXPERIMENTAL_CACHE_COMPONENTS`'\n-      )\n-    }\n-  }\n-\n   // TODO: Remove this once we've made Cache Components the default.\n   if (\n     process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true' &&"
        },
        {
            "sha": "b0caedcb5cdc8bd997a415346f78b76336e053b5",
            "filename": "test/e2e/app-dir/segment-cache/basic/segment-cache-basic.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fbasic%2Fsegment-cache-basic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fbasic%2Fsegment-cache-basic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fbasic%2Fsegment-cache-basic.test.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -93,7 +93,11 @@ describe('segment cache (basic tests)', () => {\n     )\n   })\n \n-  it('navigate to page with lazily-generated (not at build time) static param', async () => {\n+  // TODO(cache-components): With `cacheComponents` enabled, this test is outdated, because\n+  // we no longer put the param values in the prefetched RSC response. You'd have to opt into runtime\n+  // prefetching for this test to pass until we ship the optimization that would mark this as fully static\n+  // if you don't reference any dynamic params in the server components.\n+  it.skip('navigate to page with lazily-generated (not at build time) static param', async () => {\n     let act: ReturnType<typeof createRouterAct>\n     const browser = await next.browser('/lazily-generated-params', {\n       beforePageLoad(page) {"
        },
        {
            "sha": "88e9a2e93d8f8953ead288321fd042d0101d03c1",
            "filename": "test/e2e/app-dir/segment-cache/no-prefetch/next.config.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fno-prefetch%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fno-prefetch%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fno-prefetch%2Fnext.config.js?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -2,7 +2,6 @@\n module.exports = {\n   experimental: {\n     clientSegmentCache: true,\n-    clientParamParsing: true,\n   },\n   productionBrowserSourceMaps: true,\n }"
        },
        {
            "sha": "2196f331bc5e0cd38309f88ecca17aa1d64336a9",
            "filename": "test/production/app-dir/build-output-prerender/build-output-prerender.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -26,7 +26,6 @@ describe('build-output-prerender', () => {\n              \"▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`experimental.cacheComponents\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ reactDebugChannel (enabled by \\`__NEXT_EXPERIMENTAL_DEBUG_CHANNEL\\`)\"\n@@ -36,7 +35,6 @@ describe('build-output-prerender', () => {\n              \"▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`experimental.cacheComponents\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ reactDebugChannel (enabled by \\`__NEXT_EXPERIMENTAL_DEBUG_CHANNEL\\`)\"\n@@ -48,7 +46,6 @@ describe('build-output-prerender', () => {\n              \"▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`experimental.cacheComponents\\`)\n                   ✓ ppr (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\"\n@@ -58,7 +55,6 @@ describe('build-output-prerender', () => {\n              \"▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`experimental.cacheComponents\\`)\n                   ✓ ppr (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\"\n@@ -142,7 +138,6 @@ describe('build-output-prerender', () => {\n                 ▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`--debug-prerender\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n@@ -156,7 +151,6 @@ describe('build-output-prerender', () => {\n                 ▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`--debug-prerender\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n@@ -172,7 +166,6 @@ describe('build-output-prerender', () => {\n                 ▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`--debug-prerender\\`)\n                   ✓ ppr (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n@@ -186,7 +179,6 @@ describe('build-output-prerender', () => {\n                 ▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`--debug-prerender\\`)\n                   ✓ ppr (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n@@ -283,7 +275,6 @@ describe('build-output-prerender', () => {\n              \"▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`experimental.cacheComponents\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ reactDebugChannel (enabled by \\`__NEXT_EXPERIMENTAL_DEBUG_CHANNEL\\`)\"\n@@ -293,7 +284,6 @@ describe('build-output-prerender', () => {\n              \"▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`experimental.cacheComponents\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ reactDebugChannel (enabled by \\`__NEXT_EXPERIMENTAL_DEBUG_CHANNEL\\`)\"\n@@ -304,15 +294,13 @@ describe('build-output-prerender', () => {\n             expect(getPreambleOutput(next.cliOutput)).toMatchInlineSnapshot(`\n              \"▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ ppr (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\"\n             `)\n           } else {\n             expect(getPreambleOutput(next.cliOutput)).toMatchInlineSnapshot(`\n              \"▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ ppr (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\"\n             `)\n@@ -352,7 +340,6 @@ describe('build-output-prerender', () => {\n                 ▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`--debug-prerender\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n@@ -366,7 +353,6 @@ describe('build-output-prerender', () => {\n                 ▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n                   ✓ cacheComponents (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`--debug-prerender\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n                   ✓ rdcForNavigations (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n@@ -381,7 +367,6 @@ describe('build-output-prerender', () => {\n              \"⚠ Prerendering is running in debug mode. Note: This may affect performance and should not be used for production.\n                 ▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`--debug-prerender\\`)\n                   ✓ ppr (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n@@ -394,7 +379,6 @@ describe('build-output-prerender', () => {\n              \"⚠ Prerendering is running in debug mode. Note: This may affect performance and should not be used for production.\n                 ▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n-                  ✓ clientParamParsing (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ✓ enablePrerenderSourceMaps (enabled by \\`--debug-prerender\\`)\n                   ✓ ppr (enabled by \\`__NEXT_EXPERIMENTAL_PPR\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)"
        },
        {
            "sha": "d16c037dcfa176e3a86199928fd4efca172ec75f",
            "filename": "test/production/app-dir/resume-data-cache/next.config.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fproduction%2Fapp-dir%2Fresume-data-cache%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fproduction%2Fapp-dir%2Fresume-data-cache%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fresume-data-cache%2Fnext.config.js?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -5,7 +5,6 @@ const nextConfig = {\n   experimental: {\n     cacheComponents: true,\n     clientSegmentCache: true,\n-    clientParamParsing: true,\n     cacheLife: {\n       expireNow: {\n         stale: 0,"
        },
        {
            "sha": "c38cd67395f8ef3f3abe8e5f8dc78baec44d440b",
            "filename": "test/production/standalone-mode/required-server-files/required-server-files-ppr.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files-ppr.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6d59d11e35e581545fafc7429d690b6f27cec0f4/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files-ppr.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files-ppr.test.ts?ref=6d59d11e35e581545fafc7429d690b6f27cec0f4",
            "patch": "@@ -58,7 +58,6 @@ describe.skip('required server files app router', () => {\n         experimental: {\n           cacheComponents: true,\n           clientSegmentCache: true,\n-          clientParamParsing: true,\n         },\n         output: 'standalone',\n       },"
        }
    ],
    "stats": {
        "total": 140,
        "additions": 27,
        "deletions": 113
    }
}