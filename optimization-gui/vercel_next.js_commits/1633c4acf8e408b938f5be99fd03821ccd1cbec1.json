{
    "author": "kdy1",
    "message": "fix(turbopack): Consider break label as conditional (#77953)\n\n### What?\n\nFix the ES analyzer, for the case below.\n\n```js\nimport { assert } from \"./assert\";\n\nfunction runGetClassesOrUseCache() {\n  use_cache: {\n    assert(1, 1);\n    if (true) {\n      break use_cache;\n    }\n    return \"value a\";\n  }\n  {\n    assert(2, 2);\n  }\n\n  assert(3, 3);\n\n  return \"value b\";\n}\n\n```\n\n### Why?\n\n### How?\n\nFixes #77083 \nCloses PACK-4258\n\n---------\n\nCo-authored-by: Niklas Mischkulnig <4586894+mischnic@users.noreply.github.com>",
    "sha": "1633c4acf8e408b938f5be99fd03821ccd1cbec1",
    "files": [
        {
            "sha": "03406bb834cf7ca3fd2d3d3b905b78f4b9f222cd",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/graph.rs",
            "status": "modified",
            "additions": 48,
            "deletions": 0,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -69,6 +69,8 @@ pub enum ConditionalKind {\n     Or { expr: Box<EffectsBlock> },\n     /// The expression on the right side of the `??` operator.\n     NullishCoalescing { expr: Box<EffectsBlock> },\n+    /// The expression on the right side of a labeled statement.\n+    Labeled { body: Box<EffectsBlock> },\n }\n \n impl ConditionalKind {\n@@ -100,6 +102,11 @@ impl ConditionalKind {\n                     }\n                 }\n             }\n+            ConditionalKind::Labeled { body } => {\n+                for effect in &mut body.effects {\n+                    effect.normalize();\n+                }\n+            }\n         }\n     }\n }\n@@ -2077,6 +2084,10 @@ impl VisitAstPath for Analyzer<'_> {\n                     AstParentNodeRef::TryStmt(_, TryStmtField::Handler),\n                     AstParentNodeRef::CatchClause(_, CatchClauseField::Body)\n                 ]\n+                | [\n+                    AstParentNodeRef::LabeledStmt(_, LabeledStmtField::Body),\n+                    AstParentNodeRef::Stmt(_, StmtField::Block)\n+                ]\n         ) {\n             None\n         } else if matches!(\n@@ -2138,6 +2149,40 @@ impl VisitAstPath for Analyzer<'_> {\n \n         n.visit_children_with_ast_path(self, ast_path);\n     }\n+\n+    fn visit_labeled_stmt<'ast: 'r, 'r>(\n+        &mut self,\n+        stmt: &'ast LabeledStmt,\n+        ast_path: &mut AstNodePath<AstParentNodeRef<'r>>,\n+    ) {\n+        let mut prev_effects = take(&mut self.effects);\n+        let prev_early_return_stack = take(&mut self.early_return_stack);\n+\n+        stmt.visit_children_with_ast_path(self, ast_path);\n+\n+        self.end_early_return_block();\n+\n+        let effects = take(&mut self.effects);\n+\n+        prev_effects.push(Effect::Conditional {\n+            condition: Box::new(JsValue::unknown_empty(true, \"labeled statement\")),\n+            kind: Box::new(ConditionalKind::Labeled {\n+                body: Box::new(EffectsBlock {\n+                    effects,\n+                    range: AstPathRange::Exact(as_parent_path_with(\n+                        ast_path,\n+                        AstParentKind::LabeledStmt(LabeledStmtField::Body),\n+                    )),\n+                }),\n+            }),\n+            ast_path: as_parent_path(ast_path),\n+            span: stmt.span,\n+            in_try: is_in_try(ast_path),\n+        });\n+\n+        self.effects = prev_effects;\n+        self.early_return_stack = prev_early_return_stack;\n+    }\n }\n \n impl Analyzer<'_> {\n@@ -2252,6 +2297,9 @@ impl Analyzer<'_> {\n                 | ConditionalKind::NullishCoalescing { expr } => {\n                     self.effects.append(&mut expr.effects);\n                 }\n+                ConditionalKind::Labeled { body } => {\n+                    self.effects.append(&mut body.effects);\n+                }\n             }\n         } else {\n             self.add_effect(Effect::Conditional {"
        },
        {
            "sha": "e0f71d8bd6ff597001050c4cbaf3a556e690b16e",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -4311,7 +4311,8 @@ mod tests {\n                                     }\n                                     ConditionalKind::And { expr }\n                                     | ConditionalKind::Or { expr }\n-                                    | ConditionalKind::NullishCoalescing { expr } => {\n+                                    | ConditionalKind::NullishCoalescing { expr }\n+                                    | ConditionalKind::Labeled { body: expr } => {\n                                         queue\n                                             .extend(expr.effects.into_iter().rev().map(|e| (i, e)));\n                                     }"
        },
        {
            "sha": "59a50d22ac969cd24bab20ef41e9f90d713fd0d6",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -1216,6 +1216,9 @@ pub(crate) async fn analyse_ecmascript_module_internal(\n                                 }\n                             }\n                         }\n+                        ConditionalKind::Labeled { body } => {\n+                            active!(body);\n+                        }\n                     }\n                 }\n                 Effect::Call {"
        },
        {
            "sha": "e4952f684cec26d050ab158fd8dd78c4f76d43e3",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/issue-77083/graph-effects.snapshot",
            "status": "added",
            "additions": 630,
            "deletions": 0,
            "changes": 630,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph-effects.snapshot?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -0,0 +1,630 @@\n+[\n+    Conditional {\n+        condition: Unknown {\n+            original_value: None,\n+            reason: \"labeled statement\",\n+            has_side_effects: true,\n+        },\n+        kind: Labeled {\n+            body: EffectsBlock {\n+                effects: [\n+                    ImportedBinding {\n+                        esm_reference_index: 1,\n+                        export: Some(\n+                            \"assert\",\n+                        ),\n+                        ast_path: [\n+                            Program(\n+                                Module,\n+                            ),\n+                            Module(\n+                                Body(\n+                                    1,\n+                                ),\n+                            ),\n+                            ModuleItem(\n+                                Stmt,\n+                            ),\n+                            Stmt(\n+                                Decl,\n+                            ),\n+                            Decl(\n+                                Fn,\n+                            ),\n+                            FnDecl(\n+                                Function,\n+                            ),\n+                            Function(\n+                                Body,\n+                            ),\n+                            BlockStmt(\n+                                Stmts(\n+                                    0,\n+                                ),\n+                            ),\n+                            Stmt(\n+                                Labeled,\n+                            ),\n+                            LabeledStmt(\n+                                Body,\n+                            ),\n+                            Stmt(\n+                                Block,\n+                            ),\n+                            BlockStmt(\n+                                Stmts(\n+                                    0,\n+                                ),\n+                            ),\n+                            Stmt(\n+                                Expr,\n+                            ),\n+                            ExprStmt(\n+                                Expr,\n+                            ),\n+                            Expr(\n+                                Call,\n+                            ),\n+                            CallExpr(\n+                                Callee,\n+                            ),\n+                            Callee(\n+                                Expr,\n+                            ),\n+                            Expr(\n+                                Ident,\n+                            ),\n+                        ],\n+                        span: 108..114,\n+                        in_try: false,\n+                    },\n+                    Call {\n+                        func: Member(\n+                            3,\n+                            Module(\n+                                ModuleValue {\n+                                    module: \"./assert\",\n+                                    annotations: ImportAnnotations {\n+                                        map: {},\n+                                    },\n+                                },\n+                            ),\n+                            Constant(\n+                                Str(\n+                                    Atom(\n+                                        \"assert\",\n+                                    ),\n+                                ),\n+                            ),\n+                        ),\n+                        args: [\n+                            Value(\n+                                Constant(\n+                                    Num(\n+                                        ConstantNumber(\n+                                            1.0,\n+                                        ),\n+                                    ),\n+                                ),\n+                            ),\n+                            Value(\n+                                Constant(\n+                                    Num(\n+                                        ConstantNumber(\n+                                            1.0,\n+                                        ),\n+                                    ),\n+                                ),\n+                            ),\n+                        ],\n+                        ast_path: [\n+                            Program(\n+                                Module,\n+                            ),\n+                            Module(\n+                                Body(\n+                                    1,\n+                                ),\n+                            ),\n+                            ModuleItem(\n+                                Stmt,\n+                            ),\n+                            Stmt(\n+                                Decl,\n+                            ),\n+                            Decl(\n+                                Fn,\n+                            ),\n+                            FnDecl(\n+                                Function,\n+                            ),\n+                            Function(\n+                                Body,\n+                            ),\n+                            BlockStmt(\n+                                Stmts(\n+                                    0,\n+                                ),\n+                            ),\n+                            Stmt(\n+                                Labeled,\n+                            ),\n+                            LabeledStmt(\n+                                Body,\n+                            ),\n+                            Stmt(\n+                                Block,\n+                            ),\n+                            BlockStmt(\n+                                Stmts(\n+                                    0,\n+                                ),\n+                            ),\n+                            Stmt(\n+                                Expr,\n+                            ),\n+                            ExprStmt(\n+                                Expr,\n+                            ),\n+                            Expr(\n+                                Call,\n+                            ),\n+                        ],\n+                        span: 108..120,\n+                        in_try: false,\n+                        new: false,\n+                    },\n+                    Unreachable {\n+                        start_ast_path: [\n+                            Program(\n+                                Module,\n+                            ),\n+                            Module(\n+                                Body(\n+                                    1,\n+                                ),\n+                            ),\n+                            ModuleItem(\n+                                Stmt,\n+                            ),\n+                            Stmt(\n+                                Decl,\n+                            ),\n+                            Decl(\n+                                Fn,\n+                            ),\n+                            FnDecl(\n+                                Function,\n+                            ),\n+                            Function(\n+                                Body,\n+                            ),\n+                            BlockStmt(\n+                                Stmts(\n+                                    0,\n+                                ),\n+                            ),\n+                            Stmt(\n+                                Labeled,\n+                            ),\n+                            LabeledStmt(\n+                                Body,\n+                            ),\n+                            Stmt(\n+                                Block,\n+                            ),\n+                            BlockStmt(\n+                                Stmts(\n+                                    2,\n+                                ),\n+                            ),\n+                            Stmt(\n+                                Return,\n+                            ),\n+                        ],\n+                    },\n+                ],\n+                range: Exact(\n+                    [\n+                        Program(\n+                            Module,\n+                        ),\n+                        Module(\n+                            Body(\n+                                1,\n+                            ),\n+                        ),\n+                        ModuleItem(\n+                            Stmt,\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Fn,\n+                        ),\n+                        FnDecl(\n+                            Function,\n+                        ),\n+                        Function(\n+                            Body,\n+                        ),\n+                        BlockStmt(\n+                            Stmts(\n+                                0,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Labeled,\n+                        ),\n+                        LabeledStmt(\n+                            Body,\n+                        ),\n+                    ],\n+                ),\n+            },\n+        },\n+        ast_path: [\n+            Program(\n+                Module,\n+            ),\n+            Module(\n+                Body(\n+                    1,\n+                ),\n+            ),\n+            ModuleItem(\n+                Stmt,\n+            ),\n+            Stmt(\n+                Decl,\n+            ),\n+            Decl(\n+                Fn,\n+            ),\n+            FnDecl(\n+                Function,\n+            ),\n+            Function(\n+                Body,\n+            ),\n+            BlockStmt(\n+                Stmts(\n+                    0,\n+                ),\n+            ),\n+            Stmt(\n+                Labeled,\n+            ),\n+        ],\n+        span: 91..192,\n+        in_try: false,\n+    },\n+    ImportedBinding {\n+        esm_reference_index: 1,\n+        export: Some(\n+            \"assert\",\n+        ),\n+        ast_path: [\n+            Program(\n+                Module,\n+            ),\n+            Module(\n+                Body(\n+                    1,\n+                ),\n+            ),\n+            ModuleItem(\n+                Stmt,\n+            ),\n+            Stmt(\n+                Decl,\n+            ),\n+            Decl(\n+                Fn,\n+            ),\n+            FnDecl(\n+                Function,\n+            ),\n+            Function(\n+                Body,\n+            ),\n+            BlockStmt(\n+                Stmts(\n+                    1,\n+                ),\n+            ),\n+            Stmt(\n+                Block,\n+            ),\n+            BlockStmt(\n+                Stmts(\n+                    0,\n+                ),\n+            ),\n+            Stmt(\n+                Expr,\n+            ),\n+            ExprStmt(\n+                Expr,\n+            ),\n+            Expr(\n+                Call,\n+            ),\n+            CallExpr(\n+                Callee,\n+            ),\n+            Callee(\n+                Expr,\n+            ),\n+            Expr(\n+                Ident,\n+            ),\n+        ],\n+        span: 201..207,\n+        in_try: false,\n+    },\n+    Call {\n+        func: Member(\n+            3,\n+            Module(\n+                ModuleValue {\n+                    module: \"./assert\",\n+                    annotations: ImportAnnotations {\n+                        map: {},\n+                    },\n+                },\n+            ),\n+            Constant(\n+                Str(\n+                    Atom(\n+                        \"assert\",\n+                    ),\n+                ),\n+            ),\n+        ),\n+        args: [\n+            Value(\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            2.0,\n+                        ),\n+                    ),\n+                ),\n+            ),\n+            Value(\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            2.0,\n+                        ),\n+                    ),\n+                ),\n+            ),\n+        ],\n+        ast_path: [\n+            Program(\n+                Module,\n+            ),\n+            Module(\n+                Body(\n+                    1,\n+                ),\n+            ),\n+            ModuleItem(\n+                Stmt,\n+            ),\n+            Stmt(\n+                Decl,\n+            ),\n+            Decl(\n+                Fn,\n+            ),\n+            FnDecl(\n+                Function,\n+            ),\n+            Function(\n+                Body,\n+            ),\n+            BlockStmt(\n+                Stmts(\n+                    1,\n+                ),\n+            ),\n+            Stmt(\n+                Block,\n+            ),\n+            BlockStmt(\n+                Stmts(\n+                    0,\n+                ),\n+            ),\n+            Stmt(\n+                Expr,\n+            ),\n+            ExprStmt(\n+                Expr,\n+            ),\n+            Expr(\n+                Call,\n+            ),\n+        ],\n+        span: 201..213,\n+        in_try: false,\n+        new: false,\n+    },\n+    ImportedBinding {\n+        esm_reference_index: 1,\n+        export: Some(\n+            \"assert\",\n+        ),\n+        ast_path: [\n+            Program(\n+                Module,\n+            ),\n+            Module(\n+                Body(\n+                    1,\n+                ),\n+            ),\n+            ModuleItem(\n+                Stmt,\n+            ),\n+            Stmt(\n+                Decl,\n+            ),\n+            Decl(\n+                Fn,\n+            ),\n+            FnDecl(\n+                Function,\n+            ),\n+            Function(\n+                Body,\n+            ),\n+            BlockStmt(\n+                Stmts(\n+                    2,\n+                ),\n+            ),\n+            Stmt(\n+                Expr,\n+            ),\n+            ExprStmt(\n+                Expr,\n+            ),\n+            Expr(\n+                Call,\n+            ),\n+            CallExpr(\n+                Callee,\n+            ),\n+            Callee(\n+                Expr,\n+            ),\n+            Expr(\n+                Ident,\n+            ),\n+        ],\n+        span: 222..228,\n+        in_try: false,\n+    },\n+    Call {\n+        func: Member(\n+            3,\n+            Module(\n+                ModuleValue {\n+                    module: \"./assert\",\n+                    annotations: ImportAnnotations {\n+                        map: {},\n+                    },\n+                },\n+            ),\n+            Constant(\n+                Str(\n+                    Atom(\n+                        \"assert\",\n+                    ),\n+                ),\n+            ),\n+        ),\n+        args: [\n+            Value(\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            3.0,\n+                        ),\n+                    ),\n+                ),\n+            ),\n+            Value(\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            3.0,\n+                        ),\n+                    ),\n+                ),\n+            ),\n+        ],\n+        ast_path: [\n+            Program(\n+                Module,\n+            ),\n+            Module(\n+                Body(\n+                    1,\n+                ),\n+            ),\n+            ModuleItem(\n+                Stmt,\n+            ),\n+            Stmt(\n+                Decl,\n+            ),\n+            Decl(\n+                Fn,\n+            ),\n+            FnDecl(\n+                Function,\n+            ),\n+            Function(\n+                Body,\n+            ),\n+            BlockStmt(\n+                Stmts(\n+                    2,\n+                ),\n+            ),\n+            Stmt(\n+                Expr,\n+            ),\n+            ExprStmt(\n+                Expr,\n+            ),\n+            Expr(\n+                Call,\n+            ),\n+        ],\n+        span: 222..234,\n+        in_try: false,\n+        new: false,\n+    },\n+    Unreachable {\n+        start_ast_path: [\n+            Program(\n+                Module,\n+            ),\n+            Module(\n+                Body(\n+                    1,\n+                ),\n+            ),\n+            ModuleItem(\n+                Stmt,\n+            ),\n+            Stmt(\n+                Decl,\n+            ),\n+            Decl(\n+                Fn,\n+            ),\n+            FnDecl(\n+                Function,\n+            ),\n+            Function(\n+                Body,\n+            ),\n+            BlockStmt(\n+                Stmts(\n+                    3,\n+                ),\n+            ),\n+            Stmt(\n+                Return,\n+            ),\n+        ],\n+    },\n+]"
        },
        {
            "sha": "131de388f874fce9e2cc3aaa544b526033e1ed70",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/issue-77083/graph-explained.snapshot",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph-explained.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph-explained.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph-explained.snapshot?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -0,0 +1 @@\n+runGetClassesOrUseCache = (...) => (\"value a\" | \"value b\")"
        },
        {
            "sha": "0d9cb0b090950fb1adb1e43e7b501c36e2349c27",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/issue-77083/graph.snapshot",
            "status": "added",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fgraph.snapshot?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -0,0 +1,29 @@\n+[\n+    (\n+        \"runGetClassesOrUseCache\",\n+        Function(\n+            4,\n+            52,\n+            Alternatives {\n+                total_nodes: 3,\n+                values: [\n+                    Constant(\n+                        Str(\n+                            Atom(\n+                                \"value a\",\n+                            ),\n+                        ),\n+                    ),\n+                    Constant(\n+                        Str(\n+                            Atom(\n+                                \"value b\",\n+                            ),\n+                        ),\n+                    ),\n+                ],\n+                logical_property: None,\n+            },\n+        ),\n+    ),\n+]"
        },
        {
            "sha": "8d77b79a9d11d843330a6a03e37d65bd5e49045c",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/issue-77083/input.js",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Finput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Finput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Finput.js?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -0,0 +1,19 @@\n+// app/page.js\n+import { assert } from \"./assert\";\n+\n+function runGetClassesOrUseCache() {\n+  use_cache: {\n+    assert(1, 1);\n+    if (true) {\n+      break use_cache;\n+    }\n+    return \"value a\";\n+  }\n+  {\n+    assert(2, 2);\n+  }\n+\n+  assert(3, 3);\n+\n+  return \"value b\";\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "2ab81e16382d8665519e80523e0368ad7dc5d43c",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/issue-77083/resolved-effects.snapshot",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fresolved-effects.snapshot?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -0,0 +1,17 @@\n+0 -> 1 conditional = ???*0*\n+- *0* labeled statement\n+  ⚠️  This value might have side effects\n+\n+1 -> 3 call = module<./assert, {}>[\"assert\"](1, 1)\n+\n+1 -> 4 unreachable = ???*0*\n+- *0* unreachable\n+  ⚠️  This value might have side effects\n+\n+0 -> 6 call = module<./assert, {}>[\"assert\"](2, 2)\n+\n+0 -> 8 call = module<./assert, {}>[\"assert\"](3, 3)\n+\n+0 -> 9 unreachable = ???*0*\n+- *0* unreachable\n+  ⚠️  This value might have side effects"
        },
        {
            "sha": "131de388f874fce9e2cc3aaa544b526033e1ed70",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/issue-77083/resolved-explained.snapshot",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fresolved-explained.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fresolved-explained.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fissue-77083%2Fresolved-explained.snapshot?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -0,0 +1 @@\n+runGetClassesOrUseCache = (...) => (\"value a\" | \"value b\")"
        },
        {
            "sha": "2b4dcab8bf31bbab3ff63861ac1539f7cb4ad56f",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/react-dom-production/resolved-effects.snapshot",
            "status": "modified",
            "additions": 3313,
            "deletions": 3197,
            "changes": 6510,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Freact-dom-production%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Freact-dom-production%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Freact-dom-production%2Fresolved-effects.snapshot?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1"
        },
        {
            "sha": "6e35cb3ca8d37084d5de291306e6741d109aa347",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/next-77083/input/assert.js",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnext-77083%2Finput%2Fassert.js",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnext-77083%2Finput%2Fassert.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnext-77083%2Finput%2Fassert.js?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -0,0 +1,6 @@\n+// app/assert.js\n+export function assert(a, b) {\n+  if (a !== b) {\n+    throw new Error(`Assertion failed: ${a} !== ${b}`);\n+  }\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "0e1918f48d61cfbae69666078cfcb223bad7ceb6",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/next-77083/input/index.js",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnext-77083%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/1633c4acf8e408b938f5be99fd03821ccd1cbec1/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnext-77083%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fbasic%2Fnext-77083%2Finput%2Findex.js?ref=1633c4acf8e408b938f5be99fd03821ccd1cbec1",
            "patch": "@@ -0,0 +1,23 @@\n+// app/page.js\n+import { assert } from \"./assert\";\n+\n+function runGetClassesOrUseCache() {\n+  use_cache: {\n+    assert(1, 1);\n+    if (true) {\n+      break use_cache;\n+    }\n+    return \"value a\";\n+  }\n+  {\n+    assert(2, 2);\n+  }\n+\n+  assert(3, 3);\n+\n+  return \"value b\";\n+}\n+\n+it('should handle break label in use_cache', () => {\n+  expect(runGetClassesOrUseCache()).toBe(\"value b\");\n+})\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 7290,
        "additions": 4092,
        "deletions": 3198
    }
}