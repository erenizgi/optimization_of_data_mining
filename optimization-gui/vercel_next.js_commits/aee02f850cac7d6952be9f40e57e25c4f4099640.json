{
    "author": "devjiwonchoi",
    "message": "Revert \"[Breaking] Remove deprecated `publicRuntimeConfig` and `serverRuntimeConfig` (#83944)\" (#84167)\n\nThis PR reverts #83944 as it was missing a deprecation warning in the\napp, which is easy to miss for the users.",
    "sha": "aee02f850cac7d6952be9f40e57e25c4f4099640",
    "files": [
        {
            "sha": "6341127ae3a3037ababb82424928425281822fa2",
            "filename": "crates/next-build-test/nextConfig.json",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/crates%2Fnext-build-test%2FnextConfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/crates%2Fnext-build-test%2FnextConfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-build-test%2FnextConfig.json?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -53,6 +53,8 @@\n   \"productionBrowserSourceMaps\": false,\n   \"optimizeFonts\": true,\n   \"excludeDefaultMomentLocales\": true,\n+  \"serverRuntimeConfig\": {},\n+  \"publicRuntimeConfig\": {},\n   \"reactProductionProfiling\": false,\n   \"reactStrictMode\": true,\n   \"httpAgentOptions\": {"
        },
        {
            "sha": "809d4871cd992362aa2f377ee3ef212b6b40df9d",
            "filename": "docs/01-app/02-guides/environment-variables.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/docs%2F01-app%2F02-guides%2Fenvironment-variables.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/docs%2F01-app%2F02-guides%2Fenvironment-variables.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fenvironment-variables.mdx?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -228,6 +228,7 @@ This allows you to use a singular Docker image that can be promoted through mult\n **Good to know:**\n \n - You can run code on server startup using the [`register` function](/docs/app/guides/instrumentation).\n+- We do not recommend using the [`runtimeConfig`](/docs/pages/api-reference/config/next-config-js/runtime-configuration) option, as this does not work with the standalone output mode. Instead, we recommend [incrementally adopting](/docs/app/guides/migrating/app-router-migration) the App Router if you need this feature.\n \n ## Test Environment Variables\n "
        },
        {
            "sha": "c09f87d0501048d240c56c748aa049f7ebab3672",
            "filename": "docs/01-app/02-guides/self-hosting.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/docs%2F01-app%2F02-guides%2Fself-hosting.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/docs%2F01-app%2F02-guides%2Fself-hosting.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fself-hosting.mdx?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -79,6 +79,7 @@ This allows you to use a singular Docker image that can be promoted through mult\n > **Good to know:**\n >\n > - You can run code on server startup using the [`register` function](/docs/app/guides/instrumentation).\n+> - We do not recommend using the [runtimeConfig](/docs/pages/api-reference/config/next-config-js/runtime-configuration) option, as this does not work with the standalone output mode. Instead, we recommend [incrementally adopting](/docs/app/guides/migrating/app-router-migration) the App Router.\n \n ## Caching and ISR\n "
        },
        {
            "sha": "4d068fa1bba8d717e6ed5bdc1b185cdfff9876cb",
            "filename": "docs/01-app/03-api-reference/05-config/01-next-config-js/output.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2Foutput.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2Foutput.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2Foutput.mdx?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -59,7 +59,7 @@ node .next/standalone/server.js\n \n > **Good to know**:\n >\n-> - `next.config.js` is read during `next build` and serialized into the `server.js` output file.\n+> - `next.config.js` is read during `next build` and serialized into the `server.js` output file. If the legacy [`serverRuntimeConfig` or `publicRuntimeConfig` options](/docs/pages/api-reference/config/next-config-js/runtime-configuration) are being used, the values will be specific to values at build time.\n > - If your project needs to listen to a specific port or hostname, you can define `PORT` or `HOSTNAME` environment variables before running `server.js`. For example, run `PORT=8080 HOSTNAME=0.0.0.0 node server.js` to start the server on `http://0.0.0.0:8080`.\n \n </PagesOnly>"
        },
        {
            "sha": "879394ea38dd40a68388a0f60d700a55138cabe8",
            "filename": "docs/02-pages/04-api-reference/04-config/01-next-config-js/runtime-configuration.mdx",
            "status": "added",
            "additions": 60,
            "deletions": 0,
            "changes": 60,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/docs%2F02-pages%2F04-api-reference%2F04-config%2F01-next-config-js%2Fruntime-configuration.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/docs%2F02-pages%2F04-api-reference%2F04-config%2F01-next-config-js%2Fruntime-configuration.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F02-pages%2F04-api-reference%2F04-config%2F01-next-config-js%2Fruntime-configuration.mdx?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1,60 @@\n+---\n+title: Runtime Config\n+description: Add client and server runtime configuration to your Next.js app.\n+---\n+\n+> **Warning:**\n+>\n+> - **This feature is deprecated.** We recommend using [environment variables](/docs/pages/guides/environment-variables) instead, which also can support reading runtime values.\n+> - You can run code on server startup using the [`register` function](/docs/app/guides/instrumentation).\n+> - This feature does not work with [Automatic Static Optimization](/docs/pages/building-your-application/rendering/automatic-static-optimization), [Output File Tracing](/docs/pages/api-reference/config/next-config-js/output#automatically-copying-traced-files), or [React Server Components](/docs/app/getting-started/server-and-client-components).\n+\n+To add runtime configuration to your app, open `next.config.js` and add the `publicRuntimeConfig` and `serverRuntimeConfig` configs:\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  serverRuntimeConfig: {\n+    // Will only be available on the server side\n+    mySecret: 'secret',\n+    secondSecret: process.env.SECOND_SECRET, // Pass through env variables\n+  },\n+  publicRuntimeConfig: {\n+    // Will be available on both server and client\n+    staticFolder: '/static',\n+  },\n+}\n+```\n+\n+Place any server-only runtime config under `serverRuntimeConfig`.\n+\n+Anything accessible to both client and server-side code should be under `publicRuntimeConfig`.\n+\n+> A page that relies on `publicRuntimeConfig` **must** use `getInitialProps` or `getServerSideProps` or your application must have a [Custom App](/docs/pages/building-your-application/routing/custom-app) with `getInitialProps` to opt-out of [Automatic Static Optimization](/docs/pages/building-your-application/rendering/automatic-static-optimization). Runtime configuration won't be available to any page (or component in a page) without being server-side rendered.\n+\n+To get access to the runtime configs in your app use `next/config`, like so:\n+\n+```jsx\n+import getConfig from 'next/config'\n+import Image from 'next/image'\n+\n+// Only holds serverRuntimeConfig and publicRuntimeConfig\n+const { serverRuntimeConfig, publicRuntimeConfig } = getConfig()\n+// Will only be available on the server-side\n+console.log(serverRuntimeConfig.mySecret)\n+// Will be available on both server-side and client-side\n+console.log(publicRuntimeConfig.staticFolder)\n+\n+function MyImage() {\n+  return (\n+    <div>\n+      <Image\n+        src={`${publicRuntimeConfig.staticFolder}/logo.png`}\n+        alt=\"logo\"\n+        layout=\"fill\"\n+      />\n+    </div>\n+  )\n+}\n+\n+export default MyImage\n+```"
        },
        {
            "sha": "20c292fb467ef1a8229acb42bbc42c71d8e18c3b",
            "filename": "packages/next/config.d.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fconfig.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fconfig.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fconfig.d.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1,3 @@\n+import getConfig from './dist/shared/lib/runtime-config.external'\n+export * from './dist/shared/lib/runtime-config.external'\n+export default getConfig"
        },
        {
            "sha": "668ee7c54f0e0ed12cb4d383cdc116d49b8ab81a",
            "filename": "packages/next/config.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fconfig.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fconfig.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fconfig.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1 @@\n+module.exports = require('./dist/shared/lib/runtime-config.external')"
        },
        {
            "sha": "8e7cf5d71b9be221cc61568d57dffb47ffc5cf5c",
            "filename": "packages/next/index.d.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Findex.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Findex.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Findex.d.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -4,6 +4,7 @@\n /// <reference path=\"./amp.d.ts\" />\n /// <reference path=\"./app.d.ts\" />\n /// <reference path=\"./cache.d.ts\" />\n+/// <reference path=\"./config.d.ts\" />\n /// <reference path=\"./document.d.ts\" />\n /// <reference path=\"./dynamic.d.ts\" />\n /// <reference path=\"./error.d.ts\" />"
        },
        {
            "sha": "e75691ceec0f5a7ebee519a9d140ffe841475072",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -1909,7 +1909,9 @@ export default async function build(\n           }\n         }\n \n-        const { configFileName } = config\n+        const { configFileName, publicRuntimeConfig, serverRuntimeConfig } =\n+          config\n+        const runtimeEnvConfig = { publicRuntimeConfig, serverRuntimeConfig }\n         const sriEnabled = Boolean(config.experimental.sri?.algorithm)\n \n         const nonStaticErrorPageSpan = staticCheckSpan.traceChild(\n@@ -1922,6 +1924,7 @@ export default async function build(\n               (await worker.hasCustomGetInitialProps({\n                 page: '/_error',\n                 distDir,\n+                runtimeEnvConfig,\n                 checkingApp: false,\n                 sriEnabled,\n               }))\n@@ -1935,6 +1938,7 @@ export default async function build(\n               page: '/_error',\n               distDir,\n               configFileName,\n+              runtimeEnvConfig,\n               cacheComponents: isAppCacheComponentsEnabled,\n               authInterrupts: isAuthInterruptsEnabled,\n               httpAgentOptions: config.httpAgentOptions,\n@@ -1954,6 +1958,7 @@ export default async function build(\n           ? worker.hasCustomGetInitialProps({\n               page: appPageToCheck,\n               distDir,\n+              runtimeEnvConfig,\n               checkingApp: true,\n               sriEnabled,\n             })\n@@ -1963,6 +1968,7 @@ export default async function build(\n           ? worker.getDefinedNamedExports({\n               page: appPageToCheck,\n               distDir,\n+              runtimeEnvConfig,\n               sriEnabled,\n             })\n           : Promise.resolve([])\n@@ -2149,6 +2155,7 @@ export default async function build(\n                             originalAppPath,\n                             distDir,\n                             configFileName,\n+                            runtimeEnvConfig,\n                             httpAgentOptions: config.httpAgentOptions,\n                             locales: config.i18n?.locales,\n                             defaultLocale: config.i18n?.defaultLocale,"
        },
        {
            "sha": "f1002b14b846396b60904a914219e7b288ff143a",
            "filename": "packages/next/src/build/templates/edge-ssr.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -155,6 +155,12 @@ async function requestHandler(\n       distDir: '',\n       crossOrigin: nextConfig.crossOrigin ? nextConfig.crossOrigin : undefined,\n       largePageDataBytes: nextConfig.experimental.largePageDataBytes,\n+      // Only the `publicRuntimeConfig` key is exposed to the client side\n+      // It'll be rendered as part of __NEXT_DATA__ on the client side\n+      runtimeConfig:\n+        Object.keys(nextConfig.publicRuntimeConfig).length > 0\n+          ? nextConfig.publicRuntimeConfig\n+          : undefined,\n \n       isExperimentalCompile: nextConfig.experimental.isExperimentalCompile,\n       // `htmlLimitedBots` is passed to server as serialized config in string format"
        },
        {
            "sha": "680a25971213c4e65cd1f7020362b0f08a12561b",
            "filename": "packages/next/src/build/utils.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -567,6 +567,7 @@ export async function isPageStatic({\n   page,\n   distDir,\n   configFileName,\n+  runtimeEnvConfig,\n   httpAgentOptions,\n   locales,\n   defaultLocale,\n@@ -593,6 +594,7 @@ export async function isPageStatic({\n   cacheComponents: boolean\n   authInterrupts: boolean\n   configFileName: string\n+  runtimeEnvConfig: any\n   httpAgentOptions: NextConfigComplete['httpAgentOptions']\n   locales?: readonly string[]\n   defaultLocale?: string\n@@ -642,6 +644,9 @@ export async function isPageStatic({\n   const isPageStaticSpan = trace('is-page-static-utils', parentId)\n   return isPageStaticSpan\n     .traceAsyncFn(async (): Promise<PageIsStaticResult> => {\n+      ;(\n+        require('../shared/lib/runtime-config.external') as typeof import('../shared/lib/runtime-config.external')\n+      ).setConfig(runtimeEnvConfig)\n       setHttpClientAndAgentOptions({\n         httpAgentOptions,\n       })\n@@ -950,14 +955,20 @@ export function reduceAppConfig(\n export async function hasCustomGetInitialProps({\n   page,\n   distDir,\n+  runtimeEnvConfig,\n   checkingApp,\n   sriEnabled,\n }: {\n   page: string\n   distDir: string\n+  runtimeEnvConfig: any\n   checkingApp: boolean\n   sriEnabled: boolean\n }): Promise<boolean> {\n+  ;(\n+    require('../shared/lib/runtime-config.external') as typeof import('../shared/lib/runtime-config.external')\n+  ).setConfig(runtimeEnvConfig)\n+\n   const { ComponentMod } = await loadComponents({\n     distDir,\n     page: page,\n@@ -980,12 +991,17 @@ export async function hasCustomGetInitialProps({\n export async function getDefinedNamedExports({\n   page,\n   distDir,\n+  runtimeEnvConfig,\n   sriEnabled,\n }: {\n   page: string\n   distDir: string\n+  runtimeEnvConfig: any\n   sriEnabled: boolean\n }): Promise<ReadonlyArray<string>> {\n+  ;(\n+    require('../shared/lib/runtime-config.external') as typeof import('../shared/lib/runtime-config.external')\n+  ).setConfig(runtimeEnvConfig)\n   const { ComponentMod } = await loadComponents({\n     distDir,\n     page: page,"
        },
        {
            "sha": "d63875b6b059059b4e4feb87f9bd1eb968d6c189",
            "filename": "packages/next/src/client/index.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -20,6 +20,7 @@ import {\n   urlQueryToSearchParams,\n   assign,\n } from '../shared/lib/router/utils/querystring'\n+import { setConfig } from '../shared/lib/runtime-config.external'\n import { getURL, loadGetInitialProps, ST } from '../shared/lib/utils'\n import type { NextWebVitalsMetric, NEXT_DATA } from '../shared/lib/utils'\n import { Portal } from './portal'\n@@ -211,6 +212,12 @@ export async function initialize(opts: { devClient?: any } = {}): Promise<{\n   // So, this is how we do it in the client side at runtime\n   ;(self as any).__next_set_public_path__(`${prefix}/_next/`) //eslint-disable-line\n \n+  // Initialize next/config with the environment configuration\n+  setConfig({\n+    serverRuntimeConfig: {},\n+    publicRuntimeConfig: initialData.runtimeConfig || {},\n+  })\n+\n   asPath = getURL()\n \n   // make sure not to attempt stripping basePath for 404s"
        },
        {
            "sha": "eaa88b623f6518bb6153ef287178d18224139c1d",
            "filename": "packages/next/src/export/index.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -422,6 +422,12 @@ async function exportAppImpl(\n       nextConfig.experimental.enablePrerenderSourceMaps === true,\n   }\n \n+  const { publicRuntimeConfig } = nextConfig\n+\n+  if (Object.keys(publicRuntimeConfig).length > 0) {\n+    renderOpts.runtimeConfig = publicRuntimeConfig\n+  }\n+\n   // We need this for server rendering the Link component.\n   ;(globalThis as any).__NEXT_DATA__ = {\n     nextExport: true,"
        },
        {
            "sha": "795202731dd480f2ece1dd912f6c0705acec19bd",
            "filename": "packages/next/src/export/types.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fexport%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fexport%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Ftypes.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -54,6 +54,7 @@ export interface ExportPageInput {\n   ampValidatorPath?: string\n   trailingSlash?: boolean\n   buildExport?: boolean\n+  serverRuntimeConfig: { [key: string]: any }\n   subFolders?: boolean\n   optimizeCss: any\n   disableOptimizedLoading: any"
        },
        {
            "sha": "2a7f0d265aa0d0af9048760a480865c655874509",
            "filename": "packages/next/src/export/worker.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -50,6 +50,10 @@ import type { PagesRenderContext, PagesSharedContext } from '../server/render'\n import type { AppSharedContext } from '../server/app-render/app-render'\n import { MultiFileWriter } from '../lib/multi-file-writer'\n import { createRenderResumeDataCache } from '../server/resume-data-cache/resume-data-cache'\n+\n+const envConfig =\n+  require('../shared/lib/runtime-config.external') as typeof import('../shared/lib/runtime-config.external')\n+\n ;(globalThis as any).__NEXT_DATA__ = {\n   nextExport: true,\n }\n@@ -71,6 +75,7 @@ async function exportPageImpl(\n     distDir,\n     pagesDataDir,\n     buildExport = false,\n+    serverRuntimeConfig,\n     subFolders = false,\n     optimizeCss,\n     disableOptimizedLoading,\n@@ -191,6 +196,11 @@ async function exportPageImpl(\n     addRequestMeta(req, 'isLocaleDomain', true)\n   }\n \n+  envConfig.setConfig({\n+    serverRuntimeConfig,\n+    publicRuntimeConfig: commonRenderOpts.runtimeConfig,\n+  })\n+\n   const getHtmlFilename = (p: string) =>\n     subFolders ? `${p}${sep}index.html` : `${p}.html`\n \n@@ -406,6 +416,7 @@ export async function exportPages(\n             ampValidatorPath:\n               nextConfig.experimental.amp?.validator || undefined,\n             trailingSlash: nextConfig.trailingSlash,\n+            serverRuntimeConfig: nextConfig.serverRuntimeConfig,\n             subFolders: nextConfig.trailingSlash && !options.buildExport,\n             buildExport: options.buildExport,\n             optimizeCss: nextConfig.experimental.optimizeCss,"
        },
        {
            "sha": "2c5bd0438d00295206e0812d06d34b35b96a0048",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 1,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -57,6 +57,7 @@ import {\n   UNDERSCORE_NOT_FOUND_ROUTE_ENTRY,\n } from '../shared/lib/constants'\n import { isDynamicRoute } from '../shared/lib/router/utils'\n+import { setConfig } from '../shared/lib/runtime-config.external'\n import { execOnce } from '../shared/lib/utils'\n import { isBlockedPage } from './utils'\n import { getBotType, isBot } from '../shared/lib/router/utils/is-bot'\n@@ -474,7 +475,14 @@ export default abstract class Server<\n       ? new LocaleRouteNormalizer(this.i18nProvider)\n       : undefined\n \n-    const { assetPrefix, generateEtags } = this.nextConfig\n+    // Only serverRuntimeConfig needs the default\n+    // publicRuntimeConfig gets it's default in client/index.js\n+    const {\n+      serverRuntimeConfig = {},\n+      publicRuntimeConfig,\n+      assetPrefix,\n+      generateEtags,\n+    } = this.nextConfig\n \n     this.buildId = this.getBuildId()\n     // this is a hack to avoid Webpack knowing this is equal to this.minimalMode\n@@ -543,6 +551,12 @@ export default abstract class Server<\n         ? this.nextConfig.crossOrigin\n         : undefined,\n       largePageDataBytes: this.nextConfig.experimental.largePageDataBytes,\n+      // Only the `publicRuntimeConfig` key is exposed to the client side\n+      // It'll be rendered as part of __NEXT_DATA__ on the client side\n+      runtimeConfig:\n+        Object.keys(publicRuntimeConfig).length > 0\n+          ? publicRuntimeConfig\n+          : undefined,\n \n       isExperimentalCompile: this.nextConfig.experimental.isExperimentalCompile,\n       // `htmlLimitedBots` is passed to server as serialized config in string format\n@@ -569,6 +583,12 @@ export default abstract class Server<\n       reactMaxHeadersLength: this.nextConfig.reactMaxHeadersLength,\n     }\n \n+    // Initialize next/config with the environment configuration\n+    setConfig({\n+      serverRuntimeConfig,\n+      publicRuntimeConfig,\n+    })\n+\n     this.pagesManifest = this.getPagesManifest()\n     this.appPathsManifest = this.getAppPathsManifest()\n     this.appPathRoutes = this.getAppPathRoutes()"
        },
        {
            "sha": "adfedff641121afc9d72536e72d74ab5f32f1de9",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -653,6 +653,7 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n     pageExtensions: z.array(z.string()).min(1).optional(),\n     poweredByHeader: z.boolean().optional(),\n     productionBrowserSourceMaps: z.boolean().optional(),\n+    publicRuntimeConfig: z.record(z.string(), z.any()).optional(),\n     reactProductionProfiling: z.boolean().optional(),\n     reactStrictMode: z.boolean().nullable().optional(),\n     reactMaxHeadersLength: z.number().nonnegative().int().optional(),\n@@ -685,6 +686,7 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n       .catchall(z.any())\n       .optional(),\n     serverExternalPackages: z.array(z.string()).optional(),\n+    serverRuntimeConfig: z.record(z.string(), z.any()).optional(),\n     skipMiddlewareUrlNormalize: z.boolean().optional(),\n     skipTrailingSlashRedirect: z.boolean().optional(),\n     staticPageGenerationTimeout: z.number().optional(),"
        },
        {
            "sha": "4aa8c820cec8b08428527eff7cc3730d527203d1",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -1115,6 +1115,20 @@ export interface NextConfig {\n    */\n   reactMaxHeadersLength?: number\n \n+  /**\n+   * Add public (in browser) runtime configuration to your app\n+   *\n+   * @see [Runtime configuration](https://nextjs.org/docs/pages/api-reference/config/next-config-js/runtime-configuration\n+   */\n+  publicRuntimeConfig?: { [key: string]: any }\n+\n+  /**\n+   * Add server runtime configuration to your app\n+   *\n+   * @see [Runtime configuration](https://nextjs.org/docs/pages/api-reference/config/next-config-js/runtime-configuration\n+   */\n+  serverRuntimeConfig?: { [key: string]: any }\n+\n   /**\n    * Next.js enables HTTP Keep-Alive by default.\n    * You may want to disable HTTP Keep-Alive for certain `fetch()` calls or globally.\n@@ -1353,6 +1367,8 @@ export const defaultConfig = Object.freeze({\n   i18n: null,\n   productionBrowserSourceMaps: false,\n   excludeDefaultMomentLocales: true,\n+  serverRuntimeConfig: {},\n+  publicRuntimeConfig: {},\n   reactProductionProfiling: false,\n   reactStrictMode: null,\n   reactMaxHeadersLength: 6000,"
        },
        {
            "sha": "df7f323082e5c11ab3fb111fa6eb7c6c21894638",
            "filename": "packages/next/src/server/dev/next-dev-server.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -804,7 +804,12 @@ export default class DevServer extends Server {\n     // from waiting on them for the page to load in dev mode\n \n     const __getStaticPaths = async () => {\n-      const { configFileName, httpAgentOptions } = this.nextConfig\n+      const {\n+        configFileName,\n+        publicRuntimeConfig,\n+        serverRuntimeConfig,\n+        httpAgentOptions,\n+      } = this.nextConfig\n       const { locales, defaultLocale } = this.nextConfig.i18n || {}\n       const staticPathsWorker = this.getStaticPathsWorker()\n \n@@ -816,6 +821,8 @@ export default class DevServer extends Server {\n           config: {\n             pprConfig: this.nextConfig.experimental.ppr,\n             configFileName,\n+            publicRuntimeConfig,\n+            serverRuntimeConfig,\n             cacheComponents: Boolean(\n               this.nextConfig.experimental.cacheComponents\n             ),"
        },
        {
            "sha": "227933c08fe22b9b9ede193155e86434060077d1",
            "filename": "packages/next/src/server/dev/static-paths-worker.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fstatic-paths-worker.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fstatic-paths-worker.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fstatic-paths-worker.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -25,6 +25,8 @@ import type { AppRouteRouteModule } from '../route-modules/app-route/module'\n type RuntimeConfig = {\n   pprConfig: ExperimentalPPRConfig | undefined\n   configFileName: string\n+  publicRuntimeConfig: { [key: string]: any }\n+  serverRuntimeConfig: { [key: string]: any }\n   cacheComponents: boolean\n }\n \n@@ -90,6 +92,9 @@ export async function loadStaticPaths({\n   })\n \n   // update work memory runtime-config\n+  ;(\n+    require('../../shared/lib/runtime-config.external') as typeof import('../../shared/lib/runtime-config.external')\n+  ).setConfig(config)\n   setHttpClientAndAgentOptions({\n     httpAgentOptions,\n   })"
        },
        {
            "sha": "568be2acae75fbcc7ed7da6c661a26bc5737db72",
            "filename": "packages/next/src/server/lib/router-utils/router-server-context.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Frouter-server-context.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Frouter-server-context.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Frouter-server-context.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -28,6 +28,8 @@ export type RouterServerContext = Record<\n       parsedUrl?: UrlWithParsedQuery,\n       setHeaders?: boolean\n     ) => Promise<void>\n+    // current loaded public runtime config\n+    publicRuntimeConfig?: NextConfigComplete['publicRuntimeConfig']\n     // exposing nextConfig for dev mode specifically\n     nextConfig?: NextConfigComplete\n     // whether running in custom server mode"
        },
        {
            "sha": "6d9df62d3bf9760254bb9fcea0f6473f58be61bb",
            "filename": "packages/next/src/server/render.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Frender.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Frender.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frender.tsx?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -243,6 +243,7 @@ function renderPageTree(\n \n export type RenderOptsPartial = {\n   canonicalBase: string\n+  runtimeConfig?: { [key: string]: any }\n   assetPrefix?: string\n   err?: Error | null\n   nextExport?: boolean\n@@ -1490,6 +1491,7 @@ export async function renderToHTMLImpl(\n     domainLocales,\n     locale,\n     locales,\n+    runtimeConfig,\n   } = renderOpts\n   const htmlProps: HtmlProps = {\n     __NEXT_DATA__: {\n@@ -1498,6 +1500,7 @@ export async function renderToHTMLImpl(\n       query, // querystring parsed / passed by the user\n       buildId: sharedContext.buildId,\n       assetPrefix: assetPrefix === '' ? undefined : assetPrefix, // send assetPrefix to the client side when configured, otherwise don't sent in the resulting HTML\n+      runtimeConfig, // runtimeConfig if provided, otherwise don't sent in the resulting HTML\n       nextExport: nextExport === true ? true : undefined, // If this is a page exported by `next export`\n       autoExport: isAutoExport === true ? true : undefined, // If this is an auto exported page\n       isFallback,"
        },
        {
            "sha": "686fcc80b3dea956fbb346c9e2a3185435327273",
            "filename": "packages/next/src/server/route-modules/pages/pages-handler.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -204,6 +204,10 @@ export const getHandler = ({\n         query: hasStaticProps ? {} : originalQuery,\n       })\n \n+      const publicRuntimeConfig: Record<string, string> =\n+        routerServerContext?.publicRuntimeConfig ||\n+        nextConfig.publicRuntimeConfig\n+\n       const handleResponse = async (span?: Span) => {\n         const responseGenerator: ResponseGenerator = async ({\n           previousCacheEntry,\n@@ -278,6 +282,12 @@ export const getHandler = ({\n                       nextConfig.experimental.disableOptimizedLoading,\n                     largePageDataBytes:\n                       nextConfig.experimental.largePageDataBytes,\n+                    // Only the `publicRuntimeConfig` key is exposed to the client side\n+                    // It'll be rendered as part of __NEXT_DATA__ on the client side\n+                    runtimeConfig:\n+                      Object.keys(publicRuntimeConfig).length > 0\n+                        ? publicRuntimeConfig\n+                        : undefined,\n \n                     isExperimentalCompile,\n "
        },
        {
            "sha": "b4a48a362d63827c5267dbcae65fbcaf9e9219d1",
            "filename": "packages/next/src/shared/lib/runtime-config.external.ts",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fruntime-config.external.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fruntime-config.external.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fruntime-config.external.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1,9 @@\n+let runtimeConfig: any\n+\n+export default () => {\n+  return runtimeConfig\n+}\n+\n+export function setConfig(configValue: any): void {\n+  runtimeConfig = configValue\n+}"
        },
        {
            "sha": "abc5d6da627f394acae8a3b7ac373b7b5e1316ee",
            "filename": "packages/next/src/shared/lib/utils.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Futils.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -91,6 +91,7 @@ export type NEXT_DATA = {\n   query: ParsedUrlQuery\n   buildId: string\n   assetPrefix?: string\n+  runtimeConfig?: { [key: string]: any }\n   nextExport?: boolean\n   autoExport?: boolean\n   isFallback?: boolean"
        },
        {
            "sha": "84b5831fc866efc45dda10b4787810d79dbaac0a",
            "filename": "test/integration/config-mjs/next.config.mjs",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig-mjs%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig-mjs%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fconfig-mjs%2Fnext.config.mjs?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -4,6 +4,12 @@ export default {\n     maxInactiveAge: 1000 * 60 * 60,\n   },\n   poweredByHeader: false,\n+  serverRuntimeConfig: {\n+    mySecret: 'secret',\n+  },\n+  publicRuntimeConfig: {\n+    staticFolder: '/static',\n+  },\n   env: {\n     customVar: 'hello',\n   },"
        },
        {
            "sha": "945aeba52da3385988e04821a21b8db6af844fc4",
            "filename": "test/integration/config-mjs/pages/next-config.js",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig-mjs%2Fpages%2Fnext-config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig-mjs%2Fpages%2Fnext-config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fconfig-mjs%2Fpages%2Fnext-config.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -1,5 +1,10 @@\n+import getConfig from 'next/config'\n+const { serverRuntimeConfig, publicRuntimeConfig } = getConfig()\n+\n export default () => (\n   <div>\n+    <p id=\"server-only\">server-only: {serverRuntimeConfig.mySecret || '***'}</p>\n+    <p id=\"server-and-client\">{publicRuntimeConfig.staticFolder}</p>\n     <p id=\"env\">{process.env.customVar}</p>\n   </div>\n )"
        },
        {
            "sha": "16a13738f99f91e54fd340a89b964b5d29234eb2",
            "filename": "test/integration/config-mjs/test/index.test.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 1,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig-mjs%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig-mjs%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fconfig-mjs%2Ftest%2Findex.test.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -44,16 +44,32 @@ describe('Configuration', () => {\n     expect(header).not.toBe('Next.js')\n   })\n \n+  test('renders server config on the server only', async () => {\n+    const $ = await get$('/next-config')\n+    expect($('#server-only').text()).toBe('server-only: secret')\n+  })\n+\n+  test('renders public config on the server only', async () => {\n+    const $ = await get$('/next-config')\n+    expect($('#server-and-client').text()).toBe('/static')\n+  })\n+\n   test('correctly imports a package that defines `module` but no `main` in package.json', async () => {\n     const $ = await get$('/module-only-content')\n     expect($('#messageInAPackage').text()).toBe('OK')\n   })\n \n-  it('should have env variables available on the client', async () => {\n+  it('should have config available on the client', async () => {\n     const browser = await webdriver(context.appPort, '/next-config')\n \n+    const serverText = await browser.elementByCss('#server-only').text()\n+    const serverClientText = await browser\n+      .elementByCss('#server-and-client')\n+      .text()\n     const envValue = await browser.elementByCss('#env').text()\n \n+    expect(serverText).toBe('server-only: ***')\n+    expect(serverClientText).toBe('/static')\n     expect(envValue).toBe('hello')\n     await browser.close()\n   })"
        },
        {
            "sha": "e71caf99a7fed1c8a7858f62a63ac4b8baf3f9e2",
            "filename": "test/integration/config/next.config.js",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fconfig%2Fnext.config.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -4,6 +4,12 @@ module.exports = {\n     maxInactiveAge: 1000 * 60 * 60,\n   },\n   poweredByHeader: false,\n+  serverRuntimeConfig: {\n+    mySecret: 'secret',\n+  },\n+  publicRuntimeConfig: {\n+    staticFolder: '/static',\n+  },\n   env: {\n     customVar: 'hello',\n   },"
        },
        {
            "sha": "945aeba52da3385988e04821a21b8db6af844fc4",
            "filename": "test/integration/config/pages/next-config.js",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig%2Fpages%2Fnext-config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig%2Fpages%2Fnext-config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fconfig%2Fpages%2Fnext-config.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -1,5 +1,10 @@\n+import getConfig from 'next/config'\n+const { serverRuntimeConfig, publicRuntimeConfig } = getConfig()\n+\n export default () => (\n   <div>\n+    <p id=\"server-only\">server-only: {serverRuntimeConfig.mySecret || '***'}</p>\n+    <p id=\"server-and-client\">{publicRuntimeConfig.staticFolder}</p>\n     <p id=\"env\">{process.env.customVar}</p>\n   </div>\n )"
        },
        {
            "sha": "2bad399016e629c92c6b391c8ae2c0a2eee8a65b",
            "filename": "test/integration/config/test/index.test.js",
            "status": "modified",
            "additions": 17,
            "deletions": 1,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fconfig%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fconfig%2Ftest%2Findex.test.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -44,16 +44,32 @@ describe('Configuration', () => {\n     expect(header).not.toBe('Next.js')\n   })\n \n+  test('renders server config on the server only', async () => {\n+    const $ = await get$('/next-config')\n+    expect($('#server-only').text()).toBe('server-only: secret')\n+  })\n+\n+  test('renders public config on the server only', async () => {\n+    const $ = await get$('/next-config')\n+    expect($('#server-and-client').text()).toBe('/static')\n+  })\n+\n   test('correctly imports a package that defines `module` but no `main` in package.json', async () => {\n     const $ = await get$('/module-only-content')\n     expect($('#messageInAPackage').text()).toBe('OK')\n   })\n \n-  it('should have env variables available on the client', async () => {\n+  it('should have config available on the client', async () => {\n     const browser = await webdriver(context.appPort, '/next-config')\n \n+    const serverText = await browser.elementByCss('#server-only').text()\n+    const serverClientText = await browser\n+      .elementByCss('#server-and-client')\n+      .text()\n     const envValue = await browser.elementByCss('#env').text()\n \n+    expect(serverText).toBe('server-only: ***')\n+    expect(serverClientText).toBe('/static')\n     expect(envValue).toBe('hello')\n     await browser.close()\n   })"
        },
        {
            "sha": "75cc04d8d65dd55e27a60c3b017d67c4e4962d39",
            "filename": "test/integration/development-runtime-config/components/Layout.js",
            "status": "added",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Fcomponents%2FLayout.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Fcomponents%2FLayout.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fdevelopment-runtime-config%2Fcomponents%2FLayout.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1,15 @@\n+import getConfig from 'next/config'\n+\n+const { serverRuntimeConfig, publicRuntimeConfig } = getConfig()\n+\n+const Layout = ({ children }) => {\n+  return (\n+    <div>\n+      <p id=\"server-runtime-config\">{JSON.stringify(serverRuntimeConfig)}</p>\n+      <p id=\"public-runtime-config\">{JSON.stringify(publicRuntimeConfig)}</p>\n+      <div>{children}</div>\n+    </div>\n+  )\n+}\n+\n+export default Layout"
        },
        {
            "sha": "f76402f3025c8deefdc154b02e67a3223d0eb500",
            "filename": "test/integration/development-runtime-config/pages/_app.js",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2F_app.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2F_app.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2F_app.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1,11 @@\n+import Layout from './../components/Layout'\n+\n+const App = ({ Component, pageProps }) => {\n+  return (\n+    <Layout>\n+      <Component {...pageProps} />\n+    </Layout>\n+  )\n+}\n+\n+export default App"
        },
        {
            "sha": "f40492ac06d85512e10c7243d142986a692f40bf",
            "filename": "test/integration/development-runtime-config/pages/index.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2Findex.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1 @@\n+export default () => 'test'"
        },
        {
            "sha": "d5aa21f76fe99cca3b42cccca5d0342887a9a018",
            "filename": "test/integration/development-runtime-config/pages/post/[pid].js",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2Fpost%2F%5Bpid%5D.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2Fpost%2F%5Bpid%5D.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fdevelopment-runtime-config%2Fpages%2Fpost%2F%5Bpid%5D.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1,22 @@\n+const Post = () => {\n+  return (\n+    <div>\n+      <h2>POST</h2>\n+    </div>\n+  )\n+}\n+\n+export const getStaticProps = async () => {\n+  return {\n+    props: {},\n+  }\n+}\n+\n+export const getStaticPaths = async () => {\n+  return {\n+    paths: ['/post/1', '/post/2'],\n+    fallback: true,\n+  }\n+}\n+\n+export default Post"
        },
        {
            "sha": "12245e02d9d048971650c8d18ad70ff803d1f69a",
            "filename": "test/integration/development-runtime-config/test/index.test.js",
            "status": "added",
            "additions": 77,
            "deletions": 0,
            "changes": 77,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fintegration%2Fdevelopment-runtime-config%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fdevelopment-runtime-config%2Ftest%2Findex.test.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1,77 @@\n+/* eslint-env jest */\n+\n+import fs from 'fs-extra'\n+import { join } from 'path'\n+import cheerio from 'cheerio'\n+import {\n+  findPort,\n+  renderViaHTTP,\n+  launchApp,\n+  waitFor,\n+  killApp,\n+} from 'next-test-utils'\n+\n+const appDir = join(__dirname, '../')\n+const nextConfig = join(appDir, 'next.config.js')\n+\n+const runApp = async (config) => {\n+  const port = await findPort()\n+\n+  let stderr = ''\n+  const app = await launchApp(appDir, port, {\n+    onStderr(err) {\n+      stderr += err\n+    },\n+  })\n+\n+  const html = await renderViaHTTP(port, '/post/1')\n+  const $ = cheerio.load(html)\n+  await waitFor(1000)\n+\n+  await killApp(app)\n+  await fs.remove(nextConfig)\n+\n+  expect(stderr).not.toMatch(\n+    /Cannot read property 'serverRuntimeConfig' of undefined/i\n+  )\n+  expect(JSON.parse($('#server-runtime-config').text())).toEqual(\n+    config.serverRuntimeConfig || {}\n+  )\n+  expect(JSON.parse($('#public-runtime-config').text())).toEqual(\n+    config.publicRuntimeConfig || {}\n+  )\n+}\n+\n+describe('should work with runtime-config in next.config.js', () => {\n+  test('empty runtime-config', async () => {\n+    await fs.writeFile(\n+      nextConfig,\n+      `\n+      module.exports = {\n+      }\n+    `\n+    )\n+\n+    await runApp({})\n+  })\n+\n+  test('with runtime-config', async () => {\n+    const config = {\n+      serverRuntimeConfig: {\n+        mySecret: '**********',\n+      },\n+      publicRuntimeConfig: {\n+        staticFolder: '/static',\n+      },\n+    }\n+\n+    await fs.writeFile(\n+      nextConfig,\n+      `\n+      module.exports = ${JSON.stringify(config)}\n+    `\n+    )\n+\n+    await runApp(config)\n+  })\n+})"
        },
        {
            "sha": "336de74d771149e588b08c6905d691355e3a4e28",
            "filename": "test/production/export/index.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fexport%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fexport%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fexport%2Findex.test.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -185,7 +185,7 @@ describe('static export', () => {\n         .elementByCss('#about-page p')\n         .text()\n \n-      expect(text).toBe('This is the About page')\n+      expect(text).toBe('This is the About page foo')\n       await browser.close()\n     })\n \n@@ -198,7 +198,7 @@ describe('static export', () => {\n         .elementByCss('#about-page p')\n         .text()\n \n-      expect(text).toBe('This is the About page')\n+      expect(text).toBe('This is the About page foo')\n       await browser.close()\n     })\n \n@@ -396,7 +396,7 @@ describe('static export', () => {\n \n     it('should render the about page', async () => {\n       const html = await renderViaHTTP(port, '/about')\n-      expect(html).toMatch(/This is the About page/)\n+      expect(html).toMatch(/This is the About page foobar/)\n     })\n \n     it('should render links correctly', async () => {\n@@ -456,7 +456,7 @@ describe('static export', () => {\n     it('Should serve public files', async () => {\n       const html = await renderViaHTTP(port, '/about')\n       const data = await renderViaHTTP(port, '/about/data.txt')\n-      expect(html).toMatch(/This is the About page/)\n+      expect(html).toMatch(/This is the About page foobar/)\n       expect(data).toBe('data')\n     })\n "
        },
        {
            "sha": "65a64af92c9c8354f9efe71640636ca4e41b0700",
            "filename": "test/production/export/next.config.js",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fexport%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fexport%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fexport%2Fnext.config.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -2,6 +2,12 @@ module.exports = (phase) => {\n   return {\n     output: 'export',\n     distDir: 'out',\n+    publicRuntimeConfig: {\n+      foo: 'foo',\n+    },\n+    serverRuntimeConfig: {\n+      bar: 'bar',\n+    },\n     trailingSlash: true,\n     exportPathMap: function () {\n       return {"
        },
        {
            "sha": "409d9407ca92dabb1e07f7948c1e92b2fa4100b4",
            "filename": "test/production/export/pages/about.js",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fexport%2Fpages%2Fabout.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fexport%2Fpages%2Fabout.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fexport%2Fpages%2Fabout.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -1,12 +1,18 @@\n import Link from 'next/link'\n+import getConfig from 'next/config'\n+const { publicRuntimeConfig, serverRuntimeConfig } = getConfig()\n \n-const About = () => (\n+const About = ({ bar }) => (\n   <div id=\"about-page\">\n     <div>\n       <Link href=\"/\">Go Back</Link>\n     </div>\n-    <p>This is the About page</p>\n+    <p>{`This is the About page ${publicRuntimeConfig.foo}${bar || ''}`}</p>\n   </div>\n )\n \n+About.getInitialProps = async (ctx) => {\n+  return { bar: serverRuntimeConfig.bar }\n+}\n+\n export default About"
        },
        {
            "sha": "14a181d150bc623dcd88b567628fee477993987a",
            "filename": "test/production/next-server-nft/next-server-nft.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fnext-server-nft%2Fnext-server-nft.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fnext-server-nft%2Fnext-server-nft.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fnext-server-nft%2Fnext-server-nft.test.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -309,6 +309,7 @@ const isReact18 = parseInt(process.env.NEXT_TEST_REACT_VERSION) === 18\n          \"/node_modules/next/dist/shared/lib/is-plain-object.js\",\n          \"/node_modules/next/dist/shared/lib/is-thenable.js\",\n          \"/node_modules/next/dist/shared/lib/no-fallback-error.external.js\",\n+         \"/node_modules/next/dist/shared/lib/runtime-config.external.js\",\n          \"/node_modules/next/dist/shared/lib/server-reference-info.js\",\n          \"/node_modules/react/cjs/react.production.js\",\n          \"/node_modules/react/index.js\","
        },
        {
            "sha": "dae6b687bc25475e44940a2271f9c695b2ce9a8c",
            "filename": "test/production/pages-dir/production/fixture/pages/runtime-config.js",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Fruntime-config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Fruntime-config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Fruntime-config.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -0,0 +1,16 @@\n+import getConfig from 'next/config'\n+\n+const page = () => {\n+  const { publicRuntimeConfig, serverRuntimeConfig } = getConfig()\n+\n+  return (\n+    <>\n+      {publicRuntimeConfig && <p>found public config</p>}\n+      {serverRuntimeConfig && <p>found server config</p>}\n+    </>\n+  )\n+}\n+\n+page.getInitialProps = () => ({})\n+\n+export default page"
        },
        {
            "sha": "7746950814cab05498eca94af2c80d4bb5d48c98",
            "filename": "test/production/pages-dir/production/test/index.test.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fpages-dir%2Fproduction%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Fpages-dir%2Fproduction%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fpages-dir%2Fproduction%2Ftest%2Findex.test.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -938,6 +938,19 @@ describe('Production Usage', () => {\n       })\n     }\n \n+    it('should have default runtime values when not defined', async () => {\n+      const html = await renderViaHTTP(next.appPort, '/runtime-config')\n+      expect(html).toMatch(/found public config/)\n+      expect(html).toMatch(/found server config/)\n+    })\n+\n+    it('should not have runtimeConfig in __NEXT_DATA__', async () => {\n+      const html = await renderViaHTTP(next.appPort, '/runtime-config')\n+      const $ = cheerio.load(html)\n+      const script = $('#__NEXT_DATA__').html()\n+      expect(script).not.toMatch(/runtimeConfig/)\n+    })\n+\n     it('should add autoExport for auto pre-rendered pages', async () => {\n       for (const page of ['/about']) {\n         const html = await renderViaHTTP(next.appPort, page)"
        },
        {
            "sha": "69404ba3014e2781d0e85786240b46f21c6ef1b4",
            "filename": "test/production/typescript-basic/typechecking/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Ftypescript-basic%2Ftypechecking%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fproduction%2Ftypescript-basic%2Ftypechecking%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Ftypescript-basic%2Ftypechecking%2Findex.ts?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -4,6 +4,7 @@ import 'next/app'\n // import 'next/babel';\n import 'next/cache'\n import 'next/client'\n+import 'next/config'\n import 'next/constants'\n import 'next/document'\n import 'next/dynamic'"
        },
        {
            "sha": "9b2d949a30e02596d6a86140961fdd90bf07b361",
            "filename": "test/rspack-build-tests-manifest.json",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Frspack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Frspack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-build-tests-manifest.json?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -12397,6 +12397,16 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n+  \"test/integration/development-runtime-config/test/index.test.js\": {\n+    \"passed\": [\n+      \"should work with runtime-config in next.config.js empty runtime-config\",\n+      \"should work with runtime-config in next.config.js with runtime-config\"\n+    ],\n+    \"failed\": [],\n+    \"pending\": [],\n+    \"flakey\": [],\n+    \"runtimeError\": false\n+  },\n   \"test/integration/disable-js/test/index.test.js\": {\n     \"passed\": [\n       \"disabled runtime JS production mode should not have __NEXT_DATA__ script\",\n@@ -20975,6 +20985,7 @@\n       \"Production Usage Misc should handle already finished responses\",\n       \"Production Usage Misc should have default runtime values when not defined\",\n       \"Production Usage Misc should not add autoExport for non pre-rendered pages\",\n+      \"Production Usage Misc should not have runtimeConfig in __NEXT_DATA__\",\n       \"Production Usage Misc should reload the page on page script error\",\n       \"Production Usage Misc should reload the page on page script error with prefetch\",\n       \"Production Usage Runtime errors should call getInitialProps on _error page during a client side component error\","
        },
        {
            "sha": "d010026c46646104c7b8ffa3bcd33ec48892e3e8",
            "filename": "test/rspack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Frspack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Frspack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-dev-tests-manifest.json?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -14140,6 +14140,16 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n+  \"test/integration/development-runtime-config/test/index.test.js\": {\n+    \"passed\": [\n+      \"should work with runtime-config in next.config.js empty runtime-config\",\n+      \"should work with runtime-config in next.config.js with runtime-config\"\n+    ],\n+    \"failed\": [],\n+    \"pending\": [],\n+    \"flakey\": [],\n+    \"runtimeError\": false\n+  },\n   \"test/integration/disable-js/test/index.test.js\": {\n     \"passed\": [\n       \"disabled runtime JS development mode should have a script for each preload link\","
        },
        {
            "sha": "19d1eed4bf8154d275e4e9f365444aeda0901ce5",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -11002,6 +11002,16 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n+  \"test/integration/development-runtime-config/test/index.test.js\": {\n+    \"passed\": [\n+      \"should work with runtime-config in next.config.js empty runtime-config\",\n+      \"should work with runtime-config in next.config.js with runtime-config\"\n+    ],\n+    \"failed\": [],\n+    \"pending\": [],\n+    \"flakey\": [],\n+    \"runtimeError\": false\n+  },\n   \"test/integration/disable-js/test/index.test.js\": {\n     \"passed\": [\n       \"disabled runtime JS production mode should not have __NEXT_DATA__ script\",\n@@ -19406,6 +19416,7 @@\n       \"Production Usage Misc should handle already finished responses\",\n       \"Production Usage Misc should have default runtime values when not defined\",\n       \"Production Usage Misc should not add autoExport for non pre-rendered pages\",\n+      \"Production Usage Misc should not have runtimeConfig in __NEXT_DATA__\",\n       \"Production Usage Misc should reload the page on page script error\",\n       \"Production Usage Misc should reload the page on page script error with prefetch\",\n       \"Production Usage Runtime errors should call getInitialProps on _error page during a client side component error\","
        },
        {
            "sha": "f97e93e183f2d160edcb77756278e9f1067e2c67",
            "filename": "test/turbopack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fturbopack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/test%2Fturbopack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-dev-tests-manifest.json?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -14549,6 +14549,16 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n+  \"test/integration/development-runtime-config/test/index.test.js\": {\n+    \"passed\": [\n+      \"should work with runtime-config in next.config.js empty runtime-config\",\n+      \"should work with runtime-config in next.config.js with runtime-config\"\n+    ],\n+    \"failed\": [],\n+    \"pending\": [],\n+    \"flakey\": [],\n+    \"runtimeError\": false\n+  },\n   \"test/integration/disable-js/test/index.test.js\": {\n     \"passed\": [\n       \"disabled runtime JS development mode should have a script for each preload link\","
        },
        {
            "sha": "b1699cce82ad6e9fe23de8787619bb2ae65114d7",
            "filename": "turbopack/crates/turbopack-tracing/tests/node-file-trace/test/unit/webpack-wrapper-strs-namespaces-large/input.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/aee02f850cac7d6952be9f40e57e25c4f4099640/turbopack%2Fcrates%2Fturbopack-tracing%2Ftests%2Fnode-file-trace%2Ftest%2Funit%2Fwebpack-wrapper-strs-namespaces-large%2Finput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/aee02f850cac7d6952be9f40e57e25c4f4099640/turbopack%2Fcrates%2Fturbopack-tracing%2Ftests%2Fnode-file-trace%2Ftest%2Funit%2Fwebpack-wrapper-strs-namespaces-large%2Finput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tracing%2Ftests%2Fnode-file-trace%2Ftest%2Funit%2Fwebpack-wrapper-strs-namespaces-large%2Finput.js?ref=aee02f850cac7d6952be9f40e57e25c4f4099640",
            "patch": "@@ -2735,6 +2735,7 @@ module.exports = /******/ (function (modules) {\n       const { processEnv } = __webpack_require__('4VNc')\n       processEnv([])\n \n+      const runtimeConfig = {}\n       const { parse } = __webpack_require__('bzos')\n       const { parse: parseQs } = __webpack_require__('8xkj')\n       const { renderToHTML } = __webpack_require__('KK5V')\n@@ -2821,6 +2822,7 @@ module.exports = /******/ (function (modules) {\n           canonicalBase: '',\n           buildId: 'xXPgpxsbhoEyVP2leRiec',\n           assetPrefix: '',\n+          runtimeConfig: runtimeConfig.publicRuntimeConfig || {},\n           previewProps: {\n             previewModeId: '9e0f19a11fe1be22878bdb16da136d9e',\n             previewModeSigningKey:"
        }
    ],
    "stats": {
        "total": 489,
        "additions": 477,
        "deletions": 12
    }
}