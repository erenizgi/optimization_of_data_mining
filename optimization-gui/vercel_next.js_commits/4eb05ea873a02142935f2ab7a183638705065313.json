{
    "author": "timneutkens",
    "message": "Turbopack build: Skip test that is not relevant for Turbopack (#79376)\n\n## What?\n\nTurbopack doesn't fail in this case as it can process server-side assets\nregardless of if they're also in the client layer. That's something we\ncouldn't do with webpack.",
    "sha": "4eb05ea873a02142935f2ab7a183638705065313",
    "files": [
        {
            "sha": "7f82d5c68bb26429bd3438f2278d4ea62ba71408",
            "filename": "test/integration/invalid-document-image-import/test/index.test.js",
            "status": "modified",
            "additions": 33,
            "deletions": 30,
            "changes": 63,
            "blob_url": "https://github.com/vercel/next.js/blob/4eb05ea873a02142935f2ab7a183638705065313/test%2Fintegration%2Finvalid-document-image-import%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4eb05ea873a02142935f2ab7a183638705065313/test%2Fintegration%2Finvalid-document-image-import%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Finvalid-document-image-import%2Ftest%2Findex.test.js?ref=4eb05ea873a02142935f2ab7a183638705065313",
            "patch": "@@ -7,43 +7,46 @@ jest.setTimeout(1000 * 60 * 2)\n const appDir = join(__dirname, '../')\n const nextConfig = new File(join(appDir, 'next.config.js'))\n \n-describe('Invalid static image import in _document', () => {\n-  ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(\n-    'production mode',\n-    () => {\n-      afterAll(() => nextConfig.restore())\n+;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n+  'Invalid static image import in _document',\n+  () => {\n+    ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(\n+      'production mode',\n+      () => {\n+        afterAll(() => nextConfig.restore())\n \n-      it('Should fail to build when no next.config.js', async () => {\n-        const { code, stderr } = await nextBuild(appDir, [], {\n-          stderr: true,\n+        it('Should fail to build when no next.config.js', async () => {\n+          const { code, stderr } = await nextBuild(appDir, [], {\n+            stderr: true,\n+          })\n+          expect(code).not.toBe(0)\n+          expect(stderr).toContain('Failed to compile')\n+          expect(stderr).toMatch(\n+            /Images.*cannot.*be imported within.*pages[\\\\/]_document\\.js/\n+          )\n+          expect(stderr).toMatch(/Location:.*pages[\\\\/]_document\\.js/)\n         })\n-        expect(code).not.toBe(0)\n-        expect(stderr).toContain('Failed to compile')\n-        expect(stderr).toMatch(\n-          /Images.*cannot.*be imported within.*pages[\\\\/]_document\\.js/\n-        )\n-        expect(stderr).toMatch(/Location:.*pages[\\\\/]_document\\.js/)\n-      })\n \n-      it('Should fail to build when disableStaticImages in next.config.js', async () => {\n-        nextConfig.write(`\n+        it('Should fail to build when disableStaticImages in next.config.js', async () => {\n+          nextConfig.write(`\n       module.exports = {\n         images: {\n           disableStaticImages: true\n         }\n       }\n     `)\n-        const { code, stderr } = await nextBuild(appDir, [], {\n-          stderr: true,\n+          const { code, stderr } = await nextBuild(appDir, [], {\n+            stderr: true,\n+          })\n+          expect(code).not.toBe(0)\n+          expect(stderr).toMatch(\n+            /You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file/\n+          )\n+          expect(stderr).not.toMatch(\n+            /Images.*cannot.*be imported within.*pages[\\\\/]_document\\.js/\n+          )\n         })\n-        expect(code).not.toBe(0)\n-        expect(stderr).toMatch(\n-          /You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file/\n-        )\n-        expect(stderr).not.toMatch(\n-          /Images.*cannot.*be imported within.*pages[\\\\/]_document\\.js/\n-        )\n-      })\n-    }\n-  )\n-})\n+      }\n+    )\n+  }\n+)"
        },
        {
            "sha": "979017ffe7a468537ca9ec8c997bb21416dc38f9",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4eb05ea873a02142935f2ab7a183638705065313/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/4eb05ea873a02142935f2ab7a183638705065313/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=4eb05ea873a02142935f2ab7a183638705065313",
            "patch": "@@ -15233,11 +15233,11 @@\n   },\n   \"test/integration/invalid-document-image-import/test/index.test.js\": {\n     \"passed\": [],\n-    \"failed\": [\n+    \"failed\": [],\n+    \"pending\": [\n       \"Invalid static image import in _document production mode Should fail to build when disableStaticImages in next.config.js\",\n       \"Invalid static image import in _document production mode Should fail to build when no next.config.js\"\n     ],\n-    \"pending\": [],\n     \"flakey\": [],\n     \"runtimeError\": false\n   },"
        }
    ],
    "stats": {
        "total": 67,
        "additions": 35,
        "deletions": 32
    }
}