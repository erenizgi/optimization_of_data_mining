{
    "author": "bgw",
    "message": "chore(CI): Remove unused environment variables from `build_and_test.yml` (#78732)\n\nSee the comment added to the code.\n\nIMO: Having these environment variables duplicated with `build_reusable.yml` is at best misleading, and at worst dangerous as you could modify the wrong file.",
    "sha": "8b6a0ba7ff357aa139d07c3c300518d1bd7cdf60",
    "files": [
        {
            "sha": "8dc68c29a00e04582ed91653bc4ffeb6826fbd55",
            "filename": ".github/workflows/build_and_test.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 17,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/8b6a0ba7ff357aa139d07c3c300518d1bd7cdf60/.github%2Fworkflows%2Fbuild_and_test.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/8b6a0ba7ff357aa139d07c3c300518d1bd7cdf60/.github%2Fworkflows%2Fbuild_and_test.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_test.yml?ref=8b6a0ba7ff357aa139d07c3c300518d1bd7cdf60",
            "patch": "@@ -6,26 +6,13 @@ on:\n   pull_request:\n     types: [opened, synchronize]\n \n+# NOTE: anything in `afterBuild` inherits environment variables defined in\n+# `build_reusable.yml` (not these!) because that job executes within the context\n+# of that workflow. Environment variables are not automatically passed to\n+# reusable workflows.\n env:\n-  NAPI_CLI_VERSION: 2.14.7\n-  TURBO_VERSION: 2.3.3\n   NODE_MAINTENANCE_VERSION: 18\n   NODE_LTS_VERSION: 20\n-  # disable backtrace for test snapshots\n-  RUST_BACKTRACE: 0\n-\n-  TURBO_TEAM: 'vercel'\n-  TURBO_CACHE: 'remote:rw'\n-  NEXT_TELEMETRY_DISABLED: 1\n-  # we build a dev binary for use in CI so skip downloading\n-  # canary next-swc binaries in the monorepo\n-  NEXT_SKIP_NATIVE_POSTINSTALL: 1\n-  DATADOG_API_KEY: ${{ secrets.DATA_DOG_API_KEY }}\n-  NEXT_JUNIT_TEST_REPORT: 'true'\n-  DD_ENV: 'ci'\n-  TEST_TIMINGS_TOKEN: ${{ secrets.TEST_TIMINGS_TOKEN }}\n-  NEXT_TEST_JOB: 1\n-  NEXT_TEST_PREFER_OFFLINE: 1\n \n jobs:\n   optimize-ci:"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 4,
        "deletions": 17
    }
}