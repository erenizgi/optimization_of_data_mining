{
    "author": "ztanner",
    "message": "[dev-overlay]: fix inline docs to show correct info for given router (#76461)\n\nThe docs here differ depending on which router you're using. This wires the router type into overlay state so we can render different information in the popover.",
    "sha": "0756f552e21c09875563de4aa2faf3de8f33c6e0",
    "files": [
        {
            "sha": "a96a133fb3dd94bc91f00ab3563e724069139767",
            "filename": "packages/next/src/client/components/react-dev-overlay/app/client-entry.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fclient-entry.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fclient-entry.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fclient-entry.tsx?ref=0756f552e21c09875563de4aa2faf3de8f33c6e0",
            "patch": "@@ -42,7 +42,11 @@ export function createRootLevelDevOverlayElement(reactEl: React.ReactElement) {\n   return (\n     <FallbackLayout>\n       <AppDevOverlay\n-        state={{ ...INITIAL_OVERLAY_STATE, rootLayoutMissingTags }}\n+        state={{\n+          ...INITIAL_OVERLAY_STATE,\n+          rootLayoutMissingTags,\n+          routerType: 'app',\n+        }}\n         globalError={[GlobalError, null]}\n       >\n         {reactEl}"
        },
        {
            "sha": "ed917e71b87b361dabed52f1f5882aeab19dedb8",
            "filename": "packages/next/src/client/components/react-dev-overlay/app/hot-reloader-client.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx?ref=0756f552e21c09875563de4aa2faf3de8f33c6e0",
            "patch": "@@ -541,7 +541,7 @@ export default function HotReload({\n   children: ReactNode\n   globalError: [GlobalErrorComponent, React.ReactNode]\n }) {\n-  const [state, dispatch] = useErrorOverlayReducer()\n+  const [state, dispatch] = useErrorOverlayReducer('app')\n \n   const dispatcher = useMemo<Dispatcher>(() => {\n     return {"
        },
        {
            "sha": "46fcab5e7f5e0cc96fab24169f8b36f3783f58f2",
            "filename": "packages/next/src/client/components/react-dev-overlay/pages/hooks.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhooks.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhooks.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhooks.ts?ref=0756f552e21c09875563de4aa2faf3de8f33c6e0",
            "patch": "@@ -4,7 +4,7 @@ import { useErrorOverlayReducer } from '../shared'\n import { Router } from '../../../router'\n \n export const usePagesDevOverlay = () => {\n-  const [state, dispatch] = useErrorOverlayReducer()\n+  const [state, dispatch] = useErrorOverlayReducer('pages')\n \n   React.useEffect(() => {\n     Bus.on(dispatch)"
        },
        {
            "sha": "8b5023f8ca1c4bf0ad33a62d2e96c6c916acb6fd",
            "filename": "packages/next/src/client/components/react-dev-overlay/shared.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 3,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fshared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fshared.ts?ref=0756f552e21c09875563de4aa2faf3de8f33c6e0",
            "patch": "@@ -23,6 +23,7 @@ export interface OverlayState {\n   staticIndicator: boolean\n   disableDevIndicator: boolean\n   debugInfo: DebugInfo\n+  routerType: 'pages' | 'app'\n }\n \n export const ACTION_STATIC_INDICATOR = 'static-indicator'\n@@ -101,7 +102,7 @@ function pushErrorFilterDuplicates(\n   ]\n }\n \n-export const INITIAL_OVERLAY_STATE: OverlayState = {\n+export const INITIAL_OVERLAY_STATE: Omit<OverlayState, 'routerType'> = {\n   nextId: 1,\n   buildError: null,\n   errors: [],\n@@ -114,7 +115,16 @@ export const INITIAL_OVERLAY_STATE: OverlayState = {\n   debugInfo: { devtoolsFrontendUrl: undefined },\n }\n \n-export function useErrorOverlayReducer() {\n+function getInitialState(\n+  routerType: 'pages' | 'app'\n+): OverlayState & { routerType: 'pages' | 'app' } {\n+  return {\n+    ...INITIAL_OVERLAY_STATE,\n+    routerType,\n+  }\n+}\n+\n+export function useErrorOverlayReducer(routerType: 'pages' | 'app') {\n   return useReducer((_state: OverlayState, action: BusEvent): OverlayState => {\n     switch (action.type) {\n       case ACTION_DEBUG_INFO: {\n@@ -188,7 +198,7 @@ export function useErrorOverlayReducer() {\n         return _state\n       }\n     }\n-  }, INITIAL_OVERLAY_STATE)\n+  }, getInitialState(routerType))\n }\n \n export const REACT_REFRESH_FULL_RELOAD_FROM_ERROR ="
        },
        {
            "sha": "3ba6937a1b01924864865d545a9446ff3c627dfd",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-indicator.stories.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx?ref=0756f552e21c09875563de4aa2faf3de8f33c6e0",
            "patch": "@@ -51,6 +51,7 @@ const mockVersionInfo: VersionInfo = {\n }\n \n const state: OverlayState = {\n+  routerType: 'app',\n   nextId: 1,\n   buildError: null,\n   errors: [],"
        },
        {
            "sha": "c702b9d281eda73df1d28bf9e977ee85f2946a49",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-indicator.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx?ref=0756f552e21c09875563de4aa2faf3de8f33c6e0",
            "patch": "@@ -41,6 +41,7 @@ export function DevToolsIndicator({\n \n   return (\n     <DevToolsPopover\n+      routerType={state.routerType}\n       semver={state.versionInfo.installed}\n       issueCount={errorCount}\n       isStaticRoute={state.staticIndicator}\n@@ -70,6 +71,7 @@ interface C {\n const Context = createContext({} as C)\n \n function DevToolsPopover({\n+  routerType,\n   disabled,\n   issueCount,\n   isStaticRoute,\n@@ -79,6 +81,7 @@ function DevToolsPopover({\n   hide,\n   setIsErrorOverlayOpen,\n }: {\n+  routerType: 'pages' | 'app'\n   disabled: boolean\n   issueCount: number\n   isStaticRoute: boolean\n@@ -283,6 +286,7 @@ function DevToolsPopover({\n       {routeInfoMounted && (\n         <RouteInfo\n           ref={routeInfoRef}\n+          routerType={routerType}\n           routeType={isStaticRoute ? 'Static' : 'Dynamic'}\n           isOpen={isRouteInfoOpen}\n           setIsOpen={setIsRouteInfoOpen}"
        },
        {
            "sha": "0586da8f081ab075a8d99b1205e2298c46425ee6",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/route-info.tsx",
            "status": "modified",
            "additions": 74,
            "deletions": 32,
            "changes": 106,
            "blob_url": "https://github.com/vercel/next.js/blob/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Froute-info.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Froute-info.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Froute-info.tsx?ref=0756f552e21c09875563de4aa2faf3de8f33c6e0",
            "patch": "@@ -1,6 +1,6 @@\n import { DevToolsInfo } from './dev-tools-info'\n \n-function StaticRouteContent() {\n+function StaticRouteContent({ routerType }: { routerType: 'pages' | 'app' }) {\n   return (\n     <article className=\"dev-tools-info-article\">\n       <p className=\"dev-tools-info-paragraph\">\n@@ -14,7 +14,11 @@ function StaticRouteContent() {\n         background after{' '}\n         <a\n           className=\"dev-tools-info-link\"\n-          href=\"https://nextjs.org/docs/app/building-your-application/data-fetching/incremental-static-regeneration\"\n+          href={\n+            routerType === 'pages'\n+              ? 'https://nextjs.org/docs/pages/building-your-application/data-fetching/incremental-static-regeneration'\n+              : `https://nextjs.org/docs/app/building-your-application/data-fetching/incremental-static-regeneration`\n+          }\n           target=\"_blank\"\n           rel=\"noopener noreferrer\"\n         >\n@@ -31,7 +35,7 @@ function StaticRouteContent() {\n   )\n }\n \n-function DynamicRouteContent() {\n+function DynamicRouteContent({ routerType }: { routerType: 'pages' | 'app' }) {\n   return (\n     <article className=\"dev-tools-info-article\">\n       <p className=\"dev-tools-info-paragraph\">\n@@ -45,61 +49,99 @@ function DynamicRouteContent() {\n         to the user or has information that can only be known at request time,\n         such as cookies or the URL's search params.\n       </p>\n-      <p className=\"dev-tools-info-paragraph\">\n-        During rendering, if a{' '}\n-        <a\n-          className=\"dev-tools-info-link\"\n-          href=\"https://nextjs.org/docs/app/building-your-application/rendering/server-components#dynamic-apis\"\n-          target=\"_blank\"\n-          rel=\"noopener noreferrer\"\n-        >\n-          Dynamic API\n-        </a>{' '}\n-        or a{' '}\n-        <a\n-          className=\"dev-tools-info-link\"\n-          href=\"https://nextjs.org/docs/app/api-reference/functions/fetch\"\n-          target=\"_blank\"\n-          rel=\"noopener noreferrer\"\n-        >\n-          fetch\n-        </a>{' '}\n-        option of{' '}\n-        <code className=\"dev-tools-info-code\">{`{ cache: 'no-store' }`}</code>{' '}\n-        is discovered, Next.js will switch to dynamically rendering the whole\n-        route.\n-      </p>\n+      {routerType === 'pages' ? (\n+        <p className=\"dev-tools-info-pagraph\">\n+          Exporting the{' '}\n+          <a\n+            className=\"dev-tools-info-link\"\n+            href=\"https://nextjs.org/docs/pages/building-your-application/data-fetching/get-server-side-props\"\n+            target=\"_blank\"\n+            rel=\"noopener noreferrer\"\n+          >\n+            getServerSideProps\n+          </a>{' '}\n+          function will opt the route into dynamic rendering. This function will\n+          be called by the server on every request.\n+        </p>\n+      ) : (\n+        <p className=\"dev-tools-info-paragraph\">\n+          During rendering, if a{' '}\n+          <a\n+            className=\"dev-tools-info-link\"\n+            href=\"https://nextjs.org/docs/app/building-your-application/rendering/server-components#dynamic-apis\"\n+            target=\"_blank\"\n+            rel=\"noopener noreferrer\"\n+          >\n+            Dynamic API\n+          </a>{' '}\n+          or a{' '}\n+          <a\n+            className=\"dev-tools-info-link\"\n+            href=\"https://nextjs.org/docs/app/api-reference/functions/fetch\"\n+            target=\"_blank\"\n+            rel=\"noopener noreferrer\"\n+          >\n+            fetch\n+          </a>{' '}\n+          option of{' '}\n+          <code className=\"dev-tools-info-code\">{`{ cache: 'no-store' }`}</code>{' '}\n+          is discovered, Next.js will switch to dynamically rendering the whole\n+          route.\n+        </p>\n+      )}\n     </article>\n   )\n }\n \n+const learnMoreLink = {\n+  pages: {\n+    static:\n+      'https://nextjs.org/docs/pages/building-your-application/rendering/static-site-generation',\n+    dynamic:\n+      'https://nextjs.org/docs/pages/building-your-application/rendering/server-side-rendering',\n+  },\n+  app: {\n+    static:\n+      'https://nextjs.org/docs/app/building-your-application/rendering/server-components#static-rendering-default',\n+    dynamic:\n+      'https://nextjs.org/docs/app/building-your-application/rendering/server-components#dynamic-rendering',\n+  },\n+}\n+\n export function RouteInfo({\n   routeType,\n+  routerType,\n   isOpen,\n   setIsOpen,\n   setPreviousOpen,\n   ...props\n }: {\n   routeType: 'Static' | 'Dynamic'\n+  routerType: 'pages' | 'app'\n   isOpen: boolean\n   setIsOpen: (isOpen: boolean) => void\n   setPreviousOpen: (isOpen: boolean) => void\n   style?: React.CSSProperties\n   ref?: React.RefObject<HTMLElement | null>\n }) {\n   const isStaticRoute = routeType === 'Static'\n-  const learnMoreLink = isStaticRoute\n-    ? 'https://nextjs.org/docs/app/building-your-application/rendering/server-components#static-rendering-default'\n-    : 'https://nextjs.org/docs/app/building-your-application/rendering/server-components#dynamic-rendering'\n+\n+  const learnMore = isStaticRoute\n+    ? learnMoreLink[routerType].static\n+    : learnMoreLink[routerType].dynamic\n   return (\n     <DevToolsInfo\n       {...props}\n       title={`${routeType} Route`}\n-      learnMoreLink={learnMoreLink}\n+      learnMoreLink={learnMore}\n       setIsOpen={setIsOpen}\n       setPreviousOpen={setPreviousOpen}\n     >\n-      {isStaticRoute ? <StaticRouteContent /> : <DynamicRouteContent />}\n+      {isStaticRoute ? (\n+        <StaticRouteContent routerType={routerType} />\n+      ) : (\n+        <DynamicRouteContent routerType={routerType} />\n+      )}\n     </DevToolsInfo>\n   )\n }"
        },
        {
            "sha": "0f5884aa3a2ad2020dd9ed30c38a06724ed279b3",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/dev-overlay.stories.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fdev-overlay.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0756f552e21c09875563de4aa2faf3de8f33c6e0/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fdev-overlay.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fdev-overlay.stories.tsx?ref=0756f552e21c09875563de4aa2faf3de8f33c6e0",
            "patch": "@@ -17,6 +17,7 @@ type Story = StoryObj<typeof DevOverlay>\n \n const state: OverlayState = {\n   nextId: 0,\n+  routerType: 'app',\n   buildError: null,\n   disableDevIndicator: false,\n   errors: ["
        }
    ],
    "stats": {
        "total": 138,
        "additions": 100,
        "deletions": 38
    }
}