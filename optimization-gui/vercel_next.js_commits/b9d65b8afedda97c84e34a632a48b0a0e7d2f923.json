{
    "author": "eps1lon",
    "message": "[test] Assert on all errors in Redbox matchers (#77907)",
    "sha": "b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
    "files": [
        {
            "sha": "c65305c886d614eb3d2aba22cf53800642156401",
            "filename": "test/development/acceptance-app/ReactRefreshLogBox-builtins.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-builtins.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-builtins.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox-builtins.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -48,7 +48,6 @@ describe('ReactRefreshLogBox-builtins app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'dns'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -62,7 +61,6 @@ describe('ReactRefreshLogBox-builtins app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'dns'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -97,7 +95,6 @@ describe('ReactRefreshLogBox-builtins app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'b'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -111,7 +108,6 @@ describe('ReactRefreshLogBox-builtins app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'b'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -147,7 +143,6 @@ describe('ReactRefreshLogBox-builtins app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'b'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -161,7 +156,6 @@ describe('ReactRefreshLogBox-builtins app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'b'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -195,7 +189,6 @@ describe('ReactRefreshLogBox-builtins app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve './non-existent.css'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -209,7 +202,6 @@ describe('ReactRefreshLogBox-builtins app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve './non-existent.css'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\","
        },
        {
            "sha": "c8f67c0b366d5e4a6e6ea81095697db41fdb593e",
            "filename": "test/development/acceptance-app/ReactRefreshLogBox.test.ts",
            "status": "modified",
            "additions": 80,
            "deletions": 74,
            "changes": 154,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -90,7 +90,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: no\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -105,27 +104,48 @@ describe('ReactRefreshLogBox app', () => {\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 2,\n-         \"description\": \"Error: no\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"index.js (3:7) @ eval\n+       [\n+         {\n+           \"description\": \"Error: no\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"index.js (3:7) @ eval\n        > 3 | throw new Error('no')\n            |       ^\",\n-         \"stack\": [\n-           \"eval index.js (3:7)\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"eval ./app/page.js\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-         ],\n-       }\n+           \"stack\": [\n+             \"eval index.js (3:7)\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"eval ./app/page.js\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+           ],\n+         },\n+         {\n+           \"description\": \"Error: no\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"index.js (3:7) @ eval\n+       > 3 | throw new Error('no')\n+           |       ^\",\n+           \"stack\": [\n+             \"eval index.js (3:7)\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"eval ./app/page.js\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+           ],\n+         },\n+       ]\n       `)\n     }\n   })\n@@ -252,7 +272,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -266,7 +285,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Unexpected token. Did you mean \\`{'}'}\\` or \\`&rbrace;\\`?\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -350,7 +368,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: \",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -410,7 +427,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing css source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -424,7 +440,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Syntax error: <FIXME-project-root>/index.module.css Unknown word\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -444,7 +459,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing css source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -457,7 +471,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Syntax error: Selector \"button\" is not pure (pure selectors must contain at least one local class or id)\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -499,7 +512,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayCollapsedRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: end https://nextjs.org\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -519,7 +531,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayCollapsedRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: end https://nextjs.org\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -584,7 +595,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: https://nextjs.org start\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -604,7 +614,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: https://nextjs.org start\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -668,7 +677,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: middle https://nextjs.org end\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -688,7 +696,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: middle https://nextjs.org end\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -752,7 +759,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: multiple https://nextjs.org links http://example.com\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -772,7 +778,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: multiple https://nextjs.org links http://example.com\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -946,7 +951,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: test\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -963,7 +967,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: test\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1049,7 +1052,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Component error\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1065,7 +1067,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Component error\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1103,7 +1104,6 @@ describe('ReactRefreshLogBox app', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Client error\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -1135,7 +1135,6 @@ describe('ReactRefreshLogBox app', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Server error\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\",\n@@ -1175,7 +1174,6 @@ describe('ReactRefreshLogBox app', () => {\n       // TODO(veil): investigate the column number is off by 1 between turbo and webpack\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: This is an error from an anonymous function\",\n          \"environmentLabel\": \"Server\",\n          \"label\": \"Runtime Error\",\n@@ -1191,7 +1189,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: This is an error from an anonymous function\",\n          \"environmentLabel\": \"Server\",\n          \"label\": \"Runtime Error\",\n@@ -1226,7 +1223,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"TypeError: Invalid URL\",\n          \"environmentLabel\": \"Server\",\n          \"label\": \"Runtime Error\",\n@@ -1241,7 +1237,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"TypeError: Invalid URL\",\n          \"environmentLabel\": \"Server\",\n          \"label\": \"Runtime Error\",\n@@ -1276,7 +1271,6 @@ describe('ReactRefreshLogBox app', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Server component error\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\",\n@@ -1316,7 +1310,6 @@ describe('ReactRefreshLogBox app', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Server component error!\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\",\n@@ -1357,7 +1350,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'non-existing-module'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -1371,7 +1363,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'non-existing-module'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -1414,7 +1405,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve './boom.css'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -1428,7 +1418,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve './boom.css'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -1458,7 +1447,6 @@ describe('ReactRefreshLogBox app', () => {\n       } else {\n         await expect({ browser, next }).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: module error\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -1519,7 +1507,6 @@ export default function Home() {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: server action was here\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\",\n@@ -1568,7 +1555,6 @@ export default function Home() {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: server action was here\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\",\n@@ -1613,7 +1599,6 @@ export default function Home() {\n       // FIXME: display the sourcemapped stack frames\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: utils error\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1629,27 +1614,48 @@ export default function Home() {\n     } else {\n       // FIXME: Webpack stack frames are not source mapped\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 2,\n-         \"description\": \"Error: utils error\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"app/utils.ts (1:7) @ eval\n+       [\n+         {\n+           \"description\": \"Error: utils error\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"app/utils.ts (1:7) @ eval\n        > 1 | throw new Error('utils error')\n            |       ^\",\n-         \"stack\": [\n-           \"eval app/utils.ts (1:7)\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"eval ./app/page.js\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-           \"<FIXME-next-dist-dir>\",\n-         ],\n-       }\n+           \"stack\": [\n+             \"eval app/utils.ts (1:7)\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"eval ./app/page.js\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+           ],\n+         },\n+         {\n+           \"description\": \"Error: utils error\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"app/utils.ts (1:7) @ eval\n+       > 1 | throw new Error('utils error')\n+           |       ^\",\n+           \"stack\": [\n+             \"eval app/utils.ts (1:7)\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"eval ./app/page.js\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+             \"<FIXME-next-dist-dir>\",\n+           ],\n+         },\n+       ]\n       `)\n     }\n   })"
        },
        {
            "sha": "d151c95c6a5781dc0eee94b0bb64b9d0b2a8749a",
            "filename": "test/development/acceptance-app/ReactRefreshLogBoxMisc.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBoxMisc.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBoxMisc.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBoxMisc.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -34,7 +34,6 @@ describe('ReactRefreshLogBox app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Ecmascript file had an error\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -48,7 +47,6 @@ describe('ReactRefreshLogBox app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x \"getStaticProps\" is not supported in app/. Read more: https://nextjs.org/docs/app/building-your-application/data-fetching\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\","
        },
        {
            "sha": "e0fd4be0bae59be74ba74b31a326423676952bcf",
            "filename": "test/development/acceptance-app/error-recovery.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 26,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -43,7 +43,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -57,7 +56,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Unexpected eof\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -117,7 +115,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -131,7 +128,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '}', got '<eof>'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -183,7 +179,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -197,7 +192,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '}', got '<eof>'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -269,7 +263,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayCollapsedRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: oops\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -290,7 +283,6 @@ describe('Error recovery app', () => {\n       // TODO(veil): Location of Page should be app/page.js\n       await expect(browser).toDisplayCollapsedRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: oops\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -385,7 +377,6 @@ describe('Error recovery app', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: oops\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\",\n@@ -461,7 +452,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: oops\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -478,7 +468,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: oops\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -550,7 +539,6 @@ describe('Error recovery app', () => {\n     await browser.eval('window.triggerError()')\n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: no 1\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -584,7 +572,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -598,7 +585,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '}', got '<eof>'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -623,7 +609,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -637,7 +622,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '}', got '<eof>'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -705,7 +689,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: React is not defined\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -722,7 +705,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: React is not defined\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -795,7 +777,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -809,7 +790,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '{', got 'return'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -853,7 +833,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -867,7 +846,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '{', got 'throw'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -912,7 +890,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: nooo\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -928,7 +905,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: nooo\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -954,7 +930,6 @@ describe('Error recovery app', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -968,7 +943,6 @@ describe('Error recovery app', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '}', got '<eof>'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\","
        },
        {
            "sha": "15188c55875ffaaf8caa7010fa664b5131a5e225",
            "filename": "test/development/acceptance-app/rsc-runtime-errors.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2Frsc-runtime-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2Frsc-runtime-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Frsc-runtime-errors.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -23,7 +23,6 @@ describe('Error overlay - RSC runtime errors', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"TypeError: useState only works in Client Components. Add the \"use client\" directive at the top of the file to use it. Read more: https://nextjs.org/docs/messages/react-client-hook-in-server-component\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\",\n@@ -56,7 +55,6 @@ describe('Error overlay - RSC runtime errors', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: \\`cookies\\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -71,7 +69,6 @@ describe('Error overlay - RSC runtime errors', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: \\`cookies\\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -100,7 +97,6 @@ describe('Error overlay - RSC runtime errors', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"ReferenceError: alert is not defined\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\","
        },
        {
            "sha": "649a9a77ef197650d68fff20566b23f25e2e31c4",
            "filename": "test/development/acceptance-app/undefined-default-export.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2Fundefined-default-export.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance-app%2Fundefined-default-export.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fundefined-default-export.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -20,7 +20,6 @@ describe('Undefined default export', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: The default export is not a React Component in \"/specific-path/server/page\"\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -46,7 +45,6 @@ describe('Undefined default export', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: The default export is not a React Component in \"/specific-path/server/layout\"\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -75,7 +73,6 @@ describe('Undefined default export', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: The default export is not a React Component in \"/will-not-found/not-found\"\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -97,7 +94,6 @@ describe('Undefined default export', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: The default export is not a React Component in \"/page\"\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -122,7 +118,6 @@ describe('Undefined default export', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: The default export is not a React Component in \"/server-with-errors/page-export-initial-error/page\"\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\","
        },
        {
            "sha": "3263eca24496d35b73805c5f405dc57d69c1457d",
            "filename": "test/development/acceptance/ReactRefreshLogBox-app-doc.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-app-doc.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-app-doc.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-app-doc.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -19,7 +19,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n     const { browser, session } = sandbox\n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: The default export is not a React Component in page: \"/_app\"\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -52,7 +51,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: The default export is not a React Component in page: \"/_document\"\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -111,7 +109,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -125,7 +122,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n     } else if (isRspack) {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"  × Module build failed:\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -158,7 +154,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expression expected\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -235,7 +230,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -249,7 +243,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n     } else if (isRspack) {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"  × Module build failed:\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -275,7 +268,6 @@ describe('ReactRefreshLogBox _app _document', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Unexpected token \\`{\\`. Expected identifier, string literal, numeric literal or [ for the computed key\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\","
        },
        {
            "sha": "9332561f36ec753b02459f0f4551f40ca09759de",
            "filename": "test/development/acceptance/ReactRefreshLogBox-builtins.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-builtins.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-builtins.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox-builtins.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -47,7 +47,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'dns'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -61,7 +60,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'dns'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -97,7 +95,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'b'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -111,7 +108,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'b'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -147,7 +143,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'b'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -161,7 +156,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve 'b'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -204,7 +198,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve './non-existent.css'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -218,7 +211,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Module not found: Can't resolve './non-existent.css'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\","
        },
        {
            "sha": "33c7477e540c8969dbce6335732facdf8bcc9362",
            "filename": "test/development/acceptance/ReactRefreshLogBox.test.ts",
            "status": "modified",
            "additions": 114,
            "deletions": 82,
            "changes": 196,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -46,7 +46,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: idk\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -63,7 +62,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: idk\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -124,7 +122,6 @@ describe('ReactRefreshLogBox', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: no\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -142,7 +139,6 @@ describe('ReactRefreshLogBox', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: no\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -171,7 +167,6 @@ describe('ReactRefreshLogBox', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: no\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -189,7 +184,6 @@ describe('ReactRefreshLogBox', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: no\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -275,26 +269,40 @@ describe('ReactRefreshLogBox', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 2,\n-         \"description\": \"Error: no\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"FunctionDefault.js (1:51) @ FunctionDefault\n+       [\n+         {\n+           \"description\": \"Error: no\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"FunctionDefault.js (1:51) @ FunctionDefault\n        > 1 | export default function FunctionDefault() { throw new Error('no'); }\n            |                                                   ^\",\n-         \"stack\": [\n-           \"FunctionDefault FunctionDefault.js (1:51)\",\n-           \"Set.forEach <anonymous> (0:0)\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-         ],\n-       }\n+           \"stack\": [\n+             \"FunctionDefault FunctionDefault.js (1:51)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+         {\n+           \"description\": \"Error: no\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"FunctionDefault.js (1:51) @ FunctionDefault\n+       > 1 | export default function FunctionDefault() { throw new Error('no'); }\n+           |                                                   ^\",\n+           \"stack\": [\n+             \"FunctionDefault FunctionDefault.js (1:51)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: no\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -370,7 +378,6 @@ describe('ReactRefreshLogBox', () => {\n     if (process.env.IS_TURBOPACK_TEST) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -384,7 +391,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Unexpected token. Did you mean \\`{'}'}\\` or \\`&rbrace;\\`?\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -464,26 +470,40 @@ describe('ReactRefreshLogBox', () => {\n     // TODO(veil): Don't bail in Turbopack for sources outside of the project (https://linear.app/vercel/issue/NDX-944)\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 2,\n-         \"description\": \"Error: \",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"Child.js (4:11) @ ClickCount.render\n+       [\n+         {\n+           \"description\": \"Error: \",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"Child.js (4:11) @ ClickCount.render\n        > 4 |     throw new Error()\n            |           ^\",\n-         \"stack\": [\n-           \"ClickCount.render Child.js (4:11)\",\n-           \"Set.forEach <anonymous> (0:0)\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-         ],\n-       }\n+           \"stack\": [\n+             \"ClickCount.render Child.js (4:11)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+         {\n+           \"description\": \"Error: \",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"Child.js (4:11) @ ClickCount.render\n+       > 4 |     throw new Error()\n+           |           ^\",\n+           \"stack\": [\n+             \"ClickCount.render Child.js (4:11)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: \",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -545,7 +565,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing css source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -559,7 +578,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Syntax error: <FIXME-project-root>/index.module.css Unknown word\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -579,7 +597,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing css source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -592,7 +609,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Syntax error: Selector \"button\" is not pure (pure selectors must contain at least one local class or id)\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -634,7 +650,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: end https://nextjs.org\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -651,7 +666,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: end https://nextjs.org\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -691,7 +705,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: https://nextjs.org start\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -708,7 +721,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: https://nextjs.org start\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -748,7 +760,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: middle https://nextjs.org end\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -765,7 +776,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: middle https://nextjs.org end\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -805,7 +815,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: multiple https://nextjs.org links http://example.com\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -822,7 +831,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: multiple https://nextjs.org links http://example.com\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -862,7 +870,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: multiple https://nextjs.org links (http://example.com)\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -879,7 +886,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: multiple https://nextjs.org links (http://example.com)\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -915,7 +921,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: {\"a\":1,\"b\":\"x\"}\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -926,7 +931,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: {\"a\":1,\"b\":\"x\"}\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -965,7 +969,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: class Hello {\n        }\",\n          \"environmentLabel\": null,\n@@ -977,7 +980,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: class Hello {\n        }\",\n          \"environmentLabel\": null,\n@@ -1015,7 +1017,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: string error\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1026,7 +1027,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: string error\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1063,7 +1063,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: A null error was thrown, see here for more info: https://nextjs.org/docs/messages/threw-undefined\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1074,7 +1073,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: A null error was thrown, see here for more info: https://nextjs.org/docs/messages/threw-undefined\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1111,43 +1109,80 @@ describe('ReactRefreshLogBox', () => {\n           expect(await getRedboxTotalErrorCount(browser)).toBe(3)\n         })\n         await expect(browser).toDisplayRedbox(`\n-         {\n-           \"count\": 3,\n-           \"description\": \"Error: Client error\",\n-           \"environmentLabel\": null,\n-           \"label\": \"Runtime Error\",\n-           \"source\": \"pages/index.js (3:11) @ Page\n+         [\n+           {\n+             \"description\": \"Error: Client error\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": \"pages/index.js (3:11) @ Page\n          > 3 |     throw new Error('Client error')\n              |           ^\",\n-           \"stack\": [\n-             \"Page pages/index.js (3:11)\",\n-           ],\n-         }\n+             \"stack\": [\n+               \"Page pages/index.js (3:11)\",\n+             ],\n+           },\n+           {\n+             \"description\": \"Error: Client error\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": \"pages/index.js (3:11) @ Page\n+         > 3 |     throw new Error('Client error')\n+             |           ^\",\n+             \"stack\": [\n+               \"Page pages/index.js (3:11)\",\n+             ],\n+           },\n+           {\n+             \"description\": \"Error: There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering.\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": null,\n+             \"stack\": [],\n+           },\n+         ]\n         `)\n       } else {\n         // Wait for the error to reach the correct count\n         await retry(async () => {\n           expect(await getRedboxTotalErrorCount(browser)).toBe(3)\n         })\n         await expect(browser).toDisplayRedbox(`\n-         {\n-           \"count\": 3,\n-           \"description\": \"Error: Client error\",\n-           \"environmentLabel\": null,\n-           \"label\": \"Runtime Error\",\n-           \"source\": \"pages/index.js (3:11) @ Page\n+         [\n+           {\n+             \"description\": \"Error: Client error\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": \"pages/index.js (3:11) @ Page\n          > 3 |     throw new Error('Client error')\n              |           ^\",\n-           \"stack\": [\n-             \"Page pages/index.js (3:11)\",\n-           ],\n-         }\n+             \"stack\": [\n+               \"Page pages/index.js (3:11)\",\n+             ],\n+           },\n+           {\n+             \"description\": \"Error: Client error\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": \"pages/index.js (3:11) @ Page\n+         > 3 |     throw new Error('Client error')\n+             |           ^\",\n+             \"stack\": [\n+               \"Page pages/index.js (3:11)\",\n+             ],\n+           },\n+           {\n+             \"description\": \"Error: There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering.\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": null,\n+             \"stack\": [],\n+           },\n+         ]\n         `)\n       }\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Client error\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1193,7 +1228,6 @@ describe('ReactRefreshLogBox', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: anonymous error!\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1210,7 +1244,6 @@ describe('ReactRefreshLogBox', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: anonymous error!\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -1252,7 +1285,6 @@ describe('ReactRefreshLogBox', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"TypeError: Invalid URL\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\","
        },
        {
            "sha": "91b49d2620e4ea824b18a3f56dbecb74f235ebcb",
            "filename": "test/development/acceptance/ReactRefreshRegression.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2FReactRefreshRegression.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2FReactRefreshRegression.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshRegression.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -284,7 +284,6 @@ describe('ReactRefreshRegression', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: boom\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -300,7 +299,6 @@ describe('ReactRefreshRegression', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: boom\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\","
        },
        {
            "sha": "025bc6704a40cabf4ef4a9f4cb07de0e08b9770d",
            "filename": "test/development/acceptance/error-recovery.test.ts",
            "status": "modified",
            "additions": 84,
            "deletions": 61,
            "changes": 145,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -45,7 +45,6 @@ describe('pages/ error recovery', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -59,7 +58,6 @@ describe('pages/ error recovery', () => {\n     } else if (process.env.NEXT_RSPACK) {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"  × Module build failed:\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -82,7 +80,6 @@ describe('pages/ error recovery', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Unexpected eof\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -162,7 +159,6 @@ describe('pages/ error recovery', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: oops\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -254,26 +250,40 @@ describe('pages/ error recovery', () => {\n     // Somehow we end up with two in React 18 due to React's attempt to recover from this error.\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 2,\n-         \"description\": \"Error: oops\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"child.js (3:9) @ Child\n+       [\n+         {\n+           \"description\": \"Error: oops\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"child.js (3:9) @ Child\n        > 3 |   throw new Error('oops')\n            |         ^\",\n-         \"stack\": [\n-           \"Child child.js (3:9)\",\n-           \"Set.forEach <anonymous> (0:0)\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-         ],\n-       }\n+           \"stack\": [\n+             \"Child child.js (3:9)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+         {\n+           \"description\": \"Error: oops\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"child.js (3:9) @ Child\n+       > 3 |   throw new Error('oops')\n+           |         ^\",\n+           \"stack\": [\n+             \"Child child.js (3:9)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: oops\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -349,7 +359,6 @@ describe('pages/ error recovery', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -363,7 +372,6 @@ describe('pages/ error recovery', () => {\n     } else if (process.env.NEXT_RSPACK) {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"  × Module build failed:\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -392,7 +400,6 @@ describe('pages/ error recovery', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '{', got 'return'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -437,7 +444,6 @@ describe('pages/ error recovery', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -451,7 +457,6 @@ describe('pages/ error recovery', () => {\n     } else if (process.env.NEXT_RSPACK) {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"  × Module build failed:\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -481,7 +486,6 @@ describe('pages/ error recovery', () => {\n     } else {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '{', got 'throw'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -534,27 +538,41 @@ describe('pages/ error recovery', () => {\n     // Somehow we end up with two in React 18 due to React's attempt to recover from this error.\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 2,\n-         \"description\": \"Error: nooo\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"index.js (5:11) @ ClassDefault.render\n+       [\n+         {\n+           \"description\": \"Error: nooo\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"index.js (5:11) @ ClassDefault.render\n        > 5 |     throw new Error('nooo');\n            |           ^\",\n-         \"stack\": [\n-           \"ClassDefault.render index.js (5:11)\",\n-           \"Set.forEach <anonymous> (0:0)\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-         ],\n-       }\n+           \"stack\": [\n+             \"ClassDefault.render index.js (5:11)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+         {\n+           \"description\": \"Error: nooo\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"index.js (5:11) @ ClassDefault.render\n+       > 5 |     throw new Error('nooo');\n+           |           ^\",\n+           \"stack\": [\n+             \"ClassDefault.render index.js (5:11)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+       ]\n       `)\n     } else {\n       if (process.env.NEXT_RSPACK) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: nooo\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -569,7 +587,6 @@ describe('pages/ error recovery', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: nooo\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -637,26 +654,40 @@ describe('pages/ error recovery', () => {\n     // Somehow we end up with two in React 18 due to React's attempt to recover from this error.\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 2,\n-         \"description\": \"ReferenceError: React is not defined\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"Foo.js (3:3) @ Foo\n+       [\n+         {\n+           \"description\": \"ReferenceError: React is not defined\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"Foo.js (3:3) @ Foo\n        > 3 |   return React.createElement('h1', null, 'Foo');\n            |   ^\",\n-         \"stack\": [\n-           \"Foo Foo.js (3:3)\",\n-           \"Set.forEach <anonymous> (0:0)\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-           \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n-         ],\n-       }\n+           \"stack\": [\n+             \"Foo Foo.js (3:3)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+         {\n+           \"description\": \"ReferenceError: React is not defined\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"Foo.js (3:3) @ Foo\n+       > 3 |   return React.createElement('h1', null, 'Foo');\n+           |   ^\",\n+           \"stack\": [\n+             \"Foo Foo.js (3:3)\",\n+             \"Set.forEach <anonymous> (0:0)\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+             \"${isTurbopack ? '<FIXME-file-protocol>' : '<FIXME-next-dist-dir>'}\",\n+           ],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"ReferenceError: React is not defined\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -724,7 +755,6 @@ describe('pages/ error recovery', () => {\n     if (process.env.NEXT_RSPACK) {\n       await expect(browser).toDisplayRedbox(`\n             {\n-              \"count\": 1,\n               \"description\": \"Error: no 1\",\n               \"environmentLabel\": null,\n               \"label\": \"Runtime Error\",\n@@ -739,7 +769,6 @@ describe('pages/ error recovery', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: no 1\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -773,7 +802,6 @@ describe('pages/ error recovery', () => {\n \n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -787,7 +815,6 @@ describe('pages/ error recovery', () => {\n     } else if (process.env.NEXT_RSPACK) {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"  × Module build failed:\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -814,7 +841,6 @@ describe('pages/ error recovery', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '}', got '<eof>'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -844,7 +870,6 @@ describe('pages/ error recovery', () => {\n       // TODO: Remove this branching once import traces are implemented in Turbopack\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Parsing ecmascript source code failed\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -858,7 +883,6 @@ describe('pages/ error recovery', () => {\n     } else if (process.env.NEXT_RSPACK) {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"  × Module build failed:\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n@@ -885,7 +909,6 @@ describe('pages/ error recovery', () => {\n     } else {\n       await expect({ browser, next }).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Expected '}', got '<eof>'\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\","
        },
        {
            "sha": "adda7fb86e4cf69223d6d28b41b1904d010461ff",
            "filename": "test/development/acceptance/hydration-error.test.ts",
            "status": "modified",
            "additions": 344,
            "deletions": 120,
            "changes": 464,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -81,19 +81,32 @@ describe('Error overlay for hydration errors in Pages router', () => {\n     // Pages Router uses React version without Owner Stacks hence the empty `stack`\n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Mismatch>\n+       [\n+         {\n+           \"componentStack\": \"<Mismatch>\n            <div>\n              <main>\n        +       \"server\"\n        -       \"client\"\",\n-         \"count\": 2,\n-         \"description\": \"Text content did not match. Server: \"server\" Client: \"client\"\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Text content did not match. Server: \"server\" Client: \"client\"\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+           <div>\n+             <main>\n+       +       \"server\"\n+       -       \"client\"\",\n+           \"description\": \"Text content did not match. Server: \"server\" Client: \"client\"\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -112,7 +125,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        -                     server\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -172,17 +184,38 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Mismatch>\n+       [\n+         {\n+           \"componentStack\": \"<Mismatch>\n        >   <div>\n        >     <main>\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching <main> in <div>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching <main> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+       >   <div>\n+       >     <main>\",\n+           \"description\": \"Expected server HTML to contain a matching <main> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+       >   <div>\n+       >     <main>\",\n+           \"description\": \"Expected server HTML to contain a matching <main> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -199,7 +232,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        +                   <main className=\"only\">\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -244,18 +276,41 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Mismatch>\n+       [\n+         {\n+           \"componentStack\": \"<Mismatch>\n            <div>\n        >     <div>\n        >       \"second\"\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching text node for \"second\" in <div>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching text node for \"second\" in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+           <div>\n+       >     <div>\n+       >       \"second\"\",\n+           \"description\": \"Expected server HTML to contain a matching text node for \"second\" in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+           <div>\n+       >     <div>\n+       >       \"second\"\",\n+           \"description\": \"Expected server HTML to contain a matching text node for \"second\" in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -275,7 +330,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n                            ...\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -314,16 +368,26 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Mismatch>\n+       [\n+         {\n+           \"componentStack\": \"<Mismatch>\n        >   <div>\",\n-         \"count\": 2,\n-         \"description\": \"Did not expect server HTML to contain a <main> in <div>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Did not expect server HTML to contain a <main> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+       >   <div>\",\n+           \"description\": \"Did not expect server HTML to contain a <main> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -341,7 +405,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        -                   <main className=\"only\">\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -376,18 +439,30 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Mismatch>\n+       [\n+         {\n+           \"componentStack\": \"<Mismatch>\n            <div>\n        >     <div>\n        >       \"only\"\",\n-         \"count\": 2,\n-         \"description\": \"Did not expect server HTML to contain the text node \"only\" in <div>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Did not expect server HTML to contain the text node \"only\" in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+           <div>\n+       >     <div>\n+       >       \"only\"\",\n+           \"description\": \"Did not expect server HTML to contain the text node \"only\" in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -405,7 +480,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        -                   only\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -454,16 +528,35 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Page>\n+       [\n+         {\n+           \"componentStack\": \"<Page>\n        >   <table>\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching <table> in <div>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching <table> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+       >   <table>\",\n+           \"description\": \"Expected server HTML to contain a matching <table> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+       >   <table>\",\n+           \"description\": \"Expected server HTML to contain a matching <table> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -481,7 +574,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        -                 test\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -524,16 +616,35 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Page>\n+       [\n+         {\n+           \"componentStack\": \"<Page>\n        >   <table>\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching <table> in <div>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching <table> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+       >   <table>\",\n+           \"description\": \"Expected server HTML to contain a matching <table> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+       >   <table>\",\n+           \"description\": \"Expected server HTML to contain a matching <table> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -551,7 +662,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        -                 {\" 123\"}\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -599,18 +709,41 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Mismatch>\n+       [\n+         {\n+           \"componentStack\": \"<Mismatch>\n        >   <div>\n              <Suspense>\n        >       <main>\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching <main> in <div>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching <main> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+       >   <div>\n+             <Suspense>\n+       >       <main>\",\n+           \"description\": \"Expected server HTML to contain a matching <main> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Mismatch>\n+       >   <div>\n+             <Suspense>\n+       >       <main>\",\n+           \"description\": \"Expected server HTML to contain a matching <main> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -629,7 +762,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n                          ...\n                  ...\n              ...\",\n-         \"count\": 1,\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -704,17 +836,38 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Page>\n+       [\n+         {\n+           \"componentStack\": \"<Page>\n        >   <p>\n        >     <p>\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching <p> in <p>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching <p> in <p>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+       >   <p>\n+       >     <p>\",\n+           \"description\": \"Expected server HTML to contain a matching <p> in <p>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+       >   <p>\n+       >     <p>\",\n+           \"description\": \"Expected server HTML to contain a matching <p> in <p>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -732,7 +885,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        >                   <p>\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n        This will cause a hydration error.\",\n          \"environmentLabel\": null,\n@@ -779,19 +931,44 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Page>\n+       [\n+         {\n+           \"componentStack\": \"<Page>\n            <div>\n              <div>\n        >       <p>\n        >         <div>\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching <div> in <p>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching <div> in <p>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+           <div>\n+             <div>\n+       >       <p>\n+       >         <div>\",\n+           \"description\": \"Expected server HTML to contain a matching <div> in <p>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+           <div>\n+             <div>\n+       >       <p>\n+       >         <div>\",\n+           \"description\": \"Expected server HTML to contain a matching <div> in <p>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -809,7 +986,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        >                     <div>\n                    ...\n                ...\",\n-         \"count\": 1,\n          \"description\": \"In HTML, <div> cannot be a descendant of <p>.\n        This will cause a hydration error.\",\n          \"environmentLabel\": null,\n@@ -848,17 +1024,38 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Page>\n+       [\n+         {\n+           \"componentStack\": \"<Page>\n        >   <div>\n        >     <tr>\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching <tr> in <div>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching <tr> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+       >   <div>\n+       >     <tr>\",\n+           \"description\": \"Expected server HTML to contain a matching <tr> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+       >   <div>\n+       >     <tr>\",\n+           \"description\": \"Expected server HTML to contain a matching <tr> in <div>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -876,7 +1073,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        >                   <tr>\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"In HTML, <tr> cannot be a child of <div>.\n        This will cause a hydration error.\",\n          \"environmentLabel\": null,\n@@ -917,21 +1113,50 @@ describe('Error overlay for hydration errors in Pages router', () => {\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"componentStack\": \"<Page>\n+       [\n+         {\n+           \"componentStack\": \"<Page>\n            <p>\n              <span>\n                <span>\n                  <span>\n        >           <span>\n        >             <p>\",\n-         \"count\": 3,\n-         \"description\": \"Expected server HTML to contain a matching <p> in <span>.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": null,\n-         \"stack\": [],\n-       }\n+           \"description\": \"Expected server HTML to contain a matching <p> in <span>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+           <p>\n+             <span>\n+               <span>\n+                 <span>\n+       >           <span>\n+       >             <p>\",\n+           \"description\": \"Expected server HTML to contain a matching <p> in <span>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+         {\n+           \"componentStack\": \"<Page>\n+           <p>\n+             <span>\n+               <span>\n+                 <span>\n+       >           <span>\n+       >             <p>\",\n+           \"description\": \"Expected server HTML to contain a matching <p> in <span>.\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": null,\n+           \"stack\": [],\n+         },\n+       ]\n       `)\n     } else {\n       await expect(browser).toDisplayRedbox(`\n@@ -953,7 +1178,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n        >                           <p>\n                      ...\n                  ...\",\n-         \"count\": 1,\n          \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n        This will cause a hydration error.\",\n          \"environmentLabel\": null,"
        },
        {
            "sha": "868c25ee2358192b12b771126f577f20a5755cb5",
            "filename": "test/development/app-dir/capture-console-error-owner-stack/capture-console-error-owner-stack.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -12,7 +12,6 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"trigger an console <error>\",\n        \"environmentLabel\": null,\n        \"label\": \"Console Error\",\n@@ -33,7 +32,6 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"trigger an console.error in render\",\n        \"environmentLabel\": null,\n        \"label\": \"Console Error\",\n@@ -52,7 +50,6 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"trigger an console.error in render\",\n        \"environmentLabel\": null,\n        \"label\": \"Console Error\",\n@@ -71,7 +68,6 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"ssr console error:client\",\n        \"environmentLabel\": null,\n        \"label\": \"Console Error\",\n@@ -90,7 +86,6 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: page error\",\n        \"environmentLabel\": null,\n        \"label\": \"Console Error\",\n@@ -109,7 +104,6 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: boom\",\n          \"environmentLabel\": \"Server\",\n          \"label\": \"Console Error\","
        },
        {
            "sha": "80e9a98bd6f3d76169548cd4c4af06afa5c014d6",
            "filename": "test/development/app-dir/dynamic-error-trace/index.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fdynamic-error-trace%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fdynamic-error-trace%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdynamic-error-trace%2Findex.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -13,7 +13,6 @@ describe('app dir - dynamic error trace', () => {\n     // TODO(veil): Where is the stackframe for app/page.js?\n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Route / with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`headers\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Runtime Error\","
        },
        {
            "sha": "7494a7aff9be5b370216258ad73a918524dd2829",
            "filename": "test/development/app-dir/dynamic-io-dev-errors/dynamic-io-dev-errors.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -14,7 +14,6 @@ describe('Dynamic IO Dev Errors', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Route \"/error\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n          \"environmentLabel\": \"Server\",\n          \"label\": \"Console Error\",\n@@ -41,7 +40,6 @@ describe('Dynamic IO Dev Errors', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Route \"/error\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n          \"environmentLabel\": \"Server\",\n          \"label\": \"Console Error\",\n@@ -102,7 +100,6 @@ describe('Dynamic IO Dev Errors', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Route \"/no-accessed-data\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense\",\n          \"environmentLabel\": \"Server\",\n          \"label\": \"Console Error\",\n@@ -141,7 +138,6 @@ describe('Dynamic IO Dev Errors', () => {\n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Ecmascript file had an error\",\n            \"environmentLabel\": null,\n            \"label\": \"Build Error\",\n@@ -155,7 +151,6 @@ describe('Dynamic IO Dev Errors', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error:   x Route segment config \"revalidate\" is not compatible with \\`nextConfig.experimental.dynamicIO\\`. Please remove it.\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\","
        },
        {
            "sha": "f3fb1b6ff6198611a52b7691373bcafea3d5f65b",
            "filename": "test/development/app-dir/error-overlay/async-client-component/async-client-component.test.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 8,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Fasync-client-component%2Fasync-client-component.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Fasync-client-component%2Fasync-client-component.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Fasync-client-component%2Fasync-client-component.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -15,14 +15,22 @@ describe('app-dir - async-client-component', () => {\n     // Ideally, it would be issued from the async Component instead but that's\n     // harder to implement.\n     await expect(browser).toDisplayCollapsedRedbox(`\n-     {\n-       \"count\": 2,\n-       \"description\": \"<Page> is an async Client Component. Only Server Components can be async at the moment. This error is often caused by accidentally adding \\`'use client'\\` to a module that was originally written for the server.\",\n-       \"environmentLabel\": null,\n-       \"label\": \"Console Error\",\n-       \"source\": null,\n-       \"stack\": [],\n-     }\n+     [\n+       {\n+         \"description\": \"<Page> is an async Client Component. Only Server Components can be async at the moment. This error is often caused by accidentally adding \\`'use client'\\` to a module that was originally written for the server.\",\n+         \"environmentLabel\": null,\n+         \"label\": \"Console Error\",\n+         \"source\": null,\n+         \"stack\": [],\n+       },\n+       {\n+         \"description\": \"A component was suspended by an uncached promise. Creating promises inside a Client Component or hook is not yet supported, except via a Suspense-compatible library or framework.\",\n+         \"environmentLabel\": null,\n+         \"label\": \"Console Error\",\n+         \"source\": null,\n+         \"stack\": [],\n+       },\n+     ]\n     `)\n   })\n "
        },
        {
            "sha": "336f90d05060c55ea784b5dda5ca1a022d9fa3d4",
            "filename": "test/development/app-dir/hook-function-names/hook-function-names.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fhook-function-names%2Fhook-function-names.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fhook-function-names%2Fhook-function-names.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhook-function-names%2Fhook-function-names.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -12,7 +12,6 @@ describe('hook-function-names', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Kaputt!\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -34,7 +33,6 @@ describe('hook-function-names', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: error in useEffect\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\","
        },
        {
            "sha": "003c7cde7b7cd2d993cfd64dd6cdebe9d3827974",
            "filename": "test/development/app-dir/hydration-error-count/hydration-error-count.test.ts",
            "status": "modified",
            "additions": 173,
            "deletions": 123,
            "changes": 296,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -1,17 +1,4 @@\n import { nextTestSetup } from 'e2e-utils'\n-import {\n-  hasErrorToast,\n-  getToastErrorCount,\n-  retry,\n-  openRedbox,\n-  getRedboxDescription,\n-  getRedboxComponentStack,\n-  goToNextErrorView,\n-  getRedboxDescriptionWarning,\n-  getHighlightedDiffLines,\n-  assertHasRedbox,\n-} from 'next-test-utils'\n-import { BrowserInterface } from 'next-webdriver'\n \n describe('hydration-error-count', () => {\n   const { next } = nextTestSetup({\n@@ -21,44 +8,113 @@ describe('hydration-error-count', () => {\n   it('should have correct hydration error count for bad nesting', async () => {\n     const browser = await next.browser('/bad-nesting')\n \n-    await retry(async () => {\n-      await hasErrorToast(browser)\n-      const totalErrorCount = await getToastErrorCount(browser)\n-\n-      // One hydration error and one warning\n-      expect(totalErrorCount).toBe(2)\n-    })\n+    await expect(browser).toDisplayCollapsedRedbox(`\n+     [\n+       {\n+         \"componentStack\": \"...\n+         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n+           <RenderFromTemplateContext>\n+             <ScrollAndFocusHandler segmentPath={[...]}>\n+               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                   <LoadingBoundary loading={null}>\n+                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                       <RedirectBoundary>\n+                         <RedirectErrorBoundary router={{...}}>\n+                           <InnerLayoutRouter url=\"/bad-nesting\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n+                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                               <Page params={Promise} searchParams={Promise}>\n+     >                           <p>\n+     >                             <p>\n+                             ...\",\n+         \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n+     This will cause a hydration error.\",\n+         \"environmentLabel\": null,\n+         \"label\": \"Console Error\",\n+         \"source\": \"app/bad-nesting/page.tsx (6:7) @ Page\n+     > 6 |       <p>nest</p>\n+         |       ^\",\n+         \"stack\": [\n+           \"p <anonymous> (0:0)\",\n+           \"Page app/bad-nesting/page.tsx (6:7)\",\n+         ],\n+       },\n+       {\n+         \"componentStack\": \"...\n+         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n+           <RenderFromTemplateContext>\n+             <ScrollAndFocusHandler segmentPath={[...]}>\n+               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                   <LoadingBoundary loading={null}>\n+                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                       <RedirectBoundary>\n+                         <RedirectErrorBoundary router={{...}}>\n+                           <InnerLayoutRouter url=\"/bad-nesting\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n+                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                               <Page params={Promise} searchParams={Promise}>\n+     >                           <p>\n+     >                             <p>\n+                             ...\",\n+         \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n+     This will cause a hydration error.\",\n+         \"environmentLabel\": null,\n+         \"label\": \"Runtime Error\",\n+         \"source\": \"app/bad-nesting/page.tsx (6:7) @ Page\n+     > 6 |       <p>nest</p>\n+         |       ^\",\n+         \"stack\": [\n+           \"p <anonymous> (0:0)\",\n+           \"Page app/bad-nesting/page.tsx (6:7)\",\n+         ],\n+       },\n+     ]\n+    `)\n   })\n \n   it('should have correct hydration error count for html diff', async () => {\n     const browser = await next.browser('/html-diff')\n \n-    await retry(async () => {\n-      await hasErrorToast(browser)\n-      const totalErrorCount = await getToastErrorCount(browser)\n-\n-      // One hydration error and one warning\n-      expect(totalErrorCount).toBe(1)\n-    })\n+    await expect(browser).toDisplayCollapsedRedbox(`\n+     {\n+       \"componentStack\": \"...\n+         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n+           <RenderFromTemplateContext>\n+             <ScrollAndFocusHandler segmentPath={[...]}>\n+               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                   <LoadingBoundary loading={null}>\n+                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                       <RedirectBoundary>\n+                         <RedirectErrorBoundary router={{...}}>\n+                           <InnerLayoutRouter url=\"/html-diff\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n+                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                               <Page params={Promise} searchParams={Promise}>\n+                                 <p>\n+     +                             client\n+     -                             server\n+                             ...\",\n+       \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n+       \"environmentLabel\": null,\n+       \"label\": \"Runtime Error\",\n+       \"source\": \"app/html-diff/page.tsx (4:10) @ Page\n+     > 4 |   return <p>{typeof window === 'undefined' ? 'server' : 'client'}</p>\n+         |          ^\",\n+       \"stack\": [\n+         \"p <anonymous> (0:0)\",\n+         \"Page app/html-diff/page.tsx (4:10)\",\n+       ],\n+     }\n+    `)\n   })\n \n   it('should display correct hydration info in each hydration error view', async () => {\n     const browser = await next.browser('/two-issues')\n \n-    await openRedbox(browser)\n-\n-    const firstError = await getHydrationErrorSnapshot(browser)\n-    await goToNextErrorView(browser)\n-    const secondError = await getHydrationErrorSnapshot(browser)\n-\n-    // Hydration runtime error\n-    // - contains a diff\n-    // - has notes\n-    expect(firstError).toMatchInlineSnapshot(`\n-     {\n-       \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n-     This will cause a hydration error.\",\n-       \"diff\": \"...\n+    await expect(browser).toDisplayCollapsedRedbox(`\n+     [\n+       {\n+         \"componentStack\": \"...\n          <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n            <RenderFromTemplateContext>\n              <ScrollAndFocusHandler segmentPath={[...]}>\n@@ -74,27 +130,20 @@ describe('hydration-error-count', () => {\n      >                           <p className=\"client\">\n      >                             <p>\n                              ...\",\n-       \"highlightedLines\": [\n-         [\n-           \"error\",\n-           \">\",\n-         ],\n-         [\n-           \"error\",\n-           \">\",\n+         \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n+     This will cause a hydration error.\",\n+         \"environmentLabel\": null,\n+         \"label\": \"Console Error\",\n+         \"source\": \"app/two-issues/page.tsx (10:7) @ Page\n+     > 10 |       <p>nest</p>\n+          |       ^\",\n+         \"stack\": [\n+           \"p <anonymous> (0:0)\",\n+           \"Page app/two-issues/page.tsx (10:7)\",\n          ],\n-       ],\n-       \"notes\": null,\n-     }\n-    `)\n-\n-    // Hydration console.error\n-    // - contains a diff\n-    // - no notes\n-    expect(secondError).toMatchInlineSnapshot(`\n-     {\n-       \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n-       \"diff\": \"...\n+       },\n+       {\n+         \"componentStack\": \"...\n          <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n            <RenderFromTemplateContext>\n              <ScrollAndFocusHandler segmentPath={[...]}>\n@@ -112,37 +161,28 @@ describe('hydration-error-count', () => {\n      -                             className=\"server\"\n                                  >\n                              ...\",\n-       \"highlightedLines\": [\n-         [\n-           \"add\",\n-           \"+\",\n-         ],\n-         [\n-           \"remove\",\n-           \"-\",\n+         \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n+         \"environmentLabel\": null,\n+         \"label\": \"Runtime Error\",\n+         \"source\": \"app/two-issues/page.tsx (10:7) @ Page\n+     > 10 |       <p>nest</p>\n+          |       ^\",\n+         \"stack\": [\n+           \"p <anonymous> (0:0)\",\n+           \"Page app/two-issues/page.tsx (10:7)\",\n          ],\n-       ],\n-       \"notes\": \"- A server/client branch \\`if (typeof window !== 'undefined')\\`.\n-     - Variable input such as \\`Date.now()\\` or \\`Math.random()\\` which changes each time it's called.\n-     - Date formatting in a user's locale which doesn't match the server.\n-     - External changing data without sending a snapshot of it along with the HTML.\n-     - Invalid HTML tag nesting.\n-\n-     It can also happen if the client has a browser extension installed which messes with the HTML before React loaded.\",\n-     }\n+       },\n+     ]\n     `)\n   })\n \n   it('should display runtime error separately from hydration errors', async () => {\n     const browser = await next.browser('/hydration-with-runtime-errors')\n-    await assertHasRedbox(browser)\n-    expect(await getToastErrorCount(browser)).toBe(3)\n \n-    // Move to the last hydration error\n-    await goToNextErrorView(browser)\n-    expect(browser).toDisplayRedbox(`\n-     {\n-       \"componentStack\": \"...\n+    await expect(browser).toDisplayRedbox(`\n+     [\n+       {\n+         \"componentStack\": \"...\n          <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n            <RenderFromTemplateContext>\n              <ScrollAndFocusHandler segmentPath={[...]}>\n@@ -158,49 +198,59 @@ describe('hydration-error-count', () => {\n      >                           <p>\n      >                             <p>\n                              ...\",\n-       \"count\": 3,\n-       \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n+         \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n      This will cause a hydration error.\",\n-       \"environmentLabel\": null,\n-       \"label\": \"Runtime Error\",\n-       \"source\": \"app/hydration-with-runtime-errors/page.tsx (12:14) @ Page\n+         \"environmentLabel\": null,\n+         \"label\": \"Console Error\",\n+         \"source\": \"app/hydration-with-runtime-errors/page.tsx (12:14) @ Page\n      > 12 |       sneaky <p>very sneaky</p>\n           |              ^\",\n-       \"stack\": [\n-         \"p <anonymous> (0:0)\",\n-         \"Page app/hydration-with-runtime-errors/page.tsx (12:14)\",\n-       ],\n-     }\n-    `)\n-\n-    await goToNextErrorView(browser)\n-    expect(browser).toDisplayRedbox(`\n-     {\n-       \"count\": 3,\n-       \"description\": \"Error: runtime error\",\n-       \"environmentLabel\": null,\n-       \"label\": \"Runtime Error\",\n-       \"source\": \"app/hydration-with-runtime-errors/page.tsx (7:11) @ Page.useEffect\n+         \"stack\": [\n+           \"p <anonymous> (0:0)\",\n+           \"Page app/hydration-with-runtime-errors/page.tsx (12:14)\",\n+         ],\n+       },\n+       {\n+         \"componentStack\": \"...\n+         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n+           <RenderFromTemplateContext>\n+             <ScrollAndFocusHandler segmentPath={[...]}>\n+               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                   <LoadingBoundary loading={null}>\n+                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                       <RedirectBoundary>\n+                         <RedirectErrorBoundary router={{...}}>\n+                           <InnerLayoutRouter url=\"/hydration...\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n+                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                               <Page params={Promise} searchParams={Promise}>\n+     >                           <p>\n+     >                             <p>\n+                             ...\",\n+         \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n+     This will cause a hydration error.\",\n+         \"environmentLabel\": null,\n+         \"label\": \"Runtime Error\",\n+         \"source\": \"app/hydration-with-runtime-errors/page.tsx (12:14) @ Page\n+     > 12 |       sneaky <p>very sneaky</p>\n+          |              ^\",\n+         \"stack\": [\n+           \"p <anonymous> (0:0)\",\n+           \"Page app/hydration-with-runtime-errors/page.tsx (12:14)\",\n+         ],\n+       },\n+       {\n+         \"description\": \"Error: runtime error\",\n+         \"environmentLabel\": null,\n+         \"label\": \"Runtime Error\",\n+         \"source\": \"app/hydration-with-runtime-errors/page.tsx (7:11) @ Page.useEffect\n      >  7 |     throw new Error('runtime error')\n           |           ^\",\n-       \"stack\": [\n-         \"Page.useEffect app/hydration-with-runtime-errors/page.tsx (7:11)\",\n-       ],\n-     }\n+         \"stack\": [\n+           \"Page.useEffect app/hydration-with-runtime-errors/page.tsx (7:11)\",\n+         ],\n+       },\n+     ]\n     `)\n   })\n })\n-\n-async function getHydrationErrorSnapshot(browser: BrowserInterface) {\n-  const description = await getRedboxDescription(browser)\n-  const notes = await getRedboxDescriptionWarning(browser)\n-  const diff = await getRedboxComponentStack(browser)\n-  const highlightedLines = await getHighlightedDiffLines(browser)\n-\n-  return {\n-    description,\n-    notes,\n-    diff,\n-    highlightedLines,\n-  }\n-}"
        },
        {
            "sha": "14d897fec5dd49817abf0ddb7614f4da371f736c",
            "filename": "test/development/app-dir/missing-required-html-tags/index.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -25,7 +25,6 @@ describe('app-dir - missing required html tags', () => {\n     await assertHasRedbox(browser)\n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Missing <html> and <body> tags in the root layout.\n      Read more at https://nextjs.org/docs/messages/missing-root-layout-tags\",\n        \"environmentLabel\": null,\n@@ -47,7 +46,6 @@ describe('app-dir - missing required html tags', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Missing <html> tags in the root layout.\n      Read more at https://nextjs.org/docs/messages/missing-root-layout-tags\",\n        \"environmentLabel\": null,"
        },
        {
            "sha": "67c55c1838fef3a6f5d346482d69069bc287e13a",
            "filename": "test/development/app-dir/owner-stack-invalid-element-type/owner-stack-invalid-element-type.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fowner-stack-invalid-element-type%2Fowner-stack-invalid-element-type.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fowner-stack-invalid-element-type%2Fowner-stack-invalid-element-type.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fowner-stack-invalid-element-type%2Fowner-stack-invalid-element-type.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -10,7 +10,6 @@ describe('app-dir - owner-stack-invalid-element-type', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: object. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\n \n      Check the render method of \\`BrowserOnly\\`.\",\n@@ -33,7 +32,6 @@ describe('app-dir - owner-stack-invalid-element-type', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: object. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\n \n      Check the render method of \\`Inner\\`.\",\n@@ -55,7 +53,6 @@ describe('app-dir - owner-stack-invalid-element-type', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: object. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\n \n      Check the render method of \\`Inner\\`.\","
        },
        {
            "sha": "40c0c8d872f019ad5878ca79958ff9983f43e83a",
            "filename": "test/development/app-dir/owner-stack/owner-stack.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -55,7 +55,6 @@ describe('app-dir - owner-stack', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: browser error\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -92,7 +91,6 @@ describe('app-dir - owner-stack', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: browser error\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -141,7 +139,6 @@ describe('app-dir - owner-stack', () => {\n \n     await expect(browser).toDisplayRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: ssr error\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\",\n@@ -171,7 +168,6 @@ describe('app-dir - owner-stack', () => {\n \n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: string in rejected promise\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\","
        },
        {
            "sha": "04b48d1fcea8efcc3401e2bbff7d430b2fa90b62",
            "filename": "test/development/app-dir/server-navigation-error/server-navigation-error.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fserver-navigation-error%2Fserver-navigation-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fserver-navigation-error%2Fserver-navigation-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fserver-navigation-error%2Fserver-navigation-error.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -12,7 +12,6 @@ describe('server-navigation-error', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Next.js navigation API is not allowed to be used in Pages Router.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -27,7 +26,6 @@ describe('server-navigation-error', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Next.js navigation API is not allowed to be used in Pages Router.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -48,7 +46,6 @@ describe('server-navigation-error', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Next.js navigation API is not allowed to be used in Pages Router.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -63,7 +60,6 @@ describe('server-navigation-error', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Next.js navigation API is not allowed to be used in Pages Router.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -89,7 +85,6 @@ describe('server-navigation-error', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Next.js navigation API is not allowed to be used in Middleware.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -104,7 +99,6 @@ describe('server-navigation-error', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Next.js navigation API is not allowed to be used in Middleware.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -126,7 +120,6 @@ describe('server-navigation-error', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Next.js navigation API is not allowed to be used in Middleware.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -141,7 +134,6 @@ describe('server-navigation-error', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Next.js navigation API is not allowed to be used in Middleware.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\","
        },
        {
            "sha": "0a3dfa08f410479858a5c5662860dc67d0f5cdaa",
            "filename": "test/development/app-dir/ssr-only-error/ssr-only-error.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fssr-only-error%2Fssr-only-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fapp-dir%2Fssr-only-error%2Fssr-only-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fssr-only-error%2Fssr-only-error.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -12,7 +12,6 @@ describe('ssr-only-error', () => {\n     // TODO(veil): Missing Owner Stack\n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"count\": 1,\n        \"description\": \"Error: SSR only error\",\n        \"environmentLabel\": null,\n        \"label\": \"Runtime Error\","
        },
        {
            "sha": "1d17e393536c72447a49d97c2cd8f602bb930327",
            "filename": "test/development/basic/gssp-ssr-change-reloading/test/index.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -274,7 +274,6 @@ describe('GS(S)P Server-Side Change Reloading', () => {\n \n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Additional keys were returned from \\`getStaticProps\\`. Properties intended for your component must be nested under the \\`props\\` key, e.g.:\n \n        \treturn { props: { title: 'My Title', content: '...' } }\n@@ -316,7 +315,6 @@ describe('GS(S)P Server-Side Change Reloading', () => {\n \n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: custom oops\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\","
        },
        {
            "sha": "1903e78c92bbef1039db01a066e78f95701ff8c1",
            "filename": "test/development/middleware-errors/index.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -54,7 +54,6 @@ describe('middleware - development errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: boom\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -70,7 +69,6 @@ describe('middleware - development errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: boom\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -204,7 +202,6 @@ describe('middleware - development errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: test is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -221,7 +218,6 @@ describe('middleware - development errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: test is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -289,7 +285,6 @@ describe('middleware - development errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: booooom!\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -304,7 +299,6 @@ describe('middleware - development errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: booooom!\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -432,7 +426,6 @@ describe('middleware - development errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Parsing ecmascript source code failed\",\n            \"environmentLabel\": null,\n            \"label\": \"Build Error\",\n@@ -446,7 +439,6 @@ describe('middleware - development errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error:   x Expected '{', got '}'\",\n            \"environmentLabel\": null,\n            \"label\": \"Build Error\",\n@@ -500,7 +492,6 @@ describe('middleware - development errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Parsing ecmascript source code failed\",\n            \"environmentLabel\": null,\n            \"label\": \"Build Error\",\n@@ -514,7 +505,6 @@ describe('middleware - development errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error:   x Expected '{', got '}'\",\n            \"environmentLabel\": null,\n            \"label\": \"Build Error\","
        },
        {
            "sha": "4b9c95b9000b2fd4997179c8b0cb68c95cb1a495",
            "filename": "test/development/pages-dir/client-navigation/index.test.ts",
            "status": "modified",
            "additions": 37,
            "deletions": 5,
            "changes": 42,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Findex.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -267,7 +267,6 @@ describe('Client Navigation', () => {\n       await browser.elementByCss('#empty-props').click()\n       await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: \"EmptyInitialPropsPage.getInitialProps()\" should resolve to an object. But found \"null\" instead.\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -1252,9 +1251,43 @@ describe('Client Navigation', () => {\n       await retry(async () => {\n         expect(await getRedboxTotalErrorCount(browser)).toBe(isReact18 ? 3 : 1)\n       })\n-      await expect(browser).toDisplayRedbox(`\n+      if (isReact18) {\n+        await expect(browser).toDisplayRedbox(`\n+         [\n+           {\n+             \"description\": \"Error: An Expected error occurred\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": \"pages/error-inside-browser-page.js (5:13) @ ErrorInRenderPage.render\n+         > 5 |       throw new Error('An Expected error occurred')\n+             |             ^\",\n+             \"stack\": [\n+               \"ErrorInRenderPage.render pages/error-inside-browser-page.js (5:13)\",\n+             ],\n+           },\n+           {\n+             \"description\": \"Error: An Expected error occurred\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": \"pages/error-inside-browser-page.js (5:13) @ ErrorInRenderPage.render\n+         > 5 |       throw new Error('An Expected error occurred')\n+             |             ^\",\n+             \"stack\": [\n+               \"ErrorInRenderPage.render pages/error-inside-browser-page.js (5:13)\",\n+             ],\n+           },\n+           {\n+             \"description\": \"Error: There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering.\",\n+             \"environmentLabel\": null,\n+             \"label\": \"Runtime Error\",\n+             \"source\": null,\n+             \"stack\": [],\n+           },\n+         ]\n+        `)\n+      } else {\n+        await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": ${isReact18 ? 3 : 1},\n            \"description\": \"Error: An Expected error occurred\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -1266,6 +1299,7 @@ describe('Client Navigation', () => {\n            ],\n          }\n         `)\n+      }\n       expect(pageErrors).toEqual(\n         isReact18\n           ? [\n@@ -1298,7 +1332,6 @@ describe('Client Navigation', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n            {\n-             \"count\": 1,\n              \"description\": \"Error: An Expected error occurred\",\n              \"environmentLabel\": null,\n              \"label\": \"Runtime Error\",\n@@ -1313,7 +1346,6 @@ describe('Client Navigation', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n            {\n-             \"count\": 1,\n              \"description\": \"Error: An Expected error occurred\",\n              \"environmentLabel\": null,\n              \"label\": \"Runtime Error\","
        },
        {
            "sha": "b729cdbeb94077a2a14d4369efb9e9bc0e8d27d9",
            "filename": "test/development/pages-dir/client-navigation/rendering.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Frendering.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Frendering.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Frendering.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -131,7 +131,6 @@ describe('Client Navigation rendering', () => {\n       if (isReact18 && isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Circular structure in \"getInitialProps\" result of page \"/circular-json-error\". https://nextjs.org/docs/messages/circular-structure\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -144,7 +143,6 @@ describe('Client Navigation rendering', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: Circular structure in \"getInitialProps\" result of page \"/circular-json-error\". https://nextjs.org/docs/messages/circular-structure\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -163,7 +161,6 @@ describe('Client Navigation rendering', () => {\n \n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: \"InstanceInitialPropsPage.getInitialProps()\" is defined as an instance method - visit https://nextjs.org/docs/messages/get-initial-props-as-an-instance-method for more information.\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -178,7 +175,6 @@ describe('Client Navigation rendering', () => {\n \n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: \"EmptyInitialPropsPage.getInitialProps()\" should resolve to an object. But found \"null\" instead.\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -222,7 +218,6 @@ describe('Client Navigation rendering', () => {\n \n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: The default export is not a React Component in page: \"/no-default-export\"\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -238,7 +233,6 @@ describe('Client Navigation rendering', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: This is an expected error\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -254,7 +248,6 @@ describe('Client Navigation rendering', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: This is an expected error\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -278,7 +271,6 @@ describe('Client Navigation rendering', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: aa is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -294,7 +286,6 @@ describe('Client Navigation rendering', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: aa is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -422,7 +413,6 @@ describe('Client Navigation rendering', () => {\n \n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: An undefined error was thrown, see here for more info: https://nextjs.org/docs/messages/threw-undefined\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\","
        },
        {
            "sha": "990b255c83c3bff8e065c1429e92bbd73263ff88",
            "filename": "test/e2e/app-dir/errors/index.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fe2e%2Fapp-dir%2Ferrors%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fe2e%2Fapp-dir%2Ferrors%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Ferrors%2Findex.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -176,7 +176,6 @@ describe('app-dir - errors', () => {\n       if (isNextDev) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"Error: this is a test\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -216,7 +215,6 @@ describe('app-dir - errors', () => {\n       if (isNextDev) {\n         await expect(browser).toDisplayRedbox(`\n           {\n-            \"count\": 1,\n             \"description\": \"Error: custom server error\",\n             \"environmentLabel\": \"Server\",\n             \"label\": \"Runtime Error\","
        },
        {
            "sha": "efe49a07955139548f536a66098787a90aed50cd",
            "filename": "test/e2e/app-dir/global-error/error-in-global-error/error-in-global-error.test.ts",
            "status": "modified",
            "additions": 23,
            "deletions": 12,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Ferror-in-global-error%2Ferror-in-global-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Ferror-in-global-error%2Ferror-in-global-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Ferror-in-global-error%2Ferror-in-global-error.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -15,7 +15,6 @@ describe('app dir - global-error - error-in-global-error', () => {\n       await assertHasRedbox(browser)\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: error in page\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -40,19 +39,31 @@ describe('app dir - global-error - error-in-global-error', () => {\n     if (isNextDev) {\n       await assertHasRedbox(browser)\n       await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 2,\n-         \"description\": \"Error: error in global error\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"app/global-error.js (10:11) @ InnerGlobalError\n+       [\n+         {\n+           \"description\": \"Error: error in global error\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"app/global-error.js (10:11) @ InnerGlobalError\n        > 10 |     throw new Error('error in global error')\n             |           ^\",\n-         \"stack\": [\n-           \"InnerGlobalError app/global-error.js (10:11)\",\n-           \"GlobalError app/global-error.js (26:7)\",\n-         ],\n-       }\n+           \"stack\": [\n+             \"InnerGlobalError app/global-error.js (10:11)\",\n+             \"GlobalError app/global-error.js (26:7)\",\n+           ],\n+         },\n+         {\n+           \"description\": \"Error: error in page\",\n+           \"environmentLabel\": null,\n+           \"label\": \"Runtime Error\",\n+           \"source\": \"app/page.js (7:11) @ Page.useEffect\n+       >  7 |     throw new Error('error in page')\n+            |           ^\",\n+           \"stack\": [\n+             \"Page.useEffect app/page.js (7:11)\",\n+           ],\n+         },\n+       ]\n       `)\n     }\n   })"
        },
        {
            "sha": "ed8e33cd0c88a1f8d2d3d0efac819799b8b73c21",
            "filename": "test/e2e/app-dir/server-source-maps/server-source-maps.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Fserver-source-maps.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Fserver-source-maps.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Fserver-source-maps.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -218,7 +218,6 @@ describe('app-dir - server source maps', () => {\n \n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Boom\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\","
        },
        {
            "sha": "57222f8e625280552e496772cbcae0bdc83aff84",
            "filename": "test/e2e/next-link-errors/next-link-errors.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fe2e%2Fnext-link-errors%2Fnext-link-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fe2e%2Fnext-link-errors%2Fnext-link-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnext-link-errors%2Fnext-link-errors.test.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -16,7 +16,6 @@ describe('next-link', () => {\n       // TODO(veil): https://linear.app/vercel/issue/NDX-554/hide-the-anonymous-frames-which-are-between-2-ignored-frames\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Failed prop type: The prop \\`href\\` expects a \\`string\\` or \\`object\\` in \\`<Link>\\`, but got \\`undefined\\` instead.\n        Open your browser's console to view the Component stack trace.\",\n          \"environmentLabel\": null,\n@@ -43,7 +42,6 @@ describe('next-link', () => {\n       // TODO(veil): https://linear.app/vercel/issue/NDX-554/hide-the-anonymous-frames-which-are-between-2-ignored-frames\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: No children were passed to <Link> with \\`href\\` of \\`/about\\` but one child is required https://nextjs.org/docs/messages/link-no-children\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\",\n@@ -68,7 +66,6 @@ describe('next-link', () => {\n       // TODO(veil): https://linear.app/vercel/issue/NDX-554/hide-the-anonymous-frames-which-are-between-2-ignored-frames\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"count\": 1,\n          \"description\": \"Error: Multiple children were passed to <Link> with \\`href\\` of \\`/\\` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children \n        Open your browser's console to view the Component stack trace.\",\n          \"environmentLabel\": null,"
        },
        {
            "sha": "d245c131db0cc67a328dfed9ddf45521e04978a0",
            "filename": "test/integration/server-side-dev-errors/test/index.test.js",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fintegration%2Fserver-side-dev-errors%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Fintegration%2Fserver-side-dev-errors%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fserver-side-dev-errors%2Ftest%2Findex.test.js?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -90,7 +90,6 @@ describe('server-side dev errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -105,7 +104,6 @@ describe('server-side dev errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -169,7 +167,6 @@ describe('server-side dev errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -184,7 +181,6 @@ describe('server-side dev errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -248,7 +244,6 @@ describe('server-side dev errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -263,7 +258,6 @@ describe('server-side dev errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -326,7 +320,6 @@ describe('server-side dev errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -341,7 +334,6 @@ describe('server-side dev errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -360,7 +352,6 @@ describe('server-side dev errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -375,7 +366,6 @@ describe('server-side dev errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -438,7 +428,6 @@ describe('server-side dev errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -453,7 +442,6 @@ describe('server-side dev errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -472,7 +460,6 @@ describe('server-side dev errors', () => {\n       if (isTurbopack) {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\",\n@@ -487,7 +474,6 @@ describe('server-side dev errors', () => {\n       } else {\n         await expect(browser).toDisplayRedbox(`\n          {\n-           \"count\": 1,\n            \"description\": \"ReferenceError: missingVar is not defined\",\n            \"environmentLabel\": null,\n            \"label\": \"Runtime Error\","
        },
        {
            "sha": "fd1ce1e5524c63eaa4fe2dda8a29a51e8bf5910b",
            "filename": "test/lib/add-redbox-matchers.ts",
            "status": "modified",
            "additions": 45,
            "deletions": 24,
            "changes": 69,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Flib%2Fadd-redbox-matchers.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Flib%2Fadd-redbox-matchers.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fadd-redbox-matchers.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -62,37 +62,28 @@ declare global {\n   }\n }\n \n-interface RedboxSnapshot {\n+interface ErrorSnapshot {\n   environmentLabel: string\n   label: string\n   description: string\n   componentStack?: string\n   source: string\n   stack: string[]\n-  count: number\n }\n \n-async function createRedboxSnapshot(\n+async function createErrorSnapshot(\n   browser: BrowserInterface,\n   next: NextInstance | null\n-): Promise<RedboxSnapshot> {\n-  const [\n-    label,\n-    environmentLabel,\n-    description,\n-    source,\n-    stack,\n-    componentStack,\n-    count,\n-  ] = await Promise.all([\n-    getRedboxLabel(browser),\n-    getRedboxEnvironmentLabel(browser),\n-    getRedboxDescription(browser),\n-    getRedboxSource(browser),\n-    getRedboxCallStack(browser),\n-    getRedboxComponentStack(browser),\n-    getRedboxTotalErrorCount(browser),\n-  ])\n+): Promise<ErrorSnapshot> {\n+  const [label, environmentLabel, description, source, stack, componentStack] =\n+    await Promise.all([\n+      getRedboxLabel(browser),\n+      getRedboxEnvironmentLabel(browser),\n+      getRedboxDescription(browser),\n+      getRedboxSource(browser),\n+      getRedboxCallStack(browser),\n+      getRedboxComponentStack(browser),\n+    ])\n \n   // We don't need to test the codeframe logic everywhere.\n   // Here we focus on the cursor position of the top most frame\n@@ -145,7 +136,7 @@ async function createRedboxSnapshot(\n     }\n   }\n \n-  const snapshot: RedboxSnapshot = {\n+  const snapshot: ErrorSnapshot = {\n     environmentLabel,\n     label,\n     description:\n@@ -159,8 +150,6 @@ async function createRedboxSnapshot(\n             return stackframe.replace(next.testDir, '<FIXME-project-root>')\n           })\n         : stack,\n-    // TODO(newDevOverlay): Always return `count`. Normalizing currently to avoid assertion forks.\n-    count: label === 'Build Error' && count === -1 ? 1 : count,\n   }\n \n   // Hydration diffs are only relevant to some specific errors\n@@ -172,6 +161,38 @@ async function createRedboxSnapshot(\n   return snapshot\n }\n \n+type RedboxSnapshot = ErrorSnapshot | ErrorSnapshot[]\n+\n+async function createRedboxSnapshot(\n+  browser: BrowserInterface,\n+  next: NextInstance | null\n+): Promise<RedboxSnapshot> {\n+  const errorTally = await getRedboxTotalErrorCount(browser)\n+  const errorSnapshots: ErrorSnapshot[] = []\n+\n+  for (let errorIndex = 0; errorIndex < errorTally; errorIndex++) {\n+    const errorSnapshot = await createErrorSnapshot(browser, next)\n+    errorSnapshots.push(errorSnapshot)\n+\n+    if (errorIndex < errorTally - 1) {\n+      // Go to next error\n+      await browser\n+        .waitForElementByCss('[data-nextjs-dialog-error-next]')\n+        .click()\n+      // TODO: Wait for suspended content if the click triggered it.\n+      await browser.waitForElementByCss(\n+        `[data-nextjs-dialog-error-index=\"${errorIndex + 1}\"]`\n+      )\n+    }\n+  }\n+\n+  return errorSnapshots.length === 1\n+    ? // Most of the Redbox tests will just show a single error.\n+      // We optimize display for that case.\n+      errorSnapshots[0]\n+    : errorSnapshots\n+}\n+\n expect.extend({\n   async toDisplayRedbox(\n     this: MatcherContext,"
        },
        {
            "sha": "94d2f0c24583c01207cb3eeedef4ecfbd6df61b2",
            "filename": "test/lib/next-test-utils.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 21,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Flib%2Fnext-test-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b9d65b8afedda97c84e34a632a48b0a0e7d2f923/test%2Flib%2Fnext-test-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-test-utils.ts?ref=b9d65b8afedda97c84e34a632a48b0a0e7d2f923",
            "patch": "@@ -934,27 +934,6 @@ export async function openRedbox(browser: BrowserInterface): Promise<void> {\n   await assertHasRedbox(browser)\n }\n \n-export async function goToNextErrorView(\n-  browser: BrowserInterface\n-): Promise<void> {\n-  try {\n-    const currentErrorIndex = await browser\n-      .elementByCss('[data-nextjs-dialog-error-index]')\n-      .text()\n-    await browser.elementByCss('[data-nextjs-dialog-error-next]').click()\n-    await retry(async () => {\n-      const nextErrorIndex = await browser\n-        .elementByCss('[data-nextjs-dialog-error-index]')\n-        .text()\n-      expect(nextErrorIndex).not.toBe(currentErrorIndex)\n-    })\n-  } catch (cause) {\n-    const error = new Error('No Redbox to open.', { cause })\n-    Error.captureStackTrace(error, openRedbox)\n-    throw error\n-  }\n-}\n-\n export async function openDevToolsIndicatorPopover(\n   browser: BrowserInterface\n ): Promise<void> {"
        }
    ],
    "stats": {
        "total": 1583,
        "additions": 916,
        "deletions": 667
    }
}