{
    "author": "devjiwonchoi",
    "message": "Add codemod for removing `unstable_` prefix (#84974)\n\nStacked on https://github.com/vercel/next.js/pull/84877,\nhttps://github.com/vercel/next.js/pull/84880\n\nThis PR adds a codemod for removing the `unstable_` prefix for\nstabilized APIs. It is considered to scale by adding more APIs to the\n`UNSTABLE_TO_STABLE_MAPPING` map in the future to this codemod.\n\nCloses NEXT-4739",
    "sha": "6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
    "files": [
        {
            "sha": "c6322a233e319580431a5057080fad184501e1dd",
            "filename": "packages/next-codemod/lib/utils.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Flib%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Flib%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Flib%2Futils.ts?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -132,4 +132,9 @@ export const TRANSFORMER_INQUIRER_CHOICES = [\n     value: 'middleware-to-proxy',\n     version: '15.6.0-canary.54',\n   },\n+  {\n+    title: 'Remove `unstable_` prefix from stabilized API',\n+    value: 'remove-unstable-prefix',\n+    version: '16.0.0-canary.10',\n+  },\n ]"
        },
        {
            "sha": "c5229f201cc0debbd48021d227ca1fba16ec4fd2",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/alias.input.tsx",
            "status": "added",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Falias.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Falias.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Falias.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,26 @@\n+// @ts-nocheck\n+import { unstable_cacheTag as cacheTagImport, unstable_cacheLife as cacheLifeImport } from 'next/cache'\n+const { unstable_cacheTag: cacheTagRequire, unstable_cacheLife: cacheLifeRequire } = require('next/cache')\n+// Alias with same API name, alias should be removed.\n+import { unstable_cacheTag as cacheTag, unstable_cacheLife as cacheLife } from 'next/cache'\n+const { unstable_cacheTag: cacheTag, unstable_cacheLife: cacheLife } = require('next/cache')\n+\n+export function MyComponent() {\n+  const cacheTagImportTag = cacheTagImport('foo')\n+  const cacheLifeImportLife = cacheLifeImport('1 hour')\n+  const cacheTagRequireTag = cacheTagRequire('bar')\n+  const cacheLifeRequireLife = cacheLifeRequire('2 hours')\n+  const cacheTagAlias = cacheTag('redundant')\n+  const cacheLifeAlias = cacheLife('redundant-time')\n+\n+  return (\n+    <div>\n+      <p>Using cache tag: {cacheTagImportTag}</p>\n+      <p>Using cache life: {cacheLifeImportLife}</p>\n+      <p>Using another tag: {cacheTagRequireTag}</p>\n+      <p>Using another life: {cacheLifeRequireLife}</p>\n+      <p>Using same alias tag: {cacheTagAlias}</p>\n+      <p>Using same alias life: {cacheLifeAlias}</p>\n+    </div>\n+  )\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "5cfe5edbf543195ce244fe34572af96c79cde37f",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/alias.output.tsx",
            "status": "added",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Falias.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Falias.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Falias.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,26 @@\n+// @ts-nocheck\n+import { cacheTag as cacheTagImport, cacheLife as cacheLifeImport } from 'next/cache'\n+const { cacheTag: cacheTagRequire, cacheLife: cacheLifeRequire } = require('next/cache')\n+// Alias with same API name, alias should be removed.\n+import { cacheTag, cacheLife } from 'next/cache'\n+const { cacheTag, cacheLife } = require('next/cache')\n+\n+export function MyComponent() {\n+  const cacheTagImportTag = cacheTagImport('foo')\n+  const cacheLifeImportLife = cacheLifeImport('1 hour')\n+  const cacheTagRequireTag = cacheTagRequire('bar')\n+  const cacheLifeRequireLife = cacheLifeRequire('2 hours')\n+  const cacheTagAlias = cacheTag('redundant')\n+  const cacheLifeAlias = cacheLife('redundant-time')\n+\n+  return (\n+    <div>\n+      <p>Using cache tag: {cacheTagImportTag}</p>\n+      <p>Using cache life: {cacheLifeImportLife}</p>\n+      <p>Using another tag: {cacheTagRequireTag}</p>\n+      <p>Using another life: {cacheLifeRequireLife}</p>\n+      <p>Using same alias tag: {cacheTagAlias}</p>\n+      <p>Using same alias life: {cacheLifeAlias}</p>\n+    </div>\n+  )\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "14099fd3aeb58972f7227c973a642f0e4c8fec48",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/bracket-notation.input.tsx",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fbracket-notation.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fbracket-notation.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fbracket-notation.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,19 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+const cache = require('next/cache')\n+const dynamicCache = await import('next/cache')\n+\n+// Bracket notation property access with string literals\n+const tag = cache['unstable_cacheTag']('my-tag')\n+const life = dynamicCache['unstable_cacheLife']('2 hours')\n+\n+// Direct bracket notation access on require\n+const directTag = require('next/cache')['unstable_cacheTag']\n+\n+// Bracket notation property access inside a function\n+function testCache() {\n+  const tag2 = cache['unstable_cacheTag']('tag2')\n+  const life2 = dynamicCache['unstable_cacheLife']('life2')\n+\n+  return { tag2, life2 }\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "e1388741f778d5954c550881d20dc37dcb15d00a",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/bracket-notation.output.tsx",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fbracket-notation.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fbracket-notation.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fbracket-notation.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,19 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+const cache = require('next/cache')\n+const dynamicCache = await import('next/cache')\n+\n+// Bracket notation property access with string literals\n+const tag = cache[\"cacheTag\"]('my-tag')\n+const life = dynamicCache[\"cacheLife\"]('2 hours')\n+\n+// Direct bracket notation access on require\n+const directTag = require('next/cache')[\"cacheTag\"]\n+\n+// Bracket notation property access inside a function\n+function testCache() {\n+  const tag2 = cache[\"cacheTag\"]('tag2')\n+  const life2 = dynamicCache[\"cacheLife\"]('life2')\n+\n+  return { tag2, life2 }\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "6ccd73b2f0dcfeafe0bacfe2bbe2291c60bf03b2",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/dynamic-import.input.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-import.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-import.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-import.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,20 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+async function loadCache() {\n+  // Dynamic import with destructuring\n+  const { unstable_cacheTag, unstable_cacheLife } = await import('next/cache')\n+\n+  // Dynamic import with property access\n+  const cache = await import('next/cache')\n+  const directTag = cache.unstable_cacheTag\n+  const directLife = cache.unstable_cacheLife\n+\n+  return { directTag, directLife }\n+}\n+\n+// Dynamic import without await\n+const cachePromise = import('next/cache').then(({ unstable_cacheTag, unstable_cacheLife }) => {\n+  const tag = unstable_cacheTag('async-tag')\n+  const life = unstable_cacheLife('3 hours')\n+  return { tag, life }\n+})\n\\ No newline at end of file"
        },
        {
            "sha": "629be3307d1aeb5734d5cc5efc7f5ea2de9c5609",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/dynamic-import.output.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-import.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-import.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-import.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,20 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+async function loadCache() {\n+  // Dynamic import with destructuring\n+  const { cacheTag, cacheLife } = await import('next/cache')\n+\n+  // Dynamic import with property access\n+  const cache = await import('next/cache')\n+  const directTag = cache.cacheTag\n+  const directLife = cache.cacheLife\n+\n+  return { directTag, directLife }\n+}\n+\n+// Dynamic import without await\n+const cachePromise = import('next/cache').then(({ cacheTag, cacheLife }) => {\n+  const tag = cacheTag('async-tag')\n+  const life = cacheLife('3 hours')\n+  return { tag, life }\n+})\n\\ No newline at end of file"
        },
        {
            "sha": "4e31ea325b1a521f21977c8ecf00b9a0f11c0ba2",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/dynamic-require.input.tsx",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-require.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-require.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-require.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,17 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+function loadCache() {\n+  // Dynamic require with destructuring\n+  const { unstable_cacheTag, unstable_cacheLife } = require('next/cache')\n+\n+  // Dynamic require with property access\n+  const cache = require('next/cache')\n+  const directTag = cache.unstable_cacheTag\n+  const directLife = cache.unstable_cacheLife\n+\n+  // Direct property access on require\n+  const tag = require('next/cache').unstable_cacheTag('my-tag')\n+  const life = require('next/cache').unstable_cacheLife('2 hours')\n+\n+  return { tag, life, directTag, directLife }\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "0f7a2aa9e8d32598fd75655c82b5323cd3e4b3ec",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/dynamic-require.output.tsx",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-require.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-require.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fdynamic-require.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,17 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+function loadCache() {\n+  // Dynamic require with destructuring\n+  const { cacheTag, cacheLife } = require('next/cache')\n+\n+  // Dynamic require with property access\n+  const cache = require('next/cache')\n+  const directTag = cache.cacheTag\n+  const directLife = cache.cacheLife\n+\n+  // Direct property access on require\n+  const tag = require('next/cache').cacheTag('my-tag')\n+  const life = require('next/cache').cacheLife('2 hours')\n+\n+  return { tag, life, directTag, directLife }\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "f300c136006fa91bf6e33ba4ce6116c34f9d1afd",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/export-statements.input.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fexport-statements.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fexport-statements.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fexport-statements.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,11 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+\n+// Re-export unstable APIs from next/cache\n+export { unstable_cacheTag, unstable_cacheLife, revalidatePath} from 'next/cache'\n+\n+// Re-export with aliases\n+export { unstable_cacheTag as createTag, unstable_cacheLife as createLife } from 'next/cache'\n+\n+// Default export should not be affected\n+export { default as cache } from 'next/cache'\n\\ No newline at end of file"
        },
        {
            "sha": "6af278d364d0cbe2e8174e799947e3afa2f98dab",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/export-statements.output.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fexport-statements.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fexport-statements.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fexport-statements.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,11 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+\n+// Re-export unstable APIs from next/cache\n+export { cacheTag, cacheLife, revalidatePath} from 'next/cache'\n+\n+// Re-export with aliases\n+export { cacheTag as createTag, cacheLife as createLife } from 'next/cache'\n+\n+// Default export should not be affected\n+export { default as cache } from 'next/cache'\n\\ No newline at end of file"
        },
        {
            "sha": "e1144e2c10e56f5692184b0287962dbb5f95f2cb",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/import.input.tsx",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fimport.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fimport.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fimport.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,18 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+import { unstable_cacheTag, revalidatePath, unstable_cacheLife } from 'next/cache'\n+\n+export function MyComponent() {\n+  const tag = unstable_cacheTag('my-tag')\n+  const life = unstable_cacheLife('2 hours')\n+\n+  // This should remain unchanged\n+  revalidatePath('/app')\n+\n+  return (\n+    <div>\n+      <p>Using cache tag: {tag}</p>\n+      <p>Using cache life: {life}</p>\n+    </div>\n+  )\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "c383b99f7d49eac26ddc7dbd1395944eb12eaef5",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/import.output.tsx",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fimport.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fimport.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fimport.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,18 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+import { cacheTag, revalidatePath, cacheLife } from 'next/cache'\n+\n+export function MyComponent() {\n+  const tag = cacheTag('my-tag')\n+  const life = cacheLife('2 hours')\n+\n+  // This should remain unchanged\n+  revalidatePath('/app')\n+\n+  return (\n+    <div>\n+      <p>Using cache tag: {tag}</p>\n+      <p>Using cache life: {life}</p>\n+    </div>\n+  )\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "2cc0da25ca03f494deead28389df0a6bbaa54de3",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/namespace-import.input.tsx",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fnamespace-import.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fnamespace-import.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fnamespace-import.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,14 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+import * as cache from 'next/cache'\n+\n+export function testNamespaceAccess() {\n+  // Namespace property access\n+  const tag = cache.unstable_cacheTag('tag')\n+  const life = cache.unstable_cacheLife('1 hour')\n+\n+  // This should remain unchanged\n+  const path = cache.revalidatePath('/app')\n+\n+  return { tag, life, path }\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "d2b819bd8afbd93d23e9ea20e7fc29ecddb6e1d8",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/namespace-import.output.tsx",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fnamespace-import.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fnamespace-import.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Fnamespace-import.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,14 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+import * as cache from 'next/cache'\n+\n+export function testNamespaceAccess() {\n+  // Namespace property access\n+  const tag = cache.cacheTag('tag')\n+  const life = cache.cacheLife('1 hour')\n+\n+  // This should remain unchanged\n+  const path = cache.revalidatePath('/app')\n+\n+  return { tag, life, path }\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "e6e5aa40a4ab57c0d71bfeddea265e006d7a1385",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/require.input.tsx",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Frequire.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Frequire.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Frequire.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,18 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+const { unstable_cacheTag, unstable_cacheLife, revalidatePath } = require('next/cache')\n+\n+export function MyComponent() {\n+  const tag = unstable_cacheTag('my-tag')\n+  const life = unstable_cacheLife('2 hours')\n+\n+  // This should remain unchanged\n+  revalidatePath('/app')\n+\n+  return (\n+    <div>\n+      <p>Using cache tag: {tag}</p>\n+      <p>Using cache life: {life}</p>\n+    </div>\n+  )\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "6389e5d2a11d687e0968ec56f7ebb9e93d6adcb5",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/require.output.tsx",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Frequire.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Frequire.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Frequire.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,18 @@\n+// @ts-nocheck\n+/* eslint-disable */\n+const { cacheTag, cacheLife, revalidatePath } = require('next/cache')\n+\n+export function MyComponent() {\n+  const tag = cacheTag('my-tag')\n+  const life = cacheLife('2 hours')\n+\n+  // This should remain unchanged\n+  revalidatePath('/app')\n+\n+  return (\n+    <div>\n+      <p>Using cache tag: {tag}</p>\n+      <p>Using cache life: {life}</p>\n+    </div>\n+  )\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "cb0b7af001076fe3a57fb7c1c0f35b44803eaa99",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/type-imports.input.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Ftype-imports.input.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Ftype-imports.input.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Ftype-imports.input.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,7 @@\n+// @ts-nocheck\n+\n+// Type imports\n+import type { unstable_cacheTag, unstable_cacheLife } from 'next/cache'\n+\n+// Type imports as alias\n+import type { unstable_cacheTag as regularTag, unstable_cacheLife as regularLife } from 'next/cache'"
        },
        {
            "sha": "effc9d08cc4dd50fcde412a5e0a39aee893011ec",
            "filename": "packages/next-codemod/transforms/__testfixtures__/remove-unstable-prefix/type-imports.output.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Ftype-imports.output.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Ftype-imports.output.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fremove-unstable-prefix%2Ftype-imports.output.tsx?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,7 @@\n+// @ts-nocheck\n+\n+// Type imports\n+import type { cacheTag, cacheLife } from 'next/cache'\n+\n+// Type imports as alias\n+import type { cacheTag as regularTag, cacheLife as regularLife } from 'next/cache'"
        },
        {
            "sha": "94486440f64afd6d75936c4f9d149c1387b6ddb6",
            "filename": "packages/next-codemod/transforms/__tests__/remove-unstable-prefix.test.js",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fremove-unstable-prefix.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fremove-unstable-prefix.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fremove-unstable-prefix.test.js?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,16 @@\n+/* global jest */\n+jest.autoMockOff()\n+const defineTest = require('jscodeshift/dist/testUtils').defineTest\n+const { readdirSync } = require('fs')\n+const { join } = require('path')\n+\n+const fixtureDir = 'remove-unstable-prefix'\n+const fixtureDirPath = join(__dirname, '..', '__testfixtures__', fixtureDir)\n+const fixtures = readdirSync(fixtureDirPath)\n+  .filter(file => file.endsWith('.input.tsx'))\n+  .map(file => file.replace('.input.tsx', ''))\n+\n+for (const fixture of fixtures) {\n+  const prefix = `${fixtureDir}/${fixture}`;\n+  defineTest(__dirname, fixtureDir, null, prefix, { parser: 'tsx' });\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "482c7f58422f8837fcf6767b1fd351882032645a",
            "filename": "packages/next-codemod/transforms/remove-unstable-prefix.ts",
            "status": "added",
            "additions": 357,
            "deletions": 0,
            "changes": 357,
            "blob_url": "https://github.com/vercel/next.js/blob/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2Fremove-unstable-prefix.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be/packages%2Fnext-codemod%2Ftransforms%2Fremove-unstable-prefix.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2Fremove-unstable-prefix.ts?ref=6bd5c47b90a3165df55a29fb3f0e7ebc5d4cd6be",
            "patch": "@@ -0,0 +1,357 @@\n+import type { API, FileInfo, Options } from 'jscodeshift'\n+import { createParserFromPath } from '../lib/parser'\n+\n+// Mapping of unstable APIs to their stable counterparts\n+// This can be easily extended when new APIs are stabilized\n+const UNSTABLE_TO_STABLE_MAPPING: Record<string, string> = {\n+  unstable_cacheTag: 'cacheTag',\n+  unstable_cacheLife: 'cacheLife',\n+}\n+\n+// Helper function to check if a property name should be renamed\n+function shouldRenameProperty(propertyName: string): boolean {\n+  return propertyName in UNSTABLE_TO_STABLE_MAPPING\n+}\n+\n+export default function transformer(\n+  file: FileInfo,\n+  _api: API,\n+  options: Options\n+) {\n+  const j = createParserFromPath(file.path)\n+  const root = j(file.source)\n+  let hasChanges = false\n+\n+  try {\n+    // Track identifier renames that need to be applied\n+    const identifierRenames: Array<{ oldName: string; newName: string }> = []\n+    // Track variables assigned from next/cache imports/requires\n+    const cacheVariables = new Set<string>()\n+\n+    // Handle ES6 imports: import { unstable_cacheTag } from 'next/cache'\n+    root\n+      .find(j.ImportDeclaration, { source: { value: 'next/cache' } })\n+      .forEach((path) => {\n+        path.node.specifiers?.forEach((specifier) => {\n+          if (\n+            specifier.type === 'ImportSpecifier' &&\n+            specifier.imported?.type === 'Identifier' &&\n+            shouldRenameProperty(specifier.imported.name)\n+          ) {\n+            const oldName = specifier.imported.name\n+            const newName = UNSTABLE_TO_STABLE_MAPPING[oldName]\n+\n+            // Handle alias scenarios\n+            if (specifier.local && specifier.local.name === newName) {\n+              // Same alias name: { unstable_cacheTag as cacheTag } -> { cacheTag }\n+              const newSpecifier = j.importSpecifier(j.identifier(newName))\n+              const specifierIndex = path.node.specifiers.indexOf(specifier)\n+              path.node.specifiers[specifierIndex] = newSpecifier\n+              identifierRenames.push({ oldName, newName })\n+            } else {\n+              // Normal case: just update the imported name\n+              specifier.imported = j.identifier(newName)\n+              if (!specifier.local || specifier.local.name === oldName) {\n+                // Not aliased or aliased with old name: add to identifier renames\n+                identifierRenames.push({ oldName, newName })\n+              }\n+            }\n+\n+            hasChanges = true\n+          } else if (specifier.type === 'ImportNamespaceSpecifier') {\n+            // Handle namespace imports: import * as cache from 'next/cache'\n+            cacheVariables.add(specifier.local.name)\n+          }\n+        })\n+      })\n+\n+    // Handle export statements: export { unstable_cacheTag } from 'next/cache'\n+    root\n+      .find(j.ExportNamedDeclaration, { source: { value: 'next/cache' } })\n+      .forEach((path) => {\n+        path.node.specifiers?.forEach((specifier) => {\n+          if (\n+            specifier.type === 'ExportSpecifier' &&\n+            specifier.local?.type === 'Identifier' &&\n+            shouldRenameProperty(specifier.local.name)\n+          ) {\n+            const oldName = specifier.local.name\n+            const newName = UNSTABLE_TO_STABLE_MAPPING[oldName]\n+\n+            specifier.local = j.identifier(newName)\n+\n+            // Handle export alias scenarios\n+            if (specifier.exported && specifier.exported.name === newName) {\n+              // Same alias name: { unstable_cacheTag as cacheTag } -> { cacheTag }\n+              specifier.exported = specifier.local\n+            } else if (\n+              !specifier.exported ||\n+              specifier.exported.name === oldName\n+            ) {\n+              // Not aliased or aliased with old name\n+              specifier.exported = j.identifier(newName)\n+            }\n+\n+            hasChanges = true\n+          }\n+        })\n+      })\n+\n+    // Handle require('next/cache') calls and destructuring\n+    root\n+      .find(j.CallExpression, { callee: { name: 'require' } })\n+      .forEach((path) => {\n+        if (\n+          path.node.arguments[0]?.type === 'StringLiteral' &&\n+          path.node.arguments[0].value === 'next/cache'\n+        ) {\n+          // Track variable assignments: const cache = require('next/cache')\n+          const parent = path.parent?.node\n+          if (\n+            parent?.type === 'VariableDeclarator' &&\n+            parent.id?.type === 'Identifier'\n+          ) {\n+            cacheVariables.add(parent.id.name)\n+          }\n+\n+          // Handle destructuring: const { unstable_cacheTag } = require('next/cache')\n+          if (\n+            parent?.type === 'VariableDeclarator' &&\n+            parent.id?.type === 'ObjectPattern'\n+          ) {\n+            parent.id.properties?.forEach((property) => {\n+              if (\n+                property.type === 'ObjectProperty' &&\n+                property.key?.type === 'Identifier' &&\n+                shouldRenameProperty(property.key.name)\n+              ) {\n+                const oldName = property.key.name\n+                const newName = UNSTABLE_TO_STABLE_MAPPING[oldName]\n+\n+                property.key = j.identifier(newName)\n+\n+                // Handle both shorthand and explicit destructuring\n+                if (!property.value) {\n+                  property.value = j.identifier(newName)\n+                  identifierRenames.push({ oldName, newName })\n+                } else if (property.value.type === 'Identifier') {\n+                  const localName = property.value.name\n+                  if (localName === oldName) {\n+                    property.value = j.identifier(newName)\n+                    identifierRenames.push({ oldName, newName })\n+                  } else if (localName === newName) {\n+                    // Same alias name: { unstable_cacheTag: cacheTag } -> { cacheTag }\n+                    property.value = j.identifier(newName)\n+                    property.shorthand = true\n+                    identifierRenames.push({ oldName, newName })\n+                  }\n+                }\n+\n+                hasChanges = true\n+              }\n+            })\n+          }\n+        }\n+      })\n+\n+    // Handle await import('next/cache') calls and destructuring\n+    root.find(j.AwaitExpression).forEach((path) => {\n+      const arg = path.node.argument\n+      if (\n+        arg?.type === 'CallExpression' &&\n+        arg.callee?.type === 'Import' &&\n+        arg.arguments[0]?.type === 'StringLiteral' &&\n+        arg.arguments[0].value === 'next/cache'\n+      ) {\n+        // Track variable assignments: const cache = await import('next/cache')\n+        const parent = path.parent?.node\n+        if (\n+          parent?.type === 'VariableDeclarator' &&\n+          parent.id?.type === 'Identifier'\n+        ) {\n+          cacheVariables.add(parent.id.name)\n+        }\n+\n+        // Handle destructuring: const { unstable_cacheTag } = await import('next/cache')\n+        if (\n+          parent?.type === 'VariableDeclarator' &&\n+          parent.id?.type === 'ObjectPattern'\n+        ) {\n+          parent.id.properties?.forEach((property) => {\n+            if (\n+              property.type === 'ObjectProperty' &&\n+              property.key?.type === 'Identifier' &&\n+              shouldRenameProperty(property.key.name)\n+            ) {\n+              const oldName = property.key.name\n+              const newName = UNSTABLE_TO_STABLE_MAPPING[oldName]\n+\n+              property.key = j.identifier(newName)\n+\n+              if (!property.value) {\n+                property.value = j.identifier(newName)\n+                identifierRenames.push({ oldName, newName })\n+              } else if (property.value.type === 'Identifier') {\n+                const localName = property.value.name\n+                if (localName === oldName) {\n+                  property.value = j.identifier(newName)\n+                  identifierRenames.push({ oldName, newName })\n+                } else if (localName === newName) {\n+                  // Same alias name: { unstable_cacheTag: cacheTag } -> { cacheTag }\n+                  property.value = j.identifier(newName)\n+                  property.shorthand = true\n+                  identifierRenames.push({ oldName, newName })\n+                }\n+              }\n+\n+              hasChanges = true\n+            }\n+          })\n+        }\n+      }\n+    })\n+\n+    // Handle .then() chains: import('next/cache').then(({ unstable_cacheTag }) => ...)\n+    root.find(j.CallExpression).forEach((path) => {\n+      if (\n+        path.node.callee?.type === 'MemberExpression' &&\n+        path.node.callee.property?.type === 'Identifier' &&\n+        path.node.callee.property.name === 'then' &&\n+        path.node.callee.object?.type === 'CallExpression' &&\n+        path.node.callee.object.callee?.type === 'Import' &&\n+        path.node.callee.object.arguments[0]?.type === 'StringLiteral' &&\n+        path.node.callee.object.arguments[0].value === 'next/cache' &&\n+        path.node.arguments.length > 0\n+      ) {\n+        const callback = path.node.arguments[0]\n+        let params = null\n+\n+        if (callback.type === 'ArrowFunctionExpression') {\n+          params = callback.params\n+        } else if (callback.type === 'FunctionExpression') {\n+          params = callback.params\n+        }\n+\n+        if (params && params.length > 0 && params[0].type === 'ObjectPattern') {\n+          params[0].properties?.forEach((property) => {\n+            if (\n+              property.type === 'ObjectProperty' &&\n+              property.key?.type === 'Identifier' &&\n+              shouldRenameProperty(property.key.name)\n+            ) {\n+              const oldName = property.key.name\n+              const newName = UNSTABLE_TO_STABLE_MAPPING[oldName]\n+\n+              property.key = j.identifier(newName)\n+\n+              if (!property.value) {\n+                property.value = j.identifier(newName)\n+                identifierRenames.push({ oldName, newName })\n+              } else if (property.value.type === 'Identifier') {\n+                const localName = property.value.name\n+                if (localName === oldName) {\n+                  property.value = j.identifier(newName)\n+                  identifierRenames.push({ oldName, newName })\n+                } else if (localName === newName) {\n+                  // Same alias name: { unstable_cacheTag: cacheTag } -> { cacheTag }\n+                  property.value = j.identifier(newName)\n+                  property.shorthand = true\n+                  identifierRenames.push({ oldName, newName })\n+                }\n+              }\n+\n+              hasChanges = true\n+            }\n+          })\n+        }\n+      }\n+    })\n+\n+    // Handle member expressions\n+    root.find(j.MemberExpression).forEach((path) => {\n+      const node = path.node\n+\n+      // Handle direct property access: require('next/cache').unstable_cacheTag\n+      if (\n+        node.object?.type === 'CallExpression' &&\n+        node.object.callee?.type === 'Identifier' &&\n+        node.object.callee.name === 'require' &&\n+        node.object.arguments[0]?.type === 'StringLiteral' &&\n+        node.object.arguments[0].value === 'next/cache'\n+      ) {\n+        if (\n+          node.computed &&\n+          node.property?.type === 'StringLiteral' &&\n+          shouldRenameProperty(node.property.value)\n+        ) {\n+          const newName = UNSTABLE_TO_STABLE_MAPPING[node.property.value]\n+          node.property = j.stringLiteral(newName)\n+          hasChanges = true\n+        } else if (\n+          !node.computed &&\n+          node.property?.type === 'Identifier' &&\n+          shouldRenameProperty(node.property.name)\n+        ) {\n+          const newName = UNSTABLE_TO_STABLE_MAPPING[node.property.name]\n+          node.property = j.identifier(newName)\n+          hasChanges = true\n+        }\n+      }\n+\n+      // Handle property access on cache variables: cache.unstable_cacheTag or cache['unstable_cacheTag']\n+      if (\n+        node.object?.type === 'Identifier' &&\n+        cacheVariables.has(node.object.name)\n+      ) {\n+        if (\n+          node.computed &&\n+          node.property?.type === 'StringLiteral' &&\n+          shouldRenameProperty(node.property.value)\n+        ) {\n+          const newName = UNSTABLE_TO_STABLE_MAPPING[node.property.value]\n+          node.property = j.stringLiteral(newName)\n+          hasChanges = true\n+        } else if (\n+          !node.computed &&\n+          node.property?.type === 'Identifier' &&\n+          shouldRenameProperty(node.property.name)\n+        ) {\n+          const newName = UNSTABLE_TO_STABLE_MAPPING[node.property.name]\n+          node.property = j.identifier(newName)\n+          hasChanges = true\n+        }\n+      }\n+    })\n+\n+    // Apply all identifier renames with better scope awareness\n+    identifierRenames.forEach(({ oldName, newName }) => {\n+      root\n+        .find(j.Identifier, { name: oldName })\n+        .filter((identifierPath) => {\n+          // Skip renaming declarations themselves\n+          const parent = identifierPath.parent\n+          return !(\n+            parent.node.type === 'ImportSpecifier' ||\n+            parent.node.type === 'ExportSpecifier' ||\n+            (parent.node.type === 'ObjectProperty' &&\n+              parent.node.key === identifierPath.node) ||\n+            (parent.node.type === 'VariableDeclarator' &&\n+              parent.node.id === identifierPath.node) ||\n+            (parent.node.type === 'FunctionDeclaration' &&\n+              parent.node.id === identifierPath.node) ||\n+            (parent.node.type === 'Property' &&\n+              parent.node.key === identifierPath.node &&\n+              !parent.node.computed)\n+          )\n+        })\n+        .forEach((identifierPath) => {\n+          identifierPath.node.name = newName\n+        })\n+    })\n+\n+    return hasChanges ? root.toSource(options) : file.source\n+  } catch (error) {\n+    console.warn(`Failed to transform ${file.path}: ${error.message}`)\n+    return file.source\n+  }\n+}"
        }
    ],
    "stats": {
        "total": 678,
        "additions": 678,
        "deletions": 0
    }
}