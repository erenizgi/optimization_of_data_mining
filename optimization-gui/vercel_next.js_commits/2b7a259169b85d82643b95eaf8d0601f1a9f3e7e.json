{
    "author": "ivasilov",
    "message": "chore: Update the `with-supabase` example to use the Supabase Auth block (#78913)\n\nThis PR updates the `with-supabase` template to better auth pages,\nTailwind v4 and newest `components.json` for full compatibility with\nshadcn/ui.\n\nThe `(auth-pages)` folder has been removed. For auth, the template is\nnow using the [password based auth\nblock](https://supabase.com/ui/docs/nextjs/password-based-auth) from the\nSupabase UI Library which makes it easier to update it and keep it\nup-to-date.\n\n---------\n\nCo-authored-by: Lee Robinson <lee@leerob.com>",
    "sha": "2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
    "files": [
        {
            "sha": "f1631b09dbf8fa44afbf56f3b42263c5ab1bc38b",
            "filename": "examples/with-supabase/.gitignore",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2F.gitignore",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2F.gitignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2F.gitignore?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -28,8 +28,9 @@\n npm-debug.log*\n yarn-debug.log*\n yarn-error.log*\n+.pnpm-debug.log*\n \n-# local env files\n+# env files (can opt-in for committing if needed)\n .env*.local\n .env\n "
        },
        {
            "sha": "70027348398858217262f034028f52eaf5a47406",
            "filename": "examples/with-supabase/README.md",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2FREADME.md",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2FREADME.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2FREADME.md?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -27,6 +27,7 @@\n   - Server\n   - It just works!\n - supabase-ssr. A package to configure Supabase Auth to use cookies\n+- Password-based authentication block installed via the [Supabase UI Library](https://supabase.com/ui/docs/nextjs/password-based-auth)\n - Styling with [Tailwind CSS](https://tailwindcss.com)\n - Components with [shadcn/ui](https://ui.shadcn.com/)\n - Optional deployment with [Supabase Vercel Integration and Vercel deploy](#deploy-your-own)\n@@ -79,7 +80,7 @@ If you wish to just develop locally and not deploy to Vercel, [follow the steps\n    NEXT_PUBLIC_SUPABASE_ANON_KEY=[INSERT SUPABASE PROJECT API ANON KEY]\n    ```\n \n-   Both `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY` can be found in [your Supabase project's API settings](https://app.supabase.com/project/_/settings/api)\n+   Both `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY` can be found in [your Supabase project's API settings](https://supabase.com/dashboard/project/_?showConnect=true)\n \n 5. You can now run the Next.js local development server:\n "
        },
        {
            "sha": "bcf972555a50793e0a45aed5810490d3d897a9fb",
            "filename": "examples/with-supabase/app/(auth-pages)/forgot-password/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 37,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fforgot-password%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fforgot-password%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fforgot-password%2Fpage.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,37 +0,0 @@\n-import { forgotPasswordAction } from \"@/app/actions\";\n-import { FormMessage, Message } from \"@/components/form-message\";\n-import { SubmitButton } from \"@/components/submit-button\";\n-import { Input } from \"@/components/ui/input\";\n-import { Label } from \"@/components/ui/label\";\n-import Link from \"next/link\";\n-import { SmtpMessage } from \"../smtp-message\";\n-\n-export default async function ForgotPassword(props: {\n-  searchParams: Promise<Message>;\n-}) {\n-  const searchParams = await props.searchParams;\n-  return (\n-    <>\n-      <form className=\"flex-1 flex flex-col w-full gap-2 text-foreground [&>input]:mb-6 min-w-64 max-w-64 mx-auto\">\n-        <div>\n-          <h1 className=\"text-2xl font-medium\">Reset Password</h1>\n-          <p className=\"text-sm text-secondary-foreground\">\n-            Already have an account?{\" \"}\n-            <Link className=\"text-primary underline\" href=\"/sign-in\">\n-              Sign in\n-            </Link>\n-          </p>\n-        </div>\n-        <div className=\"flex flex-col gap-2 [&>input]:mb-3 mt-8\">\n-          <Label htmlFor=\"email\">Email</Label>\n-          <Input name=\"email\" placeholder=\"you@example.com\" required />\n-          <SubmitButton formAction={forgotPasswordAction}>\n-            Reset Password\n-          </SubmitButton>\n-          <FormMessage message={searchParams} />\n-        </div>\n-      </form>\n-      <SmtpMessage />\n-    </>\n-  );\n-}"
        },
        {
            "sha": "e038de15afd58f6b681d56a72ff9efdcc24d3b1a",
            "filename": "examples/with-supabase/app/(auth-pages)/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Flayout.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,9 +0,0 @@\n-export default async function Layout({\n-  children,\n-}: {\n-  children: React.ReactNode;\n-}) {\n-  return (\n-    <div className=\"max-w-7xl flex flex-col gap-12 items-start\">{children}</div>\n-  );\n-}"
        },
        {
            "sha": "7628cc7a5f2d4228e2ae99c4ffee38ccc0409dd6",
            "filename": "examples/with-supabase/app/(auth-pages)/sign-in/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 44,
            "changes": 44,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsign-in%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsign-in%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsign-in%2Fpage.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,44 +0,0 @@\n-import { signInAction } from \"@/app/actions\";\n-import { FormMessage, Message } from \"@/components/form-message\";\n-import { SubmitButton } from \"@/components/submit-button\";\n-import { Input } from \"@/components/ui/input\";\n-import { Label } from \"@/components/ui/label\";\n-import Link from \"next/link\";\n-\n-export default async function Login(props: { searchParams: Promise<Message> }) {\n-  const searchParams = await props.searchParams;\n-  return (\n-    <form className=\"flex-1 flex flex-col min-w-64\">\n-      <h1 className=\"text-2xl font-medium\">Sign in</h1>\n-      <p className=\"text-sm text-foreground\">\n-        Don't have an account?{\" \"}\n-        <Link className=\"text-foreground font-medium underline\" href=\"/sign-up\">\n-          Sign up\n-        </Link>\n-      </p>\n-      <div className=\"flex flex-col gap-2 [&>input]:mb-3 mt-8\">\n-        <Label htmlFor=\"email\">Email</Label>\n-        <Input name=\"email\" placeholder=\"you@example.com\" required />\n-        <div className=\"flex justify-between items-center\">\n-          <Label htmlFor=\"password\">Password</Label>\n-          <Link\n-            className=\"text-xs text-foreground underline\"\n-            href=\"/forgot-password\"\n-          >\n-            Forgot Password?\n-          </Link>\n-        </div>\n-        <Input\n-          type=\"password\"\n-          name=\"password\"\n-          placeholder=\"Your password\"\n-          required\n-        />\n-        <SubmitButton pendingText=\"Signing In...\" formAction={signInAction}>\n-          Sign in\n-        </SubmitButton>\n-        <FormMessage message={searchParams} />\n-      </div>\n-    </form>\n-  );\n-}"
        },
        {
            "sha": "31b5a6d32354f2ed3e7b9ebc4879768b84eb7338",
            "filename": "examples/with-supabase/app/(auth-pages)/sign-up/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 51,
            "changes": 51,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsign-up%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsign-up%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsign-up%2Fpage.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,51 +0,0 @@\n-import { signUpAction } from \"@/app/actions\";\n-import { FormMessage, Message } from \"@/components/form-message\";\n-import { SubmitButton } from \"@/components/submit-button\";\n-import { Input } from \"@/components/ui/input\";\n-import { Label } from \"@/components/ui/label\";\n-import Link from \"next/link\";\n-import { SmtpMessage } from \"../smtp-message\";\n-\n-export default async function Signup(props: {\n-  searchParams: Promise<Message>;\n-}) {\n-  const searchParams = await props.searchParams;\n-  if (\"message\" in searchParams) {\n-    return (\n-      <div className=\"w-full flex-1 flex items-center h-screen sm:max-w-md justify-center gap-2 p-4\">\n-        <FormMessage message={searchParams} />\n-      </div>\n-    );\n-  }\n-\n-  return (\n-    <>\n-      <form className=\"flex flex-col min-w-64 max-w-64 mx-auto\">\n-        <h1 className=\"text-2xl font-medium\">Sign up</h1>\n-        <p className=\"text-sm text text-foreground\">\n-          Already have an account?{\" \"}\n-          <Link className=\"text-primary font-medium underline\" href=\"/sign-in\">\n-            Sign in\n-          </Link>\n-        </p>\n-        <div className=\"flex flex-col gap-2 [&>input]:mb-3 mt-8\">\n-          <Label htmlFor=\"email\">Email</Label>\n-          <Input name=\"email\" placeholder=\"you@example.com\" required />\n-          <Label htmlFor=\"password\">Password</Label>\n-          <Input\n-            type=\"password\"\n-            name=\"password\"\n-            placeholder=\"Your password\"\n-            minLength={6}\n-            required\n-          />\n-          <SubmitButton formAction={signUpAction} pendingText=\"Signing up...\">\n-            Sign up\n-          </SubmitButton>\n-          <FormMessage message={searchParams} />\n-        </div>\n-      </form>\n-      <SmtpMessage />\n-    </>\n-  );\n-}"
        },
        {
            "sha": "84c21fce29ba588315ce12f22629bbe73723dd0a",
            "filename": "examples/with-supabase/app/(auth-pages)/smtp-message.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 25,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsmtp-message.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsmtp-message.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2F(auth-pages)%2Fsmtp-message.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,25 +0,0 @@\n-import { ArrowUpRight, InfoIcon } from \"lucide-react\";\n-import Link from \"next/link\";\n-\n-export function SmtpMessage() {\n-  return (\n-    <div className=\"bg-muted/50 px-5 py-3 border rounded-md flex gap-4\">\n-      <InfoIcon size={16} className=\"mt-0.5\" />\n-      <div className=\"flex flex-col gap-1\">\n-        <small className=\"text-sm text-secondary-foreground\">\n-          <strong> Note:</strong> Emails are rate limited. Enable Custom SMTP to\n-          increase the rate limit.\n-        </small>\n-        <div>\n-          <Link\n-            href=\"https://supabase.com/docs/guides/auth/auth-smtp\"\n-            target=\"_blank\"\n-            className=\"text-primary/50 hover:text-primary flex items-center text-sm gap-1\"\n-          >\n-            Learn more <ArrowUpRight size={14} />\n-          </Link>\n-        </div>\n-      </div>\n-    </div>\n-  );\n-}"
        },
        {
            "sha": "dbf8a26a765d70fa20511c6a02f90d1f8d45c66a",
            "filename": "examples/with-supabase/app/actions.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 134,
            "changes": 134,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2Factions.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2Factions.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Factions.ts?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,134 +0,0 @@\n-\"use server\";\n-\n-import { encodedRedirect } from \"@/utils/utils\";\n-import { createClient } from \"@/utils/supabase/server\";\n-import { headers } from \"next/headers\";\n-import { redirect } from \"next/navigation\";\n-\n-export const signUpAction = async (formData: FormData) => {\n-  const email = formData.get(\"email\")?.toString();\n-  const password = formData.get(\"password\")?.toString();\n-  const supabase = await createClient();\n-  const origin = (await headers()).get(\"origin\");\n-\n-  if (!email || !password) {\n-    return encodedRedirect(\n-      \"error\",\n-      \"/sign-up\",\n-      \"Email and password are required\",\n-    );\n-  }\n-\n-  const { error } = await supabase.auth.signUp({\n-    email,\n-    password,\n-    options: {\n-      emailRedirectTo: `${origin}/auth/callback`,\n-    },\n-  });\n-\n-  if (error) {\n-    console.error(error.code + \" \" + error.message);\n-    return encodedRedirect(\"error\", \"/sign-up\", error.message);\n-  } else {\n-    return encodedRedirect(\n-      \"success\",\n-      \"/sign-up\",\n-      \"Thanks for signing up! Please check your email for a verification link.\",\n-    );\n-  }\n-};\n-\n-export const signInAction = async (formData: FormData) => {\n-  const email = formData.get(\"email\") as string;\n-  const password = formData.get(\"password\") as string;\n-  const supabase = await createClient();\n-\n-  const { error } = await supabase.auth.signInWithPassword({\n-    email,\n-    password,\n-  });\n-\n-  if (error) {\n-    return encodedRedirect(\"error\", \"/sign-in\", error.message);\n-  }\n-\n-  return redirect(\"/protected\");\n-};\n-\n-export const forgotPasswordAction = async (formData: FormData) => {\n-  const email = formData.get(\"email\")?.toString();\n-  const supabase = await createClient();\n-  const origin = (await headers()).get(\"origin\");\n-  const callbackUrl = formData.get(\"callbackUrl\")?.toString();\n-\n-  if (!email) {\n-    return encodedRedirect(\"error\", \"/forgot-password\", \"Email is required\");\n-  }\n-\n-  const { error } = await supabase.auth.resetPasswordForEmail(email, {\n-    redirectTo: `${origin}/auth/callback?redirect_to=/protected/reset-password`,\n-  });\n-\n-  if (error) {\n-    console.error(error.message);\n-    return encodedRedirect(\n-      \"error\",\n-      \"/forgot-password\",\n-      \"Could not reset password\",\n-    );\n-  }\n-\n-  if (callbackUrl) {\n-    return redirect(callbackUrl);\n-  }\n-\n-  return encodedRedirect(\n-    \"success\",\n-    \"/forgot-password\",\n-    \"Check your email for a link to reset your password.\",\n-  );\n-};\n-\n-export const resetPasswordAction = async (formData: FormData) => {\n-  const supabase = await createClient();\n-\n-  const password = formData.get(\"password\") as string;\n-  const confirmPassword = formData.get(\"confirmPassword\") as string;\n-\n-  if (!password || !confirmPassword) {\n-    encodedRedirect(\n-      \"error\",\n-      \"/protected/reset-password\",\n-      \"Password and confirm password are required\",\n-    );\n-  }\n-\n-  if (password !== confirmPassword) {\n-    encodedRedirect(\n-      \"error\",\n-      \"/protected/reset-password\",\n-      \"Passwords do not match\",\n-    );\n-  }\n-\n-  const { error } = await supabase.auth.updateUser({\n-    password: password,\n-  });\n-\n-  if (error) {\n-    encodedRedirect(\n-      \"error\",\n-      \"/protected/reset-password\",\n-      \"Password update failed\",\n-    );\n-  }\n-\n-  encodedRedirect(\"success\", \"/protected/reset-password\", \"Password updated\");\n-};\n-\n-export const signOutAction = async () => {\n-  const supabase = await createClient();\n-  await supabase.auth.signOut();\n-  return redirect(\"/sign-in\");\n-};"
        },
        {
            "sha": "dd415a4834773b57b8aaef25f8644f61407527ed",
            "filename": "examples/with-supabase/app/auth/callback/route.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2Fauth%2Fcallback%2Froute.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2Fauth%2Fcallback%2Froute.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fauth%2Fcallback%2Froute.ts?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,24 +0,0 @@\n-import { createClient } from \"@/utils/supabase/server\";\n-import { NextResponse } from \"next/server\";\n-\n-export async function GET(request: Request) {\n-  // The `/auth/callback` route is required for the server-side auth flow implemented\n-  // by the SSR package. It exchanges an auth code for the user's session.\n-  // https://supabase.com/docs/guides/auth/server-side/nextjs\n-  const requestUrl = new URL(request.url);\n-  const code = requestUrl.searchParams.get(\"code\");\n-  const origin = requestUrl.origin;\n-  const redirectTo = requestUrl.searchParams.get(\"redirect_to\")?.toString();\n-\n-  if (code) {\n-    const supabase = await createClient();\n-    await supabase.auth.exchangeCodeForSession(code);\n-  }\n-\n-  if (redirectTo) {\n-    return NextResponse.redirect(`${origin}${redirectTo}`);\n-  }\n-\n-  // URL to redirect to after sign up process completes\n-  return NextResponse.redirect(`${origin}/protected`);\n-}"
        },
        {
            "sha": "b1b10861b75d20433cc82b4ab63697cc3256c181",
            "filename": "examples/with-supabase/app/auth/confirm/route.ts",
            "status": "added",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fconfirm%2Froute.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fconfirm%2Froute.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fauth%2Fconfirm%2Froute.ts?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,30 @@\n+import { createClient } from \"@/lib/supabase/server\";\n+import { type EmailOtpType } from \"@supabase/supabase-js\";\n+import { redirect } from \"next/navigation\";\n+import { type NextRequest } from \"next/server\";\n+\n+export async function GET(request: NextRequest) {\n+  const { searchParams } = new URL(request.url);\n+  const token_hash = searchParams.get(\"token_hash\");\n+  const type = searchParams.get(\"type\") as EmailOtpType | null;\n+  const next = searchParams.get(\"next\") ?? \"/\";\n+\n+  if (token_hash && type) {\n+    const supabase = await createClient();\n+\n+    const { error } = await supabase.auth.verifyOtp({\n+      type,\n+      token_hash,\n+    });\n+    if (!error) {\n+      // redirect user to specified redirect URL or root of app\n+      redirect(next);\n+    } else {\n+      // redirect the user to an error page with some instructions\n+      redirect(`/auth/error?error=${error?.message}`);\n+    }\n+  }\n+\n+  // redirect the user to an error page with some instructions\n+  redirect(`/auth/error?error=No token hash or type`);\n+}"
        },
        {
            "sha": "8bd2864f98698d174be78f283c51ed24d2da1999",
            "filename": "examples/with-supabase/app/auth/error/page.tsx",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Ferror%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Ferror%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fauth%2Ferror%2Fpage.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,36 @@\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n+\n+export default async function Page({\n+  searchParams,\n+}: {\n+  searchParams: Promise<{ error: string }>;\n+}) {\n+  const params = await searchParams;\n+\n+  return (\n+    <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\n+      <div className=\"w-full max-w-sm\">\n+        <div className=\"flex flex-col gap-6\">\n+          <Card>\n+            <CardHeader>\n+              <CardTitle className=\"text-2xl\">\n+                Sorry, something went wrong.\n+              </CardTitle>\n+            </CardHeader>\n+            <CardContent>\n+              {params?.error ? (\n+                <p className=\"text-sm text-muted-foreground\">\n+                  Code error: {params.error}\n+                </p>\n+              ) : (\n+                <p className=\"text-sm text-muted-foreground\">\n+                  An unspecified error occurred.\n+                </p>\n+              )}\n+            </CardContent>\n+          </Card>\n+        </div>\n+      </div>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "8dcfbb215a6d53e67c27564dc9dc82337dcdebe2",
            "filename": "examples/with-supabase/app/auth/forgot-password/page.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fforgot-password%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fforgot-password%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fauth%2Fforgot-password%2Fpage.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,11 @@\n+import { ForgotPasswordForm } from \"@/components/forgot-password-form\";\n+\n+export default function Page() {\n+  return (\n+    <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\n+      <div className=\"w-full max-w-sm\">\n+        <ForgotPasswordForm />\n+      </div>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "5efe67942e483357ee7f2c20a7e296611ba25dd6",
            "filename": "examples/with-supabase/app/auth/login/page.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Flogin%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Flogin%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fauth%2Flogin%2Fpage.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,11 @@\n+import { LoginForm } from \"@/components/login-form\";\n+\n+export default function Page() {\n+  return (\n+    <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\n+      <div className=\"w-full max-w-sm\">\n+        <LoginForm />\n+      </div>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "88f16d3bdc29aa182a98539ff70c3f787b9fe51f",
            "filename": "examples/with-supabase/app/auth/sign-up-success/page.tsx",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fsign-up-success%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fsign-up-success%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fauth%2Fsign-up-success%2Fpage.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,32 @@\n+import {\n+  Card,\n+  CardContent,\n+  CardDescription,\n+  CardHeader,\n+  CardTitle,\n+} from \"@/components/ui/card\";\n+\n+export default function Page() {\n+  return (\n+    <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\n+      <div className=\"w-full max-w-sm\">\n+        <div className=\"flex flex-col gap-6\">\n+          <Card>\n+            <CardHeader>\n+              <CardTitle className=\"text-2xl\">\n+                Thank you for signing up!\n+              </CardTitle>\n+              <CardDescription>Check your email to confirm</CardDescription>\n+            </CardHeader>\n+            <CardContent>\n+              <p className=\"text-sm text-muted-foreground\">\n+                You&apos;ve successfully signed up. Please check your email to\n+                confirm your account before signing in.\n+              </p>\n+            </CardContent>\n+          </Card>\n+        </div>\n+      </div>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "d5dca78800a60deb1339efdfb0d8f21c14285536",
            "filename": "examples/with-supabase/app/auth/sign-up/page.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fsign-up%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fsign-up%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fauth%2Fsign-up%2Fpage.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,11 @@\n+import { SignUpForm } from \"@/components/sign-up-form\";\n+\n+export default function Page() {\n+  return (\n+    <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\n+      <div className=\"w-full max-w-sm\">\n+        <SignUpForm />\n+      </div>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "ff4d176db18915ce32179b7ce0b102d89a7edb0f",
            "filename": "examples/with-supabase/app/auth/update-password/page.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fupdate-password%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fauth%2Fupdate-password%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fauth%2Fupdate-password%2Fpage.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,11 @@\n+import { UpdatePasswordForm } from \"@/components/update-password-form\";\n+\n+export default function Page() {\n+  return (\n+    <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\n+      <div className=\"w-full max-w-sm\">\n+        <UpdatePasswordForm />\n+      </div>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "9e332aa3faaf23b2c0990402cb4eeefb906ae9eb",
            "filename": "examples/with-supabase/app/globals.css",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fglobals.css",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fglobals.css",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fglobals.css?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -23,14 +23,13 @@\n     --border: 0 0% 89.8%;\n     --input: 0 0% 89.8%;\n     --ring: 0 0% 3.9%;\n-    --radius: 0.5rem;\n     --chart-1: 12 76% 61%;\n     --chart-2: 173 58% 39%;\n     --chart-3: 197 37% 24%;\n     --chart-4: 43 74% 66%;\n     --chart-5: 27 87% 67%;\n+    --radius: 0.5rem;\n   }\n-\n   .dark {\n     --background: 0 0% 3.9%;\n     --foreground: 0 0% 98%;"
        },
        {
            "sha": "4d3424a686b3732368682c58c3c6634d2ce89518",
            "filename": "examples/with-supabase/app/layout.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 42,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Flayout.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,24 +1,20 @@\n-import DeployButton from \"@/components/deploy-button\";\n-import { EnvVarWarning } from \"@/components/env-var-warning\";\n-import HeaderAuth from \"@/components/header-auth\";\n-import { ThemeSwitcher } from \"@/components/theme-switcher\";\n-import { hasEnvVars } from \"@/utils/supabase/check-env-vars\";\n+import type { Metadata } from \"next\";\n import { Geist } from \"next/font/google\";\n import { ThemeProvider } from \"next-themes\";\n-import Link from \"next/link\";\n import \"./globals.css\";\n \n const defaultUrl = process.env.VERCEL_URL\n   ? `https://${process.env.VERCEL_URL}`\n   : \"http://localhost:3000\";\n \n-export const metadata = {\n+export const metadata: Metadata = {\n   metadataBase: new URL(defaultUrl),\n   title: \"Next.js and Supabase Starter Kit\",\n   description: \"The fastest way to build apps with Next.js and Supabase\",\n };\n \n const geistSans = Geist({\n+  variable: \"--font-geist-sans\",\n   display: \"swap\",\n   subsets: [\"latin\"],\n });\n@@ -29,47 +25,15 @@ export default function RootLayout({\n   children: React.ReactNode;\n }>) {\n   return (\n-    <html lang=\"en\" className={geistSans.className} suppressHydrationWarning>\n-      <body className=\"bg-background text-foreground\">\n+    <html lang=\"en\" suppressHydrationWarning>\n+      <body className={`${geistSans.className} antialiased`}>\n         <ThemeProvider\n           attribute=\"class\"\n           defaultTheme=\"system\"\n           enableSystem\n           disableTransitionOnChange\n         >\n-          <main className=\"min-h-screen flex flex-col items-center\">\n-            <div className=\"flex-1 w-full flex flex-col gap-20 items-center\">\n-              <nav className=\"w-full flex justify-center border-b border-b-foreground/10 h-16\">\n-                <div className=\"w-full max-w-5xl flex justify-between items-center p-3 px-5 text-sm\">\n-                  <div className=\"flex gap-5 items-center font-semibold\">\n-                    <Link href={\"/\"}>Next.js Supabase Starter</Link>\n-                    <div className=\"flex items-center gap-2\">\n-                      <DeployButton />\n-                    </div>\n-                  </div>\n-                  {!hasEnvVars ? <EnvVarWarning /> : <HeaderAuth />}\n-                </div>\n-              </nav>\n-              <div className=\"flex flex-col gap-20 max-w-5xl p-5\">\n-                {children}\n-              </div>\n-\n-              <footer className=\"w-full flex items-center justify-center border-t mx-auto text-center text-xs gap-8 py-16\">\n-                <p>\n-                  Powered by{\" \"}\n-                  <a\n-                    href=\"https://supabase.com/?utm_source=create-next-app&utm_medium=template&utm_term=nextjs\"\n-                    target=\"_blank\"\n-                    className=\"font-bold hover:underline\"\n-                    rel=\"noreferrer\"\n-                  >\n-                    Supabase\n-                  </a>\n-                </p>\n-                <ThemeSwitcher />\n-              </footer>\n-            </div>\n-          </main>\n+          {children}\n         </ThemeProvider>\n       </body>\n     </html>"
        },
        {
            "sha": "e1fff077ee43fb10a5ccf068b9b6f4109df94e63",
            "filename": "examples/with-supabase/app/page.tsx",
            "status": "modified",
            "additions": 47,
            "deletions": 12,
            "changes": 59,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fpage.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,16 +1,51 @@\n-import Hero from \"@/components/hero\";\n-import ConnectSupabaseSteps from \"@/components/tutorial/connect-supabase-steps\";\n-import SignUpUserSteps from \"@/components/tutorial/sign-up-user-steps\";\n-import { hasEnvVars } from \"@/utils/supabase/check-env-vars\";\n+import { DeployButton } from \"@/components/deploy-button\";\n+import { EnvVarWarning } from \"@/components/env-var-warning\";\n+import { AuthButton } from \"@/components/auth-button\";\n+import { Hero } from \"@/components/hero\";\n+import { ThemeSwitcher } from \"@/components/theme-switcher\";\n+import { ConnectSupabaseSteps } from \"@/components/tutorial/connect-supabase-steps\";\n+import { SignUpUserSteps } from \"@/components/tutorial/sign-up-user-steps\";\n+import { hasEnvVars } from \"@/lib/utils\";\n+import Link from \"next/link\";\n \n-export default async function Home() {\n+export default function Home() {\n   return (\n-    <>\n-      <Hero />\n-      <main className=\"flex-1 flex flex-col gap-6 px-4\">\n-        <h2 className=\"font-medium text-xl mb-4\">Next steps</h2>\n-        {hasEnvVars ? <SignUpUserSteps /> : <ConnectSupabaseSteps />}\n-      </main>\n-    </>\n+    <main className=\"min-h-screen flex flex-col items-center\">\n+      <div className=\"flex-1 w-full flex flex-col gap-20 items-center\">\n+        <nav className=\"w-full flex justify-center border-b border-b-foreground/10 h-16\">\n+          <div className=\"w-full max-w-5xl flex justify-between items-center p-3 px-5 text-sm\">\n+            <div className=\"flex gap-5 items-center font-semibold\">\n+              <Link href={\"/\"}>Next.js Supabase Starter</Link>\n+              <div className=\"flex items-center gap-2\">\n+                <DeployButton />\n+              </div>\n+            </div>\n+            {!hasEnvVars ? <EnvVarWarning /> : <AuthButton />}\n+          </div>\n+        </nav>\n+        <div className=\"flex-1 flex flex-col gap-20 max-w-5xl p-5\">\n+          <Hero />\n+          <main className=\"flex-1 flex flex-col gap-6 px-4\">\n+            <h2 className=\"font-medium text-xl mb-4\">Next steps</h2>\n+            {hasEnvVars ? <SignUpUserSteps /> : <ConnectSupabaseSteps />}\n+          </main>\n+        </div>\n+\n+        <footer className=\"w-full flex items-center justify-center border-t mx-auto text-center text-xs gap-8 py-16\">\n+          <p>\n+            Powered by{\" \"}\n+            <a\n+              href=\"https://supabase.com/?utm_source=create-next-app&utm_medium=template&utm_term=nextjs\"\n+              target=\"_blank\"\n+              className=\"font-bold hover:underline\"\n+              rel=\"noreferrer\"\n+            >\n+              Supabase\n+            </a>\n+          </p>\n+          <ThemeSwitcher />\n+        </footer>\n+      </div>\n+    </main>\n   );\n }"
        },
        {
            "sha": "765805469b33a1142bf5593dcc2e0cc1cef6a73c",
            "filename": "examples/with-supabase/app/protected/layout.tsx",
            "status": "added",
            "additions": 48,
            "deletions": 0,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fprotected%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fprotected%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fprotected%2Flayout.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,48 @@\n+import { DeployButton } from \"@/components/deploy-button\";\n+import { EnvVarWarning } from \"@/components/env-var-warning\";\n+import { AuthButton } from \"@/components/auth-button\";\n+import { ThemeSwitcher } from \"@/components/theme-switcher\";\n+import { hasEnvVars } from \"@/lib/utils\";\n+import Link from \"next/link\";\n+\n+export default function ProtectedLayout({\n+  children,\n+}: {\n+  children: React.ReactNode;\n+}) {\n+  return (\n+    <main className=\"min-h-screen flex flex-col items-center\">\n+      <div className=\"flex-1 w-full flex flex-col gap-20 items-center\">\n+        <nav className=\"w-full flex justify-center border-b border-b-foreground/10 h-16\">\n+          <div className=\"w-full max-w-5xl flex justify-between items-center p-3 px-5 text-sm\">\n+            <div className=\"flex gap-5 items-center font-semibold\">\n+              <Link href={\"/\"}>Next.js Supabase Starter</Link>\n+              <div className=\"flex items-center gap-2\">\n+                <DeployButton />\n+              </div>\n+            </div>\n+            {!hasEnvVars ? <EnvVarWarning /> : <AuthButton />}\n+          </div>\n+        </nav>\n+        <div className=\"flex-1 flex flex-col gap-20 max-w-5xl p-5\">\n+          {children}\n+        </div>\n+\n+        <footer className=\"w-full flex items-center justify-center border-t mx-auto text-center text-xs gap-8 py-16\">\n+          <p>\n+            Powered by{\" \"}\n+            <a\n+              href=\"https://supabase.com/?utm_source=create-next-app&utm_medium=template&utm_term=nextjs\"\n+              target=\"_blank\"\n+              className=\"font-bold hover:underline\"\n+              rel=\"noreferrer\"\n+            >\n+              Supabase\n+            </a>\n+          </p>\n+          <ThemeSwitcher />\n+        </footer>\n+      </div>\n+    </main>\n+  );\n+}"
        },
        {
            "sha": "8f4b313d7e0e92d340a20d5a601b932c0f4c6df3",
            "filename": "examples/with-supabase/app/protected/page.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 10,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fprotected%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fapp%2Fprotected%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fprotected%2Fpage.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,17 +1,15 @@\n-import FetchDataSteps from \"@/components/tutorial/fetch-data-steps\";\n-import { createClient } from \"@/utils/supabase/server\";\n-import { InfoIcon } from \"lucide-react\";\n import { redirect } from \"next/navigation\";\n \n+import { createClient } from \"@/lib/supabase/server\";\n+import { InfoIcon } from \"lucide-react\";\n+import { FetchDataSteps } from \"@/components/tutorial/fetch-data-steps\";\n+\n export default async function ProtectedPage() {\n   const supabase = await createClient();\n \n-  const {\n-    data: { user },\n-  } = await supabase.auth.getUser();\n-\n-  if (!user) {\n-    return redirect(\"/sign-in\");\n+  const { data, error } = await supabase.auth.getUser();\n+  if (error || !data?.user) {\n+    redirect(\"/auth/login\");\n   }\n \n   return (\n@@ -26,7 +24,7 @@ export default async function ProtectedPage() {\n       <div className=\"flex flex-col gap-2 items-start\">\n         <h2 className=\"font-bold text-2xl mb-4\">Your user details</h2>\n         <pre className=\"text-xs font-mono p-3 rounded border max-h-32 overflow-auto\">\n-          {JSON.stringify(user, null, 2)}\n+          {JSON.stringify(data.user, null, 2)}\n         </pre>\n       </div>\n       <div>"
        },
        {
            "sha": "9cd70846530f192e847baa5876689f5aff79a97d",
            "filename": "examples/with-supabase/app/protected/reset-password/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 37,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2Fprotected%2Freset-password%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fapp%2Fprotected%2Freset-password%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fapp%2Fprotected%2Freset-password%2Fpage.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,37 +0,0 @@\n-import { resetPasswordAction } from \"@/app/actions\";\n-import { FormMessage, Message } from \"@/components/form-message\";\n-import { SubmitButton } from \"@/components/submit-button\";\n-import { Input } from \"@/components/ui/input\";\n-import { Label } from \"@/components/ui/label\";\n-\n-export default async function ResetPassword(props: {\n-  searchParams: Promise<Message>;\n-}) {\n-  const searchParams = await props.searchParams;\n-  return (\n-    <form className=\"flex flex-col w-full max-w-md p-4 gap-2 [&>input]:mb-4\">\n-      <h1 className=\"text-2xl font-medium\">Reset password</h1>\n-      <p className=\"text-sm text-foreground/60\">\n-        Please enter your new password below.\n-      </p>\n-      <Label htmlFor=\"password\">New password</Label>\n-      <Input\n-        type=\"password\"\n-        name=\"password\"\n-        placeholder=\"New password\"\n-        required\n-      />\n-      <Label htmlFor=\"confirmPassword\">Confirm password</Label>\n-      <Input\n-        type=\"password\"\n-        name=\"confirmPassword\"\n-        placeholder=\"Confirm password\"\n-        required\n-      />\n-      <SubmitButton formAction={resetPasswordAction}>\n-        Reset password\n-      </SubmitButton>\n-      <FormMessage message={searchParams} />\n-    </form>\n-  );\n-}"
        },
        {
            "sha": "4ee62ee10547066d7ee70f94d79c786226c3c12c",
            "filename": "examples/with-supabase/components.json",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents.json",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents.json?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,17 +1,21 @@\n {\n   \"$schema\": \"https://ui.shadcn.com/schema.json\",\n-  \"style\": \"default\",\n+  \"style\": \"new-york\",\n   \"rsc\": true,\n   \"tsx\": true,\n   \"tailwind\": {\n-    \"config\": \"tailwind.config.ts\",\n+    \"config\": \"\",\n     \"css\": \"app/globals.css\",\n     \"baseColor\": \"neutral\",\n     \"cssVariables\": true,\n     \"prefix\": \"\"\n   },\n   \"aliases\": {\n     \"components\": \"@/components\",\n-    \"utils\": \"@/lib/utils\"\n-  }\n+    \"utils\": \"@/lib/utils\",\n+    \"ui\": \"@/components/ui\",\n+    \"lib\": \"@/lib\",\n+    \"hooks\": \"@/hooks\"\n+  },\n+  \"iconLibrary\": \"lucide\"\n }"
        },
        {
            "sha": "0f220bbadfcb8ec95f4b601e653982b02f30b05b",
            "filename": "examples/with-supabase/components/auth-button.tsx",
            "status": "added",
            "additions": 28,
            "deletions": 0,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fauth-button.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fauth-button.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fauth-button.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,28 @@\n+import Link from \"next/link\";\n+import { Button } from \"./ui/button\";\n+import { createClient } from \"@/lib/supabase/server\";\n+import { LogoutButton } from \"./logout-button\";\n+\n+export async function AuthButton() {\n+  const supabase = await createClient();\n+\n+  const {\n+    data: { user },\n+  } = await supabase.auth.getUser();\n+\n+  return user ? (\n+    <div className=\"flex items-center gap-4\">\n+      Hey, {user.email}!\n+      <LogoutButton />\n+    </div>\n+  ) : (\n+    <div className=\"flex gap-2\">\n+      <Button asChild size=\"sm\" variant={\"outline\"}>\n+        <Link href=\"/auth/login\">Sign in</Link>\n+      </Button>\n+      <Button asChild size=\"sm\" variant={\"default\"}>\n+        <Link href=\"/auth/sign-up\">Sign up</Link>\n+      </Button>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "a6b2c2628587b35a4af264d4f130a63c80b9108d",
            "filename": "examples/with-supabase/components/deploy-button.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fdeploy-button.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fdeploy-button.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fdeploy-button.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,14 +1,14 @@\n import Link from \"next/link\";\n import { Button } from \"./ui/button\";\n \n-export default function DeployButton() {\n+export function DeployButton() {\n   return (\n     <>\n       <Link\n         href=\"https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fwith-supabase&project-name=nextjs-with-supabase&repository-name=nextjs-with-supabase&demo-title=nextjs-with-supabase&demo-description=This+starter+configures+Supabase+Auth+to+use+cookies%2C+making+the+user%27s+session+available+throughout+the+entire+Next.js+app+-+Client+Components%2C+Server+Components%2C+Route+Handlers%2C+Server+Actions+and+Middleware.&demo-url=https%3A%2F%2Fdemo-nextjs-with-supabase.vercel.app%2F&external-id=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fwith-supabase&demo-image=https%3A%2F%2Fdemo-nextjs-with-supabase.vercel.app%2Fopengraph-image.png\"\n         target=\"_blank\"\n       >\n-        <Button className=\"flex items-center gap-2\" size={\"sm\"}>\n+        <Button className=\"flex items-center gap-2\" size=\"sm\">\n           <svg\n             className=\"h-3 w-3\"\n             viewBox=\"0 0 76 65\""
        },
        {
            "sha": "2caa52820eeac501956e43d664b37f87c1e78559",
            "filename": "examples/with-supabase/components/env-var-warning.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 17,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fenv-var-warning.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fenv-var-warning.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fenv-var-warning.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,4 +1,3 @@\n-import Link from \"next/link\";\n import { Badge } from \"./ui/badge\";\n import { Button } from \"./ui/button\";\n \n@@ -9,23 +8,11 @@ export function EnvVarWarning() {\n         Supabase environment variables required\n       </Badge>\n       <div className=\"flex gap-2\">\n-        <Button\n-          asChild\n-          size=\"sm\"\n-          variant={\"outline\"}\n-          disabled\n-          className=\"opacity-75 cursor-none pointer-events-none\"\n-        >\n-          <Link href=\"/sign-in\">Sign in</Link>\n+        <Button size=\"sm\" variant={\"outline\"} disabled>\n+          Sign in\n         </Button>\n-        <Button\n-          asChild\n-          size=\"sm\"\n-          variant={\"default\"}\n-          disabled\n-          className=\"opacity-75 cursor-none pointer-events-none\"\n-        >\n-          <Link href=\"/sign-up\">Sign up</Link>\n+        <Button size=\"sm\" variant={\"default\"} disabled>\n+          Sign up\n         </Button>\n       </div>\n     </div>"
        },
        {
            "sha": "fd96eae4e8a245530d06ebaa4061a49fe4d9c49a",
            "filename": "examples/with-supabase/components/forgot-password-form.tsx",
            "status": "added",
            "additions": 105,
            "deletions": 0,
            "changes": 105,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fforgot-password-form.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fforgot-password-form.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fforgot-password-form.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,105 @@\n+\"use client\";\n+\n+import { cn } from \"@/lib/utils\";\n+import { createClient } from \"@/lib/supabase/client\";\n+import { Button } from \"@/components/ui/button\";\n+import {\n+  Card,\n+  CardContent,\n+  CardDescription,\n+  CardHeader,\n+  CardTitle,\n+} from \"@/components/ui/card\";\n+import { Input } from \"@/components/ui/input\";\n+import { Label } from \"@/components/ui/label\";\n+import Link from \"next/link\";\n+import { useState } from \"react\";\n+\n+export function ForgotPasswordForm({\n+  className,\n+  ...props\n+}: React.ComponentPropsWithoutRef<\"div\">) {\n+  const [email, setEmail] = useState(\"\");\n+  const [error, setError] = useState<string | null>(null);\n+  const [success, setSuccess] = useState(false);\n+  const [isLoading, setIsLoading] = useState(false);\n+\n+  const handleForgotPassword = async (e: React.FormEvent) => {\n+    e.preventDefault();\n+    const supabase = createClient();\n+    setIsLoading(true);\n+    setError(null);\n+\n+    try {\n+      // The url which will be included in the email. This URL needs to be configured in your redirect URLs in the Supabase dashboard at https://supabase.com/dashboard/project/_/auth/url-configuration\n+      const { error } = await supabase.auth.resetPasswordForEmail(email, {\n+        redirectTo: `${window.location.origin}/auth/update-password`,\n+      });\n+      if (error) throw error;\n+      setSuccess(true);\n+    } catch (error: unknown) {\n+      setError(error instanceof Error ? error.message : \"An error occurred\");\n+    } finally {\n+      setIsLoading(false);\n+    }\n+  };\n+\n+  return (\n+    <div className={cn(\"flex flex-col gap-6\", className)} {...props}>\n+      {success ? (\n+        <Card>\n+          <CardHeader>\n+            <CardTitle className=\"text-2xl\">Check Your Email</CardTitle>\n+            <CardDescription>Password reset instructions sent</CardDescription>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-sm text-muted-foreground\">\n+              If you registered using your email and password, you will receive\n+              a password reset email.\n+            </p>\n+          </CardContent>\n+        </Card>\n+      ) : (\n+        <Card>\n+          <CardHeader>\n+            <CardTitle className=\"text-2xl\">Reset Your Password</CardTitle>\n+            <CardDescription>\n+              Type in your email and we&apos;ll send you a link to reset your\n+              password\n+            </CardDescription>\n+          </CardHeader>\n+          <CardContent>\n+            <form onSubmit={handleForgotPassword}>\n+              <div className=\"flex flex-col gap-6\">\n+                <div className=\"grid gap-2\">\n+                  <Label htmlFor=\"email\">Email</Label>\n+                  <Input\n+                    id=\"email\"\n+                    type=\"email\"\n+                    placeholder=\"m@example.com\"\n+                    required\n+                    value={email}\n+                    onChange={(e) => setEmail(e.target.value)}\n+                  />\n+                </div>\n+                {error && <p className=\"text-sm text-red-500\">{error}</p>}\n+                <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n+                  {isLoading ? \"Sending...\" : \"Send reset email\"}\n+                </Button>\n+              </div>\n+              <div className=\"mt-4 text-center text-sm\">\n+                Already have an account?{\" \"}\n+                <Link\n+                  href=\"/auth/login\"\n+                  className=\"underline underline-offset-4\"\n+                >\n+                  Login\n+                </Link>\n+              </div>\n+            </form>\n+          </CardContent>\n+        </Card>\n+      )}\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "547fb9f747a94af54d4720aee4ce7b1e2cc47049",
            "filename": "examples/with-supabase/components/form-message.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fcomponents%2Fform-message.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fcomponents%2Fform-message.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fform-message.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,24 +0,0 @@\n-export type Message =\n-  | { success: string }\n-  | { error: string }\n-  | { message: string };\n-\n-export function FormMessage({ message }: { message: Message }) {\n-  return (\n-    <div className=\"flex flex-col gap-2 w-full max-w-md text-sm\">\n-      {\"success\" in message && (\n-        <div className=\"text-foreground border-l-2 border-foreground px-4\">\n-          {message.success}\n-        </div>\n-      )}\n-      {\"error\" in message && (\n-        <div className=\"text-destructive-foreground border-l-2 border-destructive-foreground px-4\">\n-          {message.error}\n-        </div>\n-      )}\n-      {\"message\" in message && (\n-        <div className=\"text-foreground border-l-2 px-4\">{message.message}</div>\n-      )}\n-    </div>\n-  );\n-}"
        },
        {
            "sha": "eb9d65c1e7c03713ba2fc83b0e870d45cd78607a",
            "filename": "examples/with-supabase/components/header-auth.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 70,
            "changes": 70,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fcomponents%2Fheader-auth.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fcomponents%2Fheader-auth.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fheader-auth.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,70 +0,0 @@\n-import { signOutAction } from \"@/app/actions\";\n-import { hasEnvVars } from \"@/utils/supabase/check-env-vars\";\n-import Link from \"next/link\";\n-import { Badge } from \"./ui/badge\";\n-import { Button } from \"./ui/button\";\n-import { createClient } from \"@/utils/supabase/server\";\n-\n-export default async function AuthButton() {\n-  const supabase = await createClient();\n-\n-  const {\n-    data: { user },\n-  } = await supabase.auth.getUser();\n-\n-  if (!hasEnvVars) {\n-    return (\n-      <>\n-        <div className=\"flex gap-4 items-center\">\n-          <div>\n-            <Badge\n-              variant={\"default\"}\n-              className=\"font-normal pointer-events-none\"\n-            >\n-              Please update .env.local file with anon key and url\n-            </Badge>\n-          </div>\n-          <div className=\"flex gap-2\">\n-            <Button\n-              asChild\n-              size=\"sm\"\n-              variant={\"outline\"}\n-              disabled\n-              className=\"opacity-75 cursor-none pointer-events-none\"\n-            >\n-              <Link href=\"/sign-in\">Sign in</Link>\n-            </Button>\n-            <Button\n-              asChild\n-              size=\"sm\"\n-              variant={\"default\"}\n-              disabled\n-              className=\"opacity-75 cursor-none pointer-events-none\"\n-            >\n-              <Link href=\"/sign-up\">Sign up</Link>\n-            </Button>\n-          </div>\n-        </div>\n-      </>\n-    );\n-  }\n-  return user ? (\n-    <div className=\"flex items-center gap-4\">\n-      Hey, {user.email}!\n-      <form action={signOutAction}>\n-        <Button type=\"submit\" variant={\"outline\"}>\n-          Sign out\n-        </Button>\n-      </form>\n-    </div>\n-  ) : (\n-    <div className=\"flex gap-2\">\n-      <Button asChild size=\"sm\" variant={\"outline\"}>\n-        <Link href=\"/sign-in\">Sign in</Link>\n-      </Button>\n-      <Button asChild size=\"sm\" variant={\"default\"}>\n-        <Link href=\"/sign-up\">Sign up</Link>\n-      </Button>\n-    </div>\n-  );\n-}"
        },
        {
            "sha": "4a31bd8ff6c1d1895ccce0f69d365fec8331e5f8",
            "filename": "examples/with-supabase/components/hero.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fhero.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fhero.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fhero.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,7 +1,7 @@\n-import NextLogo from \"./next-logo\";\n-import SupabaseLogo from \"./supabase-logo\";\n+import { NextLogo } from \"./next-logo\";\n+import { SupabaseLogo } from \"./supabase-logo\";\n \n-export default function Header() {\n+export function Hero() {\n   return (\n     <div className=\"flex flex-col gap-16 items-center\">\n       <div className=\"flex gap-8 justify-center items-center\">"
        },
        {
            "sha": "23040a0787258c9207424bbc7b5e7f7624ec6600",
            "filename": "examples/with-supabase/components/login-form.tsx",
            "status": "added",
            "additions": 110,
            "deletions": 0,
            "changes": 110,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Flogin-form.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Flogin-form.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Flogin-form.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,110 @@\n+\"use client\";\n+\n+import { cn } from \"@/lib/utils\";\n+import { createClient } from \"@/lib/supabase/client\";\n+import { Button } from \"@/components/ui/button\";\n+import {\n+  Card,\n+  CardContent,\n+  CardDescription,\n+  CardHeader,\n+  CardTitle,\n+} from \"@/components/ui/card\";\n+import { Input } from \"@/components/ui/input\";\n+import { Label } from \"@/components/ui/label\";\n+import Link from \"next/link\";\n+import { useRouter } from \"next/navigation\";\n+import { useState } from \"react\";\n+\n+export function LoginForm({\n+  className,\n+  ...props\n+}: React.ComponentPropsWithoutRef<\"div\">) {\n+  const [email, setEmail] = useState(\"\");\n+  const [password, setPassword] = useState(\"\");\n+  const [error, setError] = useState<string | null>(null);\n+  const [isLoading, setIsLoading] = useState(false);\n+  const router = useRouter();\n+\n+  const handleLogin = async (e: React.FormEvent) => {\n+    e.preventDefault();\n+    const supabase = createClient();\n+    setIsLoading(true);\n+    setError(null);\n+\n+    try {\n+      const { error } = await supabase.auth.signInWithPassword({\n+        email,\n+        password,\n+      });\n+      if (error) throw error;\n+      // Update this route to redirect to an authenticated route. The user already has an active session.\n+      router.push(\"/protected\");\n+    } catch (error: unknown) {\n+      setError(error instanceof Error ? error.message : \"An error occurred\");\n+    } finally {\n+      setIsLoading(false);\n+    }\n+  };\n+\n+  return (\n+    <div className={cn(\"flex flex-col gap-6\", className)} {...props}>\n+      <Card>\n+        <CardHeader>\n+          <CardTitle className=\"text-2xl\">Login</CardTitle>\n+          <CardDescription>\n+            Enter your email below to login to your account\n+          </CardDescription>\n+        </CardHeader>\n+        <CardContent>\n+          <form onSubmit={handleLogin}>\n+            <div className=\"flex flex-col gap-6\">\n+              <div className=\"grid gap-2\">\n+                <Label htmlFor=\"email\">Email</Label>\n+                <Input\n+                  id=\"email\"\n+                  type=\"email\"\n+                  placeholder=\"m@example.com\"\n+                  required\n+                  value={email}\n+                  onChange={(e) => setEmail(e.target.value)}\n+                />\n+              </div>\n+              <div className=\"grid gap-2\">\n+                <div className=\"flex items-center\">\n+                  <Label htmlFor=\"password\">Password</Label>\n+                  <Link\n+                    href=\"/auth/forgot-password\"\n+                    className=\"ml-auto inline-block text-sm underline-offset-4 hover:underline\"\n+                  >\n+                    Forgot your password?\n+                  </Link>\n+                </div>\n+                <Input\n+                  id=\"password\"\n+                  type=\"password\"\n+                  required\n+                  value={password}\n+                  onChange={(e) => setPassword(e.target.value)}\n+                />\n+              </div>\n+              {error && <p className=\"text-sm text-red-500\">{error}</p>}\n+              <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n+                {isLoading ? \"Logging in...\" : \"Login\"}\n+              </Button>\n+            </div>\n+            <div className=\"mt-4 text-center text-sm\">\n+              Don&apos;t have an account?{\" \"}\n+              <Link\n+                href=\"/auth/sign-up\"\n+                className=\"underline underline-offset-4\"\n+              >\n+                Sign up\n+              </Link>\n+            </div>\n+          </form>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "4b8b90b36fdc3b0a68fd947a0a9e4aee2f6de744",
            "filename": "examples/with-supabase/components/logout-button.tsx",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Flogout-button.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Flogout-button.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Flogout-button.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,17 @@\n+\"use client\";\n+\n+import { createClient } from \"@/lib/supabase/client\";\n+import { Button } from \"@/components/ui/button\";\n+import { useRouter } from \"next/navigation\";\n+\n+export function LogoutButton() {\n+  const router = useRouter();\n+\n+  const logout = async () => {\n+    const supabase = createClient();\n+    await supabase.auth.signOut();\n+    router.push(\"/auth/login\");\n+  };\n+\n+  return <Button onClick={logout}>Logout</Button>;\n+}"
        },
        {
            "sha": "7b04400be381a76e96cce0192d02c4f171bb62e6",
            "filename": "examples/with-supabase/components/next-logo.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fnext-logo.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fnext-logo.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fnext-logo.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,4 +1,4 @@\n-export default function NextLogo() {\n+export function NextLogo() {\n   return (\n     <svg\n       aria-label=\"Next.js logotype\""
        },
        {
            "sha": "6c4b36977ad23995720a2f059c7fef6e63841993",
            "filename": "examples/with-supabase/components/sign-up-form.tsx",
            "status": "added",
            "additions": 120,
            "deletions": 0,
            "changes": 120,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fsign-up-form.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fsign-up-form.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fsign-up-form.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,120 @@\n+\"use client\";\n+\n+import { cn } from \"@/lib/utils\";\n+import { createClient } from \"@/lib/supabase/client\";\n+import { Button } from \"@/components/ui/button\";\n+import {\n+  Card,\n+  CardContent,\n+  CardDescription,\n+  CardHeader,\n+  CardTitle,\n+} from \"@/components/ui/card\";\n+import { Input } from \"@/components/ui/input\";\n+import { Label } from \"@/components/ui/label\";\n+import Link from \"next/link\";\n+import { useRouter } from \"next/navigation\";\n+import { useState } from \"react\";\n+\n+export function SignUpForm({\n+  className,\n+  ...props\n+}: React.ComponentPropsWithoutRef<\"div\">) {\n+  const [email, setEmail] = useState(\"\");\n+  const [password, setPassword] = useState(\"\");\n+  const [repeatPassword, setRepeatPassword] = useState(\"\");\n+  const [error, setError] = useState<string | null>(null);\n+  const [isLoading, setIsLoading] = useState(false);\n+  const router = useRouter();\n+\n+  const handleSignUp = async (e: React.FormEvent) => {\n+    e.preventDefault();\n+    const supabase = createClient();\n+    setIsLoading(true);\n+    setError(null);\n+\n+    if (password !== repeatPassword) {\n+      setError(\"Passwords do not match\");\n+      setIsLoading(false);\n+      return;\n+    }\n+\n+    try {\n+      const { error } = await supabase.auth.signUp({\n+        email,\n+        password,\n+        options: {\n+          emailRedirectTo: `${window.location.origin}/protected`,\n+        },\n+      });\n+      if (error) throw error;\n+      router.push(\"/auth/sign-up-success\");\n+    } catch (error: unknown) {\n+      setError(error instanceof Error ? error.message : \"An error occurred\");\n+    } finally {\n+      setIsLoading(false);\n+    }\n+  };\n+\n+  return (\n+    <div className={cn(\"flex flex-col gap-6\", className)} {...props}>\n+      <Card>\n+        <CardHeader>\n+          <CardTitle className=\"text-2xl\">Sign up</CardTitle>\n+          <CardDescription>Create a new account</CardDescription>\n+        </CardHeader>\n+        <CardContent>\n+          <form onSubmit={handleSignUp}>\n+            <div className=\"flex flex-col gap-6\">\n+              <div className=\"grid gap-2\">\n+                <Label htmlFor=\"email\">Email</Label>\n+                <Input\n+                  id=\"email\"\n+                  type=\"email\"\n+                  placeholder=\"m@example.com\"\n+                  required\n+                  value={email}\n+                  onChange={(e) => setEmail(e.target.value)}\n+                />\n+              </div>\n+              <div className=\"grid gap-2\">\n+                <div className=\"flex items-center\">\n+                  <Label htmlFor=\"password\">Password</Label>\n+                </div>\n+                <Input\n+                  id=\"password\"\n+                  type=\"password\"\n+                  required\n+                  value={password}\n+                  onChange={(e) => setPassword(e.target.value)}\n+                />\n+              </div>\n+              <div className=\"grid gap-2\">\n+                <div className=\"flex items-center\">\n+                  <Label htmlFor=\"repeat-password\">Repeat Password</Label>\n+                </div>\n+                <Input\n+                  id=\"repeat-password\"\n+                  type=\"password\"\n+                  required\n+                  value={repeatPassword}\n+                  onChange={(e) => setRepeatPassword(e.target.value)}\n+                />\n+              </div>\n+              {error && <p className=\"text-sm text-red-500\">{error}</p>}\n+              <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n+                {isLoading ? \"Creating an account...\" : \"Sign up\"}\n+              </Button>\n+            </div>\n+            <div className=\"mt-4 text-center text-sm\">\n+              Already have an account?{\" \"}\n+              <Link href=\"/auth/login\" className=\"underline underline-offset-4\">\n+                Login\n+              </Link>\n+            </div>\n+          </form>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "c1cd9f8728700a34e85d8593727c6dd6a64c8229",
            "filename": "examples/with-supabase/components/submit-button.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 23,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fcomponents%2Fsubmit-button.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fcomponents%2Fsubmit-button.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fsubmit-button.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,23 +0,0 @@\n-\"use client\";\n-\n-import { Button } from \"@/components/ui/button\";\n-import { type ComponentProps } from \"react\";\n-import { useFormStatus } from \"react-dom\";\n-\n-type Props = ComponentProps<typeof Button> & {\n-  pendingText?: string;\n-};\n-\n-export function SubmitButton({\n-  children,\n-  pendingText = \"Submitting...\",\n-  ...props\n-}: Props) {\n-  const { pending } = useFormStatus();\n-\n-  return (\n-    <Button type=\"submit\" aria-disabled={pending} {...props}>\n-      {pending ? pendingText : children}\n-    </Button>\n-  );\n-}"
        },
        {
            "sha": "d3461aaa62a501c4775f451fc665e3036630186d",
            "filename": "examples/with-supabase/components/supabase-logo.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fsupabase-logo.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fsupabase-logo.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fsupabase-logo.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,4 +1,4 @@\n-export default function SupabaseLogo() {\n+export function SupabaseLogo() {\n   return (\n     <svg\n       aria-label=\"Supabase logo\""
        },
        {
            "sha": "611c5009a28dad881dd51aa1c394b8139910a109",
            "filename": "examples/with-supabase/components/tutorial/connect-supabase-steps.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Fconnect-supabase-steps.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Fconnect-supabase-steps.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Fconnect-supabase-steps.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,6 +1,6 @@\n import { TutorialStep } from \"./tutorial-step\";\n \n-export default function ConnectSupabaseSteps() {\n+export function ConnectSupabaseSteps() {\n   return (\n     <ol className=\"flex flex-col gap-6\">\n       <TutorialStep title=\"Create Supabase project\">\n@@ -35,7 +35,7 @@ export default function ConnectSupabaseSteps() {\n             className=\"font-bold hover:underline text-foreground/80\"\n             rel=\"noreferrer\"\n           >\n-            your Supabase project's API Settings\n+            your Supabase project&apos;s API Settings\n           </a>\n           .\n         </p>"
        },
        {
            "sha": "a8b8041cc805cdeb92dd8dbab9d7ca6949c1befc",
            "filename": "examples/with-supabase/components/tutorial/fetch-data-steps.tsx",
            "status": "modified",
            "additions": 22,
            "deletions": 3,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Ffetch-data-steps.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Ffetch-data-steps.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Ffetch-data-steps.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -44,7 +44,7 @@ export default function Page() {\n }\n `.trim();\n \n-export default function FetchDataSteps() {\n+export function FetchDataSteps() {\n   return (\n     <ol className=\"flex flex-col gap-6\">\n       <TutorialStep title=\"Create some tables and insert some data\">\n@@ -59,7 +59,7 @@ export default function FetchDataSteps() {\n             Table Editor\n           </a>{\" \"}\n           for your Supabase project to create a table and insert some example\n-          data. If you're stuck for creativity, you can copy and paste the\n+          data. If you&apos;re stuck for creativity, you can copy and paste the\n           following into the{\" \"}\n           <a\n             href=\"https://supabase.com/dashboard/project/_/sql/new\"\n@@ -88,8 +88,27 @@ export default function FetchDataSteps() {\n         <CodeBlock code={client} />\n       </TutorialStep>\n \n+      <TutorialStep title=\"Explore the Supabase UI Library\">\n+        <p>\n+          Head over to the{\" \"}\n+          <a\n+            href=\"https://supabase.com/ui\"\n+            className=\"font-bold hover:underline text-foreground/80\"\n+          >\n+            Supabase UI library\n+          </a>{\" \"}\n+          and try installing some blocks. For example, you can install a\n+          Realtime Chat block by running:\n+        </p>\n+        <CodeBlock\n+          code={\n+            \"npx shadcn@latest add https://supabase.com/ui/r/realtime-chat-nextjs.json\"\n+          }\n+        />\n+      </TutorialStep>\n+\n       <TutorialStep title=\"Build in a weekend and scale to millions!\">\n-        <p>You're ready to launch your product to the world! </p>\n+        <p>You&apos;re ready to launch your product to the world! </p>\n       </TutorialStep>\n     </ol>\n   );"
        },
        {
            "sha": "47cce0ddd10f384568a95d8815062e13a9245584",
            "filename": "examples/with-supabase/components/tutorial/sign-up-user-steps.tsx",
            "status": "modified",
            "additions": 9,
            "deletions": 6,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Fsign-up-user-steps.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Fsign-up-user-steps.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Fsign-up-user-steps.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -2,7 +2,7 @@ import Link from \"next/link\";\n import { TutorialStep } from \"./tutorial-step\";\n import { ArrowUpRight } from \"lucide-react\";\n \n-export default function SignUpUserSteps() {\n+export function SignUpUserSteps() {\n   return (\n     <ol className=\"flex flex-col gap-6\">\n       {process.env.VERCEL_ENV === \"preview\" ||\n@@ -12,7 +12,7 @@ export default function SignUpUserSteps() {\n           <p className=\"mt-4\">\n             This particular deployment is\n             <span className=\"relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs font-medium text-secondary-foreground border\">\n-              \"{process.env.VERCEL_ENV}\"\n+              &quot;{process.env.VERCEL_ENV}&quot;\n             </span>{\" \"}\n             on\n             <span className=\"relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs font-medium text-secondary-foreground border\">\n@@ -48,7 +48,10 @@ export default function SignUpUserSteps() {\n             <li>\n               -{\" \"}\n               <span className=\"relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-xs font-medium text-secondary-foreground border\">\n-                {`https://${process.env.VERCEL_PROJECT_PRODUCTION_URL?.replace(\".vercel.app\", \"\")}-*-[vercel-team-url].vercel.app/**`}\n+                {`https://${process.env.VERCEL_PROJECT_PRODUCTION_URL?.replace(\n+                  \".vercel.app\",\n+                  \"\",\n+                )}-*-[vercel-team-url].vercel.app/**`}\n               </span>{\" \"}\n               (Vercel Team URL can be found in{\" \"}\n               <Link\n@@ -74,13 +77,13 @@ export default function SignUpUserSteps() {\n         <p>\n           Head over to the{\" \"}\n           <Link\n-            href=\"/sign-up\"\n+            href=\"auth/sign-up\"\n             className=\"font-bold hover:underline text-foreground/80\"\n           >\n             Sign up\n           </Link>{\" \"}\n-          page and sign up your first user. It's okay if this is just you for\n-          now. Your awesome idea will have plenty of users later!\n+          page and sign up your first user. It&apos;s okay if this is just you\n+          for now. Your awesome idea will have plenty of users later!\n         </p>\n       </TutorialStep>\n     </ol>"
        },
        {
            "sha": "288f9e30eb95bbbfdbe237c4125096a395bc03ce",
            "filename": "examples/with-supabase/components/typography/inline-code.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fcomponents%2Ftypography%2Finline-code.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fcomponents%2Ftypography%2Finline-code.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Ftypography%2Finline-code.tsx?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,7 +0,0 @@\n-export function TypographyInlineCode() {\n-  return (\n-    <code className=\"relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm font-semibold\">\n-      @radix-ui/react-alert-dialog\n-    </code>\n-  );\n-}"
        },
        {
            "sha": "f79598057a16b2e1b5cd1e54ad9a5d1afb03cdc6",
            "filename": "examples/with-supabase/components/ui/badge.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fbadge.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fbadge.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fbadge.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -4,16 +4,16 @@ import { cva, type VariantProps } from \"class-variance-authority\";\n import { cn } from \"@/lib/utils\";\n \n const badgeVariants = cva(\n-  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n+  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n   {\n     variants: {\n       variant: {\n         default:\n-          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n+          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n         secondary:\n           \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n         destructive:\n-          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n+          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n         outline: \"text-foreground\",\n       },\n     },"
        },
        {
            "sha": "d09a695dc94f1598933d364a378dbf46ef001b97",
            "filename": "examples/with-supabase/components/ui/button.tsx",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fbutton.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fbutton.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fbutton.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -5,25 +5,26 @@ import { cva, type VariantProps } from \"class-variance-authority\";\n import { cn } from \"@/lib/utils\";\n \n const buttonVariants = cva(\n-  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n+  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n   {\n     variants: {\n       variant: {\n-        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n+        default:\n+          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n         destructive:\n-          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n+          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n         outline:\n-          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n+          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n         secondary:\n-          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n+          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n         ghost: \"hover:bg-accent hover:text-accent-foreground\",\n         link: \"text-primary underline-offset-4 hover:underline\",\n       },\n       size: {\n-        default: \"h-10 px-4 py-2\",\n-        sm: \"h-9 rounded-md px-3\",\n-        lg: \"h-11 rounded-md px-8\",\n-        icon: \"h-10 w-10\",\n+        default: \"h-9 px-4 py-2\",\n+        sm: \"h-8 rounded-md px-3 text-xs\",\n+        lg: \"h-10 rounded-md px-8\",\n+        icon: \"h-9 w-9\",\n       },\n     },\n     defaultVariants: {"
        },
        {
            "sha": "1cc0c125307e0d97cd656cfe1944c5617a41b1bc",
            "filename": "examples/with-supabase/components/ui/card.tsx",
            "status": "added",
            "additions": 83,
            "deletions": 0,
            "changes": 83,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fcard.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fcard.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fcard.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,83 @@\n+import * as React from \"react\";\n+\n+import { cn } from \"@/lib/utils\";\n+\n+const Card = React.forwardRef<\n+  HTMLDivElement,\n+  React.HTMLAttributes<HTMLDivElement>\n+>(({ className, ...props }, ref) => (\n+  <div\n+    ref={ref}\n+    className={cn(\n+      \"rounded-xl border bg-card text-card-foreground shadow\",\n+      className,\n+    )}\n+    {...props}\n+  />\n+));\n+Card.displayName = \"Card\";\n+\n+const CardHeader = React.forwardRef<\n+  HTMLDivElement,\n+  React.HTMLAttributes<HTMLDivElement>\n+>(({ className, ...props }, ref) => (\n+  <div\n+    ref={ref}\n+    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n+    {...props}\n+  />\n+));\n+CardHeader.displayName = \"CardHeader\";\n+\n+const CardTitle = React.forwardRef<\n+  HTMLDivElement,\n+  React.HTMLAttributes<HTMLDivElement>\n+>(({ className, ...props }, ref) => (\n+  <div\n+    ref={ref}\n+    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n+    {...props}\n+  />\n+));\n+CardTitle.displayName = \"CardTitle\";\n+\n+const CardDescription = React.forwardRef<\n+  HTMLDivElement,\n+  React.HTMLAttributes<HTMLDivElement>\n+>(({ className, ...props }, ref) => (\n+  <div\n+    ref={ref}\n+    className={cn(\"text-sm text-muted-foreground\", className)}\n+    {...props}\n+  />\n+));\n+CardDescription.displayName = \"CardDescription\";\n+\n+const CardContent = React.forwardRef<\n+  HTMLDivElement,\n+  React.HTMLAttributes<HTMLDivElement>\n+>(({ className, ...props }, ref) => (\n+  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n+));\n+CardContent.displayName = \"CardContent\";\n+\n+const CardFooter = React.forwardRef<\n+  HTMLDivElement,\n+  React.HTMLAttributes<HTMLDivElement>\n+>(({ className, ...props }, ref) => (\n+  <div\n+    ref={ref}\n+    className={cn(\"flex items-center p-6 pt-0\", className)}\n+    {...props}\n+  />\n+));\n+CardFooter.displayName = \"CardFooter\";\n+\n+export {\n+  Card,\n+  CardHeader,\n+  CardFooter,\n+  CardTitle,\n+  CardDescription,\n+  CardContent,\n+};"
        },
        {
            "sha": "89148edf560e684c9faccaa323333c6398149b10",
            "filename": "examples/with-supabase/components/ui/checkbox.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fcheckbox.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fcheckbox.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fcheckbox.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -13,7 +13,7 @@ const Checkbox = React.forwardRef<\n   <CheckboxPrimitive.Root\n     ref={ref}\n     className={cn(\n-      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n+      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n       className,\n     )}\n     {...props}"
        },
        {
            "sha": "78a751e02b4c5595759e6cc62f7832c71ee36d18",
            "filename": "examples/with-supabase/components/ui/dropdown-menu.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fdropdown-menu.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fdropdown-menu.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fui%2Fdropdown-menu.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -27,14 +27,14 @@ const DropdownMenuSubTrigger = React.forwardRef<\n   <DropdownMenuPrimitive.SubTrigger\n     ref={ref}\n     className={cn(\n-      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent\",\n+      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n       inset && \"pl-8\",\n       className,\n     )}\n     {...props}\n   >\n     {children}\n-    <ChevronRight className=\"ml-auto h-4 w-4\" />\n+    <ChevronRight className=\"ml-auto\" />\n   </DropdownMenuPrimitive.SubTrigger>\n ));\n DropdownMenuSubTrigger.displayName =\n@@ -47,7 +47,7 @@ const DropdownMenuSubContent = React.forwardRef<\n   <DropdownMenuPrimitive.SubContent\n     ref={ref}\n     className={cn(\n-      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n+      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n       className,\n     )}\n     {...props}\n@@ -65,7 +65,8 @@ const DropdownMenuContent = React.forwardRef<\n       ref={ref}\n       sideOffset={sideOffset}\n       className={cn(\n-        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n+        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n+        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n         className,\n       )}\n       {...props}\n@@ -83,7 +84,7 @@ const DropdownMenuItem = React.forwardRef<\n   <DropdownMenuPrimitive.Item\n     ref={ref}\n     className={cn(\n-      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n+      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n       inset && \"pl-8\",\n       className,\n     )}"
        },
        {
            "sha": "7db524115c08e80b10d5282d1bb504b06b238d17",
            "filename": "examples/with-supabase/components/ui/input.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Finput.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fui%2Finput.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fui%2Finput.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -2,16 +2,13 @@ import * as React from \"react\";\n \n import { cn } from \"@/lib/utils\";\n \n-export interface InputProps\n-  extends React.InputHTMLAttributes<HTMLInputElement> {}\n-\n-const Input = React.forwardRef<HTMLInputElement, InputProps>(\n+const Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n   ({ className, type, ...props }, ref) => {\n     return (\n       <input\n         type={type}\n         className={cn(\n-          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n+          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n           className,\n         )}\n         ref={ref}"
        },
        {
            "sha": "821af680e56f65d791c1faace5cb6232ca73b0dd",
            "filename": "examples/with-supabase/components/update-password-form.tsx",
            "status": "added",
            "additions": 78,
            "deletions": 0,
            "changes": 78,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fupdate-password-form.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fcomponents%2Fupdate-password-form.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Fupdate-password-form.tsx?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,78 @@\n+\"use client\";\n+\n+import { cn } from \"@/lib/utils\";\n+import { createClient } from \"@/lib/supabase/client\";\n+import { Button } from \"@/components/ui/button\";\n+import {\n+  Card,\n+  CardContent,\n+  CardDescription,\n+  CardHeader,\n+  CardTitle,\n+} from \"@/components/ui/card\";\n+import { Input } from \"@/components/ui/input\";\n+import { Label } from \"@/components/ui/label\";\n+import { useRouter } from \"next/navigation\";\n+import { useState } from \"react\";\n+\n+export function UpdatePasswordForm({\n+  className,\n+  ...props\n+}: React.ComponentPropsWithoutRef<\"div\">) {\n+  const [password, setPassword] = useState(\"\");\n+  const [error, setError] = useState<string | null>(null);\n+  const [isLoading, setIsLoading] = useState(false);\n+  const router = useRouter();\n+\n+  const handleForgotPassword = async (e: React.FormEvent) => {\n+    e.preventDefault();\n+    const supabase = createClient();\n+    setIsLoading(true);\n+    setError(null);\n+\n+    try {\n+      const { error } = await supabase.auth.updateUser({ password });\n+      if (error) throw error;\n+      // Update this route to redirect to an authenticated route. The user already has an active session.\n+      router.push(\"/protected\");\n+    } catch (error: unknown) {\n+      setError(error instanceof Error ? error.message : \"An error occurred\");\n+    } finally {\n+      setIsLoading(false);\n+    }\n+  };\n+\n+  return (\n+    <div className={cn(\"flex flex-col gap-6\", className)} {...props}>\n+      <Card>\n+        <CardHeader>\n+          <CardTitle className=\"text-2xl\">Reset Your Password</CardTitle>\n+          <CardDescription>\n+            Please enter your new password below.\n+          </CardDescription>\n+        </CardHeader>\n+        <CardContent>\n+          <form onSubmit={handleForgotPassword}>\n+            <div className=\"flex flex-col gap-6\">\n+              <div className=\"grid gap-2\">\n+                <Label htmlFor=\"password\">New password</Label>\n+                <Input\n+                  id=\"password\"\n+                  type=\"password\"\n+                  placeholder=\"New password\"\n+                  required\n+                  value={password}\n+                  onChange={(e) => setPassword(e.target.value)}\n+                />\n+              </div>\n+              {error && <p className=\"text-sm text-red-500\">{error}</p>}\n+              <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n+                {isLoading ? \"Saving...\" : \"Save new password\"}\n+              </Button>\n+            </div>\n+          </form>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  );\n+}"
        },
        {
            "sha": "c85fb67c463f20d1ee449b0ffee725a61dfb9259",
            "filename": "examples/with-supabase/eslint.config.mjs",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Feslint.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Feslint.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Feslint.config.mjs?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,16 @@\n+import { dirname } from \"path\";\n+import { fileURLToPath } from \"url\";\n+import { FlatCompat } from \"@eslint/eslintrc\";\n+\n+const __filename = fileURLToPath(import.meta.url);\n+const __dirname = dirname(__filename);\n+\n+const compat = new FlatCompat({\n+  baseDirectory: __dirname,\n+});\n+\n+const eslintConfig = [\n+  ...compat.extends(\"next/core-web-vitals\", \"next/typescript\"),\n+];\n+\n+export default eslintConfig;"
        },
        {
            "sha": "2ad25911da51c4cf9b1985a11520d90620a66e0a",
            "filename": "examples/with-supabase/lib/supabase/client.ts",
            "status": "renamed",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fclient.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fclient.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fclient.ts?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,7 +1,8 @@\n import { createBrowserClient } from \"@supabase/ssr\";\n \n-export const createClient = () =>\n-  createBrowserClient(\n+export function createClient() {\n+  return createBrowserClient(\n     process.env.NEXT_PUBLIC_SUPABASE_URL!,\n     process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n   );\n+}",
            "previous_filename": "examples/with-supabase/utils/supabase/client.ts"
        },
        {
            "sha": "b770c47ea363cc9568b11d4bfff0220a45cf0033",
            "filename": "examples/with-supabase/lib/supabase/middleware.ts",
            "status": "added",
            "additions": 74,
            "deletions": 0,
            "changes": 74,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fmiddleware.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fmiddleware.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fmiddleware.ts?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,74 @@\n+import { createServerClient } from \"@supabase/ssr\";\n+import { NextResponse, type NextRequest } from \"next/server\";\n+import { hasEnvVars } from \"../utils\";\n+\n+export async function updateSession(request: NextRequest) {\n+  let supabaseResponse = NextResponse.next({\n+    request,\n+  });\n+\n+  // If the env vars are not set, skip middleware check. You can remove this once you setup the project.\n+  if (!hasEnvVars) {\n+    return supabaseResponse;\n+  }\n+\n+  const supabase = createServerClient(\n+    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n+    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n+    {\n+      cookies: {\n+        getAll() {\n+          return request.cookies.getAll();\n+        },\n+        setAll(cookiesToSet) {\n+          cookiesToSet.forEach(({ name, value }) =>\n+            request.cookies.set(name, value),\n+          );\n+          supabaseResponse = NextResponse.next({\n+            request,\n+          });\n+          cookiesToSet.forEach(({ name, value, options }) =>\n+            supabaseResponse.cookies.set(name, value, options),\n+          );\n+        },\n+      },\n+    },\n+  );\n+\n+  // Do not run code between createServerClient and\n+  // supabase.auth.getUser(). A simple mistake could make it very hard to debug\n+  // issues with users being randomly logged out.\n+\n+  // IMPORTANT: DO NOT REMOVE auth.getUser()\n+\n+  const {\n+    data: { user },\n+  } = await supabase.auth.getUser();\n+\n+  if (\n+    request.nextUrl.pathname !== \"/\" &&\n+    !user &&\n+    !request.nextUrl.pathname.startsWith(\"/login\") &&\n+    !request.nextUrl.pathname.startsWith(\"/auth\")\n+  ) {\n+    // no user, potentially respond by redirecting the user to the login page\n+    const url = request.nextUrl.clone();\n+    url.pathname = \"/auth/login\";\n+    return NextResponse.redirect(url);\n+  }\n+\n+  // IMPORTANT: You *must* return the supabaseResponse object as it is.\n+  // If you're creating a new response object with NextResponse.next() make sure to:\n+  // 1. Pass the request in it, like so:\n+  //    const myNewResponse = NextResponse.next({ request })\n+  // 2. Copy over the cookies, like so:\n+  //    myNewResponse.cookies.setAll(supabaseResponse.cookies.getAll())\n+  // 3. Change the myNewResponse object to fit your needs, but avoid changing\n+  //    the cookies!\n+  // 4. Finally:\n+  //    return myNewResponse\n+  // If this is not done, you may be causing the browser and server to go out\n+  // of sync and terminate the user's session prematurely!\n+\n+  return supabaseResponse;\n+}"
        },
        {
            "sha": "0cdb125c9003df75f01b3da47a637a0f8ded778a",
            "filename": "examples/with-supabase/lib/supabase/server.ts",
            "status": "renamed",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fserver.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fserver.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Flib%2Fsupabase%2Fserver.ts?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,7 +1,7 @@\n import { createServerClient } from \"@supabase/ssr\";\n import { cookies } from \"next/headers\";\n \n-export const createClient = async () => {\n+export async function createClient() {\n   const cookieStore = await cookies();\n \n   return createServerClient(\n@@ -14,16 +14,16 @@ export const createClient = async () => {\n         },\n         setAll(cookiesToSet) {\n           try {\n-            cookiesToSet.forEach(({ name, value, options }) => {\n-              cookieStore.set(name, value, options);\n-            });\n-          } catch (error) {\n-            // The `set` method was called from a Server Component.\n+            cookiesToSet.forEach(({ name, value, options }) =>\n+              cookieStore.set(name, value, options),\n+            );\n+          } catch {\n+            // The `setAll` method was called from a Server Component.\n             // This can be ignored if you have middleware refreshing\n             // user sessions.\n           }\n         },\n       },\n     },\n   );\n-};\n+}",
            "previous_filename": "examples/with-supabase/utils/supabase/server.ts"
        },
        {
            "sha": "1afe63365c6f0bff3546c29a0eaad0f71f1292cc",
            "filename": "examples/with-supabase/lib/utils.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Flib%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Flib%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Flib%2Futils.ts?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -4,3 +4,8 @@ import { twMerge } from \"tailwind-merge\";\n export function cn(...inputs: ClassValue[]) {\n   return twMerge(clsx(inputs));\n }\n+\n+// This check can be removed, it is just for tutorial purposes\n+export const hasEnvVars =\n+  process.env.NEXT_PUBLIC_SUPABASE_URL &&\n+  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;"
        },
        {
            "sha": "b3e97dc71bd7264ce4d878119585400faed40e0d",
            "filename": "examples/with-supabase/middleware.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fmiddleware.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fmiddleware.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fmiddleware.ts?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,5 +1,5 @@\n+import { updateSession } from \"@/lib/supabase/middleware\";\n import { type NextRequest } from \"next/server\";\n-import { updateSession } from \"@/utils/supabase/middleware\";\n \n export async function middleware(request: NextRequest) {\n   return await updateSession(request);"
        },
        {
            "sha": "ca3cbe5753f249890cbcbf304972781998dbce8d",
            "filename": "examples/with-supabase/package.json",
            "status": "modified",
            "additions": 23,
            "deletions": 20,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fpackage.json?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,35 +1,38 @@\n {\n   \"private\": true,\n   \"scripts\": {\n-    \"dev\": \"next dev\",\n+    \"dev\": \"next dev --turbopack\",\n     \"build\": \"next build\",\n-    \"start\": \"next start\"\n+    \"start\": \"next start\",\n+    \"lint\": \"next lint\"\n   },\n   \"dependencies\": {\n-    \"@radix-ui/react-checkbox\": \"^1.1.1\",\n-    \"@radix-ui/react-dropdown-menu\": \"^2.1.1\",\n-    \"@radix-ui/react-label\": \"^2.1.0\",\n-    \"@radix-ui/react-slot\": \"^1.1.0\",\n+    \"@radix-ui/react-checkbox\": \"^1.3.1\",\n+    \"@radix-ui/react-dropdown-menu\": \"^2.1.14\",\n+    \"@radix-ui/react-label\": \"^2.1.6\",\n+    \"@radix-ui/react-slot\": \"^1.2.2\",\n     \"@supabase/ssr\": \"latest\",\n     \"@supabase/supabase-js\": \"latest\",\n-    \"autoprefixer\": \"10.4.20\",\n-    \"class-variance-authority\": \"^0.7.0\",\n+    \"class-variance-authority\": \"^0.7.1\",\n     \"clsx\": \"^2.1.1\",\n-    \"lucide-react\": \"^0.468.0\",\n+    \"lucide-react\": \"^0.511.0\",\n     \"next\": \"latest\",\n-    \"next-themes\": \"^0.4.3\",\n-    \"prettier\": \"^3.3.3\",\n-    \"react\": \"19.0.0\",\n-    \"react-dom\": \"19.0.0\"\n+    \"next-themes\": \"^0.4.6\",\n+    \"react\": \"^19.0.0\",\n+    \"react-dom\": \"^19.0.0\",\n+    \"tailwind-merge\": \"^3.3.0\"\n   },\n   \"devDependencies\": {\n-    \"@types/node\": \"22.10.2\",\n-    \"@types/react\": \"^19.0.2\",\n-    \"@types/react-dom\": \"19.0.2\",\n-    \"postcss\": \"8.4.49\",\n-    \"tailwind-merge\": \"^2.5.2\",\n-    \"tailwindcss\": \"3.4.17\",\n+    \"@eslint/eslintrc\": \"^3\",\n+    \"@types/node\": \"^20\",\n+    \"@types/react\": \"^19\",\n+    \"@types/react-dom\": \"^19\",\n+    \"autoprefixer\": \"^10.4.20\",\n+    \"eslint\": \"^9\",\n+    \"eslint-config-next\": \"15.3.1\",\n+    \"postcss\": \"^8\",\n+    \"tailwindcss\": \"^3.4.1\",\n     \"tailwindcss-animate\": \"^1.0.7\",\n-    \"typescript\": \"5.7.2\"\n+    \"typescript\": \"^5\"\n   }\n }"
        },
        {
            "sha": "12a703d900da8159c30e75acbd2c4d87ae177f62",
            "filename": "examples/with-supabase/postcss.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fpostcss.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Fpostcss.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fpostcss.config.js?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,6 +0,0 @@\n-module.exports = {\n-  plugins: {\n-    tailwindcss: {},\n-    autoprefixer: {},\n-  },\n-};"
        },
        {
            "sha": "2ef30fcf4272e19cf6a23d07b0544027954f9627",
            "filename": "examples/with-supabase/postcss.config.mjs",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fpostcss.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Fpostcss.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fpostcss.config.mjs?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -0,0 +1,9 @@\n+/** @type {import('postcss-load-config').Config} */\n+const config = {\n+  plugins: {\n+    tailwindcss: {},\n+    autoprefixer: {},\n+  },\n+};\n+\n+export default config;"
        },
        {
            "sha": "03323d5b972340aa5789dea36a4baa0e176bf71e",
            "filename": "examples/with-supabase/tailwind.config.ts",
            "status": "modified",
            "additions": 25,
            "deletions": 42,
            "changes": 67,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Ftailwind.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Ftailwind.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Ftailwind.config.ts?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,29 +1,26 @@\n import type { Config } from \"tailwindcss\";\n \n-const config = {\n+export default {\n   darkMode: [\"class\"],\n   content: [\n-    \"./pages/**/*.{ts,tsx}\",\n-    \"./components/**/*.{ts,tsx}\",\n-    \"./app/**/*.{ts,tsx}\",\n-    \"./src/**/*.{ts,tsx}\",\n+    \"./pages/**/*.{js,ts,jsx,tsx,mdx}\",\n+    \"./components/**/*.{js,ts,jsx,tsx,mdx}\",\n+    \"./app/**/*.{js,ts,jsx,tsx,mdx}\",\n+    \"./src/**/*.{js,ts,jsx,tsx,mdx}\",\n   ],\n-  prefix: \"\",\n   theme: {\n-    container: {\n-      center: true,\n-      padding: \"2rem\",\n-      screens: {\n-        \"2xl\": \"1400px\",\n-      },\n-    },\n     extend: {\n       colors: {\n-        border: \"hsl(var(--border))\",\n-        input: \"hsl(var(--input))\",\n-        ring: \"hsl(var(--ring))\",\n         background: \"hsl(var(--background))\",\n         foreground: \"hsl(var(--foreground))\",\n+        card: {\n+          DEFAULT: \"hsl(var(--card))\",\n+          foreground: \"hsl(var(--card-foreground))\",\n+        },\n+        popover: {\n+          DEFAULT: \"hsl(var(--popover))\",\n+          foreground: \"hsl(var(--popover-foreground))\",\n+        },\n         primary: {\n           DEFAULT: \"hsl(var(--primary))\",\n           foreground: \"hsl(var(--primary-foreground))\",\n@@ -32,10 +29,6 @@ const config = {\n           DEFAULT: \"hsl(var(--secondary))\",\n           foreground: \"hsl(var(--secondary-foreground))\",\n         },\n-        destructive: {\n-          DEFAULT: \"hsl(var(--destructive))\",\n-          foreground: \"hsl(var(--destructive-foreground))\",\n-        },\n         muted: {\n           DEFAULT: \"hsl(var(--muted))\",\n           foreground: \"hsl(var(--muted-foreground))\",\n@@ -44,37 +37,27 @@ const config = {\n           DEFAULT: \"hsl(var(--accent))\",\n           foreground: \"hsl(var(--accent-foreground))\",\n         },\n-        popover: {\n-          DEFAULT: \"hsl(var(--popover))\",\n-          foreground: \"hsl(var(--popover-foreground))\",\n+        destructive: {\n+          DEFAULT: \"hsl(var(--destructive))\",\n+          foreground: \"hsl(var(--destructive-foreground))\",\n         },\n-        card: {\n-          DEFAULT: \"hsl(var(--card))\",\n-          foreground: \"hsl(var(--card-foreground))\",\n+        border: \"hsl(var(--border))\",\n+        input: \"hsl(var(--input))\",\n+        ring: \"hsl(var(--ring))\",\n+        chart: {\n+          \"1\": \"hsl(var(--chart-1))\",\n+          \"2\": \"hsl(var(--chart-2))\",\n+          \"3\": \"hsl(var(--chart-3))\",\n+          \"4\": \"hsl(var(--chart-4))\",\n+          \"5\": \"hsl(var(--chart-5))\",\n         },\n       },\n       borderRadius: {\n         lg: \"var(--radius)\",\n         md: \"calc(var(--radius) - 2px)\",\n         sm: \"calc(var(--radius) - 4px)\",\n       },\n-      keyframes: {\n-        \"accordion-down\": {\n-          from: { height: \"0\" },\n-          to: { height: \"var(--radix-accordion-content-height)\" },\n-        },\n-        \"accordion-up\": {\n-          from: { height: \"var(--radix-accordion-content-height)\" },\n-          to: { height: \"0\" },\n-        },\n-      },\n-      animation: {\n-        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n-        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n-      },\n     },\n   },\n   plugins: [require(\"tailwindcss-animate\")],\n } satisfies Config;\n-\n-export default config;"
        },
        {
            "sha": "ac0369a85f29679b2311c2b3d78c11ea476133f1",
            "filename": "examples/with-supabase/tsconfig.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/2b7a259169b85d82643b95eaf8d0601f1a9f3e7e/examples%2Fwith-supabase%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Ftsconfig.json?ref=2b7a259169b85d82643b95eaf8d0601f1a9f3e7e",
            "patch": "@@ -1,6 +1,6 @@\n {\n   \"compilerOptions\": {\n-    \"target\": \"es5\",\n+    \"target\": \"ES2017\",\n     \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\n     \"allowJs\": true,\n     \"skipLibCheck\": true,\n@@ -9,7 +9,7 @@\n     \"noEmit\": true,\n     \"esModuleInterop\": true,\n     \"module\": \"esnext\",\n-    \"moduleResolution\": \"node\",\n+    \"moduleResolution\": \"bundler\",\n     \"resolveJsonModule\": true,\n     \"isolatedModules\": true,\n     \"jsx\": \"preserve\","
        },
        {
            "sha": "7180f45b0927b14bedb842be56fbdedc8a382171",
            "filename": "examples/with-supabase/utils/supabase/check-env-vars.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Futils%2Fsupabase%2Fcheck-env-vars.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Futils%2Fsupabase%2Fcheck-env-vars.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Futils%2Fsupabase%2Fcheck-env-vars.ts?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,6 +0,0 @@\n-// This check can be removed\n-// it is just for tutorial purposes\n-\n-export const hasEnvVars =\n-  process.env.NEXT_PUBLIC_SUPABASE_URL &&\n-  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;"
        },
        {
            "sha": "8619ec03ba77125833a975f83f26481577023524",
            "filename": "examples/with-supabase/utils/supabase/middleware.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 62,
            "changes": 62,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Futils%2Fsupabase%2Fmiddleware.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Futils%2Fsupabase%2Fmiddleware.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Futils%2Fsupabase%2Fmiddleware.ts?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,62 +0,0 @@\n-import { createServerClient } from \"@supabase/ssr\";\n-import { type NextRequest, NextResponse } from \"next/server\";\n-\n-export const updateSession = async (request: NextRequest) => {\n-  // This `try/catch` block is only here for the interactive tutorial.\n-  // Feel free to remove once you have Supabase connected.\n-  try {\n-    // Create an unmodified response\n-    let response = NextResponse.next({\n-      request: {\n-        headers: request.headers,\n-      },\n-    });\n-\n-    const supabase = createServerClient(\n-      process.env.NEXT_PUBLIC_SUPABASE_URL!,\n-      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n-      {\n-        cookies: {\n-          getAll() {\n-            return request.cookies.getAll();\n-          },\n-          setAll(cookiesToSet) {\n-            cookiesToSet.forEach(({ name, value }) =>\n-              request.cookies.set(name, value),\n-            );\n-            response = NextResponse.next({\n-              request,\n-            });\n-            cookiesToSet.forEach(({ name, value, options }) =>\n-              response.cookies.set(name, value, options),\n-            );\n-          },\n-        },\n-      },\n-    );\n-\n-    // This will refresh session if expired - required for Server Components\n-    // https://supabase.com/docs/guides/auth/server-side/nextjs\n-    const user = await supabase.auth.getUser();\n-\n-    // protected routes\n-    if (request.nextUrl.pathname.startsWith(\"/protected\") && user.error) {\n-      return NextResponse.redirect(new URL(\"/sign-in\", request.url));\n-    }\n-\n-    if (request.nextUrl.pathname === \"/\" && !user.error) {\n-      return NextResponse.redirect(new URL(\"/protected\", request.url));\n-    }\n-\n-    return response;\n-  } catch (e) {\n-    // If you are here, a Supabase client could not be created!\n-    // This is likely because you have not set up environment variables.\n-    // Check out http://localhost:3000 for Next Steps.\n-    return NextResponse.next({\n-      request: {\n-        headers: request.headers,\n-      },\n-    });\n-  }\n-};"
        },
        {
            "sha": "c9fbbe8922a4615a5801b5a2be12dcb1ffbc1af7",
            "filename": "examples/with-supabase/utils/utils.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Futils%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ea1a76a601e289d13eb579c91412594a194be560/examples%2Fwith-supabase%2Futils%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Futils%2Futils.ts?ref=ea1a76a601e289d13eb579c91412594a194be560",
            "patch": "@@ -1,16 +0,0 @@\n-import { redirect } from \"next/navigation\";\n-\n-/**\n- * Redirects to a specified path with an encoded message as a query parameter.\n- * @param {('error' | 'success')} type - The type of message, either 'error' or 'success'.\n- * @param {string} path - The path to redirect to.\n- * @param {string} message - The message to be encoded and added as a query parameter.\n- * @returns {never} This function doesn't return as it triggers a redirect.\n- */\n-export function encodedRedirect(\n-  type: \"error\" | \"success\",\n-  path: string,\n-  message: string,\n-) {\n-  return redirect(`${path}?${type}=${encodeURIComponent(message)}`);\n-}"
        }
    ],
    "stats": {
        "total": 1815,
        "additions": 1036,
        "deletions": 779
    }
}