{
    "author": "mischnic",
    "message": "Add experimental.runtimeServerDeploymentId (#86865)\n\nIf this is set, `process.env.NEXT_DEPLOYMENT_ID` is available at runtime, and we don't need to inline the build-time value into the build output.\r\n\r\nThis is currently true for Node.js routes, and will also be the case for edge routes once https://github.com/vercel/next.js/pull/86769 is merged.\r\n\r\n`experimental.runtimeServerDeploymentId` defaults to true when deploying on Vercel and `NEXT_DEPLOYMENT_ID` is set.\r\n\r\n- [x] Perform `config.deploymentId = process.env.NEXT_DEPLOYMENT_ID` in the right places in the server\r\n\r\nThis brings us to this state regarding the deployoment ids in the output (notice the exclusion field):\r\n\r\n<img width=\"628\" height=\"323\" alt=\"Bildschirmfoto 2025-12-05 um 21 17 53\" src=\"https://github.com/user-attachments/assets/6e35997f-3f81-4da4-880e-d1d1984f7272\" />",
    "sha": "0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
    "files": [
        {
            "sha": "60e496855aa6109b5eec2db62bc4347f377f2b01",
            "filename": "packages/next/errors.json",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Ferrors.json",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Ferrors.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Ferrors.json?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -967,5 +967,7 @@\n   \"966\": \"Expected process.nextTick to reject invalid arguments\",\n   \"967\": \"The key \\\"%s\\\" under \\\"env\\\" in %sconfig is not allowed. https://nextjs.org/docs/messages/env-key-not-allowed\",\n   \"968\": \"Invariant: getNextConfigEdge must only be called in edge runtime\",\n-  \"969\": \"Invariant: nextConfig couldn't be loaded\"\n+  \"969\": \"Invariant: nextConfig couldn't be loaded\",\n+  \"970\": \"process.env.NEXT_DEPLOYMENT_ID is missing but runtimeServerDeploymentId is enabled\",\n+  \"971\": \"The NEXT_DEPLOYMENT_ID environment variable value \\\"%s\\\" does not match the provided deploymentId \\\"%s\\\" in the config.\"\n }"
        },
        {
            "sha": "91065e9a534b66119b5511afbf559751961bd4ee",
            "filename": "packages/next/src/build/define-env.ts",
            "status": "modified",
            "additions": 28,
            "deletions": 11,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -61,12 +61,12 @@ interface SerializedDefineEnv {\n  * Serializes the DefineEnv config so that it can be inserted into the code by Webpack/Turbopack, JSON stringifies each value.\n  */\n function serializeDefineEnv(defineEnv: DefineEnv): SerializedDefineEnv {\n-  const defineEnvStringified: SerializedDefineEnv = {}\n-  for (const key in defineEnv) {\n-    const value = defineEnv[key]\n-    defineEnvStringified[key] = JSON.stringify(value)\n-  }\n-\n+  const defineEnvStringified: SerializedDefineEnv = Object.fromEntries(\n+    Object.entries(defineEnv).map(([key, value]) => [\n+      key,\n+      JSON.stringify(value),\n+    ])\n+  )\n   return defineEnvStringified\n }\n \n@@ -167,9 +167,24 @@ export function getDefineEnv({\n     'process.env.__NEXT_CACHE_COMPONENTS': isCacheComponentsEnabled,\n     'process.env.__NEXT_USE_CACHE': isUseCacheEnabled,\n \n-    'process.env.NEXT_DEPLOYMENT_ID': config.experimental?.useSkewCookie\n-      ? false\n-      : config.deploymentId || false,\n+    ...(isClient\n+      ? {\n+          // TODO use `globalThis.NEXT_DEPLOYMENT_ID` on client to still support accessing\n+          // process.env.NEXT_DEPLOYMENT_ID in userland\n+          'process.env.NEXT_DEPLOYMENT_ID': config.experimental?.useSkewCookie\n+            ? false\n+            : config.deploymentId || false,\n+        }\n+      : config.experimental?.runtimeServerDeploymentId\n+        ? {\n+            // Don't inline at all, keep process.env.NEXT_DEPLOYMENT_ID as is\n+          }\n+        : {\n+            'process.env.NEXT_DEPLOYMENT_ID': config.experimental?.useSkewCookie\n+              ? false\n+              : config.deploymentId || false,\n+          }),\n+\n     // Propagates the `__NEXT_EXPERIMENTAL_STATIC_SHELL_DEBUGGING` environment\n     // variable to the client.\n     'process.env.__NEXT_EXPERIMENTAL_STATIC_SHELL_DEBUGGING':\n@@ -372,8 +387,10 @@ export function getDefineEnv({\n     for (const key in nextConfigEnv) {\n       serializedDefineEnv[key] = safeKey(key)\n     }\n-    for (const key of ['process.env.NEXT_DEPLOYMENT_ID']) {\n-      serializedDefineEnv[key] = safeKey(key)\n+    if (!config.experimental.runtimeServerDeploymentId) {\n+      for (const key of ['process.env.NEXT_DEPLOYMENT_ID']) {\n+        serializedDefineEnv[key] = safeKey(key)\n+      }\n     }\n   }\n "
        },
        {
            "sha": "50ba7d8e16202e982ca177a006cb4272f368139f",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -989,7 +989,7 @@ export default async function build(\n       // when using compile mode static env isn't inlined so we\n       // need to populate in normal runtime env\n       if (isCompileMode || isGenerateMode) {\n-        populateStaticEnv(config)\n+        populateStaticEnv(config, config.deploymentId)\n       }\n \n       const customRoutes: CustomRoutes = await nextBuildSpan"
        },
        {
            "sha": "f792a2f75c15f1f99e2b9b29c1b36311832655aa",
            "filename": "packages/next/src/build/templates/app-page.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -170,6 +170,7 @@ export async function handler(\n     nextConfig,\n     parsedUrl,\n     interceptionRoutePatterns,\n+    deploymentId,\n   } = prepareResult\n \n   const normalizedSrcPage = normalizeAppPath(srcPage)\n@@ -559,7 +560,7 @@ export async function handler(\n           trailingSlash: nextConfig.trailingSlash,\n           images: nextConfig.images,\n           previewProps: prerenderManifest.preview,\n-          deploymentId: nextConfig.deploymentId,\n+          deploymentId: deploymentId,\n           enableTainting: nextConfig.experimental.taint,\n           htmlLimitedBots: nextConfig.htmlLimitedBots,\n           reactMaxHeadersLength: nextConfig.reactMaxHeadersLength,"
        },
        {
            "sha": "79d78d1d19161fd70a7c35fdabf03d24c4ec74aa",
            "filename": "packages/next/src/build/templates/edge-ssr-app.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -81,6 +81,7 @@ async function requestHandler(\n     resolvedPathname,\n     interceptionRoutePatterns,\n     routerServerContext,\n+    deploymentId,\n   } = prepareResult\n \n   // Initialize the cache handlers interface.\n@@ -137,7 +138,7 @@ async function requestHandler(\n       trailingSlash: nextConfig.trailingSlash,\n       images: nextConfig.images,\n       previewProps: prerenderManifest.preview,\n-      deploymentId: nextConfig.deploymentId,\n+      deploymentId,\n       enableTainting: nextConfig.experimental.taint,\n       htmlLimitedBots: nextConfig.htmlLimitedBots,\n       reactMaxHeadersLength: nextConfig.reactMaxHeadersLength,"
        },
        {
            "sha": "057113326d2d857f091369497729e50c565a5f33",
            "filename": "packages/next/src/lib/inline-static-env.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Flib%2Finline-static-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Flib%2Finline-static-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Finline-static-env.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -17,7 +17,7 @@ export async function inlineStaticEnv({\n   config: NextConfigComplete\n }) {\n   const nextConfigEnv = getNextConfigEnv(config)\n-  const staticEnv = getStaticEnv(config)\n+  const staticEnv = getStaticEnv(config, config.deploymentId)\n \n   const serverDir = path.join(distDir, 'server')\n   const serverChunks = await glob('**/*.{js,json,js.map}', {"
        },
        {
            "sha": "636920025785365826356f265c2ef1c45a563fdd",
            "filename": "packages/next/src/lib/static-env.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Flib%2Fstatic-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Flib%2Fstatic-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Fstatic-env.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -53,22 +53,26 @@ export function getNextConfigEnv(\n   return defineEnv\n }\n \n-export function getStaticEnv(config: NextConfigComplete | NextConfigRuntime) {\n+export function getStaticEnv(\n+  config: NextConfigComplete | NextConfigRuntime,\n+  deploymentId: string\n+) {\n   const staticEnv: Record<string, string | undefined> = {\n     ...getNextPublicEnvironmentVariables(),\n     ...getNextConfigEnv(config),\n-    'process.env.NEXT_DEPLOYMENT_ID': config.deploymentId || '',\n+    'process.env.NEXT_DEPLOYMENT_ID': deploymentId,\n   }\n   return staticEnv\n }\n \n export function populateStaticEnv(\n-  config: NextConfigComplete | NextConfigRuntime\n+  config: NextConfigComplete | NextConfigRuntime,\n+  deploymentId: string\n ) {\n   // since inlining comes after static generation we need\n   // to ensure this value is assigned to process env so it\n   // can still be accessed\n-  const staticEnv = getStaticEnv(config)\n+  const staticEnv = getStaticEnv(config, deploymentId)\n   for (const key in staticEnv) {\n     const innerKey = key.split('.').pop() || ''\n     if (!process.env[innerKey]) {"
        },
        {
            "sha": "f2ab165c488d377ed22e92d936e469b02cbf416f",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 2,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -447,6 +447,24 @@ export default abstract class Server<\n     // TODO: should conf be normalized to prevent missing\n     // values from causing issues as this can be user provided\n     this.nextConfig = conf as NextConfigRuntime\n+\n+    let deploymentId\n+    if (this.nextConfig.experimental.runtimeServerDeploymentId) {\n+      if (!process.env.NEXT_DEPLOYMENT_ID) {\n+        throw new Error(\n+          'process.env.NEXT_DEPLOYMENT_ID is missing but runtimeServerDeploymentId is enabled'\n+        )\n+      }\n+      deploymentId = process.env.NEXT_DEPLOYMENT_ID\n+    } else {\n+      let id = this.nextConfig.experimental.useSkewCookie\n+        ? ''\n+        : this.nextConfig.deploymentId || ''\n+\n+      deploymentId = id\n+      process.env.NEXT_DEPLOYMENT_ID = id\n+    }\n+\n     this.hostname = hostname\n     if (this.hostname) {\n       // we format the hostname so that it can be fetched\n@@ -501,13 +519,12 @@ export default abstract class Server<\n     }\n \n     this.nextFontManifest = this.getNextFontManifest()\n-    process.env.NEXT_DEPLOYMENT_ID = this.nextConfig.deploymentId || ''\n \n     this.renderOpts = {\n       dir: this.dir,\n       supportsDynamicResponse: true,\n       trailingSlash: this.nextConfig.trailingSlash,\n-      deploymentId: this.nextConfig.deploymentId,\n+      deploymentId: deploymentId,\n       poweredByHeader: this.nextConfig.poweredByHeader,\n       generateEtags,\n       previewProps: this.getPrerenderManifest().preview,"
        },
        {
            "sha": "afe65884bc09761314252e21e1031a4a0fd06dad",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -347,6 +347,7 @@ export const experimentalSchema = {\n     .optional(),\n   lockDistDir: z.boolean().optional(),\n   hideLogsAfterAbort: z.boolean().optional(),\n+  runtimeServerDeploymentId: z.boolean().optional(),\n }\n \n export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>"
        },
        {
            "sha": "ec7e168e05eff25cee145d0aae33191ce826fb63",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 3,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -836,6 +836,14 @@ export interface ExperimentalConfig {\n    * @default false\n    */\n   hideLogsAfterAbort?: boolean\n+\n+  /**\n+   * Whether `process.env.NEXT_DEPLOYMENT_ID` is available at runtime in the server (and `next\n+   * build` doesn't need to embed the deployment ID value into the build output).\n+   *\n+   * @default false\n+   */\n+  runtimeServerDeploymentId?: boolean\n }\n \n export type ExportPathMap = {\n@@ -1586,8 +1594,8 @@ export async function normalizeConfig(phase: string, config: any) {\n //   };\n // };\n export interface NextConfigRuntime {\n-  // TODO remove in some cases\n-  deploymentId: NextConfigComplete['deploymentId']\n+  // Can be undefined, particularly when experimental.runtimeServerDeploymentId is true\n+  deploymentId?: NextConfigComplete['deploymentId']\n \n   configFileName?: string\n   // Should only be included when using isExperimentalCompile\n@@ -1652,6 +1660,7 @@ export interface NextConfigRuntime {\n     | 'proxyClientMaxBodySize'\n     | 'proxyTimeout'\n     | 'testProxy'\n+    | 'runtimeServerDeploymentId'\n   > & {\n     // Pick on @internal fields generates invalid .d.ts files\n     /** @internal */\n@@ -1706,14 +1715,17 @@ export function getNextConfigRuntime(\n         proxyClientMaxBodySize: ex.proxyClientMaxBodySize,\n         proxyTimeout: ex.proxyTimeout,\n         testProxy: ex.testProxy,\n+        runtimeServerDeploymentId: ex.runtimeServerDeploymentId,\n \n         trustHostHeader: ex.trustHostHeader,\n         isExperimentalCompile: ex.isExperimentalCompile,\n       } satisfies Requiredish<NextConfigRuntime['experimental']>)\n     : {}\n \n   let runtimeConfig: Requiredish<NextConfigRuntime> = {\n-    deploymentId: config.deploymentId,\n+    deploymentId: config.experimental.runtimeServerDeploymentId\n+      ? ''\n+      : config.deploymentId,\n \n     configFileName: undefined,\n     env: undefined,"
        },
        {
            "sha": "c6ed958ef686b09a791b4da3d6248d183f971da0",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 1,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -370,7 +370,7 @@ function assignDefaultsAndValidate(\n   }\n \n   // ensure correct default is set for api-resolver revalidate handling\n-  if (!result.experimental?.trustHostHeader && ciEnvironment.hasNextSupport) {\n+  if (!result.experimental.trustHostHeader && ciEnvironment.hasNextSupport) {\n     result.experimental.trustHostHeader = true\n   }\n \n@@ -916,6 +916,23 @@ function assignDefaultsAndValidate(\n     }\n   }\n \n+  if (\n+    result.experimental.runtimeServerDeploymentId == null &&\n+    phase === PHASE_PRODUCTION_BUILD &&\n+    ciEnvironment.hasNextSupport &&\n+    process.env.NEXT_DEPLOYMENT_ID\n+  ) {\n+    if (\n+      result.deploymentId != null &&\n+      result.deploymentId !== process.env.NEXT_DEPLOYMENT_ID\n+    ) {\n+      throw new Error(\n+        `The NEXT_DEPLOYMENT_ID environment variable value \"${process.env.NEXT_DEPLOYMENT_ID}\" does not match the provided deploymentId \"${result.deploymentId}\" in the config.`\n+      )\n+    }\n+    result.experimental.runtimeServerDeploymentId = true\n+  }\n+\n   // only leverage deploymentId\n   if (process.env.NEXT_DEPLOYMENT_ID) {\n     result.deploymentId = process.env.NEXT_DEPLOYMENT_ID"
        },
        {
            "sha": "9db17fe9f3f5b5804b9e15b3d3fc847eb0857f52",
            "filename": "packages/next/src/server/next-server.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -295,9 +295,6 @@ export default class NextNodeServer extends BaseServer<\n     if (this.renderOpts.nextScriptWorkers) {\n       process.env.__NEXT_SCRIPT_WORKERS = JSON.stringify(true)\n     }\n-    process.env.NEXT_DEPLOYMENT_ID = this.nextConfig.experimental.useSkewCookie\n-      ? ''\n-      : this.nextConfig.deploymentId || ''\n \n     if (!this.minimalMode) {\n       this.imageResponseCache = new ResponseCache(this.minimalMode)\n@@ -356,7 +353,7 @@ export default class NextNodeServer extends BaseServer<\n     // when using compile mode static env isn't inlined so we\n     // need to populate in normal runtime env\n     if (this.renderOpts.isExperimentalCompile) {\n-      populateStaticEnv(this.nextConfig)\n+      populateStaticEnv(this.nextConfig, this.renderOpts.deploymentId || '')\n     }\n \n     const shouldRemoveUncaughtErrorAndRejectionListeners = Boolean(\n@@ -729,7 +726,7 @@ export default class NextNodeServer extends BaseServer<\n           renderOpts as LoadedRenderOpts<PagesModule>,\n           {\n             buildId: this.buildId,\n-            deploymentId: this.nextConfig.deploymentId,\n+            deploymentId: this.renderOpts.deploymentId,\n             customServer: this.serverOptions.customServer || undefined,\n           },\n           {"
        },
        {
            "sha": "1b26f967466a776284a1425223693730e9de337e",
            "filename": "packages/next/src/server/route-modules/route-module.ts",
            "status": "modified",
            "additions": 44,
            "deletions": 10,
            "changes": 54,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Froute-module.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Froute-module.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Froute-module.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -182,22 +182,23 @@ export abstract class RouteModule<\n     routesManifest: DeepReadonly<DevRoutesManifest>\n     nextFontManifest: DeepReadonly<NextFontManifest>\n     prerenderManifest: DeepReadonly<PrerenderManifest>\n-    serverFilesManifest: RequiredServerFilesManifest | undefined\n+    serverFilesManifest: DeepReadonly<RequiredServerFilesManifest> | undefined\n     reactLoadableManifest: DeepReadonly<ReactLoadableManifest>\n     subresourceIntegrityManifest: any\n     clientReferenceManifest: any\n     serverActionsManifest: any\n     dynamicCssManifest: any\n     interceptionRoutePatterns: RegExp[]\n   } {\n+    let result\n     if (process.env.NEXT_RUNTIME === 'edge') {\n       const { getEdgePreviewProps } =\n         require('../web/get-edge-preview-props') as typeof import('../web/get-edge-preview-props')\n \n       const maybeJSONParse = (str?: string) =>\n         str ? JSON.parse(str) : undefined\n \n-      return {\n+      result = {\n         buildId: process.env.__NEXT_BUILD_ID || '',\n         buildManifest: self.__BUILD_MANIFEST as any,\n         fallbackBuildManifest: {} as any,\n@@ -209,7 +210,7 @@ export abstract class RouteModule<\n           notFoundRoutes: [],\n           version: 4,\n           preview: getEdgePreviewProps(),\n-        },\n+        } as const,\n         routesManifest: {\n           version: 4,\n           caseSensitive: Boolean(process.env.__NEXT_CASE_SENSITIVE_ROUTES),\n@@ -336,11 +337,11 @@ export abstract class RouteModule<\n         }),\n         this.isDev\n           ? undefined\n-          : (loadManifestFromRelativePath<RequiredServerFilesManifest>({\n+          : loadManifestFromRelativePath<RequiredServerFilesManifest>({\n               projectDir,\n               distDir: this.distDir,\n               manifest: `${SERVER_FILES_MANIFEST}.json`,\n-            }) as RequiredServerFilesManifest),\n+            }),\n         this.isDev\n           ? 'development'\n           : loadManifestFromRelativePath<any>({\n@@ -357,7 +358,7 @@ export abstract class RouteModule<\n         }),\n       ]\n \n-      return {\n+      result = {\n         buildId,\n         buildManifest,\n         fallbackBuildManifest,\n@@ -376,6 +377,8 @@ export abstract class RouteModule<\n           .map((rewrite) => new RegExp(rewrite.regex)),\n       }\n     }\n+\n+    return result\n   }\n \n   public async loadCustomCacheHandlers(\n@@ -503,7 +506,10 @@ export abstract class RouteModule<\n   }\n \n   /** A more lightweight version of `prepare()` for only retrieving the config on edge */\n-  public getNextConfigEdge(req: NextIncomingMessage): NextConfigRuntime {\n+  public getNextConfigEdge(req: NextIncomingMessage): {\n+    nextConfig: NextConfigRuntime\n+    deploymentId: string\n+  } {\n     if (process.env.NEXT_RUNTIME !== 'edge') {\n       throw new Error(\n         'Invariant: getNextConfigEdge must only be called in edge runtime'\n@@ -524,7 +530,19 @@ export abstract class RouteModule<\n       throw new Error(\"Invariant: nextConfig couldn't be loaded\")\n     }\n \n-    return nextConfig\n+    let deploymentId\n+    if (nextConfig.experimental?.runtimeServerDeploymentId) {\n+      if (!process.env.NEXT_DEPLOYMENT_ID) {\n+        throw new Error(\n+          'process.env.NEXT_DEPLOYMENT_ID is missing but runtimeServerDeploymentId is enabled'\n+        )\n+      }\n+      deploymentId = process.env.NEXT_DEPLOYMENT_ID\n+    } else {\n+      deploymentId = nextConfig.deploymentId || ''\n+    }\n+\n+    return { nextConfig, deploymentId }\n   }\n \n   public async prepare(\n@@ -540,6 +558,7 @@ export abstract class RouteModule<\n   ): Promise<\n     | {\n         buildId: string\n+        deploymentId: string\n         locale?: string\n         locales?: readonly string[]\n         defaultLocale?: string\n@@ -905,6 +924,18 @@ export abstract class RouteModule<\n \n     resolvedPathname = removeTrailingSlash(resolvedPathname)\n \n+    let deploymentId\n+    if (nextConfig.experimental?.runtimeServerDeploymentId) {\n+      if (!process.env.NEXT_DEPLOYMENT_ID) {\n+        throw new Error(\n+          'process.env.NEXT_DEPLOYMENT_ID is missing but runtimeServerDeploymentId is enabled'\n+        )\n+      }\n+      deploymentId = process.env.NEXT_DEPLOYMENT_ID\n+    } else {\n+      deploymentId = nextConfig.deploymentId || ''\n+    }\n+\n     return {\n       query,\n       originalQuery,\n@@ -923,9 +954,12 @@ export abstract class RouteModule<\n       isOnDemandRevalidate,\n       revalidateOnlyGenerated,\n       ...manifests,\n-      clientReferenceManifest: manifests.clientReferenceManifest,\n-      nextConfig,\n+      // loadManifest returns a readonly object, but we don't want to propagate that throughout the\n+      // whole codebase (for now)\n+      nextConfig:\n+        nextConfig satisfies DeepReadonly<NextConfigRuntime> as NextConfigRuntime,\n       routerServerContext,\n+      deploymentId,\n     }\n   }\n "
        },
        {
            "sha": "5ce60a9b87f847389d348c56bf904acf4aedde9c",
            "filename": "packages/next/src/server/web/edge-route-module-wrapper.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fedge-route-module-wrapper.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fedge-route-module-wrapper.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fedge-route-module-wrapper.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -81,7 +81,7 @@ export class EdgeRouteModuleWrapper {\n       caseSensitive: false,\n     })\n \n-    const nextConfig = this.routeModule.getNextConfigEdge(\n+    const { nextConfig } = this.routeModule.getNextConfigEdge(\n       new WebNextRequest(request)\n     )\n "
        },
        {
            "sha": "acdfe9757730623724e77aa27b8b42157dd28eb6",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/app/app-page-edge/page.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-page-edge%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-page-edge%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-page-edge%2Fpage.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,5 @@\n+export default function AppPage() {\n+  return <div>Hello from app-page-edge</div>\n+}\n+\n+export const runtime = 'edge'"
        },
        {
            "sha": "aea5300abb1fc9aac6f09755d33b9c5f223e38b8",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/app/app-page/page.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-page%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-page%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-page%2Fpage.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function AppPage() {\n+  return <div>Hello from app-page</div>\n+}"
        },
        {
            "sha": "cf2a1afd7c9c272a948133b532eb24df47ab1c02",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/app/app-route-edge/route.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-route-edge%2Froute.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-route-edge%2Froute.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-route-edge%2Froute.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,5 @@\n+export function GET() {\n+  return new Response('Hello from app-route-edge')\n+}\n+\n+export const runtime = 'edge'"
        },
        {
            "sha": "a8f2ca3b22de22234043d4faec52dc48c1b8ece2",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/app/app-route/route.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-route%2Froute.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-route%2Froute.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Fapp-route%2Froute.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,3 @@\n+export function GET() {\n+  return new Response('Hello from app-route')\n+}"
        },
        {
            "sha": "f3791f288f9d702fb9a0e797a6a7de853e8a7088",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/app/layout.js",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Flayout.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Flayout.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fapp%2Flayout.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Layout({ children }) {\n+  return (\n+    <html>\n+      <head />\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "ed9dca5f0ab835b7ebbafb10f1f28a08b6be1a2c",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/index.test.ts",
            "status": "added",
            "additions": 86,
            "deletions": 0,
            "changes": 86,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Findex.test.ts?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,86 @@\n+import { NextInstance, createNext } from 'e2e-utils'\n+import fs from 'fs-extra'\n+import {\n+  findPort,\n+  initNextServerScript,\n+  killApp,\n+  renderViaHTTP,\n+} from 'next-test-utils'\n+import { join } from 'path'\n+\n+let MY_DEPLOYMENT_ID = 'test-deployment-id'\n+\n+describe('standalone mode: runtimeServerDeploymentId', () => {\n+  let next: NextInstance\n+  let server\n+  let appPort\n+  let output = ''\n+\n+  beforeAll(async () => {\n+    next = await createNext({\n+      files: __dirname,\n+      env: {\n+        NEXT_DEPLOYMENT_ID: MY_DEPLOYMENT_ID,\n+      },\n+      skipStart: true,\n+    })\n+    let { exitCode } = await next.build()\n+    // eslint-disable-next-line jest/no-standalone-expect\n+    expect(exitCode).toBe(0)\n+\n+    await fs.move(\n+      join(next.testDir, '.next/standalone'),\n+      join(next.testDir, 'standalone')\n+    )\n+\n+    for (const file of await fs.readdir(next.testDir)) {\n+      if (file !== 'standalone') {\n+        await fs.remove(join(next.testDir, file))\n+        console.log('removed', file)\n+      }\n+    }\n+\n+    const testServer = join(next.testDir, 'standalone/server.js')\n+    appPort = await findPort()\n+    server = await initNextServerScript(\n+      testServer,\n+      /- Local:/,\n+      {\n+        ...process.env,\n+        HOSTNAME: '::',\n+        PORT: appPort,\n+        NEXT_DEPLOYMENT_ID: MY_DEPLOYMENT_ID,\n+      },\n+      undefined,\n+      {\n+        cwd: next.testDir,\n+        onStdout(msg) {\n+          output += msg\n+        },\n+        onStderr(msg) {\n+          output += msg\n+        },\n+      }\n+    )\n+  })\n+  afterAll(async () => {\n+    await next.destroy()\n+    if (server) await killApp(server)\n+  })\n+\n+  it.each([\n+    'app-page',\n+    'app-page-edge',\n+    'app-route',\n+    'app-route-edge',\n+    'pages-page',\n+    'pages-page-edge',\n+    'api/pages-route',\n+    'api/pages-route-edge',\n+  ])('it should load %s', async (name) => {\n+    expect(output).toContain(`- Local:`)\n+\n+    let html = await renderViaHTTP(appPort, `/${name}`)\n+    expect(html).toContain(`Hello from ${name}`)\n+  })\n+})"
        },
        {
            "sha": "f9b66ff444d6f4e43b83a9c452c2f24ae0be8777",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/next.config.js",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fnext.config.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,6 @@\n+module.exports = {\n+  output: 'standalone',\n+  experimental: {\n+    runtimeServerDeploymentId: true,\n+  },\n+}"
        },
        {
            "sha": "abdddcbcb92df5af470a0d7bbc264d793b0f2f76",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/pages/api/pages-route-edge.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fapi%2Fpages-route-edge.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fapi%2Fpages-route-edge.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fapi%2Fpages-route-edge.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,5 @@\n+export default function handler(req) {\n+  return new Response('Hello from api/pages-route-edge')\n+}\n+\n+export const runtime = 'edge'"
        },
        {
            "sha": "6b845b835586d799023d35184c1651fd6238c5c5",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/pages/api/pages-route.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fapi%2Fpages-route.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fapi%2Fpages-route.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fapi%2Fpages-route.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function handler(req, res) {\n+  res.json('Hello from api/pages-route')\n+}"
        },
        {
            "sha": "2a464ac3efd7f400448f582563634248b0ef12bd",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/pages/pages-page-edge.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fpages-page-edge.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fpages-page-edge.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fpages-page-edge.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,5 @@\n+export default function AppPage() {\n+  return <div>Hello from pages-page-edge</div>\n+}\n+\n+export const runtime = 'experimental-edge'"
        },
        {
            "sha": "bfa3486d008d5bbf577880f9dac5fc62405f4015",
            "filename": "test/production/standalone-mode/runtimeServerDeploymentId/pages/pages-page.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fpages-page.js",
            "raw_url": "https://github.com/vercel/next.js/raw/0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fpages-page.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2FruntimeServerDeploymentId%2Fpages%2Fpages-page.js?ref=0e973f71f133f4a0b220bbf1e3f0ed8a7c75e00d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function AppPage() {\n+  return <div>Hello from pages-page</div>\n+}"
        }
    ],
    "stats": {
        "total": 319,
        "additions": 277,
        "deletions": 42
    }
}