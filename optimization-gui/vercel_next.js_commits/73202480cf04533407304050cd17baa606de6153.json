{
    "author": "unstubbable",
    "message": "Prevent typescript errors in IDE for newly generated tests (part 2) (#80664)\n\nFollow-up to #78247. This prevents the following error when first\nopening the generated test file in the IDE:\n\n```\nCannot find module 'e2e-utils' or its corresponding type declarations.\n```\n\nWe're adding the patterns `**/*.test.ts` and `**/*.test.tsx` to the\n`tsconfig.json` exclude list in the generator. This is the same patch\nthat's applied in `writeConfigurationDefaults` when first starting the\napp. By generating it upfront, we ensure that the test files compile\nwithout errors when first opened in the IDE, before running `next dev`.\n\nNote: Excluding works because TypeScript looks for another matching\n`tsconfig.json` further up in the file tree. It finds the root config\nwhich includes the test files.",
    "sha": "73202480cf04533407304050cd17baa606de6153",
    "files": [
        {
            "sha": "1a7ae2f9acb279fa3f0a6872b10919964b336f40",
            "filename": "turbo/generators/config.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/73202480cf04533407304050cd17baa606de6153/turbo%2Fgenerators%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/73202480cf04533407304050cd17baa606de6153/turbo%2Fgenerators%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbo%2Fgenerators%2Fconfig.ts?ref=73202480cf04533407304050cd17baa606de6153",
            "patch": "@@ -94,6 +94,11 @@ export default function generator(plop: NodePlopAPI): void {\n           type: 'add',\n           templateFile: path.join(cnaTemplatePath, 'tsconfig.json'),\n           path: path.join(targetPath, name, 'tsconfig.json'),\n+          transform: (template: string) =>\n+            template.replace(\n+              '\"exclude\": [\"node_modules\"]',\n+              '\"exclude\": [\"node_modules\", \"**/*.test.ts\", \"**/*.test.tsx\"]'\n+            ),\n         },\n         {\n           type: 'add',"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 5,
        "deletions": 0
    }
}