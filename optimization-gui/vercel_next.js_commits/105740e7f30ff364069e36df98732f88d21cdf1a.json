{
    "author": "sokra",
    "message": "Turbopack: Make transient tasks root tasks too when called in turbo_tasks::run (#83976)\n\n### What?\n\nWhen calling a turbo tasks function from a turbo_tasks::run it should been made a root aggregating tasks for better efficiency.",
    "sha": "105740e7f30ff364069e36df98732f88d21cdf1a",
    "files": [
        {
            "sha": "15f532755765ada40865f3a7c8d68dd28de343c9",
            "filename": "turbopack/crates/turbo-tasks-backend/src/backend/operation/connect_child.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/105740e7f30ff364069e36df98732f88d21cdf1a/turbopack%2Fcrates%2Fturbo-tasks-backend%2Fsrc%2Fbackend%2Foperation%2Fconnect_child.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/105740e7f30ff364069e36df98732f88d21cdf1a/turbopack%2Fcrates%2Fturbo-tasks-backend%2Fsrc%2Fbackend%2Foperation%2Fconnect_child.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-backend%2Fsrc%2Fbackend%2Foperation%2Fconnect_child.rs?ref=105740e7f30ff364069e36df98732f88d21cdf1a",
            "patch": "@@ -53,15 +53,14 @@ impl ConnectChildOperation {\n         let mut queue = AggregationUpdateQueue::new();\n \n         // Handle the transient to persistent boundary by making the persistent task a root task\n-        if parent_task_id.is_none_or(|id| id.is_transient()) && !child_task_id.is_transient() {\n+        if parent_task_id.is_none_or(|id| id.is_transient() && !child_task_id.is_transient()) {\n             queue.push(AggregationUpdateJob::UpdateAggregationNumber {\n                 task_id: child_task_id,\n                 base_aggregation_number: u32::MAX,\n                 distance: None,\n             });\n         }\n \n-        // Immutable tasks cannot be invalidated, meaning that we never reschedule them.\n         if ctx.should_track_activeness() && parent_task_id.is_some() {\n             queue.push(AggregationUpdateJob::IncreaseActiveCount {\n                 task: child_task_id,"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 1,
        "deletions": 2
    }
}