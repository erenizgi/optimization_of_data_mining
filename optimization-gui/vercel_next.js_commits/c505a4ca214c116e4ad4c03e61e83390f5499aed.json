{
    "author": "gaojude",
    "message": "exclude AppDevOverlayErrorBoundary from prod build (#76568)\n\n**Test**\n\n\nGenerate a prod build, and search `AppDevOverlayErrorBoundary` in the\nbuild output.\n\n---\n\nBefore the change, `main-app` has an occurrence of\n`AppDevOverlayErrorBoundary`.\n\n\n![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/rKSEEwxbNzdFs9t0yyxN/85112448-fd0f-40f1-a948-79e69a97d4ff.png)\n\nAfter the change, there should be 0 occurrences:\n\n\n![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/rKSEEwxbNzdFs9t0yyxN/492605a8-3a23-459d-80a6-4f818ac8ef4d.png)",
    "sha": "c505a4ca214c116e4ad4c03e61e83390f5499aed",
    "files": [
        {
            "sha": "f68f8123dbc85fbc09cc1df34c0d3188c7b854af",
            "filename": "packages/next/src/client/react-client-callbacks/error-boundary-callbacks.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 4,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/c505a4ca214c116e4ad4c03e61e83390f5499aed/packages%2Fnext%2Fsrc%2Fclient%2Freact-client-callbacks%2Ferror-boundary-callbacks.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c505a4ca214c116e4ad4c03e61e83390f5499aed/packages%2Fnext%2Fsrc%2Fclient%2Freact-client-callbacks%2Ferror-boundary-callbacks.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Freact-client-callbacks%2Ferror-boundary-callbacks.ts?ref=c505a4ca214c116e4ad4c03e61e83390f5499aed",
            "patch": "@@ -7,7 +7,6 @@ import { isNextRouterError } from '../components/is-next-router-error'\n import { isBailoutToCSRError } from '../../shared/lib/lazy-dynamic/bailout-to-csr'\n import { reportGlobalError } from './report-global-error'\n import { originConsoleError } from '../components/globals/intercept-console-error'\n-import { AppDevOverlayErrorBoundary } from '../components/react-dev-overlay/app/app-dev-overlay-error-boundary'\n import {\n   ErrorBoundaryHandler,\n   GlobalError as DefaultErrorBoundary,\n@@ -19,12 +18,22 @@ export function onCaughtError(\n ) {\n   const errorBoundaryComponent = errorInfo.errorBoundary?.constructor\n \n-  const isImplicitErrorBoundary =\n-    (process.env.NODE_ENV !== 'production' &&\n-      errorBoundaryComponent === AppDevOverlayErrorBoundary) ||\n+  let isImplicitErrorBoundary\n+\n+  if (process.env.NODE_ENV !== 'production') {\n+    const { AppDevOverlayErrorBoundary } =\n+      require('../components/react-dev-overlay/app/app-dev-overlay-error-boundary') as typeof import('../components/react-dev-overlay/app/app-dev-overlay-error-boundary')\n+\n+    isImplicitErrorBoundary =\n+      errorBoundaryComponent === AppDevOverlayErrorBoundary\n+  }\n+\n+  isImplicitErrorBoundary =\n+    isImplicitErrorBoundary ||\n     (errorBoundaryComponent === ErrorBoundaryHandler &&\n       (errorInfo.errorBoundary! as InstanceType<typeof ErrorBoundaryHandler>)\n         .props.errorComponent === DefaultErrorBoundary)\n+\n   if (isImplicitErrorBoundary) {\n     // We don't consider errors caught unless they're caught by an explicit error\n     // boundary. The built-in ones are considered implicit."
        }
    ],
    "stats": {
        "total": 17,
        "additions": 13,
        "deletions": 4
    }
}