{
    "author": "mischnic",
    "message": "Turbopack: bundle only `new Worker` with `new URL` (#78010)\n\nOnly resolve/bundle `new Worker()` calls with a `new URL(\"..\", import.meta.url)` argument, and ignore anything else (just like Webpack).\n\nCloses https://github.com/vercel/next.js/issues/74621\nCloses PACK-4312",
    "sha": "72af683b9b98f98cd30b094673471f3d8343da79",
    "files": [
        {
            "sha": "ba9f0a9795f38e3f7b82825ac14eb04e360e5d49",
            "filename": "test/e2e/app-dir/worker/app/string/page.js",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/test%2Fe2e%2Fapp-dir%2Fworker%2Fapp%2Fstring%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/test%2Fe2e%2Fapp-dir%2Fworker%2Fapp%2Fstring%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fworker%2Fapp%2Fstring%2Fpage.js?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -0,0 +1,22 @@\n+'use client'\n+import { useState } from 'react'\n+\n+export default function Home() {\n+  const [state, setState] = useState('default')\n+  return (\n+    <div>\n+      <button\n+        onClick={() => {\n+          const worker = new Worker('/unbundled-worker.js')\n+          worker.addEventListener('message', (event) => {\n+            setState(event.data)\n+          })\n+        }}\n+      >\n+        Get web worker data\n+      </button>\n+      <p>Worker state: </p>\n+      <p id=\"worker-state\">{state}</p>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "50de186169b4466faed2d5d7a09912f9d86ceae5",
            "filename": "test/e2e/app-dir/worker/public/unbundled-worker.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/test%2Fe2e%2Fapp-dir%2Fworker%2Fpublic%2Funbundled-worker.js",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/test%2Fe2e%2Fapp-dir%2Fworker%2Fpublic%2Funbundled-worker.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fworker%2Fpublic%2Funbundled-worker.js?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -0,0 +1 @@\n+self.postMessage('unbundled-worker')"
        },
        {
            "sha": "aa4bd25edf7d13f0199b6dc31d4b454bc21f5c8e",
            "filename": "test/e2e/app-dir/worker/worker.test.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 7,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/test%2Fe2e%2Fapp-dir%2Fworker%2Fworker.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/test%2Fe2e%2Fapp-dir%2Fworker%2Fworker.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fworker%2Fworker.test.ts?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -1,5 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { check } from 'next-test-utils'\n+import { retry } from 'next-test-utils'\n \n describe('app dir - workers', () => {\n   const { next, skipped } = nextTestSetup({\n@@ -17,9 +17,10 @@ describe('app dir - workers', () => {\n \n     await browser.elementByCss('button').click()\n \n-    await check(\n-      async () => browser.elementByCss('#worker-state').text(),\n-      'worker.ts:worker-dep'\n+    await retry(async () =>\n+      expect(await browser.elementByCss('#worker-state').text()).toBe(\n+        'worker.ts:worker-dep'\n+      )\n     )\n   })\n \n@@ -29,9 +30,23 @@ describe('app dir - workers', () => {\n \n     await browser.elementByCss('button').click()\n \n-    await check(\n-      async () => browser.elementByCss('#worker-state').text(),\n-      'worker.ts:worker-dep'\n+    await retry(async () =>\n+      expect(await browser.elementByCss('#worker-state').text()).toBe(\n+        'worker.ts:worker-dep'\n+      )\n+    )\n+  })\n+\n+  it('should not bundle web workers with string specifiers', async () => {\n+    const browser = await next.browser('/string')\n+    expect(await browser.elementByCss('#worker-state').text()).toBe('default')\n+\n+    await browser.elementByCss('button').click()\n+\n+    await retry(async () =>\n+      expect(await browser.elementByCss('#worker-state').text()).toBe(\n+        'unbundled-worker'\n+      )\n     )\n   })\n })"
        },
        {
            "sha": "99575c4c7b2db274ab5a0517c8d832f4ca951ea5",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -1641,14 +1641,7 @@ async fn handle_call<G: Fn(Vec<Effect>) + Send + Sync>(\n \n                     return Ok(());\n                 }\n-                let (args, hints) = explain_args(&args);\n-                handler.span_warn_with_code(\n-                    span,\n-                    &format!(\"new Worker({args}) is not statically analyse-able{hints}\",),\n-                    DiagnosticId::Error(\n-                        errors::failed_to_analyse::ecmascript::DYNAMIC_IMPORT.to_string(),\n-                    ),\n-                );\n+                // Ignore (e.g. dynamic parameter or string literal), just as Webpack does\n                 return Ok(());\n             }\n             _ => {}"
        },
        {
            "sha": "2dfd34db8c10268b5b8357e405ac9f45a3acd87e",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/ignore-worker.cjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Finput%2Fignore-worker.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Finput%2Fignore-worker.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Finput%2Fignore-worker.cjs?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -0,0 +1,2 @@\n+// Shouldn't cause a worker to be created, but will still be pulled in by `new URL()`\n+module.exports = 123"
        },
        {
            "sha": "f92a4088c8a1882e00c7ecd4ba22937493f2e002",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Finput%2Findex.js?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -11,9 +11,8 @@ import(/* turbopackIgnore: true */ \"./ignore.mjs\");\n require(/* webpackIgnore: true */ \"./ignore.cjs\");\n require(/* turbopackIgnore: true */ \"./ignore.cjs\");\n \n-// and for workers\n-new Worker(/* webpackIgnore: true */ \"./ignore.mjs\");\n-new Worker(/* turbopackIgnore: true */ \"./ignore.cjs\");\n+new Worker(/* turbopackIgnore: true */ new URL(\"./ignore-worker.cjs\", import.meta.url))\n+new Worker(/* webpackIgnore: true */ new URL(\"./ignore-worker.cjs\", import.meta.url))\n \n export function foo(plugin) {\n   return require(/* turbopackIgnore: true */ plugin)"
        },
        {
            "sha": "e6b674c0d17b79bc9815fd4ebd9367433f9a766a",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -1,4 +1,4 @@\n-(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([\"output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_f0a767e9._.js\", {\n+(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([\"output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js\", {\n \n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.mjs [test] (ecmascript, async loader)\": ((__turbopack_context__) => {\n ",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_f0a767e9._.js"
        },
        {
            "sha": "c15d7ec00382d3604310ddb8b53cbdb90d9e1942",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js.map",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js.map?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_f0a767e9._.js.map"
        },
        {
            "sha": "7c4ff91fee634b69419d253165170fbf71e58c29",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js",
            "status": "renamed",
            "additions": 9,
            "deletions": 5,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -1,4 +1,4 @@\n-(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([\"output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_e1849155._.js\", {\n+(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([\"output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js\", {\n \n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.cjs [test] (ecmascript)\": (function(__turbopack_context__) {\n \n@@ -20,6 +20,11 @@ __turbopack_context__.v(__turbopack_context__.b([\n   \"output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_cjs_3041f295._.js\"\n ]));\n }}),\n+\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/ignore-worker.cjs (static in ecmascript)\": ((__turbopack_context__) => {\n+\n+var { g: global, __dirname } = __turbopack_context__;\n+{\n+__turbopack_context__.v(\"/static/ignore-worker.c7cb9893.cjs\");}}),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js [test] (ecmascript)\": ((__turbopack_context__) => {\n \"use strict\";\n \n@@ -43,13 +48,12 @@ import(/* turbopackIgnore: true */ \"./ignore.mjs\");\n // this should work for cjs requires too\n require(/* webpackIgnore: true */ \"./ignore.cjs\");\n require(/* turbopackIgnore: true */ \"./ignore.cjs\");\n-// and for workers\n-new Worker(/* webpackIgnore: true */ \"./ignore.mjs\");\n-new Worker(/* turbopackIgnore: true */ \"./ignore.cjs\");\n+new Worker(new __turbopack_context__.U(__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/ignore-worker.cjs (static in ecmascript)\")));\n+new Worker(new __turbopack_context__.U(__turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/ignore-worker.cjs (static in ecmascript)\")));\n function foo(plugin) {\n     return require(/* turbopackIgnore: true */ plugin);\n }\n }}),\n }]);\n \n-//# sourceMappingURL=4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_e1849155._.js.map\n\\ No newline at end of file\n+//# sourceMappingURL=4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map\n\\ No newline at end of file",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_e1849155._.js"
        },
        {
            "sha": "0bb350528d36d7519354e9b9ec5489fbb640926a",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js.map?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -3,5 +3,5 @@\n   \"sources\": [],\n   \"sections\": [\n     {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/vercel.cjs\"],\"sourcesContent\":[\"module.exports = \\\"turbopack\\\";\\n\"],\"names\":[],\"mappings\":\"AAAA,OAAO,OAAO,GAAG\"}},\n-    {\"offset\": {\"line\": 27, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js\"],\"sourcesContent\":[\"import(\\\"./vercel.mjs\\\").then(console.log);\\nimport(/* webpackIgnore: false */ \\\"./vercel.mjs\\\").then(console.log);\\nconsole.log(require(\\\"./vercel.cjs\\\"));\\nnew Worker(/* turbopackIgnore: false */ new URL(\\\"./vercel.cjs\\\", import.meta.url));\\n\\n// turbopack shouldn't attempt to bundle these, and they should be preserved in the output\\nimport(/* webpackIgnore: true */ \\\"./ignore.mjs\\\");\\nimport(/* turbopackIgnore: true */ \\\"./ignore.mjs\\\");\\n\\n// this should work for cjs requires too\\nrequire(/* webpackIgnore: true */ \\\"./ignore.cjs\\\");\\nrequire(/* turbopackIgnore: true */ \\\"./ignore.cjs\\\");\\n\\n// and for workers\\nnew Worker(/* webpackIgnore: true */ \\\"./ignore.mjs\\\");\\nnew Worker(/* turbopackIgnore: true */ \\\"./ignore.cjs\\\");\\n\\nexport function foo(plugin) {\\n  return require(/* turbopackIgnore: true */ plugin)\\n}\\n\"],\"names\":[],\"mappings\":\";;;;;;;;AAAA,yLAAuB,IAAI,CAAC,QAAQ,GAAG;AACvC,yLAAkD,IAAI,CAAC,QAAQ,GAAG;AAClE,QAAQ,GAAG;AACX,IAAI;AAEJ,0FAA0F;AAC1F,MAAM,CAAC,uBAAuB,GAAG;AACjC,MAAM,CAAC,yBAAyB,GAAG;AAEnC,wCAAwC;AACxC,QAAQ,uBAAuB,GAAG;AAClC,QAAQ,yBAAyB,GAAG;AAEpC,kBAAkB;AAClB,IAAI,OAAO,uBAAuB,GAAG;AACrC,IAAI,OAAO,yBAAyB,GAAG;AAEhC,SAAS,IAAI,MAAM;IACxB,OAAO,QAAQ,yBAAyB,GAAG;AAC7C\"}}]\n+    {\"offset\": {\"line\": 32, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js\"],\"sourcesContent\":[\"import(\\\"./vercel.mjs\\\").then(console.log);\\nimport(/* webpackIgnore: false */ \\\"./vercel.mjs\\\").then(console.log);\\nconsole.log(require(\\\"./vercel.cjs\\\"));\\nnew Worker(/* turbopackIgnore: false */ new URL(\\\"./vercel.cjs\\\", import.meta.url));\\n\\n// turbopack shouldn't attempt to bundle these, and they should be preserved in the output\\nimport(/* webpackIgnore: true */ \\\"./ignore.mjs\\\");\\nimport(/* turbopackIgnore: true */ \\\"./ignore.mjs\\\");\\n\\n// this should work for cjs requires too\\nrequire(/* webpackIgnore: true */ \\\"./ignore.cjs\\\");\\nrequire(/* turbopackIgnore: true */ \\\"./ignore.cjs\\\");\\n\\nnew Worker(/* turbopackIgnore: true */ new URL(\\\"./ignore-worker.cjs\\\", import.meta.url))\\nnew Worker(/* webpackIgnore: true */ new URL(\\\"./ignore-worker.cjs\\\", import.meta.url))\\n\\nexport function foo(plugin) {\\n  return require(/* turbopackIgnore: true */ plugin)\\n}\\n\"],\"names\":[],\"mappings\":\";;;;;;;;AAAA,yLAAuB,IAAI,CAAC,QAAQ,GAAG;AACvC,yLAAkD,IAAI,CAAC,QAAQ,GAAG;AAClE,QAAQ,GAAG;AACX,IAAI;AAEJ,0FAA0F;AAC1F,MAAM,CAAC,uBAAuB,GAAG;AACjC,MAAM,CAAC,yBAAyB,GAAG;AAEnC,wCAAwC;AACxC,QAAQ,uBAAuB,GAAG;AAClC,QAAQ,yBAAyB,GAAG;AAEpC,IAAI;AACJ,IAAI;AAEG,SAAS,IAAI,MAAM;IACxB,OAAO,QAAQ,yBAAyB,GAAG;AAC7C\"}}]\n }\n\\ No newline at end of file",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_e1849155._.js.map"
        },
        {
            "sha": "2249b5ad7ff0650b064be1e5d22fc42ea1b85807",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/b1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -1,6 +1,6 @@\n (globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([\n-    \"output/b1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_03bfbde6.js\",\n+    \"output/b1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js\",\n     {},\n-    {\"otherChunks\":[\"output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_f0a767e9._.js\",\"output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_e1849155._.js\"],\"runtimeModuleIds\":[\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js [test] (ecmascript)\"]}\n+    {\"otherChunks\":[\"output/4c35f_tests_snapshot_imports_ignore-comments_input_vercel_mjs_0dd84fce._.js\",\"output/4e721_crates_turbopack-tests_tests_snapshot_imports_ignore-comments_input_7f940ff3._.js\"],\"runtimeModuleIds\":[\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/input/index.js [test] (ecmascript)\"]}\n ]);\n // Dummy runtime\n\\ No newline at end of file",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/b1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_03bfbde6.js"
        },
        {
            "sha": "c15d7ec00382d3604310ddb8b53cbdb90d9e1942",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/b1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js.map",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_a67357ee.js.map?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "previous_filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/output/b1abf_turbopack-tests_tests_snapshot_imports_ignore-comments_input_index_03bfbde6.js.map"
        },
        {
            "sha": "de83f1419f091073f0f3f384d55bf454f27172c8",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/imports/ignore-comments/static/ignore-worker.c7cb9893.cjs",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Fstatic%2Fignore-worker.c7cb9893.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/72af683b9b98f98cd30b094673471f3d8343da79/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Fstatic%2Fignore-worker.c7cb9893.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fimports%2Fignore-comments%2Fstatic%2Fignore-worker.c7cb9893.cjs?ref=72af683b9b98f98cd30b094673471f3d8343da79",
            "patch": "@@ -0,0 +1,2 @@\n+// Shouldn't cause a worker to be created, but will still be pulled in by `new URL()`\n+module.exports = 123\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 92,
        "additions": 65,
        "deletions": 27
    }
}