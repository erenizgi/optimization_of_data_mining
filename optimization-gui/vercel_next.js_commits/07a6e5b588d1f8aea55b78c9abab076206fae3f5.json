{
    "author": "xusd320",
    "message": "perf(turbopack): let some Clone be conditional in insert_alias_option (#81175)\n\n## What\r\nAs the title described.",
    "sha": "07a6e5b588d1f8aea55b78c9abab076206fae3f5",
    "files": [
        {
            "sha": "01e7a7e25e7bcd0721e2498d90b909558c7446f6",
            "filename": "crates/next-core/src/next_import_map.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/07a6e5b588d1f8aea55b78c9abab076206fae3f5/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/07a6e5b588d1f8aea55b78c9abab076206fae3f5/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs?ref=07a6e5b588d1f8aea55b78c9abab076206fae3f5",
            "patch": "@@ -112,7 +112,7 @@ pub async fn get_next_client_import_map(\n \n     insert_alias_option(\n         &mut import_map,\n-        project_path.clone(),\n+        &project_path,\n         next_config.resolve_alias_options(),\n         [\"browser\"],\n     )\n@@ -311,7 +311,7 @@ pub async fn get_next_server_import_map(\n \n     insert_alias_option(\n         &mut import_map,\n-        project_path.clone(),\n+        &project_path,\n         next_config.resolve_alias_options(),\n         [],\n     )\n@@ -453,7 +453,7 @@ pub async fn get_next_edge_import_map(\n \n     insert_alias_option(\n         &mut import_map,\n-        project_path.clone(),\n+        &project_path,\n         next_config.resolve_alias_options(),\n         [],\n     )\n@@ -1149,15 +1149,13 @@ pub async fn get_next_package(context_directory: FileSystemPath) -> Result<Vc<Fi\n \n pub async fn insert_alias_option<const N: usize>(\n     import_map: &mut ImportMap,\n-    project_path: FileSystemPath,\n+    project_path: &FileSystemPath,\n     alias_options: Vc<ResolveAliasMap>,\n     conditions: [&'static str; N],\n ) -> Result<()> {\n     let conditions = BTreeMap::from(conditions.map(|c| (c.into(), ConditionValue::Set)));\n     for (alias, value) in &alias_options.await? {\n-        if let Some(mapping) =\n-            export_value_to_import_mapping(value, &conditions, project_path.clone())\n-        {\n+        if let Some(mapping) = export_value_to_import_mapping(value, &conditions, project_path) {\n             import_map.insert_alias(alias, mapping);\n         }\n     }\n@@ -1167,7 +1165,7 @@ pub async fn insert_alias_option<const N: usize>(\n fn export_value_to_import_mapping(\n     value: &SubpathValue,\n     conditions: &BTreeMap<RcStr, ConditionValue>,\n-    project_path: FileSystemPath,\n+    project_path: &FileSystemPath,\n ) -> Option<ResolvedVc<ImportMapping>> {\n     let mut result = Vec::new();\n     value.add_results(\n@@ -1180,7 +1178,7 @@ fn export_value_to_import_mapping(\n         None\n     } else {\n         Some(if result.len() == 1 {\n-            ImportMapping::PrimaryAlternative(result[0].0.into(), Some(project_path))\n+            ImportMapping::PrimaryAlternative(result[0].0.into(), Some(project_path.clone()))\n                 .resolved_cell()\n         } else {\n             ImportMapping::Alternatives("
        }
    ],
    "stats": {
        "total": 16,
        "additions": 7,
        "deletions": 9
    }
}