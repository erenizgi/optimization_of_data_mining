{
    "author": "devjiwonchoi",
    "message": "Add deprecation warning to Runtime config (#84168)\n\nFollowing up on https://github.com/vercel/next.js/pull/84167, adding a deprecation warning for the Runtime config. This PR will be backported to v15.",
    "sha": "c2945499ec2b106f5ccdfd667df01e72663a3db7",
    "files": [
        {
            "sha": "dd6f7b1f12536b208843a83a10e63865d18b7829",
            "filename": "packages/next/config.js",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/packages%2Fnext%2Fconfig.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/packages%2Fnext%2Fconfig.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fconfig.js?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -1 +1,12 @@\n-module.exports = require('./dist/shared/lib/runtime-config.external')\n+let hasWarned = false\n+\n+module.exports = (() => {\n+  if (!hasWarned) {\n+    console.warn(\n+      // ANSI code aligns with Next.js warning style from picocolors.\n+      ' \\x1b[33m\\x1b[1mâš \\x1b[22m\\x1b[39m Runtime config is deprecated and will be removed in Next.js 16. Please remove the usage of \"next/config\" from your project.'\n+    )\n+    hasWarned = true\n+  }\n+  return require('./dist/shared/lib/runtime-config.external')\n+})()"
        },
        {
            "sha": "4b6c4f3f7b32bc5a7d23c28944eb31c24294015f",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -1131,14 +1131,16 @@ export interface NextConfig {\n   /**\n    * Add public (in browser) runtime configuration to your app\n    *\n-   * @see [Runtime configuration](https://nextjs.org/docs/pages/api-reference/config/next-config-js/runtime-configuration\n+   * @see [Runtime configuration](https://nextjs.org/docs/pages/api-reference/config/next-config-js/runtime-configuration)\n+   * @deprecated Runtime config is deprecated and will be removed in Next.js 16.\n    */\n   publicRuntimeConfig?: { [key: string]: any }\n \n   /**\n    * Add server runtime configuration to your app\n    *\n-   * @see [Runtime configuration](https://nextjs.org/docs/pages/api-reference/config/next-config-js/runtime-configuration\n+   * @see [Runtime configuration](https://nextjs.org/docs/pages/api-reference/config/next-config-js/runtime-configuration)\n+   * @deprecated Runtime config is deprecated and will be removed in Next.js 16.\n    */\n   serverRuntimeConfig?: { [key: string]: any }\n "
        },
        {
            "sha": "baa1a93e994225cf4c7a9c773d7c7a0b25a8ecb6",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -117,6 +117,19 @@ function checkDeprecations(\n   silent: boolean,\n   dir: string\n ) {\n+  warnOptionHasBeenDeprecated(\n+    userConfig,\n+    'publicRuntimeConfig',\n+    `Runtime config is deprecated and the \\`publicRuntimeConfig\\` configuration option will be removed in Next.js 16.`,\n+    silent\n+  )\n+  warnOptionHasBeenDeprecated(\n+    userConfig,\n+    'serverRuntimeConfig',\n+    `Runtime config is deprecated and the \\`serverRuntimeConfig\\` configuration option will be removed in Next.js 16.`,\n+    silent\n+  )\n+\n   if (userConfig.experimental?.dynamicIO !== undefined) {\n     warnOptionHasBeenDeprecated(\n       userConfig,"
        },
        {
            "sha": "1a294922c94c800e16f312c7b7b5b7c26ae6d279",
            "filename": "packages/next/src/shared/lib/runtime-config.external.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fruntime-config.external.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fruntime-config.external.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fruntime-config.external.ts?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -1,9 +1,15 @@\n let runtimeConfig: any\n \n+/**\n+ * @deprecated Runtime config is deprecated and will be removed in Next.js 16.\n+ */\n export default () => {\n   return runtimeConfig\n }\n \n+/**\n+ * @deprecated Runtime config is deprecated and will be removed in Next.js 16.\n+ */\n export function setConfig(configValue: any): void {\n   runtimeConfig = configValue\n }"
        },
        {
            "sha": "888614deda3ba5d744d1a7e5dac131038dba2b12",
            "filename": "test/e2e/app-dir/deprecation-warning-runtime-config/app/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fapp%2Flayout.tsx?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -0,0 +1,8 @@\n+import { ReactNode } from 'react'\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b11185cc1000b30e6e8d6fd5caf4d7c851bc7cdc",
            "filename": "test/e2e/app-dir/deprecation-warning-runtime-config/app/page.tsx",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fapp%2Fpage.tsx?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -0,0 +1,6 @@\n+import getConfig from 'next/config'\n+\n+export default function Page() {\n+  getConfig()\n+  return <p>hello world</p>\n+}"
        },
        {
            "sha": "19c3bbfd403ce76693e291d7635770ec5d5e0a8f",
            "filename": "test/e2e/app-dir/deprecation-warning-runtime-config/deprecation-warning-runtime-config.test.ts",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fdeprecation-warning-runtime-config.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fdeprecation-warning-runtime-config.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fdeprecation-warning-runtime-config.test.ts?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -0,0 +1,16 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('deprecation-warning-runtime-config', () => {\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should warn when imported \"next/config\" module', async () => {\n+    // Navigate to \"/\" for dev server to execute the code\n+    await next.browser('/')\n+\n+    expect(next.cliOutput).toContain(\n+      'Runtime config is deprecated and will be removed in Next.js 16. Please remove the usage of \"next/config\" from your project.'\n+    )\n+  })\n+})"
        },
        {
            "sha": "789b3b853ebed6a3525497f33d0418d9a4d09748",
            "filename": "test/e2e/app-dir/deprecation-warning-runtime-config/next.config.js",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdeprecation-warning-runtime-config%2Fnext.config.js?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -0,0 +1,13 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+const nextConfig = {\n+  publicRuntimeConfig: {\n+    foo: 'bar',\n+  },\n+  serverRuntimeConfig: {\n+    foo: 'bar',\n+  },\n+}\n+\n+module.exports = nextConfig"
        },
        {
            "sha": "941b9a48b83fceaf7642807b943b7ac0214863da",
            "filename": "test/e2e/deprecation-warnings/deprecation-warnings.test.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fdeprecation-warnings%2Fdeprecation-warnings.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fdeprecation-warnings%2Fdeprecation-warnings.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fdeprecation-warnings%2Fdeprecation-warnings.test.ts?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -32,6 +32,14 @@ describe('deprecation-warnings', () => {\n       // Should warn about experimental.instrumentationHook\n       expect(logs).toContain('experimental.instrumentationHook')\n       expect(logs).toContain('no longer needed')\n+\n+      // Should warn about publicRuntimeConfig\n+      expect(logs).toContain('publicRuntimeConfig')\n+      expect(logs).toContain('will be removed in Next.js 16')\n+\n+      // Should warn about serverRuntimeConfig\n+      expect(logs).toContain('serverRuntimeConfig')\n+      expect(logs).toContain('will be removed in Next.js 16')\n     })\n   })\n })"
        },
        {
            "sha": "e966bf4e380ca57aa7864ecbcfe3a7a3dedd965c",
            "filename": "test/e2e/deprecation-warnings/fixtures/with-deprecated-config/next.config.js",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fdeprecation-warnings%2Ffixtures%2Fwith-deprecated-config%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c2945499ec2b106f5ccdfd667df01e72663a3db7/test%2Fe2e%2Fdeprecation-warnings%2Ffixtures%2Fwith-deprecated-config%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fdeprecation-warnings%2Ffixtures%2Fwith-deprecated-config%2Fnext.config.js?ref=c2945499ec2b106f5ccdfd667df01e72663a3db7",
            "patch": "@@ -1,6 +1,13 @@\n+/** @type {import('next').NextConfig} */\n module.exports = {\n   // Explicitly configure deprecated options\n   experimental: {\n     instrumentationHook: true,\n   },\n+  publicRuntimeConfig: {\n+    foo: 'bar',\n+  },\n+  serverRuntimeConfig: {\n+    foo: 'bar',\n+  },\n }"
        }
    ],
    "stats": {
        "total": 96,
        "additions": 93,
        "deletions": 3
    }
}