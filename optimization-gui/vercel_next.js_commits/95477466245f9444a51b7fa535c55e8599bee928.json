{
    "author": "lukesandberg",
    "message": "Remove some AST clones from `process_content_with_code_gens` (#79016)",
    "sha": "95477466245f9444a51b7fa535c55e8599bee928",
    "files": [
        {
            "sha": "9f106df1cce3656b8e3133938fb276b8348d95d6",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/95477466245f9444a51b7fa535c55e8599bee928/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/95477466245f9444a51b7fa535c55e8599bee928/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=95477466245f9444a51b7fa535c55e8599bee928",
            "patch": "@@ -1151,18 +1151,18 @@ fn process_content_with_code_gens(\n     program: &mut Program,\n     globals: &Globals,\n     top_level_mark: Option<Mark>,\n-    code_gens: Vec<CodeGeneration>,\n+    mut code_gens: Vec<CodeGeneration>,\n ) {\n     let mut visitors = Vec::new();\n     let mut root_visitors = Vec::new();\n     let mut early_hoisted_stmts = FxIndexMap::default();\n     let mut hoisted_stmts = FxIndexMap::default();\n-    for code_gen in &code_gens {\n-        for CodeGenerationHoistedStmt { key, stmt } in &code_gen.hoisted_stmts {\n-            hoisted_stmts.entry(key.clone()).or_insert(stmt.clone());\n+    for code_gen in &mut code_gens {\n+        for CodeGenerationHoistedStmt { key, stmt } in code_gen.hoisted_stmts.drain(..) {\n+            hoisted_stmts.entry(key).or_insert(stmt);\n         }\n-        for CodeGenerationHoistedStmt { key, stmt } in &code_gen.early_hoisted_stmts {\n-            early_hoisted_stmts.insert(key.clone(), stmt.clone());\n+        for CodeGenerationHoistedStmt { key, stmt } in code_gen.early_hoisted_stmts.drain(..) {\n+            early_hoisted_stmts.insert(key.clone(), stmt);\n         }\n         for (path, visitor) in &code_gen.visitors {\n             if path.is_empty() {"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 6,
        "deletions": 6
    }
}