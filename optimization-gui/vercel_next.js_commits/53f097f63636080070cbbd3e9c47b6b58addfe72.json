{
    "author": "ahabhgk",
    "message": "Fix resolve alternate bundler in monorepo (#77913)\n\nresolve rspack related packages from `next-rspack`, to make sure rspack\nis using the expected version",
    "sha": "53f097f63636080070cbbd3e9c47b6b58addfe72",
    "files": [
        {
            "sha": "49d3ee39818346edc2cee6d996206fcb93464a82",
            "filename": "packages/next/src/shared/lib/get-rspack.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 3,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/53f097f63636080070cbbd3e9c47b6b58addfe72/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fget-rspack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53f097f63636080070cbbd3e9c47b6b58addfe72/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fget-rspack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fget-rspack.ts?ref=53f097f63636080070cbbd3e9c47b6b58addfe72",
            "patch": "@@ -3,8 +3,9 @@ import { warnOnce } from '../../build/output/log'\n export function getRspackCore() {\n   warnRspack()\n   try {\n+    const paths = [require.resolve('next-rspack')]\n     // eslint-disable-next-line import/no-extraneous-dependencies\n-    return require('@rspack/core')\n+    return require(require.resolve('@rspack/core', { paths }))\n   } catch (e) {\n     if (e instanceof Error && 'code' in e && e.code === 'MODULE_NOT_FOUND') {\n       throw new Error(\n@@ -19,10 +20,14 @@ export function getRspackCore() {\n export function getRspackReactRefresh() {\n   warnRspack()\n   try {\n+    const paths = [require.resolve('next-rspack')]\n     // eslint-disable-next-line import/no-extraneous-dependencies\n-    const plugin = require('@rspack/plugin-react-refresh')\n+    const plugin = require(\n+      require.resolve('@rspack/plugin-react-refresh', { paths })\n+    )\n     const entry = require.resolve(\n-      '@rspack/plugin-react-refresh/react-refresh-entry'\n+      '@rspack/plugin-react-refresh/react-refresh-entry',\n+      { paths }\n     )\n     plugin.entry = entry\n     return plugin"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 8,
        "deletions": 3
    }
}