{
    "author": "gnoff",
    "message": "[Cache Components] Error for Sync IO in Server Components during Static Prerender (#82500)\n\nCurrently we error if you cannot produce a shell unless you have a\nSuspense boundary above the root. This is fine for normal IO but sync IO\nlike Math.random() and new Date() have much more significant bad\nconsequences for prerendering. Instead of treating these errors as\nanother flavor of \"must have a shell\" validation we should instead treat\nthem like they must be guarded behind something else dynamic like `await\nconnection()`.\n\nIn addition to unconditionally erroring for Sync IO in Server Components\nwhen prerendering this change also removes the Sync IO warning for\nruntime prefetches. This is because at the moment there is no way to\ndebug these errors in dev. In the future we will add validation for\nprefetches and need to add back in some ability to warn for these cases\nbut until then we will leave this case as a silent deopt.",
    "sha": "ed5d085fb182364414b8ca0e8baa2e1988e629d6",
    "files": [
        {
            "sha": "cf697f4272690f3f37503fb56d3348c7dac6e77b",
            "filename": "errors/next-prerender-crypto.mdx",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/errors%2Fnext-prerender-crypto.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/errors%2Fnext-prerender-crypto.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Fnext-prerender-crypto.mdx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -1,15 +1,17 @@\n ---\n-title: Cannot access `crypto.getRandomValue()`, `crypto.randomUUID()`, or another web or node crypto API that generates random values synchronously in a Server Component\n+title: Cannot access `crypto.getRandomValue()`, `crypto.randomUUID()`, or another web or node crypto API that generates random values synchronously before other uncached data or Request data in a Server Component\n ---\n \n ## Why This Error Occurred\n \n-An API that produces a random value synchronously from the Web Crypto API or from Node's `crypto` API was called outside of a `\"use cache\"` scope and without first calling `await connection()`. Random values that are produced synchronously must either be inside a `\"use cache\"` scope or be preceded with `await connection()` to explicitly communicate to Next.js whether the random values produced can be reused across many requests (cached) or if they must be unique per Request (`await connection()`).\n-\n-If the API used has an async version you can also switch to that instead of using `await connection()`.\n+An API that produces a random value synchronously from the Web Crypto API or from Node's `crypto` package was used in a Server Component before accessing other uncached data through APIs like `fetch()` and native database drivers, or Request data through Next.js APIs like `cookies()`, `headers()`, `connection()` and `searchParams`. Accessing random values synchronously in this way interferes with the prerendering and prefetching capabilities of Next.js.\n \n ## Possible Ways to Fix It\n \n+If the random crypto value is appropriate to be prerendered and prefetched consider moving it into a Cache Component or Cache Function with the `\"use cache\"` directive.\n+\n+If the random crypto value is intended to be generated on every user request consider whether an async API exists that achieves the same result. If not consider whether you can move the random crypto value generation later, behind other existing uncached data or Request data access. If there is no way to do this you can always precede the random crypto value generation with Request data access by using `await connection()`.\n+\n ### Cache the token value\n \n If you are generating a token to talk to a database that itself should be cached move the token generation inside the `\"use cache\"`."
        },
        {
            "sha": "def797693cae70d8687876276be36adf44d19307",
            "filename": "errors/next-prerender-current-time.mdx",
            "status": "modified",
            "additions": 13,
            "deletions": 4,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/errors%2Fnext-prerender-current-time.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/errors%2Fnext-prerender-current-time.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Fnext-prerender-current-time.mdx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -1,15 +1,21 @@\n ---\n-title: Cannot infer intended usage of current time with `Date.now()`, `Date()`, or `new Date()` in a Server Component\n+title: Cannot access `Date.now()`, `Date()`, or `new Date()` before other uncached data or Request data in a Server Component\n ---\n \n ## Why This Error Occurred\n \n-Reading the current time in a Server Component can be ambiguous. Sometimes you intend to capture the time when something was cached, other times you intend to capture the time of a user Request. You might also be trying to measure runtime performance to track elapsed time.\n-\n-Depending on your use case you might use alternative time APIs like `performance.now()`, you might cache the time read with `\"use cache\"`, or you might communicate that the time must be evaluated on each request by guarding it with `await connection()` or moving it into a Client Component.\n+`Date.now()`, `Date()`, or `new Date()` was used in a Server Component before accessing other uncached data through APIs like `fetch()` and native database drivers, or Request data through built-in APIs like `cookies()`, `headers()`, `connection()` and `searchParams`. Accessing the current time in this way interferes with the prerendering and prefetching capabilities of Next.js.\n \n ## Possible Ways to Fix It\n \n+If the current time is being used for diagnostic purposes such as logging or performance tracking consider using `performance.now()` instead.\n+\n+If the current time is appropriate to be prerendered and prefetched consider moving it into a Cache Component or Cache Function with the `\"use cache\"` directive.\n+\n+If the current time is intended to be accessed dynamically on every user request first consider whether it is more appropriate to access it in a Client Component, which can often be the case when reading the time for display purposes. If a Client Component isn't the right choice then consider whether you can move the current time access later, behind other existing uncached data or Request data access. If there is no way to do this you can always precede the current time access with Request data access by using `await connection()`.\n+\n+> **Note**: Sometimes the place that accesses the current time is inside 3rd party code. While you can't easily convert the time access to `performance.now()` the other strategies can be applied in your own project code regardless of how deeply the time is read.\n+\n ### Performance use case\n \n If you are using the current time for performance tracking with elapsed time use `performance.now()`.\n@@ -40,6 +46,7 @@ export default async function Page() {\n ```\n \n > **Note**: If you need report an absolute time to an observability tool you can also use `performance.timeOrigin + performance.now()`.\n+> **Note**: It is essential that the values provided by `performance.now()` do not influence the rendered output of your Component and should never be passed into Cache Functions as arguments or props.\n \n ### Cacheable use cases\n \n@@ -214,6 +221,8 @@ async function DynamicBanner() {\n }\n ```\n \n+> **Note**: This example illustrates using `await connection()`, but you could alternatively move where a uncached fetch happens or read cookies before as well.\n+\n ## Useful Links\n \n - [`Date.now` API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now)"
        },
        {
            "sha": "2b158cffc97f6d59adcfa5882211ee562d2f545c",
            "filename": "errors/next-prerender-random.mdx",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/errors%2Fnext-prerender-random.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/errors%2Fnext-prerender-random.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Fnext-prerender-random.mdx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -1,13 +1,21 @@\n ---\n-title: Cannot infer intended usage of `Math.random()` in a Server Component\n+title: Cannot access `Math.random()` before other uncached data or Request data in a Server Component\n ---\n \n ## Why This Error Occurred\n \n-A Server Component is calling `Math.random()` without specifying whether it should be cached or whether it should be evaluated on each user Request. If you want this random value to be included in the prerendered HTML for this page you must cache it using `\"use cache\"`. If you want this random value to be unique per Request you must precede it with `await connection()` so Next.js knows to exclude it from the prerendered HTML.\n+`Math.random()` was called in a Server Component before accessing other uncached data through APIs like `fetch()` and native database drivers, or Request data through built-in APIs like `cookies()`, `headers()`, `connection()` and `searchParams`. Accessing random values in this way interferes with the prerendering and prefetching capabilities of Next.js.\n \n ## Possible Ways to Fix It\n \n+If the random value is appropriate to be prerendered and prefetched consider moving it into a Cache Component or Cache Function with the `\"use cache\"` directive.\n+\n+If the random value is intended to be generated on every user request consider whether you can move the random value generation later, behind other existing uncached data or Request data access. If there is no way to do this you can always precede the random value generation with Request data access by using `await connection()`.\n+\n+If the random value is being used as a unique identifier for diagnostic purposes such as logging or tracking consider using an alternate method of id generation that does not rely on random number generation such as incrementing an integer.\n+\n+> **Note**: Sometimes the place that generates a random value synchronously is inside 3rd party code. While you can't easily replace the `Math.random()` call directly, the other strategies can be applied in your own project code regardless of how deep random generation is.\n+\n ### Cache the random value\n \n If your random value is cacheable, move the `Math.random()` call to a `\"use cache\"` function. For instance, imagine you have a product page and you want to randomize the product order periodically but you are fine with the random order being re-used for different users."
        },
        {
            "sha": "9885b95632cf5e66225953adaad41f9389e28a45",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -138,7 +138,6 @@ import {\n   consumeDynamicAccess,\n   type DynamicAccess,\n   logDisallowedDynamicError,\n-  warnOnSyncDynamicError,\n } from './dynamic-rendering'\n import {\n   getClientComponentLoaderMetrics,\n@@ -909,8 +908,6 @@ async function finalRuntimeServerPrerender(\n     }\n   )\n \n-  warnOnSyncDynamicError(serverDynamicTracking)\n-\n   return {\n     result,\n     // TODO(runtime-ppr): do we need to produce a digest map here?"
        },
        {
            "sha": "2c88cd8e0bfc170eeca54ff57a91f473b485bbaf",
            "filename": "packages/next/src/server/app-render/dynamic-rendering.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 26,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fdynamic-rendering.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fdynamic-rendering.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fdynamic-rendering.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -341,21 +341,6 @@ export function abortAndThrowOnSynchronousRequestDataAccess(\n   )\n }\n \n-/**\n- * Use this function when dynamically prerendering with dynamicIO.\n- * We don't want to error, because it's better to return something\n- * (and we've already aborted the render at the point where the sync dynamic error occured),\n- * but we should log an error server-side.\n- * @internal\n- */\n-export function warnOnSyncDynamicError(dynamicTracking: DynamicTrackingState) {\n-  if (dynamicTracking.syncDynamicErrorWithStack) {\n-    // the server did something sync dynamic, likely\n-    // leading to an early termination of the prerender.\n-    console.error(dynamicTracking.syncDynamicErrorWithStack)\n-  }\n-}\n-\n // For now these implementations are the same so we just reexport\n export const trackSynchronousRequestDataAccessInDev =\n   trackSynchronousPlatformIOAccessInDev\n@@ -778,6 +763,14 @@ export function throwIfDisallowedDynamic(\n   dynamicValidation: DynamicValidationState,\n   serverDynamic: DynamicTrackingState\n ): void {\n+  if (serverDynamic.syncDynamicErrorWithStack) {\n+    logDisallowedDynamicError(\n+      workStore,\n+      serverDynamic.syncDynamicErrorWithStack\n+    )\n+    throw new StaticGenBailoutError()\n+  }\n+\n   if (prelude !== PreludeState.Full) {\n     if (dynamicValidation.hasSuspenseAboveBody) {\n       // This route has opted into allowing fully dynamic rendering\n@@ -786,17 +779,6 @@ export function throwIfDisallowedDynamic(\n       return\n     }\n \n-    if (serverDynamic.syncDynamicErrorWithStack) {\n-      // There is no shell and the server did something sync dynamic likely\n-      // leading to an early termination of the prerender before the shell\n-      // could be completed. We terminate the build/validating render.\n-      logDisallowedDynamicError(\n-        workStore,\n-        serverDynamic.syncDynamicErrorWithStack\n-      )\n-      throw new StaticGenBailoutError()\n-    }\n-\n     // We didn't have any sync bailouts but there may be user code which\n     // blocked the root. We would have captured these during the prerender\n     // and can log them here and then terminate the build/validating render"
        },
        {
            "sha": "f630ad1cc98661578373599d18ba9f3f946cbdb4",
            "filename": "packages/next/src/server/node-environment-extensions/utils.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Futils.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Futils.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Futils.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -30,13 +30,13 @@ export function io(expression: string, type: ApiType) {\n         let message: string\n         switch (type) {\n           case 'time':\n-            message = `Route \"${workStore.route}\" used ${expression} instead of using \\`performance\\` or without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time`\n+            message = `Route \"${workStore.route}\" used ${expression} before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time`\n             break\n           case 'random':\n-            message = `Route \"${workStore.route}\" used ${expression} outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random`\n+            message = `Route \"${workStore.route}\" used ${expression} before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random`\n             break\n           case 'crypto':\n-            message = `Route \"${workStore.route}\" used ${expression} outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto`\n+            message = `Route \"${workStore.route}\" used ${expression} before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto`\n             break\n           default:\n             throw new InvariantError("
        },
        {
            "sha": "cd5c5726f096da2963c651c57a502fd02e750454",
            "filename": "test/development/app-dir/cache-components-dev-errors/cache-components-dev-errors.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -22,7 +22,7 @@ describe('Cache Components Dev Errors', () => {\n     // soft-navigating to the page (see test below).\n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"description\": \"Route \"/error\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n+       \"description\": \"Route \"/error\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Console Error\",\n        \"source\": \"app/error/page.tsx (2:23) @ Page\n@@ -52,7 +52,7 @@ describe('Cache Components Dev Errors', () => {\n     // TODO: React should not include the anon stack in the Owner Stack.\n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n-       \"description\": \"Route \"/error\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n+       \"description\": \"Route \"/error\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n        \"environmentLabel\": \"Server\",\n        \"label\": \"Console Error\",\n        \"source\": \"app/error/page.tsx (2:23) @ Page"
        },
        {
            "sha": "065869c96f9d5d0f6fa5a296ac8af64a09f49673",
            "filename": "test/e2e/app-dir/cache-components-errors/cache-components-errors.test.ts",
            "status": "modified",
            "additions": 1845,
            "deletions": 29,
            "changes": 1874,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6"
        },
        {
            "sha": "4e83c6d258bce1502628a439826b8adb5d70705a",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-current-time/date-now/page.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fdate-now%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fdate-now%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fdate-now%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,20 @@\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page accesses the current time `Date.now()` in a Server Component\n+        which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <DateReadingComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function DateReadingComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  return <div>{Date.now()}</div>\n+}"
        },
        {
            "sha": "75978228ee36ef7a0a87d744e37e9474aed43f43",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-current-time/date/page.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fdate%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fdate%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fdate%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,20 @@\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page accesses the current time `Date()` in a Server Component which\n+        is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <DateReadingComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function DateReadingComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  return <div>{Date()}</div>\n+}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-current-time/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Flayout.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,9 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "64d9914f27574f9b1fbbbec2e22415fd2bc63ee6",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-current-time/new-date/page.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fnew-date%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fnew-date%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-current-time%2Fnew-date%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,20 @@\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page accesses the current time `new Date()` in a Server Component\n+        which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <DateReadingComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function DateReadingComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  return <div>{new Date().toString()}</div>\n+}"
        },
        {
            "sha": "8a2e98d3f9a96e8ec9a700d2c7fca0bcd176425c",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/generate-key-pair-sync/page.tsx",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-key-pair-sync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-key-pair-sync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-key-pair-sync%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,34 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto.generateKeyPairSync()` in a Server\n+        Component which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = crypto.generateKeyPairSync('rsa', keyGenOptions)\n+  return <div>{first.publicKey}</div>\n+}\n+\n+const keyGenOptions = {\n+  modulusLength: 512,\n+  publicKeyEncoding: {\n+    type: 'spki',\n+    format: 'pem',\n+  },\n+  privateKeyEncoding: {\n+    type: 'pkcs8',\n+    format: 'pem',\n+  },\n+} as const"
        },
        {
            "sha": "e3b815a7c379d3d5aec2ba63ebfa79d40d8b5218",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/generate-key-sync/page.tsx",
            "status": "added",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-key-sync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-key-sync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-key-sync%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,26 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto .generateKeySync()` in a Server Component\n+        which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = crypto\n+    .generateKeySync('hmac', {\n+      length: 512,\n+    })\n+    .export()\n+  return <div>{first.toString('hex')}</div>\n+}"
        },
        {
            "sha": "1b508e6c908eea75ff8f15c8832c44137cb73788",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/generate-prime-sync/page.tsx",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-prime-sync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-prime-sync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fgenerate-prime-sync%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,22 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto.generatePrimeSync()` in a Server Component\n+        which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = new Uint8Array(crypto.generatePrimeSync(128))\n+  return <div>{first.toString()}</div>\n+}"
        },
        {
            "sha": "64d28dc0dc3ec8c7af9d34743bdd558ea8e9e8dd",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/get-random-values/page.tsx",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fget-random-values%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fget-random-values%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Fget-random-values%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,23 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto.getRandomValues()` in a Server Component\n+        which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = new Uint8Array(8)\n+  crypto.getRandomValues(first)\n+  return <div>{first.toString()}</div>\n+}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Flayout.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,9 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "09de0911ef8d4fc58dd030d2e73c60bdd5e603a0",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/random-bytes/page.tsx",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-bytes%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-bytes%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-bytes%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,22 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto.randomBytes()` in a Server Component which\n+        is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = crypto.randomBytes(8)\n+  return <div>{first.toString()}</div>\n+}"
        },
        {
            "sha": "6ebaa4cd0b6fdfaf40afe4b39afef65bd3d15c6a",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/random-fill-sync/page.tsx",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-fill-sync%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-fill-sync%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-fill-sync%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,23 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto.randomFillSync()` in a Server Component\n+        which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = new Uint8Array(16)\n+  crypto.randomFillSync(first, 4, 8)\n+  return <div>{first.toString()}</div>\n+}"
        },
        {
            "sha": "f4ffaddf283becdd1d570a2d7dee14a8928587d7",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/random-int-between/page.tsx",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-int-between%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-int-between%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-int-between%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,22 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto.randomInt(x, y)` in a Server Component\n+        which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = crypto.randomInt(128, 256)\n+  return <div>{first}</div>\n+}"
        },
        {
            "sha": "794735ea22bc46dabdc06978c0032e07e0ad16bc",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/random-int-up-to/page.tsx",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-int-up-to%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-int-up-to%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-int-up-to%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,22 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto.randomInt(x)` in a Server Component which\n+        is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = crypto.randomInt(128)\n+  return <div>{first}</div>\n+}"
        },
        {
            "sha": "ea3d1590b5c8b28b3cc1e1b29252a77ac6c6b4d6",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-node-crypto/random-uuid/page.tsx",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-uuid%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-uuid%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-node-crypto%2Frandom-uuid%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,22 @@\n+import crypto from 'node:crypto'\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses Node's `crypto.randomInt(x)` in a Server Component which\n+        is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const first = crypto.randomUUID()\n+  return <div>{first}</div>\n+}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-random/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-random%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-random%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-random%2Flayout.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,9 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "c90dfae6c37c2d37ba6d54fc03ee0e9dec64f115",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-random/math-random/page.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-random%2Fmath-random%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-random%2Fmath-random%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-random%2Fmath-random%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,20 @@\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page produces a random number `Math.random()` in a Server Component\n+        which is an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  return <div>{Math.random()}</div>\n+}"
        },
        {
            "sha": "32182cef555cc116999dbc7e6a0c199222dd3298",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-web-crypto/get-random-value/page.tsx",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Fget-random-value%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Fget-random-value%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Fget-random-value%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,22 @@\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses `crypto.getRandomValue()` in a Server Component which is\n+        an error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  const buffer = new Uint8Array(8)\n+  crypto.getRandomValues(buffer)\n+  return <div>{buffer.toString()}</div>\n+}"
        },
        {
            "sha": "745e32b8a8d235ef098d1a265f57c0254df40b5d",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-web-crypto/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Flayout.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,9 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <main>{children}</main>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "854d1caf22fb23a4cd9db3a95f081290c9f1018b",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/sync-io-web-crypto/random-uuid/page.tsx",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Frandom-uuid%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Frandom-uuid%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fsync-io-web-crypto%2Frandom-uuid%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -0,0 +1,20 @@\n+import { Suspense } from 'react'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page uses `crypto.randomUUID()` in a Server Component which is an\n+        error unless preceded by something else dynamic\n+      </p>\n+      <Suspense fallback=\"loading...\">\n+        <SyncIOComponent />\n+      </Suspense>\n+    </>\n+  )\n+}\n+\n+async function SyncIOComponent() {\n+  await new Promise((r) => process.nextTick(r))\n+  return <div>{crypto.randomUUID()}</div>\n+}"
        },
        {
            "sha": "d95fd4132d58117c1354a9ac9228319e2cf8622b",
            "filename": "test/e2e/app-dir/cache-components-request-apis/cache-components-request-apis.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Fcache-components-request-apis.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Fcache-components-request-apis.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Fcache-components-request-apis.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -81,6 +81,7 @@ describe(`Request Promises`, () => {\n     const { next, isNextDev, skipped } = nextTestSetup({\n       files: __dirname + '/fixtures/reject-hanging-promises-dynamic',\n       skipStart: true,\n+      skipDeployment: true,\n     })\n \n     if (skipped) {\n@@ -95,9 +96,7 @@ describe(`Request Promises`, () => {\n     it('should reject request APIs after the prerender is interrupted with synchronously dynamic APIs', async () => {\n       try {\n         await next.start()\n-      } catch {\n-        throw new Error('expected build not to fail for fully static project')\n-      }\n+      } catch {}\n       const expectError = createExpectError(next.cliOutput)\n \n       expectError("
        },
        {
            "sha": "245e70ffe175db98fb014f5e3170392b3bdbe073",
            "filename": "test/e2e/app-dir/cache-components-request-apis/fixtures/reject-hanging-promises-dynamic/app/[slug]/page.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fapp%2F%5Bslug%5D%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -1,10 +1,6 @@\n import { cookies, headers, draftMode } from 'next/headers'\n import { connection } from 'next/server'\n \n-export function generateStaticParams() {\n-  return [{ slug: 'one' }]\n-}\n-\n export default async function Page(props: {\n   params: Promise<{}>\n   searchParams: Promise<{}>"
        },
        {
            "sha": "88f0dc9f8effe0d4653d1ea35964f6f95adea068",
            "filename": "test/e2e/app-dir/cache-components-request-apis/fixtures/reject-hanging-promises-static/app/[slug]/page.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fapp%2F%5Bslug%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fapp%2F%5Bslug%5D%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -1,10 +1,6 @@\n import { cookies, headers, draftMode } from 'next/headers'\n import { connection } from 'next/server'\n \n-export function generateStaticParams() {\n-  return [{ slug: 'one' }]\n-}\n-\n export default async function Page(props: {\n   params: Promise<{}>\n   searchParams: Promise<{}>"
        },
        {
            "sha": "1bd848df5b8e3fca8a9d4111ebea4d7b09df62f2",
            "filename": "test/e2e/app-dir/cache-components/app/date/date/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fdate%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fdate%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fdate%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,17 +0,0 @@\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  if (typeof window === 'undefined') {\n-    await new Promise((r) => process.nextTick(r))\n-  }\n-  const date = Date()\n-  return (\n-    <div>\n-      <label>Date()</label>\n-      <span id=\"value\">{date}</span>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "0cac401bf09967885bfca73f1fcf413e0e57db66",
            "filename": "test/e2e/app-dir/cache-components/app/date/new-date/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fnew-date%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fnew-date%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fnew-date%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,17 +0,0 @@\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  if (typeof window === 'undefined') {\n-    await new Promise((r) => process.nextTick(r))\n-  }\n-  const newDate = new Date()\n-  return (\n-    <div>\n-      <label>new Date()</label>\n-      <span id=\"value\">{newDate.toString()}</span>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "b445bb0e9357cfb42c76f3d241acf59b9bf58e90",
            "filename": "test/e2e/app-dir/cache-components/app/date/now/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fnow%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fnow%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fdate%2Fnow%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,17 +0,0 @@\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  if (typeof window === 'undefined') {\n-    await new Promise((r) => process.nextTick(r))\n-  }\n-  const now = Date.now()\n-  return (\n-    <div>\n-      <label>now</label>\n-      <span id=\"value\">{now}</span>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "5ec8970044665265272928d8634197621251edf4",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/generate-key-pair-sync/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 38,
            "changes": 38,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-key-pair-sync%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-key-pair-sync%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-key-pair-sync%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,38 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = crypto.generateKeyPairSync('rsa', keyGenOptions)\n-  const second = crypto.generateKeyPairSync('rsa', keyGenOptions)\n-  return (\n-    <div>\n-      <dl>\n-        <dt>\n-          [first] require('node:crypto').generateKeyPairSync(type, options)\n-        </dt>\n-        <dd id=\"first\">{first.publicKey}</dd>\n-        <dt>\n-          [second] require('node:crypto').generateKeyPairSync(type, options)\n-        </dt>\n-        <dd id=\"second\">{second.publicKey}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}\n-\n-const keyGenOptions = {\n-  modulusLength: 512,\n-  publicKeyEncoding: {\n-    type: 'spki',\n-    format: 'pem',\n-  },\n-  privateKeyEncoding: {\n-    type: 'pkcs8',\n-    format: 'pem',\n-  },\n-} as const"
        },
        {
            "sha": "28d1570745a2707f8e928cb0e0f04b67cfbba9ba",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/generate-key-sync/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 30,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-key-sync%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-key-sync%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-key-sync%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,30 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = crypto\n-    .generateKeySync('hmac', {\n-      length: 512,\n-    })\n-    .export()\n-  const second = crypto\n-    .generateKeySync('hmac', {\n-      length: 512,\n-    })\n-    .export()\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] require('node:crypto').generateKeySync(type, options)</dt>\n-        <dd id=\"first\">{first.toString('hex')}</dd>\n-        <dt>[second] require('node:crypto').generateKeySync(type, options)</dt>\n-        <dd id=\"second\">{second.toString('hex')}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "0e4d84e35170039f9658c9844b550d3cda3c9a12",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/generate-prime-sync/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-prime-sync%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-prime-sync%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fgenerate-prime-sync%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,22 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = new Uint8Array(crypto.generatePrimeSync(128))\n-  const second = new Uint8Array(crypto.generatePrimeSync(128))\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] require('node:crypto').generatePrimeSync(size)</dt>\n-        <dd id=\"first\">{first.toString()}</dd>\n-        <dt>[second] require('node:crypto').generatePrimeSync(size)</dt>\n-        <dd id=\"second\">{second.toString()}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "50d8bb7ec9bd5d6e94bc28b03ded4b4b458952e1",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/get-random-values/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fget-random-values%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fget-random-values%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Fget-random-values%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,24 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = new Uint8Array(8)\n-  const second = new Uint8Array(8)\n-  await crypto.getRandomValues(first)\n-  await crypto.getRandomValues(second)\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] require('node:crypto').getRandomValues()</dt>\n-        <dd id=\"first\">{first.toString()}</dd>\n-        <dt>[second] require('node:crypto').getRandomValues()</dt>\n-        <dd id=\"second\">{second.toString()}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "d9e281d0c521944fff079a3458ff5f07f60b75bf",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/random-bytes/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-bytes%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-bytes%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-bytes%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,22 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = crypto.randomBytes(8, undefined) as unknown as Buffer\n-  const second = crypto.randomBytes(8)\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] require('node:crypto').randomBytes(size)</dt>\n-        <dd id=\"first\">{first.toString('hex')}</dd>\n-        <dt>[second] require('node:crypto').randomUUID(size)</dt>\n-        <dd id=\"second\">{second.toString('hex')}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "c997b7a1c18515d476710383f1a75e39fadad3a5",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/random-fill-sync/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-fill-sync%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-fill-sync%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-fill-sync%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,24 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = new Uint8Array(16)\n-  const second = new Uint8Array(16)\n-  crypto.randomFillSync(first, 4, 8)\n-  crypto.randomFillSync(second, 4, 8)\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] require('node:crypto').randomFillSync(buffer)</dt>\n-        <dd id=\"first\">{first.toString()}</dd>\n-        <dt>[second] require('node:crypto').randomBytes(buffer)</dt>\n-        <dd id=\"second\">{second.toString()}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "d93c2275bb0cbdf7e9cae2ef5f1ec8138e485a64",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/random-int/between/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-int%2Fbetween%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-int%2Fbetween%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-int%2Fbetween%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,22 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = crypto.randomInt(128, 256)\n-  const second = crypto.randomInt(128, 256, undefined) as undefined as number\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] require('node:crypto').randomInt(min, max)</dt>\n-        <dd id=\"first\">{first}</dd>\n-        <dt>[second] require('node:crypto').randomInt(min, max)</dt>\n-        <dd id=\"second\">{second}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "fa2a29a7860dae6274726d7765045fdedd2e73ac",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/random-int/up-to/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 26,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-int%2Fup-to%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-int%2Fup-to%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-int%2Fup-to%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,26 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = crypto.randomInt(128)\n-  let second = crypto.randomInt(128)\n-  while (first === second) {\n-    // Ensure that the second value is different from the first\n-    second = crypto.randomInt(128)\n-  }\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] require('node:crypto').randomInt(max)</dt>\n-        <dd id=\"first\">{first}</dd>\n-        <dt>[second] require('node:crypto').randomInt(max)</dt>\n-        <dd id=\"second\">{second}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "05e4e0091ce091e85f75ba1dafe2eea683ad0ce5",
            "filename": "test/e2e/app-dir/cache-components/app/node-crypto/random-uuid/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-uuid%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-uuid%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fnode-crypto%2Frandom-uuid%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,22 +0,0 @@\n-import crypto from 'node:crypto'\n-\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = crypto.randomUUID()\n-  const second = crypto.randomUUID()\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] require('node:crypto').randomUUID()</dt>\n-        <dd id=\"first\">{first.toString()}</dd>\n-        <dt>[second] require('node:crypto').randomUUID()</dt>\n-        <dd id=\"second\">{second.toString()}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "a6c8eff216b479b344dda7187718486ac2f67fc6",
            "filename": "test/e2e/app-dir/cache-components/app/random/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Frandom%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Frandom%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Frandom%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,17 +0,0 @@\n-import { SentinelValue } from '../../getSentinelValue'\n-\n-export default async function Page() {\n-  if (typeof window === 'undefined') {\n-    await new Promise((r) => process.nextTick(r))\n-  }\n-  const random = Math.random()\n-  return (\n-    <div>\n-      <label>random</label>\n-      <span id=\"value\">{random}</span>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "320a2c4e8cf7ec18abd26c718f16efd1d41208ae",
            "filename": "test/e2e/app-dir/cache-components/app/web-crypto/get-random-values/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fweb-crypto%2Fget-random-values%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fweb-crypto%2Fget-random-values%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fweb-crypto%2Fget-random-values%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,22 +0,0 @@\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = new Uint8Array(8)\n-  const second = new Uint8Array(8)\n-  await crypto.getRandomValues(first)\n-  await crypto.getRandomValues(second)\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] crypto.getRandomValues()</dt>\n-        <dd id=\"first\">{first.toString()}</dd>\n-        <dt>[second] crypto.getRandomValues()</dt>\n-        <dd id=\"second\">{second.toString()}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "245cf3c4ba8e1d30eaba91dee5c0fbdebc0a2f32",
            "filename": "test/e2e/app-dir/cache-components/app/web-crypto/random-uuid/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fweb-crypto%2Frandom-uuid%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fweb-crypto%2Frandom-uuid%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fweb-crypto%2Frandom-uuid%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,20 +0,0 @@\n-import { SentinelValue } from '../../../getSentinelValue'\n-\n-export default async function Page() {\n-  await new Promise((r) => process.nextTick(r))\n-  const first = crypto.randomUUID()\n-  const second = crypto.randomUUID()\n-  return (\n-    <div>\n-      <dl>\n-        <dt>[first] crypto.randomUUID()</dt>\n-        <dd id=\"first\">{first.toString()}</dd>\n-        <dt>[second] crypto.randomUUID()</dt>\n-        <dd id=\"second\">{second.toString()}</dd>\n-      </dl>\n-      <span id=\"page\">\n-        <SentinelValue />\n-      </span>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "80166977a6c28c9cf3e41a847304d5b6c1b03166",
            "filename": "test/e2e/app-dir/cache-components/cache-components.date.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 39,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.date.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.date.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.date.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -29,19 +29,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it('should not prerender pages with uncached `Date.now()` calls', async () => {\n-    let $ = await next.render$('/date/now/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toMatch(/^\\d+$/)\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toMatch(/^\\d+$/)\n-    }\n-  })\n-\n   it('should prerender pages with cached `Date()` calls', async () => {\n     let $ = await next.render$('/date/date/cached', {})\n     if (isNextDev) {\n@@ -55,19 +42,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it('should not prerender pages with uncached `Date()` calls', async () => {\n-    let $ = await next.render$('/date/date/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toContain('GMT')\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toContain('GMT')\n-    }\n-  })\n-\n   it('should prerender pages with cached `new Date()` calls', async () => {\n     let $ = await next.render$('/date/new-date/cached', {})\n     if (isNextDev) {\n@@ -81,19 +55,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it('should not prerender pages with uncached `new Date()` calls', async () => {\n-    let $ = await next.render$('/date/new-date/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toContain('GMT')\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toContain('GMT')\n-    }\n-  })\n-\n   it('should prerender pages with cached static Date instances like `new Date(0)`', async () => {\n     let $ = await next.render$('/date/static-date/cached', {})\n     if (isNextDev) {"
        },
        {
            "sha": "a5fb2a9719f209d854358523fa8f83b6d33bf1a8",
            "filename": "test/e2e/app-dir/cache-components/cache-components.node-crypto.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 120,
            "changes": 120,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.node-crypto.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.node-crypto.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.node-crypto.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -28,19 +28,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it(\"should not prerender pages with uncached `require('node:crypto').getRandomValues(...)` calls\", async () => {\n-    let $ = await next.render$('/node-crypto/get-random-values/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it(\"should prerender pages with cached `require('node:crypto').randomUUID()` calls\", async () => {\n     let $ = await next.render$('/node-crypto/random-uuid/cached', {})\n     if (isNextDev) {\n@@ -54,19 +41,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it(\"should not prerender pages with uncached `require('node:crypto').randomUUID()` calls\", async () => {\n-    let $ = await next.render$('/node-crypto/random-uuid/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it(\"should prerender pages with cached `require('node:crypto').randomBytes(size)` calls\", async () => {\n     let $ = await next.render$('/node-crypto/random-bytes/cached', {})\n     if (isNextDev) {\n@@ -80,19 +54,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it(\"should not prerender pages with uncached `require('node:crypto').randomBytes(size)` calls\", async () => {\n-    let $ = await next.render$('/node-crypto/random-bytes/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it(\"should prerender pages with cached `require('node:crypto').randomFillSync(buffer)` calls\", async () => {\n     let $ = await next.render$('/node-crypto/random-fill-sync/cached', {})\n     if (isNextDev) {\n@@ -106,19 +67,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it(\"should not prerender pages with uncached `require('node:crypto').randomFillSync(buffer)` calls\", async () => {\n-    let $ = await next.render$('/node-crypto/random-fill-sync/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it(\"should prerender pages with cached `require('node:crypto').randomInt(max)` calls\", async () => {\n     let $ = await next.render$('/node-crypto/random-int/up-to/cached', {})\n     if (isNextDev) {\n@@ -132,19 +80,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it(\"should not prerender pages with uncached `require('node:crypto').randomInt(max)` calls\", async () => {\n-    let $ = await next.render$('/node-crypto/random-int/up-to/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it(\"should prerender pages with cached `require('node:crypto').randomInt(min, max)` calls\", async () => {\n     let $ = await next.render$('/node-crypto/random-int/between/cached', {})\n     if (isNextDev) {\n@@ -158,19 +93,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it(\"should not prerender pages with uncached `require('node:crypto').randomInt(min, max)` calls\", async () => {\n-    let $ = await next.render$('/node-crypto/random-int/between/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it(\"should prerender pages with cached `require('node:crypto').generatePrimeSync(size, options)` calls\", async () => {\n     let $ = await next.render$('/node-crypto/generate-prime-sync/cached', {})\n     if (isNextDev) {\n@@ -184,19 +106,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it(\"should not prerender pages with uncached `require('node:crypto').generatePrimeSync(size, options)` calls\", async () => {\n-    let $ = await next.render$('/node-crypto/generate-prime-sync/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it(\"should prerender pages with cached `require('node:crypto').generateKeyPairSync(type, options)` calls\", async () => {\n     let $ = await next.render$('/node-crypto/generate-key-pair-sync/cached', {})\n     if (isNextDev) {\n@@ -210,22 +119,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it(\"should not prerender pages with uncached `require('node:crypto').generateKeyPairSync(type, options)` calls\", async () => {\n-    let $ = await next.render$(\n-      '/node-crypto/generate-key-pair-sync/uncached',\n-      {}\n-    )\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it(\"should prerender pages with cached `require('node:crypto').generateKeySync(type, options)` calls\", async () => {\n     let $ = await next.render$('/node-crypto/generate-key-sync/cached', {})\n     if (isNextDev) {\n@@ -238,17 +131,4 @@ describe('cache-components', () => {\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n   })\n-\n-  it(\"should not prerender pages with uncached `require('node:crypto').generateKeySync(type, options)` calls\", async () => {\n-    let $ = await next.render$('/node-crypto/generate-key-sync/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n })"
        },
        {
            "sha": "6c9b91210fa5c8ace22e40a5db639970b9f3c19e",
            "filename": "test/e2e/app-dir/cache-components/cache-components.random.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.random.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.random.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.random.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -25,15 +25,4 @@ describe('cache-components', () => {\n       expect($('#page').text()).toBe('at buildtime')\n     }\n   })\n-\n-  it('should not prerender pages with uncached Math.random() calls', async () => {\n-    let $ = await next.render$('/random/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-    }\n-  })\n })"
        },
        {
            "sha": "15133ffed886b6c353f9c5a70c374f216861ca92",
            "filename": "test/e2e/app-dir/cache-components/cache-components.web-crypto.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 26,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.web-crypto.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.web-crypto.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fcache-components.web-crypto.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -28,19 +28,6 @@ describe('cache-components', () => {\n     }\n   })\n \n-  it('should not prerender pages with uncached `crypto.getRandomValues(...)` calls', async () => {\n-    let $ = await next.render$('/web-crypto/get-random-values/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n-\n   it('should prerender pages with cached `crypto.randomUUID()` calls', async () => {\n     let $ = await next.render$('/web-crypto/random-uuid/cached', {})\n     if (isNextDev) {\n@@ -53,17 +40,4 @@ describe('cache-components', () => {\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n   })\n-\n-  it('should not prerender pages with uncached `crypto.randomUUID()` calls', async () => {\n-    let $ = await next.render$('/web-crypto/random-uuid/uncached', {})\n-    if (isNextDev) {\n-      expect($('#layout').text()).toBe('at runtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    } else {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n-    }\n-  })\n })"
        },
        {
            "sha": "e6c1f89d38c0eb8d8f722f212f3b6ddb758946bc",
            "filename": "test/e2e/app-dir/node-extensions/fixtures/random/cache-components/app/app/prerendered/uncached/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fcache-components%2Fapp%2Fapp%2Fprerendered%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fcache-components%2Fapp%2Fapp%2Fprerendered%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fcache-components%2Fapp%2Fapp%2Fprerendered%2Funcached%2Fpage.tsx?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -1,20 +0,0 @@\n-export default async function Page() {\n-  if (typeof process !== 'undefined') {\n-    // we delay the random calls to avoid triggering dynamic in other component trees\n-    await new Promise((r) => process.nextTick(r))\n-  }\n-  return (\n-    <ul>\n-      <li>\n-        <RandomValue />\n-      </li>\n-      <li>\n-        <RandomValue />\n-      </li>\n-    </ul>\n-  )\n-}\n-\n-async function RandomValue() {\n-  return Math.random()\n-}"
        },
        {
            "sha": "2da9996f546a0e40fed7799866ad2f37d7b67918",
            "filename": "test/e2e/app-dir/node-extensions/node-extensions.random.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Fnode-extensions.random.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Fnode-extensions.random.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Fnode-extensions.random.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -25,11 +25,6 @@ describe('Node Extensions', () => {\n       it('should not error when accessing pages that use Math.random() in App Router', async () => {\n         let res, $\n \n-        res = await next.fetch('/app/prerendered/uncached')\n-        expect(res.status).toBe(200)\n-        $ = await next.render$('/app/prerendered/uncached')\n-        expect($('li').length).toBe(2)\n-\n         res = await next.fetch('/app/prerendered/unstable-cache')\n         expect(res.status).toBe(200)\n         $ = await next.render$('/app/prerendered/unstable-cache')"
        },
        {
            "sha": "72559d5346c6f5a9a3d8169ae9aeacaee68832e2",
            "filename": "test/e2e/app-dir/segment-cache/prefetch-runtime/prefetch-runtime.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-runtime%2Fprefetch-runtime.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-runtime%2Fprefetch-runtime.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-runtime%2Fprefetch-runtime.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -1008,7 +1008,7 @@ describe('<Link prefetch={true}> (runtime prefetch)', () => {\n         path: '/errors/sync-io-after-runtime-api/quickly-expiring-public-cache',\n       },\n     ])(\n-      'aborts the prerender and logs an error $description',\n+      'aborts the prerender without logging an error $description',\n       async ({ path }) => {\n         // In a runtime prefetch, we might encounter sync IO usages that weren't caught during build,\n         // because they were hidden behind e.g. a cookies() call.\n@@ -1047,9 +1047,7 @@ describe('<Link prefetch={true}> (runtime prefetch)', () => {\n         ])\n \n         if (!isNextDeploy) {\n-          expect(getCliOutput()).toMatch(\n-            /Error: Route \".*?\" used `Date\\.now\\(\\)` instead of using `performance` or without explicitly calling `await connection\\(\\)` beforehand\\./\n-          )\n+          expect(getCliOutput()).not.toMatch(`Date.now()`)\n         }\n \n         // Navigate to the page"
        },
        {
            "sha": "bf6928fbb2d3410d71edc7fe377f74055b54b780",
            "filename": "test/e2e/app-dir/use-cache/app/(dynamic)/generate-metadata/page.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fgenerate-metadata%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fgenerate-metadata%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fgenerate-metadata%2Fpage.tsx?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -6,6 +6,8 @@ export async function generateMetadata(): Promise<Metadata> {\n   // TODO: Deduping with nested caches requires #78703.\n   // 'use cache'\n \n+  await connection()\n+\n   return {\n     description: new Date().toISOString(),\n     title: await getCachedData(),"
        },
        {
            "sha": "ea0790c87b2d743d21207d019d106ecd24c9f639",
            "filename": "test/production/app-dir/build-output-prerender/build-output-prerender.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed5d085fb182364414b8ca0e8baa2e1988e629d6/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts?ref=ed5d085fb182364414b8ca0e8baa2e1988e629d6",
            "patch": "@@ -222,7 +222,7 @@ describe('build-output-prerender', () => {\n            6 |\n          To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/client\" in your browser to investigate the error.\n          Error occurred prerendering page \"/client\". Read more: https://nextjs.org/docs/messages/prerender-error\n-         Error: Route \"/server\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n+         Error: Route \"/server\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n              at Page (bundler:///app/server/page.tsx:13:27)\n            11 |   await cachedDelay()\n            12 |"
        }
    ],
    "stats": {
        "total": 2918,
        "additions": 2268,
        "deletions": 650
    }
}