{
    "author": "devjiwonchoi",
    "message": "[dev-overlay] fix: call stack silently fails to open editor with 204 (#75785)\n\n### Why?\n\nWhen fails to find the file to open in the editor, the middleware\nreturned `No Content` with 204 status. This caused to silently fail the\nopen editor behavior.\n\n### How?\n\n- Added 404 not found state for when the target file does not exist.\n\nCloses NDX-792\n\n---------\n\nCo-authored-by: Jiachi Liu <inbox@huozhi.im>",
    "sha": "8424a9a0721560e3e0ab79ee709d6557cb7f23ba",
    "files": [
        {
            "sha": "911b6b3a91f62e0fd54ca4d64d4e03510ab23ed2",
            "filename": "packages/next/src/client/components/react-dev-overlay/_experimental/internal/helpers/use-open-in-editor.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/8424a9a0721560e3e0ab79ee709d6557cb7f23ba/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fhelpers%2Fuse-open-in-editor.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8424a9a0721560e3e0ab79ee709d6557cb7f23ba/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fhelpers%2Fuse-open-in-editor.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fhelpers%2Fuse-open-in-editor.ts?ref=8424a9a0721560e3e0ab79ee709d6557cb7f23ba",
            "patch": "@@ -25,8 +25,11 @@ export function useOpenInEditor({\n       )\n       .then(\n         () => {},\n-        () => {\n-          console.error('There was an issue opening this code in your editor.')\n+        (cause) => {\n+          console.error(\n+            `Failed to open file \"${file} (${lineNumber}:${column})\" in your editor. Cause:`,\n+            cause\n+          )\n         }\n       )\n   }, [file, lineNumber, column])"
        },
        {
            "sha": "ffc543372bd21f4b3d5695ad4a7a0fc2fa1f9850",
            "filename": "packages/next/src/client/components/react-dev-overlay/server/middleware-turbopack.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/8424a9a0721560e3e0ab79ee709d6557cb7f23ba/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fmiddleware-turbopack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8424a9a0721560e3e0ab79ee709d6557cb7f23ba/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fmiddleware-turbopack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fmiddleware-turbopack.ts?ref=8424a9a0721560e3e0ab79ee709d6557cb7f23ba",
            "patch": "@@ -6,6 +6,7 @@ import {\n   json,\n   jsonString,\n   noContent,\n+  notFound,\n   type OriginalStackFrameResponse,\n   type OriginalStackFramesRequest,\n   type OriginalStackFramesResponse,\n@@ -415,7 +416,7 @@ export function getOverlayMiddleware(project: Project) {\n         () => true,\n         () => false\n       )\n-      if (!fileExists) return noContent(res)\n+      if (!fileExists) return notFound(res)\n \n       try {\n         launchEditor(frame.file, frame.line ?? 1, frame.column ?? 1)\n@@ -424,7 +425,7 @@ export function getOverlayMiddleware(project: Project) {\n         return internalServerError(res)\n       }\n \n-      noContent(res)\n+      return noContent(res)\n     }\n \n     return next()"
        },
        {
            "sha": "7f94ac75230e37e038715fadfe837ef14bd74767",
            "filename": "packages/next/src/client/components/react-dev-overlay/server/middleware-webpack.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/8424a9a0721560e3e0ab79ee709d6557cb7f23ba/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fmiddleware-webpack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8424a9a0721560e3e0ab79ee709d6557cb7f23ba/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fmiddleware-webpack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fmiddleware-webpack.ts?ref=8424a9a0721560e3e0ab79ee709d6557cb7f23ba",
            "patch": "@@ -14,6 +14,7 @@ import {\n   internalServerError,\n   json,\n   noContent,\n+  notFound,\n   type OriginalStackFrameResponse,\n   type OriginalStackFramesRequest,\n   type OriginalStackFramesResponse,\n@@ -568,10 +569,10 @@ export function getOverlayMiddleware(options: {\n         () => true,\n         () => false\n       )\n-      if (!fileExists) return noContent(res)\n+      if (!fileExists) return notFound(res)\n \n       try {\n-        await launchEditor(filePath, frame.lineNumber, frame.column ?? 1)\n+        launchEditor(filePath, frame.lineNumber, frame.column ?? 1)\n       } catch (err) {\n         console.log('Failed to launch editor:', err)\n         return internalServerError(res)"
        },
        {
            "sha": "5a0e97c82dbaa1e544da18e9e19cddd6c25f186d",
            "filename": "packages/next/src/client/components/react-dev-overlay/server/shared.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/8424a9a0721560e3e0ab79ee709d6557cb7f23ba/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fshared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8424a9a0721560e3e0ab79ee709d6557cb7f23ba/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fserver%2Fshared.ts?ref=8424a9a0721560e3e0ab79ee709d6557cb7f23ba",
            "patch": "@@ -93,6 +93,11 @@ export function badRequest(res: ServerResponse) {\n   res.end('Bad Request')\n }\n \n+export function notFound(res: ServerResponse) {\n+  res.statusCode = 404\n+  res.end('Not Found')\n+}\n+\n export function internalServerError(res: ServerResponse, error?: unknown) {\n   res.statusCode = 500\n   res.setHeader('Content-Type', 'text/plain')"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 16,
        "deletions": 6
    }
}