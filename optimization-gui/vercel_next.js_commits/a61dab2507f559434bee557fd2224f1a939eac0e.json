{
    "author": "devjiwonchoi",
    "message": "Move `config.turbopack.moduleIds` to `config.experimental.turbopackModuleIds` (#84230)\n\nhttps://github.com/vercel/next.js/pull/77850 moved `experimental.turbo`\noption to `turbopack`, but `moduleIds` is intended for debugging, in\nline with `turbopackSourceMaps` and `turbopackMinify`, so move to\n`experimental.turbopackModuleIds`.\n\n- In development, it's \"named\" by default, and making it \"deterministic\"\nbreaks HMR.\n- In production, it's \"deterministic\" by default, and making it \"named\"\nblows up bundle sizes and exposes your internal project structure in the\nmodule ID strings.",
    "sha": "a61dab2507f559434bee557fd2224f1a939eac0e",
    "files": [
        {
            "sha": "dc71517b744704d89f4fcca3e0951b11aff58c63",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/a61dab2507f559434bee557fd2224f1a939eac0e/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a61dab2507f559434bee557fd2224f1a939eac0e/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=a61dab2507f559434bee557fd2224f1a939eac0e",
            "patch": "@@ -560,7 +560,6 @@ pub struct TurbopackConfig {\n     pub rules: Option<FxIndexMap<RcStr, RuleConfigCollection>>,\n     pub resolve_alias: Option<FxIndexMap<RcStr, JsonValue>>,\n     pub resolve_extensions: Option<Vec<RcStr>>,\n-    pub module_ids: Option<ModuleIds>,\n }\n \n #[derive(\n@@ -881,6 +880,7 @@ pub struct ExperimentalConfig {\n     worker_threads: Option<bool>,\n \n     turbopack_minify: Option<bool>,\n+    turbopack_module_ids: Option<ModuleIds>,\n     turbopack_persistent_caching: Option<bool>,\n     turbopack_source_maps: Option<bool>,\n     turbopack_tree_shaking: Option<bool>,\n@@ -1807,9 +1807,8 @@ impl NextConfig {\n             // Ignore configuration in development mode, HMR only works with `named`\n             NextMode::Development => ModuleIds::Named.cell(),\n             NextMode::Build => self\n-                .turbopack\n-                .as_ref()\n-                .and_then(|t| t.module_ids)\n+                .experimental\n+                .turbopack_module_ids\n                 .unwrap_or(ModuleIds::Deterministic)\n                 .cell(),\n         })"
        },
        {
            "sha": "441a9d07fd44d93a98d18530e57a538e6ef7b9bd",
            "filename": "docs/01-app/03-api-reference/08-turbopack.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a61dab2507f559434bee557fd2224f1a939eac0e/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/a61dab2507f559434bee557fd2224f1a939eac0e/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx?ref=a61dab2507f559434bee557fd2224f1a939eac0e",
            "patch": "@@ -186,8 +186,6 @@ Turbopack can be configured via `next.config.js` (or `next.config.ts`) under the\n   Create manual aliases (like `resolve.alias` in webpack).\n - **`resolveExtensions`**\n   Change or extend file extensions for module resolution.\n-- **`moduleIds`**\n-  Set how module IDs are generated (`'named'` vs `'deterministic'`).\n \n ```js filename=\"next.config.js\"\n module.exports = {"
        },
        {
            "sha": "6390e872af1e050140851714d569a3ddcf31c84b",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a61dab2507f559434bee557fd2224f1a939eac0e/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a61dab2507f559434bee557fd2224f1a939eac0e/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=a61dab2507f559434bee557fd2224f1a939eac0e",
            "patch": "@@ -158,7 +158,6 @@ const zTurbopackConfig: zod.ZodType<TurbopackOptions> = z.strictObject({\n     )\n     .optional(),\n   resolveExtensions: z.array(z.string()).optional(),\n-  moduleIds: z.enum(['named', 'deterministic']).optional(),\n   root: z.string().optional(),\n })\n \n@@ -446,6 +445,7 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n         turbopackUseSystemTlsCerts: z.boolean().optional(),\n         turbopackUseBuiltinBabel: z.boolean().optional(),\n         turbopackUseBuiltinSass: z.boolean().optional(),\n+        turbopackModuleIds: z.enum(['named', 'deterministic']).optional(),\n         optimizePackageImports: z.array(z.string()).optional(),\n         optimizeServerReact: z.boolean().optional(),\n         clientTraceMetadata: z.array(z.string()).optional(),"
        },
        {
            "sha": "6e7160c03ad7556d39b654a879fd7f4fd365d3b9",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a61dab2507f559434bee557fd2224f1a939eac0e/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a61dab2507f559434bee557fd2224f1a939eac0e/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=a61dab2507f559434bee557fd2224f1a939eac0e",
            "patch": "@@ -167,13 +167,6 @@ export interface TurbopackOptions {\n    */\n   rules?: Record<string, TurbopackRuleConfigCollection>\n \n-  /**\n-   * The module ID strategy to use for Turbopack.\n-   * If not set, the default is `'named'` for development and `'deterministic'`\n-   * for production.\n-   */\n-  moduleIds?: 'named' | 'deterministic'\n-\n   /**\n    * This is the repo root usually and only files above this\n    * directory can be resolved by turbopack.\n@@ -804,6 +797,13 @@ export interface ExperimentalConfig {\n    * @default false\n    */\n   mcpServer?: boolean\n+\n+  /**\n+   * The module ID strategy to use for Turbopack.\n+   * If not set, the default is `'named'` for development and `'deterministic'`\n+   * for production.\n+   */\n+  turbopackModuleIds?: 'named' | 'deterministic'\n }\n \n export type ExportPathMap = {"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 11,
        "deletions": 14
    }
}