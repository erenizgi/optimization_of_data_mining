{
    "author": "delbaoliveira",
    "message": "Docs: Document `global-not-found` (#81803)\n\nCloses:\nhttps://linear.app/vercel/issue/DOC-4873/document-global-not-found\n\n---------\n\nCo-authored-by: graphite-app[bot] <96075541+graphite-app[bot]@users.noreply.github.com>\nCo-authored-by: Jiachi Liu <inbox@huozhi.im>",
    "sha": "4e96d7d1ad8e64182d623f3c0c5e7c0feb1a614f",
    "files": [
        {
            "sha": "f2447577ce1897c133a426491cd7540bf66ef28d",
            "filename": "docs/01-app/03-api-reference/03-file-conventions/not-found.mdx",
            "status": "modified",
            "additions": 70,
            "deletions": 2,
            "changes": 72,
            "blob_url": "https://github.com/vercel/next.js/blob/4e96d7d1ad8e64182d623f3c0c5e7c0feb1a614f/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2Fnot-found.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/4e96d7d1ad8e64182d623f3c0c5e7c0feb1a614f/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2Fnot-found.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2Fnot-found.mdx?ref=4e96d7d1ad8e64182d623f3c0c5e7c0feb1a614f",
            "patch": "@@ -3,6 +3,13 @@ title: not-found.js\n description: API reference for the not-found.js file.\n ---\n \n+Next.js provides two conventions to handle not found cases:\n+\n+- **`not-found.js`**: Used when you call the [`notFound`](/docs/app/api-reference/functions/not-found) function in a route segment.\n+- **`global-not-found.js`**: Used to define a global 404 page for unmatched routes across your entire app. This is handled at the routing level and doesn't depend on rendering a layout or page.\n+\n+## `not-found.js`\n+\n The **not-found** file is used to render UI when the [`notFound`](/docs/app/api-reference/functions/not-found) function is thrown within a route segment. Along with serving a custom UI, Next.js will return a `200` HTTP status code for streamed responses, and `404` for non-streamed responses.\n \n ```tsx filename=\"app/not-found.tsx\" switcher\n@@ -33,13 +40,53 @@ export default function NotFound() {\n }\n ```\n \n+## `global-not-found.js` (experimental)\n+\n+The `global-not-found.js` file lets you define a 404 page for your entire application. Unlike `not-found.js`, which works at the route level, this is used when a requested URL doesn't match any route at all. Next.js **skips rendering** and directly returns this global page.\n+\n+This is useful when you can't build a 404 page using a combination of `layout.js` and `not-found.js`. This can happen in two cases:\n+\n+- Your app has multiple root layouts (e.g. `app/(admin)/layout.tsx` and `app/(shop)/layout.tsx`), so there's no single layout to compose a global 404 from.\n+- Your root layout is defined using top-level dynamic segments (e.g. `app/[country]/layout.tsx`), which makes composing a consistent 404 page harder.\n+\n+To enable it, add the `globalNotFound` flag in `next.config.ts`:\n+\n+```tsx filename=\"next.config.ts\"\n+import type { NextConfig } from 'next'\n+\n+const nextConfig: NextConfig = {\n+  experimental: {\n+    globalNotFound: true,\n+  },\n+}\n+\n+export default nextConfig\n+```\n+\n+Then, create a file in the root of the `app` directory: `app/global-not-found.js`:\n+\n+```tsx filename=\"app/global-not-found.tsx\" switcher\n+export default function GlobalNotFound() {\n+  return (\n+    <html>\n+      <body>\n+        <h1>404 - Page Not Found</h1>\n+        <p>This page does not exist.</p>\n+      </body>\n+    </html>\n+  )\n+}\n+```\n+\n+Unlike `not-found.js`, this file must return a full HTML document, including `<html>` and `<body>` tags.\n+\n ## Reference\n \n ### Props\n \n-`not-found.js` components do not accept any props.\n+`not-found.js` or `global-not-found.js` components do not accept any props.\n \n-> **Good to know**: In addition to catching expected `notFound()` errors, the root `app/not-found.js` file also handles any unmatched URLs for your whole application. This means users that visit a URL that is not handled by your app will be shown the UI exported by the `app/not-found.js` file.\n+> **Good to know**: In addition to catching expected `notFound()` errors, the root `app/not-found.js` and `app/global-not-found.js` files handle any unmatched URLs for your whole application. This means users that visit a URL that is not handled by your app will be shown the exported UI.\n \n ## Examples\n \n@@ -89,9 +136,30 @@ export default async function NotFound() {\n \n If you need to use Client Component hooks like `usePathname` to display content based on the path, you must fetch data on the client-side instead.\n \n+### Metadata\n+\n+For `global-not-found.js`, you can export a `metadata` object or a [`generateMetadata`](/docs/app/api-reference/functions/generate-metadata) function to customize the `<title>`, `<meta>`, and other head tags for your 404 page:\n+\n+```tsx filename=\"app/global-not-found.tsx\" switcher\n+export const metadata = {\n+  title: 'Not Found',\n+  description: 'The page you are looking for does not exist.',\n+}\n+\n+export default function GlobalNotFound() {\n+  return (\n+    <div>\n+      <h1>Not Found</h1>\n+      <p>The page you are looking for does not exist.</p>\n+    </div>\n+  )\n+}\n+```\n+\n ## Version History\n \n | Version   | Changes                                             |\n | --------- | --------------------------------------------------- |\n+| `v15.4.0` | `global-not-found.js` introduced (experimental).    |\n | `v13.3.0` | Root `app/not-found` handles global unmatched URLs. |\n | `v13.0.0` | `not-found` introduced.                             |"
        }
    ],
    "stats": {
        "total": 72,
        "additions": 70,
        "deletions": 2
    }
}