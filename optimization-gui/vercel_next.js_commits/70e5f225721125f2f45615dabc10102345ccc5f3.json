{
    "author": "icyJoseph",
    "message": "docs: Expanded type checks to Pages Router and tsconfigPath (#83096)\n\nCloses:\nhttps://linear.app/vercel/issue/DOC-5027/tsconfigpath-and-typed-routes-updates\n\nAlso addresses: https://github.com/vercel/next.js/issues/83109",
    "sha": "70e5f225721125f2f45615dabc10102345ccc5f3",
    "files": [
        {
            "sha": "f71ba273535664ec27c73e7fb72c35936a489e24",
            "filename": "docs/01-app/03-api-reference/05-config/02-typescript.mdx",
            "status": "modified",
            "additions": 74,
            "deletions": 4,
            "changes": 78,
            "blob_url": "https://github.com/vercel/next.js/blob/70e5f225721125f2f45615dabc10102345ccc5f3/docs%2F01-app%2F03-api-reference%2F05-config%2F02-typescript.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/70e5f225721125f2f45615dabc10102345ccc5f3/docs%2F01-app%2F03-api-reference%2F05-config%2F02-typescript.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F05-config%2F02-typescript.mdx?ref=70e5f225721125f2f45615dabc10102345ccc5f3",
            "patch": "@@ -111,12 +111,14 @@ const nextConfig = {\n module.exports = nextConfig\n ```\n \n-<AppOnly>\n-\n ### Statically Typed Links\n \n Next.js can statically type links to prevent typos and other errors when using `next/link`, improving type safety when navigating between pages.\n \n+Works in both the Pages and App Router for the `href` prop in `next/link`. In the App Router, it also types `next/navigation` methods like `push`, `replace`, and `prefetch`. It does not type `next/router` methods in Pages Router.\n+\n+Literal `href` strings are validated, while non-literal `href`s may require a cast with `as Route`.\n+\n To opt-into this feature, `typedRoutes` need to be enabled and the project needs to be using TypeScript.\n \n ```ts filename=\"next.config.ts\"\n@@ -133,12 +135,20 @@ Next.js will generate a link definition in `.next/types` that contains informati\n \n > **Good to know**: If you set up your project without `create-next-app`, ensure the generated Next.js types are included by adding `.next/types/**/*.ts` to the `include` array in your `tsconfig.json`:\n \n-```json filename=\"tsconfig.json\"\n+{/* prettier-ignore-start */}\n+\n+```json filename=\"tsconfig.json\" highlight={4}\n {\n-  \"include\": [\"next-env.d.ts\", \".next/types/**/*.ts\", \"**/*.ts\", \"**/*.tsx\"],\n+  \"include\": [\n+    \"next-env.d.ts\",\n+    \".next/types/**/*.ts\",\n+    \"**/*.ts\",\n+    \"**/*.tsx\"\n+  ],\n   \"exclude\": [\"node_modules\"]\n }\n ```\n+{/* prettier-ignore-end */}\n \n Currently, experimental support includes any string literal, including dynamic segments. For non-literal strings, you currently need to manually cast the `href` with `as Route`:\n \n@@ -217,6 +227,8 @@ export default nextConfig\n \n > **Good to know**: Types are generated based on the environment variables loaded at development runtime, which excludes variables from `.env.production*` files by default. To include production-specific variables, run `next dev` with `NODE_ENV=production`.\n \n+<AppOnly>\n+\n ### With Async Server Components\n \n To use an `async` Server Component with TypeScript, ensure you are using TypeScript `5.1.3` or higher and `@types/react` `18.2.8` or higher.\n@@ -296,6 +308,64 @@ export default function MyApp({ Component, pageProps }: AppProps) {\n \n Since `v10.2.1` Next.js supports [incremental type checking](https://www.typescriptlang.org/tsconfig#incremental) when enabled in your `tsconfig.json`, this can help speed up type checking in larger applications.\n \n+### Custom `tsconfig` path\n+\n+In some cases, you might want to use a different TypeScript configuration for builds or tooling. To do that, set `typescript.tsconfigPath` in `next.config.ts` to point Next.js to another `tsconfig` file.\n+\n+```ts filename=\"next.config.ts\"\n+import type { NextConfig } from 'next'\n+\n+const nextConfig: NextConfig = {\n+  typescript: {\n+    tsconfigPath: 'tsconfig.build.json',\n+  },\n+}\n+\n+export default nextConfig\n+```\n+\n+For example, switch to a different config for production builds:\n+\n+```ts filename=\"next.config.ts\"\n+import type { NextConfig } from 'next'\n+\n+const isProd = process.env.NODE_ENV === 'production'\n+\n+const nextConfig: NextConfig = {\n+  typescript: {\n+    tsconfigPath: isProd ? 'tsconfig.build.json' : 'tsconfig.json',\n+  },\n+}\n+\n+export default nextConfig\n+```\n+\n+<details>\n+<summary>Why you might use a separate `tsconfig` for builds</summary>\n+\n+You might need to relax checks in scenarios like monorepos, where the build also validates shared dependencies that don't match your project's standards, or when loosening checks in CI to continue delivering while migrating locally to stricter TypeScript settings (and still wanting your IDE to highlight misuse).\n+\n+For example, if your project uses `useUnknownInCatchVariables` but some monorepo dependencies still assume `any`:\n+\n+```json filename=\"tsconfig.build.json\"\n+{\n+  \"extends\": \"./tsconfig.json\",\n+  \"compilerOptions\": {\n+    \"useUnknownInCatchVariables\": false\n+  }\n+}\n+```\n+\n+This keeps your editor strict via `tsconfig.json` while allowing the production build to use relaxed settings.\n+\n+</details>\n+\n+> **Good to know**:\n+>\n+> - IDEs typically read `tsconfig.json` for diagnostics and IntelliSense, so you can still see IDE warnings while production builds use the alternate config. Mirror critical options if you want parity in the editor.\n+> - In development, only `tsconfig.json` is watched for changes. If you edit a different file name via `typescript.tsconfigPath`, restart the dev server to apply changes.\n+> - The configured file is used in `next dev`, `next build`, `next lint`, and `next typegen`.\n+\n ### Disabling TypeScript errors in production\n \n Next.js fails your **production build** (`next build`) when TypeScript errors are present in your project."
        }
    ],
    "stats": {
        "total": 78,
        "additions": 74,
        "deletions": 4
    }
}