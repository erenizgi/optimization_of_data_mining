{
    "author": "devjiwonchoi",
    "message": "[dev-overlay] Remove old Dev Overlay (#76256)\n\nThis PR removed the old overlay including the deprecated `buildActivity`\nand `appIsrStatus` options.\n\nCloses NDX-785\nCloses NDX-855\nCloses NDX-865\nCloses NDX-866\nCloses NDX-867\nCloses NDX-868",
    "sha": "a89d55c0117e177fc43c71070b8b7be4a5e29602",
    "files": [
        {
            "sha": "5c1d7510cf72a8a8821f41446069b3a980cb7370",
            "filename": ".github/workflows/build_and_test.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/.github%2Fworkflows%2Fbuild_and_test.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/.github%2Fworkflows%2Fbuild_and_test.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_test.yml?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -581,7 +581,7 @@ jobs:\n     uses: ./.github/workflows/build_reusable.yml\n     with:\n       nodeVersion: 18.18.2\n-      afterBuild: __NEXT_EXPERIMENTAL_PPR=true __NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY=false NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\" node run-tests.js --timings -c ${TEST_CONCURRENCY} --type integration\n+      afterBuild: __NEXT_EXPERIMENTAL_PPR=true NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\" node run-tests.js --timings -c ${TEST_CONCURRENCY} --type integration\n       stepName: 'test-ppr-integration'\n     secrets: inherit\n \n@@ -596,7 +596,7 @@ jobs:\n         group: [1/6, 2/6, 3/6, 4/6, 5/6, 6/6]\n     uses: ./.github/workflows/build_reusable.yml\n     with:\n-      afterBuild: __NEXT_EXPERIMENTAL_PPR=true __NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY=false NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\" NEXT_TEST_MODE=dev node run-tests.js --timings -g ${{ matrix.group }} -c ${TEST_CONCURRENCY} --type development\n+      afterBuild: __NEXT_EXPERIMENTAL_PPR=true NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\" NEXT_TEST_MODE=dev node run-tests.js --timings -g ${{ matrix.group }} -c ${TEST_CONCURRENCY} --type development\n       stepName: 'test-ppr-dev-${{ matrix.group }}'\n     secrets: inherit\n \n@@ -611,7 +611,7 @@ jobs:\n         group: [1/7, 2/7, 3/7, 4/7, 5/7, 6/7, 7/7]\n     uses: ./.github/workflows/build_reusable.yml\n     with:\n-      afterBuild: __NEXT_EXPERIMENTAL_PPR=true __NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY=false NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\" NEXT_TEST_MODE=start node run-tests.js --timings -g ${{ matrix.group }} -c ${TEST_CONCURRENCY} --type production\n+      afterBuild: __NEXT_EXPERIMENTAL_PPR=true NEXT_EXTERNAL_TESTS_FILTERS=\"test/ppr-tests-manifest.json\" NEXT_TEST_MODE=start node run-tests.js --timings -g ${{ matrix.group }} -c ${TEST_CONCURRENCY} --type production\n       stepName: 'test-ppr-prod-${{ matrix.group }}'\n     secrets: inherit\n "
        },
        {
            "sha": "4cbb97971bf0b1960d814714a44a3e65089ac207",
            "filename": "crates/next-build-test/nextConfig.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/crates%2Fnext-build-test%2FnextConfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/crates%2Fnext-build-test%2FnextConfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-build-test%2FnextConfig.json?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -37,7 +37,6 @@\n     \"unoptimized\": false\n   },\n   \"devIndicators\": {\n-    \"buildActivity\": true,\n     \"buildActivityPosition\": \"bottom-right\"\n   },\n   \"onDemandEntries\": {"
        },
        {
            "sha": "02098625385203abd8eebbfb78978073247c216a",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -213,7 +213,6 @@ pub enum BuildActivityPositions {\n )]\n #[serde(rename_all = \"camelCase\")]\n pub struct DevIndicatorsOptions {\n-    pub build_activity: Option<bool>,\n     pub build_activity_position: Option<BuildActivityPositions>,\n     pub position: Option<BuildActivityPositions>,\n }"
        },
        {
            "sha": "b1b008206e41828cf950605f1c6932ef1b898909",
            "filename": "docs/01-app/04-api-reference/05-config/01-next-config-js/devIndicators.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 65,
            "changes": 65,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/docs%2F01-app%2F04-api-reference%2F05-config%2F01-next-config-js%2FdevIndicators.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/docs%2F01-app%2F04-api-reference%2F05-config%2F01-next-config-js%2FdevIndicators.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F04-api-reference%2F05-config%2F01-next-config-js%2FdevIndicators.mdx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -11,78 +11,13 @@ description: Optimized pages include an indicator to let you know if it's being\n \n ```ts filename=\"Types\"\n   devIndicators: {\n-    appIsrStatus?: boolean, // defaults to true\n-    buildActivity?: boolean, // defaults to true\n     buildActivityPosition?: 'bottom-right'\n     | 'bottom-left'\n     | 'top-right'\n     | 'top-left', // defaults to 'bottom-right'\n   },\n ```\n \n-## `appIsrStatus` (Static Indicator)\n-\n-Next.js displays a static indicator in the bottom corner of the screen that signals if a route will be prerendered at build time. This makes it easier to understand whether a route is static or dynamic, and for you to identify if a route [opts out of static rendering](#static-route-not-showing-the-indicator).\n-\n-<Image\n-  alt=\"App Folder Structure\"\n-  srcLight=\"/docs/light/static-indicator.png\"\n-  srcDark=\"/docs/dark/static-indicator.png\"\n-  width=\"1600\"\n-  height=\"208\"\n-/>\n-\n-You can temporarily hide the indicator by clicking the close indicator which will remember your preference in `localStorage` for 1 hour. To permanently disable it, you can use the config option in `next.config.js`:\n-\n-```ts filename=\"next.config.ts\" switcher\n-import type { NextConfig } from 'next'\n-\n-const nextConfig: NextConfig = {\n-  devIndicators: {\n-    appIsrStatus: false,\n-  },\n-}\n-\n-export default nextConfig\n-```\n-\n-```js filename=\"next.config.js\" switcher\n-/** @type {import('next').NextConfig} */\n-const nextConfig = {\n-  devIndicators: {\n-    appIsrStatus: false,\n-  },\n-}\n-\n-module.exports = nextConfig\n-```\n-\n-## `buildActivity` (Compilation Indicator)\n-\n-When you edit your code, and Next.js is compiling the application, a compilation indicator appears in the bottom right corner of the page.\n-\n-> **Good to know**: This indicator is only present in development mode and will not appear when building and running the app in production mode.\n-\n-In some cases this indicator can be misplaced on your page, for example, when conflicting with a chat launcher. To change its position, open `next.config.js` and set the `buildActivityPosition` in the `devIndicators` object to `bottom-right` (default), `bottom-left`, `top-right` or `top-left`:\n-\n-```js filename=\"next.config.js\"\n-module.exports = {\n-  devIndicators: {\n-    buildActivityPosition: 'bottom-right',\n-  },\n-}\n-```\n-\n-In some cases, this indicator might not be useful for you. To remove it, open `next.config.js` and disable the `buildActivity` config in `devIndicators` object:\n-\n-```js filename=\"next.config.js\"\n-module.exports = {\n-  devIndicators: {\n-    buildActivity: false,\n-  },\n-}\n-```\n-\n ## Troubleshooting\n \n ### Static route not showing the indicator"
        },
        {
            "sha": "c305b12db5c03ba8e7a4de99bf655f00e061eb83",
            "filename": "packages/next/src/build/webpack-config.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -2179,10 +2179,6 @@ export default async function getBaseWebpackConfig(\n     crossOrigin: config.crossOrigin,\n     pageExtensions: pageExtensions,\n     trailingSlash: config.trailingSlash,\n-    buildActivity:\n-      config.devIndicators === false\n-        ? false\n-        : config.devIndicators.buildActivity,\n     buildActivityPosition:\n       config.devIndicators === false\n         ? undefined"
        },
        {
            "sha": "7ea3261fe4f8c6f1a47d1d5031369bc3445e315c",
            "filename": "packages/next/src/build/webpack/plugins/define-env-plugin.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fdefine-env-plugin.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fdefine-env-plugin.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fdefine-env-plugin.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -185,9 +185,6 @@ export function getDefineEnv({\n     'process.env.__NEXT_APP_NAV_FAIL_HANDLING': Boolean(\n       config.experimental.appNavFailHandling\n     ),\n-    'process.env.__NEXT_APP_ISR_INDICATOR': Boolean(\n-      config.devIndicators === false ? false : config.devIndicators.appIsrStatus\n-    ),\n     'process.env.__NEXT_PPR': isPPREnabled,\n     'process.env.__NEXT_DYNAMIC_IO': isDynamicIOEnabled,\n     'process.env.__NEXT_USE_CACHE': isUseCacheEnabled,\n@@ -237,10 +234,6 @@ export function getDefineEnv({\n         }\n       : {}),\n     'process.env.__NEXT_TRAILING_SLASH': config.trailingSlash,\n-    'process.env.__NEXT_BUILD_INDICATOR':\n-      config.devIndicators === false\n-        ? false\n-        : config.devIndicators.buildActivity ?? true,\n     'process.env.__NEXT_DEV_INDICATOR': config.devIndicators !== false,\n     'process.env.__NEXT_DEV_INDICATOR_POSITION':\n       config.devIndicators === false\n@@ -296,8 +289,6 @@ export function getDefineEnv({\n             needsExperimentalReact(config),\n         }\n       : undefined),\n-    'process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY':\n-      config.experimental.newDevOverlay || false,\n   }\n \n   const userDefines = config.compiler?.define ?? {}"
        },
        {
            "sha": "4f577ea6595a934386fbb1bfa7df2b5704879185",
            "filename": "packages/next/src/client/components/react-dev-overlay/_experimental/internal/components/errors/dev-tools-indicator/dev-tools-indicator.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -4,7 +4,7 @@ import type { OverlayState } from '../../../../../shared'\n import { useState, useEffect, useRef, createContext, useContext } from 'react'\n import { Toast } from '../../toast'\n import { NextLogo } from './internal/next-logo'\n-import { useIsDevBuilding } from '../../../../../../../dev/dev-build-indicator/internal/initialize-for-new-overlay'\n+import { useIsDevBuilding } from '../../../../../../../dev/dev-build-indicator/internal/initialize'\n import { useIsDevRendering } from './internal/dev-render-indicator'\n import { useDelayedRender } from '../../../hooks/use-delayed-render'\n import { noop as css } from '../../../helpers/noop-template'"
        },
        {
            "sha": "def8ffa9ad65f403a305fce150dedcf2f3e9b26d",
            "filename": "packages/next/src/client/components/react-dev-overlay/app/hot-reloader-client.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 47,
            "changes": 52,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fhot-reloader-client.tsx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -341,10 +341,7 @@ function processMessage(\n \n   switch (obj.action) {\n     case HMR_ACTIONS_SENT_TO_BROWSER.APP_ISR_MANIFEST: {\n-      if (\n-        process.env.__NEXT_APP_ISR_INDICATOR ||\n-        process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY\n-      ) {\n+      if (process.env.__NEXT_DEV_INDICATOR) {\n         if (appIsrManifestRef) {\n           appIsrManifestRef.current = obj.data\n \n@@ -353,24 +350,7 @@ function processMessage(\n           // as we'll receive the updated manifest before usePathname\n           // triggers for new value\n           if ((pathnameRef.current as string) in obj.data) {\n-            if (process.env.__NEXT_APP_ISR_INDICATOR) {\n-              // the indicator can be hidden for an hour.\n-              // check if it's still hidden\n-              const indicatorHiddenAt = Number(\n-                localStorage?.getItem('__NEXT_DISMISS_PRERENDER_INDICATOR')\n-              )\n-\n-              const isHidden =\n-                indicatorHiddenAt &&\n-                !isNaN(indicatorHiddenAt) &&\n-                Date.now() < indicatorHiddenAt\n-\n-              if (!isHidden) {\n-                dispatcher.onStaticIndicator(true)\n-              }\n-            } else if (process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY) {\n-              dispatcher.onStaticIndicator(true)\n-            }\n+            dispatcher.onStaticIndicator(true)\n           } else {\n             dispatcher.onStaticIndicator(false)\n           }\n@@ -650,10 +630,7 @@ export default function HotReload({\n   const appIsrManifestRef = useRef<Record<string, false | number>>({})\n   const pathnameRef = useRef(pathname)\n \n-  if (\n-    process.env.__NEXT_APP_ISR_INDICATOR ||\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY\n-  ) {\n+  if (process.env.__NEXT_DEV_INDICATOR) {\n     // this conditional is only for dead-code elimination which\n     // isn't a runtime conditional only build-time so ignore hooks rule\n     // eslint-disable-next-line react-hooks/rules-of-hooks\n@@ -665,22 +642,7 @@ export default function HotReload({\n       if (appIsrManifest) {\n         if (pathname && pathname in appIsrManifest) {\n           try {\n-            if (process.env.__NEXT_APP_ISR_INDICATOR) {\n-              const indicatorHiddenAt = Number(\n-                localStorage?.getItem('__NEXT_DISMISS_PRERENDER_INDICATOR')\n-              )\n-\n-              const isHidden =\n-                indicatorHiddenAt &&\n-                !isNaN(indicatorHiddenAt) &&\n-                Date.now() < indicatorHiddenAt\n-\n-              if (!isHidden) {\n-                dispatcher.onStaticIndicator(true)\n-              }\n-            } else if (process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY) {\n-              dispatcher.onStaticIndicator(true)\n-            }\n+            dispatcher.onStaticIndicator(true)\n           } catch (reason) {\n             let message = ''\n \n@@ -742,11 +704,7 @@ export default function HotReload({\n \n   if (shouldRenderErrorOverlay) {\n     return (\n-      <ReactDevOverlay\n-        state={state}\n-        dispatcher={dispatcher}\n-        globalError={globalError}\n-      >\n+      <ReactDevOverlay state={state} globalError={globalError}>\n         {children}\n       </ReactDevOverlay>\n     )"
        },
        {
            "sha": "bd1cab80422d431e1f9b44148752733f62609225",
            "filename": "packages/next/src/client/components/react-dev-overlay/app/old-react-dev-overlay.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 119,
            "changes": 119,
            "blob_url": "https://github.com/vercel/next.js/blob/c8ac0bdd609561e61a6839c5ef6124ee41b56889/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fold-react-dev-overlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/c8ac0bdd609561e61a6839c5ef6124ee41b56889/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fold-react-dev-overlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Fold-react-dev-overlay.tsx?ref=c8ac0bdd609561e61a6839c5ef6124ee41b56889",
            "patch": "@@ -1,119 +0,0 @@\n-import React from 'react'\n-import type { OverlayState } from '../shared'\n-import { ShadowPortal } from '../internal/components/ShadowPortal'\n-import { BuildError } from '../internal/container/BuildError'\n-import { Errors } from '../internal/container/Errors'\n-import { StaticIndicator } from '../internal/container/StaticIndicator'\n-import { Base } from '../internal/styles/Base'\n-import { ComponentStyles } from '../internal/styles/ComponentStyles'\n-import { CssReset } from '../internal/styles/CssReset'\n-import { RootLayoutMissingTagsError } from '../internal/container/RootLayoutMissingTagsError'\n-import type { Dispatcher } from './hot-reloader-client'\n-import { RuntimeErrorHandler } from '../../errors/runtime-error-handler'\n-import type { GlobalErrorComponent } from '../../error-boundary'\n-\n-function ErroredHtml({\n-  globalError: [GlobalError, globalErrorStyles],\n-  error,\n-}: {\n-  globalError: [GlobalErrorComponent, React.ReactNode]\n-  error: unknown\n-}) {\n-  if (!error) {\n-    return (\n-      <html>\n-        <head />\n-        <body />\n-      </html>\n-    )\n-  }\n-  return (\n-    <>\n-      {globalErrorStyles}\n-      <GlobalError error={error} />\n-    </>\n-  )\n-}\n-\n-interface ReactDevOverlayState {\n-  reactError?: unknown\n-  isReactError: boolean\n-}\n-export default class ReactDevOverlay extends React.PureComponent<\n-  {\n-    state: OverlayState\n-    globalError: [GlobalErrorComponent, React.ReactNode]\n-    dispatcher?: Dispatcher\n-    children: React.ReactNode\n-  },\n-  ReactDevOverlayState\n-> {\n-  state = {\n-    reactError: null,\n-    isReactError: false,\n-  }\n-\n-  static getDerivedStateFromError(error: Error): ReactDevOverlayState {\n-    if (!error.stack) return { isReactError: false }\n-\n-    RuntimeErrorHandler.hadRuntimeError = true\n-    return {\n-      reactError: error,\n-      isReactError: true,\n-    }\n-  }\n-\n-  render() {\n-    const { state, children, dispatcher, globalError } = this.props\n-    const { isReactError, reactError } = this.state\n-\n-    const hasBuildError = state.buildError != null\n-    const hasRuntimeErrors = Boolean(state.errors.length)\n-    const hasStaticIndicator = state.staticIndicator\n-    const debugInfo = state.debugInfo\n-\n-    return (\n-      <>\n-        {isReactError ? (\n-          <ErroredHtml globalError={globalError} error={reactError} />\n-        ) : (\n-          children\n-        )}\n-        <ShadowPortal>\n-          <CssReset />\n-          <Base />\n-          <ComponentStyles />\n-          {state.rootLayoutMissingTags?.length ? (\n-            <RootLayoutMissingTagsError\n-              missingTags={state.rootLayoutMissingTags}\n-            />\n-          ) : hasBuildError ? (\n-            <BuildError\n-              message={state.buildError!}\n-              versionInfo={state.versionInfo}\n-            />\n-          ) : (\n-            <>\n-              {hasRuntimeErrors ? (\n-                <Errors\n-                  isAppDir={true}\n-                  initialDisplayState={\n-                    isReactError ? 'fullscreen' : 'minimized'\n-                  }\n-                  errors={state.errors}\n-                  versionInfo={state.versionInfo}\n-                  hasStaticIndicator={hasStaticIndicator}\n-                  debugInfo={debugInfo}\n-                />\n-              ) : null}\n-\n-              {hasStaticIndicator && (\n-                <StaticIndicator dispatcher={dispatcher} />\n-              )}\n-            </>\n-          )}\n-        </ShadowPortal>\n-      </>\n-    )\n-  }\n-}"
        },
        {
            "sha": "5fa51a3955c56360068b64ba2155854132dd1cd3",
            "filename": "packages/next/src/client/components/react-dev-overlay/app/react-dev-overlay.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Freact-dev-overlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Freact-dev-overlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fapp%2Freact-dev-overlay.tsx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -1,6 +1,3 @@\n-import OldReactDevOverlay from './old-react-dev-overlay'\n import NewReactDevOverlay from '../_experimental/app/react-dev-overlay'\n \n-export default Boolean(process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY)\n-  ? NewReactDevOverlay\n-  : OldReactDevOverlay\n+export default NewReactDevOverlay"
        },
        {
            "sha": "13a1bd1769a0ff5d8030aa06cc427c2c44f262a6",
            "filename": "packages/next/src/client/components/react-dev-overlay/pages/old-react-dev-overlay.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 51,
            "changes": 51,
            "blob_url": "https://github.com/vercel/next.js/blob/c8ac0bdd609561e61a6839c5ef6124ee41b56889/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fold-react-dev-overlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/c8ac0bdd609561e61a6839c5ef6124ee41b56889/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fold-react-dev-overlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fold-react-dev-overlay.tsx?ref=c8ac0bdd609561e61a6839c5ef6124ee41b56889",
            "patch": "@@ -1,51 +0,0 @@\n-import * as React from 'react'\n-\n-import { ShadowPortal } from '../internal/components/ShadowPortal'\n-import { BuildError } from '../internal/container/BuildError'\n-import { Errors } from '../internal/container/Errors'\n-import { ErrorBoundary } from './error-boundary'\n-import { Base } from '../internal/styles/Base'\n-import { ComponentStyles } from '../internal/styles/ComponentStyles'\n-import { CssReset } from '../internal/styles/CssReset'\n-import { usePagesReactDevOverlay } from './hooks'\n-\n-export type ErrorType = 'runtime' | 'build'\n-\n-export default function ReactDevOverlay({\n-  children,\n-}: {\n-  children?: React.ReactNode\n-}) {\n-  const { hasBuildError, hasRuntimeErrors, state, onComponentError } =\n-    usePagesReactDevOverlay()\n-  const isMounted = hasBuildError || hasRuntimeErrors\n-\n-  return (\n-    <>\n-      <ErrorBoundary onError={onComponentError}>\n-        {children ?? null}\n-      </ErrorBoundary>\n-      {isMounted ? (\n-        <ShadowPortal>\n-          <CssReset />\n-          <Base />\n-          <ComponentStyles />\n-\n-          {hasBuildError ? (\n-            <BuildError\n-              message={state.buildError!}\n-              versionInfo={state.versionInfo}\n-            />\n-          ) : hasRuntimeErrors ? (\n-            <Errors\n-              isAppDir={false}\n-              errors={state.errors}\n-              versionInfo={state.versionInfo}\n-              initialDisplayState={'fullscreen'}\n-            />\n-          ) : undefined}\n-        </ShadowPortal>\n-      ) : undefined}\n-    </>\n-  )\n-}"
        },
        {
            "sha": "3e1586e22949fc05b426b50bc747b21ea892ae63",
            "filename": "packages/next/src/client/components/react-dev-overlay/pages/react-dev-overlay.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Freact-dev-overlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Freact-dev-overlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Freact-dev-overlay.tsx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -1,9 +1,6 @@\n-import OldReactDevOverlay from './old-react-dev-overlay'\n import NewReactDevOverlay from '../_experimental/pages/react-dev-overlay'\n \n-const ReactDevOverlay = Boolean(process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY)\n-  ? NewReactDevOverlay\n-  : OldReactDevOverlay\n+const ReactDevOverlay = NewReactDevOverlay\n \n export type ReactDevOverlayType = typeof ReactDevOverlay\n "
        },
        {
            "sha": "a37800b77db1d1631ae9d46637391c5d9f977928",
            "filename": "packages/next/src/client/dev/dev-build-indicator/initialize-for-app-router.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finitialize-for-app-router.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finitialize-for-app-router.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finitialize-for-app-router.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -2,9 +2,9 @@ import { devBuildIndicator } from './internal/dev-build-indicator'\n \n /** Integrates the generic dev build indicator with the App Router. */\n export const initializeDevBuildIndicatorForAppRouter = () => {\n-  if (!process.env.__NEXT_BUILD_INDICATOR) {\n+  if (!process.env.__NEXT_DEV_INDICATOR) {\n     return\n   }\n \n-  devBuildIndicator.initialize(process.env.__NEXT_DEV_INDICATOR_POSITION)\n+  devBuildIndicator.initialize()\n }"
        },
        {
            "sha": "2f681308531eae90f230af915f3a4af9a9356c53",
            "filename": "packages/next/src/client/dev/dev-build-indicator/initialize-for-page-router.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finitialize-for-page-router.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finitialize-for-page-router.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finitialize-for-page-router.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -4,11 +4,11 @@ import { handleDevBuildIndicatorHmrEvents } from './internal/handle-dev-build-in\n \n /** Integrates the generic dev build indicator with the Pages Router. */\n export const initializeDevBuildIndicatorForPageRouter = () => {\n-  if (!process.env.__NEXT_BUILD_INDICATOR) {\n+  if (!process.env.__NEXT_DEV_INDICATOR) {\n     return\n   }\n \n-  devBuildIndicator.initialize(process.env.__NEXT_DEV_INDICATOR_POSITION)\n+  devBuildIndicator.initialize()\n \n   // Add message listener specifically for Pages Router to handle lifecycle events\n   // related to dev builds (building, built, sync)"
        },
        {
            "sha": "2dd949fb48d5e6f32cb8f834984055ab51518ffc",
            "filename": "packages/next/src/client/dev/dev-build-indicator/internal/dev-build-indicator.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Fdev-build-indicator.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Fdev-build-indicator.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Fdev-build-indicator.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -1,3 +1,5 @@\n+import { initialize } from './initialize'\n+\n const NOOP = () => {}\n \n export const devBuildIndicator = {\n@@ -6,11 +8,5 @@ export const devBuildIndicator = {\n   /** Hides build indicator when Next.js finishes compiling. Requires initialize() first. */\n   hide: NOOP,\n   /** Sets up the build indicator UI component. Call this before using show/hide. */\n-  initialize: process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY\n-    ? (\n-        require('./initialize-for-new-overlay') as typeof import('./initialize-for-new-overlay')\n-      ).initializeForNewOverlay\n-    : (\n-        require('./initialize-for-old-overlay') as typeof import('./initialize-for-old-overlay')\n-      ).initializeForOldOverlay,\n+  initialize,\n }"
        },
        {
            "sha": "cfe0a081696aad55de077ce30a5fa9b6ac2946eb",
            "filename": "packages/next/src/client/dev/dev-build-indicator/internal/initialize-for-old-overlay.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 194,
            "changes": 194,
            "blob_url": "https://github.com/vercel/next.js/blob/c8ac0bdd609561e61a6839c5ef6124ee41b56889/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Finitialize-for-old-overlay.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c8ac0bdd609561e61a6839c5ef6124ee41b56889/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Finitialize-for-old-overlay.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Finitialize-for-old-overlay.ts?ref=c8ac0bdd609561e61a6839c5ef6124ee41b56889",
            "patch": "@@ -1,194 +0,0 @@\n-/*\n- * Initializes the build indicator for the old overlay\n- * This is a singleton store to track whether the app is currently being built\n- * Used by the dev tools indicator of the old overlay to show build status\n- */\n-\n-import { devBuildIndicator } from './dev-build-indicator'\n-\n-type VerticalPosition = 'top' | 'bottom'\n-type HorizonalPosition = 'left' | 'right'\n-\n-export function initializeForOldOverlay(position = 'bottom-right') {\n-  const shadowHost = document.createElement('div')\n-  const [verticalProperty, horizontalProperty] = position.split('-', 2) as [\n-    VerticalPosition,\n-    HorizonalPosition,\n-  ]\n-  shadowHost.id = '__next-build-indicator'\n-  // Make sure container is fixed and on a high zIndex so it shows\n-  shadowHost.style.position = 'fixed'\n-  // Ensure container's position to be top or bottom (default)\n-  shadowHost.style[verticalProperty] = '10px'\n-  // Ensure container's position to be left or right (default)\n-  shadowHost.style[horizontalProperty] = '20px'\n-  shadowHost.style.width = '0'\n-  shadowHost.style.height = '0'\n-  shadowHost.style.zIndex = '99999'\n-  document.body.appendChild(shadowHost)\n-\n-  let shadowRoot\n-  let prefix = ''\n-\n-  if (shadowHost.attachShadow) {\n-    shadowRoot = shadowHost.attachShadow({ mode: 'open' })\n-  } else {\n-    // If attachShadow is undefined then the browser does not support\n-    // the Shadow DOM, we need to prefix all the names so there\n-    // will be no conflicts\n-    shadowRoot = shadowHost\n-    prefix = '__next-build-indicator-'\n-  }\n-\n-  // Container\n-  const container = createContainer(prefix)\n-  shadowRoot.appendChild(container)\n-\n-  // CSS\n-  const css = createCss(prefix, { horizontalProperty, verticalProperty })\n-  shadowRoot.appendChild(css)\n-\n-  // State\n-  let isVisible = false\n-  let isBuilding = false\n-  let timeoutId: null | ReturnType<typeof setTimeout> = null\n-\n-  devBuildIndicator.show = () => {\n-    timeoutId && clearTimeout(timeoutId)\n-    isVisible = true\n-    isBuilding = true\n-    updateContainer()\n-  }\n-\n-  devBuildIndicator.hide = () => {\n-    isBuilding = false\n-    // Wait for the fade out transition to complete\n-    timeoutId = setTimeout(() => {\n-      isVisible = false\n-      updateContainer()\n-    }, 100)\n-    updateContainer()\n-  }\n-\n-  function updateContainer() {\n-    if (isBuilding) {\n-      container.classList.add(`${prefix}building`)\n-    } else {\n-      container.classList.remove(`${prefix}building`)\n-    }\n-\n-    if (isVisible) {\n-      container.classList.add(`${prefix}visible`)\n-    } else {\n-      container.classList.remove(`${prefix}visible`)\n-    }\n-  }\n-}\n-function createContainer(prefix: string) {\n-  const container = document.createElement('div')\n-  container.id = `${prefix}container`\n-  container.innerHTML = `\n-    <div id=\"${prefix}icon-wrapper\">\n-      <svg viewBox=\"0 0 226 200\">\n-        <defs>\n-          <linearGradient\n-            x1=\"114.720775%\"\n-            y1=\"181.283245%\"\n-            x2=\"39.5399306%\"\n-            y2=\"100%\"\n-            id=\"${prefix}linear-gradient\"\n-          >\n-            <stop stop-color=\"#000000\" offset=\"0%\" />\n-            <stop stop-color=\"#FFFFFF\" offset=\"100%\" />\n-          </linearGradient>\n-        </defs>\n-        <g id=\"${prefix}icon-group\" fill=\"none\" stroke=\"url(#${prefix}linear-gradient)\" stroke-width=\"18\">\n-          <path d=\"M113,5.08219117 L4.28393801,197.5 L221.716062,197.5 L113,5.08219117 Z\" />\n-        </g>\n-      </svg>\n-    </div>\n-  `\n-\n-  return container\n-}\n-function createCss(\n-  prefix: string,\n-  {\n-    horizontalProperty,\n-    verticalProperty,\n-  }: { horizontalProperty: string; verticalProperty: string }\n-) {\n-  const css = document.createElement('style')\n-  css.textContent = `\n-    #${prefix}container {\n-      position: absolute;\n-      ${verticalProperty}: 10px;\n-      ${horizontalProperty}: 30px;\n-\n-      border-radius: 3px;\n-      background: #000;\n-      color: #fff;\n-      font: initial;\n-      cursor: initial;\n-      letter-spacing: initial;\n-      text-shadow: initial;\n-      text-transform: initial;\n-      visibility: initial;\n-\n-      padding: 7px 10px 8px 10px;\n-      align-items: center;\n-      box-shadow: 0 11px 40px 0 rgba(0, 0, 0, 0.25), 0 2px 10px 0 rgba(0, 0, 0, 0.12);\n-\n-      display: none;\n-      opacity: 0;\n-      transition: opacity 0.1s ease, ${verticalProperty} 0.1s ease;\n-      animation: ${prefix}fade-in 0.1s ease-in-out;\n-    }\n-\n-    #${prefix}container.${prefix}visible {\n-      display: flex;\n-    }\n-\n-    #${prefix}container.${prefix}building {\n-      ${verticalProperty}: 20px;\n-      opacity: 1;\n-    }\n-\n-    #${prefix}icon-wrapper {\n-      width: 16px;\n-      height: 16px;\n-    }\n-\n-    #${prefix}icon-wrapper > svg {\n-      width: 100%;\n-      height: 100%;\n-    }\n-\n-    #${prefix}icon-group {\n-      animation: ${prefix}strokedash 1s ease-in-out both infinite;\n-    }\n-\n-    @keyframes ${prefix}fade-in {\n-      from {\n-        ${verticalProperty}: 10px;\n-        opacity: 0;\n-      }\n-      to {\n-        ${verticalProperty}: 20px;\n-        opacity: 1;\n-      }\n-    }\n-\n-    @keyframes ${prefix}strokedash {\n-      0% {\n-        stroke-dasharray: 0 226;\n-      }\n-      80%,\n-      100% {\n-        stroke-dasharray: 659 226;\n-      }\n-    }\n-  `\n-\n-  return css\n-}"
        },
        {
            "sha": "445d3f8fd0c7d7215ae76aa48f88b8865ceb3ab7",
            "filename": "packages/next/src/client/dev/dev-build-indicator/internal/initialize.ts",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Finitialize.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Finitialize.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fdev-build-indicator%2Finternal%2Finitialize.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -22,7 +22,7 @@ export function useIsDevBuilding() {\n   return useSyncExternalStore(subscribe, getSnapshot)\n }\n \n-export function initializeForNewOverlay() {\n+export function initialize() {\n   devBuildIndicator.show = () => {\n     isVisible = true\n     listeners.forEach((listener) => listener())",
            "previous_filename": "packages/next/src/client/dev/dev-build-indicator/internal/initialize-for-new-overlay.ts"
        },
        {
            "sha": "6ca9a10c6c2bcc9957c30b64d7085c0d2f04b1b1",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -230,8 +230,6 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n     devIndicators: z\n       .union([\n         z.object({\n-          appIsrStatus: z.boolean().optional(),\n-          buildActivity: z.boolean().optional(),\n           buildActivityPosition: z\n             .union([\n               z.literal('bottom-left'),\n@@ -266,7 +264,6 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n         nodeMiddleware: z.boolean().optional(),\n         after: z.boolean().optional(),\n         appDocumentPreloading: z.boolean().optional(),\n-        appIsrStatus: z.boolean().optional(),\n         appNavFailHandling: z.boolean().optional(),\n         preloadEntriesOnStart: z.boolean().optional(),\n         allowedRevalidateHeaderKeys: z.array(z.string()).optional(),"
        },
        {
            "sha": "6f2084dcb8534059c6017c1247e29186c03e4dc9",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 21,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -469,14 +469,14 @@ function assignDefaults(\n   warnOptionHasBeenDeprecated(\n     result,\n     'devIndicators.appIsrStatus',\n-    `\\`devIndicators.appIsrStatus\\` is no longer needed and is enabled by default. You can remove it from ${configFileName}.`,\n+    `\\`devIndicators.appIsrStatus\\` is deprecated and no longer configurable. Please remove it from ${configFileName}.`,\n     silent\n   )\n \n   warnOptionHasBeenDeprecated(\n     result,\n     'devIndicators.buildActivity',\n-    `\\`devIndicators.buildActivity\\` is no longer needed and is enabled by default. You can remove it from ${configFileName}.`,\n+    `\\`devIndicators.buildActivity\\` is deprecated and no longer configurable. Please remove it from ${configFileName}.`,\n     silent\n   )\n \n@@ -955,34 +955,19 @@ function assignDefaults(\n     result.experimental = {}\n   }\n \n-  // TODO(jiwon): remove once we've made new UI default\n-  if (process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'false') {\n-    result.experimental.newDevOverlay = false\n-  }\n   // Preserve the default indicator options for old overlay.\n   if (result.experimental.newDevOverlay !== true) {\n-    result.devIndicators = {\n-      ...result.devIndicators,\n-      appIsrStatus:\n-        result.devIndicators === false\n-          ? false\n-          : result.devIndicators?.appIsrStatus ?? true,\n-      buildActivity:\n-        result.devIndicators === false\n-          ? false\n-          : result.devIndicators?.buildActivity ?? true,\n-    }\n-\n     // If the user didn't explicitly set `position` or `buildActivityPosition` option,\n     // the default is going to be \"bottom-left\". However, the default position for the\n     // old build activity indicator was \"bottom-right\" which becomes a breaking change.\n     // Therefore, set to \"bottom-right\" if the user didn't explicitly set the option.\n     if (!hasWarnedBuildActivityPosition) {\n       result.devIndicators = {\n         ...result.devIndicators,\n-        position: userConfig.devIndicators?.position\n-          ? result.devIndicators.position\n-          : 'bottom-right',\n+        position:\n+          userConfig.devIndicators?.position && result.devIndicators !== false\n+            ? result.devIndicators?.position\n+            : 'bottom-right',\n       }\n     }\n   }"
        },
        {
            "sha": "e46a1dc898e69ba28dcc694690e23871cd719497",
            "filename": "run-tests.js",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/run-tests.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/run-tests.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/run-tests.js?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -50,12 +50,6 @@ const ENDGROUP = process.env.CI ? '##[endgroup]' : ''\n \n const externalTestsFilter = getTestFilter()\n \n-// TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-if (!process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY) {\n-  console.log('Setting __NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY to true')\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY = 'true'\n-}\n-\n const timings = []\n const DEFAULT_NUM_RETRIES = 2\n const DEFAULT_CONCURRENCY = 2"
        },
        {
            "sha": "5e40164e7ad7f7344a926d36c3a4091705dd8510",
            "filename": "test/development/acceptance-app/dynamic-error.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Fdynamic-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Fdynamic-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fdynamic-error.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -32,14 +32,8 @@ describe('dynamic = \"error\" in devmode', () => {\n     const { session } = sandbox\n     await session.assertHasRedbox()\n     const description = await session.getRedboxDescription()\n-    if (process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true') {\n-      expect(description).toMatchInlineSnapshot(\n-        `\"Error: Route /server with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`cookies\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering\"`\n-      )\n-    } else {\n-      expect(description).toMatchInlineSnapshot(\n-        `\"[ Server ] Error: Route /server with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`cookies\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering\"`\n-      )\n-    }\n+    expect(description).toMatchInlineSnapshot(\n+      `\"Error: Route /server with \\`dynamic = \"error\"\\` couldn't be rendered statically because it used \\`cookies\\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering\"`\n+    )\n   })\n })"
        },
        {
            "sha": "3e4727e017fc484f968f2fe23c78d7c09cae73d8",
            "filename": "test/development/acceptance-app/editor-links.test.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 16,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Feditor-links.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Feditor-links.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Feditor-links.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -65,24 +65,19 @@ describe('Error overlay - editor links', () => {\n       `\n     )\n \n-    const isNewDevOverlay =\n-      process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n     // Ensure the Next Logo is not loading. This is to assert that the build did stop.\n-    if (isNewDevOverlay) {\n-      await retry(async () => {\n-        const loaded = await browser.eval(() => {\n-          return Boolean(\n-            [].slice\n-              .call(document.querySelectorAll('nextjs-portal'))\n-              .find((p) =>\n-                p.shadowRoot.querySelector('[data-next-mark-loading=\"false\"]')\n-              )\n-          )\n-        })\n-        expect(loaded).toBe(true)\n+    await retry(async () => {\n+      const loaded = await browser.eval(() => {\n+        return Boolean(\n+          [].slice\n+            .call(document.querySelectorAll('nextjs-portal'))\n+            .find((p) =>\n+              p.shadowRoot.querySelector('[data-next-mark-loading=\"false\"]')\n+            )\n+        )\n       })\n-    }\n+      expect(loaded).toBe(true)\n+    })\n \n     await session.assertHasRedbox()\n     await clickSourceFile(browser)"
        },
        {
            "sha": "24c03aa0da5a8b5a026521dec75b29d5d2fb08ad",
            "filename": "test/development/acceptance-app/hydration-error.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -215,7 +215,7 @@ describe('Error overlay for hydration errors in App router', () => {\n       expect(pseudoHtml).toMatchInlineSnapshot(`\n        \"...\n            <HotReload assetPrefix=\"\" globalError={[...]}>\n-             <ReactDevOverlay state={{nextId:1, ...}} dispatcher={{...}} globalError={[...]}>\n+             <ReactDevOverlay state={{nextId:1, ...}} globalError={[...]}>\n                <DevOverlayErrorBoundary devOverlay={<Fragment>} globalError={[...]} onError={function bound dispatchSetState}>\n                  <DevRootHTTPAccessFallbackBoundary>\n                    <HTTPAccessFallbackBoundary notFound={<NotAllowedRootHTTPFallbackError>}>\n@@ -238,7 +238,7 @@ describe('Error overlay for hydration errors in App router', () => {\n       expect(pseudoHtml).toMatchInlineSnapshot(`\n        \"...\n            <HotReload assetPrefix=\"\" globalError={[...]}>\n-             <ReactDevOverlay state={{nextId:1, ...}} dispatcher={{...}} globalError={[...]}>\n+             <ReactDevOverlay state={{nextId:1, ...}} globalError={[...]}>\n                <DevOverlayErrorBoundary devOverlay={<Fragment>} globalError={[...]} onError={function bound dispatchSetState}>\n                  <DevRootHTTPAccessFallbackBoundary>\n                    <HTTPAccessFallbackBoundary notFound={<NotAllowedRootHTTPFallbackError>}>"
        },
        {
            "sha": "0037acf6c09d78f4cc02345fae3ac9a5ccaab639",
            "filename": "test/development/acceptance-app/rsc-runtime-errors.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Frsc-runtime-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Frsc-runtime-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Frsc-runtime-errors.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -8,9 +8,6 @@ import {\n   getVersionCheckerText,\n } from 'next-test-utils'\n \n-const isNewDevOverlay =\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n describe('Error overlay - RSC runtime errors', () => {\n   const { next } = nextTestSetup({\n     files: new FileRef(path.join(__dirname, 'fixtures', 'rsc-runtime-errors')),\n@@ -111,11 +108,7 @@ describe('Error overlay - RSC runtime errors', () => {\n \n     await assertHasRedbox(browser)\n     const versionText = await getVersionCheckerText(browser)\n-    if (isNewDevOverlay) {\n-      expect(versionText).toMatch(/Next.js [\\w.-]+/)\n-    } else {\n-      expect(versionText).toMatch(/Next.js \\([\\w.-]+\\)/)\n-    }\n+    expect(versionText).toMatch(/Next.js [\\w.-]+/)\n   })\n \n   it('should not show the bundle layer info in the file trace', async () => {"
        },
        {
            "sha": "e789deaea327714c372292132a8bce1b226d1b40",
            "filename": "test/development/acceptance-app/version-staleness.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 21,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Fversion-staleness.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance-app%2Fversion-staleness.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fversion-staleness.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -11,9 +11,6 @@ function getStaleness(browser: BrowserInterface) {\n     .text()\n }\n \n-const isNewDevOverlay =\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n describe('Error Overlay version staleness', () => {\n   const { next } = nextTestSetup({\n     files: new FileRef(path.join(__dirname, 'fixtures', 'default-template')),\n@@ -50,28 +47,15 @@ describe('Error Overlay version staleness', () => {\n \n     await session.openRedbox()\n \n-    if (isNewDevOverlay) {\n-      if (process.env.TURBOPACK) {\n-        expect(await getStaleness(browser)).toMatchInlineSnapshot(`\n+    if (process.env.TURBOPACK) {\n+      expect(await getStaleness(browser)).toMatchInlineSnapshot(`\n          \"Next.js 1.0.0 (outdated)\n          Turbopack\"\n         `)\n-      } else {\n-        expect(await getStaleness(browser)).toMatchInlineSnapshot(\n-          `\"Next.js 1.0.0 (outdated)\"`\n-        )\n-      }\n     } else {\n-      if (process.env.TURBOPACK) {\n-        expect(await getStaleness(browser)).toMatchInlineSnapshot(`\n-         \"Next.js 1.0.0 (outdated)\n-         Turbopack\"\n-        `)\n-      } else {\n-        expect(await getStaleness(browser)).toMatchInlineSnapshot(\n-          `\"Next.js 1.0.0 (outdated)\"`\n-        )\n-      }\n+      expect(await getStaleness(browser)).toMatchInlineSnapshot(\n+        `\"Next.js 1.0.0 (outdated)\"`\n+      )\n     }\n   })\n "
        },
        {
            "sha": "df83d7b2a7fee30acafb27c5c3799f8a7f30f7dc",
            "filename": "test/development/acceptance/hydration-error.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2Fhydration-error.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -5,9 +5,6 @@ import { outdent } from 'outdent'\n import { getRedboxTotalErrorCount, retry } from 'next-test-utils'\n \n const isReact18 = parseInt(process.env.NEXT_TEST_REACT_VERSION) === 18\n-// TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-const isNewDevOverlay =\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n // https://github.com/facebook/react/blob/main/packages/react-dom/src/__tests__/ReactDOMHydrationDiff-test.js used as a reference\n \n describe('Error overlay for hydration errors in Pages router', () => {\n@@ -489,11 +486,6 @@ describe('Error overlay for hydration errors in Pages router', () => {\n     )\n     const { session, browser } = sandbox\n \n-    // in the new overlay, `assertHasRedbox` is redundant with `hasErrorToast`\n-    if (!isNewDevOverlay) {\n-      await expect(session.hasErrorToast()).resolves.toBe(false)\n-    }\n-\n     await session.assertHasRedbox()\n \n     if (isReact18) {"
        },
        {
            "sha": "f14dbf7ccfcff66529ef39e39176357ccfd0dadc",
            "filename": "test/development/app-dir/capture-console-error-owner-stack/capture-console-error-owner-stack.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 22,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcapture-console-error-owner-stack%2Fcapture-console-error-owner-stack.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -1,8 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n import { assertNoRedbox, assertNoConsoleErrors } from 'next-test-utils'\n \n-const isNewOverlay = process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY !== 'false'\n-\n describe('app-dir - capture-console-error-owner-stack', () => {\n   const { next } = nextTestSetup({\n     files: __dirname,\n@@ -109,8 +107,7 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n   it('should be able to capture rsc logged error', async () => {\n     const browser = await next.browser('/rsc')\n \n-    if (isNewOverlay) {\n-      await expect(browser).toDisplayCollapsedRedbox(`\n+    await expect(browser).toDisplayCollapsedRedbox(`\n        {\n          \"count\": 1,\n          \"description\": \"Error: boom\",\n@@ -126,24 +123,6 @@ describe('app-dir - capture-console-error-owner-stack', () => {\n          ],\n        }\n       `)\n-    } else {\n-      await expect(browser).toDisplayCollapsedRedbox(`\n-       {\n-         \"count\": 1,\n-         \"description\": \"[ Server ] Error: boom\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Console Error\",\n-         \"source\": \"app/rsc/page.js (2:17) @ Page\n-       > 2 |   console.error(new Error('boom'))\n-           |                 ^\",\n-         \"stack\": [\n-           \"Page app/rsc/page.js (2:17)\",\n-           \"JSON.parse <anonymous> (0:0)\",\n-           \"Page <anonymous> (0:0)\",\n-         ],\n-       }\n-      `)\n-    }\n   })\n \n   it('should display the error message in error event when event.error is not present', async () => {"
        },
        {
            "sha": "8178c3815c0b3160a9ee416be62fd53ef163ae67",
            "filename": "test/development/app-dir/dev-indicator/app/force-dynamic/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fforce-dynamic%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fforce-dynamic%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fforce-dynamic%2Fpage.tsx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "previous_filename": "test/development/app-dir/prerender-indicator/app/force-dynamic/page.tsx"
        },
        {
            "sha": "62f60503067396b48878ccedf663c2e67ab8f9b3",
            "filename": "test/development/app-dir/dev-indicator/app/force-dynamic/wait-for-hydration.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fforce-dynamic%2Fwait-for-hydration.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fforce-dynamic%2Fwait-for-hydration.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fforce-dynamic%2Fwait-for-hydration.tsx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "previous_filename": "test/development/app-dir/prerender-indicator/app/force-dynamic/wait-for-hydration.tsx"
        },
        {
            "sha": "6d7e1ed585862084bbcead3642e23690d53bd1fd",
            "filename": "test/development/app-dir/dev-indicator/app/layout.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Flayout.tsx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "previous_filename": "test/development/app-dir/prerender-indicator/app/layout.tsx"
        },
        {
            "sha": "2680d937510c90aeaba170c8af9d8e2d2062be98",
            "filename": "test/development/app-dir/dev-indicator/app/page.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Fapp%2Fpage.tsx?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "previous_filename": "test/development/app-dir/prerender-indicator/app/page.tsx"
        },
        {
            "sha": "01c512be4e9aa848b5dbb367906e49abd668cdc6",
            "filename": "test/development/app-dir/dev-indicator/route-type.test.ts",
            "status": "added",
            "additions": 61,
            "deletions": 0,
            "changes": 61,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Froute-type.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Froute-type.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdev-indicator%2Froute-type.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -0,0 +1,61 @@\n+import { nextTestSetup } from 'e2e-utils'\n+import { getRouteTypeFromDevToolsIndicator, retry } from 'next-test-utils'\n+\n+describe('dev indicator - route type', () => {\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should have route type as static by default for static page', async () => {\n+    const browser = await next.browser('/')\n+\n+    await retry(async () => {\n+      expect(await getRouteTypeFromDevToolsIndicator(browser)).toBe('Static')\n+    })\n+  })\n+\n+  it('should have route type as dynamic when changing to dynamic page', async () => {\n+    const browser = await next.browser('/')\n+    const origContent = await next.readFile('app/page.tsx')\n+\n+    await next.patchFile(\n+      'app/page.tsx',\n+      origContent.replace('// headers()', 'headers()')\n+    )\n+\n+    try {\n+      await retry(async () => {\n+        expect(await getRouteTypeFromDevToolsIndicator(browser)).toBe('Dynamic')\n+      })\n+    } finally {\n+      await next.patchFile('app/page.tsx', origContent)\n+    }\n+  })\n+\n+  it('should have route type as dynamic when on load of dynamic page', async () => {\n+    const origContent = await next.readFile('app/page.tsx')\n+\n+    await next.patchFile(\n+      'app/page.tsx',\n+      origContent.replace('// headers()', 'headers()')\n+    )\n+\n+    const browser = await next.browser('/')\n+\n+    try {\n+      await retry(async () => {\n+        expect(await getRouteTypeFromDevToolsIndicator(browser)).toBe('Dynamic')\n+      })\n+    } finally {\n+      await next.patchFile('app/page.tsx', origContent)\n+    }\n+  })\n+\n+  it('should have route type as dynamic when using force-dynamic', async () => {\n+    const browser = await next.browser('/force-dynamic')\n+\n+    await browser.waitForElementByCss('#ready')\n+\n+    expect(await getRouteTypeFromDevToolsIndicator(browser)).toBe('Dynamic')\n+  })\n+})"
        },
        {
            "sha": "627c6428e0344426d80d4406d844423fe5a116c7",
            "filename": "test/development/app-dir/dynamic-io-dev-errors/dynamic-io-dev-errors.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 82,
            "changes": 86,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -9,14 +9,10 @@ describe('Dynamic IO Dev Errors', () => {\n     files: __dirname,\n   })\n \n-  const isNewOverlay =\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY !== 'false'\n-\n   it('should show a red box error on the SSR render', async () => {\n     const browser = await next.browser('/error')\n \n-    if (isNewOverlay) {\n-      await expect(browser).toDisplayCollapsedRedbox(`\n+    await expect(browser).toDisplayCollapsedRedbox(`\n        {\n          \"count\": 1,\n          \"description\": \"Error: Route \"/error\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n@@ -32,24 +28,6 @@ describe('Dynamic IO Dev Errors', () => {\n          ],\n        }\n       `)\n-    } else {\n-      await expect(browser).toDisplayCollapsedRedbox(`\n-       {\n-         \"count\": 1,\n-         \"description\": \"[ Server ] Error: Route \"/error\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Console Error\",\n-         \"source\": \"app/error/page.tsx (2:23) @ Page\n-       > 2 |   const random = Math.random()\n-           |                       ^\",\n-         \"stack\": [\n-           \"Page app/error/page.tsx (2:23)\",\n-           \"JSON.parse <anonymous> (0:0)\",\n-           \"<unknown> <anonymous> (0:0)\",\n-         ],\n-       }\n-      `)\n-    }\n   })\n \n   it('should show a red box error on client navigations', async () => {\n@@ -61,8 +39,7 @@ describe('Dynamic IO Dev Errors', () => {\n \n     await browser.elementByCss(\"[href='/error']\").click()\n \n-    if (isNewOverlay) {\n-      await expect(browser).toDisplayCollapsedRedbox(`\n+    await expect(browser).toDisplayCollapsedRedbox(`\n        {\n          \"count\": 1,\n          \"description\": \"Error: Route \"/error\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n@@ -78,24 +55,6 @@ describe('Dynamic IO Dev Errors', () => {\n          ],\n        }\n       `)\n-    } else {\n-      await expect(browser).toDisplayCollapsedRedbox(`\n-       {\n-         \"count\": 1,\n-         \"description\": \"[ Server ] Error: Route \"/error\" used \\`Math.random()\\` outside of \\`\"use cache\"\\` and without explicitly calling \\`await connection()\\` beforehand. See more info here: https://nextjs.org/docs/messages/next-prerender-random\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Console Error\",\n-         \"source\": \"app/error/page.tsx (2:23) @ Page\n-       > 2 |   const random = Math.random()\n-           |                       ^\",\n-         \"stack\": [\n-           \"Page app/error/page.tsx (2:23)\",\n-           \"JSON.parse <anonymous> (0:0)\",\n-           \"<unknown> <anonymous> (0:0)\",\n-         ],\n-       }\n-      `)\n-    }\n   })\n \n   it('should not log unhandled rejections for persistently thrown top-level errors', async () => {\n@@ -141,8 +100,7 @@ describe('Dynamic IO Dev Errors', () => {\n             '\\n    at InnerLayoutRouter (..')\n     )\n \n-    if (isNewOverlay) {\n-      await expect(browser).toDisplayCollapsedRedbox(`\n+    await expect(browser).toDisplayCollapsedRedbox(`\n        {\n          \"count\": 1,\n          \"description\": \"Error: Route \"/no-accessed-data\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense\",\n@@ -160,26 +118,6 @@ describe('Dynamic IO Dev Errors', () => {\n          ],\n        }\n       `)\n-    } else {\n-      await expect(browser).toDisplayCollapsedRedbox(`\n-       {\n-         \"count\": 1,\n-         \"description\": \"[ Server ] Error: Route \"/no-accessed-data\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Console Error\",\n-         \"source\": undefined,\n-         \"stack\": [\n-           \"Page [Server] <anonymous> (2:1)\",\n-           \"main <anonymous> (2:1)\",\n-           \"body <anonymous> (2:1)\",\n-           \"html <anonymous> (2:1)\",\n-           \"Root [Server] <anonymous> (2:1)\",\n-           \"JSON.parse <anonymous> (0:0)\",\n-           \"<unknown> <anonymous> (0:0)\",\n-         ],\n-       }\n-      `)\n-    }\n   })\n \n   it('should clear segment errors after correcting them', async () => {\n@@ -201,8 +139,7 @@ describe('Dynamic IO Dev Errors', () => {\n     )\n     const { browser, session } = sandbox\n     if (isTurbopack) {\n-      if (isNewOverlay) {\n-        await expect(browser).toDisplayRedbox(`\n+      await expect(browser).toDisplayRedbox(`\n          {\n            \"count\": 1,\n            \"description\": \"Failed to compile\",\n@@ -215,21 +152,6 @@ describe('Dynamic IO Dev Errors', () => {\n            \"stack\": [],\n          }\n         `)\n-      } else {\n-        await expect(browser).toDisplayRedbox(`\n-         {\n-           \"count\": 1,\n-           \"description\": \"Failed to compile\",\n-           \"environmentLabel\": null,\n-           \"label\": \"Build Error\",\n-           \"source\": \"./app/page.tsx:1:14\n-         Ecmascript file had an error\n-         > 1 | export const revalidate = 10\n-             |              ^^^^^^^^^^\",\n-           \"stack\": [],\n-         }\n-        `)\n-      }\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {"
        },
        {
            "sha": "eb5eb84993733e5f37ea16c0982932e0cd48c844",
            "filename": "test/development/app-dir/error-overlay/error-ignored-frames/error-ignored-frames.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -11,8 +11,6 @@ describe('error-ignored-frames', () => {\n   })\n \n   if (\n-    // TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true' ||\n     // Skip react 18 test as the call stacks are different\n     process.env.NEXT_TEST_REACT_VERSION === '18.3.1'\n   ) {\n@@ -108,8 +106,8 @@ describe('error-ignored-frames', () => {\n     } else {\n       expect(expendedStack).toMatchInlineSnapshot(`\n        \"at eval (app/interleaved/page.tsx (7:11))\n-       at invokeCallback (node_modules/interleave/index.js (2:1))\n        at Page (app/interleaved/page.tsx (6:36))\n+       at invokeCallback (node_modules/interleave/index.js (2:1))\n        at ClientPageRoot (../src/client/components/client-page.tsx (60:12))\"\n       `)\n     }"
        },
        {
            "sha": "75299d7fe8c5df4b54599d47b6d6980f5f10894f",
            "filename": "test/development/app-dir/missing-required-html-tags-new-overlay/app/layout.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fapp%2Flayout.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fapp%2Flayout.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fapp%2Flayout.js?ref=c8ac0bdd609561e61a6839c5ef6124ee41b56889",
            "patch": "@@ -1,3 +0,0 @@\n-export default function Layout({ children }) {\n-  return <body>{children}</body>\n-}"
        },
        {
            "sha": "ff7159d9149feeb1eb8f4b7bbeadb2e26c20b053",
            "filename": "test/development/app-dir/missing-required-html-tags-new-overlay/app/page.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fapp%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fapp%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fapp%2Fpage.js?ref=c8ac0bdd609561e61a6839c5ef6124ee41b56889",
            "patch": "@@ -1,3 +0,0 @@\n-export default function Page() {\n-  return <p>hello world</p>\n-}"
        },
        {
            "sha": "41ab3f1b91c8d97d9dbb28d576422e54324a9aa5",
            "filename": "test/development/app-dir/missing-required-html-tags-new-overlay/missing-html-tags-new-overlay.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 51,
            "changes": 51,
            "blob_url": "https://github.com/vercel/next.js/blob/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fmissing-html-tags-new-overlay.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fmissing-html-tags-new-overlay.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fmissing-html-tags-new-overlay.test.ts?ref=c8ac0bdd609561e61a6839c5ef6124ee41b56889",
            "patch": "@@ -1,51 +0,0 @@\n-import { nextTestSetup } from 'e2e-utils'\n-import {\n-  assertHasRedbox,\n-  assertNoRedbox,\n-  getRedboxDescription,\n-  getToastErrorCount,\n-  hasErrorToast,\n-  retry,\n-} from 'next-test-utils'\n-import { outdent } from 'outdent'\n-\n-// TODO(new-dev-overlay): merge with test/development/app-dir/missing-required-html-tags/index.test.ts\n-//  once new overlay is stable\n-const isDisabled = process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'false'\n-;(isDisabled ? describe.skip : describe)(\n-  'app-dir - missing required html tags',\n-  () => {\n-    const { next } = nextTestSetup({\n-      files: __dirname,\n-    })\n-\n-    it('should display correct error count in dev indicator', async () => {\n-      const browser = await next.browser('/')\n-\n-      retry(async () => {\n-        expect(await hasErrorToast(browser)).toBe(true)\n-      })\n-      // Dev indicator should show 1 error\n-      expect(await getToastErrorCount(browser)).toBe(1)\n-\n-      await assertHasRedbox(browser)\n-\n-      await retry(async () => {\n-        expect(await getRedboxDescription(browser)).toEqual(outdent`\n-        The following tags are missing in the Root Layout: <html>.\n-        Read more at https://nextjs.org/docs/messages/missing-root-layout-tags\n-      `)\n-      })\n-\n-      await next.patchFile('app/layout.js', (code) =>\n-        code.replace(\n-          'return <body>{children}</body>',\n-          'return <html><body>{children}</body></html>'\n-        )\n-      )\n-\n-      await assertNoRedbox(browser)\n-      expect(await browser.elementByCss('p').text()).toBe('hello world')\n-    })\n-  }\n-)"
        },
        {
            "sha": "09632ad85342ccb511eb47e0f5d0e70394649e82",
            "filename": "test/development/app-dir/missing-required-html-tags-new-overlay/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags-new-overlay%2Fnext.config.js?ref=c8ac0bdd609561e61a6839c5ef6124ee41b56889",
            "patch": "@@ -1,8 +0,0 @@\n-/**\n- * @type {import('next').NextConfig}\n- */\n-module.exports = {\n-  experimental: {\n-    newDevOverlay: true,\n-  },\n-}"
        },
        {
            "sha": "edd1eae47578bcaed524d99576b835d4b9577738",
            "filename": "test/development/app-dir/missing-required-html-tags/index.test.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fmissing-required-html-tags%2Findex.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -3,13 +3,25 @@ import {\n   assertHasRedbox,\n   assertNoRedbox,\n   getRedboxDescription,\n+  getToastErrorCount,\n+  hasErrorToast,\n   retry,\n } from 'next-test-utils'\n import { outdent } from 'outdent'\n \n describe('app-dir - missing required html tags', () => {\n   const { next } = nextTestSetup({ files: __dirname })\n \n+  it('should display correct error count in dev indicator', async () => {\n+    const browser = await next.browser('/')\n+\n+    retry(async () => {\n+      expect(await hasErrorToast(browser)).toBe(true)\n+    })\n+    // Dev indicator should show 1 error\n+    expect(await getToastErrorCount(browser)).toBe(1)\n+  })\n+\n   it('should show error overlay', async () => {\n     const browser = await next.browser('/')\n "
        },
        {
            "sha": "e44bc62cbf8974ad34a92e4e76bc139599f45d50",
            "filename": "test/development/app-dir/owner-stack/owner-stack.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 72,
            "changes": 77,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fowner-stack%2Fowner-stack.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -51,9 +51,6 @@ describe('app-dir - owner-stack', () => {\n     files: __dirname,\n   })\n \n-  const isNewDevOverlay =\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n   it('should log stitched error for browser uncaught errors', async () => {\n     const browser = await next.browser('/browser/uncaught')\n \n@@ -71,10 +68,8 @@ describe('app-dir - owner-stack', () => {\n       return log.message.includes('Error: browser error')\n     }).message\n \n-    // TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-    if (isNewDevOverlay) {\n-      if (process.env.TURBOPACK) {\n-        expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n+    if (process.env.TURBOPACK) {\n+      expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n           \"%o\n           %s Error: browser error\n           at useThrowError \n@@ -92,48 +87,8 @@ describe('app-dir - owner-stack', () => {\n           at performWorkOnRootViaSchedulerTask \n           at MessagePort.performWorkUntilDeadline  The above error occurred in the <Page> component. It was handled by the <DevOverlayErrorBoundary> error boundary.\"\n         `)\n-      } else {\n-        expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n-          \"%o\n-          %s Error: browser error\n-          at useThrowError \n-          at useErrorHook \n-          at Page \n-          at react-stack-bottom-frame \n-          at renderWithHooks \n-          at updateFunctionComponent \n-          at beginWork \n-          at runWithFiberInDEV \n-          at performUnitOfWork \n-          at workLoopSync \n-          at renderRootSync \n-          at performWorkOnRoot \n-          at performWorkOnRootViaSchedulerTask \n-          at MessagePort.performWorkUntilDeadline  The above error occurred in the <Page> component. It was handled by the <DevOverlayErrorBoundary> error boundary.\"\n-      `)\n-      }\n     } else {\n-      if (process.env.TURBOPACK) {\n-        expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n-         \"%o\n-         %s Error: browser error\n-         at useThrowError \n-         at useErrorHook \n-         at Page \n-         at react-stack-bottom-frame \n-         at renderWithHooks \n-         at updateFunctionComponent \n-         at beginWork \n-         at runWithFiberInDEV \n-         at performUnitOfWork \n-         at workLoopSync \n-         at renderRootSync \n-         at performWorkOnRoot \n-         at performWorkOnRootViaSchedulerTask \n-         at MessagePort.performWorkUntilDeadline  The above error occurred in the <Page> component. It was handled by the <ReactDevOverlay> error boundary.\"\n-        `)\n-      } else {\n-        expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n+      expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n           \"%o\n           %s Error: browser error\n           at useThrowError \n@@ -149,9 +104,8 @@ describe('app-dir - owner-stack', () => {\n           at renderRootSync \n           at performWorkOnRoot \n           at performWorkOnRootViaSchedulerTask \n-          at MessagePort.performWorkUntilDeadline  The above error occurred in the <Page> component. It was handled by the <ReactDevOverlay> error boundary.\"\n+          at MessagePort.performWorkUntilDeadline  The above error occurred in the <Page> component. It was handled by the <DevOverlayErrorBoundary> error boundary.\"\n       `)\n-      }\n     }\n   })\n \n@@ -214,8 +168,7 @@ describe('app-dir - owner-stack', () => {\n       return log.message.includes('Error: ssr error')\n     }).message\n \n-    if (isNewDevOverlay) {\n-      expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n+    expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n        \"%o\n        %s Error: ssr error\n        at useThrowError \n@@ -233,26 +186,6 @@ describe('app-dir - owner-stack', () => {\n        at performWorkOnRootViaSchedulerTask \n        at MessagePort.performWorkUntilDeadline  The above error occurred in the <Page> component. It was handled by the <DevOverlayErrorBoundary> error boundary.\"\n       `)\n-    } else {\n-      expect(normalizeStackTrace(errorLog)).toMatchInlineSnapshot(`\n-       \"%o\n-       %s Error: ssr error\n-       at useThrowError \n-       at useErrorHook \n-       at Page \n-       at react-stack-bottom-frame \n-       at renderWithHooks \n-       at updateFunctionComponent \n-       at beginWork \n-       at runWithFiberInDEV \n-       at performUnitOfWork \n-       at workLoopSync \n-       at renderRootSync \n-       at performWorkOnRoot \n-       at performWorkOnRootViaSchedulerTask \n-       at MessagePort.performWorkUntilDeadline  The above error occurred in the <Page> component. It was handled by the <ReactDevOverlay> error boundary.\"\n-      `)\n-    }\n   })\n \n   it('should capture unhandled promise rejections', async () => {"
        },
        {
            "sha": "921dd3ac9d0be766a4a998feb24e59667aa42897",
            "filename": "test/development/app-dir/prerender-indicator/prerender-indicator.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 108,
            "changes": 108,
            "blob_url": "https://github.com/vercel/next.js/blob/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fprerender-indicator%2Fprerender-indicator.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c8ac0bdd609561e61a6839c5ef6124ee41b56889/test%2Fdevelopment%2Fapp-dir%2Fprerender-indicator%2Fprerender-indicator.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fprerender-indicator%2Fprerender-indicator.test.ts?ref=c8ac0bdd609561e61a6839c5ef6124ee41b56889",
            "patch": "@@ -1,108 +0,0 @@\n-import { nextTestSetup } from 'e2e-utils'\n-import { getRouteTypeFromDevToolsIndicator, retry } from 'next-test-utils'\n-import { BrowserInterface } from 'next-webdriver'\n-\n-describe('prerender indicator', () => {\n-  const { next } = nextTestSetup({\n-    files: __dirname,\n-  })\n-\n-  const isNewDevOverlay =\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n-  async function hasStaticIndicator(browser: BrowserInterface) {\n-    if (isNewDevOverlay) {\n-      const routeType = await getRouteTypeFromDevToolsIndicator(browser)\n-      console.log({ routeType })\n-      return routeType === 'Static'\n-    }\n-\n-    const staticIndicatorPresent = await browser.eval(() =>\n-      Boolean(\n-        document\n-          .querySelector('nextjs-portal')\n-          .shadowRoot.querySelector('.nextjs-static-indicator-toast-wrapper')\n-      )\n-    )\n-    return staticIndicatorPresent\n-  }\n-\n-  it('should have prerender-indicator by default for static page', async () => {\n-    const browser = await next.browser('/')\n-\n-    await retry(async () => {\n-      expect(await hasStaticIndicator(browser)).toBe(true)\n-    })\n-  })\n-\n-  it('should hide the indicator when changing to dynamic', async () => {\n-    const browser = await next.browser('/')\n-    const origContent = await next.readFile('app/page.tsx')\n-\n-    await next.patchFile(\n-      'app/page.tsx',\n-      origContent.replace('// headers()', 'headers()')\n-    )\n-\n-    try {\n-      await retry(async () => {\n-        expect(await hasStaticIndicator(browser)).toBe(false)\n-      })\n-    } finally {\n-      await next.patchFile('app/page.tsx', origContent)\n-    }\n-  })\n-\n-  it('should not have the indicator on dynamic page on load', async () => {\n-    const origContent = await next.readFile('app/page.tsx')\n-\n-    await next.patchFile(\n-      'app/page.tsx',\n-      origContent.replace('// headers()', 'headers()')\n-    )\n-\n-    const browser = await next.browser('/')\n-\n-    try {\n-      await retry(async () => {\n-        expect(await hasStaticIndicator(browser)).toBe(false)\n-      })\n-    } finally {\n-      await next.patchFile('app/page.tsx', origContent)\n-    }\n-  })\n-\n-  // TODO(jiwon): The new UI will always show the route type.\n-  if (!isNewDevOverlay) {\n-    it.skip('should not show the indicator if disabled in next.config', async () => {\n-      await next.stop()\n-\n-      await next.patchFile(\n-        'next.config.js',\n-        `\n-        module.exports = {\n-          devIndicators: {\n-            appIsrStatus: false\n-          }\n-        }\n-      `\n-      )\n-\n-      try {\n-        await next.start()\n-        const browser = await next.browser('/')\n-        expect(await hasStaticIndicator(browser)).toBe(false)\n-      } finally {\n-        await next.deleteFile('app/page.tsx')\n-      }\n-    })\n-  }\n-\n-  it('should not have static indicator when using force-dynamic', async () => {\n-    const browser = await next.browser('/force-dynamic')\n-\n-    await browser.waitForElementByCss('#ready')\n-\n-    expect(await hasStaticIndicator(browser)).toBe(false)\n-  })\n-})"
        },
        {
            "sha": "871edf551fbbae7ae68259dbaf41bd83c9c98971",
            "filename": "test/development/app-dir/serialize-circular-error/serialize-circular-error.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 10,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fserialize-circular-error%2Fserialize-circular-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fserialize-circular-error%2Fserialize-circular-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fserialize-circular-error%2Fserialize-circular-error.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -15,16 +15,9 @@ describe('serialize-circular-error', () => {\n     await assertHasRedbox(browser)\n \n     const description = await getRedboxDescription(browser)\n-    // React cannot serialize thrown objects with circular references\n-    if (process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true') {\n-      expect(description).toBe(\n-        `Error: An error occurred but serializing the error message failed.`\n-      )\n-    } else {\n-      expect(description).toBe(\n-        `[ Server ] Error: An error occurred but serializing the error message failed.`\n-      )\n-    }\n+    expect(description).toBe(\n+      `Error: An error occurred but serializing the error message failed.`\n+    )\n \n     const output = next.cliOutput\n     expect(output).toContain("
        },
        {
            "sha": "6e6d232b5312fdb70f079b1a13baa06e101678c4",
            "filename": "test/development/app-dir/server-component-next-dynamic-ssr-false/server-component-next-dynamic-ssr-false.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 41,
            "changes": 45,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -5,10 +5,6 @@ import {\n   getRedboxSource,\n } from 'next-test-utils'\n \n-// TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-const isNewDevOverlay =\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n describe('app-dir - server-component-next-dynamic-ssr-false', () => {\n   const { next } = nextTestSetup({\n     files: __dirname,\n@@ -24,10 +20,8 @@ describe('app-dir - server-component-next-dynamic-ssr-false', () => {\n \n     expect(redbox.description).toBe('Failed to compile')\n \n-    // TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-    if (isNewDevOverlay) {\n-      if (process.env.TURBOPACK) {\n-        expect(redbox.source).toMatchInlineSnapshot(`\n+    if (process.env.TURBOPACK) {\n+      expect(redbox.source).toMatchInlineSnapshot(`\n          \"./app/page.js (3:23)\n          Ecmascript file had an error\n            1 | import dynamic from 'next/dynamic'\n@@ -40,8 +34,8 @@ describe('app-dir - server-component-next-dynamic-ssr-false', () => {\n \n          \\`ssr: false\\` is not allowed with \\`next/dynamic\\` in Server Components. Please move it into a client component.\"\n         `)\n-      } else {\n-        expect(redbox.source).toMatchInlineSnapshot(`\n+    } else {\n+      expect(redbox.source).toMatchInlineSnapshot(`\n          \"./app/page.js\n          Error:   x \\`ssr: false\\` is not allowed with \\`next/dynamic\\` in Server Components. Please move it into a client component.\n             ,-[3:1]\n@@ -54,37 +48,6 @@ describe('app-dir - server-component-next-dynamic-ssr-false', () => {\n           6 |   return <DynamicClient />\n             \\`----\"\n         `)\n-      }\n-    } else {\n-      if (process.env.TURBOPACK) {\n-        expect(redbox.source).toMatchInlineSnapshot(`\n-         \"./app/page.js (3:23)\n-         Ecmascript file had an error\n-           1 | import dynamic from 'next/dynamic'\n-           2 |\n-         > 3 | const DynamicClient = dynamic(() => import('./client'), { ssr: false })\n-             |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-           4 |\n-           5 | export default function Page() {\n-           6 |   return <DynamicClient />\n-\n-         \\`ssr: false\\` is not allowed with \\`next/dynamic\\` in Server Components. Please move it into a client component.\"\n-        `)\n-      } else {\n-        expect(redbox.source).toMatchInlineSnapshot(`\n-                 \"./app/page.js\n-                 Error:   x \\`ssr: false\\` is not allowed with \\`next/dynamic\\` in Server Components. Please move it into a client component.\n-                    ,-[3:1]\n-                  1 | import dynamic from 'next/dynamic'\n-                  2 | \n-                  3 | const DynamicClient = dynamic(() => import('./client'), { ssr: false })\n-                    :                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-                  4 | \n-                  5 | export default function Page() {\n-                  6 |   return <DynamicClient />\n-                    \\`----\"\n-              `)\n-      }\n     }\n   })\n })"
        },
        {
            "sha": "2897be7cd8d2bb74d2b1ad96a5c772c27cb251d1",
            "filename": "test/development/app-dir/ssr-in-rsc/ssr-in-rsc.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 31,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -7,8 +7,6 @@ import {\n   getRedboxSource,\n } from 'next-test-utils'\n \n-const isNewDevOverlay =\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n const isReactExperimental = process.env.__NEXT_EXPERIMENTAL_PPR === 'true'\n \n const isReact18 = parseInt(process.env.NEXT_TEST_REACT_VERSION) === 18\n@@ -396,9 +394,7 @@ describe('react-dom/server in React Server environment', () => {\n        }\n       `)\n     } else {\n-      // TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-      if (isNewDevOverlay) {\n-        expect(redbox).toMatchInlineSnapshot(`\n+      expect(redbox).toMatchInlineSnapshot(`\n          {\n            \"description\": \"Failed to compile\",\n            \"source\": \"./app/exports/app-code/react-dom-server-node-implicit/page.js\n@@ -422,32 +418,6 @@ describe('react-dom/server in React Server environment', () => {\n             \\`----\",\n          }\n         `)\n-      } else {\n-        expect(redbox).toMatchInlineSnapshot(`\n-                 {\n-                   \"description\": \"Failed to compile\",\n-                   \"source\": \"./app/exports/app-code/react-dom-server-node-implicit/page.js\n-                 Error:   x You're importing a component that imports react-dom/server. To fix it, render or return the content directly as a Server Component instead for perf and security.\n-                   | Learn more: https://nextjs.org/docs/app/building-your-application/rendering\n-                    ,-[1:1]\n-                  1 | import * as ReactDOMServerNode from 'react-dom/server'\n-                    : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-                  2 | // Fine to drop once React is on ESM\n-                  3 | import ReactDOMServerNodeDefault from 'react-dom/server'\n-                    \\`----\n-                   x You're importing a component that imports react-dom/server. To fix it, render or return the content directly as a Server Component instead for perf and security.\n-                   | Learn more: https://nextjs.org/docs/app/building-your-application/rendering\n-                    ,-[3:1]\n-                  1 | import * as ReactDOMServerNode from 'react-dom/server'\n-                  2 | // Fine to drop once React is on ESM\n-                  3 | import ReactDOMServerNodeDefault from 'react-dom/server'\n-                    : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-                  4 | \n-                  5 | export const runtime = 'nodejs'\n-                    \\`----\",\n-                 }\n-              `)\n-      }\n     }\n   })\n "
        },
        {
            "sha": "503836c43b3a0c11d807b12b7e51ce646a4857d7",
            "filename": "test/development/basic/gssp-ssr-change-reloading/test/index.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 18,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fgssp-ssr-change-reloading%2Ftest%2Findex.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -11,13 +11,8 @@ import {\n } from 'next-test-utils'\n import { NextInstance } from 'e2e-utils'\n \n-// TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-const isNewDevOverlay =\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n const installCheckVisible = (browser) => {\n-  if (isNewDevOverlay) {\n-    return browser.eval(`(function() {\n+  return browser.eval(`(function() {\n       window.checkInterval = setInterval(function() {\n       const root = document.querySelector('nextjs-portal').shadowRoot;\n       const indicator = root.querySelector('[data-next-mark]')\n@@ -27,18 +22,6 @@ const installCheckVisible = (browser) => {\n       if (window.showedBuilder) clearInterval(window.checkInterval)\n     }, 50)\n   })()`)\n-  } else {\n-    return browser.eval(`(function() {\n-      window.checkInterval = setInterval(function() {\n-      let watcherDiv = document.querySelector('#__next-build-indicator')\n-      watcherDiv = watcherDiv.shadowRoot || watcherDiv\n-      window.showedBuilder = window.showedBuilder || (\n-        watcherDiv.querySelector('div').className.indexOf('visible') > -1\n-      )\n-      if (window.showedBuilder) clearInterval(window.checkInterval)\n-    }, 50)\n-  })()`)\n-  }\n }\n \n describe('GS(S)P Server-Side Change Reloading', () => {"
        },
        {
            "sha": "b3d53008b3425353df99cb27708f63042b22407d",
            "filename": "test/e2e/app-dir/error-on-next-codemod-comment/error-on-next-codemod-comment.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 41,
            "changes": 45,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Ferror-on-next-codemod-comment%2Ferror-on-next-codemod-comment.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Ferror-on-next-codemod-comment%2Ferror-on-next-codemod-comment.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Ferror-on-next-codemod-comment%2Ferror-on-next-codemod-comment.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -13,9 +13,6 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n     skipDeployment: true,\n   })\n \n-  const isNewDevOverlay =\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n   if (isNextDev) {\n     beforeAll(async () => {\n       await next.start()\n@@ -26,10 +23,8 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n \n       await assertHasRedbox(browser)\n \n-      // TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-      if (isNewDevOverlay) {\n-        if (process.env.TURBOPACK) {\n-          expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n+      if (process.env.TURBOPACK) {\n+        expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n            \"./app/page.tsx (2:2)\n            Ecmascript file had an error\n              1 | export default function Page() {\n@@ -42,8 +37,8 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n            You have an unresolved @next/codemod comment \"remove jsx of next line\" that needs review.\n            After review, either remove the comment if you made the necessary changes or replace \"@next-codemod-error\" with \"@next-codemod-ignore\" to bypass the build error if no action at this line can be taken.\"\n           `)\n-        } else {\n-          expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n+      } else {\n+        expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n            \"./app/page.tsx\n            Error:   x You have an unresolved @next/codemod comment \"remove jsx of next line\" that needs review.\n              | After review, either remove the comment if you made the necessary changes or replace \"@next-codemod-error\" with \"@next-codemod-ignore\" to bypass the build error if no action at this line can\n@@ -57,38 +52,6 @@ describe('app-dir - error-on-next-codemod-comment', () => {\n             4 | }\n               \\`----\"\n           `)\n-        }\n-      } else {\n-        if (process.env.TURBOPACK) {\n-          expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n-           \"./app/page.tsx (2:2)\n-           Ecmascript file had an error\n-             1 | export default function Page() {\n-           > 2 |   // @next-codemod-error remove jsx of next line\n-               |  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-             3 |   return <p>hello world</p>\n-             4 | }\n-             5 |\n-\n-           You have an unresolved @next/codemod comment \"remove jsx of next line\" that needs review.\n-           After review, either remove the comment if you made the necessary changes or replace \"@next-codemod-error\" with \"@next-codemod-ignore\" to bypass the build error if no action at this line can be taken.\"\n-          `)\n-        } else {\n-          expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n-                     \"./app/page.tsx\n-                     Error:   x You have an unresolved @next/codemod comment \"remove jsx of next line\" that needs review.\n-                       | After review, either remove the comment if you made the necessary changes or replace \"@next-codemod-error\" with \"@next-codemod-ignore\" to bypass the build error if no action at this line can\n-                       | be taken.\n-                       | \n-                        ,-[2:1]\n-                      1 | export default function Page() {\n-                      2 |   // @next-codemod-error remove jsx of next line\n-                        :  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-                      3 |   return <p>hello world</p>\n-                      4 | }\n-                        \\`----\"\n-                  `)\n-        }\n       }\n     })\n "
        },
        {
            "sha": "4f1dc497cf320a7a553b600050257a1bfce3b659",
            "filename": "test/e2e/app-dir/global-error/basic/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 17,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Fbasic%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Fbasic%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Fbasic%2Findex.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -6,9 +6,6 @@ describe('app dir - global error', () => {\n     files: __dirname,\n   })\n \n-  const isNewOverlay =\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n   it('should trigger error component when an error happens during rendering', async () => {\n     const browser = await next.browser('/client')\n     await browser\n@@ -33,13 +30,7 @@ describe('app dir - global error', () => {\n     if (isNextDev) {\n       await assertHasRedbox(browser)\n       const description = await getRedboxDescription(browser)\n-      if (isNewOverlay) {\n-        expect(description).toMatchInlineSnapshot(`\"Error: server page error\"`)\n-      } else {\n-        expect(description).toMatchInlineSnapshot(\n-          `\"[ Server ] Error: server page error\"`\n-        )\n-      }\n+      expect(description).toMatchInlineSnapshot(`\"Error: server page error\"`)\n     }\n     // Show original error message in dev mode, but hide with the react fallback RSC error message in production mode\n     expect(await browser.elementByCss('#error').text()).toBe(\n@@ -81,13 +72,7 @@ describe('app dir - global error', () => {\n     if (isNextDev) {\n       await assertHasRedbox(browser)\n       const description = await getRedboxDescription(browser)\n-      if (isNewOverlay) {\n-        expect(description).toMatchInlineSnapshot(`\"Error: Metadata error\"`)\n-      } else {\n-        expect(description).toMatchInlineSnapshot(\n-          `\"[ Server ] Error: Metadata error\"`\n-        )\n-      }\n+      expect(description).toMatchInlineSnapshot(`\"Error: Metadata error\"`)\n     }\n     expect(await browser.elementByCss('h1').text()).toBe('Global Error')\n     expect(await browser.elementByCss('#error').text()).toBe("
        },
        {
            "sha": "536d0d9c696efdae61b0dcd22f9ea8659907513f",
            "filename": "test/e2e/app-dir/global-error/layout-error/index.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 7,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Flayout-error%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Flayout-error%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fglobal-error%2Flayout-error%2Findex.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -17,13 +17,7 @@ describe('app dir - global error - layout error', () => {\n     if (isNextDev) {\n       await assertHasRedbox(browser)\n       const description = await getRedboxDescription(browser)\n-      if (process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true') {\n-        expect(description).toMatchInlineSnapshot(`\"Error: layout error\"`)\n-      } else {\n-        expect(description).toMatchInlineSnapshot(\n-          `\"[ Server ] Error: layout error\"`\n-        )\n-      }\n+      expect(description).toMatchInlineSnapshot(`\"Error: layout error\"`)\n     }\n \n     expect(await browser.elementByCss('h1').text()).toBe('Global Error')"
        },
        {
            "sha": "29ed7adc75a25392ea609f5d85a62dc7f9247f23",
            "filename": "test/e2e/app-dir/use-cache-close-over-function/use-cache-close-over-function.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 21,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fuse-cache-close-over-function.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fuse-cache-close-over-function.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fuse-cache-close-over-function.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -18,9 +18,6 @@ describe('use-cache-close-over-function', () => {\n     return\n   }\n \n-  const isNewOverlay =\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n   if (isNextDev) {\n     it('should show an error toast for client-side usage', async () => {\n       const outputIndex = next.cliOutput.length\n@@ -31,19 +28,11 @@ describe('use-cache-close-over-function', () => {\n       const errorDescription = await getRedboxDescription(browser)\n       const errorSource = await getRedboxSource(browser)\n \n-      if (isNewOverlay) {\n-        expect(errorDescription).toMatchInlineSnapshot(`\n+      expect(errorDescription).toMatchInlineSnapshot(`\n         \"Error: Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with \"use server\". Or maybe you meant to call this function rather than return it.\n           [function fn]\n            ^^^^^^^^^^^\"\n       `)\n-      } else {\n-        expect(errorDescription).toMatchInlineSnapshot(`\n-        \"[ Prerender ] Error: Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with \"use server\". Or maybe you meant to call this function rather than return it.\n-          [function fn]\n-           ^^^^^^^^^^^\"\n-      `)\n-      }\n \n       expect(errorSource).toMatchInlineSnapshot(`\n         \"app/client/page.tsx (8:3) @ createCachedFn\n@@ -97,19 +86,11 @@ describe('use-cache-close-over-function', () => {\n       const errorDescription = await getRedboxDescription(browser)\n       const errorSource = await getRedboxSource(browser)\n \n-      if (isNewOverlay) {\n-        expect(errorDescription).toMatchInlineSnapshot(`\n+      expect(errorDescription).toMatchInlineSnapshot(`\n         \"Error: Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with \"use server\". Or maybe you meant to call this function rather than return it.\n           [function fn]\n            ^^^^^^^^^^^\"\n       `)\n-      } else {\n-        expect(errorDescription).toMatchInlineSnapshot(`\n-        \"[ Prerender ] Error: Functions cannot be passed directly to Client Components unless you explicitly expose it by marking it with \"use server\". Or maybe you meant to call this function rather than return it.\n-          [function fn]\n-           ^^^^^^^^^^^\"\n-      `)\n-      }\n \n       expect(errorSource).toMatchInlineSnapshot(`\n         \"app/server/page.tsx (6:3) @ createCachedFn"
        },
        {
            "sha": "7c26066110f2884f6bbc74d6ec8338f8ff6edc2b",
            "filename": "test/e2e/app-dir/use-cache-hanging-inputs/use-cache-hanging-inputs.test.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 42,
            "changes": 52,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fuse-cache-hanging-inputs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fuse-cache-hanging-inputs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fuse-cache-hanging-inputs.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -11,8 +11,6 @@ import {\n import stripAnsi from 'strip-ansi'\n \n const isExperimentalReact = process.env.__NEXT_EXPERIMENTAL_PPR\n-const isNewDevOverlay =\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n \n const expectedErrorMessage =\n   'Error: Filling a cache during prerender timed out, likely because request-specific arguments such as params, searchParams, cookies() or dynamic data were used inside \"use cache\".'\n@@ -43,11 +41,7 @@ describe('use-cache-hanging-inputs', () => {\n         const errorDescription = await getRedboxDescription(browser)\n         const errorSource = await getRedboxSource(browser)\n \n-        if (isNewDevOverlay) {\n-          expect(errorDescription).toBe(expectedErrorMessage)\n-        } else {\n-          expect(errorDescription).toBe(`[ Cache ] ${expectedErrorMessage}`)\n-        }\n+        expect(errorDescription).toBe(expectedErrorMessage)\n \n         const cliOutput = stripAnsi(next.cliOutput.slice(outputIndex))\n \n@@ -106,11 +100,7 @@ describe('use-cache-hanging-inputs', () => {\n         const errorDescription = await getRedboxDescription(browser)\n         const errorSource = await getRedboxSource(browser)\n \n-        if (isNewDevOverlay) {\n-          expect(errorDescription).toBe(expectedErrorMessage)\n-        } else {\n-          expect(errorDescription).toBe(`[ Cache ] ${expectedErrorMessage}`)\n-        }\n+        expect(errorDescription).toBe(expectedErrorMessage)\n \n         const cliOutput = stripAnsi(next.cliOutput.slice(outputIndex))\n \n@@ -156,11 +146,7 @@ describe('use-cache-hanging-inputs', () => {\n         const errorDescription = await getRedboxDescription(browser)\n         const errorSource = await getRedboxSource(browser)\n \n-        if (isNewDevOverlay) {\n-          expect(errorDescription).toBe(expectedErrorMessage)\n-        } else {\n-          expect(errorDescription).toBe(`[ Cache ] ${expectedErrorMessage}`)\n-        }\n+        expect(errorDescription).toBe(expectedErrorMessage)\n \n         const cliOutput = stripAnsi(next.cliOutput.slice(outputIndex))\n \n@@ -217,24 +203,14 @@ describe('use-cache-hanging-inputs', () => {\n           const expectedErrorMessagePpr =\n             'Error: Route \"/bound-args\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it. We don\\'t have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense'\n \n-          if (isNewDevOverlay) {\n-            expect(errorDescription).toBe(expectedErrorMessagePpr)\n-          } else {\n-            expect(errorDescription).toBe(\n-              `[ Server ] ${expectedErrorMessagePpr}`\n-            )\n-          }\n+          expect(errorDescription).toBe(expectedErrorMessagePpr)\n \n           expect(cliOutput).toContain(\n             `${expectedErrorMessagePpr}\n     at Page [Server] (<anonymous>)`\n           )\n         } else {\n-          if (isNewDevOverlay) {\n-            expect(errorDescription).toBe(expectedErrorMessage)\n-          } else {\n-            expect(errorDescription).toBe(`[ Cache ] ${expectedErrorMessage}`)\n-          }\n+          expect(errorDescription).toBe(expectedErrorMessage)\n \n           if (isTurbopack) {\n             // TODO(veil): For Turbopack, a fix in the React Flight Client, where\n@@ -275,19 +251,11 @@ describe('use-cache-hanging-inputs', () => {\n         const title = await getRedboxTitle(browser)\n         const description = await getRedboxDescription(browser)\n \n-        if (isNewDevOverlay) {\n-          expect({ count, title, description }).toEqual({\n-            count: 1,\n-            title: 'Unhandled Runtime Error\\nCache',\n-            description: 'Error: kaputt!',\n-          })\n-        } else {\n-          expect({ count, title, description }).toEqual({\n-            count: 1,\n-            title: 'Unhandled Runtime Error',\n-            description: '[ Cache ] Error: kaputt!',\n-          })\n-        }\n+        expect({ count, title, description }).toEqual({\n+          count: 1,\n+          title: 'Unhandled Runtime Error\\nCache',\n+          description: 'Error: kaputt!',\n+        })\n       })\n     })\n   } else {"
        },
        {
            "sha": "408211b5cfb270176b310e4e02254fb05594f066",
            "filename": "test/e2e/app-dir/use-cache-standalone-search-params/use-cache-standalone-search-params.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-standalone-search-params%2Fuse-cache-standalone-search-params.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-standalone-search-params%2Fuse-cache-standalone-search-params.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-standalone-search-params%2Fuse-cache-standalone-search-params.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -39,11 +39,7 @@ describe('use-cache-standalone-search-params', () => {\n         const errorSource = await getRedboxSource(browser)\n         const expectedErrorMessage = getExpectedErrorMessage(route)\n \n-        if (process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true') {\n-          expect(errorDescription).toBe(expectedErrorMessage)\n-        } else {\n-          expect(errorDescription).toBe(`[ Cache ] ${expectedErrorMessage}`)\n-        }\n+        expect(errorDescription).toBe(expectedErrorMessage)\n \n         const cliOutput = stripAnsi(next.cliOutput.slice(outputIndex))\n "
        },
        {
            "sha": "3348c36215686724f038600ec813aa5503f8fbe5",
            "filename": "test/e2e/app-dir/use-cache-unknown-cache-kind/use-cache-unknown-cache-kind.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 37,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -30,9 +30,6 @@ describe('use-cache-unknown-cache-kind', () => {\n     return\n   }\n \n-  const isNewDevOverlay =\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n   if (isNextStart) {\n     beforeAll(async () => {\n       await next.build()\n@@ -105,10 +102,8 @@ describe('use-cache-unknown-cache-kind', () => {\n \n       expect(errorDescription).toBe('Failed to compile')\n \n-      // TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-      if (isNewDevOverlay) {\n-        if (isTurbopack) {\n-          expect(errorSource).toMatchInlineSnapshot(`\n+      if (isTurbopack) {\n+        expect(errorSource).toMatchInlineSnapshot(`\n            \"./app/page.tsx (1:1)\n            Ecmascript file had an error\n            > 1 | 'use cache: custom'\n@@ -119,8 +114,8 @@ describe('use-cache-unknown-cache-kind', () => {\n \n            Unknown cache kind \"custom\". Please configure a cache handler for this kind in the \"experimental.cacheHandlers\" object in your Next.js config.\"\n           `)\n-        } else {\n-          expect(errorSource).toMatchInlineSnapshot(`\n+      } else {\n+        expect(errorSource).toMatchInlineSnapshot(`\n            \"./app/page.tsx\n            Error:   x Unknown cache kind \"custom\". Please configure a cache handler for this kind in the \"experimental.cacheHandlers\" object in your Next.js config.\n              | \n@@ -132,34 +127,6 @@ describe('use-cache-unknown-cache-kind', () => {\n             4 |   return <p>hello world</p>\n               \\`----\"\n           `)\n-        }\n-      } else {\n-        if (isTurbopack) {\n-          expect(errorSource).toMatchInlineSnapshot(`\n-           \"./app/page.tsx (1:1)\n-           Ecmascript file had an error\n-           > 1 | 'use cache: custom'\n-               | ^^^^^^^^^^^^^^^^^^^\n-             2 |\n-             3 | export default async function Page() {\n-             4 |   return <p>hello world</p>\n-\n-           Unknown cache kind \"custom\". Please configure a cache handler for this kind in the \"experimental.cacheHandlers\" object in your Next.js config.\"\n-          `)\n-        } else {\n-          expect(errorSource).toMatchInlineSnapshot(`\n-            \"./app/page.tsx\n-            Error:   x Unknown cache kind \"custom\". Please configure a cache handler for this kind in the \"experimental.cacheHandlers\" object in your Next.js config.\n-              | \n-               ,-[1:1]\n-             1 | 'use cache: custom'\n-               : ^^^^^^^^^^^^^^^^^^^\n-             2 | \n-             3 | export default async function Page() {\n-             4 |   return <p>hello world</p>\n-               \\`----\"\n-          `)\n-        }\n       }\n     })\n "
        },
        {
            "sha": "afda38fd03d871e943fd7b3f66b10549dd297ec5",
            "filename": "test/e2e/app-dir/use-cache-without-experimental-flag/use-cache-without-experimental-flag.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 40,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -24,9 +24,6 @@ describe('use-cache-without-experimental-flag', () => {\n     return\n   }\n \n-  const isNewDevOverlay =\n-    process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n   if (isNextStart) {\n     it('should fail the build with an error', async () => {\n       const { cliOutput } = await next.build()\n@@ -89,10 +86,8 @@ describe('use-cache-without-experimental-flag', () => {\n \n       expect(errorDescription).toBe('Failed to compile')\n \n-      // TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-      if (isNewDevOverlay) {\n-        if (isTurbopack) {\n-          expect(errorSource).toMatchInlineSnapshot(`\n+      if (isTurbopack) {\n+        expect(errorSource).toMatchInlineSnapshot(`\n            \"./app/page.tsx (1:1)\n            Ecmascript file had an error\n            > 1 | 'use cache'\n@@ -105,39 +100,8 @@ describe('use-cache-without-experimental-flag', () => {\n \n            Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\"\n           `)\n-        } else {\n-          expect(errorSource).toMatchInlineSnapshot(`\n-           \"./app/page.tsx\n-           Error:   x To use \"use cache\", please enable the experimental feature flag \"useCache\" in your Next.js config.\n-             | \n-             | Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n-             | \n-              ,-[1:1]\n-            1 | 'use cache'\n-              : ^^^^^^^^^^^\n-            2 | \n-            3 | export default async function Page() {\n-            4 |   return <p>hello world</p>\n-              \\`----\"\n-          `)\n-        }\n       } else {\n-        if (isTurbopack) {\n-          expect(errorSource).toMatchInlineSnapshot(`\n-           \"./app/page.tsx (1:1)\n-           Ecmascript file had an error\n-           > 1 | 'use cache'\n-               | ^^^^^^^^^^^\n-             2 |\n-             3 | export default async function Page() {\n-             4 |   return <p>hello world</p>\n-\n-           To use \"use cache\", please enable the experimental feature flag \"useCache\" in your Next.js config.\n-\n-           Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\"\n-          `)\n-        } else {\n-          expect(errorSource).toMatchInlineSnapshot(`\n+        expect(errorSource).toMatchInlineSnapshot(`\n            \"./app/page.tsx\n            Error:   x To use \"use cache\", please enable the experimental feature flag \"useCache\" in your Next.js config.\n              | \n@@ -151,7 +115,6 @@ describe('use-cache-without-experimental-flag', () => {\n             4 |   return <p>hello world</p>\n               \\`----\"\n           `)\n-        }\n       }\n     })\n "
        },
        {
            "sha": "3dd8ae479c0300d382c00f46d7eb7dffcd2bb128",
            "filename": "test/integration/build-indicator/test/index.test.js",
            "status": "modified",
            "additions": 1,
            "deletions": 63,
            "changes": 64,
            "blob_url": "https://github.com/vercel/next.js/blob/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fintegration%2Fbuild-indicator%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a89d55c0117e177fc43c71070b8b7be4a5e29602/test%2Fintegration%2Fbuild-indicator%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fbuild-indicator%2Ftest%2Findex.test.js?ref=a89d55c0117e177fc43c71070b8b7be4a5e29602",
            "patch": "@@ -11,13 +11,8 @@ const nextConfig = join(appDir, 'next.config.js')\n let appPort\n let app\n \n-// TODO(new-dev-overlay): Remove this once old dev overlay fork is removed\n-const isNewDevOverlay =\n-  process.env.__NEXT_EXPERIMENTAL_NEW_DEV_OVERLAY === 'true'\n-\n const installCheckVisible = (browser) => {\n-  if (isNewDevOverlay) {\n-    return browser.eval(`(function() {\n+  return browser.eval(`(function() {\n       window.checkInterval = setInterval(function() {\n       const root = document.querySelector('nextjs-portal').shadowRoot;\n       const indicator = root.querySelector('[data-next-mark]')\n@@ -27,18 +22,6 @@ const installCheckVisible = (browser) => {\n       if (window.showedBuilder) clearInterval(window.checkInterval)\n     }, 5)\n   })()`)\n-  } else {\n-    return browser.eval(`(function() {\n-      window.checkInterval = setInterval(function() {\n-      let watcherDiv = document.querySelector('#__next-build-indicator')\n-      watcherDiv = watcherDiv.shadowRoot || watcherDiv\n-      window.showedBuilder = window.showedBuilder || (\n-        watcherDiv.querySelector('div').className.indexOf('visible') > -1\n-      )\n-      if (window.showedBuilder) clearInterval(window.checkInterval)\n-    }, 5)\n-  })()`)\n-  }\n }\n \n describe('Build Activity Indicator', () => {\n@@ -83,21 +66,6 @@ describe('Build Activity Indicator', () => {\n       app = await launchApp(appDir, appPort)\n     })\n     afterAll(() => killApp(app))\n-\n-    // The indicator has no special container in the new dev overlay -\n-    // it's rendered as part of the indicator logo\n-    if (!isNewDevOverlay) {\n-      it('Adds the build indicator container', async () => {\n-        const browser = await webdriver(\n-          appPort,\n-          pagesOrApp === 'pages' ? '/' : '/app'\n-        )\n-        const html = await browser.eval('document.body.innerHTML')\n-        expect(html).toMatch(/__next-build-indicator/)\n-        await browser.close()\n-      })\n-    }\n-\n     ;(process.env.TURBOPACK ? describe.skip : describe)('webpack only', () => {\n       it('Shows the build indicator when a page is built during navigation', async () => {\n         const browser = await webdriver(\n@@ -135,34 +103,4 @@ describe('Build Activity Indicator', () => {\n       await browser.close()\n     })\n   })\n-\n-  describe.each(['pages', 'app'])(\n-    'Disabled with next.config.js - (%s)',\n-    (pagesOrApp) => {\n-      beforeAll(async () => {\n-        await fs.writeFile(\n-          nextConfig,\n-          'module.exports = { devIndicators: { buildActivity: false } }',\n-          'utf8'\n-        )\n-        appPort = await findPort()\n-        app = await launchApp(appDir, appPort)\n-      })\n-\n-      afterAll(async () => {\n-        await killApp(app)\n-        await fs.remove(nextConfig)\n-      })\n-\n-      it('Does not add the build indicator container', async () => {\n-        const browser = await webdriver(\n-          appPort,\n-          pagesOrApp === 'pages' ? '/' : '/app'\n-        )\n-        const html = await browser.eval('document.body.innerHTML')\n-        expect(html).not.toMatch(/__next-build-indicator/)\n-        await browser.close()\n-      })\n-    }\n-  )\n })"
        }
    ],
    "stats": {
        "total": 1502,
        "additions": 168,
        "deletions": 1334
    }
}