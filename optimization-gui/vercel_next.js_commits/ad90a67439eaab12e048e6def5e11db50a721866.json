{
    "author": "eps1lon",
    "message": "[test] Assert on stable error codes (#84671)\n\nFixes\n```\nDevErrorOverlay â€º sends feedback when clicking not helpful button\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 1\n\n      Array [\n    -   \"/__nextjs_error_feedback?errorCode=E794&wasHelpful=false\",\n    +   \"/__nextjs_error_feedback?errorCode=E209&wasHelpful=false\",\n      ]\n```\n\n--\nhttps://github.com/vercel/next.js/actions/runs/18360913450/job/52306369449#step:34:793",
    "sha": "ad90a67439eaab12e048e6def5e11db50a721866",
    "files": [
        {
            "sha": "c34be078e652c6f2eaa84c082e36333f882ec02c",
            "filename": "test/development/error-overlay/app/known-client-error/page.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 10,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/ad90a67439eaab12e048e6def5e11db50a721866/test%2Fdevelopment%2Ferror-overlay%2Fapp%2Fknown-client-error%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ad90a67439eaab12e048e6def5e11db50a721866/test%2Fdevelopment%2Ferror-overlay%2Fapp%2Fknown-client-error%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Ferror-overlay%2Fapp%2Fknown-client-error%2Fpage.tsx?ref=ad90a67439eaab12e048e6def5e11db50a721866",
            "patch": "@@ -1,23 +1,18 @@\n 'use client'\n \n-import Link from 'next/link'\n import React from 'react'\n \n export default function Page() {\n-  const broken = (\n-    <>\n-      <Link href=\"/invalid\" as=\"mailto:john@example.com\">\n-        <a>Invalid link</a>\n-      </Link>\n-    </>\n-  )\n-\n   const [shouldShow, setShouldShow] = React.useState(false)\n+  if (shouldShow) {\n+    const error = new Error('Client error!')\n+    ;(error as any).__NEXT_ERROR_CODE = 'E40'\n+    throw error\n+  }\n \n   return (\n     <div>\n       <button onClick={() => setShouldShow(true)}>break on client</button>\n-      {shouldShow && broken}\n     </div>\n   )\n }"
        },
        {
            "sha": "9a5b911044b25aaf261057283a201b073aeadf83",
            "filename": "test/development/error-overlay/app/known-rsc-error/page.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 9,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/ad90a67439eaab12e048e6def5e11db50a721866/test%2Fdevelopment%2Ferror-overlay%2Fapp%2Fknown-rsc-error%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ad90a67439eaab12e048e6def5e11db50a721866/test%2Fdevelopment%2Ferror-overlay%2Fapp%2Fknown-rsc-error%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Ferror-overlay%2Fapp%2Fknown-rsc-error%2Fpage.tsx?ref=ad90a67439eaab12e048e6def5e11db50a721866",
            "patch": "@@ -1,12 +1,7 @@\n-import { unstable_cache } from 'next/cache'\n-import { headers } from 'next/headers'\n-import React from 'react'\n-\n export default async function Page() {\n-  const getData = unstable_cache(async () => {\n-    const h = await headers()\n-    return h.get('x-test-header')\n-  }, ['test-header-key'])\n+  const error = new Error('Client error!')\n+  ;(error as any).__NEXT_ERROR_CODE = 'E40'\n+  throw error\n \n-  return <div>{await getData()}</div>\n+  return null\n }"
        },
        {
            "sha": "ed6c2a123fcb5e2fa972ad576bb7a9d338ba8894",
            "filename": "test/development/error-overlay/index.test.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/ad90a67439eaab12e048e6def5e11db50a721866/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ad90a67439eaab12e048e6def5e11db50a721866/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx?ref=ad90a67439eaab12e048e6def5e11db50a721866",
            "patch": "@@ -14,7 +14,7 @@ describe('DevErrorOverlay', () => {\n \n     const errorCode = await browser.elementByCss('[data-nextjs-error-code]')\n     const code = await errorCode.getAttribute('data-nextjs-error-code')\n-    expect(code).toBe('E838')\n+    expect(code).toBe('E40')\n   })\n \n   it('sends feedback when clicking helpful button', async () => {\n@@ -41,7 +41,7 @@ describe('DevErrorOverlay', () => {\n           .textContent()\n       ).toEqual('Thanks for your feedback!')\n       expect(feedbackRequests).toEqual([\n-        '/__nextjs_error_feedback?errorCode=E794&wasHelpful=true',\n+        '/__nextjs_error_feedback?errorCode=E40&wasHelpful=true',\n       ])\n     })\n   })\n@@ -70,7 +70,7 @@ describe('DevErrorOverlay', () => {\n           .textContent()\n       ).toEqual('Thanks for your feedback!')\n       expect(feedbackRequests).toEqual([\n-        '/__nextjs_error_feedback?errorCode=E794&wasHelpful=false',\n+        '/__nextjs_error_feedback?errorCode=E40&wasHelpful=false',\n       ])\n     })\n   })"
        }
    ],
    "stats": {
        "total": 34,
        "additions": 12,
        "deletions": 22
    }
}