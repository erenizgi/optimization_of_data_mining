{
    "author": "wbinnssmith",
    "message": "Turbopack: Make `turbo-tasks` crate Rust 2024 (#79127)\n\nMarked `extern` blocks as `unsafe extern`",
    "sha": "47689a6e2552328cf90a2d1f14573d006868f197",
    "files": [
        {
            "sha": "fa0eadb82915068a113f930b753571de137c41b9",
            "filename": "turbopack/crates/turbo-tasks/Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2FCargo.toml?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -3,7 +3,7 @@ name = \"turbo-tasks\"\n version = \"0.1.0\"\n description = \"TBD\"\n license = \"MIT\"\n-edition = \"2021\"\n+edition = \"2024\"\n \n [lib]\n bench = false"
        },
        {
            "sha": "5a573d78c40824bedea1b249b726b5572930f381",
            "filename": "turbopack/crates/turbo-tasks/src/backend.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fbackend.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fbackend.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fbackend.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -7,13 +7,15 @@ use std::{\n     time::Duration,\n };\n \n-use anyhow::{anyhow, Result};\n+use anyhow::{Result, anyhow};\n use auto_hash_map::AutoMap;\n use rustc_hash::FxHasher;\n use tracing::Span;\n \n pub use crate::id::BackendJobId;\n use crate::{\n+    FunctionId, RawVc, ReadCellOptions, ReadRef, SharedReference, TaskId, TaskIdSet, TraitRef,\n+    TraitTypeId, ValueTypeId, VcRead, VcValueTrait, VcValueType,\n     event::EventListener,\n     magic_any::MagicAny,\n     manager::{ReadConsistency, TurboTasksBackendApi},\n@@ -22,8 +24,6 @@ use crate::{\n     task::shared_reference::TypedSharedReference,\n     task_statistics::TaskStatisticsApi,\n     triomphe_utils::unchecked_sidecast_triomphe_arc,\n-    FunctionId, RawVc, ReadCellOptions, ReadRef, SharedReference, TaskId, TaskIdSet, TraitRef,\n-    TraitTypeId, ValueTypeId, VcRead, VcValueTrait, VcValueType,\n };\n \n pub type TransientTaskRoot =\n@@ -104,9 +104,9 @@ mod ser {\n     use std::any::Any;\n \n     use serde::{\n+        Deserialize, Deserializer, Serialize, Serializer,\n         de::{self},\n         ser::{SerializeSeq, SerializeTuple},\n-        Deserialize, Deserializer, Serialize, Serializer,\n     };\n \n     use super::*;\n@@ -117,7 +117,7 @@ mod ser {\n             S: Serializer,\n         {\n             let value_type = registry::get_value_type(self.0);\n-            let serializable = if let Some(value) = &self.1 .0 {\n+            let serializable = if let Some(value) = &self.1.0 {\n                 value_type.any_as_serializable(&value.0)\n             } else {\n                 None\n@@ -314,7 +314,7 @@ impl Display for CellContent {\n \n impl TypedCellContent {\n     pub fn cast<T: VcValueType>(self) -> Result<ReadRef<T>> {\n-        let data = self.1 .0.ok_or_else(|| anyhow!(\"Cell is empty\"))?;\n+        let data = self.1.0.ok_or_else(|| anyhow!(\"Cell is empty\"))?;\n         let data = data\n             .downcast::<<T::Read as VcRead<T>>::Repr>()\n             .map_err(|_err| anyhow!(\"Unexpected type in cell\"))?;\n@@ -334,7 +334,7 @@ impl TypedCellContent {\n     {\n         let shared_reference = self\n             .1\n-             .0\n+            .0\n             .ok_or_else(|| anyhow!(\"Cell is empty\"))?\n             .into_typed(self.0);\n         Ok("
        },
        {
            "sha": "d719949d52bf67820201e784333d951ab13ebd0c",
            "filename": "turbopack/crates/turbo-tasks/src/effect.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Feffect.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Feffect.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Feffect.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -8,7 +8,7 @@ use std::{\n     sync::Arc,\n };\n \n-use anyhow::{anyhow, Result};\n+use anyhow::{Result, anyhow};\n use auto_hash_map::AutoSet;\n use futures::{StreamExt, TryStreamExt};\n use parking_lot::Mutex;\n@@ -17,14 +17,13 @@ use tokio::task_local;\n use tracing::{Instrument, Span};\n \n use crate::{\n-    self as turbo_tasks,\n+    self as turbo_tasks, CollectiblesSource, NonLocalValue, ReadRef, ResolvedVc, TryJoinIterExt,\n     debug::ValueDebugFormat,\n     emit,\n     event::{Event, EventListener},\n     manager::turbo_tasks_future_scope,\n     trace::TraceRawVcs,\n     util::SharedError,\n-    CollectiblesSource, NonLocalValue, ReadRef, ResolvedVc, TryJoinIterExt,\n };\n \n const APPLY_EFFECTS_CONCURRENCY_LIMIT: usize = 1024;\n@@ -343,7 +342,7 @@ impl ApplyEffectsContext {\n \n #[cfg(test)]\n mod tests {\n-    use crate::{apply_effects, get_effects, CollectiblesSource};\n+    use crate::{CollectiblesSource, apply_effects, get_effects};\n \n     #[test]\n     #[allow(dead_code)]"
        },
        {
            "sha": "fcf1d6441689ee2daa79e30eaebe04dba8c1eaf0",
            "filename": "turbopack/crates/turbo-tasks/src/event.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fevent.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fevent.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fevent.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,10 +1,10 @@\n #[cfg(feature = \"hanging_detection\")]\n use std::sync::Arc;\n #[cfg(feature = \"hanging_detection\")]\n-use std::task::ready;\n-#[cfg(feature = \"hanging_detection\")]\n use std::task::Poll;\n #[cfg(feature = \"hanging_detection\")]\n+use std::task::ready;\n+#[cfg(feature = \"hanging_detection\")]\n use std::time::Duration;\n use std::{\n     fmt::{Debug, Formatter},\n@@ -13,10 +13,10 @@ use std::{\n     pin::Pin,\n };\n \n-#[cfg(feature = \"hanging_detection\")]\n-use tokio::time::timeout;\n #[cfg(feature = \"hanging_detection\")]\n use tokio::time::Timeout;\n+#[cfg(feature = \"hanging_detection\")]\n+use tokio::time::timeout;\n \n pub struct Event {\n     #[cfg(feature = \"hanging_detection\")]"
        },
        {
            "sha": "4ed18d480a8610695b1da68c7df17acfde97d330",
            "filename": "turbopack/crates/turbo-tasks/src/graph/graph_traversal.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fgraph%2Fgraph_traversal.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fgraph%2Fgraph_traversal.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fgraph%2Fgraph_traversal.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,13 +1,13 @@\n use std::future::Future;\n \n use anyhow::Result;\n-use futures::{stream::FuturesUnordered, StreamExt};\n+use futures::{StreamExt, stream::FuturesUnordered};\n use rustc_hash::FxHashSet;\n \n use super::{\n+    SkipDuplicates, Visit, VisitControlFlow,\n     graph_store::{GraphNode, GraphStore},\n     with_future::With,\n-    SkipDuplicates, Visit, VisitControlFlow,\n };\n \n /// A list of modules that were already visited and should be skipped (including their subgraphs).\n@@ -104,7 +104,7 @@ where\n                                     self.insert(Some(parent_handle.clone()), GraphNode(node));\n                                 }\n                                 VisitControlFlow::Abort(abort) => {\n-                                    return GraphTraversalResult::Aborted(abort)\n+                                    return GraphTraversalResult::Aborted(abort);\n                                 }\n                             }\n                         }"
        },
        {
            "sha": "f942d2e98a1f15f431ade075dd5463b57533c4a3",
            "filename": "turbopack/crates/turbo-tasks/src/id.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fid.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fid.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fid.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -5,12 +5,11 @@ use std::{\n     ops::Deref,\n };\n \n-use serde::{de::Visitor, Deserialize, Serialize};\n+use serde::{Deserialize, Serialize, de::Visitor};\n \n use crate::{\n-    registry,\n+    TaskPersistence, registry,\n     trace::{TraceRawVcs, TraceRawVcsContext},\n-    TaskPersistence,\n };\n \n macro_rules! define_id {"
        },
        {
            "sha": "775c1ea8ab45944de8f35c9c9a56ba0bc949fbac",
            "filename": "turbopack/crates/turbo-tasks/src/invalidation.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Finvalidation.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Finvalidation.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Finvalidation.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -8,15 +8,15 @@ use std::{\n \n use anyhow::Result;\n use indexmap::map::Entry;\n-use serde::{de::Visitor, Deserialize, Serialize};\n+use serde::{Deserialize, Serialize, de::Visitor};\n use tokio::runtime::Handle;\n \n use crate::{\n+    FxIndexMap, FxIndexSet, TaskId, TurboTasksApi,\n     magic_any::HasherMut,\n     manager::{current_task, with_turbo_tasks},\n     trace::TraceRawVcs,\n     util::StaticOrArc,\n-    FxIndexMap, FxIndexSet, TaskId, TurboTasksApi,\n };\n \n /// Get an [`Invalidator`] that can be used to invalidate the current task"
        },
        {
            "sha": "f7b98615d373e828b6d17a7dae61c8d646210c03",
            "filename": "turbopack/crates/turbo-tasks/src/join_iter_ext.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fjoin_iter_ext.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fjoin_iter_ext.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fjoin_iter_ext.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -6,8 +6,8 @@ use std::{\n \n use anyhow::Result;\n use futures::{\n-    future::{join_all, JoinAll},\n     FutureExt,\n+    future::{JoinAll, join_all},\n };\n use pin_project_lite::pin_project;\n "
        },
        {
            "sha": "4c00012f52ea4cbb08fedb598bba7ed38cc5a73a",
            "filename": "turbopack/crates/turbo-tasks/src/lib.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -90,24 +90,24 @@ use auto_hash_map::AutoSet;\n pub use collectibles::CollectiblesSource;\n pub use completion::{Completion, Completions};\n pub use display::ValueToString;\n-pub use effect::{apply_effects, effect, get_effects, ApplyEffectsContext, Effects};\n+pub use effect::{ApplyEffectsContext, Effects, apply_effects, effect, get_effects};\n pub use id::{\n-    ExecutionId, FunctionId, LocalTaskId, SessionId, TaskId, TraitTypeId, ValueTypeId,\n-    TRANSIENT_TASK_BIT,\n+    ExecutionId, FunctionId, LocalTaskId, SessionId, TRANSIENT_TASK_BIT, TaskId, TraitTypeId,\n+    ValueTypeId,\n };\n pub use invalidation::{\n-    get_invalidator, DynamicEqHash, InvalidationReason, InvalidationReasonKind,\n-    InvalidationReasonSet, Invalidator,\n+    DynamicEqHash, InvalidationReason, InvalidationReasonKind, InvalidationReasonSet, Invalidator,\n+    get_invalidator,\n };\n pub use join_iter_ext::{JoinIterExt, TryFlatJoinIterExt, TryJoinIterExt};\n pub use key_value_pair::KeyValuePair;\n pub use magic_any::MagicAny;\n pub use manager::{\n+    CurrentCellRef, ReadConsistency, TaskPersistence, TurboTasks, TurboTasksApi,\n+    TurboTasksBackendApi, TurboTasksBackendApiExt, TurboTasksCallApi, Unused, UpdateInfo,\n     dynamic_call, emit, mark_finished, mark_root, mark_session_dependent, mark_stateful,\n     prevent_gc, run_once, run_once_with_reason, spawn_blocking, spawn_thread, trait_call,\n-    turbo_tasks, turbo_tasks_scope, CurrentCellRef, ReadConsistency, TaskPersistence, TurboTasks,\n-    TurboTasksApi, TurboTasksBackendApi, TurboTasksBackendApiExt, TurboTasksCallApi, Unused,\n-    UpdateInfo,\n+    turbo_tasks, turbo_tasks_scope,\n };\n pub use output::OutputContent;\n pub use raw_vc::{CellId, RawVc, ReadRawVcFuture, ResolveTypeError};\n@@ -118,9 +118,9 @@ pub use scope::scope;\n pub use serialization_invalidation::SerializationInvalidator;\n pub use shrink_to_fit::ShrinkToFit;\n pub use state::{State, TransientState};\n-pub use task::{task_input::TaskInput, SharedReference, TypedSharedReference};\n+pub use task::{SharedReference, TypedSharedReference, task_input::TaskInput};\n pub use trait_ref::{IntoTraitRef, TraitRef};\n-pub use turbo_tasks_macros::{function, value_impl, TaskInput};\n+pub use turbo_tasks_macros::{TaskInput, function, value_impl};\n pub use value::{TransientInstance, TransientValue, Value};\n pub use value_type::{TraitMethod, TraitType, ValueType};\n pub use vc::{"
        },
        {
            "sha": "34e37c4c65b259f4e36aff1fe17c27dddf37b813",
            "filename": "turbopack/crates/turbo-tasks/src/macro_helpers.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmacro_helpers.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmacro_helpers.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmacro_helpers.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -7,13 +7,13 @@ pub use shrink_to_fit;\n pub use tracing;\n \n use crate::{\n-    debug::ValueDebugFormatString, task::TaskOutput, NonLocalValue, RawVc, TaskInput,\n-    TaskPersistence, Vc,\n+    NonLocalValue, RawVc, TaskInput, TaskPersistence, Vc, debug::ValueDebugFormatString,\n+    task::TaskOutput,\n };\n pub use crate::{\n     magic_any::MagicAny,\n     manager::{find_cell_by_type, notify_scheduled_tasks, spawn_detached_for_testing},\n-    native_function::{downcast_args_owned, downcast_args_ref, FunctionMeta, NativeFunction},\n+    native_function::{FunctionMeta, NativeFunction, downcast_args_owned, downcast_args_ref},\n };\n \n #[inline(never)]"
        },
        {
            "sha": "480e39d1398aefba9dafd9890d71d075b85cb6c5",
            "filename": "turbopack/crates/turbo-tasks/src/magic_any.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmagic_any.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmagic_any.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmagic_any.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -7,7 +7,7 @@ use std::{\n     sync::Arc,\n };\n \n-use serde::{de::DeserializeSeed, Deserialize, Serialize};\n+use serde::{Deserialize, Serialize, de::DeserializeSeed};\n \n use crate::trace::{TraceRawVcs, TraceRawVcsContext};\n "
        },
        {
            "sha": "905a0c38d3b18b22573919b77d02daf514008a25",
            "filename": "turbopack/crates/turbo-tasks/src/manager.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmanager.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmanager.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmanager.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -7,31 +7,34 @@ use std::{\n     panic::AssertUnwindSafe,\n     pin::Pin,\n     sync::{\n-        atomic::{AtomicBool, AtomicUsize, Ordering},\n         Arc, Mutex, RwLock, Weak,\n+        atomic::{AtomicBool, AtomicUsize, Ordering},\n     },\n     thread,\n     time::{Duration, Instant},\n };\n \n-use anyhow::{anyhow, Result};\n+use anyhow::{Result, anyhow};\n use auto_hash_map::AutoMap;\n use futures::FutureExt;\n use rustc_hash::FxHasher;\n use serde::{Deserialize, Serialize};\n use tokio::{runtime::Handle, select, task_local};\n use tokio_util::task::TaskTracker;\n-use tracing::{info_span, instrument, trace_span, Instrument, Level, Span};\n+use tracing::{Instrument, Level, Span, info_span, instrument, trace_span};\n use turbo_tasks_malloc::TurboMalloc;\n \n use crate::{\n+    Completion, InvalidationReason, InvalidationReasonSet, OutputContent, ReadCellOptions,\n+    ResolvedVc, SharedReference, TaskId, TaskIdSet, ValueTypeId, Vc, VcRead, VcValueTrait,\n+    VcValueType,\n     backend::{\n         Backend, CachedTaskType, CellContent, TaskCollectiblesMap, TaskExecutionSpec,\n         TransientTaskType, TypedCellContent,\n     },\n     capture_future::{self, CaptureFuture},\n     event::{Event, EventListener},\n-    id::{BackendJobId, ExecutionId, FunctionId, LocalTaskId, TraitTypeId, TRANSIENT_TASK_BIT},\n+    id::{BackendJobId, ExecutionId, FunctionId, LocalTaskId, TRANSIENT_TASK_BIT, TraitTypeId},\n     id_factory::IdFactoryWithReuse,\n     magic_any::MagicAny,\n     raw_vc::{CellId, RawVc},\n@@ -43,9 +46,6 @@ use crate::{\n     trait_helpers::get_trait_method,\n     util::{IdFactory, StaticOrArc},\n     vc::ReadVcFuture,\n-    Completion, InvalidationReason, InvalidationReasonSet, OutputContent, ReadCellOptions,\n-    ResolvedVc, SharedReference, TaskId, TaskIdSet, ValueTypeId, Vc, VcRead, VcValueTrait,\n-    VcValueType,\n };\n \n /// Common base trait for [`TurboTasksApi`] and [`TurboTasksBackendApi`]. Provides APIs for creating\n@@ -1866,7 +1866,7 @@ impl CurrentCellRef {\n         let cell_content = tt\n             .read_own_task_cell(self.current_task, self.index, ReadCellOptions::default())\n             .ok();\n-        let update = functor(cell_content.as_ref().and_then(|cc| cc.1 .0.as_ref()));\n+        let update = functor(cell_content.as_ref().and_then(|cc| cc.1.0.as_ref()));\n         if let Some(update) = update {\n             tt.update_own_task_cell(self.current_task, self.index, CellContent(Some(update)))\n         }"
        },
        {
            "sha": "e5c72350c5bfdf1a4f71492f54645781e75a6eba",
            "filename": "turbopack/crates/turbo-tasks/src/native_function.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fnative_function.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fnative_function.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fnative_function.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -6,14 +6,13 @@ use serde::{Deserialize, Serialize};\n use tracing::Span;\n \n use crate::{\n-    self as turbo_tasks,\n+    self as turbo_tasks, RawVc, TaskInput, TaskPersistence,\n     magic_any::{MagicAny, MagicAnyDeserializeSeed, MagicAnySerializeSeed},\n     registry::register_function,\n     task::{\n-        function::{IntoTaskFnWithThis, NativeTaskFuture},\n         IntoTaskFn, TaskFn,\n+        function::{IntoTaskFnWithThis, NativeTaskFuture},\n     },\n-    RawVc, TaskInput, TaskPersistence,\n };\n \n type ResolveFuture<'a> = Pin<Box<dyn Future<Output = Result<Box<dyn MagicAny>>> + Send + 'a>>;"
        },
        {
            "sha": "a241bd8046686a3e0a583e235a2786751c5be93b",
            "filename": "turbopack/crates/turbo-tasks/src/no_move_vec.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fno_move_vec.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fno_move_vec.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fno_move_vec.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -2,8 +2,8 @@ use std::{\n     ptr::null_mut,\n     slice::from_raw_parts_mut,\n     sync::{\n-        atomic::{AtomicPtr, Ordering},\n         Mutex,\n+        atomic::{AtomicPtr, Ordering},\n     },\n };\n "
        },
        {
            "sha": "b136d0d3ef2b2363f256bea599898c465b30201e",
            "filename": "turbopack/crates/turbo-tasks/src/output.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Foutput.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Foutput.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Foutput.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -5,7 +5,7 @@ use std::{\n \n use anyhow::anyhow;\n \n-use crate::{util::SharedError, RawVc};\n+use crate::{RawVc, util::SharedError};\n \n /// A helper type representing the output of a resolved task.\n #[derive(Clone, Debug)]"
        },
        {
            "sha": "c4f1df176601b8e6ee1947301faffefbde639fe5",
            "filename": "turbopack/crates/turbo-tasks/src/persisted_graph.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fpersisted_graph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fpersisted_graph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fpersisted_graph.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,10 +1,10 @@\n use anyhow::Result;\n-use serde::{ser::SerializeSeq, Deserialize, Serialize};\n+use serde::{Deserialize, Serialize, ser::SerializeSeq};\n \n use crate::{\n+    CellId, RawVc, TaskId,\n     backend::{CachedTaskType, CellContent},\n     task::shared_reference::TypedSharedReference,\n-    CellId, RawVc, TaskId,\n };\n \n #[derive(Clone, Debug)]\n@@ -217,7 +217,7 @@ pub trait PersistedGraph: Sync + Send {\n     /// This is usually called after the initial build has finished and all\n     /// external keep alives has been renewed.\n     fn remove_outdated_externally_active(&self, api: &dyn PersistedGraphApi)\n-        -> Result<Vec<TaskId>>;\n+    -> Result<Vec<TaskId>>;\n \n     /// update the dirty flag for a stored task\n     /// Returns true, when the task is active and should be scheduled"
        },
        {
            "sha": "39148c98d7c723a699874b603f56eb4d5ad12840",
            "filename": "turbopack/crates/turbo-tasks/src/raw_vc.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fraw_vc.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fraw_vc.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fraw_vc.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -6,13 +6,14 @@ use serde::{Deserialize, Serialize};\n use thiserror::Error;\n \n use crate::{\n+    CollectiblesSource, ReadCellOptions, ReadConsistency, ResolvedVc, TaskId, TaskPersistence,\n+    TraitTypeId, ValueType, ValueTypeId, VcValueTrait,\n     backend::{CellContent, TypedCellContent},\n     event::EventListener,\n     id::{ExecutionId, LocalTaskId},\n     manager::{read_local_output, read_task_cell, read_task_output, with_turbo_tasks},\n     registry::{self, get_value_type},\n-    turbo_tasks, CollectiblesSource, ReadCellOptions, ReadConsistency, ResolvedVc, TaskId,\n-    TaskPersistence, TraitTypeId, ValueType, ValueTypeId, VcValueTrait,\n+    turbo_tasks,\n };\n \n #[derive(Error, Debug)]"
        },
        {
            "sha": "f1236622566e326f0bb93992d6c35410d4a59540",
            "filename": "turbopack/crates/turbo-tasks/src/read_ref.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fread_ref.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fread_ref.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fread_ref.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -9,11 +9,11 @@ use serde::{Deserialize, Serialize};\n use turbo_tasks_hash::DeterministicHash;\n \n use crate::{\n+    SharedReference, Vc, VcRead, VcValueType,\n     debug::{ValueDebugFormat, ValueDebugFormatString},\n     trace::{TraceRawVcs, TraceRawVcsContext},\n     triomphe_utils::unchecked_sidecast_triomphe_arc,\n     vc::VcCellMode,\n-    SharedReference, Vc, VcRead, VcValueType,\n };\n \n type VcReadTarget<T> = <<T as VcValueType>::Read as VcRead<T>>::Target;"
        },
        {
            "sha": "e374a933d666e243c2b718bab4073a3bd84a4f19",
            "filename": "turbopack/crates/turbo-tasks/src/registry.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fregistry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fregistry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fregistry.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -4,11 +4,11 @@ use dashmap::mapref::entry::Entry;\n use once_cell::sync::Lazy;\n \n use crate::{\n+    FxDashMap, TraitType, ValueType,\n     id::{FunctionId, TraitTypeId, ValueTypeId},\n     id_factory::IdFactory,\n     native_function::NativeFunction,\n     no_move_vec::NoMoveVec,\n-    FxDashMap, TraitType, ValueType,\n };\n \n static FUNCTION_ID_FACTORY: IdFactory<FunctionId> = IdFactory::new_const("
        },
        {
            "sha": "bfe5e355df3588f036f54635285414afa4cbfd61",
            "filename": "turbopack/crates/turbo-tasks/src/scope.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fscope.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fscope.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fscope.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,6 +1,6 @@\n use std::sync::Arc;\n \n-use crate::{turbo_tasks, turbo_tasks_scope, TurboTasksApi};\n+use crate::{TurboTasksApi, turbo_tasks, turbo_tasks_scope};\n \n /// A wrapper around [`rayon::Scope`] that preserves the [`turbo_tasks_scope`].\n pub struct Scope<'scope, 'a> {"
        },
        {
            "sha": "6e6dbdf0078551b0c1e67b99edfa3b31c8c93ebb",
            "filename": "turbopack/crates/turbo-tasks/src/serialization_invalidation.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fserialization_invalidation.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fserialization_invalidation.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fserialization_invalidation.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -3,10 +3,10 @@ use std::{\n     sync::{Arc, Weak},\n };\n \n-use serde::{de::Visitor, Deserialize, Serialize};\n+use serde::{Deserialize, Serialize, de::Visitor};\n use tokio::runtime::Handle;\n \n-use crate::{manager::with_turbo_tasks, trace::TraceRawVcs, TaskId, TurboTasksApi};\n+use crate::{TaskId, TurboTasksApi, manager::with_turbo_tasks, trace::TraceRawVcs};\n \n #[derive(Clone)]\n pub struct SerializationInvalidator {"
        },
        {
            "sha": "2d63ae6e7fa3b146c3064cd5b42523590e00b399",
            "filename": "turbopack/crates/turbo-tasks/src/state.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fstate.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fstate.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fstate.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -9,8 +9,8 @@ use parking_lot::{Mutex, MutexGuard};\n use serde::{Deserialize, Serialize};\n \n use crate::{\n-    get_invalidator, mark_session_dependent, mark_stateful, trace::TraceRawVcs, Invalidator,\n-    OperationValue, SerializationInvalidator,\n+    Invalidator, OperationValue, SerializationInvalidator, get_invalidator, mark_session_dependent,\n+    mark_stateful, trace::TraceRawVcs,\n };\n \n #[derive(Serialize, Deserialize)]"
        },
        {
            "sha": "3ec3af6c541a8aa6f64f595caa5156e30e832df9",
            "filename": "turbopack/crates/turbo-tasks/src/task/function.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ffunction.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ffunction.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ffunction.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -26,7 +26,7 @@ use std::{future::Future, marker::PhantomData, pin::Pin};\n use anyhow::Result;\n \n use super::{TaskInput, TaskOutput};\n-use crate::{magic_any::MagicAny, RawVc, Vc, VcRead, VcValueType};\n+use crate::{RawVc, Vc, VcRead, VcValueType, magic_any::MagicAny};\n \n pub type NativeTaskFuture = Pin<Box<dyn Future<Output = Result<RawVc>> + Send>>;\n "
        },
        {
            "sha": "f9d6867c8ccdb7e6a9964d1a13c18e0c7130310f",
            "filename": "turbopack/crates/turbo-tasks/src/task/local_task.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Flocal_task.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Flocal_task.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Flocal_task.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,14 +1,14 @@\n use std::{borrow::Cow, fmt, fmt::Write, sync::Arc};\n \n-use anyhow::{anyhow, Result};\n+use anyhow::{Result, anyhow};\n \n use crate::{\n+    FunctionId, MagicAny, OutputContent, RawVc, TaskPersistence, TraitTypeId, TurboTasksBackendApi,\n+    ValueTypeId,\n     backend::{Backend, TaskExecutionSpec, TypedCellContent},\n     event::Event,\n     registry,\n     trait_helpers::{get_trait_method, has_trait, traits},\n-    FunctionId, MagicAny, OutputContent, RawVc, TaskPersistence, TraitTypeId, TurboTasksBackendApi,\n-    ValueTypeId,\n };\n \n /// A potentially in-flight local task stored in `CurrentGlobalTaskState::local_tasks`."
        },
        {
            "sha": "c6bea735c02c2babdbfe477d254a1505210a98eb",
            "filename": "turbopack/crates/turbo-tasks/src/task/shared_reference.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Fshared_reference.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Fshared_reference.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Fshared_reference.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -6,13 +6,12 @@ use std::{\n };\n \n use anyhow::Result;\n-use serde::{ser::SerializeTuple, Deserialize, Serialize};\n+use serde::{Deserialize, Serialize, ser::SerializeTuple};\n use unsize::CoerceUnsize;\n \n use crate::{\n-    registry,\n+    ValueTypeId, registry,\n     triomphe_utils::{coerce_to_any_send_sync, downcast_triomphe_arc},\n-    ValueTypeId,\n };\n \n /// A reference to a piece of data"
        },
        {
            "sha": "134578ffa393ba9a386a766db697d14d4a7d9459",
            "filename": "turbopack/crates/turbo-tasks/src/task/task_input.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ftask_input.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ftask_input.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ftask_input.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -6,8 +6,8 @@ use serde::{Deserialize, Serialize};\n use turbo_rcstr::RcStr;\n \n use crate::{\n-    trace::TraceRawVcs, MagicAny, ResolvedVc, TaskId, TransientInstance, TransientValue, Value,\n-    ValueTypeId, Vc,\n+    MagicAny, ResolvedVc, TaskId, TransientInstance, TransientValue, Value, ValueTypeId, Vc,\n+    trace::TraceRawVcs,\n };\n \n /// Trait to implement in order for a type to be accepted as a"
        },
        {
            "sha": "e88f5e4ad5346d72a9fccc2936e26236bc723981",
            "filename": "turbopack/crates/turbo-tasks/src/task_statistics.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask_statistics.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask_statistics.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask_statistics.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,8 +1,8 @@\n use std::sync::{Arc, OnceLock};\n \n-use serde::{ser::SerializeMap, Serialize, Serializer};\n+use serde::{Serialize, Serializer, ser::SerializeMap};\n \n-use crate::{registry, FunctionId, FxDashMap};\n+use crate::{FunctionId, FxDashMap, registry};\n \n /// An API for optionally enabling, updating, and reading aggregated statistics.\n #[derive(Default)]"
        },
        {
            "sha": "83ae57e1e5973b5daf916f3d0150335ca09d2e17",
            "filename": "turbopack/crates/turbo-tasks/src/trace.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrace.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrace.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrace.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -4,7 +4,7 @@ use std::{\n     collections::{BTreeMap, BTreeSet, HashMap, HashSet},\n     marker::PhantomData,\n     path::{Path, PathBuf},\n-    sync::{atomic::*, Arc, Mutex},\n+    sync::{Arc, Mutex, atomic::*},\n     time::Duration,\n };\n \n@@ -62,7 +62,9 @@ macro_rules! ignore {\n   }\n }\n \n-ignore!(i8, u8, i16, u16, i32, u32, i64, u64, i128, u128, f32, f64, char, bool, isize, usize);\n+ignore!(\n+    i8, u8, i16, u16, i32, u32, i64, u64, i128, u128, f32, f64, char, bool, isize, usize\n+);\n ignore!(\n     AtomicI8,\n     AtomicU8,"
        },
        {
            "sha": "026392c50c4e529cf76a95c4292b08a7db1e92c1",
            "filename": "turbopack/crates/turbo-tasks/src/trait_helpers.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrait_helpers.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrait_helpers.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrait_helpers.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,6 +1,6 @@\n use std::borrow::Cow;\n \n-use crate::{registry, FunctionId, TraitType, TraitTypeId, ValueTypeId};\n+use crate::{FunctionId, TraitType, TraitTypeId, ValueTypeId, registry};\n \n pub fn get_trait_method(\n     trait_type: TraitTypeId,"
        },
        {
            "sha": "52ebfc534eeb038077828868c26a6d9019d47d7c",
            "filename": "turbopack/crates/turbo-tasks/src/trait_ref.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrait_ref.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrait_ref.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftrait_ref.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -4,10 +4,10 @@ use anyhow::Result;\n use serde::{Deserialize, Serialize};\n \n use crate::{\n+    Vc, VcValueTrait,\n     registry::get_value_type,\n     task::shared_reference::TypedSharedReference,\n-    vc::{cast::VcCast, ReadVcFuture, VcValueTraitCast},\n-    Vc, VcValueTrait,\n+    vc::{ReadVcFuture, VcValueTraitCast, cast::VcCast},\n };\n \n /// Similar to a [`ReadRef<T>`][crate::ReadRef], but contains a value trait\n@@ -94,7 +94,7 @@ where\n     }\n \n     pub fn ptr_eq(this: &Self, other: &Self) -> bool {\n-        triomphe::Arc::ptr_eq(&this.shared_reference.1 .0, &other.shared_reference.1 .0)\n+        triomphe::Arc::ptr_eq(&this.shared_reference.1.0, &other.shared_reference.1.0)\n     }\n }\n "
        },
        {
            "sha": "f0b8f24fad4bc9165e838ce573b95ba63f2f38ee",
            "filename": "turbopack/crates/turbo-tasks/src/util.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Futil.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -10,7 +10,7 @@ use std::{\n     time::Duration,\n };\n \n-use anyhow::{anyhow, Error};\n+use anyhow::{Error, anyhow};\n use pin_project_lite::pin_project;\n use serde::{Deserialize, Deserializer, Serialize, Serializer};\n "
        },
        {
            "sha": "4b1942fc58b875aee78844f9de95beca0da3bc6b",
            "filename": "turbopack/crates/turbo-tasks/src/value.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -4,9 +4,9 @@ use anyhow::Result;\n use serde::{Deserialize, Serialize};\n \n use crate::{\n+    ReadRef, SharedReference,\n     debug::{ValueDebugFormat, ValueDebugString},\n     trace::{TraceRawVcs, TraceRawVcsContext},\n-    ReadRef, SharedReference,\n };\n \n /// Pass a value by value (`Value<Xxx>`) instead of by reference (`Vc<Xxx>`)."
        },
        {
            "sha": "5976bafacf6822e76ea9a986c77f82c58dbeb337",
            "filename": "turbopack/crates/turbo-tasks/src/value_type.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue_type.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue_type.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue_type.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,5 +1,5 @@\n use std::{\n-    any::{type_name, Any},\n+    any::{Any, type_name},\n     borrow::Cow,\n     fmt::{\n         Debug, Display, Formatter, {self},\n@@ -13,13 +13,13 @@ use serde::{Deserialize, Serialize};\n use tracing::Span;\n \n use crate::{\n+    RawVc, VcValueType,\n     id::{FunctionId, TraitTypeId},\n     magic_any::{AnyDeserializeSeed, MagicAny, MagicAnyDeserializeSeed, MagicAnySerializeSeed},\n     registry::{register_trait_type, register_value_type},\n     task::shared_reference::TypedSharedReference,\n     trace::TraceRawVcs,\n     vc::VcCellMode,\n-    RawVc, VcValueType,\n };\n \n type MagicSerializationFn = fn(&dyn MagicAny) -> &dyn erased_serde::Serialize;"
        },
        {
            "sha": "91febfe92db1b9689419895653a80a9a7b8e2ff5",
            "filename": "turbopack/crates/turbo-tasks/src/vc/cast.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fcast.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fcast.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fcast.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -2,7 +2,7 @@ use std::marker::PhantomData;\n \n use anyhow::Result;\n \n-use crate::{backend::TypedCellContent, ReadRef, TraitRef, VcValueTrait, VcValueType};\n+use crate::{ReadRef, TraitRef, VcValueTrait, VcValueType, backend::TypedCellContent};\n \n /// Trait defined to share behavior between values and traits within\n /// [`ReadRawVcFuture`][crate::ReadRawVcFuture]. See [`VcValueTypeCast`] and"
        },
        {
            "sha": "0615001a072ef9c215f613dcd170e236f6f72d06",
            "filename": "turbopack/crates/turbo-tasks/src/vc/cell_mode.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fcell_mode.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fcell_mode.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fcell_mode.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,7 +1,7 @@\n use std::{any::type_name, marker::PhantomData};\n \n use super::{read::VcRead, traits::VcValueType};\n-use crate::{manager::find_cell_by_type, task::shared_reference::TypedSharedReference, RawVc, Vc};\n+use crate::{RawVc, Vc, manager::find_cell_by_type, task::shared_reference::TypedSharedReference};\n \n type VcReadTarget<T> = <<T as VcValueType>::Read as VcRead<T>>::Target;\n type VcReadRepr<T> = <<T as VcValueType>::Read as VcRead<T>>::Repr;\n@@ -81,7 +81,7 @@ where\n \n fn debug_assert_repr<T: VcValueType>(content: &TypedSharedReference) {\n     debug_assert!(\n-        (*content.1 .0).is::<VcReadRepr<T>>(),\n+        (*content.1.0).is::<VcReadRepr<T>>(),\n         \"SharedReference for type {} must use representation type {}\",\n         type_name::<T>(),\n         type_name::<VcReadRepr<T>>(),"
        },
        {
            "sha": "4a5571fa822fa530883e758daeb963324b8b7899",
            "filename": "turbopack/crates/turbo-tasks/src/vc/local.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Flocal.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Flocal.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Flocal.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,4 +1,4 @@\n-use crate::{marker_trait::impl_auto_marker_trait, OperationVc, ResolvedVc};\n+use crate::{OperationVc, ResolvedVc, marker_trait::impl_auto_marker_trait};\n \n /// Marker trait indicating that a type does not contain any instances of [`Vc`] or references to\n /// [`Vc`]. It may contain [`ResolvedVc`] or [`OperationVc`]."
        },
        {
            "sha": "ea1f7d311f523107c1876e322d02ee561884ad82",
            "filename": "turbopack/crates/turbo-tasks/src/vc/mod.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -31,10 +31,10 @@ pub use self::{\n     traits::{Dynamic, TypedForInput, Upcast, VcValueTrait, VcValueType},\n };\n use crate::{\n+    CellId, RawVc, ResolveTypeError,\n     debug::{ValueDebug, ValueDebugFormat, ValueDebugFormatString},\n     registry,\n     trace::{TraceRawVcs, TraceRawVcsContext},\n-    CellId, RawVc, ResolveTypeError,\n };\n \n type VcReadTarget<T> = <<T as VcValueType>::Read as VcRead<T>>::Target;\n@@ -281,7 +281,7 @@ where\n     type Target = *const *mut *const T;\n \n     fn deref(&self) -> &Self::Target {\n-        extern \"C\" {\n+        unsafe extern \"C\" {\n             #[link_name = \"\\n\\nERROR: you tried to dereference a `Vc<T>`\\n\"]\n             fn trigger() -> !;\n         }\n@@ -307,7 +307,7 @@ where\n     type Target = VcDeref<T>;\n \n     fn deref(&self) -> &Self::Target {\n-        extern \"C\" {\n+        unsafe extern \"C\" {\n             #[link_name = \"\\n\\nERROR: you tried to dereference a `Vc<T>`\\n\"]\n             fn trigger() -> !;\n         }"
        },
        {
            "sha": "07c2d2194a48ad8c1d60f358fbd1281e788d6cbd",
            "filename": "turbopack/crates/turbo-tasks/src/vc/operation.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Foperation.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Foperation.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Foperation.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -6,8 +6,8 @@ use serde::{Deserialize, Serialize};\n pub use turbo_tasks_macros::OperationValue;\n \n use crate::{\n-    marker_trait::impl_auto_marker_trait, trace::TraceRawVcs, CollectiblesSource, RawVc,\n-    ReadVcFuture, ResolvedVc, TaskInput, Upcast, Vc, VcValueTrait, VcValueType,\n+    CollectiblesSource, RawVc, ReadVcFuture, ResolvedVc, TaskInput, Upcast, Vc, VcValueTrait,\n+    VcValueType, marker_trait::impl_auto_marker_trait, trace::TraceRawVcs,\n };\n \n /// A \"subtype\" (can be converted via [`.connect()`]) of [`Vc`] that"
        },
        {
            "sha": "416c48a9c304f0680753cb25c4ff38baa88e5803",
            "filename": "turbopack/crates/turbo-tasks/src/vc/resolved.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fresolved.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fresolved.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fresolved.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -12,10 +12,10 @@ use anyhow::Result;\n use serde::{Deserialize, Serialize};\n \n use crate::{\n+    RawVc, Upcast, VcRead, VcTransparentRead, VcValueTrait, VcValueType,\n     debug::{ValueDebug, ValueDebugFormat, ValueDebugFormatString},\n     trace::{TraceRawVcs, TraceRawVcsContext},\n     vc::Vc,\n-    RawVc, Upcast, VcRead, VcTransparentRead, VcValueTrait, VcValueType,\n };\n \n /// A \"subtype\" (via [`Deref`]) of [`Vc`] that represents a specific [`Vc::cell`]/`.cell()` or"
        },
        {
            "sha": "b9f23bf0a42765b38c7a97db65621393c0525dc7",
            "filename": "turbopack/crates/turbo-tasks/src/vc/traits.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Ftraits.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/47689a6e2552328cf90a2d1f14573d006868f197/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Ftraits.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Ftraits.rs?ref=47689a6e2552328cf90a2d1f14573d006868f197",
            "patch": "@@ -1,5 +1,5 @@\n use crate::{\n-    vc::cell_mode::VcCellMode, NonLocalValue, ShrinkToFit, TraitTypeId, ValueTypeId, VcRead,\n+    NonLocalValue, ShrinkToFit, TraitTypeId, ValueTypeId, VcRead, vc::cell_mode::VcCellMode,\n };\n \n /// A trait implemented on all values types that can be put into a Value Cell"
        }
    ],
    "stats": {
        "total": 191,
        "additions": 95,
        "deletions": 96
    }
}