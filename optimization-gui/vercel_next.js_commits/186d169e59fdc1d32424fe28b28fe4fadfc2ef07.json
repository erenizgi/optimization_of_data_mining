{
    "author": "RobPruzan",
    "message": "chore(devtools): sync todos to linear (#81901)\n\n- Sync's scattered todo's with tracked issues in linear\n- minor cleanup of old code",
    "sha": "186d169e59fdc1d32424fe28b28fe4fadfc2ef07",
    "files": [
        {
            "sha": "bdf06e9941e89f5544a280dd1a37dbc5d9336d2c",
            "filename": "packages/next/src/next-devtools/dev-overlay.browser.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx?ref=186d169e59fdc1d32424fe28b28fe4fadfc2ef07",
            "patch": "@@ -231,12 +231,7 @@ function DevOverlayRoot({\n           state,\n         }}\n       >\n-        <DevOverlay\n-          // we also pass props for legacy UI\n-          dispatch={dispatch}\n-          state={state}\n-          getSquashedHydrationErrorDetails={getSquashedHydrationErrorDetails}\n-        />\n+        <DevOverlay />\n       </DevOverlayContext>\n     </>\n   )"
        },
        {
            "sha": "8d4e060930adb0e54b38ab07fcbb1900e6ae7ab4",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-indicator/next-logo.stories.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fnext-logo.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fnext-logo.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fnext-logo.stories.tsx?ref=186d169e59fdc1d32424fe28b28fe4fadfc2ef07",
            "patch": "@@ -1,8 +1,7 @@\n import type { Meta, StoryObj } from '@storybook/react'\n import { NextLogo } from './next-logo'\n import { withShadowPortal } from '../../storybook/with-shadow-portal'\n-// TODO(rob): this storybook's configurability is broken intentionally\n-// it will be restored when we wrap it in the storybook context addon https://storybook.js.org/addons/storybook-react-context\n+// TODO: NEXT-4642\n const StoryBookNextLogo = (\n   _: {\n     issueCount: number"
        },
        {
            "sha": "ad63a50e743bd0153b39fa326f236c49862e9dda",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/resize/resize-handle.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx?ref=186d169e59fdc1d32424fe28b28fe4fadfc2ef07",
            "patch": "@@ -28,8 +28,7 @@ export const ResizeHandle = ({\n     left: 0,\n   })\n \n-  // TODO(rob): if parallel with >2 sides (user resizes panel to be max width/height)\n-  // then we need to relax disabled resize heuristic\n+  // TODO: NEXT-4645\n   const shouldShowHandle = () => {\n     const getOppositeCorner = (corner: Corners): ResizeDirection => {\n       switch (corner) {"
        },
        {
            "sha": "ca75de31fd4c64e65f8b80ec78551bc571422397",
            "filename": "packages/next/src/next-devtools/dev-overlay/dev-overlay.stories.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 12,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx?ref=186d169e59fdc1d32424fe28b28fe4fadfc2ef07",
            "patch": "@@ -11,7 +11,6 @@ import {\n   useStorybookOverlayReducer,\n } from './storybook/use-overlay-reducer'\n import { DevOverlayContext } from '../dev-overlay.browser'\n-import { getSquashedHydrationErrorDetails } from '../userspace/pages/hydration-error-state'\n \n const meta: Meta<typeof DevOverlay> = {\n   component: DevOverlay,\n@@ -54,7 +53,7 @@ export const Default: Story = {\n           backgroundColor: 'black',\n         }}\n       >\n-        {/* TODO: get lots of real hard examples so we have better debug */}\n+        {/* TODO: NEXT-4643 */}\n         <img\n           src={imgApp}\n           style={{\n@@ -71,11 +70,7 @@ export const Default: Story = {\n             state,\n           }}\n         >\n-          <DevOverlay\n-            state={state}\n-            dispatch={dispatch}\n-            getSquashedHydrationErrorDetails={getSquashedHydrationErrorDetails}\n-          />\n+          <DevOverlay />\n         </DevOverlayContext>\n       </div>\n     )\n@@ -104,11 +99,7 @@ export const WithPanel: Story = {\n             state,\n           }}\n         >\n-          <DevOverlay\n-            dispatch={dispatch}\n-            getSquashedHydrationErrorDetails={getSquashedHydrationErrorDetails}\n-            state={state}\n-          />\n+          <DevOverlay />\n         </DevOverlayContext>\n       </>\n     )"
        },
        {
            "sha": "26afdfedb20da83d42efd58588ac53592ac90546",
            "filename": "packages/next/src/next-devtools/dev-overlay/dev-overlay.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 11,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx?ref=186d169e59fdc1d32424fe28b28fe4fadfc2ef07",
            "patch": "@@ -6,12 +6,11 @@ import { Colors } from './styles/colors'\n import { ErrorOverlay } from './components/errors/error-overlay/error-overlay'\n import { RenderError } from './container/runtime-error/render-error'\n import { DarkTheme } from './styles/dark-theme'\n-import type { HydrationErrorState } from '../shared/hydration-error'\n import type { ReadyRuntimeError } from './utils/get-error-by-type'\n import { DevToolsIndicator } from './components/devtools-indicator/devtools-indicator'\n import { PanelRouter } from './menu/panel-router'\n import { PanelRouterContext, type PanelStateKind } from './menu/context'\n-import type { OverlayState, OverlayDispatch } from './shared'\n+import { useDevOverlayContext } from '../dev-overlay.browser'\n \n export const RenderErrorContext = createContext<{\n   runtimeErrors: ReadyRuntimeError[]\n@@ -20,17 +19,11 @@ export const RenderErrorContext = createContext<{\n \n export const useRenderErrorContext = () => useContext(RenderErrorContext)\n \n-export function DevOverlay({\n-  state,\n-  dispatch,\n-  getSquashedHydrationErrorDetails,\n-}: {\n-  state: OverlayState\n-  dispatch: OverlayDispatch\n-  getSquashedHydrationErrorDetails: (error: Error) => HydrationErrorState | null\n-}) {\n+export function DevOverlay() {\n   const [panel, setPanel] = useState<null | PanelStateKind>(null)\n   const [selectedIndex, setSelectedIndex] = useState(-1)\n+  const { state, dispatch, getSquashedHydrationErrorDetails } =\n+    useDevOverlayContext()\n \n   const triggerRef = useRef<HTMLButtonElement>(null)\n   return ("
        },
        {
            "sha": "a6f8b526e8c538605d2fc11b8c31eab164a1a1f6",
            "filename": "packages/next/src/next-devtools/dev-overlay/menu/panel-router.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fpanel-router.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/186d169e59fdc1d32424fe28b28fe4fadfc2ef07/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fpanel-router.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fpanel-router.tsx?ref=186d169e59fdc1d32424fe28b28fe4fadfc2ef07",
            "patch": "@@ -154,6 +154,7 @@ export const PanelRouter = () => {\n         <MenuPanel />\n       </PanelRoute>\n \n+      {/* TODO: NEXT-4644 */}\n       <PanelRoute name=\"preferences\">\n         <DynamicPanel\n           sharePanelSizeGlobally={false}\n@@ -230,7 +231,6 @@ export const PanelRouter = () => {\n       <PanelRoute name=\"turbo-info\">\n         <DynamicPanel\n           sharePanelSizeGlobally={false}\n-          // this size config is really silly, should calculate initial size dynamically\n           sizeConfig={{\n             kind: 'fixed',\n             height: 470 / state.scale,"
        },
        {
            "sha": "6e5e2e056902e7031493994e34e3ff8031b3eb56",
            "filename": "packages/next/src/next-devtools/dev-overlay/storybook/DevOverlayStoryWrapper.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 34,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/78760d3b5607dd94838bfc59042d23df5c9a812e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstorybook%2FDevOverlayStoryWrapper.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/78760d3b5607dd94838bfc59042d23df5c9a812e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstorybook%2FDevOverlayStoryWrapper.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstorybook%2FDevOverlayStoryWrapper.tsx?ref=78760d3b5607dd94838bfc59042d23df5c9a812e",
            "patch": "@@ -1,34 +0,0 @@\n-import { DevOverlay } from '../dev-overlay'\n-import { DevOverlayContext } from '../../dev-overlay.browser'\n-import {\n-  useStorybookOverlayReducer,\n-  storybookDefaultOverlayState,\n-} from './use-overlay-reducer'\n-import type { OverlayState } from '../shared'\n-import type { ReadyRuntimeError } from '../utils/get-error-by-type'\n-\n-type WrapperProps = {\n-  initialState?: Partial<OverlayState>\n-  runtimeErrors?: ReadyRuntimeError[]\n-  children?: never\n-}\n-// todo: wrap stories in this so props are configurable\n-export function DevOverlayStoryWrapper({ initialState }: WrapperProps) {\n-  const mergedState: OverlayState = {\n-    ...storybookDefaultOverlayState,\n-    ...initialState,\n-  } as OverlayState\n-\n-  const [state, dispatch] = useStorybookOverlayReducer(mergedState)\n-  return (\n-    <DevOverlayContext\n-      value={{ state, dispatch, getSquashedHydrationErrorDetails: () => null }}\n-    >\n-      <DevOverlay\n-        state={state}\n-        dispatch={dispatch}\n-        getSquashedHydrationErrorDetails={() => null}\n-      />\n-    </DevOverlayContext>\n-  )\n-}"
        }
    ],
    "stats": {
        "total": 79,
        "additions": 11,
        "deletions": 68
    }
}