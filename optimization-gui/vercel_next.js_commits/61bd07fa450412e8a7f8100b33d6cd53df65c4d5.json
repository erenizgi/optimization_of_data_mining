{
    "author": "huozhi",
    "message": "[test] add custom timeout for start server (#80160)",
    "sha": "61bd07fa450412e8a7f8100b33d6cd53df65c4d5",
    "files": [
        {
            "sha": "a8a31c7f157ec52548d84b39bc90fd64e5d021b3",
            "filename": "test/e2e/opentelemetry/client-trace-metadata/client-trace-metadata.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/61bd07fa450412e8a7f8100b33d6cd53df65c4d5/test%2Fe2e%2Fopentelemetry%2Fclient-trace-metadata%2Fclient-trace-metadata.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/61bd07fa450412e8a7f8100b33d6cd53df65c4d5/test%2Fe2e%2Fopentelemetry%2Fclient-trace-metadata%2Fclient-trace-metadata.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fopentelemetry%2Fclient-trace-metadata%2Fclient-trace-metadata.test.ts?ref=61bd07fa450412e8a7f8100b33d6cd53df65c4d5",
            "patch": "@@ -4,6 +4,9 @@ describe('clientTraceMetadata', () => {\n   const { next, isNextDev } = nextTestSetup({\n     files: __dirname,\n     dependencies: require('./package.json').dependencies,\n+    // This test sometimes takes longer than the default timeout, extending it bit longer\n+    // to avoid flakiness.\n+    startServerTimeout: 15_000,\n   })\n \n   describe('app router', () => {"
        },
        {
            "sha": "c849aafd5f4af578b5bff86efc620d24c366bc23",
            "filename": "test/lib/next-modes/base.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/61bd07fa450412e8a7f8100b33d6cd53df65c4d5/test%2Flib%2Fnext-modes%2Fbase.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/61bd07fa450412e8a7f8100b33d6cd53df65c4d5/test%2Flib%2Fnext-modes%2Fbase.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-modes%2Fbase.ts?ref=61bd07fa450412e8a7f8100b33d6cd53df65c4d5",
            "patch": "@@ -44,6 +44,7 @@ export interface NextInstanceOpts {\n   forcedPort?: string\n   serverReadyPattern?: RegExp\n   patchFileDelay?: number\n+  startServerTimeout?: number\n }\n \n /**\n@@ -84,6 +85,7 @@ export class NextInstance {\n   public env: Record<string, string>\n   public forcedPort?: string\n   public dirSuffix: string = ''\n+  public startServerTimeout: number = 10_000 // 10 seconds\n   public serverReadyPattern: RegExp = / âœ“ Ready in /\n   patchFileDelay: number = 0\n \n@@ -386,7 +388,7 @@ export class NextInstance {\n \n   protected setServerReadyTimeout(\n     reject: (reason?: unknown) => void,\n-    ms = 10_000\n+    ms: number\n   ): NodeJS.Timeout {\n     return setTimeout(() => {\n       reject("
        },
        {
            "sha": "8bb80b9619dc03d0a3d632f9d8353bdb6179dab0",
            "filename": "test/lib/next-modes/next-dev.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/61bd07fa450412e8a7f8100b33d6cd53df65c4d5/test%2Flib%2Fnext-modes%2Fnext-dev.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/61bd07fa450412e8a7f8100b33d6cd53df65c4d5/test%2Flib%2Fnext-modes%2Fnext-dev.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-modes%2Fnext-dev.ts?ref=61bd07fa450412e8a7f8100b33d6cd53df65c4d5",
            "patch": "@@ -93,7 +93,10 @@ export class NextDevInstance extends NextInstance {\n           }\n         })\n \n-        const serverReadyTimeoutId = this.setServerReadyTimeout(reject)\n+        const serverReadyTimeoutId = this.setServerReadyTimeout(\n+          reject,\n+          this.startServerTimeout\n+        )\n \n         const readyCb = (msg) => {\n           const resolveServer = () => {"
        },
        {
            "sha": "31a85cdcae4cde1dee95c3e8a689b67ef26dd35a",
            "filename": "test/lib/next-modes/next-start.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/61bd07fa450412e8a7f8100b33d6cd53df65c4d5/test%2Flib%2Fnext-modes%2Fnext-start.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/61bd07fa450412e8a7f8100b33d6cd53df65c4d5/test%2Flib%2Fnext-modes%2Fnext-start.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-modes%2Fnext-start.ts?ref=61bd07fa450412e8a7f8100b33d6cd53df65c4d5",
            "patch": "@@ -149,7 +149,10 @@ export class NextStartInstance extends NextInstance {\n           }\n         })\n \n-        const serverReadyTimeoutId = this.setServerReadyTimeout(reject)\n+        const serverReadyTimeoutId = this.setServerReadyTimeout(\n+          reject,\n+          this.startServerTimeout\n+        )\n \n         const readyCb = (msg) => {\n           const colorStrippedMsg = stripAnsi(msg)"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 14,
        "deletions": 3
    }
}