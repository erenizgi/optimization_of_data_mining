{
    "author": "huozhi",
    "message": "[segment explorer] handle custom global-error segment (#80685)",
    "sha": "3981cccbe3424931a6c3c13d50692fb20e021b41",
    "files": [
        {
            "sha": "b65888f25eb1f3ec440ec75bd5b5461dc162863b",
            "filename": "packages/next/src/client/app-index.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fapp-index.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fapp-index.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fapp-index.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -171,7 +171,7 @@ function ServerRoot({\n     <AppRouter\n       gracefullyDegrade={isBot(window.navigator.userAgent)}\n       actionQueue={actionQueue}\n-      globalErrorComponentAndStyles={initialRSCPayload.G}\n+      globalErrorState={initialRSCPayload.G}\n       assetPrefix={initialRSCPayload.p}\n     />\n   )"
        },
        {
            "sha": "c876833deacf4019f76d1dd4daee2e34717c1c3b",
            "filename": "packages/next/src/client/components/app-router-instance.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router-instance.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router-instance.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router-instance.ts?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -27,6 +27,7 @@ import type {\n import { setLinkForCurrentNavigation, type LinkInstance } from './links'\n import type { FlightRouterState } from '../../server/app-render/types'\n import type { ClientInstrumentationHooks } from '../app-index'\n+import type { GlobalErrorComponent } from './global-error'\n \n export type DispatchStatePromise = React.Dispatch<ReducerState>\n \n@@ -44,6 +45,11 @@ export type AppRouterActionQueue = {\n   last: ActionQueueNode | null\n }\n \n+export type GlobalErrorState = [\n+  GlobalError: GlobalErrorComponent,\n+  styles: React.ReactNode,\n+]\n+\n export type ActionQueueNode = {\n   payload: ReducerActions\n   next: ActionQueueNode | null"
        },
        {
            "sha": "1d6ed5af378a6e76a5e1407225edd32abab1121e",
            "filename": "packages/next/src/client/components/app-router.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fapp-router.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -23,9 +23,7 @@ import {\n } from '../../shared/lib/hooks-client-context.shared-runtime'\n import { dispatchAppRouterAction, useActionQueue } from './use-action-queue'\n import { ErrorBoundary } from './error-boundary'\n-import DefaultGlobalError, {\n-  type GlobalErrorComponent,\n-} from '../../client/components/global-error'\n+import DefaultGlobalError from '../../client/components/global-error'\n import { isBot } from '../../shared/lib/router/utils/is-bot'\n import { addBasePath } from '../add-base-path'\n import { AppRouterAnnouncer } from './app-router-announcer'\n@@ -41,6 +39,7 @@ import {\n   dispatchTraverseAction,\n   publicAppRouterInstance,\n   type AppRouterActionQueue,\n+  type GlobalErrorState,\n } from './app-router-instance'\n import { getRedirectTypeFromError, getURLFromRedirectError } from './redirect'\n import { isRedirectError, RedirectType } from './redirect-error'\n@@ -201,7 +200,7 @@ function Router({\n }: {\n   actionQueue: AppRouterActionQueue\n   assetPrefix: string\n-  globalError: [GlobalErrorComponent, React.ReactNode]\n+  globalError: GlobalErrorState\n   gracefullyDegrade: boolean\n }) {\n   const state = useActionQueue(actionQueue)\n@@ -564,12 +563,12 @@ function Router({\n \n export default function AppRouter({\n   actionQueue,\n-  globalErrorComponentAndStyles: [globalErrorComponent, globalErrorStyles],\n+  globalErrorState,\n   assetPrefix,\n   gracefullyDegrade,\n }: {\n   actionQueue: AppRouterActionQueue\n-  globalErrorComponentAndStyles: [GlobalErrorComponent, React.ReactNode]\n+  globalErrorState: GlobalErrorState\n   assetPrefix: string\n   gracefullyDegrade: boolean\n }) {\n@@ -579,7 +578,7 @@ export default function AppRouter({\n     <Router\n       actionQueue={actionQueue}\n       assetPrefix={assetPrefix}\n-      globalError={[globalErrorComponent, globalErrorStyles]}\n+      globalError={globalErrorState}\n       gracefullyDegrade={gracefullyDegrade}\n     />\n   )"
        },
        {
            "sha": "1515be19516867577ac7b19062789418fcfb1b61",
            "filename": "packages/next/src/client/components/global-error.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fglobal-error.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fglobal-error.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fglobal-error.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -25,7 +25,7 @@ const styles = {\n export type GlobalErrorComponent = React.ComponentType<{\n   error: any\n }>\n-function GlobalError({ error }: { error: any }) {\n+function DefaultGlobalError({ error }: { error: any }) {\n   const digest: string | undefined = error?.digest\n   return (\n     <html id=\"__next_error__\">\n@@ -50,4 +50,4 @@ function GlobalError({ error }: { error: any }) {\n \n // Exported so that the import signature in the loaders can be identical to user\n // supplied custom global error signatures.\n-export default GlobalError\n+export default DefaultGlobalError"
        },
        {
            "sha": "5bd52989077e9937be33f19a18e0f5e7a2c6b16f",
            "filename": "packages/next/src/client/dev/hot-reloader/app/hot-reloader-app.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -27,10 +27,10 @@ import type {\n   TurbopackMsgToBrowser,\n } from '../../../../server/dev/hot-reloader-types'\n import { useUntrackedPathname } from '../../../components/navigation-untracked'\n-import type { GlobalErrorComponent } from '../../../components/global-error'\n import reportHmrLatency from '../../report-hmr-latency'\n import { TurbopackHmr } from '../turbopack-hot-reloader-common'\n import { NEXT_HMR_REFRESH_HASH_COOKIE } from '../../../components/app-router-headers'\n+import type { GlobalErrorState } from '../../../components/app-router-instance'\n \n let mostRecentCompilationHash: any = null\n let __nextDevClientId = Math.round(Math.random() * 100 + Date.now())\n@@ -451,7 +451,7 @@ export default function HotReload({\n }: {\n   assetPrefix: string\n   children: ReactNode\n-  globalError: [GlobalErrorComponent, React.ReactNode]\n+  globalError: GlobalErrorState\n }) {\n   useErrorHandler(dispatcher.onUnhandledError, dispatcher.onUnhandledRejection)\n "
        },
        {
            "sha": "5827bb7dd09b86301f489fc07db9c3b3430c12e2",
            "filename": "packages/next/src/next-devtools/userspace/app/app-dev-overlay-error-boundary.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fapp-dev-overlay-error-boundary.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fapp-dev-overlay-error-boundary.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fapp-dev-overlay-error-boundary.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -2,13 +2,12 @@ import { PureComponent } from 'react'\n import { dispatcher } from 'next/dist/compiled/next-devtools'\n import { RuntimeErrorHandler } from '../../../client/dev/runtime-error-handler'\n import { ErrorBoundary } from '../../../client/components/error-boundary'\n-import DefaultGlobalError, {\n-  type GlobalErrorComponent,\n-} from '../../../client/components/global-error'\n+import DefaultGlobalError from '../../../client/components/global-error'\n+import type { GlobalErrorState } from '../../../client/components/app-router-instance'\n \n type AppDevOverlayErrorBoundaryProps = {\n   children: React.ReactNode\n-  globalError: [GlobalErrorComponent, React.ReactNode]\n+  globalError: GlobalErrorState\n }\n \n type AppDevOverlayErrorBoundaryState = {\n@@ -19,7 +18,7 @@ function ErroredHtml({\n   globalError: [GlobalError, globalErrorStyles],\n   error,\n }: {\n-  globalError: [GlobalErrorComponent, React.ReactNode]\n+  globalError: GlobalErrorState\n   error: unknown\n }) {\n   if (!error) {"
        },
        {
            "sha": "960e3595f0f2dbb44d7a9e652409153be4047fef",
            "filename": "packages/next/src/next-devtools/userspace/app/client-entry.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fclient-entry.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fclient-entry.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fclient-entry.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -1,7 +1,7 @@\n import React from 'react'\n import { getSocketUrl } from '../../../client/dev/hot-reloader/get-socket-url'\n import { HMR_ACTIONS_SENT_TO_BROWSER } from '../../../server/dev/hot-reloader-types'\n-import GlobalError from '../../../client/components/global-error'\n+import DefaultGlobalError from '../../../client/components/global-error'\n import { AppDevOverlayErrorBoundary } from './app-dev-overlay-error-boundary'\n \n // if an error is thrown while rendering an RSC stream, this will catch it in dev\n@@ -29,7 +29,7 @@ export function createRootLevelDevOverlayElement(reactEl: React.ReactElement) {\n   socket.addEventListener('message', handler)\n \n   return (\n-    <AppDevOverlayErrorBoundary globalError={[GlobalError, null]}>\n+    <AppDevOverlayErrorBoundary globalError={[DefaultGlobalError, null]}>\n       {reactEl}\n     </AppDevOverlayErrorBoundary>\n   )"
        },
        {
            "sha": "13c515ca280e8a5c7dfc9cd91d03782a39052a22",
            "filename": "packages/next/src/next-devtools/userspace/app/segment-explorer.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer.ts?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -10,7 +10,7 @@ export function SegmentViewNode({\n }: {\n   type: string\n   pagePath: string\n-  children: ReactNode\n+  children?: ReactNode\n }) {\n   useEffect(() => {\n     dispatcher.segmentExplorerNodeAdd(type, pagePath)"
        },
        {
            "sha": "2789e4fdc7f5c330781166493b7e8407ce363a1e",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 45,
            "deletions": 9,
            "changes": 54,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -97,7 +97,11 @@ import { getRequiredScripts } from './required-scripts'\n import { addPathPrefix } from '../../shared/lib/router/utils/add-path-prefix'\n import { makeGetServerInsertedHTML } from './make-get-server-inserted-html'\n import { walkTreeWithFlightRouterState } from './walk-tree-with-flight-router-state'\n-import { createComponentTree, getRootParams } from './create-component-tree'\n+import {\n+  createComponentTree,\n+  getRootParams,\n+  normalizeConventionFilePath,\n+} from './create-component-tree'\n import { getAssetQueryString } from './get-asset-query-string'\n import {\n   getServerModuleMap,\n@@ -194,6 +198,7 @@ import {\n   trackPendingImport,\n   trackPendingModules,\n } from './module-loading/track-module-loading.external'\n+import type { GlobalErrorComponent } from '../../client/components/global-error'\n \n export type GetDynamicParamFromSegment = (\n   // [slug] / [[slug]] / [...slug]\n@@ -794,7 +799,6 @@ async function getRSCPayload(\n     query,\n     appUsingSizeAdjustment,\n     componentMod: {\n-      GlobalError,\n       createMetadataComponents,\n       MetadataBoundary,\n       ViewportBoundary,\n@@ -873,7 +877,10 @@ async function getRSCPayload(\n     </React.Fragment>\n   )\n \n-  const globalErrorStyles = await getGlobalErrorStyles(tree, ctx)\n+  const { GlobalError, styles: globalErrorStyles } = await getGlobalErrorStyles(\n+    tree,\n+    ctx\n+  )\n \n   // Assume the head we're rendering contains only partial data if PPR is\n   // enabled and this is a statically generated response. This is used by the\n@@ -930,7 +937,6 @@ async function getErrorRSCPayload(\n     query,\n     appUsingSizeAdjustment,\n     componentMod: {\n-      GlobalError,\n       createMetadataComponents,\n       MetadataBoundary,\n       ViewportBoundary,\n@@ -1001,7 +1007,10 @@ async function getErrorRSCPayload(\n     false,\n   ]\n \n-  const globalErrorStyles = await getGlobalErrorStyles(tree, ctx)\n+  const { GlobalError, styles: globalErrorStyles } = await getGlobalErrorStyles(\n+    tree,\n+    ctx\n+  )\n \n   const isPossiblyPartialHead =\n     workStore.isStaticGeneration &&\n@@ -1092,7 +1101,7 @@ function App<T>({\n       <ServerInsertedHTMLProvider>\n         <AppRouter\n           actionQueue={actionQueue}\n-          globalErrorComponentAndStyles={response.G}\n+          globalErrorState={response.G}\n           assetPrefix={response.p}\n           gracefullyDegrade={gracefullyDegrade}\n         />\n@@ -1149,7 +1158,7 @@ function ErrorApp<T>({\n     <ServerInsertedHTMLProvider>\n       <AppRouter\n         actionQueue={actionQueue}\n-        globalErrorComponentAndStyles={response.G}\n+        globalErrorState={response.G}\n         assetPrefix={response.p}\n         gracefullyDegrade={gracefullyDegrade}\n       />\n@@ -3903,11 +3912,16 @@ async function prerenderToStream(\n const getGlobalErrorStyles = async (\n   tree: LoaderTree,\n   ctx: AppRenderContext\n-): Promise<React.ReactNode | undefined> => {\n+): Promise<{\n+  GlobalError: GlobalErrorComponent\n+  styles: React.ReactNode | undefined\n+}> => {\n   const {\n     modules: { 'global-error': globalErrorModule },\n   } = parseLoaderTree(tree)\n \n+  const GlobalErrorComponent: GlobalErrorComponent =\n+    ctx.componentMod.GlobalError\n   let globalErrorStyles\n   if (globalErrorModule) {\n     const [, styles] = await createComponentStylesAndScripts({\n@@ -3919,8 +3933,30 @@ const getGlobalErrorStyles = async (\n     })\n     globalErrorStyles = styles\n   }\n+  if (ctx.renderOpts.dev) {\n+    const dir =\n+      process.env.NEXT_RUNTIME === 'edge'\n+        ? process.env.__NEXT_EDGE_PROJECT_DIR!\n+        : ctx.renderOpts.dir || ''\n+\n+    const globalErrorModulePath = normalizeConventionFilePath(\n+      dir,\n+      globalErrorModule?.[1]\n+    )\n+    if (ctx.renderOpts.devtoolSegmentExplorer && globalErrorModulePath) {\n+      const SegmentViewNode = ctx.componentMod.SegmentViewNode\n+      globalErrorStyles = (\n+        <SegmentViewNode type=\"global-error\" pagePath={globalErrorModulePath}>\n+          {globalErrorStyles}\n+        </SegmentViewNode>\n+      )\n+    }\n+  }\n \n-  return globalErrorStyles\n+  return {\n+    GlobalError: GlobalErrorComponent,\n+    styles: globalErrorStyles,\n+  }\n }\n \n async function collectSegmentData("
        },
        {
            "sha": "efaa78aca82093754963f38d8884aeadc404a55b",
            "filename": "packages/next/src/server/app-render/create-component-tree.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -1028,7 +1028,7 @@ function getRootParamsImpl(\n   }\n }\n \n-function normalizeConventionFilePath(\n+export function normalizeConventionFilePath(\n   projectDir: string,\n   conventionPath: string | undefined\n ) {"
        },
        {
            "sha": "7ff9912085226e046c2154d27fe2e9fa9de9e7fd",
            "filename": "test/development/app-dir/segment-explorer/app/global-error.tsx",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fglobal-error.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fglobal-error.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fglobal-error.tsx?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -0,0 +1,14 @@\n+'use client'\n+\n+export default function GlobalError() {\n+  return (\n+    <html>\n+      <head>\n+        <title>Global Error</title>\n+      </head>\n+      <body>\n+        <h1>Global Error</h1>\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "66f031540cbd22f599f509729966d1133b65f16f",
            "filename": "test/development/app-dir/segment-explorer/segment-explorer.test.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3981cccbe3424931a6c3c13d50692fb20e021b41/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3981cccbe3424931a6c3c13d50692fb20e021b41/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts?ref=3981cccbe3424931a6c3c13d50692fb20e021b41",
            "patch": "@@ -123,4 +123,12 @@ describe('segment-explorer', () => {\n      not-found-error.js\"\n     `)\n   })\n+\n+  it('should show global-error segment', async () => {\n+    const browser = await next.browser('/runtime-error')\n+    expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`\n+     \"app/\n+     global-error.tsx\"\n+    `)\n+  })\n })"
        }
    ],
    "stats": {
        "total": 122,
        "additions": 92,
        "deletions": 30
    }
}