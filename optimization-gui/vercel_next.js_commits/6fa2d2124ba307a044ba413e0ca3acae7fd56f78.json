{
    "author": "gaojude",
    "message": "doc: useLinkStatus (#77648)",
    "sha": "6fa2d2124ba307a044ba413e0ca3acae7fd56f78",
    "files": [
        {
            "sha": "d2897c2e814025e711dba7e0564b4c6ccdc6260a",
            "filename": "docs/01-app/04-api-reference/04-functions/use-link-status.mdx",
            "status": "added",
            "additions": 204,
            "deletions": 0,
            "changes": 204,
            "blob_url": "https://github.com/vercel/next.js/blob/6fa2d2124ba307a044ba413e0ca3acae7fd56f78/docs%2F01-app%2F04-api-reference%2F04-functions%2Fuse-link-status.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/6fa2d2124ba307a044ba413e0ca3acae7fd56f78/docs%2F01-app%2F04-api-reference%2F04-functions%2Fuse-link-status.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F04-api-reference%2F04-functions%2Fuse-link-status.mdx?ref=6fa2d2124ba307a044ba413e0ca3acae7fd56f78",
            "patch": "@@ -0,0 +1,204 @@\n+---\n+title: useLinkStatus\n+description: API Reference for the useLinkStatus hook.\n+---\n+\n+`useLinkStatus` is a **Client Component** hook that lets you track the loading state of a `Link` component during navigation. It can be used to show loading indicators during page transitions, especially when [prefetching](/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching) is disabled, or the linked route does not have any loading states. \n+\n+```tsx filename=\"app/loading-indicator.tsx\" switcher\n+'use client'\n+\n+import { useLinkStatus } from 'next/navigation'\n+\n+export default function LoadingIndicator() {\n+  const { pending } = useLinkStatus()\n+  return pending ? <div>Loading...</div> : null\n+}\n+```\n+\n+```jsx filename=\"app/loading-indicator.js\" switcher\n+'use client'\n+\n+import { useLinkStatus } from 'next/navigation'\n+\n+export default function LoadingIndicator() {\n+  const { pending } = useLinkStatus()\n+  return pending ? <div>Loading...</div> : null\n+}\n+```\n+\n+```tsx filename=\"app/header.tsx\" switcher\n+import Link from 'next/link'\n+import LoadingIndicator from './loading-indicator'\n+\n+export default function Header() {\n+  return (\n+    <header>\n+      <Link href=\"/dashboard\" prefetch={false}>\n+        Dashboard <LoadingIndicator />\n+      </Link>\n+    </header>\n+  )\n+}\n+```\n+\n+```jsx filename=\"app/header.js\" switcher\n+import Link from 'next/link'\n+import LoadingIndicator from './loading-indicator'\n+\n+export default function Header() {\n+  return (\n+    <header>\n+      <Link href=\"/dashboard\" prefetch={false}>\n+        Dashboard <LoadingIndicator />\n+      </Link>\n+    </header>\n+  )\n+}\n+```\n+\n+> **Good to know**:\n+>\n+> - `useLinkStatus` must be used within a descendant component of a `Link` component\n+> - The hook is most useful when `prefetch={false}` is set on the `Link` component\n+> - If the linked route has been prefetched, the pending state will be skipped\n+> - When clicking multiple links in quick succession, only the last link's pending state is shown\n+> - This hook is not supported in the Pages Router and will always return `{ pending: false }`\n+\n+## Parameters\n+\n+```tsx\n+const { pending } = useLinkStatus()\n+```\n+\n+`useLinkStatus` does not take any parameters.\n+\n+## Returns\n+\n+`useLinkStatus` returns an object with a single property:\n+\n+| Property | Type    | Description                                  |\n+| -------- | ------- | -------------------------------------------- |\n+| pending  | boolean | `true` before history updates, `false` after |\n+\n+## Examples\n+\n+### Improving the user experience when navigating with new query parameters\n+\n+In this example, navigating between categories updates the query string (e.g. ?category=books). However, the page may appear unresponsive because the `<PageSkeleton />` fallback won't replace the existing content (see [preventing unwanted loading indicators](https://react.dev/reference/react/useTransition#preventing-unwanted-loading-indicators)). \n+\n+You can use the `useLinkStatus` hook to render a lightweight loading indicator next to the active link and provide immediate feedback to the user while the data is being fetched. \n+\n+```tsx filename=\"app/page.tsx\" switcher\n+'use client'\n+\n+import { useSearchParams, useLinkStatus } from 'next/navigation'\n+import Link from 'next/link'\n+import { Suspense } from 'react'\n+\n+function LoadingIndicator() {\n+  const { pending } = useLinkStatus()\n+  return pending ? <span>⌛</span> : null\n+}\n+\n+function MenuBar() {\n+  return (\n+    <div>\n+      <Link href=\"?category=electronics\">\n+        Electronics <LoadingIndicator />\n+      </Link>\n+      <Link href=\"?category=clothing\">\n+        Clothing <LoadingIndicator />\n+      </Link>\n+      <Link href=\"?category=books\">\n+        Books <LoadingIndicator />\n+      </Link>\n+    </div>\n+  )\n+}\n+\n+async function ProductList({ category }: { category: string }) {\n+  const products = await fetchProducts(category)\n+\n+  return (\n+    <ul>\n+      {products.map((product) => (\n+        <li key={product}>{product}</li>\n+      ))}\n+    </ul>\n+  )\n+}\n+\n+export default async function ProductCategories({\n+  searchParams,\n+}: {\n+  searchParams: Promise<{\n+    category: string\n+  }>\n+}) {\n+  const { category } = await searchParams\n+\n+  return (\n+    <Suspense fallback={<PageSkeleton />}>\n+      <MenuBar />\n+      <ProductList category={category} />\n+    </Suspense>\n+  )\n+}\n+```\n+\n+```jsx filename=\"app/page.js\" switcher\n+'use client'\n+\n+import { useSearchParams, useLinkStatus } from 'next/navigation'\n+import Link from 'next/link'\n+import { Suspense } from 'react'\n+\n+function LoadingIndicator() {\n+  const { pending } = useLinkStatus()\n+  return pending ? <span>⌛</span> : null\n+}\n+\n+function MenuBar() {\n+  return (\n+    <div>\n+      <Link href=\"?category=electronics\">\n+        Electronics <LoadingIndicator />\n+      </Link>\n+      <Link href=\"?category=clothing\">\n+        Clothing <LoadingIndicator />\n+      </Link>\n+      <Link href=\"?category=books\">\n+        Books <LoadingIndicator />\n+      </Link>\n+    </div>\n+  )\n+}\n+\n+async function ProductList({ category }) {\n+  const products = await fetchProducts(category)\n+\n+  return (\n+    <ul>\n+      {products.map((product) => (\n+        <li key={product}>{product}</li>\n+      ))}\n+    </ul>\n+  )\n+}\n+\n+export default async function ProductCategories({ searchParams }) {\n+  const { category } = await searchParams\n+\n+  return (\n+    <Suspense fallback={<PageSkeleton />}>\n+      <MenuBar />\n+      <ProductList category={category} />\n+    </Suspense>\n+  )\n+}\n+```\n+\n+| Version   | Changes                     |\n+| --------- | --------------------------- |\n+| `v15.3.0` | `useLinkStatus` introduced. |"
        }
    ],
    "stats": {
        "total": 204,
        "additions": 204,
        "deletions": 0
    }
}