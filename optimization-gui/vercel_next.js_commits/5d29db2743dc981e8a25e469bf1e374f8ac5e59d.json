{
    "author": "lubieowoce",
    "message": "fix bad next.browser() arguments in socket.io test (#78309)\n\ni guess we forgot to remove the `next.url` when this was converted from\n`webdriver()` to `next.browser()`",
    "sha": "5d29db2743dc981e8a25e469bf1e374f8ac5e59d",
    "files": [
        {
            "sha": "f25f672890d91ad844c8df615a2872a71eb9f2f3",
            "filename": "test/deploy-tests-manifest.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/5d29db2743dc981e8a25e469bf1e374f8ac5e59d/test%2Fdeploy-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/5d29db2743dc981e8a25e469bf1e374f8ac5e59d/test%2Fdeploy-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdeploy-tests-manifest.json?ref=5d29db2743dc981e8a25e469bf1e374f8ac5e59d",
            "patch": "@@ -53,7 +53,7 @@\n       \"test/e2e/app-dir/rsc-basic/rsc-basic.test.ts\",\n       \"test/e2e/basepath/basepath.test.ts\",\n       \"test/e2e/postcss-config-cjs/index.test.ts\",\n-      \"test/e2e/socket-io/index.test.js\",\n+      \"test/e2e/socket-io/index.test.ts\",\n       \"test/e2e/middleware-matcher/index.test.ts\",\n       \"test/e2e/next-script/index.test.ts\",\n       \"test/production/standalone-mode/**/*\""
        },
        {
            "sha": "f56890b904009f38cb6a99ce7d322d759be834a2",
            "filename": "test/e2e/socket-io/index.test.ts",
            "status": "renamed",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/5d29db2743dc981e8a25e469bf1e374f8ac5e59d/test%2Fe2e%2Fsocket-io%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5d29db2743dc981e8a25e469bf1e374f8ac5e59d/test%2Fe2e%2Fsocket-io%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fsocket-io%2Findex.test.ts?ref=5d29db2743dc981e8a25e469bf1e374f8ac5e59d",
            "patch": "@@ -10,13 +10,16 @@ describe('socket-io', () => {\n       'utf-8-validate': '6.0.3',\n       bufferutil: '4.0.8',\n     },\n+    // the socket.io setup relies on patching next's `http.Server` instance,\n+    // which we can't do when deployed\n+    skipDeployment: true,\n   })\n \n   it('should support socket.io without falling back to polling', async () => {\n     let requestsCount = 0\n \n-    const browser1 = await next.browser(next.url, '/')\n-    const browser2 = await next.browser(next.url, '/', {\n+    const browser1 = await next.browser('/')\n+    const browser2 = await next.browser('/', {\n       beforePageLoad(page) {\n         page.on('request', () => {\n           requestsCount++\n@@ -30,6 +33,7 @@ describe('socket-io', () => {\n     await input1.fill('hello world')\n     await check(() => input2.inputValue(), /hello world/)\n \n+    expect(requestsCount).toBeGreaterThan(0)\n     const currentRequestsCount = requestsCount\n \n     await input1.fill('123456')",
            "previous_filename": "test/e2e/socket-io/index.test.js"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 7,
        "deletions": 3
    }
}