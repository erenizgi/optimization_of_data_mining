{
    "author": "bgw",
    "message": "Turbopack: Inline uses of the SliceMap type alias (#87122)\n\n- We (@lukesandberg, @sokra, and myself) discussed this type alias during the team meeting on Thursday and decided the alias wasn't worth it. Apparently I left a comment to the effect when this was first added: https://github.com/vercel/next.js/pull/76053#discussion_r1956639433\n\n- Now that [`FrozenMap`](https://turbopack-rust-docs.vercel.sh/rustdoc/turbo_frozenmap/map/struct.FrozenMap.html) exists, we want people to gravitate towards that type instead of `SliceMap`. \n\n- I tried replacing these uses with `FrozenMap` in #87050, but it turns out that we do care a lot about iteration order for these types.",
    "sha": "c872c148542673ca9570aad20df66dbf9d3311d1",
    "files": [
        {
            "sha": "017bd69ea543e8d12be8729423d12c2952f035ee",
            "filename": "turbopack/crates/turbo-tasks/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/c872c148542673ca9570aad20df66dbf9d3311d1/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c872c148542673ca9570aad20df66dbf9d3311d1/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs?ref=c872c148542673ca9570aad20df66dbf9d3311d1",
            "patch": "@@ -138,8 +138,6 @@ pub use crate::{\n     },\n };\n \n-pub type SliceMap<K, V> = Box<[(K, V)]>;\n-\n pub type FxIndexSet<T> = indexmap::IndexSet<T, BuildHasherDefault<FxHasher>>;\n pub type FxIndexMap<K, V> = indexmap::IndexMap<K, V, BuildHasherDefault<FxHasher>>;\n pub type FxDashMap<K, V> = dashmap::DashMap<K, V, BuildHasherDefault<FxHasher>>;"
        },
        {
            "sha": "206574776a80074b256c729b89b4d73a845303ce",
            "filename": "turbopack/crates/turbopack-core/src/resolve/mod.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/c872c148542673ca9570aad20df66dbf9d3311d1/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c872c148542673ca9570aad20df66dbf9d3311d1/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs?ref=c872c148542673ca9570aad20df66dbf9d3311d1",
            "patch": "@@ -17,8 +17,8 @@ use tracing::{Instrument, Level};\n use turbo_frozenmap::{FrozenMap, FrozenSet};\n use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n-    FxIndexMap, FxIndexSet, NonLocalValue, ReadRef, ResolvedVc, SliceMap, TaskInput,\n-    TryFlatJoinIterExt, TryJoinIterExt, ValueToString, Vc, trace::TraceRawVcs,\n+    FxIndexMap, FxIndexSet, NonLocalValue, ReadRef, ResolvedVc, TaskInput, TryFlatJoinIterExt,\n+    TryJoinIterExt, ValueToString, Vc, trace::TraceRawVcs,\n };\n use turbo_tasks_fs::{FileSystemEntryType, FileSystemPath};\n use turbo_unix_path::normalize_request;\n@@ -173,7 +173,7 @@ impl ExportUsage {\n #[turbo_tasks::value(shared)]\n #[derive(Clone, Debug)]\n pub struct ModuleResolveResult {\n-    pub primary: SliceMap<RequestKey, ModuleResolveResultItem>,\n+    pub primary: Box<[(RequestKey, ModuleResolveResultItem)]>,\n     /// Affecting sources are other files that influence the resolve result.  For example,\n     /// traversed symlinks\n     pub affecting_sources: Box<[ResolvedVc<Box<dyn Source>>]>,\n@@ -513,7 +513,7 @@ impl RequestKey {\n #[turbo_tasks::value(shared)]\n #[derive(Clone)]\n pub struct ResolveResult {\n-    pub primary: SliceMap<RequestKey, ResolveResultItem>,\n+    pub primary: Box<[(RequestKey, ResolveResultItem)]>,\n     /// Affecting sources are other files that influence the resolve result.  For example,\n     /// traversed symlinks\n     pub affecting_sources: Box<[ResolvedVc<Box<dyn Source>>]>,"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 4,
        "deletions": 6
    }
}