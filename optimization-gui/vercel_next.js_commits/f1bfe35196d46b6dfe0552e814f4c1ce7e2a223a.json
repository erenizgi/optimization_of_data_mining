{
    "author": "huozhi",
    "message": "[devtools] memorize tab in session storage (#80900)",
    "sha": "f1bfe35196d46b6dfe0552e814f4c1ce7e2a223a",
    "files": [
        {
            "sha": "503717cb41907a75c22551e6ee386abf41c4c4df",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel.tsx",
            "status": "modified",
            "additions": 34,
            "deletions": 2,
            "changes": 36,
            "blob_url": "https://github.com/vercel/next.js/blob/f1bfe35196d46b6dfe0552e814f4c1ce7e2a223a/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f1bfe35196d46b6dfe0552e814f4c1ce7e2a223a/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx?ref=f1bfe35196d46b6dfe0552e814f4c1ce7e2a223a",
            "patch": "@@ -2,7 +2,7 @@ import type { OverlayDispatch, OverlayState, Corners } from '../../shared'\n import type { ReadyRuntimeError } from '../../utils/get-error-by-type'\n import type { HydrationErrorState } from '../../../shared/hydration-error'\n \n-import { useState } from 'react'\n+import { useState, useEffect } from 'react'\n \n import { DevToolsPanelFooter } from './devtools-panel-footer'\n import { DevToolsPanelTab } from './devtools-panel-tab/devtools-panel-tab'\n@@ -26,6 +26,33 @@ import { MinimizeIcon } from '../../icons/minimize'\n \n export type DevToolsPanelTabType = 'issues' | 'route' | 'settings'\n \n+const STORAGE_KEY_ACTIVE_TAB = 'nextjs-devtools-active-tab'\n+\n+function useSessionState<T extends string>(\n+  key: string,\n+  initialValue: T\n+): [T, (value: T) => void] {\n+  const [value, setValue] = useState<T>(() => {\n+    if (\n+      typeof window !== 'undefined' &&\n+      typeof sessionStorage !== 'undefined'\n+    ) {\n+      const stored = sessionStorage.getItem(key)\n+      return (stored as T) ?? initialValue\n+    }\n+    return initialValue\n+  })\n+  useEffect(() => {\n+    if (\n+      typeof window !== 'undefined' &&\n+      typeof sessionStorage !== 'undefined'\n+    ) {\n+      sessionStorage.setItem(key, value)\n+    }\n+  }, [key, value])\n+  return [value, setValue]\n+}\n+\n export function DevToolsPanel({\n   state,\n   dispatch,\n@@ -39,7 +66,12 @@ export function DevToolsPanel({\n   runtimeErrors: ReadyRuntimeError[]\n   getSquashedHydrationErrorDetails: (error: Error) => HydrationErrorState | null\n }) {\n-  const [activeTab, setActiveTab] = useState<DevToolsPanelTabType>('issues')\n+  // Initialize active tab from session storage, fallback to 'issues'\n+  const [activeTab, setActiveTab] = useSessionState<DevToolsPanelTabType>(\n+    STORAGE_KEY_ACTIVE_TAB,\n+    'issues'\n+  )\n+\n   const [isFullscreen, setIsFullscreen] = useState(false)\n   const [prevIsErrorOverlayOpen, setPrevIsErrorOverlayOpen] = useState(false)\n "
        }
    ],
    "stats": {
        "total": 36,
        "additions": 34,
        "deletions": 2
    }
}