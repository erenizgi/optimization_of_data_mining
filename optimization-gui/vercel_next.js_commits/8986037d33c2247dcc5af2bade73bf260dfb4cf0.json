{
    "author": "delbaoliveira",
    "message": "15.2 docs: document missing `htmlLimitedBots` option (#76616)\n\n- Minor updates to the new Streaming Metadata section\n- Document new next.config.ts option: `htmlLimitedBots`",
    "sha": "8986037d33c2247dcc5af2bade73bf260dfb4cf0",
    "files": [
        {
            "sha": "8796cf20b060cfc66b879dba5f2336987b41b4cc",
            "filename": "docs/01-app/04-api-reference/04-functions/generate-metadata.mdx",
            "status": "modified",
            "additions": 16,
            "deletions": 9,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/8986037d33c2247dcc5af2bade73bf260dfb4cf0/docs%2F01-app%2F04-api-reference%2F04-functions%2Fgenerate-metadata.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8986037d33c2247dcc5af2bade73bf260dfb4cf0/docs%2F01-app%2F04-api-reference%2F04-functions%2Fgenerate-metadata.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F04-api-reference%2F04-functions%2Fgenerate-metadata.mdx?ref=8986037d33c2247dcc5af2bade73bf260dfb4cf0",
            "patch": "@@ -1197,31 +1197,38 @@ export const metadata = {\n }\n ```\n \n-#### Streaming Metadata\n+## Streaming metadata\n \n-Starting from v15.2, metadata returned by `generateMetadata` will be streamed to the client. This allows Next.js to inject metadata into the HTML as soon as it's resolved.\n+Metadata returned by `generateMetadata` is streamed to the client. This allows Next.js to inject metadata into the HTML as soon as it's resolved.\n \n-Since page metadata often primarily targets bots & crawlers, Next.js will continue to block the render until the metadata is resolved for **HTML-limited bots**.\n-\n-Some bots, like `Googlebot`, can execute JavaScript and are able to inspect the full page DOM, meaning they **don't** require blocking metadata. However, bots like `Twitterbot` **cannot** execute JavaScript while crawling a pageâ€”they fall into the **HTML-limited** category.\n+Since page metadata primarily targets bots and crawlers, Next.js will stream metadata for bots that can execute JavaScript and inspect the full page DOM (e.g. `Googlebot`). However, metadata will continue blocking the render of the page for **HTML-limited** bots (e.g. `Twitterbot`) as these cannot execute JavaScript while crawling.\n \n Next.js automatically detects the user agent of incoming requests to determine whether to serve streaming metadata or fallback to blocking metadata.\n \n If you need to customize this list, you can define them manually using the `htmlLimitedBots` option in `next.config.js`. Next.js will ensure user agents matching this regex receive blocking metadata when requesting your web page.\n-Specifying a `htmlLimitedBots` config will override the Next.js' default list, allowing you full control over what user agents should opt into this behavior. This is advanced behavior, and the default should be sufficient for most cases.\n \n-```js filename=\"next.config.js\"\n+```ts filename=\"next.config.ts\" switcher\n+import type { NextConfig } from 'next'\n+\n+const config: NextConfig = {\n+  htmlLimitedBots: 'MySpecialBot|MyAnotherSpecialBot|SimpleCrawler',\n+}\n+\n+export default config\n+```\n+\n+```js filename=\"next.config.js\" switcher\n module.exports = {\n   htmlLimitedBots: 'MySpecialBot|MyAnotherSpecialBot|SimpleCrawler',\n }\n ```\n \n-> **Note:** Next.js includes [a default list of HTML limited bots](https://github.com/vercel/next.js/blob/canary/packages/next/src/shared/lib/router/utils/html-bots.ts)\n+Specifying a `htmlLimitedBots` config will override the Next.js' default list, allowing you full control over what user agents should opt into this behavior. This is advanced behavior, and the default should be sufficient for most cases.\n \n ## Version History\n \n | Version   | Changes                                                                                                                                                 |\n | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |\n-| `v15.2.0` | introduced streaming support to `generateMetadata`.                                                                                                     |\n+| `v15.2.0` | Introduced streaming support to `generateMetadata`.                                                                                                     |\n | `v13.2.0` | `viewport`, `themeColor`, and `colorScheme` deprecated in favor of the [`viewport` configuration](/docs/app/api-reference/functions/generate-viewport). |\n | `v13.2.0` | `metadata` and `generateMetadata` introduced.                                                                                                           |"
        },
        {
            "sha": "a85c2d3c1c5addb93860bbbf749aace4a6d78760",
            "filename": "docs/01-app/04-api-reference/05-config/01-next-config-js/htmlLimitedBots.mdx",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/8986037d33c2247dcc5af2bade73bf260dfb4cf0/docs%2F01-app%2F04-api-reference%2F05-config%2F01-next-config-js%2FhtmlLimitedBots.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8986037d33c2247dcc5af2bade73bf260dfb4cf0/docs%2F01-app%2F04-api-reference%2F05-config%2F01-next-config-js%2FhtmlLimitedBots.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F04-api-reference%2F05-config%2F01-next-config-js%2FhtmlLimitedBots.mdx?ref=8986037d33c2247dcc5af2bade73bf260dfb4cf0",
            "patch": "@@ -0,0 +1,34 @@\n+---\n+title: htmlLimitedBots\n+description: Specify a list of user agents that should receive blocking metadata.\n+---\n+\n+The `htmlLimitedBots` config allows you to specify a list of user agents that should receive blocking metadata instead of [streaming metadata](/docs/app/api-reference/functions/generate-metadata#streaming-metadata).\n+\n+```ts filename=\"next.config.ts\" switcher\n+import type { NextConfig } from 'next'\n+\n+const config: NextConfig = {\n+  htmlLimitedBots: 'MySpecialBot|MyAnotherSpecialBot|SimpleCrawler',\n+}\n+\n+export default config\n+```\n+\n+```js filename=\"next.config.js\" switcher\n+module.exports = {\n+  htmlLimitedBots: 'MySpecialBot|MyAnotherSpecialBot|SimpleCrawler',\n+}\n+```\n+\n+## Default list\n+\n+Next.js includes [a default list of HTML limited bots](https://github.com/vercel/next.js/blob/canary/packages/next/src/shared/lib/router/utils/html-bots.ts).\n+\n+Specifying a `htmlLimitedBots` config will override the Next.js' default list, allowing you full control over what user agents should opt into this behavior. However, this is advanced behavior, and the default should be sufficient for most cases.\n+\n+## Version History\n+\n+| Version | Changes                              |\n+| ------- | ------------------------------------ |\n+| 15.2.0  | `htmlLimitedBots` option introduced. |"
        }
    ],
    "stats": {
        "total": 59,
        "additions": 50,
        "deletions": 9
    }
}