{
    "author": "mischnic",
    "message": "Turbopack: run tests with multiple threads (#84074)\n\nThese tests were broken\r\n```\r\n➜  next.js-other git:(mischnic/parallelize-merged-module-info) UPDATE=1 cargo nextest run -p turbopack-tests -E 'test(test_tests__execution__turbopack__basic__esm_this__input__index_js)' --no-capture\r\n    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.37s\r\n────────────\r\n Nextest run ID 1a4f74a3-a8a3-4049-bd6d-aa55a30c6dc2 with nextest profile: default\r\n    Starting 1 test across 3 binaries (247 tests skipped)\r\n       START             turbopack-tests::execution test_tests__execution__turbopack__basic__esm_this__input__index_js\r\n\r\nrunning 1 test\r\nInput: turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/esm-this/input/index.js\r\n\r\nthread 'test_tests__execution__turbopack__basic__esm_this__input__index_js' panicked at turbopack/crates/turbo-tasks/src/scope.rs:166:5:\r\ncan call blocking only when running on the multi-threaded runtime\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n\r\nthread 'test_tests__execution__turbopack__basic__esm_this__input__index_js' panicked at turbopack/crates/turbopack-tests/tests/execution.rs:99:77:\r\ncalled `Result::unwrap()` on an `Err` value: channel closed\r\ntest test_tests__execution__turbopack__basic__esm_this__input__index_js ... FAILED\r\n\r\nfailures:\r\n\r\nfailures:\r\n    test_tests__execution__turbopack__basic__esm_this__input__index_js\r\n\r\ntest result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 169 filtered out; finished in 0.18s\r\n\r\n        FAIL [   0.195s] turbopack-tests::execution test_tests__execution__turbopack__basic__esm_this__input__index_js\r\n  Cancelling due to test failure:\r\n────────────\r\n     Summary [   0.195s] 1 test run: 0 passed, 1 failed, 247 skipped\r\n        FAIL [   0.195s] turbopack-tests::execution test_tests__execution__turbopack__basic__esm_this__input__index_js\r\nerror: test run failed\r\n```",
    "sha": "237f142860d77b5cd1fd7e474176bf87dac11958",
    "files": [
        {
            "sha": "04066792941df7a9ba4360d962ef039c0295e6e6",
            "filename": "turbopack/crates/turbopack-tests/tests/execution.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/237f142860d77b5cd1fd7e474176bf87dac11958/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/237f142860d77b5cd1fd7e474176bf87dac11958/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs?ref=237f142860d77b5cd1fd7e474176bf87dac11958",
            "patch": "@@ -161,7 +161,7 @@ fn get_messages(js_results: JsResult) -> Vec<String> {\n     messages\n }\n \n-#[tokio::main(flavor = \"current_thread\")]\n+#[tokio::main(flavor = \"multi_thread\", worker_threads = 2)]\n async fn run(resource: PathBuf, snapshot_mode: IssueSnapshotMode) -> Result<JsResult> {\n     // Clean up old output files.\n     let output_path = resource.join(\"output\");"
        },
        {
            "sha": "3a500c11fbb98d58886a85aff10ca2158a326150",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/237f142860d77b5cd1fd7e474176bf87dac11958/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/237f142860d77b5cd1fd7e474176bf87dac11958/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs?ref=237f142860d77b5cd1fd7e474176bf87dac11958",
            "patch": "@@ -189,7 +189,7 @@ fn test(resource: PathBuf) {\n     run(resource).unwrap();\n }\n \n-#[tokio::main(flavor = \"current_thread\")]\n+#[tokio::main(flavor = \"multi_thread\", worker_threads = 2)]\n async fn run(resource: PathBuf) -> Result<()> {\n     let tt = TurboTasks::new(TurboTasksBackend::new(\n         BackendOptions {"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}