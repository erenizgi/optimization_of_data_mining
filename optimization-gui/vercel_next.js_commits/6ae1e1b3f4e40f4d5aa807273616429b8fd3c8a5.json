{
    "author": "eps1lon",
    "message": "[strict-route-types] Typecheck App Router page props (#87386)",
    "sha": "6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
    "files": [
        {
            "sha": "9db697fd59a110bdb4e981b4c0f40bd1678a3490",
            "filename": "packages/next/src/server/lib/router-utils/typegen.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -739,14 +739,14 @@ export function generateValidatorFileStrict(\n \n   if (appPageValidations) {\n     typeDefinitions += `type AppPageConfig<Route extends AppRoutes = AppRoutes> = {\n-  default: React.ComponentType<{ params: Promise<ParamMap[Route]> } & any> | ((props: { params: Promise<ParamMap[Route]> } & any) => React.ReactNode | Promise<React.ReactNode> | never | void | Promise<void>)\n+  default: React.ComponentType<PageProps<Route>> | ((props: PageProps<Route>) => React.ReactNode | Promise<React.ReactNode> | never | void | Promise<void>)\n   generateStaticParams?: (props: { params: ParamMap[Route] }) => Promise<any[]> | any[]\n   generateMetadata?: (\n-    props: { params: Promise<ParamMap[Route]> } & any,\n+    props: PageProps<Route>,\n     parent: ResolvingMetadata\n   ) => Promise<any> | any\n   generateViewport?: (\n-    props: { params: Promise<ParamMap[Route]> } & any,\n+    props: PageProps<Route>,\n     parent: ResolvingViewport\n   ) => Promise<any> | any\n   metadata?: any\n@@ -994,6 +994,7 @@ export function generateRouteTypesFileStrict(\n   // Build export statement based on what's actually generated\n   const routeExports = [\n     'AppRoutes',\n+    'PageProps',\n     'PageRoutes',\n     'LayoutRoutes',\n     'RedirectRoutes',"
        },
        {
            "sha": "58c162ec8c745ede6486bc12f7db0db0408d3ebc",
            "filename": "test/e2e/app-dir/cache-components/app/cases/full_cached/page.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fcases%2Ffull_cached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fcases%2Ffull_cached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fapp%2Fcases%2Ffull_cached%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -5,7 +5,7 @@ import { getSentinelValue } from '../../getSentinelValue'\n export default async function Page({\n   searchParams: _unused,\n }: {\n-  searchParams: Promise<{ n: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n   return (\n     <>"
        },
        {
            "sha": "beead4761b8ae810c0153674bfc3f55e2cdfeb45",
            "filename": "test/e2e/app-dir/not-found-with-pages-i18n/app/app-dir/[[...slug]]/page.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fnot-found-with-pages-i18n%2Fapp%2Fapp-dir%2F%5B%5B...slug%5D%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fnot-found-with-pages-i18n%2Fapp%2Fapp-dir%2F%5B%5B...slug%5D%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnot-found-with-pages-i18n%2Fapp%2Fapp-dir%2F%5B%5B...slug%5D%5D%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -22,10 +22,10 @@ async function validateSlug(slug: string[]) {\n export default async function CatchAll({\n   params,\n }: {\n-  params: Promise<{ slug: string[] }>\n+  params: Promise<{ slug?: string[] }>\n }) {\n   const { slug } = await params\n-  const slugArray = Array.isArray(slug) ? slug : [slug]\n+  const slugArray = Array.isArray(slug) ? slug : []\n \n   // Validate the slug\n   const isValid = await validateSlug(slugArray)"
        },
        {
            "sha": "eb5dab00422dd508b4fca8e0bf4f57521f4a7e2d",
            "filename": "test/e2e/app-dir/parallel-routes-revalidation/app/catchall/@interception2/(.)[...dynamic]/page.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fparallel-routes-revalidation%2Fapp%2Fcatchall%2F%40interception2%2F(.)%5B...dynamic%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fparallel-routes-revalidation%2Fapp%2Fcatchall%2F%40interception2%2F(.)%5B...dynamic%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fparallel-routes-revalidation%2Fapp%2Fcatchall%2F%40interception2%2F(.)%5B...dynamic%5D%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -5,7 +5,7 @@ import { useRouter } from 'next/navigation'\n export default function Page({\n   params,\n }: {\n-  params: Promise<{ dynamic: string }>\n+  params: Promise<{ dynamic: string[] }>\n }) {\n   const router = useRouter()\n   return ("
        },
        {
            "sha": "7b9732261c8602c46f520a401da3860aaa75979d",
            "filename": "test/e2e/app-dir/parallel-routes-revalidation/app/catchall/[...dynamic]/page.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fparallel-routes-revalidation%2Fapp%2Fcatchall%2F%5B...dynamic%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fparallel-routes-revalidation%2Fapp%2Fcatchall%2F%5B...dynamic%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fparallel-routes-revalidation%2Fapp%2Fcatchall%2F%5B...dynamic%5D%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -5,7 +5,7 @@ import { useRouter } from 'next/navigation'\n export default function Page({\n   params,\n }: {\n-  params: Promise<{ dynamic: string }>\n+  params: Promise<{ dynamic: string[] }>\n }) {\n   const router = useRouter()\n   return ("
        },
        {
            "sha": "3b79bfc11a578ee3bc7f23cd5d1b35293b77ea0a",
            "filename": "test/e2e/app-dir/revalidatetag-rsc/app/revalidate_via_page/page.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Frevalidatetag-rsc%2Fapp%2Frevalidate_via_page%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Frevalidatetag-rsc%2Fapp%2Frevalidate_via_page%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Frevalidatetag-rsc%2Fapp%2Frevalidate_via_page%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -6,10 +6,10 @@ import { revalidateTag } from 'next/cache'\n const RevalidateViaPage = async ({\n   searchParams,\n }: {\n-  searchParams: Promise<{ tag: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) => {\n   const { tag } = await searchParams\n-  revalidateTag(tag, 'max')\n+  revalidateTag(tag as any, 'max')\n \n   return (\n     <div className=\"flex flex-col items-center justify-center h-screen\">"
        },
        {
            "sha": "e4e0b22a2b8b1b704065e356340aded973c9c65c",
            "filename": "test/e2e/app-dir/segment-cache/client-params/app/[category]/[product]/page.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fclient-params%2Fapp%2F%5Bcategory%5D%2F%5Bproduct%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fclient-params%2Fapp%2F%5Bcategory%5D%2F%5Bproduct%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fclient-params%2Fapp%2F%5Bcategory%5D%2F%5Bproduct%5D%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -7,7 +7,7 @@ function Content({\n   searchParams,\n }: {\n   params: Promise<{ product: string }>\n-  searchParams: Promise<{ foo: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n   const { product } = use(params)\n   const searchParamsDict = use(searchParams)\n@@ -30,7 +30,7 @@ export default function ProductPage({\n   searchParams,\n }: {\n   params: Promise<{ product: string }>\n-  searchParams: Promise<{ foo: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n   return (\n     <Suspense fallback=\"Loading...\">"
        },
        {
            "sha": "321f9411e5a2fe72630176dfb3f5ef3074b99565",
            "filename": "test/e2e/app-dir/segment-cache/client-params/app/client-page-with-search-param/page.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fclient-params%2Fapp%2Fclient-page-with-search-param%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fclient-params%2Fapp%2Fclient-page-with-search-param%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fclient-params%2Fapp%2Fclient-page-with-search-param%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -2,7 +2,11 @@\n \n import { Suspense, use } from 'react'\n \n-function Content({ searchParams }: { searchParams: Promise<{ foo: string }> }) {\n+function Content({\n+  searchParams,\n+}: {\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n+}) {\n   const searchParamsDict = use(searchParams)\n \n   let query = null\n@@ -20,7 +24,7 @@ function Content({ searchParams }: { searchParams: Promise<{ foo: string }> }) {\n export default function ClientPageWithSearchParam({\n   searchParams,\n }: {\n-  searchParams: Promise<{ foo: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n   return (\n     <Suspense fallback=\"Loading...\">"
        },
        {
            "sha": "5cd3994f3ea3e641c92d00f5992fa66e014f061a",
            "filename": "test/e2e/app-dir/typed-routes-validator/typed-routes-validator.test.ts",
            "status": "modified",
            "additions": 44,
            "deletions": 10,
            "changes": 54,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Ftyped-routes-validator%2Ftyped-routes-validator.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Ftyped-routes-validator%2Ftyped-routes-validator.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Ftyped-routes-validator%2Ftyped-routes-validator.test.ts?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -2,24 +2,29 @@ import { nextTestSetup } from 'e2e-utils'\n import { getDistDir } from 'next-test-utils'\n \n describe('typed-routes-validator', () => {\n-  const { next, isNextStart, skipped } = nextTestSetup({\n+  const { next, isNextDev, isNextStart, skipped } = nextTestSetup({\n     files: __dirname,\n     skipDeployment: true,\n+    skipStart: true,\n   })\n \n   if (skipped) {\n     return\n   }\n \n   it('should generate route validation correctly', async () => {\n+    if (isNextDev) {\n+      await next.start()\n+    } else {\n+      await next.build()\n+    }\n     const dts = await next.readFile(`${getDistDir()}/types/validator.ts`)\n     // sanity check that dev generation is working\n     expect(dts).toContain('const handler = {} as typeof import(')\n   })\n \n   if (isNextStart) {\n     it('should pass type checking with valid page exports', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'app/test-page.tsx',\n         `\n@@ -37,7 +42,6 @@ describe('typed-routes-validator', () => {\n     })\n \n     it('should fail type checking with invalid page exports', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'app/invalid/page.tsx',\n         `\n@@ -56,8 +60,44 @@ describe('typed-routes-validator', () => {\n       )\n     })\n \n+    it('should pass type checking with valid page props', async () => {\n+      await next.patchFile(\n+        'app/valid/[id]/page.tsx',\n+        `\n+    export default function ValidPage(props: { params: Promise<{ id: string }> }) {\n+      return <div>Valid Page</div>\n+    }\n+            `\n+      )\n+\n+      const { exitCode } = await next.build()\n+      // clean up before assertion just in case it fails\n+      await next.deleteFile('app/valid/[id]/page.tsx')\n+\n+      expect(exitCode).toBe(0)\n+    })\n+\n+    it('should fail type checking with invalid page props', async () => {\n+      await next.patchFile(\n+        'app/invalid/page.tsx',\n+        `\n+    export default function InvalidPage(props: { invalidProp: string }) {\n+      return <div>Invalid Page</div>\n+    }\n+            `\n+      )\n+\n+      const { exitCode, cliOutput } = await next.build()\n+      // clean up before assertion just in case it fails\n+      await next.deleteFile('app/invalid/page.tsx')\n+\n+      expect(exitCode).toBe(1)\n+      expect(cliOutput).toMatch(\n+        /Type error: Type 'typeof import\\(.*' does not satisfy the constraint 'AppPageConfig</\n+      )\n+    })\n+\n     it('should pass type checking with valid route handler exports', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'app/valid/route.ts',\n         `\n@@ -95,7 +135,6 @@ describe('typed-routes-validator', () => {\n     })\n \n     it('should fail type checking with invalid route handler return type', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'app/invalid/route.ts',\n         `\n@@ -117,7 +156,6 @@ describe('typed-routes-validator', () => {\n     })\n \n     it('should fail type checking with invalid route handler params', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'app/invalid-2/route.ts',\n         `\n@@ -139,7 +177,6 @@ describe('typed-routes-validator', () => {\n     })\n \n     it('should pass type checking with valid layout exports', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'app/test/layout.tsx',\n         `\n@@ -160,7 +197,6 @@ describe('typed-routes-validator', () => {\n     })\n \n     it('should fail type checking with invalid layout exports', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'app/invalid/layout.tsx',\n         `\n@@ -182,7 +218,6 @@ describe('typed-routes-validator', () => {\n     })\n \n     it('should pass type checking with valid API route exports', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'pages/api/valid-api.ts',\n         `\n@@ -208,7 +243,6 @@ describe('typed-routes-validator', () => {\n     })\n \n     it('should fail type checking with invalid API route exports', async () => {\n-      await next.stop()\n       await next.patchFile(\n         'pages/api/invalid-api.ts',\n         `"
        },
        {
            "sha": "330016000a11d0247500a5ec638690907da171fd",
            "filename": "test/e2e/app-dir/use-cache-private/app/search-params/page.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache-private%2Fapp%2Fsearch-params%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache-private%2Fapp%2Fsearch-params%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-private%2Fapp%2Fsearch-params%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -1,7 +1,7 @@\n export default async function Page({\n   searchParams,\n }: {\n-  searchParams: Promise<{ [key: string]: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n   'use cache: private'\n "
        },
        {
            "sha": "75c32bab1451c3ce977825c973341a828f1b84c5",
            "filename": "test/e2e/app-dir/use-cache/app/(dynamic)/complex-args/page.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fcomplex-args%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fcomplex-args%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fcomplex-args%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -10,9 +10,9 @@ async function getCached({ p }) {\n export default async function Page({\n   searchParams,\n }: {\n-  searchParams: Promise<{ n: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n-  const n = parseInt((await searchParams).n, 16)\n+  const n = parseInt((await searchParams).n as any, 16)\n   const p = Promise.resolve(new Uint8Array([n]))\n   return <p id=\"x\">{await getCached({ p })}</p>\n }"
        },
        {
            "sha": "de5d4e493f1040ec96b1b8170590800c2d48e284",
            "filename": "test/e2e/app-dir/use-cache/app/(dynamic)/custom-handler/page.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fcustom-handler%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fcustom-handler%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fcustom-handler%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -10,9 +10,9 @@ async function getCachedRandom(x: number, children: React.ReactNode) {\n export default async function Page({\n   searchParams,\n }: {\n-  searchParams: Promise<{ n: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n-  const n = +(await searchParams).n\n+  const n = +(await searchParams).n!\n   const values = await getCachedRandom(\n     n,\n     <p id=\"r\">rnd{Math.random()}</p> // This should not invalidate the cache"
        },
        {
            "sha": "0b8ea300dc0ffae632f8f6e8d0a9c6ba75fa30ba",
            "filename": "test/e2e/app-dir/use-cache/app/(dynamic)/hoc/[slug]/with-slug.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fhoc%2F%5Bslug%5D%2Fwith-slug.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fhoc%2F%5Bslug%5D%2Fwith-slug.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fhoc%2F%5Bslug%5D%2Fwith-slug.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -1,7 +1,10 @@\n-export function withSlug<P extends { params: Promise<{ slug: string }> }>(\n+export function withSlug(\n   Component: React.ComponentType<{ slug: string }>\n-): React.ComponentType<{ params: Promise<{ slug: string }> }> {\n-  return async function ComponentWithSlug(props: P) {\n+): // TODO(NXT-127): Use ComponentType\n+React.JSXElementConstructor<{ params: Promise<{ slug: string }> }> {\n+  return async function ComponentWithSlug(props: {\n+    params: Promise<{ slug: string }>\n+  }) {\n     const params = await props.params\n     const slug = params.slug\n "
        },
        {
            "sha": "0bb2e072a2a84ab3946bb1aa1cf04c7c2dc6dacc",
            "filename": "test/e2e/app-dir/use-cache/app/(dynamic)/page.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fapp%2F(dynamic)%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -13,9 +13,9 @@ async function getCachedRandom(x: number, children: React.ReactNode) {\n export default async function Page({\n   searchParams,\n }: {\n-  searchParams: Promise<{ n: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n-  const n = +(await searchParams).n\n+  const n = +(await searchParams).n!\n   const values = await getCachedRandom(\n     n,\n     <p id=\"r\">rnd{Math.random()}</p> // This should not invalidate the cache"
        },
        {
            "sha": "442531eca568f5ca705f1df61ad0b251a6fdd0bb",
            "filename": "test/production/app-dir/build-output-ssg-bailout/app/ssg-bailout/[id]/page.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fproduction%2Fapp-dir%2Fbuild-output-ssg-bailout%2Fapp%2Fssg-bailout%2F%5Bid%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fproduction%2Fapp-dir%2Fbuild-output-ssg-bailout%2Fapp%2Fssg-bailout%2F%5Bid%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fbuild-output-ssg-bailout%2Fapp%2Fssg-bailout%2F%5Bid%5D%2Fpage.tsx?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -1,7 +1,7 @@\n export default async function Page({\n   searchParams,\n }: {\n-  searchParams: Promise<{ id: string }>\n+  searchParams: Promise<Record<string, string | string[] | undefined>>\n }) {\n   const { id } = await searchParams\n   return <p>hello world {id}</p>"
        },
        {
            "sha": "83daae35eb2a43ea3ab8ef5c69ce4d41396a69c0",
            "filename": "test/production/app-dir/types-gen-nounuselocal/types-gen-nounuselocal.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fproduction%2Fapp-dir%2Ftypes-gen-nounuselocal%2Ftypes-gen-nounuselocal.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5/test%2Fproduction%2Fapp-dir%2Ftypes-gen-nounuselocal%2Ftypes-gen-nounuselocal.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Ftypes-gen-nounuselocal%2Ftypes-gen-nounuselocal.test.ts?ref=6ae1e1b3f4e40f4d5aa807273616429b8fd3c8a5",
            "patch": "@@ -55,7 +55,7 @@ describe('types-gen-nounuselocal', () => {\n        }\n \n \n-       export type { AppRoutes, PageRoutes, LayoutRoutes, RedirectRoutes, RewriteRoutes, ParamMap }\n+       export type { AppRoutes, PageProps, PageRoutes, LayoutRoutes, RedirectRoutes, RewriteRoutes, ParamMap }\n \n        declare global {\n          /**"
        }
    ],
    "stats": {
        "total": 114,
        "additions": 78,
        "deletions": 36
    }
}