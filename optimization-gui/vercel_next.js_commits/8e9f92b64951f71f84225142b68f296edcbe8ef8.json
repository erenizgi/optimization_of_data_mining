{
    "author": "huozhi",
    "message": "[dev-overlay] pick up build error message (#76290)",
    "sha": "8e9f92b64951f71f84225142b68f296edcbe8ef8",
    "files": [
        {
            "sha": "9c889d364a70a8571bd68cbee8726b70ee204699",
            "filename": "packages/next/src/client/components/react-dev-overlay/_experimental/internal/container/build-error.tsx",
            "status": "modified",
            "additions": 24,
            "deletions": 4,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fcontainer%2Fbuild-error.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fcontainer%2Fbuild-error.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2F_experimental%2Finternal%2Fcontainer%2Fbuild-error.tsx?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -1,4 +1,5 @@\n-import * as React from 'react'\n+import React, { useCallback, useMemo } from 'react'\n+import stripAnsi from 'next/dist/compiled/strip-ansi'\n import { Terminal } from '../components/terminal'\n import { noop as css } from '../helpers/noop-template'\n import { ErrorOverlayLayout } from '../components/errors/error-overlay-layout/error-overlay-layout'\n@@ -8,22 +9,41 @@ export interface BuildErrorProps extends ErrorBaseProps {\n   message: string\n }\n \n+const getErrorTextFromBuildErrorMessage = (multiLineMessage: string) => {\n+  const lines = multiLineMessage.split('\\n')\n+  // The multi-line build error message looks like:\n+  // <file path>:<line number>:<column number>\n+  // <error message>\n+  // <error code frame of compiler or bundler>\n+  // e.g.\n+  // ./path/to/file.js:1:1\n+  // SyntaxError: ...\n+  // > 1 | con st foo =\n+  // ...\n+  return stripAnsi(lines[1] || '')\n+}\n+\n export const BuildError: React.FC<BuildErrorProps> = function BuildError({\n   message,\n   ...props\n }) {\n-  const noop = React.useCallback(() => {}, [])\n+  const noop = useCallback(() => {}, [])\n   const error = new Error(message)\n+  const formattedMessage = useMemo(\n+    () => getErrorTextFromBuildErrorMessage(message) || 'Failed to compile',\n+    [message]\n+  )\n+\n   return (\n     <ErrorOverlayLayout\n       errorType=\"Build Error\"\n-      errorMessage=\"Failed to compile\"\n+      errorMessage={formattedMessage}\n       onClose={noop}\n       error={error}\n       footerMessage=\"This error occurred during the build process and can only be dismissed by fixing the error.\"\n       {...props}\n     >\n-      <Terminal content={error.message} />\n+      <Terminal content={message} />\n     </ErrorOverlayLayout>\n   )\n }"
        },
        {
            "sha": "3e35be3c565f3d7e17489fe0f4b82f588a0620c8",
            "filename": "packages/next/src/client/components/react-dev-overlay/pages/hot-reloader-client.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhot-reloader-client.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhot-reloader-client.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fpages%2Fhot-reloader-client.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -195,6 +195,7 @@ function handleErrors(errors: any) {\n   })\n \n   // Only show the first error.\n+\n   onBuildError(formatted.errors[0])\n \n   // Also log them to the console."
        },
        {
            "sha": "2f237e95d962f542efca0ec1fe4a8b45761d7366",
            "filename": "test/development/acceptance-app/error-recovery.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -4,9 +4,10 @@ import { FileRef, nextTestSetup } from 'e2e-utils'\n import { check, describeVariants as describe } from 'next-test-utils'\n import path from 'path'\n import { outdent } from 'outdent'\n+import stripAnsi from 'strip-ansi'\n \n describe.each(['default', 'turbo'])('Error recovery app %s', () => {\n-  const { next } = nextTestSetup({\n+  const { next, isTurbopack } = nextTestSetup({\n     files: new FileRef(path.join(__dirname, 'fixtures', 'default-template')),\n     skipStart: true,\n   })\n@@ -470,8 +471,12 @@ describe.each(['default', 'turbo'])('Error recovery app %s', () => {\n     )\n     const { session } = sandbox\n     await session.assertHasRedbox()\n-    await expect(session.getRedboxSource(true)).resolves.toMatch(\n-      /Failed to compile/\n-    )\n+\n+    const source = stripAnsi(await session.getRedboxSource(true))\n+    if (isTurbopack) {\n+      expect(source).toMatch(/Parsing ecmascript source code failed/)\n+    } else {\n+      expect(source).toMatch(/x Expected '}', got '<eof>'/)\n+    }\n   })\n })"
        },
        {
            "sha": "d182fd8332b6cf605e62cb27c785fe0ba72d7d58",
            "filename": "test/development/app-dir/dynamic-io-dev-errors/dynamic-io-dev-errors.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fdynamic-io-dev-errors.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -142,7 +142,7 @@ describe('Dynamic IO Dev Errors', () => {\n       await expect(browser).toDisplayRedbox(`\n          {\n            \"count\": 1,\n-           \"description\": \"Failed to compile\",\n+           \"description\": \"Ecmascript file had an error\",\n            \"environmentLabel\": null,\n            \"label\": \"Build Error\",\n            \"source\": \"./app/page.tsx (1:14)\n@@ -156,7 +156,7 @@ describe('Dynamic IO Dev Errors', () => {\n       await expect(browser).toDisplayRedbox(`\n        {\n          \"count\": 1,\n-         \"description\": \"Failed to compile\",\n+         \"description\": \"Error:   x Route segment config \"revalidate\" is not compatible with \\`nextConfig.experimental.dynamicIO\\`. Please remove it.\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n          \"source\": \"./app/page.tsx"
        },
        {
            "sha": "a988bdf30ae83145c02625fb3c5e472ebcb0f862",
            "filename": "test/development/app-dir/server-component-next-dynamic-ssr-false/server-component-next-dynamic-ssr-false.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fserver-component-next-dynamic-ssr-false%2Fserver-component-next-dynamic-ssr-false.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -18,9 +18,10 @@ describe('app-dir - server-component-next-dynamic-ssr-false', () => {\n       source: await getRedboxSource(browser),\n     }\n \n-    expect(redbox.description).toBe('Failed to compile')\n-\n     if (process.env.TURBOPACK) {\n+      expect(redbox.description).toMatchInlineSnapshot(\n+        `\"Ecmascript file had an error\"`\n+      )\n       expect(redbox.source).toMatchInlineSnapshot(`\n          \"./app/page.js (3:23)\n          Ecmascript file had an error\n@@ -35,6 +36,9 @@ describe('app-dir - server-component-next-dynamic-ssr-false', () => {\n          \\`ssr: false\\` is not allowed with \\`next/dynamic\\` in Server Components. Please move it into a client component.\"\n         `)\n     } else {\n+      expect(redbox.description).toMatchInlineSnapshot(\n+        `\"Error:   x \\`ssr: false\\` is not allowed with \\`next/dynamic\\` in Server Components. Please move it into a client component.\"`\n+      )\n       expect(redbox.source).toMatchInlineSnapshot(`\n          \"./app/page.js\n          Error:   x \\`ssr: false\\` is not allowed with \\`next/dynamic\\` in Server Components. Please move it into a client component."
        },
        {
            "sha": "bb6773e95e1f89aeebcaa5c395feb5cbfd8e3e3a",
            "filename": "test/development/app-dir/ssr-in-rsc/ssr-in-rsc.test.ts",
            "status": "modified",
            "additions": 25,
            "deletions": 25,
            "changes": 50,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fssr-in-rsc%2Fssr-in-rsc.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -283,7 +283,7 @@ describe('react-dom/server in React Server environment', () => {\n     if (isTurbopack) {\n       expect(redbox).toMatchInlineSnapshot(`\n        {\n-         \"description\": \"Failed to compile\",\n+         \"description\": \"Ecmascript file had an error\",\n          \"source\": \"./app/exports/app-code/react-dom-server-edge-implicit/page.js (3:1)\n        Ecmascript file had an error\n          1 | import * as ReactDOMServerEdge from 'react-dom/server'\n@@ -378,7 +378,7 @@ describe('react-dom/server in React Server environment', () => {\n     if (isTurbopack) {\n       expect(redbox).toMatchInlineSnapshot(`\n        {\n-         \"description\": \"Failed to compile\",\n+         \"description\": \"Ecmascript file had an error\",\n          \"source\": \"./app/exports/app-code/react-dom-server-node-implicit/page.js (3:1)\n        Ecmascript file had an error\n          1 | import * as ReactDOMServerNode from 'react-dom/server'\n@@ -395,29 +395,29 @@ describe('react-dom/server in React Server environment', () => {\n       `)\n     } else {\n       expect(redbox).toMatchInlineSnapshot(`\n-         {\n-           \"description\": \"Failed to compile\",\n-           \"source\": \"./app/exports/app-code/react-dom-server-node-implicit/page.js\n-         Error:   x You're importing a component that imports react-dom/server. To fix it, render or return the content directly as a Server Component instead for perf and security.\n-           | Learn more: https://nextjs.org/docs/app/building-your-application/rendering\n-            ,-[1:1]\n-          1 | import * as ReactDOMServerNode from 'react-dom/server'\n-            : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-          2 | // Fine to drop once React is on ESM\n-          3 | import ReactDOMServerNodeDefault from 'react-dom/server'\n-            \\`----\n-           x You're importing a component that imports react-dom/server. To fix it, render or return the content directly as a Server Component instead for perf and security.\n-           | Learn more: https://nextjs.org/docs/app/building-your-application/rendering\n-            ,-[3:1]\n-          1 | import * as ReactDOMServerNode from 'react-dom/server'\n-          2 | // Fine to drop once React is on ESM\n-          3 | import ReactDOMServerNodeDefault from 'react-dom/server'\n-            : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-          4 | \n-          5 | export const runtime = 'nodejs'\n-            \\`----\",\n-         }\n-        `)\n+       {\n+         \"description\": \"Error:   x You're importing a component that imports react-dom/server. To fix it, render or return the content directly as a Server Component instead for perf and security.\",\n+         \"source\": \"./app/exports/app-code/react-dom-server-node-implicit/page.js\n+       Error:   x You're importing a component that imports react-dom/server. To fix it, render or return the content directly as a Server Component instead for perf and security.\n+         | Learn more: https://nextjs.org/docs/app/building-your-application/rendering\n+          ,-[1:1]\n+        1 | import * as ReactDOMServerNode from 'react-dom/server'\n+          : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+        2 | // Fine to drop once React is on ESM\n+        3 | import ReactDOMServerNodeDefault from 'react-dom/server'\n+          \\`----\n+         x You're importing a component that imports react-dom/server. To fix it, render or return the content directly as a Server Component instead for perf and security.\n+         | Learn more: https://nextjs.org/docs/app/building-your-application/rendering\n+          ,-[3:1]\n+        1 | import * as ReactDOMServerNode from 'react-dom/server'\n+        2 | // Fine to drop once React is on ESM\n+        3 | import ReactDOMServerNodeDefault from 'react-dom/server'\n+          : ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+        4 | \n+        5 | export const runtime = 'nodejs'\n+          \\`----\",\n+       }\n+      `)\n     }\n   })\n "
        },
        {
            "sha": "dbff216fb892982a70157fe363fdc1578ad6ecab",
            "filename": "test/development/basic/hmr/error-recovery.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fbasic%2Fhmr%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fbasic%2Fhmr%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fbasic%2Fhmr%2Ferror-recovery.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -519,7 +519,7 @@ describe.each([\n         )\n \n         await assertHasRedbox(browser)\n-        expect(await getRedboxHeader(browser)).toMatch('Failed to compile')\n+        expect(await getRedboxHeader(browser)).toMatch('Build Error')\n \n         if (process.env.TURBOPACK) {\n           expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n@@ -587,7 +587,7 @@ describe.each([\n         )\n \n         await assertHasRedbox(browser)\n-        expect(await getRedboxHeader(browser)).toMatch('Failed to compile')\n+        expect(await getRedboxHeader(browser)).toMatch('Build Error')\n         let redboxSource = await getRedboxSource(browser)\n \n         redboxSource = redboxSource.replace(`${next.testDir}`, '.')"
        },
        {
            "sha": "7bc2e251094f9a4b2c820d74ec781764a57e4b9f",
            "filename": "test/development/middleware-errors/index.test.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 3,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fmiddleware-errors%2Findex.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -2,6 +2,7 @@ import {\n   assertHasRedbox,\n   assertNoRedbox,\n   check,\n+  getRedboxDescription,\n   getRedboxSource,\n   retry,\n } from 'next-test-utils'\n@@ -330,9 +331,16 @@ describe('middleware - development errors', () => {\n     it('renders the error correctly and recovers', async () => {\n       const browser = await next.browser('/')\n       await assertHasRedbox(browser)\n-      expect(\n-        await browser.elementByCss('#nextjs__container_errors_desc').text()\n-      ).toEqual('Failed to compile')\n+      const description = await getRedboxDescription(browser)\n+      if (isTurbopack) {\n+        expect(description).toMatchInlineSnapshot(\n+          `\"Parsing ecmascript source code failed\"`\n+        )\n+      } else {\n+        expect(description).toMatchInlineSnapshot(\n+          `\"Error:   x Expected '{', got '}'\"`\n+        )\n+      }\n       await next.patchFile('middleware.js', `export default function () {}`)\n       await assertNoRedbox(browser)\n       expect(await browser.elementByCss('#page-title')).toBeTruthy()"
        },
        {
            "sha": "b60dd84711c4a9dd9af8c5923edadf2be8eb9f21",
            "filename": "test/e2e/app-dir/dynamic-io-segment-configs/dynamic-io-segment-configs.test.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 4,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fe2e%2Fapp-dir%2Fdynamic-io-segment-configs%2Fdynamic-io-segment-configs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fe2e%2Fapp-dir%2Fdynamic-io-segment-configs%2Fdynamic-io-segment-configs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-segment-configs%2Fdynamic-io-segment-configs.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -32,7 +32,15 @@ describe('dynamic-io-segment-configs', () => {\n         source: await getRedboxSource(browser),\n       }\n \n-      expect(redbox.description).toMatchInlineSnapshot(`\"Failed to compile\"`)\n+      if (isTurbopack) {\n+        expect(redbox.description).toMatchInlineSnapshot(\n+          `\"Ecmascript file had an error\"`\n+        )\n+      } else {\n+        expect(redbox.description).toMatchInlineSnapshot(\n+          `\"Error:   x Route segment config \"revalidate\" is not compatible with \\`nextConfig.experimental.dynamicIO\\`. Please remove it.\"`\n+        )\n+      }\n       expect(redbox.source).toContain(\n         '\"revalidate\" is not compatible with `nextConfig.experimental.dynamicIO`. Please remove it.'\n       )\n@@ -85,9 +93,15 @@ describe('dynamic-io-segment-configs', () => {\n             source: await getRedboxSource(browser),\n           }\n \n-          expect(redbox.description).toMatchInlineSnapshot(\n-            `\"Failed to compile\"`\n-          )\n+          if (isTurbopack) {\n+            expect(redbox.description).toMatchInlineSnapshot(\n+              `\"Ecmascript file had an error\"`\n+            )\n+          } else {\n+            expect(redbox.description).toMatchInlineSnapshot(\n+              `\"Error:   x Route segment config \"runtime\" is not compatible with \\`nextConfig.experimental.dynamicIO\\`. Please remove it.\"`\n+            )\n+          }\n           expect(redbox.source).toContain(\n             '\"runtime\" is not compatible with `nextConfig.experimental.dynamicIO`. Please remove it.'\n           )"
        },
        {
            "sha": "7ad9295f48885706fd5ce0b20a9cefe48df394f8",
            "filename": "test/e2e/app-dir/use-cache-segment-configs/use-cache-segment-configs.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -26,10 +26,11 @@ describe('use-cache-segment-configs', () => {\n         await assertHasRedbox(browser)\n \n         const description = await getRedboxDescription(browser)\n+        expect(description).toMatchInlineSnapshot(\n+          `\"Ecmascript file had an error\"`\n+        )\n         const source = await getRedboxSource(browser)\n \n-        expect(description).toBe('Failed to compile')\n-\n         expect(source).toMatchInlineSnapshot(`\n          \"./app/runtime/page.tsx (1:14)\n          Ecmascript file had an error"
        },
        {
            "sha": "15328fda5c3bd05844b4e8c12cc3ff67e31ec785",
            "filename": "test/e2e/app-dir/use-cache-unknown-cache-kind/use-cache-unknown-cache-kind.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -100,7 +100,15 @@ describe('use-cache-unknown-cache-kind', () => {\n       const errorDescription = await getRedboxDescription(browser)\n       const errorSource = await getRedboxSource(browser)\n \n-      expect(errorDescription).toBe('Failed to compile')\n+      if (isTurbopack) {\n+        expect(errorDescription).toMatchInlineSnapshot(\n+          `\"Ecmascript file had an error\"`\n+        )\n+      } else {\n+        expect(errorDescription).toMatchInlineSnapshot(\n+          `\"Error:   x Unknown cache kind \"custom\". Please configure a cache handler for this kind in the \"experimental.cacheHandlers\" object in your Next.js config.\"`\n+        )\n+      }\n \n       if (isTurbopack) {\n         expect(errorSource).toMatchInlineSnapshot(`"
        },
        {
            "sha": "535af2e5c768bdc08110d5cc6480187a1b99c893",
            "filename": "test/e2e/app-dir/use-cache-without-experimental-flag/use-cache-without-experimental-flag.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -84,7 +84,15 @@ describe('use-cache-without-experimental-flag', () => {\n       const errorDescription = await getRedboxDescription(browser)\n       const errorSource = await getRedboxSource(browser)\n \n-      expect(errorDescription).toBe('Failed to compile')\n+      if (isTurbopack) {\n+        expect(errorDescription).toMatchInlineSnapshot(\n+          `\"Ecmascript file had an error\"`\n+        )\n+      } else {\n+        expect(errorDescription).toMatchInlineSnapshot(\n+          `\"Error:   x To use \"use cache\", please enable the experimental feature flag \"useCache\" in your Next.js config.\"`\n+        )\n+      }\n \n       if (isTurbopack) {\n         expect(errorSource).toMatchInlineSnapshot(`"
        },
        {
            "sha": "fc897047d5646675f6bfa0f6a89238015004e9da",
            "filename": "test/integration/next-image-new/invalid-image-import/test/index.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fintegration%2Fnext-image-new%2Finvalid-image-import%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8e9f92b64951f71f84225142b68f296edcbe8ef8/test%2Fintegration%2Fnext-image-new%2Finvalid-image-import%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Finvalid-image-import%2Ftest%2Findex.test.ts?ref=8e9f92b64951f71f84225142b68f296edcbe8ef8",
            "patch": "@@ -4,7 +4,7 @@ import { join } from 'path'\n import {\n   assertHasRedbox,\n   findPort,\n-  getRedboxHeader,\n+  getRedboxDescription,\n   getRedboxSource,\n   killApp,\n   launchApp,\n@@ -23,7 +23,14 @@ function runTests({ isDev }) {\n     if (isDev) {\n       const browser = await webdriver(appPort, '/')\n       await assertHasRedbox(browser)\n-      expect(await getRedboxHeader(browser)).toMatch('Failed to compile')\n+      const description = await getRedboxDescription(browser)\n+      if (process.env.TURBOPACK) {\n+        expect(description).toMatchInlineSnapshot(`\"Processing image failed\"`)\n+      } else {\n+        expect(description).toMatchInlineSnapshot(\n+          `\"Error: Image import \"../public/invalid.svg\" is not a valid image file. The image may be corrupted or an unsupported format.\"`\n+        )\n+      }\n       const source = await getRedboxSource(browser)\n       if (process.env.TURBOPACK) {\n         expect(source).toMatchInlineSnapshot(`"
        }
    ],
    "stats": {
        "total": 180,
        "additions": 128,
        "deletions": 52
    }
}