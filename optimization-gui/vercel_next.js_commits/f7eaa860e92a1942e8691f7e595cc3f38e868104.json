{
    "author": "gaearon",
    "message": "Update MDX documentation to use next-mdx-remote-client (#78347)\n\nCo-authored-by: Delba de Oliveira <32464864+delbaoliveira@users.noreply.github.com>",
    "sha": "f7eaa860e92a1942e8691f7e595cc3f38e868104",
    "files": [
        {
            "sha": "7ed8e9aecbbbed5820bb6a8aebab2ea91fd807a9",
            "filename": "docs/01-app/02-guides/mdx.mdx",
            "status": "modified",
            "additions": 36,
            "deletions": 15,
            "changes": 51,
            "blob_url": "https://github.com/vercel/next.js/blob/f7eaa860e92a1942e8691f7e595cc3f38e868104/docs%2F01-app%2F02-guides%2Fmdx.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/f7eaa860e92a1942e8691f7e595cc3f38e868104/docs%2F01-app%2F02-guides%2Fmdx.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmdx.mdx?ref=f7eaa860e92a1942e8691f7e595cc3f38e868104",
            "patch": "@@ -58,7 +58,19 @@ const withMDX = createMDX({\n export default withMDX(nextConfig)\n ```\n \n-This allows `.md` and `.mdx` files to act as pages, routes, or imports in your application.\n+This allows `.mdx` files to act as pages, routes, or imports in your application.\n+\n+### Handling `.md` files\n+\n+By default, `next/mdx` only compiles files with the `.mdx` extension. To handle `.md` files with webpack, update the `extension` option:\n+\n+```js filename=\"next.config.mjs\"\n+const withMDX = createMDX({\n+  extension: /\\.(md|mdx)$/,\n+})\n+```\n+\n+> **Good to know**: [Turbopack](/docs/app/api-reference/turbopack) does not currently support the `extension` option and therefore does not support `.md` files.\n \n ## Add an `mdx-components.tsx` file\n \n@@ -731,16 +743,16 @@ export default withMDX(nextConfig)\n \n ## Remote MDX\n \n-If your MDX files or content lives _somewhere else_, you can fetch it dynamically on the server. This is useful for content stored in a CMS, database, or anywhere else. A popular community package for this use is [`next-mdx-remote`](https://github.com/hashicorp/next-mdx-remote#react-server-components-rsc--nextjs-app-directory-support).\n+If your MDX files or content lives _somewhere else_, you can fetch it dynamically on the server. This is useful for content stored in a CMS, database, or anywhere else. A community package for this use is [`next-mdx-remote-client`](https://github.com/ipikuka/next-mdx-remote-client?tab=readme-ov-file#the-part-associated-with-nextjs-app-router).\n \n > **Good to know**: Please proceed with caution. MDX compiles to JavaScript and is executed on the server. You should only fetch MDX content from a trusted source, otherwise this can lead to remote code execution (RCE).\n \n-The following example uses `next-mdx-remote`:\n+The following example uses `next-mdx-remote-client`:\n \n <AppOnly>\n \n ```tsx filename=\"app/mdx-page-remote/page.tsx\" switcher\n-import { MDXRemote } from 'next-mdx-remote/rsc'\n+import { MDXRemote } from 'next-mdx-remote-client/rsc'\n \n export default async function RemoteMdxPage() {\n   // MDX text - can be from a database, CMS, fetch, anywhere...\n@@ -751,7 +763,7 @@ export default async function RemoteMdxPage() {\n ```\n \n ```jsx filename=\"app/mdx-page-remote/page.js\" switcher\n-import { MDXRemote } from 'next-mdx-remote/rsc'\n+import { MDXRemote } from 'next-mdx-remote-client/rsc'\n \n export default async function RemoteMdxPage() {\n   // MDX text - can be from a database, CMS, fetch, anywhere...\n@@ -766,39 +778,48 @@ export default async function RemoteMdxPage() {\n <PagesOnly>\n \n ```tsx filename=\"pages/mdx-page-remote.tsx\" switcher\n-import { serialize } from 'next-mdx-remote/serialize'\n-import { MDXRemote, MDXRemoteSerializeResult } from 'next-mdx-remote'\n+import {\n+  serialize,\n+  type SerializeResult,\n+} from 'next-mdx-remote-client/serialize'\n+import { MDXClient } from 'next-mdx-remote-client'\n \n-interface Props {\n-  mdxSource: MDXRemoteSerializeResult\n+type Props = {\n+  mdxSource: SerializeResult\n }\n \n export default function RemoteMdxPage({ mdxSource }: Props) {\n-  return <MDXRemote {...mdxSource} />\n+  if ('error' in mdxSource) {\n+    // either render error UI or throw `mdxSource.error`\n+  }\n+  return <MDXClient {...mdxSource} />\n }\n \n export async function getStaticProps() {\n   // MDX text - can be from a database, CMS, fetch, anywhere...\n   const res = await fetch('https:...')\n   const mdxText = await res.text()\n-  const mdxSource = await serialize(mdxText)\n+  const mdxSource = await serialize({ source: mdxText })\n   return { props: { mdxSource } }\n }\n ```\n \n ```jsx filename=\"pages/mdx-page-remote.js\" switcher\n-import { serialize } from 'next-mdx-remote/serialize'\n-import { MDXRemote } from 'next-mdx-remote'\n+import { serialize } from 'next-mdx-remote-client/serialize'\n+import { MDXClient } from 'next-mdx-remote-client'\n \n export default function RemoteMdxPage({ mdxSource }) {\n-  return <MDXRemote {...mdxSource} />\n+  if ('error' in mdxSource) {\n+    // either render error UI or throw `mdxSource.error`\n+  }\n+  return <MDXClient {...mdxSource} />\n }\n \n export async function getStaticProps() {\n   // MDX text - can be from a database, CMS, fetch, anywhere...\n   const res = await fetch('https:...')\n   const mdxText = await res.text()\n-  const mdxSource = await serialize(mdxText)\n+  const mdxSource = await serialize({ source: mdxText })\n   return { props: { mdxSource } }\n }\n ```"
        }
    ],
    "stats": {
        "total": 51,
        "additions": 36,
        "deletions": 15
    }
}