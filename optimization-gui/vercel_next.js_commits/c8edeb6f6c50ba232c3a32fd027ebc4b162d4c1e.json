{
    "author": "wyattjoh",
    "message": "Remove clientParamParsing requirement from RDC for Navigations (#83661)\n\n### What?\n\nRemoves the temporary constraint that required `clientParamParsing` to\nbe enabled for Resume Data Cache (RDC) for Navigations in PPR-enabled\napplications.\n\n### Why?\n\nThe upstream builder configuration issue that caused invalid query\nparameters to be passed to resume lambdas has been resolved. The\n`clientParamParsing` requirement was a temporary workaround that can now\nbe safely removed.\n\nThis enhancement allows more users on PPR to automatically benefit from\nRDC for RSC requests, improving performance by eliminating waterfalls\nwhen resuming prerendered pages without requiring additional feature\nflags.\n\n### How?\n\n- Removed the `clientParamParsing` check from both build configuration\nand app-page template\n- Simplified the feature enablement logic for RDC in navigation\nscenarios\n\nThe change affects two files:\n- `packages/next/src/build/index.ts`: Build-time configuration logic\n- `packages/next/src/build/templates/app-page.ts`: Runtime navigation\nsupport detection\n\nNAR-385",
    "sha": "c8edeb6f6c50ba232c3a32fd027ebc4b162d4c1e",
    "files": [
        {
            "sha": "e4d13e06cdf3cb1b03bd0a5fc65e681ce52fd563",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/c8edeb6f6c50ba232c3a32fd027ebc4b162d4c1e/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c8edeb6f6c50ba232c3a32fd027ebc4b162d4c1e/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=c8edeb6f6c50ba232c3a32fd027ebc4b162d4c1e",
            "patch": "@@ -1574,12 +1574,7 @@ export default async function build(\n                 // Once we've made RDC for Navigations the default for PPR, we\n                 // can remove the check for `config.experimental.rdcForNavigations`.\n                 isAppPPREnabled &&\n-                config.experimental.rdcForNavigations === true &&\n-                // Temporarily we require that clientParamParsing is enabled for\n-                // RDC for Navigations. This is due to a builder configuration\n-                // bug that manifests as invalid query params being passed to\n-                // the resume lambdas.\n-                config.experimental.clientParamParsing === true,\n+                config.experimental.rdcForNavigations === true,\n             },\n             rewriteHeaders: {\n               pathHeader: NEXT_REWRITTEN_PATH_HEADER,\n@@ -2199,7 +2194,8 @@ export default async function build(\n \n                       if (pageType === 'app' && originalAppPath) {\n                         appNormalizedPaths.set(originalAppPath, page)\n-                        // TODO-APP: handle prerendering with edge\n+\n+                        // Edge runtime doesn't support static generation.\n                         if (isEdgeRuntime(pageRuntime)) {\n                           isStatic = false\n                           isSSG = false"
        },
        {
            "sha": "98751e1c039f14bc3464cda84192e4cb060acf2d",
            "filename": "packages/next/src/build/templates/app-page.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 7,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/c8edeb6f6c50ba232c3a32fd027ebc4b162d4c1e/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c8edeb6f6c50ba232c3a32fd027ebc4b162d4c1e/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts?ref=c8edeb6f6c50ba232c3a32fd027ebc4b162d4c1e",
            "patch": "@@ -294,13 +294,7 @@ export async function handler(\n   // When a page supports PPR, we can support RSC for Navigations so long as the\n   // feature is not disabled.\n   const supportsRSCForNavigations =\n-    isRoutePPREnabled &&\n-    nextConfig.experimental.rdcForNavigations === true &&\n-    // Temporarily we require that clientParamParsing is enabled for\n-    // RDC for Navigations. This is due to a builder configuration\n-    // bug that manifests as invalid query params being passed to\n-    // the resume lambdas.\n-    nextConfig.experimental.clientParamParsing === true\n+    isRoutePPREnabled && nextConfig.experimental.rdcForNavigations === true\n \n   // In development, we always want to generate dynamic HTML.\n   const supportsDynamicResponse: boolean ="
        }
    ],
    "stats": {
        "total": 18,
        "additions": 4,
        "deletions": 14
    }
}