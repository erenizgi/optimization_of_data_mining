{
    "author": "kdy1",
    "message": "feat(next-swc): Add a fast path to RC detector (#78920)\n\n### What?\n\nAdd a fast path to the React compiler detector.\n\n### Why?\n\nhttps://github.com/vercel/next.js/pull/78874#issuecomment-2857798974",
    "sha": "be6c8ee284ce72ee88792387b0f4d3616dd1ddde",
    "files": [
        {
            "sha": "553019bc4e2edaca5e7738f7720d1335d28e6b42",
            "filename": "crates/next-custom-transforms/src/react_compiler.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 1,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/be6c8ee284ce72ee88792387b0f4d3616dd1ddde/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/be6c8ee284ce72ee88792387b0f4d3616dd1ddde/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs?ref=be6c8ee284ce72ee88792387b0f4d3616dd1ddde",
            "patch": "@@ -1,5 +1,5 @@\n use swc_core::ecma::{\n-    ast::{Callee, Expr, FnDecl, FnExpr, Pat, Program, ReturnStmt, VarDeclarator},\n+    ast::{Callee, Expr, FnDecl, FnExpr, Pat, Program, ReturnStmt, Stmt, VarDeclarator},\n     visit::{Visit, VisitWith},\n };\n \n@@ -34,6 +34,13 @@ impl Visit for Finder {\n         node.visit_children_with(self);\n     }\n \n+    fn visit_expr(&mut self, node: &Expr) {\n+        if self.found {\n+            return;\n+        }\n+        node.visit_children_with(self);\n+    }\n+\n     fn visit_fn_decl(&mut self, node: &FnDecl) {\n         let old = self.is_interested;\n         self.is_interested = node.ident.sym.starts_with(\"use\")\n@@ -69,6 +76,13 @@ impl Visit for Finder {\n         node.visit_children_with(self);\n     }\n \n+    fn visit_stmt(&mut self, node: &Stmt) {\n+        if self.found {\n+            return;\n+        }\n+        node.visit_children_with(self);\n+    }\n+\n     fn visit_var_declarator(&mut self, node: &VarDeclarator) {\n         let old = self.is_interested;\n "
        }
    ],
    "stats": {
        "total": 16,
        "additions": 15,
        "deletions": 1
    }
}