{
    "author": "eps1lon",
    "message": "Include `eslint-plugin-react-hooks` in React sync (#82294)\n\n`eslint-plugin-react-hooks` is also published in React's nightly release cycle. I want to start dog fooding it in Next.js so that we can spot issues as early as possible.\r\n\r\nIt also includes some new heuristics that are important to flag React Compiler incompatibilities. Compat with the React Compiler of the Next.js codebase is especially relevant for Next DevTools which uses the React Compiler.\r\n\r\nI'll follow-up on these violations. Each need different treatment.",
    "sha": "75f33f0ea75861b4f86d0786b7447622dc080b55",
    "files": [
        {
            "sha": "05fbdb7f2e297c1318e75200eb715fc32a1d7c2c",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/package.json",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/package.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/package.json?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -173,7 +173,7 @@\n     \"eslint-plugin-jsdoc\": \"48.0.4\",\n     \"eslint-plugin-mdx\": \"3.1.5\",\n     \"eslint-plugin-react\": \"7.35.0\",\n-    \"eslint-plugin-react-hooks\": \"6.0.0-rc.1\",\n+    \"eslint-plugin-react-hooks\": \"0.0.0-experimental-c260b38d-20250731\",\n     \"eslint-v8\": \"npm:eslint@^8.57.0\",\n     \"event-stream\": \"4.0.1\",\n     \"execa\": \"2.0.3\","
        },
        {
            "sha": "094cff276c4550ddb23653ab85946fb7566f4a5a",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-indicator/hooks/use-minimum-loading-time-multiple.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fhooks%2Fuse-minimum-loading-time-multiple.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fhooks%2Fuse-minimum-loading-time-multiple.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fhooks%2Fuse-minimum-loading-time-multiple.ts?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -31,6 +31,7 @@ export function useMinimumLoadingTimeMultiple(\n       if (loadStartTimeRef.current === null) {\n         loadStartTimeRef.current = Date.now()\n       }\n+      // eslint-disable-next-line react-hooks/react-compiler -- TODO\n       setIsLoading(true)\n     } else {\n       // If we're exiting the \"loading\" state:"
        },
        {
            "sha": "c720587f68028bd20585318d4f64cc9c7cc0277c",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-indicator/hooks/use-update-animation.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fhooks%2Fuse-update-animation.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fhooks%2Fuse-update-animation.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fhooks%2Fuse-update-animation.ts?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -19,6 +19,7 @@ export function useUpdateAnimation(\n         return\n       }\n \n+      // eslint-disable-next-line react-hooks/react-compiler -- TODO\n       setAnimate(true)\n       // It is important to use a CSS transitioned state, not a CSS keyframed animation\n       // because if the issue count increases faster than the animation duration, it"
        },
        {
            "sha": "3203abc24a1a4602ea346bc8d0f8ee9e5d67e09c",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-indicator/next-logo.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fnext-logo.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fnext-logo.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fnext-logo.tsx?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -44,6 +44,7 @@ export function NextLogo({\n   const width = measuredWidth === 0 ? 'auto' : measuredWidth\n \n   useEffect(() => {\n+    // eslint-disable-next-line react-hooks/react-compiler -- TODO\n     setIsErrorExpanded(hasError)\n   }, [hasError])\n "
        },
        {
            "sha": "54114b149aa32df9b50dd9c2be83b078080e12f6",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/resize/resize-handle.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -76,6 +76,7 @@ export const ResizeHandle = ({\n     const borderBottom = parseFloat(computedStyle.borderBottomWidth) || 0\n     const borderLeft = parseFloat(computedStyle.borderLeftWidth) || 0\n \n+    // eslint-disable-next-line react-hooks/react-compiler -- TODO\n     setBorderWidths({\n       top: borderTop,\n       right: borderRight,"
        },
        {
            "sha": "82c4f077aa5b25efc4a6a5acbdb8232b0dca0017",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/dialog/dialog.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdialog%2Fdialog.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdialog%2Fdialog.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdialog%2Fdialog.tsx?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -36,6 +36,7 @@ const Dialog: React.FC<DialogProps> = function Dialog({\n   )\n \n   useOnClickOutside(\n+    // eslint-disable-next-line react-hooks/react-compiler -- TODO\n     dialogRef.current,\n     CSS_SELECTORS_TO_EXCLUDE_ON_CLICK_OUTSIDE,\n     (e) => {"
        },
        {
            "sha": "c27a7b6677e2af0f1377a922c1156fcc6882fe0f",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-info/shortcut-recorder.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fshortcut-recorder.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fshortcut-recorder.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fshortcut-recorder.tsx?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -316,6 +316,7 @@ function MetaKey() {\n   useEffect(() => {\n     // Meta is Command on Apple devices, otherwise Control\n     if (apple === true) {\n+      // eslint-disable-next-line react-hooks/react-compiler -- TODO\n       setLabel('âŒ˜')\n     }\n "
        },
        {
            "sha": "cf76ebd3a0154d9831d968078b419db18ea90b9b",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/drag-context.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdrag-context.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdrag-context.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdrag-context.tsx?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -36,6 +36,7 @@ export function DragProvider({\n   }, [])\n \n   const value = useMemo<DragContextValue>(\n+    // eslint-disable-next-line react-hooks/react-compiler -- TODO\n     () => ({ register, unregister, handles: handlesRef.current, disabled }),\n     [register, unregister, disabled]\n   )"
        },
        {
            "sha": "5ce451082a6281708c7af1c8f736e3dd225ff622",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-message/error-message.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-message%2Ferror-message.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-message%2Ferror-message.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-message%2Ferror-message.tsx?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -13,6 +13,7 @@ export function ErrorMessage({ errorMessage }: ErrorMessageProps) {\n \n   useLayoutEffect(() => {\n     if (messageRef.current) {\n+      // eslint-disable-next-line react-hooks/react-compiler -- TODO\n       setShouldTruncate(messageRef.current.scrollHeight > 200)\n     }\n   }, [errorMessage])"
        },
        {
            "sha": "48b493cff70e62c706a99c2701b7278d613c9103",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overview/segment-boundary-trigger.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-boundary-trigger.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-boundary-trigger.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-boundary-trigger.tsx?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -48,6 +48,7 @@ export function SegmentBoundaryTrigger({\n     () => {\n       setIsOpen(false)\n     },\n+    // eslint-disable-next-line react-hooks/react-compiler -- TODO\n     triggerRef.current?.ownerDocument\n   )\n "
        },
        {
            "sha": "ca6cb04171edf74a09f6d4c3aa39d28533dd22f4",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/shadow-portal.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fshadow-portal.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fshadow-portal.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fshadow-portal.tsx?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -38,7 +38,7 @@ export function ShadowPortal({ children }: { children: React.ReactNode }) {\n     forceUpdate({})\n   }, [state.theme])\n \n-  return shadowNode.current\n-    ? createPortal(children, shadowNode.current as any)\n-    : null\n+  // eslint-disable-next-line react-hooks/react-compiler -- TODO\n+  const shadowRoot = shadowNode.current\n+  return shadowRoot ? createPortal(children, shadowRoot as any) : null\n }"
        },
        {
            "sha": "9299288efe77e1814d13ddc43e77bc82ec3a8bad",
            "filename": "packages/next/src/next-devtools/dev-overlay/hooks/use-delayed-render.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fhooks%2Fuse-delayed-render.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fhooks%2Fuse-delayed-render.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fhooks%2Fuse-delayed-render.ts?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -43,6 +43,7 @@ export function useDelayedRender(active = false, options: Options = {}) {\n     let unmountTimeout: Timeout | undefined\n \n     if (active) {\n+      // eslint-disable-next-line react-hooks/react-compiler -- intentional cascading update\n       setMounted(true)\n       if (enterDelay <= 0) {\n         setRendered(true)"
        },
        {
            "sha": "e664b2fc98ebede445a4c47edac34fa3f7146bb6",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/75f33f0ea75861b4f86d0786b7447622dc080b55/pnpm-lock.yaml",
            "raw_url": "https://github.com/vercel/next.js/raw/75f33f0ea75861b4f86d0786b7447622dc080b55/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/pnpm-lock.yaml?ref=75f33f0ea75861b4f86d0786b7447622dc080b55",
            "patch": "@@ -308,8 +308,8 @@ importers:\n         specifier: 7.35.0\n         version: 7.35.0(eslint@9.12.0)\n       eslint-plugin-react-hooks:\n-        specifier: 6.0.0-rc.1\n-        version: 6.0.0-rc.1(eslint@9.12.0)\n+        specifier: 0.0.0-experimental-c260b38d-20250731\n+        version: 0.0.0-experimental-c260b38d-20250731(eslint@9.12.0)\n       eslint-v8:\n         specifier: npm:eslint@^8.57.0\n         version: eslint@8.57.1\n@@ -8885,15 +8885,15 @@ packages:\n     peerDependencies:\n       eslint: '>=8.0.0'\n \n-  eslint-plugin-react-hooks@5.0.0:\n-    resolution: {integrity: sha512-hIOwI+5hYGpJEc4uPRmz2ulCjAGD/N13Lukkh8cLV0i2IRk/bdZDYjgLVHj+U9Z704kLIdIO6iueGvxNur0sgw==}\n-    engines: {node: '>=10'}\n+  eslint-plugin-react-hooks@0.0.0-experimental-c260b38d-20250731:\n+    resolution: {integrity: sha512-pDvUu0gLJQHFDh9Wq+M1Kh002RdacFTD5xHnOY4uLCwhKo3gerFrJSe09e+ZwdwN15E1vY0ZF+3Ymj6HFtAfGw==}\n+    engines: {node: '>=18'}\n     peerDependencies:\n       eslint: ^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0\n \n-  eslint-plugin-react-hooks@6.0.0-rc.1:\n-    resolution: {integrity: sha512-7C4c7bdtd/B7Q+HruZxYhGjwZVvJawvQpilEYlRG1Jncuk1ZNqrFy9bO8SJNieyj3iDh8WPQA7BzzPO7sNAyEA==}\n-    engines: {node: '>=18'}\n+  eslint-plugin-react-hooks@5.0.0:\n+    resolution: {integrity: sha512-hIOwI+5hYGpJEc4uPRmz2ulCjAGD/N13Lukkh8cLV0i2IRk/bdZDYjgLVHj+U9Z704kLIdIO6iueGvxNur0sgw==}\n+    engines: {node: '>=10'}\n     peerDependencies:\n       eslint: ^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0\n \n@@ -25658,11 +25658,7 @@ snapshots:\n       - bluebird\n       - supports-color\n \n-  eslint-plugin-react-hooks@5.0.0(eslint@9.12.0):\n-    dependencies:\n-      eslint: 9.12.0\n-\n-  eslint-plugin-react-hooks@6.0.0-rc.1(eslint@9.12.0):\n+  eslint-plugin-react-hooks@0.0.0-experimental-c260b38d-20250731(eslint@9.12.0):\n     dependencies:\n       '@babel/core': 7.26.10\n       '@babel/parser': 7.27.0\n@@ -25674,6 +25670,10 @@ snapshots:\n     transitivePeerDependencies:\n       - supports-color\n \n+  eslint-plugin-react-hooks@5.0.0(eslint@9.12.0):\n+    dependencies:\n+      eslint: 9.12.0\n+\n   eslint-plugin-react@7.35.0(eslint@9.12.0):\n     dependencies:\n       array-includes: 3.1.8"
        }
    ],
    "stats": {
        "total": 44,
        "additions": 27,
        "deletions": 17
    }
}