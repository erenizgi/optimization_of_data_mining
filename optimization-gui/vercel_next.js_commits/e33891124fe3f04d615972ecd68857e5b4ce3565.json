{
    "author": "bgw",
    "message": "Turbopack: chore: Remove `extern crate` and `macro_use` syntax (#85778)\n\nThis syntax isn't needed in modern rust.\n\nhttps://doc.rust-lang.org/reference/names/preludes.html#extern-prelude\n\n> Beginning in the 2018 edition, use declarations can reference crates in the extern prelude, so **it is considered unidiomatic to use extern crate**.",
    "sha": "e33891124fe3f04d615972ecd68857e5b4ce3565",
    "files": [
        {
            "sha": "475cb62e3be0d4202ac69e7933db01af095e3396",
            "filename": "crates/napi/build.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fbuild.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fbuild.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fbuild.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -2,8 +2,6 @@ use std::{env, fs, path::Path, process::Command, str};\n \n use serde_json::Value;\n \n-extern crate napi_build;\n-\n fn main() -> anyhow::Result<()> {\n     println!(\"cargo:rerun-if-env-changed=CI\");\n     let is_ci = env::var(\"CI\").is_ok_and(|value| !value.is_empty());"
        },
        {
            "sha": "d2f7bfc10344fa55faf30cb85e66ae495e1fd47d",
            "filename": "crates/napi/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Flib.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -32,9 +32,6 @@ DEALINGS IN THE SOFTWARE.\n #![feature(arbitrary_self_types_pointers)]\n #![feature(iter_intersperse)]\n \n-#[macro_use]\n-extern crate napi_derive;\n-\n use std::sync::Arc;\n \n use napi::bindgen_prelude::*;"
        },
        {
            "sha": "9b44097a8a3df1e5405b38f7dc778f8b41ec49ee",
            "filename": "crates/napi/src/lockfile.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Flockfile.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Flockfile.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Flockfile.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -6,6 +6,7 @@ use std::{\n \n use anyhow::Context;\n use napi::bindgen_prelude::External;\n+use napi_derive::napi;\n \n /// A wrapper around [`File`] that is passed to JS, and is set to `None` when [`lockfile_unlock`] is\n /// called."
        },
        {
            "sha": "19d7f8ffa7fdc9b77cd16ecf055c81c74673c80b",
            "filename": "crates/napi/src/mdx.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fmdx.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fmdx.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fmdx.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -1,5 +1,6 @@\n use mdxjs::{Options, compile};\n use napi::bindgen_prelude::*;\n+use napi_derive::napi;\n \n pub struct MdxCompileTask {\n     pub input: String,"
        },
        {
            "sha": "0049d6a0d8590ba0cbacd0a7136c9e27a3529f88",
            "filename": "crates/napi/src/minify.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fminify.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fminify.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fminify.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -28,6 +28,7 @@ DEALINGS IN THE SOFTWARE.\n \n use anyhow::Context;\n use napi::bindgen_prelude::*;\n+use napi_derive::napi;\n use serde::Serialize;\n use swc_core::{\n     base::{config::JsMinifyOptions, try_with_handler},"
        },
        {
            "sha": "3415925b4f0059591d23bbbfb19ced1303e8c879",
            "filename": "crates/napi/src/next_api/endpoint.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fnext_api%2Fendpoint.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fnext_api%2Fendpoint.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fnext_api%2Fendpoint.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -3,6 +3,7 @@ use std::{ops::Deref, sync::Arc};\n use anyhow::Result;\n use futures_util::TryFutureExt;\n use napi::{JsFunction, bindgen_prelude::External};\n+use napi_derive::napi;\n use next_api::{\n     operation::OptionEndpoint,\n     paths::ServerPath,\n@@ -15,7 +16,7 @@ use tracing::Instrument;\n use turbo_tasks::{Completion, Effects, OperationVc, ReadRef, Vc};\n use turbopack_core::{diagnostics::PlainDiagnostic, issue::PlainIssue};\n \n-use super::utils::{\n+use crate::next_api::utils::{\n     DetachedVc, NapiDiagnostic, NapiIssue, RootTask, TurbopackResult,\n     strongly_consistent_catch_collectables, subscribe,\n };"
        },
        {
            "sha": "926231d03fc14b02b24b3951a0e95b64d7991bc7",
            "filename": "crates/napi/src/next_api/project.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -8,6 +8,7 @@ use napi::{\n     bindgen_prelude::{External, within_runtime_if_available},\n     threadsafe_function::{ThreadsafeFunction, ThreadsafeFunctionCallMode},\n };\n+use napi_derive::napi;\n use next_api::{\n     entrypoints::Entrypoints,\n     next_server_nft::next_server_nft_assets,"
        },
        {
            "sha": "7712c853d919dcb4b9766238653a9bedc09f1ca6",
            "filename": "crates/napi/src/next_api/turbopack_ctx.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fnext_api%2Fturbopack_ctx.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fnext_api%2Fturbopack_ctx.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fnext_api%2Fturbopack_ctx.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -12,6 +12,7 @@ use std::{\n use anyhow::Result;\n use either::Either;\n use napi::{JsFunction, threadsafe_function::ThreadsafeFunction};\n+use napi_derive::napi;\n use once_cell::sync::Lazy;\n use owo_colors::OwoColorize;\n use serde::Serialize;"
        },
        {
            "sha": "49d9846e80b60a04e255214ba1e27da14075bf88",
            "filename": "crates/napi/src/next_api/utils.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fnext_api%2Futils.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fnext_api%2Futils.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fnext_api%2Futils.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -7,6 +7,7 @@ use napi::{\n     bindgen_prelude::{Buffer, External, ToNapiValue},\n     threadsafe_function::{ThreadSafeCallContext, ThreadsafeFunction, ThreadsafeFunctionCallMode},\n };\n+use napi_derive::napi;\n use rustc_hash::FxHashMap;\n use serde::Serialize;\n use turbo_tasks::{"
        },
        {
            "sha": "7d59fadb1090b2b09bf201c7f3382705d6262ad2",
            "filename": "crates/napi/src/parse.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fparse.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -2,6 +2,7 @@ use std::sync::Arc;\n \n use anyhow::Context as _;\n use napi::bindgen_prelude::*;\n+use napi_derive::napi;\n use swc_core::{\n     base::{config::ParseOptions, try_with_handler},\n     common::{"
        },
        {
            "sha": "c788448305fdec15e9fdeb4e54a248971cc76726",
            "filename": "crates/napi/src/react_compiler.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Freact_compiler.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Freact_compiler.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Freact_compiler.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -1,6 +1,7 @@\n use std::{path::PathBuf, sync::Arc};\n \n use napi::bindgen_prelude::*;\n+use napi_derive::napi;\n use next_custom_transforms::react_compiler;\n use swc_core::{\n     common::{GLOBALS, SourceMap},"
        },
        {
            "sha": "521b047df6adf65b5657ccfb72d65cc18810cec4",
            "filename": "crates/napi/src/rspack.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Frspack.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Frspack.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Frspack.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -1,6 +1,7 @@\n use std::{cell::RefCell, fs, path::PathBuf, sync::Arc};\n \n use napi::bindgen_prelude::*;\n+use napi_derive::napi;\n use swc_core::{\n     base::{\n         config::{IsModule, ParseOptions},"
        },
        {
            "sha": "4c48d5f19312af24c9f4d6453e0a5af600598737",
            "filename": "crates/napi/src/transform.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Ftransform.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Ftransform.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Ftransform.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -35,6 +35,7 @@ use std::{\n \n use anyhow::{Context as _, anyhow, bail};\n use napi::bindgen_prelude::*;\n+use napi_derive::napi;\n use next_custom_transforms::chain_transforms::{TransformOptions, custom_before_pass};\n use once_cell::sync::Lazy;\n use rustc_hash::{FxHashMap, FxHashSet};"
        },
        {
            "sha": "129e37d60f03491c3d33d1ab31f5c7a47fe7d2f0",
            "filename": "crates/napi/src/turbo_trace_server.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fturbo_trace_server.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fturbo_trace_server.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fturbo_trace_server.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -1,5 +1,7 @@\n use std::path::PathBuf;\n \n+use napi_derive::napi;\n+\n #[napi]\n pub fn start_turbopack_trace_server(path: String, port: Option<u16>) {\n     let path_buf = PathBuf::from(path);"
        },
        {
            "sha": "7b88a1c90a611142904f83f021879b6fdedae966",
            "filename": "crates/napi/src/turbopack.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fturbopack.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Fturbopack.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fturbopack.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -2,6 +2,7 @@ use std::path::PathBuf;\n \n use anyhow::Context;\n use napi::bindgen_prelude::*;\n+use napi_derive::napi;\n use next_build::{\n     BuildOptions as NextBuildOptions,\n     build_options::{BuildContext, DefineEnv},"
        },
        {
            "sha": "dd45782986ff1a12789e10eca9769d4dbc1f0d57",
            "filename": "crates/napi/src/util.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/crates%2Fnapi%2Fsrc%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Futil.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -30,6 +30,7 @@ use std::{cell::RefCell, env, path::PathBuf};\n \n use anyhow::anyhow;\n use napi::bindgen_prelude::{External, Status};\n+use napi_derive::napi;\n use tracing_chrome::{ChromeLayerBuilder, FlushGuard};\n use tracing_subscriber::{Layer, filter, layer::SubscriberExt, util::SubscriberInitExt};\n "
        },
        {
            "sha": "3f84858a38a58aa2393d1aeea395ae332fb05cc6",
            "filename": "rspack/crates/binding/src/lib.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/rspack%2Fcrates%2Fbinding%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/rspack%2Fcrates%2Fbinding%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/rspack%2Fcrates%2Fbinding%2Fsrc%2Flib.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -5,6 +5,7 @@ mod handle_externals;\n mod next_externals_plugin;\n \n use napi::bindgen_prelude::*;\n+use napi_derive::napi;\n use rspack_binding_builder_macros::register_plugin;\n use rspack_core::BoxPlugin;\n use rspack_regex::RspackRegex;\n@@ -15,10 +16,6 @@ use crate::{\n     next_externals_plugin::{NextExternalsPlugin, NextExternalsPluginOptions},\n };\n \n-#[macro_use]\n-extern crate napi_derive;\n-extern crate rspack_binding_builder;\n-\n #[derive(Debug)]\n #[napi(object, object_to_js = false)]\n pub struct NapiExperimentalConfig {"
        },
        {
            "sha": "b535341f4b315ad4fb5e9fd6ac08fb9481bf7d1d",
            "filename": "turbopack/crates/turbo-tasks-macros/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e33891124fe3f04d615972ecd68857e5b4ce3565/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e33891124fe3f04d615972ecd68857e5b4ce3565/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Flib.rs?ref=e33891124fe3f04d615972ecd68857e5b4ce3565",
            "patch": "@@ -14,8 +14,6 @@ mod value_impl_macro;\n mod value_macro;\n mod value_trait_macro;\n \n-extern crate proc_macro;\n-\n use proc_macro::TokenStream;\n use proc_macro_error::proc_macro_error;\n "
        }
    ],
    "stats": {
        "total": 29,
        "additions": 17,
        "deletions": 12
    }
}