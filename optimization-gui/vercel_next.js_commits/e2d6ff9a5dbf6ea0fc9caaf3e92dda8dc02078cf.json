{
    "author": "gnoff",
    "message": "[Cache Components] Use canary React when only Cache Components is enabled (#85042)\n\nCache Components previously relied upon experimental only features in\nReact however now that partial prerendering in React is stabilized we\ncan now use the canary channel. There are still some features that\nrequire experimental such as taint but for Cache Components by default\nwe should use canary.",
    "sha": "e2d6ff9a5dbf6ea0fc9caaf3e92dda8dc02078cf",
    "files": [
        {
            "sha": "4548cdb1db7bd61c8b5c9239c88dcfccf99dbf84",
            "filename": "crates/next-core/src/next_import_map.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/e2d6ff9a5dbf6ea0fc9caaf3e92dda8dc02078cf/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e2d6ff9a5dbf6ea0fc9caaf3e92dda8dc02078cf/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs?ref=e2d6ff9a5dbf6ea0fc9caaf3e92dda8dc02078cf",
            "patch": "@@ -128,12 +128,11 @@ pub async fn get_next_client_import_map(\n         ClientContextType::Pages { .. } => {}\n         ClientContextType::App { app_dir } => {\n             // Keep in sync with file:///./../../../packages/next/src/lib/needs-experimental-react.ts\n-            let react_flavor =\n-                if *next_config.enable_ppr().await? || *next_config.enable_taint().await? {\n-                    \"-experimental\"\n-                } else {\n-                    \"\"\n-                };\n+            let react_flavor = if *next_config.enable_taint().await? {\n+                \"-experimental\"\n+            } else {\n+                \"\"\n+            };\n \n             import_map.insert_exact_alias(\n                 rcstr!(\"react\"),\n@@ -830,9 +829,8 @@ async fn apply_vendored_react_aliases_server(\n     runtime: NextRuntime,\n     next_config: Vc<NextConfig>,\n ) -> Result<()> {\n-    let ppr = *next_config.enable_ppr().await?;\n     let taint = *next_config.enable_taint().await?;\n-    let react_channel = if ppr || taint { \"-experimental\" } else { \"\" };\n+    let react_channel = if taint { \"-experimental\" } else { \"\" };\n     let react_condition = if ty.should_use_react_server_condition() {\n         \"server\"\n     } else {"
        },
        {
            "sha": "02553842c90bf3fd72db6115ff58bde2d090542b",
            "filename": "packages/next/src/lib/needs-experimental-react.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e2d6ff9a5dbf6ea0fc9caaf3e92dda8dc02078cf/packages%2Fnext%2Fsrc%2Flib%2Fneeds-experimental-react.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e2d6ff9a5dbf6ea0fc9caaf3e92dda8dc02078cf/packages%2Fnext%2Fsrc%2Flib%2Fneeds-experimental-react.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Fneeds-experimental-react.ts?ref=e2d6ff9a5dbf6ea0fc9caaf3e92dda8dc02078cf",
            "patch": "@@ -2,6 +2,6 @@ import type { NextConfig } from '../server/config-shared'\n \n // Keep in sync with Turbopack's experimental React switch: file://./../../../../crates/next-core/src/next_import_map.rs\n export function needsExperimentalReact(config: NextConfig) {\n-  const { ppr, taint } = config.experimental || {}\n-  return Boolean(ppr || taint)\n+  const { taint } = config.experimental || {}\n+  return Boolean(taint)\n }"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 8,
        "deletions": 10
    }
}