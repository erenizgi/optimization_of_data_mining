{
    "author": "kdy1",
    "message": "perf(turbopack): Make `File` => json faster (#81279)\n\n### What?\n\nConsidering the way `serde_json` works, I expect this to be faster.\nAlso, a JSON string is very likely to be a single `bytes::Bytes` already, so it would not regress the memory usage.\n\n### Why?\n\n<img width=\"843\" alt=\"image\"\nsrc=\"https://github.com/user-attachments/assets/2c5ebb0b-335c-4ca1-aebd-64a6da9e0671\"\n/>",
    "sha": "999035c772d879ef3b633695858fc4bddd579b33",
    "files": [
        {
            "sha": "0612422a7515a54b99f78da3ba351dc3626c32f6",
            "filename": "turbopack/crates/turbo-tasks-fs/src/lib.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/999035c772d879ef3b633695858fc4bddd579b33/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/999035c772d879ef3b633695858fc4bddd579b33/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs?ref=999035c772d879ef3b633695858fc4bddd579b33",
            "patch": "@@ -1912,7 +1912,8 @@ impl FileContent {\n     pub fn parse_json_ref(&self) -> FileJsonContent {\n         match self {\n             FileContent::Content(file) => {\n-                let de = &mut serde_json::Deserializer::from_reader(file.read());\n+                let content = file.content.clone().into_bytes();\n+                let de = &mut serde_json::Deserializer::from_slice(&content);\n                 match serde_path_to_error::deserialize(de) {\n                     Ok(data) => FileJsonContent::Content(data),\n                     Err(e) => FileJsonContent::Unparsable(Box::new("
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}