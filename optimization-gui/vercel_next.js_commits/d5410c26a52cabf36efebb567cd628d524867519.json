{
    "author": "sommeeeer",
    "message": "docs: add csp and content disposition type (#80735)\n\nAdd `contentSecurityPolicy` to Image Component in docs. Also follow up\nin on the type in `image-config.ts` to use the updated docs.\n\n---------\n\nCo-authored-by: graphite-app[bot] <96075541+graphite-app[bot]@users.noreply.github.com>",
    "sha": "d5410c26a52cabf36efebb567cd628d524867519",
    "files": [
        {
            "sha": "81fc4ef8d2e4e5325f57856bb960cc0666cca71f",
            "filename": "docs/01-app/03-api-reference/02-components/image.mdx",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/d5410c26a52cabf36efebb567cd628d524867519/docs%2F01-app%2F03-api-reference%2F02-components%2Fimage.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d5410c26a52cabf36efebb567cd628d524867519/docs%2F01-app%2F03-api-reference%2F02-components%2Fimage.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F02-components%2Fimage.mdx?ref=d5410c26a52cabf36efebb567cd628d524867519",
            "patch": "@@ -806,6 +806,18 @@ module.exports = {\n }\n ```\n \n+#### `contentSecurityPolicy`\n+\n+`contentSecurityPolicy` allows you to configure the [`Content-Security-Policy`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CSP) header for images. This is particularly important when using [`dangerouslyAllowSVG`](#dangerouslyallowsvg) to prevent scripts embedded in the image from executing.\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  images: {\n+    contentSecurityPolicy: \"default-src 'self'; script-src 'none'; sandbox;\",\n+  },\n+}\n+```\n+\n By default, the [loader](#loader) sets the [`Content-Disposition`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition#as_a_response_header_for_the_main_body) header to `attachment` for added protection since the API can serve arbitrary remote images.\n \n The default value is `attachment` which forces the browser to download the image when visiting directly. This is particularly important when [`dangerouslyAllowSVG`](#dangerouslyallowsvg) is true."
        },
        {
            "sha": "ee91faddb62aa2cf2d0ba1792642b8f2f1187b8f",
            "filename": "packages/next/src/shared/lib/image-config.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/d5410c26a52cabf36efebb567cd628d524867519/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fimage-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d5410c26a52cabf36efebb567cd628d524867519/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fimage-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fimage-config.ts?ref=d5410c26a52cabf36efebb567cd628d524867519",
            "patch": "@@ -106,16 +106,16 @@ export type ImageConfigComplete = {\n   /** @see [Dangerously Allow SVG](https://nextjs.org/docs/api-reference/next/image#dangerously-allow-svg) */\n   dangerouslyAllowSVG: boolean\n \n-  /** @see [Dangerously Allow SVG](https://nextjs.org/docs/api-reference/next/image#dangerously-allow-svg) */\n+  /** @see [Content Security Policy](https://nextjs.org/docs/api-reference/next/image#contentsecuritypolicy) */\n   contentSecurityPolicy: string\n \n-  /** @see [Dangerously Allow SVG](https://nextjs.org/docs/api-reference/next/image#dangerously-allow-svg) */\n+  /** @see [Content Disposition Type](https://nextjs.org/docs/api-reference/next/image#contentdispositiontype) */\n   contentDispositionType: 'inline' | 'attachment'\n \n   /** @see [Remote Patterns](https://nextjs.org/docs/api-reference/next/image#remotepatterns) */\n   remotePatterns: Array<URL | RemotePattern>\n \n-  /** @see [Remote Patterns](https://nextjs.org/docs/api-reference/next/image#localPatterns) */\n+  /** @see [Local Patterns](https://nextjs.org/docs/api-reference/next/image#localPatterns) */\n   localPatterns: LocalPattern[] | undefined\n \n   /** @see [Qualities](https://nextjs.org/docs/api-reference/next/image#qualities) */"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 15,
        "deletions": 3
    }
}