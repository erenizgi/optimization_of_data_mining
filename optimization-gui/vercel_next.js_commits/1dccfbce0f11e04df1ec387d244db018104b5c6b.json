{
    "author": "lubieowoce",
    "message": "test: adjust default timeouts for [waitFor]elementByCss (#78026)\n\nAdjusts the default timeouts:\n- elementByCss: 5s\n- waitForElementByCss: 10s\n\nPreviously, we didn't pass an explicit value, so they both defaulted to\nplaywright's default of 60s. This is _very_ slow, and if something is\nslow enough to require anything in that range, i'd say it deserves to be\nwrapped in `retry()` or something similar anyway, so it's fine to fail\nhere.\nThe upside of this is that errors because of bad selectors (or missing\nelements) happen faster, which is a nice thing, and might also save CI\ntime.\n\ni could also see an argument for making these even shorter -- e.g. the\ndefault timeout for `retry()` is 3s, so maybe `retry` should be faster\nthan that.\n\nhttps://github.com/vercel/next.js/blob/717e54b0cd914a17314c470cd10d6af2b2d75787/test/lib/next-test-utils.ts#L796-L799\nbut then again, `retry` doesn't factor in the time `fn` took, so these\ndon't really conflict.",
    "sha": "1dccfbce0f11e04df1ec387d244db018104b5c6b",
    "files": [
        {
            "sha": "9e484e56e94f76145fe13f79a7e0675820ccec96",
            "filename": "test/e2e/app-dir/navigation/navigation.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/1dccfbce0f11e04df1ec387d244db018104b5c6b/test%2Fe2e%2Fapp-dir%2Fnavigation%2Fnavigation.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1dccfbce0f11e04df1ec387d244db018104b5c6b/test%2Fe2e%2Fapp-dir%2Fnavigation%2Fnavigation.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnavigation%2Fnavigation.test.ts?ref=1dccfbce0f11e04df1ec387d244db018104b5c6b",
            "patch": "@@ -893,7 +893,7 @@ describe('app dir - navigation', () => {\n         .elementByCss(\"[href='/metadata-await-promise/nested']\")\n         .click()\n \n-      await waitFor(resolveMetadataDuration)\n+      await waitFor(resolveMetadataDuration + 500)\n \n       expect(await browser.elementById('page-content').text()).toBe('Content')\n       expect(await browser.elementByCss('title').text()).toBe('Async Title')\n@@ -912,9 +912,11 @@ describe('app dir - navigation', () => {\n         .click()\n \n       if (!isNextDev) {\n-        expect(await browser.elementByCss('title').text()).toBe('Async Title')\n-\n-        await waitFor(resolveMetadataDuration + 500)\n+        expect(\n+          await browser\n+            .waitForElementByCss('title', resolveMetadataDuration + 500)\n+            .text()\n+        ).toBe('Async Title')\n       }\n \n       expect(await browser.elementById('page-content').text()).toBe('Content')"
        },
        {
            "sha": "7e5f7c8132f75b910f106cbfc52d5477c243b17d",
            "filename": "test/lib/browsers/playwright.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/1dccfbce0f11e04df1ec387d244db018104b5c6b/test%2Flib%2Fbrowsers%2Fplaywright.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1dccfbce0f11e04df1ec387d244db018104b5c6b/test%2Flib%2Fbrowsers%2Fplaywright.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fbrowsers%2Fplaywright.ts?ref=1dccfbce0f11e04df1ec387d244db018104b5c6b",
            "patch": "@@ -348,7 +348,7 @@ export class Playwright extends BrowserInterface {\n   }\n \n   elementByCss(selector: string) {\n-    return this.waitForElementByCss(selector)\n+    return this.waitForElementByCss(selector, 5_000)\n   }\n \n   elementById(sel) {\n@@ -427,7 +427,7 @@ export class Playwright extends BrowserInterface {\n     )\n   }\n \n-  waitForElementByCss(selector, timeout?: number) {\n+  waitForElementByCss(selector, timeout = 10_000) {\n     return this.chain(() => {\n       return page\n         .waitForSelector(selector, { timeout, state: 'attached' })"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 8,
        "deletions": 6
    }
}