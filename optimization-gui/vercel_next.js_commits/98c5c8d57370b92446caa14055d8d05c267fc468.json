{
    "author": "lukesandberg",
    "message": "[turbopack] Remove the `_for_input` options from `turbo_tasks::value` and the `TypedForInput` trait. (#80185)\n\n# Remove `auto_for_input` serialization mode from turbo-tasks\n\nThis PR removes the `auto_for_input` and `custom_for_input` serialization modes from turbo-tasks, along with the `TypedForInput` marker trait.\n\nThese were used for values passed via the `Value<>` type, but that is dead.",
    "sha": "98c5c8d57370b92446caa14055d8d05c267fc468",
    "files": [
        {
            "sha": "1146e07807b00626bd38935db14e8ad1120ff12b",
            "filename": "crates/next-core/src/next_image/module.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 3,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fmodule.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -1,5 +1,6 @@\n use anyhow::Result;\n-use turbo_tasks::{ResolvedVc, TaskInput, Vc, fxindexmap};\n+use serde::{Deserialize, Serialize};\n+use turbo_tasks::{NonLocalValue, ResolvedVc, TaskInput, Vc, fxindexmap, trace::TraceRawVcs};\n use turbopack::{ModuleAssetContext, module_options::CustomModuleType};\n use turbopack_core::{\n     context::AssetContext, module::Module, reference_type::ReferenceType, resolve::ModulePart,\n@@ -9,8 +10,21 @@ use turbopack_static::ecma::StaticUrlJsModule;\n \n use super::source_asset::StructuredImageFileSource;\n \n-#[turbo_tasks::value(serialization = \"auto_for_input\")]\n-#[derive(Clone, Copy, Debug, PartialOrd, Ord, Hash, TaskInput)]\n+#[derive(\n+    Eq,\n+    PartialEq,\n+    Clone,\n+    Copy,\n+    Debug,\n+    PartialOrd,\n+    Ord,\n+    Hash,\n+    TaskInput,\n+    TraceRawVcs,\n+    NonLocalValue,\n+    Serialize,\n+    Deserialize,\n+)]\n pub enum BlurPlaceholderMode {\n     /// Do not generate a blur placeholder at all.\n     None,"
        },
        {
            "sha": "17db43f3135c77a143793f974d1b70757e7d20d6",
            "filename": "turbopack/crates/turbo-tasks-macros/src/value_macro.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 31,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Fvalue_macro.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Fvalue_macro.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros%2Fsrc%2Fvalue_macro.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -72,9 +72,7 @@ impl TryFrom<LitStr> for CellMode {\n enum SerializationMode {\n     None,\n     Auto,\n-    AutoForInput,\n     Custom,\n-    CustomForInput,\n }\n \n impl Parse for SerializationMode {\n@@ -91,13 +89,10 @@ impl TryFrom<LitStr> for SerializationMode {\n         match lit.value().as_str() {\n             \"none\" => Ok(SerializationMode::None),\n             \"auto\" => Ok(SerializationMode::Auto),\n-            \"auto_for_input\" => Ok(SerializationMode::AutoForInput),\n             \"custom\" => Ok(SerializationMode::Custom),\n-            \"custom_for_input\" => Ok(SerializationMode::CustomForInput),\n             _ => Err(Error::new_spanned(\n                 &lit,\n-                \"expected \\\"none\\\", \\\"auto\\\", \\\"auto_for_input\\\", \\\"custom\\\" or \\\n-                 \\\"custom_for_input\\\"\",\n+                \"expected \\\"none\\\", \\\"auto\\\", or \\\"custom\\\"\",\n             )),\n         }\n     }\n@@ -358,17 +353,14 @@ pub fn value(args: TokenStream, input: TokenStream) -> TokenStream {\n         #[shrink_to_fit(crate = \"turbo_tasks::macro_helpers::shrink_to_fit\")]\n     }];\n     match serialization_mode {\n-        SerializationMode::Auto | SerializationMode::AutoForInput => {\n-            struct_attributes.push(quote! {\n-                #[derive(\n-                    turbo_tasks::macro_helpers::serde::Serialize,\n-                    turbo_tasks::macro_helpers::serde::Deserialize,\n-                )]\n-                #[serde(crate = \"turbo_tasks::macro_helpers::serde\")]\n-            })\n-        }\n-        SerializationMode::None | SerializationMode::Custom | SerializationMode::CustomForInput => {\n-        }\n+        SerializationMode::Auto => struct_attributes.push(quote! {\n+            #[derive(\n+                turbo_tasks::macro_helpers::serde::Serialize,\n+                turbo_tasks::macro_helpers::serde::Deserialize,\n+            )]\n+            #[serde(crate = \"turbo_tasks::macro_helpers::serde\")]\n+        }),\n+        SerializationMode::None | SerializationMode::Custom => {}\n     };\n     if inner_type.is_some() {\n         // Transparent structs have their own manual `ValueDebug` implementation.\n@@ -404,18 +396,6 @@ pub fn value(args: TokenStream, input: TokenStream) -> TokenStream {\n                 turbo_tasks::ValueType::new_with_any_serialization::<#ident>()\n             }\n         }\n-        SerializationMode::AutoForInput | SerializationMode::CustomForInput => {\n-            quote! {\n-                turbo_tasks::ValueType::new_with_magic_serialization::<#ident>()\n-            }\n-        }\n-    };\n-\n-    let for_input_marker = match serialization_mode {\n-        SerializationMode::None | SerializationMode::Auto | SerializationMode::Custom => quote! {},\n-        SerializationMode::AutoForInput | SerializationMode::CustomForInput => quote! {\n-            impl turbo_tasks::TypedForInput for #ident {}\n-        },\n     };\n \n     let value_debug_impl = if inner_type.is_some() {\n@@ -462,8 +442,6 @@ pub fn value(args: TokenStream, input: TokenStream) -> TokenStream {\n \n         #value_type_and_register_code\n \n-        #for_input_marker\n-\n         #value_debug_impl\n     };\n "
        },
        {
            "sha": "9f4c2142c1ef5716677dfcb802cae02f365c7a17",
            "filename": "turbopack/crates/turbo-tasks/src/lib.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -127,9 +127,8 @@ pub use value::{TransientInstance, TransientValue};\n pub use value_type::{TraitMethod, TraitType, ValueType};\n pub use vc::{\n     Dynamic, NonLocalValue, OperationValue, OperationVc, OptionVcExt, ReadVcFuture, ResolvedVc,\n-    TypedForInput, Upcast, ValueDefault, Vc, VcCast, VcCellNewMode, VcCellSharedMode,\n-    VcDefaultRead, VcRead, VcTransparentRead, VcValueTrait, VcValueTraitCast, VcValueType,\n-    VcValueTypeCast,\n+    Upcast, ValueDefault, Vc, VcCast, VcCellNewMode, VcCellSharedMode, VcDefaultRead, VcRead,\n+    VcTransparentRead, VcValueTrait, VcValueTraitCast, VcValueType, VcValueTypeCast,\n };\n \n pub type SliceMap<K, V> = Box<[(K, V)]>;\n@@ -239,11 +238,8 @@ macro_rules! fxindexset {\n /// required for persistent caching of tasks to disk.\n ///\n /// - **`\"auto\"` *(default)*:** Derives the serialization traits and enables serialization.\n-/// - **`\"auto_for_input\"`:** Same as `\"auto\"`, but also adds the marker trait [`TypedForInput`].\n /// - **`\"custom\"`:** Prevents deriving the serialization traits, but still enables serialization\n ///   (you must manually implement [`serde::Serialize`] and [`serde::Deserialize`]).\n-/// - **`\"custom_for_input\"`:** Same as `\"custom\"`, but also adds the marker trait\n-///   [`TypedForInput`].\n /// - **`\"none\"`:** Disables serialization and prevents deriving the traits.\n ///\n /// ## `shared`"
        },
        {
            "sha": "d0f922a22f1a87f41ac2f05e09915eccbd08fb7a",
            "filename": "turbopack/crates/turbo-tasks/src/value_type.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue_type.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue_type.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvalue_type.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -115,23 +115,6 @@ impl ValueType {\n         }\n     }\n \n-    /// This is internally used by `#[turbo_tasks::value]`\n-    pub fn new_with_magic_serialization<\n-        T: VcValueType + Debug + Eq + Hash + Serialize + for<'de> Deserialize<'de> + TraceRawVcs,\n-    >() -> Self {\n-        Self {\n-            name: std::any::type_name::<T>().to_string(),\n-            traits: AutoSet::new(),\n-            trait_methods: AutoMap::new(),\n-            magic_serialization: Some((\n-                <dyn MagicAny>::as_serialize::<T>,\n-                MagicAnyDeserializeSeed::new::<T>(),\n-            )),\n-            any_serialization: Some((any_as_serialize::<T>, AnyDeserializeSeed::new::<T>())),\n-            raw_cell: <T::CellMode as VcCellMode<T>>::raw_cell,\n-        }\n-    }\n-\n     /// This is internally used by `#[turbo_tasks::value]`\n     pub fn new_with_any_serialization<\n         T: VcValueType + Any + Serialize + for<'de> Deserialize<'de>,"
        },
        {
            "sha": "89b36276996885f8ea2e1608cc3437e06b4db826",
            "filename": "turbopack/crates/turbo-tasks/src/vc/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -28,7 +28,7 @@ pub use self::{\n     operation::{OperationValue, OperationVc},\n     read::{ReadOwnedVcFuture, ReadVcFuture, VcDefaultRead, VcRead, VcTransparentRead},\n     resolved::ResolvedVc,\n-    traits::{Dynamic, TypedForInput, Upcast, VcValueTrait, VcValueType},\n+    traits::{Dynamic, Upcast, VcValueTrait, VcValueType},\n };\n use crate::{\n     CellId, RawVc, ResolveTypeError,"
        },
        {
            "sha": "a05b0c3719602925feacc43e1f412850562deaa5",
            "filename": "turbopack/crates/turbo-tasks/src/vc/traits.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Ftraits.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Ftraits.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Ftraits.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -54,10 +54,3 @@ where\n     T: VcValueTrait + ?Sized,\n {\n }\n-\n-/// Marker trait that a turbo_tasks::value is prepared for serialization as\n-/// [`Value<...>`][crate::Value] input.\n-///\n-/// Either use [`#[turbo_tasks::value(serialization = \"auto_for_input\")]`][macro@crate::value] or\n-/// avoid [`Value<...>`][crate::Value] in favor of a real [Vc][crate::Vc].\n-pub trait TypedForInput: VcValueType {}"
        },
        {
            "sha": "38df80f67f99acac719edf50f61f4427ad1081e9",
            "filename": "turbopack/crates/turbopack-browser/src/chunking_context.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -171,7 +171,7 @@ impl BrowserChunkingContextBuilder {\n /// It also uses a chunking heuristic that is incremental and cacheable.\n /// It splits \"node_modules\" separately as these are less likely to change\n /// during development\n-#[turbo_tasks::value(serialization = \"auto_for_input\")]\n+#[turbo_tasks::value]\n #[derive(Debug, Clone, Hash, TaskInput)]\n pub struct BrowserChunkingContext {\n     name: Option<RcStr>,"
        },
        {
            "sha": "4cac77953f7bfdf5c1a5a65ba1ed042115b2f0f6",
            "filename": "turbopack/crates/turbopack-core/src/compile_time_info.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fcompile_time_info.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fcompile_time_info.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fcompile_time_info.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -139,7 +139,7 @@ impl From<serde_json::Value> for CompileTimeDefineValue {\n     }\n }\n \n-#[turbo_tasks::value(serialization = \"auto_for_input\")]\n+#[turbo_tasks::value]\n #[derive(Debug, Clone, Hash)]\n pub enum DefineableNameSegment {\n     Name(RcStr),"
        },
        {
            "sha": "95cfe795b9924841da6d456a183268ffb6647b32",
            "filename": "turbopack/crates/turbopack-core/src/environment.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -51,7 +51,7 @@ impl Environment {\n     }\n }\n \n-#[turbo_tasks::value(serialization = \"auto_for_input\")]\n+#[turbo_tasks::value]\n #[derive(Debug, Hash, Clone, Copy, TaskInput)]\n pub enum ExecutionEnvironment {\n     NodeJsBuildTime(ResolvedVc<NodeJsEnvironment>),"
        },
        {
            "sha": "ba7a7e44834b31fbc3089ce277fe401ae245e939",
            "filename": "turbopack/crates/turbopack-core/src/target.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftarget.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftarget.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Ftarget.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -3,7 +3,7 @@ use std::fmt::Display;\n use serde::{Deserialize, Serialize};\n use turbo_tasks::{NonLocalValue, Vc, trace::TraceRawVcs};\n \n-#[turbo_tasks::value(shared, serialization = \"auto_for_input\")]\n+#[turbo_tasks::value(shared)]\n #[derive(Hash, Debug, Copy, Clone)]\n pub struct CompileTarget {\n     /// <https://nodejs.org/api/os.html#osarch>"
        },
        {
            "sha": "2af8cd542fa2c7a2befc1eeb0f406855bfe60a8e",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fmod.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -322,7 +322,7 @@ impl ContentSourceDataFilter {\n /// Describes additional information that need to be sent to requests to\n /// ContentSource. By sending these information ContentSource responses are\n /// cached-keyed by them and they can access them.\n-#[turbo_tasks::value(shared, serialization = \"auto_for_input\")]\n+#[turbo_tasks::value(shared)]\n #[derive(Debug, Default, Clone, Hash)]\n pub struct ContentSourceDataVary {\n     pub method: bool,"
        },
        {
            "sha": "c61601691a5967e4dd69e7e55ee042813e396f27",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/imports.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -23,7 +23,7 @@ use crate::{\n     tree_shake::{PartId, find_turbopack_part_id_in_asserts},\n };\n \n-#[turbo_tasks::value(serialization = \"auto_for_input\")]\n+#[turbo_tasks::value]\n #[derive(Default, Debug, Clone, Hash)]\n pub struct ImportAnnotations {\n     // TODO store this in more structured way"
        },
        {
            "sha": "483fca2a588b4f07746ae5aa06f4c5177c21b116",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -157,7 +157,7 @@ pub enum TreeShakingMode {\n #[turbo_tasks::value(transparent)]\n pub struct OptionTreeShaking(pub Option<TreeShakingMode>);\n \n-#[turbo_tasks::value(shared, serialization = \"auto_for_input\")]\n+#[turbo_tasks::value(shared)]\n #[derive(Hash, Debug, Default, Copy, Clone)]\n pub struct EcmascriptOptions {\n     pub refresh: bool,\n@@ -185,7 +185,7 @@ pub struct EcmascriptOptions {\n     pub keep_last_successful_parse: bool,\n }\n \n-#[turbo_tasks::value(serialization = \"auto_for_input\")]\n+#[turbo_tasks::value]\n #[derive(Hash, Debug, Copy, Clone, TaskInput)]\n pub enum EcmascriptModuleAssetType {\n     /// Module with EcmaScript code"
        },
        {
            "sha": "16827b44858d8862df39711f15b5d56ad01fdaeb",
            "filename": "turbopack/crates/turbopack-ecmascript/src/transform/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -26,7 +26,7 @@ use turbopack_core::{\n     issue::{Issue, IssueSeverity, IssueStage, StyledString},\n };\n \n-#[turbo_tasks::value(serialization = \"auto_for_input\")]\n+#[turbo_tasks::value]\n #[derive(Debug, Clone, Hash)]\n pub enum EcmascriptInputTransform {\n     Plugin(ResolvedVc<TransformPlugin>),\n@@ -88,7 +88,7 @@ impl CustomTransformer for TransformPlugin {\n     }\n }\n \n-#[turbo_tasks::value(transparent, serialization = \"auto_for_input\")]\n+#[turbo_tasks::value(transparent)]\n #[derive(Debug, Clone, Hash)]\n pub struct EcmascriptInputTransforms(Vec<EcmascriptInputTransform>);\n "
        },
        {
            "sha": "0a970d9a300dc0688bcbe271687240a1b1fbba5a",
            "filename": "turbopack/crates/turbopack-nodejs/src/chunking_context.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -96,7 +96,7 @@ impl NodeJsChunkingContextBuilder {\n }\n \n /// A chunking context for build mode.\n-#[turbo_tasks::value(serialization = \"auto_for_input\")]\n+#[turbo_tasks::value]\n #[derive(Debug, Clone, Hash, TaskInput)]\n pub struct NodeJsChunkingContext {\n     /// The root path of the project"
        },
        {
            "sha": "e63b165985bf6318dc7c3b6b6c04a21ebabd11ad",
            "filename": "turbopack/crates/turbopack/src/module_options/module_rule.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_rule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/98c5c8d57370b92446caa14055d8d05c267fc468/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_rule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_rule.rs?ref=98c5c8d57370b92446caa14055d8d05c267fc468",
            "patch": "@@ -76,7 +76,7 @@ pub enum ModuleRuleEffect {\n     Ignore,\n }\n \n-#[turbo_tasks::value(serialization = \"auto_for_input\", shared)]\n+#[turbo_tasks::value(shared)]\n #[derive(Hash, Debug, Copy, Clone)]\n pub enum ModuleType {\n     Ecmascript {"
        }
    ],
    "stats": {
        "total": 118,
        "additions": 41,
        "deletions": 77
    }
}