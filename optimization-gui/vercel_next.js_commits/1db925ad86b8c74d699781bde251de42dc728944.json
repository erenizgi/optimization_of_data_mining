{
    "author": "unstubbable",
    "message": "[test] Deflake custom cache handler test (#85610)\n\n[flakiness\nmetric](https://app.datadoghq.com/ci/test/runs?query=test_level%3Atest%20%40git.repository.id%3A%22github.com%2Fvercel%2Fnext.js%22%20%40test.name%3A%22use-cache-custom-handler%20should%20use%20a%20modern%20custom%20cache%20handler%20if%20provided%22%20%40test.type%3A%22nextjs%22%20%40test.status%3A%22fail%22%20%40git.branch%3Acanary&agg_m=count&agg_m_source=base&agg_t=count&fromUser=true&index=citest&start=1759310750664&end=1761902750664&paused=false)\n\nThe test page used a low revalidate time of 3 seconds. In CI, sometimes\nthat much time passes between the first and second request, causing the\ntest to fail when comparing the data values (locally reproducible with\n`{ cpuThrottleRate: 20 }`). Increasing the revalidate time to 6 seconds\nshould make the test more robust.",
    "sha": "1db925ad86b8c74d699781bde251de42dc728944",
    "files": [
        {
            "sha": "2227cedc21168a925fd028213183e8c2c53e69d0",
            "filename": "test/e2e/app-dir/use-cache-custom-handler/app/page.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1db925ad86b8c74d699781bde251de42dc728944/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1db925ad86b8c74d699781bde251de42dc728944/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fapp%2Fpage.tsx?ref=1db925ad86b8c74d699781bde251de42dc728944",
            "patch": "@@ -7,7 +7,7 @@ import React from 'react'\n async function getData() {\n   'use cache'\n \n-  cacheLife({ revalidate: 3 })\n+  cacheLife({ revalidate: 6 })\n   cacheTag('modern')\n \n   return new Date().toISOString()"
        },
        {
            "sha": "80eb3d9557e61014939a9e70ee802d7c561d2838",
            "filename": "test/e2e/app-dir/use-cache-custom-handler/use-cache-custom-handler.test.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 6,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/1db925ad86b8c74d699781bde251de42dc728944/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fuse-cache-custom-handler.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1db925ad86b8c74d699781bde251de42dc728944/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fuse-cache-custom-handler.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fuse-cache-custom-handler.test.ts?ref=1db925ad86b8c74d699781bde251de42dc728944",
            "patch": "@@ -58,12 +58,16 @@ describe('use-cache-custom-handler', () => {\n     // Because we use a low `revalidate` value for the \"use cache\" function, new\n     // data should be returned eventually.\n \n-    await retry(async () => {\n-      await browser.refresh()\n-      data = await browser.elementById('data').text()\n-      expect(data).toMatch(isoDateRegExp)\n-      expect(data).not.toEqual(initialData)\n-    }, 5000)\n+    await retry(\n+      async () => {\n+        await browser.refresh()\n+        data = await browser.elementById('data').text()\n+        expect(data).toMatch(isoDateRegExp)\n+        expect(data).not.toEqual(initialData)\n+      },\n+      10_000,\n+      2_000\n+    )\n   })\n \n   it('calls neither refreshTags nor getExpiration if \"use cache\" is not used', async () => {"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 11,
        "deletions": 7
    }
}