{
    "author": "gaojude",
    "message": "doc: add build lifecycle hooks documentation (#78842)\n\nAdded documentation for the new Build Lifecycle Hooks feature in the\nNext.js Compiler, specifically the `runAfterProductionCompile` hook.\n\nhttps://github.com/vercel/next.js/pull/77345",
    "sha": "a64130eba16147195f9f43f18f81e6abdc8734b8",
    "files": [
        {
            "sha": "387b801ea949e3ebf21bf96db4848ce479f571e9",
            "filename": "docs/03-architecture/nextjs-compiler.mdx",
            "status": "modified",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/a64130eba16147195f9f43f18f81e6abdc8734b8/docs%2F03-architecture%2Fnextjs-compiler.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/a64130eba16147195f9f43f18f81e6abdc8734b8/docs%2F03-architecture%2Fnextjs-compiler.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F03-architecture%2Fnextjs-compiler.mdx?ref=a64130eba16147195f9f43f18f81e6abdc8734b8",
            "patch": "@@ -278,6 +278,29 @@ module.exports = {\n }\n ```\n \n+### Build Lifecycle Hooks\n+\n+The Next.js Compiler supports lifecycle hooks that allow you to run custom code at specific points during the build process. Currently, the following hook is supported:\n+\n+#### runAfterProductionCompile\n+\n+A hook function that executes after production build compilation finishes, but before running post-compilation tasks such as type checking and static page generation. This hook provides access to project metadata including the project directory and build output directory, making it useful for third-party tools to collect build outputs like sourcemaps.\n+\n+```js filename=\"next.config.js\"\n+module.exports = {\n+  compiler: {\n+    runAfterProductionCompile: async ({ distDir, projectDir }) => {\n+      // Your custom code here\n+    },\n+  },\n+}\n+```\n+\n+The hook receives an object with the following properties:\n+\n+- `distDir`: The build output directory (defaults to `.next`)\n+- `projectDir`: The root directory of the project\n+\n ## Experimental Features\n \n ### SWC Trace profiling"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 23,
        "deletions": 0
    }
}