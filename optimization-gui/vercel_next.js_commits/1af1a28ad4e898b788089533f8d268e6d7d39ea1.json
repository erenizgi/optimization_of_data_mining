{
    "author": "acdlite",
    "message": "Delete abandoned segment parsing code (#82458)\n\nOriginally, as part of the clientParamParsing feature, I expected that I\nwould omit param values from the FlightRouterState when sending data\nfrom the server, and add it on the client.\n\nHowever, I've since realized this is unnecessary because\nFlightRouterState is only used during runtime server responses. Not in\nstatic responses, like per-segment prefetches.\n\nSince the goal of clientParamParsing is to omit param values from static\nresponses, we don't need to change anything about FlightRouterState.\n\nWe may still want to update how params are processed on the server to\nmore closely match the implementation on the client, but that still\ndoesn't require any changes to FlightRouterState.\n\nSo, this deletes all the code related to adding client-parsed params to\nFlightRouterState on the client. None of this was being used anywhere;\nit was added by previous PRs in anticipation that it would eventually be\nused. But now we don't need it.",
    "sha": "1af1a28ad4e898b788089533f8d268e6d7d39ea1",
    "files": [
        {
            "sha": "cede245cfbd3025b32715d6c8304ee0eb8242cea",
            "filename": "packages/next/src/client/components/router-reducer/create-initial-router-state.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 19,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Fcreate-initial-router-state.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Fcreate-initial-router-state.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Fcreate-initial-router-state.ts?ref=1af1a28ad4e898b788089533f8d268e6d7d39ea1",
            "patch": "@@ -38,25 +38,7 @@ export function createInitialRouterState({\n   // as a URL that should be crawled.\n   const initialCanonicalUrl = initialCanonicalUrlParts.join('/')\n \n-  // TODO: Eventually we want to always read the rendered params from the URL\n-  // and/or the x-rewritten-path header, so that we can omit them from the\n-  // response body. This lets reuse cached responses if params aren't referenced\n-  // anywhere in the actual page data, e.g. if they're only accessed by client\n-  // components. However, during the initial render, there's no way to access\n-  // the headers. For a partially dynamic page, this is OK, because there's\n-  // going to be a dynamic server render regardless, so we can send the URL\n-  // in the resume body. For a completely static page, though, there's no\n-  // dynamic server render, so that won't work.\n-  //\n-  // Instead, we'll perform a HEAD request and read the rewritten URL from\n-  // that response.\n-  const renderedPathname = new URL(initialCanonicalUrl, 'http://localhost')\n-    .pathname\n-\n-  const normalizedFlightData = getFlightDataPartsFromPath(\n-    initialFlightData[0],\n-    renderedPathname\n-  )\n+  const normalizedFlightData = getFlightDataPartsFromPath(initialFlightData[0])\n   const {\n     tree: initialTree,\n     seedData: initialSeedData,"
        },
        {
            "sha": "41e19e3ed572696bb4c1cb020b3ca44728c4f6e7",
            "filename": "packages/next/src/client/components/router-reducer/fetch-server-response.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 18,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Ffetch-server-response.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Ffetch-server-response.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Ffetch-server-response.ts?ref=1af1a28ad4e898b788089533f8d268e6d7d39ea1",
            "patch": "@@ -31,10 +31,7 @@ import {\n } from '../../flight-data-helpers'\n import { getAppBuildId } from '../../app-build-id'\n import { setCacheBustingSearchParam } from './set-cache-busting-search-param'\n-import {\n-  getRenderedPathname,\n-  urlToUrlWithoutFlightMarker,\n-} from '../../route-params'\n+import { urlToUrlWithoutFlightMarker } from '../../route-params'\n \n const createFromReadableStream =\n   createFromReadableStreamBrowser as (typeof import('react-server-dom-webpack/client.browser'))['createFromReadableStream']\n@@ -224,21 +221,8 @@ export async function fetchServerResponse(\n       return doMpaNavigation(res.url)\n     }\n \n-    let renderedPathname\n-    if (process.env.__NEXT_CLIENT_SEGMENT_CACHE) {\n-      // Read the URL from the response object.\n-      renderedPathname = getRenderedPathname(res)\n-    } else {\n-      // Before Segment Cache is enabled, we should not rely on the new\n-      // rewrite headers (x-rewritten-path, x-rewritten-query) because that\n-      // is a breaking change. Read the URL from the response body.\n-      const renderedUrlParts = response.c\n-      renderedPathname = new URL(renderedUrlParts.join('/'), 'http://localhost')\n-        .pathname\n-    }\n-\n     return {\n-      flightData: normalizeFlightData(response.f, renderedPathname),\n+      flightData: normalizeFlightData(response.f),\n       canonicalUrl: canonicalUrl,\n       couldBeIntercepted: interception,\n       prerendered: response.S,"
        },
        {
            "sha": "284b6a353e89c3d12b3ca250163e531ac5fd4a1c",
            "filename": "packages/next/src/client/components/router-reducer/reducers/server-action-reducer.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 17,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Freducers%2Fserver-action-reducer.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Freducers%2Fserver-action-reducer.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Frouter-reducer%2Freducers%2Fserver-action-reducer.ts?ref=1af1a28ad4e898b788089533f8d268e6d7d39ea1",
            "patch": "@@ -56,7 +56,6 @@ import {\n   omitUnusedArgs,\n } from '../../../../shared/lib/server-reference-info'\n import { revalidateEntireCache } from '../../segment-cache'\n-import { getRenderedPathname } from '../../../route-params'\n \n const createFromFetch =\n   createFromFetchBrowser as (typeof import('react-server-dom-webpack/client.browser'))['createFromFetch']\n@@ -183,24 +182,9 @@ async function fetchServerAction(\n       { callServer, findSourceMapURL, temporaryReferences }\n     )\n \n-    let renderedPathname\n-    if (process.env.__NEXT_CLIENT_SEGMENT_CACHE) {\n-      // Read the URL from the response object.\n-      renderedPathname = getRenderedPathname(res)\n-    } else {\n-      // Before Segment Cache is enabled, we should not rely on the new\n-      // rewrite headers (x-rewritten-path, x-rewritten-query) because that\n-      // is a breaking change. Read the URL from the response body.\n-      const canonicalUrlParts = response.c\n-      renderedPathname = new URL(\n-        canonicalUrlParts.join('/'),\n-        'http://localhost'\n-      ).pathname\n-    }\n-\n     // An internal redirect can send an RSC response, but does not have a useful `actionResult`.\n     actionResult = redirectLocation ? undefined : response.a\n-    actionFlightData = normalizeFlightData(response.f, renderedPathname)\n+    actionFlightData = normalizeFlightData(response.f)\n   } else {\n     // An external redirect doesn't contain RSC data.\n     actionResult = undefined"
        },
        {
            "sha": "2a5d41db1627f1a3878406540f12549fb38142f0",
            "filename": "packages/next/src/client/components/segment-cache-impl/cache.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 17,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fsegment-cache-impl%2Fcache.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fsegment-cache-impl%2Fcache.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Fsegment-cache-impl%2Fcache.ts?ref=1af1a28ad4e898b788089533f8d268e6d7d39ea1",
            "patch": "@@ -46,6 +46,7 @@ import type {\n import {\n   doesStaticSegmentAppearInURL,\n   getCacheKeyForDynamicParam,\n+  getParamValueFromCacheKey,\n   getRenderedPathname,\n   getRenderedSearch,\n   parseDynamicParamFromURLPart,\n@@ -975,12 +976,7 @@ function convertTreePrefetchToRouteTree(\n           value: childParamValue,\n           type: childParamType,\n         }\n-        childSegment = [\n-          childParamName,\n-          childParamKey,\n-          childParamType,\n-          childParamValue,\n-        ]\n+        childSegment = [childParamName, childParamKey, childParamType]\n         childDoesAppearInURL = true\n       } else {\n         childSegment = childParamName\n@@ -1082,7 +1078,9 @@ function convertFlightRouterStateToRouteTree(\n   let segment: FlightRouterStateSegment\n   let param: RouteParam | null = null\n   if (Array.isArray(originalSegment)) {\n-    const paramValue = originalSegment[3]\n+    const paramCacheKey = originalSegment[1]\n+    const paramType = originalSegment[2]\n+    const paramValue = getParamValueFromCacheKey(paramCacheKey, paramType)\n     param = {\n       name: originalSegment[0],\n       value: paramValue === undefined ? null : paramValue,\n@@ -1647,12 +1645,8 @@ function writeDynamicTreeResponseIntoCache(\n   // Get the URL that was used to render the target page. This may be different\n   // from the URL in the request URL, if the page was rewritten.\n   const renderedSearch = getRenderedSearch(response)\n-  const renderedPathname = getRenderedPathname(response)\n \n-  const normalizedFlightDataResult = normalizeFlightData(\n-    serverData.f,\n-    renderedPathname\n-  )\n+  const normalizedFlightDataResult = normalizeFlightData(serverData.f)\n   if (\n     // A string result means navigating to this route will result in an\n     // MPA navigation.\n@@ -1759,11 +1753,7 @@ function writeDynamicRenderResponseIntoCache(\n     return null\n   }\n \n-  // Get the URL that was used to render the target page. This may be different\n-  // from the URL in the request URL, if the page was rewritten.\n-  const renderedPathname = getRenderedPathname(response)\n-\n-  const flightDatas = normalizeFlightData(serverData.f, renderedPathname)\n+  const flightDatas = normalizeFlightData(serverData.f)\n   if (typeof flightDatas === 'string') {\n     // This means navigating to this route will result in an MPA navigation.\n     // TODO: We should cache this, too, so that the MPA navigation is immediate."
        },
        {
            "sha": "c0b4604773487f756e5cc451f791db97a7f22a0d",
            "filename": "packages/next/src/client/flight-data-helpers.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 102,
            "changes": 105,
            "blob_url": "https://github.com/vercel/next.js/blob/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fflight-data-helpers.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Fflight-data-helpers.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fflight-data-helpers.ts?ref=1af1a28ad4e898b788089533f8d268e6d7d39ea1",
            "patch": "@@ -1,6 +1,5 @@\n import type {\n   CacheNodeSeedData,\n-  DynamicParamTypesShort,\n   FlightData,\n   FlightDataPath,\n   FlightRouterState,\n@@ -9,10 +8,6 @@ import type {\n } from '../server/app-render/types'\n import type { HeadData } from '../shared/lib/app-router-context.shared-runtime'\n import { PAGE_SEGMENT_KEY } from '../shared/lib/segment'\n-import {\n-  doesStaticSegmentAppearInURL,\n-  parseDynamicParamFromURLPart,\n-} from './route-params'\n \n export type NormalizedFlightData = {\n   /**\n@@ -36,8 +31,7 @@ export type NormalizedFlightData = {\n // we're currently exporting it so we can use it directly. This should be fixed as part of the unification of\n // the different ways we express `FlightSegmentPath`.\n export function getFlightDataPartsFromPath(\n-  flightDataPath: FlightDataPath,\n-  renderedPathname: string\n+  flightDataPath: FlightDataPath\n ): NormalizedFlightData {\n   // Pick the last 4 items from the `FlightDataPath` to get the [tree, seedData, viewport, isHeadPartial].\n   const flightDataPathLength = 4\n@@ -47,8 +41,6 @@ export function getFlightDataPartsFromPath(\n   // The `FlightSegmentPath` is everything except the last three items. For a root render, it won't be present.\n   const segmentPath = flightDataPath.slice(0, -flightDataPathLength)\n \n-  fillTreeWithParamValues(renderedPathname, segmentPath, tree)\n-\n   return {\n     // TODO: Unify these two segment path helpers. We are inconsistently pushing an empty segment (\"\")\n     // to the start of the segment path in some places which makes it hard to use solely the segment path.\n@@ -75,8 +67,7 @@ export function getNextFlightSegmentPath(\n }\n \n export function normalizeFlightData(\n-  flightData: FlightData,\n-  renderedPathname: string\n+  flightData: FlightData\n ): NormalizedFlightData[] | string {\n   // FlightData can be a string when the server didn't respond with a proper flight response,\n   // or when a redirect happens, to signal to the client that it needs to perform an MPA navigation.\n@@ -85,7 +76,7 @@ export function normalizeFlightData(\n   }\n \n   return flightData.map((flightDataPath) =>\n-    getFlightDataPartsFromPath(flightDataPath, renderedPathname)\n+    getFlightDataPartsFromPath(flightDataPath)\n   )\n }\n \n@@ -180,93 +171,3 @@ function shouldPreserveRefreshMarker(\n ): boolean {\n   return Boolean(refreshMarker && refreshMarker !== 'refresh')\n }\n-\n-function fillTreeWithParamValues(\n-  renderedPathname: string,\n-  segmentPath: FlightSegmentPath,\n-  flightRouterState: FlightRouterState\n-): void {\n-  // Traverse the FlightRouterState and fill in the param values using the\n-  // rendered pathname.\n-\n-  // Remove trailing and leading slashes, then split the pathname into parts.\n-  // These will be assigned as params as we traverse the tree.\n-  const pathnameParts = renderedPathname.split('/').filter((p) => p !== '')\n-\n-  let pathnamePartsIndex = 0\n-\n-  // segmentPath represents the parent path of subtree. It's a repeating pattern\n-  // of parallel route key and segment:\n-  //\n-  //   [string, Segment, string, Segment, string, Segment, ...]\n-  //\n-  // Iterate through the path and skip over the corresponding pathname parts.\n-  for (let i = 0; i < segmentPath.length; i += 2) {\n-    const segment: Segment = segmentPath[i + 1]\n-    if (Array.isArray(segment) || doesStaticSegmentAppearInURL(segment)) {\n-      // This segment appears in the URL, so we need to skip over this part\n-      // of the pathname\n-      pathnamePartsIndex++\n-    }\n-  }\n-\n-  fillTreeWithParamValuesImpl(\n-    renderedPathname,\n-    flightRouterState,\n-    pathnameParts,\n-    pathnamePartsIndex\n-  )\n-}\n-\n-function fillTreeWithParamValuesImpl(\n-  renderedPathname: string,\n-  flightRouterState: FlightRouterState,\n-  pathnameParts: Array<string>,\n-  pathnamePartsIndex: number\n-): void {\n-  const segment = flightRouterState[0]\n-\n-  let doesAppearInURL: boolean\n-  if (Array.isArray(segment)) {\n-    doesAppearInURL = true\n-\n-    // This segment is parameterized. Get the param from the pathname.\n-    const paramType = segment[2] as DynamicParamTypesShort\n-    const paramValue = parseDynamicParamFromURLPart(\n-      paramType,\n-      pathnameParts,\n-      pathnamePartsIndex\n-    )\n-\n-    // Insert the param value into the segment.\n-    // TODO: Eventually this is the value that will be passed to client\n-    // components that render this param.\n-    segment[3] = paramValue\n-\n-    // Assign a cache key to the segment, based on the param value. In the\n-    // pre-Segment Cache implementation, the server computes this and sends it\n-    // in the body of the response. In the Segment Cache implementation, the\n-    // server sends an empty string and we fill it in here.\n-    // TODO: This will land in a follow up PR.\n-    // const segmentCacheKey = getCacheKeyForDynamicParam(paramValue)\n-    // segment[1] = segmentCacheKey\n-  } else {\n-    doesAppearInURL = doesStaticSegmentAppearInURL(segment)\n-  }\n-\n-  // Only increment the index if the segment appears in the URL. If it's a\n-  // \"virtual\" segment, like a route group, it remains the same.\n-  const childPathnamePartsIndex = doesAppearInURL\n-    ? pathnamePartsIndex + 1\n-    : pathnamePartsIndex\n-\n-  const parallelRoutes = flightRouterState[1]\n-  for (const parallelRouteKey in parallelRoutes) {\n-    fillTreeWithParamValuesImpl(\n-      renderedPathname,\n-      parallelRoutes[parallelRouteKey],\n-      pathnameParts,\n-      childPathnamePartsIndex\n-    )\n-  }\n-}"
        },
        {
            "sha": "c55f76205fd6ce003f9805b1925953f205e9edb8",
            "filename": "packages/next/src/client/route-params.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Froute-params.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fclient%2Froute-params.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Froute-params.ts?ref=1af1a28ad4e898b788089533f8d268e6d7d39ea1",
            "patch": "@@ -159,3 +159,22 @@ export function urlToUrlWithoutFlightMarker(url: URL): URL {\n   }\n   return urlWithoutFlightParameters\n }\n+\n+export function getParamValueFromCacheKey(\n+  paramCacheKey: string,\n+  paramType: DynamicParamTypesShort\n+) {\n+  // Turn the cache key string sent by the server (as part of FlightRouterState)\n+  // into a value that can be passed to `useParams` and client components.\n+  const isCatchAll = paramType === 'c' || paramType === 'oc'\n+  if (isCatchAll) {\n+    // Catch-all param keys are a concatenation of the path segments.\n+    // See equivalent logic in `getSelectedParams`.\n+    // TODO: We should just pass the array directly, rather than concatenate\n+    // it to a string and then split it back to an array. It needs to be an\n+    // array in some places, like when passing a key React, but we can convert\n+    // it at runtime in those places.\n+    return paramCacheKey.split('/')\n+  }\n+  return paramCacheKey\n+}"
        },
        {
            "sha": "f72974bfa3dac86fdd939c16d34a229fffbf7ad1",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=1af1a28ad4e898b788089533f8d268e6d7d39ea1",
            "patch": "@@ -505,14 +505,12 @@ async function generateDynamicRSCPayload(\n       a: options.actionResult,\n       f: flightData,\n       b: ctx.sharedContext.buildId,\n-      c: prepareInitialCanonicalUrl(url),\n     }\n   }\n \n   // Otherwise, it's a regular RSC response.\n   return {\n     b: ctx.sharedContext.buildId,\n-    c: prepareInitialCanonicalUrl(url),\n     f: flightData,\n     S: workStore.isStaticGeneration,\n   }"
        },
        {
            "sha": "a84eea91fb5367cc7b3a63e37d8a46c62ef8df1b",
            "filename": "packages/next/src/server/app-render/types.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 28,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1af1a28ad4e898b788089533f8d268e6d7d39ea1/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts?ref=1af1a28ad4e898b788089533f8d268e6d7d39ea1",
            "patch": "@@ -36,21 +36,19 @@ export type DynamicParamTypesShort = s.Infer<typeof dynamicParamTypesSchema>\n \n const segmentSchema = s.union([\n   s.string(),\n-  s.union([\n-    s.tuple([s.string(), s.string(), dynamicParamTypesSchema]),\n-    // On the client, the dynamic param array contains an additional\n-    // slot for param value.\n-    s.tuple([\n-      // Param name\n-      s.string(),\n-      // Param cache key (almost the same as the value, but arrays are\n-      // concatenated into strings)\n-      s.string(),\n-      // Dynamic param type\n-      dynamicParamTypesSchema,\n-      // Param value (the one passed to components)\n-      s.nullable(s.union([s.string(), s.array(s.string())])),\n-    ]),\n+\n+  s.tuple([\n+    // Param name\n+    s.string(),\n+    // Param cache key (almost the same as the value, but arrays are\n+    // concatenated into strings)\n+    // TODO: We should change this to just be the value. Currently we convert\n+    // it back to a value when passing to useParams. It only needs to be\n+    // a string when converted to a a cache key, but that doesn't mean we\n+    // need to store it as that representation.\n+    s.string(),\n+    // Dynamic param type\n+    dynamicParamTypesSchema,\n   ]),\n ])\n \n@@ -329,9 +327,6 @@ export type InitialRSCPayload = {\n   b: string\n   /** assetPrefix */\n   p: string\n-  // TODO: This isn't really the \"canonical\" URL (which we usually use to refer\n-  // to the URL shown in the browser), it's the URL used to render the page,\n-  // which may have been rewritten on the server.\n   /** initialCanonicalUrlParts */\n   c: string[]\n   /** couldBeIntercepted */\n@@ -352,11 +347,6 @@ export type InitialRSCPayload = {\n export type NavigationFlightResponse = {\n   /** buildId */\n   b: string\n-  // TODO: This isn't really the \"canonical\" URL (which we usually use to refer\n-  // to the URL shown in the browser), it's the URL used to render the page,\n-  // which may have been rewritten on the server.\n-  /** canonicalUrlParts */\n-  c: string[]\n   /** flightData */\n   f: FlightData\n   /** prerendered */\n@@ -369,11 +359,6 @@ export type ActionFlightResponse = {\n   a: ActionResult\n   /** buildId */\n   b: string\n-  // TODO: This isn't really the \"canonical\" URL (which we usually use to refer\n-  // to the URL shown in the browser), it's the URL used to render the page,\n-  // which may have been rewritten on the server.\n-  /** canonicalUrlParts */\n-  c: string[]\n   /** flightData */\n   f: FlightData\n }"
        }
    ],
    "stats": {
        "total": 249,
        "additions": 46,
        "deletions": 203
    }
}