{
    "author": "kdy1",
    "message": "fix(next-swc): Fix react compiler usefulness detector (#79479)\n\n### What?\n\nFix usefulness detector for the React Compiler\n\n### Why?\n\nJSX was also target of the React Compiler\n\n### How?\n\nCloses https://github.com/vercel/next.js/issues/79385",
    "sha": "e680bee9cc1378e624267f786f9ee31a6d9f5a9a",
    "files": [
        {
            "sha": "f126e39d1e8e1e3cadc80dd59fdb385937e206d3",
            "filename": "crates/next-custom-transforms/src/react_compiler.rs",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/e680bee9cc1378e624267f786f9ee31a6d9f5a9a/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/e680bee9cc1378e624267f786f9ee31a6d9f5a9a/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Freact_compiler.rs?ref=e680bee9cc1378e624267f786f9ee31a6d9f5a9a",
            "patch": "@@ -38,6 +38,18 @@ impl Visit for Finder {\n         if self.found {\n             return;\n         }\n+        if matches!(\n+            node,\n+            Expr::JSXMember(..)\n+                | Expr::JSXNamespacedName(..)\n+                | Expr::JSXEmpty(..)\n+                | Expr::JSXElement(..)\n+                | Expr::JSXFragment(..)\n+        ) {\n+            self.found = true;\n+            return;\n+        }\n+\n         node.visit_children_with(self);\n     }\n \n@@ -54,7 +66,7 @@ impl Visit for Finder {\n     fn visit_fn_expr(&mut self, node: &FnExpr) {\n         let old = self.is_interested;\n \n-        self.is_interested = node.ident.as_ref().is_some_and(|ident| {\n+        self.is_interested |= node.ident.as_ref().is_some_and(|ident| {\n             ident.sym.starts_with(\"use\") || ident.sym.starts_with(|c: char| c.is_ascii_uppercase())\n         });\n "
        }
    ],
    "stats": {
        "total": 14,
        "additions": 13,
        "deletions": 1
    }
}