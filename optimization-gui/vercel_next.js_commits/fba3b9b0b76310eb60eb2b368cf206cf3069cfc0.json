{
    "author": "ijjk",
    "message": "Ensure we normalize .rsc/.prefetch.rsc (#80409)\n\nWhen we match a `.rsc` or `.prefetch.rsc` path we need to normalize the\nURL used to not include this as it could leak through to the canonical\nURL used for rendering and with `usePathname()`.\n\nx-ref: [slack\nthread](https://vercel.slack.com/archives/C08VDSLKNVC/p1749551233763969)",
    "sha": "fba3b9b0b76310eb60eb2b368cf206cf3069cfc0",
    "files": [
        {
            "sha": "c55340695ba38fddc36a631dd2340979e79fcdb2",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/fba3b9b0b76310eb60eb2b368cf206cf3069cfc0/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/fba3b9b0b76310eb60eb2b368cf206cf3069cfc0/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=fba3b9b0b76310eb60eb2b368cf206cf3069cfc0",
            "patch": "@@ -2637,7 +2637,7 @@ export default abstract class Server<\n             const parsedInitUrl = parseUrl(\n               getRequestMeta(req, 'initURL') || req.url\n             )\n-            request.url = `${parsedInitUrl.pathname}${parsedInitUrl.search || ''}`\n+            request.url = `${parsedInitUrl.pathname?.replace(/(\\.prefetch\\.rsc|\\.rsc)$/, '')}${parsedInitUrl.search || ''}`\n \n             // propagate the request context for dev\n             setRequestMeta(request, getRequestMeta(req))"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}