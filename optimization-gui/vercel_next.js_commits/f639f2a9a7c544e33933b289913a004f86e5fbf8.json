{
    "author": "devjiwonchoi",
    "message": "[release-new] fix: slack notification only if is a publish workflow (#79933)\n\nThe Slack notification workflow didn't have if condition, so it was\nnotified on every `build_and_deploy` job.\n\nx-ref: [slack\nthread](https://vercel.slack.com/archives/C0668R2391V/p1748475689878939)",
    "sha": "f639f2a9a7c544e33933b289913a004f86e5fbf8",
    "files": [
        {
            "sha": "1ba5fb6d29aff74a66f0f95f9b282a64e20431eb",
            "filename": ".github/workflows/build_and_deploy.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f639f2a9a7c544e33933b289913a004f86e5fbf8/.github%2Fworkflows%2Fbuild_and_deploy.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/f639f2a9a7c544e33933b289913a004f86e5fbf8/.github%2Fworkflows%2Fbuild_and_deploy.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_deploy.yml?ref=f639f2a9a7c544e33933b289913a004f86e5fbf8",
            "patch": "@@ -606,6 +606,7 @@ jobs:\n       # New release process\n       - name: Publish to NPM\n         id: changesets\n+        # TODO: Change to IS_RELEASE condition when new release becomes stable.\n         if: ${{ env.__NEW_RELEASE == 'true' }}\n         uses: changesets/action@v1\n         with:\n@@ -615,6 +616,8 @@ jobs:\n           NPM_TOKEN: ${{ secrets.NPM_TOKEN_ELEVATED }}\n \n       - name: Send a Slack notification of the publish status\n+        # TODO: Change to IS_RELEASE condition when new release becomes stable.\n+        if: ${{ env.__NEW_RELEASE == 'true' && (steps.changesets.outputs.published == 'true' || steps.changesets.outputs.published == 'false') }}\n         run: pnpm tsx scripts/release/slack.ts\n         env:\n           SLACK_TOKEN: ${{ secrets.SLACK_TOKEN }}"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 3,
        "deletions": 0
    }
}