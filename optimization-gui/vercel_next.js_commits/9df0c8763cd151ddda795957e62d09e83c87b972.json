{
    "author": "huozhi",
    "message": "[segment explorer] handle edge and pages router (#80668)",
    "sha": "9df0c8763cd151ddda795957e62d09e83c87b972",
    "files": [
        {
            "sha": "faf4cf687bff28c878a0a2d3e6c0218eae8b3c30",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -799,6 +799,8 @@ pub struct ExperimentalConfig {\n     global_not_found: Option<bool>,\n     /// Defaults to false in development mode, true in production mode.\n     turbopack_remove_unused_exports: Option<bool>,\n+    /// Devtool option for the segment explorer.\n+    devtool_segment_explorer: Option<bool>,\n }\n \n #[derive("
        },
        {
            "sha": "36e79fbf594470833f3e78e491be39642f18606c",
            "filename": "packages/next/src/build/define-env.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -209,6 +209,15 @@ export function getDefineEnv({\n           'process.env.__NEXT_DIST_DIR': distDir,\n         }\n       : {}),\n+    // This is used in devtools to strip the project path in edge runtime,\n+    // as there's only a dummy `dir` value (`.`) as edge runtime doesn't have concept of file system.\n+    ...(dev && isEdgeServer\n+      ? {\n+          'process.env.__NEXT_EDGE_PROJECT_DIR': isTurbopack\n+            ? path.relative(process.cwd(), projectPath)\n+            : projectPath,\n+        }\n+      : {}),\n     'process.env.__NEXT_TRAILING_SLASH': config.trailingSlash,\n     'process.env.__NEXT_DEV_INDICATOR': config.devIndicators !== false,\n     'process.env.__NEXT_DEV_INDICATOR_POSITION':"
        },
        {
            "sha": "c45746066b892ccfb57f1ef2f9c60ab04ed3c599",
            "filename": "packages/next/src/build/webpack/loaders/next-edge-ssr-loader/render.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-edge-ssr-loader%2Frender.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-edge-ssr-loader%2Frender.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-edge-ssr-loader%2Frender.ts?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -100,6 +100,7 @@ export function getRender({\n         serverActionsManifest,\n         serverActions,\n         nextFontManifest,\n+        devtoolSegmentExplorer: config.experimental.devtoolSegmentExplorer,\n       },\n       renderToHTML,\n       incrementalCacheHandler,"
        },
        {
            "sha": "e22ba252a9edd651d291e8b2b325bc6cf085f01a",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-indicator.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -343,6 +343,7 @@ function DevToolsPopover({\n           close={closeToRootMenu}\n           triggerRef={triggerRef}\n           style={popover}\n+          routerType={routerType}\n         />\n       ) : null}\n "
        },
        {
            "sha": "6ac1b0e428f2440889a7757038940bc1e921b889",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overview/segment-explorer.tsx",
            "status": "modified",
            "additions": 21,
            "deletions": 7,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -9,13 +9,23 @@ const isFileNode = (node: SegmentTrieNode) => {\n   return !!node.value?.type && !!node.value?.pagePath\n }\n \n-function PageSegmentTree({ tree }: { tree: SegmentTrieNode }) {\n+function PageSegmentTree({\n+  tree,\n+  isAppRouter,\n+}: {\n+  tree: SegmentTrieNode\n+  isAppRouter: boolean\n+}) {\n   return (\n     <div\n       className=\"segment-explorer-content\"\n       data-nextjs-devtool-segment-explorer\n     >\n-      <PageSegmentTreeLayerPresentation node={tree} level={0} segment=\"\" />\n+      {isAppRouter ? (\n+        <PageSegmentTreeLayerPresentation node={tree} level={0} segment=\"\" />\n+      ) : (\n+        <p>Route Info currently is only available for the App Router.</p>\n+      )}\n     </div>\n   )\n }\n@@ -162,14 +172,18 @@ function PageSegmentTreeLayerPresentation({\n   )\n }\n \n-export function SegmentsExplorer(\n-  props: DevToolsInfoPropsCore & HTMLProps<HTMLDivElement>\n-) {\n+export function SegmentsExplorer({\n+  routerType,\n+  ...props\n+}: DevToolsInfoPropsCore &\n+  HTMLProps<HTMLDivElement> & {\n+    routerType: 'app' | 'pages'\n+  }) {\n   const tree = useSegmentTree()\n-\n+  const isAppRouter = routerType === 'app'\n   return (\n     <DevToolsInfo title=\"Route Info\" {...props}>\n-      <PageSegmentTree tree={tree} />\n+      <PageSegmentTree tree={tree} isAppRouter={isAppRouter} />\n     </DevToolsInfo>\n   )\n }"
        },
        {
            "sha": "58b5a1417e5d85877a2ccdb69a75be31d0d279d6",
            "filename": "packages/next/src/next-devtools/userspace/use-app-dev-rendering-indicator.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fuse-app-dev-rendering-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fuse-app-dev-rendering-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fuse-app-dev-rendering-indicator.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -1,3 +1,5 @@\n+'use client'\n+\n import { useEffect, useTransition } from 'react'\n import { dispatcher } from 'next/dist/compiled/next-devtools'\n "
        },
        {
            "sha": "a25b3fea41432a67a61cd7f9bb6058ce002e0ae4",
            "filename": "packages/next/src/server/app-render/create-component-tree.tsx",
            "status": "modified",
            "additions": 33,
            "deletions": 29,
            "changes": 62,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -421,7 +421,10 @@ async function createComponentTreeInternal({\n     </>\n   ) : undefined\n \n-  const dir = ctx.renderOpts.dir || ''\n+  const dir =\n+    process.env.NEXT_RUNTIME === 'edge'\n+      ? process.env.__NEXT_EDGE_PROJECT_DIR!\n+      : ctx.renderOpts.dir || ''\n \n   const isSegmentViewEnabled =\n     process.env.NODE_ENV === 'development' &&\n@@ -651,17 +654,7 @@ async function createComponentTreeInternal({\n   }\n \n   if (isPage) {\n-    const pageFilePath = getConventionPathByType(tree, dir, 'page')\n-    const PageComponent =\n-      isSegmentViewEnabled && pageFilePath\n-        ? (pageProps: any) => {\n-            return (\n-              <SegmentViewNode type={nodeName} pagePath={pageFilePath}>\n-                <Component {...pageProps} />\n-              </SegmentViewNode>\n-            )\n-          }\n-        : Component\n+    const PageComponent = Component\n \n     // Assign searchParams to props if this is a page\n     let pageElement: React.ReactNode\n@@ -727,10 +720,21 @@ async function createComponentTreeInternal({\n         )\n       }\n     }\n+\n+    const pageFilePath = getConventionPathByType(tree, dir, 'page')\n+    const wrappedPageElement =\n+      isSegmentViewEnabled && pageFilePath ? (\n+        <SegmentViewNode type={nodeName} pagePath={pageFilePath}>\n+          {pageElement}\n+        </SegmentViewNode>\n+      ) : (\n+        pageElement\n+      )\n+\n     return [\n       actualSegment,\n       <React.Fragment key={cacheNodeKey}>\n-        {pageElement}\n+        {wrappedPageElement}\n         {layerAssets}\n         <OutletBoundary>\n           <MetadataOutlet ready={getViewportReady} />\n@@ -742,18 +746,7 @@ async function createComponentTreeInternal({\n       isPossiblyPartialResponse,\n     ]\n   } else {\n-    const layoutFilePath = getConventionPathByType(tree, dir, 'layout')\n-    const SegmentComponent =\n-      isSegmentViewEnabled && layoutFilePath\n-        ? (segmentProps: any) => {\n-            return (\n-              <SegmentViewNode type={nodeName} pagePath={layoutFilePath}>\n-                <Component {...segmentProps} />\n-              </SegmentViewNode>\n-            )\n-          }\n-        : Component\n-\n+    const SegmentComponent = Component\n     const isRootLayoutWithChildrenSlotAndAtLeastOneMoreSlot =\n       rootLayoutAtThisLevel &&\n       'children' in parallelRoutes &&\n@@ -912,10 +905,21 @@ async function createComponentTreeInternal({\n         )\n       }\n     }\n+\n+    const layoutFilePath = getConventionPathByType(tree, dir, 'layout')\n+    const wrappedSegmentNode =\n+      isSegmentViewEnabled && layoutFilePath ? (\n+        <SegmentViewNode type={nodeName} pagePath={layoutFilePath}>\n+          {segmentNode}\n+        </SegmentViewNode>\n+      ) : (\n+        segmentNode\n+      )\n+\n     // For layouts we just render the component\n     return [\n       actualSegment,\n-      segmentNode,\n+      wrappedSegmentNode,\n       parallelRouteCacheNodeSeedData,\n       loadingData,\n       isPossiblyPartialResponse,\n@@ -1048,11 +1052,11 @@ function getConventionPathByType(\n   conventionType: 'layout' | 'template' | 'page'\n ) {\n   const modules = tree[2]\n-  const conventionPath_ = modules[conventionType]\n+  const conventionPath = modules[conventionType]\n     ? modules[conventionType][1]\n     : undefined\n-  if (conventionPath_) {\n-    return normalizeConventionFilePath(dir, conventionPath_)\n+  if (conventionPath) {\n+    return normalizeConventionFilePath(dir, conventionPath)\n   }\n   return undefined\n }"
        },
        {
            "sha": "e355998a4433c4d5dbc1dd3722978a2c5abe0b4a",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@bar/default.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Fdefault.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Fdefault.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Fdefault.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'default @bar'\n+}"
        },
        {
            "sha": "1e18e748cf81e93f454e9cd71ce7617948880703",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@bar/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Flayout.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Layout({ children }) {\n+  return (\n+    <div>\n+      <h2>@bar Layout</h2>\n+      <div id=\"bar-children\">{children}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "eb4a3e2e9df71d0f81f102128ee52511d9c00b22",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@bar/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Fpage.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'page @bar'\n+}"
        },
        {
            "sha": "bff087a3a98f99941044142b6601e0ffd4150fe7",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@bar/test-page/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Ftest-page%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Ftest-page%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40bar%2Ftest-page%2Fpage.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'test-page @bar'\n+}"
        },
        {
            "sha": "408576f1876b586e90b61480df9db74ef6568ea8",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@foo/default.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fdefault.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fdefault.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fdefault.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'default @foo'\n+}"
        },
        {
            "sha": "05a3bda4f7be80fce7cf6de65a53e33e8c9bab6f",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@foo/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Flayout.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Layout({ children }) {\n+  return (\n+    <div>\n+      <h2>@foo Layout</h2>\n+      <div id=\"foo-children\">{children}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "44ab40e2ddfce8edb4eacbe5002a952280294d72",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@foo/no-bar/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fno-bar%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fno-bar%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fno-bar%2Fpage.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'no-bar @foo'\n+}"
        },
        {
            "sha": "3536981cea3ff4875f8b1ffea941e755e6268832",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@foo/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Fpage.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'page @foo'\n+}"
        },
        {
            "sha": "8eff01dbe6deca778649eae4eacb6e07e14a0d3c",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/@foo/test-page/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Ftest-page%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Ftest-page%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2F%40foo%2Ftest-page%2Fpage.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return 'test-page @foo'\n+}"
        },
        {
            "sha": "088fb97919687fa7964eae4da038ec06dfe1b3b9",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/layout.tsx",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Flayout.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,10 @@\n+export default function Layout({ children, bar, foo }) {\n+  return (\n+    <div>\n+      <h1>Parallel Routes Layout</h1>\n+      <div id=\"nested-children\">{children}</div>\n+      <div id=\"foo-slot\">{foo}</div>\n+      <div id=\"bar-slot\">{bar}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "e3fcf94eeab83d110c35b1c1005d9e8945a650b6",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/no-bar/page.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Fno-bar%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Fno-bar%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Fno-bar%2Fpage.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Page() {\n+  return (\n+    <div>\n+      <p>no bar</p>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "d9bf9e72d1a83a1c7ea600c742fe7130b20ecb17",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/page.tsx",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Fpage.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,10 @@\n+export default function Page() {\n+  return (\n+    <div>\n+      Hello from Nested <br />\n+      <br />\n+    </div>\n+  )\n+}\n+\n+export const runtime = 'edge'"
        },
        {
            "sha": "ee6b1571a5bfc7bff385367a4e635d649468517e",
            "filename": "test/development/app-dir/segment-explorer/app/parallel-routes-edge/test-page/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Ftest-page%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Ftest-page%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fparallel-routes-edge%2Ftest-page%2Fpage.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function TestPage() {\n+  return 'test page'\n+}"
        },
        {
            "sha": "29fc1e5cd6c41e4a51211fbdddc3ecaf71eea9e8",
            "filename": "test/development/app-dir/segment-explorer/pages/pages-router.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fpages%2Fpages-router.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fpages%2Fpages-router.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fpages%2Fpages-router.tsx?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>pages/pages-router.tsx</p>\n+}"
        },
        {
            "sha": "66c902d9b414849c2a4985b0a6e8c46eec3d7f5f",
            "filename": "test/development/app-dir/segment-explorer/segment-explorer.test.ts",
            "status": "modified",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9df0c8763cd151ddda795957e62d09e83c87b972/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts?ref=9df0c8763cd151ddda795957e62d09e83c87b972",
            "patch": "@@ -40,6 +40,23 @@ describe('segment-explorer', () => {\n     `)\n   })\n \n+  it('should render the segment explorer for parallel routes in edge runtime', async () => {\n+    const browser = await next.browser('/parallel-routes-edge')\n+    expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`\n+     \"app/\n+     layout.tsx\n+     parallel-routes-edge/\n+     layout.tsx\n+     page.tsx\n+     @bar/\n+     layout.tsx\n+     page.tsx\n+     @foo/\n+     layout.tsx\n+     page.tsx\"\n+    `)\n+  })\n+\n   it('should render the segment explorer for nested routes', async () => {\n     const browser = await next.browser('/blog/~/grid')\n     expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`\n@@ -90,4 +107,11 @@ describe('segment-explorer', () => {\n      page.tsx\"\n     `)\n   })\n+\n+  it('should indicate segment explorer is not available for pages router', async () => {\n+    const browser = await next.browser('/pages-router')\n+    expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(\n+      `\"Route Info currently is only available for the App Router.\"`\n+    )\n+  })\n })"
        }
    ],
    "stats": {
        "total": 199,
        "additions": 163,
        "deletions": 36
    }
}