{
    "author": "eps1lon",
    "message": "[devtools] Immediately set meta key in shortcut recorder (#82301)",
    "sha": "7b6136b0d66e0462d0dcc15d5bb634d2fa5cb26b",
    "files": [
        {
            "sha": "35b70982adb8bbacba2ce59e5ebecdcf7b336b76",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-info/shortcut-recorder.tsx",
            "status": "modified",
            "additions": 9,
            "deletions": 22,
            "changes": 31,
            "blob_url": "https://github.com/vercel/next.js/blob/7b6136b0d66e0462d0dcc15d5bb634d2fa5cb26b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fshortcut-recorder.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7b6136b0d66e0462d0dcc15d5bb634d2fa5cb26b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fshortcut-recorder.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fshortcut-recorder.tsx?ref=7b6136b0d66e0462d0dcc15d5bb634d2fa5cb26b",
            "patch": "@@ -1,5 +1,5 @@\n import type { JSX } from 'react'\n-import { useState, useRef, useEffect } from 'react'\n+import { useState, useRef } from 'react'\n import { css } from '../../../../utils/css'\n \n const SUCCESS_SHOW_DELAY_MS = 180\n@@ -308,25 +308,13 @@ function parseKeyCode(code: string | JSX.Element) {\n }\n \n function MetaKey() {\n-  // u00A0 = &nbsp;\n-  const [label, setLabel] = useState('\\u00A0')\n-\n-  const apple = isApple()\n-\n-  useEffect(() => {\n-    // Meta is Command on Apple devices, otherwise Control\n-    if (apple === true) {\n-      // eslint-disable-next-line react-hooks/set-state-in-effect -- TODO\n-      setLabel('⌘')\n-    }\n-\n-    // Explicitly say \"Ctrl\" instead of the symbol \"⌃\"\n-    // because most Windows/Linux laptops do not print the symbol\n-    // Other keyboard-intensive apps like Linear do this\n-    if (apple === false) {\n-      setLabel('Ctrl')\n-    }\n-  }, [apple])\n+  const label = isApple()\n+    ? // Meta is Command on Apple devices, otherwise Control\n+      '⌘'\n+    : // Explicitly say \"Ctrl\" instead of the symbol \"⌃\"\n+      // because most Windows/Linux laptops do not print the symbol\n+      // Other keyboard-intensive apps like Linear do this\n+      'Ctrl'\n \n   return (\n     <span style={{ minWidth: '1em', display: 'inline-block' }}>{label}</span>\n@@ -499,8 +487,7 @@ export const SHORTCUT_RECORDER_STYLES = css`\n ///////////////////////////////////////////////////////////////////////////////////////////////////\n \n function testPlatform(re: RegExp): boolean | undefined {\n-  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- Checking on an unusual environment.\n-  return typeof window !== 'undefined' && window.navigator != null\n+  return window.navigator != null\n     ? re.test(window.navigator.platform)\n     : undefined\n }"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 9,
        "deletions": 22
    }
}