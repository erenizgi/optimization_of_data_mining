{
    "author": "unstubbable",
    "message": "Remove deprecated `legacyBehavior` and `passHref` prop from `Link` component (#83003)\n\nThe `legacyBehavior` prop of the `Link` component has been deprecated\nsince #77473. For Next.js 16, we're finally removing support for it.\nConsequently, we're also removing support for the `passHref` prop, which\nwas only useful in conjunction with the `legacyBehavior` prop.\n\nA [codemod is\navailable](https://nextjs.org/docs/app/guides/upgrading/codemods#new-link)\nto help you automatically upgrade your codebase.\n\nreverts #77473\n\n---------\n\nCo-authored-by: Sebastian Sebbie Silbermann <sebastian.silbermann@vercel.com>",
    "sha": "4b66771895737170a06be242be1e5afc760142d4",
    "files": [
        {
            "sha": "bd6162e185cb3b4d81398a692c0c41348c4087aa",
            "filename": "docs/01-app/02-guides/upgrading/codemods.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 16,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/docs%2F01-app%2F02-guides%2Fupgrading%2Fcodemods.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/docs%2F01-app%2F02-guides%2Fupgrading%2Fcodemods.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fupgrading%2Fcodemods.mdx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -420,13 +420,13 @@ npx @next/codemod@latest new-link .\n \n <AppOnly>\n \n-Remove `<a>` tags inside [Link Components](/docs/app/api-reference/components/link), or add a `legacyBehavior` prop to Links that cannot be auto-fixed.\n+Remove `<a>` tags inside [Link Components](/docs/app/api-reference/components/link).\n \n </AppOnly>\n \n <PagesOnly>\n \n-Remove `<a>` tags inside [Link Components](/docs/pages/api-reference/components/link), or add a `legacyBehavior` prop to Links that cannot be auto-fixed.\n+Remove `<a>` tags inside [Link Components](/docs/pages/api-reference/components/link).\n \n </PagesOnly>\n \n@@ -450,20 +450,6 @@ For example:\n </Link>\n ```\n \n-In cases where auto-fixing can't be applied, the `legacyBehavior` prop is added. This allows your app to keep functioning using the old behavior for that particular link.\n-\n-```jsx\n-const Component = () => <a>About</a>\n-\n-<Link href=\"/about\">\n-  <Component />\n-</Link>\n-// becomes\n-<Link href=\"/about\" legacyBehavior>\n-  <Component />\n-</Link>\n-```\n-\n ### 11\n \n #### Migrate from CRA"
        },
        {
            "sha": "6d7a46244042e603b32b1bf3a2e51f1e9d7fb9b3",
            "filename": "docs/01-app/03-api-reference/02-components/link.mdx",
            "status": "modified",
            "additions": 9,
            "deletions": 212,
            "changes": 221,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/docs%2F01-app%2F03-api-reference%2F02-components%2Flink.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/docs%2F01-app%2F03-api-reference%2F02-components%2Flink.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F02-components%2Flink.mdx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -55,17 +55,15 @@ The following props can be passed to the `<Link>` component:\n \n <PagesOnly>\n \n-| Prop                                | Example                  | Type              | Required |\n-| ----------------------------------- | ------------------------ | ----------------- | -------- |\n-| [`href`](#href-required)            | `href=\"/dashboard\"`      | String or Object  | Yes      |\n-| [`replace`](#replace)               | `replace={false}`        | Boolean           | -        |\n-| [`scroll`](#scroll)                 | `scroll={false}`         | Boolean           | -        |\n-| [`prefetch`](#prefetch)             | `prefetch={false}`       | Boolean           | -        |\n-| [`legacyBehavior`](#legacybehavior) | `legacyBehavior={true}`  | Boolean           | -        |\n-| [`passHref`](#passhref)             | `passHref={true}`        | Boolean           | -        |\n-| [`shallow`](#shallow)               | `shallow={false}`        | Boolean           | -        |\n-| [`locale`](#locale)                 | `locale=\"fr\"`            | String or Boolean | -        |\n-| [`onNavigate`](#onnavigate)         | `onNavigate={(e) => {}}` | Function          | -        |\n+| Prop                        | Example                  | Type              | Required |\n+| --------------------------- | ------------------------ | ----------------- | -------- |\n+| [`href`](#href-required)    | `href=\"/dashboard\"`      | String or Object  | Yes      |\n+| [`replace`](#replace)       | `replace={false}`        | Boolean           | -        |\n+| [`scroll`](#scroll)         | `scroll={false}`         | Boolean           | -        |\n+| [`prefetch`](#prefetch)     | `prefetch={false}`       | Boolean           | -        |\n+| [`shallow`](#shallow)       | `shallow={false}`        | Boolean           | -        |\n+| [`locale`](#locale)         | `locale=\"fr\"`            | String or Boolean | -        |\n+| [`onNavigate`](#onnavigate) | `onNavigate={(e) => {}}` | Function          | -        |\n \n </PagesOnly>\n \n@@ -362,18 +360,6 @@ export default function Home() {\n }\n ```\n \n-### `legacyBehavior`\n-\n-> **Warning**: The `legacyBehavior` prop will be removed in Next.js v16. To adopt the new `<Link>` behavior, remove any `<a>` tags used as children of `<Link>`. A [codemod is available](/docs/app/guides/upgrading/codemods#new-link) to help you automatically upgrade your codebase.\n-\n-Since version 13, an `<a>` element is no longer required as a child of the `<Link>` component. If you still need the old behavior for compatibility reasons, you can add the `legacyBehavior` prop.\n-\n-> **Good to know**: when `legacyBehavior` is not set to `true`, all [`anchor`](https://developer.mozilla.org/docs/Web/HTML/Element/a) tag properties can be passed to `next/link` as well such as, `className`, `onClick`, etc.\n-\n-### `passHref`\n-\n-Forces `Link` to send the `href` property to its child. Defaults to `false`. See the [passing a functional component](#nesting-a-functional-component) example for more information.\n-\n ### `shallow`\n \n Update the path of the current page without rerunning [`getStaticProps`](/docs/pages/building-your-application/data-fetching/get-static-props), [`getServerSideProps`](/docs/pages/building-your-application/data-fetching/get-server-side-props) or [`getInitialProps`](/docs/pages/api-reference/functions/get-initial-props). Defaults to `false`.\n@@ -675,195 +661,6 @@ If you'd like to scroll to a specific `id` on navigation, you can append your UR\n \n </AppOnly>\n \n-### If the child is a custom component that wraps an `<a>` tag\n-\n-<AppOnly>\n-\n-If the child of `Link` is a custom component that wraps an `<a>` tag, you must add `passHref` to `Link`. This is necessary if youâ€™re using libraries like [styled-components](https://styled-components.com/). Without this, the `<a>` tag will not have the `href` attribute, which hurts your site's accessibility and might affect SEO. If you're using [ESLint](/docs/app/api-reference/config/eslint), there is a built-in rule `next/link-passhref` to ensure correct usage of `passHref`.\n-\n-</AppOnly>\n-\n-<PagesOnly>\n-\n-If the child of `Link` is a custom component that wraps an `<a>` tag, you must add `passHref` to `Link`. This is necessary if youâ€™re using libraries like [styled-components](https://styled-components.com/). Without this, the `<a>` tag will not have the `href` attribute, which hurts your site's accessibility and might affect SEO. If you're using [ESLint](/docs/pages/api-reference/config/eslint), there is a built-in rule `next/link-passhref` to ensure correct usage of `passHref`.\n-\n-</PagesOnly>\n-\n-```tsx filename=\"components/nav-link.tsx\" switcher\n-import Link from 'next/link'\n-import styled from 'styled-components'\n-\n-// This creates a custom component that wraps an <a> tag\n-const RedLink = styled.a`\n-  color: red;\n-`\n-\n-function NavLink({ href, name }) {\n-  return (\n-    <Link href={href} passHref legacyBehavior>\n-      <RedLink>{name}</RedLink>\n-    </Link>\n-  )\n-}\n-\n-export default NavLink\n-```\n-\n-```jsx filename=\"components/nav-link.js\" switcher\n-import Link from 'next/link'\n-import styled from 'styled-components'\n-\n-// This creates a custom component that wraps an <a> tag\n-const RedLink = styled.a`\n-  color: red;\n-`\n-\n-function NavLink({ href, name }) {\n-  return (\n-    <Link href={href} passHref legacyBehavior>\n-      <RedLink>{name}</RedLink>\n-    </Link>\n-  )\n-}\n-\n-export default NavLink\n-```\n-\n-- If youâ€™re using [emotion](https://emotion.sh/)â€™s JSX pragma feature (`@jsx jsx`), you must use `passHref` even if you use an `<a>` tag directly.\n-- The component should support `onClick` property to trigger navigation correctly.\n-\n-### Nesting a functional component\n-\n-If the child of `Link` is a functional component, in addition to using `passHref` and `legacyBehavior`, you must wrap the component in [`React.forwardRef`](https://react.dev/reference/react/forwardRef):\n-\n-<AppOnly>\n-\n-```tsx filename=\"app/page.tsx\" switcher\n-import Link from 'next/link'\n-import React from 'react'\n-\n-// Define the props type for MyButton\n-interface MyButtonProps {\n-  onClick?: React.MouseEventHandler<HTMLAnchorElement>\n-  href?: string\n-}\n-\n-// Use React.ForwardRefRenderFunction to properly type the forwarded ref\n-const MyButton: React.ForwardRefRenderFunction<\n-  HTMLAnchorElement,\n-  MyButtonProps\n-> = ({ onClick, href }, ref) => {\n-  return (\n-    <a href={href} onClick={onClick} ref={ref}>\n-      Click Me\n-    </a>\n-  )\n-}\n-\n-// Use React.forwardRef to wrap the component\n-const ForwardedMyButton = React.forwardRef(MyButton)\n-\n-export default function Page() {\n-  return (\n-    <Link href=\"/about\" passHref legacyBehavior>\n-      <ForwardedMyButton />\n-    </Link>\n-  )\n-}\n-```\n-\n-```jsx filename=\"app/page.js\" switcher\n-import Link from 'next/link'\n-import React from 'react'\n-\n-// `onClick`, `href`, and `ref` need to be passed to the DOM element\n-// for proper handling\n-const MyButton = React.forwardRef(({ onClick, href }, ref) => {\n-  return (\n-    <a href={href} onClick={onClick} ref={ref}>\n-      Click Me\n-    </a>\n-  )\n-})\n-\n-// Add a display name for the component (useful for debugging)\n-MyButton.displayName = 'MyButton'\n-\n-export default function Page() {\n-  return (\n-    <Link href=\"/about\" passHref legacyBehavior>\n-      <MyButton />\n-    </Link>\n-  )\n-}\n-```\n-\n-</AppOnly>\n-\n-<PagesOnly>\n-\n-```tsx filename=\"pages/index.tsx\" switcher\n-import Link from 'next/link'\n-import React from 'react'\n-\n-// Define the props type for MyButton\n-interface MyButtonProps {\n-  onClick?: React.MouseEventHandler<HTMLAnchorElement>\n-  href?: string\n-}\n-\n-// Use React.ForwardRefRenderFunction to properly type the forwarded ref\n-const MyButton: React.ForwardRefRenderFunction<\n-  HTMLAnchorElement,\n-  MyButtonProps\n-> = ({ onClick, href }, ref) => {\n-  return (\n-    <a href={href} onClick={onClick} ref={ref}>\n-      Click Me\n-    </a>\n-  )\n-}\n-\n-// Use React.forwardRef to wrap the component\n-const ForwardedMyButton = React.forwardRef(MyButton)\n-\n-export default function Home() {\n-  return (\n-    <Link href=\"/about\" passHref legacyBehavior>\n-      <ForwardedMyButton />\n-    </Link>\n-  )\n-}\n-```\n-\n-```jsx filename=\"pages/index.js\" switcher\n-import Link from 'next/link'\n-import React from 'react'\n-\n-// `onClick`, `href`, and `ref` need to be passed to the DOM element\n-// for proper handling\n-const MyButton = React.forwardRef(({ onClick, href }, ref) => {\n-  return (\n-    <a href={href} onClick={onClick} ref={ref}>\n-      Click Me\n-    </a>\n-  )\n-})\n-\n-// Add a display name for the component (useful for debugging)\n-MyButton.displayName = 'MyButton'\n-\n-export default function Home() {\n-  return (\n-    <Link href=\"/about\" passHref legacyBehavior>\n-      <MyButton />\n-    </Link>\n-  )\n-}\n-```\n-\n-</PagesOnly>\n-\n <PagesOnly>\n \n ### Passing a URL Object"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "docs/app/api-reference/components/link",
            "status": "added",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/docs%2Fapp%2Fapi-reference%2Fcomponents%2Flink",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/docs%2Fapp%2Fapi-reference%2Fcomponents%2Flink",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2Fapp%2Fapi-reference%2Fcomponents%2Flink?ref=4b66771895737170a06be242be1e5afc760142d4"
        },
        {
            "sha": "b49eabcb7d34bd24287614c53e2f8eeb432981bb",
            "filename": "errors/invalid-new-link-with-extra-anchor.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/errors%2Finvalid-new-link-with-extra-anchor.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/errors%2Finvalid-new-link-with-extra-anchor.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Finvalid-new-link-with-extra-anchor.mdx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -16,8 +16,6 @@ npx @next/codemod new-link .\n \n This will change `<Link><a id=\"link\">Home</a></Link>` to `<Link id=\"link\">Home</Link>`.\n \n-Alternatively, you can add the `legacyBehavior` prop `<Link legacyBehavior><a id=\"link\">Home</a></Link>`.\n-\n ## Useful Links\n \n - [next/link](/docs/pages/api-reference/components/link)"
        },
        {
            "sha": "1ff686c1315f2b7166cedb243b4bd69dfd87a61c",
            "filename": "errors/link-no-children.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/errors%2Flink-no-children.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/errors%2Flink-no-children.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Flink-no-children.mdx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -2,6 +2,8 @@\n title: 'No children were passed to `<Link>`'\n ---\n \n+> **Note**: Starting with version `16`, Next.js does not support the `legacyBehavior` prop for a `Link` component anymore . `<Link>` now renders an `<a>` element automatically, and does not restrict the number of children passed to it.\n+\n ## Why This Error Occurred\n \n In your application code, `next/link` was used without passing a child:"
        },
        {
            "sha": "afdab69e310739f728549faa0d0498a1221ee47f",
            "filename": "errors/link-passhref.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/errors%2Flink-passhref.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/errors%2Flink-passhref.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Flink-passhref.mdx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -2,6 +2,8 @@\n title: 'Link `passHref`'\n ---\n \n+> **Note**: Starting with version `16`, Next.js does not support the `passHref` and `legacyBehavior` props for a `Link` component anymore.\n+\n > Ensure `passHref` is used with custom `Link` components.\n \n ## Why This Error Occurred\n@@ -30,7 +32,3 @@ function NavLink({ href, name }) {\n \n export default NavLink\n ```\n-\n-## Useful Links\n-\n-- [next/link - Custom Component](/docs/pages/api-reference/components/link#if-the-child-is-a-custom-component-that-wraps-an-a-tag)"
        },
        {
            "sha": "f7793cab9e5eda66c7fad44275922749f3b01155",
            "filename": "examples/cms-dotcms/components/blocks.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fcms-dotcms%2Fcomponents%2Fblocks.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fcms-dotcms%2Fcomponents%2Fblocks.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fcms-dotcms%2Fcomponents%2Fblocks.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -14,7 +14,7 @@ export const DotLink = ({ attrs: { href, target }, children }) => {\n       {children}\n     </a>\n   ) : (\n-    <Link href={href} target={target || \"_self\"} legacyBehavior>\n+    <Link href={href} target={target || \"_self\"}>\n       {children}\n     </Link>\n   );"
        },
        {
            "sha": "fe92794a47d86897f253311034ed58c38884ad9e",
            "filename": "examples/i18n-routing-pages/components/locale-switcher.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fi18n-routing-pages%2Fcomponents%2Flocale-switcher.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fi18n-routing-pages%2Fcomponents%2Flocale-switcher.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fi18n-routing-pages%2Fcomponents%2Flocale-switcher.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -17,12 +17,7 @@ export default function LocaleSwitcher() {\n           const { pathname, query, asPath } = router;\n           return (\n             <li key={locale}>\n-              <Link\n-                href={{ pathname, query }}\n-                as={asPath}\n-                locale={locale}\n-                legacyBehavior\n-              >\n+              <Link href={{ pathname, query }} as={asPath} locale={locale}>\n                 {locale}\n               </Link>\n             </li>"
        },
        {
            "sha": "44a517638f0fb58dc1ac0f058abc8031991255d4",
            "filename": "examples/with-apollo-and-redux/components/Nav.js",
            "status": "modified",
            "additions": 9,
            "deletions": 6,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-apollo-and-redux%2Fcomponents%2FNav.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-apollo-and-redux%2Fcomponents%2FNav.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-apollo-and-redux%2Fcomponents%2FNav.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -6,14 +6,17 @@ export default function Nav() {\n \n   return (\n     <header>\n-      <Link href=\"/\" legacyBehavior>\n-        <a className={pathname === \"/\" ? \"is-active\" : \"\"}>Home</a>\n+      <Link href=\"/\" className={pathname === \"/\" ? \"is-active\" : \"\"}>\n+        Home\n       </Link>\n-      <Link href=\"/apollo\" legacyBehavior>\n-        <a className={pathname === \"/apollo\" ? \"is-active\" : \"\"}>Apollo</a>\n+      <Link\n+        href=\"/apollo\"\n+        className={pathname === \"/apollo\" ? \"is-active\" : \"\"}\n+      >\n+        Apollo\n       </Link>\n-      <Link href=\"/redux\" legacyBehavior>\n-        <a className={pathname === \"/redux\" ? \"is-active\" : \"\"}>Redux</a>\n+      <Link href=\"/redux\" className={pathname === \"/redux\" ? \"is-active\" : \"\"}>\n+        Redux\n       </Link>\n       <style jsx>{`\n         header {"
        },
        {
            "sha": "285c07baeb38fd5ade565da3ccc72042452c6f6f",
            "filename": "examples/with-edgedb/components/Header.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-edgedb%2Fcomponents%2FHeader.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-edgedb%2Fcomponents%2FHeader.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-edgedb%2Fcomponents%2FHeader.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -5,17 +5,11 @@ const Header: React.FC = () => {\n   return (\n     <nav>\n       <div className=\"left\">\n-        <Link href=\"/\" legacyBehavior>\n-          <a>Blog</a>\n-        </Link>\n-        <Link href=\"/drafts\" legacyBehavior>\n-          <a>Drafts</a>\n-        </Link>\n+        <Link href=\"/\">Blog</Link>\n+        <Link href=\"/drafts\">Drafts</Link>\n       </div>\n       <div className=\"right\">\n-        <Link href=\"/create\" legacyBehavior>\n-          <a>+ New draft</a>\n-        </Link>\n+        <Link href=\"/create\">+ New draft</Link>\n       </div>\n       <style jsx>{`\n         nav {"
        },
        {
            "sha": "cdcea5b0cd5c5be88aadb35b2f4437810656cb45",
            "filename": "examples/with-edgedb/components/Post.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-edgedb%2Fcomponents%2FPost.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-edgedb%2Fcomponents%2FPost.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-edgedb%2Fcomponents%2FPost.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -5,7 +5,7 @@ import { PostProps } from \"../pages/blog/[id]\";\n \n const Post: React.FC<{ post: PostProps }> = ({ post }) => {\n   return (\n-    <Link href={`/blog/${post.id}`} passHref legacyBehavior>\n+    <Link href={`/blog/${post.id}`}>\n       <div>\n         <h2>{post.title}</h2>\n         <small>By {post.authorName}</small>"
        },
        {
            "sha": "5d84a901e1c3fbcfb76d2918ce3491fd31b322ad",
            "filename": "examples/with-edgedb/pages/create.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-edgedb%2Fpages%2Fcreate.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-edgedb%2Fpages%2Fcreate.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-edgedb%2Fpages%2Fcreate.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -54,8 +54,8 @@ const Draft: React.FC = () => {\n             type=\"submit\"\n             value=\"Create\"\n           />\n-          <Link href=\"/\" legacyBehavior>\n-            <a className=\"back\">Cancel</a>\n+          <Link href=\"/\" className=\"back\">\n+            Cancel\n           </Link>\n         </form>\n       </div>"
        },
        {
            "sha": "42afe74d1e0bd31ed86d840a2f28f255ba6b2929",
            "filename": "examples/with-firebase/pages/index.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-firebase%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-firebase%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-firebase%2Fpages%2Findex.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -45,9 +45,7 @@ export default function Home() {\n         <p className=\"description\">\n           Please press the link below after adding the user\n         </p>\n-        <Link href={`/profile/${profile.username}`} passHref legacyBehavior>\n-          <a>Go to SSR Page</a>\n-        </Link>\n+        <Link href={`/profile/${profile.username}`}>Go to SSR Page</Link>\n       </main>\n \n       <style jsx>{`"
        },
        {
            "sha": "e4a93448ba0b861a35ea9f4f06e4986d5976910b",
            "filename": "examples/with-framer-motion/components/Gallery.js",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-framer-motion%2Fcomponents%2FGallery.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-framer-motion%2Fcomponents%2FGallery.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-framer-motion%2Fcomponents%2FGallery.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -33,12 +33,7 @@ const Thumbnail = ({ id, i }) => (\n         variants={frameVariants}\n         transition={transition}\n       >\n-        <Link\n-          href=\"/image/[index]\"\n-          as={`/image/${i}`}\n-          scroll={false}\n-          legacyBehavior\n-        >\n+        <Link href=\"/image/[index]\" as={`/image/${i}`} scroll={false}>\n           <motion.img\n             src={`https://images.unsplash.com/${id}?auto=format&fit=crop&w=1500`}\n             alt=\"The Barbican\""
        },
        {
            "sha": "b2f9520641f0f792c71e8c825bdb6bc6fc01cd48",
            "filename": "examples/with-magic/components/header.js",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-magic%2Fcomponents%2Fheader.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-magic%2Fcomponents%2Fheader.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-magic%2Fcomponents%2Fheader.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -9,26 +9,20 @@ const Header = () => {\n       <nav>\n         <ul>\n           <li>\n-            <Link href=\"/\" legacyBehavior>\n-              <a>Home</a>\n-            </Link>\n+            <Link href=\"/\">Home</Link>\n           </li>\n           {user ? (\n             <>\n               <li>\n-                <Link href=\"/profile\" legacyBehavior>\n-                  <a>Profile</a>\n-                </Link>\n+                <Link href=\"/profile\">Profile</Link>\n               </li>\n               <li>\n                 <a href=\"/api/logout\">Logout</a>\n               </li>\n             </>\n           ) : (\n             <li>\n-              <Link href=\"/login\" legacyBehavior>\n-                <a>Login</a>\n-              </Link>\n+              <Link href=\"/login\">Login</Link>\n             </li>\n           )}\n         </ul>"
        },
        {
            "sha": "390d94500d554fac8fc7bb0a5413ee956cd52007",
            "filename": "examples/with-neo4j/pages/actor/[name].js",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-neo4j%2Fpages%2Factor%2F%5Bname%5D.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-neo4j%2Fpages%2Factor%2F%5Bname%5D.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-neo4j%2Fpages%2Factor%2F%5Bname%5D.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -42,19 +42,16 @@ export default function Actor() {\n                   as={{\n                     pathname: `/movie/${encodeURIComponent(movie)}`,\n                   }}\n-                  legacyBehavior\n                 >\n-                  <a>{movie}</a>\n+                  {movie}\n                 </Link>\n               </div>\n             ))}\n           </div>\n         </div>\n \n         <div className=\"back\">\n-          <Link href=\"/\" legacyBehavior>\n-            <a>ðŸ”™ Go Back</a>\n-          </Link>\n+          <Link href=\"/\">ðŸ”™ Go Back</Link>\n         </div>\n       </main>\n "
        },
        {
            "sha": "ccb07ac6a85b615fe19336692d0d476a2882419e",
            "filename": "examples/with-neo4j/pages/index.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-neo4j%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-neo4j%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-neo4j%2Fpages%2Findex.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -45,9 +45,9 @@ export default function Home() {\n                   <td>\n                     <Link\n                       href={`/movie/${encodeURIComponent(movie.title)}`}\n-                      legacyBehavior\n+                      className=\"link\"\n                     >\n-                      <a className=\"link\">{movie.title}</a>\n+                      {movie.title}\n                     </Link>\n                   </td>\n                   <td>{movie.released}</td>\n@@ -65,9 +65,9 @@ export default function Home() {\n                         <li key={actor}>\n                           <Link\n                             href={`/actor/${encodeURIComponent(actor)}`}\n-                            legacyBehavior\n+                            className=\"link\"\n                           >\n-                            <a className=\"link\">{actor}</a>\n+                            {actor}\n                           </Link>\n                         </li>\n                       ))}"
        },
        {
            "sha": "e09cd78e295f05ba2b41f1ff52a58fa345bdc6e1",
            "filename": "examples/with-neo4j/pages/movie/[title].js",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-neo4j%2Fpages%2Fmovie%2F%5Btitle%5D.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-neo4j%2Fpages%2Fmovie%2F%5Btitle%5D.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-neo4j%2Fpages%2Fmovie%2F%5Btitle%5D.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -43,9 +43,9 @@ export default function Movie() {\n                 <Link\n                   key={actor}\n                   href={`/actor/${encodeURIComponent(actor)}`}\n-                  legacyBehavior\n+                  className=\"link\"\n                 >\n-                  <a className=\"link\">{actor}</a>\n+                  {actor}\n                 </Link>\n               </div>\n             ))}\n@@ -59,9 +59,7 @@ export default function Movie() {\n         </div>\n \n         <div className=\"back\">\n-          <Link href=\"/\" legacyBehavior>\n-            <a>ðŸ”™ Go Back</a>\n-          </Link>\n+          <Link href=\"/\">ðŸ”™ Go Back</Link>\n         </div>\n       </main>\n "
        },
        {
            "sha": "b15b508c0fc857048f898ad013a54f69cf577b3c",
            "filename": "examples/with-passport-and-next-connect/components/Navbar.js",
            "status": "modified",
            "additions": 4,
            "deletions": 12,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-passport-and-next-connect%2Fcomponents%2FNavbar.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-passport-and-next-connect%2Fcomponents%2FNavbar.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-passport-and-next-connect%2Fcomponents%2FNavbar.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -14,16 +14,12 @@ export default function Navbar() {\n       <nav>\n         <ul>\n           <li>\n-            <Link href=\"/\" legacyBehavior>\n-              Home\n-            </Link>\n+            <Link href=\"/\">Home</Link>\n           </li>\n           {user ? (\n             <>\n               <li>\n-                <Link href=\"/profile\" legacyBehavior>\n-                  Profile\n-                </Link>\n+                <Link href=\"/profile\">Profile</Link>\n               </li>\n               <li>\n                 <a role=\"button\" onClick={handleLogout}>\n@@ -34,14 +30,10 @@ export default function Navbar() {\n           ) : (\n             <>\n               <li>\n-                <Link href=\"/signup\" legacyBehavior>\n-                  Sign up\n-                </Link>\n+                <Link href=\"/signup\">Sign up</Link>\n               </li>\n               <li>\n-                <Link href=\"/login\" legacyBehavior>\n-                  Login\n-                </Link>\n+                <Link href=\"/login\">Login</Link>\n               </li>\n             </>\n           )}"
        },
        {
            "sha": "b14ea7e15ef4589a7075f2ca89f0592d99d17630",
            "filename": "examples/with-passport/components/form.js",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-passport%2Fcomponents%2Fform.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-passport%2Fcomponents%2Fform.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-passport%2Fcomponents%2Fform.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -20,16 +20,12 @@ const Form = ({ isLogin, errorMessage, onSubmit }) => (\n     <div className=\"submit\">\n       {isLogin ? (\n         <>\n-          <Link href=\"/signup\" legacyBehavior>\n-            <a>I don't have an account</a>\n-          </Link>\n+          <Link href=\"/signup\">I don't have an account</Link>\n           <button type=\"submit\">Login</button>\n         </>\n       ) : (\n         <>\n-          <Link href=\"/login\" legacyBehavior>\n-            <a>I already have an account</a>\n-          </Link>\n+          <Link href=\"/login\">I already have an account</Link>\n           <button type=\"submit\">Signup</button>\n         </>\n       )}"
        },
        {
            "sha": "b2f9520641f0f792c71e8c825bdb6bc6fc01cd48",
            "filename": "examples/with-passport/components/header.js",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-passport%2Fcomponents%2Fheader.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-passport%2Fcomponents%2Fheader.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-passport%2Fcomponents%2Fheader.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -9,26 +9,20 @@ const Header = () => {\n       <nav>\n         <ul>\n           <li>\n-            <Link href=\"/\" legacyBehavior>\n-              <a>Home</a>\n-            </Link>\n+            <Link href=\"/\">Home</Link>\n           </li>\n           {user ? (\n             <>\n               <li>\n-                <Link href=\"/profile\" legacyBehavior>\n-                  <a>Profile</a>\n-                </Link>\n+                <Link href=\"/profile\">Profile</Link>\n               </li>\n               <li>\n                 <a href=\"/api/logout\">Logout</a>\n               </li>\n             </>\n           ) : (\n             <li>\n-              <Link href=\"/login\" legacyBehavior>\n-                <a>Login</a>\n-              </Link>\n+              <Link href=\"/login\">Login</Link>\n             </li>\n           )}\n         </ul>"
        },
        {
            "sha": "d45fc38ae03fa94c5e429f51000fa900ba330e83",
            "filename": "examples/with-prefetching/components/Nav.tsx",
            "status": "modified",
            "additions": 12,
            "deletions": 17,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-prefetching%2Fcomponents%2FNav.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-prefetching%2Fcomponents%2FNav.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-prefetching%2Fcomponents%2FNav.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -10,28 +10,23 @@ export default function Nav() {\n         Automatically prefetch pages in the background as soon the Link appears\n         in the view:\n       </p>\n-      <Link href=\"/\" legacyBehavior>\n-        <a>Home</a>\n-      </Link>{\" \"}\n-      <Link href=\"/features\" legacyBehavior>\n-        <a>Features</a>\n-      </Link>\n+      <Link href=\"/\">Home</Link> <Link href=\"/features\">Features</Link>\n       <h2>Imperative</h2>\n       <p>Prefetch on onMouseEnter or on other events:</p>\n-      <Link prefetch={false} href=\"/about\" legacyBehavior>\n-        <a\n-          onMouseEnter={() => {\n-            router.prefetch(\"/about\");\n-            console.log(\"prefetching /about!\");\n-          }}\n-        >\n-          About\n-        </a>\n+      <Link\n+        prefetch={false}\n+        href=\"/about\"\n+        onMouseEnter={() => {\n+          router.prefetch(\"/about\");\n+          console.log(\"prefetching /about!\");\n+        }}\n+      >\n+        About\n       </Link>\n       <h2>Disable</h2>\n       <p>Disable prefetching</p>\n-      <Link prefetch={false} href=\"/contact\" legacyBehavior>\n-        <a>Contact</a>\n+      <Link prefetch={false} href=\"/contact\">\n+        Contact\n       </Link>\n       <style jsx>{`\n         .root {"
        },
        {
            "sha": "1b468ea4685596e6f99f4e878e1b99290248e943",
            "filename": "examples/with-rbx-bulma-pro/components/Layout.js",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-rbx-bulma-pro%2Fcomponents%2FLayout.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-rbx-bulma-pro%2Fcomponents%2FLayout.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-rbx-bulma-pro%2Fcomponents%2FLayout.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -20,15 +20,15 @@ const Layout = ({ children }) => {\n         </Navbar.Brand>\n         <Navbar.Menu>\n           <Navbar.Segment align=\"start\">\n-            <Link href=\"/\" legacyBehavior>\n-              <Navbar.Item>Home</Navbar.Item>\n-            </Link>\n-            <Link href=\"/about\" legacyBehavior>\n-              <Navbar.Item>About</Navbar.Item>\n-            </Link>\n-            <Link href=\"/contact\" legacyBehavior>\n-              <Navbar.Item>Contact</Navbar.Item>\n-            </Link>\n+            <Navbar.Item as={Link} href=\"/\">\n+              Home\n+            </Navbar.Item>\n+            <Navbar.Item as={Link} href=\"/about\">\n+              About\n+            </Navbar.Item>\n+            <Navbar.Item as={Link} href=\"/contact\">\n+              Contact\n+            </Navbar.Item>\n           </Navbar.Segment>\n         </Navbar.Menu>\n       </Navbar>"
        },
        {
            "sha": "7a947ecd4b53a12059c9336c652cc625c3985d51",
            "filename": "examples/with-react-intl/components/Nav.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-react-intl%2Fcomponents%2FNav.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-react-intl%2Fcomponents%2FNav.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-react-intl%2Fcomponents%2FNav.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -8,15 +8,15 @@ export default function Nav() {\n   return (\n     <nav className={styles.nav}>\n       <li className={styles.li}>\n-        <Link href=\"/\" passHref>\n+        <Link href=\"/\">\n           <FormattedMessage\n             defaultMessage=\"Home\"\n             description=\"Nav: Index name\"\n           />\n         </Link>\n       </li>\n       <li className={styles.li}>\n-        <Link href=\"/about\" passHref>\n+        <Link href=\"/about\">\n           <FormattedMessage\n             defaultMessage=\"About\"\n             description=\"Nav: About item\"\n@@ -31,7 +31,6 @@ export default function Nav() {\n           <Link\n             href={asPath}\n             locale={availableLocale}\n-            passHref\n             prefetch={false}\n             className={availableLocale === locale ? styles.active : undefined}\n           >"
        },
        {
            "sha": "18d4567ecea992b09db9ff6a0a45f4e63339d508",
            "filename": "examples/with-react-md-typescript/components/LinkUnstyled.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-react-md-typescript%2Fcomponents%2FLinkUnstyled.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-react-md-typescript%2Fcomponents%2FLinkUnstyled.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-react-md-typescript%2Fcomponents%2FLinkUnstyled.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -2,7 +2,7 @@ import React, { ReactElement, AnchorHTMLAttributes } from \"react\";\n import Link, { LinkProps } from \"next/link\";\n \n export interface LinkUnstyledProps\n-  extends Omit<LinkProps, \"children\" | \"passHref\" | \"onError\">,\n+  extends Omit<LinkProps, \"children\" | \"onError\">,\n     Omit<AnchorHTMLAttributes<HTMLAnchorElement>, \"onError\" | \"href\"> {}\n \n export default function LinkUnstyled({"
        },
        {
            "sha": "51a5a35c6bedfb7426e35032746834a666e2feae",
            "filename": "examples/with-unsplash/components/Collections/index.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-unsplash%2Fcomponents%2FCollections%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/examples%2Fwith-unsplash%2Fcomponents%2FCollections%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-unsplash%2Fcomponents%2FCollections%2Findex.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -23,13 +23,11 @@ const Collections = ({ id_collection }: CollectionProps) => {\n         id_collection ? (\n           <Link href=\"/\" key={`collection_${slug}`} className={styles.chip}>\n             {title}\n-            <Link href=\"/\" legacyBehavior>\n-              <button\n-                type=\"button\"\n-                className={styles.chip_remove}\n-                aria-label=\"Return to home\"\n-              ></button>\n-            </Link>\n+            <Link\n+              href=\"/\"\n+              className={styles.chip_remove}\n+              aria-label=\"Return to home\"\n+            />\n           </Link>\n         ) : (\n           <Link"
        },
        {
            "sha": "cfc5ca48e0794d0eaddcee107d96d54010503864",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/children-interpolation.input.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fchildren-interpolation.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fchildren-interpolation.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fchildren-interpolation.input.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -4,12 +4,12 @@ function Comp({children}) {\n     return children\n } \n \n-const a = <Comp />\n+const c = <Comp />\n \n export default function Page() {\n     return (\n-        <Link href=\"/about\">\n-            {a}\n+        <Link href=\"/about\" legacyBehavior>\n+            {c}\n         </Link>\n     );\n }"
        },
        {
            "sha": "bb1f7d183f58a2bf40f1921552cf199b8b9550b9",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/children-interpolation.output.js",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fchildren-interpolation.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fchildren-interpolation.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fchildren-interpolation.output.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -4,12 +4,15 @@ function Comp({children}) {\n     return children\n } \n \n-const a = <Comp />\n+const c = <Comp />\n \n export default function Page() {\n     return (\n-        (<Link href=\"/about\" legacyBehavior>\n-            {a}\n+        (<Link href=\"/about\">\n+            {/* @next-codemod-error This Link previously used the now removed `legacyBehavior` prop, and has a child that might not be an anchor. The codemod bailed out of lifting the child props to the Link. Check that the child component does not render an anchor, and potentially move the props manually to Link. */\n+            }\n+            {c}\n         </Link>)\n     );\n }\n+"
        },
        {
            "sha": "ad1d5a1a0431024b83666c1c678c51ed43ab0fb2",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/custom-component-child-legacy-behavior.input.js",
            "status": "renamed",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child-legacy-behavior.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child-legacy-behavior.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child-legacy-behavior.input.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -6,8 +6,8 @@ function Comp({children}) {\n \n export default function Page() {\n     return (\n-        (<Link href=\"/\" legacyBehavior>\n+        <Link href=\"/\" legacyBehavior>\n             <Comp>Home</Comp>\n-        </Link>)\n+        </Link>\n     );\n }\n\\ No newline at end of file",
            "previous_filename": "packages/next-codemod/transforms/__testfixtures__/new-link/add-legacy-behavior.output.js"
        },
        {
            "sha": "d244600042d9f12a7814a4c6b081dd2df61de899",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/custom-component-child-legacy-behavior.output.js",
            "status": "added",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child-legacy-behavior.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child-legacy-behavior.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child-legacy-behavior.output.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -0,0 +1,15 @@\n+import Link from 'next/link'\n+\n+function Comp({children}) {\n+    return children\n+} \n+\n+export default function Page() {\n+    return (\n+        (<Link href=\"/\">\n+            {/* @next-codemod-error This Link previously used the now removed `legacyBehavior` prop, and has a child that might not be an anchor. The codemod bailed out of lifting the child props to the Link. Check that the child component does not render an anchor, and potentially move the props manually to Link. */\n+            }\n+            <Comp>Home</Comp>\n+        </Link>)\n+    );\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "c4a9b2add74c35312e8ff5f4cc96f14841e413d6",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/custom-component-child.input.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child.input.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "previous_filename": "packages/next-codemod/transforms/__testfixtures__/new-link/add-legacy-behavior.input.js"
        },
        {
            "sha": "c4a9b2add74c35312e8ff5f4cc96f14841e413d6",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/custom-component-child.output.js",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fcustom-component-child.output.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -0,0 +1,13 @@\n+import Link from 'next/link'\n+\n+function Comp({children}) {\n+    return children\n+} \n+\n+export default function Page() {\n+    return (\n+        <Link href=\"/\">\n+            <Comp>Home</Comp>\n+        </Link>\n+    );\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "2e9604057daae0f05d7f2f3d7e4bb9d4b4ba3bb6",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/excludes-links-with-legacybehavior-prop.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fexcludes-links-with-legacybehavior-prop.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fexcludes-links-with-legacybehavior-prop.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fexcludes-links-with-legacybehavior-prop.input.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,9 +0,0 @@\n-import Link from 'next/link'\n-\n-export default function Page() {\n-    return (\n-        <Link href=\"/\" legacyBehavior>\n-            <a>Home</a>\n-        </Link>\n-    )\n-}\n\\ No newline at end of file"
        },
        {
            "sha": "2e9604057daae0f05d7f2f3d7e4bb9d4b4ba3bb6",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/excludes-links-with-legacybehavior-prop.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fexcludes-links-with-legacybehavior-prop.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fexcludes-links-with-legacybehavior-prop.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fexcludes-links-with-legacybehavior-prop.output.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,9 +0,0 @@\n-import Link from 'next/link'\n-\n-export default function Page() {\n-    return (\n-        <Link href=\"/\" legacyBehavior>\n-            <a>Home</a>\n-        </Link>\n-    )\n-}\n\\ No newline at end of file"
        },
        {
            "sha": "fb0827548d84d2e8d1daeb2c79680a7c12c9a0d1",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/links-with-legacybehavior-prop.input.js",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Flinks-with-legacybehavior-prop.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Flinks-with-legacybehavior-prop.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Flinks-with-legacybehavior-prop.input.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -0,0 +1,14 @@\n+import Link from 'next/link'\n+\n+export default function Page() {\n+    return (\n+        <>\n+            <Link href=\"/\" legacyBehavior>\n+                <a>Foo</a>\n+            </Link>\n+            <Link href=\"/\" legacyBehavior passHref>\n+                <a>Bar</a>\n+            </Link>\n+        </>\n+    )\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "4124a78ccf65b434455634a73efcfee2eca34b8a",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/links-with-legacybehavior-prop.output.js",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Flinks-with-legacybehavior-prop.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Flinks-with-legacybehavior-prop.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Flinks-with-legacybehavior-prop.output.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -0,0 +1,12 @@\n+import Link from 'next/link'\n+\n+export default function Page() {\n+    return (<>\n+        <Link href=\"/\">\n+            Foo\n+        </Link>\n+        <Link href=\"/\">\n+            Bar\n+        </Link>\n+    </>);\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "37d7a71b0cd79d5e96241004ed6c1c45b7b34129",
            "filename": "packages/next-codemod/transforms/__testfixtures__/new-link/styled-jsx.output.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fstyled-jsx.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fstyled-jsx.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fnew-link%2Fstyled-jsx.output.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -7,10 +7,10 @@ const CustomLink = ({\n }) => {\n   return (\n     (<span className=\"link-container\">\n-      <Link href={href} legacyBehavior>\n-        <a className=\"link\" title={title}>\n-          {children}\n-        </a>\n+      <Link href={href} className=\"link\" title={title}>\n+\n+        {children}\n+\n       </Link>\n       <style jsx>{`\n         .link {"
        },
        {
            "sha": "98066282a72b8d2847eaced0deefc5ac138795e9",
            "filename": "packages/next-codemod/transforms/__tests__/new-link.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fnew-link.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fnew-link.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fnew-link.test.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -5,8 +5,9 @@ const defineTest = require('jscodeshift/dist/testUtils').defineTest\n const fixtures = [\n   'link-a',\n   'move-props',\n-  'add-legacy-behavior',\n-  'excludes-links-with-legacybehavior-prop',\n+  'custom-component-child',\n+  'custom-component-child-legacy-behavior',\n+  'links-with-legacybehavior-prop',\n   'children-interpolation',\n   'spread-props',\n   'link-string',"
        },
        {
            "sha": "a04157fbfb87b6da83ac896da0add1b39342a404",
            "filename": "packages/next-codemod/transforms/new-link.ts",
            "status": "modified",
            "additions": 55,
            "deletions": 56,
            "changes": 111,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2Fnew-link.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext-codemod%2Ftransforms%2Fnew-link.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2Fnew-link.ts?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -1,8 +1,9 @@\n-// It might insert extra parnes for JSX components\n+// It might insert extra parens for JSX components\n // x-ref: https://github.com/facebook/jscodeshift/issues/534\n \n-import type { API, FileInfo } from 'jscodeshift'\n+import type { API, Collection, FileInfo, JSXElement } from 'jscodeshift'\n import { createParserFromPath } from '../lib/parser'\n+import { NEXT_CODEMOD_ERROR_PREFIX } from './lib/async-request-api/utils'\n \n export default function transformer(file: FileInfo, _api: API) {\n   const j = createParserFromPath(file.path)\n@@ -26,36 +27,25 @@ export default function transformer(file: FileInfo, _api: API) {\n       }\n \n       const linkElements = $j.findJSXElements(variableName)\n-      const hasStylesJSX = $j.findJSXElements('style').some((stylePath) => {\n-        const $style = j(stylePath)\n-        const hasJSXProp =\n-          $style.find(j.JSXAttribute, { name: { name: 'jsx' } }).size() !== 0\n-\n-        return hasJSXProp\n-      })\n \n       linkElements.forEach((linkPath) => {\n-        const $link = j(linkPath).filter((childPath) => {\n-          // Exclude links with `legacybehavior` prop from modification\n-          return (\n-            j(childPath)\n-              .find(j.JSXAttribute, { name: { name: 'legacyBehavior' } })\n-              .size() === 0\n-          )\n-        })\n+        const $link: Collection<JSXElement> = j(linkPath)\n \n         if ($link.size() === 0) {\n           return\n         }\n \n-        // If file has <style jsx> enable legacyBehavior\n-        // and keep <a> to stay on the safe side\n-        if (hasStylesJSX) {\n-          $link\n-            .get('attributes')\n-            .push(j.jsxAttribute(j.jsxIdentifier('legacyBehavior')))\n-          return\n-        }\n+        const $legacyBehaviorProp = $link\n+          .find(j.JSXAttribute, {\n+            name: { type: 'JSXIdentifier', name: 'legacyBehavior' },\n+          })\n+          .remove()\n+\n+        $link\n+          .find(j.JSXAttribute, {\n+            name: { type: 'JSXIdentifier', name: 'passHref' },\n+          })\n+          .remove()\n \n         const linkChildrenNodes = $link.get('children')\n \n@@ -78,38 +68,47 @@ export default function transformer(file: FileInfo, _api: API) {\n           )\n         })\n \n-        // No <a> as child to <Link> so the old behavior is used\n-        if ($childrenWithA.size() !== 1) {\n-          $link\n-            .get('attributes')\n-            .push(j.jsxAttribute(j.jsxIdentifier('legacyBehavior')))\n-          return\n+        if ($childrenWithA.length === 0) {\n+          if ($legacyBehaviorProp.length > 0) {\n+            linkPath.node.children.unshift(\n+              j.jsxText('\\n'),\n+              j.jsxExpressionContainer.from({\n+                expression: j.jsxEmptyExpression.from({\n+                  comments: [\n+                    j.commentBlock.from({\n+                      value: ` ${NEXT_CODEMOD_ERROR_PREFIX} This Link previously used the now removed \\`legacyBehavior\\` prop, and has a child that might not be an anchor. The codemod bailed out of lifting the child props to the Link. Check that the child component does not render an anchor, and potentially move the props manually to Link. `,\n+                    }),\n+                  ],\n+                }),\n+              })\n+            )\n+          }\n+        } else {\n+          const props = $childrenWithA.get('attributes').value\n+          const hasProps = props.length > 0\n+\n+          if (hasProps) {\n+            // Add only unique props to <Link> (skip duplicate props)\n+            const linkPropNames = $link\n+              .get('attributes')\n+              .value.map((linkProp) => linkProp?.name?.name)\n+            const uniqueProps = []\n+\n+            props.forEach((anchorProp) => {\n+              if (!linkPropNames.includes(anchorProp?.name?.name)) {\n+                uniqueProps.push(anchorProp)\n+              }\n+            })\n+\n+            $link.get('attributes').value.push(...uniqueProps)\n+\n+            // Remove props from <a>\n+            props.length = 0\n+          }\n+\n+          const childrenProps = $childrenWithA.get('children')\n+          $childrenWithA.replaceWith(childrenProps.value)\n         }\n-\n-        const props = $childrenWithA.get('attributes').value\n-        const hasProps = props.length > 0\n-\n-        if (hasProps) {\n-          // Add only unique props to <Link> (skip duplicate props)\n-          const linkPropNames = $link\n-            .get('attributes')\n-            .value.map((linkProp) => linkProp?.name?.name)\n-          const uniqueProps = []\n-\n-          props.forEach((anchorProp) => {\n-            if (!linkPropNames.includes(anchorProp?.name?.name)) {\n-              uniqueProps.push(anchorProp)\n-            }\n-          })\n-\n-          $link.get('attributes').value.push(...uniqueProps)\n-\n-          // Remove props from <a>\n-          props.length = 0\n-        }\n-\n-        const childrenProps = $childrenWithA.get('children')\n-        $childrenWithA.replaceWith(childrenProps.value)\n       })\n     })\n     .toSource()"
        },
        {
            "sha": "754de5552e93c1d072f9bfe43c02694296b42c63",
            "filename": "packages/next/errors.json",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Ferrors.json",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Ferrors.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Ferrors.json?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -791,5 +791,6 @@\n   \"790\": \"Invariant: Expected RSC response, got %s\",\n   \"791\": \"Unexpected match for a pathname \\\"%s\\\" with a param \\\"%s\\\" of type \\\"%s\\\"\",\n   \"792\": \"Unexpected empty path segments match for a pathname \\\"%s\\\" with param \\\"%s\\\" of type \\\"%s\\\"\",\n-  \"793\": \"No value found for segment key: \\\"%s\\\"\"\n+  \"793\": \"No value found for segment key: \\\"%s\\\"\",\n+  \"794\": \"Invalid <Link> with <a> child. Please remove <a>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor\"\n }"
        },
        {
            "sha": "6a73f4389d767a221bf97d3d08c9720c00d9064f",
            "filename": "packages/next/src/client/app-dir/link.tsx",
            "status": "modified",
            "additions": 26,
            "deletions": 180,
            "changes": 206,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Fsrc%2Fclient%2Fapp-dir%2Flink.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Fsrc%2Fclient%2Fapp-dir%2Flink.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fapp-dir%2Flink.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -19,7 +19,6 @@ import {\n } from '../components/links'\n import { isLocalURL } from '../../shared/lib/router/utils/is-local-url'\n import { dispatchNavigateAction } from '../components/app-router-instance'\n-import { errorOnce } from '../../shared/lib/utils/error-once'\n import {\n   FetchStrategy,\n   type PrefetchTaskFetchStrategy,\n@@ -112,21 +111,6 @@ type InternalLinkProps = {\n    */\n   shallow?: boolean\n \n-  /**\n-   * Forces `Link` to pass its `href` to the child component. Useful if the child is a custom\n-   * component that wraps an `<a>` tag, or if you're using certain styling libraries.\n-   *\n-   * @defaultValue `false`\n-   *\n-   * @example\n-   * ```tsx\n-   * <Link href=\"/dashboard\" passHref>\n-   *   <MyStyledAnchor>Dashboard</MyStyledAnchor>\n-   * </Link>\n-   * ```\n-   */\n-  passHref?: boolean\n-\n   /**\n    * Prefetch the page in the background.\n    * Any `<Link />` that is in the viewport (initially or through scroll) will be prefetched.\n@@ -184,16 +168,6 @@ type InternalLinkProps = {\n    */\n   locale?: string | false\n \n-  /**\n-   * Enable legacy link behavior, requiring an `<a>` tag to wrap the child content\n-   * if the child is a string or number.\n-   *\n-   * @deprecated This will be removed in v16\n-   * @defaultValue `false`\n-   * @see https://github.com/vercel/next.js/commit/489e65ed98544e69b0afd7e0cfc3f9f6c2b803b7\n-   */\n-  legacyBehavior?: boolean\n-\n   /**\n    * Optional event handler for when the mouse pointer is moved onto the `<Link>`.\n    */\n@@ -225,8 +199,8 @@ export type LinkProps<RouteInferType = any> = InternalLinkProps\n type LinkPropsRequired = RequiredKeys<LinkProps>\n type LinkPropsOptional = OptionalKeys<Omit<InternalLinkProps, 'locale'>>\n \n-function isModifiedEvent(event: React.MouseEvent): boolean {\n-  const eventTarget = event.currentTarget as HTMLAnchorElement | SVGAElement\n+function isModifiedEvent(event: React.MouseEvent<HTMLAnchorElement>): boolean {\n+  const eventTarget = event.currentTarget\n   const target = eventTarget.getAttribute('target')\n   return (\n     (target && target !== '_self') ||\n@@ -239,23 +213,15 @@ function isModifiedEvent(event: React.MouseEvent): boolean {\n }\n \n function linkClicked(\n-  e: React.MouseEvent,\n+  e: React.MouseEvent<HTMLAnchorElement>,\n   href: string,\n   as: string,\n   linkInstanceRef: React.RefObject<LinkInstance | null>,\n   replace?: boolean,\n   scroll?: boolean,\n   onNavigate?: OnNavigateEventHandler\n ): void {\n-  const { nodeName } = e.currentTarget\n-\n-  // anchors inside an svg have a lowercase nodeName\n-  const isAnchorNodeName = nodeName.toUpperCase() === 'A'\n-\n-  if (\n-    (isAnchorNodeName && isModifiedEvent(e)) ||\n-    e.currentTarget.hasAttribute('download')\n-  ) {\n+  if (isModifiedEvent(e) || e.currentTarget.hasAttribute('download')) {\n     // ignore click for browserâ€™s default behavior\n     return\n   }\n@@ -324,38 +290,25 @@ export default function LinkComponent(\n ) {\n   const [linkStatus, setOptimisticLinkStatus] = useOptimistic(IDLE_LINK_STATUS)\n \n-  let children: React.ReactNode\n-\n   const linkInstanceRef = useRef<LinkInstance | null>(null)\n \n   const {\n     href: hrefProp,\n     as: asProp,\n-    children: childrenProp,\n+    children,\n     prefetch: prefetchProp = null,\n-    passHref,\n     replace,\n     shallow,\n     scroll,\n     onClick,\n     onMouseEnter: onMouseEnterProp,\n     onTouchStart: onTouchStartProp,\n-    legacyBehavior = false,\n     onNavigate,\n     ref: forwardedRef,\n     unstable_dynamicOnHover,\n     ...restProps\n   } = props\n \n-  children = childrenProp\n-\n-  if (\n-    legacyBehavior &&\n-    (typeof children === 'string' || typeof children === 'number')\n-  ) {\n-    children = <a>{children}</a>\n-  }\n-\n   const router = React.useContext(AppRouterContext)\n \n   const prefetchEnabled = prefetchProp !== false\n@@ -412,13 +365,11 @@ export default function LinkComponent(\n       replace: true,\n       scroll: true,\n       shallow: true,\n-      passHref: true,\n       prefetch: true,\n       unstable_dynamicOnHover: true,\n       onClick: true,\n       onMouseEnter: true,\n       onTouchStart: true,\n-      legacyBehavior: true,\n       onNavigate: true,\n     } as const\n     const optionalProps: LinkPropsOptional[] = Object.keys(\n@@ -452,8 +403,6 @@ export default function LinkComponent(\n         key === 'replace' ||\n         key === 'scroll' ||\n         key === 'shallow' ||\n-        key === 'passHref' ||\n-        key === 'legacyBehavior' ||\n         key === 'unstable_dynamicOnHover'\n       ) {\n         if (props[key] != null && valType !== 'boolean') {\n@@ -523,58 +472,20 @@ export default function LinkComponent(\n     }\n   }, [hrefProp, asProp])\n \n-  // This will return the first child, if multiple are provided it will throw an error\n-  let child: any\n-  if (legacyBehavior) {\n-    if (process.env.NODE_ENV === 'development') {\n-      if (onClick) {\n-        console.warn(\n-          `\"onClick\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onClick be set on the child of next/link`\n-        )\n-      }\n-      if (onMouseEnterProp) {\n-        console.warn(\n-          `\"onMouseEnter\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onMouseEnter be set on the child of next/link`\n-        )\n-      }\n-      try {\n-        child = React.Children.only(children)\n-      } catch (err) {\n-        if (!children) {\n-          throw new Error(\n-            `No children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but one child is required https://nextjs.org/docs/messages/link-no-children`\n-          )\n-        }\n-        throw new Error(\n-          `Multiple children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children` +\n-            (typeof window !== 'undefined'\n-              ? \" \\nOpen your browser's console to view the Component stack trace.\"\n-              : '')\n-        )\n-      }\n-    } else {\n-      child = React.Children.only(children)\n-    }\n-  } else {\n-    if (process.env.NODE_ENV === 'development') {\n-      if ((children as any)?.type === 'a') {\n-        throw new Error(\n-          'Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor'\n-        )\n-      }\n+  if (process.env.NODE_ENV === 'development') {\n+    if ((children as any)?.type === 'a') {\n+      throw new Error(\n+        'Invalid <Link> with <a> child. Please remove <a>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor'\n+      )\n     }\n   }\n \n-  const childRef: any = legacyBehavior\n-    ? child && typeof child === 'object' && child.ref\n-    : forwardedRef\n-\n   // Use a callback ref to attach an IntersectionObserver to the anchor tag on\n   // mount. In the future we will also use this to keep track of all the\n   // currently mounted <Link> instances, e.g. so we can re-prefetch them after\n   // a revalidation or refresh.\n   const observeLinkVisibilityOnMount = React.useCallback(\n-    (element: HTMLAnchorElement | SVGAElement) => {\n+    (element: HTMLAnchorElement) => {\n       if (router !== null) {\n         linkInstanceRef.current = mountLinkInstance(\n           element,\n@@ -597,37 +508,18 @@ export default function LinkComponent(\n     [prefetchEnabled, href, router, fetchStrategy, setOptimisticLinkStatus]\n   )\n \n-  const mergedRef = useMergedRef(observeLinkVisibilityOnMount, childRef)\n+  const mergedRef = useMergedRef(observeLinkVisibilityOnMount, forwardedRef)\n \n-  const childProps: {\n-    onTouchStart?: React.TouchEventHandler<HTMLAnchorElement>\n-    onMouseEnter: React.MouseEventHandler<HTMLAnchorElement>\n-    onClick: React.MouseEventHandler<HTMLAnchorElement>\n-    href?: string\n-    ref?: any\n-  } = {\n+  const anchorProps: React.DetailedHTMLProps<\n+    React.AnchorHTMLAttributes<HTMLAnchorElement>,\n+    HTMLAnchorElement\n+  > = {\n     ref: mergedRef,\n     onClick(e) {\n-      if (process.env.NODE_ENV !== 'production') {\n-        if (!e) {\n-          throw new Error(\n-            `Component rendered inside next/link has to pass click event to \"onClick\" prop.`\n-          )\n-        }\n-      }\n-\n-      if (!legacyBehavior && typeof onClick === 'function') {\n+      if (typeof onClick === 'function') {\n         onClick(e)\n       }\n \n-      if (\n-        legacyBehavior &&\n-        child.props &&\n-        typeof child.props.onClick === 'function'\n-      ) {\n-        child.props.onClick(e)\n-      }\n-\n       if (!router) {\n         return\n       }\n@@ -639,18 +531,10 @@ export default function LinkComponent(\n       linkClicked(e, href, as, linkInstanceRef, replace, scroll, onNavigate)\n     },\n     onMouseEnter(e) {\n-      if (!legacyBehavior && typeof onMouseEnterProp === 'function') {\n+      if (typeof onMouseEnterProp === 'function') {\n         onMouseEnterProp(e)\n       }\n \n-      if (\n-        legacyBehavior &&\n-        child.props &&\n-        typeof child.props.onMouseEnter === 'function'\n-      ) {\n-        child.props.onMouseEnter(e)\n-      }\n-\n       if (!router) {\n         return\n       }\n@@ -660,26 +544,15 @@ export default function LinkComponent(\n       }\n \n       const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true\n-      onNavigationIntent(\n-        e.currentTarget as HTMLAnchorElement | SVGAElement,\n-        upgradeToDynamicPrefetch\n-      )\n+      onNavigationIntent(e.currentTarget, upgradeToDynamicPrefetch)\n     },\n     onTouchStart: process.env.__NEXT_LINK_NO_TOUCH_START\n       ? undefined\n       : function onTouchStart(e) {\n-          if (!legacyBehavior && typeof onTouchStartProp === 'function') {\n+          if (typeof onTouchStartProp === 'function') {\n             onTouchStartProp(e)\n           }\n \n-          if (\n-            legacyBehavior &&\n-            child.props &&\n-            typeof child.props.onTouchStart === 'function'\n-          ) {\n-            child.props.onTouchStart(e)\n-          }\n-\n           if (!router) {\n             return\n           }\n@@ -689,49 +562,22 @@ export default function LinkComponent(\n           }\n \n           const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true\n-          onNavigationIntent(\n-            e.currentTarget as HTMLAnchorElement | SVGAElement,\n-            upgradeToDynamicPrefetch\n-          )\n+          onNavigationIntent(e.currentTarget, upgradeToDynamicPrefetch)\n         },\n   }\n \n-  // If child is an <a> tag and doesn't have a href attribute, or if the 'passHref' property is\n-  // defined, we specify the current 'href', so that repetition is not needed by the user.\n   // If the url is absolute, we can bypass the logic to prepend the basePath.\n   if (isAbsoluteUrl(as)) {\n-    childProps.href = as\n-  } else if (\n-    !legacyBehavior ||\n-    passHref ||\n-    (child.type === 'a' && !('href' in child.props))\n-  ) {\n-    childProps.href = addBasePath(as)\n-  }\n-\n-  let link: React.ReactNode\n-\n-  if (legacyBehavior) {\n-    if (process.env.NODE_ENV === 'development') {\n-      errorOnce(\n-        '`legacyBehavior` is deprecated and will be removed in a future ' +\n-          'release. A codemod is available to upgrade your components:\\n\\n' +\n-          'npx @next/codemod@latest new-link .\\n\\n' +\n-          'Learn more: https://nextjs.org/docs/app/building-your-application/upgrading/codemods#remove-a-tags-from-link-components'\n-      )\n-    }\n-    link = React.cloneElement(child, childProps)\n+    anchorProps.href = as\n   } else {\n-    link = (\n-      <a {...restProps} {...childProps}>\n-        {children}\n-      </a>\n-    )\n+    anchorProps.href = addBasePath(as)\n   }\n \n   return (\n     <LinkStatusContext.Provider value={linkStatus}>\n-      {link}\n+      <a {...restProps} {...anchorProps}>\n+        {children}\n+      </a>\n     </LinkStatusContext.Provider>\n   )\n }"
        },
        {
            "sha": "e7f490acded030b8b542f325e444cb493aea871e",
            "filename": "packages/next/src/client/components/links.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flinks.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flinks.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flinks.ts?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -19,9 +19,7 @@ import { startTransition } from 'react'\n import { PrefetchKind } from './router-reducer/router-reducer-types'\n import { InvariantError } from '../../shared/lib/invariant-error'\n \n-type LinkElement = HTMLAnchorElement | SVGAElement\n-\n-type Element = LinkElement | HTMLFormElement\n+type Element = HTMLAnchorElement | HTMLFormElement\n \n // Properties that are shared between Link and Form instances. We use the same\n // shape for both to prevent a polymorphic de-opt in the VM.\n@@ -142,7 +140,7 @@ function coercePrefetchableUrl(href: string): URL | null {\n }\n \n export function mountLinkInstance(\n-  element: LinkElement,\n+  element: HTMLAnchorElement,\n   href: string,\n   router: AppRouterInstance,\n   fetchStrategy: PrefetchTaskFetchStrategy,\n@@ -252,7 +250,7 @@ export function onLinkVisibilityChanged(element: Element, isVisible: boolean) {\n }\n \n export function onNavigationIntent(\n-  element: HTMLAnchorElement | SVGAElement,\n+  element: HTMLAnchorElement,\n   unstable_upgradeToDynamicPrefetch: boolean\n ) {\n   const instance = prefetchable.get(element)"
        },
        {
            "sha": "abbaa440846e814b8c1f40bc58706df863b6b524",
            "filename": "packages/next/src/client/link.tsx",
            "status": "modified",
            "additions": 26,
            "deletions": 159,
            "changes": 185,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Fsrc%2Fclient%2Flink.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Fsrc%2Fclient%2Flink.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Flink.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -18,7 +18,6 @@ import { useIntersection } from './use-intersection'\n import { getDomainLocale } from './get-domain-locale'\n import { addBasePath } from './add-base-path'\n import { useMergedRef } from './use-merged-ref'\n-import { errorOnce } from '../shared/lib/utils/error-once'\n \n type Url = string | UrlObject\n type RequiredKeys<T> = {\n@@ -61,12 +60,6 @@ type InternalLinkProps = {\n    * @defaultValue `false`\n    */\n   shallow?: boolean\n-  /**\n-   * Forces `Link` to send the `href` property to its child.\n-   *\n-   * @defaultValue `false`\n-   */\n-  passHref?: boolean\n   /**\n    * Prefetch the page in the background.\n    * Any `<Link />` that is in the viewport (initially or through scroll) will be prefetched.\n@@ -89,13 +82,6 @@ type InternalLinkProps = {\n    * Note: This is only available in the Pages Router.\n    */\n   locale?: string | false\n-  /**\n-   * Enable legacy link behavior.\n-   * @deprecated This will be removed in v16\n-   * @defaultValue `false`\n-   * @see https://github.com/vercel/next.js/commit/489e65ed98544e69b0afd7e0cfc3f9f6c2b803b7\n-   */\n-  legacyBehavior?: boolean\n   /**\n    * Optional event handler for when the mouse pointer is moved onto Link\n    */\n@@ -187,7 +173,7 @@ function prefetch(\n }\n \n function isModifiedEvent(event: React.MouseEvent): boolean {\n-  const eventTarget = event.currentTarget as HTMLAnchorElement | SVGAElement\n+  const eventTarget = event.currentTarget as HTMLAnchorElement\n   const target = eventTarget.getAttribute('target')\n   return (\n     (target && target !== '_self') ||\n@@ -210,15 +196,7 @@ function linkClicked(\n   locale?: string | false,\n   onNavigate?: OnNavigateEventHandler\n ): void {\n-  const { nodeName } = e.currentTarget\n-\n-  // anchors inside an svg have a lowercase nodeName\n-  const isAnchorNodeName = nodeName.toUpperCase() === 'A'\n-\n-  if (\n-    (isAnchorNodeName && isModifiedEvent(e)) ||\n-    e.currentTarget.hasAttribute('download')\n-  ) {\n+  if (isModifiedEvent(e) || e.currentTarget.hasAttribute('download')) {\n     // ignore click for browserâ€™s default behavior\n     return\n   }\n@@ -293,14 +271,11 @@ function formatStringOrUrl(urlObjOrString: UrlObject | string): string {\n  */\n const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n   function LinkComponent(props, forwardedRef) {\n-    let children: React.ReactNode\n-\n     const {\n       href: hrefProp,\n       as: asProp,\n-      children: childrenProp,\n+      children,\n       prefetch: prefetchProp = null,\n-      passHref,\n       replace,\n       shallow,\n       scroll,\n@@ -309,19 +284,9 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n       onNavigate,\n       onMouseEnter: onMouseEnterProp,\n       onTouchStart: onTouchStartProp,\n-      legacyBehavior = false,\n       ...restProps\n     } = props\n \n-    children = childrenProp\n-\n-    if (\n-      legacyBehavior &&\n-      (typeof children === 'string' || typeof children === 'number')\n-    ) {\n-      children = <a>{children}</a>\n-    }\n-\n     const router = React.useContext(RouterContext)\n \n     const prefetchEnabled = prefetchProp !== false\n@@ -373,13 +338,11 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n         replace: true,\n         scroll: true,\n         shallow: true,\n-        passHref: true,\n         prefetch: true,\n         locale: true,\n         onClick: true,\n         onMouseEnter: true,\n         onTouchStart: true,\n-        legacyBehavior: true,\n         onNavigate: true,\n       } as const\n       const optionalProps: LinkPropsOptional[] = Object.keys(\n@@ -417,13 +380,7 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n               actual: valType,\n             })\n           }\n-        } else if (\n-          key === 'replace' ||\n-          key === 'scroll' ||\n-          key === 'shallow' ||\n-          key === 'passHref' ||\n-          key === 'legacyBehavior'\n-        ) {\n+        } else if (key === 'replace' || key === 'scroll' || key === 'shallow') {\n           if (props[key] != null && valType !== 'boolean') {\n             throw createPropError({\n               key,\n@@ -471,58 +428,21 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n     const previousHref = React.useRef<string>(href)\n     const previousAs = React.useRef<string>(as)\n \n-    // This will return the first child, if multiple are provided it will throw an error\n-    let child: any\n-    if (legacyBehavior) {\n-      if (process.env.NODE_ENV === 'development') {\n-        if (onClick) {\n-          console.warn(\n-            `\"onClick\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onClick be set on the child of next/link`\n-          )\n-        }\n-        if (onMouseEnterProp) {\n-          console.warn(\n-            `\"onMouseEnter\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onMouseEnter be set on the child of next/link`\n-          )\n-        }\n-        try {\n-          child = React.Children.only(children)\n-        } catch (err) {\n-          if (!children) {\n-            throw new Error(\n-              `No children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but one child is required https://nextjs.org/docs/messages/link-no-children`\n-            )\n-          }\n-          throw new Error(\n-            `Multiple children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children` +\n-              (typeof window !== 'undefined'\n-                ? \" \\nOpen your browser's console to view the Component stack trace.\"\n-                : '')\n-          )\n-        }\n-      } else {\n-        child = React.Children.only(children)\n-      }\n-    } else {\n-      if (process.env.NODE_ENV === 'development') {\n-        if ((children as any)?.type === 'a') {\n-          throw new Error(\n-            'Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor'\n-          )\n-        }\n+    if (process.env.NODE_ENV === 'development') {\n+      if ((children as any)?.type === 'a') {\n+        throw new Error(\n+          'Invalid <Link> with <a> child. Please remove <a>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor'\n+        )\n       }\n     }\n \n-    const childRef: any = legacyBehavior\n-      ? child && typeof child === 'object' && child.ref\n-      : forwardedRef\n-\n-    const [setIntersectionRef, isVisible, resetVisible] = useIntersection({\n-      rootMargin: '200px',\n-    })\n+    const [setIntersectionRef, isVisible, resetVisible] =\n+      useIntersection<HTMLAnchorElement>({\n+        rootMargin: '200px',\n+      })\n \n     const setIntersectionWithResetRef = React.useCallback(\n-      (el: Element | null) => {\n+      (el: HTMLAnchorElement | null) => {\n         // Before the link getting observed, check if visible state need to be reset\n         if (previousAs.current !== as || previousHref.current !== href) {\n           resetVisible()\n@@ -535,7 +455,7 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n       [as, href, resetVisible, setIntersectionRef]\n     )\n \n-    const setRef = useMergedRef(setIntersectionWithResetRef, childRef)\n+    const setRef = useMergedRef(setIntersectionWithResetRef, forwardedRef)\n \n     // Prefetch the URL if we haven't already and it's visible.\n     React.useEffect(() => {\n@@ -557,35 +477,16 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n       prefetch(router, href, as, { locale })\n     }, [as, href, isVisible, locale, prefetchEnabled, router?.locale, router])\n \n-    const childProps: {\n-      onTouchStart?: React.TouchEventHandler<HTMLAnchorElement>\n-      onMouseEnter: React.MouseEventHandler<HTMLAnchorElement>\n-      onClick: React.MouseEventHandler<HTMLAnchorElement>\n-      href?: string\n-      ref?: any\n-    } = {\n+    const anchorProps: React.DetailedHTMLProps<\n+      React.AnchorHTMLAttributes<HTMLAnchorElement>,\n+      HTMLAnchorElement\n+    > = {\n       ref: setRef,\n       onClick(e) {\n-        if (process.env.NODE_ENV !== 'production') {\n-          if (!e) {\n-            throw new Error(\n-              `Component rendered inside next/link has to pass click event to \"onClick\" prop.`\n-            )\n-          }\n-        }\n-\n-        if (!legacyBehavior && typeof onClick === 'function') {\n+        if (typeof onClick === 'function') {\n           onClick(e)\n         }\n \n-        if (\n-          legacyBehavior &&\n-          child.props &&\n-          typeof child.props.onClick === 'function'\n-        ) {\n-          child.props.onClick(e)\n-        }\n-\n         if (!router) {\n           return\n         }\n@@ -607,18 +508,10 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n         )\n       },\n       onMouseEnter(e) {\n-        if (!legacyBehavior && typeof onMouseEnterProp === 'function') {\n+        if (typeof onMouseEnterProp === 'function') {\n           onMouseEnterProp(e)\n         }\n \n-        if (\n-          legacyBehavior &&\n-          child.props &&\n-          typeof child.props.onMouseEnter === 'function'\n-        ) {\n-          child.props.onMouseEnter(e)\n-        }\n-\n         if (!router) {\n           return\n         }\n@@ -633,18 +526,10 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n       onTouchStart: process.env.__NEXT_LINK_NO_TOUCH_START\n         ? undefined\n         : function onTouchStart(e) {\n-            if (!legacyBehavior && typeof onTouchStartProp === 'function') {\n+            if (typeof onTouchStartProp === 'function') {\n               onTouchStartProp(e)\n             }\n \n-            if (\n-              legacyBehavior &&\n-              child.props &&\n-              typeof child.props.onTouchStart === 'function'\n-            ) {\n-              child.props.onTouchStart(e)\n-            }\n-\n             if (!router) {\n               return\n             }\n@@ -658,16 +543,10 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n           },\n     }\n \n-    // If child is an <a> tag and doesn't have a href attribute, or if the 'passHref' property is\n-    // defined, we specify the current 'href', so that repetition is not needed by the user.\n     // If the url is absolute, we can bypass the logic to prepend the domain and locale.\n     if (isAbsoluteUrl(as)) {\n-      childProps.href = as\n-    } else if (\n-      !legacyBehavior ||\n-      passHref ||\n-      (child.type === 'a' && !('href' in child.props))\n-    ) {\n+      anchorProps.href = as\n+    } else {\n       const curLocale = typeof locale !== 'undefined' ? locale : router?.locale\n \n       // we only render domain locales if we are currently on a domain locale\n@@ -676,25 +555,13 @@ const Link = React.forwardRef<HTMLAnchorElement, LinkPropsReal>(\n         router?.isLocaleDomain &&\n         getDomainLocale(as, curLocale, router?.locales, router?.domainLocales)\n \n-      childProps.href =\n+      anchorProps.href =\n         localeDomain ||\n         addBasePath(addLocale(as, curLocale, router?.defaultLocale))\n     }\n \n-    if (legacyBehavior) {\n-      if (process.env.NODE_ENV === 'development') {\n-        errorOnce(\n-          '`legacyBehavior` is deprecated and will be removed in a future ' +\n-            'release. A codemod is available to upgrade your components:\\n\\n' +\n-            'npx @next/codemod@latest new-link .\\n\\n' +\n-            'Learn more: https://nextjs.org/docs/app/building-your-application/upgrading/codemods#remove-a-tags-from-link-components'\n-        )\n-      }\n-      return React.cloneElement(child, childProps)\n-    }\n-\n     return (\n-      <a {...restProps} {...childProps}>\n+      <a {...restProps} {...anchorProps}>\n         {children}\n       </a>\n     )"
        },
        {
            "sha": "f35aa3bcb8bb20a5f656e687d8a6ff22b55c1ccf",
            "filename": "packages/next/src/client/use-merged-ref.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Fsrc%2Fclient%2Fuse-merged-ref.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/packages%2Fnext%2Fsrc%2Fclient%2Fuse-merged-ref.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fuse-merged-ref.ts?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -16,7 +16,7 @@ export function useMergedRef<TElement>(\n \n   // NOTE: In theory, we could skip the wrapping if only one of the refs is non-null.\n   // (this happens often if the user doesn't pass a ref to Link/Form/Image)\n-  // But this can cause us to leak a cleanup-ref into user code (e.g. via `<Link legacyBehavior>`),\n+  // But this can cause us to leak a cleanup-ref into user code (previously via `<Link legacyBehavior>`),\n   // and the user might pass that ref into ref-merging library that doesn't support cleanup refs\n   // (because it hasn't been updated for React 19)\n   // which can then cause things to blow up, because a cleanup-returning ref gets called with `null`."
        },
        {
            "sha": "e05ef1a73050b326f99da9ec7b386666527d13c5",
            "filename": "test/development/error-overlay/index.test.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Ferror-overlay%2Findex.test.tsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -27,7 +27,7 @@ describe('DevErrorOverlay', () => {\n       '[data-nextjs-error-code]'\n     )\n     const code = await errorCode.getAttribute('data-nextjs-error-code')\n-    expect(code).toBe('E209')\n+    expect(code).toBe('E794')\n   })\n \n   it('loads fonts successfully', async () => {"
        },
        {
            "sha": "83a88ce63d1257e91d28cdec5fb79c4e9c08aa27",
            "filename": "test/development/pages-dir/client-navigation/anchor-in-link.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 28,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Fanchor-in-link.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Fanchor-in-link.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Fanchor-in-link.test.ts?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -75,32 +75,4 @@ describe('Client Navigation', () => {\n       await browser.close()\n     })\n   })\n-\n-  describe('with unexpected <a/> nested tag', () => {\n-    it('should not redirect if passHref prop is not defined in Link', async () => {\n-      const browser = await next.browser('/nav/pass-href-prop')\n-      const text = await browser\n-        .elementByCss('#without-href')\n-        .click()\n-        .waitForElementByCss('.nav-pass-href-prop')\n-        .elementByCss('p')\n-        .text()\n-\n-      expect(text).toBe('This is the passHref prop page.')\n-      await browser.close()\n-    })\n-\n-    it('should redirect if passHref prop is defined in Link', async () => {\n-      const browser = await next.browser('/nav/pass-href-prop')\n-      const text = await browser\n-        .elementByCss('#with-href')\n-        .click()\n-        .waitForElementByCss('.nav-home')\n-        .elementByCss('p')\n-        .text()\n-\n-      expect(text).toBe('This is the home.')\n-      await browser.close()\n-    })\n-  })\n })"
        },
        {
            "sha": "ec3cbacef36d5b92a22d4c62673ca31a0393149a",
            "filename": "test/development/pages-dir/client-navigation/fixture/pages/link-invalid-onclick.js",
            "status": "removed",
            "additions": 0,
            "deletions": 35,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-invalid-onclick.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-invalid-onclick.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-invalid-onclick.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,35 +0,0 @@\n-import Link from 'next/link'\n-import { useState } from 'react'\n-\n-export default function Page(props) {\n-  const [errorCount, setErrorCount] = useState(0)\n-\n-  function Button(props) {\n-    return (\n-      <a\n-        id=\"custom-button\"\n-        href={props.href}\n-        onClick={(e) => {\n-          e.preventDefault()\n-          try {\n-            props.onClick()\n-          } catch (err) {\n-            setErrorCount(errorCount + 1)\n-            console.error(err)\n-          }\n-        }}\n-      >\n-        {props.href}\n-      </a>\n-    )\n-  }\n-\n-  return (\n-    <>\n-      <p id=\"errors\">{errorCount}</p>\n-      <Link href=\"/nav\" passHref legacyBehavior>\n-        <Button />\n-      </Link>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "082663f8fcf5e493db6bca335c60ddaf97c45502",
            "filename": "test/development/pages-dir/client-navigation/fixture/pages/link-no-child.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-no-child.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-no-child.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-no-child.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,10 +0,0 @@\n-import React from 'react'\n-import Link from 'next/link'\n-\n-export default function Page() {\n-  return (\n-    <div>\n-      Hello World. <Link href=\"/about\" legacyBehavior></Link>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "a367a4e01dda1637e78462c9c07439034bed2eff",
            "filename": "test/development/pages-dir/client-navigation/fixture/pages/link-number-child.js",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-number-child.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-number-child.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Flink-number-child.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,13 +0,0 @@\n-import React from 'react'\n-import Link from 'next/link'\n-\n-export default function Page() {\n-  return (\n-    <div>\n-      Hello World.{' '}\n-      <Link href=\"/about\" legacyBehavior>\n-        {1000}\n-      </Link>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "47d6fdea5129f8167ad43f35c148f5eded8a2106",
            "filename": "test/development/pages-dir/client-navigation/fixture/pages/nav/pass-href-prop.js",
            "status": "removed",
            "additions": 0,
            "deletions": 27,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Fnav%2Fpass-href-prop.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Fnav%2Fpass-href-prop.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Ffixture%2Fpages%2Fnav%2Fpass-href-prop.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,27 +0,0 @@\n-import Link from 'next/link'\n-\n-const UnexpectedNestedA = () => {\n-  const UnexpectedWrapper = (props) => {\n-    const { href, id } = props\n-    const safeProps = { href, id }\n-    return <a {...safeProps}>{props.children}</a>\n-  }\n-\n-  return UnexpectedWrapper\n-}\n-\n-const FakeA = UnexpectedNestedA()\n-\n-export default () => (\n-  <div className=\"nav-pass-href-prop\">\n-    <Link href=\"/nav\" passHref legacyBehavior>\n-      <FakeA id=\"with-href\">Will redirect as an `a` tag</FakeA>\n-    </Link>\n-\n-    <Link href=\"/nav\" legacyBehavior>\n-      <FakeA id=\"without-href\">Will not redirect as an `a` tag</FakeA>\n-    </Link>\n-\n-    <p>This is the passHref prop page.</p>\n-  </div>\n-)"
        },
        {
            "sha": "339f8017032778c128fc67f86db4dadaa14934f1",
            "filename": "test/development/pages-dir/client-navigation/link.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 14,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Flink.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Flink.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fpages-dir%2Fclient-navigation%2Flink.test.ts?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -1,6 +1,6 @@\n /* eslint-env jest */\n \n-import { assertNoRedbox, waitFor, check } from 'next-test-utils'\n+import { waitFor, check } from 'next-test-utils'\n import path from 'path'\n import { nextTestSetup } from 'e2e-utils'\n \n@@ -25,12 +25,6 @@ describe('Client Navigation with <Link/>', () => {\n     await browser.close()\n   })\n \n-  it('should not throw error when one number type child is provided', async () => {\n-    const browser = await next.browser('/link-number-child')\n-    await assertNoRedbox(browser)\n-    if (browser) await browser.close()\n-  })\n-\n   it('should navigate back after reload', async () => {\n     const browser = await next.browser('/nav')\n     await browser.elementByCss('#about-link').click()\n@@ -58,13 +52,6 @@ describe('Client Navigation with <Link/>', () => {\n     expect(text).toMatch(/this is the about page/i)\n   })\n \n-  it('should error when calling onClick without event', async () => {\n-    const browser = await next.browser('/link-invalid-onclick')\n-    expect(await browser.elementByCss('#errors').text()).toBe('0')\n-    await browser.elementByCss('#custom-button').click()\n-    expect(await browser.elementByCss('#errors').text()).toBe('1')\n-  })\n-\n   it('should navigate via the client side', async () => {\n     const browser = await next.browser('/nav')\n "
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/link-component-deprecations/app/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Flayout.tsx?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,7 +0,0 @@\n-export default function Root({ children }: { children: React.ReactNode }) {\n-  return (\n-    <html>\n-      <body>{children}</body>\n-    </html>\n-  )\n-}"
        },
        {
            "sha": "2496316257c34e7fe63a00589cc42390b98ec744",
            "filename": "test/e2e/app-dir/link-component-deprecations/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Fpage.tsx?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,14 +0,0 @@\n-import Link from 'next/link'\n-\n-export default function HomePage() {\n-  return (\n-    <>\n-      <Link legacyBehavior href=\"/target-page\">\n-        <a>Target page</a>\n-      </Link>\n-      <Link legacyBehavior href=\"/target-page?foo=bar\">\n-        <a>Another Target page</a>\n-      </Link>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "9b8e50c00c64d0b3616f93b5d96ea6ac4519130b",
            "filename": "test/e2e/app-dir/link-component-deprecations/app/target-page/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Ftarget-page%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Ftarget-page%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Fapp%2Ftarget-page%2Fpage.tsx?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,5 +0,0 @@\n-import Link from 'next/link'\n-\n-export default function TargetPage() {\n-  return <Link href=\"/\">Home</Link>\n-}"
        },
        {
            "sha": "60821ec4750e3a695d8fe145d52b6177faf985a1",
            "filename": "test/e2e/app-dir/link-component-deprecations/link-component-deprecations.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Flink-component-deprecations.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Flink-component-deprecations.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Flink-component-deprecations%2Flink-component-deprecations.test.ts?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,22 +0,0 @@\n-import { nextTestSetup, isNextDev } from 'e2e-utils'\n-\n-describe('Link component deprecations', () => {\n-  const { next } = nextTestSetup({\n-    files: __dirname,\n-  })\n-\n-  it('logs deprecation warning for legacyBehavior prop', async () => {\n-    const browser = await next.browser('/')\n-    const logs = await browser.log()\n-\n-    const errors = logs.filter(\n-      (log) =>\n-        log.source === 'error' &&\n-        log.message.includes(\n-          '`legacyBehavior` is deprecated and will be removed in a future release.'\n-        )\n-    )\n-\n-    expect(errors.length).toBe(isNextDev ? 1 : 0)\n-  })\n-})"
        },
        {
            "sha": "a3ea06c36eab8eb6211075867efb5d20fdab2cb7",
            "filename": "test/e2e/new-link-behavior/child-a-tag-error.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fe2e%2Fnew-link-behavior%2Fchild-a-tag-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fe2e%2Fnew-link-behavior%2Fchild-a-tag-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnew-link-behavior%2Fchild-a-tag-error.test.ts?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -27,11 +27,11 @@ describe('New Link Behavior with <a> child', () => {\n \n     if (isNextDev) {\n       expect(next.cliOutput).toContain(\n-        'Error: Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>'\n+        'Error: Invalid <Link> with <a> child. Please remove <a>'\n       )\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"description\": \"Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\n+         \"description\": \"Invalid <Link> with <a> child. Please remove <a>.\n        Learn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor\",\n          \"environmentLabel\": null,\n          \"label\": \"Runtime Error\","
        },
        {
            "sha": "9f08817a904c333c487054e4fc4ca8006c6b16ab",
            "filename": "test/e2e/new-link-behavior/typescript.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 37,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnew-link-behavior%2Ftypescript.test.ts?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,37 +0,0 @@\n-import { createNext, FileRef } from 'e2e-utils'\n-import { NextInstance } from 'e2e-utils'\n-import { renderViaHTTP } from 'next-test-utils'\n-import cheerio from 'cheerio'\n-import path from 'path'\n-import webdriver from 'next-webdriver'\n-\n-const appDir = path.join(__dirname, 'typescript')\n-\n-describe('New Link Behavior', () => {\n-  let next: NextInstance\n-\n-  beforeAll(async () => {\n-    next = await createNext({\n-      files: {\n-        pages: new FileRef(path.join(appDir, 'pages')),\n-        'tsconfig.json': new FileRef(path.join(appDir, 'tsconfig.json')),\n-        'next.config.js': new FileRef(path.join(appDir, 'next.config.js')),\n-      },\n-    })\n-  })\n-  afterAll(() => next.destroy())\n-\n-  it('should render link with <a>', async () => {\n-    const html = await renderViaHTTP(next.url, '/')\n-    const $ = cheerio.load(html)\n-    const $a = $('a')\n-    expect($a.text()).toBe('Visit')\n-    expect($a.attr('href')).toBe('/test')\n-  })\n-\n-  it('should apply ref on link', async () => {\n-    const browser = await webdriver(next.url, `/ref`)\n-    const text = await browser.elementByCss('#anchor-text').text()\n-    expect(text).toBe('AnchorText: About')\n-  })\n-})"
        },
        {
            "sha": "0d6071006ab351fa39b57f5c9caab7272000ea90",
            "filename": "test/e2e/new-link-behavior/typescript/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fnext.config.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,3 +0,0 @@\n-module.exports = {\n-  reactStrictMode: true,\n-}"
        },
        {
            "sha": "241fb59814ec85c52931490407a41c3e9edffab2",
            "filename": "test/e2e/new-link-behavior/typescript/pages/index.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 93,
            "changes": 93,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fpages%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fpages%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fpages%2Findex.tsx?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,93 +0,0 @@\n-import {\n-  PropsWithRef,\n-  PropsWithoutRef,\n-  HTMLProps,\n-  CSSProperties,\n-  MouseEventHandler,\n-} from 'react'\n-import NextLink, { LinkProps } from 'next/link'\n-\n-type NativeButtonProps = Omit<\n-  HTMLProps<HTMLAnchorElement>,\n-  'type' | 'prefix' | 'size' | 'width' | 'shape' | 'onClick'\n->\n-\n-export type ButtonVariant = 'shadow' | 'invert' | 'unstyled' | 'ghost'\n-export type ButtonAlignment = 'start' | 'grow' | 'center'\n-\n-type BaseButtonProps = NativeButtonProps & {\n-  Component?: React.ElementType<any> // this could probably be better...\n-  typeName?: 'button' | 'submit' | 'reset'\n-  loading?: boolean\n-  suffix?: React.ReactNode\n-  prefix?: React.ReactNode\n-  size?: 'small' | 'large'\n-  variant?: ButtonVariant\n-  align?: ButtonAlignment\n-  svgOnly?: boolean\n-  passthroughOnClick?: MouseEventHandler\n-  passthroughOnMouseEnter?: MouseEventHandler\n-  onClick?: () => void\n-}\n-\n-type PropsWithShape = BaseButtonProps &\n-  (\n-    | {\n-        width?: CSSProperties['width']\n-        shape?: never\n-      }\n-    | {\n-        shape?: 'square' | 'circle'\n-        width?: never\n-      }\n-  )\n-\n-type PropsWithSvgOnly = PropsWithShape &\n-  (\n-    | {\n-        // If you're here, you probably got a TS error on the svgOnly prop\n-        // If you specify svgOnly, you MUST provide a descriptive label for the button\n-        svgOnly?: true\n-        'aria-label': string\n-      }\n-    | {\n-        svgOnly?: never\n-      }\n-  )\n-\n-export type ButtonLinkProps = PropsWithRef<Omit<ButtonProps, 'href'>> &\n-  LinkProps & {\n-    tab?: boolean\n-  }\n-\n-export const ButtonLink: React.FC<ButtonLinkProps> = ({\n-  href,\n-  as,\n-  shallow,\n-  children,\n-}) => {\n-  return (\n-    <NextLink\n-      href={href}\n-      as={as}\n-      shallow={shallow}\n-      // Always passHref to the <a> component if it's defined.\n-      passHref={!!href}\n-      legacyBehavior\n-    >\n-      <a>{children}</a>\n-    </NextLink>\n-  )\n-}\n-\n-export type ButtonProps = PropsWithSvgOnly\n-\n-const Visit = ({ onClick, ...props }: PropsWithoutRef<ButtonProps>) => {\n-  return (\n-    <ButtonLink href={'/test'} tab width={70} {...props}>\n-      Visit\n-    </ButtonLink>\n-  )\n-}\n-\n-export default Visit"
        },
        {
            "sha": "2bc111b57d9faf93c0b3b160655c3a2d7e3c4a7b",
            "filename": "test/e2e/new-link-behavior/typescript/pages/ref.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 21,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fpages%2Fref.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fpages%2Fref.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Fpages%2Fref.tsx?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,21 +0,0 @@\n-import { useRef, useEffect, useState } from 'react'\n-import Link from 'next/link'\n-\n-export default function Page() {\n-  const ref = useRef<HTMLAnchorElement>(undefined)\n-  const [anchorText, setAnchorText] = useState(null)\n-\n-  useEffect(() => {\n-    const anchorElement = ref.current\n-    setAnchorText(anchorElement?.textContent)\n-  }, [])\n-\n-  return (\n-    <>\n-      {anchorText && <h1 id=\"anchor-text\">AnchorText: {anchorText}</h1>}\n-      <Link href=\"/about\" ref={ref}>\n-        About\n-      </Link>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "c9512d87e70492d48218878adb6d618365ce0322",
            "filename": "test/e2e/new-link-behavior/typescript/tsconfig.json",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnew-link-behavior%2Ftypescript%2Ftsconfig.json?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,20 +0,0 @@\n-{\n-  \"compilerOptions\": {\n-    \"target\": \"es5\",\n-    \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\n-    \"allowJs\": true,\n-    \"skipLibCheck\": true,\n-    \"strict\": false,\n-    \"forceConsistentCasingInFileNames\": true,\n-    \"noEmit\": true,\n-    \"incremental\": true,\n-    \"esModuleInterop\": true,\n-    \"module\": \"esnext\",\n-    \"moduleResolution\": \"bundler\",\n-    \"resolveJsonModule\": true,\n-    \"isolatedModules\": true,\n-    \"jsx\": \"preserve\"\n-  },\n-  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\"],\n-  \"exclude\": [\"node_modules\"]\n-}"
        },
        {
            "sha": "e837fb376182be572868f541f8c1bf5ff66269de",
            "filename": "test/e2e/next-link-errors/app/multiple-children/page.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnext-link-errors%2Fapp%2Fmultiple-children%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnext-link-errors%2Fapp%2Fmultiple-children%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnext-link-errors%2Fapp%2Fmultiple-children%2Fpage.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,12 +0,0 @@\n-import Link from 'next/link'\n-\n-export const dynamic = 'force-dynamic'\n-\n-export default function Index() {\n-  return (\n-    <Link href=\"/\" legacyBehavior>\n-      <p>Hello</p>\n-      <p>Dave!</p>\n-    </Link>\n-  )\n-}"
        },
        {
            "sha": "dd802d4a09cdcb6008f09534e4ce07b083442658",
            "filename": "test/e2e/next-link-errors/app/no-children/page.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnext-link-errors%2Fapp%2Fno-children%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fe2e%2Fnext-link-errors%2Fapp%2Fno-children%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnext-link-errors%2Fapp%2Fno-children%2Fpage.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,8 +0,0 @@\n-import React from 'react'\n-import Link from 'next/link'\n-\n-export const dynamic = 'force-dynamic'\n-\n-export default function Page() {\n-  return <Link href=\"/about\" legacyBehavior></Link>\n-}"
        },
        {
            "sha": "610ec49054af5e4618241e83ed2cf463160b0d52",
            "filename": "test/e2e/next-link-errors/next-link-errors.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 47,
            "changes": 47,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fe2e%2Fnext-link-errors%2Fnext-link-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fe2e%2Fnext-link-errors%2Fnext-link-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnext-link-errors%2Fnext-link-errors.test.ts?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -33,53 +33,6 @@ describe('next-link', () => {\n     )\n   })\n \n-  it('no children', async () => {\n-    const browser = await webdriver(next.appPort, '/no-children')\n-\n-    if (isNextDev) {\n-      await expect(browser).toDisplayRedbox(`\n-       {\n-         \"description\": \"No children were passed to <Link> with \\`href\\` of \\`/about\\` but one child is required https://nextjs.org/docs/messages/link-no-children\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"app/no-children/page.js (7:10) @ Page\n-       > 7 |   return <Link href=\"/about\" legacyBehavior></Link>\n-           |          ^\",\n-         \"stack\": [\n-           \"Page app/no-children/page.js (7:10)\",\n-         ],\n-       }\n-      `)\n-    }\n-    expect(await browser.elementByCss('body').text()).toMatchInlineSnapshot(\n-      `\"Application error: a client-side exception has occurred while loading localhost (see the browser console for more information).\"`\n-    )\n-  })\n-\n-  it('multiple children', async () => {\n-    const browser = await webdriver(next.appPort, '/multiple-children')\n-\n-    if (isNextDev) {\n-      await expect(browser).toDisplayRedbox(`\n-       {\n-         \"description\": \"Multiple children were passed to <Link> with \\`href\\` of \\`/\\` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children \n-       Open your browser's console to view the Component stack trace.\",\n-         \"environmentLabel\": null,\n-         \"label\": \"Runtime Error\",\n-         \"source\": \"app/multiple-children/page.js (7:5) @ Index\n-       >  7 |     <Link href=\"/\" legacyBehavior>\n-            |     ^\",\n-         \"stack\": [\n-           \"Index app/multiple-children/page.js (7:5)\",\n-         ],\n-       }\n-      `)\n-    }\n-    expect(await browser.elementByCss('body').text()).toMatchInlineSnapshot(\n-      `\"Application error: a client-side exception has occurred while loading localhost (see the browser console for more information).\"`\n-    )\n-  })\n-\n   it('invalid `prefetch` causes runtime error (dev-only)', async () => {\n     const browser = await webdriver(next.appPort, '/invalid-prefetch')\n "
        },
        {
            "sha": "d2d09826ff4972e1519f12c5acb42a606d2d5dee",
            "filename": "test/integration/css-fixtures/next-issue-12343/components/button.jsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fcomponents%2Fbutton.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fcomponents%2Fbutton.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fcomponents%2Fbutton.jsx?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -1,5 +1,5 @@\n import styles from './button.module.css'\n \n export const Button = ({ className, ...rest }) => (\n-  <a className={`${styles.button} ${className}`} {...rest} />\n+  <span className={`${styles.button} ${className}`} {...rest} />\n )"
        },
        {
            "sha": "7b40a60c4bac4b791b522163cdbb64de03ab927a",
            "filename": "test/integration/css-fixtures/next-issue-12343/pages/another-page.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fpages%2Fanother-page.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fpages%2Fanother-page.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fpages%2Fanother-page.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -5,7 +5,7 @@ function AnotherPage() {\n   return (\n     <div>\n       <h1>Another page</h1>\n-      <Link href=\"/\" passHref legacyBehavior>\n+      <Link href=\"/\">\n         <Button id=\"link-index\">Another Button instance</Button>\n       </Link>\n     </div>"
        },
        {
            "sha": "0844001c4e41a3ff842946f7ecbf5e5da0361707",
            "filename": "test/integration/css-fixtures/next-issue-12343/pages/index.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcss-fixtures%2Fnext-issue-12343%2Fpages%2Findex.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -6,7 +6,7 @@ function HomePage() {\n   return (\n     <div>\n       <h1>Home page</h1>\n-      <Link href=\"/another-page\" passHref legacyBehavior>\n+      <Link href=\"/another-page\">\n         <Button id=\"link-other\" className={styles.button}>\n           Another page\n         </Button>"
        },
        {
            "sha": "fa72b97d3e0cc4cf3af5b01d31a620a38475a4e0",
            "filename": "test/integration/link-ref-app/app/class/page.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-app%2Fapp%2Fclass%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-app%2Fapp%2Fclass%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-ref-app%2Fapp%2Fclass%2Fpage.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -4,12 +4,12 @@ import Link from 'next/link'\n \n class MyLink extends React.Component {\n   render() {\n-    return <a {...this.props}>Click me</a>\n+    return <span {...this.props}>Click me</span>\n   }\n }\n \n export default () => (\n-  <Link href=\"/\" passHref legacyBehavior>\n+  <Link href=\"/\">\n     <MyLink />\n   </Link>\n )"
        },
        {
            "sha": "87766486e57dafcc106e8cffd691b61c611d046f",
            "filename": "test/integration/link-ref-app/app/function/page.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-app%2Fapp%2Ffunction%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-app%2Fapp%2Ffunction%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-ref-app%2Fapp%2Ffunction%2Fpage.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -3,13 +3,13 @@ import React from 'react'\n import Link from 'next/link'\n \n const MyLink = React.forwardRef((props, ref) => (\n-  <a {...props} ref={ref}>\n+  <span {...props} ref={ref}>\n     Click me\n-  </a>\n+  </span>\n ))\n \n export default () => (\n-  <Link href=\"/\" passHref legacyBehavior>\n+  <Link href=\"/\">\n     <MyLink />\n   </Link>\n )"
        },
        {
            "sha": "8ae12b7b8d9296e3712627ec4d16647baee7aafa",
            "filename": "test/integration/link-ref-app/test/index.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 20,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-app%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-app%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-ref-app%2Ftest%2Findex.test.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -16,7 +16,7 @@ let app\n let appPort\n const appDir = join(__dirname, '..')\n \n-const collectErrors = async (pathname) => {\n+const noError = async (pathname) => {\n   const browser = await webdriver(appPort, '/')\n   await browser.eval(`(function() {\n     window.caughtErrors = []\n@@ -29,14 +29,8 @@ const collectErrors = async (pathname) => {\n   })()`)\n   await waitFor(1000)\n   const errors = await browser.eval(`window.caughtErrors`)\n-  await browser.close()\n-  return errors\n-}\n-\n-const noError = async (pathname) => {\n-  const errors = await collectErrors(pathname)\n   expect(errors).toEqual([])\n-  return errors\n+  await browser.close()\n }\n \n const didPrefetch = async (pathname) => {\n@@ -86,21 +80,11 @@ describe('Invalid hrefs', () => {\n       runCommonTests()\n \n       it('should not show error for function component with forwardRef', async () => {\n-        const errors = await collectErrors('/function')\n-        const legacyBehaviorDeprecation =\n-          '`legacyBehavior` is deprecated and will be removed in a future release.'\n-        errors.forEach((error) => {\n-          expect(error).toContain(legacyBehaviorDeprecation)\n-        })\n+        await noError('/function')\n       })\n \n       it('should not show error for class component as child of next/link', async () => {\n-        const errors = await collectErrors('/class')\n-        const legacyBehaviorDeprecation =\n-          '`legacyBehavior` is deprecated and will be removed in a future release.'\n-        errors.forEach((error) => {\n-          expect(error).toContain(legacyBehaviorDeprecation)\n-        })\n+        await noError('/class')\n       })\n \n       it('should handle child ref with React.createRef', async () => {"
        },
        {
            "sha": "c4d7eb3169aeabb5fe087e2248266e7ebea5319e",
            "filename": "test/integration/link-ref-pages/pages/class.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-pages%2Fpages%2Fclass.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-pages%2Fpages%2Fclass.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-ref-pages%2Fpages%2Fclass.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -3,12 +3,12 @@ import Link from 'next/link'\n \n class MyLink extends React.Component {\n   render() {\n-    return <a {...this.props}>Click me</a>\n+    return <span {...this.props}>Click me</span>\n   }\n }\n \n export default () => (\n-  <Link href=\"/\" passHref legacyBehavior>\n+  <Link href=\"/\">\n     <MyLink />\n   </Link>\n )"
        },
        {
            "sha": "4837df75fd251d90552bb4d22b0639c166915871",
            "filename": "test/integration/link-ref-pages/pages/function.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-pages%2Fpages%2Ffunction.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-pages%2Fpages%2Ffunction.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-ref-pages%2Fpages%2Ffunction.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -2,13 +2,13 @@ import React from 'react'\n import Link from 'next/link'\n \n const MyLink = React.forwardRef((props, ref) => (\n-  <a {...props} ref={ref}>\n+  <span {...props} ref={ref}>\n     Click me\n-  </a>\n+  </span>\n ))\n \n export default () => (\n-  <Link href=\"/\" passHref legacyBehavior>\n+  <Link href=\"/\">\n     <MyLink />\n   </Link>\n )"
        },
        {
            "sha": "9f3c714e74900d4e51f76e2134dccba2a87aa9ab",
            "filename": "test/integration/link-ref-pages/test/index.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 20,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-pages%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Flink-ref-pages%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-ref-pages%2Ftest%2Findex.test.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -17,7 +17,7 @@ let app\n let appPort\n const appDir = join(__dirname, '..')\n \n-const collectErrors = async (pathname) => {\n+const noError = async (pathname) => {\n   const browser = await webdriver(appPort, '/')\n   await browser.eval(`(function() {\n     window.caughtErrors = []\n@@ -30,14 +30,8 @@ const collectErrors = async (pathname) => {\n   })()`)\n   await waitFor(1000)\n   const errors = await browser.eval(`window.caughtErrors`)\n-  await browser.close()\n-  return errors\n-}\n-\n-const noError = async (pathname) => {\n-  const errors = await collectErrors(pathname)\n   expect(errors).toEqual([])\n-  return errors\n+  await browser.close()\n }\n \n const didPrefetch = async (pathname) => {\n@@ -82,21 +76,11 @@ describe('Invalid hrefs', () => {\n       runCommonTests()\n \n       it('should not show error for function component with forwardRef', async () => {\n-        const errors = await collectErrors('/function')\n-        const legacyBehaviorDeprecation =\n-          '`legacyBehavior` is deprecated and will be removed in a future release.'\n-        errors.forEach((error) => {\n-          expect(error).toContain(legacyBehaviorDeprecation)\n-        })\n+        await noError('/function')\n       })\n \n       it('should not show error for class component as child of next/link', async () => {\n-        const errors = await collectErrors('/class')\n-        const legacyBehaviorDeprecation =\n-          '`legacyBehavior` is deprecated and will be removed in a future release.'\n-        errors.forEach((error) => {\n-          expect(error).toContain(legacyBehaviorDeprecation)\n-        })\n+        await noError('/class')\n       })\n \n       it('should handle child ref with React.createRef', async () => {"
        },
        {
            "sha": "6e09cce1f5ede22f703aa1352657c54ad4433aec",
            "filename": "test/integration/link-with-multiple-child/test/index.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 31,
            "changes": 31,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fintegration%2Flink-with-multiple-child%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fintegration%2Flink-with-multiple-child%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-with-multiple-child%2Ftest%2Findex.test.js?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,31 +0,0 @@\n-/**\n- * @jest-environment jsdom\n- */\n-import { render, screen } from '@testing-library/react'\n-import '@testing-library/jest-dom'\n-import Link from 'next/link'\n-\n-test('single child', () => {\n-  render(<Link href=\"https://nextjs.org/blog/next-13\">Hello world</Link>)\n-  expect(screen.getByRole('link')).not.toBeNull()\n-})\n-\n-test('multiple child with default legacyBehavior', () => {\n-  render(\n-    <Link href=\"https://nextjs.org/blog/next-13\">\n-      <span>Hello world</span>\n-      <span>!</span>\n-    </Link>\n-  )\n-  expect(screen.getByRole('link')).not.toBeNull()\n-})\n-\n-test('multiple child with forced legacyBehavior=false', () => {\n-  render(\n-    <Link href=\"https://nextjs.org/blog/next-13\" legacyBehavior={false}>\n-      <span>Hello world</span>\n-      <span>!</span>\n-    </Link>\n-  )\n-  expect(screen.getByRole('link')).not.toBeNull()\n-})"
        },
        {
            "sha": "182a22f6c6a071817ef6b711c8863284fcb83ca3",
            "filename": "test/integration/preload-viewport/pages/invalid-ref.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Fpreload-viewport%2Fpages%2Finvalid-ref.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fintegration%2Fpreload-viewport%2Fpages%2Finvalid-ref.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpreload-viewport%2Fpages%2Finvalid-ref.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -9,7 +9,7 @@ class Button extends React.Component {\n \n export default () => (\n   <div>\n-    <Link href=\"/another\" passHref legacyBehavior>\n+    <Link href=\"/another\">\n       <Button id=\"btn-link\" />\n     </Link>\n   </div>"
        },
        {
            "sha": "f26b849d6818a5a2575e7b8d4d63e07ddf66b418",
            "filename": "test/production/export/pages/button-link.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fproduction%2Fexport%2Fpages%2Fbutton-link.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fproduction%2Fexport%2Fpages%2Fbutton-link.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fexport%2Fpages%2Fbutton-link.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -3,7 +3,7 @@ import Link from 'next/link'\n export default () => (\n   <div id=\"button-link-page\">\n     <div>\n-      <Link href=\"/\" passHref legacyBehavior>\n+      <Link href=\"/\">\n         <button>Go Back</button>\n       </Link>\n     </div>"
        },
        {
            "sha": "a4fb77a1e90ae7180ada741b2e3631ae60f9ebf9",
            "filename": "test/production/export/pages/index.js",
            "status": "modified",
            "additions": 22,
            "deletions": 22,
            "changes": 44,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fproduction%2Fexport%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fproduction%2Fexport%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fexport%2Fpages%2Findex.js?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -9,53 +9,53 @@ function routeToAbout(e) {\n export default () => (\n   <div id=\"home-page\">\n     <div>\n-      <Link href=\"/about\" legacyBehavior>\n-        <a id=\"about-via-link\">About via Link</a>\n+      <Link href=\"/about\" id=\"about-via-link\">\n+        About via Link\n       </Link>\n       <a href=\"#\" onClick={routeToAbout} id=\"about-via-router\">\n         About via Router\n       </a>\n-      <Link href=\"/counter\" legacyBehavior>\n-        <a id=\"counter\">Counter</a>\n+      <Link href=\"/counter\" id=\"counter\">\n+        Counter\n       </Link>\n-      <Link href=\"/dynamic?text=cool+dynamic+text\" legacyBehavior>\n-        <a id=\"get-initial-props\">getInitialProps</a>\n+      <Link href=\"/dynamic?text=cool+dynamic+text\" id=\"get-initial-props\">\n+        getInitialProps\n       </Link>\n       <Link\n         href=\"/dynamic?text=next+export+is+nice\"\n         as=\"/dynamic/one\"\n-        legacyBehavior\n+        id=\"dynamic-1\"\n       >\n-        <a id=\"dynamic-1\">Dynamic 1</a>\n+        Dynamic 1\n       </Link>\n       <Link\n         href=\"/dynamic?text=Vercel+is+awesome\"\n         as=\"/dynamic/two\"\n-        legacyBehavior\n+        id=\"dynamic-2\"\n       >\n-        <a id=\"dynamic-2\">Dynamic 2</a>\n+        Dynamic 2\n       </Link>\n-      <Link href=\"/dynamic?text=Vercel+is+awesome#cool\" legacyBehavior>\n-        <a id=\"with-hash\">With Hash</a>\n+      <Link href=\"/dynamic?text=Vercel+is+awesome#cool\" id=\"with-hash\">\n+        With Hash\n       </Link>\n       <Link\n         href=\"/dynamic?text=this+file+has+an+extension\"\n         as=\"/file-name.md\"\n-        legacyBehavior\n+        id=\"path-with-extension\"\n       >\n-        <a id=\"path-with-extension\">Path with extension</a>\n+        Path with extension\n       </Link>\n-      <Link href=\"/level1\" legacyBehavior>\n-        <a id=\"level1-home-page\">Level1 home page</a>\n+      <Link href=\"/level1\" id=\"level1-home-page\">\n+        Level1 home page\n       </Link>\n-      <Link href=\"/level1/about\" legacyBehavior>\n-        <a id=\"level1-about-page\">Level1 about page</a>\n+      <Link href=\"/level1/about\" id=\"level1-about-page\">\n+        Level1 about page\n       </Link>\n-      <Link href=\"/dynamic-imports\" legacyBehavior>\n-        <a id=\"dynamic-imports-link\">Dynamic imports page</a>\n+      <Link href=\"/dynamic-imports\" id=\"dynamic-imports-link\">\n+        Dynamic imports page\n       </Link>\n-      <Link href=\"/gsp-notfound\" legacyBehavior>\n-        <a id=\"gsp-notfound-link\">GSP notfound page</a>\n+      <Link href=\"/gsp-notfound\" id=\"gsp-notfound-link\">\n+        GSP notfound page\n       </Link>\n     </div>\n     <p>This is the home page</p>"
        },
        {
            "sha": "5874c94ecfcf90f1e3edd62786966918c18c87b2",
            "filename": "test/production/next-link-legacybehavior-ref-merging/app/layout.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Flayout.tsx?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,13 +0,0 @@\n-import * as React from 'react'\n-\n-export default function RootLayout({\n-  children,\n-}: {\n-  children: React.ReactNode\n-}) {\n-  return (\n-    <html lang=\"en\">\n-      <body>{children}</body>\n-    </html>\n-  )\n-}"
        },
        {
            "sha": "d489d4cedfa790c6f59930d19160bb060870d032",
            "filename": "test/production/next-link-legacybehavior-ref-merging/app/link-target/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Flink-target%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Flink-target%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Flink-target%2Fpage.tsx?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,11 +0,0 @@\n-import * as React from 'react'\n-import Link from 'next/link'\n-\n-export default function Page() {\n-  return (\n-    <>\n-      <h1>Navigation worked!</h1>\n-      <Link href=\"/\">Go back</Link>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "9e33f8f60929751daa3a03af9d777d8d55ae32ea",
            "filename": "test/production/next-link-legacybehavior-ref-merging/app/page.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 87,
            "changes": 87,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fapp%2Fpage.tsx?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,87 +0,0 @@\n-'use client'\n-import Link from 'next/link'\n-import * as React from 'react'\n-import {\n-  useCallback,\n-  useState,\n-  type RefCallback,\n-  type Ref,\n-  type ComponentPropsWithRef,\n-  type ReactNode,\n-} from 'react'\n-\n-export default function Page() {\n-  return (\n-    <>\n-      <h1>Home</h1>\n-      <ToggleVisibility>\n-        <Link href=\"/link-target\" legacyBehavior>\n-          <AnchorThatDoesRefMerging id=\"test-link\">\n-            Go to /link-target\n-          </AnchorThatDoesRefMerging>\n-        </Link>\n-      </ToggleVisibility>\n-    </>\n-  )\n-}\n-\n-function ToggleVisibility({ children }: { children: ReactNode }) {\n-  const [isVisible, setIsVisible] = useState(true)\n-  return (\n-    <>\n-      <div>\n-        <button type=\"button\" onClick={() => setIsVisible((prev) => !prev)}>\n-          {isVisible ? 'Hide content' : 'Show content'}\n-        </button>\n-      </div>\n-      {isVisible ? children : null}\n-    </>\n-  )\n-}\n-\n-function AnchorThatDoesRefMerging({\n-  ref,\n-  children,\n-  ...anchorProps\n-}: ComponentPropsWithRef<'a'>) {\n-  const customRef: RefCallback<HTMLAnchorElement> = useCallback((el) => {\n-    if (el) {\n-      console.log('hello friends i am here')\n-    } else {\n-      console.log('goodbye friends i am gone')\n-    }\n-  }, [])\n-\n-  const finalRef = useBuggyRefMerge(customRef, ref ?? null)\n-  return (\n-    <a ref={finalRef} {...anchorProps}>\n-      {children}\n-    </a>\n-  )\n-}\n-\n-/** A ref-merging function that doesn't account for cleanup refs (added in React 19)\n- * https://react.dev/blog/2024/12/05/react-19#cleanup-functions-for-refs\n- */\n-function useBuggyRefMerge<TElement>(\n-  refA: Ref<TElement>,\n-  refB: Ref<TElement>\n-): RefCallback<TElement> {\n-  return useCallback(\n-    (current: TElement | null) => {\n-      for (const ref of [refA, refB]) {\n-        if (!ref) {\n-          continue\n-        }\n-        if (typeof ref === 'object') {\n-          ref.current = current\n-        } else {\n-          // BUG!!!\n-          // This would work in 18, but in 19 it can return a cleanup which will get swallowed here\n-          ref(current)\n-        }\n-      }\n-    },\n-    [refA, refB]\n-  )\n-}"
        },
        {
            "sha": "2f989af319e5223d56767c4228f50fdf3c71a706",
            "filename": "test/production/next-link-legacybehavior-ref-merging/index.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 25,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Findex.test.ts?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,25 +0,0 @@\n-import { nextTestSetup } from 'e2e-utils'\n-\n-// NOTE: this test is checking for a bug in prefetching code,\n-// so we only enable it in production\n-\n-describe('Link with legacyBehavior - handles buggy userspace ref merging', () => {\n-  const { next } = nextTestSetup({\n-    files: __dirname,\n-  })\n-  it('does not crash when Link unmounts', async () => {\n-    const browser = await next.browser('/')\n-    expect(await browser.elementByCss('h1').text()).toEqual('Home')\n-    expect(await browser.hasElementByCssSelector('#test-link')).toBe(true)\n-\n-    // hide the link, unmounting it\n-    await browser.elementByCss('button').click()\n-    expect(await browser.hasElementByCssSelector('#test-link')).toBe(false)\n-\n-    // shouldn't cause a crash\n-    expect(await browser.elementByCss('h1').text()).toEqual('Home')\n-    expect(await browser.elementByCss('body').text()).not.toContain(\n-      'Application error: a client-side exception has occurred'\n-    )\n-  })\n-})"
        },
        {
            "sha": "e722bfa183143e9e675272df403870f9ba3cb49d",
            "filename": "test/production/next-link-legacybehavior-ref-merging/next.config.mjs",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/b4319bc8a4a76cf81fdad9bb7aec570866f48ffd/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fnext-link-legacybehavior-ref-merging%2Fnext.config.mjs?ref=b4319bc8a4a76cf81fdad9bb7aec570866f48ffd",
            "patch": "@@ -1,2 +0,0 @@\n-/** @type {import('next').NextConfig} */\n-export default {}"
        },
        {
            "sha": "f0091f93b3cfd5c6dab1321f6358d0e855b5edf9",
            "filename": "test/rspack-build-tests-manifest.json",
            "status": "modified",
            "additions": 1,
            "deletions": 42,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Frspack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Frspack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-build-tests-manifest.json?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -3197,15 +3197,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/e2e/app-dir/link-component-deprecations/link-component-deprecations.test.ts\": {\n-    \"passed\": [\n-      \"Link component deprecations logs deprecation warning for legacyBehavior prop\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/e2e/app-dir/loader-file-named-export-custom-loader-error/loader-file-named-export-custom-loader-error.test.ts\": {\n     \"passed\": [\n       \"Error test if the loader file export a named function in Build and Start build and start only should show the build error\"\n@@ -8571,16 +8562,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/e2e/new-link-behavior/typescript.test.ts\": {\n-    \"passed\": [\n-      \"New Link Behavior should apply ref on link\",\n-      \"New Link Behavior should render link with <a>\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/e2e/next-config-warnings/esm-externals-false/esm-externals-false.test.ts\": {\n     \"passed\": [\n       \"next-config-warnings - esm-externals-false should contain esmExternals feature usage in telemetry\",\n@@ -8760,9 +8741,7 @@\n   \"test/e2e/next-link-errors/next-link-errors.test.ts\": {\n     \"passed\": [\n       \"next-link errors on invalid href\",\n-      \"next-link invalid `prefetch` causes runtime error (dev-only)\",\n-      \"next-link multiple children\",\n-      \"next-link no children\"\n+      \"next-link invalid `prefetch` causes runtime error (dev-only)\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -16444,17 +16423,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/link-with-multiple-child/test/index.test.js\": {\n-    \"passed\": [\n-      \"multiple child with default legacyBehavior\",\n-      \"multiple child with forced legacyBehavior=false\",\n-      \"single child\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/link-without-router/test/index.test.js\": {\n     \"passed\": [\n       \"Link without a router production mode should not throw when rendered\"\n@@ -20232,15 +20200,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/production/next-link-legacybehavior-ref-merging/index.test.ts\": {\n-    \"passed\": [\n-      \"Link with legacyBehavior - handles buggy userspace ref merging does not crash when Link unmounts\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/production/optimize-server-react/optimize-server-react.test.ts\": {\n     \"passed\": [\n       \"optimize-server-react should optimize useEffect call on server side\","
        },
        {
            "sha": "b9b3782f6aacf4b4fae9012f4c1ef94e6a54299a",
            "filename": "test/rspack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 3,
            "deletions": 39,
            "changes": 42,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Frspack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Frspack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-dev-tests-manifest.json?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -1952,9 +1952,7 @@\n       \"Client Navigation with <a/> tag inside the <Link /> should navigate the page\",\n       \"Client Navigation with <a/> tag inside the <Link /> should not navigate if the <a/> tag has a target\",\n       \"Client Navigation with <a/> tag inside the <Link /> should not navigate if the click-event is modified\",\n-      \"Client Navigation with <a/> tag inside the <Link /> should not reload when link in svg is clicked\",\n-      \"Client Navigation with unexpected <a/> nested tag should not redirect if passHref prop is not defined in Link\",\n-      \"Client Navigation with unexpected <a/> nested tag should redirect if passHref prop is defined in Link\"\n+      \"Client Navigation with <a/> tag inside the <Link /> should not reload when link in svg is clicked\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -2057,15 +2055,13 @@\n   \"test/development/pages-dir/client-navigation/link.test.ts\": {\n     \"passed\": [\n       \"Client Navigation with <Link/> should call mouse handlers with an absolute url\",\n-      \"Client Navigation with <Link/> should error when calling onClick without event\",\n       \"Client Navigation with <Link/> should navigate an absolute local url\",\n       \"Client Navigation with <Link/> should navigate an absolute local url with as\",\n       \"Client Navigation with <Link/> should navigate an absolute url\",\n       \"Client Navigation with <Link/> should navigate back after reload\",\n       \"Client Navigation with <Link/> should navigate forwards after reload\",\n       \"Client Navigation with <Link/> should navigate the page\",\n-      \"Client Navigation with <Link/> should navigate via the client side\",\n-      \"Client Navigation with <Link/> should not throw error when one number type child is provided\"\n+      \"Client Navigation with <Link/> should navigate via the client side\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -5238,15 +5234,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/e2e/app-dir/link-component-deprecations/link-component-deprecations.test.ts\": {\n-    \"passed\": [\n-      \"Link component deprecations logs deprecation warning for legacyBehavior prop\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/e2e/app-dir/loader-file-named-export-custom-loader-error/loader-file-named-export-custom-loader-error.test.ts\": {\n     \"passed\": [\n       \"Error test if the loader file export a named function in Development development only should show the error when using `Image` component\",\n@@ -10303,16 +10290,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/e2e/new-link-behavior/typescript.test.ts\": {\n-    \"passed\": [\n-      \"New Link Behavior should apply ref on link\",\n-      \"New Link Behavior should render link with <a>\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/e2e/next-config-warnings/esm-externals-false/esm-externals-false.test.ts\": {\n     \"passed\": [\n       \"next-config-warnings - esm-externals-false should warn when using ESM externals: false\"\n@@ -10494,9 +10471,7 @@\n   \"test/e2e/next-link-errors/next-link-errors.test.ts\": {\n     \"passed\": [\n       \"next-link errors on invalid href\",\n-      \"next-link invalid `prefetch` causes runtime error (dev-only)\",\n-      \"next-link multiple children\",\n-      \"next-link no children\"\n+      \"next-link invalid `prefetch` causes runtime error (dev-only)\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -18142,17 +18117,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/link-with-multiple-child/test/index.test.js\": {\n-    \"passed\": [\n-      \"multiple child with default legacyBehavior\",\n-      \"multiple child with forced legacyBehavior=false\",\n-      \"single child\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/link-without-router/test/index.test.js\": {\n     \"passed\": [\n       \"Link without a router development mode should not throw when rendered\""
        },
        {
            "sha": "51bf5b128c1c75f025e3a42c33fa356c43bd3767",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 1,
            "deletions": 42,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -2933,15 +2933,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/e2e/app-dir/link-component-deprecations/link-component-deprecations.test.ts\": {\n-    \"passed\": [\n-      \"Link component deprecations logs deprecation warning for legacyBehavior prop\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/e2e/app-dir/loader-file-named-export-custom-loader-error/loader-file-named-export-custom-loader-error.test.ts\": {\n     \"passed\": [\n       \"Error test if the loader file export a named function in Build and Start build and start only should show the build error\"\n@@ -7904,16 +7895,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/e2e/new-link-behavior/typescript.test.ts\": {\n-    \"passed\": [\n-      \"New Link Behavior should apply ref on link\",\n-      \"New Link Behavior should render link with <a>\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/e2e/next-config-warnings/esm-externals-false/esm-externals-false.test.ts\": {\n     \"passed\": [],\n     \"failed\": [],\n@@ -8093,9 +8074,7 @@\n   \"test/e2e/next-link-errors/next-link-errors.test.ts\": {\n     \"passed\": [\n       \"next-link errors on invalid href\",\n-      \"next-link invalid `prefetch` causes runtime error (dev-only)\",\n-      \"next-link multiple children\",\n-      \"next-link no children\"\n+      \"next-link invalid `prefetch` causes runtime error (dev-only)\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -15659,17 +15638,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/link-with-multiple-child/test/index.test.js\": {\n-    \"passed\": [\n-      \"multiple child with default legacyBehavior\",\n-      \"multiple child with forced legacyBehavior=false\",\n-      \"single child\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/link-without-router/test/index.test.js\": {\n     \"passed\": [\n       \"Link without a router production mode should not throw when rendered\"\n@@ -19393,15 +19361,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/production/next-link-legacybehavior-ref-merging/index.test.ts\": {\n-    \"passed\": [\n-      \"Link with legacyBehavior - handles buggy userspace ref merging does not crash when Link unmounts\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/production/optimize-server-react/optimize-server-react.test.ts\": {\n     \"passed\": [],\n     \"failed\": [],"
        },
        {
            "sha": "45064b3b4f78ac55d25514d9bf51416f721035fb",
            "filename": "test/turbopack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 5,
            "deletions": 41,
            "changes": 46,
            "blob_url": "https://github.com/vercel/next.js/blob/4b66771895737170a06be242be1e5afc760142d4/test%2Fturbopack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/4b66771895737170a06be242be1e5afc760142d4/test%2Fturbopack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-dev-tests-manifest.json?ref=4b66771895737170a06be242be1e5afc760142d4",
            "patch": "@@ -178,12 +178,12 @@\n   },\n   \"packages/next-codemod/transforms/__tests__/new-link.test.js\": {\n     \"passed\": [\n-      \"new-link transforms correctly using \\\"new-link/add-legacy-behavior\\\" data\",\n       \"new-link transforms correctly using \\\"new-link/children-interpolation\\\" data\",\n-      \"new-link transforms correctly using \\\"new-link/excludes-links-with-legacybehavior-prop\\\" data\",\n+      \"new-link transforms correctly using \\\"new-link/custom-component-child\\\" data\",\n       \"new-link transforms correctly using \\\"new-link/handle-duplicate-props\\\" data\",\n       \"new-link transforms correctly using \\\"new-link/link-a\\\" data\",\n       \"new-link transforms correctly using \\\"new-link/link-string\\\" data\",\n+      \"new-link transforms correctly using \\\"new-link/links-with-legacybehavior-prop\\\" data\",\n       \"new-link transforms correctly using \\\"new-link/move-props\\\" data\",\n       \"new-link transforms correctly using \\\"new-link/spread-props\\\" data\",\n       \"new-link transforms correctly using \\\"new-link/styled-jsx\\\" data\"\n@@ -3680,9 +3680,7 @@\n       \"Client Navigation with <a/> tag inside the <Link /> should navigate the page\",\n       \"Client Navigation with <a/> tag inside the <Link /> should not navigate if the <a/> tag has a target\",\n       \"Client Navigation with <a/> tag inside the <Link /> should not navigate if the click-event is modified\",\n-      \"Client Navigation with <a/> tag inside the <Link /> should not reload when link in svg is clicked\",\n-      \"Client Navigation with unexpected <a/> nested tag should not redirect if passHref prop is not defined in Link\",\n-      \"Client Navigation with unexpected <a/> nested tag should redirect if passHref prop is defined in Link\"\n+      \"Client Navigation with <a/> tag inside the <Link /> should not reload when link in svg is clicked\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -3793,15 +3791,13 @@\n   \"test/development/pages-dir/client-navigation/link.test.ts\": {\n     \"passed\": [\n       \"Client Navigation with <Link/> should call mouse handlers with an absolute url\",\n-      \"Client Navigation with <Link/> should error when calling onClick without event\",\n       \"Client Navigation with <Link/> should navigate an absolute local url\",\n       \"Client Navigation with <Link/> should navigate an absolute local url with as\",\n       \"Client Navigation with <Link/> should navigate an absolute url\",\n       \"Client Navigation with <Link/> should navigate back after reload\",\n       \"Client Navigation with <Link/> should navigate forwards after reload\",\n       \"Client Navigation with <Link/> should navigate the page\",\n-      \"Client Navigation with <Link/> should navigate via the client side\",\n-      \"Client Navigation with <Link/> should not throw error when one number type child is provided\"\n+      \"Client Navigation with <Link/> should navigate via the client side\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -6740,15 +6736,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/e2e/app-dir/link-component-deprecations/link-component-deprecations.test.ts\": {\n-    \"passed\": [\n-      \"Link component deprecations logs deprecation warning for legacyBehavior prop\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/e2e/app-dir/loader-file-named-export-custom-loader-error/loader-file-named-export-custom-loader-error.test.ts\": {\n     \"passed\": [\n       \"Error test if the loader file export a named function in Development development only should show the error when using `Image` component\",\n@@ -11485,16 +11472,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/e2e/new-link-behavior/typescript.test.ts\": {\n-    \"passed\": [\n-      \"New Link Behavior should apply ref on link\",\n-      \"New Link Behavior should render link with <a>\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/e2e/next-config-warnings/esm-externals-false/esm-externals-false.test.ts\": {\n     \"passed\": [],\n     \"failed\": [],\n@@ -11676,9 +11653,7 @@\n   \"test/e2e/next-link-errors/next-link-errors.test.ts\": {\n     \"passed\": [\n       \"next-link errors on invalid href\",\n-      \"next-link invalid `prefetch` causes runtime error (dev-only)\",\n-      \"next-link multiple children\",\n-      \"next-link no children\"\n+      \"next-link invalid `prefetch` causes runtime error (dev-only)\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -19201,17 +19176,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/link-with-multiple-child/test/index.test.js\": {\n-    \"passed\": [\n-      \"multiple child with default legacyBehavior\",\n-      \"multiple child with forced legacyBehavior=false\",\n-      \"single child\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/link-without-router/test/index.test.js\": {\n     \"passed\": [\n       \"Link without a router development mode should not throw when rendered\""
        }
    ],
    "stats": {
        "total": 1946,
        "additions": 328,
        "deletions": 1618
    }
}