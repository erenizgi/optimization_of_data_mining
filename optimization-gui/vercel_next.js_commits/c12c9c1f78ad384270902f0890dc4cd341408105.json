{
    "author": "eps1lon",
    "message": "[test] Keep Playwright stackframes out of tests (#81240)",
    "sha": "c12c9c1f78ad384270902f0890dc4cd341408105",
    "files": [
        {
            "sha": "57ee990035f61811b1f4f742a5ba6456566372c1",
            "filename": "test/development/acceptance-app/ReactRefreshLogBox.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 21,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/c12c9c1f78ad384270902f0890dc4cd341408105/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c12c9c1f78ad384270902f0890dc4cd341408105/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts?ref=c12c9c1f78ad384270902f0890dc4cd341408105",
            "patch": "@@ -34,7 +34,7 @@ describe('ReactRefreshLogBox app', () => {\n         }\n       `\n     )\n-    await session.evaluate(() => document.querySelector('a').click())\n+    await browser.elementByCss('a').click()\n \n     if (isTurbopack) {\n       await expect(browser).toDisplayRedbox(\n@@ -517,7 +517,7 @@ describe('ReactRefreshLogBox app', () => {\n       `\n     )\n \n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     // TODO(veil): Why Owner Stack location different?\n     if (isTurbopack) {\n@@ -531,8 +531,6 @@ describe('ReactRefreshLogBox app', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (9:7)\",\n            \"Page index.js (9:30)\",\n@@ -550,8 +548,6 @@ describe('ReactRefreshLogBox app', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (9:7)\",\n            \"Page app/page.js (4:10)\",\n@@ -600,7 +596,7 @@ describe('ReactRefreshLogBox app', () => {\n       `\n     )\n \n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     // TODO(veil): Why Owner Stack location different?\n     if (isTurbopack) {\n@@ -614,8 +610,6 @@ describe('ReactRefreshLogBox app', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (9:7)\",\n            \"Page index.js (9:30)\",\n@@ -633,8 +627,6 @@ describe('ReactRefreshLogBox app', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (9:7)\",\n            \"Page app/page.js (4:10)\",\n@@ -682,7 +674,7 @@ describe('ReactRefreshLogBox app', () => {\n       `\n     )\n \n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     // TODO(veil): Why Owner Stack location different?\n     if (isTurbopack) {\n@@ -696,8 +688,6 @@ describe('ReactRefreshLogBox app', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (9:7)\",\n            \"Page index.js (9:30)\",\n@@ -715,8 +705,6 @@ describe('ReactRefreshLogBox app', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (9:7)\",\n            \"Page app/page.js (4:10)\",\n@@ -764,7 +752,7 @@ describe('ReactRefreshLogBox app', () => {\n       `\n     )\n \n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     // TODO(veil): Why Owner Stack location different?\n     if (isTurbopack) {\n@@ -778,8 +766,6 @@ describe('ReactRefreshLogBox app', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (9:7)\",\n            \"Page index.js (9:30)\",\n@@ -797,8 +783,6 @@ describe('ReactRefreshLogBox app', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (9:7)\",\n            \"Page app/page.js (4:10)\","
        },
        {
            "sha": "7e066e28122c432ea801ca0ba1d65f6175cf2f31",
            "filename": "test/development/acceptance-app/error-recovery.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/c12c9c1f78ad384270902f0890dc4cd341408105/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c12c9c1f78ad384270902f0890dc4cd341408105/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Ferror-recovery.test.ts?ref=c12c9c1f78ad384270902f0890dc4cd341408105",
            "patch": "@@ -35,7 +35,7 @@ describe('Error recovery app', () => {\n       `\n     )\n \n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('1')\n@@ -279,7 +279,7 @@ describe('Error recovery app', () => {\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('0')\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('1')\n@@ -296,8 +296,6 @@ describe('Error recovery app', () => {\n             |           ^\",\n          \"stack\": [\n            \"Index.useCallback[increment] index.js (7:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (12:7)\",\n            \"Page index.js (10:6)\",\n@@ -315,8 +313,6 @@ describe('Error recovery app', () => {\n             |           ^\",\n          \"stack\": [\n            \"Index.useCallback[increment] index.js (7:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n            \"button <anonymous>\",\n            \"Index index.js (12:7)\",\n            \"Page app/page.js (4:10)\",\n@@ -349,7 +345,7 @@ describe('Error recovery app', () => {\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Count: 1')\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Count: 2')"
        },
        {
            "sha": "591f1c5d7de046945c4c19af5ce09d84312e6002",
            "filename": "test/development/acceptance/ReactRefreshLogBox.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 30,
            "changes": 36,
            "blob_url": "https://github.com/vercel/next.js/blob/c12c9c1f78ad384270902f0890dc4cd341408105/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c12c9c1f78ad384270902f0890dc4cd341408105/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2FReactRefreshLogBox.test.ts?ref=c12c9c1f78ad384270902f0890dc4cd341408105",
            "patch": "@@ -41,7 +41,7 @@ describe('ReactRefreshLogBox', () => {\n         }\n       `\n     )\n-    await session.evaluate(() => document.querySelector('a').click())\n+    await browser.elementByCss('a').click()\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n@@ -54,8 +54,6 @@ describe('ReactRefreshLogBox', () => {\n             |                           ^\",\n          \"stack\": [\n            \"onClick index.js (8:27)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -70,8 +68,6 @@ describe('ReactRefreshLogBox', () => {\n             |                           ^\",\n          \"stack\": [\n            \"onClick index.js (8:27)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -654,7 +650,7 @@ describe('ReactRefreshLogBox', () => {\n     )\n \n     await session.assertNoRedbox()\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n@@ -667,8 +663,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -683,8 +677,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -709,7 +701,7 @@ describe('ReactRefreshLogBox', () => {\n     )\n \n     await session.assertNoRedbox()\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n@@ -722,8 +714,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -738,8 +728,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -764,7 +752,7 @@ describe('ReactRefreshLogBox', () => {\n     )\n \n     await session.assertNoRedbox()\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n@@ -777,8 +765,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -793,8 +779,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -819,7 +803,7 @@ describe('ReactRefreshLogBox', () => {\n     )\n \n     await session.assertNoRedbox()\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n@@ -832,8 +816,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -848,8 +830,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -874,7 +854,7 @@ describe('ReactRefreshLogBox', () => {\n     )\n \n     await session.assertNoRedbox()\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n \n     if (isReact18) {\n       await expect(browser).toDisplayRedbox(`\n@@ -887,8 +867,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)\n@@ -903,8 +881,6 @@ describe('ReactRefreshLogBox', () => {\n            |           ^\",\n          \"stack\": [\n            \"Index.useCallback[boom] index.js (5:11)\",\n-           \"UtilityScript.evaluate <anonymous>\",\n-           \"UtilityScript.<anonymous> <anonymous>\",\n          ],\n        }\n       `)"
        },
        {
            "sha": "ea82f49599d18b06468a754d42db7f4ebf05e809",
            "filename": "test/development/acceptance/error-recovery.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/c12c9c1f78ad384270902f0890dc4cd341408105/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/c12c9c1f78ad384270902f0890dc4cd341408105/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance%2Ferror-recovery.test.ts?ref=c12c9c1f78ad384270902f0890dc4cd341408105",
            "patch": "@@ -153,7 +153,7 @@ describe('pages/ error recovery', () => {\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('0')\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('1')\n@@ -168,8 +168,6 @@ describe('pages/ error recovery', () => {\n           |           ^\",\n        \"stack\": [\n          \"Index.useCallback[increment] index.js (7:11)\",\n-         \"UtilityScript.evaluate <anonymous>\",\n-         \"UtilityScript.<anonymous> <anonymous>\",\n        ],\n      }\n     `)\n@@ -196,7 +194,7 @@ describe('pages/ error recovery', () => {\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Count: 1')\n-    await session.evaluate(() => document.querySelector('button').click())\n+    await browser.elementByCss('button').click()\n     expect(\n       await session.evaluate(() => document.querySelector('p').textContent)\n     ).toBe('Count: 2')"
        }
    ],
    "stats": {
        "total": 78,
        "additions": 16,
        "deletions": 62
    }
}