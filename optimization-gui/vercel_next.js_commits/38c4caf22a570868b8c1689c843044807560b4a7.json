{
    "author": "lukesandberg",
    "message": "[turbopack] Don't execute inventory_submit in rust analyzer (#83447)\n\n### What?\nIn #83074 we changed how turbo task objects were registered to use the `inventory` crate.\nThis PR adds a new `inventory_submit!` macro that wraps the existing `inventory::submit` function with a `#[cfg(not(rust_analyzer))]` attribute to prevent Rust Analyzer choking on the generated code.\n\nSee example error\n\n![image.png](https://app.graphite.dev/user-attachments/assets/2fe87f23-8717-4615-a86d-94c1b19ae099.png)\n\nBecause the inventory code does not affect any API surfaces this is safe and if anything should improve rust-analyzer performance",
    "sha": "38c4caf22a570868b8c1689c843044807560b4a7",
    "files": [
        {
            "sha": "3cd225eb56e149031a74fa068773d530ae7668c4",
            "filename": "turbopack/crates/turbo-tasks-backend/fuzz/Cargo.toml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-backend%2Ffuzz%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-backend%2Ffuzz%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-backend%2Ffuzz%2FCargo.toml?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -32,3 +32,7 @@ path = \"afl_targets/graph.rs\"\n test = false\n doc = false\n bench = false\n+\n+\n+[lints]\n+workspace = true"
        },
        {
            "sha": "945057641bae123a7419b65c16d69865e439360f",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/Cargo.toml",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2FCargo.toml?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -14,3 +14,5 @@ turbo-tasks = { workspace = true }\n turbo-tasks-testing = { workspace = true }\n turbo-tasks-backend = { workspace = true }\n \n+[lints]\n+workspace = true"
        },
        {
            "sha": "ecf9c72d6db3dfcff9233ddf675ee4045fab8f16",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_attribute_invalid_args.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,6 @@\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n use turbo_tasks::{ResolvedVc, Vc};\n "
        },
        {
            "sha": "516b1da6bae650e4c0690a49da1a578838708237",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_attribute_invalid_args.stderr",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args.stderr?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,5 @@\n error: unexpected token, expected one of: \"fs\", \"network\", \"operation\", \"local\"\n- --> tests/function/fail_attribute_invalid_args.rs:9:25\n-  |\n-9 | #[turbo_tasks::function(invalid_argument)]\n-  |                         ^^^^^^^^^^^^^^^^\n+  --> tests/function/fail_attribute_invalid_args.rs:10:25\n+   |\n+10 | #[turbo_tasks::function(invalid_argument)]\n+   |                         ^^^^^^^^^^^^^^^^"
        },
        {
            "sha": "ad4e7020a07ca065b6fd800733c9d7bf6efc3009",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_attribute_invalid_args_inherent_impl.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args_inherent_impl.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args_inherent_impl.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args_inherent_impl.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,6 @@\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n use turbo_tasks::{ResolvedVc, Vc};\n "
        },
        {
            "sha": "e00ea44dedac4c1767916372d9622ebbfe0f4050",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_attribute_invalid_args_inherent_impl.stderr",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args_inherent_impl.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args_inherent_impl.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_attribute_invalid_args_inherent_impl.stderr?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,5 @@\n error: unexpected token, expected one of: \"fs\", \"network\", \"operation\", \"local\"\n-  --> tests/function/fail_attribute_invalid_args_inherent_impl.rs:14:29\n+  --> tests/function/fail_attribute_invalid_args_inherent_impl.rs:15:29\n    |\n-14 |     #[turbo_tasks::function(invalid_argument)]\n+15 |     #[turbo_tasks::function(invalid_argument)]\n    |                             ^^^^^^^^^^^^^^^^"
        },
        {
            "sha": "07e8f12a570f81ab1d164f6aedbfcc3cc0ec0540",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_method_self_ref.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_ref.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_ref.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_ref.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,6 +1,7 @@\n #![allow(dead_code)]\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n use turbo_tasks::Vc;\n "
        },
        {
            "sha": "cc80e16c2a3bd8d843dc0c2fd8f282348f14b883",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_method_self_ref.stderr",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_ref.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_ref.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_ref.stderr?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,5 @@\n error: methods taking `self` are not supported with `operation`\n-  --> tests/function/fail_operation_method_self_ref.rs:13:17\n+  --> tests/function/fail_operation_method_self_ref.rs:14:17\n    |\n-13 |     fn self_ref(&self) -> Vc<()> {\n+14 |     fn self_ref(&self) -> Vc<()> {\n    |                 ^^^^^"
        },
        {
            "sha": "58d712399107d9adcaa4f6f1c816eb581f81ffe5",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_method_self_type.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,6 +1,7 @@\n #![allow(dead_code)]\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n use turbo_tasks::{OperationVc, Vc};\n "
        },
        {
            "sha": "5d84321148cf442415e19c01b0ee4aad7266aebf",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_method_self_type.stderr",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,22 +1,22 @@\n error: methods taking `self` are not supported with `operation`\n-  --> tests/function/fail_operation_method_self_type.rs:13:28\n+  --> tests/function/fail_operation_method_self_type.rs:14:28\n    |\n-13 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n+14 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n    |                            ^^^^^^^^^^^^^^^^^^^^^^^\n \n error[E0307]: invalid `self` parameter type: `OperationVc<Foobar>`\n-  --> tests/function/fail_operation_method_self_type.rs:13:34\n+  --> tests/function/fail_operation_method_self_type.rs:14:34\n    |\n-13 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n+14 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n    |                                  ^^^^^^^^^^^^^^^^^\n    |\n    = note: type of `self` must be `Self` or some type implementing `Receiver`\n    = help: consider changing to `self`, `&self`, `&mut self`, or a type implementing `Receiver` such as `self: Box<Self>`, `self: Rc<Self>`, or `self: Arc<Self>`\n \n error[E0277]: the trait bound `fn(OperationVc<Foobar>) -> Vc<()> {Foobar::arbitrary_self_type_turbo_tasks_function_inline}: turbo_tasks::task::function::IntoTaskFnWithThis<_, _, _>` is not satisfied\n-  --> tests/function/fail_operation_method_self_type.rs:10:1\n+  --> tests/function/fail_operation_method_self_type.rs:11:1\n    |\n-10 | #[turbo_tasks::value_impl]\n+11 | #[turbo_tasks::value_impl]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^ unsatisfied trait bound\n    |\n    = help: the trait `turbo_tasks::task::function::TaskFnInputFunctionWithThis<_, _, _>` is not implemented for fn item `fn(OperationVc<Foobar>) -> Vc<()> {Foobar::arbitrary_self_type_turbo_tasks_function_inline}`"
        },
        {
            "sha": "94bd87acd98b2641f3be3490895befa2051dee49",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_method_self_type_base_vc.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type_base_vc.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type_base_vc.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type_base_vc.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,6 +1,7 @@\n #![allow(dead_code)]\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n use turbo_tasks::Vc;\n "
        },
        {
            "sha": "ba057a256709bc4139a467fd10396d316d37461f",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_method_self_type_base_vc.stderr",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type_base_vc.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type_base_vc.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type_base_vc.stderr?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,5 @@\n error: methods taking `self` are not supported with `operation`\n-  --> tests/function/fail_operation_method_self_type_base_vc.rs:13:36\n+  --> tests/function/fail_operation_method_self_type_base_vc.rs:14:36\n    |\n-13 |     fn arbitrary_self_type_base_vc(self: Vc<Self>) -> Vc<()> {\n+14 |     fn arbitrary_self_type_base_vc(self: Vc<Self>) -> Vc<()> {\n    |                                    ^^^^^^^^^^^^^^"
        },
        {
            "sha": "ad9e81560c461ab514019b976bb7ee9536083f48",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_vc_arg.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_vc_arg.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_vc_arg.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_vc_arg.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,4 +1,5 @@\n #![allow(dead_code)]\n+#![allow(unexpected_cfgs)]\n \n use anyhow::Result;\n use turbo_tasks::{ResolvedVc, Vc};"
        },
        {
            "sha": "5219ade46bebe22b40ea8a1e280bde63e8309938",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_vc_arg.stderr",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_vc_arg.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_vc_arg.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_vc_arg.stderr?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,7 +1,7 @@\n error[E0277]: the trait bound `Vc<i32>: NonLocalValue` is not satisfied\n- --> tests/function/fail_operation_vc_arg.rs:7:26\n+ --> tests/function/fail_operation_vc_arg.rs:8:26\n   |\n-7 | async fn multiply(value: Vc<i32>, coefficient: ResolvedVc<i32>) -> Result<Vc<i32>> {\n+8 | async fn multiply(value: Vc<i32>, coefficient: ResolvedVc<i32>) -> Result<Vc<i32>> {\n   |                          ^^^^^^^ the trait `NonLocalValue` is not implemented for `Vc<i32>`\n   |\n   = help: the following other types implement trait `NonLocalValue`:"
        },
        {
            "sha": "4d8fe318737d31596ac3636802bba3e519b59376",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/pass_non_local_vc_input.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Fpass_non_local_vc_input.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Fpass_non_local_vc_input.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Fpass_non_local_vc_input.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,6 +1,7 @@\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n #![allow(dead_code)]\n+#![allow(unexpected_cfgs)]\n \n use anyhow::Result;\n use turbo_tasks::{ResolvedVc, Vc};"
        },
        {
            "sha": "99d022c84e90864c02a3ca5e4d0ec75187495584",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/pass_operation_accepts_resolved.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Fpass_operation_accepts_resolved.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Fpass_operation_accepts_resolved.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Fpass_operation_accepts_resolved.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,3 +1,4 @@\n+#![allow(unexpected_cfgs)]\n use anyhow::Result;\n use turbo_tasks::{OperationVc, ResolvedVc, Vc};\n "
        },
        {
            "sha": "f35148e7ba2a61fd819164af8d23142024577c29",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/value/fail_non_local.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Ffail_non_local.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Ffail_non_local.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Ffail_non_local.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,6 @@\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n use turbo_tasks::Vc;\n "
        },
        {
            "sha": "2e159cd8c8bab8486e7f537dd8cb3e276c0cd882",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/value/fail_non_local.stderr",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Ffail_non_local.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Ffail_non_local.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Ffail_non_local.stderr?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,7 +1,7 @@\n error[E0277]: the trait bound `Vc<i32>: NonLocalValue` is not satisfied\n- --> tests/value/fail_non_local.rs:8:12\n+ --> tests/value/fail_non_local.rs:9:12\n   |\n-8 |     value: Vc<i32>,\n+9 |     value: Vc<i32>,\n   |            ^^^^^^^ the trait `NonLocalValue` is not implemented for `Vc<i32>`\n   |\n   = help: the following other types implement trait `NonLocalValue`:\n@@ -15,8 +15,8 @@ error[E0277]: the trait bound `Vc<i32>: NonLocalValue` is not satisfied\n             (E, D, C, B, A, Z, Y, X, W, V, U, T)\n           and $N others\n note: required by a bound in `DeriveNonLocalValueAssertion::assert_impl_NonLocalValue`\n- --> tests/value/fail_non_local.rs:6:1\n+ --> tests/value/fail_non_local.rs:7:1\n   |\n-6 | #[turbo_tasks::value]\n+7 | #[turbo_tasks::value]\n   | ^^^^^^^^^^^^^^^^^^^^^ required by this bound in `DeriveNonLocalValueAssertion::assert_impl_NonLocalValue`\n   = note: this error originates in the derive macro `turbo_tasks::NonLocalValue` (in Nightly builds, run with -Z macro-backtrace for more info)"
        },
        {
            "sha": "6a3a7d54528814abfc75b160036d717420799b20",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/value/pass_non_local.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Fpass_non_local.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Fpass_non_local.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue%2Fpass_non_local.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,6 @@\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n #[turbo_tasks::value]\n struct MyValue {"
        },
        {
            "sha": "ad6f2910d37321e2471684ebcc4fd0e8d310b70f",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/value_trait/fail_missing_function_annotation.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Ffail_missing_function_annotation.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Ffail_missing_function_annotation.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Ffail_missing_function_annotation.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,6 @@\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n use turbo_tasks::Vc;\n "
        },
        {
            "sha": "6a0e4536488a1f6bb8efde0a63b7ee9650f9129b",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/value_trait/fail_missing_function_annotation.stderr",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Ffail_missing_function_annotation.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Ffail_missing_function_annotation.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Ffail_missing_function_annotation.stderr?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,5 @@\n error: trait items cannot be operations\n-  --> tests/value_trait/fail_missing_function_annotation.rs:13:29\n+  --> tests/value_trait/fail_missing_function_annotation.rs:14:29\n    |\n-13 |     #[turbo_tasks::function(operation)]\n+14 |     #[turbo_tasks::function(operation)]\n    |                             ^^^^^^^^^"
        },
        {
            "sha": "01fe6b89bbbfd3ccac7311d909d4b0ed9057d666",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/value_trait/pass_non_local.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Fpass_non_local.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Fpass_non_local.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Fpass_non_local.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,6 @@\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n #[turbo_tasks::value_trait]\n trait MyTrait {}"
        },
        {
            "sha": "f71a6fb6ee0efad7c50eb1aae79c1c29bc5a4389",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/value_trait/pass_trait_items.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Fpass_trait_items.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Fpass_trait_items.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Fvalue_trait%2Fpass_trait_items.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -1,5 +1,6 @@\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n+#![allow(unexpected_cfgs)]\n \n use turbo_tasks::Vc;\n "
        },
        {
            "sha": "e31dce719a6b86436136aa109e1214655ae79470",
            "filename": "turbopack/crates/turbo-tasks/src/macro_helpers.rs",
            "status": "modified",
            "additions": 16,
            "deletions": 1,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmacro_helpers.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/38c4caf22a570868b8c1689c843044807560b4a7/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmacro_helpers.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fmacro_helpers.rs?ref=38c4caf22a570868b8c1689c843044807560b4a7",
            "patch": "@@ -12,6 +12,7 @@ use crate::{\n     ValueTypeId, Vc, debug::ValueDebugFormatString, task::TaskOutput,\n };\n pub use crate::{\n+    inventory_submit,\n     magic_any::MagicAny,\n     manager::{find_cell_by_type, notify_scheduled_tasks, spawn_detached_for_testing},\n     native_function::{\n@@ -183,4 +184,18 @@ pub fn register_trait_methods(value: &mut ValueType) {\n     }\n }\n \n-pub use inventory::submit as inventory_submit;\n+/// Submit an item to the inventory.\n+///\n+/// This macro is a wrapper around `inventory::submit` that adds a `#[not(cfg(rust_analyzer))]`\n+/// attribute to the item. This is to avoid warnings about unused items when using Rust Analyzer.\n+#[macro_export]\n+macro_rules! inventory_submit {\n+    ($($item:tt)*) => {\n+        #[cfg(not(rust_analyzer))]\n+        $crate::macro_helpers::inventory_submit_inner! { $($item)* }\n+    }\n+}\n+\n+/// Exported so the above macro can reference it.\n+#[doc(hidden)]\n+pub use inventory::submit as inventory_submit_inner;"
        }
    ],
    "stats": {
        "total": 84,
        "additions": 59,
        "deletions": 25
    }
}