{
    "author": "ijjk",
    "message": "Remove unused nccd node-fetch (#76241)\n\nThis vendored packaged is no longer needed as we removed the last usage\nof it.\n\nx-ref: https://github.com/vercel/next.js/pull/75741",
    "sha": "d1c9aec4f10d2c08ceea519d7882cffbefb272d1",
    "files": [
        {
            "sha": "1d03673b08cc64b265210863bb8313876734083f",
            "filename": "packages/next/src/compiled/@ampproject/toolbox-optimizer/index.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d1c9aec4f10d2c08ceea519d7882cffbefb272d1/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/d1c9aec4f10d2c08ceea519d7882cffbefb272d1/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js?ref=d1c9aec4f10d2c08ceea519d7882cffbefb272d1"
        },
        {
            "sha": "c95ebda90df094fa0c002f60af4d168dd3c5a4c0",
            "filename": "packages/next/src/compiled/node-fetch/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/47f350067ddd7309d7741a23df46d3bba77fe0b2/packages%2Fnext%2Fsrc%2Fcompiled%2Fnode-fetch%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/47f350067ddd7309d7741a23df46d3bba77fe0b2/packages%2Fnext%2Fsrc%2Fcompiled%2Fnode-fetch%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Fnode-fetch%2Findex.js?ref=47f350067ddd7309d7741a23df46d3bba77fe0b2"
        },
        {
            "sha": "ac7feb0ef778449d5138ba2a6ac7b933d0b967ee",
            "filename": "packages/next/src/compiled/node-fetch/package.json",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/47f350067ddd7309d7741a23df46d3bba77fe0b2/packages%2Fnext%2Fsrc%2Fcompiled%2Fnode-fetch%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/47f350067ddd7309d7741a23df46d3bba77fe0b2/packages%2Fnext%2Fsrc%2Fcompiled%2Fnode-fetch%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Fnode-fetch%2Fpackage.json?ref=47f350067ddd7309d7741a23df46d3bba77fe0b2",
            "patch": "@@ -1 +0,0 @@\n-{\"name\":\"node-fetch\",\"main\":\"index.js\",\"author\":\"David Frank\",\"license\":\"MIT\"}"
        },
        {
            "sha": "83d804615ed3f297b1505364a022eff6a4ca687e",
            "filename": "packages/next/taskfile.js",
            "status": "modified",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/d1c9aec4f10d2c08ceea519d7882cffbefb272d1/packages%2Fnext%2Ftaskfile.js",
            "raw_url": "https://github.com/vercel/next.js/raw/d1c9aec4f10d2c08ceea519d7882cffbefb272d1/packages%2Fnext%2Ftaskfile.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Ftaskfile.js?ref=d1c9aec4f10d2c08ceea519d7882cffbefb272d1",
            "patch": "@@ -60,7 +60,6 @@ const externals = {\n   'caniuse-lite': 'caniuse-lite',\n   '/caniuse-lite(/.*)/': 'caniuse-lite$1',\n \n-  'node-fetch': 'node-fetch',\n   postcss: 'postcss',\n   // Ensure latest version is used\n   'postcss-safe-parser': 'next/dist/compiled/postcss-safe-parser',\n@@ -241,15 +240,6 @@ export async function copy_vercel_og(task, opts) {\n   )\n }\n \n-// eslint-disable-next-line camelcase\n-externals['node-fetch'] = 'next/dist/compiled/node-fetch'\n-export async function ncc_node_fetch(task, opts) {\n-  await task\n-    .source(relative(__dirname, require.resolve('node-fetch')))\n-    .ncc({ packageName: 'node-fetch', externals })\n-    .target('src/compiled/node-fetch')\n-}\n-\n externals['anser'] = 'next/dist/compiled/anser'\n externals['next/dist/compiled/anser'] = 'next/dist/compiled/anser'\n export async function ncc_node_anser(task, opts) {\n@@ -2310,7 +2300,6 @@ export async function ncc(task, opts) {\n         'ncc_image_size',\n         'ncc_hapi_accept',\n         'ncc_commander',\n-        'ncc_node_fetch',\n         'ncc_node_anser',\n         'ncc_node_stacktrace_parser',\n         'ncc_node_data_uri_to_buffer',"
        },
        {
            "sha": "00d1732ad33b367fd950bc7044247930bedccf86",
            "filename": "test/e2e/next-font/index.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/d1c9aec4f10d2c08ceea519d7882cffbefb272d1/test%2Fe2e%2Fnext-font%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d1c9aec4f10d2c08ceea519d7882cffbefb272d1/test%2Fe2e%2Fnext-font%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fnext-font%2Findex.test.ts?ref=d1c9aec4f10d2c08ceea519d7882cffbefb272d1",
            "patch": "@@ -72,6 +72,10 @@ describe('next/font', () => {\n     })\n   }\n \n+  it('should not have deprecation warning', async () => {\n+    expect(next.cliOutput.toLowerCase()).not.toContain('deprecation')\n+  })\n+\n   describe('import values', () => {\n     test('page with font', async () => {\n       const html = await renderViaHTTP(next.url, '/with-fonts')"
        },
        {
            "sha": "8c3e0bb5a99aa6deedc044bff624b8e2da0a1956",
            "filename": "test/integration/amphtml/test/index.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/d1c9aec4f10d2c08ceea519d7882cffbefb272d1/test%2Fintegration%2Famphtml%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/d1c9aec4f10d2c08ceea519d7882cffbefb272d1/test%2Fintegration%2Famphtml%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Ftest%2Findex.test.js?ref=d1c9aec4f10d2c08ceea519d7882cffbefb272d1",
            "patch": "@@ -60,6 +60,10 @@ describe('AMP Usage', () => {\n       return killApp(app)\n     })\n \n+    it('should not have deprecation warning', async () => {\n+      expect(output.toLowerCase()).not.toContain('deprecation')\n+    })\n+\n     it('should have amp optimizer in trace', async () => {\n       const trace = JSON.parse(\n         readFileSync(join(appDir, '.next/next-server.js.nft.json'), 'utf8')"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 9,
        "deletions": 14
    }
}