{
    "author": "lukesandberg",
    "message": "Add tests for normalize_path (#78840)\n\nJust some simple unit tests\n\nI developed these while pursuing a performance improvement that ultimately failed, but i figured i should keep the tests.",
    "sha": "8402b7768aa818daa9fdba179220218fc39d3ea1",
    "files": [
        {
            "sha": "59906566fb089f21d8731d9a41076ff262623e1a",
            "filename": "turbopack/crates/turbo-tasks-fs/src/util.rs",
            "status": "modified",
            "additions": 31,
            "deletions": 0,
            "changes": 31,
            "blob_url": "https://github.com/vercel/next.js/blob/8402b7768aa818daa9fdba179220218fc39d3ea1/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8402b7768aa818daa9fdba179220218fc39d3ea1/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Futil.rs?ref=8402b7768aa818daa9fdba179220218fc39d3ea1",
            "patch": "@@ -194,3 +194,34 @@ pub async fn uri_from_file(root: Vc<FileSystemPath>, path: Option<&str>) -> Resu\n \n     Ok(uri)\n }\n+\n+#[cfg(test)]\n+mod tests {\n+\n+    use rstest::*;\n+\n+    use crate::util::normalize_path;\n+\n+    #[rstest]\n+    #[case(\"file.js\")]\n+    #[case(\"a/b/c/d/e/file.js\")]\n+    fn test_normalize_path_no_op(#[case] path: &str) {\n+        assert_eq!(path, normalize_path(path).unwrap());\n+    }\n+\n+    #[rstest]\n+    #[case(\"/file.js\", \"file.js\")]\n+    #[case(\"./file.js\", \"file.js\")]\n+    #[case(\"././file.js\", \"file.js\")]\n+    #[case(\"a/../c/../file.js\", \"file.js\")]\n+    fn test_normalize_path(#[case] path: &str, #[case] normalized: &str) {\n+        assert_eq!(normalized, normalize_path(path).unwrap());\n+    }\n+\n+    #[rstest]\n+    #[case(\"../file.js\")]\n+    #[case(\"a/../../file.js\")]\n+    fn test_normalize_path_invalid(#[case] path: &str) {\n+        assert_eq!(None, normalize_path(path));\n+    }\n+}"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 31,
        "deletions": 0
    }
}