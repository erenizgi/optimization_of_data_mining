{
    "author": "bgw",
    "message": "Turbopack: Remove unused `ignored_subpaths` feature from DiskWatcher (#82210)\n\nThis feature is unused, but I think there are also significant problems with it, which would require work for it to be used:\n\n- The `Vec` isn't very scalable and that could be a footgun. It should be an `auto_hash_map::AutoSet` or a `FxHashSet`.\n- It's unclear that _just_ ignoring watch events is a good idea. I understand that we don't want to allow source code to depend on outputs, but it seems like it would be better to prevent reads in the first place in the `DiskFileSystem` (e.g. pretend the file doesn't exist and emit an issue). This would not require support from the watcher, as we just wouldn't create the invalidator at all.\n- There's no test coverage of this feature.",
    "sha": "7351d9245055bc8babca01ae14e21831b78d3604",
    "files": [
        {
            "sha": "bd9e2dbc7d18ca6c6f8b4884d7cf35e92efc4183",
            "filename": "crates/next-api/src/project.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/crates%2Fnext-api%2Fsrc%2Fproject.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/crates%2Fnext-api%2Fsrc%2Fproject.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fproject.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -675,11 +675,7 @@ impl Project {\n \n     #[turbo_tasks::function]\n     pub fn project_fs(&self) -> Vc<DiskFileSystem> {\n-        DiskFileSystem::new(\n-            PROJECT_FILESYSTEM_NAME.into(),\n-            self.root_path.clone(),\n-            vec![],\n-        )\n+        DiskFileSystem::new(PROJECT_FILESYSTEM_NAME.into(), self.root_path.clone())\n     }\n \n     #[turbo_tasks::function]\n@@ -690,7 +686,7 @@ impl Project {\n \n     #[turbo_tasks::function]\n     pub fn output_fs(&self) -> Vc<DiskFileSystem> {\n-        DiskFileSystem::new(rcstr!(\"output\"), self.root_path.clone(), vec![])\n+        DiskFileSystem::new(rcstr!(\"output\"), self.root_path.clone())\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "c4f3c02104b2941e99f67bb1c85f271be39b91e9",
            "filename": "crates/next-core/src/next_font/google/mod.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -709,7 +709,6 @@ async fn get_mock_stylesheet(\n             .to_str()\n             .context(\"Must exist\")?\n             .into(),\n-        vec![],\n     ));\n \n     let ExecutionContext {"
        },
        {
            "sha": "a325eefa0f445a402db676fbdee42b13f01715a2",
            "filename": "turbopack/crates/turbo-tasks-fetch/tests/fetch.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Ftests%2Ffetch.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Ftests%2Ffetch.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Ftests%2Ffetch.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -127,7 +127,7 @@ async fn invalidation_does_not_invalidate() {\n }\n \n fn get_issue_context() -> Vc<FileSystemPath> {\n-    DiskFileSystem::new(rcstr!(\"root\"), rcstr!(\"/\"), vec![]).root()\n+    DiskFileSystem::new(rcstr!(\"root\"), rcstr!(\"/\")).root()\n }\n \n #[tokio::test]"
        },
        {
            "sha": "65674384ebaa1d1542dd44ad83209d54aff9d98a",
            "filename": "turbopack/crates/turbo-tasks-fs/examples/hash_directory.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_directory.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -35,7 +35,7 @@ async fn main() -> Result<()> {\n     let task = tt.spawn_root_task(|| {\n         Box::pin(async {\n             let root = current_dir().unwrap().to_str().unwrap().into();\n-            let disk_fs = DiskFileSystem::new(\"project\".into(), root, vec![]);\n+            let disk_fs = DiskFileSystem::new(\"project\".into(), root);\n             disk_fs.await?.start_watching(None).await?;\n \n             // Smart Pointer cast"
        },
        {
            "sha": "0650d76bf7b191a0b19d3b66d38dfd2c1ba479b3",
            "filename": "turbopack/crates/turbo-tasks-fs/examples/hash_glob.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_glob.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_glob.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fexamples%2Fhash_glob.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -32,7 +32,7 @@ async fn main() -> Result<()> {\n     let task = tt.spawn_root_task(|| {\n         Box::pin(async {\n             let root = current_dir().unwrap().to_str().unwrap().into();\n-            let disk_fs = DiskFileSystem::new(\"project\".into(), root, vec![]);\n+            let disk_fs = DiskFileSystem::new(\"project\".into(), root);\n             disk_fs.await?.start_watching(None).await?;\n \n             // Smart Pointer cast"
        },
        {
            "sha": "726e6a3bec5d0c5dbdb5486d6da8ded37905d3bf",
            "filename": "turbopack/crates/turbo-tasks-fs/src/embed/dir.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fembed%2Fdir.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fembed%2Fdir.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fembed%2Fdir.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -12,7 +12,7 @@ pub async fn directory_from_relative_path(\n     name: RcStr,\n     path: RcStr,\n ) -> Result<Vc<Box<dyn FileSystem>>> {\n-    let disk_fs = DiskFileSystem::new(name, path, vec![]);\n+    let disk_fs = DiskFileSystem::new(name, path);\n     disk_fs.await?.start_watching(None).await?;\n \n     Ok(Vc::upcast(disk_fs))"
        },
        {
            "sha": "2c48c00933bbbd8e8d99e91526f8aab8cd17baf8",
            "filename": "turbopack/crates/turbo-tasks-fs/src/embed/file.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fembed%2Ffile.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fembed%2Ffile.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fembed%2Ffile.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -22,7 +22,6 @@ pub async fn content_from_relative_path(\n     let disk_fs = DiskFileSystem::new(\n         root_path.to_string_lossy().into(),\n         root_path.to_string_lossy().into(),\n-        vec![],\n     );\n     disk_fs.await?.start_watching(None).await?;\n "
        },
        {
            "sha": "eedad3a2c0f1670cba5f46f35823447227ab0438",
            "filename": "turbopack/crates/turbo-tasks-fs/src/lib.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 7,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -513,11 +513,8 @@ impl DiskFileSystem {\n     /// * `name` - Name of the filesystem.\n     /// * `root` - Path to the given filesystem's root. Should be\n     ///   [canonicalized][std::fs::canonicalize].\n-    /// * `ignored_subpaths` - A list of subpaths that should not trigger invalidation. This should\n-    ///   be a full path, since it is possible that root & project dir is different and requires to\n-    ///   ignore specific subpaths from each.\n     #[turbo_tasks::function]\n-    pub fn new(name: RcStr, root: RcStr, ignored_subpaths: Vec<RcStr>) -> Result<Vc<Self>> {\n+    pub fn new(name: RcStr, root: RcStr) -> Result<Vc<Self>> {\n         mark_stateful();\n \n         let instance = DiskFileSystem {\n@@ -529,9 +526,7 @@ impl DiskFileSystem {\n                 invalidator_map: InvalidatorMap::new(),\n                 dir_invalidator_map: InvalidatorMap::new(),\n                 semaphore: create_semaphore(),\n-                watcher: DiskWatcher::new(\n-                    ignored_subpaths.into_iter().map(PathBuf::from).collect(),\n-                ),\n+                watcher: DiskWatcher::new(),\n             }),\n         };\n "
        },
        {
            "sha": "cc818cc0d4b7d46e5c72a92fc3400d458018316a",
            "filename": "turbopack/crates/turbo-tasks-fs/src/read_glob.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 25,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fread_glob.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fread_glob.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fread_glob.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -224,11 +224,7 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\n-                \"temp\".into(),\n-                path,\n-                Vec::new(),\n-            ));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n             let read_dir = fs\n                 .root()\n                 .await?\n@@ -298,11 +294,7 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\n-                \"temp\".into(),\n-                path,\n-                Vec::new(),\n-            ));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n             let read_dir = fs\n                 .root()\n                 .await?\n@@ -383,11 +375,7 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\n-                \"temp\".into(),\n-                path,\n-                Vec::new(),\n-            ));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n             let dir = fs.root().await?.join(\"dir\")?;\n             let read_dir = track_star_star_glob(dir.clone())\n                 .read_strongly_consistent()\n@@ -457,11 +445,7 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\n-                \"temp\".into(),\n-                path,\n-                Vec::new(),\n-            ));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n             let err = fs\n                 .root()\n                 .await?\n@@ -517,11 +501,7 @@ pub mod tests {\n         ));\n         let path: RcStr = scratch.path().to_str().unwrap().into();\n         tt.run_once(async {\n-            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\n-                \"temp\".into(),\n-                path,\n-                Vec::new(),\n-            ));\n+            let fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\"temp\".into(), path));\n             let err = fs\n                 .root()\n                 .await?"
        },
        {
            "sha": "bc429eb6cb16ce01e9b7ec2034f2148347ecb39b",
            "filename": "turbopack/crates/turbo-tasks-fs/src/watcher.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 24,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fwatcher.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fwatcher.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Fwatcher.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -78,12 +78,6 @@ impl DiskWatcherInternal {\n \n #[derive(Serialize, Deserialize)]\n pub(crate) struct DiskWatcher {\n-    /// Array of paths that should not notify invalidations.\n-    /// `notify` currently doesn't support unwatching subpaths from the root,\n-    /// so underlying we still watches filesystem event but only skips to\n-    /// invalidate.\n-    ignored_subpaths: Vec<PathBuf>,\n-\n     #[serde(skip)]\n     internal: Mutex<Option<DiskWatcherInternal>>,\n \n@@ -94,7 +88,6 @@ pub(crate) struct DiskWatcher {\n impl Default for DiskWatcher {\n     fn default() -> Self {\n         Self {\n-            ignored_subpaths: Vec::new(),\n             internal: Mutex::new(None),\n             non_recursive_state: NonRecursiveDiskWatcherState::try_new(),\n         }\n@@ -220,11 +213,8 @@ impl NonRecursiveDiskWatcherState {\n }\n \n impl DiskWatcher {\n-    pub(crate) fn new(ignored_subpaths: Vec<PathBuf>) -> Self {\n-        Self {\n-            ignored_subpaths,\n-            ..Default::default()\n-        }\n+    pub(crate) fn new() -> Self {\n+        Default::default()\n     }\n \n     /// Create a watcher and start watching by creating `debounced` watcher\n@@ -407,18 +397,7 @@ impl DiskWatcher {\n                             break;\n                         }\n \n-                        let paths: Vec<PathBuf> = event\n-                            .paths\n-                            .iter()\n-                            .filter(|p| {\n-                                !self\n-                                    .ignored_subpaths\n-                                    .iter()\n-                                    .any(|ignored| p.starts_with(ignored))\n-                            })\n-                            .cloned()\n-                            .collect();\n-\n+                        let paths: Vec<PathBuf> = event.paths;\n                         if paths.is_empty() {\n                             // this event isn't useful, but keep trying to process the batch\n                             event_result = rx.try_recv();"
        },
        {
            "sha": "6c538bd482f83f9aa52120dd284abdda944ec7bd",
            "filename": "turbopack/crates/turbo-tasks-fuzz/src/main.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fuzz%2Fsrc%2Fmain.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbo-tasks-fuzz%2Fsrc%2Fmain.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fuzz%2Fsrc%2Fmain.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -159,7 +159,7 @@ async fn fuzz_fs_watcher(args: FsWatcher) -> anyhow::Result<()> {\n \n #[turbo_tasks::function(operation)]\n fn disk_file_system_operation(fs_root: RcStr) -> Vc<DiskFileSystem> {\n-    DiskFileSystem::new(rcstr!(\"project\"), fs_root, Vec::new())\n+    DiskFileSystem::new(rcstr!(\"project\"), fs_root)\n }\n \n #[turbo_tasks::function(operation)]"
        },
        {
            "sha": "bbe23b026777383f4030f66cc619064855fd8076",
            "filename": "turbopack/crates/turbopack-cli/src/util.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Futil.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -61,7 +61,7 @@ pub fn normalize_entries(entries: &Option<Vec<String>>) -> Vec<RcStr> {\n \n #[turbo_tasks::function]\n pub async fn project_fs(project_dir: RcStr, watch: bool) -> Result<Vc<Box<dyn FileSystem>>> {\n-    let disk_fs = DiskFileSystem::new(\"project\".into(), project_dir, vec![]);\n+    let disk_fs = DiskFileSystem::new(\"project\".into(), project_dir);\n     if watch {\n         disk_fs.await?.start_watching(None).await?;\n     }\n@@ -70,6 +70,6 @@ pub async fn project_fs(project_dir: RcStr, watch: bool) -> Result<Vc<Box<dyn Fi\n \n #[turbo_tasks::function]\n pub fn output_fs(project_dir: RcStr) -> Result<Vc<Box<dyn FileSystem>>> {\n-    let disk_fs = DiskFileSystem::new(\"output\".into(), project_dir, vec![]);\n+    let disk_fs = DiskFileSystem::new(\"output\".into(), project_dir);\n     Ok(Vc::upcast(disk_fs))\n }"
        },
        {
            "sha": "89ecf4d8c0d646743c481357283b244ae9f7a4be",
            "filename": "turbopack/crates/turbopack-tests/tests/execution.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -281,8 +281,8 @@ async fn prepare_test(resource: RcStr) -> Result<Vc<PreparedTest>> {\n         resource_path.to_str().unwrap()\n     );\n \n-    let root_fs = DiskFileSystem::new(rcstr!(\"workspace\"), REPO_ROOT.clone(), vec![]);\n-    let project_fs = DiskFileSystem::new(rcstr!(\"project\"), REPO_ROOT.clone(), vec![]);\n+    let root_fs = DiskFileSystem::new(rcstr!(\"workspace\"), REPO_ROOT.clone());\n+    let project_fs = DiskFileSystem::new(rcstr!(\"project\"), REPO_ROOT.clone());\n     let project_root = project_fs.root().owned().await?;\n \n     let relative_path = resource_path.strip_prefix(&*REPO_ROOT).context(format!("
        },
        {
            "sha": "ca2b7a478a53087aeb2da0d0619c7bba5747dc07",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -260,7 +260,7 @@ async fn run_test_operation(resource: RcStr) -> Result<Vc<FileSystemPath>> {\n         Err(_) => SnapshotOptions::default(),\n         Ok(options_str) => parse_json_with_source_context(&options_str).unwrap(),\n     };\n-    let project_fs = DiskFileSystem::new(rcstr!(\"project\"), REPO_ROOT.clone(), vec![]);\n+    let project_fs = DiskFileSystem::new(rcstr!(\"project\"), REPO_ROOT.clone());\n     let project_root = project_fs.root().owned().await?;\n \n     let relative_path = test_path.strip_prefix(&*REPO_ROOT)?;"
        },
        {
            "sha": "e96e6dab7a15edf677dcbbf72fdfd4d6502b0d48",
            "filename": "turbopack/crates/turbopack/benches/node_file_trace.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack%2Fbenches%2Fnode_file_trace.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack%2Fbenches%2Fnode_file_trace.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fbenches%2Fnode_file_trace.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -79,7 +79,7 @@ fn bench_emit(b: &mut Bencher, bench_input: &BenchInput) {\n         let input: RcStr = bench_input.input.clone().into();\n         async move {\n             let task = tt.spawn_once_task(async move {\n-                let input_fs = DiskFileSystem::new(\"tests\".into(), tests_root.clone(), vec![]);\n+                let input_fs = DiskFileSystem::new(\"tests\".into(), tests_root.clone());\n                 let input = input_fs.root().await?.join(&input)?;\n \n                 let input_dir = input.parent().parent();"
        },
        {
            "sha": "a2acb5cd56f65c58fcb782338098581cac1f58a0",
            "filename": "turbopack/crates/turbopack/examples/turbopack.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack%2Fexamples%2Fturbopack.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack%2Fexamples%2Fturbopack.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fexamples%2Fturbopack.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -37,7 +37,7 @@ async fn main() -> Result<()> {\n     let task = tt.spawn_root_task(|| {\n         Box::pin(async {\n             let root: RcStr = current_dir().unwrap().to_str().unwrap().into();\n-            let disk_fs = DiskFileSystem::new(PROJECT_FILESYSTEM_NAME.into(), root, vec![]);\n+            let disk_fs = DiskFileSystem::new(PROJECT_FILESYSTEM_NAME.into(), root);\n             disk_fs.await?.start_watching(None).await?;\n \n             // Smart Pointer cast"
        },
        {
            "sha": "4a76e734a238a2ccb429e97825a6d02087ea4497",
            "filename": "turbopack/crates/turbopack/tests/node-file-trace.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack%2Ftests%2Fnode-file-trace.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/7351d9245055bc8babca01ae14e21831b78d3604/turbopack%2Fcrates%2Fturbopack%2Ftests%2Fnode-file-trace.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Ftests%2Fnode-file-trace.rs?ref=7351d9245055bc8babca01ae14e21831b78d3604",
            "patch": "@@ -337,12 +337,11 @@ async fn node_file_trace_operation(\n     let workspace_fs: Vc<Box<dyn FileSystem>> = Vc::upcast(DiskFileSystem::new(\n         rcstr!(\"workspace\"),\n         package_root.clone(),\n-        vec![],\n     ));\n     let input_dir = workspace_fs.root().owned().await?;\n     let input = input_dir.join(&format!(\"tests/{input}\"))?;\n \n-    let output_fs = DiskFileSystem::new(rcstr!(\"output\"), directory.clone(), vec![]);\n+    let output_fs = DiskFileSystem::new(rcstr!(\"output\"), directory.clone());\n     let output_dir = output_fs.root().owned().await?;\n \n     let source = FileSource::new(input);"
        }
    ],
    "stats": {
        "total": 103,
        "additions": 25,
        "deletions": 78
    }
}