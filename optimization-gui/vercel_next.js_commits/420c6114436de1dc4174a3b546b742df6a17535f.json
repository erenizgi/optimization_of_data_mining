{
    "author": "mischnic",
    "message": "Convert Windows paths as well when reading sourcemap (#86723)\n\nFixes this warning on Windows:\n`C:\\Users\\IEUser\\Desktop \\next-turbopack-issue-repro\\.next\\dev|server\\chunks\\ssr\\[turbopack]_runtime.js: Invalid source map. Only conformant source maps can be used to find the original code. Cause: Error:\nsourceMapURL could not be parsed`\n\nBecause `pathToFileURL` was only called for absolute Unix paths, not Windows paths.",
    "sha": "420c6114436de1dc4174a3b546b742df6a17535f",
    "files": [
        {
            "sha": "79bb890912665f380fbb4bc43719f47d2f0b6082",
            "filename": "packages/next/src/server/patch-error-inspect.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/420c6114436de1dc4174a3b546b742df6a17535f/packages%2Fnext%2Fsrc%2Fserver%2Fpatch-error-inspect.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/420c6114436de1dc4174a3b546b742df6a17535f/packages%2Fnext%2Fsrc%2Fserver%2Fpatch-error-inspect.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fpatch-error-inspect.ts?ref=420c6114436de1dc4174a3b546b742df6a17535f",
            "patch": "@@ -160,10 +160,14 @@ function getSourcemappedFrameIfPossible(\n   let sourceMapPayload: ModernSourceMapPayload\n   if (sourceMapCacheEntry === undefined) {\n     let sourceURL = frame.file\n-    // e.g. \"/APP/.next/server/chunks/ssr/[root-of-the-server]__2934a0._.js\"\n+    // e.g. \"/Users/foo/APP/.next/server/chunks/ssr/[root-of-the-server]__2934a0._.js\"\n+    // or \"C:\\Users\\foo\\APP\\.next\\server\\chunks\\ssr\\[root-of-the-server]__2934a0._.js\"\n     // will be keyed by Node.js as \"file:///APP/.next/server/chunks/ssr/[root-of-the-server]__2934a0._.js\".\n     // This is likely caused by `callsite.toString()` in `Error.prepareStackTrace converting file URLs to paths.\n-    if (sourceURL.startsWith('/')) {\n+    //\n+    // But frame.file might also be \"webpack-internal:///(rsc)/./app/bad-sourcemap/page.js\" or\n+    // \"<anonymous>\" or \"node:internal/process/task_queues\" here\n+    if (path.isAbsolute(frame.file)) {\n       sourceURL = url.pathToFileURL(frame.file).toString()\n     }\n     let maybeSourceMapPayload: ModernSourceMapPayload | undefined"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    }
}