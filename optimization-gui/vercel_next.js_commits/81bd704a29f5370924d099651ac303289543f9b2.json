{
    "author": "kevva",
    "message": "fix: make sure caller exists in babel preset (#84154)\n\n### What?\n\nhttps://github.com/vercel/next.js/pull/82676 introduced a small bug when\nusing the Babel preset standalone without Next.js itself. It throws the\nfollowing error:\n\n```\nCannot read properties of undefined (reading 'transformMode') (While processing: \"/home/runner/work/my-project/node_modules/next/babel.js\")\n```\n\n### How?\n\nOther uses of `api.caller` in the preset checks if the caller exists\nbefore accessing its properties. This PR makes sure we're doing the same\nin the standalone check.\n\nCo-authored-by: Jiwon Choi <devjiwonchoi@gmail.com>",
    "sha": "81bd704a29f5370924d099651ac303289543f9b2",
    "files": [
        {
            "sha": "55236b95e58ee1e3afab78bbe258132819373eae",
            "filename": "packages/next/src/build/babel/preset.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/81bd704a29f5370924d099651ac303289543f9b2/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fpreset.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/81bd704a29f5370924d099651ac303289543f9b2/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fpreset.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fpreset.ts?ref=81bd704a29f5370924d099651ac303289543f9b2",
            "patch": "@@ -145,7 +145,7 @@ export default (\n   const isStandalone = api.caller(\n     // NOTE: `transformMode` may be undefined if the user configured `babel-loader` themselves. In\n     // this case, we should assume we're in 'default' mode.\n-    (caller: any) => caller.transformMode === 'standalone'\n+    (caller: any) => !!caller && caller.transformMode === 'standalone'\n   )\n   const isServer = api.caller((caller: any) => !!caller && caller.isServer)\n "
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}