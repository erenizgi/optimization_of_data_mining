{
    "author": "ztanner",
    "message": "[cache components]: move flag out of experimental (#85035)\n\nThis moves `experimental.cacheComponents` to a top level config. As part\nof this, I disabled some tests in `build-output-prerender` that assert\non `cacheComponents` appearing in the experimental list. In a separate\nPR, I'm going to show that Cache Components is enabled next to the\nbundler info.\n\nThis also updates some docs pages to remove \"experimental\" language.",
    "sha": "85c3d20a917a5256dd632046f5e5863569755b1c",
    "files": [
        {
            "sha": "58b93d93b5511550d4dc2263afedf7578fa4cea0",
            "filename": ".github/workflows/build_and_test.yml",
            "status": "modified",
            "additions": 25,
            "deletions": 29,
            "changes": 54,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/.github%2Fworkflows%2Fbuild_and_test.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/.github%2Fworkflows%2Fbuild_and_test.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_test.yml?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -681,12 +681,12 @@ jobs:\n \n     secrets: inherit\n \n-  test-new-tests-deploy-experimental:\n-    name: Test new tests when deployed (experimental)\n+  test-new-tests-deploy-cache-components:\n+    name: Test new tests when deployed (cache components)\n     needs:\n       [\n         'optimize-ci',\n-        'test-experimental-prod',\n+        'test-cache-components-prod',\n         'test-new-tests-dev',\n         'test-new-tests-start',\n       ]\n@@ -702,15 +702,15 @@ jobs:\n     uses: ./.github/workflows/build_reusable.yml\n     with:\n       afterBuild: |\n-        export __NEXT_EXPERIMENTAL_CACHE_COMPONENTS=true\n+        export __NEXT_CACHE_COMPONENTS=true\n         export __NEXT_EXPERIMENTAL_DEBUG_CHANNEL=true\n-        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/experimental-tests-manifest.json\"\n+        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/cache-components-tests-manifest.json\"\n         export NEXT_E2E_TEST_TIMEOUT=240000\n         export GH_PR_NUMBER=${{ github.event.pull_request && github.event.pull_request.number || '' }}\n         node scripts/test-new-tests.mjs \\\n           --mode deploy \\\n           --group ${{ matrix.group }}\n-      stepName: 'test-new-tests-deploy-experimental-${{matrix.group}}'\n+      stepName: 'test-new-tests-deploy-cache-components-${{matrix.group}}'\n \n     secrets: inherit\n \n@@ -921,31 +921,29 @@ jobs:\n       stepName: 'test-firefox-safari'\n     secrets: inherit\n \n-  # TODO: Disable these when no more experiments are tested\n   # Manifest generated via: https://gist.github.com/wyattjoh/2ceaebd82a5bcff4819600fd60126431\n-  test-experimental-integration:\n-    name: test experimental integration\n+  test-cache-components-integration:\n+    name: test cache components integration\n     needs: ['optimize-ci', 'changes', 'build-native', 'build-next']\n     if: ${{ needs.optimize-ci.outputs.skip == 'false' && needs.changes.outputs.docs-only == 'false' }}\n \n     uses: ./.github/workflows/build_reusable.yml\n     with:\n       nodeVersion: 20.9.0\n       afterBuild: |\n-        export __NEXT_EXPERIMENTAL_PPR=true # for compatibility with the existing tests\n-        export __NEXT_EXPERIMENTAL_CACHE_COMPONENTS=true\n+        export __NEXT_CACHE_COMPONENTS=true\n         export __NEXT_EXPERIMENTAL_DEBUG_CHANNEL=true\n-        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/experimental-tests-manifest.json\"\n+        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/cache-components-tests-manifest.json\"\n         export IS_WEBPACK_TEST=1\n \n         node run-tests.js \\\n           --timings \\\n           --type integration\n-      stepName: 'test-experimental-integration'\n+      stepName: 'test-cache-components-integration'\n     secrets: inherit\n \n-  test-experimental-dev:\n-    name: test experimental dev\n+  test-cache-components-dev:\n+    name: test cache components dev\n     needs: ['optimize-ci', 'changes', 'build-native', 'build-next']\n     if: ${{ needs.optimize-ci.outputs.skip == 'false' && needs.changes.outputs.docs-only == 'false' }}\n \n@@ -956,22 +954,21 @@ jobs:\n     uses: ./.github/workflows/build_reusable.yml\n     with:\n       afterBuild: |\n-        export __NEXT_EXPERIMENTAL_PPR=true # for compatibility with the existing tests\n-        export __NEXT_EXPERIMENTAL_CACHE_COMPONENTS=true\n+        export __NEXT_CACHE_COMPONENTS=true\n         export __NEXT_EXPERIMENTAL_DEBUG_CHANNEL=true\n-        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/experimental-tests-manifest.json\"\n+        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/cache-components-tests-manifest.json\"\n         export NEXT_TEST_MODE=dev\n         export IS_WEBPACK_TEST=1\n \n         node run-tests.js \\\n           --timings \\\n           -g ${{ matrix.group }} \\\n           --type development\n-      stepName: 'test-experimental-dev-${{ matrix.group }}'\n+      stepName: 'test-cache-components-dev-${{ matrix.group }}'\n     secrets: inherit\n \n-  test-experimental-prod:\n-    name: test experimental prod\n+  test-cache-components-prod:\n+    name: test cache components prod\n     needs: ['optimize-ci', 'changes', 'build-native', 'build-next']\n     if: ${{ needs.optimize-ci.outputs.skip == 'false' && needs.changes.outputs.docs-only == 'false' }}\n \n@@ -982,18 +979,17 @@ jobs:\n     uses: ./.github/workflows/build_reusable.yml\n     with:\n       afterBuild: |\n-        export __NEXT_EXPERIMENTAL_PPR=true # for compatibility with the existing tests\n-        export __NEXT_EXPERIMENTAL_CACHE_COMPONENTS=true\n+        export __NEXT_CACHE_COMPONENTS=true\n         export __NEXT_EXPERIMENTAL_DEBUG_CHANNEL=true\n-        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/experimental-tests-manifest.json\"\n+        export NEXT_EXTERNAL_TESTS_FILTERS=\"test/cache-components-tests-manifest.json\"\n         export NEXT_TEST_MODE=start\n         export IS_WEBPACK_TEST=1\n \n         node run-tests.js \\\n           --timings \\\n           -g ${{ matrix.group }} \\\n           --type production\n-      stepName: 'test-experimental-prod-${{ matrix.group }}'\n+      stepName: 'test-cache-components-prod-${{ matrix.group }}'\n     secrets: inherit\n \n   tests-pass:\n@@ -1011,9 +1007,9 @@ jobs:\n         'test-prod',\n         'test-integration',\n         'test-firefox-safari',\n-        'test-experimental-dev',\n-        'test-experimental-prod',\n-        'test-experimental-integration',\n+        'test-cache-components-dev',\n+        'test-cache-components-prod',\n+        'test-cache-components-integration',\n         'test-cargo-unit',\n         'rust-check',\n         'rustdoc-check',\n@@ -1023,7 +1019,7 @@ jobs:\n         'test-new-tests-dev',\n         'test-new-tests-start',\n         'test-new-tests-deploy',\n-        'test-new-tests-deploy-experimental',\n+        'test-new-tests-deploy-cache-components',\n         'test-turbopack-production',\n         'test-turbopack-production-integration',\n         'test-unit-windows',"
        },
        {
            "sha": "5958745b2dbe4d40ea8d3635adbebfff731f8c6a",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -154,6 +154,7 @@ pub struct NextConfig {\n     target: Option<String>,\n     typescript: TypeScriptConfig,\n     use_file_system_public_routes: bool,\n+    cache_components: Option<bool>,\n     webpack: Option<serde_json::Value>,\n }\n \n@@ -810,6 +811,8 @@ pub struct ExperimentalConfig {\n     web_vitals_attribution: Option<Vec<RcStr>>,\n     server_actions: Option<ServerActionsOrLegacyBool>,\n     sri: Option<SubResourceIntegrity>,\n+    /// @deprecated - use top-level cache_components instead.\n+    /// This field is kept for backwards compatibility during migration.\n     cache_components: Option<bool>,\n     use_cache: Option<bool>,\n     root_params: Option<bool>,\n@@ -1733,7 +1736,7 @@ impl NextConfig {\n \n     #[turbo_tasks::function]\n     pub fn enable_cache_components(&self) -> Vc<bool> {\n-        Vc::cell(self.experimental.cache_components.unwrap_or(false))\n+        Vc::cell(self.cache_components.unwrap_or(false))\n     }\n \n     #[turbo_tasks::function]\n@@ -1744,7 +1747,7 @@ impl NextConfig {\n                 // \"use cache\" was originally implicitly enabled with the\n                 // cacheComponents flag, so we transfer the value for cacheComponents to the\n                 // explicit useCache flag to ensure backwards compatibility.\n-                .unwrap_or(self.experimental.cache_components.unwrap_or(false)),\n+                .unwrap_or(self.cache_components.unwrap_or(false)),\n         )\n     }\n \n@@ -1754,7 +1757,7 @@ impl NextConfig {\n             self.experimental\n                 .root_params\n                 // rootParams should be enabled implicitly in cacheComponents.\n-                .unwrap_or(self.experimental.cache_components.unwrap_or(false)),\n+                .unwrap_or(self.cache_components.unwrap_or(false)),\n         )\n     }\n "
        },
        {
            "sha": "55dead57fc944da9fd800fbac07f22ea7896c872",
            "filename": "crates/next-custom-transforms/src/transforms/react_server_components.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Freact_server_components.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Freact_server_components.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Freact_server_components.rs?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -101,7 +101,7 @@ enum NextConfigProperty {\n impl Display for NextConfigProperty {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         match self {\n-            NextConfigProperty::CacheComponents => write!(f, \"experimental.cacheComponents\"),\n+            NextConfigProperty::CacheComponents => write!(f, \"cacheComponents\"),\n             NextConfigProperty::UseCache => write!(f, \"experimental.useCache\"),\n         }\n     }"
        },
        {
            "sha": "7684de6d7823aa3f8b446877d0bebc25cb3d88a4",
            "filename": "crates/next-custom-transforms/src/transforms/server_actions.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -120,7 +120,7 @@ enum ServerActionsErrorKind {\n         span: Span,\n         cache_kind: RcStr,\n     },\n-    UseCacheWithoutExperimentalFlag {\n+    UseCacheWithoutCacheComponents {\n         span: Span,\n         directive: String,\n     },\n@@ -2753,7 +2753,7 @@ impl DirectiveVisitor<'_> {\n                         });\n                     } else if self.is_allowed_position {\n                         if !self.config.use_cache_enabled {\n-                            emit_error(ServerActionsErrorKind::UseCacheWithoutExperimentalFlag {\n+                            emit_error(ServerActionsErrorKind::UseCacheWithoutCacheComponents {\n                                 span: *span,\n                                 directive: value.to_string(),\n                             });\n@@ -3195,11 +3195,11 @@ fn emit_error(error_kind: ServerActionsErrorKind) {\n                 \"#\n             },\n         ),\n-        ServerActionsErrorKind::UseCacheWithoutExperimentalFlag { span, directive } => (\n+        ServerActionsErrorKind::UseCacheWithoutCacheComponents { span, directive } => (\n             span,\n             formatdoc! {\n                 r#\"\n-                    To use \"{directive}\", please enable the feature flag `experimental.cacheComponents` in your Next.js config.\n+                    To use \"{directive}\", please enable the feature flag `cacheComponents` in your Next.js config.\n \n                     Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n                 \"#"
        },
        {
            "sha": "c1dac890e24736674b961cc207a7cae77c4ab9cf",
            "filename": "crates/next-custom-transforms/tests/errors/react-server-components/server-graph/cache-components/output.stderr",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Freact-server-components%2Fserver-graph%2Fcache-components%2Foutput.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Freact-server-components%2Fserver-graph%2Fcache-components%2Foutput.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Freact-server-components%2Fserver-graph%2Fcache-components%2Foutput.stderr?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,31 +1,31 @@\n-  x Route segment config \"runtime\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.\n+  x Route segment config \"runtime\" is not compatible with `nextConfig.cacheComponents`. Please remove it.\n    ,-[input.js:1:1]\n  1 | export const runtime = 'edge'\n    :              ^^^^^^^\n  2 | export const dynamic = 'force-dynamic'\n    `----\n-  x Route segment config \"dynamic\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.\n+  x Route segment config \"dynamic\" is not compatible with `nextConfig.cacheComponents`. Please remove it.\n    ,-[input.js:2:1]\n  1 | export const runtime = 'edge'\n  2 | export const dynamic = 'force-dynamic'\n    :              ^^^^^^^\n  3 | export const dynamicParams = false\n    `----\n-  x Route segment config \"dynamicParams\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.\n+  x Route segment config \"dynamicParams\" is not compatible with `nextConfig.cacheComponents`. Please remove it.\n    ,-[input.js:3:1]\n  2 | export const dynamic = 'force-dynamic'\n  3 | export const dynamicParams = false\n    :              ^^^^^^^^^^^^^\n  4 | export const fetchCache = 'force-no-store'\n    `----\n-  x Route segment config \"fetchCache\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.\n+  x Route segment config \"fetchCache\" is not compatible with `nextConfig.cacheComponents`. Please remove it.\n    ,-[input.js:4:1]\n  3 | export const dynamicParams = false\n  4 | export const fetchCache = 'force-no-store'\n    :              ^^^^^^^^^^\n  5 | export const revalidate = 1\n    `----\n-  x Route segment config \"revalidate\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.\n+  x Route segment config \"revalidate\" is not compatible with `nextConfig.cacheComponents`. Please remove it.\n    ,-[input.js:5:1]\n  4 | export const fetchCache = 'force-no-store'\n  5 | export const revalidate = 1"
        },
        {
            "sha": "7a7edf839fe8749b5c448008115167204cce0c6f",
            "filename": "crates/next-custom-transforms/tests/errors/use-cache-not-allowed/1/output.stderr",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fuse-cache-not-allowed%2F1%2Foutput.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fuse-cache-not-allowed%2F1%2Foutput.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fuse-cache-not-allowed%2F1%2Foutput.stderr?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,4 +1,4 @@\n-  x To use \"use cache\", please enable the feature flag `experimental.cacheComponents` in your Next.js config.\n+  x To use \"use cache\", please enable the feature flag `cacheComponents` in your Next.js config.\n   | \n   | Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n   | "
        },
        {
            "sha": "4c9998a6f1f8be4a2811fe5ea52f0bf287eb82d7",
            "filename": "crates/next-custom-transforms/tests/errors/use-cache-not-allowed/2/output.stderr",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fuse-cache-not-allowed%2F2%2Foutput.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fuse-cache-not-allowed%2F2%2Foutput.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ferrors%2Fuse-cache-not-allowed%2F2%2Foutput.stderr?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,4 +1,4 @@\n-  x To use \"use cache: x\", please enable the feature flag `experimental.cacheComponents` in your Next.js config.\n+  x To use \"use cache: x\", please enable the feature flag `cacheComponents` in your Next.js config.\n   | \n   | Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n   | "
        },
        {
            "sha": "e31fc4a213d25766f0ba63bb49a06db9546c5697",
            "filename": "docs/01-app/02-guides/memory-usage.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F02-guides%2Fmemory-usage.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F02-guides%2Fmemory-usage.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmemory-usage.mdx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -125,7 +125,7 @@ Generating source maps consumes extra memory during the build process.\n \n You can disable source map generation by adding `productionBrowserSourceMaps: false` and `experimental.serverSourceMaps: false` to your Next.js configuration.\n \n-When using the `experimental.cacheComponents` feature, Next.js will use source maps by default during the prerender phase of `next build`.\n+When using the `cacheComponents` feature, Next.js will use source maps by default during the prerender phase of `next build`.\n If you consistently encounter memory issues during that phase (after \"Generating static pages\"),\n you can try disabling source maps in that phase by adding `enablePrerenderSourceMaps: false` to your Next.js configuration.\n "
        },
        {
            "sha": "05a02eba85aaf5a998c9ecda9a83feff577ad772",
            "filename": "docs/01-app/03-api-reference/01-directives/use-cache.mdx",
            "status": "modified",
            "additions": 7,
            "deletions": 10,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F01-directives%2Fuse-cache.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F01-directives%2Fuse-cache.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F01-directives%2Fuse-cache.mdx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -17,15 +17,13 @@ The `use cache` directive allows you to mark a route, React component, or a func\n \n ## Usage\n \n-`use cache` is currently an experimental feature. To enable it, add the [`cacheComponents`](/docs/app/api-reference/config/next-config-js/cacheComponents) option to your `next.config.ts` file:\n+`use cache` is a Cache Components feature. To enable it, add the [`cacheComponents`](/docs/app/api-reference/config/next-config-js/cacheComponents) option to your `next.config.ts` file:\n \n ```ts filename=\"next.config.ts\" switcher\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n export default nextConfig\n@@ -34,9 +32,7 @@ export default nextConfig\n ```js filename=\"next.config.js\" switcher\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig\n@@ -367,6 +363,7 @@ Learn how to [configure caching](/docs/app/guides/self-hosting#caching-and-isr)\n \n ## Version History\n \n-| Version   | Changes                                                 |\n-| --------- | ------------------------------------------------------- |\n-| `v15.0.0` | `\"use cache\"` is introduced as an experimental feature. |\n+| Version   | Changes                                                     |\n+| --------- | ----------------------------------------------------------- |\n+| `v16.0.0` | `\"use cache\"` is enabled with the Cache Components feature. |\n+| `v15.0.0` | `\"use cache\"` is introduced as an experimental feature.     |"
        },
        {
            "sha": "8210a3e4b24b1889828654bc6bf351c91797f156",
            "filename": "docs/01-app/03-api-reference/04-functions/cacheLife.mdx",
            "status": "modified",
            "additions": 5,
            "deletions": 9,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F04-functions%2FcacheLife.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F04-functions%2FcacheLife.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F04-functions%2FcacheLife.mdx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -22,19 +22,15 @@ To use `cacheLife`, enable the [`cacheComponents` flag](/docs/app/api-reference/\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n export default nextConfig\n ```\n \n ```js filename=\"next.config.js\" switcher\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n export default nextConfig\n@@ -116,8 +112,8 @@ You can create a reusable cache profile by defining them in your `next.config.ts\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     cacheLife: {\n       biweekly: {\n         stale: 60 * 60 * 24 * 14, // 14 days\n@@ -133,8 +129,8 @@ module.exports = nextConfig\n \n ```js filename=\"next.config.js\" switcher\n const nextConfig = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     cacheLife: {\n       biweekly: {\n         stale: 60 * 60 * 24 * 14, // 14 days\n@@ -170,8 +166,8 @@ The example below shows how to override the default “days” cache profile:\n \n ```ts filename=\"next.config.ts\"\n const nextConfig = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     cacheLife: {\n       days: {\n         stale: 3600, // 1 hour"
        },
        {
            "sha": "9c469d7a9cffae91a2181b6ae076966efc6db004",
            "filename": "docs/01-app/03-api-reference/04-functions/cacheTag.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F04-functions%2FcacheTag.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F04-functions%2FcacheTag.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F04-functions%2FcacheTag.mdx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -22,19 +22,15 @@ To use `cacheTag`, enable the [`cacheComponents` flag](/docs/app/api-reference/c\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n export default nextConfig\n ```\n \n ```js filename=\"next.config.js\" switcher\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n export default nextConfig"
        },
        {
            "sha": "1359841f775980a4f0fe6a632ed18a9ef88657a7",
            "filename": "docs/01-app/03-api-reference/05-config/01-next-config-js/cacheComponents.mdx",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FcacheComponents.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FcacheComponents.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FcacheComponents.mdx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -4,23 +4,21 @@ description: Learn how to enable the cacheComponents flag in Next.js.\n version: canary\n ---\n \n-The `cacheComponents` flag is an experimental feature in Next.js that causes data fetching operations in the App Router to be excluded from pre-renders unless they are explicitly cached. This can be useful for optimizing the performance of dynamic data fetching in Server Components.\n+The `cacheComponents` flag is a feature in Next.js that causes data fetching operations in the App Router to be excluded from pre-renders unless they are explicitly cached. This can be useful for optimizing the performance of dynamic data fetching in Server Components.\n \n It is useful if your application requires fresh data fetching during runtime rather than serving from a pre-rendered cache.\n \n It is expected to be used in conjunction with [`use cache`](/docs/app/api-reference/directives/use-cache) so that your data fetching happens at runtime by default unless you define specific parts of your application to be cached with `use cache` at the page, function, or component level.\n \n ## Usage\n \n-To enable the `cacheComponents` flag, set it to `true` in the `experimental` section of your `next.config.ts` file:\n+To enable the `cacheComponents` flag, set it to `true` in your `next.config.ts` file:\n \n ```ts filename=\"next.config.ts\"\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n export default nextConfig"
        },
        {
            "sha": "d957106ecaf2c0b02e3e1764fd72b9f9a1a613a3",
            "filename": "docs/01-app/03-api-reference/05-config/01-next-config-js/cacheLife.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FcacheLife.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FcacheLife.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FcacheLife.mdx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -14,8 +14,8 @@ To define a profile, enable the [`cacheComponents` flag](/docs/app/api-reference\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     cacheLife: {\n       blog: {\n         stale: 3600, // 1 hour\n@@ -31,8 +31,8 @@ export default nextConfig\n \n ```js filename=\"next.config.js\" switcher\n module.exports = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     cacheLife: {\n       blog: {\n         stale: 3600, // 1 hour"
        },
        {
            "sha": "882de985b053a42b6f003a8d35b0d722c5a599f2",
            "filename": "docs/01-app/03-api-reference/05-config/01-next-config-js/useCache.mdx",
            "status": "removed",
            "additions": 0,
            "deletions": 29,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/e46d8bef70ff2ecc7f7b0f558f9fd0c8cb3c68d4/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FuseCache.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/e46d8bef70ff2ecc7f7b0f558f9fd0c8cb3c68d4/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FuseCache.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FuseCache.mdx?ref=e46d8bef70ff2ecc7f7b0f558f9fd0c8cb3c68d4",
            "patch": "@@ -1,29 +0,0 @@\n----\n-title: useCache\n-description: Learn how to enable the useCache flag in Next.js.\n-version: canary\n----\n-\n-The `useCache` flag is an experimental feature in Next.js that enables the [`use cache` directive](/docs/app/api-reference/directives/use-cache) to be used independently of [`cacheComponents`](/docs/app/api-reference/config/next-config-js/cacheComponents). When enabled, you can use `use cache` in your application even if `cacheComponents` is turned off.\n-\n-## Usage\n-\n-To enable the `useCache` flag, set it to `true` in the `experimental` section of your `next.config.ts` file:\n-\n-```ts filename=\"next.config.ts\"\n-import type { NextConfig } from 'next'\n-\n-const nextConfig: NextConfig = {\n-  experimental: {\n-    useCache: true,\n-  },\n-}\n-\n-export default nextConfig\n-```\n-\n-When `useCache` is enabled, you can use the following cache functions and configurations:\n-\n-- The [`use cache` directive](/docs/app/api-reference/directives/use-cache)\n-- The [`cacheLife` function](/docs/app/api-reference/config/next-config-js/cacheLife) with `use cache`\n-- The [`cacheTag` function](/docs/app/api-reference/functions/cacheTag)"
        },
        {
            "sha": "3777992b241290249f426268ce3b15739c9cdc18",
            "filename": "errors/next-prerender-missing-suspense.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/errors%2Fnext-prerender-missing-suspense.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/errors%2Fnext-prerender-missing-suspense.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/errors%2Fnext-prerender-missing-suspense.mdx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -4,7 +4,7 @@ title: Cannot access data, headers, params, searchParams, or a short-lived cache\n \n ## Why This Error Occurred\n \n-When the experimental flag `cacheComponents` is enabled, Next.js expects a parent `Suspense` boundary around any component that awaits data that should be accessed on every user request. The purpose of this requirement is so that Next.js can provide a useful fallback while this data is accessed and rendered.\n+When the `cacheComponents` feature is enabled, Next.js expects a parent `Suspense` boundary around any component that awaits data that should be accessed on every user request. The purpose of this requirement is so that Next.js can provide a useful fallback while this data is accessed and rendered.\n \n While some data is inherently only available when a user request is being handled, such as request headers, Next.js assumes that by default any asynchronous data is expected to be accessed each time a user request is being handled unless you specifically cache it using `\"use cache\"`.\n "
        },
        {
            "sha": "f2b6633cf8cb0b6af9c0dd9378c1ad22613e36bd",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/package.json",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/package.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/package.json?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -110,7 +110,7 @@\n     \"test-storybook\": \"turbo run test-storybook\",\n     \"with-rspack\": \"cross-env NEXT_RSPACK=1 NEXT_TEST_USE_RSPACK=1\",\n     \"with-webpack\": \"cross-env IS_WEBPACK_TEST=1\",\n-    \"with-experimental\": \"cross-env __NEXT_EXPERIMENTAL_CACHE_COMPONENTS=true  __NEXT_EXPERIMENTAL_DEBUG_CHANNEL=true\"\n+    \"with-experimental\": \"cross-env __NEXT_CACHE_COMPONENTS=true  __NEXT_EXPERIMENTAL_DEBUG_CHANNEL=true\"\n   },\n   \"devDependencies\": {\n     \"@actions/core\": \"1.10.1\","
        },
        {
            "sha": "a340d67ccb36c0958124e71d3b31c858e7d7a701",
            "filename": "packages/next/errors.json",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Ferrors.json",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Ferrors.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Ferrors.json?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -882,5 +882,8 @@\n   \"881\": \"Invalid render stage: %s\",\n   \"882\": \"The %s file \\\"./%s\\\" must export a function named \\\\`%s\\\\` or a default function.\",\n   \"883\": \"The %s file \\\"%s\\\" must export a function named \\\\`%s\\\\` or a default function.\",\n-  \"884\": \"Both %s file \\\"./%s\\\" and %s file \\\"./%s\\\" are detected. Please use \\\"./%s\\\" only.\"\n+  \"884\": \"Both %s file \\\"./%s\\\" and %s file \\\"./%s\\\" are detected. Please use \\\"./%s\\\" only.\",\n+  \"885\": \"Page \\\"%s\\\" cannot use \\\\`export const unstable_prefetch = ...\\\\` without enabling \\\\`cacheComponents\\\\` and \\\\`experimental.clientSegmentCache\\\\`.\",\n+  \"886\": \"`cacheTag()` is only available with the `cacheComponents` config.\",\n+  \"887\": \"`cacheLife()` is only available with the `cacheComponents` config.\"\n }"
        },
        {
            "sha": "bc01e7e8563745121fca3ab6f9671906ceb5d19d",
            "filename": "packages/next/src/build/analysis/get-page-static-info.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fanalysis%2Fget-page-static-info.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fanalysis%2Fget-page-static-info.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fanalysis%2Fget-page-static-info.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -657,12 +657,12 @@ export async function getAppPageStaticInfo({\n \n   if (\n     'unstable_prefetch' in config &&\n-    (!nextConfig.experimental?.cacheComponents ||\n+    (!nextConfig.cacheComponents ||\n       // don't allow in `clientSegmentCache: 'client-only'` mode\n       nextConfig.experimental?.clientSegmentCache !== true)\n   ) {\n     throw new Error(\n-      `Page \"${page}\" cannot use \\`export const unstable_prefetch = ...\\` without enabling \\`experimental.cacheComponents\\` and \\`experimental.clientSegmentCache\\`.`\n+      `Page \"${page}\" cannot use \\`export const unstable_prefetch = ...\\` without enabling \\`cacheComponents\\` and \\`experimental.clientSegmentCache\\`.`\n     )\n   }\n "
        },
        {
            "sha": "ca3d8f7fa8ca1c8ac6a2e7ee70c61c6950c7fe14",
            "filename": "packages/next/src/build/define-env.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -116,7 +116,7 @@ export function getDefineEnv({\n   const nextConfigEnv = getNextConfigEnv(config)\n \n   const isPPREnabled = checkIsAppPPREnabled(config.experimental.ppr)\n-  const isCacheComponentsEnabled = !!config.experimental.cacheComponents\n+  const isCacheComponentsEnabled = !!config.cacheComponents\n   const isUseCacheEnabled = !!config.experimental.useCache\n \n   const defineEnv: DefineEnv = {"
        },
        {
            "sha": "4b9e62a333b9b3ab4ae93a86ed7ec07f985dbd9b",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1535,9 +1535,7 @@ export default async function build(\n         config.basePath ? `${config.basePath}${p}` : p\n       )\n \n-      const isAppCacheComponentsEnabled = Boolean(\n-        config.experimental.cacheComponents\n-      )\n+      const isAppCacheComponentsEnabled = Boolean(config.cacheComponents)\n       const isAuthInterruptsEnabled = Boolean(\n         config.experimental.authInterrupts\n       )\n@@ -1611,11 +1609,11 @@ export default async function build(\n               prefetchSegmentHeader: NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n               prefetchSegmentSuffix: RSC_SEGMENT_SUFFIX,\n               prefetchSegmentDirSuffix: RSC_SEGMENTS_DIR_SUFFIX,\n-              clientParamParsing: config.experimental.cacheComponents ?? false,\n+              clientParamParsing: config.cacheComponents ?? false,\n               clientParamParsingOrigins:\n                 config.experimental.clientParamParsingOrigins,\n               dynamicRSCPrerender:\n-                isAppPPREnabled && config.experimental.cacheComponents === true,\n+                isAppPPREnabled && config.cacheComponents === true,\n             },\n             rewriteHeaders: {\n               pathHeader: NEXT_REWRITTEN_PATH_HEADER,\n@@ -2738,7 +2736,7 @@ export default async function build(\n       const features: EventBuildFeatureUsage[] = [\n         {\n           featureName: 'experimental/cacheComponents',\n-          invocationCount: config.experimental.cacheComponents ? 1 : 0,\n+          invocationCount: config.cacheComponents ? 1 : 0,\n         },\n         {\n           featureName: 'experimental/optimizeCss',\n@@ -2959,7 +2957,7 @@ export default async function build(\n                     // completely static.\n                     !(\n                       config.experimental.clientSegmentCache &&\n-                      config.experimental.cacheComponents\n+                      config.cacheComponents\n                     )\n                   ) {\n                     return\n@@ -3275,7 +3273,7 @@ export default async function build(\n                   // this route.\n                   !(\n                     config.experimental.clientSegmentCache &&\n-                    config.experimental.cacheComponents &&\n+                    config.cacheComponents &&\n                     isRoutePPREnabled\n                   )\n                 ) {\n@@ -3385,7 +3383,7 @@ export default async function build(\n                     // this case. This only applies if we have PPR enabled for\n                     // this route.\n                     !config.experimental.clientSegmentCache ||\n-                    !config.experimental.cacheComponents ||\n+                    !config.cacheComponents ||\n                     !isRoutePPREnabled\n                   ) {\n                     prefetchDataRoute = path.posix.join("
        },
        {
            "sha": "abbe0826b59577d5bacaa86f4448148169be17fa",
            "filename": "packages/next/src/build/static-paths/app.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fstatic-paths%2Fapp.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fstatic-paths%2Fapp.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fstatic-paths%2Fapp.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -845,8 +845,8 @@ export async function buildAppStaticPaths({\n       incrementalCache,\n       cacheLifeProfiles,\n       supportsDynamicResponse: true,\n+      cacheComponents,\n       experimental: {\n-        cacheComponents,\n         authInterrupts,\n       },\n       waitUntil: afterRunner.context.waitUntil,"
        },
        {
            "sha": "623da7ff3155a74a0feb6aad3861f5f054cfdf66",
            "filename": "packages/next/src/build/templates/app-page.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 8,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -183,7 +183,7 @@ export async function handler(\n   // parallel routes. This is addressed with cacheComponents.\n   const prerenderInfo =\n     nextConfig.experimental.ppr &&\n-    !nextConfig.experimental.cacheComponents &&\n+    !nextConfig.cacheComponents &&\n     isInterceptionRouteAppPath(resolvedPathname)\n       ? null\n       : routeModule.match(resolvedPathname, prerenderManifest)\n@@ -296,7 +296,7 @@ export async function handler(\n \n   // When a page supports cacheComponents, we can support RDC for Navigations\n   const supportsRDCForNavigations =\n-    isRoutePPREnabled && nextConfig.experimental.cacheComponents === true\n+    isRoutePPREnabled && nextConfig.cacheComponents === true\n \n   // In development, we always want to generate dynamic HTML.\n   const supportsDynamicResponse: boolean =\n@@ -545,12 +545,11 @@ export async function handler(\n                 isDebugDynamicAccesses: isDebugDynamicAccesses,\n               }\n             : {}),\n-\n+          cacheComponents: Boolean(nextConfig.cacheComponents),\n           experimental: {\n             isRoutePPREnabled,\n             expireTime: nextConfig.expireTime,\n             staleTimes: nextConfig.experimental.staleTimes,\n-            cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n             clientSegmentCache: Boolean(\n               nextConfig.experimental.clientSegmentCache\n             ),\n@@ -739,9 +738,7 @@ export async function handler(\n         // contains param references, and therefore we can't use the fallback.\n         if (\n           isRoutePPREnabled &&\n-          (nextConfig.experimental.cacheComponents\n-            ? !isDynamicRSCRequest\n-            : !isRSCRequest)\n+          (nextConfig.cacheComponents ? !isDynamicRSCRequest : !isRSCRequest)\n         ) {\n           const cacheKey =\n             isProduction && typeof prerenderInfo?.fallback === 'string'\n@@ -1192,7 +1189,7 @@ export async function handler(\n         if (typeof cachedData.rscData === 'undefined') {\n           // If the response is not an RSC response, then we can't serve it.\n           if (cachedData.html.contentType !== RSC_CONTENT_TYPE_HEADER) {\n-            if (nextConfig.experimental.cacheComponents) {\n+            if (nextConfig.cacheComponents) {\n               res.statusCode = 404\n               return sendRenderResult({\n                 req,"
        },
        {
            "sha": "c6c357afdd9fc7629f749021bcea7509042d4a77",
            "filename": "packages/next/src/build/templates/app-route.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-route.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-route.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-route.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -190,9 +190,9 @@ export async function handler(\n     prerenderManifest,\n     renderOpts: {\n       experimental: {\n-        cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n         authInterrupts: Boolean(nextConfig.experimental.authInterrupts),\n       },\n+      cacheComponents: Boolean(nextConfig.cacheComponents),\n       supportsDynamicResponse,\n       incrementalCache: getRequestMeta(req, 'incrementalCache'),\n       cacheLifeProfiles: nextConfig.experimental?.cacheLife,"
        },
        {
            "sha": "dc7d0d2dcd064cf5975468aaeb7a514d6009b76b",
            "filename": "packages/next/src/build/templates/edge-ssr-app.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr-app.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -155,12 +155,11 @@ async function requestHandler(\n       cacheLifeProfiles: nextConfig.experimental.cacheLife,\n       basePath: nextConfig.basePath,\n       serverActions: nextConfig.experimental.serverActions,\n-\n+      cacheComponents: Boolean(nextConfig.cacheComponents),\n       experimental: {\n         isRoutePPREnabled: false,\n         expireTime: nextConfig.expireTime,\n         staleTimes: nextConfig.experimental.staleTimes,\n-        cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n         clientSegmentCache: Boolean(nextConfig.experimental.clientSegmentCache),\n         dynamicOnHover: Boolean(nextConfig.experimental.dynamicOnHover),\n         inlineCss: Boolean(nextConfig.experimental.inlineCss),"
        },
        {
            "sha": "31e60fa588ed27567afb35a8b69d3086344391ec",
            "filename": "packages/next/src/build/webpack-config.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -687,7 +687,7 @@ export default async function getBaseWebpackConfig(\n     : distDir\n \n   const conditionNames = [\n-    ...(config.experimental?.cacheComponents === true ? ['next-js'] : []),\n+    ...(config.cacheComponents === true ? ['next-js'] : []),\n     ...(isEdgeServer ? [edgeConditionName] : []),\n     // inherits Webpack's default conditions\n     '...',\n@@ -1555,8 +1555,8 @@ export default async function getBaseWebpackConfig(\n         ...getNextRootParamsRules({\n           isRootParamsEnabled:\n             config.experimental.rootParams ??\n-            // `experimental.cacheComponents` implies `experimental.rootParams`.\n-            config.experimental.cacheComponents ??\n+            // `cacheComponents` implies `experimental.rootParams`.\n+            config.cacheComponents ??\n             false,\n           isClient,\n           appDir,"
        },
        {
            "sha": "3fce4d7fd3f6d0e91c5ec0a423dc6b46d4166585",
            "filename": "packages/next/src/build/webpack/loaders/next-swc-loader.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-swc-loader.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-swc-loader.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-swc-loader.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -149,7 +149,7 @@ async function loaderTransform(\n     development:\n       this.mode === 'development' ||\n       !!nextConfig.experimental?.allowDevelopmentBuild,\n-    isCacheComponents: nextConfig.experimental?.cacheComponents,\n+    isCacheComponents: nextConfig.cacheComponents,\n     hasReactRefresh,\n     modularizeImports: nextConfig?.modularizeImports,\n     optimizePackageImports: nextConfig?.experimental?.optimizePackageImports,\n@@ -221,7 +221,7 @@ function shouldTrackDynamicImports(loaderOptions: SWCLoaderOptions): boolean {\n   // (Note: logic duplicated in crates/next-core/src/next_server/transforms.rs)\n   const { nextConfig, bundleLayer, compilerType } = loaderOptions\n   return (\n-    !!nextConfig.experimental?.cacheComponents &&\n+    !!nextConfig.cacheComponents &&\n     // NOTE: `server` means nodejs. `cacheComponents` is not supported in the edge runtime, so we want to exclude it.\n     // (also, the code generated by the dynamic imports transform relies on `CacheSignal`, which uses nodejs-specific APIs)\n     compilerType === COMPILER_NAMES.server &&"
        },
        {
            "sha": "586c16dd1b14029fb9c083ce5095a29d4af7620e",
            "filename": "packages/next/src/export/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -363,6 +363,7 @@ async function exportAppImpl(\n     distDir,\n     dev: false,\n     basePath: nextConfig.basePath,\n+    cacheComponents: nextConfig.cacheComponents ?? false,\n     trailingSlash: nextConfig.trailingSlash,\n     locales: i18n?.locales,\n     locale: i18n?.defaultLocale,\n@@ -394,7 +395,6 @@ async function exportAppImpl(\n       clientTraceMetadata: nextConfig.experimental.clientTraceMetadata,\n       expireTime: nextConfig.expireTime,\n       staleTimes: nextConfig.experimental.staleTimes,\n-      cacheComponents: nextConfig.experimental.cacheComponents ?? false,\n       clientSegmentCache:\n         nextConfig.experimental.clientSegmentCache === 'client-only'\n           ? 'client-only'\n@@ -625,7 +625,7 @@ async function exportAppImpl(\n   let initialPhaseExportPaths: ExportPathEntry[] = []\n   const finalPhaseExportPaths: ExportPathEntry[] = []\n \n-  if (renderOpts.experimental.cacheComponents) {\n+  if (renderOpts.cacheComponents) {\n     for (const exportPath of allExportPaths) {\n       if (exportPath._allowEmptyStaticShell) {\n         finalPhaseExportPaths.push(exportPath)"
        },
        {
            "sha": "7a51de8291ab2ff3c30e9909248bad7d65aee6d5",
            "filename": "packages/next/src/export/routes/app-page.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-page.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -135,7 +135,7 @@ export async function exportAppPage(\n       if (\n         !fallbackRouteParams ||\n         fallbackRouteParams.size === 0 ||\n-        renderOpts.experimental.cacheComponents\n+        renderOpts.cacheComponents\n       ) {\n         throw new Error(`Invariant: failed to get page data for ${path}`)\n       }\n@@ -241,7 +241,7 @@ export async function exportAppPage(\n       renderResumeDataCache: renderResumeDataCache\n         ? await stringifyResumeDataCache(\n             renderResumeDataCache,\n-            renderOpts.experimental.cacheComponents\n+            renderOpts.cacheComponents\n           )\n         : undefined,\n     }"
        },
        {
            "sha": "e9fbaf6573bb5577015e58af7980bdea1081f170",
            "filename": "packages/next/src/export/routes/app-route.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-route.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-route.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fapp-route.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -47,9 +47,8 @@ export async function exportAppRoute(\n       },\n   htmlFilepath: string,\n   fileWriter: MultiFileWriter,\n-  experimental: Required<\n-    Pick<ExperimentalConfig, 'cacheComponents' | 'authInterrupts'>\n-  >,\n+  cacheComponents: boolean,\n+  experimental: Required<Pick<ExperimentalConfig, 'authInterrupts'>>,\n   buildId: string\n ): Promise<ExportRouteResult> {\n   // Ensure that the URL is absolute.\n@@ -79,6 +78,7 @@ export async function exportAppRoute(\n       notFoundRoutes: [],\n     },\n     renderOpts: {\n+      cacheComponents,\n       experimental,\n       nextExport: true,\n       supportsDynamicResponse: false,\n@@ -107,7 +107,7 @@ export async function exportAppRoute(\n       // expect that anything dynamic in the GET handler will make it dynamic\n       // and thus avoid the cache surprises that led to us removing static gen\n       // unless specifically opted into\n-      experimental.cacheComponents !== true\n+      cacheComponents !== true\n     ) {\n       return { cacheControl: { revalidate: 0, expire: undefined } }\n     }"
        },
        {
            "sha": "aeaab65829680d6436d76aa4cd106d673e2ece25",
            "filename": "packages/next/src/export/worker.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -239,6 +239,7 @@ async function exportPageImpl(\n       commonRenderOpts.cacheLifeProfiles,\n       htmlFilepath,\n       fileWriter,\n+      commonRenderOpts.cacheComponents,\n       commonRenderOpts.experimental,\n       buildId\n     )"
        },
        {
            "sha": "5944cb7e868e3aeeaeeae3ff6ae057aa0f02b74f",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 15,
            "deletions": 13,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1497,7 +1497,7 @@ async function renderToHTMLOrFlightImpl(\n     serverActions,\n     assetPrefix = '',\n     enableTainting,\n-    experimental,\n+    cacheComponents,\n   } = renderOpts\n \n   // We need to expose the bundled `require` API globally for\n@@ -1511,7 +1511,7 @@ async function renderToHTMLOrFlightImpl(\n     // module loading from causing a prerender to abort too early.\n \n     const shouldTrackModuleLoading = () => {\n-      if (!renderOpts.experimental.cacheComponents) {\n+      if (!cacheComponents) {\n         return false\n       }\n       if (renderOpts.dev) {\n@@ -1565,7 +1565,7 @@ async function renderToHTMLOrFlightImpl(\n   if (\n     process.env.NODE_ENV === 'development' &&\n     renderOpts.setIsrStatus &&\n-    !experimental.cacheComponents\n+    !cacheComponents\n   ) {\n     // Reset the ISR status at start of request.\n     const { pathname } = new URL(req.url || '/', 'http://n')\n@@ -1844,7 +1844,7 @@ async function renderToHTMLOrFlightImpl(\n     if (\n       process.env.NODE_ENV === 'development' &&\n       renderOpts.setIsrStatus &&\n-      !experimental.cacheComponents &&\n+      !cacheComponents &&\n       // Only pages using the Node runtime can use ISR, so we only need to\n       // update the status for those.\n       // The type check here ensures that `req` is correctly typed, and the\n@@ -1867,7 +1867,7 @@ async function renderToHTMLOrFlightImpl(\n         if (\n           process.env.NODE_ENV === 'development' &&\n           process.env.NEXT_RUNTIME !== 'edge' &&\n-          experimental.cacheComponents\n+          cacheComponents\n         ) {\n           return generateDynamicFlightRenderResultWithCachesInDev(\n             req,\n@@ -2193,6 +2193,7 @@ async function renderToStream(\n     shouldWaitOnAllReady,\n     subresourceIntegrityManifest,\n     supportsDynamicResponse,\n+    cacheComponents,\n   } = renderOpts\n \n   assertClientReferenceManifest(clientReferenceManifest)\n@@ -2292,7 +2293,7 @@ async function renderToStream(\n       // Edge routes never prerender so we don't have a Prerender environment for anything in edge runtime\n       process.env.NEXT_RUNTIME !== 'edge' &&\n       // We only have a Prerender environment for projects opted into cacheComponents\n-      experimental.cacheComponents &&\n+      cacheComponents &&\n       // We only do this flow if we can safely recreate the store from scratch\n       // (which is not the case for renders after an action)\n       createRequestStore\n@@ -3645,6 +3646,7 @@ async function prerenderToStream(\n     page,\n     reactMaxHeadersLength,\n     subresourceIntegrityManifest,\n+    cacheComponents,\n   } = renderOpts\n \n   assertClientReferenceManifest(clientReferenceManifest)\n@@ -3750,7 +3752,7 @@ async function prerenderToStream(\n   let prerenderStore: PrerenderStore | null = null\n \n   try {\n-    if (experimental.cacheComponents) {\n+    if (cacheComponents) {\n       /**\n        * cacheComponents with PPR\n        *\n@@ -4344,13 +4346,13 @@ async function prerenderToStream(\n               : DynamicHTMLPreludeState.Full,\n             fallbackRouteParams,\n             resumeDataCache,\n-            experimental.cacheComponents\n+            cacheComponents\n           )\n         } else {\n           // Dynamic Data case\n           metadata.postponed = await getDynamicDataPostponedState(\n             resumeDataCache,\n-            experimental.cacheComponents\n+            cacheComponents\n           )\n         }\n         reactServerResult.consume()\n@@ -4576,13 +4578,13 @@ async function prerenderToStream(\n               : DynamicHTMLPreludeState.Full,\n             fallbackRouteParams,\n             prerenderResumeDataCache,\n-            experimental.cacheComponents\n+            cacheComponents\n           )\n         } else {\n           // Dynamic Data case.\n           metadata.postponed = await getDynamicDataPostponedState(\n             prerenderResumeDataCache,\n-            experimental.cacheComponents\n+            cacheComponents\n           )\n         }\n         // Regardless of whether this is the Dynamic HTML or Dynamic Data case we need to ensure we include\n@@ -4608,7 +4610,7 @@ async function prerenderToStream(\n         // Rendering the fallback case.\n         metadata.postponed = await getDynamicDataPostponedState(\n           prerenderResumeDataCache,\n-          experimental.cacheComponents\n+          cacheComponents\n         )\n \n         return {\n@@ -5114,7 +5116,7 @@ async function collectSegmentData(\n   const selectStaleTime = createSelectStaleTime(renderOpts.experimental)\n   const staleTime = selectStaleTime(prerenderStore.stale)\n   return await ComponentMod.collectSegmentData(\n-    renderOpts.experimental.cacheComponents,\n+    renderOpts.cacheComponents,\n     fullPageDataBuffer,\n     staleTime,\n     clientReferenceManifest.clientModules as ManifestNode,"
        },
        {
            "sha": "9e13e26468ec8a11f7317d914efecb46ddd7d9e4",
            "filename": "packages/next/src/server/app-render/postponed-state.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fpostponed-state.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fpostponed-state.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fpostponed-state.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -21,8 +21,7 @@ export function createMockOpaqueFallbackRouteParams(\n   return new Map(Object.entries(params))\n }\n \n-const isCacheComponentsEnabled =\n-  process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const isCacheComponentsEnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n describe('getDynamicHTMLPostponedState', () => {\n   it('serializes a HTML postponed state with fallback params', async () => {"
        },
        {
            "sha": "5e25d56b18bebc21b8e1cb6312880bb8db4f0505",
            "filename": "packages/next/src/server/app-render/types.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -77,6 +77,7 @@ export interface RenderOptsPartial {\n   err?: Error | null\n   dev?: boolean\n   basePath: string\n+  cacheComponents: boolean\n   trailingSlash: boolean\n   images: ImageConfigComplete\n   clientReferenceManifest?: DeepReadonly<ClientReferenceManifest>\n@@ -130,7 +131,6 @@ export interface RenderOptsPartial {\n     expireTime: number | undefined\n     staleTimes: ExperimentalConfig['staleTimes'] | undefined\n     clientTraceMetadata: string[] | undefined\n-    cacheComponents: boolean\n     clientSegmentCache: boolean | 'client-only'\n \n     /**"
        },
        {
            "sha": "990dfb3e85bb3b8c326a4b1988194a7ed21a456d",
            "filename": "packages/next/src/server/async-storage/work-store.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fasync-storage%2Fwork-store.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fasync-storage%2Fwork-store.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fasync-storage%2Fwork-store.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -25,12 +25,13 @@ export type WorkStoreContext = {\n     cacheLifeProfiles?: { [profile: string]: CacheLife }\n     incrementalCache?: IncrementalCache\n     isOnDemandRevalidate?: boolean\n+    cacheComponents: boolean\n     fetchCache?: AppSegmentConfig['fetchCache']\n     isPossibleServerAction?: boolean\n     pendingWaitUntil?: Promise<any>\n     experimental: Pick<\n       RenderOpts['experimental'],\n-      'isRoutePPREnabled' | 'cacheComponents' | 'authInterrupts'\n+      'isRoutePPREnabled' | 'authInterrupts'\n     >\n \n     /**\n@@ -138,7 +139,7 @@ export function createWorkStore({\n     nonce,\n \n     afterContext: createAfterContext(renderOpts),\n-    cacheComponentsEnabled: renderOpts.experimental.cacheComponents,\n+    cacheComponentsEnabled: renderOpts.cacheComponents,\n     dev: isDevelopment,\n     previouslyRevalidatedTags,\n     refreshTagsByCacheKind: createRefreshTagsByCacheKind(),"
        },
        {
            "sha": "b03b66698443f138a829881b28d5618884be29a7",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -545,11 +545,11 @@ export default abstract class Server<\n       isExperimentalCompile: this.nextConfig.experimental.isExperimentalCompile,\n       // `htmlLimitedBots` is passed to server as serialized config in string format\n       htmlLimitedBots: this.nextConfig.htmlLimitedBots,\n+      cacheComponents: this.nextConfig.cacheComponents ?? false,\n       experimental: {\n         expireTime: this.nextConfig.expireTime,\n         staleTimes: this.nextConfig.experimental.staleTimes,\n         clientTraceMetadata: this.nextConfig.experimental.clientTraceMetadata,\n-        cacheComponents: this.nextConfig.experimental.cacheComponents ?? false,\n         clientSegmentCache:\n           this.nextConfig.experimental.clientSegmentCache === 'client-only'\n             ? 'client-only'\n@@ -2288,7 +2288,7 @@ export default abstract class Server<\n         page: components.page,\n         isAppPath,\n       })\n-      if (isAppPath && this.nextConfig.experimental.cacheComponents) {\n+      if (isAppPath && this.nextConfig.cacheComponents) {\n         if (pathsResults.prerenderedRoutes?.length) {\n           let smallestFallbackRouteParams = null\n           for (const route of pathsResults.prerenderedRoutes) {"
        },
        {
            "sha": "7386d405947467db6238d5d7c35c15d6636df9da",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -354,6 +354,7 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n     assetPrefix: z.string().optional(),\n     basePath: z.string().optional(),\n     bundlePagesRouterDependencies: z.boolean().optional(),\n+    cacheComponents: z.boolean().optional(),\n     cacheHandler: z.string().min(1).optional(),\n     cacheMaxMemorySize: z.number().optional(),\n     cleanDistDir: z.boolean().optional(),"
        },
        {
            "sha": "cc439f0dcb8b3677612bdee69a6ef2cd2d11b88c",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 12,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -577,8 +577,8 @@ export interface ExperimentalConfig {\n   clientTraceMetadata?: string[]\n \n   /**\n-   * @deprecated This configuration option has been merged into `experimental.cacheComponents`.\n-   * The Partial Prerendering feature is still available via `experimental.cacheComponents`.\n+   * @deprecated This configuration option has been merged into `cacheComponents`.\n+   * The Partial Prerendering feature is still available via `cacheComponents`.\n    */\n   ppr?: ExperimentalPPRConfig\n \n@@ -685,6 +685,11 @@ export interface ExperimentalConfig {\n    */\n   reactDebugChannel?: boolean\n \n+  /**\n+   * @deprecated use top-level `cacheComponents` instead\n+   */\n+  cacheComponents?: boolean\n+\n   /**\n    * The number of times to retry static generation (per page) before giving up.\n    */\n@@ -705,14 +710,6 @@ export interface ExperimentalConfig {\n    */\n   serverComponentsHmrCache?: boolean\n \n-  /**\n-   * When enabled, will cause IO in App Router to be excluded from prerenders,\n-   * unless explicitly cached. This also enables the experimental Partial\n-   * Prerendering feature of Next.js, and it enables `react@experimental` being\n-   * used for the `app` directory.\n-   */\n-  cacheComponents?: boolean\n-\n   /**\n    * Render <style> tags inline in the HTML for imported CSS assets.\n    * Supports app-router in production mode only.\n@@ -880,7 +877,7 @@ export type ExportPathMap = {\n     /**\n      * When true, the page is prerendered as a fallback shell, while allowing\n      * any dynamic accesses to result in an empty shell. This is the case when\n-     * the app has `experimental.ppr` and `experimental.cacheComponents` enabled, and\n+     * the app has `experimental.ppr` and `cacheComponents` enabled, and\n      * there are also routes prerendered with a more complete set of params.\n      * Prerendering those routes would catch any invalid dynamic accesses.\n      *\n@@ -1264,6 +1261,15 @@ export interface NextConfig {\n    */\n   enablePrerenderSourceMaps?: boolean\n \n+  /**\n+   * When enabled, in development and build, Next.js will automatically cache\n+   * page-level components and functions for faster builds and rendering. This\n+   * includes Partial Prerendering support.\n+   *\n+   * @see [Cache Components documentation](https://nextjs.org/docs/app/api-reference/config/next-config-js/cacheComponents)\n+   */\n+  cacheComponents?: boolean\n+\n   /**\n    * period (in seconds) where the server allow to serve stale cache\n    */\n@@ -1391,6 +1397,7 @@ export const defaultConfig = Object.freeze({\n   allowedDevOrigins: undefined,\n   // Will default to cacheComponents value.\n   enablePrerenderSourceMaps: undefined,\n+  cacheComponents: false,\n   experimental: {\n     adapterPath: process.env.NEXT_ADAPTER_PATH || undefined,\n     useSkewCookie: false,\n@@ -1508,7 +1515,6 @@ export const defaultConfig = Object.freeze({\n     serverComponentsHmrCache: true,\n     staticGenerationMaxConcurrency: 8,\n     staticGenerationMinPagesPerWorker: 25,\n-    cacheComponents: false,\n     inlineCss: false,\n     useCache: undefined,\n     slowModuleDetection: undefined,"
        },
        {
            "sha": "3632c72de8b085f4966cace91e810a0685045c7a",
            "filename": "packages/next/src/server/config.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 39,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -82,29 +82,6 @@ describe('loadConfig', () => {\n       delete process.env.__NEXT_VERSION\n     })\n \n-    it('should not print a stack trace when throwing an error', async () => {\n-      const loadConfigPromise = loadConfig(PHASE_PRODUCTION_BUILD, __dirname, {\n-        customConfig: {\n-          experimental: {\n-            cacheComponents: true,\n-          },\n-        },\n-      })\n-\n-      await expect(loadConfigPromise).rejects.toThrow(\n-        /The experimental feature \"experimental.cacheComponents\" can only be enabled when using the latest canary version of Next.js./\n-      )\n-\n-      try {\n-        await loadConfigPromise\n-      } catch (error: any) {\n-        expect(error).toBeInstanceOf(Error)\n-\n-        // Check that there's no stack trace\n-        expect(error.stack).toBeUndefined()\n-      }\n-    })\n-\n     it('errors when using PPR if not in canary', async () => {\n       await expect(\n         loadConfig(PHASE_PRODUCTION_BUILD, __dirname, {\n@@ -115,21 +92,7 @@ describe('loadConfig', () => {\n           },\n         })\n       ).rejects.toThrow(\n-        /`experimental\\.ppr` has been merged into `experimental\\.cacheComponents`/\n-      )\n-    })\n-\n-    it('errors when using cacheComponents if not in canary', async () => {\n-      await expect(\n-        loadConfig(PHASE_PRODUCTION_BUILD, __dirname, {\n-          customConfig: {\n-            experimental: {\n-              cacheComponents: true,\n-            },\n-          },\n-        })\n-      ).rejects.toThrow(\n-        /The experimental feature \"experimental.cacheComponents\" can only be enabled when using the latest canary version of Next.js./\n+        /`experimental\\.ppr` has been merged into `cacheComponents`/\n       )\n     })\n \n@@ -167,7 +130,7 @@ describe('loadConfig', () => {\n           },\n         })\n       ).rejects.toThrow(\n-        /`experimental\\.ppr` has been merged into `experimental\\.cacheComponents`/\n+        /`experimental\\.ppr` has been merged into `cacheComponents`/\n       )\n     })\n   })"
        },
        {
            "sha": "c7b7e5d7ef8d12b01e08a768041f2f1bf73835ef",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 13,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -380,11 +380,7 @@ function assignDefaultsAndValidate(\n \n   if (isStableBuild()) {\n     // Prevents usage of certain experimental features outside of canary\n-    if (result.experimental?.cacheComponents) {\n-      throw new CanaryOnlyConfigError({\n-        feature: 'experimental.cacheComponents',\n-      })\n-    } else if (result.experimental?.turbopackFileSystemCacheForBuild) {\n+    if (result.experimental?.turbopackFileSystemCacheForBuild) {\n       throw new CanaryOnlyConfigError({\n         feature: 'experimental.turbopackFileSystemCacheForBuild',\n       })\n@@ -393,7 +389,7 @@ function assignDefaultsAndValidate(\n \n   if (result.experimental.ppr) {\n     throw new HardDeprecatedConfigError(\n-      `\\`experimental.ppr\\` has been merged into \\`experimental.cacheComponents\\`. The Partial Prerendering feature is still available, but is now enabled via \\`experimental.cacheComponents\\`. Please update your ${configFileName} accordingly.`\n+      `\\`experimental.ppr\\` has been merged into \\`cacheComponents\\`. The Partial Prerendering feature is still available, but is now enabled via \\`cacheComponents\\`. Please update your ${configFileName} accordingly.`\n     )\n   }\n \n@@ -714,6 +710,13 @@ function assignDefaultsAndValidate(\n     configFileName,\n     silent\n   )\n+  warnOptionHasBeenMovedOutOfExperimental(\n+    result,\n+    'cacheComponents',\n+    'cacheComponents',\n+    configFileName,\n+    silent\n+  )\n \n   if ((result.experimental as any).outputStandalone) {\n     if (!silent) {\n@@ -1276,7 +1279,7 @@ function assignDefaultsAndValidate(\n     result.experimental.mcpServer = true\n   }\n \n-  if (result.experimental.cacheComponents) {\n+  if (result.cacheComponents) {\n     // TODO: remove once we've finished migrating internally to cacheComponents.\n     result.experimental.ppr = true\n \n@@ -1290,7 +1293,7 @@ function assignDefaultsAndValidate(\n   // we transfer the value for cacheComponents to the explicit useCache flag to ensure\n   // backwards compatibility.\n   if (result.experimental.useCache === undefined) {\n-    result.experimental.useCache = result.experimental.cacheComponents\n+    result.experimental.useCache = result.cacheComponents\n   }\n \n   // Store the distDirRoot in the config before it is modified by the isolatedDevBuild flag\n@@ -1775,19 +1778,19 @@ function enforceExperimentalFeatures(\n \n   // TODO: Remove this once we've made Cache Components the default.\n   if (\n-    process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true' &&\n+    process.env.__NEXT_CACHE_COMPONENTS === 'true' &&\n     // We do respect an explicit value in the user config.\n-    (config.experimental.cacheComponents === undefined ||\n-      (isDefaultConfig && !config.experimental.cacheComponents))\n+    (config.cacheComponents === undefined ||\n+      (isDefaultConfig && !config.cacheComponents))\n   ) {\n-    config.experimental.cacheComponents = true\n+    config.cacheComponents = true\n \n     if (configuredExperimentalFeatures) {\n       addConfiguredExperimentalFeature(\n         configuredExperimentalFeatures,\n         'cacheComponents',\n         true,\n-        'enabled by `__NEXT_EXPERIMENTAL_CACHE_COMPONENTS`'\n+        'enabled by `__NEXT_CACHE_COMPONENTS`'\n       )\n     }\n   }"
        },
        {
            "sha": "7cadd33619820b57a63141af2c5ab798783b9ede",
            "filename": "packages/next/src/server/dev/hot-middleware.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-middleware.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-middleware.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-middleware.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -269,7 +269,7 @@ export class WebpackHotMiddleware {\n     // clients as App Router / Pages Router clients explicitly, instead of\n     // inferring it from the presence of a request ID.\n \n-    if (!this.config.experimental.cacheComponents) {\n+    if (!this.config.cacheComponents) {\n       for (const wsClient of this.clientsByRequestId.values()) {\n         this.publishToClient(wsClient, message)\n       }"
        },
        {
            "sha": "e3a7a3b698d5d351c472679f65fe155266fe68a4",
            "filename": "packages/next/src/server/dev/hot-reloader-turbopack.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -881,7 +881,7 @@ export async function createHotReloaderTurbopack(\n         if (requestId) {\n           clientsByRequestId.set(requestId, client)\n           onUpgrade(client, {\n-            isLegacyClient: !nextConfig.experimental.cacheComponents,\n+            isLegacyClient: !nextConfig.cacheComponents,\n           })\n         } else {\n           clientsWithoutRequestId.add(client)\n@@ -1102,7 +1102,7 @@ export async function createHotReloaderTurbopack(\n       // clients as App Router / Pages Router clients explicitly, instead of\n       // inferring it from the presence of a request ID.\n \n-      if (!nextConfig.experimental.cacheComponents) {\n+      if (!nextConfig.cacheComponents) {\n         for (const client of clientsByRequestId.values()) {\n           client.send(payload)\n         }"
        },
        {
            "sha": "fddbd7c3a4e65b1980c6f1ed12cfb3020955e624",
            "filename": "packages/next/src/server/dev/hot-reloader-webpack.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -446,8 +446,7 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n       // Router clients are also considered legacy clients. TODO: Maybe mark\n       // clients as App Router / Pages Router clients explicitly, instead of\n       // inferring it from the presence of a request ID.\n-      const isLegacyClient =\n-        !requestId || !this.config.experimental.cacheComponents\n+      const isLegacyClient = !requestId || !this.config.cacheComponents\n \n       callback(client, { isLegacyClient })\n "
        },
        {
            "sha": "399d97d2fbce6cdafefe7c6d6583c70ac78b5b90",
            "filename": "packages/next/src/server/dev/next-dev-server.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -751,9 +751,7 @@ export default class DevServer extends Server {\n           config: {\n             pprConfig: this.nextConfig.experimental.ppr,\n             configFileName,\n-            cacheComponents: Boolean(\n-              this.nextConfig.experimental.cacheComponents\n-            ),\n+            cacheComponents: Boolean(this.nextConfig.cacheComponents),\n           },\n           httpAgentOptions,\n           locales,"
        },
        {
            "sha": "6c1eb99b727843d227627e3b9419491649d5a662",
            "filename": "packages/next/src/server/node-environment-extensions/date.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fdate.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fdate.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fdate.tsx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -52,6 +52,6 @@ try {\n   Date = createDate(Date)\n } catch {\n   console.error(\n-    'Failed to install `Date` class extension. When using `experimental.cacheComponents`, APIs that read the current time will not correctly trigger dynamic behavior.'\n+    'Failed to install `Date` class extension. When using `cacheComponents`, APIs that read the current time will not correctly trigger dynamic behavior.'\n   )\n }"
        },
        {
            "sha": "8243d3f14d40669b7d4e88006e36377a46d9ab24",
            "filename": "packages/next/src/server/node-environment-extensions/node-crypto.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fnode-crypto.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fnode-crypto.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fnode-crypto.tsx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -28,7 +28,7 @@ if (process.env.NEXT_RUNTIME === 'edge') {\n     }\n   } catch {\n     console.error(\n-      `Failed to install ${randomUUIDExpression} extension. When using \\`experimental.cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n+      `Failed to install ${randomUUIDExpression} extension. When using \\`cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n     )\n   }\n \n@@ -45,7 +45,7 @@ if (process.env.NEXT_RUNTIME === 'edge') {\n     }\n   } catch {\n     console.error(\n-      `Failed to install ${randomBytesExpression} extension. When using \\`experimental.cacheComponents\\` calling this function without a callback argument will not correctly trigger dynamic behavior.`\n+      `Failed to install ${randomBytesExpression} extension. When using \\`cacheComponents\\` calling this function without a callback argument will not correctly trigger dynamic behavior.`\n     )\n   }\n \n@@ -60,7 +60,7 @@ if (process.env.NEXT_RUNTIME === 'edge') {\n     }\n   } catch {\n     console.error(\n-      `Failed to install ${randomFillSyncExpression} extension. When using \\`experimental.cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n+      `Failed to install ${randomFillSyncExpression} extension. When using \\`cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n     )\n   }\n \n@@ -77,7 +77,7 @@ if (process.env.NEXT_RUNTIME === 'edge') {\n     }\n   } catch {\n     console.error(\n-      `Failed to install ${randomBytesExpression} extension. When using \\`experimental.cacheComponents\\` calling this function without a callback argument will not correctly trigger dynamic behavior.`\n+      `Failed to install ${randomBytesExpression} extension. When using \\`cacheComponents\\` calling this function without a callback argument will not correctly trigger dynamic behavior.`\n     )\n   }\n \n@@ -92,7 +92,7 @@ if (process.env.NEXT_RUNTIME === 'edge') {\n     }\n   } catch {\n     console.error(\n-      `Failed to install ${generatePrimeSyncExpression} extension. When using \\`experimental.cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n+      `Failed to install ${generatePrimeSyncExpression} extension. When using \\`cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n     )\n   }\n \n@@ -107,7 +107,7 @@ if (process.env.NEXT_RUNTIME === 'edge') {\n     }\n   } catch {\n     console.error(\n-      `Failed to install ${generateKeyPairSyncExpression} extension. When using \\`experimental.cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n+      `Failed to install ${generateKeyPairSyncExpression} extension. When using \\`cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n     )\n   }\n \n@@ -121,7 +121,7 @@ if (process.env.NEXT_RUNTIME === 'edge') {\n     }\n   } catch {\n     console.error(\n-      `Failed to install ${generateKeySyncExpression} extension. When using \\`experimental.cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n+      `Failed to install ${generateKeySyncExpression} extension. When using \\`cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n     )\n   }\n }"
        },
        {
            "sha": "4e0af813ae609a72cae4cf0e677bb89a2279d369",
            "filename": "packages/next/src/server/node-environment-extensions/random.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Frandom.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Frandom.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Frandom.tsx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -21,6 +21,6 @@ try {\n   Object.defineProperty(Math.random, 'name', { value: 'random' })\n } catch {\n   console.error(\n-    `Failed to install ${expression} extension. When using \\`experimental.cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n+    `Failed to install ${expression} extension. When using \\`cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n   )\n }"
        },
        {
            "sha": "fecf6617645053f63aefa3b737b7efaa1c615348",
            "filename": "packages/next/src/server/node-environment-extensions/web-crypto.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fweb-crypto.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fweb-crypto.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnode-environment-extensions%2Fweb-crypto.tsx?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -31,7 +31,7 @@ try {\n   }\n } catch {\n   console.error(\n-    `Failed to install ${getRandomValuesExpression} extension. When using \\`experimental.cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n+    `Failed to install ${getRandomValuesExpression} extension. When using \\`cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n   )\n }\n \n@@ -44,6 +44,6 @@ try {\n   } as typeof _randomUUID\n } catch {\n   console.error(\n-    `Failed to install ${getRandomValuesExpression} extension. When using \\`experimental.cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n+    `Failed to install ${getRandomValuesExpression} extension. When using \\`cacheComponents\\` calling this function will not correctly trigger dynamic behavior.`\n   )\n }"
        },
        {
            "sha": "22372277c24e1929f22e7fff44f557224cbc1cda",
            "filename": "packages/next/src/server/resume-data-cache/resume-data-cache.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fresume-data-cache%2Fresume-data-cache.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fresume-data-cache%2Fresume-data-cache.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fresume-data-cache%2Fresume-data-cache.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -6,8 +6,7 @@ import { createPrerenderResumeDataCache } from './resume-data-cache'\n import { streamFromString } from '../stream-utils/node-web-streams-helper'\n import { inflateSync } from 'node:zlib'\n \n-const isCacheComponentsEnabled =\n-  process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const isCacheComponentsEnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n function createMockedCache() {\n   const cache = createPrerenderResumeDataCache()"
        },
        {
            "sha": "c10944bd0d9a58022ac4569fd086e5d5bd9e77b3",
            "filename": "packages/next/src/server/route-modules/app-route/module.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-route%2Fmodule.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-route%2Fmodule.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-route%2Fmodule.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -310,8 +310,7 @@ export class AppRouteRouteModule extends RouteModule<\n     context: AppRouteRouteHandlerContext\n   ) {\n     const isStaticGeneration = workStore.isStaticGeneration\n-    const cacheComponentsEnabled =\n-      !!context.renderOpts.experimental?.cacheComponents\n+    const cacheComponentsEnabled = !!context.renderOpts.cacheComponents\n \n     // Patch the global fetch.\n     patchFetch({"
        },
        {
            "sha": "286e2a5d5fd9270b75c9b0963f4c0687a9e45269",
            "filename": "packages/next/src/server/use-cache/cache-life.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fcache-life.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fcache-life.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fcache-life.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -88,7 +88,7 @@ function validateCacheLife(profile: CacheLife) {\n export function cacheLife(profile: CacheLifeProfiles | CacheLife): void {\n   if (!process.env.__NEXT_USE_CACHE) {\n     throw new Error(\n-      '`cacheLife()` is only available with the `experimental.cacheComponents` config.'\n+      '`cacheLife()` is only available with the `cacheComponents` config.'\n     )\n   }\n "
        },
        {
            "sha": "2fba69562876033219e04866f24297aca4b274de",
            "filename": "packages/next/src/server/use-cache/cache-tag.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fcache-tag.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fcache-tag.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fcache-tag.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -4,7 +4,7 @@ import { validateTags } from '../lib/patch-fetch'\n export function cacheTag(...tags: string[]): void {\n   if (!process.env.__NEXT_USE_CACHE) {\n     throw new Error(\n-      '`cacheTag()` is only available with the `experimental.cacheComponents` config.'\n+      '`cacheTag()` is only available with the `cacheComponents` config.'\n     )\n   }\n "
        },
        {
            "sha": "61da223ea23746309f17cc70c4d361e66ba9ee12",
            "filename": "packages/next/src/server/web/adapter.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fadapter.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fadapter.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fadapter.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -289,9 +289,9 @@ export async function adapter(\n               renderOpts: {\n                 cacheLifeProfiles:\n                   params.request.nextConfig?.experimental?.cacheLife,\n+                cacheComponents: false,\n                 experimental: {\n                   isRoutePPREnabled: false,\n-                  cacheComponents: false,\n                   authInterrupts:\n                     !!params.request.nextConfig?.experimental?.authInterrupts,\n                 },"
        },
        {
            "sha": "7a4c675f5af0c2eb8c6e7691629db124ea4cbe7d",
            "filename": "packages/next/src/server/web/edge-route-module-wrapper.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fedge-route-module-wrapper.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fedge-route-module-wrapper.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fweb%2Fedge-route-module-wrapper.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -107,8 +107,8 @@ export class EdgeRouteModuleWrapper {\n         waitUntil,\n         onClose: closeController.onClose.bind(closeController),\n         onAfterTaskError: undefined,\n+        cacheComponents: !!process.env.__NEXT_CACHE_COMPONENTS,\n         experimental: {\n-          cacheComponents: !!process.env.__NEXT_CACHE_COMPONENTS,\n           authInterrupts: !!process.env.__NEXT_EXPERIMENTAL_AUTH_INTERRUPTS,\n         },\n         cacheLifeProfiles: this.nextConfig.experimental.cacheLife,"
        },
        {
            "sha": "c4699956df28210684fd34d53e994a20b1c54626",
            "filename": "test/cache-components-tests-manifest.json",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fcache-components-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fcache-components-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fcache-components-tests-manifest.json?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "previous_filename": "test/experimental-tests-manifest.json"
        },
        {
            "sha": "d6f5f10de5b059ff93a1c0cffb9270fa1d9126a7",
            "filename": "test/development/acceptance-app/hydration-error.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fhydration-error.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -9,7 +9,7 @@ import {\n   retry,\n } from 'next-test-utils'\n \n-const pprEnabled = process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const pprEnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n describe('Error overlay for hydration errors in App router', () => {\n   const { next, isTurbopack } = nextTestSetup({"
        },
        {
            "sha": "291b5798e3b40ffa36dd78f17c5b61212cc33aa5",
            "filename": "test/development/acceptance-app/rsc-build-errors.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Facceptance-app%2Frsc-build-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Facceptance-app%2Frsc-build-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Frsc-build-errors.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -311,7 +311,7 @@ describe('Error overlay - RSC build errors', () => {\n \n   describe('next/root-params', () => {\n     const isCacheComponentsEnabled =\n-      process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      process.env.__NEXT_CACHE_COMPONENTS === 'true'\n     it(\"importing 'next/root-params' when experimental.rootParams is not enabled\", async () => {\n       await using sandbox = await createSandbox(\n         next,"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/development/app-dir/cache-components-dev-cache-scope/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-cache-scope%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-cache-scope%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-cache-scope%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "5717c1511dd5dadcb8ee6756c7bea987c5f42739",
            "filename": "test/development/app-dir/cache-components-dev-errors/cache-components-dev-errors.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fcache-components-dev-errors.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -155,11 +155,11 @@ describe('Cache Components Dev Errors', () => {\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n-         \"description\": \"  x Route segment config \"revalidate\" is not compatible with \\`nextConfig.experimental.cacheComponents\\`. Please remove it.\",\n+         \"description\": \"  x Route segment config \"revalidate\" is not compatible with \\`nextConfig.cacheComponents\\`. Please remove it.\",\n          \"environmentLabel\": null,\n          \"label\": \"Build Error\",\n          \"source\": \"./app/page.tsx\n-       Error:   x Route segment config \"revalidate\" is not compatible with \\`nextConfig.experimental.cacheComponents\\`. Please remove it.\n+       Error:   x Route segment config \"revalidate\" is not compatible with \\`nextConfig.cacheComponents\\`. Please remove it.\n           ,-[1:1]\n         1 | export const revalidate = 10\n           :              ^^^^^^^^^^"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/development/app-dir/cache-components-dev-errors/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-errors%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/development/app-dir/cache-components-dev-fallback-validation/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-fallback-validation%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-fallback-validation%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-fallback-validation%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "fa33c7c54f24cc9c85addd95f17ab7b6ebc6d751",
            "filename": "test/development/app-dir/cache-components-dev-warmup/next.config.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-warmup%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-warmup%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-dev-warmup%2Fnext.config.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,9 +1,7 @@\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n export default nextConfig"
        },
        {
            "sha": "d8db637e2be20e74b43987a2da92e6effef52e79",
            "filename": "test/development/app-dir/cache-components-warnings/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-warnings%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fcache-components-warnings%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-components-warnings%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,5 +1,3 @@\n module.exports = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }"
        },
        {
            "sha": "08319c5659576ab33f46b1365861a388498a0905",
            "filename": "test/development/app-dir/source-mapping/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fsource-mapping%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fsource-mapping%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsource-mapping%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -14,9 +14,7 @@ const nextConfig = {\n       ],\n     }\n   },\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "50e02c9558329af83466f335efe44b0c5aa944d9",
            "filename": "test/development/app-dir/source-mapping/source-mapping.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fsource-mapping%2Fsource-mapping.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fapp-dir%2Fsource-mapping%2Fsource-mapping.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsource-mapping%2Fsource-mapping.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,8 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import { retry } from 'next-test-utils'\n \n-const isCacheComponentsEnabled =\n-  process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const isCacheComponentsEnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n // TODO(NAR-423): Migrate to Cache Components.\n describe.skip('source-mapping', () => {"
        },
        {
            "sha": "809284e49f2c56e240494a88e5dc85e1b5a5bf44",
            "filename": "test/development/dev-indicator/dev-indicator.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fdev-indicator%2Fdev-indicator.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fdevelopment%2Fdev-indicator%2Fdev-indicator.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fdev-indicator%2Fdev-indicator.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,8 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import { assertStaticIndicator, retry } from 'next-test-utils'\n \n-const withCacheComponents =\n-  process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const withCacheComponents = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n describe('dev indicator - route type', () => {\n   const { next } = nextTestSetup({"
        },
        {
            "sha": "6f9923b8467f842a55234eedffae6bb4aeeaa9ee",
            "filename": "test/e2e/app-dir/app-root-params-getters/fixtures/generate-static-params/next.config.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Ffixtures%2Fgenerate-static-params%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Ffixtures%2Fgenerate-static-params%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp-root-params-getters%2Ffixtures%2Fgenerate-static-params%2Fnext.config.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,9 +1,7 @@\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: {\n-    cacheComponents: true, // implies `rootParams: true`.\n-  },\n+  cacheComponents: true, // implies `rootParams: true`.\n }\n \n export default nextConfig"
        },
        {
            "sha": "0a3183cc83b72c3d4ff6fa5ff65567934b74f562",
            "filename": "test/e2e/app-dir/app-static/app-static.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fapp-static%2Fapp-static.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fapp-static%2Fapp-static.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp-static%2Fapp-static.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -40,7 +40,7 @@ describe('app-dir static/dynamic handling', () => {\n     }\n   })\n \n-  if (!process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+  if (!process.env.__NEXT_CACHE_COMPONENTS) {\n     it('should respond correctly for dynamic route with dynamicParams false in layout', async () => {\n       const res = await next.fetch('/partial-params-false/en/another')\n       expect(res.status).toBe(200)\n@@ -783,7 +783,7 @@ describe('app-dir static/dynamic handling', () => {\n \n   if (isNextStart) {\n     it('should not encode dynamic parameters as search parameters in RSC data', async () => {\n-      const data = process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\n+      const data = process.env.__NEXT_CACHE_COMPONENTS\n         ? await next.readFile('.next/server/app/blog/seb.prefetch.rsc')\n         : await next.readFile('.next/server/app/blog/seb.rsc')\n \n@@ -3338,7 +3338,7 @@ describe('app-dir static/dynamic handling', () => {\n     for (let i = 0; i < 5; i++) {\n       const res = await next.fetch('/articles/non-existent')\n \n-      if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS && !isNextDev) {\n+      if (process.env.__NEXT_CACHE_COMPONENTS && !isNextDev) {\n         expect(res.status).toBe(200)\n       } else {\n         expect(res.status).toBe(404)\n@@ -3553,7 +3553,7 @@ describe('app-dir static/dynamic handling', () => {\n     })\n   } else {\n     // TODO: re-implement this in a way that'll support PFPR\n-    if (!process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+    if (!process.env.__NEXT_CACHE_COMPONENTS) {\n       it('should not error with dynamic server usage with force-static', async () => {\n         const res = await next.fetch(\n           '/static-to-dynamic-error-forced/static-bailout-1'\n@@ -3594,7 +3594,7 @@ describe('app-dir static/dynamic handling', () => {\n       )\n     })\n \n-    if (!process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+    if (!process.env.__NEXT_CACHE_COMPONENTS) {\n       it('should properly error when dynamic = \"error\" page uses dynamic', async () => {\n         const res = await next.fetch('/dynamic-error/static-bailout-1')\n         const outputIndex = next.cliOutput.length\n@@ -4491,7 +4491,7 @@ describe('app-dir static/dynamic handling', () => {\n     expect(html).toInclude('\"noindex\"')\n     expect(html).toInclude('This page could not be found.')\n \n-    if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS && !isNextDev) {\n+    if (process.env.__NEXT_CACHE_COMPONENTS && !isNextDev) {\n       expect(res.status).toBe(200)\n     } else {\n       expect(res.status).toBe(404)"
        },
        {
            "sha": "0d7604a755c626be7afc866244c77f43cf2e73f5",
            "filename": "test/e2e/app-dir/app-static/app/dynamic-error/[id]/page.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fapp-static%2Fapp%2Fdynamic-error%2F%5Bid%5D%2Fpage.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fapp-static%2Fapp%2Fdynamic-error%2F%5Bid%5D%2Fpage.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp-static%2Fapp%2Fdynamic-error%2F%5Bid%5D%2Fpage.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -5,7 +5,7 @@ export const dynamic = 'error'\n export default async function Page(props) {\n   const params = await props.params\n   // When PPR is enabled, we will bailout on parameter access.\n-  if (!process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+  if (!process.env.__NEXT_CACHE_COMPONENTS) {\n     if (params.id.includes('static-bailout')) {\n       console.log('calling cookies', await cookies())\n     }"
        },
        {
            "sha": "85712b53b669cda63435ca1d3eb258fbf4321a2a",
            "filename": "test/e2e/app-dir/app/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fapp%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fapp%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fapp%2Findex.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -587,7 +587,7 @@ describe('app dir - basic', () => {\n   ;(isNextDev ||\n     // When PPR is enabled, the shared layouts re-render because we prefetch\n     // from the root. This will be addressed before GA.\n-    process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+    process.env.__NEXT_CACHE_COMPONENTS === 'true'\n     ? it.skip\n     : it)(\n     'should not rerender layout when navigating between routes in the same layout',\n@@ -1384,7 +1384,7 @@ describe('app dir - basic', () => {\n     ;(isNextDev ||\n       // When PPR is enabled, the shared layouts re-render because we prefetch\n       // from the root. This will be addressed before GA.\n-      process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      process.env.__NEXT_CACHE_COMPONENTS === 'true'\n       ? it.skip\n       : it)(\n       'should render the template that is a server component and rerender on navigation',"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-allow-otel-spans/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-allow-otel-spans%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-allow-otel-spans%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-allow-otel-spans%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "975d60ed2a36ef36d07ad1c05e15bbcce9378db9",
            "filename": "test/e2e/app-dir/cache-components-bot-ua/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-bot-ua%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-bot-ua%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-bot-ua%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,8 +1,6 @@\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-console/fixtures/default/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-console%2Ffixtures%2Fdefault%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-console%2Ffixtures%2Fdefault%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-console%2Ffixtures%2Fdefault%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "f721a9258ed7ff05921e4b96c1b49d43607532f0",
            "filename": "test/e2e/app-dir/cache-components-console/fixtures/hide-logs-after-abort/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-console%2Ffixtures%2Fhide-logs-after-abort%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-console%2Ffixtures%2Fhide-logs-after-abort%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-console%2Ffixtures%2Fhide-logs-after-abort%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    hideLogsAfterAbort: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { hideLogsAfterAbort: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-create-component-tree/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-create-component-tree%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-create-component-tree%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-create-component-tree%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "2c7ad512b2d29763ed18c11947d9bf3828cfa3dc",
            "filename": "test/e2e/app-dir/cache-components-dynamic-imports/bundled/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fbundled%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fbundled%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fbundled%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    prerenderEarlyExit: false,\n-  },\n+  cacheComponents: true,\n+  experimental: { prerenderEarlyExit: false },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "c437d6281fc2aa6466a86ef346d25c455b7a54e6",
            "filename": "test/e2e/app-dir/cache-components-dynamic-imports/external/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fexternal%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fexternal%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-dynamic-imports%2Fexternal%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n   serverExternalPackages: ['external-esm-pkg-with-async-import'],\n }\n "
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/console-patch/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fconsole-patch%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fconsole-patch%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fconsole-patch%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/lazy-module-init/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Flazy-module-init%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Flazy-module-init%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Flazy-module-init%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "91a5c626df5910354d407122828e7feb1118424e",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/prospective-render-errors/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fprospective-render-errors%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fprospective-render-errors%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fprospective-render-errors%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    serverMinification: false,\n-  },\n+  cacheComponents: true,\n+  experimental: { serverMinification: false },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/unstable-deprecations/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Funstable-deprecations%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Funstable-deprecations%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Funstable-deprecations%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "8d168bac45911b34c0993646b027dea11652f33b",
            "filename": "test/e2e/app-dir/cache-components-request-apis/fixtures/reject-hanging-promises-dynamic/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    serverMinification: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { serverMinification: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "8d168bac45911b34c0993646b027dea11652f33b",
            "filename": "test/e2e/app-dir/cache-components-request-apis/fixtures/reject-hanging-promises-static/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    serverMinification: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { serverMinification: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "19c293725d9fef40539459e8f19fa7839d054fe3",
            "filename": "test/e2e/app-dir/cache-components-route-handler-errors/cache-components-route-handler-errors.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fcache-components-route-handler-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fcache-components-route-handler-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fcache-components-route-handler-errors.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -38,27 +38,27 @@ describe('cache-components-route-handler-errors', () => {\n         )\n       } else {\n         expect(redbox.description).toMatchInlineSnapshot(\n-          `\"  x Route segment config \"dynamic\" is not compatible with \\`nextConfig.experimental.cacheComponents\\`. Please remove it.\"`\n+          `\"  x Route segment config \"dynamic\" is not compatible with \\`nextConfig.cacheComponents\\`. Please remove it.\"`\n         )\n       }\n       expect(redbox.source).toContain(\n-        '\"dynamic\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"dynamic\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n     } else {\n       // In build mode, check for all three errors in the output\n       expect(next.cliOutput).toContain('./app/route-with-dynamic/route.ts')\n       expect(next.cliOutput).toContain(\n-        '\"dynamic\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"dynamic\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n \n       expect(next.cliOutput).toContain('./app/route-with-revalidate/route.ts')\n       expect(next.cliOutput).toContain(\n-        '\"revalidate\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"revalidate\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n \n       expect(next.cliOutput).toContain('./app/route-with-fetchcache/route.ts')\n       expect(next.cliOutput).toContain(\n-        '\"fetchCache\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"fetchCache\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n     }\n   })"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-route-handler-errors/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-route-handler-errors%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "d65da67875b4a0708ac4f65b7f322f63e2ed847a",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/cache-components-segment-configs.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fcache-components-segment-configs.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -38,31 +38,31 @@ describe('cache-components-segment-configs', () => {\n         )\n       } else {\n         expect(redbox.description).toMatchInlineSnapshot(\n-          `\"  x Route segment config \"revalidate\" is not compatible with \\`nextConfig.experimental.cacheComponents\\`. Please remove it.\"`\n+          `\"  x Route segment config \"revalidate\" is not compatible with \\`nextConfig.cacheComponents\\`. Please remove it.\"`\n         )\n       }\n       expect(redbox.source).toContain(\n-        '\"revalidate\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"revalidate\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n     } else {\n       expect(next.cliOutput).toContain('./app/dynamic-params/[slug]/page.tsx')\n       expect(next.cliOutput).toContain(\n-        '\"dynamicParams\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"dynamicParams\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n       expect(next.cliOutput).toContain('./app/dynamic/nested/page.tsx')\n       expect(next.cliOutput).toContain('./app/dynamic/page.tsx')\n       expect(next.cliOutput).toContain(\n-        '\"dynamic\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"dynamic\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n \n       expect(next.cliOutput).toContain('./app/fetch-cache/page.tsx')\n       expect(next.cliOutput).toContain(\n-        '\"fetchCache\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"fetchCache\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n \n       expect(next.cliOutput).toContain('./app/revalidate/page.tsx')\n       expect(next.cliOutput).toContain(\n-        '\"revalidate\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+        '\"revalidate\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n       )\n     }\n   })\n@@ -99,16 +99,16 @@ describe('cache-components-segment-configs', () => {\n             )\n           } else {\n             expect(redbox.description).toMatchInlineSnapshot(\n-              `\"  x Route segment config \"runtime\" is not compatible with \\`nextConfig.experimental.cacheComponents\\`. Please remove it.\"`\n+              `\"  x Route segment config \"runtime\" is not compatible with \\`nextConfig.cacheComponents\\`. Please remove it.\"`\n             )\n           }\n           expect(redbox.source).toContain(\n-            '\"runtime\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+            '\"runtime\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n           )\n         } else {\n           await retry(async () => {\n             expect(next.cliOutput).toContain(\n-              '\"runtime\" is not compatible with `nextConfig.experimental.cacheComponents`. Please remove it.'\n+              '\"runtime\" is not compatible with `nextConfig.cacheComponents`. Please remove it.'\n             )\n \n             // the stack trace is different between turbopack/webpack"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components-segment-configs/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-segment-configs%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/cache-components/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "ffe2610ccd03020750e6351555636940268f9e5a",
            "filename": "test/e2e/app-dir/custom-cache-control/custom-cache-control.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcustom-cache-control%2Fcustom-cache-control.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fcustom-cache-control%2Fcustom-cache-control.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcustom-cache-control%2Fcustom-cache-control.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -25,7 +25,7 @@ describe('custom-cache-control', () => {\n       isNextDev ? 'no-store, must-revalidate' : 's-maxage=31'\n     )\n   })\n-  ;(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS ? it.skip : it)(\n+  ;(process.env.__NEXT_CACHE_COMPONENTS ? it.skip : it)(\n     'should have default cache-control for app-ssg another',\n     async () => {\n       const res = await next.fetch('/app-ssg/another')"
        },
        {
            "sha": "5919865cdcc39ba7a8b5090b83cdc48729b17f19",
            "filename": "test/e2e/app-dir/dynamic-data/dynamic-data.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fdynamic-data%2Fdynamic-data.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fdynamic-data%2Fdynamic-data.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-data%2Fdynamic-data.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -27,7 +27,7 @@ describe('dynamic-data', () => {\n       // in dev we expect the entire page to be rendered at runtime\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n-    } else if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+    } else if (process.env.__NEXT_CACHE_COMPONENTS) {\n       // in PPR we expect the shell to be rendered at build and the page to be rendered at runtime\n       expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n@@ -57,7 +57,7 @@ describe('dynamic-data', () => {\n       // in dev we expect the entire page to be rendered at runtime\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n-    } else if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+    } else if (process.env.__NEXT_CACHE_COMPONENTS) {\n       // @TODO this should actually be build but there is a bug in how we do segment level dynamic in PPR at the moment\n       // see note in create-component-tree\n       expect($('#layout').text()).toBe('at runtime')\n@@ -88,7 +88,7 @@ describe('dynamic-data', () => {\n       // in dev we expect the entire page to be rendered at runtime\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n-    } else if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+    } else if (process.env.__NEXT_CACHE_COMPONENTS) {\n       // in PPR we expect the shell to be rendered at build and the page to be rendered at runtime\n       expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at buildtime')\n@@ -124,7 +124,7 @@ describe('dynamic-data', () => {\n       expect($('#page').text()).toBe('at runtime')\n       // we don't assert the state of the fallback because it can depend on the timing\n       // of when streaming starts and how fast the client references resolve\n-    } else if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+    } else if (process.env.__NEXT_CACHE_COMPONENTS) {\n       // in PPR we expect the shell to be rendered at build and the page to be rendered at runtime\n       expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')"
        },
        {
            "sha": "2c7ad512b2d29763ed18c11947d9bf3828cfa3dc",
            "filename": "test/e2e/app-dir/fallback-shells/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Ffallback-shells%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Ffallback-shells%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Ffallback-shells%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    prerenderEarlyExit: false,\n-  },\n+  cacheComponents: true,\n+  experimental: { prerenderEarlyExit: false },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "84c7243416d769899d32eaf28f7f5aee9932eb69",
            "filename": "test/e2e/app-dir/global-not-found/cache-components/next.config.mjs",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fcache-components%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fcache-components%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fglobal-not-found%2Fcache-components%2Fnext.config.mjs?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,9 +1,7 @@\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    globalNotFound: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { globalNotFound: true },\n }\n \n export default nextConfig"
        },
        {
            "sha": "f5243353ba32a6f495781e222f9c95f9d12a4a73",
            "filename": "test/e2e/app-dir/metadata-static-file/metadata-static-file-dynamic-route.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-dynamic-route.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-dynamic-route.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-dynamic-route.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,7 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n import { getCommonMetadataHeadTags } from './utils'\n \n describe('metadata-files-static-output-dynamic-route', () => {\n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+  if (process.env.__NEXT_CACHE_COMPONENTS) {\n     // Cache Components build fails when metadata files are inside a dynamic route.\n     //\n     // Route \"/dynamic/[id]\" has a `generateMetadata` that depends on Request data (`cookies()`, etc...)"
        },
        {
            "sha": "44bdf8544567a4e96063744bb2708eab09141456",
            "filename": "test/e2e/app-dir/metadata-static-file/metadata-static-file-group-route.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-group-route.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-group-route.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-group-route.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,7 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n import { getCommonMetadataHeadTags } from './utils'\n \n describe('metadata-files-static-output-group-route', () => {\n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+  if (process.env.__NEXT_CACHE_COMPONENTS) {\n     // Cache Components build fails when metadata files are inside a dynamic route.\n     //\n     // Route \"/dynamic/[id]\" has a `generateMetadata` that depends on Request data (`cookies()`, etc...)"
        },
        {
            "sha": "dcf292423839cce2fdc2b8703e095f8e994a0a46",
            "filename": "test/e2e/app-dir/metadata-static-file/metadata-static-file-intercepting-route.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-intercepting-route.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-intercepting-route.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-intercepting-route.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,7 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n import { getCommonMetadataHeadTags } from './utils'\n \n describe('metadata-files-static-output-intercepting-route', () => {\n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+  if (process.env.__NEXT_CACHE_COMPONENTS) {\n     // Cache Components build fails when metadata files are inside a dynamic route.\n     //\n     // Route \"/dynamic/[id]\" has a `generateMetadata` that depends on Request data (`cookies()`, etc...)"
        },
        {
            "sha": "4896a6f97906b964fae637ff7e4bac0919046469",
            "filename": "test/e2e/app-dir/metadata-static-file/metadata-static-file-parallel-route.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-parallel-route.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-parallel-route.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-parallel-route.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,7 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n import { getCommonMetadataHeadTags } from './utils'\n \n describe('metadata-files-static-output-parallel-route', () => {\n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+  if (process.env.__NEXT_CACHE_COMPONENTS) {\n     // Cache Components build fails when metadata files are inside a dynamic route.\n     //\n     // Route \"/dynamic/[id]\" has a `generateMetadata` that depends on Request data (`cookies()`, etc...)"
        },
        {
            "sha": "79235024d84698e0e9fe3905f31952838133b449",
            "filename": "test/e2e/app-dir/metadata-static-file/metadata-static-file-root-route.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-root-route.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-root-route.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-root-route.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,7 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n import { getCommonMetadataHeadTags } from './utils'\n \n describe('metadata-files-static-output-root-route', () => {\n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+  if (process.env.__NEXT_CACHE_COMPONENTS) {\n     // Cache Components build fails when metadata files are inside a dynamic route.\n     //\n     // Route \"/dynamic/[id]\" has a `generateMetadata` that depends on Request data (`cookies()`, etc...)"
        },
        {
            "sha": "7f2bf0683ca2c15cc0e576000848409af9d27907",
            "filename": "test/e2e/app-dir/metadata-static-file/metadata-static-file-static-route.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-static-route.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-static-route.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-static-file%2Fmetadata-static-file-static-route.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,7 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n import { getCommonMetadataHeadTags } from './utils'\n \n describe('metadata-files-static-output-static-route', () => {\n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+  if (process.env.__NEXT_CACHE_COMPONENTS) {\n     // Cache Components build fails when metadata files are inside a dynamic route.\n     //\n     // Route \"/dynamic/[id]\" has a `generateMetadata` that depends on Request data (`cookies()`, etc...)"
        },
        {
            "sha": "efeadf934e4a33a4fac12a29415291334e3eb0d0",
            "filename": "test/e2e/app-dir/metadata-static-generation/metadata-static-generation.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-generation%2Fmetadata-static-generation.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-static-generation%2Fmetadata-static-generation.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-static-generation%2Fmetadata-static-generation.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const isPPREnabled = process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const isPPREnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n ;(isPPREnabled ? describe.skip : describe)(\n   'app-dir - metadata-static-generation',"
        },
        {
            "sha": "0d14f72f809ea4abf47edddb4a3dd464c8c4c936",
            "filename": "test/e2e/app-dir/metadata-streaming-static-generation/metadata-streaming-static-generation.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-streaming-static-generation%2Fmetadata-streaming-static-generation.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmetadata-streaming-static-generation%2Fmetadata-streaming-static-generation.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-streaming-static-generation%2Fmetadata-streaming-static-generation.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n import { retry } from 'next-test-utils'\n \n-const isPPREnabled = process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const isPPREnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n // Skip PPR test as it's covered in test/e2e/app-dir/ppr-metadata-streaming/ppr-metadata-streaming.test.ts\n ;(isPPREnabled ? describe.skip : describe)("
        },
        {
            "sha": "3ea83c0087404e8197b88ddeedeea4c5560f8dac",
            "filename": "test/e2e/app-dir/missing-suspense-with-csr-bailout/missing-suspense-with-csr-bailout.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmissing-suspense-with-csr-bailout%2Fmissing-suspense-with-csr-bailout.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fmissing-suspense-with-csr-bailout%2Fmissing-suspense-with-csr-bailout.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmissing-suspense-with-csr-bailout%2Fmissing-suspense-with-csr-bailout.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -22,7 +22,7 @@ describe('missing-suspense-with-csr-bailout', () => {\n   })\n \n   const isCacheComponentsEnabled =\n-    process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+    process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n   describe('useSearchParams', () => {\n     const message = isCacheComponentsEnabled"
        },
        {
            "sha": "e9e133ec9a2fde8a1797f58be5d784ce47613833",
            "filename": "test/e2e/app-dir/next-after-app-deploy/index.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fnext-after-app-deploy%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fnext-after-app-deploy%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-after-app-deploy%2Findex.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -46,7 +46,7 @@ _describe.each(runtimes)('after() in %s runtime', (runtimeValue) => {\n     // despite the page being static, the first two requests both cause a render\n     // and only the second one gets cached and re-used.\n     // we work around it by doing a dummy request to get that first \"uncached\" request out of the way.\n-    if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+    if (process.env.__NEXT_CACHE_COMPONENTS) {\n       await getTimestampPageData(path)\n     }\n "
        },
        {
            "sha": "75b94dbcb28d68999a3422c3aef3f9d679b3aaf0",
            "filename": "test/e2e/app-dir/next-condition/next-condition.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnext-condition.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnext-condition.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-condition%2Fnext-condition.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -14,8 +14,7 @@ describe('`next-js` Condition', () => {\n \n   // TODO I should be able to access the complete config from a Next.js Server or Build\n   // So I don't have to coordinate using process env variables\n-  const isUsingCacheComponents =\n-    process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+  const isUsingCacheComponents = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n   // Recommended for tests that check HTML. Cheerio is a HTML parser that has a jQuery like API.\n   if (isUsingCacheComponents) {"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/node-extensions/fixtures/random/cache-components/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fcache-components%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fcache-components%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fcache-components%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "47ad86e7eaeed9c8d0647df2cb98f564dff2d868",
            "filename": "test/e2e/app-dir/not-found/default/default.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fnot-found%2Fdefault%2Fdefault.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fnot-found%2Fdefault%2Fdefault.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnot-found%2Fdefault%2Fdefault.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const isPPREnabled = process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const isPPREnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n describe('app dir - not-found - default', () => {\n   const { next, isNextStart } = nextTestSetup({"
        },
        {
            "sha": "77a9520b8649a113de8a63cb80df24eb74a2a185",
            "filename": "test/e2e/app-dir/parallel-route-navigations/parallel-route-navigations.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fparallel-route-navigations%2Fparallel-route-navigations.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fparallel-route-navigations%2Fparallel-route-navigations.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fparallel-route-navigations%2Fparallel-route-navigations.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -83,7 +83,7 @@ describe('parallel-route-navigations', () => {\n \n     // If it's PPR or Cache Components, we'll see an immediate transition for\n     // the client component.\n-    if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true') {\n+    if (process.env.__NEXT_CACHE_COMPONENTS === 'true') {\n       await browser.waitForElementByCss(\n         '[data-file=\"/[teamID]/sub/other-folder/page.tsx\"]'\n       )"
        },
        {
            "sha": "2c7ad512b2d29763ed18c11947d9bf3828cfa3dc",
            "filename": "test/e2e/app-dir/ppr-errors/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-errors%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-errors%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-errors%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    prerenderEarlyExit: false,\n-  },\n+  cacheComponents: true,\n+  experimental: { prerenderEarlyExit: false },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "975d60ed2a36ef36d07ad1c05e15bbcce9378db9",
            "filename": "test/e2e/app-dir/ppr-full/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-full%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-full%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-full%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,8 +1,6 @@\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-history-replace-state/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-history-replace-state%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-history-replace-state%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-history-replace-state%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-metadata-blocking/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-metadata-blocking%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-metadata-blocking%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-metadata-blocking%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "358ba08babeca2f20f26ec5b0f66684cfc18dfc4",
            "filename": "test/e2e/app-dir/ppr-metadata-streaming/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-metadata-streaming%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-metadata-streaming%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-metadata-streaming%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    useCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { useCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-middleware-rewrite-force-dynamic-ssg-dynamic-params/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-middleware-rewrite-force-dynamic-ssg-dynamic-params%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-middleware-rewrite-force-dynamic-ssg-dynamic-params%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-middleware-rewrite-force-dynamic-ssg-dynamic-params%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-missing-root-params/fixtures/multiple/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fmultiple%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fmultiple%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fmultiple%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-missing-root-params/fixtures/nested/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fnested%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fnested%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fnested%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-missing-root-params/fixtures/single/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fsingle%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fsingle%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-missing-root-params%2Ffixtures%2Fsingle%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-navigations/avoid-popstate-flash/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Favoid-popstate-flash%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Favoid-popstate-flash%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Favoid-popstate-flash%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-navigations/prefetch-navigation/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fprefetch-navigation%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fprefetch-navigation%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fprefetch-navigation%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-navigations/search-params/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fsearch-params%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fsearch-params%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fsearch-params%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr-navigations/stale-prefetch-entry/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fstale-prefetch-entry%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fstale-prefetch-entry%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-navigations%2Fstale-prefetch-entry%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "fa33c7c54f24cc9c85addd95f17ab7b6ebc6d751",
            "filename": "test/e2e/app-dir/ppr-partial-hydration/next.config.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-partial-hydration%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-partial-hydration%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-partial-hydration%2Fnext.config.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,9 +1,7 @@\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n export default nextConfig"
        },
        {
            "sha": "99b048583d813d1be9e53e8a99fe191a4ec20a62",
            "filename": "test/e2e/app-dir/ppr-unstable-cache/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-unstable-cache%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr-unstable-cache%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr-unstable-cache%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,4 +1,5 @@\n module.exports = {\n+  cacheComponents: true,\n   experimental: {\n     cacheLife: {\n       expireNow: {\n@@ -7,6 +8,5 @@ module.exports = {\n         revalidate: 0,\n       },\n     },\n-    cacheComponents: true,\n   },\n }"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/ppr/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fppr%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fppr%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "4280e52226b84f08916612ea0e511526b3655c42",
            "filename": "test/e2e/app-dir/react-max-headers-length/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Freact-max-headers-length%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Freact-max-headers-length%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Freact-max-headers-length%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -5,10 +5,8 @@ const nextConfig = {\n   reactMaxHeadersLength: process.env.TEST_REACT_MAX_HEADERS_LENGTH\n     ? parseInt(process.env.TEST_REACT_MAX_HEADERS_LENGTH)\n     : undefined,\n-  experimental: {\n-    // Emitting Link headers currently requires the experimental PPR feature.\n-    cacheComponents: true,\n-  },\n+  // Emitting Link headers currently requires the experimental PPR feature.\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "f00b634c71a57c2d754be56cfa51d0872063b4ea",
            "filename": "test/e2e/app-dir/resuming-head-runtime-search-param/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fresuming-head-runtime-search-param%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fresuming-head-runtime-search-param%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fresuming-head-runtime-search-param%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "4a5642a628535eed27228fe2de730c64a0cbd01c",
            "filename": "test/e2e/app-dir/rewrite-headers/rewrite-headers.test.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Frewrite-headers%2Frewrite-headers.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Frewrite-headers%2Frewrite-headers.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Frewrite-headers%2Frewrite-headers.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -42,7 +42,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -78,7 +78,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -114,7 +114,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -151,7 +151,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -187,7 +187,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -223,7 +223,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -259,7 +259,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -295,7 +295,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -339,7 +339,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }\n@@ -442,7 +442,7 @@ const cases: {\n     headers: {\n       rsc: '1',\n       'next-router-prefetch': '1',\n-      ...(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+      ...(process.env.__NEXT_CACHE_COMPONENTS === 'true'\n         ? {\n             'next-router-segment-prefetch': '/_tree',\n           }"
        },
        {
            "sha": "c502202e8c884077f92a1cf2b3776e49960dcaa3",
            "filename": "test/e2e/app-dir/root-suspense-dynamic/fixtures/default/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Froot-suspense-dynamic%2Ffixtures%2Fdefault%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Froot-suspense-dynamic%2Ffixtures%2Fdefault%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Froot-suspense-dynamic%2Ffixtures%2Fdefault%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -4,9 +4,7 @@\n const nextConfig = {\n   enablePrerenderSourceMaps: false,\n \n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "f054473424beef205a1fb0e580b4c84c04359250",
            "filename": "test/e2e/app-dir/rsc-basic/rsc-basic.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Frsc-basic%2Frsc-basic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Frsc-basic%2Frsc-basic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Frsc-basic%2Frsc-basic.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -10,8 +10,7 @@ import {\n // TODO: We should decide on an established pattern for gating test assertions\n // on experimental flags. For example, as a first step we could all the common\n // gates like this one into a single module.\n-const isPPREnabledByDefault =\n-  process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const isPPREnabledByDefault = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n async function resolveStreamResponse(response: any, onData?: any) {\n   let result = ''\n@@ -461,7 +460,7 @@ describe('app dir - rsc basics', () => {\n   // TODO: (PPR) remove once PPR is stable\n   // TODO(new-dev-overlay): remove once new dev overlay is stable\n   const bundledReactVersionPattern =\n-    process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+    process.env.__NEXT_CACHE_COMPONENTS === 'true'\n       ? '-experimental-'\n       : '-canary-'\n "
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/segment-cache/basic/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fbasic%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fbasic%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fbasic%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "b81bc56b4a4f76156291807dbdf25c17b13ff74a",
            "filename": "test/e2e/app-dir/segment-cache/dynamic-on-hover/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fdynamic-on-hover%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fdynamic-on-hover%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fdynamic-on-hover%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,8 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     clientSegmentCache: true,\n     dynamicOnHover: true,\n   },"
        },
        {
            "sha": "f00b634c71a57c2d754be56cfa51d0872063b4ea",
            "filename": "test/e2e/app-dir/segment-cache/memory-pressure/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmemory-pressure%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmemory-pressure%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmemory-pressure%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "9163b4e2808eaae0383d3fb09f899d58b30c2984",
            "filename": "test/e2e/app-dir/segment-cache/metadata/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmetadata%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmetadata%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmetadata%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n   async rewrites() {\n     return [\n       {"
        },
        {
            "sha": "f00b634c71a57c2d754be56cfa51d0872063b4ea",
            "filename": "test/e2e/app-dir/segment-cache/mpa-navigations/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmpa-navigations%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmpa-navigations%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fmpa-navigations%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/segment-cache/prefetch-auto/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-auto%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-auto%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-auto%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "1bfbb1d86b3e37a8a6e21511c025f0c2f207bd0a",
            "filename": "test/e2e/app-dir/segment-cache/prefetch-layout-sharing/next.config.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-layout-sharing%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-layout-sharing%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-layout-sharing%2Fnext.config.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,7 +1,8 @@\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: { cacheComponents: true, clientSegmentCache: true },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n   productionBrowserSourceMaps: true,\n }\n "
        },
        {
            "sha": "1bfbb1d86b3e37a8a6e21511c025f0c2f207bd0a",
            "filename": "test/e2e/app-dir/segment-cache/prefetch-runtime/next.config.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-runtime%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-runtime%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-runtime%2Fnext.config.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,7 +1,8 @@\n import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n-  experimental: { cacheComponents: true, clientSegmentCache: true },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n   productionBrowserSourceMaps: true,\n }\n "
        },
        {
            "sha": "f00b634c71a57c2d754be56cfa51d0872063b4ea",
            "filename": "test/e2e/app-dir/segment-cache/prefetch-scheduling/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-scheduling%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-scheduling%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fprefetch-scheduling%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "f00b634c71a57c2d754be56cfa51d0872063b4ea",
            "filename": "test/e2e/app-dir/segment-cache/revalidation/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Frevalidation%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Frevalidation%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Frevalidation%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "f00b634c71a57c2d754be56cfa51d0872063b4ea",
            "filename": "test/e2e/app-dir/segment-cache/search-params/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fsearch-params%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fsearch-params%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fsearch-params%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "7ae60e8ad056889966f7e97a74ff6bf37c9e132b",
            "filename": "test/e2e/app-dir/segment-cache/staleness/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fstaleness%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fstaleness%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsegment-cache%2Fstaleness%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,8 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     clientSegmentCache: true,\n     staleTimes: {\n       dynamic: 30,"
        },
        {
            "sha": "8a61ee02d1f4c9739066d67761bf1d4aa24355ff",
            "filename": "test/e2e/app-dir/server-source-maps/fixtures/default/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,9 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n+  cacheComponents: true,\n   experimental: {\n     cpus: 1,\n-    cacheComponents: true,\n     serverSourceMaps: true,\n   },\n   serverExternalPackages: ['external-pkg'],"
        },
        {
            "sha": "110b2c3dce398fab9e609dcb6cf13a6c1873e626",
            "filename": "test/e2e/app-dir/static-shell-debugging/static-shell-debugging.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fstatic-shell-debugging%2Fstatic-shell-debugging.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fstatic-shell-debugging%2Fstatic-shell-debugging.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fstatic-shell-debugging%2Fstatic-shell-debugging.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,7 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n \n // TODO(NAR-423): Migrate to Cache Components.\n describe.skip('static-shell-debugging', () => {\n-  const ppr = Boolean(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS)\n+  const ppr = Boolean(process.env.__NEXT_CACHE_COMPONENTS)\n   const context = {\n     ppr,\n     debugging: ppr,"
        },
        {
            "sha": "f1c80cf1f5e904c119847e62553b76c70cf57491",
            "filename": "test/e2e/app-dir/sub-shell-generation-middleware/sub-shell-generation-middleware.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsub-shell-generation-middleware%2Fsub-shell-generation-middleware.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsub-shell-generation-middleware%2Fsub-shell-generation-middleware.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsub-shell-generation-middleware%2Fsub-shell-generation-middleware.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -13,7 +13,7 @@ describe('middleware-static-rewrite', () => {\n     return\n   }\n \n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true') {\n+  if (process.env.__NEXT_CACHE_COMPONENTS === 'true') {\n     // Here we're validating that the correct fallback shell was used for\n     // rendering.\n     it('should use the correct fallback route', async () => {"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/sub-shell-generation/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsub-shell-generation%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fsub-shell-generation%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fsub-shell-generation%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "d76af14a9eb1d963cd9a4bcf8bc5fd6d7302ed99",
            "filename": "test/e2e/app-dir/use-cache-close-over-function/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    serverSourceMaps: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { serverSourceMaps: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "c0d4595e4c3b145f5fa6d777cbbfef2d804231e8",
            "filename": "test/e2e/app-dir/use-cache-custom-handler/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,8 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     cacheHandlers: {\n       default: require.resolve('./handler.js'),\n     },"
        },
        {
            "sha": "2c7ad512b2d29763ed18c11947d9bf3828cfa3dc",
            "filename": "test/e2e/app-dir/use-cache-hanging-inputs/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    prerenderEarlyExit: false,\n-  },\n+  cacheComponents: true,\n+  experimental: { prerenderEarlyExit: false },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/use-cache-metadata-route-handler/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-metadata-route-handler%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-metadata-route-handler%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-metadata-route-handler%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "e82f098ee7935f98ba2a4a0c247d08369add03c9",
            "filename": "test/e2e/app-dir/use-cache-output-export/use-cache-output-export.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-output-export%2Fuse-cache-output-export.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-output-export%2Fuse-cache-output-export.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-output-export%2Fuse-cache-output-export.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -10,7 +10,7 @@ describe('use-cache-output-export', () => {\n     skipStart: process.env.NEXT_TEST_MODE !== 'dev',\n   })\n \n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true') {\n+  if (process.env.__NEXT_CACHE_COMPONENTS === 'true') {\n     return it.skip('for PPR', () => {\n       // PPR is not compatible with `output: 'export'`.\n     })"
        },
        {
            "sha": "30b76701d9cc353718dc70c467f709fceb9f63aa",
            "filename": "test/e2e/app-dir/use-cache-private/use-cache-private.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-private%2Fuse-cache-private.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-private%2Fuse-cache-private.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-private%2Fuse-cache-private.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,6 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const pprEnabled = process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const pprEnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n describe('use-cache-private', () => {\n   const { next, isNextDev } = nextTestSetup({"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/app-dir/use-cache-route-handler-only/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-route-handler-only%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-route-handler-only%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-route-handler-only%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "736f22c789bcfddf0d1505cecca03e8a06fc149b",
            "filename": "test/e2e/app-dir/use-cache-unknown-cache-kind/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,8 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n+  cacheComponents: true,\n   experimental: {\n-    cacheComponents: true,\n     cacheHandlers: {}, // overwrite the default config\n     prerenderEarlyExit: false,\n   },"
        },
        {
            "sha": "358ba08babeca2f20f26ec5b0f66684cfc18dfc4",
            "filename": "test/e2e/app-dir/use-cache-with-server-function-props/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-with-server-function-props%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    useCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { useCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "9bb060b8117b11948945dc54edac3198b00069e2",
            "filename": "test/e2e/app-dir/use-cache-without-experimental-flag/use-cache-without-experimental-flag.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -42,7 +42,7 @@ describe('use-cache-without-experimental-flag', () => {\n            3 | export default async function Page() {\n            4 |   return <p>hello world</p>\n \n-         To use \"use cache\", please enable the feature flag \\`experimental.cacheComponents\\` in your Next.js config.\n+         To use \"use cache\", please enable the feature flag \\`cacheComponents\\` in your Next.js config.\n \n          Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n \n@@ -56,7 +56,7 @@ describe('use-cache-without-experimental-flag', () => {\n          \"\n          ./app/page.tsx\n            × Module build failed:\n-           ╰─▶   × Error:   x To use \"use cache\", please enable the feature flag \\`experimental.cacheComponents\\` in your Next.js config.\n+           ╰─▶   × Error:   x To use \"use cache\", please enable the feature flag \\`cacheComponents\\` in your Next.js config.\n                  │   |\n                  │   | Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n                  │\n@@ -80,7 +80,7 @@ describe('use-cache-without-experimental-flag', () => {\n         expect(buildOutput).toMatchInlineSnapshot(`\n          \"\n          ./app/page.tsx\n-         Error:   x To use \"use cache\", please enable the feature flag \\`experimental.cacheComponents\\` in your Next.js config.\n+         Error:   x To use \"use cache\", please enable the feature flag \\`cacheComponents\\` in your Next.js config.\n            |\n            | Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n \n@@ -120,7 +120,7 @@ describe('use-cache-without-experimental-flag', () => {\n         )\n       } else {\n         expect(errorDescription).toMatchInlineSnapshot(\n-          `\"  x To use \"use cache\", please enable the feature flag \\`experimental.cacheComponents\\` in your Next.js config.\"`\n+          `\"  x To use \"use cache\", please enable the feature flag \\`cacheComponents\\` in your Next.js config.\"`\n         )\n       }\n \n@@ -134,15 +134,15 @@ describe('use-cache-without-experimental-flag', () => {\n              3 | export default async function Page() {\n              4 |   return <p>hello world</p>\n \n-           To use \"use cache\", please enable the feature flag \\`experimental.cacheComponents\\` in your Next.js config.\n+           To use \"use cache\", please enable the feature flag \\`cacheComponents\\` in your Next.js config.\n \n            Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\"\n           `)\n       } else if (isRspack) {\n         expect(errorSource).toMatchInlineSnapshot(`\n          \"./app/page.tsx\n            × Module build failed:\n-           ╰─▶   × Error:   x To use \"use cache\", please enable the feature flag \\`experimental.cacheComponents\\` in your Next.js config.\n+           ╰─▶   × Error:   x To use \"use cache\", please enable the feature flag \\`cacheComponents\\` in your Next.js config.\n                  │   |\n                  │   | Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n                  │\n@@ -158,7 +158,7 @@ describe('use-cache-without-experimental-flag', () => {\n       } else {\n         expect(errorSource).toMatchInlineSnapshot(`\n          \"./app/page.tsx\n-         Error:   x To use \"use cache\", please enable the feature flag \\`experimental.cacheComponents\\` in your Next.js config.\n+         Error:   x To use \"use cache\", please enable the feature flag \\`cacheComponents\\` in your Next.js config.\n            |\n            | Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n "
        },
        {
            "sha": "c8b92aca3bbe1fc699bc0b465c102b7fd2adc9f3",
            "filename": "test/e2e/app-dir/use-cache/use-cache.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fuse-cache.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fuse-cache.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache%2Fuse-cache.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -16,8 +16,7 @@ import { PrerenderManifest } from 'next/dist/build'\n const GENERIC_RSC_ERROR =\n   'An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.'\n \n-const withCacheComponents =\n-  process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const withCacheComponents = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n describe('use-cache', () => {\n   const { next, isNextDev, isNextDeploy, isNextStart, skipped } = nextTestSetup(\n@@ -929,7 +928,7 @@ describe('use-cache', () => {\n   })\n \n   if (isNextDev) {\n-    if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS !== 'true') {\n+    if (process.env.__NEXT_CACHE_COMPONENTS !== 'true') {\n       it('should not have unhandled rejection of Request data promises when use cache is enabled without cacheComponents', async () => {\n         await next.render('/unhandled-promise-regression')\n         // We assert both to better defend against changes in error messaging invalidating this test silently.\n@@ -952,9 +951,7 @@ describe('use-cache', () => {\n       const initialLogs = await getSanitizedLogs(browser)\n \n       const expectedOutsideBadge =\n-        process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n-          ? 'Prerender'\n-          : 'Server'\n+        process.env.__NEXT_CACHE_COMPONENTS === 'true' ? 'Prerender' : 'Server'\n \n       // We ignore the logged time string at the end of this message:\n       const logMessageWithDateRegexp = /^ Cache {2}deep inside /"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/e2e/legacy-link-behavior/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Flegacy-link-behavior%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Flegacy-link-behavior%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Flegacy-link-behavior%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "bc129bce6be7fee55698ea41b223ddbdb150c731",
            "filename": "test/e2e/opentelemetry/instrumentation/opentelemetry.test.ts",
            "status": "modified",
            "additions": 845,
            "deletions": 836,
            "changes": 1681,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fopentelemetry%2Finstrumentation%2Fopentelemetry.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fe2e%2Fopentelemetry%2Finstrumentation%2Fopentelemetry.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fopentelemetry%2Finstrumentation%2Fopentelemetry.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -63,968 +63,976 @@ describe('opentelemetry', () => {\n       },\n     },\n   ]) {\n-    ;(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\n-      ? describe.skip\n-      : describe)(env.name, () => {\n-      describe('app router', () => {\n-        it('should handle RSC with fetch', async () => {\n-          await next.fetch('/app/param/rsc-fetch', env.fetchInit)\n+    ;(process.env.__NEXT_CACHE_COMPONENTS ? describe.skip : describe)(\n+      env.name,\n+      () => {\n+        describe('app router', () => {\n+          it('should handle RSC with fetch', async () => {\n+            await next.fetch('/app/param/rsc-fetch', env.fetchInit)\n \n-          await expectTrace(getCollector(), [\n-            {\n-              name: 'GET /app/[param]/rsc-fetch',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/app/[param]/rsc-fetch',\n-                'http.status_code': 200,\n-                'http.target': '/app/param/rsc-fetch',\n-                'next.route': '/app/[param]/rsc-fetch',\n-                'next.rsc': false,\n-                'next.span_name': 'GET /app/[param]/rsc-fetch',\n-                'next.span_type': 'BaseServer.handleRequest',\n-              },\n-              kind: 1,\n-              status: { code: 0 },\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              spans: [\n-                {\n-                  name: 'render route (app) /app/[param]/rsc-fetch',\n-                  attributes: {\n-                    'next.route': '/app/[param]/rsc-fetch',\n-                    'next.span_name':\n-                      'render route (app) /app/[param]/rsc-fetch',\n-                    'next.span_type': 'AppRender.getBodyResult',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                  spans: [\n-                    {\n-                      name: 'build component tree',\n-                      attributes: {\n-                        'next.span_name': 'build component tree',\n-                        'next.span_type': 'NextNodeServer.createComponentTree',\n-                      },\n-                      kind: 0,\n-                      status: { code: 0 },\n-                      spans: [\n-                        {\n-                          name: 'resolve segment modules',\n-                          attributes: {\n-                            'next.segment': '__PAGE__',\n-                            'next.span_name': 'resolve segment modules',\n-                            'next.span_type':\n-                              'NextNodeServer.getLayoutOrPageModule',\n-                          },\n-                          kind: 0,\n-                          status: { code: 0 },\n-                        },\n-                        {\n-                          name: 'resolve segment modules',\n-                          attributes: {\n-                            'next.segment': '[param]',\n-                            'next.span_name': 'resolve segment modules',\n-                            'next.span_type':\n-                              'NextNodeServer.getLayoutOrPageModule',\n-                          },\n-                          kind: 0,\n-                          status: { code: 0 },\n-                        },\n-                      ],\n-                    },\n-                    {\n-                      name: 'fetch GET https://example.vercel.sh/',\n-                      attributes: {\n-                        'http.method': 'GET',\n-                        'http.url': 'https://example.vercel.sh/',\n-                        'net.peer.name': 'example.vercel.sh',\n-                        'next.span_name':\n-                          'fetch GET https://example.vercel.sh/',\n-                        'next.span_type': 'AppRender.fetch',\n-                      },\n-                      kind: 2,\n-                      status: { code: 0 },\n-                    },\n-                    {\n-                      name: 'generateMetadata /app/[param]/layout',\n-                      attributes: {\n-                        'next.page': '/app/[param]/layout',\n-                        'next.span_name':\n-                          'generateMetadata /app/[param]/layout',\n-                        'next.span_type': 'ResolveMetadata.generateMetadata',\n-                      },\n-                      kind: 0,\n-                      status: { code: 0 },\n-                    },\n-                    {\n-                      name: 'generateMetadata /app/[param]/rsc-fetch/page',\n-                      attributes: {\n-                        'next.page': '/app/[param]/rsc-fetch/page',\n-                        'next.span_name':\n-                          'generateMetadata /app/[param]/rsc-fetch/page',\n-                        'next.span_type': 'ResolveMetadata.generateMetadata',\n-                      },\n-                      kind: 0,\n-                      status: { code: 0 },\n-                    },\n-                    {\n-                      attributes: {\n-                        'next.clientComponentLoadCount': isNextDev ? 7 : 6,\n-                        'next.span_type':\n-                          'NextNodeServer.clientComponentLoading',\n-                      },\n-                      kind: 0,\n-                      name: 'NextNodeServer.clientComponentLoading',\n-                      status: {\n-                        code: 0,\n-                      },\n-                    },\n-                    {\n-                      name: 'start response',\n-                      attributes: {\n-                        'next.span_name': 'start response',\n-                        'next.span_type': 'NextNodeServer.startResponse',\n-                      },\n-                      kind: 0,\n-                      status: { code: 0 },\n-                    },\n-                  ],\n-                },\n-                {\n-                  name: 'resolve page components',\n-                  attributes: {\n-                    'next.route': '/app/[param]/rsc-fetch',\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-              ],\n-            },\n-          ])\n-        })\n-\n-        it('should propagate custom context without span', async () => {\n-          await next.fetch('/app/param/rsc-fetch', {\n-            ...env.fetchInit,\n-            headers: { ...env.fetchInit?.headers, 'x-custom': 'custom1' },\n-          })\n-\n-          await expectTrace(getCollector(), [\n-            {\n-              name: 'GET /app/[param]/rsc-fetch',\n-              attributes: {\n-                custom: 'custom1',\n-              },\n-            },\n-          ])\n-        })\n-\n-        it('should handle RSC with fetch on edge', async () => {\n-          await next.fetch('/app/param/rsc-fetch/edge', env.fetchInit)\n-\n-          await expectTrace(\n-            getCollector(),\n-            [\n+            await expectTrace(getCollector(), [\n               {\n-                traceId: env.span.traceId,\n-                parentId: env.span.rootParentId,\n-                runtime: 'edge',\n-                name: 'GET /app/[param]/rsc-fetch/edge',\n-                kind: 1,\n+                name: 'GET /app/[param]/rsc-fetch',\n                 attributes: {\n-                  'next.span_name': 'GET /app/[param]/rsc-fetch/edge',\n-                  'next.span_type': 'BaseServer.handleRequest',\n                   'http.method': 'GET',\n-                  'http.target': '/app/param/rsc-fetch/edge?param=param',\n+                  'http.route': '/app/[param]/rsc-fetch',\n                   'http.status_code': 200,\n-                  'next.route': '/app/[param]/rsc-fetch/edge',\n-                  'http.route': '/app/[param]/rsc-fetch/edge',\n+                  'http.target': '/app/param/rsc-fetch',\n+                  'next.route': '/app/[param]/rsc-fetch',\n+                  'next.rsc': false,\n+                  'next.span_name': 'GET /app/[param]/rsc-fetch',\n+                  'next.span_type': 'BaseServer.handleRequest',\n                 },\n+                kind: 1,\n                 status: { code: 0 },\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n                 spans: [\n                   {\n-                    name: 'render route (app) /app/[param]/rsc-fetch/edge',\n-                    kind: 0,\n+                    name: 'render route (app) /app/[param]/rsc-fetch',\n                     attributes: {\n+                      'next.route': '/app/[param]/rsc-fetch',\n                       'next.span_name':\n-                        'render route (app) /app/[param]/rsc-fetch/edge',\n+                        'render route (app) /app/[param]/rsc-fetch',\n                       'next.span_type': 'AppRender.getBodyResult',\n-                      'next.route': '/app/[param]/rsc-fetch/edge',\n                     },\n+                    kind: 0,\n                     status: { code: 0 },\n                     spans: [\n                       {\n                         name: 'build component tree',\n-                        kind: 0,\n                         attributes: {\n                           'next.span_name': 'build component tree',\n                           'next.span_type':\n                             'NextNodeServer.createComponentTree',\n                         },\n+                        kind: 0,\n                         status: { code: 0 },\n                         spans: [\n                           {\n                             name: 'resolve segment modules',\n-                            kind: 0,\n                             attributes: {\n+                              'next.segment': '__PAGE__',\n                               'next.span_name': 'resolve segment modules',\n                               'next.span_type':\n                                 'NextNodeServer.getLayoutOrPageModule',\n-                              'next.segment': '__PAGE__',\n                             },\n+                            kind: 0,\n                             status: { code: 0 },\n                           },\n                           {\n                             name: 'resolve segment modules',\n-                            kind: 0,\n                             attributes: {\n+                              'next.segment': '[param]',\n                               'next.span_name': 'resolve segment modules',\n                               'next.span_type':\n                                 'NextNodeServer.getLayoutOrPageModule',\n-                              'next.segment': '[param]',\n                             },\n+                            kind: 0,\n                             status: { code: 0 },\n                           },\n                         ],\n                       },\n                       {\n                         name: 'fetch GET https://example.vercel.sh/',\n-                        kind: 2,\n                         attributes: {\n+                          'http.method': 'GET',\n+                          'http.url': 'https://example.vercel.sh/',\n+                          'net.peer.name': 'example.vercel.sh',\n                           'next.span_name':\n                             'fetch GET https://example.vercel.sh/',\n                           'next.span_type': 'AppRender.fetch',\n-                          'http.url': 'https://example.vercel.sh/',\n-                          'http.method': 'GET',\n-                          'net.peer.name': 'example.vercel.sh',\n                         },\n+                        kind: 2,\n                         status: { code: 0 },\n                       },\n                       {\n                         name: 'generateMetadata /app/[param]/layout',\n-                        kind: 0,\n                         attributes: {\n+                          'next.page': '/app/[param]/layout',\n                           'next.span_name':\n                             'generateMetadata /app/[param]/layout',\n                           'next.span_type': 'ResolveMetadata.generateMetadata',\n-                          'next.page': '/app/[param]/layout',\n                         },\n+                        kind: 0,\n                         status: { code: 0 },\n                       },\n                       {\n-                        name: 'generateMetadata /app/[param]/rsc-fetch/edge/page',\n-                        kind: 0,\n+                        name: 'generateMetadata /app/[param]/rsc-fetch/page',\n                         attributes: {\n+                          'next.page': '/app/[param]/rsc-fetch/page',\n                           'next.span_name':\n-                            'generateMetadata /app/[param]/rsc-fetch/edge/page',\n+                            'generateMetadata /app/[param]/rsc-fetch/page',\n                           'next.span_type': 'ResolveMetadata.generateMetadata',\n-                          'next.page': '/app/[param]/rsc-fetch/edge/page',\n                         },\n+                        kind: 0,\n+                        status: { code: 0 },\n+                      },\n+                      {\n+                        attributes: {\n+                          'next.clientComponentLoadCount': isNextDev ? 7 : 6,\n+                          'next.span_type':\n+                            'NextNodeServer.clientComponentLoading',\n+                        },\n+                        kind: 0,\n+                        name: 'NextNodeServer.clientComponentLoading',\n+                        status: {\n+                          code: 0,\n+                        },\n+                      },\n+                      {\n+                        name: 'start response',\n+                        attributes: {\n+                          'next.span_name': 'start response',\n+                          'next.span_type': 'NextNodeServer.startResponse',\n+                        },\n+                        kind: 0,\n                         status: { code: 0 },\n                       },\n                     ],\n                   },\n+                  {\n+                    name: 'resolve page components',\n+                    attributes: {\n+                      'next.route': '/app/[param]/rsc-fetch',\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n                 ],\n               },\n-            ],\n-            true\n-          )\n-        })\n-\n-        it('should handle RSC with fetch in RSC mode', async () => {\n-          await next.fetch(`/app/param/rsc-fetch?${NEXT_RSC_UNION_QUERY}`, {\n-            ...env.fetchInit,\n-            headers: {\n-              ...env.fetchInit?.headers,\n-              Rsc: '1',\n-            },\n+            ])\n           })\n \n-          await expectTrace(getCollector(), [\n-            {\n-              runtime: 'nodejs',\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              name: 'RSC GET /app/[param]/rsc-fetch',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/app/[param]/rsc-fetch',\n-                'http.status_code': 200,\n-                'http.target': `/app/param/rsc-fetch?${NEXT_RSC_UNION_QUERY}`,\n-                'next.route': '/app/[param]/rsc-fetch',\n-                'next.rsc': true,\n-                'next.span_name': 'RSC GET /app/[param]/rsc-fetch',\n-                'next.span_type': 'BaseServer.handleRequest',\n-              },\n-              kind: 1,\n-              status: { code: 0 },\n-            },\n-          ])\n-        })\n-\n-        it('should handle route handlers in app router', async () => {\n-          await next.fetch('/api/app/param/data', env.fetchInit)\n-\n-          await expectTrace(getCollector(), [\n-            {\n-              name: 'GET /api/app/[param]/data',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/api/app/[param]/data',\n-                'http.status_code': 200,\n-                'http.target': '/api/app/param/data',\n-                'next.route': '/api/app/[param]/data',\n-                'next.span_name': 'GET /api/app/[param]/data',\n-                'next.span_type': 'BaseServer.handleRequest',\n-              },\n-              kind: 1,\n-              status: { code: 0 },\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              spans: [\n-                {\n-                  name: 'executing api route (app) /api/app/[param]/data',\n-                  attributes: {\n-                    'next.route': '/api/app/[param]/data',\n-                    'next.span_name':\n-                      'executing api route (app) /api/app/[param]/data',\n-                    'next.span_type': 'AppRouteRouteHandlers.runHandler',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-                {\n-                  name: 'resolve page components',\n-                  attributes: {\n-                    'next.route': '/api/app/[param]/data',\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-                {\n-                  name: 'start response',\n-                  attributes: {\n-                    'next.span_name': 'start response',\n-                    'next.span_type': 'NextNodeServer.startResponse',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-              ],\n-            },\n-          ])\n-        })\n-\n-        it('should handle route handlers in app router on edge', async () => {\n-          await next.fetch('/api/app/param/data/edge', env.fetchInit)\n+          it('should propagate custom context without span', async () => {\n+            await next.fetch('/app/param/rsc-fetch', {\n+              ...env.fetchInit,\n+              headers: { ...env.fetchInit?.headers, 'x-custom': 'custom1' },\n+            })\n \n-          await expectTrace(\n-            getCollector(),\n-            [\n+            await expectTrace(getCollector(), [\n               {\n-                runtime: 'edge',\n-                traceId: env.span.traceId,\n-                parentId: env.span.rootParentId,\n-                name: 'executing api route (app) /api/app/[param]/data/edge',\n+                name: 'GET /app/[param]/rsc-fetch',\n                 attributes: {\n-                  'next.route': '/api/app/[param]/data/edge',\n-                  'next.span_name':\n-                    'executing api route (app) /api/app/[param]/data/edge',\n-                  'next.span_type': 'AppRouteRouteHandlers.runHandler',\n+                  custom: 'custom1',\n                 },\n-                kind: 0,\n-                status: { code: 0 },\n-              },\n-            ],\n-            true\n-          )\n-        })\n-\n-        it('should trace middleware', async () => {\n-          await next.fetch('/behind-middleware', env.fetchInit)\n-\n-          await expectTrace(getCollector(), [\n-            {\n-              runtime: 'edge',\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              name: 'middleware GET',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.target': '/behind-middleware',\n-                'next.span_name': 'middleware GET',\n-                'next.span_type': 'Middleware.execute',\n-              },\n-              status: { code: 0 },\n-              spans: [],\n-            },\n-\n-            {\n-              runtime: 'nodejs',\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              name: 'GET /behind-middleware',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/behind-middleware',\n-                'http.status_code': 200,\n-                'http.target': '/behind-middleware',\n-                'next.route': '/behind-middleware',\n-                'next.span_name': 'GET /behind-middleware',\n-                'next.span_type': 'BaseServer.handleRequest',\n               },\n-            },\n-          ])\n-        })\n+            ])\n+          })\n \n-        it('should handle error in RSC', async () => {\n-          await next.fetch(\n-            '/app/param/rsc-fetch/error?status=error',\n-            env.fetchInit\n-          )\n+          it('should handle RSC with fetch on edge', async () => {\n+            await next.fetch('/app/param/rsc-fetch/edge', env.fetchInit)\n \n-          await expectTrace(getCollector(), [\n-            {\n-              name: 'GET /app/[param]/rsc-fetch/error',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/app/[param]/rsc-fetch/error',\n-                'http.status_code': 500,\n-                'http.target': '/app/param/rsc-fetch/error?status=error',\n-                'next.route': '/app/[param]/rsc-fetch/error',\n-                'next.rsc': false,\n-                'next.span_name': 'GET /app/[param]/rsc-fetch/error',\n-                'next.span_type': 'BaseServer.handleRequest',\n-                'error.type': '500',\n-              },\n-              kind: 1,\n-              status: { code: 2 },\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              spans: [\n+            await expectTrace(\n+              getCollector(),\n+              [\n                 {\n-                  name: 'render route (app) /app/[param]/rsc-fetch/error',\n+                  traceId: env.span.traceId,\n+                  parentId: env.span.rootParentId,\n+                  runtime: 'edge',\n+                  name: 'GET /app/[param]/rsc-fetch/edge',\n+                  kind: 1,\n                   attributes: {\n-                    'next.route': '/app/[param]/rsc-fetch/error',\n-                    'next.span_name':\n-                      'render route (app) /app/[param]/rsc-fetch/error',\n-                    'next.span_type': 'AppRender.getBodyResult',\n+                    'next.span_name': 'GET /app/[param]/rsc-fetch/edge',\n+                    'next.span_type': 'BaseServer.handleRequest',\n+                    'http.method': 'GET',\n+                    'http.target': '/app/param/rsc-fetch/edge?param=param',\n+                    'http.status_code': 200,\n+                    'next.route': '/app/[param]/rsc-fetch/edge',\n+                    'http.route': '/app/[param]/rsc-fetch/edge',\n                   },\n-                  kind: 0,\n-                  status: { code: 2 },\n+                  status: { code: 0 },\n                   spans: [\n                     {\n-                      name: 'build component tree',\n+                      name: 'render route (app) /app/[param]/rsc-fetch/edge',\n+                      kind: 0,\n                       attributes: {\n-                        'next.span_name': 'build component tree',\n-                        'next.span_type': 'NextNodeServer.createComponentTree',\n+                        'next.span_name':\n+                          'render route (app) /app/[param]/rsc-fetch/edge',\n+                        'next.span_type': 'AppRender.getBodyResult',\n+                        'next.route': '/app/[param]/rsc-fetch/edge',\n                       },\n-                      kind: 0,\n                       status: { code: 0 },\n                       spans: [\n                         {\n-                          name: 'resolve segment modules',\n+                          name: 'build component tree',\n+                          kind: 0,\n                           attributes: {\n-                            'next.segment': '__PAGE__',\n-                            'next.span_name': 'resolve segment modules',\n+                            'next.span_name': 'build component tree',\n                             'next.span_type':\n-                              'NextNodeServer.getLayoutOrPageModule',\n+                              'NextNodeServer.createComponentTree',\n                           },\n-                          kind: 0,\n                           status: { code: 0 },\n+                          spans: [\n+                            {\n+                              name: 'resolve segment modules',\n+                              kind: 0,\n+                              attributes: {\n+                                'next.span_name': 'resolve segment modules',\n+                                'next.span_type':\n+                                  'NextNodeServer.getLayoutOrPageModule',\n+                                'next.segment': '__PAGE__',\n+                              },\n+                              status: { code: 0 },\n+                            },\n+                            {\n+                              name: 'resolve segment modules',\n+                              kind: 0,\n+                              attributes: {\n+                                'next.span_name': 'resolve segment modules',\n+                                'next.span_type':\n+                                  'NextNodeServer.getLayoutOrPageModule',\n+                                'next.segment': '[param]',\n+                              },\n+                              status: { code: 0 },\n+                            },\n+                          ],\n                         },\n                         {\n-                          name: 'resolve segment modules',\n+                          name: 'fetch GET https://example.vercel.sh/',\n+                          kind: 2,\n+                          attributes: {\n+                            'next.span_name':\n+                              'fetch GET https://example.vercel.sh/',\n+                            'next.span_type': 'AppRender.fetch',\n+                            'http.url': 'https://example.vercel.sh/',\n+                            'http.method': 'GET',\n+                            'net.peer.name': 'example.vercel.sh',\n+                          },\n+                          status: { code: 0 },\n+                        },\n+                        {\n+                          name: 'generateMetadata /app/[param]/layout',\n+                          kind: 0,\n                           attributes: {\n-                            'next.segment': '[param]',\n-                            'next.span_name': 'resolve segment modules',\n+                            'next.span_name':\n+                              'generateMetadata /app/[param]/layout',\n                             'next.span_type':\n-                              'NextNodeServer.getLayoutOrPageModule',\n+                              'ResolveMetadata.generateMetadata',\n+                            'next.page': '/app/[param]/layout',\n                           },\n+                          status: { code: 0 },\n+                        },\n+                        {\n+                          name: 'generateMetadata /app/[param]/rsc-fetch/edge/page',\n                           kind: 0,\n+                          attributes: {\n+                            'next.span_name':\n+                              'generateMetadata /app/[param]/rsc-fetch/edge/page',\n+                            'next.span_type':\n+                              'ResolveMetadata.generateMetadata',\n+                            'next.page': '/app/[param]/rsc-fetch/edge/page',\n+                          },\n                           status: { code: 0 },\n                         },\n                       ],\n                     },\n-                    {\n-                      name: 'generateMetadata /app/[param]/layout',\n-                      attributes: {\n-                        'next.page': '/app/[param]/layout',\n-                        'next.span_name':\n-                          'generateMetadata /app/[param]/layout',\n-                        'next.span_type': 'ResolveMetadata.generateMetadata',\n-                      },\n-                      kind: 0,\n-                      status: { code: 0 },\n-                    },\n-                    {\n-                      name: 'generateMetadata /app/[param]/layout',\n-                      attributes: {\n-                        'next.page': '/app/[param]/layout',\n-                        'next.span_name':\n-                          'generateMetadata /app/[param]/layout',\n-                        'next.span_type': 'ResolveMetadata.generateMetadata',\n-                      },\n-                      kind: 0,\n-                      status: { code: 0 },\n+                  ],\n+                },\n+              ],\n+              true\n+            )\n+          })\n+\n+          it('should handle RSC with fetch in RSC mode', async () => {\n+            await next.fetch(`/app/param/rsc-fetch?${NEXT_RSC_UNION_QUERY}`, {\n+              ...env.fetchInit,\n+              headers: {\n+                ...env.fetchInit?.headers,\n+                Rsc: '1',\n+              },\n+            })\n+\n+            await expectTrace(getCollector(), [\n+              {\n+                runtime: 'nodejs',\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                name: 'RSC GET /app/[param]/rsc-fetch',\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': '/app/[param]/rsc-fetch',\n+                  'http.status_code': 200,\n+                  'http.target': `/app/param/rsc-fetch?${NEXT_RSC_UNION_QUERY}`,\n+                  'next.route': '/app/[param]/rsc-fetch',\n+                  'next.rsc': true,\n+                  'next.span_name': 'RSC GET /app/[param]/rsc-fetch',\n+                  'next.span_type': 'BaseServer.handleRequest',\n+                },\n+                kind: 1,\n+                status: { code: 0 },\n+              },\n+            ])\n+          })\n+\n+          it('should handle route handlers in app router', async () => {\n+            await next.fetch('/api/app/param/data', env.fetchInit)\n+\n+            await expectTrace(getCollector(), [\n+              {\n+                name: 'GET /api/app/[param]/data',\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': '/api/app/[param]/data',\n+                  'http.status_code': 200,\n+                  'http.target': '/api/app/param/data',\n+                  'next.route': '/api/app/[param]/data',\n+                  'next.span_name': 'GET /api/app/[param]/data',\n+                  'next.span_type': 'BaseServer.handleRequest',\n+                },\n+                kind: 1,\n+                status: { code: 0 },\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                spans: [\n+                  {\n+                    name: 'executing api route (app) /api/app/[param]/data',\n+                    attributes: {\n+                      'next.route': '/api/app/[param]/data',\n+                      'next.span_name':\n+                        'executing api route (app) /api/app/[param]/data',\n+                      'next.span_type': 'AppRouteRouteHandlers.runHandler',\n                     },\n-                    {\n-                      attributes: {\n-                        'next.clientComponentLoadCount': isNextDev ? 10 : 8,\n-                        'next.span_type':\n-                          'NextNodeServer.clientComponentLoading',\n-                      },\n-                      kind: 0,\n-                      name: 'NextNodeServer.clientComponentLoading',\n-                      status: {\n-                        code: 0,\n-                      },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                  {\n+                    name: 'resolve page components',\n+                    attributes: {\n+                      'next.route': '/api/app/[param]/data',\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n                     },\n-                    {\n-                      name: 'start response',\n-                      attributes: {\n-                        'next.span_name': 'start response',\n-                        'next.span_type': 'NextNodeServer.startResponse',\n-                      },\n-                      kind: 0,\n-                      status: { code: 0 },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                  {\n+                    name: 'start response',\n+                    attributes: {\n+                      'next.span_name': 'start response',\n+                      'next.span_type': 'NextNodeServer.startResponse',\n                     },\n-                  ],\n-                },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                ],\n+              },\n+            ])\n+          })\n+\n+          it('should handle route handlers in app router on edge', async () => {\n+            await next.fetch('/api/app/param/data/edge', env.fetchInit)\n+\n+            await expectTrace(\n+              getCollector(),\n+              [\n                 {\n-                  name: 'resolve page components',\n+                  runtime: 'edge',\n+                  traceId: env.span.traceId,\n+                  parentId: env.span.rootParentId,\n+                  name: 'executing api route (app) /api/app/[param]/data/edge',\n                   attributes: {\n-                    'next.route': '/app/[param]/rsc-fetch/error',\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n+                    'next.route': '/api/app/[param]/data/edge',\n+                    'next.span_name':\n+                      'executing api route (app) /api/app/[param]/data/edge',\n+                    'next.span_type': 'AppRouteRouteHandlers.runHandler',\n                   },\n                   kind: 0,\n                   status: { code: 0 },\n                 },\n               ],\n-            },\n-          ])\n-        })\n-      })\n+              true\n+            )\n+          })\n \n-      describe('pages', () => {\n-        it('should handle getServerSideProps', async () => {\n-          await next.fetch('/pages/param/getServerSideProps', env.fetchInit)\n+          it('should trace middleware', async () => {\n+            await next.fetch('/behind-middleware', env.fetchInit)\n \n-          await expectTrace(getCollector(), [\n-            {\n-              name: 'GET /pages/[param]/getServerSideProps',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/pages/[param]/getServerSideProps',\n-                'http.status_code': 200,\n-                'http.target': '/pages/param/getServerSideProps',\n-                'next.route': '/pages/[param]/getServerSideProps',\n-                'next.span_name': 'GET /pages/[param]/getServerSideProps',\n-                'next.span_type': 'BaseServer.handleRequest',\n+            await expectTrace(getCollector(), [\n+              {\n+                runtime: 'edge',\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                name: 'middleware GET',\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.target': '/behind-middleware',\n+                  'next.span_name': 'middleware GET',\n+                  'next.span_type': 'Middleware.execute',\n+                },\n+                status: { code: 0 },\n+                spans: [],\n               },\n-              kind: 1,\n-              status: { code: 0 },\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              spans: [\n-                {\n-                  name: 'getServerSideProps /pages/[param]/getServerSideProps',\n-                  attributes: {\n-                    'next.route': '/pages/[param]/getServerSideProps',\n-                    'next.span_name':\n-                      'getServerSideProps /pages/[param]/getServerSideProps',\n-                    'next.span_type': 'Render.getServerSideProps',\n+\n+              {\n+                runtime: 'nodejs',\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                name: 'GET /behind-middleware',\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': '/behind-middleware',\n+                  'http.status_code': 200,\n+                  'http.target': '/behind-middleware',\n+                  'next.route': '/behind-middleware',\n+                  'next.span_name': 'GET /behind-middleware',\n+                  'next.span_type': 'BaseServer.handleRequest',\n+                },\n+              },\n+            ])\n+          })\n+\n+          it('should handle error in RSC', async () => {\n+            await next.fetch(\n+              '/app/param/rsc-fetch/error?status=error',\n+              env.fetchInit\n+            )\n+\n+            await expectTrace(getCollector(), [\n+              {\n+                name: 'GET /app/[param]/rsc-fetch/error',\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': '/app/[param]/rsc-fetch/error',\n+                  'http.status_code': 500,\n+                  'http.target': '/app/param/rsc-fetch/error?status=error',\n+                  'next.route': '/app/[param]/rsc-fetch/error',\n+                  'next.rsc': false,\n+                  'next.span_name': 'GET /app/[param]/rsc-fetch/error',\n+                  'next.span_type': 'BaseServer.handleRequest',\n+                  'error.type': '500',\n+                },\n+                kind: 1,\n+                status: { code: 2 },\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                spans: [\n+                  {\n+                    name: 'render route (app) /app/[param]/rsc-fetch/error',\n+                    attributes: {\n+                      'next.route': '/app/[param]/rsc-fetch/error',\n+                      'next.span_name':\n+                        'render route (app) /app/[param]/rsc-fetch/error',\n+                      'next.span_type': 'AppRender.getBodyResult',\n+                    },\n+                    kind: 0,\n+                    status: { code: 2 },\n+                    spans: [\n+                      {\n+                        name: 'build component tree',\n+                        attributes: {\n+                          'next.span_name': 'build component tree',\n+                          'next.span_type':\n+                            'NextNodeServer.createComponentTree',\n+                        },\n+                        kind: 0,\n+                        status: { code: 0 },\n+                        spans: [\n+                          {\n+                            name: 'resolve segment modules',\n+                            attributes: {\n+                              'next.segment': '__PAGE__',\n+                              'next.span_name': 'resolve segment modules',\n+                              'next.span_type':\n+                                'NextNodeServer.getLayoutOrPageModule',\n+                            },\n+                            kind: 0,\n+                            status: { code: 0 },\n+                          },\n+                          {\n+                            name: 'resolve segment modules',\n+                            attributes: {\n+                              'next.segment': '[param]',\n+                              'next.span_name': 'resolve segment modules',\n+                              'next.span_type':\n+                                'NextNodeServer.getLayoutOrPageModule',\n+                            },\n+                            kind: 0,\n+                            status: { code: 0 },\n+                          },\n+                        ],\n+                      },\n+                      {\n+                        name: 'generateMetadata /app/[param]/layout',\n+                        attributes: {\n+                          'next.page': '/app/[param]/layout',\n+                          'next.span_name':\n+                            'generateMetadata /app/[param]/layout',\n+                          'next.span_type': 'ResolveMetadata.generateMetadata',\n+                        },\n+                        kind: 0,\n+                        status: { code: 0 },\n+                      },\n+                      {\n+                        name: 'generateMetadata /app/[param]/layout',\n+                        attributes: {\n+                          'next.page': '/app/[param]/layout',\n+                          'next.span_name':\n+                            'generateMetadata /app/[param]/layout',\n+                          'next.span_type': 'ResolveMetadata.generateMetadata',\n+                        },\n+                        kind: 0,\n+                        status: { code: 0 },\n+                      },\n+                      {\n+                        attributes: {\n+                          'next.clientComponentLoadCount': isNextDev ? 10 : 8,\n+                          'next.span_type':\n+                            'NextNodeServer.clientComponentLoading',\n+                        },\n+                        kind: 0,\n+                        name: 'NextNodeServer.clientComponentLoading',\n+                        status: {\n+                          code: 0,\n+                        },\n+                      },\n+                      {\n+                        name: 'start response',\n+                        attributes: {\n+                          'next.span_name': 'start response',\n+                          'next.span_type': 'NextNodeServer.startResponse',\n+                        },\n+                        kind: 0,\n+                        status: { code: 0 },\n+                      },\n+                    ],\n                   },\n-                  kind: 0,\n-                  status: { code: 0 },\n+                  {\n+                    name: 'resolve page components',\n+                    attributes: {\n+                      'next.route': '/app/[param]/rsc-fetch/error',\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                ],\n+              },\n+            ])\n+          })\n+        })\n+\n+        describe('pages', () => {\n+          it('should handle getServerSideProps', async () => {\n+            await next.fetch('/pages/param/getServerSideProps', env.fetchInit)\n+\n+            await expectTrace(getCollector(), [\n+              {\n+                name: 'GET /pages/[param]/getServerSideProps',\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': '/pages/[param]/getServerSideProps',\n+                  'http.status_code': 200,\n+                  'http.target': '/pages/param/getServerSideProps',\n+                  'next.route': '/pages/[param]/getServerSideProps',\n+                  'next.span_name': 'GET /pages/[param]/getServerSideProps',\n+                  'next.span_type': 'BaseServer.handleRequest',\n                 },\n-                {\n-                  name: 'render route (pages) /pages/[param]/getServerSideProps',\n-                  attributes: {\n-                    'next.route': '/pages/[param]/getServerSideProps',\n-                    'next.span_name':\n-                      'render route (pages) /pages/[param]/getServerSideProps',\n-                    'next.span_type': 'Render.renderDocument',\n+                kind: 1,\n+                status: { code: 0 },\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                spans: [\n+                  {\n+                    name: 'getServerSideProps /pages/[param]/getServerSideProps',\n+                    attributes: {\n+                      'next.route': '/pages/[param]/getServerSideProps',\n+                      'next.span_name':\n+                        'getServerSideProps /pages/[param]/getServerSideProps',\n+                      'next.span_type': 'Render.getServerSideProps',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n                   },\n-                  kind: 0,\n-                  status: { code: 0 },\n+                  {\n+                    name: 'render route (pages) /pages/[param]/getServerSideProps',\n+                    attributes: {\n+                      'next.route': '/pages/[param]/getServerSideProps',\n+                      'next.span_name':\n+                        'render route (pages) /pages/[param]/getServerSideProps',\n+                      'next.span_type': 'Render.renderDocument',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                  {\n+                    name: 'resolve page components',\n+                    attributes: {\n+                      'next.route': '/pages/[param]/getServerSideProps',\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                ],\n+              },\n+            ])\n+          })\n+\n+          it(\"should handle getStaticProps when fallback: 'blocking'\", async () => {\n+            const v = env.span.rootParentId ? '2' : ''\n+            await next.fetch(`/pages/param/getStaticProps${v}`, env.fetchInit)\n+\n+            await expectTrace(getCollector(), [\n+              {\n+                name: `GET /pages/[param]/getStaticProps${v}`,\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': `/pages/[param]/getStaticProps${v}`,\n+                  'http.status_code': 200,\n+                  'http.target': `/pages/param/getStaticProps${v}`,\n+                  'next.route': `/pages/[param]/getStaticProps${v}`,\n+                  'next.span_name': `GET /pages/[param]/getStaticProps${v}`,\n+                  'next.span_type': 'BaseServer.handleRequest',\n                 },\n+                kind: 1,\n+                status: { code: 0 },\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                spans: [\n+                  {\n+                    name: `getStaticProps /pages/[param]/getStaticProps${v}`,\n+                    attributes: {\n+                      'next.route': `/pages/[param]/getStaticProps${v}`,\n+                      'next.span_name': `getStaticProps /pages/[param]/getStaticProps${v}`,\n+                      'next.span_type': 'Render.getStaticProps',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                  {\n+                    name: `render route (pages) /pages/[param]/getStaticProps${v}`,\n+                    attributes: {\n+                      'next.route': `/pages/[param]/getStaticProps${v}`,\n+                      'next.span_name': `render route (pages) /pages/[param]/getStaticProps${v}`,\n+                      'next.span_type': 'Render.renderDocument',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                  {\n+                    name: 'resolve page components',\n+                    attributes: {\n+                      'next.route': `/pages/[param]/getStaticProps${v}`,\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                ],\n+              },\n+            ])\n+          })\n+\n+          it('should handle getServerSideProps on edge', async () => {\n+            await next.fetch(\n+              '/pages/param/edge/getServerSideProps',\n+              env.fetchInit\n+            )\n+\n+            await expectTrace(\n+              getCollector(),\n+              [\n                 {\n-                  name: 'resolve page components',\n+                  runtime: 'edge',\n+                  traceId: env.span.traceId,\n+                  parentId: env.span.rootParentId,\n+                  name: 'GET /pages/[param]/edge/getServerSideProps',\n+                  kind: 1,\n                   attributes: {\n-                    'next.route': '/pages/[param]/getServerSideProps',\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n+                    'next.span_name':\n+                      'GET /pages/[param]/edge/getServerSideProps',\n+                    'next.span_type': 'BaseServer.handleRequest',\n+                    'http.method': 'GET',\n+                    'http.target':\n+                      '/pages/param/edge/getServerSideProps?param=param',\n+                    'http.status_code': 200,\n+                    'next.route': '/pages/[param]/edge/getServerSideProps',\n+                    'http.route': '/pages/[param]/edge/getServerSideProps',\n                   },\n-                  kind: 0,\n                   status: { code: 0 },\n+                  spans: [\n+                    {\n+                      name: 'getServerSideProps /pages/[param]/edge/getServerSideProps',\n+                      kind: 0,\n+                      attributes: {\n+                        'next.span_name':\n+                          'getServerSideProps /pages/[param]/edge/getServerSideProps',\n+                        'next.span_type': 'Render.getServerSideProps',\n+                        'next.route': '/pages/[param]/edge/getServerSideProps',\n+                      },\n+                      status: { code: 0 },\n+                    },\n+                    {\n+                      name: 'render route (pages) /pages/[param]/edge/getServerSideProps',\n+                      kind: 0,\n+                      attributes: {\n+                        'next.span_name':\n+                          'render route (pages) /pages/[param]/edge/getServerSideProps',\n+                        'next.span_type': 'Render.renderDocument',\n+                        'next.route': '/pages/[param]/edge/getServerSideProps',\n+                      },\n+                      status: { code: 0 },\n+                    },\n+                  ],\n                 },\n               ],\n-            },\n-          ])\n-        })\n+              true\n+            )\n+          })\n \n-        it(\"should handle getStaticProps when fallback: 'blocking'\", async () => {\n-          const v = env.span.rootParentId ? '2' : ''\n-          await next.fetch(`/pages/param/getStaticProps${v}`, env.fetchInit)\n+          it('should handle getServerSideProps exceptions', async () => {\n+            await next.fetch(\n+              '/pages/param/getServerSidePropsError',\n+              env.fetchInit\n+            )\n \n-          await expectTrace(getCollector(), [\n-            {\n-              name: `GET /pages/[param]/getStaticProps${v}`,\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': `/pages/[param]/getStaticProps${v}`,\n-                'http.status_code': 200,\n-                'http.target': `/pages/param/getStaticProps${v}`,\n-                'next.route': `/pages/[param]/getStaticProps${v}`,\n-                'next.span_name': `GET /pages/[param]/getStaticProps${v}`,\n-                'next.span_type': 'BaseServer.handleRequest',\n-              },\n-              kind: 1,\n-              status: { code: 0 },\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              spans: [\n-                {\n-                  name: `getStaticProps /pages/[param]/getStaticProps${v}`,\n-                  attributes: {\n-                    'next.route': `/pages/[param]/getStaticProps${v}`,\n-                    'next.span_name': `getStaticProps /pages/[param]/getStaticProps${v}`,\n-                    'next.span_type': 'Render.getStaticProps',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n+            await expectTrace(getCollector(), [\n+              {\n+                name: 'GET /pages/[param]/getServerSidePropsError',\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': '/pages/[param]/getServerSidePropsError',\n+                  'http.status_code': 500,\n+                  'http.target': '/pages/param/getServerSidePropsError',\n+                  'next.route': '/pages/[param]/getServerSidePropsError',\n+                  'next.span_name':\n+                    'GET /pages/[param]/getServerSidePropsError',\n+                  'next.span_type': 'BaseServer.handleRequest',\n+                  'error.type': '500',\n                 },\n-                {\n-                  name: `render route (pages) /pages/[param]/getStaticProps${v}`,\n-                  attributes: {\n-                    'next.route': `/pages/[param]/getStaticProps${v}`,\n-                    'next.span_name': `render route (pages) /pages/[param]/getStaticProps${v}`,\n-                    'next.span_type': 'Render.renderDocument',\n+                kind: 1,\n+                status: { code: 2 },\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                spans: [\n+                  {\n+                    name: 'getServerSideProps /pages/[param]/getServerSidePropsError',\n+                    attributes: {\n+                      'next.route': '/pages/[param]/getServerSidePropsError',\n+                      'next.span_name':\n+                        'getServerSideProps /pages/[param]/getServerSidePropsError',\n+                      'next.span_type': 'Render.getServerSideProps',\n+                      'error.type': 'Error',\n+                    },\n+                    kind: 0,\n+                    status: {\n+                      code: 2,\n+                      message: 'ServerSideProps error',\n+                    },\n+                    events: [\n+                      {\n+                        name: 'exception',\n+                        attributes: {\n+                          'exception.type': 'Error',\n+                          'exception.message': 'ServerSideProps error',\n+                        },\n+                      },\n+                    ],\n+                  },\n+                  {\n+                    name: 'render route (pages) /_error',\n+                    attributes: {\n+                      'next.route': '/_error',\n+                      'next.span_name': 'render route (pages) /_error',\n+                      'next.span_type': 'Render.renderDocument',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                  {\n+                    name: 'resolve page components',\n+                    attributes: {\n+                      'next.route': '/_error',\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n                   },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-                {\n-                  name: 'resolve page components',\n-                  attributes: {\n-                    'next.route': `/pages/[param]/getStaticProps${v}`,\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n+                  ...(isNextDev\n+                    ? []\n+                    : [\n+                        {\n+                          name: 'resolve page components',\n+                          attributes: {\n+                            'next.route': '/500',\n+                            'next.span_name': 'resolve page components',\n+                            'next.span_type':\n+                              'NextNodeServer.findPageComponents',\n+                          },\n+                          kind: 0,\n+                          status: { code: 0 },\n+                        },\n+                        {\n+                          name: 'resolve page components',\n+                          attributes: {\n+                            'next.route': '/500',\n+                            'next.span_name': 'resolve page components',\n+                            'next.span_type':\n+                              'NextNodeServer.findPageComponents',\n+                          },\n+                          kind: 0,\n+                          status: { code: 0 },\n+                        },\n+                      ]),\n+                  {\n+                    name: 'resolve page components',\n+                    attributes: {\n+                      'next.route': '/pages/[param]/getServerSidePropsError',\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n                   },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-              ],\n-            },\n-          ])\n-        })\n+                ],\n+              },\n+            ])\n+          })\n \n-        it('should handle getServerSideProps on edge', async () => {\n-          await next.fetch(\n-            '/pages/param/edge/getServerSideProps',\n-            env.fetchInit\n-          )\n+          it('should handle getServerSideProps returning notFound', async () => {\n+            await next.fetch(\n+              '/pages/param/getServerSidePropsNotFound',\n+              env.fetchInit\n+            )\n \n-          await expectTrace(\n-            getCollector(),\n-            [\n+            await expectTrace(getCollector(), [\n               {\n-                runtime: 'edge',\n-                traceId: env.span.traceId,\n-                parentId: env.span.rootParentId,\n-                name: 'GET /pages/[param]/edge/getServerSideProps',\n-                kind: 1,\n+                name: 'GET /pages/[param]/getServerSidePropsNotFound',\n                 attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': '/pages/[param]/getServerSidePropsNotFound',\n+                  'http.status_code': 404,\n+                  'http.target': '/pages/param/getServerSidePropsNotFound',\n+                  'next.route': '/pages/[param]/getServerSidePropsNotFound',\n                   'next.span_name':\n-                    'GET /pages/[param]/edge/getServerSideProps',\n+                    'GET /pages/[param]/getServerSidePropsNotFound',\n                   'next.span_type': 'BaseServer.handleRequest',\n-                  'http.method': 'GET',\n-                  'http.target':\n-                    '/pages/param/edge/getServerSideProps?param=param',\n-                  'http.status_code': 200,\n-                  'next.route': '/pages/[param]/edge/getServerSideProps',\n-                  'http.route': '/pages/[param]/edge/getServerSideProps',\n                 },\n+                kind: 1,\n                 status: { code: 0 },\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n                 spans: [\n                   {\n-                    name: 'getServerSideProps /pages/[param]/edge/getServerSideProps',\n-                    kind: 0,\n+                    name: 'getServerSideProps /pages/[param]/getServerSidePropsNotFound',\n                     attributes: {\n+                      'next.route': '/pages/[param]/getServerSidePropsNotFound',\n                       'next.span_name':\n-                        'getServerSideProps /pages/[param]/edge/getServerSideProps',\n+                        'getServerSideProps /pages/[param]/getServerSidePropsNotFound',\n                       'next.span_type': 'Render.getServerSideProps',\n-                      'next.route': '/pages/[param]/edge/getServerSideProps',\n                     },\n-                    status: { code: 0 },\n+                    kind: 0,\n+                    status: {\n+                      code: 0,\n+                    },\n                   },\n+                  ...(isNextDev\n+                    ? [\n+                        {\n+                          name: 'render route (app) /_not-found',\n+                          attributes: {\n+                            'next.route': '/_not-found',\n+                            'next.span_name': 'render route (app) /_not-found',\n+                            'next.span_type': 'AppRender.getBodyResult',\n+                          },\n+                          kind: 0,\n+                          status: { code: 0 },\n+                        },\n+                      ]\n+                    : []),\n                   {\n-                    name: 'render route (pages) /pages/[param]/edge/getServerSideProps',\n+                    name: 'resolve page components',\n+                    attributes: {\n+                      'next.route': '/_not-found',\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n+                    },\n                     kind: 0,\n+                    status: { code: 0 },\n+                  },\n+                  {\n+                    name: 'resolve page components',\n                     attributes: {\n-                      'next.span_name':\n-                        'render route (pages) /pages/[param]/edge/getServerSideProps',\n-                      'next.span_type': 'Render.renderDocument',\n-                      'next.route': '/pages/[param]/edge/getServerSideProps',\n+                      'next.route': '/pages/[param]/getServerSidePropsNotFound',\n+                      'next.span_name': 'resolve page components',\n+                      'next.span_type': 'NextNodeServer.findPageComponents',\n                     },\n+                    kind: 0,\n                     status: { code: 0 },\n                   },\n                 ],\n               },\n-            ],\n-            true\n-          )\n-        })\n+            ])\n+          })\n \n-        it('should handle getServerSideProps exceptions', async () => {\n-          await next.fetch(\n-            '/pages/param/getServerSidePropsError',\n-            env.fetchInit\n-          )\n+          it('should handle api routes in pages', async () => {\n+            await next.fetch('/api/pages/param/basic', env.fetchInit)\n \n-          await expectTrace(getCollector(), [\n-            {\n-              name: 'GET /pages/[param]/getServerSidePropsError',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/pages/[param]/getServerSidePropsError',\n-                'http.status_code': 500,\n-                'http.target': '/pages/param/getServerSidePropsError',\n-                'next.route': '/pages/[param]/getServerSidePropsError',\n-                'next.span_name': 'GET /pages/[param]/getServerSidePropsError',\n-                'next.span_type': 'BaseServer.handleRequest',\n-                'error.type': '500',\n-              },\n-              kind: 1,\n-              status: { code: 2 },\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              spans: [\n-                {\n-                  name: 'getServerSideProps /pages/[param]/getServerSidePropsError',\n-                  attributes: {\n-                    'next.route': '/pages/[param]/getServerSidePropsError',\n-                    'next.span_name':\n-                      'getServerSideProps /pages/[param]/getServerSidePropsError',\n-                    'next.span_type': 'Render.getServerSideProps',\n-                    'error.type': 'Error',\n-                  },\n-                  kind: 0,\n-                  status: {\n-                    code: 2,\n-                    message: 'ServerSideProps error',\n-                  },\n-                  events: [\n-                    {\n-                      name: 'exception',\n-                      attributes: {\n-                        'exception.type': 'Error',\n-                        'exception.message': 'ServerSideProps error',\n-                      },\n-                    },\n-                  ],\n-                },\n-                {\n-                  name: 'render route (pages) /_error',\n-                  attributes: {\n-                    'next.route': '/_error',\n-                    'next.span_name': 'render route (pages) /_error',\n-                    'next.span_type': 'Render.renderDocument',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-                {\n-                  name: 'resolve page components',\n-                  attributes: {\n-                    'next.route': '/_error',\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n+            await expectTrace(getCollector(), [\n+              {\n+                name: 'GET /api/pages/[param]/basic',\n+                attributes: {\n+                  'http.method': 'GET',\n+                  'http.route': '/api/pages/[param]/basic',\n+                  'http.status_code': 200,\n+                  'http.target': '/api/pages/param/basic',\n+                  'next.route': '/api/pages/[param]/basic',\n+                  'next.span_name': 'GET /api/pages/[param]/basic',\n+                  'next.span_type': 'BaseServer.handleRequest',\n                 },\n-                ...(isNextDev\n-                  ? []\n-                  : [\n-                      {\n-                        name: 'resolve page components',\n-                        attributes: {\n-                          'next.route': '/500',\n-                          'next.span_name': 'resolve page components',\n-                          'next.span_type': 'NextNodeServer.findPageComponents',\n-                        },\n-                        kind: 0,\n-                        status: { code: 0 },\n-                      },\n-                      {\n-                        name: 'resolve page components',\n-                        attributes: {\n-                          'next.route': '/500',\n-                          'next.span_name': 'resolve page components',\n-                          'next.span_type': 'NextNodeServer.findPageComponents',\n-                        },\n-                        kind: 0,\n-                        status: { code: 0 },\n-                      },\n-                    ]),\n-                {\n-                  name: 'resolve page components',\n-                  attributes: {\n-                    'next.route': '/pages/[param]/getServerSidePropsError',\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n+                kind: 1,\n+                status: { code: 0 },\n+                traceId: env.span.traceId,\n+                parentId: env.span.rootParentId,\n+                spans: [\n+                  {\n+                    name: 'executing api route (pages) /api/pages/[param]/basic',\n+                    attributes: {\n+                      'next.span_name':\n+                        'executing api route (pages) /api/pages/[param]/basic',\n+                      'next.span_type': 'Node.runHandler',\n+                    },\n+                    kind: 0,\n+                    status: { code: 0 },\n                   },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-              ],\n-            },\n-          ])\n-        })\n-\n-        it('should handle getServerSideProps returning notFound', async () => {\n-          await next.fetch(\n-            '/pages/param/getServerSidePropsNotFound',\n-            env.fetchInit\n-          )\n-\n-          await expectTrace(getCollector(), [\n-            {\n-              name: 'GET /pages/[param]/getServerSidePropsNotFound',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/pages/[param]/getServerSidePropsNotFound',\n-                'http.status_code': 404,\n-                'http.target': '/pages/param/getServerSidePropsNotFound',\n-                'next.route': '/pages/[param]/getServerSidePropsNotFound',\n-                'next.span_name':\n-                  'GET /pages/[param]/getServerSidePropsNotFound',\n-                'next.span_type': 'BaseServer.handleRequest',\n+                ],\n               },\n-              kind: 1,\n-              status: { code: 0 },\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              spans: [\n-                {\n-                  name: 'getServerSideProps /pages/[param]/getServerSidePropsNotFound',\n-                  attributes: {\n-                    'next.route': '/pages/[param]/getServerSidePropsNotFound',\n-                    'next.span_name':\n-                      'getServerSideProps /pages/[param]/getServerSidePropsNotFound',\n-                    'next.span_type': 'Render.getServerSideProps',\n-                  },\n-                  kind: 0,\n-                  status: {\n-                    code: 0,\n-                  },\n-                },\n-                ...(isNextDev\n-                  ? [\n-                      {\n-                        name: 'render route (app) /_not-found',\n-                        attributes: {\n-                          'next.route': '/_not-found',\n-                          'next.span_name': 'render route (app) /_not-found',\n-                          'next.span_type': 'AppRender.getBodyResult',\n-                        },\n-                        kind: 0,\n-                        status: { code: 0 },\n-                      },\n-                    ]\n-                  : []),\n-                {\n-                  name: 'resolve page components',\n-                  attributes: {\n-                    'next.route': '/_not-found',\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-                {\n-                  name: 'resolve page components',\n-                  attributes: {\n-                    'next.route': '/pages/[param]/getServerSidePropsNotFound',\n-                    'next.span_name': 'resolve page components',\n-                    'next.span_type': 'NextNodeServer.findPageComponents',\n-                  },\n-                  kind: 0,\n-                  status: { code: 0 },\n-                },\n-              ],\n-            },\n-          ])\n-        })\n+            ])\n+          })\n \n-        it('should handle api routes in pages', async () => {\n-          await next.fetch('/api/pages/param/basic', env.fetchInit)\n+          it('should handle api routes in pages on edge', async () => {\n+            await next.fetch('/api/pages/param/edge', env.fetchInit)\n \n-          await expectTrace(getCollector(), [\n-            {\n-              name: 'GET /api/pages/[param]/basic',\n-              attributes: {\n-                'http.method': 'GET',\n-                'http.route': '/api/pages/[param]/basic',\n-                'http.status_code': 200,\n-                'http.target': '/api/pages/param/basic',\n-                'next.route': '/api/pages/[param]/basic',\n-                'next.span_name': 'GET /api/pages/[param]/basic',\n-                'next.span_type': 'BaseServer.handleRequest',\n-              },\n-              kind: 1,\n-              status: { code: 0 },\n-              traceId: env.span.traceId,\n-              parentId: env.span.rootParentId,\n-              spans: [\n+            await expectTrace(\n+              getCollector(),\n+              [\n                 {\n-                  name: 'executing api route (pages) /api/pages/[param]/basic',\n+                  runtime: 'edge',\n+                  traceId: env.span.traceId,\n+                  parentId: env.span.rootParentId,\n+                  name: 'executing api route (pages) /api/pages/[param]/edge',\n                   attributes: {\n                     'next.span_name':\n-                      'executing api route (pages) /api/pages/[param]/basic',\n+                      'executing api route (pages) /api/pages/[param]/edge',\n                     'next.span_type': 'Node.runHandler',\n                   },\n                   kind: 0,\n                   status: { code: 0 },\n                 },\n               ],\n-            },\n-          ])\n-        })\n-\n-        it('should handle api routes in pages on edge', async () => {\n-          await next.fetch('/api/pages/param/edge', env.fetchInit)\n-\n-          await expectTrace(\n-            getCollector(),\n-            [\n-              {\n-                runtime: 'edge',\n-                traceId: env.span.traceId,\n-                parentId: env.span.rootParentId,\n-                name: 'executing api route (pages) /api/pages/[param]/edge',\n-                attributes: {\n-                  'next.span_name':\n-                    'executing api route (pages) /api/pages/[param]/edge',\n-                  'next.span_type': 'Node.runHandler',\n-                },\n-                kind: 0,\n-                status: { code: 0 },\n-              },\n-            ],\n-            true\n-          )\n+              true\n+            )\n+          })\n         })\n-      })\n-    })\n+      }\n+    )\n   }\n })\n \n@@ -1057,56 +1065,57 @@ describe('opentelemetry with disabled fetch tracing', () => {\n     await collector.shutdown()\n     await new Promise((r) => setTimeout(r, 1000))\n   })\n-  ;(process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\n-    ? describe.skip\n-    : describe)('root context', () => {\n-    describe('app router with disabled fetch', () => {\n-      it('should handle RSC with disabled fetch', async () => {\n-        await next.fetch('/app/param/rsc-fetch')\n+  ;(process.env.__NEXT_CACHE_COMPONENTS ? describe.skip : describe)(\n+    'root context',\n+    () => {\n+      describe('app router with disabled fetch', () => {\n+        it('should handle RSC with disabled fetch', async () => {\n+          await next.fetch('/app/param/rsc-fetch')\n \n-        await expectTrace(getCollector(), [\n-          {\n-            name: 'GET /app/[param]/rsc-fetch',\n-            traceId: '[trace-id]',\n-            parentId: undefined,\n-            spans: [\n-              {\n-                name: 'render route (app) /app/[param]/rsc-fetch',\n-                spans: [\n-                  {\n-                    name: 'build component tree',\n-                    spans: [\n-                      {\n-                        name: 'resolve segment modules',\n-                      },\n-                      {\n-                        name: 'resolve segment modules',\n-                      },\n-                    ],\n-                  },\n-                  {\n-                    name: 'generateMetadata /app/[param]/layout',\n-                  },\n-                  {\n-                    name: 'generateMetadata /app/[param]/rsc-fetch/page',\n-                  },\n-                  {\n-                    name: 'NextNodeServer.clientComponentLoading',\n-                  },\n-                  {\n-                    name: 'start response',\n-                  },\n-                ],\n-              },\n-              {\n-                name: 'resolve page components',\n-              },\n-            ],\n-          },\n-        ])\n+          await expectTrace(getCollector(), [\n+            {\n+              name: 'GET /app/[param]/rsc-fetch',\n+              traceId: '[trace-id]',\n+              parentId: undefined,\n+              spans: [\n+                {\n+                  name: 'render route (app) /app/[param]/rsc-fetch',\n+                  spans: [\n+                    {\n+                      name: 'build component tree',\n+                      spans: [\n+                        {\n+                          name: 'resolve segment modules',\n+                        },\n+                        {\n+                          name: 'resolve segment modules',\n+                        },\n+                      ],\n+                    },\n+                    {\n+                      name: 'generateMetadata /app/[param]/layout',\n+                    },\n+                    {\n+                      name: 'generateMetadata /app/[param]/rsc-fetch/page',\n+                    },\n+                    {\n+                      name: 'NextNodeServer.clientComponentLoading',\n+                    },\n+                    {\n+                      name: 'start response',\n+                    },\n+                  ],\n+                },\n+                {\n+                  name: 'resolve page components',\n+                },\n+              ],\n+            },\n+          ])\n+        })\n       })\n-    })\n-  })\n+    }\n+  )\n })\n \n type HierSavedSpan = SavedSpan & { spans?: HierSavedSpan[] }"
        },
        {
            "sha": "a3e3690921e0bf759afa6d7fc26aa597d5d7bab1",
            "filename": "test/lib/next-modes/base.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Flib%2Fnext-modes%2Fbase.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Flib%2Fnext-modes%2Fbase.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-modes%2Fbase.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -404,7 +404,7 @@ export class NextInstance {\n \n           // alias experimental feature flags for deployment compatibility\n           if (process.env.NEXT_PRIVATE_EXPERIMENTAL_CACHE_COMPONENTS) {\n-            process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS = process.env.NEXT_PRIVATE_EXPERIMENTAL_CACHE_COMPONENTS\n+            process.env.__NEXT_CACHE_COMPONENTS = process.env.NEXT_PRIVATE_EXPERIMENTAL_CACHE_COMPONENTS\n           }\n         `\n           )"
        },
        {
            "sha": "1efce29304696c39aaf6ffa506a6be660dcd79b6",
            "filename": "test/lib/next-modes/next-deploy.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Flib%2Fnext-modes%2Fnext-deploy.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Flib%2Fnext-modes%2Fnext-deploy.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-modes%2Fnext-deploy.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -100,9 +100,9 @@ export class NextDeployInstance extends NextInstance {\n \n     // Add experimental feature flags\n \n-    if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS) {\n+    if (process.env.__NEXT_CACHE_COMPONENTS) {\n       additionalEnv.push(\n-        `NEXT_PRIVATE_EXPERIMENTAL_CACHE_COMPONENTS=${process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS}`\n+        `NEXT_PRIVATE_EXPERIMENTAL_CACHE_COMPONENTS=${process.env.__NEXT_CACHE_COMPONENTS}`\n       )\n     }\n "
        },
        {
            "sha": "d355c217122e7cd110d0ed81123dbcdce4a4bd1c",
            "filename": "test/production/adapter-config/next.config.mjs",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fadapter-config%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fadapter-config%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fadapter-config%2Fnext.config.mjs?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -3,10 +3,8 @@ const require = Module.createRequire(import.meta.url)\n \n /** @type {import('next').NextConfig} */\n const nextConfig = {\n-  experimental: {\n-    adapterPath: require.resolve('./my-adapter.mjs'),\n-    cacheComponents: process.env.TEST_CACHE_COMPONENTS === '1',\n-  },\n+  cacheComponents: process.env.TEST_CACHE_COMPONENTS === '1',\n+  experimental: { adapterPath: require.resolve('./my-adapter.mjs') },\n   output: process.env.TEST_EXPORT ? 'export' : undefined,\n }\n "
        },
        {
            "sha": "94dd893ad5fa023ea4a5551344781b55af128fd0",
            "filename": "test/production/app-dir/build-output-prerender/build-output-prerender.test.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 10,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Fbuild-output-prerender.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,8 +2,7 @@ import { nextTestSetup } from 'e2e-utils'\n import path from 'path'\n const { version: nextVersion } = require('next/package.json')\n \n-const cacheComponentsEnabled =\n-  process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+const cacheComponentsEnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n const pprEnabled = process.env.__NEXT_EXPERIMENTAL_PPR === 'true'\n \n@@ -19,7 +18,8 @@ describe('build-output-prerender', () => {\n \n       beforeAll(() => next.build())\n \n-      it('prints only the user-selected experimental flags (and the ones enabled via env variable)', async () => {\n+      // TODO: Re-enable this test once we move the cache components flag\n+      it.skip('prints only the user-selected experimental flags (and the ones enabled via env variable)', async () => {\n         if (cacheComponentsEnabled) {\n           if (isTurbopack) {\n             expect(getPreambleOutput(next.cliOutput)).toMatchInlineSnapshot(`\n@@ -116,7 +116,8 @@ describe('build-output-prerender', () => {\n \n       beforeAll(() => next.build())\n \n-      it('prints a warning and the customized experimental flags', async () => {\n+      // TODO: Re-enable this test once we move the cache components flag\n+      it.skip('prints a warning and the customized experimental flags', async () => {\n         if (cacheComponentsEnabled) {\n           if (isTurbopack) {\n             expect(getPreambleOutput(next.cliOutput)).toMatchInlineSnapshot(`\n@@ -240,20 +241,21 @@ describe('build-output-prerender', () => {\n \n       beforeAll(() => next.build())\n \n-      it('prints no experimental flags (unless enabled via env variable)', async () => {\n+      // TODO: Re-enable this test once we move the cache components flag\n+      it.skip('prints no experimental flags (unless enabled via env variable)', async () => {\n         if (cacheComponentsEnabled) {\n           if (isTurbopack) {\n             expect(getPreambleOutput(next.cliOutput)).toMatchInlineSnapshot(`\n              \"▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n-                  ✓ cacheComponents (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n+                  ✓ cacheComponents (enabled by \\`__NEXT_CACHE_COMPONENTS\\`)\n                   ✓ reactDebugChannel (enabled by \\`__NEXT_EXPERIMENTAL_DEBUG_CHANNEL\\`)\"\n             `)\n           } else {\n             expect(getPreambleOutput(next.cliOutput)).toMatchInlineSnapshot(`\n              \"▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n-                  ✓ cacheComponents (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n+                  ✓ cacheComponents (enabled by \\`__NEXT_CACHE_COMPONENTS\\`)\n                   ✓ reactDebugChannel (enabled by \\`__NEXT_EXPERIMENTAL_DEBUG_CHANNEL\\`)\"\n             `)\n           }\n@@ -298,14 +300,15 @@ describe('build-output-prerender', () => {\n \n       beforeAll(() => next.build())\n \n-      it('prints a warning and the customized experimental flags', async () => {\n+      // TODO: Re-enable this test once we move the cache components flag\n+      it.skip('prints a warning and the customized experimental flags', async () => {\n         if (cacheComponentsEnabled) {\n           if (isTurbopack) {\n             expect(getPreambleOutput(next.cliOutput)).toMatchInlineSnapshot(`\n              \"⚠ Prerendering is running in debug mode. Note: This may affect performance and should not be used for production.\n                 ▲ Next.js x.y.z (Turbopack)\n                 - Experiments (use with caution):\n-                  ✓ cacheComponents (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n+                  ✓ cacheComponents (enabled by \\`__NEXT_CACHE_COMPONENTS\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n                   ✓ reactDebugChannel (enabled by \\`__NEXT_EXPERIMENTAL_DEBUG_CHANNEL\\`)\n                   ✓ serverSourceMaps (enabled by \\`--debug-prerender\\`)\n@@ -316,7 +319,7 @@ describe('build-output-prerender', () => {\n              \"⚠ Prerendering is running in debug mode. Note: This may affect performance and should not be used for production.\n                 ▲ Next.js x.y.z (webpack)\n                 - Experiments (use with caution):\n-                  ✓ cacheComponents (enabled by \\`__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\\`)\n+                  ✓ cacheComponents (enabled by \\`__NEXT_CACHE_COMPONENTS\\`)\n                   ⨯ prerenderEarlyExit (disabled by \\`--debug-prerender\\`)\n                   ✓ reactDebugChannel (enabled by \\`__NEXT_EXPERIMENTAL_DEBUG_CHANNEL\\`)\n                   ⨯ serverMinification (disabled by \\`--debug-prerender\\`)"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/production/app-dir/build-output-prerender/fixtures/with-config-file/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Ffixtures%2Fwith-config-file%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Ffixtures%2Fwith-config-file%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fbuild-output-prerender%2Ffixtures%2Fwith-config-file%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "43f626184e7e2f5b5e5ecdfedf4dff429b43a2e1",
            "filename": "test/production/app-dir/build-output-ssg-bailout/build-output-ssg-bailout.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fbuild-output-ssg-bailout%2Fbuild-output-ssg-bailout.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fbuild-output-ssg-bailout%2Fbuild-output-ssg-bailout.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fbuild-output-ssg-bailout%2Fbuild-output-ssg-bailout.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -1,7 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n \n describe('build-output-ssg-bailout', () => {\n-  if (process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true') {\n+  if (process.env.__NEXT_CACHE_COMPONENTS === 'true') {\n     it.skip('PPR is enabled, will throw instead of bailing out', () => {})\n     return\n   }"
        },
        {
            "sha": "b43ffd28184bb94ae46661f009f73afb8ee97c70",
            "filename": "test/production/app-dir/build-output-tree-view/fixtures/mixed/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fbuild-output-tree-view%2Ffixtures%2Fmixed%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fbuild-output-tree-view%2Ffixtures%2Fmixed%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fbuild-output-tree-view%2Ffixtures%2Fmixed%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    useCache: true,\n-    cacheComponents: true,\n-  },\n+  experimental: { useCache: true },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "69baeb1b304f3dd7229b3a996e62ccd0475370c8",
            "filename": "test/production/app-dir/empty-generate-static-params/empty-generate-static-params.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fempty-generate-static-params%2Fempty-generate-static-params.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fempty-generate-static-params%2Fempty-generate-static-params.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fempty-generate-static-params%2Fempty-generate-static-params.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -10,8 +10,7 @@ describe('empty-generate-static-params', () => {\n   if (skipped) return\n \n   it('should mark the page with empty generateStaticParams as SSG in build output', async () => {\n-    const isPPREnabled =\n-      process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+    const isPPREnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n     expect(next.cliOutput).toContain(`${isPPREnabled ? '◐' : '●'} /[slug]`)\n   })\n \n@@ -20,8 +19,7 @@ describe('empty-generate-static-params', () => {\n     expect(firstResponse.status).toBe(200)\n \n     // With PPR enabled, the initial request doesn't send back a cache header\n-    const isPPREnabled =\n-      process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS === 'true'\n+    const isPPREnabled = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n \n     expect(firstResponse.headers.get('x-nextjs-cache')).toBe(\n       isPPREnabled ? null : 'MISS'"
        },
        {
            "sha": "9164ffe1ad5be52b9173e52db81c1bafff246032",
            "filename": "test/production/app-dir/parallel-routes-static/index.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fparallel-routes-static%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fparallel-routes-static%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fparallel-routes-static%2Findex.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -6,7 +6,7 @@ describe('app-dir parallel-routes-static', () => {\n   })\n \n   it('should static generate parallel routes', async () => {\n-    const rscExtension = process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\n+    const rscExtension = process.env.__NEXT_CACHE_COMPONENTS\n       ? '.prefetch.rsc'\n       : '.rsc'\n     expect(await next.hasFile('.next/server/app/nested/foo.html')).toBe(true)"
        },
        {
            "sha": "e64bae22d658030ef118a8b53c925258ae17563f",
            "filename": "test/production/app-dir/ppr-use-server-inserted-html/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fppr-use-server-inserted-html%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fppr-use-server-inserted-html%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fppr-use-server-inserted-html%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,9 +2,7 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-  },\n+  cacheComponents: true,\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "f00b634c71a57c2d754be56cfa51d0872063b4ea",
            "filename": "test/production/app-dir/resume-data-cache/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fresume-data-cache%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fresume-data-cache%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fresume-data-cache%2Fnext.config.js?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -2,10 +2,8 @@\n  * @type {import('next').NextConfig}\n  */\n const nextConfig = {\n-  experimental: {\n-    cacheComponents: true,\n-    clientSegmentCache: true,\n-  },\n+  cacheComponents: true,\n+  experimental: { clientSegmentCache: true },\n }\n \n module.exports = nextConfig"
        },
        {
            "sha": "683cb8252bf659eb031b1784b6f975c00ad4afc1",
            "filename": "test/production/app-dir/subresource-integrity/subresource-integrity.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fsubresource-integrity%2Fsubresource-integrity.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85c3d20a917a5256dd632046f5e5863569755b1c/test%2Fproduction%2Fapp-dir%2Fsubresource-integrity%2Fsubresource-integrity.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fapp-dir%2Fsubresource-integrity%2Fsubresource-integrity.test.ts?ref=85c3d20a917a5256dd632046f5e5863569755b1c",
            "patch": "@@ -226,10 +226,7 @@ import cheerio from 'cheerio'\n             `script-src 'nonce-\"><script></script>\"'`\n           )\n \n-          if (\n-            runtime === 'node' &&\n-            process.env.__NEXT_EXPERIMENTAL_CACHE_COMPONENTS\n-          ) {\n+          if (runtime === 'node' && process.env.__NEXT_CACHE_COMPONENTS) {\n             expect(res.status).toBe(200)\n           } else {\n             expect(res.status).toBe(500)"
        }
    ],
    "stats": {
        "total": 2642,
        "additions": 1219,
        "deletions": 1423
    }
}