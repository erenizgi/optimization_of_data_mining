{
    "author": "sokra",
    "message": "Turbopack: wait for tracing to be written before exiting (#78210)\n\n### What?\r\n\r\nWe need to wait for completion of the trace writer drop before existing the program",
    "sha": "8cba2141cd1921f4ed1e589bf8abec437640e0a7",
    "files": [
        {
            "sha": "813bd14cd944275143108e1bbb366e74bc88fd2f",
            "filename": "crates/napi/src/next_api/project.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8cba2141cd1921f4ed1e589bf8abec437640e0a7/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8cba2141cd1921f4ed1e589bf8abec437640e0a7/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs?ref=8cba2141cd1921f4ed1e589bf8abec437640e0a7",
            "patch": "@@ -374,7 +374,9 @@ pub async fn project_new(\n         let subscriber = subscriber.with(RawTraceLayer::new(trace_writer));\n \n         exit.on_exit(async move {\n-            tokio::task::spawn_blocking(move || drop(trace_writer_guard));\n+            tokio::task::spawn_blocking(move || drop(trace_writer_guard))\n+                .await\n+                .unwrap();\n         });\n \n         let trace_server = std::env::var(\"NEXT_TURBOPACK_TRACE_SERVER\").ok();"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}