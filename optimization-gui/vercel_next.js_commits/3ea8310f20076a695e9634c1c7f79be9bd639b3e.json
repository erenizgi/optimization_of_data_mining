{
    "author": "m1abdullahh",
    "message": "fix(metadata): make formatDetection respect true/false properly (#83924)\n\n### What?\n\nFixes the `FormatDetectionMeta` function so that it correctly respects\ntrue vs false values.\n\n### Why?\n\nPreviously, both true and false values output key=no. According to\nApple’s spec, Safari defaults to enabling detection when the tag is\nabsent, and only no should be added when explicitly disabled.\n\n### How?\n\n- Now false → outputs key=no\n- true → omits the tag (defaults to Safari’s behavior)\n\n### Reference\n\n- [Apple docs on\nformat-detection](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html#//apple_ref/doc/uid/TP40008193-SW1)\n\nFixes #83666\n\n---------\n\nCo-authored-by: Jiwon Choi <devjiwonchoi@gmail.com>",
    "sha": "3ea8310f20076a695e9634c1c7f79be9bd639b3e",
    "files": [
        {
            "sha": "224b379a05a289910595ab172157fac1ff35e9cd",
            "filename": "packages/next/src/lib/metadata/generate/basic.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3ea8310f20076a695e9634c1c7f79be9bd639b3e/packages%2Fnext%2Fsrc%2Flib%2Fmetadata%2Fgenerate%2Fbasic.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3ea8310f20076a695e9634c1c7f79be9bd639b3e/packages%2Fnext%2Fsrc%2Flib%2Fmetadata%2Fgenerate%2Fbasic.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Fmetadata%2Fgenerate%2Fbasic.tsx?ref=3ea8310f20076a695e9634c1c7f79be9bd639b3e",
            "patch": "@@ -184,12 +184,12 @@ export function FormatDetectionMeta({\n   if (!formatDetection) return null\n   let content = ''\n   for (const key of formatDetectionKeys) {\n-    if (key in formatDetection) {\n+    if (formatDetection[key] === false) {\n       if (content) content += ', '\n       content += `${key}=no`\n     }\n   }\n-  return <meta name=\"format-detection\" content={content} />\n+  return content ? <meta name=\"format-detection\" content={content} /> : null\n }\n \n export function AppleWebAppMeta({"
        },
        {
            "sha": "02f59433ce3257bdac911ee5cd8592e40a78176f",
            "filename": "test/e2e/app-dir/metadata/app/basic/page.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3ea8310f20076a695e9634c1c7f79be9bd639b3e/test%2Fe2e%2Fapp-dir%2Fmetadata%2Fapp%2Fbasic%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3ea8310f20076a695e9634c1c7f79be9bd639b3e/test%2Fe2e%2Fapp-dir%2Fmetadata%2Fapp%2Fbasic%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata%2Fapp%2Fbasic%2Fpage.tsx?ref=3ea8310f20076a695e9634c1c7f79be9bd639b3e",
            "patch": "@@ -37,6 +37,8 @@ export const metadata: Metadata = {\n     email: false,\n     address: false,\n     telephone: false,\n+    // Properties set to `true` should not be included in `format-detection` meta tag\n+    url: true,\n   },\n }\n "
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}