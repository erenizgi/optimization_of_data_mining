{
    "author": "huozhi",
    "message": "[devtools] refactor segment explorer styles (#80848)\n\n* Separate segment explorer instance from the dev overlay and the dev panel\r\n* Polish the padding, the customization padding on two sides are different. Dev overlay pop up requires minus margin to fit the border, dev tool panel requires the extra padding\r\n* Fix the background order, the darker one should appear from the 2nd row\r\n\r\n| After | Before |\r\n|:--|:--|\r\n| <img height=\"150\" src=\"https://github.com/user-attachments/assets/959dd9c7-2880-41a9-a8c8-9b87ea005c4d\"> |  <img height=\"150\" src=\"https://github.com/user-attachments/assets/610591f0-9716-4d66-9a6d-816867ac2264\"> |\r\n| <img height=\"150\" src=\"https://github.com/user-attachments/assets/b1e30ba0-f366-4f13-a016-1baf141a2382\"> |  <img height=\"150\" src=\"https://github.com/user-attachments/assets/83e21318-6392-48b1-8a83-9c45f1fefc1a\"> |",
    "sha": "3edb270df5e632cfd8fc57bbf624c1867c0ee1bf",
    "files": [
        {
            "sha": "2ef76c25dc4a543eb24d0fc7d0aee8dd8d994084",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel-tab/segments-explorer-tab.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fsegments-explorer-tab.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fsegments-explorer-tab.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fsegments-explorer-tab.tsx?ref=3edb270df5e632cfd8fc57bbf624c1867c0ee1bf",
            "patch": "@@ -1,14 +1,12 @@\n-import { useSegmentTree } from '../../../segment-explorer'\n import { PageSegmentTree } from '../../overview/segment-explorer'\n \n function SegmentsExplorer({\n   routerType,\n }: React.HTMLProps<HTMLDivElement> & {\n   routerType: 'app' | 'pages'\n }) {\n-  const tree = useSegmentTree()\n   const isAppRouter = routerType === 'app'\n-  return <PageSegmentTree tree={tree} isAppRouter={isAppRouter} />\n+  return <PageSegmentTree isAppRouter={isAppRouter} />\n }\n \n export function SegmentsExplorerTab({"
        },
        {
            "sha": "c4811e8db223b6ba3bcbed7f3339d16de2a4fb86",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-indicator.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx?ref=3edb270df5e632cfd8fc57bbf624c1867c0ee1bf",
            "patch": "@@ -15,7 +15,6 @@ import { TurbopackInfo } from './dev-tools-info/turbopack-info'\n import { RouteInfo } from './dev-tools-info/route-info'\n import GearIcon from '../../../icons/gear-icon'\n import { UserPreferences } from './dev-tools-info/user-preferences'\n-import { SegmentsExplorer } from '../../overview/segment-explorer'\n import {\n   MENU_CURVE,\n   MENU_DURATION_MS,\n@@ -27,6 +26,7 @@ import {\n   type DevToolsScale,\n } from './dev-tools-info/preferences'\n import { Draggable } from './draggable'\n+import { SegmentsExplorer } from './dev-tools-info/segments-explorer'\n \n // TODO: add E2E tests to cover different scenarios\n "
        },
        {
            "sha": "2d1c39ff7c52db35c8e7bfecbd4c19c05c78ef95",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-info/segments-explorer.tsx",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fsegments-explorer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fsegments-explorer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fsegments-explorer.tsx?ref=3edb270df5e632cfd8fc57bbf624c1867c0ee1bf",
            "patch": "@@ -0,0 +1,25 @@\n+import { PageSegmentTree } from '../../../overview/segment-explorer'\n+import { DevToolsInfo, type DevToolsInfoPropsCore } from './dev-tools-info'\n+\n+export function SegmentsExplorer({\n+  routerType,\n+  ...props\n+}: DevToolsInfoPropsCore &\n+  React.HTMLProps<HTMLDivElement> & {\n+    routerType: 'app' | 'pages'\n+  }) {\n+  const isAppRouter = routerType === 'app'\n+  return (\n+    <DevToolsInfo title=\"Route Info\" {...props}>\n+      <div data-nextjs-segments-explorer>\n+        <PageSegmentTree isAppRouter={isAppRouter} />\n+      </div>\n+    </DevToolsInfo>\n+  )\n+}\n+\n+export const SEGMENTS_EXPLORER_STYLES = `\n+  [data-nextjs-segments-explorer] {\n+    margin: -12px -8px;\n+  }\n+`"
        },
        {
            "sha": "ec8863345fb83dfb660e4e62a4da26728e5ba406",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overview/segment-explorer.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 29,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx?ref=3edb270df5e632cfd8fc57bbf624c1867c0ee1bf",
            "patch": "@@ -1,21 +1,13 @@\n-import type { HTMLProps } from 'react'\n-import { css } from '../../utils/css'\n-import type { DevToolsInfoPropsCore } from '../errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n-import { DevToolsInfo } from '../errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n import { useSegmentTree, type SegmentTrieNode } from '../../segment-explorer'\n+import { css } from '../../utils/css'\n import { cx } from '../../utils/cx'\n \n const isFileNode = (node: SegmentTrieNode) => {\n   return !!node.value?.type && !!node.value?.pagePath\n }\n \n-export function PageSegmentTree({\n-  tree,\n-  isAppRouter,\n-}: {\n-  tree: SegmentTrieNode\n-  isAppRouter: boolean\n-}) {\n+export function PageSegmentTree({ isAppRouter }: { isAppRouter: boolean }) {\n+  const tree = useSegmentTree()\n   return (\n     <div\n       className=\"segment-explorer-content\"\n@@ -167,34 +159,17 @@ function PageSegmentTreeLayerPresentation({\n   )\n }\n \n-export function SegmentsExplorer({\n-  routerType,\n-  ...props\n-}: DevToolsInfoPropsCore &\n-  HTMLProps<HTMLDivElement> & {\n-    routerType: 'app' | 'pages'\n-  }) {\n-  const tree = useSegmentTree()\n-  const isAppRouter = routerType === 'app'\n-  return (\n-    <DevToolsInfo title=\"Route Info\" {...props}>\n-      <PageSegmentTree tree={tree} isAppRouter={isAppRouter} />\n-    </DevToolsInfo>\n-  )\n-}\n-\n export const DEV_TOOLS_INFO_RENDER_FILES_STYLES = css`\n   .segment-explorer-content {\n     font-size: var(--size-14);\n-    margin: -12px -8px;\n   }\n \n   .segment-explorer-item {\n     margin: 4px 0;\n     border-radius: 6px;\n   }\n \n-  .segment-explorer-item:nth-child(odd) {\n+  .segment-explorer-item:nth-child(even) {\n     background-color: var(--color-background-200);\n   }\n "
        },
        {
            "sha": "5e3362cbc32875824f0c724d79360f14d1a77627",
            "filename": "packages/next/src/next-devtools/dev-overlay/styles/component-styles.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/3edb270df5e632cfd8fc57bbf624c1867c0ee1bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx?ref=3edb270df5e632cfd8fc57bbf624c1867c0ee1bf",
            "patch": "@@ -36,6 +36,7 @@ import { DEVTOOLS_PANEL_TAB_ISSUES_CONTENT_STYLES } from '../components/devtools\n import { ISSUE_FEEDBACK_BUTTON_STYLES } from '../components/errors/error-overlay-toolbar/issue-feedback-button'\n import { ERROR_CONTENT_SKELETON_STYLES } from '../container/runtime-error/error-content-skeleton'\n import { SEGMENTS_EXPLORER_TAB_STYLES } from '../components/devtools-panel/devtools-panel-tab/segments-explorer-tab'\n+import { SEGMENTS_EXPLORER_STYLES } from '../components/errors/dev-tools-indicator/dev-tools-info/segments-explorer'\n \n export function ComponentStyles() {\n   return (\n@@ -65,6 +66,7 @@ export function ComponentStyles() {\n         ${DEV_TOOLS_INFO_TURBOPACK_INFO_STYLES}\n         ${DEV_TOOLS_INFO_ROUTE_INFO_STYLES}\n         ${DEV_TOOLS_INFO_USER_PREFERENCES_STYLES}\n+        ${SEGMENTS_EXPLORER_STYLES}\n         ${DEV_TOOLS_INFO_RENDER_FILES_STYLES}\n         ${FADER_STYLES}\n         ${DEVTOOLS_PANEL_STYLES}"
        }
    ],
    "stats": {
        "total": 66,
        "additions": 33,
        "deletions": 33
    }
}