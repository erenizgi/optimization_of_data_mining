{
    "author": "devjiwonchoi",
    "message": "ci: Enable `experimental.isolatedDevBuild` for `test-experimental-dev` (#84099)",
    "sha": "e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
    "files": [
        {
            "sha": "e0e6bf286dbe9c03d49eb5c6d617c86a716ee271",
            "filename": ".github/workflows/build_and_test.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/.github%2Fworkflows%2Fbuild_and_test.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/.github%2Fworkflows%2Fbuild_and_test.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_test.yml?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -980,6 +980,7 @@ jobs:\n         export __NEXT_EXPERIMENTAL_CACHE_COMPONENTS=true\n         export NEXT_EXTERNAL_TESTS_FILTERS=\"test/experimental-tests-manifest.json\"\n         export NEXT_TEST_MODE=dev\n+        export __NEXT_EXPERIMENTAL_ISOLATED_DEV_BUILD=true\n \n         node run-tests.js \\\n           --timings \\"
        },
        {
            "sha": "0c17864ec9421b8ac5f98bf7de83262507575581",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -1498,7 +1498,8 @@ export const defaultConfig = Object.freeze({\n     slowModuleDetection: undefined,\n     globalNotFound: false,\n     browserDebugInfoInTerminal: false,\n-    isolatedDevBuild: false,\n+    isolatedDevBuild:\n+      process.env.__NEXT_EXPERIMENTAL_ISOLATED_DEV_BUILD === 'true',\n   },\n   htmlLimitedBots: undefined,\n   bundlePagesRouterDependencies: false,"
        },
        {
            "sha": "5042c6218fc5bf2a3a866774d7db35fd3fc15549",
            "filename": "test/development/app-dir/typed-env/typed-env-prod.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fdevelopment%2Fapp-dir%2Ftyped-env%2Ftyped-env-prod.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fdevelopment%2Fapp-dir%2Ftyped-env%2Ftyped-env-prod.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Ftyped-env%2Ftyped-env-prod.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -11,7 +11,7 @@ describe('typed-env', () => {\n \n   it('should have env types from next config', async () => {\n     await retry(async () => {\n-      const envDTS = await next.readFile('.next/types/env.d.ts')\n+      const envDTS = await next.readFile(`${next.distDir}/types/env.d.ts`)\n       // since NODE_ENV is production, env types will\n       // not include development-specific env\n       expect(envDTS).not.toContain('FROM_ENV_DEV')"
        },
        {
            "sha": "800231168e53ae2ce3fc300d565214f8a69b8051",
            "filename": "test/development/app-dir/typed-env/typed-env.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fdevelopment%2Fapp-dir%2Ftyped-env%2Ftyped-env.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fdevelopment%2Fapp-dir%2Ftyped-env%2Ftyped-env.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Ftyped-env%2Ftyped-env.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -8,7 +8,7 @@ describe('typed-env', () => {\n \n   it('should have env types from next config', async () => {\n     await retry(async () => {\n-      const envDTS = await next.readFile('.next/types/env.d.ts')\n+      const envDTS = await next.readFile(`${next.distDir}/types/env.d.ts`)\n       // since NODE_ENV is development, env types will\n       // not include production-specific env\n       expect(envDTS).not.toContain('FROM_ENV_PROD')\n@@ -39,7 +39,7 @@ describe('typed-env', () => {\n \n   it('should rewrite env types if .env is modified', async () => {\n     await retry(async () => {\n-      const content = await next.readFile('.next/types/env.d.ts')\n+      const content = await next.readFile(`${next.distDir}/types/env.d.ts`)\n       expect(content).toContain('FROM_ENV')\n     })\n \n@@ -50,7 +50,7 @@ describe('typed-env', () => {\n     // e.g. FROM_ENV?: string\n     // but have MODIFIED_ENV?: string\n     await retry(async () => {\n-      const content = await next.readFile('.next/types/env.d.ts')\n+      const content = await next.readFile(`${next.distDir}/types/env.d.ts`)\n       expect(content).toMatchInlineSnapshot(`\n         \"// Type definitions for Next.js environment variables\n         declare global {"
        },
        {
            "sha": "5c60d47b9ee043a01c3e5a803d02d8282b05216f",
            "filename": "test/e2e/app-dir/css-server-chunks/css-server-chunks.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fapp-dir%2Fcss-server-chunks%2Fcss-server-chunks.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fapp-dir%2Fcss-server-chunks%2Fcss-server-chunks.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcss-server-chunks%2Fcss-server-chunks.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -19,7 +19,7 @@ describe('css-server-chunks', () => {\n     expect((await next.fetch('/pages')).status).toBe(200)\n \n     let clientChunks = (\n-      await fs.readdir(path.join(next.testDir, '.next', 'static'), {\n+      await fs.readdir(path.join(next.testDir, next.distDir, 'static'), {\n         recursive: true,\n       })\n     ).filter((f) => f.endsWith('.js') || f.endsWith('.css'))\n@@ -29,11 +29,12 @@ describe('css-server-chunks', () => {\n \n     let serverChunks = (\n       await Promise.all(\n-        ['.next/server/app', '.next/server/pages'].map((d) =>\n-          fs.readdir(path.join(next.testDir, d), {\n-            recursive: true,\n-            encoding: 'utf8',\n-          })\n+        [`${next.distDir}/server/app`, `${next.distDir}/server/pages`].map(\n+          (d) =>\n+            fs.readdir(path.join(next.testDir, d), {\n+              recursive: true,\n+              encoding: 'utf8',\n+            })\n         )\n       )\n     )"
        },
        {
            "sha": "b26d2802774e4680527b25779ae2b00f841894b6",
            "filename": "test/e2e/app-dir/server-components-externals/index.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fapp-dir%2Fserver-components-externals%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fapp-dir%2Fserver-components-externals%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fserver-components-externals%2Findex.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -34,12 +34,16 @@ describe('app-dir - server components externals', () => {\n   if (!isTurbopack) {\n     it('should externalize serversExternalPackages for server rendering layer', async () => {\n       await next.fetch('/client')\n-      const ssrBundle = await next.readFile('.next/server/app/client/page.js')\n+      const ssrBundle = await next.readFile(\n+        `${next.distDir}/server/app/client/page.js`\n+      )\n       expect(ssrBundle).not.toContain('external-package-mark:index')\n       expect(ssrBundle).not.toContain('external-package-mark:subpath')\n \n       await next.fetch('/')\n-      const rscBundle = await next.readFile('.next/server/app/page.js')\n+      const rscBundle = await next.readFile(\n+        `${next.distDir}/server/app/page.js`\n+      )\n       expect(rscBundle).not.toContain('external-package-mark:index')\n       expect(rscBundle).not.toContain('external-package-mark:subpath')\n     })"
        },
        {
            "sha": "0689eb24171305cab325243a1b4303e8a8e4966d",
            "filename": "test/e2e/app-dir/typed-routes/typed-links.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fapp-dir%2Ftyped-routes%2Ftyped-links.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fapp-dir%2Ftyped-routes%2Ftyped-links.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Ftyped-routes%2Ftyped-links.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -11,12 +11,12 @@ describe('typed-links', () => {\n   }\n \n   it('should generate types for next/link', async () => {\n-    const dts = await next.readFile('.next/types/link.d.ts')\n+    const dts = await next.readFile(`${next.distDir}/types/link.d.ts`)\n     expect(dts).toContain(`declare module 'next/link'`)\n   })\n \n   it('should include handler route from app/api-test/route.ts in generated link route definitions', async () => {\n-    const dts = await next.readFile('.next/types/link.d.ts')\n+    const dts = await next.readFile(`${next.distDir}/types/link.d.ts`)\n     // Ensure the app route handler at app/api-test/route.ts (\"/api-test\") is present\n     expect(dts).toContain('`/api-test`')\n   })"
        },
        {
            "sha": "880b6229d97e4d6b0cf4982ff5fb02b0311de93e",
            "filename": "test/e2e/app-dir/typed-routes/typed-routes.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fapp-dir%2Ftyped-routes%2Ftyped-routes.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fapp-dir%2Ftyped-routes%2Ftyped-routes.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Ftyped-routes%2Ftyped-routes.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -22,12 +22,12 @@ describe('typed-routes', () => {\n   }\n \n   it('should generate route types correctly', async () => {\n-    const dts = await next.readFile('.next/types/routes.d.ts')\n+    const dts = await next.readFile(`${next.distDir}/types/routes.d.ts`)\n     expect(dts).toContain(expectedDts)\n   })\n \n   it('should correctly convert custom route patterns from path-to-regexp to bracket syntax', async () => {\n-    const dts = await next.readFile('.next/types/routes.d.ts')\n+    const dts = await next.readFile(`${next.distDir}/types/routes.d.ts`)\n \n     // Test standard dynamic segment: :slug -> [slug]\n     expect(dts).toContain('\"/project/[slug]\"')\n@@ -52,7 +52,9 @@ describe('typed-routes', () => {\n     `\n       )\n \n-      const routeTypesContent = await next.readFile('.next/types/routes.d.ts')\n+      const routeTypesContent = await next.readFile(\n+        `${next.distDir}/types/routes.d.ts`\n+      )\n \n       expect(routeTypesContent).toContain(\n         'type LayoutRoutes = \"/\" | \"/dashboard\" | \"/new-layout\"'\n@@ -61,7 +63,7 @@ describe('typed-routes', () => {\n   }\n \n   it('should generate RouteContext type for route handlers', async () => {\n-    const dts = await next.readFile('.next/types/routes.d.ts')\n+    const dts = await next.readFile(`${next.distDir}/types/routes.d.ts`)\n     expect(dts).toContain(\n       'interface RouteContext<AppRouteHandlerRoute extends AppRouteHandlerRoutes>'\n     )"
        },
        {
            "sha": "a36645bd003bc101383e1e8aa1e9e15ebd68922e",
            "filename": "test/e2e/edge-can-use-wasm-files/index.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fedge-can-use-wasm-files%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fedge-can-use-wasm-files%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fedge-can-use-wasm-files%2Findex.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -103,7 +103,7 @@ describe('middleware can use wasm files', () => {\n     it('lists the necessary wasm bindings in the manifest', async () => {\n       const manifestPath = path.join(\n         next.testDir,\n-        '.next/server/middleware-manifest.json'\n+        `${next.distDir}/server/middleware-manifest.json`\n       )\n       const manifest = await fs.readJSON(manifestPath)\n       if (process.env.IS_TURBOPACK_TEST) {"
        },
        {
            "sha": "e820ed1abd9d855e30e0b258d17c5a59792041c9",
            "filename": "test/e2e/edge-compiler-can-import-blob-assets/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fedge-compiler-can-import-blob-assets%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fedge-compiler-can-import-blob-assets%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fedge-compiler-can-import-blob-assets%2Findex.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -56,7 +56,8 @@ describe('Edge Compiler can import asset assets', () => {\n     it('extracts all the assets from the bundle', async () => {\n       const manifestPath = path.join(\n         next.testDir,\n-        '.next/server/middleware-manifest.json'\n+        next.distDir,\n+        'server/middleware-manifest.json'\n       )\n       const manifest = await readJson(manifestPath)\n       const orderedAssets = manifest.functions['/api/edge'].assets.sort("
        },
        {
            "sha": "ce28cb548de04fa8bdd907d8437007d96c240199",
            "filename": "test/e2e/i18n-ignore-rewrite-source-locale/rewrites-with-basepath.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fi18n-ignore-rewrite-source-locale%2Frewrites-with-basepath.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fi18n-ignore-rewrite-source-locale%2Frewrites-with-basepath.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fi18n-ignore-rewrite-source-locale%2Frewrites-with-basepath.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -44,7 +44,9 @@ describe('i18n-ignore-rewrite-source-locale with basepath', () => {\n       'get _next/static/ files by skipping locale in rewrite, locale: %s',\n       async (locale) => {\n         const chunks = (\n-          await fs.readdir(path.join(next.testDir, '.next', 'static', 'chunks'))\n+          await fs.readdir(\n+            path.join(next.testDir, next.distDir, 'static', 'chunks')\n+          )\n         ).filter((f) => f.endsWith('.js'))\n \n         await Promise.all("
        },
        {
            "sha": "c8e81da3b6c7c5b2a7f9d7a01e1d08b7e2710922",
            "filename": "test/e2e/i18n-ignore-rewrite-source-locale/rewrites.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fi18n-ignore-rewrite-source-locale%2Frewrites.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Fe2e%2Fi18n-ignore-rewrite-source-locale%2Frewrites.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fi18n-ignore-rewrite-source-locale%2Frewrites.test.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -73,7 +73,9 @@ describe('i18n-ignore-rewrite-source-locale', () => {\n       'get _next/static/ files by skipping locale in rewrite, locale: %s',\n       async (locale) => {\n         const chunks = (\n-          await fs.readdir(path.join(next.testDir, '.next', 'static', 'chunks'))\n+          await fs.readdir(\n+            path.join(next.testDir, next.distDir, 'static', 'chunks')\n+          )\n         ).filter((f) => f.endsWith('.js'))\n \n         await Promise.all("
        },
        {
            "sha": "f50dc4a27705054e1415827b290cb6a80cb351c9",
            "filename": "test/lib/next-modes/base.ts",
            "status": "modified",
            "additions": 29,
            "deletions": 3,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Flib%2Fnext-modes%2Fbase.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Flib%2Fnext-modes%2Fbase.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-modes%2Fbase.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -8,7 +8,12 @@ import { ChildProcess } from 'child_process'\n import { createNextInstall } from '../create-next-install'\n import { Span } from 'next/dist/trace'\n import webdriver from '../next-webdriver'\n-import { renderViaHTTP, fetchViaHTTP, findPort } from 'next-test-utils'\n+import {\n+  renderViaHTTP,\n+  fetchViaHTTP,\n+  findPort,\n+  getDistDir,\n+} from 'next-test-utils'\n import cheerio from 'cheerio'\n import { once } from 'events'\n import { Playwright } from 'next-webdriver'\n@@ -75,6 +80,7 @@ export class NextInstance {\n   protected resolutions?: PackageJson['resolutions']\n   protected events: { [eventName: string]: Set<any> } = {}\n   public testDir: string\n+  public distDir: string\n   tmpRepoDir: string\n   protected isStopping: boolean = false\n   protected isDestroyed: boolean = false\n@@ -204,6 +210,7 @@ export class NextInstance {\n           `next-test-${Date.now()}-${(Math.random() * 1000) | 0}`,\n           this.subDir\n         )\n+        this.distDir = getDistDir()\n \n         const reactVersion =\n           process.env.NEXT_TEST_REACT_VERSION || nextjsReactPeerVersion\n@@ -236,7 +243,7 @@ export class NextInstance {\n                 scripts: {\n                   // since we can't get the build id as a build artifact, make it\n                   // available under the static files\n-                  'post-build': 'cp .next/BUILD_ID .next/static/__BUILD_ID',\n+                  'post-build': `cp ${this.distDir}/BUILD_ID ${this.distDir}/static/__BUILD_ID`,\n                   ...pkgScripts,\n                   build:\n                     (pkgScripts['build'] || this.buildCommand || 'next build') +\n@@ -298,6 +305,25 @@ export class NextInstance {\n           )\n         }\n \n+        if (this.nextConfig?.distDir) {\n+          this.distDir = this.nextConfig.distDir\n+        }\n+        // Same logic as we get the basePath in isNextDeploy\n+        if (nextConfigFile) {\n+          const content = await fs.readFile(\n+            path.join(this.testDir, nextConfigFile),\n+            'utf8'\n+          )\n+          if (content.includes('distDir')) {\n+            const match = content.match(\n+              /['\"`]?distDir['\"`]?:.*?['\"`](.*?)['\"`]/\n+            )?.[1]\n+            if (match) {\n+              this.distDir = match\n+            }\n+          }\n+        }\n+\n         if (this.nextConfig || (isNextDeploy && !nextConfigFile)) {\n           const functions: string[] = []\n           const exportDeclare =\n@@ -506,7 +532,7 @@ export class NextInstance {\n       if (process.env.TRACE_PLAYWRIGHT) {\n         await fs\n           .cp(\n-            path.join(this.testDir, '.next/trace'),\n+            path.join(this.testDir, this.distDir, 'trace'),\n             path.join(\n               __dirname,\n               '../../traces',"
        },
        {
            "sha": "50f647420b0570c76f32c8f950a9e4a1520ef86c",
            "filename": "test/lib/next-test-utils.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Flib%2Fnext-test-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e0e6213fecbb88bd0cac5d455f501d16180fcd5a/test%2Flib%2Fnext-test-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-test-utils.ts?ref=e0e6213fecbb88bd0cac5d455f501d16180fcd5a",
            "patch": "@@ -1886,3 +1886,14 @@ export function normalizeManifest<T>(\n     )\n   )\n }\n+\n+export function getDistDir(isNextDev?: boolean): '.next' | '.next/dev' {\n+  // global.isNextDev is set in e2e/development/production tests.\n+  // TODO: If a test utils that are used in integration/unit tests can set\n+  // global.isNextDev flag, we could possibly remove the parameter.\n+  return (isNextDev ?? (global as any).isNextDev) &&\n+    // Flag for incremental rollout of isolated dev build, set in CI.\n+    process.env.__NEXT_EXPERIMENTAL_ISOLATED_DEV_BUILD === 'true'\n+    ? '.next/dev'\n+    : '.next'\n+}"
        }
    ],
    "stats": {
        "total": 103,
        "additions": 77,
        "deletions": 26
    }
}