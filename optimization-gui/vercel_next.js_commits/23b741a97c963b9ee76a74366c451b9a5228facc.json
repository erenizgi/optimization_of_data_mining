{
    "author": "lukesandberg",
    "message": "[turbopack] Model `||`, `&&`, and `??` as control flow operators (#85837)\n\nHandle control flow _operators_ in the turbopack analyzer in order to trigger dead code handling and trim dependencies from dead branches.\n\nThis was partially implemented but we were not producing the actual effects for them.\n\nI explored adding support for `?.` as well, but it is a massive complexity issue, so for now that is deferred.",
    "sha": "23b741a97c963b9ee76a74366c451b9a5228facc",
    "files": [
        {
            "sha": "57cd59a6cb8ebd13154ff699dc06b3f8b40e178c",
            "filename": "turbopack/crates/turbopack-ecmascript/benches/analyzer.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fbenches%2Fanalyzer.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fbenches%2Fanalyzer.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fbenches%2Fanalyzer.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -41,9 +41,12 @@ pub fn benchmark(c: &mut Criterion) {\n     for result in results {\n         let entry = result.unwrap();\n         if entry.file_type().unwrap().is_dir() {\n-            let name = entry.file_name().into_string().unwrap();\n             let input = entry.path().join(\"input.js\");\n-\n+            if !input.exists() {\n+                eprintln!(\"Missing file: {input:?} skipping\");\n+                continue;\n+            }\n+            let name = entry.file_name().into_string().unwrap();\n             let cm = Arc::new(SourceMap::new(FilePathMapping::empty()));\n             let fm = cm.load_file(&input).unwrap();\n             GLOBALS.set(&swc_core::common::Globals::new(), || {"
        },
        {
            "sha": "11b2bf80c9e59360465b5de9ca259aabe74230a9",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/graph.rs",
            "status": "modified",
            "additions": 101,
            "deletions": 45,
            "changes": 146,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -45,6 +45,11 @@ impl EffectsBlock {\n     pub fn is_empty(&self) -> bool {\n         self.effects.is_empty()\n     }\n+    fn normalize(&mut self) {\n+        for e in self.effects.iter_mut() {\n+            e.normalize();\n+        }\n+    }\n }\n \n #[derive(Debug)]\n@@ -70,47 +75,52 @@ pub enum ConditionalKind {\n         r#else: Box<EffectsBlock>,\n     },\n     /// The expression on the right side of the `&&` operator.\n-    And { expr: Box<EffectsBlock> },\n+    And { rhs_effects: Vec<Effect> },\n     /// The expression on the right side of the `||` operator.\n-    Or { expr: Box<EffectsBlock> },\n+    Or { rhs_effects: Vec<Effect> },\n     /// The expression on the right side of the `??` operator.\n-    NullishCoalescing { expr: Box<EffectsBlock> },\n+    NullishCoalescing { rhs_effects: Vec<Effect> },\n     /// The expression on the right side of a labeled statement.\n     Labeled { body: Box<EffectsBlock> },\n }\n \n impl ConditionalKind {\n+    fn is_empty(&self) -> bool {\n+        match self {\n+            ConditionalKind::If { then: block }\n+            | ConditionalKind::Else { r#else: block }\n+            | ConditionalKind::Labeled { body: block } => block.effects.is_empty(),\n+            ConditionalKind::IfElse { then, r#else, .. }\n+            | ConditionalKind::Ternary { then, r#else, .. } => then.is_empty() && r#else.is_empty(),\n+            ConditionalKind::And { rhs_effects, .. }\n+            | ConditionalKind::Or { rhs_effects, .. }\n+            | ConditionalKind::NullishCoalescing { rhs_effects, .. } => rhs_effects.is_empty(),\n+            ConditionalKind::IfElseMultiple { then, r#else, .. } => {\n+                then.iter().chain(r#else.iter()).all(|b| b.is_empty())\n+            }\n+        }\n+    }\n     /// Normalizes all contained values.\n     pub fn normalize(&mut self) {\n         match self {\n             ConditionalKind::If { then: block }\n             | ConditionalKind::Else { r#else: block }\n-            | ConditionalKind::And { expr: block, .. }\n-            | ConditionalKind::Or { expr: block, .. }\n-            | ConditionalKind::NullishCoalescing { expr: block, .. } => {\n-                for effect in &mut block.effects {\n-                    effect.normalize();\n-                }\n-            }\n+            | ConditionalKind::Labeled { body: block } => block.normalize(),\n             ConditionalKind::IfElse { then, r#else, .. }\n             | ConditionalKind::Ternary { then, r#else, .. } => {\n-                for effect in &mut then.effects {\n-                    effect.normalize();\n-                }\n-                for effect in &mut r#else.effects {\n+                then.normalize();\n+                r#else.normalize();\n+            }\n+            ConditionalKind::And { rhs_effects, .. }\n+            | ConditionalKind::Or { rhs_effects, .. }\n+            | ConditionalKind::NullishCoalescing { rhs_effects, .. } => {\n+                for effect in rhs_effects.iter_mut() {\n                     effect.normalize();\n                 }\n             }\n             ConditionalKind::IfElseMultiple { then, r#else, .. } => {\n                 for block in then.iter_mut().chain(r#else.iter_mut()) {\n-                    for effect in &mut block.effects {\n-                        effect.normalize();\n-                    }\n-                }\n-            }\n-            ConditionalKind::Labeled { body } => {\n-                for effect in &mut body.effects {\n-                    effect.normalize();\n+                    block.normalize();\n                 }\n             }\n         }\n@@ -131,9 +141,7 @@ impl EffectArg {\n             EffectArg::Value(value) => value.normalize(),\n             EffectArg::Closure(value, effects) => {\n                 value.normalize();\n-                for effect in &mut effects.effects {\n-                    effect.normalize();\n-                }\n+                effects.normalize();\n             }\n             EffectArg::Spread => {}\n         }\n@@ -2352,6 +2360,49 @@ impl VisitAstPath for Analyzer<'_> {\n         );\n     }\n \n+    fn visit_bin_expr<'ast: 'r, 'r>(\n+        &mut self,\n+        expr: &'ast BinExpr,\n+        ast_path: &mut AstNodePath<AstParentNodeRef<'r>>,\n+    ) {\n+        // Some binary operators have control flow semantics.\n+        match expr.op {\n+            BinaryOp::LogicalAnd | BinaryOp::LogicalOr | BinaryOp::NullishCoalescing => {\n+                // Visit the left hand node\n+                {\n+                    let mut ast_path =\n+                        ast_path.with_guard(AstParentNodeRef::BinExpr(expr, BinExprField::Left));\n+                    expr.left.visit_with_ast_path(self, &mut ast_path);\n+                };\n+                let prev_effects = take(&mut self.effects);\n+                let rhs_effects = {\n+                    let mut ast_path =\n+                        ast_path.with_guard(AstParentNodeRef::BinExpr(expr, BinExprField::Right));\n+                    expr.right.visit_with_ast_path(self, &mut ast_path);\n+                    take(&mut self.effects)\n+                };\n+                self.effects = prev_effects;\n+                self.add_conditional_effect(\n+                    &expr.left,\n+                    ast_path,\n+                    AstParentKind::BinExpr(BinExprField::Left),\n+                    expr.span(),\n+                    match expr.op {\n+                        BinaryOp::LogicalAnd => ConditionalKind::And { rhs_effects },\n+                        BinaryOp::LogicalOr => ConditionalKind::Or { rhs_effects },\n+                        BinaryOp::NullishCoalescing => {\n+                            ConditionalKind::NullishCoalescing { rhs_effects }\n+                        }\n+                        _ => unreachable!(),\n+                    },\n+                );\n+            }\n+            _ => <BinExpr as VisitWithAstPath<Self>>::visit_children_with_ast_path(\n+                expr, self, ast_path,\n+            ),\n+        }\n+    }\n+\n     fn visit_if_stmt<'ast: 'r, 'r>(\n         &mut self,\n         stmt: &'ast IfStmt,\n@@ -2622,7 +2673,7 @@ impl Analyzer<'_> {\n         {\n             return;\n         }\n-        let condition = Box::new(self.eval_context.eval(test));\n+        let condition = self.eval_context.eval(test);\n         if condition.is_unknown() {\n             if let Some(mut then) = then {\n                 self.effects.append(&mut then.effects);\n@@ -2632,6 +2683,7 @@ impl Analyzer<'_> {\n             }\n             return;\n         }\n+        let condition = Box::new(condition);\n         match (early_return_when_true, early_return_when_false) {\n             (true, false) => {\n                 self.early_return_stack.push(EarlyReturn::Conditional {\n@@ -2659,20 +2711,21 @@ impl Analyzer<'_> {\n             }\n             (false, false) | (true, true) => {\n                 let kind = match (then, r#else) {\n-                    (Some(then), Some(r#else)) => ConditionalKind::IfElse { then, r#else },\n-                    (Some(then), None) => ConditionalKind::If { then },\n-                    (None, Some(r#else)) => ConditionalKind::Else { r#else },\n-                    (None, None) => {\n-                        // No effects, ignore\n-                        return;\n-                    }\n+                    (Some(then), Some(r#else)) => Some(ConditionalKind::IfElse { then, r#else }),\n+                    (Some(then), None) => Some(ConditionalKind::If { then }),\n+                    (None, Some(r#else)) => Some(ConditionalKind::Else { r#else }),\n+                    (None, None) => None,\n                 };\n-                self.add_effect(Effect::Conditional {\n-                    condition,\n-                    kind: Box::new(kind),\n-                    ast_path: as_parent_path_with(ast_path, condition_ast_kind),\n-                    span,\n-                });\n+                if let Some(kind) = kind\n+                    && !kind.is_empty()\n+                {\n+                    self.add_effect(Effect::Conditional {\n+                        condition,\n+                        kind: Box::new(kind),\n+                        ast_path: as_parent_path_with(ast_path, condition_ast_kind),\n+                        span,\n+                    });\n+                }\n                 if early_return_when_false && early_return_when_true {\n                     self.early_return_stack.push(EarlyReturn::Always {\n                         prev_effects: take(&mut self.effects),\n@@ -2691,7 +2744,10 @@ impl Analyzer<'_> {\n         span: Span,\n         mut cond_kind: ConditionalKind,\n     ) {\n-        let condition = Box::new(self.eval_context.eval(test));\n+        if cond_kind.is_empty() {\n+            return;\n+        }\n+        let condition = self.eval_context.eval(test);\n         if condition.is_unknown() {\n             match &mut cond_kind {\n                 ConditionalKind::If { then } => {\n@@ -2713,18 +2769,18 @@ impl Analyzer<'_> {\n                         self.effects.append(&mut block.effects);\n                     }\n                 }\n-                ConditionalKind::And { expr }\n-                | ConditionalKind::Or { expr }\n-                | ConditionalKind::NullishCoalescing { expr } => {\n-                    self.effects.append(&mut expr.effects);\n+                ConditionalKind::And { rhs_effects }\n+                | ConditionalKind::Or { rhs_effects }\n+                | ConditionalKind::NullishCoalescing { rhs_effects } => {\n+                    self.effects.append(rhs_effects);\n                 }\n                 ConditionalKind::Labeled { body } => {\n                     self.effects.append(&mut body.effects);\n                 }\n             }\n         } else {\n             self.add_effect(Effect::Conditional {\n-                condition,\n+                condition: Box::new(condition),\n                 kind: Box::new(cond_kind),\n                 ast_path: as_parent_path_with(ast_path, ast_kind),\n                 span,"
        },
        {
            "sha": "83d477bde6e0fb363531ef5e65956ff2db262c17",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/mod.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 12,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -4107,15 +4107,14 @@ mod tests {\n                                 .await;\n                                 resolved.push((format!(\"{parent} -> {i} conditional\"), condition));\n                                 match *kind {\n-                                    ConditionalKind::If { then } => {\n-                                        queue\n-                                            .extend(then.effects.into_iter().rev().map(|e| (i, e)));\n-                                    }\n-                                    ConditionalKind::Else { r#else } => {\n+                                    ConditionalKind::If { then: block }\n+                                    | ConditionalKind::Else { r#else: block }\n+                                    | ConditionalKind::Labeled { body: block } => {\n                                         queue.extend(\n-                                            r#else.effects.into_iter().rev().map(|e| (i, e)),\n+                                            block.effects.into_iter().rev().map(|e| (i, e)),\n                                         );\n                                     }\n+\n                                     ConditionalKind::IfElse { then, r#else }\n                                     | ConditionalKind::Ternary { then, r#else } => {\n                                         queue.extend(\n@@ -4136,12 +4135,10 @@ mod tests {\n                                             );\n                                         }\n                                     }\n-                                    ConditionalKind::And { expr }\n-                                    | ConditionalKind::Or { expr }\n-                                    | ConditionalKind::NullishCoalescing { expr }\n-                                    | ConditionalKind::Labeled { body: expr } => {\n-                                        queue\n-                                            .extend(expr.effects.into_iter().rev().map(|e| (i, e)));\n+                                    ConditionalKind::And { rhs_effects }\n+                                    | ConditionalKind::Or { rhs_effects }\n+                                    | ConditionalKind::NullishCoalescing { rhs_effects } => {\n+                                        queue.extend(rhs_effects.into_iter().rev().map(|e| (i, e)));\n                                     }\n                                 };\n                                 steps"
        },
        {
            "sha": "62587953174683f8fc201212731ea0953bbd2481",
            "filename": "turbopack/crates/turbopack-ecmascript/src/code_gen.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fcode_gen.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fcode_gen.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fcode_gen.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -35,6 +35,7 @@ use crate::{\n         exports_info::{ExportsInfoBinding, ExportsInfoRef},\n         ident::IdentReplacement,\n         member::MemberReplacement,\n+        replace_parent_with_child::ReplaceParentWithChild,\n         require_context::RequireContextAssetReferenceCodeGen,\n         unreachable::Unreachable,\n         worker::WorkerAssetReferenceCodeGen,\n@@ -199,6 +200,7 @@ pub enum CodeGen {\n     RequireContextAssetReferenceCodeGen(RequireContextAssetReferenceCodeGen),\n     UrlAssetReferenceCodeGen(UrlAssetReferenceCodeGen),\n     WorkerAssetReferenceCodeGen(WorkerAssetReferenceCodeGen),\n+    ReplaceParentWithChild(ReplaceParentWithChild),\n }\n \n impl CodeGen {\n@@ -212,8 +214,8 @@ impl CodeGen {\n         match self {\n             Self::AmdDefineWithDependenciesCodeGen(v) => v.code_generation(ctx).await,\n             Self::CjsRequireCacheAccess(v) => v.code_generation(ctx).await,\n-            Self::ConstantConditionCodeGen(v) => v.code_generation(ctx).await,\n-            Self::ConstantValueCodeGen(v) => v.code_generation(ctx).await,\n+            Self::ConstantConditionCodeGen(v) => v.code_generation(),\n+            Self::ConstantValueCodeGen(v) => v.code_generation(),\n             Self::DynamicExpression(v) => v.code_generation(ctx).await,\n             Self::EsmBinding(v) => v.code_generation(ctx, scope_hoisting_context).await,\n             Self::EsmModuleItem(v) => v.code_generation(ctx).await,\n@@ -231,6 +233,7 @@ impl CodeGen {\n             Self::RequireContextAssetReferenceCodeGen(v) => v.code_generation(ctx).await,\n             Self::UrlAssetReferenceCodeGen(v) => v.code_generation(ctx).await,\n             Self::WorkerAssetReferenceCodeGen(v) => v.code_generation(ctx).await,\n+            Self::ReplaceParentWithChild(v) => v.code_generation(),\n         }\n     }\n }"
        },
        {
            "sha": "c32b6ba0b6661279caa28504b2adb63980c15dba",
            "filename": "turbopack/crates/turbopack-ecmascript/src/path_visitor.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fpath_visitor.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fpath_visitor.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fpath_visitor.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -88,7 +88,7 @@ impl<'a> ApplyVisitors<'a, '_> {\n             let kind = ast_path[index];\n             if let Some(visitors) = find_range(current_visitors, &kind, index) {\n                 // visitors contains all items that match kind at index. Some of them terminate\n-                // here, some need furth visiting. The terminating items are at the start due to\n+                // here, some need further visiting. The terminating items are at the start due to\n                 // sorting of the list.\n                 index += 1;\n "
        },
        {
            "sha": "390aae2ba6b2bbc56906a7425cd130a84a3d6717",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/constant_condition.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fconstant_condition.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fconstant_condition.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fconstant_condition.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -1,8 +1,7 @@\n use anyhow::Result;\n use serde::{Deserialize, Serialize};\n use swc_core::quote;\n-use turbo_tasks::{NonLocalValue, Vc, debug::ValueDebugFormat, trace::TraceRawVcs};\n-use turbopack_core::chunk::ChunkingContext;\n+use turbo_tasks::{NonLocalValue, debug::ValueDebugFormat, trace::TraceRawVcs};\n \n use super::AstPath;\n use crate::{\n@@ -32,10 +31,7 @@ impl ConstantConditionCodeGen {\n         ConstantConditionCodeGen { value, path }\n     }\n \n-    pub async fn code_generation(\n-        &self,\n-        _chunking_context: Vc<Box<dyn ChunkingContext>>,\n-    ) -> Result<CodeGeneration> {\n+    pub fn code_generation(&self) -> Result<CodeGeneration> {\n         let value = self.value;\n         let visitors = [create_visitor!(\n             exact,"
        },
        {
            "sha": "2d18b212a511415cca0f618904d2afc187f45c62",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/constant_value.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 14,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fconstant_value.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fconstant_value.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fconstant_value.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -9,8 +9,8 @@ use swc_core::{\n     quote,\n };\n use turbo_rcstr::RcStr;\n-use turbo_tasks::{NonLocalValue, Vc, debug::ValueDebugFormat, trace::TraceRawVcs};\n-use turbopack_core::{chunk::ChunkingContext, compile_time_info::CompileTimeDefineValue};\n+use turbo_tasks::{NonLocalValue, debug::ValueDebugFormat, trace::TraceRawVcs};\n+use turbopack_core::compile_time_info::CompileTimeDefineValue;\n \n use super::AstPath;\n use crate::{\n@@ -39,15 +39,11 @@ impl ConstantValueCodeGen {\n     pub fn new(value: CompileTimeDefineValue, path: AstPath) -> Self {\n         ConstantValueCodeGen { value, path }\n     }\n-    pub async fn code_generation(\n-        &self,\n-        _chunking_context: Vc<Box<dyn ChunkingContext>>,\n-    ) -> Result<CodeGeneration> {\n+    pub fn code_generation(&self) -> Result<CodeGeneration> {\n         let value = self.value.clone();\n \n         let visitor = create_visitor!(self.path, visit_mut_expr, |expr: &mut Expr| {\n-            // TODO: avoid this clone\n-            *expr = define_env_to_expr((value).clone());\n+            *expr = define_env_to_expr(&value);\n         });\n \n         Ok(CodeGeneration::visitors(vec![visitor]))\n@@ -60,7 +56,7 @@ impl From<ConstantValueCodeGen> for CodeGen {\n     }\n }\n \n-fn define_env_to_expr(value: CompileTimeDefineValue) -> Expr {\n+fn define_env_to_expr(value: &CompileTimeDefineValue) -> Expr {\n     match value {\n         CompileTimeDefineValue::Null => {\n             quote!(\"(\\\"TURBOPACK compile-time value\\\", null)\" as Expr)\n@@ -71,23 +67,23 @@ fn define_env_to_expr(value: CompileTimeDefineValue) -> Expr {\n         CompileTimeDefineValue::Bool(false) => {\n             quote!(\"(\\\"TURBOPACK compile-time value\\\", false)\" as Expr)\n         }\n-        CompileTimeDefineValue::Number(ref n) => {\n+        CompileTimeDefineValue::Number(n) => {\n             quote!(\"(\\\"TURBOPACK compile-time value\\\", $e)\" as Expr, e: Expr = n.parse::<f64>().unwrap().into())\n         }\n-        CompileTimeDefineValue::String(ref s) => {\n+        CompileTimeDefineValue::String(s) => {\n             quote!(\"(\\\"TURBOPACK compile-time value\\\", $e)\" as Expr, e: Expr = s.to_string().into())\n         }\n         CompileTimeDefineValue::Array(a) => {\n             quote!(\"(\\\"TURBOPACK compile-time value\\\", $e)\" as Expr, e: Expr = Expr::Array(ArrayLit {\n                 span: DUMMY_SP,\n-                elems: a.into_iter().map(|i| Some(define_env_to_expr(i).into())).collect(),\n+                elems: a.iter().map(|i| Some(define_env_to_expr(i).into())).collect(),\n             }))\n         }\n         CompileTimeDefineValue::Object(m) => {\n             quote!(\"(\\\"TURBOPACK compile-time value\\\", $e)\" as Expr, e: Expr = Expr::Object(ObjectLit {\n                 span: DUMMY_SP,\n                 props: m\n-                    .into_iter()\n+                    .iter()\n                     .map(|(k, v)| {\n                         swc_core::ecma::ast::PropOrSpread::Prop(\n                             Prop::KeyValue(KeyValueProp {\n@@ -103,7 +99,7 @@ fn define_env_to_expr(value: CompileTimeDefineValue) -> Expr {\n         CompileTimeDefineValue::Undefined => {\n             quote!(\"(\\\"TURBOPACK compile-time value\\\", void 0)\" as Expr)\n         }\n-        CompileTimeDefineValue::Evaluate(ref s) => parse_single_expr_lit(s.clone()),\n+        CompileTimeDefineValue::Evaluate(s) => parse_single_expr_lit(s.clone()),\n     }\n }\n "
        },
        {
            "sha": "e2d48246a7c5a99cf141633329988ca1829ee185",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 64,
            "deletions": 39,
            "changes": 103,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -12,6 +12,7 @@ pub mod member;\n pub mod node;\n pub mod pattern_mapping;\n pub mod raw;\n+pub mod replace_parent_with_child;\n pub mod require_context;\n pub mod type_issue;\n pub mod typescript;\n@@ -54,7 +55,8 @@ use swc_core::{\n         visit::{\n             AstParentKind, AstParentNodeRef, VisitAstPath, VisitWithAstPath,\n             fields::{\n-                AssignExprField, AssignTargetField, BindingIdentField, SimpleAssignTargetField,\n+                AssignExprField, AssignTargetField, BinExprField, BindingIdentField,\n+                SimpleAssignTargetField,\n             },\n         },\n     },\n@@ -155,6 +157,7 @@ use crate::{\n         ident::IdentReplacement,\n         member::MemberReplacement,\n         node::{FilePathModuleReference, PackageJsonReference},\n+        replace_parent_with_child::ReplaceParentWithChild,\n         require_context::{RequireContextAssetReference, RequireContextMap},\n         type_issue::SpecifiedModuleTypeIssue,\n     },\n@@ -1073,7 +1076,7 @@ async fn analyze_ecmascript_module_internal(\n                 Effect::Conditional {\n                     condition,\n                     kind,\n-                    ast_path: condition_ast_path,\n+                    ast_path: mut condition_ast_path,\n                     span: _,\n                 } => {\n                     // Don't replace condition with it's truth-y value, if it has side effects\n@@ -1084,7 +1087,7 @@ async fn analyze_ecmascript_module_internal(\n                         .link_value(*condition, ImportAttributes::empty_ref())\n                         .await?;\n \n-                    macro_rules! inactive {\n+                    macro_rules! inactive_block {\n                         ($block:ident) => {\n                             if analyze_mode.is_code_gen() {\n                                 analysis.add_code_gen(Unreachable::new($block.range.clone()));\n@@ -1101,56 +1104,79 @@ async fn analyze_ecmascript_module_internal(\n                             }\n                         };\n                     }\n-                    macro_rules! active {\n+                    macro_rules! active_block {\n                         ($block:ident) => {\n                             queue_stack\n                                 .get_mut()\n                                 .extend($block.effects.into_iter().map(Action::Effect).rev())\n                         };\n                     }\n+                    macro_rules! active_effects {\n+                        ($effects:ident) => {\n+                            queue_stack\n+                                .get_mut()\n+                                .extend($effects.into_iter().map(Action::Effect).rev())\n+                        };\n+                    }\n+                    macro_rules! replace_with_condition {\n+                        ($path:ident) => {\n+                            if analyze_mode.is_code_gen() {\n+                                analysis.add_code_gen(ReplaceParentWithChild::new(AstPath($path)));\n+                            }\n+                        };\n+                    }\n+                    macro_rules! replace_with_right {\n+                        ($path:ident) => {\n+                            if analyze_mode.is_code_gen() && !condition_has_side_effects {\n+                                $path.pop();\n+                                $path.push(AstParentKind::BinExpr(BinExprField::Right));\n+                                analysis.add_code_gen(ReplaceParentWithChild::new(AstPath($path)));\n+                            }\n+                        };\n+                    }\n                     match *kind {\n                         ConditionalKind::If { then } => match condition.is_truthy() {\n                             Some(true) => {\n                                 condition!(ConstantConditionValue::Truthy);\n-                                active!(then);\n+                                active_block!(then);\n                             }\n                             Some(false) => {\n                                 condition!(ConstantConditionValue::Falsy);\n-                                inactive!(then);\n+                                inactive_block!(then);\n                             }\n                             None => {\n-                                active!(then);\n+                                active_block!(then);\n                             }\n                         },\n                         ConditionalKind::Else { r#else } => match condition.is_truthy() {\n                             Some(true) => {\n                                 condition!(ConstantConditionValue::Truthy);\n-                                inactive!(r#else);\n+                                inactive_block!(r#else);\n                             }\n                             Some(false) => {\n                                 condition!(ConstantConditionValue::Falsy);\n-                                active!(r#else);\n+                                active_block!(r#else);\n                             }\n                             None => {\n-                                active!(r#else);\n+                                active_block!(r#else);\n                             }\n                         },\n                         ConditionalKind::IfElse { then, r#else }\n                         | ConditionalKind::Ternary { then, r#else } => {\n                             match condition.is_truthy() {\n                                 Some(true) => {\n                                     condition!(ConstantConditionValue::Truthy);\n-                                    active!(then);\n-                                    inactive!(r#else);\n+                                    active_block!(then);\n+                                    inactive_block!(r#else);\n                                 }\n                                 Some(false) => {\n                                     condition!(ConstantConditionValue::Falsy);\n-                                    active!(r#else);\n-                                    inactive!(then);\n+                                    active_block!(r#else);\n+                                    inactive_block!(then);\n                                 }\n                                 None => {\n-                                    active!(then);\n-                                    active!(r#else);\n+                                    active_block!(then);\n+                                    active_block!(r#else);\n                                 }\n                             }\n                         }\n@@ -1159,73 +1185,72 @@ async fn analyze_ecmascript_module_internal(\n                                 Some(true) => {\n                                     condition!(ConstantConditionValue::Truthy);\n                                     for then in then {\n-                                        active!(then);\n+                                        active_block!(then);\n                                     }\n                                     for r#else in r#else {\n-                                        inactive!(r#else);\n+                                        inactive_block!(r#else);\n                                     }\n                                 }\n                                 Some(false) => {\n                                     condition!(ConstantConditionValue::Falsy);\n                                     for then in then {\n-                                        inactive!(then);\n+                                        inactive_block!(then);\n                                     }\n                                     for r#else in r#else {\n-                                        active!(r#else);\n+                                        active_block!(r#else);\n                                     }\n                                 }\n                                 None => {\n                                     for then in then {\n-                                        active!(then);\n+                                        active_block!(then);\n                                     }\n                                     for r#else in r#else {\n-                                        active!(r#else);\n+                                        active_block!(r#else);\n                                     }\n                                 }\n                             }\n                         }\n-                        ConditionalKind::And { expr } => match condition.is_truthy() {\n+                        ConditionalKind::And { rhs_effects } => match condition.is_truthy() {\n                             Some(true) => {\n-                                condition!(ConstantConditionValue::Truthy);\n-                                active!(expr);\n+                                replace_with_right!(condition_ast_path);\n+                                active_effects!(rhs_effects);\n                             }\n                             Some(false) => {\n                                 // The condition value needs to stay since it's used\n-                                inactive!(expr);\n+                                replace_with_condition!(condition_ast_path);\n                             }\n                             None => {\n-                                active!(expr);\n+                                active_effects!(rhs_effects);\n                             }\n                         },\n-                        ConditionalKind::Or { expr } => match condition.is_truthy() {\n+                        ConditionalKind::Or { rhs_effects } => match condition.is_truthy() {\n                             Some(true) => {\n-                                // The condition value needs to stay since it's used\n-                                inactive!(expr);\n+                                replace_with_condition!(condition_ast_path);\n                             }\n                             Some(false) => {\n-                                condition!(ConstantConditionValue::Falsy);\n-                                active!(expr);\n+                                replace_with_right!(condition_ast_path);\n+                                active_effects!(rhs_effects);\n                             }\n                             None => {\n-                                active!(expr);\n+                                active_effects!(rhs_effects);\n                             }\n                         },\n-                        ConditionalKind::NullishCoalescing { expr } => {\n+                        ConditionalKind::NullishCoalescing { rhs_effects } => {\n                             match condition.is_nullish() {\n                                 Some(true) => {\n-                                    condition!(ConstantConditionValue::Nullish);\n-                                    active!(expr);\n+                                    replace_with_right!(condition_ast_path);\n+                                    active_effects!(rhs_effects);\n                                 }\n                                 Some(false) => {\n-                                    inactive!(expr);\n+                                    replace_with_condition!(condition_ast_path);\n                                 }\n                                 None => {\n-                                    active!(expr);\n+                                    active_effects!(rhs_effects);\n                                 }\n                             }\n                         }\n                         ConditionalKind::Labeled { body } => {\n-                            active!(body);\n+                            active_block!(body);\n                         }\n                     }\n                 }"
        },
        {
            "sha": "d3972d5ba1b488000407b3d57944a1216cd4694a",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/replace_parent_with_child.rs",
            "status": "added",
            "additions": 67,
            "deletions": 0,
            "changes": 67,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Freplace_parent_with_child.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Freplace_parent_with_child.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Freplace_parent_with_child.rs?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -0,0 +1,67 @@\n+use anyhow::Result;\n+use serde::{Deserialize, Serialize};\n+use swc_core::{\n+    common::util::take::Take,\n+    ecma::{\n+        ast::{BinExpr, Expr},\n+        visit::{AstParentKind, fields::BinExprField},\n+    },\n+    quote,\n+};\n+use turbo_tasks::{NonLocalValue, debug::ValueDebugFormat, trace::TraceRawVcs};\n+\n+use super::AstPath;\n+use crate::{\n+    code_gen::{CodeGen, CodeGeneration},\n+    create_visitor,\n+};\n+\n+/// Used to replace expressions like `<truthy> || <something>` with `<truthy>`\n+#[derive(\n+    PartialEq, Eq, Serialize, Deserialize, TraceRawVcs, ValueDebugFormat, NonLocalValue, Debug, Hash,\n+)]\n+\n+pub struct ReplaceParentWithChild {\n+    path: AstPath,\n+}\n+\n+impl ReplaceParentWithChild {\n+    pub fn new(path: AstPath) -> Self {\n+        Self { path }\n+    }\n+\n+    pub fn code_generation(&self) -> Result<CodeGeneration> {\n+        let parent_path = &self.path[0..(self.path.len() - 1)];\n+        let to_replace_with = *self.path.last().unwrap();\n+        let AstParentKind::BinExpr(field) = to_replace_with else {\n+            panic!(\"invalid path, must point at a BinExpr not a {to_replace_with:?}\");\n+        };\n+        let visitor = create_visitor!(parent_path, visit_mut_expr, |parent_expr: &mut Expr| {\n+            match parent_expr {\n+                Expr::Bin(BinExpr { left, right, .. }) => {\n+                    let child = match field {\n+                        BinExprField::Left => left.take(),\n+                        BinExprField::Right => right.take(),\n+                        _ => {\n+                            panic!(\"Can only replace with expression children, got {field:?}\");\n+                        }\n+                    };\n+                    *parent_expr = quote!(\"(\\\"TURBOPACK simplified expression\\\", $e)\" as Expr, e: Expr = *child);\n+                }\n+\n+                _ => {\n+                    // do nothing, the AST must have been modified and our operator or child\n+                    // removed.\n+                }\n+            };\n+        });\n+\n+        Ok(CodeGeneration::visitors(vec![visitor]))\n+    }\n+}\n+\n+impl From<ReplaceParentWithChild> for CodeGen {\n+    fn from(val: ReplaceParentWithChild) -> Self {\n+        CodeGen::ReplaceParentWithChild(val)\n+    }\n+}"
        },
        {
            "sha": "afbc859e0d6971d55a856eed3265c40ea700dc19",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/conditional-import/graph-effects.snapshot",
            "status": "modified",
            "additions": 0,
            "deletions": 331,
            "changes": 331,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fconditional-import%2Fgraph-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fconditional-import%2Fgraph-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fconditional-import%2Fgraph-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -1,154 +1,4 @@\n [\n-    Conditional {\n-        condition: Constant(\n-            True,\n-        ),\n-        kind: Ternary {\n-            then: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Module,\n-                        ),\n-                        Module(\n-                            Body(\n-                                0,\n-                            ),\n-                        ),\n-                        ModuleItem(\n-                            Stmt,\n-                        ),\n-                        Stmt(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Var,\n-                        ),\n-                        VarDecl(\n-                            Decls(\n-                                0,\n-                            ),\n-                        ),\n-                        VarDeclarator(\n-                            Init,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                0,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Cons,\n-                        ),\n-                    ],\n-                ),\n-            },\n-            else: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Module,\n-                        ),\n-                        Module(\n-                            Body(\n-                                0,\n-                            ),\n-                        ),\n-                        ModuleItem(\n-                            Stmt,\n-                        ),\n-                        Stmt(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Var,\n-                        ),\n-                        VarDecl(\n-                            Decls(\n-                                0,\n-                            ),\n-                        ),\n-                        VarDeclarator(\n-                            Init,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                0,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Alt,\n-                        ),\n-                    ],\n-                ),\n-            },\n-        },\n-        ast_path: [\n-            Program(\n-                Module,\n-            ),\n-            Module(\n-                Body(\n-                    0,\n-                ),\n-            ),\n-            ModuleItem(\n-                Stmt,\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Args(\n-                    0,\n-                ),\n-            ),\n-            ExprOrSpread(\n-                Expr,\n-            ),\n-            Expr(\n-                Cond,\n-            ),\n-            CondExpr(\n-                Test,\n-            ),\n-        ],\n-        span: 18..34,\n-    },\n     Call {\n         func: FreeVar(\n             \"import\",\n@@ -415,187 +265,6 @@\n         ],\n         span: 57..64,\n     },\n-    Conditional {\n-        condition: Binary(\n-            7,\n-            Member(\n-                5,\n-                Member(\n-                    3,\n-                    FreeVar(\n-                        \"process\",\n-                    ),\n-                    Constant(\n-                        Str(\n-                            Atom(\n-                                \"env\",\n-                            ),\n-                        ),\n-                    ),\n-                ),\n-                Constant(\n-                    Str(\n-                        Atom(\n-                            \"NEXT_RUNTIME\",\n-                        ),\n-                    ),\n-                ),\n-            ),\n-            StrictEqual,\n-            Constant(\n-                Str(\n-                    Atom(\n-                        \"edge\",\n-                    ),\n-                ),\n-            ),\n-        ),\n-        kind: Ternary {\n-            then: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Module,\n-                        ),\n-                        Module(\n-                            Body(\n-                                1,\n-                            ),\n-                        ),\n-                        ModuleItem(\n-                            Stmt,\n-                        ),\n-                        Stmt(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Var,\n-                        ),\n-                        VarDecl(\n-                            Decls(\n-                                0,\n-                            ),\n-                        ),\n-                        VarDeclarator(\n-                            Init,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                0,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Cons,\n-                        ),\n-                    ],\n-                ),\n-            },\n-            else: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Module,\n-                        ),\n-                        Module(\n-                            Body(\n-                                1,\n-                            ),\n-                        ),\n-                        ModuleItem(\n-                            Stmt,\n-                        ),\n-                        Stmt(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Var,\n-                        ),\n-                        VarDecl(\n-                            Decls(\n-                                0,\n-                            ),\n-                        ),\n-                        VarDeclarator(\n-                            Init,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                0,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Alt,\n-                        ),\n-                    ],\n-                ),\n-            },\n-        },\n-        ast_path: [\n-            Program(\n-                Module,\n-            ),\n-            Module(\n-                Body(\n-                    1,\n-                ),\n-            ),\n-            ModuleItem(\n-                Stmt,\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Args(\n-                    0,\n-                ),\n-            ),\n-            ExprOrSpread(\n-                Expr,\n-            ),\n-            Expr(\n-                Cond,\n-            ),\n-            CondExpr(\n-                Test,\n-            ),\n-        ],\n-        span: 57..196,\n-    },\n     Call {\n         func: FreeVar(\n             \"import\","
        },
        {
            "sha": "7d12b8586c7da597d92046f5f7ae92989b2d432d",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/conditional-import/resolved-effects.snapshot",
            "status": "modified",
            "additions": 10,
            "deletions": 15,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fconditional-import%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fconditional-import%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fconditional-import%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -1,36 +1,31 @@\n-0 -> 1 conditional = true\n-\n-0 -> 2 call = import*0*(\"a\")\n+0 -> 1 call = import*0*(\"a\")\n - *0* import: The dynamic import() method from the ESM specification: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports\n \n-0 -> 5 free var = FreeVar(process)\n-\n-0 -> 6 conditional = (process.env*0*[\"NEXT_RUNTIME\"] === \"edge\")\n-- *0* process.env: The Node.js process.env property: https://nodejs.org/api/process.html#processenv\n+0 -> 4 free var = FreeVar(process)\n \n-0 -> 7 call = import*0*(\n+0 -> 5 call = import*0*(\n     (???*1* ? \"next/dist/compiled/@vercel/og/index.edge.js\" : \"next/dist/compiled/@vercel/og/index.node.js\")\n )\n - *0* import: The dynamic import() method from the ESM specification: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports\n - *1* (process.env*2*[\"NEXT_RUNTIME\"] === \"edge\")\n     nested operation\n - *2* process.env: The Node.js process.env property: https://nodejs.org/api/process.html#processenv\n \n-0 -> 8 conditional = true\n+0 -> 6 conditional = true\n \n-8 -> 9 call = import*0*(\"a\")\n+6 -> 7 call = import*0*(\"a\")\n - *0* import: The dynamic import() method from the ESM specification: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports\n \n-8 -> 10 call = import*0*(\"b\")\n+6 -> 8 call = import*0*(\"b\")\n - *0* import: The dynamic import() method from the ESM specification: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports\n \n-0 -> 11 conditional = true\n+0 -> 9 conditional = true\n \n-0 -> 14 conditional = true\n+0 -> 12 conditional = true\n \n-14 -> 15 unreachable = ???*0*\n+12 -> 13 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 16 call = import*0*(\"c\")\n+0 -> 14 call = import*0*(\"c\")\n - *0* import: The dynamic import() method from the ESM specification: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_imports"
        },
        {
            "sha": "46668c461b08805cefc11196192d787e409e2de9",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/esbuild/graph-effects.snapshot",
            "status": "modified",
            "additions": 675,
            "deletions": 502,
            "changes": 1177,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fesbuild%2Fgraph-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fesbuild%2Fgraph-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fesbuild%2Fgraph-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -74,487 +74,683 @@\n         ],\n         span: 2687..2706,\n     },\n-    Member {\n-        obj: Variable(\n-            (\n-                \"path2\",\n-                #2,\n-            ),\n-        ),\n-        prop: Constant(\n-            Str(\n-                Atom(\n-                    \"basename\",\n-                ),\n-            ),\n-        ),\n-        ast_path: [\n-            Program(\n-                Script,\n-            ),\n-            Script(\n-                Body(\n-                    7,\n-                ),\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Arrow,\n-            ),\n-            ArrowExpr(\n-                Body,\n-            ),\n-            BlockStmtOrExpr(\n-                BlockStmt,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                If,\n-            ),\n-            IfStmt(\n-                Test,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Paren,\n-            ),\n-            ParenExpr(\n-                Expr,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Left,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Left,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Callee,\n-            ),\n-            Callee(\n-                Expr,\n-            ),\n-            Expr(\n-                Member,\n-            ),\n-        ],\n-        span: 2725..2739,\n-    },\n-    FreeVar {\n-        var: \"__filename\",\n-        ast_path: [\n-            Program(\n-                Script,\n-            ),\n-            Script(\n-                Body(\n-                    7,\n-                ),\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Arrow,\n-            ),\n-            ArrowExpr(\n-                Body,\n-            ),\n-            BlockStmtOrExpr(\n-                BlockStmt,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                If,\n-            ),\n-            IfStmt(\n-                Test,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Paren,\n-            ),\n-            ParenExpr(\n-                Expr,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Left,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Left,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Args(\n-                    0,\n-                ),\n-            ),\n-            ExprOrSpread(\n-                Expr,\n-            ),\n-            Expr(\n-                Ident,\n-            ),\n-        ],\n-        span: 2740..2750,\n-    },\n-    MemberCall {\n-        obj: Variable(\n-            (\n-                \"path2\",\n-                #2,\n-            ),\n-        ),\n-        prop: Constant(\n-            Str(\n-                Atom(\n-                    \"basename\",\n-                ),\n-            ),\n-        ),\n-        args: [\n-            Value(\n-                FreeVar(\n-                    \"__filename\",\n-                ),\n-            ),\n-        ],\n-        ast_path: [\n-            Program(\n-                Script,\n-            ),\n-            Script(\n-                Body(\n-                    7,\n-                ),\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Arrow,\n-            ),\n-            ArrowExpr(\n-                Body,\n-            ),\n-            BlockStmtOrExpr(\n-                BlockStmt,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                If,\n-            ),\n-            IfStmt(\n-                Test,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Paren,\n-            ),\n-            ParenExpr(\n-                Expr,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Left,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Left,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-        ],\n-        span: 2725..2751,\n-        in_try: false,\n-        new: false,\n-    },\n-    Member {\n-        obj: Variable(\n-            (\n-                \"path2\",\n-                #2,\n-            ),\n-        ),\n-        prop: Constant(\n-            Str(\n-                Atom(\n-                    \"basename\",\n-                ),\n-            ),\n-        ),\n-        ast_path: [\n-            Program(\n-                Script,\n-            ),\n-            Script(\n-                Body(\n-                    7,\n-                ),\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Arrow,\n-            ),\n-            ArrowExpr(\n-                Body,\n-            ),\n-            BlockStmtOrExpr(\n-                BlockStmt,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                If,\n-            ),\n-            IfStmt(\n-                Test,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Paren,\n-            ),\n-            ParenExpr(\n-                Expr,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Left,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Callee,\n-            ),\n-            Callee(\n-                Expr,\n-            ),\n-            Expr(\n-                Member,\n-            ),\n-        ],\n-        span: 2775..2789,\n-    },\n-    FreeVar {\n-        var: \"__dirname\",\n-        ast_path: [\n-            Program(\n-                Script,\n-            ),\n-            Script(\n-                Body(\n-                    7,\n-                ),\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Arrow,\n-            ),\n-            ArrowExpr(\n-                Body,\n-            ),\n-            BlockStmtOrExpr(\n-                BlockStmt,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                If,\n-            ),\n-            IfStmt(\n-                Test,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Paren,\n-            ),\n-            ParenExpr(\n-                Expr,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Left,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Args(\n-                    0,\n+    Conditional {\n+        condition: Logical(\n+            4,\n+            Or,\n+            [\n+                Not(\n+                    2,\n+                    FreeVar(\n+                        \"ESBUILD_BINARY_PATH\",\n+                    ),\n                 ),\n-            ),\n-            ExprOrSpread(\n-                Expr,\n-            ),\n-            Expr(\n-                Ident,\n-            ),\n-        ],\n-        span: 2790..2799,\n-    },\n-    MemberCall {\n-        obj: Variable(\n-            (\n-                \"path2\",\n-                #2,\n-            ),\n-        ),\n-        prop: Constant(\n-            Str(\n-                Atom(\n-                    \"basename\",\n+                Constant(\n+                    False,\n                 ),\n-            ),\n+            ],\n         ),\n-        args: [\n-            Value(\n-                FreeVar(\n-                    \"__dirname\",\n-                ),\n-            ),\n-        ],\n+        kind: And {\n+            rhs_effects: [\n+                Member {\n+                    obj: Variable(\n+                        (\n+                            \"path2\",\n+                            #2,\n+                        ),\n+                    ),\n+                    prop: Constant(\n+                        Str(\n+                            Atom(\n+                                \"basename\",\n+                            ),\n+                        ),\n+                    ),\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                7,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Arrow,\n+                        ),\n+                        ArrowExpr(\n+                            Body,\n+                        ),\n+                        BlockStmtOrExpr(\n+                            BlockStmt,\n+                        ),\n+                        BlockStmt(\n+                            Stmts(\n+                                0,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            If,\n+                        ),\n+                        IfStmt(\n+                            Test,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Paren,\n+                        ),\n+                        ParenExpr(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Call,\n+                        ),\n+                        CallExpr(\n+                            Callee,\n+                        ),\n+                        Callee(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Member,\n+                        ),\n+                    ],\n+                    span: 2725..2739,\n+                },\n+                FreeVar {\n+                    var: \"__filename\",\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                7,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Arrow,\n+                        ),\n+                        ArrowExpr(\n+                            Body,\n+                        ),\n+                        BlockStmtOrExpr(\n+                            BlockStmt,\n+                        ),\n+                        BlockStmt(\n+                            Stmts(\n+                                0,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            If,\n+                        ),\n+                        IfStmt(\n+                            Test,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Paren,\n+                        ),\n+                        ParenExpr(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Call,\n+                        ),\n+                        CallExpr(\n+                            Args(\n+                                0,\n+                            ),\n+                        ),\n+                        ExprOrSpread(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Ident,\n+                        ),\n+                    ],\n+                    span: 2740..2750,\n+                },\n+                MemberCall {\n+                    obj: Variable(\n+                        (\n+                            \"path2\",\n+                            #2,\n+                        ),\n+                    ),\n+                    prop: Constant(\n+                        Str(\n+                            Atom(\n+                                \"basename\",\n+                            ),\n+                        ),\n+                    ),\n+                    args: [\n+                        Value(\n+                            FreeVar(\n+                                \"__filename\",\n+                            ),\n+                        ),\n+                    ],\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                7,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Arrow,\n+                        ),\n+                        ArrowExpr(\n+                            Body,\n+                        ),\n+                        BlockStmtOrExpr(\n+                            BlockStmt,\n+                        ),\n+                        BlockStmt(\n+                            Stmts(\n+                                0,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            If,\n+                        ),\n+                        IfStmt(\n+                            Test,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Paren,\n+                        ),\n+                        ParenExpr(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Call,\n+                        ),\n+                    ],\n+                    span: 2725..2751,\n+                    in_try: false,\n+                    new: false,\n+                },\n+                Conditional {\n+                    condition: Binary(\n+                        6,\n+                        MemberCall(\n+                            4,\n+                            Variable(\n+                                (\n+                                    \"path2\",\n+                                    #2,\n+                                ),\n+                            ),\n+                            Constant(\n+                                Str(\n+                                    Atom(\n+                                        \"basename\",\n+                                    ),\n+                                ),\n+                            ),\n+                            [\n+                                FreeVar(\n+                                    \"__filename\",\n+                                ),\n+                            ],\n+                        ),\n+                        StrictNotEqual,\n+                        Constant(\n+                            Str(\n+                                Atom(\n+                                    \"main.js\",\n+                                ),\n+                            ),\n+                        ),\n+                    ),\n+                    kind: Or {\n+                        rhs_effects: [\n+                            Member {\n+                                obj: Variable(\n+                                    (\n+                                        \"path2\",\n+                                        #2,\n+                                    ),\n+                                ),\n+                                prop: Constant(\n+                                    Str(\n+                                        Atom(\n+                                            \"basename\",\n+                                        ),\n+                                    ),\n+                                ),\n+                                ast_path: [\n+                                    Program(\n+                                        Script,\n+                                    ),\n+                                    Script(\n+                                        Body(\n+                                            7,\n+                                        ),\n+                                    ),\n+                                    Stmt(\n+                                        Decl,\n+                                    ),\n+                                    Decl(\n+                                        Var,\n+                                    ),\n+                                    VarDecl(\n+                                        Decls(\n+                                            0,\n+                                        ),\n+                                    ),\n+                                    VarDeclarator(\n+                                        Init,\n+                                    ),\n+                                    Expr(\n+                                        Arrow,\n+                                    ),\n+                                    ArrowExpr(\n+                                        Body,\n+                                    ),\n+                                    BlockStmtOrExpr(\n+                                        BlockStmt,\n+                                    ),\n+                                    BlockStmt(\n+                                        Stmts(\n+                                            0,\n+                                        ),\n+                                    ),\n+                                    Stmt(\n+                                        If,\n+                                    ),\n+                                    IfStmt(\n+                                        Test,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Right,\n+                                    ),\n+                                    Expr(\n+                                        Paren,\n+                                    ),\n+                                    ParenExpr(\n+                                        Expr,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Right,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Left,\n+                                    ),\n+                                    Expr(\n+                                        Call,\n+                                    ),\n+                                    CallExpr(\n+                                        Callee,\n+                                    ),\n+                                    Callee(\n+                                        Expr,\n+                                    ),\n+                                    Expr(\n+                                        Member,\n+                                    ),\n+                                ],\n+                                span: 2775..2789,\n+                            },\n+                            FreeVar {\n+                                var: \"__dirname\",\n+                                ast_path: [\n+                                    Program(\n+                                        Script,\n+                                    ),\n+                                    Script(\n+                                        Body(\n+                                            7,\n+                                        ),\n+                                    ),\n+                                    Stmt(\n+                                        Decl,\n+                                    ),\n+                                    Decl(\n+                                        Var,\n+                                    ),\n+                                    VarDecl(\n+                                        Decls(\n+                                            0,\n+                                        ),\n+                                    ),\n+                                    VarDeclarator(\n+                                        Init,\n+                                    ),\n+                                    Expr(\n+                                        Arrow,\n+                                    ),\n+                                    ArrowExpr(\n+                                        Body,\n+                                    ),\n+                                    BlockStmtOrExpr(\n+                                        BlockStmt,\n+                                    ),\n+                                    BlockStmt(\n+                                        Stmts(\n+                                            0,\n+                                        ),\n+                                    ),\n+                                    Stmt(\n+                                        If,\n+                                    ),\n+                                    IfStmt(\n+                                        Test,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Right,\n+                                    ),\n+                                    Expr(\n+                                        Paren,\n+                                    ),\n+                                    ParenExpr(\n+                                        Expr,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Right,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Left,\n+                                    ),\n+                                    Expr(\n+                                        Call,\n+                                    ),\n+                                    CallExpr(\n+                                        Args(\n+                                            0,\n+                                        ),\n+                                    ),\n+                                    ExprOrSpread(\n+                                        Expr,\n+                                    ),\n+                                    Expr(\n+                                        Ident,\n+                                    ),\n+                                ],\n+                                span: 2790..2799,\n+                            },\n+                            MemberCall {\n+                                obj: Variable(\n+                                    (\n+                                        \"path2\",\n+                                        #2,\n+                                    ),\n+                                ),\n+                                prop: Constant(\n+                                    Str(\n+                                        Atom(\n+                                            \"basename\",\n+                                        ),\n+                                    ),\n+                                ),\n+                                args: [\n+                                    Value(\n+                                        FreeVar(\n+                                            \"__dirname\",\n+                                        ),\n+                                    ),\n+                                ],\n+                                ast_path: [\n+                                    Program(\n+                                        Script,\n+                                    ),\n+                                    Script(\n+                                        Body(\n+                                            7,\n+                                        ),\n+                                    ),\n+                                    Stmt(\n+                                        Decl,\n+                                    ),\n+                                    Decl(\n+                                        Var,\n+                                    ),\n+                                    VarDecl(\n+                                        Decls(\n+                                            0,\n+                                        ),\n+                                    ),\n+                                    VarDeclarator(\n+                                        Init,\n+                                    ),\n+                                    Expr(\n+                                        Arrow,\n+                                    ),\n+                                    ArrowExpr(\n+                                        Body,\n+                                    ),\n+                                    BlockStmtOrExpr(\n+                                        BlockStmt,\n+                                    ),\n+                                    BlockStmt(\n+                                        Stmts(\n+                                            0,\n+                                        ),\n+                                    ),\n+                                    Stmt(\n+                                        If,\n+                                    ),\n+                                    IfStmt(\n+                                        Test,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Right,\n+                                    ),\n+                                    Expr(\n+                                        Paren,\n+                                    ),\n+                                    ParenExpr(\n+                                        Expr,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Right,\n+                                    ),\n+                                    Expr(\n+                                        Bin,\n+                                    ),\n+                                    BinExpr(\n+                                        Left,\n+                                    ),\n+                                    Expr(\n+                                        Call,\n+                                    ),\n+                                ],\n+                                span: 2775..2800,\n+                                in_try: false,\n+                                new: false,\n+                            },\n+                        ],\n+                    },\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                7,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Arrow,\n+                        ),\n+                        ArrowExpr(\n+                            Body,\n+                        ),\n+                        BlockStmtOrExpr(\n+                            BlockStmt,\n+                        ),\n+                        BlockStmt(\n+                            Stmts(\n+                                0,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            If,\n+                        ),\n+                        IfStmt(\n+                            Test,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Paren,\n+                        ),\n+                        ParenExpr(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                    ],\n+                    span: 2725..2810,\n+                },\n+            ],\n+        },\n         ast_path: [\n             Program(\n                 Script,\n@@ -601,34 +797,11 @@\n             Expr(\n                 Bin,\n             ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Paren,\n-            ),\n-            ParenExpr(\n-                Expr,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n-            BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Bin,\n-            ),\n             BinExpr(\n                 Left,\n             ),\n-            Expr(\n-                Call,\n-            ),\n         ],\n-        span: 2775..2800,\n-        in_try: false,\n-        new: false,\n+        span: 2685..2811,\n     },\n     Conditional {\n         condition: Logical("
        },
        {
            "sha": "ace03c8e83cedbdf4bcfb24d5654515c84db8045",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/esbuild/resolved-effects.snapshot",
            "status": "modified",
            "additions": 75,
            "deletions": 61,
            "changes": 136,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fesbuild%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fesbuild%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fesbuild%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -1,16 +1,30 @@\n 0 -> 1 free var = FreeVar(ESBUILD_BINARY_PATH)\n \n-0 -> 3 free var = FreeVar(__filename)\n+0 -> 2 conditional = (!(???*0*) | false)\n+- *0* FreeVar(ESBUILD_BINARY_PATH)\n+    unknown global\n+    This value might have side effects\n+\n+2 -> 4 free var = FreeVar(__filename)\n \n-0 -> 4 member call = path*0*[\"basename\"](\"__filename\")\n+2 -> 5 member call = path*0*[\"basename\"](\"__filename\")\n - *0* path: The Node.js path module: https://nodejs.org/api/path.html\n \n-0 -> 6 free var = FreeVar(__dirname)\n+2 -> 6 conditional = (???*0* !== \"main.js\")\n+- *0* ???*1*(\"__filename\")\n+    unknown callee\n+    This value might have side effects\n+- *1* path*2*[\"basename\"]\n+    unsupported property on Node.js path module\n+    This value might have side effects\n+- *2* path: The Node.js path module: https://nodejs.org/api/path.html\n \n-0 -> 7 member call = path*0*[\"basename\"](\"__dirname\")\n+6 -> 8 free var = FreeVar(__dirname)\n+\n+6 -> 9 member call = path*0*[\"basename\"](\"__dirname\")\n - *0* path: The Node.js path module: https://nodejs.org/api/path.html\n \n-0 -> 8 conditional = (!(???*0*) | false | (???*1* !== \"main.js\") | (???*4* !== \"lib\"))\n+0 -> 10 conditional = (!(???*0*) | false | (???*1* !== \"main.js\") | (???*4* !== \"lib\"))\n - *0* FreeVar(ESBUILD_BINARY_PATH)\n     unknown global\n     This value might have side effects\n@@ -29,35 +43,35 @@\n     This value might have side effects\n - *6* path: The Node.js path module: https://nodejs.org/api/path.html\n \n-8 -> 9 free var = FreeVar(Error)\n+10 -> 11 free var = FreeVar(Error)\n \n-8 -> 10 free var = FreeVar(__filename)\n+10 -> 12 free var = FreeVar(__filename)\n \n-8 -> 11 call = new ???*0*(\n+10 -> 13 call = new ???*0*(\n     \"The esbuild JavaScript API cannot be bundled. Please mark the \\\"esbuild\\\" package as external so it's not included in the bundle.\\n\\nMore information: The file containing the code for esbuild's JavaScript API (__filename) does not appear to be inside the esbuild package on the file system, which usually means that the esbuild package was bundled into another file. This is problematic because the API needs to run a binary executable inside the esbuild package which is located using a relative path from the API code to the executable. If the esbuild package is bundled, the relative path will be incorrect and the executable won't be found.\"\n )\n - *0* FreeVar(Error)\n     unknown global\n     This value might have side effects\n \n-0 -> 12 conditional = false\n+0 -> 14 conditional = false\n \n-12 -> 14 free var = FreeVar(__dirname)\n+14 -> 16 free var = FreeVar(__dirname)\n \n-12 -> 15 member call = path*0*[\"join\"](\"__dirname\", \"..\", \"bin\", \"esbuild\")\n+14 -> 17 member call = path*0*[\"join\"](\"__dirname\", \"..\", \"bin\", \"esbuild\")\n - *0* path: The Node.js path module: https://nodejs.org/api/path.html\n \n-12 -> 16 unreachable = ???*0*\n+14 -> 18 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-12 -> 17 call = (...) => (FreeVar(ESBUILD_BINARY_PATH) | binTargetPath | binPath)()\n+14 -> 19 call = (...) => (FreeVar(ESBUILD_BINARY_PATH) | binTargetPath | binPath)()\n \n-12 -> 18 unreachable = ???*0*\n+14 -> 20 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 19 call = (...) => (\n+0 -> 21 call = (...) => (\n   | [\n         \"node\",\n         [\n@@ -67,62 +81,62 @@\n   | [generateBinPath(), []]\n )()\n \n-0 -> 21 member call = ([\"bin/esbuild\"] | ???*0* | [])[\"concat\"](\"--service=0.14.12\", \"--ping\")\n+0 -> 23 member call = ([\"bin/esbuild\"] | ???*0* | [])[\"concat\"](\"--service=0.14.12\", \"--ping\")\n - *0* unknown mutation\n     This value might have side effects\n \n-0 -> 22 free var = FreeVar(require)\n-\n-0 -> 23 call = require*0*(\"path\")\n-- *0* require: The require method from CommonJS\n-\n 0 -> 24 free var = FreeVar(require)\n \n 0 -> 25 call = require*0*(\"path\")\n - *0* require: The require method from CommonJS\n \n 0 -> 26 free var = FreeVar(require)\n \n-0 -> 27 call = require*0*(\"os\")\n+0 -> 27 call = require*0*(\"path\")\n+- *0* require: The require method from CommonJS\n+\n+0 -> 28 free var = FreeVar(require)\n+\n+0 -> 29 call = require*0*(\"os\")\n - *0* require: The require method from CommonJS\n \n-0 -> 29 free var = FreeVar(process)\n+0 -> 31 free var = FreeVar(process)\n \n-0 -> 31 member call = os*0*[\"arch\"]()\n+0 -> 33 member call = os*0*[\"arch\"]()\n - *0* os: The Node.js os module: https://nodejs.org/api/os.html\n \n-0 -> 33 member call = os*0*[\"endianness\"]()\n+0 -> 35 member call = os*0*[\"endianness\"]()\n - *0* os: The Node.js os module: https://nodejs.org/api/os.html\n \n-0 -> 36 free var = FreeVar(Error)\n+0 -> 38 free var = FreeVar(Error)\n \n-0 -> 37 call = new ???*0*(\"Unsupported platform: linux x64 LE\")\n+0 -> 39 call = new ???*0*(\"Unsupported platform: linux x64 LE\")\n - *0* FreeVar(Error)\n     unknown global\n     This value might have side effects\n \n-0 -> 38 unreachable = ???*0*\n+0 -> 40 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 39 free var = FreeVar(ESBUILD_BINARY_PATH)\n+0 -> 41 free var = FreeVar(ESBUILD_BINARY_PATH)\n \n-0 -> 40 conditional = ???*0*\n+0 -> 42 conditional = ???*0*\n - *0* FreeVar(ESBUILD_BINARY_PATH)\n     unknown global\n     This value might have side effects\n \n-40 -> 41 free var = FreeVar(ESBUILD_BINARY_PATH)\n+42 -> 43 free var = FreeVar(ESBUILD_BINARY_PATH)\n \n-40 -> 42 unreachable = ???*0*\n+42 -> 44 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-40 -> 43 call = (...) => {\"pkg\": pkg, \"subpath\": subpath}()\n+42 -> 45 call = (...) => {\"pkg\": pkg, \"subpath\": subpath}()\n \n-40 -> 45 free var = FreeVar(require)\n+42 -> 47 free var = FreeVar(require)\n \n-40 -> 46 member call = require*0*[\"resolve\"](\n+42 -> 48 member call = require*0*[\"resolve\"](\n     `${(???*1* | undefined | ???*2* | \"esbuild-linux-64\")}/${(???*3* | \"esbuild.exe\" | \"bin/esbuild\" | ???*4*)}`\n )\n - *0* require: The require method from CommonJS\n@@ -135,9 +149,9 @@\n - *4* unknown mutation\n     This value might have side effects\n \n-40 -> 47 free var = FreeVar(downloadedBinPath)\n+42 -> 49 free var = FreeVar(downloadedBinPath)\n \n-40 -> 48 call = ???*0*(\n+42 -> 50 call = ???*0*(\n     (???*1* | undefined | ???*2* | \"esbuild-linux-64\"),\n     (???*3* | \"esbuild.exe\" | \"bin/esbuild\" | ???*4*)\n )\n@@ -153,9 +167,9 @@\n - *4* unknown mutation\n     This value might have side effects\n \n-40 -> 50 free var = FreeVar(fs)\n+42 -> 52 free var = FreeVar(fs)\n \n-40 -> 51 member call = ???*0*[\"existsSync\"]((???*1* | ???*2* | ???*8*))\n+42 -> 53 member call = ???*0*[\"existsSync\"]((???*1* | ???*2* | ???*8*))\n - *0* FreeVar(fs)\n     unknown global\n     This value might have side effects\n@@ -182,26 +196,26 @@\n     unknown global\n     This value might have side effects\n \n-40 -> 52 conditional = !(???*0*)\n+42 -> 54 conditional = !(???*0*)\n - *0* ???*1*[\"existsSync\"](binPath)\n     unknown callee object\n     This value might have side effects\n - *1* FreeVar(fs)\n     unknown global\n     This value might have side effects\n \n-52 -> 54 free var = FreeVar(require)\n+54 -> 56 free var = FreeVar(require)\n \n-52 -> 55 member call = require*0*[\"resolve\"]((???*1* | undefined | ???*2* | \"esbuild-linux-64\"))\n+54 -> 57 member call = require*0*[\"resolve\"]((???*1* | undefined | ???*2* | \"esbuild-linux-64\"))\n - *0* require: The require method from CommonJS\n - *1* pkg\n     pattern without value\n - *2* unknown mutation\n     This value might have side effects\n \n-52 -> 56 free var = FreeVar(Error)\n+54 -> 58 free var = FreeVar(Error)\n \n-52 -> 57 call = new ???*0*(\n+54 -> 59 call = new ???*0*(\n     `The package \"${(???*1* | undefined | ???*2* | \"esbuild-linux-64\")}\" could not be found, and is needed by esbuild.\n \n If you are installing esbuild with npm, make sure that you don't specify the\n@@ -216,29 +230,29 @@ by esbuild to install the correct binary executable for your current platform.`\n - *2* unknown mutation\n     This value might have side effects\n \n-40 -> 58 free var = FreeVar(require)\n+42 -> 60 free var = FreeVar(require)\n \n-40 -> 59 call = require*0*(\"pnpapi\")\n+42 -> 61 call = require*0*(\"pnpapi\")\n - *0* require: The require method from CommonJS\n \n-40 -> 60 conditional = (false | true)\n+42 -> 62 conditional = (false | true)\n \n-60 -> 63 free var = FreeVar(require)\n+62 -> 65 free var = FreeVar(require)\n \n-60 -> 64 member call = require*0*[\"resolve\"](\"esbuild\")\n+62 -> 66 member call = require*0*[\"resolve\"](\"esbuild\")\n - *0* require: The require method from CommonJS\n \n-60 -> 65 member call = path*0*[\"dirname\"](\"\\\"esbuild\\\"/resolved/lib/index.js\")\n+62 -> 67 member call = path*0*[\"dirname\"](\"\\\"esbuild\\\"/resolved/lib/index.js\")\n - *0* path: The Node.js path module: https://nodejs.org/api/path.html\n \n-60 -> 68 member call = path*0*[\"basename\"]((???*1* | \"esbuild.exe\" | \"bin/esbuild\" | ???*2*))\n+62 -> 70 member call = path*0*[\"basename\"]((???*1* | \"esbuild.exe\" | \"bin/esbuild\" | ???*2*))\n - *0* path: The Node.js path module: https://nodejs.org/api/path.html\n - *1* subpath\n     pattern without value\n - *2* unknown mutation\n     This value might have side effects\n \n-60 -> 69 member call = path*0*[\"join\"](\n+62 -> 71 member call = path*0*[\"join\"](\n     \"\\\"esbuild\\\"/resolved/lib\",\n     `pnpapi-${(???*1* | undefined | ???*2* | \"esbuild-linux-64\")}-${???*3*}`\n )\n@@ -259,9 +273,9 @@ by esbuild to install the correct binary executable for your current platform.`\n - *7* unknown mutation\n     This value might have side effects\n \n-60 -> 71 free var = FreeVar(fs)\n+62 -> 73 free var = FreeVar(fs)\n \n-60 -> 72 member call = ???*0*[\"existsSync\"](\n+62 -> 74 member call = ???*0*[\"existsSync\"](\n     `\"esbuild\"/resolved/lib${(\"/\" | \"\")}pnpapi-${(???*1* | undefined | ???*2* | \"esbuild-linux-64\")}-${???*3*}`\n )\n - *0* FreeVar(fs)\n@@ -283,17 +297,17 @@ by esbuild to install the correct binary executable for your current platform.`\n - *7* unknown mutation\n     This value might have side effects\n \n-60 -> 73 conditional = !(???*0*)\n+62 -> 75 conditional = !(???*0*)\n - *0* ???*1*[\"existsSync\"](binTargetPath)\n     unknown callee object\n     This value might have side effects\n - *1* FreeVar(fs)\n     unknown global\n     This value might have side effects\n \n-73 -> 75 free var = FreeVar(fs)\n+75 -> 77 free var = FreeVar(fs)\n \n-73 -> 76 member call = ???*0*[\"copyFileSync\"](\n+75 -> 78 member call = ???*0*[\"copyFileSync\"](\n     (???*1* | ???*2* | ???*8*),\n     `\"esbuild\"/resolved/lib${(\"/\" | \"\")}pnpapi-${(???*10* | undefined | ???*11* | \"esbuild-linux-64\")}-${???*12*}`\n )\n@@ -340,9 +354,9 @@ by esbuild to install the correct binary executable for your current platform.`\n - *16* unknown mutation\n     This value might have side effects\n \n-73 -> 78 free var = FreeVar(fs)\n+75 -> 80 free var = FreeVar(fs)\n \n-73 -> 79 member call = ???*0*[\"chmodSync\"](\n+75 -> 81 member call = ???*0*[\"chmodSync\"](\n     `\"esbuild\"/resolved/lib${(\"/\" | \"\")}pnpapi-${(???*1* | undefined | ???*2* | \"esbuild-linux-64\")}-${???*3*}`,\n     493\n )\n@@ -365,10 +379,10 @@ by esbuild to install the correct binary executable for your current platform.`\n - *7* unknown mutation\n     This value might have side effects\n \n-60 -> 80 unreachable = ???*0*\n+62 -> 82 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-60 -> 81 unreachable = ???*0*\n+62 -> 83 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects"
        },
        {
            "sha": "b7e81d9774898af3b3707f94d205480f4096f805",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/iife-2/graph-effects.snapshot",
            "status": "modified",
            "additions": 0,
            "deletions": 552,
            "changes": 552,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fiife-2%2Fgraph-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fiife-2%2Fgraph-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fiife-2%2Fgraph-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -604,273 +604,6 @@\n         ],\n         span: 155..162,\n     },\n-    Conditional {\n-        condition: Variable(\n-            (\n-                \"path\",\n-                #4,\n-            ),\n-        ),\n-        kind: Ternary {\n-            then: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Script,\n-                        ),\n-                        Script(\n-                            Body(\n-                                1,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Expr,\n-                        ),\n-                        ExprStmt(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Callee,\n-                        ),\n-                        Callee(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Paren,\n-                        ),\n-                        ParenExpr(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Fn,\n-                        ),\n-                        FnExpr(\n-                            Function,\n-                        ),\n-                        Function(\n-                            Body,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                0,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            For,\n-                        ),\n-                        ForStmt(\n-                            Body,\n-                        ),\n-                        Stmt(\n-                            Block,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                1,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Expr,\n-                        ),\n-                        ExprStmt(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                2,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Cons,\n-                        ),\n-                    ],\n-                ),\n-            },\n-            else: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Script,\n-                        ),\n-                        Script(\n-                            Body(\n-                                1,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Expr,\n-                        ),\n-                        ExprStmt(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Callee,\n-                        ),\n-                        Callee(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Paren,\n-                        ),\n-                        ParenExpr(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Fn,\n-                        ),\n-                        FnExpr(\n-                            Function,\n-                        ),\n-                        Function(\n-                            Body,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                0,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            For,\n-                        ),\n-                        ForStmt(\n-                            Body,\n-                        ),\n-                        Stmt(\n-                            Block,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                1,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Expr,\n-                        ),\n-                        ExprStmt(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                2,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Alt,\n-                        ),\n-                    ],\n-                ),\n-            },\n-        },\n-        ast_path: [\n-            Program(\n-                Script,\n-            ),\n-            Script(\n-                Body(\n-                    1,\n-                ),\n-            ),\n-            Stmt(\n-                Expr,\n-            ),\n-            ExprStmt(\n-                Expr,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Callee,\n-            ),\n-            Callee(\n-                Expr,\n-            ),\n-            Expr(\n-                Paren,\n-            ),\n-            ParenExpr(\n-                Expr,\n-            ),\n-            Expr(\n-                Fn,\n-            ),\n-            FnExpr(\n-                Function,\n-            ),\n-            Function(\n-                Body,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                For,\n-            ),\n-            ForStmt(\n-                Body,\n-            ),\n-            Stmt(\n-                Block,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    1,\n-                ),\n-            ),\n-            Stmt(\n-                Expr,\n-            ),\n-            ExprStmt(\n-                Expr,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Args(\n-                    2,\n-                ),\n-            ),\n-            ExprOrSpread(\n-                Expr,\n-            ),\n-            Expr(\n-                Cond,\n-            ),\n-            CondExpr(\n-                Test,\n-            ),\n-        ],\n-        span: 183..202,\n-    },\n     MemberCall {\n         obj: FreeVar(\n             \"console\",\n@@ -1182,291 +915,6 @@\n         ],\n         span: 224..238,\n     },\n-    Conditional {\n-        condition: Variable(\n-            (\n-                \"path\",\n-                #4,\n-            ),\n-        ),\n-        kind: Ternary {\n-            then: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Script,\n-                        ),\n-                        Script(\n-                            Body(\n-                                1,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Expr,\n-                        ),\n-                        ExprStmt(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Callee,\n-                        ),\n-                        Callee(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Paren,\n-                        ),\n-                        ParenExpr(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Fn,\n-                        ),\n-                        FnExpr(\n-                            Function,\n-                        ),\n-                        Function(\n-                            Body,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                0,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            For,\n-                        ),\n-                        ForStmt(\n-                            Body,\n-                        ),\n-                        Stmt(\n-                            Block,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                2,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Expr,\n-                        ),\n-                        ExprStmt(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Assign,\n-                        ),\n-                        AssignExpr(\n-                            Right,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                1,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Cons,\n-                        ),\n-                    ],\n-                ),\n-            },\n-            else: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Script,\n-                        ),\n-                        Script(\n-                            Body(\n-                                1,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Expr,\n-                        ),\n-                        ExprStmt(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Callee,\n-                        ),\n-                        Callee(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Paren,\n-                        ),\n-                        ParenExpr(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Fn,\n-                        ),\n-                        FnExpr(\n-                            Function,\n-                        ),\n-                        Function(\n-                            Body,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                0,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            For,\n-                        ),\n-                        ForStmt(\n-                            Body,\n-                        ),\n-                        Stmt(\n-                            Block,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                2,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Expr,\n-                        ),\n-                        ExprStmt(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Assign,\n-                        ),\n-                        AssignExpr(\n-                            Right,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                1,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Alt,\n-                        ),\n-                    ],\n-                ),\n-            },\n-        },\n-        ast_path: [\n-            Program(\n-                Script,\n-            ),\n-            Script(\n-                Body(\n-                    1,\n-                ),\n-            ),\n-            Stmt(\n-                Expr,\n-            ),\n-            ExprStmt(\n-                Expr,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Callee,\n-            ),\n-            Callee(\n-                Expr,\n-            ),\n-            Expr(\n-                Paren,\n-            ),\n-            ParenExpr(\n-                Expr,\n-            ),\n-            Expr(\n-                Fn,\n-            ),\n-            FnExpr(\n-                Function,\n-            ),\n-            Function(\n-                Body,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                For,\n-            ),\n-            ForStmt(\n-                Body,\n-            ),\n-            Stmt(\n-                Block,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    2,\n-                ),\n-            ),\n-            Stmt(\n-                Expr,\n-            ),\n-            ExprStmt(\n-                Expr,\n-            ),\n-            Expr(\n-                Assign,\n-            ),\n-            AssignExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Args(\n-                    1,\n-                ),\n-            ),\n-            ExprOrSpread(\n-                Expr,\n-            ),\n-            Expr(\n-                Cond,\n-            ),\n-            CondExpr(\n-                Test,\n-            ),\n-        ],\n-        span: 240..269,\n-    },\n     Member {\n         obj: Variable(\n             ("
        },
        {
            "sha": "3ef5b151481ef00cc8bc17fbc2922f4db7fcf931",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/iife-2/resolved-effects.snapshot",
            "status": "modified",
            "additions": 4,
            "deletions": 12,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fiife-2%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fiife-2%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fiife-2%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -7,11 +7,7 @@\n \n 0 -> 7 free var = FreeVar(console)\n \n-0 -> 8 conditional = ???*0*\n-- *0* arguments[1]\n-    function calls are not analyzed yet\n-\n-0 -> 9 member call = ???*0*[\"debug\"](\"####\", ???*1*, (???*2* ? true : false))\n+0 -> 8 member call = ???*0*[\"debug\"](\"####\", ???*1*, (???*2* ? true : false))\n - *0* FreeVar(console)\n     unknown global\n     This value might have side effects\n@@ -20,11 +16,7 @@\n - *2* arguments[1]\n     function calls are not analyzed yet\n \n-0 -> 12 conditional = ???*0*\n-- *0* arguments[1]\n-    function calls are not analyzed yet\n-\n-0 -> 14 call = (...) => parent(???*0*, (???*2* ? ???*3* : (???*10* | undefined)), (???*15* | {}){truthy})\n+0 -> 12 call = (...) => parent(???*0*, (???*2* ? ???*3* : (???*10* | undefined)), (???*15* | {}){truthy})\n - *0* ???*1*[key]\n     unknown object\n - *1* arguments[0]\n@@ -64,8 +56,8 @@\n - *16* arguments[2]\n     function calls are not analyzed yet\n \n-0 -> 15 unreachable = ???*0*\n+0 -> 13 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 16 call = (...) => parent({\"wrapper\": {\"data\": {\"key\": {}}}}, \"\", {})\n+0 -> 14 call = (...) => parent({\"wrapper\": {\"data\": {\"key\": {}}}}, \"\", {})"
        },
        {
            "sha": "5abbfd4aa210bd3d4ce6e9d8c3df0cac764c8a1e",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/logical/graph-effects.snapshot",
            "status": "modified",
            "additions": 400,
            "deletions": 42,
            "changes": 442,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Flogical%2Fgraph-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Flogical%2Fgraph-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Flogical%2Fgraph-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -1,6 +1,73 @@\n [\n-    FreeVar {\n-        var: \"global\",\n+    Conditional {\n+        condition: Logical(\n+            4,\n+            And,\n+            [\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            1.0,\n+                        ),\n+                    ),\n+                ),\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            2.0,\n+                        ),\n+                    ),\n+                ),\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            3.0,\n+                        ),\n+                    ),\n+                ),\n+            ],\n+        ),\n+        kind: And {\n+            rhs_effects: [\n+                FreeVar {\n+                    var: \"global\",\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                7,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Ident,\n+                        ),\n+                    ],\n+                    span: 132..138,\n+                },\n+            ],\n+        },\n         ast_path: [\n             Program(\n                 Script,\n@@ -28,16 +95,91 @@\n                 Bin,\n             ),\n             BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Ident,\n+                Left,\n             ),\n         ],\n-        span: 132..138,\n+        span: 117..138,\n     },\n-    FreeVar {\n-        var: \"global\",\n+    Conditional {\n+        condition: Logical(\n+            3,\n+            And,\n+            [\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            1.0,\n+                        ),\n+                    ),\n+                ),\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            2.0,\n+                        ),\n+                    ),\n+                ),\n+            ],\n+        ),\n+        kind: And {\n+            rhs_effects: [\n+                FreeVar {\n+                    var: \"global\",\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                8,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Paren,\n+                        ),\n+                        ParenExpr(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Ident,\n+                        ),\n+                    ],\n+                    span: 164..170,\n+                },\n+            ],\n+        },\n         ast_path: [\n             Program(\n                 Script,\n@@ -83,16 +225,85 @@\n                 Bin,\n             ),\n             BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Ident,\n+                Left,\n             ),\n         ],\n-        span: 164..170,\n+        span: 154..170,\n     },\n-    FreeVar {\n-        var: \"global\",\n+    Conditional {\n+        condition: Logical(\n+            3,\n+            And,\n+            [\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            1.0,\n+                        ),\n+                    ),\n+                ),\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            2.0,\n+                        ),\n+                    ),\n+                ),\n+            ],\n+        ),\n+        kind: And {\n+            rhs_effects: [\n+                FreeVar {\n+                    var: \"global\",\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                9,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Ident,\n+                        ),\n+                    ],\n+                    span: 208..214,\n+                },\n+            ],\n+        },\n         ast_path: [\n             Program(\n                 Script,\n@@ -132,16 +343,86 @@\n                 Bin,\n             ),\n             BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Ident,\n+                Left,\n             ),\n         ],\n-        span: 208..214,\n+        span: 198..214,\n     },\n-    FreeVar {\n-        var: \"global\",\n+    Conditional {\n+        condition: Logical(\n+            4,\n+            And,\n+            [\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            1.0,\n+                        ),\n+                    ),\n+                ),\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            2.0,\n+                        ),\n+                    ),\n+                ),\n+                Constant(\n+                    Num(\n+                        ConstantNumber(\n+                            0.0,\n+                        ),\n+                    ),\n+                ),\n+            ],\n+        ),\n+        kind: And {\n+            rhs_effects: [\n+                FreeVar {\n+                    var: \"global\",\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                10,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Left,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Ident,\n+                        ),\n+                    ],\n+                    span: 256..262,\n+                },\n+            ],\n+        },\n         ast_path: [\n             Program(\n                 Script,\n@@ -175,13 +456,10 @@\n                 Bin,\n             ),\n             BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Ident,\n+                Left,\n             ),\n         ],\n-        span: 256..262,\n+        span: 241..262,\n     },\n     FreeVar {\n         var: \"global\",\n@@ -220,8 +498,51 @@\n         ],\n         span: 284..290,\n     },\n-    FreeVar {\n-        var: \"global\",\n+    Conditional {\n+        condition: Constant(\n+            True,\n+        ),\n+        kind: Or {\n+            rhs_effects: [\n+                FreeVar {\n+                    var: \"global\",\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                12,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Ident,\n+                        ),\n+                    ],\n+                    span: 323..329,\n+                },\n+            ],\n+        },\n         ast_path: [\n             Program(\n                 Script,\n@@ -249,13 +570,10 @@\n                 Bin,\n             ),\n             BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Ident,\n+                Left,\n             ),\n         ],\n-        span: 323..329,\n+        span: 315..329,\n     },\n     FreeVar {\n         var: \"global\",\n@@ -294,8 +612,51 @@\n         ],\n         span: 346..352,\n     },\n-    FreeVar {\n-        var: \"global\",\n+    Conditional {\n+        condition: Constant(\n+            False,\n+        ),\n+        kind: And {\n+            rhs_effects: [\n+                FreeVar {\n+                    var: \"global\",\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                14,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Decl,\n+                        ),\n+                        Decl(\n+                            Var,\n+                        ),\n+                        VarDecl(\n+                            Decls(\n+                                0,\n+                            ),\n+                        ),\n+                        VarDeclarator(\n+                            Init,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Ident,\n+                        ),\n+                    ],\n+                    span: 387..393,\n+                },\n+            ],\n+        },\n         ast_path: [\n             Program(\n                 Script,\n@@ -323,12 +684,9 @@\n                 Bin,\n             ),\n             BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Ident,\n+                Left,\n             ),\n         ],\n-        span: 387..393,\n+        span: 378..393,\n     },\n ]"
        },
        {
            "sha": "772b1db88faf7ea4de01a56f5255dadda487beca",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/logical/resolved-effects.snapshot",
            "status": "modified",
            "additions": 20,
            "deletions": 8,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Flogical%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Flogical%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Flogical%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -1,15 +1,27 @@\n-0 -> 1 free var = FreeVar(global)\n+0 -> 1 conditional = 3\n \n-0 -> 2 free var = FreeVar(global)\n+1 -> 2 free var = FreeVar(global)\n \n-0 -> 3 free var = FreeVar(global)\n+0 -> 3 conditional = 2\n \n-0 -> 4 free var = FreeVar(global)\n+3 -> 4 free var = FreeVar(global)\n \n-0 -> 5 free var = FreeVar(global)\n+0 -> 5 conditional = 2\n \n-0 -> 6 free var = FreeVar(global)\n+5 -> 6 free var = FreeVar(global)\n \n-0 -> 7 free var = FreeVar(global)\n+0 -> 7 conditional = 0\n \n-0 -> 8 free var = FreeVar(global)\n+7 -> 8 free var = FreeVar(global)\n+\n+0 -> 9 free var = FreeVar(global)\n+\n+0 -> 10 conditional = true\n+\n+10 -> 11 free var = FreeVar(global)\n+\n+0 -> 12 free var = FreeVar(global)\n+\n+0 -> 13 conditional = false\n+\n+13 -> 14 free var = FreeVar(global)"
        },
        {
            "sha": "2b7d293706e802d9d68143aa4acbe6d9b553f944",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/md5_2/graph-effects.snapshot",
            "status": "modified",
            "additions": 361,
            "deletions": 47,
            "changes": 408,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fmd5_2%2Fgraph-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fmd5_2%2Fgraph-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fmd5_2%2Fgraph-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -1044,20 +1044,133 @@\n         kind: IfElse {\n             then: EffectsBlock {\n                 effects: [\n-                    Member {\n-                        obj: Variable(\n+                    Conditional {\n+                        condition: Variable(\n                             (\n                                 \"options\",\n                                 #4,\n                             ),\n                         ),\n-                        prop: Constant(\n-                            Str(\n-                                Atom(\n-                                    \"encoding\",\n-                                ),\n-                            ),\n-                        ),\n+                        kind: And {\n+                            rhs_effects: [\n+                                Member {\n+                                    obj: Variable(\n+                                        (\n+                                            \"options\",\n+                                            #4,\n+                                        ),\n+                                    ),\n+                                    prop: Constant(\n+                                        Str(\n+                                            Atom(\n+                                                \"encoding\",\n+                                            ),\n+                                        ),\n+                                    ),\n+                                    ast_path: [\n+                                        Program(\n+                                            Script,\n+                                        ),\n+                                        Script(\n+                                            Body(\n+                                                0,\n+                                            ),\n+                                        ),\n+                                        Stmt(\n+                                            Expr,\n+                                        ),\n+                                        ExprStmt(\n+                                            Expr,\n+                                        ),\n+                                        Expr(\n+                                            Call,\n+                                        ),\n+                                        CallExpr(\n+                                            Callee,\n+                                        ),\n+                                        Callee(\n+                                            Expr,\n+                                        ),\n+                                        Expr(\n+                                            Paren,\n+                                        ),\n+                                        ParenExpr(\n+                                            Expr,\n+                                        ),\n+                                        Expr(\n+                                            Fn,\n+                                        ),\n+                                        FnExpr(\n+                                            Function,\n+                                        ),\n+                                        Function(\n+                                            Body,\n+                                        ),\n+                                        BlockStmt(\n+                                            Stmts(\n+                                                0,\n+                                            ),\n+                                        ),\n+                                        Stmt(\n+                                            Decl,\n+                                        ),\n+                                        Decl(\n+                                            Var,\n+                                        ),\n+                                        VarDecl(\n+                                            Decls(\n+                                                4,\n+                                            ),\n+                                        ),\n+                                        VarDeclarator(\n+                                            Init,\n+                                        ),\n+                                        Expr(\n+                                            Fn,\n+                                        ),\n+                                        FnExpr(\n+                                            Function,\n+                                        ),\n+                                        Function(\n+                                            Body,\n+                                        ),\n+                                        BlockStmt(\n+                                            Stmts(\n+                                                0,\n+                                            ),\n+                                        ),\n+                                        Stmt(\n+                                            If,\n+                                        ),\n+                                        IfStmt(\n+                                            Cons,\n+                                        ),\n+                                        Stmt(\n+                                            If,\n+                                        ),\n+                                        IfStmt(\n+                                            Test,\n+                                        ),\n+                                        Expr(\n+                                            Bin,\n+                                        ),\n+                                        BinExpr(\n+                                            Right,\n+                                        ),\n+                                        Expr(\n+                                            Bin,\n+                                        ),\n+                                        BinExpr(\n+                                            Left,\n+                                        ),\n+                                        Expr(\n+                                            Member,\n+                                        ),\n+                                    ],\n+                                    span: 306..322,\n+                                },\n+                            ],\n+                        },\n                         ast_path: [\n                             Program(\n                                 Script,\n@@ -1145,20 +1258,11 @@\n                             Expr(\n                                 Bin,\n                             ),\n-                            BinExpr(\n-                                Right,\n-                            ),\n-                            Expr(\n-                                Bin,\n-                            ),\n                             BinExpr(\n                                 Left,\n                             ),\n-                            Expr(\n-                                Member,\n-                            ),\n                         ],\n-                        span: 306..322,\n+                        span: 295..335,\n                     },\n                     Conditional {\n                         condition: Logical(\n@@ -29435,20 +29539,125 @@\n         in_try: false,\n         new: false,\n     },\n-    Member {\n-        obj: Variable(\n+    Conditional {\n+        condition: Variable(\n             (\n                 \"options\",\n                 #11,\n             ),\n         ),\n-        prop: Constant(\n-            Str(\n-                Atom(\n-                    \"asBytes\",\n-                ),\n-            ),\n-        ),\n+        kind: And {\n+            rhs_effects: [\n+                Member {\n+                    obj: Variable(\n+                        (\n+                            \"options\",\n+                            #11,\n+                        ),\n+                    ),\n+                    prop: Constant(\n+                        Str(\n+                            Atom(\n+                                \"asBytes\",\n+                            ),\n+                        ),\n+                    ),\n+                    ast_path: [\n+                        Program(\n+                            Script,\n+                        ),\n+                        Script(\n+                            Body(\n+                                0,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Expr,\n+                        ),\n+                        ExprStmt(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Call,\n+                        ),\n+                        CallExpr(\n+                            Callee,\n+                        ),\n+                        Callee(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Paren,\n+                        ),\n+                        ParenExpr(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Fn,\n+                        ),\n+                        FnExpr(\n+                            Function,\n+                        ),\n+                        Function(\n+                            Body,\n+                        ),\n+                        BlockStmt(\n+                            Stmts(\n+                                7,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Expr,\n+                        ),\n+                        ExprStmt(\n+                            Expr,\n+                        ),\n+                        Expr(\n+                            Assign,\n+                        ),\n+                        AssignExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Fn,\n+                        ),\n+                        FnExpr(\n+                            Function,\n+                        ),\n+                        Function(\n+                            Body,\n+                        ),\n+                        BlockStmt(\n+                            Stmts(\n+                                2,\n+                            ),\n+                        ),\n+                        Stmt(\n+                            Return,\n+                        ),\n+                        ReturnStmt(\n+                            Arg,\n+                        ),\n+                        Expr(\n+                            Cond,\n+                        ),\n+                        CondExpr(\n+                            Test,\n+                        ),\n+                        Expr(\n+                            Bin,\n+                        ),\n+                        BinExpr(\n+                            Right,\n+                        ),\n+                        Expr(\n+                            Member,\n+                        ),\n+                    ],\n+                    span: 5908..5923,\n+                },\n+            ],\n+        },\n         ast_path: [\n             Program(\n                 Script,\n@@ -29535,13 +29744,10 @@\n                 Bin,\n             ),\n             BinExpr(\n-                Right,\n-            ),\n-            Expr(\n-                Member,\n+                Left,\n             ),\n         ],\n-        span: 5908..5923,\n+        span: 5897..5923,\n     },\n     Conditional {\n         condition: Logical(\n@@ -29663,20 +29869,131 @@\n             },\n             else: EffectsBlock {\n                 effects: [\n-                    Member {\n-                        obj: Variable(\n+                    Conditional {\n+                        condition: Variable(\n                             (\n                                 \"options\",\n                                 #11,\n                             ),\n                         ),\n-                        prop: Constant(\n-                            Str(\n-                                Atom(\n-                                    \"asString\",\n-                                ),\n-                            ),\n-                        ),\n+                        kind: And {\n+                            rhs_effects: [\n+                                Member {\n+                                    obj: Variable(\n+                                        (\n+                                            \"options\",\n+                                            #11,\n+                                        ),\n+                                    ),\n+                                    prop: Constant(\n+                                        Str(\n+                                            Atom(\n+                                                \"asString\",\n+                                            ),\n+                                        ),\n+                                    ),\n+                                    ast_path: [\n+                                        Program(\n+                                            Script,\n+                                        ),\n+                                        Script(\n+                                            Body(\n+                                                0,\n+                                            ),\n+                                        ),\n+                                        Stmt(\n+                                            Expr,\n+                                        ),\n+                                        ExprStmt(\n+                                            Expr,\n+                                        ),\n+                                        Expr(\n+                                            Call,\n+                                        ),\n+                                        CallExpr(\n+                                            Callee,\n+                                        ),\n+                                        Callee(\n+                                            Expr,\n+                                        ),\n+                                        Expr(\n+                                            Paren,\n+                                        ),\n+                                        ParenExpr(\n+                                            Expr,\n+                                        ),\n+                                        Expr(\n+                                            Fn,\n+                                        ),\n+                                        FnExpr(\n+                                            Function,\n+                                        ),\n+                                        Function(\n+                                            Body,\n+                                        ),\n+                                        BlockStmt(\n+                                            Stmts(\n+                                                7,\n+                                            ),\n+                                        ),\n+                                        Stmt(\n+                                            Expr,\n+                                        ),\n+                                        ExprStmt(\n+                                            Expr,\n+                                        ),\n+                                        Expr(\n+                                            Assign,\n+                                        ),\n+                                        AssignExpr(\n+                                            Right,\n+                                        ),\n+                                        Expr(\n+                                            Fn,\n+                                        ),\n+                                        FnExpr(\n+                                            Function,\n+                                        ),\n+                                        Function(\n+                                            Body,\n+                                        ),\n+                                        BlockStmt(\n+                                            Stmts(\n+                                                2,\n+                                            ),\n+                                        ),\n+                                        Stmt(\n+                                            Return,\n+                                        ),\n+                                        ReturnStmt(\n+                                            Arg,\n+                                        ),\n+                                        Expr(\n+                                            Cond,\n+                                        ),\n+                                        CondExpr(\n+                                            Alt,\n+                                        ),\n+                                        Expr(\n+                                            Cond,\n+                                        ),\n+                                        CondExpr(\n+                                            Test,\n+                                        ),\n+                                        Expr(\n+                                            Bin,\n+                                        ),\n+                                        BinExpr(\n+                                            Right,\n+                                        ),\n+                                        Expr(\n+                                            Member,\n+                                        ),\n+                                    ],\n+                                    span: 5963..5979,\n+                                },\n+                            ],\n+                        },\n                         ast_path: [\n                             Program(\n                                 Script,\n@@ -29769,13 +30086,10 @@\n                                 Bin,\n                             ),\n                             BinExpr(\n-                                Right,\n-                            ),\n-                            Expr(\n-                                Member,\n+                                Left,\n                             ),\n                         ],\n-                        span: 5963..5979,\n+                        span: 5952..5979,\n                     },\n                     Conditional {\n                         condition: Logical("
        },
        {
            "sha": "93c295faee3df3c5b2d04bba5101f721e9c4b558",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/md5_2/resolved-effects.snapshot",
            "status": "modified",
            "additions": 105,
            "deletions": 93,
            "changes": 198,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fmd5_2%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fmd5_2%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fmd5_2%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -44,15 +44,19 @@\n     unknown global\n     This value might have side effects\n \n-13 -> 15 conditional = (???*0* | (???*1* === \"binary\"))\n+13 -> 14 conditional = ???*0*\n+- *0* arguments[1]\n+    function calls are not analyzed yet\n+\n+13 -> 16 conditional = (???*0* | (???*1* === \"binary\"))\n - *0* arguments[1]\n     function calls are not analyzed yet\n - *1* ???*2*[\"encoding\"]\n     unknown object\n - *2* arguments[1]\n     function calls are not analyzed yet\n \n-15 -> 17 member call = module<charenc, {}>[\"bin\"][\"stringToBytes\"](\n+16 -> 18 member call = module<charenc, {}>[\"bin\"][\"stringToBytes\"](\n     (\n       | ???*0*\n       | module<charenc, {}>[\"bin\"][\"stringToBytes\"](???*1*)\n@@ -84,7 +88,7 @@\n - *8* message\n     circular variable reference\n \n-15 -> 19 member call = module<charenc, {}>[\"utf8\"][\"stringToBytes\"](\n+16 -> 20 member call = module<charenc, {}>[\"utf8\"][\"stringToBytes\"](\n     (\n       | ???*0*\n       | module<charenc, {}>[\"bin\"][\"stringToBytes\"](???*1*)\n@@ -116,7 +120,7 @@\n - *8* message\n     circular variable reference\n \n-13 -> 20 call = module<is-buffer, {}>(\n+13 -> 21 call = module<is-buffer, {}>(\n     (\n       | ???*0*\n       | module<charenc, {}>[\"bin\"][\"stringToBytes\"](???*1*)\n@@ -148,7 +152,7 @@\n - *8* message\n     circular variable reference\n \n-13 -> 21 conditional = module<is-buffer, {}>((???*0* | ???*1* | ???*3*))\n+13 -> 22 conditional = module<is-buffer, {}>((???*0* | ???*1* | ???*3*))\n - *0* arguments[0]\n     function calls are not analyzed yet\n - *1* module<charenc, {}>[\"bin\"][\"stringToBytes\"](???*2*)\n@@ -168,9 +172,9 @@\n     unknown global\n     This value might have side effects\n \n-21 -> 25 free var = FreeVar(Array)\n+22 -> 26 free var = FreeVar(Array)\n \n-21 -> 26 member call = ???*0*[\"call\"](\n+22 -> 27 member call = ???*0*[\"call\"](\n     (\n       | ???*3*\n       | module<charenc, {}>[\"bin\"][\"stringToBytes\"](???*4*)\n@@ -212,9 +216,9 @@\n - *11* message\n     circular variable reference\n \n-21 -> 28 free var = FreeVar(Array)\n+22 -> 29 free var = FreeVar(Array)\n \n-21 -> 29 member call = ???*0*[\"isArray\"](\n+22 -> 30 member call = ???*0*[\"isArray\"](\n     (\n       | ???*1*\n       | module<charenc, {}>[\"bin\"][\"stringToBytes\"](???*2*)\n@@ -249,15 +253,15 @@\n - *9* message\n     circular variable reference\n \n-21 -> 30 conditional = !(???*0*)\n+22 -> 31 conditional = !(???*0*)\n - *0* ???*1*[\"isArray\"](message)\n     unknown callee object\n     This value might have side effects\n - *1* FreeVar(Array)\n     unknown global\n     This value might have side effects\n \n-30 -> 32 member call = (\n+31 -> 33 member call = (\n   | ???*0*\n   | module<charenc, {}>[\"bin\"][\"stringToBytes\"](???*1*)\n   | module<charenc, {}>[\"utf8\"][\"stringToBytes\"](???*2*)\n@@ -287,7 +291,7 @@\n - *8* message\n     circular variable reference\n \n-0 -> 34 member call = module<crypt, {}>[\"bytesToWords\"](\n+0 -> 35 member call = module<crypt, {}>[\"bytesToWords\"](\n     (\n       | ???*0*\n       | module<charenc, {}>[\"bin\"][\"stringToBytes\"](???*1*)\n@@ -319,7 +323,7 @@\n - *8* message\n     circular variable reference\n \n-0 -> 50 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 51 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -363,7 +367,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 52 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 53 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -407,7 +411,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 54 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 55 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -449,7 +453,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 56 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 57 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -493,7 +497,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 58 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 59 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -537,7 +541,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 60 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 61 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -579,7 +583,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 62 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 63 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -623,7 +627,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 64 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 65 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -667,7 +671,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 66 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 67 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -709,7 +713,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 68 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 69 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -753,7 +757,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 70 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 71 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -797,7 +801,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 72 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 73 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -841,7 +845,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 74 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 75 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -883,7 +887,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 76 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 77 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -927,7 +931,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 78 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 79 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -971,7 +975,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 80 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n+0 -> 81 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ff\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1013,7 +1017,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 82 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 83 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1057,7 +1061,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 84 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 85 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1101,7 +1105,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 86 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 87 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1143,7 +1147,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 88 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 89 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1187,7 +1191,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 90 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 91 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1231,7 +1235,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 92 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 93 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1273,7 +1277,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 94 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 95 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1317,7 +1321,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 96 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 97 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1361,7 +1365,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 98 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 99 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1403,7 +1407,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 100 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 101 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1447,7 +1451,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 102 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 103 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1491,7 +1495,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 104 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 105 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1533,7 +1537,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 106 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 107 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1577,7 +1581,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 108 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 109 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1621,7 +1625,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 110 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 111 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1663,7 +1667,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 112 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n+0 -> 113 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_gg\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1707,7 +1711,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 114 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 115 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1751,7 +1755,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 116 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 117 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1795,7 +1799,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 118 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 119 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1837,7 +1841,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 120 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 121 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1881,7 +1885,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 122 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 123 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1925,7 +1929,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 124 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 125 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -1967,7 +1971,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 126 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 127 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2011,7 +2015,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 128 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 129 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2055,7 +2059,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 130 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 131 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2097,7 +2101,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 132 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 133 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2141,7 +2145,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 134 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 135 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2185,7 +2189,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 136 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 137 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2227,7 +2231,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 138 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 139 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2271,7 +2275,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 140 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 141 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2315,7 +2319,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 142 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 143 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2357,7 +2361,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 144 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n+0 -> 145 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_hh\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2401,7 +2405,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 146 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 147 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2445,7 +2449,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 148 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 149 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2487,7 +2491,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 150 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 151 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2531,7 +2535,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 152 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 153 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2575,7 +2579,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 154 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 155 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2617,7 +2621,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 156 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 157 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2661,7 +2665,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 158 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 159 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2705,7 +2709,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 160 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 161 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2749,7 +2753,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 162 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 163 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2791,7 +2795,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 164 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 165 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2835,7 +2839,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 166 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 167 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2879,7 +2883,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 168 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 169 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2921,7 +2925,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 170 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 171 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -2965,7 +2969,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 172 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 173 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -3009,7 +3013,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 174 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 175 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -3051,7 +3055,7 @@\n - *13* i\n     circular variable reference\n \n-0 -> 176 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n+0 -> 177 call = (...) => crypt[\"endian\"]([a, b, c, d])[\"_ii\"](\n     ???*0*,\n     ???*1*,\n     ???*2*,\n@@ -3095,7 +3099,7 @@\n - *14* unsupported expression\n     This value might have side effects\n \n-0 -> 178 member call = module<crypt, {}>[\"endian\"]([???*0*, ???*1*, ???*2*, ???*3*])\n+0 -> 179 member call = module<crypt, {}>[\"endian\"]([???*0*, ???*1*, ???*2*, ???*3*])\n - *0* max number of linking steps reached\n     This value might have side effects\n - *1* max number of linking steps reached\n@@ -3105,77 +3109,85 @@\n - *3* max number of linking steps reached\n     This value might have side effects\n \n-0 -> 179 unreachable = ???*0*\n+0 -> 180 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 181 unreachable = ???*0*\n+0 -> 182 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 183 unreachable = ???*0*\n+0 -> 184 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 185 unreachable = ???*0*\n+0 -> 186 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 187 unreachable = ???*0*\n+0 -> 188 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 191 free var = FreeVar(module)\n+0 -> 192 free var = FreeVar(module)\n \n-0 -> 192 conditional = ((???*0* === undefined) | (???*1* === null))\n+0 -> 193 conditional = ((???*0* === undefined) | (???*1* === null))\n - *0* arguments[0]\n     function calls are not analyzed yet\n - *1* arguments[0]\n     function calls are not analyzed yet\n \n-192 -> 193 free var = FreeVar(Error)\n+193 -> 194 free var = FreeVar(Error)\n \n-192 -> 194 call = new ???*0*(`Illegal argument ${???*1*}`)\n+193 -> 195 call = new ???*0*(`Illegal argument ${???*1*}`)\n - *0* FreeVar(Error)\n     unknown global\n     This value might have side effects\n - *1* arguments[0]\n     function calls are not analyzed yet\n \n-0 -> 196 call = (...) => crypt[\"endian\"]([a, b, c, d])(???*0*, ???*1*)\n+0 -> 197 call = (...) => crypt[\"endian\"]([a, b, c, d])(???*0*, ???*1*)\n - *0* arguments[0]\n     function calls are not analyzed yet\n - *1* arguments[1]\n     function calls are not analyzed yet\n \n-0 -> 197 member call = module<crypt, {}>[\"wordsToBytes\"](???*0*)\n+0 -> 198 member call = module<crypt, {}>[\"wordsToBytes\"](???*0*)\n - *0* max number of linking steps reached\n     This value might have side effects\n \n-0 -> 199 conditional = (???*0* | ???*1*)\n+0 -> 199 conditional = ???*0*\n+- *0* arguments[1]\n+    function calls are not analyzed yet\n+\n+0 -> 201 conditional = (???*0* | ???*1*)\n - *0* arguments[1]\n     function calls are not analyzed yet\n - *1* ???*2*[\"asBytes\"]\n     unknown object\n - *2* arguments[1]\n     function calls are not analyzed yet\n \n-199 -> 201 conditional = (???*0* | ???*1*)\n+201 -> 202 conditional = ???*0*\n+- *0* arguments[1]\n+    function calls are not analyzed yet\n+\n+201 -> 204 conditional = (???*0* | ???*1*)\n - *0* arguments[1]\n     function calls are not analyzed yet\n - *1* ???*2*[\"asString\"]\n     unknown object\n - *2* arguments[1]\n     function calls are not analyzed yet\n \n-201 -> 203 member call = module<charenc, {}>[\"bin\"][\"bytesToString\"](???*0*)\n+204 -> 206 member call = module<charenc, {}>[\"bin\"][\"bytesToString\"](???*0*)\n - *0* max number of linking steps reached\n     This value might have side effects\n \n-201 -> 205 member call = module<crypt, {}>[\"bytesToHex\"](???*0*)\n+204 -> 208 member call = module<crypt, {}>[\"bytesToHex\"](???*0*)\n - *0* max number of linking steps reached\n     This value might have side effects\n \n-0 -> 206 unreachable = ???*0*\n+0 -> 209 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects"
        },
        {
            "sha": "666b4ba5e682c99862f79b97aa23df4eeafbcbff",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/op-assign/graph-effects.snapshot",
            "status": "modified",
            "additions": 0,
            "deletions": 191,
            "changes": 191,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fop-assign%2Fgraph-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fop-assign%2Fgraph-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fop-assign%2Fgraph-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -1171,197 +1171,6 @@\n             ),\n         ],\n     },\n-    Conditional {\n-        condition: Binary(\n-            3,\n-            Variable(\n-                (\n-                    \"clientComponentLoadTimes\",\n-                    #2,\n-                ),\n-            ),\n-            StrictEqual,\n-            Constant(\n-                Num(\n-                    ConstantNumber(\n-                        0.0,\n-                    ),\n-                ),\n-            ),\n-        ),\n-        kind: Ternary {\n-            then: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Module,\n-                        ),\n-                        Module(\n-                            Body(\n-                                2,\n-                            ),\n-                        ),\n-                        ModuleItem(\n-                            ModuleDecl,\n-                        ),\n-                        ModuleDecl(\n-                            ExportDecl,\n-                        ),\n-                        ExportDecl(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Fn,\n-                        ),\n-                        FnDecl(\n-                            Function,\n-                        ),\n-                        Function(\n-                            Body,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                0,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Var,\n-                        ),\n-                        VarDecl(\n-                            Decls(\n-                                0,\n-                            ),\n-                        ),\n-                        VarDeclarator(\n-                            Init,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Cons,\n-                        ),\n-                    ],\n-                ),\n-            },\n-            else: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Module,\n-                        ),\n-                        Module(\n-                            Body(\n-                                2,\n-                            ),\n-                        ),\n-                        ModuleItem(\n-                            ModuleDecl,\n-                        ),\n-                        ModuleDecl(\n-                            ExportDecl,\n-                        ),\n-                        ExportDecl(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Fn,\n-                        ),\n-                        FnDecl(\n-                            Function,\n-                        ),\n-                        Function(\n-                            Body,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                0,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Var,\n-                        ),\n-                        VarDecl(\n-                            Decls(\n-                                0,\n-                            ),\n-                        ),\n-                        VarDeclarator(\n-                            Init,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Alt,\n-                        ),\n-                    ],\n-                ),\n-            },\n-        },\n-        ast_path: [\n-            Program(\n-                Module,\n-            ),\n-            Module(\n-                Body(\n-                    2,\n-                ),\n-            ),\n-            ModuleItem(\n-                ModuleDecl,\n-            ),\n-            ModuleDecl(\n-                ExportDecl,\n-            ),\n-            ExportDecl(\n-                Decl,\n-            ),\n-            Decl(\n-                Fn,\n-            ),\n-            FnDecl(\n-                Function,\n-            ),\n-            Function(\n-                Body,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Cond,\n-            ),\n-            CondExpr(\n-                Test,\n-            ),\n-        ],\n-        span: 496..600,\n-    },\n     Member {\n         obj: Variable(\n             ("
        },
        {
            "sha": "9307540f563069bcd537b9bceba483e97c13becf",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/op-assign/resolved-effects.snapshot",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fop-assign%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fop-assign%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fop-assign%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -28,14 +28,6 @@\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 12 conditional = ((0 | ???*0*) === 0)\n-- *0* (???*1* + ???*2*)\n-    nested operation\n-- *1* clientComponentLoadTimes\n-    circular variable reference\n-- *2* unsupported expression\n-    This value might have side effects\n-\n-0 -> 14 unreachable = ???*0*\n+0 -> 13 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects"
        },
        {
            "sha": "e06a9eecce33e047459d98afb194dea93a3d426f",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/pack-2682/graph-effects.snapshot",
            "status": "modified",
            "additions": 0,
            "deletions": 266,
            "changes": 266,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpack-2682%2Fgraph-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpack-2682%2Fgraph-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpack-2682%2Fgraph-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -350,272 +350,6 @@\n         ],\n         span: 273..277,\n     },\n-    Conditional {\n-        condition: Binary(\n-            3,\n-            Variable(\n-                (\n-                    \"variable\",\n-                    #3,\n-                ),\n-            ),\n-            StrictEqual,\n-            Constant(\n-                Str(\n-                    Atom(\n-                        \"true\",\n-                    ),\n-                ),\n-            ),\n-        ),\n-        kind: Ternary {\n-            then: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Script,\n-                        ),\n-                        Script(\n-                            Body(\n-                                0,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Var,\n-                        ),\n-                        VarDecl(\n-                            Decls(\n-                                0,\n-                            ),\n-                        ),\n-                        VarDeclarator(\n-                            Init,\n-                        ),\n-                        Expr(\n-                            Arrow,\n-                        ),\n-                        ArrowExpr(\n-                            Body,\n-                        ),\n-                        BlockStmtOrExpr(\n-                            BlockStmt,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                1,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Return,\n-                        ),\n-                        ReturnStmt(\n-                            Arg,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                0,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Object,\n-                        ),\n-                        ObjectLit(\n-                            Props(\n-                                1,\n-                            ),\n-                        ),\n-                        PropOrSpread(\n-                            Prop,\n-                        ),\n-                        Prop(\n-                            KeyValue,\n-                        ),\n-                        KeyValueProp(\n-                            Value,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Cons,\n-                        ),\n-                    ],\n-                ),\n-            },\n-            else: EffectsBlock {\n-                effects: [],\n-                range: Exact(\n-                    [\n-                        Program(\n-                            Script,\n-                        ),\n-                        Script(\n-                            Body(\n-                                0,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Decl,\n-                        ),\n-                        Decl(\n-                            Var,\n-                        ),\n-                        VarDecl(\n-                            Decls(\n-                                0,\n-                            ),\n-                        ),\n-                        VarDeclarator(\n-                            Init,\n-                        ),\n-                        Expr(\n-                            Arrow,\n-                        ),\n-                        ArrowExpr(\n-                            Body,\n-                        ),\n-                        BlockStmtOrExpr(\n-                            BlockStmt,\n-                        ),\n-                        BlockStmt(\n-                            Stmts(\n-                                1,\n-                            ),\n-                        ),\n-                        Stmt(\n-                            Return,\n-                        ),\n-                        ReturnStmt(\n-                            Arg,\n-                        ),\n-                        Expr(\n-                            Call,\n-                        ),\n-                        CallExpr(\n-                            Args(\n-                                0,\n-                            ),\n-                        ),\n-                        ExprOrSpread(\n-                            Expr,\n-                        ),\n-                        Expr(\n-                            Object,\n-                        ),\n-                        ObjectLit(\n-                            Props(\n-                                1,\n-                            ),\n-                        ),\n-                        PropOrSpread(\n-                            Prop,\n-                        ),\n-                        Prop(\n-                            KeyValue,\n-                        ),\n-                        KeyValueProp(\n-                            Value,\n-                        ),\n-                        Expr(\n-                            Cond,\n-                        ),\n-                        CondExpr(\n-                            Alt,\n-                        ),\n-                    ],\n-                ),\n-            },\n-        },\n-        ast_path: [\n-            Program(\n-                Script,\n-            ),\n-            Script(\n-                Body(\n-                    0,\n-                ),\n-            ),\n-            Stmt(\n-                Decl,\n-            ),\n-            Decl(\n-                Var,\n-            ),\n-            VarDecl(\n-                Decls(\n-                    0,\n-                ),\n-            ),\n-            VarDeclarator(\n-                Init,\n-            ),\n-            Expr(\n-                Arrow,\n-            ),\n-            ArrowExpr(\n-                Body,\n-            ),\n-            BlockStmtOrExpr(\n-                BlockStmt,\n-            ),\n-            BlockStmt(\n-                Stmts(\n-                    1,\n-                ),\n-            ),\n-            Stmt(\n-                Return,\n-            ),\n-            ReturnStmt(\n-                Arg,\n-            ),\n-            Expr(\n-                Call,\n-            ),\n-            CallExpr(\n-                Args(\n-                    0,\n-                ),\n-            ),\n-            ExprOrSpread(\n-                Expr,\n-            ),\n-            Expr(\n-                Object,\n-            ),\n-            ObjectLit(\n-                Props(\n-                    1,\n-                ),\n-            ),\n-            PropOrSpread(\n-                Prop,\n-            ),\n-            Prop(\n-                KeyValue,\n-            ),\n-            KeyValueProp(\n-                Value,\n-            ),\n-            Expr(\n-                Cond,\n-            ),\n-            CondExpr(\n-                Test,\n-            ),\n-        ],\n-        span: 354..392,\n-    },\n     MemberCall {\n         obj: FreeVar(\n             \"JSON\","
        },
        {
            "sha": "4b4c127ff381032672a0353e03f6d3591994a6ae",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/pack-2682/resolved-effects.snapshot",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpack-2682%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpack-2682%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpack-2682%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -7,13 +7,7 @@\n \n 0 -> 5 free var = FreeVar(JSON)\n \n-0 -> 6 conditional = ((???*0* | \"true\") === \"true\")\n-- *0* ???*1*[\"variable\"]\n-    unknown object\n-- *1* arguments[0]\n-    function calls are not analyzed yet\n-\n-0 -> 7 member call = ???*0*[\"stringify\"](\n+0 -> 6 member call = ???*0*[\"stringify\"](\n     {\n         \"condition\": ((???*1* | \"true\") === \"true\"),\n         \"buggedConditionalCheck\": (???*3* ? \"true\" : \"false\")\n@@ -33,11 +27,11 @@\n - *5* arguments[0]\n     function calls are not analyzed yet\n \n-0 -> 8 unreachable = ???*0*\n+0 -> 7 unreachable = ???*0*\n - *0* unreachable\n     This value might have side effects\n \n-0 -> 9 call = (...) => FreeVar(JSON)[\"stringify\"](\n+0 -> 8 call = (...) => FreeVar(JSON)[\"stringify\"](\n     {\n         \"condition\": (variable === \"true\"),\n         \"buggedConditionalCheck\": ((variable === \"true\") ? \"true\" : \"false\")"
        },
        {
            "sha": "ff90941a7377a88b90eec8577748b4e5ad8f1553",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/peg/resolved-effects.snapshot",
            "status": "modified",
            "additions": 1997,
            "deletions": 2015,
            "changes": 4012,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpeg%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpeg%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Fpeg%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc"
        },
        {
            "sha": "e3fbd4fd41d361bb03852644ab66e994f5f0fb88",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/analyzer/graph/react-dom-production/resolved-effects.snapshot",
            "status": "modified",
            "additions": 14817,
            "deletions": 4929,
            "changes": 19746,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Freact-dom-production%2Fresolved-effects.snapshot",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Freact-dom-production%2Fresolved-effects.snapshot",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fanalyzer%2Fgraph%2Freact-dom-production%2Fresolved-effects.snapshot?ref=23b741a97c963b9ee76a74366c451b9a5228facc"
        },
        {
            "sha": "464d187bb55fa48e71f462ad8be39706a29e5f1b",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/comptime/define/input/index.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Finput%2Findex.js?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -56,7 +56,6 @@ p.env.NODE_ENV == 'production'\n   ? console.log('production')\n   : console.log('development')\n \n-// TODO short-circuit is not implemented yet\n p.env.NODE_ENV != 'production' && console.log('development')\n p.env.NODE_ENV == 'production' && console.log('production')\n "
        },
        {
            "sha": "e467e929f2419ae41b4755b4f19ed2bcd101b115",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/comptime/define/output/aaf3a_crates_turbopack-tests_tests_snapshot_comptime_define_input_index_aec19b5a.js",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_comptime_define_input_index_aec19b5a.js",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_comptime_define_input_index_aec19b5a.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_comptime_define_input_index_aec19b5a.js?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -54,9 +54,8 @@ console.log((\"TURBOPACK compile-time value\", \"development\"));\n if (\"TURBOPACK compile-time falsy\", 0) //TURBOPACK unreachable\n ;\n (\"TURBOPACK compile-time falsy\", 0) ? \"TURBOPACK unreachable\" : console.log('development');\n-// TODO short-circuit is not implemented yet\n-(\"TURBOPACK compile-time value\", \"development\") != 'production' && console.log('development');\n-(\"TURBOPACK compile-time value\", \"development\") == 'production' && console.log('production');\n+\"TURBOPACK simplified expression\", console.log('development');\n+\"TURBOPACK simplified expression\", (\"TURBOPACK compile-time value\", \"development\") == 'production';\n console.log((\"TURBOPACK compile-time value\", \"/ROOT/turbopack/crates/turbopack-tests/tests/snapshot/comptime/define/input\"));\n }),\n ]);"
        },
        {
            "sha": "8c2ea0322511fbda4f4f194db38a008950a5a601",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/comptime/define/output/aaf3a_crates_turbopack-tests_tests_snapshot_comptime_define_input_index_aec19b5a.js.map",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_comptime_define_input_index_aec19b5a.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/23b741a97c963b9ee76a74366c451b9a5228facc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_comptime_define_input_index_aec19b5a.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fcomptime%2Fdefine%2Foutput%2Faaf3a_crates_turbopack-tests_tests_snapshot_comptime_define_input_index_aec19b5a.js.map?ref=23b741a97c963b9ee76a74366c451b9a5228facc",
            "patch": "@@ -2,5 +2,5 @@\n   \"version\": 3,\n   \"sources\": [],\n   \"sections\": [\n-    {\"offset\": {\"line\": 3, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/comptime/define/input/index.js\"],\"sourcesContent\":[\"if (DEFINED_VALUE) {\\n  console.log('DEFINED_VALUE')\\n}\\n\\nif (DEFINED_TRUE) {\\n  console.log('DEFINED_VALUE')\\n}\\n\\nif (!DEFINED_NULL) {\\n  console.log('DEFINED_NULL', DEFINED_NULL)\\n}\\n\\nif (DEFINED_INT) {\\n  console.log('DEFINED_INT', DEFINED_INT)\\n}\\n\\nif (DEFINED_FLOAT) {\\n  console.log('DEFINED_FLOAT', DEFINED_FLOAT)\\n}\\n\\nif (DEFINED_ARRAY) {\\n  console.log('DEFINED_ARRAY', DEFINED_ARRAY)\\n}\\n\\nif (DEFINED_EVALUATE) {\\n  console.log('DEFINED_EVALUATE', DEFINED_EVALUATE)\\n}\\n\\nif (DEFINED_EVALUATE_NESTED) {\\n  console.log('DEFINED_EVALUATE_NESTED', DEFINED_EVALUATE_NESTED)\\n}\\n\\nif (A.VERY.LONG.DEFINED.VALUE) {\\n  console.log('A.VERY.LONG.DEFINED.VALUE')\\n}\\n\\nif (process.env.NODE_ENV) {\\n  console.log('something')\\n}\\n\\nif (process.env.NODE_ENV === 'production') {\\n  console.log('production')\\n}\\n\\nvar p = process\\n\\nconsole.log(A.VERY.LONG.DEFINED.VALUE)\\nconsole.log(DEFINED_VALUE)\\nconsole.log(p.env.NODE_ENV)\\n\\nif (p.env.NODE_ENV === 'production') {\\n  console.log('production')\\n}\\n\\np.env.NODE_ENV == 'production'\\n  ? console.log('production')\\n  : console.log('development')\\n\\n// TODO short-circuit is not implemented yet\\np.env.NODE_ENV != 'production' && console.log('development')\\np.env.NODE_ENV == 'production' && console.log('production')\\n\\nconsole.log(__dirname)\\n\"],\"names\":[],\"mappings\":\"AAAA,wCAAmB;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAkB;IAChB,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAmB;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAiB;IACf,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAmB;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAmB;IACjB,QAAQ,GAAG,CAAC;;;;;;;;;AACd;AAEA,wCAAsB;IACpB,QAAQ,GAAG,CAAC,qDAzBd,IAAI;AA0BJ;AAEA,wCAA6B;IAC3B,QAAQ,GAAG,CAAC;;;yCA7Bd,IAAM;;AA8BN;AAEA,wCAA+B;IAC7B,QAAQ,GAAG,CAAC;AACd;AAEA,wCAA0B;IACxB,QAAQ,GAAG,CAAC;AACd;AAEA;;AAIA,IAAI,IAAI;AAER,QAAQ,GAAG;;;AACX,QAAQ,GAAG;AACX,QAAQ,GAAG;AAEX;;AAIA,sCACI,0BACA,QAAQ,GAAG,CAAC;AAEhB,4CAA4C;AAC5C,mDAAkB,gBAAgB,QAAQ,GAAG,CAAC;AAC9C,mDAAkB,gBAAgB,QAAQ,GAAG,CAAC;AAE9C,QAAQ,GAAG\"}}]\n+    {\"offset\": {\"line\": 3, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/comptime/define/input/index.js\"],\"sourcesContent\":[\"if (DEFINED_VALUE) {\\n  console.log('DEFINED_VALUE')\\n}\\n\\nif (DEFINED_TRUE) {\\n  console.log('DEFINED_VALUE')\\n}\\n\\nif (!DEFINED_NULL) {\\n  console.log('DEFINED_NULL', DEFINED_NULL)\\n}\\n\\nif (DEFINED_INT) {\\n  console.log('DEFINED_INT', DEFINED_INT)\\n}\\n\\nif (DEFINED_FLOAT) {\\n  console.log('DEFINED_FLOAT', DEFINED_FLOAT)\\n}\\n\\nif (DEFINED_ARRAY) {\\n  console.log('DEFINED_ARRAY', DEFINED_ARRAY)\\n}\\n\\nif (DEFINED_EVALUATE) {\\n  console.log('DEFINED_EVALUATE', DEFINED_EVALUATE)\\n}\\n\\nif (DEFINED_EVALUATE_NESTED) {\\n  console.log('DEFINED_EVALUATE_NESTED', DEFINED_EVALUATE_NESTED)\\n}\\n\\nif (A.VERY.LONG.DEFINED.VALUE) {\\n  console.log('A.VERY.LONG.DEFINED.VALUE')\\n}\\n\\nif (process.env.NODE_ENV) {\\n  console.log('something')\\n}\\n\\nif (process.env.NODE_ENV === 'production') {\\n  console.log('production')\\n}\\n\\nvar p = process\\n\\nconsole.log(A.VERY.LONG.DEFINED.VALUE)\\nconsole.log(DEFINED_VALUE)\\nconsole.log(p.env.NODE_ENV)\\n\\nif (p.env.NODE_ENV === 'production') {\\n  console.log('production')\\n}\\n\\np.env.NODE_ENV == 'production'\\n  ? console.log('production')\\n  : console.log('development')\\n\\np.env.NODE_ENV != 'production' && console.log('development')\\np.env.NODE_ENV == 'production' && console.log('production')\\n\\nconsole.log(__dirname)\\n\"],\"names\":[],\"mappings\":\"AAAA,wCAAmB;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAkB;IAChB,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAmB;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAiB;IACf,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAmB;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,wCAAmB;IACjB,QAAQ,GAAG,CAAC;;;;;;;;;AACd;AAEA,wCAAsB;IACpB,QAAQ,GAAG,CAAC,qDAzBd,IAAI;AA0BJ;AAEA,wCAA6B;IAC3B,QAAQ,GAAG,CAAC;;;yCA7Bd,IAAM;;AA8BN;AAEA,wCAA+B;IAC7B,QAAQ,GAAG,CAAC;AACd;AAEA,wCAA0B;IACxB,QAAQ,GAAG,CAAC;AACd;AAEA;;AAIA,IAAI,IAAI;AAER,QAAQ,GAAG;;;AACX,QAAQ,GAAG;AACX,QAAQ,GAAG;AAEX;;AAIA,sCACI,0BACA,QAAQ,GAAG,CAAC;mCAEkB,QAAQ,GAAG,CAAC;mCAC9C,mDAAkB;AAElB,QAAQ,GAAG\"}}]\n }\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 27943,
        "additions": 18735,
        "deletions": 9208
    }
}