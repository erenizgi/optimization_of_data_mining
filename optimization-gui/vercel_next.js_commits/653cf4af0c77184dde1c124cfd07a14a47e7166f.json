{
    "author": "pyrytakala",
    "message": "fix(next-custom-transforms): preserve all declarators in multi-declarator export statements (#86552)",
    "sha": "653cf4af0c77184dde1c124cfd07a14a47e7166f",
    "files": [
        {
            "sha": "d04377cec784c4f8a05564e0c5b8f1b56e5001fd",
            "filename": "crates/next-custom-transforms/src/transforms/next_ssg.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/653cf4af0c77184dde1c124cfd07a14a47e7166f/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fnext_ssg.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/653cf4af0c77184dde1c124cfd07a14a47e7166f/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fnext_ssg.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fnext_ssg.rs?ref=653cf4af0c77184dde1c124cfd07a14a47e7166f",
            "patch": "@@ -144,9 +144,11 @@ impl VisitMut for Analyzer<'_> {\n                 return;\n             }\n \n-            if let Pat::Ident(id) = &d.decls[0].name {\n-                if !SSG_EXPORTS.contains(&&*id.id.sym) {\n-                    self.add_ref(id.to_id());\n+            for decl in &d.decls {\n+                if let Pat::Ident(id) = &decl.name {\n+                    if !SSG_EXPORTS.contains(&&*id.id.sym) {\n+                        self.add_ref(id.to_id());\n+                    }\n                 }\n             }\n         }"
        },
        {
            "sha": "2b7e4053d718bb79a4d5fd9bb5f5b70e162b0dbd",
            "filename": "crates/next-custom-transforms/tests/fixture/ssg/getStaticProps/multi-declarator-export/input.js",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/653cf4af0c77184dde1c124cfd07a14a47e7166f/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fssg%2FgetStaticProps%2Fmulti-declarator-export%2Finput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/653cf4af0c77184dde1c124cfd07a14a47e7166f/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fssg%2FgetStaticProps%2Fmulti-declarator-export%2Finput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fssg%2FgetStaticProps%2Fmulti-declarator-export%2Finput.js?ref=653cf4af0c77184dde1c124cfd07a14a47e7166f",
            "patch": "@@ -0,0 +1,14 @@\n+export const a = 1,\n+  b = 2\n+\n+export async function getStaticProps() {\n+  return {\n+    props: {\n+      sum: a + b,\n+    },\n+  }\n+}\n+\n+export default function Page() {\n+  return <div>Test</div>\n+}"
        },
        {
            "sha": "e51b528f983e92ee5695591c96dab139cb4a1446",
            "filename": "crates/next-custom-transforms/tests/fixture/ssg/getStaticProps/multi-declarator-export/output.js",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/653cf4af0c77184dde1c124cfd07a14a47e7166f/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fssg%2FgetStaticProps%2Fmulti-declarator-export%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/653cf4af0c77184dde1c124cfd07a14a47e7166f/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fssg%2FgetStaticProps%2Fmulti-declarator-export%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fssg%2FgetStaticProps%2Fmulti-declarator-export%2Foutput.js?ref=653cf4af0c77184dde1c124cfd07a14a47e7166f",
            "patch": "@@ -0,0 +1,5 @@\n+export var __N_SSG = true;\n+export const a = 1, b = 2;\n+export default function Page() {\n+    return __jsx(\"div\", null, \"Test\");\n+}"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 24,
        "deletions": 3
    }
}