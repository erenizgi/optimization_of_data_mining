{
    "author": "huozhi",
    "message": "[chore] remove legacy useEarlyImport flag (#80112)",
    "sha": "0b0d03a07f14ce64d7aeed9c4ef44851d34eede8",
    "files": [
        {
            "sha": "5d526e105f14b3a68690e03c2224581ae2a74449",
            "filename": "packages/next/src/build/entries.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0d03a07f14ce64d7aeed9c4ef44851d34eede8/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0d03a07f14ce64d7aeed9c4ef44851d34eede8/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts?ref=0b0d03a07f14ce64d7aeed9c4ef44851d34eede8",
            "patch": "@@ -715,10 +715,6 @@ export async function createEntrypoints(\n               basePath: config.basePath,\n               assetPrefix: config.assetPrefix,\n               nextConfigOutput: config.output,\n-              nextConfigExperimentalUseEarlyImport: config.experimental\n-                .useEarlyImport\n-                ? true\n-                : undefined,\n               preferredRegion: staticInfo.preferredRegion,\n               middlewareConfig: encodeToBase64(staticInfo.middleware || {}),\n               isGlobalNotFoundEnabled: config.experimental.globalNotFound"
        },
        {
            "sha": "a5ba0b7b39e4b500fbd16c26cb95e3d65c00c1c3",
            "filename": "packages/next/src/build/webpack/loaders/next-app-loader/index.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 21,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0d03a07f14ce64d7aeed9c4ef44851d34eede8/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-app-loader%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0d03a07f14ce64d7aeed9c4ef44851d34eede8/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-app-loader%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-app-loader%2Findex.ts?ref=0b0d03a07f14ce64d7aeed9c4ef44851d34eede8",
            "patch": "@@ -48,7 +48,6 @@ export type AppLoaderOptions = {\n   isDev?: true\n   basePath: string\n   nextConfigOutput?: NextConfig['output']\n-  nextConfigExperimentalUseEarlyImport?: true\n   middlewareConfig: string\n   isGlobalNotFoundEnabled: true | undefined\n }\n@@ -553,7 +552,6 @@ const nextAppLoader: AppLoader = async function nextAppLoader() {\n     preferredRegion,\n     basePath,\n     middlewareConfig: middlewareConfigBase64,\n-    nextConfigExperimentalUseEarlyImport,\n   } = loaderOptions\n \n   const isGlobalNotFoundEnabled = !!loaderOptions.isGlobalNotFoundEnabled\n@@ -839,25 +837,14 @@ const nextAppLoader: AppLoader = async function nextAppLoader() {\n     }\n   )\n \n-  const header =\n-    nextConfigExperimentalUseEarlyImport &&\n-    process.env.NODE_ENV === 'production'\n-      ? // Evaluate the imported modules early in the generated code\n-        collectedDeclarations\n-          .map(([varName, modulePath]) => {\n-            return `import * as ${varName}_ from ${JSON.stringify(\n-              modulePath\n-            )};\\nconst ${varName} = () => ${varName}_;\\n`\n-          })\n-          .join('')\n-      : // Lazily evaluate the imported modules in the generated code\n-        collectedDeclarations\n-          .map(([varName, modulePath]) => {\n-            return `const ${varName} = () => import(/* webpackMode: \"eager\" */ ${JSON.stringify(\n-              modulePath\n-            )});\\n`\n-          })\n-          .join('')\n+  // Lazily evaluate the imported modules in the generated code\n+  const header = collectedDeclarations\n+    .map(([varName, modulePath]) => {\n+      return `const ${varName} = () => import(/* webpackMode: \"eager\" */ ${JSON.stringify(\n+        modulePath\n+      )});\\n`\n+    })\n+    .join('')\n \n   return header + code\n }"
        },
        {
            "sha": "8b288d1c3a574202c508b15010a5c2cca8268247",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0d03a07f14ce64d7aeed9c4ef44851d34eede8/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0d03a07f14ce64d7aeed9c4ef44851d34eede8/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=0b0d03a07f14ce64d7aeed9c4ef44851d34eede8",
            "patch": "@@ -468,7 +468,6 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n         serverSourceMaps: z.boolean().optional(),\n         useWasmBinary: z.boolean().optional(),\n         useLightningcss: z.boolean().optional(),\n-        useEarlyImport: z.boolean().optional(),\n         testProxy: z.boolean().optional(),\n         defaultTestRunner: z.enum(SUPPORTED_TEST_RUNNERS_LIST).optional(),\n         allowDevelopmentBuild: z.literal(true).optional(),"
        },
        {
            "sha": "718dd5d6ddae4eefcbc3ac7d54a1be215d4ddc91",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0d03a07f14ce64d7aeed9c4ef44851d34eede8/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0d03a07f14ce64d7aeed9c4ef44851d34eede8/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=0b0d03a07f14ce64d7aeed9c4ef44851d34eede8",
            "patch": "@@ -586,11 +586,6 @@ export interface ExperimentalConfig {\n    */\n   useLightningcss?: boolean\n \n-  /**\n-   * Enables early import feature for app router modules\n-   */\n-  useEarlyImport?: boolean\n-\n   /**\n    * Enables view transitions by using the {@link https://github.com/facebook/react/pull/31975 unstable_ViewTransition} Component.\n    */\n@@ -1370,7 +1365,6 @@ export const defaultConfig = {\n     webpackBuildWorker: undefined,\n     webpackMemoryOptimizations: false,\n     optimizeServerReact: true,\n-    useEarlyImport: false,\n     viewTransition: false,\n     routerBFCache: false,\n     removeUncaughtErrorAndRejectionListeners: false,"
        }
    ],
    "stats": {
        "total": 40,
        "additions": 8,
        "deletions": 32
    }
}