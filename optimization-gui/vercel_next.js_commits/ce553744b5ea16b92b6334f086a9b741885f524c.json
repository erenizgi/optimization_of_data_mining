{
    "author": "icyJoseph",
    "message": "Docs: paper cuts July 1st  (#81109)\n\nJust a couple of adjustments to Caching docs claim that React State is\npreserved upon SPA transitions - as of today, without the Activity API,\nonly shared layouts state is preserved.\n\nAnd we are saying redirect should be called outside try/catch blocks,\nbut rather, it is the try block that's the problem. So I am rephrasing\nthat.\n\nI still think it is best to keep the redirect away from the try/catch\nstatement altogether.",
    "sha": "ce553744b5ea16b92b6334f086a9b741885f524c",
    "files": [
        {
            "sha": "c65807393b6c0dbe6119efd5e7778d02c5bb1a34",
            "filename": "docs/01-app/02-guides/caching.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/ce553744b5ea16b92b6334f086a9b741885f524c/docs%2F01-app%2F02-guides%2Fcaching.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/ce553744b5ea16b92b6334f086a9b741885f524c/docs%2F01-app%2F02-guides%2Fcaching.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fcaching.mdx?ref=ce553744b5ea16b92b6334f086a9b741885f524c",
            "patch": "@@ -318,7 +318,7 @@ You can opt out of the Full Route Cache, or in other words, dynamically render c\n \n Next.js has an in-memory client-side router cache that stores the RSC payload of route segments, split by layouts, loading states, and pages.\n \n-When a user navigates between routes, Next.js caches the visited route segments and [prefetches](/docs/app/getting-started/linking-and-navigating#prefetching) the routes the user is likely to navigate to. This results in instant back/forward navigation, no full-page reload between navigations, and preservation of React state and browser state.\n+When a user navigates between routes, Next.js caches the visited route segments and [prefetches](/docs/app/getting-started/linking-and-navigating#prefetching) the routes the user is likely to navigate to. This results in instant back/forward navigation, no full-page reload between navigations, and preservation of browser state and React state in shared layouts.\n \n With the Router Cache:\n "
        },
        {
            "sha": "d93f42247e8cc600cf631775fdd3119848ad8b82",
            "filename": "docs/01-app/02-guides/redirecting.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/ce553744b5ea16b92b6334f086a9b741885f524c/docs%2F01-app%2F02-guides%2Fredirecting.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/ce553744b5ea16b92b6334f086a9b741885f524c/docs%2F01-app%2F02-guides%2Fredirecting.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fredirecting.mdx?ref=ce553744b5ea16b92b6334f086a9b741885f524c",
            "patch": "@@ -81,7 +81,7 @@ export async function createPost(id) {\n > **Good to know**:\n >\n > - `redirect` returns a 307 (Temporary Redirect) status code by default. When used in a Server Action, it returns a 303 (See Other), which is commonly used for redirecting to a success page as a result of a POST request.\n-> - `redirect` internally throws an error so it should be called outside of `try/catch` blocks.\n+> - `redirect` throws an error so it should be called **outside** the `try` block when using `try/catch` statements.\n > - `redirect` can be called in Client Components during the rendering process but not in event handlers. You can use the [`useRouter` hook](#userouter-hook) instead.\n > - `redirect` also accepts absolute URLs and can be used to redirect to external links.\n > - If you'd like to redirect before the render process, use [`next.config.js`](#redirects-in-nextconfigjs) or [Middleware](#nextresponseredirect-in-middleware)."
        },
        {
            "sha": "cf0beae488d605013d5c8acaaaf1a44f9edf4231",
            "filename": "docs/01-app/03-api-reference/04-functions/redirect.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/ce553744b5ea16b92b6334f086a9b741885f524c/docs%2F01-app%2F03-api-reference%2F04-functions%2Fredirect.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/ce553744b5ea16b92b6334f086a9b741885f524c/docs%2F01-app%2F03-api-reference%2F04-functions%2Fredirect.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F04-functions%2Fredirect.mdx?ref=ce553744b5ea16b92b6334f086a9b741885f524c",
            "patch": "@@ -47,9 +47,9 @@ The `type` parameter has no effect when used in Server Components.\n \n ## Behavior\n \n-- In Server Actions and Route Handlers, `redirect` should be called after the `try/catch` block.\n+- In Server Actions and Route Handlers, redirect should be called **outside** the `try` block when using `try/catch` statements.\n - If you prefer to return a 308 (Permanent) HTTP redirect instead of 307 (Temporary), you can use the [`permanentRedirect` function](/docs/app/api-reference/functions/permanentRedirect) instead.\n-- `redirect` internally throws an error so it should be called outside of `try/catch` blocks.\n+- `redirect` throws an error so it should be called **outside** the `try` block when using `try/catch` statements.\n - `redirect` can be called in Client Components during the rendering process but not in event handlers. You can use the [`useRouter` hook](/docs/app/api-reference/functions/use-router) instead.\n - `redirect` also accepts absolute URLs and can be used to redirect to external links.\n - If you'd like to redirect before the render process, use [`next.config.js`](/docs/app/guides/redirecting#redirects-in-nextconfigjs) or [Middleware](/docs/app/guides/redirecting#nextresponseredirect-in-middleware)."
        },
        {
            "sha": "3c7f90fa3463e1641228412d42e4db59d4af273c",
            "filename": "docs/01-app/03-api-reference/04-functions/unstable_rethrow.mdx",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/ce553744b5ea16b92b6334f086a9b741885f524c/docs%2F01-app%2F03-api-reference%2F04-functions%2Funstable_rethrow.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/ce553744b5ea16b92b6334f086a9b741885f524c/docs%2F01-app%2F03-api-reference%2F04-functions%2Funstable_rethrow.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F04-functions%2Funstable_rethrow.mdx?ref=ce553744b5ea16b92b6334f086a9b741885f524c",
            "patch": "@@ -6,7 +6,7 @@ version: unstable\n \n `unstable_rethrow` can be used to avoid catching internal errors thrown by Next.js when attempting to handle errors thrown in your application code.\n \n-For example, calling the `notFound` function will throw an internal Next.js error and render the [`not-found.js`](/docs/app/api-reference/file-conventions/not-found) component. However, if used inside a `try/catch` block, the error will be caught, preventing `not-found.js` from rendering:\n+For example, calling the `notFound` function will throw an internal Next.js error and render the [`not-found.js`](/docs/app/api-reference/file-conventions/not-found) component. However, if used inside the `try` block of a `try/catch` statement, the error will be caught, preventing `not-found.js` from rendering:\n \n ```tsx filename=\"@/app/ui/component.tsx\"\n import { notFound } from 'next/navigation'\n@@ -60,5 +60,6 @@ If a route segment is marked to throw an error unless it's static, a Dynamic API\n > **Good to know**:\n >\n > - This method should be called at the top of the catch block, passing the error object as its only argument. It can also be used within a `.catch` handler of a promise.\n-> - If you ensure that your calls to APIs that throw are not wrapped in a try/catch then you don't need to use `unstable_rethrow`\n+> - You may be able to avoid using `unstable_rethrow` if you encapsulate your API calls that throw and let the **caller** handle the exception.\n+> - Only use `unstable_rethrow` if your caught exceptions may include both application errors and framework-controlled exceptions (like `redirect()` or `notFound()`).\n > - Any resource cleanup (like clearing intervals, timers, etc) would have to either happen prior to the call to `unstable_rethrow` or within a `finally` block."
        }
    ],
    "stats": {
        "total": 13,
        "additions": 7,
        "deletions": 6
    }
}