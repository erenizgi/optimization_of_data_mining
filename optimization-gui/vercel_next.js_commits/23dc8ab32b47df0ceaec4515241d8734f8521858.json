{
    "author": "eps1lon",
    "message": "[test] Ensure CI uses configured Node.js version (#86720)",
    "sha": "23dc8ab32b47df0ceaec4515241d8734f8521858",
    "files": [
        {
            "sha": "b1c8822c19cd1aec6e855f53c33a72199c7bfb33",
            "filename": ".github/workflows/build_reusable.yml",
            "status": "modified",
            "additions": 16,
            "deletions": 3,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/23dc8ab32b47df0ceaec4515241d8734f8521858/.github%2Fworkflows%2Fbuild_reusable.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/23dc8ab32b47df0ceaec4515241d8734f8521858/.github%2Fworkflows%2Fbuild_reusable.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_reusable.yml?ref=23dc8ab32b47df0ceaec4515241d8734f8521858",
            "patch": "@@ -151,9 +151,22 @@ jobs:\n           script: |\n             core.setOutput('input_step_key', '${{ inputs.stepName }}'.toLowerCase().replaceAll(/[/.]/g, '-').trim('-'));\n \n-      - run: fnm use --install-if-missing ${{ inputs.nodeVersion || env.NODE_LTS_VERSION }}\n-      - run: fnm default ${{ inputs.nodeVersion || env.NODE_LTS_VERSION }}\n-      - run: node -v\n+      - name: Use Node.js ${{ inputs.nodeVersion || env.NODE_LTS_VERSION }}\n+        run: |\n+          node --version || echo \"Node.js not installed yet\"\n+          # TODO: May be sufficient to just set `$FNM_MULTISHELL_PATH/bin` from `fnm env --json` into GITHUB_PATH\n+          fnm_env=$(fnm env)\n+          # Debug what we're about to eval\n+          echo \"$fnm_env\"\n+          eval \"$fnm_env\"\n+          fnm use --install-if-missing ${{ inputs.nodeVersion || env.NODE_LTS_VERSION }}\n+          fnm default ${{ inputs.nodeVersion || env.NODE_LTS_VERSION }}\n+          node --version\n+          which node\n+          echo \"$FNM_MULTISHELL_PATH/bin\" >> \"$GITHUB_PATH\"\n+      # Debug used Node.js version in a separate step to ensure\n+      # the Node.js version is set for the entire job\n+      - run: node --version\n       - name: Prepare corepack\n         if: ${{ contains(fromJson(inputs.runs_on_labels), 'ubuntu-latest') }}\n         run: |"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 16,
        "deletions": 3
    }
}