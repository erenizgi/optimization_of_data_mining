{
    "author": "SyMind",
    "message": "fix: update rspack production build output snapshot (#79766)\n\nupdate build output snapshots in following test cases for Rspack.\n\n-\ntest/e2e/app-dir/use-cache-segment-configs/use-cache-segment-configs.test.ts\n-\ntest/e2e/app-dir/use-cache-unknown-cache-kind/use-cache-unknown-cache-kind.test.ts\n-\ntest/e2e/app-dir/use-cache-without-experimental-flag/use-cache-without-experimental-flag.test.ts\n- test/integration/css-minify/test/index.test.js",
    "sha": "b7b546e0710666247e4bb56f216a8c32bbafbdf9",
    "files": [
        {
            "sha": "3a5ce1fb028b5b72981bd09c5c117448ce0f1267",
            "filename": "test/e2e/app-dir/use-cache-segment-configs/use-cache-segment-configs.test.ts",
            "status": "modified",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/b7b546e0710666247e4bb56f216a8c32bbafbdf9/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b7b546e0710666247e4bb56f216a8c32bbafbdf9/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-segment-configs%2Fuse-cache-segment-configs.test.ts?ref=b7b546e0710666247e4bb56f216a8c32bbafbdf9",
            "patch": "@@ -2,6 +2,8 @@ import { nextTestSetup } from 'e2e-utils'\n import { assertHasRedbox } from 'next-test-utils'\n import stripAnsi from 'strip-ansi'\n \n+const isRspack = !!process.env.NEXT_RSPACK\n+\n describe('use-cache-segment-configs', () => {\n   const { next, skipped, isNextDev, isTurbopack } = nextTestSetup({\n     files: __dirname,\n@@ -74,6 +76,28 @@ describe('use-cache-segment-configs', () => {\n              at <unknown> (./app/runtime/page.tsx:1:14)\n          \"\n         `)\n+      } else if (isRspack) {\n+        expect(buildOutput).toMatchInlineSnapshot(`\n+         \"\n+         // TODO(veil): Fix broken import trace for Webpack loader resource.\n+           × Module build failed:\n+           ╰─▶   × Error:   x Route segment config \"runtime\" is not compatible with \\`nextConfig.experimental.useCache\\`. Please remove it.\n+                 │    ,-[1:1]\n+                 │  1 | export const runtime = 'edge'\n+                 │    :              ^^^^^^^\n+                 │  2 |\n+                 │  3 | export default function Page() {\n+                 │  4 |   return <div>This page uses \\`export const runtime\\`.</div>\n+                 │    \\`----\n+                 │\n+               \n+         Import trace for requested module:\n+         // TODO(veil): Fix broken import trace for Webpack loader resource.\n+\n+\n+         > Build failed because of rspack errors\n+         \"\n+        `)\n       } else {\n         expect(buildOutput).toMatchInlineSnapshot(`\n          \""
        },
        {
            "sha": "08f89116a2e8368a61ce41626c371b86be119a2a",
            "filename": "test/e2e/app-dir/use-cache-unknown-cache-kind/use-cache-unknown-cache-kind.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/b7b546e0710666247e4bb56f216a8c32bbafbdf9/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b7b546e0710666247e4bb56f216a8c32bbafbdf9/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-unknown-cache-kind%2Fuse-cache-unknown-cache-kind.test.ts?ref=b7b546e0710666247e4bb56f216a8c32bbafbdf9",
            "patch": "@@ -10,7 +10,7 @@ import {\n import stripAnsi from 'strip-ansi'\n import { createSandbox } from 'development-sandbox'\n \n-const isRspack = process.env.NEXT_RSPACK\n+const isRspack = !!process.env.NEXT_RSPACK\n \n const nextConfigWithCacheHandler: NextConfig = {\n   experimental: {\n@@ -64,7 +64,7 @@ describe('use-cache-unknown-cache-kind', () => {\n          ./app/page.tsx\n            × Module build failed:\n            ╰─▶   × Error:   x Unknown cache kind \"custom\". Please configure a cache handler for this kind in the \"experimental.cacheHandlers\" object in your Next.js config.\n-                 │   |\n+                 │\n                  │    ,-[1:1]\n                  │  1 | 'use cache: custom'\n                  │    : ^^^^^^^^^^^^^^^^^^^"
        },
        {
            "sha": "bb976d110311a1f7eb3c16fcb7f63c950e960c97",
            "filename": "test/e2e/app-dir/use-cache-without-experimental-flag/use-cache-without-experimental-flag.test.ts",
            "status": "modified",
            "additions": 26,
            "deletions": 1,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/b7b546e0710666247e4bb56f216a8c32bbafbdf9/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b7b546e0710666247e4bb56f216a8c32bbafbdf9/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-without-experimental-flag%2Fuse-cache-without-experimental-flag.test.ts?ref=b7b546e0710666247e4bb56f216a8c32bbafbdf9",
            "patch": "@@ -13,7 +13,7 @@ const nextConfigWithUseCache: NextConfig = {\n   experimental: { useCache: true },\n }\n \n-const isRspack = process.env.NEXT_RSPACK !== undefined\n+const isRspack = !!process.env.NEXT_RSPACK\n \n describe('use-cache-without-experimental-flag', () => {\n   const { next, isNextStart, isTurbopack, skipped } = nextTestSetup({\n@@ -51,6 +51,31 @@ describe('use-cache-without-experimental-flag', () => {\n              at <unknown> (./app/page.tsx:1:1)\n          \"\n         `)\n+      } else if (isRspack) {\n+        expect(buildOutput).toMatchInlineSnapshot(`\n+         \"\n+         ./app/page.tsx\n+           × Module build failed:\n+           ╰─▶   × Error:   x To use \"use cache\", please enable the experimental feature flag \"useCache\" in your Next.js config.\n+                 │   |\n+                 │   | Read more: https://nextjs.org/docs/canary/app/api-reference/directives/use-cache#usage\n+                 │\n+                 │    ,-[1:1]\n+                 │  1 | 'use cache'\n+                 │    : ^^^^^^^^^^^\n+                 │  2 |\n+                 │  3 | export default async function Page() {\n+                 │  4 |   return <p>hello world</p>\n+                 │    \\`----\n+                 │\n+               \n+         Import trace for requested module:\n+         ./app/page.tsx\n+\n+\n+         > Build failed because of rspack errors\n+         \"\n+        `)\n       } else {\n         expect(buildOutput).toMatchInlineSnapshot(`\n          \""
        },
        {
            "sha": "ba31e8a50f99b3a49e3946b650e35823cbb039d2",
            "filename": "test/integration/css-minify/test/index.test.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/b7b546e0710666247e4bb56f216a8c32bbafbdf9/test%2Fintegration%2Fcss-minify%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/b7b546e0710666247e4bb56f216a8c32bbafbdf9/test%2Fintegration%2Fcss-minify%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcss-minify%2Ftest%2Findex.test.js?ref=b7b546e0710666247e4bb56f216a8c32bbafbdf9",
            "patch": "@@ -20,7 +20,7 @@ function runTests() {\n     const $ = cheerio.load(html)\n     const href = $('link[rel=\"preload\"]').attr('href')\n     const css = await renderViaHTTP(appPort, href)\n-    if (process.env.IS_TURBOPACK_TEST) {\n+    if (process.env.IS_TURBOPACK_TEST || process.env.NEXT_RSPACK) {\n       expect(css).toContain(\n         '.a{--var-1:-50%;--var-2:-50%}.b{--var-1:0;--var-2:-50%}'\n       )"
        }
    ],
    "stats": {
        "total": 57,
        "additions": 53,
        "deletions": 4
    }
}