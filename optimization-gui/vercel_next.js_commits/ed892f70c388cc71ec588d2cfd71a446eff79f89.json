{
    "author": "gaojude",
    "message": "Add regression test for conflicting search and route params (#81249)\n\nFollow-up to https://github.com/vercel/next.js/pull/81209",
    "sha": "ed892f70c388cc71ec588d2cfd71a446eff79f89",
    "files": [
        {
            "sha": "32fbf7d8be829c430fb0487bdba14d713627d629",
            "filename": "test/e2e/app-dir/conflicting-search-and-route-params/app/api/[id]/route.ts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Fapi%2F%5Bid%5D%2Froute.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Fapi%2F%5Bid%5D%2Froute.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Fapi%2F%5Bid%5D%2Froute.ts?ref=ed892f70c388cc71ec588d2cfd71a446eff79f89",
            "patch": "@@ -0,0 +1,14 @@\n+import { NextRequest } from 'next/server'\n+\n+export async function GET(\n+  request: NextRequest,\n+  { params }: { params: Promise<{ id: string }> }\n+) {\n+  const { id: routeId } = await params\n+  const searchId = request.nextUrl.searchParams.get('id')\n+\n+  return Response.json({\n+    routeParam: routeId,\n+    searchParam: searchId,\n+  })\n+}"
        },
        {
            "sha": "716a8db36f52c5b3b068de4e1d3c3bd64290a8be",
            "filename": "test/e2e/app-dir/conflicting-search-and-route-params/app/layout.tsx",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Flayout.tsx?ref=ed892f70c388cc71ec588d2cfd71a446eff79f89",
            "patch": "@@ -0,0 +1,9 @@\n+import { ReactNode } from 'react'\n+\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "0017c202ab8c0638b2cc2e9cc76cb27001ed1005",
            "filename": "test/e2e/app-dir/conflicting-search-and-route-params/app/render/[id]/page.tsx",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Frender%2F%5Bid%5D%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Frender%2F%5Bid%5D%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fapp%2Frender%2F%5Bid%5D%2Fpage.tsx?ref=ed892f70c388cc71ec588d2cfd71a446eff79f89",
            "patch": "@@ -0,0 +1,34 @@\n+import { Suspense } from 'react'\n+\n+async function SearchAndRouteParams({\n+  searchParams,\n+  params,\n+}: {\n+  searchParams: Promise<{ id?: string }>\n+  params: Promise<{ id: string }>\n+}) {\n+  const { id: searchId } = await searchParams\n+  const { id: routeId } = await params\n+\n+  return (\n+    <div>\n+      <h1>Search and Route Parameters</h1>\n+      <p id=\"route-param\">Route param id: {routeId}</p>\n+      <p id=\"search-param\">Search param id: {searchId || 'not provided'}</p>\n+    </div>\n+  )\n+}\n+\n+export default function Page({\n+  searchParams,\n+  params,\n+}: {\n+  searchParams: Promise<{ id?: string }>\n+  params: Promise<{ id: string }>\n+}) {\n+  return (\n+    <Suspense fallback={<div>Loading...</div>}>\n+      <SearchAndRouteParams searchParams={searchParams} params={params} />\n+    </Suspense>\n+  )\n+}"
        },
        {
            "sha": "652190a3d217e679f79e978ec838a227f98dedb5",
            "filename": "test/e2e/app-dir/conflicting-search-and-route-params/conflicting-search-and-route-params.test.ts",
            "status": "added",
            "additions": 28,
            "deletions": 0,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fconflicting-search-and-route-params.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fconflicting-search-and-route-params.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fconflicting-search-and-route-params.test.ts?ref=ed892f70c388cc71ec588d2cfd71a446eff79f89",
            "patch": "@@ -0,0 +1,28 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('conflicting-search-and-route-params', () => {\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should handle conflicting search and route params on page', async () => {\n+    const browser = await next.browser('/render/123?id=456')\n+\n+    const routeParamText = await browser.elementByCss('#route-param').text()\n+    expect(routeParamText).toContain('Route param id: 123')\n+\n+    const searchParamText = await browser.elementByCss('#search-param').text()\n+    expect(searchParamText).toContain('Search param id: 456')\n+  })\n+\n+  it('should handle conflicting search and route params on API route', async () => {\n+    // Test with route param \"789\" and search param \"abc\"\n+    const response = await next.fetch('/api/789?id=abc')\n+    const data = await response.json()\n+\n+    expect(data).toEqual({\n+      routeParam: '789',\n+      searchParam: 'abc',\n+    })\n+  })\n+})"
        },
        {
            "sha": "807126e4cf0bf5b1c8c917e6e0148a27331587d1",
            "filename": "test/e2e/app-dir/conflicting-search-and-route-params/next.config.js",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/ed892f70c388cc71ec588d2cfd71a446eff79f89/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fconflicting-search-and-route-params%2Fnext.config.js?ref=ed892f70c388cc71ec588d2cfd71a446eff79f89",
            "patch": "@@ -0,0 +1,6 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+const nextConfig = {}\n+\n+module.exports = nextConfig"
        }
    ],
    "stats": {
        "total": 91,
        "additions": 91,
        "deletions": 0
    }
}