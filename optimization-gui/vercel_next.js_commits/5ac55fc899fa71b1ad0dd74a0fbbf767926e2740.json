{
    "author": "padmaia",
    "message": "Check if target workflow is enabled before triggering front sync (#81432)\n\nThis change adds a check to ensure the front sync workflow is enabled\nbefore attempting to trigger it. Previously, when the workflow was\ndisabled, the dispatch would fail and cause false alerts about\ndeployment test failures.\n\nNow, if the workflow is disabled, the sync trigger is skipped with clear\nlogging. The on-call person should be aware that the workflow is\ndisabled and can manually rerun the sync once the workflow is\nre-enabled.\n\nI tested this by commenting out the tests and just running the check if\nworkflow is enabled step and it worked:\n![CleanShot 2025-07-08 at 14 57\n48](https://github.com/user-attachments/assets/e56e3e2c-61c2-4c56-935a-025d508d3fa2)",
    "sha": "5ac55fc899fa71b1ad0dd74a0fbbf767926e2740",
    "files": [
        {
            "sha": "b13950c27cc5c4eea97a4b22a82115dfb6d41582",
            "filename": ".github/workflows/test_e2e_deploy_release.yml",
            "status": "modified",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/5ac55fc899fa71b1ad0dd74a0fbbf767926e2740/.github%2Fworkflows%2Ftest_e2e_deploy_release.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/5ac55fc899fa71b1ad0dd74a0fbbf767926e2740/.github%2Fworkflows%2Ftest_e2e_deploy_release.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Ftest_e2e_deploy_release.yml?ref=5ac55fc899fa71b1ad0dd74a0fbbf767926e2740",
            "patch": "@@ -114,9 +114,38 @@ jobs:\n         run: gh auth status\n         env:\n           GITHUB_TOKEN: ${{ secrets.GH_UPDATE_NEXT_WORKFLOW_TRIGGER }}\n+      - uses: actions/github-script@v7\n+        name: Check if target workflow is enabled\n+        id: check-workflow-enabled\n+        with:\n+          retries: 3\n+          retry-exempt-status-codes: 400,401,404\n+          github-token: ${{ secrets.GH_UPDATE_NEXT_WORKFLOW_TRIGGER }}\n+          result-encoding: string\n+          script: |\n+            try {\n+              const response = await github.request(\n+                \"GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}\",\n+                {\n+                  owner: \"vercel\",\n+                  repo: \"front\",\n+                  workflow_id: \"cron-update-next.yml\",\n+                }\n+              );\n+              \n+              const isEnabled = response.data.state === 'active';\n+              console.info(`Target workflow state: ${response.data.state}`);\n+              console.info(`Target workflow enabled: ${isEnabled}`);\n+              \n+              return isEnabled ? 'true' : 'false';\n+            } catch (error) {\n+              console.error('Error checking workflow status:', error);\n+              return 'false';\n+            }\n       - uses: actions/github-script@v7\n         name: Trigger vercel/front sync\n         id: trigger-front-sync\n+        if: steps.check-workflow-enabled.outputs.result == 'true'\n         with:\n           retries: 3\n           retry-exempt-status-codes: 400,401,404"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 29,
        "deletions": 0
    }
}