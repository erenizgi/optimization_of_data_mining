{
    "author": "icyJoseph",
    "message": "Docs/typed routes snippets (#83132)\n\nA few more improvements to typed routes and friends\n\n- showing usage of router methods from `next/navigation` \n- using Route in other data structures",
    "sha": "3f122a4a5153fd07bf7d6d3f50c3120411206b04",
    "files": [
        {
            "sha": "136f6a0d0066c79554713f345f2243bc0a374ddc",
            "filename": "docs/01-app/03-api-reference/05-config/02-typescript.mdx",
            "status": "modified",
            "additions": 70,
            "deletions": 10,
            "changes": 80,
            "blob_url": "https://github.com/vercel/next.js/blob/3f122a4a5153fd07bf7d6d3f50c3120411206b04/docs%2F01-app%2F03-api-reference%2F05-config%2F02-typescript.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/3f122a4a5153fd07bf7d6d3f50c3120411206b04/docs%2F01-app%2F03-api-reference%2F05-config%2F02-typescript.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F05-config%2F02-typescript.mdx?ref=3f122a4a5153fd07bf7d6d3f50c3120411206b04",
            "patch": "@@ -150,20 +150,44 @@ Next.js will generate a link definition in `.next/types` that contains informati\n ```\n {/* prettier-ignore-end */}\n \n-Currently, experimental support includes any string literal, including dynamic segments. For non-literal strings, you currently need to manually cast the `href` with `as Route`:\n+Currently, support includes any string literal, including dynamic segments. For non-literal strings, you need to manually cast with `as Route`. The example below shows both `next/link` and `next/navigation` usage:\n \n-```tsx\n-import type { Route } from 'next';\n+```tsx filename=\"app/example-client.tsx\"\n+'use client'\n+\n+import type { Route } from 'next'\n import Link from 'next/link'\n+import { useRouter } from 'next/navigation'\n \n-// No TypeScript errors if href is a valid route\n-<Link href=\"/about\" />\n-<Link href=\"/blog/nextjs\" />\n-<Link href={`/blog/${slug}`} />\n-<Link href={('/blog' + slug) as Route} />\n+export default function Example() {\n+  const router = useRouter()\n+  const slug = 'nextjs'\n \n-// TypeScript errors if href is not a valid route\n-<Link href=\"/aboot\" />\n+  return (\n+    <>\n+      {/* Link: literal and dynamic */}\n+      <Link href=\"/about\" />\n+      <Link href={`/blog/${slug}`} />\n+      <Link href={('/blog' + slug) as Route} />\n+      {/* TypeScript error if href is not a valid route */}\n+      <Link href=\"/aboot\" />\n+\n+      {/* Router: literal and dynamic strings are validated */}\n+      <button onClick={() => router.push('/about')}>Push About</button>\n+      <button onClick={() => router.replace(`/blog/${slug}`)}>\n+        Replace Blog\n+      </button>\n+      <button onClick={() => router.prefetch('/contact')}>\n+        Prefetch Contact\n+      </button>\n+\n+      {/* For non-literal strings, cast to Route */}\n+      <button onClick={() => router.push(('/blog' + slug) as Route)}>\n+        Push Non-literal Blog\n+      </button>\n+    </>\n+  )\n+}\n ```\n \n The same applies for redirecting routes defined by middleware:\n@@ -203,6 +227,42 @@ function Card<T extends string>({ href }: { href: Route<T> | URL }) {\n }\n ```\n \n+You can also type a simple data structure and iterate to render links:\n+\n+```ts filename=\"components/nav-items.ts\"\n+import type { Route } from 'next'\n+\n+type NavItem<T extends string = string> = {\n+  href: T\n+  label: string\n+}\n+\n+export const navItems: NavItem<Route>[] = [\n+  { href: '/', label: 'Home' },\n+  { href: '/about', label: 'About' },\n+  { href: '/blog', label: 'Blog' },\n+]\n+```\n+\n+Then, map over the items to render `Link`s:\n+\n+```tsx filename=\"components/nav.tsx\"\n+import Link from 'next/link'\n+import { navItems } from './nav-items'\n+\n+export function Nav() {\n+  return (\n+    <nav>\n+      {navItems.map((item) => (\n+        <Link key={item.href} href={item.href}>\n+          {item.label}\n+        </Link>\n+      ))}\n+    </nav>\n+  )\n+}\n+```\n+\n > **How does it work?**\n >\n > When running `next dev` or `next build`, Next.js generates a hidden `.d.ts` file inside `.next` that contains information about all existing routes in your application (all valid routes as the `href` type of `Link`). This `.d.ts` file is included in `tsconfig.json` and the TypeScript compiler will check that `.d.ts` and provide feedback in your editor about invalid links."
        }
    ],
    "stats": {
        "total": 80,
        "additions": 70,
        "deletions": 10
    }
}