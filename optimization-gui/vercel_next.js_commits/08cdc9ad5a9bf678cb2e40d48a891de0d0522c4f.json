{
    "author": "lukesandberg",
    "message": "[turbopack] Documentation fixes for rcstr! and a tiny improvement to `hash` (#82084)\n\nFix safety comment and hash implementation in turbo-rcstr\n\nNoticed this while porting https://github.com/vercel/next.js/pull/81994 to swc",
    "sha": "08cdc9ad5a9bf678cb2e40d48a891de0d0522c4f",
    "files": [
        {
            "sha": "f45f059ecce66ea05a4de4251182d2ad17c4a829",
            "filename": "turbopack/crates/turbo-rcstr/src/dynamic.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/08cdc9ad5a9bf678cb2e40d48a891de0d0522c4f/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Fdynamic.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/08cdc9ad5a9bf678cb2e40d48a891de0d0522c4f/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Fdynamic.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Fdynamic.rs?ref=08cdc9ad5a9bf678cb2e40d48a891de0d0522c4f",
            "patch": "@@ -93,7 +93,7 @@ pub(crate) fn new_static_atom(string: &'static PrehashedString) -> RcStr {\n     // Tag it as a static pointer\n     entry = ((entry as usize) | STATIC_TAG as usize) as *mut PrehashedString;\n     let ptr: NonNull<PrehashedString> = unsafe {\n-        // Safety: Box::into_raw returns a non-null pointer\n+        // Safety: references always return a non-null pointers\n         NonNull::new_unchecked(entry as *mut _)\n     };\n "
        },
        {
            "sha": "8378d53b7ab4d3d82a5b9f0b6f366538f625988b",
            "filename": "turbopack/crates/turbo-rcstr/src/lib.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/08cdc9ad5a9bf678cb2e40d48a891de0d0522c4f/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/08cdc9ad5a9bf678cb2e40d48a891de0d0522c4f/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs?ref=08cdc9ad5a9bf678cb2e40d48a891de0d0522c4f",
            "patch": "@@ -340,10 +340,10 @@ impl Hash for RcStr {\n             PREHASHED_STRING_LOCATION => {\n                 let l = unsafe { deref_from(self.unsafe_data) };\n                 state.write_u64(l.hash);\n-                state.write_u8(0xff);\n+                state.write_u8(0xff); // matches the implementation of the `str` Hash impl\n             }\n             INLINE_LOCATION => {\n-                self.as_str().hash(state);\n+                self.inline_as_str().hash(state);\n             }\n             _ => unsafe { debug_unreachable!() },\n         }"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}