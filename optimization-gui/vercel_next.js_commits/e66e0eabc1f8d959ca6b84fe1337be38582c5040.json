{
    "author": "wbinnssmith",
    "message": "`next analyze`: Make ipv6 server links valid and normalize localhost (#86219)\n\nThe current implementation doesn't properly format IPv6 addresses, which\nmeans URLs aren't valid.\n\n- Added specific handling for IPv6 localhost addresses (`::`/`::1`) to\ndisplay as `localhost:port` for display\n- Added proper IPv6 address formatting with square brackets:\n`[IPv6Address]:port`\n- Maintained existing handling for IPv4 addresses and string addresses\n\nFixes PACK-5874",
    "sha": "e66e0eabc1f8d959ca6b84fe1337be38582c5040",
    "files": [
        {
            "sha": "5723fb043c7dd2ba2c5229d1f07639b79269d724",
            "filename": "packages/next/src/build/analyze/index.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 4,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/e66e0eabc1f8d959ca6b84fe1337be38582c5040/packages%2Fnext%2Fsrc%2Fbuild%2Fanalyze%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e66e0eabc1f8d959ca6b84fe1337be38582c5040/packages%2Fnext%2Fsrc%2Fbuild%2Fanalyze%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fanalyze%2Findex.ts?ref=e66e0eabc1f8d959ca6b84fe1337be38582c5040",
            "patch": "@@ -77,9 +77,11 @@ export default async function analyze({\n       await turbopackAnalyze(analyzeContext)\n \n     const durationString = durationToString(analyzeDuration)\n-    Log.event(\n-      `Analyze data created successfully in ${durationString}. To explore it, run \\`next experimental-analyze --serve\\`.`\n-    )\n+    let logMessage = `Analyze completed in ${durationString}.`\n+    if (!serve) {\n+      logMessage += ` To explore the analyze results, run \\`next experimental-analyze --serve\\`.`\n+    }\n+    Log.event(logMessage)\n \n     await shutdownPromise\n \n@@ -238,8 +240,15 @@ function startServer(dir: string, port: number): Promise<void> {\n       let addressString\n       if (typeof address === 'string') {\n         addressString = address\n+      } else if (\n+        address.family === 'IPv6' &&\n+        (address.address === '::' || address.address === '::1')\n+      ) {\n+        addressString = `localhost:${address.port}`\n+      } else if (address.family === 'IPv6') {\n+        addressString = `[${address.address}]:${address.port}`\n       } else {\n-        addressString = `${address.address === '::' ? 'localhost' : address.address}:${address.port}`\n+        addressString = `${address.address}:${address.port}`\n       }\n \n       Log.info(`Bundle analyzer available at http://${addressString}`)"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 13,
        "deletions": 4
    }
}