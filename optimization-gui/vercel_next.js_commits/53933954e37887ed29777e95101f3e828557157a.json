{
    "author": "unstubbable",
    "message": "Enable PPR in Dynamic IO tests (#79301)\n\nTo prepare for an upcoming change where `ppr` will be enabled\nautomatically when `dynamicIO` is enabled, we're hard coding `ppr: true`\nin the Dynamic IO tests with this PR. The non-PPR assertions are\nsubsequently removed, which makes up most of the changed lines.\n\nWe can now also exclude the tests in the PPR tests manifest, so that\nthey're not run twice in CI.\n\n> [!NOTE]  \n> This PR is best reviewed with hidden whitespace changes.",
    "sha": "53933954e37887ed29777e95101f3e828557157a",
    "files": [
        {
            "sha": "b0b2ad8d2353113aff6d470986e1d9fdf7e55556",
            "filename": "test/development/app-dir/dynamic-io-dev-cache-scope/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-cache-scope%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-cache-scope%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-cache-scope%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -4,6 +4,7 @@\n const nextConfig = {\n   experimental: {\n     dynamicIO: true,\n+    ppr: true,\n   },\n }\n "
        },
        {
            "sha": "b0b2ad8d2353113aff6d470986e1d9fdf7e55556",
            "filename": "test/development/app-dir/dynamic-io-dev-errors/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-errors%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -4,6 +4,7 @@\n const nextConfig = {\n   experimental: {\n     dynamicIO: true,\n+    ppr: true,\n   },\n }\n "
        },
        {
            "sha": "9026854a15ea0f85b43d236dcc4baed64428960b",
            "filename": "test/development/app-dir/dynamic-io-dev-warmup/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-warmup%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-warmup%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-dev-warmup%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,5 +1,6 @@\n module.exports = {\n   experimental: {\n     dynamicIO: true,\n+    ppr: true,\n   },\n }"
        },
        {
            "sha": "9026854a15ea0f85b43d236dcc4baed64428960b",
            "filename": "test/development/app-dir/dynamic-io-warnings/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-warnings%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-warnings%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fdynamic-io-warnings%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,5 +1,6 @@\n module.exports = {\n   experimental: {\n     dynamicIO: true,\n+    ppr: true,\n   },\n }"
        },
        {
            "sha": "b8faf416637fa0a8eae0e1502b63a335056ce38c",
            "filename": "test/e2e/app-dir/dynamic-io-dynamic-imports/bundled/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fbundled%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fbundled%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fbundled%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     prerenderEarlyExit: false,\n   },"
        },
        {
            "sha": "a5e32066337eb0dcec1b220eff80fd67ed8f37b8",
            "filename": "test/e2e/app-dir/dynamic-io-dynamic-imports/dynamic-io-dynamic-imports.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fdynamic-io-dynamic-imports.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fdynamic-io-dynamic-imports.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fdynamic-io-dynamic-imports.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -17,11 +17,10 @@ describe('async imports in dynamicIO', () => {\n         await next.readFile('.next/prerender-manifest.json')\n       )\n \n-      let prerenderedRoutes = Object.keys(prerenderManifest.routes).sort()\n-\n-      if (process.env.__NEXT_EXPERIMENTAL_PPR === 'true') {\n-        // For the purpose of this test we don't consider an incomplete shell.\n-        prerenderedRoutes = prerenderedRoutes.filter((route) => {\n+      // For the purpose of this test we don't consider an incomplete shell.\n+      const prerenderedRoutes = Object.keys(prerenderManifest.routes)\n+        .sort()\n+        .filter((route) => {\n           const filename = route.replace(/^\\//, '').replace(/^$/, 'index')\n           try {\n             return next\n@@ -37,7 +36,6 @@ describe('async imports in dynamicIO', () => {\n             }\n           }\n         })\n-      }\n \n       expect(prerenderedRoutes).toMatchInlineSnapshot(`\n        ["
        },
        {
            "sha": "4968320760cd2e2b50503beb3e318c1c8517bd73",
            "filename": "test/e2e/app-dir/dynamic-io-dynamic-imports/external/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fexternal%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fexternal%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-dynamic-imports%2Fexternal%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n   },\n   serverExternalPackages: ['external-esm-pkg-with-async-import'],"
        },
        {
            "sha": "f2cfe9f952eeacb82251cab9cadda7a13d374d16",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.platform-dynamic.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 11,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.platform-dynamic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.platform-dynamic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.platform-dynamic.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n const stackStart = /\\s+at /\n \n function createExpectError(cliOutput: string) {\n@@ -75,15 +73,9 @@ function runTests(options: { withMinification: boolean }) {\n           throw new Error('expected build not to fail for fully static project')\n         }\n \n-        if (WITH_PPR) {\n-          expect(next.cliOutput).toContain('◐ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(2)\n-        } else {\n-          expect(next.cliOutput).toContain('ƒ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(0)\n-        }\n+        expect(next.cliOutput).toContain('◐ / ')\n+        const $ = await next.render$('/')\n+        expect($('[data-fallback]').length).toBe(2)\n       })\n     })\n "
        },
        {
            "sha": "3b32bfb96d07bca90961f03c3f89e3b88f863c1c",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.sync-dynamic.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 29,
            "changes": 38,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n const stackStart = /\\s+at /\n \n function createExpectError(cliOutput: string) {\n@@ -75,15 +73,9 @@ function runTests(options: { withMinification: boolean }) {\n           throw new Error('expected build not to fail for fully static project')\n         }\n \n-        if (WITH_PPR) {\n-          expect(next.cliOutput).toContain('◐ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(2)\n-        } else {\n-          expect(next.cliOutput).toContain('ƒ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(2)\n-        }\n+        expect(next.cliOutput).toContain('◐ / ')\n+        const $ = await next.render$('/')\n+        expect($('[data-fallback]').length).toBe(2)\n       })\n     })\n \n@@ -162,15 +154,9 @@ function runTests(options: { withMinification: boolean }) {\n           throw new Error('expected build not to fail for fully static project')\n         }\n \n-        if (WITH_PPR) {\n-          expect(next.cliOutput).toContain('◐ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(2)\n-        } else {\n-          expect(next.cliOutput).toContain('ƒ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(0)\n-        }\n+        expect(next.cliOutput).toContain('◐ / ')\n+        const $ = await next.render$('/')\n+        expect($('[data-fallback]').length).toBe(2)\n       })\n     })\n \n@@ -249,15 +235,9 @@ function runTests(options: { withMinification: boolean }) {\n           throw new Error('expected build not to fail for fully static project')\n         }\n \n-        if (WITH_PPR) {\n-          expect(next.cliOutput).toContain('◐ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(2)\n-        } else {\n-          expect(next.cliOutput).toContain('ƒ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(0)\n-        }\n+        expect(next.cliOutput).toContain('◐ / ')\n+        const $ = await next.render$('/')\n+        expect($('[data-fallback]').length).toBe(2)\n       })\n     })\n "
        },
        {
            "sha": "c904b560dd7738b854865d48ab886e070971d75e",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.test.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 51,
            "changes": 71,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n const stackStart = /\\s+at /\n \n function createExpectError(cliOutput: string) {\n@@ -205,16 +203,10 @@ function runTests(options: { withMinification: boolean }) {\n           throw new Error('expected build not to fail for fully static project')\n         }\n \n-        if (WITH_PPR) {\n-          expect(next.cliOutput).toContain('◐ / ')\n-          const $ = await next.render$('/')\n-          expect($('#dynamic').text()).toBe('Dynamic')\n-          expect($('[data-fallback]').length).toBe(1)\n-        } else {\n-          expect(next.cliOutput).toContain('ƒ / ')\n-          const $ = await next.render$('/')\n-          expect($('#dynamic').text()).toBe('Dynamic')\n-        }\n+        expect(next.cliOutput).toContain('◐ / ')\n+        const $ = await next.render$('/')\n+        expect($('#dynamic').text()).toBe('Dynamic')\n+        expect($('[data-fallback]').length).toBe(1)\n       })\n     })\n \n@@ -379,16 +371,11 @@ function runTests(options: { withMinification: boolean }) {\n           // Turbopack doesn't support disabling minification yet\n           withMinification || isTurbopack ? undefined : 'IndirectionTwo'\n         )\n-        if (WITH_PPR) {\n-          // React currently fatals the render in canary because we don't have access to the prerender API there. with a fatal only\n-          // one task actually reports and error at the moment. We should fix upstream but for now we exclude the second error when PPR is off\n-          // because we are using canary React and renderToReadableStream rather than experimental React and prerender\n-          expectError(\n-            'Route \"/\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it.',\n-            // Turbopack doesn't support disabling minification yet\n-            withMinification || isTurbopack ? undefined : 'IndirectionThree'\n-          )\n-        }\n+        expectError(\n+          'Route \"/\": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a \"use cache\" above it.',\n+          // Turbopack doesn't support disabling minification yet\n+          withMinification || isTurbopack ? undefined : 'IndirectionThree'\n+        )\n         expectError('Error occurred prerendering page \"/\"')\n         expectError('exiting the build.')\n       })\n@@ -421,36 +408,18 @@ function runTests(options: { withMinification: boolean }) {\n         }\n       })\n \n-      if (WITH_PPR) {\n-        it('should partially prerender when all dynamic components are inside a Suspense boundary', async () => {\n-          try {\n-            await next.start()\n-          } catch {\n-            throw new Error(\n-              'expected build not to fail for fully static project'\n-            )\n-            // we expect the build to fail\n-          }\n-\n-          expect(next.cliOutput).toContain('◐ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(2)\n-        })\n-      } else {\n-        it('should not error the build when all dynamic components are inside a Suspense boundary', async () => {\n-          try {\n-            await next.start()\n-          } catch {\n-            throw new Error(\n-              'expected build not to fail for fully static project'\n-            )\n-          }\n+      it('should partially prerender when all dynamic components are inside a Suspense boundary', async () => {\n+        try {\n+          await next.start()\n+        } catch {\n+          throw new Error('expected build not to fail for fully static project')\n+          // we expect the build to fail\n+        }\n \n-          expect(next.cliOutput).toContain('ƒ / ')\n-          const $ = await next.render$('/')\n-          expect($('[data-fallback]').length).toBe(2)\n-        })\n-      }\n+        expect(next.cliOutput).toContain('◐ / ')\n+        const $ = await next.render$('/')\n+        expect($('[data-fallback]').length).toBe(2)\n+      })\n     })\n   })\n }"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/dynamic-boundary/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-boundary%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-boundary%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-boundary%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/dynamic-metadata-dynamic-route/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-dynamic-route%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-dynamic-route%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-dynamic-route%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/dynamic-metadata-error-route/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-error-route%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-error-route%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-error-route%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/dynamic-metadata-static-route/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-static-route%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-static-route%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-static-route%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "3a95d8820b36d58f6f96f4af63d5a36d879fd804",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/dynamic-metadata-static-with-suspense/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-static-with-suspense%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-static-with-suspense%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-metadata-static-with-suspense%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     pprFallbacks: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n     dynamicIO: true,\n     serverMinification: true,"
        },
        {
            "sha": "56a3077126ed2d99da7ef0bc97aa8f788d95169f",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/dynamic-root/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-root%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-root%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-root%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: false,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/dynamic-viewport-dynamic-route/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-viewport-dynamic-route%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-viewport-dynamic-route%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-viewport-dynamic-route%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/dynamic-viewport-static-route/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-viewport-static-route%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-viewport-static-route%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fdynamic-viewport-static-route%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "56a3077126ed2d99da7ef0bc97aa8f788d95169f",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: false,\n   },"
        },
        {
            "sha": "56a3077126ed2d99da7ef0bc97aa8f788d95169f",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/prospective-render-errors/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fprospective-render-errors%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fprospective-render-errors%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fprospective-render-errors%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: false,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/static/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fstatic%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fstatic%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fstatic%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-with-fallback/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-with-fallback%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-client-search-without-fallback/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-client-search-without-fallback%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-with-fallback/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-with-fallback%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-cookies-without-fallback/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-cookies-without-fallback%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-random-with-fallback/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-random-with-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-random-with-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-random-with-fallback%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-random-without-fallback/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-random-without-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-random-without-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-random-without-fallback%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-with-fallback/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-with-fallback%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/sync-server-search-without-fallback/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Fsync-server-search-without-fallback%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "b7b126558c3176dbdb8c98c657488e268eda8fb6",
            "filename": "test/e2e/app-dir/dynamic-io-request-apis/dynamic-io-request-apis.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 12,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Fdynamic-io-request-apis.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Fdynamic-io-request-apis.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Fdynamic-io-request-apis.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n const stackStart = /\\s+at /\n \n function createExpectError(cliOutput: string) {\n@@ -62,11 +60,9 @@ describe(`Request Promises`, () => {\n       }\n       const expectError = createExpectError(next.cliOutput)\n \n-      if (WITH_PPR) {\n-        expectError(\n-          'Error: During prerendering, `params` rejects when the prerender is complete'\n-        )\n-      }\n+      expectError(\n+        'Error: During prerendering, `params` rejects when the prerender is complete'\n+      )\n       expectError(\n         'Error: During prerendering, `searchParams` rejects when the prerender is complete'\n       )\n@@ -104,11 +100,9 @@ describe(`Request Promises`, () => {\n       }\n       const expectError = createExpectError(next.cliOutput)\n \n-      if (WITH_PPR) {\n-        expectError(\n-          'Error: During prerendering, `params` rejects when the prerender is complete'\n-        )\n-      }\n+      expectError(\n+        'Error: During prerendering, `params` rejects when the prerender is complete'\n+      )\n       expectError(\n         'Error: During prerendering, `searchParams` rejects when the prerender is complete'\n       )"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-request-apis/fixtures/reject-hanging-promises-dynamic/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Ffixtures%2Freject-hanging-promises-dynamic%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "c790206c375e304c42ddf31b4599c2d52957ac83",
            "filename": "test/e2e/app-dir/dynamic-io-request-apis/fixtures/reject-hanging-promises-static/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-request-apis%2Ffixtures%2Freject-hanging-promises-static%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n     serverMinification: true,\n   },"
        },
        {
            "sha": "fa2a29a7860dae6274726d7765045fdedd2e73ac",
            "filename": "test/e2e/app-dir/dynamic-io/app/node-crypto/random-int/up-to/uncached/page.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fnode-crypto%2Frandom-int%2Fup-to%2Funcached%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fnode-crypto%2Frandom-int%2Fup-to%2Funcached%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fapp%2Fnode-crypto%2Frandom-int%2Fup-to%2Funcached%2Fpage.tsx?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -5,7 +5,11 @@ import { SentinelValue } from '../../../../getSentinelValue'\n export default async function Page() {\n   await new Promise((r) => process.nextTick(r))\n   const first = crypto.randomInt(128)\n-  const second = crypto.randomInt(128)\n+  let second = crypto.randomInt(128)\n+  while (first === second) {\n+    // Ensure that the second value is different from the first\n+    second = crypto.randomInt(128)\n+  }\n   return (\n     <div>\n       <dl>"
        },
        {
            "sha": "20270c4c361b0fa6b495e86e99f50ce0b2ab9f32",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.connection.test.ts",
            "status": "modified",
            "additions": 24,
            "deletions": 43,
            "changes": 67,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.connection.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.connection.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.connection.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n     files: __dirname,\n@@ -12,46 +10,29 @@ describe('dynamic-io', () => {\n     return\n   }\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that use connection', async () => {\n-      let $ = await next.render$('/connection/static-behavior/boundary', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#foo').text()).toBe('foo')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#foo').text()).toBe('foo')\n-      }\n-    })\n-  } else {\n-    it('should produce dynamic pages when using connection', async () => {\n-      let $ = await next.render$('/connection/static-behavior/boundary', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#foo').text()).toBe('foo')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#foo').text()).toBe('foo')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use connection', async () => {\n+    let $ = await next.render$('/connection/static-behavior/boundary', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#foo').text()).toBe('foo')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#foo').text()).toBe('foo')\n+    }\n+  })\n \n-  if (WITH_PPR) {\n-    it('should be able to pass connection as a promise to another component and trigger an intermediate Suspense boundary', async () => {\n-      const $ = await next.render$('/connection/static-behavior/pass-deeply')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#fallback').length).toBe(0)\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#fallback').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n+  it('should be able to pass connection as a promise to another component and trigger an intermediate Suspense boundary', async () => {\n+    const $ = await next.render$('/connection/static-behavior/pass-deeply')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#fallback').length).toBe(0)\n+      expect($('#page').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#fallback').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n })"
        },
        {
            "sha": "dde36ca12092d41c020814f7221131c3475a6a88",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.cookies.test.ts",
            "status": "modified",
            "additions": 37,
            "deletions": 67,
            "changes": 104,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.cookies.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.cookies.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.cookies.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n     files: __dirname,\n@@ -12,72 +10,44 @@ describe('dynamic-io', () => {\n     return\n   }\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that use async cookies', async () => {\n-      let $ = await next.render$('/cookies/static-behavior/async', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      }\n-    })\n-\n-    it('should partially prerender pages that use sync cookies', async () => {\n-      let $ = await next.render$('/cookies/static-behavior/sync', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      }\n-    })\n-  } else {\n-    it('should produce dynamic pages when using async or sync cookies', async () => {\n-      let $ = await next.render$('/cookies/static-behavior/sync', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      }\n-\n-      $ = await next.render$('/cookies/static-behavior/async', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use async cookies', async () => {\n+    let $ = await next.render$('/cookies/static-behavior/async', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#x-sentinel').text()).toBe('hello')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#x-sentinel').text()).toBe('hello')\n+    }\n+  })\n \n-  if (WITH_PPR) {\n-    it('should be able to pass cookies as a promise to another component and trigger an intermediate Suspense boundary', async () => {\n-      const $ = await next.render$('/cookies/static-behavior/pass-deeply')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#fallback').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#fallback').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use sync cookies', async () => {\n+    let $ = await next.render$('/cookies/static-behavior/sync', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#x-sentinel').text()).toBe('hello')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#x-sentinel').text()).toBe('hello')\n+    }\n+  })\n+\n+  it('should be able to pass cookies as a promise to another component and trigger an intermediate Suspense boundary', async () => {\n+    const $ = await next.render$('/cookies/static-behavior/pass-deeply')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#fallback').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#fallback').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n   it('should be able to access cookie properties asynchronously', async () => {\n     let $ = await next.render$('/cookies/exercise/async', {})"
        },
        {
            "sha": "80df46dfe8af6ec704ad4bd4b4ff0e54c8929320",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.date.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 17,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.date.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.date.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.date.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,6 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n-\n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n+import expect from 'expect'\n \n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n@@ -36,12 +35,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#value').text()).toMatch(/^\\d+$/)\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toMatch(/^\\d+$/)\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#value').text()).toMatch(/^\\d+$/)\n     }\n@@ -66,12 +61,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#value').text()).toContain('GMT')\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toContain('GMT')\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#value').text()).toContain('GMT')\n     }\n@@ -96,12 +87,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#value').text()).toContain('GMT')\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#value').text()).toContain('GMT')\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#value').text()).toContain('GMT')\n     }"
        },
        {
            "sha": "5ea305fbe0e8743bea36aeba32b46a4a6bb83464",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.headers.test.ts",
            "status": "modified",
            "additions": 37,
            "deletions": 67,
            "changes": 104,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.headers.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.headers.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.headers.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n     files: __dirname,\n@@ -12,72 +10,44 @@ describe('dynamic-io', () => {\n     return\n   }\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that use async headers', async () => {\n-      let $ = await next.render$('/headers/static-behavior/async', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      }\n-    })\n-\n-    it('should partially prerender pages that use sync headers', async () => {\n-      let $ = await next.render$('/headers/static-behavior/sync', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      }\n-    })\n-  } else {\n-    it('should produce dynamic pages when using async or sync headers', async () => {\n-      let $ = await next.render$('/headers/static-behavior/sync', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      }\n-\n-      $ = await next.render$('/headers/static-behavior/async', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#x-sentinel').text()).toBe('hello')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use async headers', async () => {\n+    let $ = await next.render$('/headers/static-behavior/async', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#x-sentinel').text()).toBe('hello')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#x-sentinel').text()).toBe('hello')\n+    }\n+  })\n \n-  if (WITH_PPR) {\n-    it('should be able to pass headers as a promise to another component and trigger an intermediate Suspense boundary', async () => {\n-      const $ = await next.render$('/headers/static-behavior/pass-deeply')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#fallback').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#fallback').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use sync headers', async () => {\n+    let $ = await next.render$('/headers/static-behavior/sync', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#x-sentinel').text()).toBe('hello')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#x-sentinel').text()).toBe('hello')\n+    }\n+  })\n+\n+  it('should be able to pass headers as a promise to another component and trigger an intermediate Suspense boundary', async () => {\n+    const $ = await next.render$('/headers/static-behavior/pass-deeply')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#fallback').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#fallback').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n   it('should be able to access headers properties asynchronously', async () => {\n     let $ = await next.render$('/headers/exercise/async', {})"
        },
        {
            "sha": "27fc2a1b90b858cb29c0bb5a2796b7d2b0e927ee",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.node-crypto.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 47,
            "changes": 56,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.node-crypto.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.node-crypto.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.node-crypto.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n     files: __dirname,\n@@ -36,12 +34,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -66,12 +60,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -96,12 +86,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -126,12 +112,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -156,12 +138,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -186,12 +164,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -216,12 +190,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -249,12 +219,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -279,12 +245,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }"
        },
        {
            "sha": "8d9cf142e3321293d53a9ed1b0b79a494d51713f",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.params.test.ts",
            "status": "modified",
            "additions": 848,
            "deletions": 1881,
            "changes": 2729,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.params.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.params.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.params.test.ts?ref=53933954e37887ed29777e95101f3e828557157a"
        },
        {
            "sha": "19e856d9e7783b7ee90fe8cff256a247a16b4751",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.random.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.random.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.random.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.random.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n     files: __dirname,\n@@ -33,11 +31,8 @@ describe('dynamic-io', () => {\n     if (isNextDev) {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n     }\n   })"
        },
        {
            "sha": "42ce81d1ce6a45a16349b1f130c66bb0beb12e1f",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.search.test.ts",
            "status": "modified",
            "additions": 199,
            "deletions": 389,
            "changes": 588,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.search.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.search.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.search.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n     files: __dirname,\n@@ -26,399 +24,211 @@ describe('dynamic-io', () => {\n     return warnings\n   }\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that await searchParams in a server component', async () => {\n-      let $ = await next.render$('/search/async/server/await?sentinel=hello')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).toContain('inner loading...')\n-        expect($('main').text()).not.toContain('outer loading...')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-\n-    it('should partially prerender pages that `use` searchParams in a server component', async () => {\n-      let $ = await next.render$('/search/async/server/use?sentinel=hello')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).toContain('inner loading...')\n-        expect($('main').text()).not.toContain('outer loading...')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-\n-    it('should partially prerender pages that `use` searchParams in a client component', async () => {\n-      let $ = await next.render$('/search/async/client/use?sentinel=hello')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).toContain('inner loading...')\n-        expect($('main').text()).not.toContain('outer loading...')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that await searchParams in a server component', async () => {\n-      let $ = await next.render$('/search/async/server/await?sentinel=hello')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-\n-    it('should not prerender pages that `use` searchParams in a server component', async () => {\n-      let $ = await next.render$('/search/async/server/use?sentinel=hello')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-\n-    it('should not prerender pages that `use` searchParams in a client component', async () => {\n-      let $ = await next.render$('/search/async/client/use?sentinel=hello')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n-\n-  if (WITH_PPR) {\n-    it('should partially prerender pages that access a searchParam property synchronously in a server component', async () => {\n-      let $ = await next.render$('/search/sync/server/access?sentinel=hello')\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining('`searchParams.sentinel`'),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).not.toContain('inner loading...')\n-        // This test case aborts synchronously and the later component render\n-        // triggers the outer boundary\n-        expect($('main').text()).toContain('outer loading...')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-\n-    it('should partially prerender pages that access a searchParam property synchronously in a client component', async () => {\n-      let $ = await next.render$('/search/sync/client/access?sentinel=hello')\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining('`searchParams.sentinel`'),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).toContain('inner loading...')\n-        expect($('main').text()).not.toContain('outer loading...')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-\n-    it('should partially prerender pages that checks for the existence of a searchParam property synchronously in a server component', async () => {\n-      let $ = await next.render$('/search/sync/server/has?sentinel=hello')\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#has-sentinel').text()).toBe('true')\n-        expect($('#has-foo').text()).toBe('false')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining(\n-            '`Reflect.has(searchParams, \"sentinel\")`, `\"sentinel\" in searchParams`, or similar'\n-          ),\n-          expect.stringContaining(\n-            '`Reflect.has(searchParams, \"foo\")`, `\"foo\" in searchParams`, or similar'\n-          ),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).not.toContain('inner loading...')\n-        // This test case aborts synchronously and the later component render\n-        // triggers the outer boundary\n-        expect($('main').text()).toContain('outer loading...')\n-        expect($('#has-sentinel').text()).toBe('true')\n-        expect($('#has-foo').text()).toBe('false')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n+  it('should partially prerender pages that await searchParams in a server component', async () => {\n+    let $ = await next.render$('/search/async/server/await?sentinel=hello')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).toContain('inner loading...')\n+      expect($('main').text()).not.toContain('outer loading...')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n-    it('should partially prerender pages that checks for the existence of a searchParam property synchronously in a client component', async () => {\n-      let $ = await next.render$('/search/sync/client/has?sentinel=hello')\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#has-sentinel').text()).toBe('true')\n-        expect($('#has-foo').text()).toBe('false')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining(\n-            '`Reflect.has(searchParams, \"sentinel\")`, `\"sentinel\" in searchParams`, or similar'\n-          ),\n-          expect.stringContaining(\n-            '`Reflect.has(searchParams, \"foo\")`, `\"foo\" in searchParams`, or similar'\n-          ),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).toContain('inner loading...')\n-        expect($('main').text()).not.toContain('outer loading...')\n-        expect($('#has-sentinel').text()).toBe('true')\n-        expect($('#has-foo').text()).toBe('false')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n+  it('should partially prerender pages that `use` searchParams in a server component', async () => {\n+    let $ = await next.render$('/search/async/server/use?sentinel=hello')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).toContain('inner loading...')\n+      expect($('main').text()).not.toContain('outer loading...')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n-    it('should partially prerender pages that spreads ...searchParam synchronously in a server component', async () => {\n-      let $ = await next.render$(\n-        '/search/sync/server/spread?sentinel=hello&foo=foo&then=bar&value=baz'\n-      )\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('[data-value]').length).toBe(3)\n-        expect($('#value-sentinel').text()).toBe('hello')\n-        expect($('#value-foo').text()).toBe('foo')\n-        expect($('#value-value').text()).toBe('baz')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining(\n-            'conflict with builtin or well-known property names: `then`'\n-          ),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).not.toContain('inner loading...')\n-        // This test case aborts synchronously and the later component render\n-        // triggers the outer boundary\n-        expect($('main').text()).toContain('outer loading...')\n-        expect($('[data-value]').length).toBe(3)\n-        expect($('#value-sentinel').text()).toBe('hello')\n-        expect($('#value-foo').text()).toBe('foo')\n-        expect($('#value-value').text()).toBe('baz')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n+  it('should partially prerender pages that `use` searchParams in a client component', async () => {\n+    let $ = await next.render$('/search/async/client/use?sentinel=hello')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).toContain('inner loading...')\n+      expect($('main').text()).not.toContain('outer loading...')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n-    it('should partially prerender pages that spreads ...searchParam synchronously in a client component', async () => {\n-      let $ = await next.render$(\n-        '/search/sync/client/spread?sentinel=hello&foo=foo&then=bar&value=baz'\n-      )\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('[data-value]').length).toBe(3)\n-        expect($('#value-sentinel').text()).toBe('hello')\n-        expect($('#value-foo').text()).toBe('foo')\n-        expect($('#value-value').text()).toBe('baz')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining(\n-            'conflict with builtin or well-known property names: `then`'\n-          ),\n-          expect.stringContaining('`searchParams.sentinel`'),\n-          expect.stringContaining('`searchParams.foo`'),\n-          expect.stringContaining('`searchParams.value`'),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('main').text()).toContain('inner loading...')\n-        expect($('main').text()).not.toContain('outer loading...')\n-        expect($('[data-value]').length).toBe(3)\n-        expect($('#value-sentinel').text()).toBe('hello')\n-        expect($('#value-foo').text()).toBe('foo')\n-        expect($('#value-value').text()).toBe('baz')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-  } else {\n-    it('should not prerender a page that accesses a searchParam property synchronously in a server component', async () => {\n-      let $ = await next.render$('/search/sync/server/access?sentinel=hello')\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining('`searchParams.sentinel`'),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n+  it('should partially prerender pages that access a searchParam property synchronously in a server component', async () => {\n+    let $ = await next.render$('/search/sync/server/access?sentinel=hello')\n+    let searchWarnings = getLines('Route \"/search')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect(searchWarnings).toEqual([\n+        expect.stringContaining('`searchParams.sentinel`'),\n+      ])\n+    } else {\n+      expect(searchWarnings).toHaveLength(0)\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).not.toContain('inner loading...')\n+      // This test case aborts synchronously and the later component render\n+      // triggers the outer boundary\n+      expect($('main').text()).toContain('outer loading...')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n-    it('should not prerender a page that accesses a searchParam property synchronously in a client component', async () => {\n-      let $ = await next.render$('/search/sync/client/access?sentinel=hello')\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining('`searchParams.sentinel`'),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n+  it('should partially prerender pages that access a searchParam property synchronously in a client component', async () => {\n+    let $ = await next.render$('/search/sync/client/access?sentinel=hello')\n+    let searchWarnings = getLines('Route \"/search')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect(searchWarnings).toEqual([\n+        expect.stringContaining('`searchParams.sentinel`'),\n+      ])\n+    } else {\n+      expect(searchWarnings).toHaveLength(0)\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).toContain('inner loading...')\n+      expect($('main').text()).not.toContain('outer loading...')\n+      expect($('#value').text()).toBe('hello')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n-    it('should not prerender a page that checks for the existence of a searchParam property synchronously in a server component', async () => {\n-      let $ = await next.render$('/search/sync/server/has?sentinel=hello')\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#has-sentinel').text()).toBe('true')\n-        expect($('#has-foo').text()).toBe('false')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining(\n-            '`Reflect.has(searchParams, \"sentinel\")`, `\"sentinel\" in searchParams`, or similar'\n-          ),\n-          expect.stringContaining(\n-            '`Reflect.has(searchParams, \"foo\")`, `\"foo\" in searchParams`, or similar'\n-          ),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#has-sentinel').text()).toBe('true')\n-        expect($('#has-foo').text()).toBe('false')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n+  it('should partially prerender pages that checks for the existence of a searchParam property synchronously in a server component', async () => {\n+    let $ = await next.render$('/search/sync/server/has?sentinel=hello')\n+    let searchWarnings = getLines('Route \"/search')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#has-sentinel').text()).toBe('true')\n+      expect($('#has-foo').text()).toBe('false')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect(searchWarnings).toEqual([\n+        expect.stringContaining(\n+          '`Reflect.has(searchParams, \"sentinel\")`, `\"sentinel\" in searchParams`, or similar'\n+        ),\n+        expect.stringContaining(\n+          '`Reflect.has(searchParams, \"foo\")`, `\"foo\" in searchParams`, or similar'\n+        ),\n+      ])\n+    } else {\n+      expect(searchWarnings).toHaveLength(0)\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).not.toContain('inner loading...')\n+      // This test case aborts synchronously and the later component render\n+      // triggers the outer boundary\n+      expect($('main').text()).toContain('outer loading...')\n+      expect($('#has-sentinel').text()).toBe('true')\n+      expect($('#has-foo').text()).toBe('false')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n-    it('should not prerender a page that checks for the existence of a searchParam property synchronously in a client component', async () => {\n-      let $ = await next.render$('/search/sync/client/has?sentinel=hello')\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#has-sentinel').text()).toBe('true')\n-        expect($('#has-foo').text()).toBe('false')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining(\n-            '`Reflect.has(searchParams, \"sentinel\")`, `\"sentinel\" in searchParams`, or similar'\n-          ),\n-          expect.stringContaining(\n-            '`Reflect.has(searchParams, \"foo\")`, `\"foo\" in searchParams`, or similar'\n-          ),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#has-sentinel').text()).toBe('true')\n-        expect($('#has-foo').text()).toBe('false')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n+  it('should partially prerender pages that checks for the existence of a searchParam property synchronously in a client component', async () => {\n+    let $ = await next.render$('/search/sync/client/has?sentinel=hello')\n+    let searchWarnings = getLines('Route \"/search')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#has-sentinel').text()).toBe('true')\n+      expect($('#has-foo').text()).toBe('false')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect(searchWarnings).toEqual([\n+        expect.stringContaining(\n+          '`Reflect.has(searchParams, \"sentinel\")`, `\"sentinel\" in searchParams`, or similar'\n+        ),\n+        expect.stringContaining(\n+          '`Reflect.has(searchParams, \"foo\")`, `\"foo\" in searchParams`, or similar'\n+        ),\n+      ])\n+    } else {\n+      expect(searchWarnings).toHaveLength(0)\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).toContain('inner loading...')\n+      expect($('main').text()).not.toContain('outer loading...')\n+      expect($('#has-sentinel').text()).toBe('true')\n+      expect($('#has-foo').text()).toBe('false')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n-    it('should not prerender a page that spreads ...searchParam synchronously in a server component', async () => {\n-      let $ = await next.render$(\n-        '/search/sync/server/spread?sentinel=hello&foo=foo&then=bar&value=baz'\n-      )\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('[data-value]').length).toBe(3)\n-        expect($('#value-sentinel').text()).toBe('hello')\n-        expect($('#value-foo').text()).toBe('foo')\n-        expect($('#value-value').text()).toBe('baz')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining(\n-            'conflict with builtin or well-known property names: `then`'\n-          ),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('[data-value]').length).toBe(3)\n-        expect($('#value-sentinel').text()).toBe('hello')\n-        expect($('#value-foo').text()).toBe('foo')\n-        expect($('#value-value').text()).toBe('baz')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n+  it('should partially prerender pages that spreads ...searchParam synchronously in a server component', async () => {\n+    let $ = await next.render$(\n+      '/search/sync/server/spread?sentinel=hello&foo=foo&then=bar&value=baz'\n+    )\n+    let searchWarnings = getLines('Route \"/search')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('[data-value]').length).toBe(3)\n+      expect($('#value-sentinel').text()).toBe('hello')\n+      expect($('#value-foo').text()).toBe('foo')\n+      expect($('#value-value').text()).toBe('baz')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect(searchWarnings).toEqual([\n+        expect.stringContaining(\n+          'conflict with builtin or well-known property names: `then`'\n+        ),\n+      ])\n+    } else {\n+      expect(searchWarnings).toHaveLength(0)\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).not.toContain('inner loading...')\n+      // This test case aborts synchronously and the later component render\n+      // triggers the outer boundary\n+      expect($('main').text()).toContain('outer loading...')\n+      expect($('[data-value]').length).toBe(3)\n+      expect($('#value-sentinel').text()).toBe('hello')\n+      expect($('#value-foo').text()).toBe('foo')\n+      expect($('#value-value').text()).toBe('baz')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n \n-    it('should not prerender a page that spreads ...searchParam synchronously in a client component', async () => {\n-      let $ = await next.render$(\n-        '/search/sync/client/spread?sentinel=hello&foo=foo&then=bar&value=baz'\n-      )\n-      let searchWarnings = getLines('Route \"/search')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('[data-value]').length).toBe(3)\n-        expect($('#value-sentinel').text()).toBe('hello')\n-        expect($('#value-foo').text()).toBe('foo')\n-        expect($('#value-value').text()).toBe('baz')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect(searchWarnings).toEqual([\n-          expect.stringContaining(\n-            'conflict with builtin or well-known property names: `then`'\n-          ),\n-          expect.stringContaining('`searchParams.sentinel`'),\n-          expect.stringContaining('`searchParams.foo`'),\n-          expect.stringContaining('`searchParams.value`'),\n-        ])\n-      } else {\n-        expect(searchWarnings).toHaveLength(0)\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('[data-value]').length).toBe(3)\n-        expect($('#value-sentinel').text()).toBe('hello')\n-        expect($('#value-foo').text()).toBe('foo')\n-        expect($('#value-value').text()).toBe('baz')\n-        expect($('#page').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that spreads ...searchParam synchronously in a client component', async () => {\n+    let $ = await next.render$(\n+      '/search/sync/client/spread?sentinel=hello&foo=foo&then=bar&value=baz'\n+    )\n+    let searchWarnings = getLines('Route \"/search')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('[data-value]').length).toBe(3)\n+      expect($('#value-sentinel').text()).toBe('hello')\n+      expect($('#value-foo').text()).toBe('foo')\n+      expect($('#value-value').text()).toBe('baz')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect(searchWarnings).toEqual([\n+        expect.stringContaining(\n+          'conflict with builtin or well-known property names: `then`'\n+        ),\n+        expect.stringContaining('`searchParams.sentinel`'),\n+        expect.stringContaining('`searchParams.foo`'),\n+        expect.stringContaining('`searchParams.value`'),\n+      ])\n+    } else {\n+      expect(searchWarnings).toHaveLength(0)\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('main').text()).toContain('inner loading...')\n+      expect($('main').text()).not.toContain('outer loading...')\n+      expect($('[data-value]').length).toBe(3)\n+      expect($('#value-sentinel').text()).toBe('hello')\n+      expect($('#value-foo').text()).toBe('foo')\n+      expect($('#value-value').text()).toBe('baz')\n+      expect($('#page').text()).toBe('at runtime')\n+    }\n+  })\n })"
        },
        {
            "sha": "04bd962f6559cac5d53827e8b391875febf7414e",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.server-action.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 10,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.server-action.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.server-action.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.server-action.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -25,18 +25,13 @@ describe('dynamic-io', () => {\n       expect(await browser.elementByCss('p').text()).toBe('result')\n     })\n \n-    const isExperimentalReact = Boolean(process.env.__NEXT_EXPERIMENTAL_PPR)\n-    if (isExperimentalReact && isNextDev) {\n-      // TODO(react-time-info): Remove this branch for experimental React in dev mode when the\n-      // issue is resolved where the inclusion of server timings in the RSC\n-      // payload makes the serialized bound args not suitable to be used as a\n-      // cache key.\n+    if (isNextDev) {\n+      // TODO(react-time-info): For experimental React in dev mode, the\n+      // inclusion of server timings in the RSC payload makes the serialized\n+      // bound args not suitable to be used as a cache key. When this is fixed\n+      // we expect this error not to be logged anymore.\n       expect(next.cliOutput).toMatch('Error: Route \"/server-action-inline\"')\n-    } else {\n-      expect(next.cliOutput).not.toMatch('Error: Route \"/server-action-inline\"')\n-    }\n \n-    if (isNextDev) {\n       await assertNoRedbox(browser)\n     }\n   })"
        },
        {
            "sha": "9b1035d3c3f7f4d30c707661f2faf81a801a0155",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.test.ts",
            "status": "modified",
            "additions": 120,
            "deletions": 334,
            "changes": 454,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,9 +1,5 @@\n /* eslint-disable jest/no-standalone-expect */\n import { nextTestSetup } from 'e2e-utils'\n-import { retry } from 'next-test-utils'\n-import { Playwright } from 'next-webdriver'\n-\n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n \n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n@@ -15,68 +11,6 @@ describe('dynamic-io', () => {\n     return\n   }\n \n-  if (isNextDev && !WITH_PPR) {\n-    async function hasStaticIndicator(browser: Playwright) {\n-      await browser.elementByCss('[data-nextjs-dev-tools-button]').click()\n-\n-      return await browser.eval(\n-        () =>\n-          document\n-            .querySelector('nextjs-portal')\n-            .shadowRoot.querySelector('[data-nextjs-route-type]')\n-            .getAttribute('data-nextjs-route-type') === 'static'\n-      )\n-    }\n-\n-    it('should not have static indicator on dynamic method route', async () => {\n-      const browser = await next.browser('/cases/dynamic_api_cookies')\n-\n-      await retry(async () => {\n-        expect(await browser.eval('!!window.next.router ? \"yes\": \"no\"')).toBe(\n-          'yes'\n-        )\n-      })\n-\n-      expect(await hasStaticIndicator(browser)).toBe(false)\n-    })\n-\n-    it('should not have static indicator on dynamic IO route', async () => {\n-      const browser = await next.browser('/cases/fetch_mixed')\n-\n-      await retry(async () => {\n-        expect(await browser.eval('!!window.next.router ? \"yes\": \"no\"')).toBe(\n-          'yes'\n-        )\n-      })\n-\n-      expect(await hasStaticIndicator(browser)).toBe(false)\n-    })\n-\n-    it('should have static indicator on static route', async () => {\n-      const browser = await next.browser('/cases/static')\n-\n-      await retry(async () => {\n-        expect(await browser.eval('!!window.next.router ? \"yes\": \"no\"')).toBe(\n-          'yes'\n-        )\n-      })\n-\n-      expect(await hasStaticIndicator(browser)).toBe(true)\n-    })\n-\n-    it('should have static indicator on not-found route', async () => {\n-      const browser = await next.browser('/cases/not-found')\n-\n-      await retry(async () => {\n-        expect(await browser.eval('!!window.next.router ? \"yes\": \"no\"')).toBe(\n-          'yes'\n-        )\n-\n-        expect(await hasStaticIndicator(browser)).toBe(true)\n-      })\n-    })\n-  }\n-\n   it('should not have route specific errors', async () => {\n     expect(next.cliOutput).not.toMatch('Error: Route \"/')\n     expect(next.cliOutput).not.toMatch('Error occurred prerendering page')\n@@ -150,37 +84,20 @@ describe('dynamic-io', () => {\n     }\n   })\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that take longer than a task to render', async () => {\n-      let $ = await next.render$('/cases/task', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        // The inner slot is computed during the prerender but is hidden\n-        // it gets revealed when the resume happens\n-        expect($('#inner').text()).toBe('at buildtime')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that take longer than a single task to render', async () => {\n-      let $ = await next.render$('/cases/task', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        // The inner slot is computed during the prerender but is hidden\n-        // it gets revealed when the resume happens\n-        expect($('#inner').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that take longer than a task to render', async () => {\n+    let $ = await next.render$('/cases/task', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#inner').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      // The inner slot is computed during the prerender but is hidden\n+      // it gets revealed when the resume happens\n+      expect($('#inner').text()).toBe('at buildtime')\n+    }\n+  })\n \n   it('should prerender pages that only use cached fetches', async () => {\n     const $ = await next.render$('/cases/fetch_cached', {})\n@@ -193,33 +110,18 @@ describe('dynamic-io', () => {\n     }\n   })\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that use at least one fetch without cache', async () => {\n-      let $ = await next.render$('/cases/fetch_mixed', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#inner').text()).toBe('at buildtime')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that use at least one fetch without cache', async () => {\n-      let $ = await next.render$('/cases/fetch_mixed', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use at least one fetch without cache', async () => {\n+    let $ = await next.render$('/cases/fetch_mixed', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#inner').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#inner').text()).toBe('at buildtime')\n+    }\n+  })\n \n   it('should prerender pages that only use cached (unstable_cache) IO', async () => {\n     const $ = await next.render$('/cases/io_cached', {})\n@@ -254,125 +156,61 @@ describe('dynamic-io', () => {\n     }\n   })\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that do any uncached IO', async () => {\n-      let $ = await next.render$('/cases/io_mixed', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#inner').text()).toBe('at buildtime')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that do any uncached IO', async () => {\n-      let $ = await next.render$('/cases/io_mixed', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that do any uncached IO', async () => {\n+    let $ = await next.render$('/cases/io_mixed', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#inner').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#inner').text()).toBe('at buildtime')\n+    }\n+  })\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that do any uncached IO (use cache)', async () => {\n-      let $ = await next.render$('/cases/use_cache_mixed', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#inner').text()).toBe('at buildtime')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that do any uncached IO (use cache)', async () => {\n-      let $ = await next.render$('/cases/use_cache_mixed', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that do any uncached IO (use cache)', async () => {\n+    let $ = await next.render$('/cases/use_cache_mixed', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#inner').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#inner').text()).toBe('at buildtime')\n+    }\n+  })\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that use `cookies()`', async () => {\n-      let $ = await next.render$('/cases/dynamic_api_cookies', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#inner').text()).toBe('at buildtime')\n-        expect($('#value').text()).toBe('hello')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that use `cookies()`', async () => {\n-      let $ = await next.render$('/cases/dynamic_api_cookies', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use `cookies()`', async () => {\n+    let $ = await next.render$('/cases/dynamic_api_cookies', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#inner').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('hello')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#inner').text()).toBe('at buildtime')\n+      expect($('#value').text()).toBe('hello')\n+    }\n+  })\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that use `headers()`', async () => {\n-      let $ = await next.render$('/cases/dynamic_api_headers')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#inner').text()).toBe('at buildtime')\n-        expect($('#value').text()).toBe('hello')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that use `headers()`', async () => {\n-      let $ = await next.render$('/cases/dynamic_api_headers')\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('hello')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use `headers()`', async () => {\n+    let $ = await next.render$('/cases/dynamic_api_headers')\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#inner').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('hello')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#inner').text()).toBe('at buildtime')\n+      expect($('#value').text()).toBe('hello')\n+    }\n+  })\n \n   it('should fully prerender pages that use `unstable_noStore()`', async () => {\n     let $ = await next.render$('/cases/dynamic_api_no_store', {})\n@@ -387,83 +225,43 @@ describe('dynamic-io', () => {\n     }\n   })\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that use `searchParams` in Server Components', async () => {\n-      let $ = await next.render$(\n-        '/cases/dynamic_api_search_params_server?sentinel=my+sentinel',\n-        {}\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('my sentinel')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        expect($('#inner').text()).toBe('at buildtime')\n-        expect($('#value').text()).toBe('my sentinel')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that use `searchParams` in Server Components', async () => {\n-      let $ = await next.render$(\n-        '/cases/dynamic_api_search_params_server?sentinel=my+sentinel',\n-        {}\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('my sentinel')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('my sentinel')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use `searchParams` in Server Components', async () => {\n+    let $ = await next.render$(\n+      '/cases/dynamic_api_search_params_server?sentinel=my+sentinel',\n+      {}\n+    )\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#inner').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('my sentinel')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      expect($('#inner').text()).toBe('at buildtime')\n+      expect($('#value').text()).toBe('my sentinel')\n+    }\n+  })\n \n-  if (WITH_PPR) {\n-    it('should partially prerender pages that use `searchParams` in Client Components', async () => {\n-      let $ = await next.render$(\n-        '/cases/dynamic_api_search_params_client?sentinel=my+sentinel',\n-        {}\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('my sentinel')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-        // The second component renders before the first one aborts so we end up\n-        // capturing the static value during buildtime\n-        expect($('#inner').text()).toBe('at buildtime')\n-        expect($('#value').text()).toBe('my sentinel')\n-      }\n-    })\n-  } else {\n-    it('should not prerender pages that use `searchParams` in Client Components', async () => {\n-      let $ = await next.render$(\n-        '/cases/dynamic_api_search_params_client?sentinel=my+sentinel',\n-        {}\n-      )\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('my sentinel')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-        expect($('#inner').text()).toBe('at runtime')\n-        expect($('#value').text()).toBe('my sentinel')\n-      }\n-    })\n-  }\n+  it('should partially prerender pages that use `searchParams` in Client Components', async () => {\n+    let $ = await next.render$(\n+      '/cases/dynamic_api_search_params_client?sentinel=my+sentinel',\n+      {}\n+    )\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+      expect($('#inner').text()).toBe('at runtime')\n+      expect($('#value').text()).toBe('my sentinel')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n+      // The second component renders before the first one aborts so we end up\n+      // capturing the static value during buildtime\n+      expect($('#inner').text()).toBe('at buildtime')\n+      expect($('#value').text()).toBe('my sentinel')\n+    }\n+  })\n \n   it('can prerender pages with parallel routes that are static', async () => {\n     const $ = await next.render$('/cases/parallel/static', {})\n@@ -501,15 +299,9 @@ describe('dynamic-io', () => {\n       expect($('#page-slot').text()).toBe('at runtime')\n       expect($('#page-children').text()).toBe('at runtime')\n     } else {\n-      if (WITH_PPR) {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page-slot').text()).toBe('at runtime')\n-        expect($('#page-children').text()).toBe('at buildtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page-slot').text()).toBe('at runtime')\n-        expect($('#page-children').text()).toBe('at runtime')\n-      }\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page-slot').text()).toBe('at runtime')\n+      expect($('#page-children').text()).toBe('at buildtime')\n     }\n   })\n \n@@ -533,15 +325,9 @@ describe('dynamic-io', () => {\n       expect($('#page-slot').text()).toBe('at runtime')\n       expect($('#page-children').text()).toBe('at runtime')\n     } else {\n-      if (WITH_PPR) {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page-slot').text()).toBe('at runtime')\n-        expect($('#page-children').text()).toBe('at buildtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page-slot').text()).toBe('at runtime')\n-        expect($('#page-children').text()).toBe('at runtime')\n-      }\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page-slot').text()).toBe('at runtime')\n+      expect($('#page-children').text()).toBe('at buildtime')\n     }\n   })\n })"
        },
        {
            "sha": "67459e87e2315511a2308fe7b1da63c974ca9e8c",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.web-crypto.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.web-crypto.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.web-crypto.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.web-crypto.test.ts?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -1,7 +1,5 @@\n import { nextTestSetup } from 'e2e-utils'\n \n-const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n-\n describe('dynamic-io', () => {\n   const { next, isNextDev, skipped } = nextTestSetup({\n     files: __dirname,\n@@ -36,12 +34,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }\n@@ -66,12 +60,8 @@ describe('dynamic-io', () => {\n       expect($('#layout').text()).toBe('at runtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n-    } else if (WITH_PPR) {\n-      expect($('#layout').text()).toBe('at buildtime')\n-      expect($('#page').text()).toBe('at runtime')\n-      expect($('#first').text()).not.toEqual($('#second').text())\n     } else {\n-      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#layout').text()).toBe('at buildtime')\n       expect($('#page').text()).toBe('at runtime')\n       expect($('#first').text()).not.toEqual($('#second').text())\n     }"
        },
        {
            "sha": "16e8384b655b41d459538177fb044f20d21e4696",
            "filename": "test/e2e/app-dir/dynamic-io/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n   },\n }"
        },
        {
            "sha": "16e8384b655b41d459538177fb044f20d21e4696",
            "filename": "test/e2e/app-dir/node-extensions/fixtures/random/dynamic-io/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fdynamic-io%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fdynamic-io%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnode-extensions%2Ffixtures%2Frandom%2Fdynamic-io%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -3,7 +3,7 @@\n  */\n const nextConfig = {\n   experimental: {\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n     dynamicIO: true,\n   },\n }"
        },
        {
            "sha": "1e411141b94024eb3f5b3c5e2da3782709804c06",
            "filename": "test/e2e/app-dir/server-source-maps/fixtures/default/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fserver-source-maps%2Ffixtures%2Fdefault%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -4,6 +4,7 @@\n const nextConfig = {\n   experimental: {\n     cpus: 1,\n+    ppr: true,\n     dynamicIO: true,\n     serverSourceMaps: true,\n   },"
        },
        {
            "sha": "6bc18129e2daf2f192a1dacdc64c77272f620e22",
            "filename": "test/e2e/app-dir/use-cache-close-over-function/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-close-over-function%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -4,6 +4,7 @@\n const nextConfig = {\n   experimental: {\n     dynamicIO: true,\n+    ppr: true,\n     serverSourceMaps: true,\n   },\n }"
        },
        {
            "sha": "41cd9084f6b0435928f3dbfcec2b31840e455d74",
            "filename": "test/e2e/app-dir/use-cache-custom-handler/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-custom-handler%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -4,6 +4,7 @@\n const nextConfig = {\n   experimental: {\n     dynamicIO: true,\n+    ppr: true,\n     cacheHandlers: {\n       default: require.resolve('./handler.js'),\n       legacy: require.resolve('./legacy-handler.js'),"
        },
        {
            "sha": "64f02de79dfb7ab44ffcc47268f506869d632bc4",
            "filename": "test/e2e/app-dir/use-cache-hanging-inputs/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-hanging-inputs%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -5,7 +5,7 @@ const nextConfig = {\n   experimental: {\n     dynamicIO: true,\n     prerenderEarlyExit: false,\n-    ppr: process.env.__NEXT_EXPERIMENTAL_PPR === 'true',\n+    ppr: true,\n   },\n }\n "
        },
        {
            "sha": "b0b2ad8d2353113aff6d470986e1d9fdf7e55556",
            "filename": "test/e2e/app-dir/use-cache-metadata-route-handler/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-metadata-route-handler%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-metadata-route-handler%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-metadata-route-handler%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -4,6 +4,7 @@\n const nextConfig = {\n   experimental: {\n     dynamicIO: true,\n+    ppr: true,\n   },\n }\n "
        },
        {
            "sha": "b0b2ad8d2353113aff6d470986e1d9fdf7e55556",
            "filename": "test/e2e/app-dir/use-cache-route-handler-only/next.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-route-handler-only%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fe2e%2Fapp-dir%2Fuse-cache-route-handler-only%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fuse-cache-route-handler-only%2Fnext.config.js?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -4,6 +4,7 @@\n const nextConfig = {\n   experimental: {\n     dynamicIO: true,\n+    ppr: true,\n   },\n }\n "
        },
        {
            "sha": "69b57d258673d1a58034442cde344e6799beb4f1",
            "filename": "test/ppr-tests-manifest.json",
            "status": "modified",
            "additions": 18,
            "deletions": 10,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/53933954e37887ed29777e95101f3e828557157a/test%2Fppr-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/53933954e37887ed29777e95101f3e828557157a/test%2Fppr-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fppr-tests-manifest.json?ref=53933954e37887ed29777e95101f3e828557157a",
            "patch": "@@ -83,26 +83,34 @@\n       \"test/development/acceptance-app/**/*.test.{t,j}s{,x}\"\n     ],\n     \"exclude\": [\n-      \"test/integration/app-dir-export/**/*\",\n-      \"test/e2e/app-dir/next-font/**/*\",\n-      \"test/e2e/app-dir/ppr/**/*\",\n-      \"test/e2e/app-dir/ppr-*/**/*\",\n-      \"test/e2e/app-dir/app-prefetch*/**/*\",\n-      \"test/e2e/app-dir/searchparams-static-bailout/searchparams-static-bailout.test.ts\",\n+      \"test/development/app-dir/dynamic-io-*/**/*\",\n+      \"test/e2e/app-dir/app-client-cache/client-cache.defaults.test.ts\",\n       \"test/e2e/app-dir/app-client-cache/client-cache.experimental.test.ts\",\n       \"test/e2e/app-dir/app-client-cache/client-cache.original.test.ts\",\n-      \"test/e2e/app-dir/app-client-cache/client-cache.defaults.test.ts\",\n-      \"test/e2e/app-dir/react-max-headers-length/react-max-headers-length.test.ts\",\n+      \"test/e2e/app-dir/app-prefetch*/**/*\",\n+      \"test/e2e/app-dir/dynamic-io-*/**/*\",\n+      \"test/e2e/app-dir/dynamic-io/**/*\",\n+      \"test/e2e/app-dir/empty-fallback-shells/**/*\",\n       \"test/e2e/app-dir/front-redirect-issue/front-redirect-issue.test.ts\",\n-      \"test/e2e/app-dir/static-shell-debugging/static-shell-debugging.test.ts\",\n-      \"test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.prospective-fallback.test.ts\",\n+      \"test/e2e/app-dir/next-font/**/*\",\n+      \"test/e2e/app-dir/ppr-*/**/*\",\n+      \"test/e2e/app-dir/ppr/**/*\",\n+      \"test/e2e/app-dir/react-max-headers-length/react-max-headers-length.test.ts\",\n+      \"test/e2e/app-dir/searchparams-static-bailout/searchparams-static-bailout.test.ts\",\n       \"test/e2e/app-dir/segment-cache/basic/segment-cache-basic.test.ts\",\n       \"test/e2e/app-dir/segment-cache/export/segment-cache-output-export.test.ts\",\n       \"test/e2e/app-dir/segment-cache/incremental-opt-in/segment-cache-incremental-opt-in.test.ts\",\n       \"test/e2e/app-dir/segment-cache/memory-pressure/segment-cache-memory-pressure.test.ts\",\n       \"test/e2e/app-dir/segment-cache/prefetch-scheduling/prefetch-scheduling.test.ts\",\n       \"test/e2e/app-dir/segment-cache/revalidation/segment-cache-revalidation.test.ts\",\n       \"test/e2e/app-dir/segment-cache/staleness/segment-cache-stale-time.test.ts\",\n+      \"test/e2e/app-dir/static-shell-debugging/static-shell-debugging.test.ts\",\n+      \"test/e2e/app-dir/use-cache-close-over-function/**/*\",\n+      \"test/e2e/app-dir/use-cache-custom-handler/**/*\",\n+      \"test/e2e/app-dir/use-cache-hanging-inputs/**/*\",\n+      \"test/e2e/app-dir/use-cache-metadata-route-handler/**/*\",\n+      \"test/e2e/app-dir/use-cache-route-handler-only/**/*\",\n+      \"test/integration/app-dir-export/**/*\",\n       \"test/production/app-dir/build-output-tree-view/build-output-tree-view.test.ts\",\n       \"test/production/app-dir/global-default-cache-handler/global-default-cache-handler.test.ts\"\n     ]"
        }
    ],
    "stats": {
        "total": 4405,
        "additions": 1386,
        "deletions": 3019
    }
}