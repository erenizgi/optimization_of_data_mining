{
    "author": "eps1lon",
    "message": "[devtools] Apply React Compiler to Next.js DevTools source (#82004)",
    "sha": "a49f676c60edb5b81afcd2a1b4224064ead4d732",
    "files": [
        {
            "sha": "a0f1d488e58b9d48850e59163d6f6ac4fb2a2c19",
            "filename": ".eslintrc.json",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/.eslintrc.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/.eslintrc.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.eslintrc.json?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -242,6 +242,15 @@\n       \"rules\": {\n         \"react/jsx-no-undef\": \"off\"\n       }\n+    },\n+    {\n+      \"files\": [\n+        \"packages/next/src/next-devtools/dev-overlay/**/*.tsx\",\n+        \"packages/next/src/next-devtools/dev-overlay/**/*.ts\"\n+      ],\n+      \"rules\": {\n+        \"react-hooks/react-compiler\": \"error\"\n+      }\n     }\n   ],\n   \"rules\": {"
        },
        {
            "sha": "aef8c9109b8d7cc85b28acc842d266ffb2e8a080",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/package.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/package.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/package.json?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -173,7 +173,7 @@\n     \"eslint-plugin-jsdoc\": \"48.0.4\",\n     \"eslint-plugin-mdx\": \"3.1.5\",\n     \"eslint-plugin-react\": \"7.35.0\",\n-    \"eslint-plugin-react-hooks\": \"5.0.0\",\n+    \"eslint-plugin-react-hooks\": \"6.0.0-rc.1\",\n     \"eslint-v8\": \"npm:eslint@^8.57.0\",\n     \"event-stream\": \"4.0.1\",\n     \"execa\": \"2.0.3\","
        },
        {
            "sha": "20c537f429d0eb79b62a07afbac1234cecc27e9c",
            "filename": "packages/next/next-devtools.webpack-config.js",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fnext-devtools.webpack-config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fnext-devtools.webpack-config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fnext-devtools.webpack-config.js?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -91,6 +91,25 @@ module.exports = ({ dev, ...rest }) => {\n           },\n           type: 'javascript/auto',\n         },\n+        {\n+          test: /\\.(ts|tsx)$/,\n+          exclude: [/node_modules/],\n+          loader: 'babel-loader',\n+          options: {\n+            plugins: [\n+              [\n+                'babel-plugin-react-compiler',\n+                /**\n+                 * @type {import('babel-plugin-react-compiler').PluginOptions}\n+                 */\n+                ({}),\n+              ],\n+              ['@babel/plugin-syntax-typescript', { isTSX: true }],\n+            ],\n+            sourceMaps: true,\n+          },\n+          type: 'javascript/auto',\n+        },\n         {\n           test: /\\.css$/,\n           use: ["
        },
        {
            "sha": "c664a5aff3c786edb84aed1fdd21ac36c480c98e",
            "filename": "packages/next/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fpackage.json?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -145,6 +145,7 @@\n     \"@babel/plugin-syntax-dynamic-import\": \"7.8.3\",\n     \"@babel/plugin-syntax-import-attributes\": \"7.26.0\",\n     \"@babel/plugin-syntax-jsx\": \"7.25.9\",\n+    \"@babel/plugin-syntax-typescript\": \"7.25.4\",\n     \"@babel/plugin-transform-class-properties\": \"7.25.9\",\n     \"@babel/plugin-transform-export-namespace-from\": \"7.25.9\",\n     \"@babel/plugin-transform-modules-commonjs\": \"7.26.3\",\n@@ -234,6 +235,7 @@\n     \"async-retry\": \"1.2.3\",\n     \"async-sema\": \"3.0.0\",\n     \"axe-playwright\": \"2.0.3\",\n+    \"babel-loader\": \"10.0.0\",\n     \"babel-plugin-react-compiler\": \"19.1.0-rc.2\",\n     \"babel-plugin-transform-define\": \"2.0.0\",\n     \"babel-plugin-transform-react-remove-prop-types\": \"0.4.24\","
        },
        {
            "sha": "ad13aa764e369dc7ca857225864fd4a76edac01c",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/resize/resize-provider.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-provider.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-provider.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-provider.tsx?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -125,6 +125,7 @@ export const ResizeProvider = ({ value, children }: ResizeProviderProps) => {\n       value.resizeRef.current.style.width = `${width}px`\n       value.resizeRef.current.style.height = `${height}px`\n     }\n+    // eslint-disable-next-line react-hooks/react-compiler\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n   }, [])\n "
        },
        {
            "sha": "f09f68895c78c1a87346f4e195b71cff6a8ff0fa",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/draggable.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdraggable.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdraggable.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdraggable.tsx?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -310,6 +310,7 @@ export function useDrag(options: UseDragOptions) {\n         machine.current = { state: 'drag', pointerId: e.pointerId }\n         ref.current?.setPointerCapture(e.pointerId)\n         ref.current?.classList.add('dev-tools-grabbing')\n+        // eslint-disable-next-line react-hooks/react-compiler -- Bug in react-hooks/react-compiler\n         document.body.style.userSelect = 'none'\n         document.body.style.webkitUserSelect = 'none'\n         options.onDragStart?.()"
        },
        {
            "sha": "dc961cc71a1f8fead0fb5b34b25d62ab24460ec9",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/utils.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Futils.ts?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -61,6 +61,7 @@ export function useFocusTrap(\n       clearTimeout(id)\n       rootNode?.removeEventListener('keydown', onTab)\n     }\n+    // eslint-disable-next-line react-hooks/react-compiler\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n   }, [active])\n }\n@@ -148,8 +149,7 @@ export function useClickOutsideAndEscape(\n       ownerDocumentEl?.removeEventListener('mousedown', handleClickOutside)\n       ownerDocumentEl?.removeEventListener('keydown', handleKeyDown)\n     }\n-    // eslint-disable-next-line react-hooks/exhaustive-deps\n-  }, [active, rootRef, triggerRef])\n+  }, [active, close, ownerDocument, rootRef, triggerRef])\n }\n \n //////////////////////////////////////////////////////////////////////////////////////"
        },
        {
            "sha": "8ea3979069129e1014338029225244b7bbc4a827",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-call-stack/error-overlay-call-stack.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.tsx?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -36,6 +36,7 @@ export function ErrorOverlayCallStack({\n         dialog.removeEventListener('transitionend', onTransitionEnd)\n         setIsIgnoreListOpen(false)\n       }\n+      // eslint-disable-next-line react-hooks/react-compiler -- Bug in react-hooks/react-compiler\n       dialog.style.height = `${initialDialogHeight.current}px`\n       dialog.addEventListener('transitionend', onTransitionEnd)\n     } else {"
        },
        {
            "sha": "4e100958cabc90a8b7521585c9fa2ece735e58f6",
            "filename": "packages/next/src/next-devtools/dev-overlay/menu/dev-overlay-menu.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fdev-overlay-menu.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fdev-overlay-menu.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fdev-overlay-menu.tsx?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -141,6 +141,7 @@ export const DevtoolMenu = ({\n       menuRef,\n       setSelectedIndex,\n     })\n+    // eslint-disable-next-line react-hooks/react-compiler\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n   }, [])\n "
        },
        {
            "sha": "4c64b23813eb19f00bd0e29b4e3d871e19b6be49",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 52,
            "deletions": 2,
            "changes": 54,
            "blob_url": "https://github.com/vercel/next.js/blob/a49f676c60edb5b81afcd2a1b4224064ead4d732/pnpm-lock.yaml",
            "raw_url": "https://github.com/vercel/next.js/raw/a49f676c60edb5b81afcd2a1b4224064ead4d732/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/pnpm-lock.yaml?ref=a49f676c60edb5b81afcd2a1b4224064ead4d732",
            "patch": "@@ -311,8 +311,8 @@ importers:\n         specifier: 7.35.0\n         version: 7.35.0(eslint@9.12.0)\n       eslint-plugin-react-hooks:\n-        specifier: 5.0.0\n-        version: 5.0.0(eslint@9.12.0)\n+        specifier: 6.0.0-rc.1\n+        version: 6.0.0-rc.1(eslint@9.12.0)\n       eslint-v8:\n         specifier: npm:eslint@^8.57.0\n         version: eslint@8.57.1\n@@ -979,6 +979,9 @@ importers:\n       '@babel/plugin-syntax-jsx':\n         specifier: 7.25.9\n         version: 7.25.9(@babel/core@7.26.10)\n+      '@babel/plugin-syntax-typescript':\n+        specifier: 7.25.4\n+        version: 7.25.4(@babel/core@7.26.10)\n       '@babel/plugin-transform-class-properties':\n         specifier: 7.25.9\n         version: 7.25.9(@babel/core@7.26.10)\n@@ -1246,6 +1249,9 @@ importers:\n       axe-playwright:\n         specifier: 2.0.3\n         version: 2.0.3(playwright@1.51.1)\n+      babel-loader:\n+        specifier: 10.0.0\n+        version: 10.0.0(@babel/core@7.26.10)(webpack@5.98.0(@swc/core@1.11.24(@swc/helpers@0.5.15))(esbuild@0.24.2))\n       babel-plugin-react-compiler:\n         specifier: 19.1.0-rc.2\n         version: 19.1.0-rc.2\n@@ -6659,6 +6665,13 @@ packages:\n     peerDependencies:\n       '@babel/core': 7.26.10\n \n+  babel-loader@10.0.0:\n+    resolution: {integrity: sha512-z8jt+EdS61AMw22nSfoNJAZ0vrtmhPRVi6ghL3rCeRZI8cdNYFiV5xeV3HbE7rlZZNmGH8BVccwWt8/ED0QOHA==}\n+    engines: {node: ^18.20.0 || ^20.10.0 || >=22.0.0}\n+    peerDependencies:\n+      '@babel/core': 7.26.10\n+      webpack: 5.98.0\n+\n   babel-plugin-istanbul@6.1.1:\n     resolution: {integrity: sha512-Y1IQok9821cC9onCx5otgFfRm7Lm+I+wwxOx738M/WLPZ9Q42m4IG5W0FNX8WLL2gYMZo3JkuXIH2DOpWM+qwA==}\n     engines: {node: '>=8'}\n@@ -8914,6 +8927,12 @@ packages:\n     peerDependencies:\n       eslint: ^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0\n \n+  eslint-plugin-react-hooks@6.0.0-rc.1:\n+    resolution: {integrity: sha512-7C4c7bdtd/B7Q+HruZxYhGjwZVvJawvQpilEYlRG1Jncuk1ZNqrFy9bO8SJNieyj3iDh8WPQA7BzzPO7sNAyEA==}\n+    engines: {node: '>=18'}\n+    peerDependencies:\n+      eslint: ^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0\n+\n   eslint-plugin-react@7.35.0:\n     resolution: {integrity: sha512-v501SSMOWv8gerHkk+IIQBkcGRGrO2nfybfj5pLxuJNFTPxxA3PSryhXTK+9pNbtkggheDdsC0E9Q8CuPk6JKA==}\n     engines: {node: '>=4'}\n@@ -9974,6 +9993,12 @@ packages:\n   headers-polyfill@4.0.3:\n     resolution: {integrity: sha512-IScLbePpkvO846sIwOtOTDjutRMWdXdJmXdMvk6gCBHxFO8d+QKOQedyZSxFTTFYRSmlgSTDtXqqq4pcenBXLQ==}\n \n+  hermes-estree@0.25.1:\n+    resolution: {integrity: sha512-0wUoCcLp+5Ev5pDW2OriHC2MJCbwLwuRx+gAqMTOkGKJJiBCLjtrvy4PWUGn6MIVefecRpzoOZ/UV6iGdOr+Cw==}\n+\n+  hermes-parser@0.25.1:\n+    resolution: {integrity: sha512-6pEjquH3rqaI6cYAXYPcz9MS4rY6R4ngRgrgfDshRptUZIc3lw0MCIJIGDj9++mfySOuPTHB4nrSW99BCvOPIA==}\n+\n   hex-color-regex@1.1.0:\n     resolution: {integrity: sha512-l9sfDFsuqtOqKDsQdqrMRk0U85RZc0RtOR9yPI7mRVOa4FsR/BVnZ0shmQRM96Ji99kYZP/7hn1cedc1+ApsTQ==}\n \n@@ -14103,6 +14128,7 @@ packages:\n     engines: {node: '>=0.6.0', teleport: '>=0.2.0'}\n     deprecated: |-\n       You or someone you depend on is using Q, the JavaScript Promise library that gave JavaScript developers strong feelings about promises. They can almost certainly migrate to the native JavaScript promise now. Thank you literally everyone for joining me in this bet against the odds. Be excellent to each other.\n+\n       (For a CapTP with native promises, see @endo/eventual-send and @endo/captp)\n \n   qs@6.11.0:\n@@ -23005,6 +23031,12 @@ snapshots:\n     transitivePeerDependencies:\n       - supports-color\n \n+  babel-loader@10.0.0(@babel/core@7.26.10)(webpack@5.98.0(@swc/core@1.11.24(@swc/helpers@0.5.15))(esbuild@0.24.2)):\n+    dependencies:\n+      '@babel/core': 7.26.10\n+      find-up: 5.0.0\n+      webpack: 5.98.0(@swc/core@1.11.24(@swc/helpers@0.5.15))(esbuild@0.24.2)\n+\n   babel-plugin-istanbul@6.1.1:\n     dependencies:\n       '@babel/helper-plugin-utils': 7.26.5\n@@ -25826,6 +25858,18 @@ snapshots:\n     dependencies:\n       eslint: 9.12.0\n \n+  eslint-plugin-react-hooks@6.0.0-rc.1(eslint@9.12.0):\n+    dependencies:\n+      '@babel/core': 7.26.10\n+      '@babel/parser': 7.27.0\n+      '@babel/plugin-transform-private-methods': 7.25.9(@babel/core@7.26.10)\n+      eslint: 9.12.0\n+      hermes-parser: 0.25.1\n+      zod: 3.25.76\n+      zod-validation-error: 3.4.0(zod@3.25.76)\n+    transitivePeerDependencies:\n+      - supports-color\n+\n   eslint-plugin-react@7.35.0(eslint@9.12.0):\n     dependencies:\n       array-includes: 3.1.8\n@@ -27392,6 +27436,12 @@ snapshots:\n \n   headers-polyfill@4.0.3: {}\n \n+  hermes-estree@0.25.1: {}\n+\n+  hermes-parser@0.25.1:\n+    dependencies:\n+      hermes-estree: 0.25.1\n+\n   hex-color-regex@1.1.0: {}\n \n   hex-rgb@4.3.0: {}"
        }
    ],
    "stats": {
        "total": 94,
        "additions": 89,
        "deletions": 5
    }
}