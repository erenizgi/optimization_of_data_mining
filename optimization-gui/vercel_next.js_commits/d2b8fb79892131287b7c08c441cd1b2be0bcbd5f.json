{
    "author": "poteto",
    "message": "[cna] Add `reactCompiler` option (#82251)\n\nCo-authored-by: Sebastian Sebbie Silbermann <sebastian.silbermann@vercel.com>",
    "sha": "d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
    "files": [
        {
            "sha": "09c0c60902ecaea980a00ce42bad1df3c05efb17",
            "filename": "packages/create-next-app/create-app.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/packages%2Fcreate-next-app%2Fcreate-app.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/packages%2Fcreate-next-app%2Fcreate-app.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Fcreate-app.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -42,6 +42,7 @@ export async function createApp({\n   turbopack,\n   rspack,\n   disableGit,\n+  reactCompiler,\n }: {\n   appPath: string\n   packageManager: PackageManager\n@@ -60,6 +61,7 @@ export async function createApp({\n   turbopack: boolean\n   rspack: boolean\n   disableGit?: boolean\n+  reactCompiler: boolean\n }): Promise<void> {\n   let repoInfo: RepoInfo | undefined\n   const mode: TemplateMode = typescript ? 'ts' : 'js'\n@@ -252,6 +254,7 @@ export async function createApp({\n       skipInstall,\n       turbopack,\n       rspack,\n+      reactCompiler,\n     })\n   }\n "
        },
        {
            "sha": "8ec3c866c51ba25a8b94a1f1d17399a61639cbdb",
            "filename": "packages/create-next-app/index.ts",
            "status": "modified",
            "additions": 28,
            "deletions": 0,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/packages%2Fcreate-next-app%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/packages%2Fcreate-next-app%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Findex.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -49,6 +49,7 @@ const program = new Command(packageJson.name)\n   .option('--ts, --typescript', 'Initialize as a TypeScript project. (default)')\n   .option('--js, --javascript', 'Initialize as a JavaScript project.')\n   .option('--tailwind', 'Initialize with Tailwind CSS config. (default)')\n+  .option('--react-compiler', 'Initialize with React Compiler enabled.')\n   .option('--eslint', 'Initialize with ESLint config.')\n   .option('--biome', 'Initialize with Biome config.')\n   .option('--app', 'Initialize as an App Router project.')\n@@ -239,6 +240,7 @@ async function run(): Promise<void> {\n       empty: false,\n       turbopack: true,\n       disableGit: false,\n+      reactCompiler: false,\n     }\n     const getPrefOrDefault = (field: string) =>\n       preferences[field] ?? defaults[field]\n@@ -346,6 +348,30 @@ async function run(): Promise<void> {\n       preferences.eslint = false\n     }\n \n+    if (\n+      !opts.reactCompiler &&\n+      !args.includes('--no-react-compiler') &&\n+      !opts.api\n+    ) {\n+      if (skipPrompt) {\n+        opts.reactCompiler = getPrefOrDefault('reactCompiler')\n+      } else {\n+        const styledReactCompiler = blue('React Compiler')\n+        const { reactCompiler } = await prompts({\n+          onState: onPromptState,\n+          type: 'toggle',\n+          name: 'reactCompiler',\n+          // TODO: Remove \"Release Candidate\" when React Compiler is stable\n+          message: `Would you like to use ${styledReactCompiler} (Release Candidate)?`,\n+          initial: getPrefOrDefault('reactCompiler'),\n+          active: 'Yes',\n+          inactive: 'No',\n+        })\n+        opts.reactCompiler = Boolean(reactCompiler)\n+        preferences.reactCompiler = Boolean(reactCompiler)\n+      }\n+    }\n+\n     if (!opts.tailwind && !args.includes('--no-tailwind') && !opts.api) {\n       if (skipPrompt) {\n         opts.tailwind = getPrefOrDefault('tailwind')\n@@ -486,6 +512,7 @@ async function run(): Promise<void> {\n       turbopack: opts.turbopack,\n       rspack: opts.rspack,\n       disableGit: opts.disableGit,\n+      reactCompiler: opts.reactCompiler,\n     })\n   } catch (reason) {\n     if (!(reason instanceof DownloadError)) {\n@@ -520,6 +547,7 @@ async function run(): Promise<void> {\n       turbopack: opts.turbopack,\n       rspack: opts.rspack,\n       disableGit: opts.disableGit,\n+      reactCompiler: opts.reactCompiler,\n     })\n   }\n   conf.set('preferences', preferences)"
        },
        {
            "sha": "ca836d12a5d8fc6e52ee8e5f1233fb245bf2f281",
            "filename": "packages/create-next-app/templates/index.ts",
            "status": "modified",
            "additions": 28,
            "deletions": 0,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -47,6 +47,7 @@ export const installTemplate = async ({\n   skipInstall,\n   turbopack,\n   rspack,\n+  reactCompiler,\n }: InstallTemplateArgs) => {\n   console.log(bold(`Using ${packageManager}.`));\n \n@@ -96,6 +97,28 @@ export const installTemplate = async ({\n     );\n   }\n \n+  if (reactCompiler) {\n+    const nextConfigFile = path.join(\n+      root,\n+      mode === \"js\" ? \"next.config.mjs\" : \"next.config.ts\",\n+    );\n+    let configContent = await fs.readFile(nextConfigFile, \"utf8\");\n+\n+    if (mode === \"ts\") {\n+      configContent = configContent.replace(\n+        \"const nextConfig: NextConfig = {\\n  /* config options here */\\n};\",\n+        `const nextConfig: NextConfig = {\\n  reactCompiler: true,\\n};`,\n+      );\n+    } else {\n+      configContent = configContent.replace(\n+        \"const nextConfig = {};\",\n+        `const nextConfig = {\\n  reactCompiler: true,\\n};`,\n+      );\n+    }\n+\n+    await fs.writeFile(nextConfigFile, configContent);\n+  }\n+\n   const tsconfigFile = path.join(\n     root,\n     mode === \"js\" ? \"jsconfig.json\" : \"tsconfig.json\",\n@@ -223,6 +246,11 @@ export const installTemplate = async ({\n     }\n   }\n \n+  if (reactCompiler) {\n+    // TODO: Use \"^19\" when React Compiler is stable\n+    packageJson.devDependencies[\"babel-plugin-react-compiler\"] = \"19.1.0-rc.3\";\n+  }\n+\n   /**\n    * TypeScript projects will have type definitions and other devDependencies.\n    */"
        },
        {
            "sha": "59d91ff95b7284a6d2442c8a8a841e7a0f4fed75",
            "filename": "packages/create-next-app/templates/types.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/packages%2Fcreate-next-app%2Ftemplates%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/packages%2Fcreate-next-app%2Ftemplates%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Ftypes.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -33,4 +33,5 @@ export interface InstallTemplateArgs {\n   skipInstall: boolean;\n   turbopack: boolean;\n   rspack: boolean;\n+  reactCompiler: boolean;\n }"
        },
        {
            "sha": "29386ca6ee5c4c45373cc234bdec1c8569e11c21",
            "filename": "test/integration/create-next-app/biome-config.test.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fbiome-config.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fbiome-config.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Fbiome-config.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -31,6 +31,7 @@ describe('create-next-app Biome configuration', () => {\n           '--app',\n           '--no-turbopack',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           '--skip-install',\n         ],\n         nextTgzFilename,\n@@ -59,6 +60,7 @@ describe('create-next-app Biome configuration', () => {\n           '--app',\n           '--no-turbopack',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         { cwd }\n@@ -95,6 +97,7 @@ describe('create-next-app Biome configuration', () => {\n           '--app',\n           '--no-turbopack',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         { cwd }\n@@ -131,6 +134,7 @@ describe('create-next-app Biome configuration', () => {\n           '--app',\n           '--no-turbopack',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         { cwd }\n@@ -167,6 +171,7 @@ describe('create-next-app Biome configuration', () => {\n           '--app',\n           '--no-turbopack',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         { cwd }"
        },
        {
            "sha": "9d52ada74058f6f862e5d7af2a8819d88089e303",
            "filename": "test/integration/create-next-app/eslint-config.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Feslint-config.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Feslint-config.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Feslint-config.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -28,6 +28,7 @@ describe('create-next-app ESLint configuration', () => {\n           '--eslint',\n           '--no-tailwind',\n           '--no-src-dir',\n+          '--no-react-compiler',\n           '--app',\n           '--no-turbopack',\n           '--no-import-alias',\n@@ -76,6 +77,7 @@ describe('create-next-app ESLint configuration', () => {\n           '--eslint',\n           '--no-tailwind',\n           '--no-src-dir',\n+          '--no-react-compiler',\n           '--app',\n           '--no-turbopack',\n           '--no-import-alias',"
        },
        {
            "sha": "f03fc623f9987814765a144c67e34e6c6bd29bf7",
            "filename": "test/integration/create-next-app/index.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Findex.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -39,6 +39,7 @@ describe('create-next-app', () => {\n           '--no-tailwind',\n           '--no-src-dir',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -81,6 +82,7 @@ describe('create-next-app', () => {\n           '--no-tailwind',\n           '--no-src-dir',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -113,6 +115,7 @@ describe('create-next-app', () => {\n           '--no-src-dir',\n           '--no-import-alias',\n           '--skip-install',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,"
        },
        {
            "sha": "9d55e0281e0a639c7a99532a299d435cc71aff81",
            "filename": "test/integration/create-next-app/package-manager/bun.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fbun.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fbun.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fbun.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -49,6 +49,7 @@ describe('create-next-app with package manager bun', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         {\n@@ -78,6 +79,7 @@ describe('create-next-app with package manager bun', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         {"
        },
        {
            "sha": "c1ad0fe708fafcd78d3a1e6188ee9716d8a9045f",
            "filename": "test/integration/create-next-app/package-manager/npm.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fnpm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fnpm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fnpm.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -38,6 +38,7 @@ describe('create-next-app with package manager npm', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         {\n@@ -67,6 +68,7 @@ describe('create-next-app with package manager npm', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         {"
        },
        {
            "sha": "7a0615a0e88564e7a3e16987c79a744a2eea2e95",
            "filename": "test/integration/create-next-app/package-manager/pnpm.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fpnpm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fpnpm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fpnpm.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -38,6 +38,7 @@ describe('create-next-app with package manager pnpm', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         {\n@@ -67,6 +68,7 @@ describe('create-next-app with package manager pnpm', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         {"
        },
        {
            "sha": "73cbb4dcfd271ed20dc5a3a725bcf9f1e1041e47",
            "filename": "test/integration/create-next-app/package-manager/yarn.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fyarn.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fyarn.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Fpackage-manager%2Fyarn.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -46,6 +46,7 @@ describe('create-next-app with package manager yarn', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         {\n@@ -75,6 +76,7 @@ describe('create-next-app with package manager yarn', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         nextTgzFilename,\n         {"
        },
        {
            "sha": "68c4d27fde4566b33f1654af18b5ec0769213173",
            "filename": "test/integration/create-next-app/prompts.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fprompts.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Fprompts.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Fprompts.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -29,6 +29,7 @@ describe('create-next-app prompts', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         {\n           cwd,\n@@ -68,6 +69,7 @@ describe('create-next-app prompts', () => {\n           '--no-tailwind',\n           '--no-src-dir',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         {\n           cwd,\n@@ -104,6 +106,7 @@ describe('create-next-app prompts', () => {\n           '--no-turbopack',\n           '--no-src-dir',\n           '--no-import-alias',\n+          '--no-react-compiler',\n         ],\n         {\n           cwd,\n@@ -140,6 +143,7 @@ describe('create-next-app prompts', () => {\n           '--no-turbopack',\n           '--no-tailwind',\n           '--no-src-dir',\n+          '--no-react-compiler',\n         ],\n         {\n           cwd,"
        },
        {
            "sha": "96bb7500d132332179a224e9c68ebcea6fbebfd9",
            "filename": "test/integration/create-next-app/templates/app.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fapp.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fapp.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fapp.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -35,6 +35,7 @@ describe('create-next-app --app (App Router)', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -65,6 +66,7 @@ describe('create-next-app --app (App Router)', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -93,6 +95,7 @@ describe('create-next-app --app (App Router)', () => {\n           '--src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -130,6 +133,7 @@ describe('create-next-app --app (App Router)', () => {\n           '--src-dir',\n           '--tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -167,6 +171,7 @@ describe('create-next-app --app (App Router)', () => {\n           '--empty',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -206,6 +211,7 @@ describe('create-next-app --app (App Router)', () => {\n           '--tailwind',\n           '--empty',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -245,6 +251,7 @@ describe('create-next-app --app (App Router)', () => {\n             '--no-src-dir',\n             '--no-tailwind',\n             '--no-import-alias',\n+            '--no-react-compiler',\n           ],\n           nextTgzFilename,\n           {"
        },
        {
            "sha": "26aec841239262a71d75c9c405618312731f3666",
            "filename": "test/integration/create-next-app/templates/matrix.test.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 6,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fmatrix.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fmatrix.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fmatrix.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -33,24 +33,30 @@ describe.each(['app', 'pages'] as const)(\n       // eslint: ['--eslint', '--no-linter'],\n       eslint: ['--eslint'],\n \n-      srcDir: ['--src-dir', '--no-src-dir'],\n+      // Trading test perf for robustness:\n+      // srcDir and reactCompiler don't interact so we're testing them together\n+      // instead of all permutations.\n+      srcDirAndCompiler: [\n+        '--src-dir --react-compiler',\n+        '--no-src-dir --no-react-compiler',\n+      ],\n       tailwind: ['--tailwind', '--no-tailwind'],\n \n       // shouldn't affect if the app builds or not\n       // packageManager: ['--use-npm', '--use-pnpm', '--use-yarn', '--use-bun'],\n     }\n \n-    const getPermutations = <T>(items: T[][]): T[][] => {\n+    const getCombinations = (items: string[][]): string[][] => {\n       if (!items.length) return [[]]\n       const [first, ...rest] = items\n-      const children = getPermutations(rest)\n+      const children = getCombinations(rest)\n       return first.flatMap((value) =>\n-        children.map((child) => [value, ...child])\n+        children.map((child) => [...value.split(' '), ...child])\n       )\n     }\n \n-    const flagPermutations = getPermutations(Object.values(allFlagValues))\n-    const testCases = flagPermutations.map((flags) => ({\n+    const flagCombinations = getCombinations(Object.values(allFlagValues))\n+    const testCases = flagCombinations.map((flags) => ({\n       name: flags.join(' '),\n       flags,\n     }))"
        },
        {
            "sha": "1cf02a456da0c8888c0593a1abb3723e5e2e3d74",
            "filename": "test/integration/create-next-app/templates/pages.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fpages.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d2b8fb79892131287b7c08c441cd1b2be0bcbd5f/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fpages.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcreate-next-app%2Ftemplates%2Fpages.test.ts?ref=d2b8fb79892131287b7c08c441cd1b2be0bcbd5f",
            "patch": "@@ -35,6 +35,7 @@ describe('create-next-app --no-app (Pages Router)', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -70,6 +71,7 @@ describe('create-next-app --no-app (Pages Router)', () => {\n           '--no-src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -102,6 +104,7 @@ describe('create-next-app --no-app (Pages Router)', () => {\n           '--src-dir',\n           '--no-tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -138,6 +141,7 @@ describe('create-next-app --no-app (Pages Router)', () => {\n           '--src-dir',\n           '--tailwind',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -176,6 +180,7 @@ describe('create-next-app --no-app (Pages Router)', () => {\n           '--no-tailwind',\n           '--empty',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -216,6 +221,7 @@ describe('create-next-app --no-app (Pages Router)', () => {\n           '--tailwind',\n           '--empty',\n           '--no-import-alias',\n+          '--no-react-compiler',\n           ...(process.env.NEXT_RSPACK ? ['--rspack'] : []),\n         ],\n         nextTgzFilename,\n@@ -256,6 +262,7 @@ describe('create-next-app --no-app (Pages Router)', () => {\n             '--no-src-dir',\n             '--no-tailwind',\n             '--no-import-alias',\n+            '--no-react-compiler',\n           ],\n           nextTgzFilename,\n           {"
        }
    ],
    "stats": {
        "total": 114,
        "additions": 108,
        "deletions": 6
    }
}