{
    "author": "kdy1",
    "message": "perf(turbopack): Remove needless clone of sourcemap (#78972)\n\n### What?\n\nUse `sourcemap::SourceMap::adjust_mapping` directly instead of relying on `swc_common`.\n\n### Why?\n\n\nhttps://github.com/swc-project/swc/blob/6750459d9180048a39c11e14b02c9bfed251a12e/crates/swc_common/src/source_map.rs#L1385-L1388\n\n\n```rust\n    if let Some(mut orig) = orig.cloned() {\n        orig.adjust_mappings(&map);\n        return orig;\n    }\n```\n\nIf we pass `orig,` the original source map is cloned. I'll fix this API issue from the SWC side in the future.\n\nx-ref, numbers: https://vercel.slack.com/archives/C03EWR7LGEN/p1746729015204369?thread_ts=1746727709.014039&cid=C03EWR7LGEN",
    "sha": "b0c4181305d381453c141c5abfd071a2930358a8",
    "files": [
        {
            "sha": "a9be937004e6b441d249f41ebad864e9015a3814",
            "filename": "turbopack/crates/turbopack-ecmascript/src/parse.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 5,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/b0c4181305d381453c141c5abfd071a2930358a8/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/b0c4181305d381453c141c5abfd071a2930358a8/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fparse.rs?ref=b0c4181305d381453c141c5abfd071a2930358a8",
            "patch": "@@ -114,11 +114,16 @@ pub fn generate_js_source_map(\n         None\n     };\n \n-    let mut map = files_map.build_source_map_with_config(\n-        &mappings,\n-        input_map.as_ref(),\n-        InlineSourcesContentConfig {},\n-    );\n+    let map =\n+        files_map.build_source_map_with_config(&mappings, None, InlineSourcesContentConfig {});\n+\n+    let mut map = match input_map {\n+        Some(mut input_map) => {\n+            input_map.adjust_mappings(&map);\n+            input_map\n+        }\n+        None => map,\n+    };\n     add_default_ignore_list(&mut map);\n \n     let mut result = vec![];"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 10,
        "deletions": 5
    }
}