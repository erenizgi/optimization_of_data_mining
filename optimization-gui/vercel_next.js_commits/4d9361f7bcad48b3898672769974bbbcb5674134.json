{
    "author": "Cy-Tek",
    "message": "Adjusted the warning message to be more descriptive (#82052)\n\n## Improve warning message for multiple lockfiles detection\n\n### What?\nEnhances the warning message when multiple lockfiles are detected to\nprovide clearer guidance to users.\n\n### Why?\nThe previous warning message was less informative and didn't provide\nclear instructions on how to resolve the issue. The improved message\nexplicitly mentions:\n- That Next.js is inferring the workspace root\n- How to silence the warning by setting `turbopack.root` in the Next.js\nconfig\n- A link to documentation for more information\n\n### How?\nUpdated the warning text to be more descriptive and helpful, including a\nlink to the relevant documentation.\n\n<img width=\"1433\" height=\"306\" alt=\"image\"\nsrc=\"https://github.com/user-attachments/assets/f92b3dd3-061c-45d0-8135-03b625079256\"\n/>\n\n\nAddresses #81864",
    "sha": "4d9361f7bcad48b3898672769974bbbcb5674134",
    "files": [
        {
            "sha": "2001ba451ea1706decb2fdf3042a2fe379930c3a",
            "filename": "packages/next/src/lib/find-root.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 4,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/4d9361f7bcad48b3898672769974bbbcb5674134/packages%2Fnext%2Fsrc%2Flib%2Ffind-root.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4d9361f7bcad48b3898672769974bbbcb5674134/packages%2Fnext%2Fsrc%2Flib%2Ffind-root.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Ffind-root.ts?ref=4d9361f7bcad48b3898672769974bbbcb5674134",
            "patch": "@@ -35,11 +35,19 @@ export function findRootDir(cwd: string) {\n \n   // Only warn if not in a build worker to avoid duplicate warnings\n   if (typeof process.send !== 'function' && lockFiles.length > 1) {\n+    const additionalLockFiles = lockFiles\n+      .slice(0, -1)\n+      .map((str) => '\\n   * ' + str)\n+      .join('')\n+\n     Log.warnOnce(\n-      `Warning: Found multiple lockfiles. Selecting ${lockFiles[lockFiles.length - 1]}.\\n   Consider removing the lockfiles at:${lockFiles\n-        .slice(0, -1)\n-        .map((str) => '\\n   * ' + str)\n-        .join('')}\\n`\n+      `Warning: Next.js inferred your workspace root, but it may not be correct.\\n` +\n+        `We detected multiple lockfiles and selected ${lockFiles[lockFiles.length - 1]} as the root directory.\\n` +\n+        `To silence this warning, set turbopack.root in your Next.js config, or consider ` +\n+        `removing one of the lockfiles if it's not needed.\\n` +\n+        `  See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.\\n` +\n+        `Detected lockfiles:\\n` +\n+        `${additionalLockFiles}`\n     )\n   }\n "
        }
    ],
    "stats": {
        "total": 16,
        "additions": 12,
        "deletions": 4
    }
}