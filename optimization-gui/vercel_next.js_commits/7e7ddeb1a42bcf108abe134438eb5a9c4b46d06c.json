{
    "author": "eps1lon",
    "message": "[dev-overlay] Stop grouping callstack frames into ignored vs. not ignored (#76861)",
    "sha": "7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c",
    "files": [
        {
            "sha": "1d8f68618dba348ff155e2449116ad4efeaf4ff7",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/call-stack/call-stack.stories.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.stories.tsx?ref=7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c",
            "patch": "@@ -62,6 +62,7 @@ export const MultipleFrames: Story = {\n           lineNumber: 5,\n         },\n       },\n+      ...Array(5).fill(ignoredFrame),\n       {\n         ...frame,\n         originalStackFrame: {"
        },
        {
            "sha": "02b11fdf49e998b559b96de9f244a6d3f10468be",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/call-stack/call-stack.tsx",
            "status": "modified",
            "additions": 9,
            "deletions": 39,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.tsx?ref=7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c",
            "patch": "@@ -11,24 +11,8 @@ export function CallStack({ frames, dialogResizerRef }: CallStackProps) {\n   const initialDialogHeight = useRef<number>(NaN)\n   const [isIgnoreListOpen, setIsIgnoreListOpen] = useState(false)\n \n-  const { visibleFrames, ignoredFrames, ignoreListLength } = useMemo(() => {\n-    const visible: OriginalStackFrame[] = []\n-    const ignored: OriginalStackFrame[] = []\n-\n-    for (const frame of frames) {\n-      if (!frame.ignored) {\n-        visible.push(frame)\n-      }\n-      if (frame.ignored) {\n-        ignored.push(frame)\n-      }\n-    }\n-\n-    return {\n-      visibleFrames: visible,\n-      ignoredFrames: ignored,\n-      ignoreListLength: ignored.length,\n-    }\n+  const ignoredFramesTally = useMemo(() => {\n+    return frames.reduce((tally, frame) => tally + (frame.ignored ? 1 : 0), 0)\n   }, [frames])\n \n   function onToggleIgnoreList() {\n@@ -65,36 +49,22 @@ export function CallStack({ frames, dialogResizerRef }: CallStackProps) {\n             {frames.length}\n           </span>\n         </p>\n-        {ignoreListLength > 0 && (\n+        {ignoredFramesTally > 0 && (\n           <button\n             data-expand-ignore-button={isIgnoreListOpen}\n             className=\"error-overlay-call-stack-ignored-list-toggle-button\"\n             onClick={onToggleIgnoreList}\n           >\n-            {`${isIgnoreListOpen ? 'Hide' : 'Show'} ${ignoreListLength} ignore-listed frames`}\n+            {`${isIgnoreListOpen ? 'Hide' : 'Show'} ${ignoredFramesTally} ignore-listed frame(s)`}\n             <ChevronUpDown />\n           </button>\n         )}\n       </div>\n-      {visibleFrames.map((frame, frameIndex) => (\n-        <CallStackFrame\n-          key={`call-stack-leading-${frameIndex}`}\n-          frame={frame}\n-          index={frameIndex}\n-        />\n-      ))}\n-\n-      {isIgnoreListOpen && (\n-        <>\n-          {ignoredFrames.map((frame, frameIndex) => (\n-            <CallStackFrame\n-              key={`call-stack-ignored-${frameIndex}`}\n-              frame={frame}\n-              index={frameIndex}\n-            />\n-          ))}\n-        </>\n-      )}\n+      {frames.map((frame, frameIndex) => {\n+        return !frame.ignored || isIgnoreListOpen ? (\n+          <CallStackFrame key={frameIndex} frame={frame} index={frameIndex} />\n+        ) : null\n+      })}\n     </div>\n   )\n }"
        },
        {
            "sha": "e49975a0b171ced8ae558c56acaf1fb7e9f9bcb0",
            "filename": "test/development/app-dir/error-overlay/error-ignored-frames/error-ignored-frames.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Ferror-overlay%2Ferror-ignored-frames%2Ferror-ignored-frames.test.ts?ref=7e7ddeb1a42bcf108abe134438eb5a9c4b46d06c",
            "patch": "@@ -99,15 +99,15 @@ describe('error-ignored-frames', () => {\n     if (isTurbopack) {\n       expect(expendedStack).toMatchInlineSnapshot(`\n        \"at <unknown> (app/interleaved/page.tsx (7:11))\n-       at Page (app/interleaved/page.tsx (6:35))\n        at invokeCallback ()\n+       at Page (app/interleaved/page.tsx (6:35))\n        at ClientPageRoot ()\"\n       `)\n     } else {\n       expect(expendedStack).toMatchInlineSnapshot(`\n        \"at eval (app/interleaved/page.tsx (7:11))\n-       at Page (app/interleaved/page.tsx (6:36))\n        at invokeCallback (node_modules/interleave/index.js (2:1))\n+       at Page (app/interleaved/page.tsx (6:36))\n        at ClientPageRoot (../src/client/components/client-page.tsx (60:12))\"\n       `)\n     }"
        }
    ],
    "stats": {
        "total": 53,
        "additions": 12,
        "deletions": 41
    }
}