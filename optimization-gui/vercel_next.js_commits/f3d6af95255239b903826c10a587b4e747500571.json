{
    "author": "huozhi",
    "message": "[segment explorer] single row layout segment (#80576)",
    "sha": "f3d6af95255239b903826c10a587b4e747500571",
    "files": [
        {
            "sha": "6e42e0b46e4ef9f579a787d71acc2891a70548c4",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-indicator.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -336,7 +336,7 @@ function DevToolsPopover({\n         setScale={setScale}\n       />\n \n-      {/* Page Segment Explorer */}\n+      {/* Page Route Info */}\n       {process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER ? (\n         <SegmentsExplorer\n           isOpen={isSegmentExplorerOpen}\n@@ -414,7 +414,7 @@ function DevToolsPopover({\n               {process.env.__NEXT_DEVTOOL_SEGMENT_EXPLORER ? (\n                 <MenuItem\n                   data-segment-explorer\n-                  label=\"Segment Explorer\"\n+                  label=\"Route Info\"\n                   value={<ChevronRight />}\n                   onClick={() => setOpen(OVERLAYS.SegmentExplorer)}\n                   index={isTurbopack ? 3 : 4}"
        },
        {
            "sha": "33ce86b255b7c148238ba21f953e470767596faa",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overview/segment-explorer.tsx",
            "status": "modified",
            "additions": 114,
            "deletions": 37,
            "changes": 151,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -3,40 +3,33 @@ import { css } from '../../utils/css'\n import type { DevToolsInfoPropsCore } from '../errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n import { DevToolsInfo } from '../errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n import { useSegmentTree, type SegmentTrieNode } from '../../segment-explorer'\n+import { cx } from '../../utils/cx'\n+\n+const isFileNode = (node: SegmentTrieNode) => {\n+  return !!node.value?.type && !!node.value?.pagePath\n+}\n \n function PageSegmentTree({ tree }: { tree: SegmentTrieNode }) {\n   return (\n     <div\n       className=\"segment-explorer-content\"\n       data-nextjs-devtool-segment-explorer\n     >\n-      <PageSegmentTreeLayerPresentation\n-        node={tree}\n-        level={0}\n-        segment=\"\"\n-        parentSegment=\"\"\n-      />\n+      <PageSegmentTreeLayerPresentation node={tree} level={0} segment=\"\" />\n     </div>\n   )\n }\n \n function PageSegmentTreeLayerPresentation({\n   segment,\n-  parentSegment,\n   node,\n   level,\n }: {\n   segment: string\n-  parentSegment: string\n   node: SegmentTrieNode\n   level: number\n }) {\n-  const pagePath = node.value?.pagePath || ''\n   const nodeName = node.value?.type\n-  const isFile = !!nodeName\n-\n-  const segments = pagePath.split('/') || []\n-  const fileName = isFile ? segments.pop() || '' : ''\n   const childrenKeys = Object.keys(node.children)\n \n   const sortedChildrenKeys = childrenKeys.sort((a, b) => {\n@@ -47,31 +40,61 @@ function PageSegmentTreeLayerPresentation({\n     if (aHasExt && !bHasExt) return -1\n     if (!aHasExt && bHasExt) return 1\n     // Otherwise sort alphabetically\n-    return a.localeCompare(b)\n-  })\n \n-  // check if it has file children\n-  const hasFileChildren = sortedChildrenKeys.some((key) => {\n-    const childNode = node.children[key]\n-    return !!childNode?.value?.type\n+    // If it's file, sort by order: layout > template > page\n+    if (aHasExt && bHasExt) {\n+      const aType = node.children[a]?.value?.type\n+      const bType = node.children[b]?.value?.type\n+\n+      if (aType === 'layout' && bType !== 'layout') return -1\n+      if (aType !== 'layout' && bType === 'layout') return 1\n+      if (aType === 'template' && bType !== 'template') return -1\n+      if (aType !== 'template' && bType === 'template') return 1\n+\n+      // If both are the same type, sort by pagePath\n+      const aFilePath = node.children[a]?.value?.pagePath || ''\n+      const bFilePath = node.children[b]?.value?.pagePath || ''\n+      return aFilePath.localeCompare(bFilePath)\n+    }\n+\n+    return a.localeCompare(b)\n   })\n \n   // If it's the 1st level and contains a file, use 'app' as the folder name\n-  const folderName = level === 1 && isFile ? 'app' : parentSegment\n+  const folderName = level === 0 && !segment ? 'app' : segment\n+\n+  const folderChildrenKeys: string[] = []\n+  const filesChildrenKeys: string[] = []\n+\n+  for (const childKey of sortedChildrenKeys) {\n+    const childNode = node.children[childKey]\n+    if (!childNode) continue\n+\n+    // If it's a file node, add it to filesChildrenKeys\n+    if (isFileNode(childNode)) {\n+      filesChildrenKeys.push(childKey)\n+      continue\n+    }\n+\n+    // Otherwise, it's a folder node, add it to folderChildrenKeys\n+    folderChildrenKeys.push(childKey)\n+  }\n+\n+  const hasFilesChildren = filesChildrenKeys.length > 0\n \n   return (\n     <>\n-      {isFile ? (\n+      {hasFilesChildren && (\n         <div\n           className=\"segment-explorer-item\"\n-          data-nextjs-devtool-segment-explorer-segment={segment}\n+          data-nextjs-devtool-segment-explorer-segment={segment + '-' + level}\n         >\n           <div\n             className=\"segment-explorer-item-row\"\n             style={{\n               // If it's children levels, show indents if there's any file at that level.\n               // Otherwise it's empty folder, no need to show indents.\n-              ...(level > 0 && isFile && { paddingLeft: `${level * 8}px` }),\n+              ...{ paddingLeft: `${(level + 1) * 8}px` },\n             }}\n           >\n             <div className=\"segment-explorer-line\">\n@@ -84,27 +107,54 @@ function PageSegmentTreeLayerPresentation({\n                       <small>{'/'}</small>\n                     </span>\n                   )}\n-                  <span className=\"segment-explorer-filename--name\">\n-                    {fileName}\n-                  </span>\n+                  {/* display all the file segments in this level */}\n+                  {filesChildrenKeys.length > 0 && (\n+                    <span className=\"segment-explorer-files\">\n+                      {filesChildrenKeys.map((fileChildSegment) => {\n+                        const childNode = node.children[fileChildSegment]\n+                        if (!childNode || !childNode.value) {\n+                          return null\n+                        }\n+                        const fileName =\n+                          childNode.value.pagePath.split('/').pop() || ''\n+                        return (\n+                          <span\n+                            key={fileChildSegment}\n+                            className={cx(\n+                              'segment-explorer-file-label',\n+                              `segment-explorer-file-label--${childNode.value.type}`\n+                            )}\n+                          >\n+                            {fileName}\n+                          </span>\n+                        )\n+                      })}\n+                    </span>\n+                  )}\n                 </div>\n               </div>\n             </div>\n           </div>\n         </div>\n-      ) : null}\n-      {sortedChildrenKeys.map((childSegment) => {\n+      )}\n+\n+      {folderChildrenKeys.map((childSegment) => {\n         const child = node.children[childSegment]\n         if (!child) {\n           return null\n         }\n+\n+        // If it's an folder segment without any files under it,\n+        // merge it with the segment in the next level.\n+        const nextSegment = hasFilesChildren\n+          ? childSegment\n+          : segment + ' / ' + childSegment\n         return (\n           <PageSegmentTreeLayerPresentation\n             key={childSegment}\n-            segment={childSegment}\n-            parentSegment={segment}\n+            segment={nextSegment}\n             node={child}\n-            level={hasFileChildren ? level + 1 : level}\n+            level={hasFilesChildren ? level + 1 : level}\n           />\n         )\n       })}\n@@ -118,7 +168,7 @@ export function SegmentsExplorer(\n   const tree = useSegmentTree()\n \n   return (\n-    <DevToolsInfo title=\"Segment Explorer\" {...props}>\n+    <DevToolsInfo title=\"Route Info\" {...props}>\n       <PageSegmentTree tree={tree} />\n     </DevToolsInfo>\n   )\n@@ -133,28 +183,36 @@ export const DEV_TOOLS_INFO_RENDER_FILES_STYLES = css`\n \n   .segment-explorer-item {\n     margin: 4px 0;\n+    border-radius: 6px;\n   }\n \n   .segment-explorer-item:nth-child(odd) {\n-    background-color: var(--color-gray-100);\n+    background-color: var(--color-background-200);\n   }\n \n   .segment-explorer-item-row {\n     display: flex;\n     align-items: center;\n-    padding: 4px 24px;\n-    border-radius: 6px;\n+    padding-top: 10px;\n+    padding-bottom: 10px;\n+    padding-right: 4px;\n   }\n \n   .segment-explorer-children--intended {\n     padding-left: 16px;\n   }\n \n+  .segment-explorer-filename {\n+    display: inline-flex;\n+  }\n+\n   .segment-explorer-filename--path {\n     margin-right: 8px;\n   }\n   .segment-explorer-filename--path small {\n+    display: inline-block;\n     width: 0;\n+    opacity: 0;\n   }\n   .segment-explorer-filename--name {\n     color: var(--color-gray-800);\n@@ -169,7 +227,26 @@ export const DEV_TOOLS_INFO_RENDER_FILES_STYLES = css`\n     color: var(--color-gray-1000);\n   }\n \n-  [data-nextjs-devtool-segment-explorer-level='odd'] {\n-    background-color: var(--color-gray-100);\n+  .segment-explorer-files {\n+    display: inline-flex;\n+    gap: 8px;\n+  }\n+\n+  .segment-explorer-file-label {\n+    padding: 2px 6px;\n+    border-radius: 16px;\n+    font-size: var(--size-12);\n+    line-height: 16px;\n+    font-weight: 500;\n+    user-select: none;\n+  }\n+  .segment-explorer-file-label--layout,\n+  .segment-explorer-file-label--template {\n+    background-color: var(--color-gray-300);\n+    color: var(--color-gray-1000);\n+  }\n+  .segment-explorer-file-label--page {\n+    background-color: var(--color-blue-300);\n+    color: var(--color-blue-800);\n   }\n `"
        },
        {
            "sha": "db278201a1aa69b4a9792430c2961a766cfd4f00",
            "filename": "packages/next/src/server/app-render/create-component-tree.tsx",
            "status": "modified",
            "additions": 73,
            "deletions": 43,
            "changes": 116,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -118,7 +118,7 @@ async function createComponentTreeInternal({\n     query,\n   } = ctx\n \n-  const { page, layoutOrPagePath, segment, modules, parallelRoutes } =\n+  const { page, conventionPath, segment, modules, parallelRoutes } =\n     parseLoaderTree(tree)\n \n   const {\n@@ -140,7 +140,7 @@ async function createComponentTreeInternal({\n   const layerAssets = getLayerAssets({\n     preloadCallbacks,\n     ctx,\n-    layoutOrPagePath,\n+    layoutOrPagePath: conventionPath,\n     injectedCSS: injectedCSSWithCurrentLayout,\n     injectedJS: injectedJSWithCurrentLayout,\n     injectedFontPreloadTags: injectedFontPreloadTagsWithCurrentLayout,\n@@ -421,6 +421,13 @@ async function createComponentTreeInternal({\n     </>\n   ) : undefined\n \n+  const dir = ctx.renderOpts.dir || ''\n+\n+  const isSegmentViewEnabled =\n+    process.env.NODE_ENV === 'development' &&\n+    ctx.renderOpts.devtoolSegmentExplorer\n+  const nodeName = modType ?? 'page'\n+\n   // TODO: Combine this `map` traversal with the loop below that turns the array\n   // into an object.\n   const parallelRouteMap = await Promise.all(\n@@ -491,7 +498,7 @@ async function createComponentTreeInternal({\n             // to provide more helpful debug information during development mode.\n             const parsedTree = parseLoaderTree(parallelRoute)\n             if (\n-              parsedTree.layoutOrPagePath?.endsWith(PARALLEL_ROUTE_DEFAULT_PATH)\n+              parsedTree.conventionPath?.endsWith(PARALLEL_ROUTE_DEFAULT_PATH)\n             ) {\n               missingSlots.add(parallelRouteKey)\n             }\n@@ -526,7 +533,17 @@ async function createComponentTreeInternal({\n           childCacheNodeSeedData = seedData\n         }\n \n-        // This is turned back into an object below.\n+        const templateNode = (\n+          <Template>\n+            <RenderFromTemplateContext />\n+          </Template>\n+        )\n+\n+        const templateFilePath = getConventionPathByType(\n+          parallelRoute,\n+          dir,\n+          'template'\n+        )\n         return [\n           parallelRouteKey,\n           <LayoutRouter\n@@ -536,9 +553,14 @@ async function createComponentTreeInternal({\n             errorStyles={errorStyles}\n             errorScripts={errorScripts}\n             template={\n-              <Template>\n-                <RenderFromTemplateContext />\n-              </Template>\n+              // Only render SegmentViewNode when there's an actual template\n+              isSegmentViewEnabled && templateFilePath ? (\n+                <SegmentViewNode type=\"template\" pagePath={templateFilePath}>\n+                  {templateNode}\n+                </SegmentViewNode>\n+              ) : (\n+                templateNode\n+              )\n             }\n             templateStyles={templateStyles}\n             templateScripts={templateScripts}\n@@ -628,25 +650,18 @@ async function createComponentTreeInternal({\n     )\n   }\n \n-  const dir = ctx.renderOpts.dir || process.cwd()\n-  const isSegmentViewEnabled =\n-    process.env.NODE_ENV === 'development' &&\n-    ctx.renderOpts.devtoolSegmentExplorer\n-  const nodeName = modType ?? 'page'\n-\n   if (isPage) {\n-    const PageComponent = isSegmentViewEnabled\n-      ? (pageProps: any) => {\n-          return (\n-            <SegmentViewNode\n-              type={nodeName}\n-              pagePath={normalizePageOrLayoutFilePath(dir, layoutOrPagePath)}\n-            >\n-              <Component {...pageProps} />\n-            </SegmentViewNode>\n-          )\n-        }\n-      : Component\n+    const pageFilePath = getConventionPathByType(tree, dir, 'page')\n+    const PageComponent =\n+      isSegmentViewEnabled && pageFilePath\n+        ? (pageProps: any) => {\n+            return (\n+              <SegmentViewNode type={nodeName} pagePath={pageFilePath}>\n+                <Component {...pageProps} />\n+              </SegmentViewNode>\n+            )\n+          }\n+        : Component\n \n     // Assign searchParams to props if this is a page\n     let pageElement: React.ReactNode\n@@ -727,18 +742,17 @@ async function createComponentTreeInternal({\n       isPossiblyPartialResponse,\n     ]\n   } else {\n-    const SegmentComponent = isSegmentViewEnabled\n-      ? (segmentProps: any) => {\n-          return (\n-            <SegmentViewNode\n-              type={nodeName}\n-              pagePath={normalizePageOrLayoutFilePath(dir, layoutOrPagePath)}\n-            >\n-              <Component {...segmentProps} />\n-            </SegmentViewNode>\n-          )\n-        }\n-      : Component\n+    const layoutFilePath = getConventionPathByType(tree, dir, 'layout')\n+    const SegmentComponent =\n+      isSegmentViewEnabled && layoutFilePath\n+        ? (segmentProps: any) => {\n+            return (\n+              <SegmentViewNode type={nodeName} pagePath={layoutFilePath}>\n+                <Component {...segmentProps} />\n+              </SegmentViewNode>\n+            )\n+          }\n+        : Component\n \n     const isRootLayoutWithChildrenSlotAndAtLeastOneMoreSlot =\n       rootLayoutAtThisLevel &&\n@@ -1010,19 +1024,35 @@ function getRootParamsImpl(\n   }\n }\n \n-function normalizePageOrLayoutFilePath(\n+function normalizeConventionFilePath(\n   projectDir: string,\n-  layoutOrPagePath: string | undefined\n+  conventionPath: string | undefined\n ) {\n-  const relativePath = (layoutOrPagePath || '')\n+  const cwd = process.env.NEXT_RUNTIME === 'edge' ? '' : process.cwd()\n+  const relativePath = (conventionPath || '')\n     // remove turbopack [project] prefix\n     .replace(/^\\[project\\][\\\\/]/, '')\n-    // remove the process.cwd() prefix\n-    .replace(process.cwd() + '/', '')\n     // remove the project root from the path\n     .replace(projectDir, '')\n+    // remove cwd prefix\n+    .replace(cwd, '')\n     // remove /(src/)?app/ dir prefix\n-    .replace(/^[\\\\/](src[\\\\/])?app[\\\\/]/, '')\n+    .replace(/^([\\\\/])*(src[\\\\/])?app[\\\\/]/, '')\n \n   return relativePath\n }\n+\n+function getConventionPathByType(\n+  tree: LoaderTree,\n+  dir: string,\n+  conventionType: 'layout' | 'template' | 'page'\n+) {\n+  const modules = tree[2]\n+  const conventionPath_ = modules[conventionType]\n+    ? modules[conventionType][1]\n+    : undefined\n+  if (conventionPath_) {\n+    return normalizeConventionFilePath(dir, conventionPath_)\n+  }\n+  return undefined\n+}"
        },
        {
            "sha": "7ebd0eda110cbb058f9726d19d5b83445e922c2f",
            "filename": "packages/next/src/server/app-render/parse-loader-tree.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fparse-loader-tree.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fparse-loader-tree.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fparse-loader-tree.ts?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -9,13 +9,14 @@ export function parseLoaderTree(tree: LoaderTree) {\n   // segments in the route, so we should use the default page\n   page = segment === DEFAULT_SEGMENT_KEY ? modules.defaultPage : page\n \n-  const layoutOrPagePath = layout?.[1] || template?.[1] || page?.[1]\n+  const conventionPath = layout?.[1] || template?.[1] || page?.[1]\n \n   return {\n     page,\n     segment,\n     modules,\n-    layoutOrPagePath,\n+    /* it can be either layout / template / page */\n+    conventionPath,\n     parallelRoutes,\n   }\n }"
        },
        {
            "sha": "27ca58f605db22a414d4742ea9cb8c56cf49539e",
            "filename": "test/development/app-dir/segment-explorer/app/(all)/file-segments/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Flayout.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Layout({ children }) {\n+  return (\n+    <div>\n+      <h2>Layout</h2>\n+      <div>{children}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "6f3279a035a5f12b30056e34377056313de355ba",
            "filename": "test/development/app-dir/segment-explorer/app/(all)/file-segments/page.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Fpage.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Page() {\n+  return (\n+    <div>\n+      <h4>Page title</h4>\n+      <p>Page</p>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "bfdb637225aa21091be3ff4e1f7e04f6d6ff0afa",
            "filename": "test/development/app-dir/segment-explorer/app/(all)/file-segments/template.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Ftemplate.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Ftemplate.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(all)%2Ffile-segments%2Ftemplate.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Template({ children }) {\n+  return (\n+    <div>\n+      <h3>Template</h3>\n+      <div>{children}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "aca1bb4b5273f7b29769a695c65c6878bad82b23",
            "filename": "test/development/app-dir/segment-explorer/app/(v2)/blog/(team)/layout.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Fblog%2F(team)%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Fblog%2F(team)%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Fblog%2F(team)%2Flayout.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -1,7 +1,7 @@\n export default function Layout({ children }) {\n   return (\n     <div>\n-      <h3>Nested Layout</h3>\n+      <h2>Nested Layout</h2>\n       <div className=\"nested-children\">{children}</div>\n     </div>\n   )"
        },
        {
            "sha": "15a405751183b132e1e902651757032a92696890",
            "filename": "test/development/app-dir/segment-explorer/app/(v2)/blog/(team)/template.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Fblog%2F(team)%2Ftemplate.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Fblog%2F(team)%2Ftemplate.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Fblog%2F(team)%2Ftemplate.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Template({ children }) {\n+  return (\n+    <div>\n+      <h3>Template</h3>\n+      <div id=\"nested-children\">{children}</div>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "93af817d086343ebb92260b57510b739bd0eb8cb",
            "filename": "test/development/app-dir/segment-explorer/app/(v2)/layout.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2F(v2)%2Flayout.tsx?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -1,7 +1,7 @@\n export default function Layout({ children }) {\n   return (\n     <div>\n-      <h3>Nested Layout</h3>\n+      <h1>Nested Layout</h1>\n       <div className=\"nested-children\">{children}</div>\n     </div>\n   )"
        },
        {
            "sha": "8f493df586968fdad29c0ccb2d68c2dc84b55fee",
            "filename": "test/development/app-dir/segment-explorer/segment-explorer.test.ts",
            "status": "modified",
            "additions": 42,
            "deletions": 16,
            "changes": 58,
            "blob_url": "https://github.com/vercel/next.js/blob/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f3d6af95255239b903826c10a587b4e747500571/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fsegment-explorer.test.ts?ref=f3d6af95255239b903826c10a587b4e747500571",
            "patch": "@@ -26,32 +26,44 @@ describe('segment-explorer', () => {\n   it('should render the segment explorer for parallel routes', async () => {\n     const browser = await next.browser('/parallel-routes')\n     expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`\n-     \"app/layout.tsx\n-     parallel-routes/layout.tsx\n-     parallel-routes/page.tsx\n-     @bar/layout.tsx\n-     @bar/page.tsx\n-     @foo/layout.tsx\n-     @foo/page.tsx\"\n+     \"app/\n+     layout.tsx\n+     parallel-routes/\n+     layout.tsx\n+     page.tsx\n+     @bar/\n+     layout.tsx\n+     page.tsx\n+     @foo/\n+     layout.tsx\n+     page.tsx\"\n     `)\n   })\n \n   it('should render the segment explorer for nested routes', async () => {\n     const browser = await next.browser('/blog/~/grid')\n     expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`\n-     \"app/layout.tsx\n-     (v2)/layout.tsx\n-     (team)/layout.tsx\n-     (overview)/layout.tsx\n-     grid/page.tsx\"\n+     \"app/\n+     layout.tsx\n+     (v2)/\n+     layout.tsx\n+     blog / (team)/\n+     layout.tsx\n+     template.tsx\n+     ~ / (overview)/\n+     layout.tsx\n+     grid/\n+     page.tsx\"\n     `)\n   })\n \n   it('should cleanup on soft navigation', async () => {\n     const browser = await next.browser('/soft-navigation/a')\n     expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`\n-     \"app/layout.tsx\n-     a/page.tsx\"\n+     \"app/\n+     layout.tsx\n+     soft-navigation / a/\n+     page.tsx\"\n     `)\n \n     await browser.elementByCss('[href=\"/soft-navigation/b\"]').click()\n@@ -60,8 +72,22 @@ describe('segment-explorer', () => {\n     })\n \n     expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`\n-     \"app/layout.tsx\n-     b/page.tsx\"\n+     \"app/\n+     layout.tsx\n+     soft-navigation / b/\n+     page.tsx\"\n+    `)\n+  })\n+\n+  it('should handle show file segments in order', async () => {\n+    const browser = await next.browser('/file-segments')\n+    expect(await getSegmentExplorerContent(browser)).toMatchInlineSnapshot(`\n+     \"app/\n+     layout.tsx\n+     (all) / file-segments/\n+     layout.tsx\n+     template.tsx\n+     page.tsx\"\n     `)\n   })\n })"
        }
    ],
    "stats": {
        "total": 370,
        "additions": 268,
        "deletions": 102
    }
}