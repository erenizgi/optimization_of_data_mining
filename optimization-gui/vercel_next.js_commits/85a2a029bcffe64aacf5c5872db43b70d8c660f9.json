{
    "author": "HamadUllah16",
    "message": "Fix/msw-issue-68521 (#83482)\n\n### Fix: [68521](https://github.com/vercel/next.js/issues/68521)\nUpdating outdated with-msw example\nThe\n[with-msw](https://github.com/vercel/next.js/tree/canary/examples/with-msw)\nis outdated and doesn't work with the latest msw version.\n\n### What?\nThe\n[with-msw](https://github.com/vercel/next.js/tree/canary/examples/with-msw)\nexample is outdated and does not work with the latest msw version.\n\n### Why?\n- msw now uses http instead of rest and the outdated implementation does\nnot work with the latest version anymore.\n- the client-side worker is now imported through msw/browser.\n\n### How?\n- replaced all usage of rest with http to align with MSW's new API.\n- updated the worker import to use msw/browser as per the new structure.\n\n### Media\n\nhttps://github.com/user-attachments/assets/ab9ebb49-28b2-4095-aeea-dcd301093c9f\n\n---------\n\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "85a2a029bcffe64aacf5c5872db43b70d8c660f9",
    "files": [
        {
            "sha": "bcd82e48b4c5279eeec71dec7f10446037543f53",
            "filename": "examples/with-msw/mocks/browser.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85a2a029bcffe64aacf5c5872db43b70d8c660f9/examples%2Fwith-msw%2Fmocks%2Fbrowser.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85a2a029bcffe64aacf5c5872db43b70d8c660f9/examples%2Fwith-msw%2Fmocks%2Fbrowser.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-msw%2Fmocks%2Fbrowser.ts?ref=85a2a029bcffe64aacf5c5872db43b70d8c660f9",
            "patch": "@@ -1,4 +1,4 @@\n-import { setupWorker } from \"msw\";\n+import { setupWorker } from \"msw/browser\";\n import { handlers } from \"./handlers\";\n \n export const worker = setupWorker(...handlers);"
        },
        {
            "sha": "47ed6f55ba4d0038f061ec341ace02e37648f588",
            "filename": "examples/with-msw/mocks/handlers.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 20,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/85a2a029bcffe64aacf5c5872db43b70d8c660f9/examples%2Fwith-msw%2Fmocks%2Fhandlers.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/85a2a029bcffe64aacf5c5872db43b70d8c660f9/examples%2Fwith-msw%2Fmocks%2Fhandlers.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-msw%2Fmocks%2Fhandlers.ts?ref=85a2a029bcffe64aacf5c5872db43b70d8c660f9",
            "patch": "@@ -1,26 +1,25 @@\n-import { rest } from \"msw\";\n+import { http, HttpResponse } from \"msw\";\n import { Book, Review } from \"./types\";\n \n export const handlers = [\n-  rest.get(\"https://my.backend/book\", (_req, res, ctx) => {\n-    return res(\n-      ctx.json<Book>({\n-        title: \"Lord of the Rings\",\n-        imageUrl: \"/book-cover.jpg\",\n-        description:\n-          \"The Lord of the Rings is an epic high-fantasy novel written by English author and scholar J. R. R. Tolkien.\",\n-      }),\n-    );\n+  http.get(\"https://my.backend/book\", () => {\n+    const book: Book = {\n+      title: \"Lord of the Rings\",\n+      imageUrl: \"/book-cover.jpg\",\n+      description:\n+        \"The Lord of the Rings is an epic high-fantasy novel written by English author and scholar J. R. R. Tolkien.\",\n+    };\n+    return HttpResponse.json(book);\n   }),\n-  rest.get(\"/reviews\", (_req, res, ctx) => {\n-    return res(\n-      ctx.json<Review[]>([\n-        {\n-          id: \"60333292-7ca1-4361-bf38-b6b43b90cb16\",\n-          author: \"John Maverick\",\n-          text: \"Lord of The Rings, is with no absolute hesitation, my most favored and adored book by‑far. The trilogy is wonderful‑ and I really consider this a legendary fantasy series. It will always keep you at the edge of your seat‑ and the characters you will grow and fall in love with!\",\n-        },\n-      ]),\n-    );\n+\n+  http.get(\"/reviews\", () => {\n+    const reviews: Review[] = [\n+      {\n+        id: \"60333292-7ca1-4361-bf38-b6b43b90cb16\",\n+        author: \"John Maverick\",\n+        text: \"Lord of The Rings, is with no absolute hesitation, my most favored and adored book by‑far. The trilogy is wonderful‑ and I really consider this a legendary fantasy series. It will always keep you at the edge of your seat‑ and the characters you will grow and fall in love with!\",\n+      },\n+    ];\n+    return HttpResponse.json(reviews);\n   }),\n ];"
        },
        {
            "sha": "8de124d2b3d3e9c46be74cecb9154fbcbe4fce00",
            "filename": "examples/with-msw/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/85a2a029bcffe64aacf5c5872db43b70d8c660f9/examples%2Fwith-msw%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/85a2a029bcffe64aacf5c5872db43b70d8c660f9/examples%2Fwith-msw%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-msw%2Fpackage.json?ref=85a2a029bcffe64aacf5c5872db43b70d8c660f9",
            "patch": "@@ -6,7 +6,7 @@\n     \"start\": \"next start\"\n   },\n   \"dependencies\": {\n-    \"msw\": \"^0.49.0\",\n+    \"msw\": \"^2.11.1\",\n     \"next\": \"latest\",\n     \"react\": \"^18.2.0\",\n     \"react-dom\": \"^18.2.0\""
        }
    ],
    "stats": {
        "total": 43,
        "additions": 21,
        "deletions": 22
    }
}