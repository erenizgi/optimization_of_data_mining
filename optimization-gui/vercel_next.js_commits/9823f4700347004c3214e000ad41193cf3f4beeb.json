{
    "author": "devjiwonchoi",
    "message": "[devtools] panel ui settings tab (#80538)\n\nhttps://github.com/user-attachments/assets/04c936c2-770f-4032-b962-2aad3259404a\r\n\r\nCloses NEXT-4530",
    "sha": "9823f4700347004c3214e000ad41193cf3f4beeb",
    "files": [
        {
            "sha": "580c8f67abb280989f3b38cc67c33c0236d0d766",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel-tab/devtools-panel-tab.tsx",
            "status": "modified",
            "additions": 19,
            "deletions": 1,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fdevtools-panel-tab.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fdevtools-panel-tab.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fdevtools-panel-tab.tsx?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -1,13 +1,31 @@\n import type { DevToolsPanelTabType } from '../devtools-panel'\n+import type { Corners } from '../../../shared'\n+\n+import { SettingsTab } from './settings-tab'\n \n export function DevToolsPanelTab({\n   activeTab,\n+  devToolsPosition,\n+  scale,\n+  handlePositionChange,\n+  handleScaleChange,\n }: {\n   activeTab: DevToolsPanelTabType\n+  devToolsPosition: Corners\n+  scale: number\n+  handlePositionChange: (e: React.ChangeEvent<HTMLSelectElement>) => void\n+  handleScaleChange: (e: React.ChangeEvent<HTMLSelectElement>) => void\n }) {\n   switch (activeTab) {\n     case 'settings':\n-      return <div>Settings</div>\n+      return (\n+        <SettingsTab\n+          devToolsPosition={devToolsPosition}\n+          scale={scale}\n+          handlePositionChange={handlePositionChange}\n+          handleScaleChange={handleScaleChange}\n+        />\n+      )\n     case 'route':\n       return <div>Route</div>\n     case 'issues':"
        },
        {
            "sha": "a3d79d7be035b2da93b84f4a1d28a8776ccd358b",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel-tab/settings-tab.tsx",
            "status": "added",
            "additions": 312,
            "deletions": 0,
            "changes": 312,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fsettings-tab.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fsettings-tab.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-tab%2Fsettings-tab.tsx?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -0,0 +1,312 @@\n+import type { Corners } from '../../../shared'\n+\n+import { useTheme } from '../hooks/use-theme'\n+import { Select } from '../../select/select'\n+import { STORAGE_KEY_THEME, NEXT_DEV_TOOLS_SCALE } from '../../../shared'\n+import { css } from '../../../utils/css'\n+import LightIcon from '../../../icons/light-icon'\n+import DarkIcon from '../../../icons/dark-icon'\n+import SystemIcon from '../../../icons/system-icon'\n+import EyeIcon from '../../../icons/eye-icon'\n+\n+function ThemeIcon({ theme }: { theme: 'dark' | 'light' | 'system' }) {\n+  switch (theme) {\n+    case 'system':\n+      return <SystemIcon />\n+    case 'dark':\n+      return <DarkIcon />\n+    case 'light':\n+      return <LightIcon />\n+    default:\n+      return null\n+  }\n+}\n+\n+export function SettingsTab({\n+  devToolsPosition,\n+  scale,\n+  handlePositionChange,\n+  handleScaleChange,\n+}: {\n+  devToolsPosition: Corners\n+  scale: number\n+  handlePositionChange: (e: React.ChangeEvent<HTMLSelectElement>) => void\n+  handleScaleChange: (e: React.ChangeEvent<HTMLSelectElement>) => void\n+}) {\n+  const [theme, setTheme] = useTheme()\n+\n+  const handleThemeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n+    const portal = document.querySelector('nextjs-portal')\n+    if (!portal) return\n+\n+    setTheme(e.target.value)\n+\n+    if (e.target.value === 'system') {\n+      portal.classList.remove('dark')\n+      portal.classList.remove('light')\n+      localStorage.removeItem(STORAGE_KEY_THEME)\n+      return\n+    }\n+\n+    if (e.target.value === 'dark') {\n+      portal.classList.add('dark')\n+      portal.classList.remove('light')\n+      localStorage.setItem(STORAGE_KEY_THEME, 'dark')\n+    } else {\n+      portal.classList.remove('dark')\n+      portal.classList.add('light')\n+      localStorage.setItem(STORAGE_KEY_THEME, 'light')\n+    }\n+  }\n+\n+  function handleRestartDevServer(invalidatePersistentCache: boolean) {\n+    let endpoint = '/__nextjs_restart_dev'\n+\n+    if (invalidatePersistentCache) {\n+      endpoint = '/__nextjs_restart_dev?invalidatePersistentCache'\n+    }\n+\n+    fetch(endpoint, {\n+      method: 'POST',\n+    }).then(() => {\n+      // TODO: poll server status and reload when the server is back up.\n+      // https://github.com/vercel/next.js/pull/80005\n+    })\n+  }\n+\n+  function hide() {\n+    fetch('/__nextjs_disable_dev_indicator', {\n+      method: 'POST',\n+    })\n+  }\n+\n+  return (\n+    <div data-nextjs-devtools-panel-settings>\n+      <div data-nextjs-devtools-panel-settings-section>\n+        <div data-nextjs-devtools-panel-settings-section-header>\n+          <label htmlFor=\"theme\">Theme</label>\n+          <p data-nextjs-devtools-panel-settings-section-description>\n+            Select your theme preference.\n+          </p>\n+        </div>\n+        <Select\n+          id=\"theme\"\n+          name=\"theme\"\n+          prefix={<ThemeIcon theme={theme as 'dark' | 'light' | 'system'} />}\n+          value={theme}\n+          onChange={handleThemeChange}\n+        >\n+          <option value=\"system\">System</option>\n+          <option value=\"light\">Light</option>\n+          <option value=\"dark\">Dark</option>\n+        </Select>\n+      </div>\n+\n+      <div data-nextjs-devtools-panel-settings-section>\n+        <div data-nextjs-devtools-panel-settings-section-header>\n+          <label htmlFor=\"position\">Position</label>\n+          <p data-nextjs-devtools-panel-settings-section-description>\n+            Adjust the placement of your dev tools.\n+          </p>\n+        </div>\n+        <Select\n+          id=\"position\"\n+          name=\"position\"\n+          value={devToolsPosition}\n+          onChange={handlePositionChange}\n+        >\n+          <option value=\"bottom-left\">Bottom Left</option>\n+          <option value=\"bottom-right\">Bottom Right</option>\n+          <option value=\"top-left\">Top Left</option>\n+          <option value=\"top-right\">Top Right</option>\n+        </Select>\n+      </div>\n+\n+      <div data-nextjs-devtools-panel-settings-section>\n+        <div data-nextjs-devtools-panel-settings-section-header>\n+          <label htmlFor=\"size\">Size</label>\n+          <p data-nextjs-devtools-panel-settings-section-description>\n+            Adjust the size of your dev tools.\n+          </p>\n+        </div>\n+        <Select\n+          id=\"size\"\n+          name=\"size\"\n+          value={scale}\n+          onChange={handleScaleChange}\n+        >\n+          {Object.entries(NEXT_DEV_TOOLS_SCALE).map(([key, value]) => {\n+            return (\n+              <option value={value} key={key}>\n+                {key}\n+              </option>\n+            )\n+          })}\n+        </Select>\n+      </div>\n+\n+      <div data-nextjs-devtools-panel-settings-section>\n+        <div data-nextjs-devtools-panel-settings-section-header>\n+          <label id=\"hide-dev-tools\">Hide Dev Tools for this session</label>\n+          <p data-nextjs-devtools-panel-settings-section-description>\n+            Hide Dev Tools until you restart your dev server, or 1 day.\n+          </p>\n+        </div>\n+        <div>\n+          <button\n+            aria-describedby=\"hide-dev-tools\"\n+            name=\"hide-dev-tools\"\n+            data-hide-dev-tools\n+            data-nextjs-devtools-panel-settings-section-action-button\n+            onClick={hide}\n+          >\n+            <EyeIcon />\n+            <span>Hide</span>\n+          </button>\n+        </div>\n+      </div>\n+\n+      <div data-nextjs-devtools-panel-settings-section>\n+        <div data-nextjs-devtools-panel-settings-section-header>\n+          <label>Disable Dev Tools for this project</label>\n+          <p data-nextjs-devtools-panel-settings-section-description>\n+            To disable this UI completely, set{' '}\n+            <code className=\"dev-tools-info-code\">devIndicators: false</code> in\n+            your <code className=\"dev-tools-info-code\">next.config</code> file.\n+          </p>\n+        </div>\n+      </div>\n+\n+      <div data-nextjs-devtools-panel-settings-section>\n+        <div data-nextjs-devtools-panel-settings-section-header>\n+          <label id=\"restart-dev-server\">Restart Dev Server</label>\n+          <p data-nextjs-devtools-panel-settings-section-description>\n+            Restarts the development server without needing to leave the\n+            browser.\n+          </p>\n+        </div>\n+        <div>\n+          <button\n+            aria-describedby=\"restart-dev-server\"\n+            title=\"Restarts the development server without needing to leave the browser.\"\n+            name=\"restart-dev-server\"\n+            data-restart-dev-server\n+            data-nextjs-devtools-panel-settings-section-action-button\n+            onClick={() =>\n+              handleRestartDevServer(/*invalidatePersistentCache*/ false)\n+            }\n+          >\n+            <span>Restart</span>\n+          </button>\n+        </div>\n+      </div>\n+\n+      {process.env.__NEXT_TURBOPACK_PERSISTENT_CACHE ? (\n+        <div data-nextjs-devtools-panel-settings-section>\n+          <div data-nextjs-devtools-panel-settings-section-header>\n+            <label id=\"reset-bundler-cache\">Reset Bundler Cache</label>\n+            <p data-nextjs-devtools-panel-settings-section-description>\n+              Clears the bundler cache and restarts the dev server. Helpful if\n+              you are seeing stale errors or changes are not appearing.\n+            </p>\n+          </div>\n+          <div>\n+            <button\n+              aria-describedby=\"reset-bundler-cache\"\n+              title=\"Clears the bundler cache and restarts the dev server. Helpful if you are seeing stale errors or changes are not appearing.\"\n+              name=\"reset-bundler-cache\"\n+              data-reset-bundler-cache\n+              data-nextjs-devtools-panel-settings-section-action-button\n+              onClick={() =>\n+                handleRestartDevServer(/*invalidatePersistentCache*/ true)\n+              }\n+            >\n+              <span>Reset Cache</span>\n+            </button>\n+          </div>\n+        </div>\n+      ) : null}\n+    </div>\n+  )\n+}\n+\n+export const DEVTOOLS_PANEL_TAB_SETTINGS_STYLES = css`\n+  [data-nextjs-devtools-panel-settings] {\n+    padding: 16px;\n+  }\n+\n+  [data-nextjs-devtools-panel-settings-section]:first-child {\n+    padding-top: 0;\n+  }\n+\n+  [data-nextjs-devtools-panel-settings-section] {\n+    padding: 12px 0;\n+    border-bottom: 1px solid var(--color-gray-400);\n+    display: flex;\n+    justify-content: space-between;\n+    align-items: center;\n+    gap: 24px;\n+  }\n+\n+  [data-nextjs-devtools-panel-settings-section]:last-child {\n+    padding-bottom: 0;\n+    border-bottom: none;\n+  }\n+\n+  [data-nextjs-devtools-panel-settings-section-header] {\n+    margin-bottom: 0;\n+    flex: 1;\n+  }\n+\n+  [data-nextjs-devtools-panel-settings-section-header] label {\n+    font-size: var(--size-14);\n+    font-weight: 500;\n+    color: var(--color-gray-1000);\n+    margin: 0;\n+  }\n+\n+  [data-nextjs-devtools-panel-settings-section-description] {\n+    color: var(--color-gray-900);\n+    font-size: var(--size-14);\n+    margin: 0;\n+  }\n+\n+  [data-nextjs-select],\n+  [data-nextjs-devtools-panel-settings-section-action-button] {\n+    display: flex;\n+    align-items: center;\n+    gap: 8px;\n+    background: var(--color-background-100);\n+    border: 1px solid var(--color-gray-400);\n+    border-radius: var(--rounded-lg);\n+    font-weight: 400;\n+    font-size: var(--size-14);\n+    color: var(--color-gray-1000);\n+    padding: 6px 8px;\n+\n+    &:hover {\n+      background: var(--color-gray-100);\n+    }\n+  }\n+\n+  [data-nextjs-select] {\n+    &:focus-within {\n+      outline: var(--focus-ring);\n+    }\n+\n+    select {\n+      all: unset;\n+    }\n+\n+    option {\n+      color: var(--color-gray-1000);\n+      background: var(--color-background-100);\n+    }\n+  }\n+\n+  :global(.icon) {\n+    width: 18px;\n+    height: 18px;\n+    color: #666;\n+  }\n+`"
        },
        {
            "sha": "1c885ed9f4d90535eccd497002576d5d7e438e96",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel.tsx",
            "status": "modified",
            "additions": 32,
            "deletions": 9,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -1,4 +1,4 @@\n-import type { OverlayDispatch, OverlayState } from '../../shared'\n+import type { OverlayDispatch, OverlayState, Corners } from '../../shared'\n \n import { useState } from 'react'\n \n@@ -9,6 +9,8 @@ import { Overlay } from '../overlay/overlay'\n import {\n   ACTION_DEVTOOLS_PANEL_CLOSE,\n   ACTION_DEVTOOLS_POSITION,\n+  ACTION_DEVTOOLS_SCALE,\n+  STORAGE_KEY_SCALE,\n   STORAGE_KEY_POSITION,\n } from '../../shared'\n import { css } from '../../utils/css'\n@@ -34,10 +36,26 @@ export function DevToolsPanel({\n   )\n   const [vertical, horizontal] = state.devToolsPosition.split('-', 2)\n \n-  const onClose = () => {\n+  const onCloseDevToolsPanel = () => {\n     dispatch({ type: ACTION_DEVTOOLS_PANEL_CLOSE })\n   }\n \n+  const handlePositionChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n+    dispatch({\n+      type: ACTION_DEVTOOLS_POSITION,\n+      devToolsPosition: e.target.value as Corners,\n+    })\n+    localStorage.setItem(STORAGE_KEY_POSITION, e.target.value)\n+  }\n+\n+  const handleScaleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n+    dispatch({\n+      type: ACTION_DEVTOOLS_SCALE,\n+      scale: Number(e.target.value),\n+    })\n+    localStorage.setItem(STORAGE_KEY_SCALE, e.target.value)\n+  }\n+\n   return (\n     <Overlay\n       data-nextjs-devtools-panel-overlay\n@@ -48,10 +66,10 @@ export function DevToolsPanel({\n         [horizontal === 'left' ? 'right' : 'left']: 'auto',\n       }}\n     >\n-      {/* TODO: Investigate why onClose on Dialog doesn't close when clicked outside. */}\n+      {/* TODO: Investigate why onCloseDevToolsPanel on Dialog doesn't close when clicked outside. */}\n       <OverlayBackdrop\n         data-nextjs-devtools-panel-overlay-backdrop\n-        onClick={onClose}\n+        onClick={onCloseDevToolsPanel}\n       />\n       <Draggable\n         padding={INDICATOR_PADDING}\n@@ -70,10 +88,10 @@ export function DevToolsPanel({\n             data-nextjs-devtools-panel-dialog\n             aria-labelledby=\"nextjs__container_dev_tools_panel_label\"\n             aria-describedby=\"nextjs__container_dev_tools_panel_desc\"\n-            onClose={onClose}\n+            onClose={onCloseDevToolsPanel}\n           >\n             <DialogContent>\n-              <DialogHeader>\n+              <DialogHeader data-nextjs-devtools-panel-dialog-header>\n                 <div data-nextjs-devtools-panel-header>\n                   <div data-nextjs-devtools-panel-header-tab-group>\n                     <button\n@@ -111,15 +129,21 @@ export function DevToolsPanel({\n                     </button>\n                     <button\n                       data-nextjs-devtools-panel-header-action-button\n-                      onClick={onClose}\n+                      onClick={onCloseDevToolsPanel}\n                     >\n                       <Cross width={16} height={16} />\n                     </button>\n                   </div>\n                 </div>\n               </DialogHeader>\n               <DialogBody>\n-                <DevToolsPanelTab activeTab={activeTab} />\n+                <DevToolsPanelTab\n+                  activeTab={activeTab}\n+                  devToolsPosition={state.devToolsPosition}\n+                  scale={state.scale}\n+                  handlePositionChange={handlePositionChange}\n+                  handleScaleChange={handleScaleChange}\n+                />\n               </DialogBody>\n             </DialogContent>\n             <DevToolsPanelFooter versionInfo={state.versionInfo} />\n@@ -158,7 +182,6 @@ export const DEVTOOLS_PANEL_STYLES = css`\n     /* TODO: Remove once the content is filled. */\n     min-width: 800px;\n     min-height: 500px;\n-\n     /* This is handled from dialog/styles.ts */\n     max-width: var(--next-dialog-max-width);\n   }"
        },
        {
            "sha": "b132944dc520e0db4163de5f38ad6c60a88bbf47",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/hooks/use-theme.ts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fhooks%2Fuse-theme.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fhooks%2Fuse-theme.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fhooks%2Fuse-theme.ts?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -0,0 +1,14 @@\n+import { useState } from 'react'\n+import { STORAGE_KEY_THEME } from '../../../shared'\n+\n+function getInitialTheme() {\n+  if (typeof localStorage === 'undefined') {\n+    return 'system'\n+  }\n+  const theme = localStorage.getItem(STORAGE_KEY_THEME)\n+  return theme === 'dark' || theme === 'light' ? theme : 'system'\n+}\n+\n+export function useTheme() {\n+  return useState(getInitialTheme())\n+}"
        },
        {
            "sha": "a2271c141523d77fc76a37d4054a697d731dbb29",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/select/select.tsx",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fselect%2Fselect.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fselect%2Fselect.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fselect%2Fselect.tsx?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -0,0 +1,17 @@\n+import { ChevronDownIcon } from '../../icons/chevron-down'\n+\n+export function Select({\n+  children,\n+  prefix,\n+  ...props\n+}: {\n+  prefix?: React.ReactNode\n+} & Omit<React.HTMLProps<HTMLSelectElement>, 'prefix'>) {\n+  return (\n+    <div data-nextjs-select>\n+      {prefix}\n+      <select {...props}>{children}</select>\n+      <ChevronDownIcon width={16} height={16} />\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "1ff10db590499a7dff569a73f3716005de341bd4",
            "filename": "packages/next/src/next-devtools/dev-overlay/dev-overlay.stories.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 9,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -13,7 +13,9 @@ import {\n   ACTION_ERROR_OVERLAY_CLOSE,\n   ACTION_ERROR_OVERLAY_OPEN,\n   ACTION_ERROR_OVERLAY_TOGGLE,\n+  ACTION_DEVTOOLS_SCALE,\n   NEXT_DEV_TOOLS_SCALE,\n+  INITIAL_OVERLAY_STATE,\n } from './shared'\n \n const meta: Meta<typeof DevOverlay> = {\n@@ -39,10 +41,8 @@ export default meta\n type Story = StoryObj<typeof DevOverlay>\n \n const initialState: OverlayState = {\n-  nextId: 0,\n+  ...INITIAL_OVERLAY_STATE,\n   routerType: 'app',\n-  buildError: null,\n-  disableDevIndicator: false,\n   showIndicator: true,\n   errors: [\n     {\n@@ -87,12 +87,6 @@ const initialState: OverlayState = {\n       type: 'runtime',\n     },\n   ],\n-  refreshState: { type: 'idle' },\n-  notFound: false,\n-  buildingIndicator: false,\n-  renderingIndicator: false,\n-  staticIndicator: false,\n-  debugInfo: { devtoolsFrontendUrl: undefined },\n   versionInfo: {\n     installed: '15.2.0',\n     staleness: 'fresh',\n@@ -125,6 +119,9 @@ function useOverlayReducer() {\n         case ACTION_DEVTOOLS_POSITION: {\n           return { ...state, devToolsPosition: action.devToolsPosition }\n         }\n+        case ACTION_DEVTOOLS_SCALE: {\n+          return { ...state, scale: action.scale }\n+        }\n         default: {\n           return state\n         }"
        },
        {
            "sha": "e1bbed1ba0d0825bd77fe88ad9204c4db0cc12f6",
            "filename": "packages/next/src/next-devtools/dev-overlay/dev-overlay.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -27,7 +27,9 @@ export function DevOverlay({\n   return (\n     <ShadowPortal>\n       <CssReset />\n-      <Base scale={scale} />\n+      <Base\n+        scale={process.env.__NEXT_DEVTOOL_NEW_PANEL_UI ? state.scale : scale}\n+      />\n       <Colors />\n       <ComponentStyles />\n       <DarkTheme />"
        },
        {
            "sha": "4b23484f2ec6336dd57dc1290b218beaf93ff6f9",
            "filename": "packages/next/src/next-devtools/dev-overlay/icons/chevron-down.tsx",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Ficons%2Fchevron-down.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Ficons%2Fchevron-down.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Ficons%2Fchevron-down.tsx?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -0,0 +1,12 @@\n+export function ChevronDownIcon(props: React.SVGProps<SVGSVGElement>) {\n+  return (\n+    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" aria-hidden {...props}>\n+      <path\n+        fillRule=\"evenodd\"\n+        clipRule=\"evenodd\"\n+        d=\"M14.0607 5.49999L13.5303 6.03032L8.7071 10.8535C8.31658 11.2441 7.68341 11.2441 7.29289 10.8535L2.46966 6.03032L1.93933 5.49999L2.99999 4.43933L3.53032 4.96966L7.99999 9.43933L12.4697 4.96966L13 4.43933L14.0607 5.49999Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}"
        },
        {
            "sha": "c5cc5652f3d9b26f762024c856edc35210e8e15c",
            "filename": "packages/next/src/next-devtools/dev-overlay/styles/component-styles.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9823f4700347004c3214e000ad41193cf3f4beeb/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx?ref=9823f4700347004c3214e000ad41193cf3f4beeb",
            "patch": "@@ -27,6 +27,7 @@ import { RESTART_SERVER_BUTTON_STYLES } from '../components/errors/error-overlay\n import { DEVTOOLS_PANEL_STYLES } from '../components/devtools-panel/devtools-panel'\n import { DEVTOOLS_PANEL_FOOTER_STYLES } from '../components/devtools-panel/devtools-panel-footer'\n import { DEVTOOLS_PANEL_VERSION_INFO_STYLES } from '../components/devtools-panel/devtools-panel-version-info'\n+import { DEVTOOLS_PANEL_TAB_SETTINGS_STYLES } from '../components/devtools-panel/devtools-panel-tab/settings-tab'\n \n export function ComponentStyles() {\n   return (\n@@ -60,6 +61,7 @@ export function ComponentStyles() {\n         ${DEVTOOLS_PANEL_STYLES}\n         ${DEVTOOLS_PANEL_FOOTER_STYLES}\n         ${DEVTOOLS_PANEL_VERSION_INFO_STYLES}\n+        ${DEVTOOLS_PANEL_TAB_SETTINGS_STYLES}\n       `}\n     </style>\n   )"
        }
    ],
    "stats": {
        "total": 437,
        "additions": 417,
        "deletions": 20
    }
}