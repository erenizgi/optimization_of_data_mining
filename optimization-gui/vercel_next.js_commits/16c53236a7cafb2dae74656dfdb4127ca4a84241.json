{
    "author": "eps1lon",
    "message": "Configure `url` for responses from patched fetch like the original `response.url` (#81507)\n\nThe main config that was missing is enumerability which is relevant for showing properties in the Chrome performance track and inferring shorthands.",
    "sha": "16c53236a7cafb2dae74656dfdb4127ca4a84241",
    "files": [
        {
            "sha": "d87e4558e41e011082bc635f234e0fc0eeaa01db",
            "filename": "packages/next/src/server/lib/clone-response.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/16c53236a7cafb2dae74656dfdb4127ca4a84241/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Fclone-response.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/16c53236a7cafb2dae74656dfdb4127ca4a84241/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Fclone-response.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Fclone-response.ts?ref=16c53236a7cafb2dae74656dfdb4127ca4a84241",
            "patch": "@@ -27,6 +27,10 @@ export function cloneResponse(original: Response): [Response, Response] {\n \n   Object.defineProperty(cloned1, 'url', {\n     value: original.url,\n+    // How the original response.url behaves\n+    configurable: true,\n+    enumerable: true,\n+    writable: false,\n   })\n \n   const cloned2 = new Response(body2, {\n@@ -37,6 +41,10 @@ export function cloneResponse(original: Response): [Response, Response] {\n \n   Object.defineProperty(cloned2, 'url', {\n     value: original.url,\n+    // How the original response.url behaves\n+    configurable: true,\n+    enumerable: true,\n+    writable: false,\n   })\n \n   return [cloned1, cloned2]"
        },
        {
            "sha": "28b04ed5ed808854552623d1b2082108beae801f",
            "filename": "test/development/app-dir/react-performance-track/react-performance-track.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/16c53236a7cafb2dae74656dfdb4127ca4a84241/test%2Fdevelopment%2Fapp-dir%2Freact-performance-track%2Freact-performance-track.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/16c53236a7cafb2dae74656dfdb4127ca4a84241/test%2Fdevelopment%2Fapp-dir%2Freact-performance-track%2Freact-performance-track.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Freact-performance-track%2Freact-performance-track.test.ts?ref=16c53236a7cafb2dae74656dfdb4127ca4a84241",
            "patch": "@@ -29,9 +29,13 @@ describe('react-performance-track', () => {\n     expect(track).toEqual(\n       expect.arrayContaining([\n         {\n-          // TODO: Should include the URL.\n-          name: 'fetch',\n-          properties: expect.arrayContaining([['status', '200']]),\n+          // React might decide to display the shorthand in round brackets differently.\n+          // Double check with React changes if a shorthand change is intended.\n+          name: 'fetch (random)',\n+          properties: expect.arrayContaining([\n+            ['status', '200'],\n+            ['url', '\"https://next-data-api-endpoint.vercel.app/api/random\"'],\n+          ]),\n         },\n       ])\n     )"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 15,
        "deletions": 3
    }
}