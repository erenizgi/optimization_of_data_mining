{
    "author": "devjiwonchoi",
    "message": "[Breaking] Remove AMP codemod (#84356)",
    "sha": "643eb60de0e29684538448d9105a508de1699d50",
    "files": [
        {
            "sha": "6136f9cbe4094c44d4999414d0088c346fcd078e",
            "filename": "packages/next-codemod/lib/utils.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext-codemod%2Flib%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext-codemod%2Flib%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Flib%2Futils.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -42,11 +42,6 @@ export const TRANSFORMER_INQUIRER_CHOICES = [\n     value: 'url-to-withrouter',\n     version: '6.0.0',\n   },\n-  {\n-    title: 'Transforms the withAmp HOC into Next.js 9 page configuration',\n-    value: 'withamp-to-config',\n-    version: '8.0.0',\n-  },\n   {\n     title:\n       'Transforms anonymous components into named components to make sure they work with Fast Refresh',"
        },
        {
            "sha": "8ee8286d0550aabb31db5d7ab81aaa15689b6166",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp-inline.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-inline.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-inline.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-inline.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,5 +0,0 @@\n-import { withAmp, withAmp as alternative } from 'next/amp'\n-\n-export default alternative(function Home() {\n-  return <h1>My AMP Page</h1>\n-})"
        },
        {
            "sha": "1cabea829471f45d0444593945e59b818d789f5a",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp-inline.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-inline.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-inline.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-inline.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,7 +0,0 @@\n-export default function Home() {\n-  return <h1>My AMP Page</h1>\n-};\n-\n-export const config = {\n-  amp: true\n-};"
        },
        {
            "sha": "4c5eaf2ed30b54d26ed41e99d696433df7438612",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp-with-config-dupe.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-dupe.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-dupe.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-dupe.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,12 +0,0 @@\n-import { withAmp } from 'next/amp'\n-\n-function Home() {\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export const config = {\n-  foo: 'bar',\n-  amp: false\n-}\n-\n-export default withAmp(Home)"
        },
        {
            "sha": "27b478ca8ea026a9f0ba4a7061eeecc4db7c9442",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp-with-config-dupe.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-dupe.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-dupe.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-dupe.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,10 +0,0 @@\n-function Home() {\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export const config = {\n-  foo: 'bar',\n-  amp: true\n-}\n-\n-export default Home;"
        },
        {
            "sha": "a421ce85c10f028b2ab1a29fc3a8e5423a46710b",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp-with-config-var.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-var.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-var.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-var.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,14 +0,0 @@\n-import { withAmp } from 'next/amp'\n-\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-const config = {\n-  foo: 'bar',\n-}\n-\n-export default withAmp(Home)\n-\n-export { config }"
        },
        {
            "sha": "d80bfcfc7ffd22f60ac68d5e6664b8d42048a5ee",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp-with-config-var.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-var.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-var.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config-var.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,13 +0,0 @@\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-const config = {\n-  foo: 'bar',\n-  amp: true\n-}\n-\n-export default Home;\n-\n-export { config }"
        },
        {
            "sha": "d98d63a4e2147cf59558102b414ec0bd9ed26d38",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp-with-config.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,12 +0,0 @@\n-import { withAmp, useAmp } from 'next/amp'\n-\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export const config = {\n-  foo: 'bar',\n-}\n-\n-export default withAmp(Home)"
        },
        {
            "sha": "1cf6895e61e617c5a234d3d28b237568a7fbfad2",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp-with-config.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp-with-config.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,13 +0,0 @@\n-import { useAmp } from 'next/amp';\n-\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export const config = {\n-  foo: 'bar',\n-  amp: true\n-}\n-\n-export default Home;"
        },
        {
            "sha": "a9b21f59ba39ccea327144d487ecbe0b1e8dae54",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,8 +0,0 @@\n-import { withAmp } from 'next/amp'\n-\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export default withAmp(Home)"
        },
        {
            "sha": "cbd7c4690fb48308fe3a3e97590baaa6e8068861",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/full-amp.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Ffull-amp.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,10 +0,0 @@\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export default Home;\n-\n-export const config = {\n-  amp: true\n-};"
        },
        {
            "sha": "e28aad5f862c7c56764253bfd1eed390c903bf4b",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/hybrid-amp-with-config.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp-with-config.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp-with-config.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp-with-config.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,12 +0,0 @@\n-import { withAmp } from 'next/amp'\n-\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export const config = {\n-  foo: 'bar',\n-}\n-\n-export default withAmp(Home, { hybrid: true })"
        },
        {
            "sha": "901ed4d09a5ef2a17ef92cb0d68c62a9933d4cc9",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/hybrid-amp-with-config.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp-with-config.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp-with-config.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp-with-config.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,11 +0,0 @@\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export const config = {\n-  foo: 'bar',\n-  amp: \"hybrid\"\n-}\n-\n-export default Home;"
        },
        {
            "sha": "6b70454c97a25fe13f9a0265a50583cd8929b941",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/hybrid-amp.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,8 +0,0 @@\n-import { withAmp } from 'next/amp'\n-\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export default withAmp(Home, { hybrid: true })"
        },
        {
            "sha": "85e2d7e53c8b9de47623ac336777ec23ea50c435",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/hybrid-amp.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fhybrid-amp.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,10 +0,0 @@\n-function Home() {\n-  const config = {}\n-  return <h1>My AMP Page</h1>\n-}\n-\n-export default Home;\n-\n-export const config = {\n-  amp: \"hybrid\"\n-};"
        },
        {
            "sha": "36df14997eb861d91f986446b9a73d609bf7214f",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/remove-import-renamed.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-renamed.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-renamed.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-renamed.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1 +0,0 @@\n-import { withAmp as apples } from 'next/amp'"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/remove-import-renamed.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-renamed.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-renamed.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-renamed.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5"
        },
        {
            "sha": "99c6e3837baeba0881e9d9df319fabdf4beeafbb",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/remove-import-single.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-single.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-single.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-single.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1 +0,0 @@\n-import { withAmp, useAmp } from 'next/amp'"
        },
        {
            "sha": "1a971e2d0feb8844b71ab6a195791096b2b835ed",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/remove-import-single.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-single.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-single.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import-single.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1 +0,0 @@\n-import { useAmp } from 'next/amp';"
        },
        {
            "sha": "687189ee59f73ce58349bd625c9d6de1a98e1720",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/remove-import.input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import.input.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import.input.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import.input.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1 +0,0 @@\n-import { withAmp } from 'next/amp'"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "packages/next-codemod/transforms/__testfixtures__/withamp-to-config/remove-import.output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import.output.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import.output.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__testfixtures__%2Fwithamp-to-config%2Fremove-import.output.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5"
        },
        {
            "sha": "5229b56dfd46b8b9af34ba5ab2b4c4aab1e4de71",
            "filename": "packages/next-codemod/transforms/__tests__/withamp-to-config.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 25,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fwithamp-to-config.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fwithamp-to-config.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2F__tests__%2Fwithamp-to-config.test.js?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,25 +0,0 @@\n-/* global jest */\n-jest.autoMockOff()\n-const defineTest = require('jscodeshift/dist/testUtils').defineTest\n-\n-const fixtures = [\n-  'remove-import',\n-  'remove-import-renamed',\n-  'remove-import-single',\n-  'full-amp',\n-  'full-amp-inline',\n-  'full-amp-with-config',\n-  'full-amp-with-config-dupe',\n-  'full-amp-with-config-var',\n-  'hybrid-amp',\n-  'hybrid-amp-with-config',\n-]\n-\n-for (const fixture of fixtures) {\n-  defineTest(\n-    __dirname,\n-    'withamp-to-config',\n-    null,\n-    `withamp-to-config/${fixture}`\n-  )\n-}"
        },
        {
            "sha": "abc9edc4d70e7d1f621ae297e3f49f267520fc01",
            "filename": "packages/next-codemod/transforms/withamp-to-config.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 175,
            "changes": 175,
            "blob_url": "https://github.com/vercel/next.js/blob/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2Fwithamp-to-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/59172894e3bf95d4dea17e2e538947913b3f2fd5/packages%2Fnext-codemod%2Ftransforms%2Fwithamp-to-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2Fwithamp-to-config.ts?ref=59172894e3bf95d4dea17e2e538947913b3f2fd5",
            "patch": "@@ -1,175 +0,0 @@\n-// One-time usage file. You can delete me after running the codemod!\n-\n-function injectAmp(j, o, desiredAmpValue) {\n-  const init = o.node.init\n-\n-  switch (init.type) {\n-    case 'ObjectExpression': {\n-      const overwroteAmpKey = init.properties.some((prop) => {\n-        switch (prop.type) {\n-          case 'Property':\n-          case 'ObjectProperty':\n-            if (!(prop.key.type === 'Identifier' && prop.key.name === 'amp')) {\n-              return false\n-            }\n-\n-            prop.value = desiredAmpValue\n-            return true\n-          default:\n-            return false\n-        }\n-      })\n-\n-      if (!overwroteAmpKey) {\n-        init.properties.push(\n-          j.objectProperty(j.identifier('amp'), desiredAmpValue)\n-        )\n-      }\n-\n-      return true\n-    }\n-    default: {\n-      return false\n-    }\n-  }\n-}\n-\n-export default function transformer(file, api) {\n-  const j = api.jscodeshift.withParser('tsx')\n-  const root = j(file.source)\n-  const done = () => root.toSource()\n-\n-  const imports = root.find(j.ImportDeclaration, {\n-    source: { value: 'next/amp' },\n-  })\n-\n-  if (imports.length < 1) {\n-    return\n-  }\n-\n-  let hadWithAmp = false\n-  const ampImportNames = []\n-\n-  imports.forEach((ampImport) => {\n-    const ampImportShift = j(ampImport)\n-\n-    const withAmpImport = ampImportShift.find(j.ImportSpecifier, {\n-      imported: { name: 'withAmp' },\n-    })\n-\n-    if (withAmpImport.length < 1) {\n-      return\n-    }\n-\n-    hadWithAmp = true\n-    withAmpImport.forEach((element) => {\n-      ampImportNames.push(element.value.local.name)\n-      j(element).remove()\n-    })\n-\n-    if (ampImport.value.specifiers.length === 0) {\n-      ampImportShift.remove()\n-    }\n-  })\n-\n-  if (!hadWithAmp) {\n-    return done()\n-  }\n-\n-  const defaultExportsShift = root.find(j.ExportDefaultDeclaration)\n-  if (defaultExportsShift.length < 1) {\n-    return done()\n-  }\n-\n-  let desiredAmpValue = j.booleanLiteral(true)\n-\n-  const defaultExport = defaultExportsShift.nodes()[0]\n-  const removedWrapper = ampImportNames.some((ampImportName) => {\n-    const ampWrapping = j(defaultExport).find(j.CallExpression, {\n-      callee: { name: ampImportName },\n-    })\n-\n-    if (ampWrapping.length < 1) {\n-      return false\n-    }\n-\n-    ampWrapping.forEach((e) => {\n-      if (e.value.arguments.length < 1) {\n-        j(e).remove()\n-      } else {\n-        const withAmpOptions = e.value.arguments[1]\n-        if (withAmpOptions && withAmpOptions.type === 'ObjectExpression') {\n-          const isHybrid = withAmpOptions.properties.some((prop) => {\n-            if (!(prop.type === 'Property' || prop.type === 'ObjectProperty')) {\n-              return false\n-            }\n-\n-            if (!(prop.key && prop.key.name === 'hybrid')) {\n-              return false\n-            }\n-\n-            return (\n-              (prop.value.type === 'Literal' ||\n-                prop.value.type === 'BooleanLiteral') &&\n-              prop.value.value === true\n-            )\n-          })\n-\n-          if (isHybrid) {\n-            desiredAmpValue = j.stringLiteral('hybrid')\n-          }\n-        }\n-\n-        j(e).replaceWith(e.value.arguments[0])\n-      }\n-    })\n-    return true\n-  })\n-\n-  if (!removedWrapper) {\n-    return done()\n-  }\n-\n-  const namedExportsShift = root.find(j.ExportNamedDeclaration)\n-  const hadExistingConfig = namedExportsShift.some((namedExport) => {\n-    const configExportedObject = j(namedExport).find(j.VariableDeclarator, {\n-      id: { name: 'config' },\n-    })\n-    if (configExportedObject.length > 0) {\n-      return configExportedObject.some((exportedObject) =>\n-        injectAmp(j, exportedObject, desiredAmpValue)\n-      )\n-    }\n-\n-    const configReexported = j(namedExport).find(j.ExportSpecifier, {\n-      local: { name: 'config' },\n-    })\n-    if (configReexported.length > 0) {\n-      const configObjects = root\n-        .findVariableDeclarators('config')\n-        .filter((el) => el.scope.isGlobal)\n-      return configObjects.some((configObject) =>\n-        injectAmp(j, configObject, desiredAmpValue)\n-      )\n-    }\n-\n-    return false\n-  })\n-\n-  if (!hadExistingConfig) {\n-    defaultExportsShift.insertAfter(\n-      j.exportNamedDeclaration(\n-        j.variableDeclaration('const', [\n-          j.variableDeclarator(\n-            j.identifier('config'),\n-            j.objectExpression([\n-              j.objectProperty(j.identifier('amp'), desiredAmpValue),\n-            ])\n-          ),\n-        ])\n-      )\n-    )\n-  }\n-\n-  return done()\n-}"
        },
        {
            "sha": "3aebc838f6faa33432d19ea0dde7355da610ffbb",
            "filename": "test/turbopack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 0,
            "deletions": 18,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fturbopack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fturbopack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-dev-tests-manifest.json?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -392,24 +392,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"packages/next-codemod/transforms/__tests__/withamp-to-config.test.js\": {\n-    \"passed\": [\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/full-amp\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/full-amp-inline\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/full-amp-with-config\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/full-amp-with-config-dupe\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/full-amp-with-config-var\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/hybrid-amp\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/hybrid-amp-with-config\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/remove-import\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/remove-import-renamed\\\" data\",\n-      \"withamp-to-config transforms correctly using \\\"withamp-to-config/remove-import-single\\\" data\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"packages/next/src/build/analysis/get-page-static-info.test.ts\": {\n     \"passed\": [\n       \"get-page-static-infos getMiddlewareMatchers matches /:id and /:id.json\","
        }
    ],
    "stats": {
        "total": 372,
        "additions": 0,
        "deletions": 372
    }
}